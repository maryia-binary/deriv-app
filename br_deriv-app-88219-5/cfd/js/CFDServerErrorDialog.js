!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@deriv/components"),require("@deriv/shared"),require("@deriv/translations"),require("mobx"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["@deriv/components","@deriv/shared","@deriv/translations","mobx","react","react-dom"],e):"object"==typeof exports?exports["@deriv/cfd"]=e(require("@deriv/components"),require("@deriv/shared"),require("@deriv/translations"),require("mobx"),require("react"),require("react-dom")):t["@deriv/cfd"]=e(t["@deriv/components"],t["@deriv/shared"],t["@deriv/translations"],t.mobx,t.react,t["react-dom"])}(self,((t,e,r,n,i,s)=>(()=>{var o={"../../node_modules/lodash.merge/index.js":(t,e,r)=>{t=r.nmd(t);var n="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",c="[object Null]",l="[object Object]",h="[object Proxy]",d="[object Undefined]",f=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[s]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y[a]=y["[object Map]"]=y["[object Number]"]=y[l]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var v,b,m,g="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,w="object"==typeof self&&self&&self.Object===Object&&self,O=g||w||Function("return this")(),_=e&&!e.nodeType&&e,P=_&&t&&!t.nodeType&&t,x=P&&P.exports===_,q=x&&g.process,S=function(){try{return P&&P.require&&P.require("util").types||q&&q.binding&&q.binding("util")}catch(t){}}(),j=S&&S.isTypedArray,A=Array.prototype,C=Function.prototype,M=Object.prototype,E=O["__core-js_shared__"],F=C.toString,D=M.hasOwnProperty,k=(v=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",T=M.toString,R=F.call(Object),I=RegExp("^"+F.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=x?O.Buffer:void 0,K=O.Symbol,Q=O.Uint8Array,U=(z&&z.allocUnsafe,b=Object.getPrototypeOf,m=Object,function(t){return b(m(t))}),N=Object.create,L=M.propertyIsEnumerable,H=A.splice,B=K?K.toStringTag:void 0,G=function(){try{var t=dt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),$=z?z.isBuffer:void 0,W=Math.max,J=Date.now,V=dt(O,"Map"),Y=dt(Object,"create"),X=function(){function t(){}return function(e){if(!xt(e))return{};if(N)return N(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Z(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function et(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function rt(t){var e=this.__data__=new tt(t);this.size=e.size}function nt(t,e,r){(void 0!==r&&!bt(t[e],r)||void 0===r&&!(e in t))&&ot(t,e,r)}function it(t,e,r){var n=t[e];D.call(t,e)&&bt(n,r)&&(void 0!==r||e in t)||ot(t,e,r)}function st(t,e){for(var r=t.length;r--;)if(bt(t[r][0],e))return r;return-1}function ot(t,e,r){"__proto__"==e&&G?G(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}Z.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},Z.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Z.prototype.get=function(t){var e=this.__data__;if(Y){var r=e[t];return r===n?void 0:r}return D.call(e,t)?e[t]:void 0},Z.prototype.has=function(t){var e=this.__data__;return Y?void 0!==e[t]:D.call(e,t)},Z.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Y&&void 0===e?n:e,this},tt.prototype.clear=function(){this.__data__=[],this.size=0},tt.prototype.delete=function(t){var e=this.__data__,r=st(e,t);return!(r<0||(r==e.length-1?e.pop():H.call(e,r,1),--this.size,0))},tt.prototype.get=function(t){var e=this.__data__,r=st(e,t);return r<0?void 0:e[r][1]},tt.prototype.has=function(t){return st(this.__data__,t)>-1},tt.prototype.set=function(t,e){var r=this.__data__,n=st(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},et.prototype.clear=function(){this.size=0,this.__data__={hash:new Z,map:new(V||tt),string:new Z}},et.prototype.delete=function(t){var e=ht(this,t).delete(t);return this.size-=e?1:0,e},et.prototype.get=function(t){return ht(this,t).get(t)},et.prototype.has=function(t){return ht(this,t).has(t)},et.prototype.set=function(t,e){var r=ht(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},rt.prototype.clear=function(){this.__data__=new tt,this.size=0},rt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},rt.prototype.get=function(t){return this.__data__.get(t)},rt.prototype.has=function(t){return this.__data__.has(t)},rt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof tt){var n=r.__data__;if(!V||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new et(n)}return r.set(t,e),this.size=r.size,this};function at(t){return null==t?void 0===t?d:c:B&&B in Object(t)?function(t){var e=D.call(t,B),r=t[B];try{t[B]=void 0;var n=!0}catch(t){}var i=T.call(t);return n&&(e?t[B]=r:delete t[B]),i}(t):function(t){return T.call(t)}(t)}function ut(t){return qt(t)&&at(t)==s}function ct(t,e,r,n,i){t!==e&&function(t,e,r){for(var n=-1,i=Object(t),s=r(t),o=s.length;o--;){var a=s[++n];if(!1===e(i[a],a,i))break}}(e,(function(s,o){if(i||(i=new rt),xt(s))!function(t,e,r,n,i,s,o){var a=yt(t,r),u=yt(e,r),c=o.get(u);if(c)nt(t,r,c);else{var h,d,f,p,y,v=s?s(a,u,r+"",t,e,o):void 0,b=void 0===v;if(b){var m=gt(u),g=!m&&Ot(u),w=!m&&!g&&St(u);v=u,m||g||w?gt(a)?v=a:qt(y=a)&&wt(y)?v=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(a):g?(b=!1,v=function(t,e){return t.slice()}(u)):w?(b=!1,p=new(f=(h=u).buffer).constructor(f.byteLength),new Q(p).set(new Q(f)),d=p,v=new h.constructor(d,h.byteOffset,h.length)):v=[]:function(t){if(!qt(t)||at(t)!=l)return!1;var e=U(t);if(null===e)return!0;var r=D.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&F.call(r)==R}(u)||mt(u)?(v=a,mt(a)?v=function(t){return function(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],u=void 0;void 0===u&&(u=t[a]),i?ot(r,a,u):it(r,a,u)}return r}(t,jt(t))}(a):xt(a)&&!_t(a)||(v=function(t){return"function"!=typeof t.constructor||pt(t)?{}:X(U(t))}(u))):b=!1}b&&(o.set(u,v),i(v,u,n,s,o),o.delete(u)),nt(t,r,v)}}(t,e,o,r,ct,n,i);else{var a=n?n(yt(t,o),s,o+"",t,e,i):void 0;void 0===a&&(a=s),nt(t,o,a)}}),jt)}var lt=G?function(t,e){return G(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:Mt;function ht(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function dt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!xt(t)||function(t){return!!k&&k in t}(t))&&(_t(t)?I:f).test(function(t){if(null!=t){try{return F.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(r)?r:void 0}function ft(t,e){var r=typeof t;return!!(e=null==e?i:e)&&("number"==r||"symbol"!=r&&p.test(t))&&t>-1&&t%1==0&&t<e}function pt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||M)}function yt(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var vt=function(t){var e=0,r=0;return function(){var n=J(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(lt);function bt(t,e){return t===e||t!=t&&e!=e}var mt=ut(function(){return arguments}())?ut:function(t){return qt(t)&&D.call(t,"callee")&&!L.call(t,"callee")},gt=Array.isArray;function wt(t){return null!=t&&Pt(t.length)&&!_t(t)}var Ot=$||function(){return!1};function _t(t){if(!xt(t))return!1;var e=at(t);return e==a||e==u||e==o||e==h}function Pt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function xt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function qt(t){return null!=t&&"object"==typeof t}var St=j?function(t){return function(e){return t(e)}}(j):function(t){return qt(t)&&Pt(t.length)&&!!y[at(t)]};function jt(t){return wt(t)?function(t,e){var r=gt(t),n=!r&&mt(t),i=!r&&!n&&Ot(t),s=!r&&!n&&!i&&St(t),o=r||n||i||s,a=o?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=a.length;for(var c in t)!e&&!D.call(t,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ft(c,u))||a.push(c);return a}(t,!0):function(t){if(!xt(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=pt(t),r=[];for(var n in t)("constructor"!=n||!e&&D.call(t,n))&&r.push(n);return r}(t)}var At,Ct=(At=function(t,e,r){ct(t,e,r)},function(t,e){return vt(function(t,e,r){return e=W(void 0===e?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=W(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,a)}}(t,e,Mt),t+"")}((function(t,e){var r=-1,n=e.length,i=n>1?e[n-1]:void 0,s=n>2?e[2]:void 0;for(i=At.length>3&&"function"==typeof i?(n--,i):void 0,s&&function(t,e,r){if(!xt(r))return!1;var n=typeof e;return!!("number"==n?wt(r)&&ft(e,r.length):"string"==n&&e in r)&&bt(r[e],t)}(e[0],e[1],s)&&(i=n<3?void 0:i,n=1),t=Object(t);++r<n;){var o=e[r];o&&At(t,o,r)}return t})));function Mt(t){return t}t.exports=Ct},"../../node_modules/mobx-persist-store/lib/esm5/index.js":(t,e,r)=>{"use strict";r.d(e,{Ko:()=>y,Rf:()=>v});var n=new Map,i={},s={},o=r("mobx"),a=function(t,e,r){void 0===r&&(r="")},u=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))},c=function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},l=function(){function t(t){this.options=t}return t.prototype.setItem=function(t,e){var r;return u(this,void 0,void 0,(function(){var n,i,s,o,u;return c(this,(function(c){switch(c.label){case 0:return n=this.options,i=n.stringify,s=void 0===i||i,n.debugMode,o=this.options.expireIn?Object.assign({},e,{__mps__:{expireInTimestamp:(l=this.options.expireIn,(new Date).getTime()+l)}}):e,u=s?JSON.stringify(o):o,a(0,"".concat(t," - setItem:"),u),[4,null===(r=this.options.storage)||void 0===r?void 0:r.setItem(t,u)];case 1:return c.sent(),[2]}var l}))}))},t.prototype.getItem=function(t){var e,r;return u(this,void 0,void 0,(function(){var n,i,s,o,u,l;return c(this,(function(c){switch(c.label){case 0:return n=this.options,i=n.removeOnExpiration,s=void 0===i||i,n.debugMode,[4,null===(e=this.options.storage)||void 0===e?void 0:e.getItem(t)];case 1:o=c.sent();try{u=JSON.parse(o)||{}}catch(t){u=o||{}}return h=null===(r=u.__mps__)||void 0===r?void 0:r.expireInTimestamp,d=(new Date).getTime(),l=new Date(h).getTime()<=d,a(0,"".concat(t," - hasExpired"),l),l&&s?[4,this.removeItem(t)]:[3,3];case 2:c.sent(),c.label=3;case 3:return u=l?{}:u,a(0,"".concat(t," - (getItem):"),u),[2,u]}var h,d}))}))},t.prototype.removeItem=function(t){var e;return u(this,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return this.options.debugMode,a(0,"".concat(t," - (removeItem): storage was removed")),[4,null===(e=this.options.storage)||void 0===e?void 0:e.removeItem(t)];case 1:return r.sent(),[2]}}))}))},t}(),h=function(t){return t.reduce((function(t,e){return"string"==typeof e?(t.push({key:e,serialize:function(t){return t},deserialize:function(t){return t}}),t):(function(t){return Boolean(t)&&!1===Array.isArray(t)&&"object"==typeof t}(r=e)?["key","serialize","deserialize"].every((function(t){return!(!r.hasOwnProperty(t)||void 0===t)||(a(0,"".concat(t," not found in SerializableProperty"),{key:t,obj:r}),!1)})):(a(0,0,{obj:r}),0))?(t.push(e),t):t;var r}),[])},d=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))},f=function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},p=function(){function t(t,e,r){var n,u,c,d,f,p,y;void 0===r&&(r={}),this.cancelWatch=null,this.properties=[],this.reactionOptions={},this.storageAdapter=null,this.target=null,this.debugMode=!1,this.isHydrated=!1,this.isPersisting=!1,this.storageName="",this.target=t,this.storageName=e.name,this.properties=h(e.properties),this.reactionOptions=Object.assign({fireImmediately:!0},s,r),this.debugMode=null!==(u=null!==(n=e.debugMode)&&void 0!==n?n:i.debugMode)&&void 0!==u&&u,this.storageAdapter=new l({expireIn:null!==(c=e.expireIn)&&void 0!==c?c:i.expireIn,removeOnExpiration:null===(f=null!==(d=e.removeOnExpiration)&&void 0!==d?d:i.removeOnExpiration)||void 0===f||f,stringify:null===(y=null!==(p=e.stringify)&&void 0!==p?p:i.stringify)||void 0===y||y,storage:e.storage?e.storage:i.storage,debugMode:this.debugMode}),(0,o.makeObservable)(this,{clearPersistedStore:o.action,hydrateStore:o.action,isHydrated:o.observable,isPersisting:o.observable,pausePersisting:o.action,startPersisting:o.action,stopPersisting:o.action},{autoBind:!0,deep:!1}),this.storageAdapter.options.storage,this.storageName,a(this.debugMode,"".concat(this.storageName," - (makePersistable)"),{properties:this.properties,storageAdapter:this.storageAdapter,reactionOptions:this.reactionOptions})}return t.prototype.init=function(){return d(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return[4,this.hydrateStore()];case 1:return t.sent(),this.startPersisting(),[2,this]}}))}))},t.prototype.hydrateStore=function(){return d(this,void 0,void 0,(function(){var t,e,r,n=this;return f(this,(function(i){switch(i.label){case 0:return t=Boolean(this.cancelWatch),this.isPersisting&&this.pausePersisting(),(0,o.runInAction)((function(){n.isHydrated=!1,a(n.debugMode,"".concat(n.storageName," - (hydrateStore) isHydrated:"),n.isHydrated)})),this.storageAdapter&&this.target?[4,this.storageAdapter.getItem(this.storageName)]:[3,2];case 1:e=i.sent(),r=this.target,e&&(0,o.runInAction)((function(){n.properties.forEach((function(t){var n;if([r.hasOwnProperty(t.key),void 0!==e[t.key]].every(Boolean)){var i=e[t.key];r[t.key]instanceof o.ObservableMap&&(n=i,Array.isArray(n)&&n.every((function(t){return Array.isArray(t)})))?r[t.key]=t.deserialize(new Map(i)):r[t.key]=t.deserialize(i)}}))})),i.label=2;case 2:return(0,o.runInAction)((function(){n.isHydrated=!0,a(n.debugMode,"".concat(n.storageName," - isHydrated:"),n.isHydrated)})),t&&this.startPersisting(),[2]}}))}))},t.prototype.startPersisting=function(){var t=this;if(this.storageAdapter&&this.target&&!this.cancelWatch){var e=this.target;this.cancelWatch=(0,o.reaction)((function(){var r={};return t.properties.forEach((function(t){var n=(0,o.isComputedProp)(e,t.key),i=(0,o.isAction)(e[t.key]);if(String(t.key),String(t.key),!n&&!i){var s=t.serialize(e[t.key]);if(s instanceof o.ObservableMap){var a=[];s.forEach((function(t,e){a.push([e,(0,o.toJS)(t)])})),s=a}r[t.key]=(0,o.toJS)(s)}})),r}),(function(e){return d(t,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.storageAdapter?[4,this.storageAdapter.setItem(this.storageName,e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}),this.reactionOptions),this.isPersisting=!0,a(this.debugMode,"".concat(this.storageName," - (startPersisting) isPersisting:"),this.isPersisting)}},t.prototype.pausePersisting=function(){this.isPersisting=!1,a(this.debugMode,"".concat(this.storageName," - pausePersisting (isPersisting):"),this.isPersisting),this.cancelWatch&&(this.cancelWatch(),this.cancelWatch=null)},t.prototype.stopPersisting=function(){this.pausePersisting(),a(this.debugMode,"".concat(this.storageName," - (stopPersisting)")),n.delete(this.target),this.cancelWatch=null,this.properties=[],this.reactionOptions={},this.storageAdapter=null,this.target=null},t.prototype.clearPersistedStore=function(){return d(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.storageAdapter?(a(this.debugMode,"".concat(this.storageName," - (clearPersistedStore)")),[4,this.storageAdapter.removeItem(this.storageName)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.getPersistedStore=function(){return d(this,void 0,void 0,(function(){return f(this,(function(t){return this.storageAdapter?(a(this.debugMode,"".concat(this.storageName," - (getPersistedStore)")),[2,this.storageAdapter.getItem(this.storageName)]):[2,null]}))}))},t}(),y=function(t,e,r){return function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((n=n.apply(t,e||[])).next())}))}(void 0,void 0,void 0,(function(){var i;return function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(s){return i=new p(t,e,r),Array.from(n.values()).map((function(t){return t.storageName})).includes(i.storageName),i.storageName,n.set(t,i),[2,i.init()]}))}))},v=function(t){var e;null===(e=n.get(t))||void 0===e||e.stopPersisting()}},"../../node_modules/mobx-react-lite/es/index.js":(t,e,r)=>{"use strict";r.d(e,{Pi:()=>w});var n=r("mobx"),i=r("react"),s=r.n(i);if(!i.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!n.makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var o=r("react-dom");function a(t){return(0,n.getDependencyTree)(t)}var u=function(){function t(t){var e=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(t){void 0===t&&(t=1e4),clearTimeout(e.sweepTimeout),e.sweepTimeout=void 0;var r=Date.now();e.registrations.forEach((function(n,i){r-n.registeredAt>=t&&(e.finalize(n.value),e.registrations.delete(i))})),e.registrations.size>0&&e.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e,r){this.registrations.set(r,{value:e,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),t}(),c=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:u)((function(t){var e;null===(e=t.reaction)||void 0===e||e.dispose(),t.reaction=null})),l=!1;function h(){return l}var d=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o};function f(t){return"observer".concat(t)}var p=function(){};function y(){return new p}function v(t,e){if(void 0===e&&(e="observed"),h())return t();var r=d(s().useState(y),1)[0],i=d(s().useState(),2)[1],o=function(){return i([])},u=s().useRef(null);u.current||(u.current={reaction:null,mounted:!1,changedBeforeMount:!1});var l,p,v=u.current;if(v.reaction||(v.reaction=new n.Reaction(f(e),(function(){v.mounted?o():v.changedBeforeMount=!0})),c.register(r,v,v)),s().useDebugValue(v.reaction,a),s().useEffect((function(){return c.unregister(v),v.mounted=!0,v.reaction?v.changedBeforeMount&&(v.changedBeforeMount=!1,o()):(v.reaction=new n.Reaction(f(e),(function(){o()})),o()),function(){v.reaction.dispose(),v.reaction=null,v.mounted=!1,v.changedBeforeMount=!1}}),[]),v.reaction.track((function(){try{l=t()}catch(t){p=t}})),p)throw p;return l}var b="function"==typeof Symbol&&Symbol.for,m=b?Symbol.for("react.forward_ref"):"function"==typeof i.forwardRef&&(0,i.forwardRef)((function(t){return null})).$$typeof,g=b?Symbol.for("react.memo"):"function"==typeof i.memo&&(0,i.memo)((function(t){return null})).$$typeof;function w(t,e){var r;if(g&&t.$$typeof===g)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(h())return t;var n=null!==(r=null==e?void 0:e.forwardRef)&&void 0!==r&&r,s=t,o=t.displayName||t.name;if(m&&t.$$typeof===m&&(n=!0,"function"!=typeof(s=t.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a,u,c=function(t,e){return v((function(){return s(t,e)}),o)};return""!==o&&(c.displayName=o),t.contextTypes&&(c.contextTypes=t.contextTypes),n&&(c=(0,i.forwardRef)(c)),c=(0,i.memo)(c),a=t,u=c,Object.keys(a).forEach((function(t){_[t]||Object.defineProperty(u,t,Object.getOwnPropertyDescriptor(a,t))})),c}var O,_={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};(O=o.unstable_batchedUpdates)||(O=function(t){t()}),(0,n.configure)({reactionScheduler:O}),c.finalizeAllImmediately},"../stores/src/index.ts":(t,e,r)=>{"use strict";r.d(e,{Pi:()=>n.Pi,oR:()=>a});var n=r("../../node_modules/mobx-react-lite/es/index.js"),i=r("react"),s=r.n(i);const o=(0,i.createContext)(null);r("mobx"),r("../../node_modules/mobx-persist-store/lib/esm5/index.js"),new(r("../../node_modules/@tanstack/query-core/build/lib/queryClient.mjs").S),r("@deriv/shared");const a=function(){var t=s().useContext(o);if(!t)throw new Error("useStore must be used within StoreProvider");return t};r("../../node_modules/lodash.merge/index.js")},"@deriv/components":e=>{"use strict";e.exports=t},"@deriv/shared":t=>{"use strict";t.exports=e},"@deriv/translations":t=>{"use strict";t.exports=r},mobx:t=>{"use strict";t.exports=n},react:t=>{"use strict";t.exports=i},"react-dom":t=>{"use strict";t.exports=s},"../../node_modules/@tanstack/query-core/build/lib/queryClient.mjs":(t,e,r)=>{"use strict";r.d(e,{S:()=>I});const n="undefined"==typeof window||"Deno"in window;function i(){}function s(t,e,r){return b(t)?"function"==typeof e?{...r,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function o(t,e,r){return b(t)?[{...e,queryKey:t},r]:[t||{},e]}function a(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(b(o))if(n){if(e.queryHash!==c(o,e.options))return!1}else if(!h(e.queryKey,o))return!1;if("all"!==r){const t=e.isActive();if("active"===r&&!t)return!1;if("inactive"===r&&t)return!1}return!("boolean"==typeof a&&e.isStale()!==a||void 0!==i&&i!==e.state.fetchStatus||s&&!s(e))}function u(t,e){const{exact:r,fetching:n,predicate:i,mutationKey:s}=t;if(b(s)){if(!e.options.mutationKey)return!1;if(r){if(l(e.options.mutationKey)!==l(s))return!1}else if(!h(e.options.mutationKey,s))return!1}return!("boolean"==typeof n&&"loading"===e.state.status!==n||i&&!i(e))}function c(t,e){return((null==e?void 0:e.queryKeyHashFn)||l)(t)}function l(t){return JSON.stringify(t,((t,e)=>y(e)?Object.keys(e).sort().reduce(((t,r)=>(t[r]=e[r],t)),{}):e))}function h(t,e){return d(t,e)}function d(t,e){return t===e||typeof t==typeof e&&!(!t||!e||"object"!=typeof t||"object"!=typeof e)&&!Object.keys(e).some((r=>!d(t[r],e[r])))}function f(t,e){if(t===e)return t;const r=p(t)&&p(e);if(r||y(t)&&y(e)){const n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),s=i.length,o=r?[]:{};let a=0;for(let n=0;n<s;n++){const s=r?n:i[n];o[s]=f(t[s],e[s]),o[s]===t[s]&&a++}return n===s&&a===n?t:o}return e}function p(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function y(t){if(!v(t))return!1;const e=t.constructor;if(void 0===e)return!0;const r=e.prototype;return!!v(r)&&!!r.hasOwnProperty("isPrototypeOf")}function v(t){return"[object Object]"===Object.prototype.toString.call(t)}function b(t){return Array.isArray(t)}function m(t){return new Promise((e=>{setTimeout(e,t)}))}function g(t){m(0).then(t)}function w(t,e,r){return null!=r.isDataEqual&&r.isDataEqual(t,e)?t:"function"==typeof r.structuralSharing?r.structuralSharing(t,e):!1!==r.structuralSharing?f(t,e):e}const O=console,_=function(){let t=[],e=0,r=t=>{t()},n=t=>{t()};const i=n=>{e?t.push(n):g((()=>{r(n)}))},s=()=>{const e=t;t=[],e.length&&g((()=>{n((()=>{e.forEach((t=>{r(t)}))}))}))};return{batch:t=>{let r;e++;try{r=t()}finally{e--,e||s()}return r},batchCalls:t=>(...e)=>{i((()=>{t(...e)}))},schedule:i,setNotifyFunction:t=>{r=t},setBatchNotifyFunction:t=>{n=t}}}();class P{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.push(t),this.onSubscribe(),()=>{this.listeners=this.listeners.filter((e=>e!==t)),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const x=new class extends P{constructor(){super(),this.setup=t=>{if(!n&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),()=>{window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()}))}setFocused(t){this.focused=t,t&&this.onFocus()}onFocus(){this.listeners.forEach((t=>{t()}))}isFocused(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}},q=new class extends P{constructor(){super(),this.setup=t=>{if(!n&&window.addEventListener){const e=()=>t();return window.addEventListener("online",e,!1),window.addEventListener("offline",e,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setOnline(t):this.onOnline()}))}setOnline(t){this.online=t,t&&this.onOnline()}onOnline(){this.listeners.forEach((t=>{t()}))}isOnline(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine}};function S(t){return Math.min(1e3*2**t,3e4)}function j(t){return"online"!==(null!=t?t:"online")||q.isOnline()}class A{constructor(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent}}function C(t){return t instanceof A}function M(t){let e,r,n,i=!1,s=0,o=!1;const a=new Promise(((t,e)=>{r=t,n=e})),u=()=>!x.isFocused()||"always"!==t.networkMode&&!q.isOnline(),c=n=>{o||(o=!0,null==t.onSuccess||t.onSuccess(n),null==e||e(),r(n))},l=r=>{o||(o=!0,null==t.onError||t.onError(r),null==e||e(),n(r))},h=()=>new Promise((r=>{e=t=>{const e=o||!u();return e&&r(t),e},null==t.onPause||t.onPause()})).then((()=>{e=void 0,o||null==t.onContinue||t.onContinue()})),d=()=>{if(o)return;let e;try{e=t.fn()}catch(t){e=Promise.reject(t)}Promise.resolve(e).then(c).catch((e=>{var r,n;if(o)return;const a=null!=(r=t.retry)?r:3,c=null!=(n=t.retryDelay)?n:S,f="function"==typeof c?c(s,e):c,p=!0===a||"number"==typeof a&&s<a||"function"==typeof a&&a(s,e);!i&&p?(s++,null==t.onFail||t.onFail(s,e),m(f).then((()=>{if(u())return h()})).then((()=>{i?l(e):d()}))):l(e)}))};return j(t.networkMode)?d():h().then(d),{promise:a,cancel:e=>{o||(l(new A(e)),null==t.abort||t.abort())},continue:()=>(null==e?void 0:e())?a:Promise.resolve(),cancelRetry:()=>{i=!0},continueRetry:()=>{i=!1}}}class E{destroy(){this.clearGcTimeout()}scheduleGc(){var t;this.clearGcTimeout(),"number"==typeof(t=this.cacheTime)&&t>=0&&t!==1/0&&(this.gcTimeout=setTimeout((()=>{this.optionalRemove()}),this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,null!=t?t:n?1/0:3e5)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class F extends E{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||O,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||function(t){const e="function"==typeof t.initialData?t.initialData():t.initialData,r=void 0!==e,n=r?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.cache.remove(this)}setData(t,e){const r=w(this.state.data,t,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:null==e?void 0:e.updatedAt,manual:null==e?void 0:e.manual}),r}setState(t,e){this.dispatch({type:"setState",state:t,setStateOptions:e})}cancel(t){var e;const r=this.promise;return null==(e=this.retryer)||e.cancel(t),r?r.then(i).catch(i):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some((t=>!1!==t.options.enabled))}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some((t=>t.getCurrentResult().isStale))}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!function(t,e){return Math.max(t+(e||0)-Date.now(),0)}(this.state.dataUpdatedAt,t)}onFocus(){var t;const e=this.observers.find((t=>t.shouldFetchOnWindowFocus()));e&&e.refetch({cancelRefetch:!1}),null==(t=this.retryer)||t.continue()}onOnline(){var t;const e=this.observers.find((t=>t.shouldFetchOnReconnect()));e&&e.refetch({cancelRefetch:!1}),null==(t=this.retryer)||t.continue()}addObserver(t){-1===this.observers.indexOf(t)&&(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){-1!==this.observers.indexOf(t)&&(this.observers=this.observers.filter((e=>e!==t)),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,e){var r,n;if("idle"!==this.state.fetchStatus)if(this.state.dataUpdatedAt&&null!=e&&e.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var i;return null==(i=this.retryer)||i.continueRetry(),this.promise}if(t&&this.setOptions(t),!this.options.queryFn){const t=this.observers.find((t=>t.options.queryFn));t&&this.setOptions(t.options)}Array.isArray(this.options.queryKey);const s=function(){if("function"==typeof AbortController)return new AbortController}(),o={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},a=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>{if(s)return this.abortSignalConsumed=!0,s.signal}})};a(o);const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(o)):Promise.reject("Missing queryFn")};var c;a(u),null==(r=this.options.behavior)||r.onFetch(u),this.revertState=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==(null==(n=u.fetchOptions)?void 0:n.meta))&&this.dispatch({type:"fetch",meta:null==(c=u.fetchOptions)?void 0:c.meta});const l=t=>{var e,r,n,i;C(t)&&t.silent||this.dispatch({type:"error",error:t}),C(t)||(null==(e=(r=this.cache.config).onError)||e.call(r,t,this),null==(n=(i=this.cache.config).onSettled)||n.call(i,this.state.data,t,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=M({fn:u.fetchFn,abort:null==s?void 0:s.abort.bind(s),onSuccess:t=>{var e,r,n,i;void 0!==t?(this.setData(t),null==(e=(r=this.cache.config).onSuccess)||e.call(r,t,this),null==(n=(i=this.cache.config).onSettled)||n.call(i,t,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1):l(new Error("undefined"))},onError:l,onFail:(t,e)=>{this.dispatch({type:"failed",failureCount:t,error:e})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){this.state=(e=>{var r,n;switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null!=(r=t.meta)?r:null,fetchStatus:j(this.options.networkMode)?"fetching":"paused",...!e.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...e,data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(n=t.dataUpdatedAt)?n:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return C(i)&&i.revert&&this.revertState?{...this.revertState}:{...e,error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),_.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate(t)})),this.cache.notify({query:this,type:"updated",action:t})}))}}class D extends P{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,e,r){var n;const i=e.queryKey,s=null!=(n=e.queryHash)?n:c(i,e);let o=this.get(s);return o||(o=new F({cache:this,logger:t.getLogger(),queryKey:i,queryHash:s,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const e=this.queriesMap[t.queryHash];e&&(t.destroy(),this.queries=this.queries.filter((e=>e!==t)),e===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){_.batch((()=>{this.queries.forEach((t=>{this.remove(t)}))}))}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,e){const[r]=o(t,e);return void 0===r.exact&&(r.exact=!0),this.queries.find((t=>a(r,t)))}findAll(t,e){const[r]=o(t,e);return Object.keys(r).length>0?this.queries.filter((t=>a(r,t))):this.queries}notify(t){_.batch((()=>{this.listeners.forEach((e=>{e(t)}))}))}onFocus(){_.batch((()=>{this.queries.forEach((t=>{t.onFocus()}))}))}onOnline(){_.batch((()=>{this.queries.forEach((t=>{t.onOnline()}))}))}}class k extends E{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||O,this.observers=[],this.state=t.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0},this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){-1===this.observers.indexOf(t)&&(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter((e=>e!==t)),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||("loading"===this.state.status?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,e;return null!=(t=null==(e=this.retryer)?void 0:e.continue())?t:this.execute()}async execute(){const t=()=>{var t;return this.retryer=M({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(t,e)=>{this.dispatch({type:"failed",failureCount:t,error:e})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},e="loading"===this.state.status;try{var r,n,i,s,o,a,u,c;if(!e){var l,h,d,f;this.dispatch({type:"loading",variables:this.options.variables}),await(null==(l=(h=this.mutationCache.config).onMutate)?void 0:l.call(h,this.state.variables,this));const t=await(null==(d=(f=this.options).onMutate)?void 0:d.call(f,this.state.variables));t!==this.state.context&&this.dispatch({type:"loading",context:t,variables:this.state.variables})}const p=await t();return await(null==(r=(n=this.mutationCache.config).onSuccess)?void 0:r.call(n,p,this.state.variables,this.state.context,this)),await(null==(i=(s=this.options).onSuccess)?void 0:i.call(s,p,this.state.variables,this.state.context)),await(null==(o=(a=this.mutationCache.config).onSettled)?void 0:o.call(a,p,null,this.state.variables,this.state.context,this)),await(null==(u=(c=this.options).onSettled)?void 0:u.call(c,p,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:p}),p}catch(t){try{var p,y,v,b,m,g,w,O;throw await(null==(p=(y=this.mutationCache.config).onError)?void 0:p.call(y,t,this.state.variables,this.state.context,this)),await(null==(v=(b=this.options).onError)?void 0:v.call(b,t,this.state.variables,this.state.context)),await(null==(m=(g=this.mutationCache.config).onSettled)?void 0:m.call(g,void 0,t,this.state.variables,this.state.context,this)),await(null==(w=(O=this.options).onSettled)?void 0:w.call(O,void 0,t,this.state.variables,this.state.context)),t}finally{this.dispatch({type:"error",error:t})}}}dispatch(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"loading":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!j(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...e,...t.state}}})(this.state),_.batch((()=>{this.observers.forEach((e=>{e.onMutationUpdate(t)})),this.mutationCache.notify({mutation:this,type:"updated",action:t})}))}}class T extends P{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,e,r){const n=new k({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(e),state:r,defaultOptions:e.mutationKey?t.getMutationDefaults(e.mutationKey):void 0});return this.add(n),n}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter((e=>e!==t)),this.notify({type:"removed",mutation:t})}clear(){_.batch((()=>{this.mutations.forEach((t=>{this.remove(t)}))}))}getAll(){return this.mutations}find(t){return void 0===t.exact&&(t.exact=!0),this.mutations.find((e=>u(t,e)))}findAll(t){return this.mutations.filter((e=>u(t,e)))}notify(t){_.batch((()=>{this.listeners.forEach((e=>{e(t)}))}))}resumePausedMutations(){var t;return this.resuming=(null!=(t=this.resuming)?t:Promise.resolve()).then((()=>{const t=this.mutations.filter((t=>t.state.isPaused));return _.batch((()=>t.reduce(((t,e)=>t.then((()=>e.continue().catch(i)))),Promise.resolve())))})).then((()=>{this.resuming=void 0})),this.resuming}}function R(t,e){return null==t.getNextPageParam?void 0:t.getNextPageParam(e[e.length-1],e)}class I{constructor(t={}){this.queryCache=t.queryCache||new D,this.mutationCache=t.mutationCache||new T,this.logger=t.logger||O,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,1===this.mountCount&&(this.unsubscribeFocus=x.subscribe((()=>{x.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())})),this.unsubscribeOnline=q.subscribe((()=>{q.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())})))}unmount(){var t,e;this.mountCount--,0===this.mountCount&&(null==(t=this.unsubscribeFocus)||t.call(this),this.unsubscribeFocus=void 0,null==(e=this.unsubscribeOnline)||e.call(this),this.unsubscribeOnline=void 0)}isFetching(t,e){const[r]=o(t,e);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,e){var r;return null==(r=this.queryCache.find(t,e))?void 0:r.state.data}ensureQueryData(t,e,r){const n=s(t,e,r),i=this.getQueryData(n.queryKey);return i?Promise.resolve(i):this.fetchQuery(n)}getQueriesData(t){return this.getQueryCache().findAll(t).map((({queryKey:t,state:e})=>[t,e.data]))}setQueryData(t,e,r){const n=this.queryCache.find(t),i=function(t,e){return"function"==typeof t?t(e):t}(e,null==n?void 0:n.state.data);if(void 0===i)return;const o=s(t),a=this.defaultQueryOptions(o);return this.queryCache.build(this,a).setData(i,{...r,manual:!0})}setQueriesData(t,e,r){return _.batch((()=>this.getQueryCache().findAll(t).map((({queryKey:t})=>[t,this.setQueryData(t,e,r)]))))}getQueryState(t,e){var r;return null==(r=this.queryCache.find(t,e))?void 0:r.state}removeQueries(t,e){const[r]=o(t,e),n=this.queryCache;_.batch((()=>{n.findAll(r).forEach((t=>{n.remove(t)}))}))}resetQueries(t,e,r){const[n,i]=o(t,e,r),s=this.queryCache,a={type:"active",...n};return _.batch((()=>(s.findAll(n).forEach((t=>{t.reset()})),this.refetchQueries(a,i))))}cancelQueries(t,e,r){const[n,s={}]=o(t,e,r);void 0===s.revert&&(s.revert=!0);const a=_.batch((()=>this.queryCache.findAll(n).map((t=>t.cancel(s)))));return Promise.all(a).then(i).catch(i)}invalidateQueries(t,e,r){const[n,i]=o(t,e,r);return _.batch((()=>{var t,e;if(this.queryCache.findAll(n).forEach((t=>{t.invalidate()})),"none"===n.refetchType)return Promise.resolve();const r={...n,type:null!=(t=null!=(e=n.refetchType)?e:n.type)?t:"active"};return this.refetchQueries(r,i)}))}refetchQueries(t,e,r){const[n,s]=o(t,e,r),a=_.batch((()=>this.queryCache.findAll(n).filter((t=>!t.isDisabled())).map((t=>{var e;return t.fetch(void 0,{...s,cancelRefetch:null==(e=null==s?void 0:s.cancelRefetch)||e,meta:{refetchPage:n.refetchPage}})}))));let u=Promise.all(a).then(i);return null!=s&&s.throwOnError||(u=u.catch(i)),u}fetchQuery(t,e,r){const n=s(t,e,r),i=this.defaultQueryOptions(n);void 0===i.retry&&(i.retry=!1);const o=this.queryCache.build(this,i);return o.isStaleByTime(i.staleTime)?o.fetch(i):Promise.resolve(o.state.data)}prefetchQuery(t,e,r){return this.fetchQuery(t,e,r).then(i).catch(i)}fetchInfiniteQuery(t,e,r){const n=s(t,e,r);return n.behavior={onFetch:t=>{t.fetchFn=()=>{var e,r,n,i,s,o;const a=null==(e=t.fetchOptions)||null==(r=e.meta)?void 0:r.refetchPage,u=null==(n=t.fetchOptions)||null==(i=n.meta)?void 0:i.fetchMore,c=null==u?void 0:u.pageParam,l="forward"===(null==u?void 0:u.direction),h="backward"===(null==u?void 0:u.direction),d=(null==(s=t.state.data)?void 0:s.pages)||[],f=(null==(o=t.state.data)?void 0:o.pageParams)||[];let p=f,y=!1;const v=t.options.queryFn||(()=>Promise.reject("Missing queryFn")),b=(t,e,r,n)=>(p=n?[e,...p]:[...p,e],n?[r,...t]:[...t,r]),m=(e,r,n,i)=>{if(y)return Promise.reject("Cancelled");if(void 0===n&&!r&&e.length)return Promise.resolve(e);const s={queryKey:t.queryKey,pageParam:n,meta:t.options.meta};var o;o=s,Object.defineProperty(o,"signal",{enumerable:!0,get:()=>{var e,r;return null!=(e=t.signal)&&e.aborted?y=!0:null==(r=t.signal)||r.addEventListener("abort",(()=>{y=!0})),t.signal}});const a=v(s);return Promise.resolve(a).then((t=>b(e,n,t,i)))};let g;if(d.length)if(l){const e=void 0!==c,r=e?c:R(t.options,d);g=m(d,e,r)}else if(h){const e=void 0!==c,r=e?c:function(t,e){return null==t.getPreviousPageParam?void 0:t.getPreviousPageParam(e[0],e)}(t.options,d);g=m(d,e,r,!0)}else{p=[];const e=void 0===t.options.getNextPageParam;g=a&&d[0]&&!a(d[0],0,d)?Promise.resolve(b([],f[0],d[0])):m([],e,f[0]);for(let r=1;r<d.length;r++)g=g.then((n=>{if(!a||!d[r]||a(d[r],r,d)){const i=e?f[r]:R(t.options,n);return m(n,e,i)}return Promise.resolve(b(n,f[r],d[r]))}))}else g=m([]);return g.then((t=>({pages:t,pageParams:p})))}}},this.fetchQuery(n)}prefetchInfiniteQuery(t,e,r){return this.fetchInfiniteQuery(t,e,r).then(i).catch(i)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,e){const r=this.queryDefaults.find((e=>l(t)===l(e.queryKey)));r?r.defaultOptions=e:this.queryDefaults.push({queryKey:t,defaultOptions:e})}getQueryDefaults(t){if(!t)return;const e=this.queryDefaults.find((e=>h(t,e.queryKey)));return null==e?void 0:e.defaultOptions}setMutationDefaults(t,e){const r=this.mutationDefaults.find((e=>l(t)===l(e.mutationKey)));r?r.defaultOptions=e:this.mutationDefaults.push({mutationKey:t,defaultOptions:e})}getMutationDefaults(t){if(!t)return;const e=this.mutationDefaults.find((e=>h(t,e.mutationKey)));return null==e?void 0:e.defaultOptions}defaultQueryOptions(t){if(null!=t&&t._defaulted)return t;const e={...this.defaultOptions.queries,...this.getQueryDefaults(null==t?void 0:t.queryKey),...t,_defaulted:!0};return!e.queryHash&&e.queryKey&&(e.queryHash=c(e.queryKey,e)),void 0===e.refetchOnReconnect&&(e.refetchOnReconnect="always"!==e.networkMode),void 0===e.useErrorBoundary&&(e.useErrorBoundary=!!e.suspense),e}defaultMutationOptions(t){return null!=t&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(null==t?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}}},a={};function u(t){var e=a[t];if(void 0!==e)return e.exports;var r=a[t]={id:t,loaded:!1,exports:{}};return o[t](r,r.exports,u),r.loaded=!0,r.exports}u.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return u.d(e,{a:e}),e},u.d=(t,e)=>{for(var r in e)u.o(e,r)&&!u.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),u.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),u.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var c={};return(()=>{"use strict";u.d(c,{default:()=>s});var t=u("react"),e=u.n(t),r=u("@deriv/components"),n=u("@deriv/translations"),i=u("../stores/src/index.ts");const s=(0,i.Pi)((function(){var t=(0,i.oR)(),s=t.ui,o=t.modules,a=s.enableApp,u=s.disableApp,c=o.cfd,l=c.clearCFDError,h=c.error_message,d=c.error_type,f=c.has_cfd_error,p=c.is_cfd_success_dialog_enabled,y=f&&!p&&d&&"PasswordReset"!==d&&"PasswordError"!==d;return e().createElement(r.Dialog,{title:(0,n.localize)("Somethings not right"),confirm_button_text:(0,n.localize)("OK"),onConfirm:l,disableApp:u,enableApp:a,is_visible:y},h||e().createElement(n.Localize,{i18n_default_text:"Sorry, an error occurred while processing your request."}))}))})(),c.default})()));