/*! For license information please see core.reset-or-unlink-password-modal.25c5025dddf510dec4d7.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1708],{34988:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T});var n=r(32735),o=r(68461),i=r(42671),a=r(59472),s=r(40841),c=r.n(s),l=r(61055),u=r(11490),f=r(68722),d=r(44850);const p=function(){return n.createElement("div",{className:"link-expired__spaced-container__content link-expired__spaced-container__email_sent"},n.createElement(o.Icon,{data_testid:"dt_email-resent",icon:"IcEmailVerificationResent",size:128}),n.createElement(o.Text,{as:"p",size:"s",align:"center"},n.createElement(d.Localize,{i18n_default_text:"<0>We've sent you an email.</0>",components:[n.createElement("strong",{key:0})]})),n.createElement(o.Text,{as:"p",size:"s",align:"center"},n.createElement(d.Localize,{i18n_default_text:"Please click on the link in the email to reset your password."})))};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const y=(0,a.observer)((function(){var e=(0,a.useStore)().ui,t=e.enableApp,r=e.disableApp,i=e.is_link_expired_modal_visible,s=e.toggleLinkExpiredModal,v=(0,u.useVerifyEmail)("reset_password"),y=v.send,g=v.error,w=v.data,_=m(n.useState(!1),2),b=_[0],E=_[1],x=(0,l.useFormik)({initialValues:{email:""},initialStatus:{error_msg:""},validate:function(e){return(0,f.validEmail)(e.email)?{}:{email:(0,f.getErrorMessages)().email()}},onSubmit:function(e){return y(e.email)}}),L=x.errors,S=x.handleBlur,k=x.handleChange,O=x.handleSubmit,j=x.isSubmitting,N=x.resetForm,P=x.setStatus,T=x.setSubmitting,z=x.status,A=x.touched,F=x.values;return n.useEffect((function(){w&&(T(!1),E(!0))}),[w,T]),n.useEffect((function(){g&&"object"===h(g)&&"message"in g&&(N(),P({error_msg:null==g?void 0:g.message}))}),[g,N,P]),n.createElement("form",{onSubmit:O},n.createElement(o.Dialog,{className:c()("link-expired__spaced-container",{"link-expired__spaced-container__fullscreen":b}),is_visible:i,disableApp:r,enableApp:t,title:b?"":(0,d.localize)("Link expired"),has_close_icon:!0,onConfirm:function(){return s(!1)}},n.createElement("div",{className:"link-expired"},b?n.createElement(p,null):n.createElement("div",{className:"link-expired__spaced-container__content"},n.createElement(o.Text,{as:"p",size:"xs",align:"left"},n.createElement(d.Localize,{i18n_default_text:"The link you clicked has expired. Ensure to click the link in the latest email in your inbox. Alternatively, enter your email below and click <0>Resend email</0> for a new link.",components:[n.createElement("strong",{key:0})]})),n.createElement("fieldset",{className:"email-platform__content__fieldset"},n.createElement(o.Input,{className:"email-input","data-lpignore":"true",type:"text",name:"email",id:"email",onChange:function(e){P({error_msg:""}),k(e)},disabled:j,onBlur:S,error:A.email&&L.email||z.error_msg,label:(0,d.localize)("Email address"),value:F.email})),n.createElement(o.FormSubmitButton,{has_cancel:!0,cancel_label:(0,d.localize)("Close"),onCancel:function(){return s(!1)},is_disabled:!F.email||!!L.email||j,is_loading:j,label:(0,d.localize)("Resend email")})))))}));function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(){w=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),s=new O(o||[]);return n(a,"_invoke",{value:x(e,r,s)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var _=h.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(n,i,a,s){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==g(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return N()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=L(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function L(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,L(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=h,n(_,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(_),c(_,s,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function _(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}const b=(0,a.observer)((function(){var e=(0,a.useStore)(),t=e.ui,r=e.client,i=r.logout,s=r.verification_code,u=t.disableApp,p=t.enableApp,h=t.is_loading,m=t.is_mobile,v=t.is_reset_password_modal_visible,y=t.toggleResetPasswordModal,g=t.toggleLinkExpiredModal,b=function(e,t){t.setSubmitting(!1);var r=null==e?void 0:e.code;r?"InvalidToken"===r?(y(!1),g(!0)):(t.resetForm({password:""}),t.setStatus({error_msg:null==e?void 0:e.message})):(t.setStatus({reset_complete:!0}),i().then((function(){(0,f.redirectToLogin)(!1,(0,d.getLanguage)(),!1)})))};return n.createElement(l.Formik,{initialValues:{password:""},initialStatus:{reset_complete:!1,error_msg:""},validate:function(e){var t={};return(0,f.validLength)(e.password,{min:8,max:25})?(0,f.validPassword)(e.password)||(t.password=(0,f.getErrorMessages)().password()):t.password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),t},onSubmit:function(e,t){var r={reset_password:1,new_password:e.password,verification_code:s.reset_password};f.WS.resetPassword(r).then(function(){var e,r=(e=w().mark((function e(r){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.error?b(null==r?void 0:r.error,t):b(null,t);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){_(i,n,o,a,s,"next",e)}function s(e){_(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}())}},(function(e){var t=e.handleBlur,r=e.errors,i=e.values,a=e.touched,s=e.isSubmitting,g=e.handleChange,w=e.status;return n.createElement(o.Dialog,{className:"reset-password__spaced-container",is_visible:v,disableApp:u,enableApp:p,is_loading:h,dismissable:w.error_msg,onConfirm:function(){return y(!1)},title:(0,d.localize)("Reset your password"),has_close_icon:!0,is_closed_on_cancel:!1},n.createElement("div",{className:"reset-password"},n.createElement(l.Form,null,w.reset_complete?n.createElement("div",{className:"reset-password__password-set"},n.createElement(o.Text,{align:"center",as:"p",weight:"bold",className:"reset-password__heading"},n.createElement(d.Localize,{i18n_default_text:"Your password has been changed"})),n.createElement(o.Text,{align:"center",as:"p",size:"xxs",className:"reset-password__subtext"},n.createElement(d.Localize,{i18n_default_text:"We will now redirect you to the login page."}))):n.createElement("div",{className:"reset-password__password-selection"},n.createElement("fieldset",{className:"reset-password__fieldset"},n.createElement(o.PasswordMeter,{input:i.password,has_error:!!(a.password&&r.password||w.error_msg),custom_feedback_messages:(0,f.getErrorMessages)().password_warnings},n.createElement(o.PasswordInput,{autoComplete:"new-password",className:"reset-password__password-field",name:"password",label:(0,d.localize)("Create a password"),onChange:g,onBlur:t,error:a.password&&r.password||w.error_msg,value:i.password,"data-lpignore":"true",required:!0}))),n.createElement(o.Text,{align:"center",as:"p",size:"xxs",className:"reset-password__subtext"},w.error_msg?n.createElement(d.Localize,{i18n_default_text:"{{error_msg}}",values:{error_msg:w.error_msg}}):n.createElement(d.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters. combine uppercase and lowercase letters, numbers, and symbols."})),!m&&n.createElement("div",{className:"reset-password__divider"}),n.createElement(o.Button,{className:c()("reset-password__btn",{"reset-password__btn--disabled":!i.password||r.password||s}),type:"submit",is_disabled:!i.password||!!r.password||s,primary:!0},n.createElement(d.Localize,{i18n_default_text:"Reset my password"}))))))}))}));var E=r(27439);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function L(){L=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),s=new O(o||[]);return n(a,"_invoke",{value:b(e,r,s)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function h(){}var m={};c(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(j([])));y&&y!==t&&r.call(y,i)&&(m=y);var g=h.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function o(n,i,a,s){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==x(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function b(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return N()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},w(_.prototype),c(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(g),c(g,s,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function S(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const T=(0,a.observer)((function(){var e=(0,a.useStore)(),t=e.client,r=e.ui,s=t.is_logged_in,c=r.is_link_expired_modal_visible,l=N(n.useReducer((function(e,t){return O(O({},e),t)}),{is_loading:!0,is_unlinking:!1}),2),u=l[0],f=l[1];return n.useEffect((function(){function e(){var t;return t=L().mark((function e(){var t,r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,i.WS.wait("get_account_status");case 3:null!=(r=e.sent)&&null!==(t=r.get_account_status)&&void 0!==t&&t.social_identity_provider?f({is_unlinking:!0,is_loading:!1}):f({is_unlinking:!1,is_loading:!1}),e.next=8;break;case 7:f({is_unlinking:!1,is_loading:!1});case 8:case"end":return e.stop()}}),e)})),e=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){S(i,n,o,a,s,"next",e)}function s(e){S(i,n,o,a,s,"throw",e)}a(void 0)}))},e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s]),u.is_loading?n.createElement(o.Loading,{is_fullscreen:!1}):u.is_unlinking?n.createElement(E.default,null):c?n.createElement(y,null):n.createElement(b,null)}))},27439:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var n=r(32735),o=r(60216),i=r.n(o),a=r(40841),s=r.n(a),c=r(61055),l=r(68461),u=r(68722),f=r(44850),d=r(42671),p=r(59472);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(){m=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,o){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),s=new O(o||[]);return n(a,"_invoke",{value:x(e,r,s)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function p(){}function v(){}var y={};c(y,i,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(j([])));w&&w!==t&&r.call(w,i)&&(y=w);var _=v.prototype=d.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(n,i,a,s){var c=u(e[n],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==h(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return N()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=L(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function L(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,L(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=v,n(_,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(_),c(_,s,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function v(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){v(i,n,o,a,s,"next",e)}function s(e){v(i,n,o,a,s,"throw",e)}a(void 0)}))}}var g=function(e){var t=e.logoutClient,r=e.social_identity_provider,o=e.toggleResetPasswordModal,i=e.verification_code,a=e.new_email,p=(0,u.getActionFromUrl)(),h=function(e,t){if(t.setSubmitting(!1),t.resetForm({password:""}),e)return console.error(e),void t.setStatus({error_msg:e});t.setStatus({reset_complete:!0})},v=function(e,t){e.error?h(e.error.message,t):h(null,t)};return n.createElement("div",{className:"unlink-password"},n.createElement(c.Formik,{initialValues:{password:""},initialStatus:{reset_complete:!1,error_msg:""},validate:function(e){var t={};return(0,u.validLength)(e.password,{min:8,max:25})?(0,u.validPassword)(e.password)||(t.password=(0,u.getErrorMessages)().password()):t.password=(0,f.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),t},onSubmit:function(e,t){if("social_email_change"===p){var r={change_email:"update",new_email:a,new_password:e.password,verification_code:i};d.WS.changeEmail(r).then(function(){var e=y(m().mark((function e(r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(r,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}else{var n={reset_password:1,new_password:e.password,verification_code:i};d.WS.resetPassword(n).then(function(){var e=y(m().mark((function e(r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(r,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},(function(e){var i=e.handleBlur,a=e.errors,d=e.values,p=e.touched,h=e.isSubmitting,m=e.handleChange,v=e.status;return n.createElement(c.Form,null,n.createElement(n.Fragment,null,v.reset_complete?n.createElement("div",{className:"unlink-password__password-success"},n.createElement(l.Icon,{className:"unlink-password__icon",icon:"IcUnlink".concat((0,u.toTitleCase)(r)),size:128}),n.createElement(l.Text,{as:"p",weight:"bold",className:"unlink-password__heading"},n.createElement(f.Localize,{i18n_default_text:"Success!"})),n.createElement(l.Text,{align:"center",as:"p",size:"xs",className:"unlink-password__subtext"},n.createElement(f.Localize,{i18n_default_text:"Your Deriv account has been unlinked from your {{social_identity_provider}} account. You can now log in to Deriv using your new email address and password.",values:{social_identity_provider:(0,u.toTitleCase)(r)}})),n.createElement(l.Button,{type:"button",onClick:function(){o(!1),t().then((function(){(0,u.redirectToLogin)(!1,(0,f.getLanguage)(),!1)}))},primary:!0,large:!0},n.createElement(f.Localize,{i18n_default_text:"Login now"}))):n.createElement("div",{className:"unlink-password__set-password"},n.createElement(l.Text,{as:"p",weight:"bold",className:"unlink-password__heading"},n.createElement(f.Localize,{i18n_default_text:"Deriv password"})),n.createElement(l.Text,{as:"p",size:"xs",className:"unlink-password__subtext"},n.createElement(f.Localize,{i18n_default_text:"Enter a new password for your Deriv account."})),n.createElement("fieldset",{className:"unlink-password__input-field"},n.createElement(l.PasswordMeter,{input:d.password,has_error:!(!p.password||!a.password),custom_feedback_messages:(0,u.getErrorMessages)().password_warnings},n.createElement(l.PasswordInput,{autoComplete:"new-password",className:"unlink-password__password-field",name:"password",label:(0,f.localize)("Deriv password"),onChange:m,onBlur:i,error:p.password&&a.password,value:d.password,"data-lpignore":"true",required:!0}))),n.createElement(l.Text,{as:"p",size:"xs",className:"unlink-password__hint"},v.error_msg?(0,f.localize)(v.error_msg):n.createElement(f.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),n.createElement(l.Button,{className:s()("unlink-password__btn",{"unlink-password__btn--disabled":!d.password||a.password||h}),type:"submit",is_disabled:!d.password||!!a.password||h,primary:!0,large:!0},n.createElement(f.Localize,{i18n_default_text:"Confirm"})))))})))};g.propTypes={logoutClient:i().func,toggleResetPasswordModal:i().func,verification_code:i().string,social_identity_provider:i().string};const w=(0,p.observer)((function(){var e=(0,p.useStore)(),t=e.ui,r=e.client,o=r.logout,i=r.social_identity_provider,a=r.verification_code,s=t.disableApp,c=t.enableApp,u=t.is_loading,f=t.is_reset_password_modal_visible,d=t.toggleResetPasswordModal,h=a.reset_password,m=a.social_email_change,v=r.new_email.social_email_change;return n.createElement(l.Dialog,{className:"unlink-password__dialog",is_visible:f,disableApp:s,enableApp:c,is_loading:u},n.createElement(g,{logoutClient:o,social_identity_provider:i,toggleResetPasswordModal:d,verification_code:m||h,new_email:v}))}))}}]);
//# sourceMappingURL=core.reset-or-unlink-password-modal.25c5025dddf510dec4d7.js.map