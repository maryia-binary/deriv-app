/*! For license information please see trader.trader-app.e604691a7323d41023f7.js.LICENSE.txt */
(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["trader-app"],{"../stores/src/index.ts":(t,e,r)=>{"use strict";r.d(e,{g3:()=>A,Pi:()=>n.Pi,oR:()=>x});var n=r("../../node_modules/mobx-react-lite/es/index.js"),o=r("react"),i=r.n(o);const a=(0,o.createContext)(null);var s=r("mobx"),c=r("../../node_modules/mobx-persist-store/lib/esm5/index.js");function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===l(i)?i:String(i)),n)}var o,i}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==f(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===f(i)?i:String(i)),n)}var o,i}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(i,t);var e,r,n,o=h(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,"ExchangeRatesStore")}return e=i,r&&p(e.prototype,r),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=void 0,(0,s.makeObservable)(this,{data:s.observable,update:s.action.bound,unmount:s.action.bound}),(0,c.Ko)(this,{name:e,properties:["data"],storage:window.localStorage})}var e,r,n;return e=t,(r=[{key:"update",value:function(t){this.data=t instanceof Function?t(this.data):t}},{key:"unmount",value:function(){(0,c.Rf)(this)}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());new(r("../../node_modules/@tanstack/query-core/build/lib/queryClient.mjs").S);var y=r("@deriv/shared");function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const S=function(t){var e=w((0,o.useState)(!1),2),r=e[0],n=e[1],i=w((0,o.useState)(!1),2),a=i[0],s=i[1],c=w((0,o.useState)(),2),l=c[0],u=c[1],f=w((0,o.useState)(),2),p=f[0],d=f[1],h=(0,o.useRef)(),m=(0,y.useWS)(),_=(0,o.useCallback)((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=null==r?void 0:r[0],a=i&&"payload"in i?i.payload:void 0;n(!0),s(!0);try{var c;h.current=m.subscribe(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}((c={},g(c,t,1),g(c,"subscribe",1),c),a||{})).subscribe((function(e){d(e["ticks"===t?"tick":t]),n(!1)}),(function(t){u(t.error),n(!1)}))}catch(t){u(t)}}),[m,t]),v=(0,o.useCallback)((function(){var t,e;null===(t=h.current)||void 0===t||null===(e=t.unsubscribe)||void 0===e||e.call(t),s(!1)}),[]);return(0,o.useEffect)((function(){return function(){v()}}),[v]),{subscribe:_,unsubscribe:v,is_loading:r,is_subscribed:a,error:l,data:p}};const x=function(){var t=i().useContext(a);if(!t)throw new Error("useStore must be used within StoreProvider");return t};var k=r("../../node_modules/lodash.merge/index.js"),O=r.n(k);const j=function(t){var e=t.children,r=S("exchange_rates"),n=r.data,a=r.subscribe,s=x().exchange_rates.update;return(0,o.useEffect)((function(){a({payload:{base_currency:"USD"}})}),[a]),(0,o.useEffect)((function(){n&&s((function(t){return O()(t,n)}))}),[s,n]),i().createElement(i().Fragment,null,e)};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){L(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===P(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const A=function(t){var e=t.children,r=t.store,n=(0,o.useMemo)((function(){return T(T({},r),{},{exchange_rates:new _})}),[r]);return(0,o.useEffect)((function(){return function(){Object.values(n).forEach((function(t){"unmount"in t&&t.unmount()}))}}),[n]),i().createElement(a.Provider,{value:n},i().createElement(j,null,e))}},"./src/App/Components/Animations/index.js":(t,e,r)=>{"use strict";r.d(e,{s:()=>l,o:()=>p});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("../../node_modules/framer-motion/dist/es/render/dom/motion.mjs"),c={animate:{y:0,opacity:1},initial:{y:35,opacity:0},transition:{type:"spring",stiffness:500,damping:15,duration:.3}},l=function(t){var e=t.children,r=t.className,n=t.is_visible,o=t.keyname;return n?a().createElement(s.E.div,{initial:c.initial,animate:c.animate,transition:c.transition,className:r,key:o},e):null};l.propTypes={children:o().node,className:o().string,is_visible:o().bool,keyname:o().string};var u={initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2}},f={initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2}},p=function(t){var e=t.children,r=t.className,n=t.keyname,o=t.is_visible;return"bottom"===t.type?a().createElement(a().Fragment,null,o&&a().createElement(s.E.div,{initial:f.initial,animate:f.animate,transition:f.transition,className:r,key:n},e)):a().createElement(a().Fragment,null,o&&a().createElement(s.E.div,{initial:u.initial,animate:u.animate,transition:u.transition,className:r,key:n},e))};p.propTypes={children:o().node,className:o().string,is_visible:o().bool,keyname:o().string,type:o().string}},"./src/App/Components/Elements/ContentLoader/index.js":(t,e,r)=>{"use strict";r.d(e,{r:()=>c,G:()=>u});var n=r("../../node_modules/react-content-loader/dist/react-content-loader.es.js"),o=r("react"),i=r.n(o),a=r("../../node_modules/prop-types/index.js"),s=r.n(a),c=function(t){var e=t.speed;return i().createElement(n.ZP,{height:173,width:218,speed:e,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},i().createElement("rect",{x:"43",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),i().createElement("rect",{x:"147",y:"19",rx:"0",ry:"0",width:"56",height:"8"}),i().createElement("rect",{x:"12",y:"50",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"13",y:"68",rx:"0",ry:"0",width:"192",height:"8"}),i().createElement("rect",{x:"5",y:"89",rx:"0",ry:"0",width:"208",height:"1"}),i().createElement("rect",{x:"12",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"12",y:"9",rx:"0",ry:"0",width:"24",height:"24"}),i().createElement("rect",{x:"116",y:"11",rx:"0",ry:"0",width:"24",height:"24"}),i().createElement("rect",{x:"12",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),i().createElement("rect",{x:"116",y:"104",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"116",y:"118",rx:"0",ry:"0",width:"88",height:"8"}),i().createElement("rect",{x:"12",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"12",y:"153",rx:"0",ry:"0",width:"88",height:"8"}),i().createElement("rect",{x:"116",y:"139",rx:"0",ry:"0",width:"44",height:"8"}),i().createElement("rect",{x:"116",y:"153",rx:"0",ry:"0",width:"88",height:"8"}))};c.propTypes={speed:s().number};var l=r("@deriv/components"),u=function(t){var e=t.speed;return i().createElement(i().Fragment,null,i().createElement(l.MobileWrapper,null,i().createElement(n.ZP,{height:214,width:344,speed:e,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)",viewBox:"0 0 344 176"},i().createElement("rect",{x:"148",y:"24",rx:"3",ry:"3",width:"40",height:"4"}),i().createElement("rect",{x:"8",y:"40",rx:"4",ry:"4",width:"328",height:"40"}),i().createElement("rect",{x:"8",y:"88",rx:"4",ry:"4",width:"328",height:"40"}),i().createElement("rect",{x:"8",y:"136",rx:"4",ry:"4",width:"160",height:"70"}),i().createElement("rect",{x:"176",y:"136",rx:"4",ry:"4",width:"160",height:"70"}))),i().createElement(l.DesktopWrapper,null,i().createElement(n.ZP,{height:548,width:240,speed:e,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},i().createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"240",height:"76"}),i().createElement("rect",{x:"0",y:"84",rx:"4",ry:"4",width:"240",height:"132"}),i().createElement("rect",{x:"0",y:"224",rx:"4",ry:"4",width:"240",height:"120"}),i().createElement("rect",{x:"0",y:"352",rx:"4",ry:"4",width:"240",height:"194"}))))};u.propTypes={speed:s().number}},"./src/App/Components/Elements/PositionsDrawer/helpers/index.js":(t,e,r)=>{"use strict";r.d(e,{Bs:()=>n.Bs,Ew:()=>n.Ew,_M:()=>n._M,qm:()=>n.qm,rh:()=>n.rh});var n=r("./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.js")},"./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.js":(t,e,r)=>{"use strict";r.d(e,{Bs:()=>a,Ew:()=>i,_M:()=>u,qm:()=>c,rh:()=>s});var n=r("@deriv/translations"),o=r("@deriv/shared"),i=function(t,e){if(!t||isNaN(t))return t;var r=String(e?(+t).toFixed(e):t),n=r.indexOf(".");return r.replace(/\d(?=(?:\d{3})+(?:\.|$))/g,(function(t,e){return n<=0||e<n?"".concat(t,","):t}))},a=function(t){return c(t.contract_type)?(0,n.localize)("Target"):(0,o.isVanillaContract)(t.contract_type)?(0,n.localize)("Strike"):(0,n.localize)("Barrier")},s=function(t){return c(t.contract_type)?l(t)[t.contract_type]:i(t.barrier)},c=function(t){return/digit/.test(t.toLowerCase())},l=function(t){return{DIGITDIFF:(0,n.localize)("Not {{barrier}}",{barrier:t.barrier}),DIGITEVEN:(0,n.localize)("Even"),DIGITMATCH:(0,n.localize)("Equals {{barrier}}",{barrier:t.barrier}),DIGITODD:(0,n.localize)("Odd"),DIGITOVER:(0,n.localize)("Over {{barrier}}",{barrier:t.barrier}),DIGITUNDER:(0,n.localize)("Under {{barrier}}",{barrier:t.barrier})}},u=function(t,e){var r,n=t.contract_type,i=t.shortcode,a=(0,o.isCallPut)(e),s=(0,o.isHighLow)({shortcode:i}),c=(0,o.isVanillaContract)(n),l=a?["CALL","CALLE","PUT","PUTE"]:null===(r=(0,o.getContractTypesConfig)()[e])||void 0===r?void 0:r.trade_types,u=null==l?void 0:l.includes(n);return"high_low"===e?s:u&&(c||!s)}},"./src/App/Components/Elements/chart-loader.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>f});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("../../node_modules/classnames/index.js"),c=r.n(s);const l=function(t){var e=t.className,r=t.is_invisible,n=t.theme,o=t.id;return a().createElement("div",{id:o,className:c()("barspinner","barspinner--".concat(n||"dark"),{invisible:r},e)},Array.from(new Array(5)).map((function(t,e){return a().createElement("div",{key:e,className:"barspinner__rect barspinner__rect--".concat(e+1," rect").concat(e+1)})})))};var u=function(t){var e=t.is_dark;return t.is_visible?a().createElement("div",{className:"chart-container__loader"},a().createElement(l,{theme:e?"dark":"light"})):null};u.propTypes={is_dark:o().bool,is_visible:o().bool};const f=u},"./src/App/Components/Elements/market-countdown-timer.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>k});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("../../node_modules/prop-types/index.js"),c=r.n(s),l=r("../../node_modules/moment/moment.js"),u=r.n(l),f=r("@deriv/components"),p=r("@deriv/shared"),d=r("@deriv/translations"),h=r("./src/Stores/connect.js");function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function v(){v=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new j(o||[]);return n(a,"_invoke",{value:S(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var _={};c(_,i,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(P([])));b&&b!==e&&r.call(b,i)&&(_=b);var g=h.prototype=p.prototype=Object.create(_);function w(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==m(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function S(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,n(g,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(E.prototype),c(E.prototype,a,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),c(g,s,"Generator"),c(g,i,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=P,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function b(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){b(i,n,o,a,s,"next",t)}function s(t){b(i,n,o,a,s,"throw",t)}a(void 0)}))}}var w=function(){var t=g(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.WS.tradingTimes(e);case 2:if(!(r=t.sent).error){t.next=5;break}return t.abrupt("return",{api_initial_load_error:r.error.message});case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(t,e){for(var r,n=e.markets,o=0;o<n.length;o++)for(var i=n[o].submarkets,a=0;a<i.length;a++){if(void 0!==(r=i[a].symbols.find((function(e){return e.symbol===t}))))return r}},S=function(t){var e=t-Date.now();return e>0?{days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}:{}},x=function(t){var e=t.active_symbols,r=t.is_main_page,n=t.setIsTimerLoading,i=t.onMarketOpen,s=t.symbol,c=(0,p.useIsMounted)(),l=_(a().useState({}),2),h=l[0],m=l[1],y=_(a().useState(S(null==h?void 0:h.remaining_time_to_open)),2),b=y[0],x=y[1],k=_(a().useState(!0),2),O=k[0],j=k[1];a().useEffect((function(){if(!r||r&&(0,p.isMarketClosed)(e,s)){j(!0);var t=function(){var e=g(v().mark((function e(r,n){var o,i,a,l,f,p,d,h,_,y;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r>7)){e.next=2;break}return e.abrupt("return",{});case 2:return i=u()(new Date).add(r,"days"),e.next=5,w(i.format("YYYY-MM-DD"));case 5:if((a=e.sent).api_initial_load_error){e.next=25;break}if(l=E(n,a.trading_times),f=l.times,p=f.open,d=f.close,!(1===(null==p?void 0:p.length)&&"--"===p[0]&&"--"===d[0])){e.next=12;break}return e.abrupt("return",t(r+1,n));case 12:h=i.toISOString().substring(0,11),_=function(t){return new Date("".concat(h).concat(t,"Z"))},y=0;case 15:if(!(y<(null==p?void 0:p.length))){e.next=24;break}if(!(+_(p[y])-Date.now()>0)){e.next=21;break}if(o=+_(p[y]),!c()||n!==s){e.next=21;break}return e.abrupt("return",m({days_offset:r,opening_time:p[y],remaining_time_to_open:o}));case 21:y++,e.next=15;break;case 24:t(r+1,n);case 25:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t(0,s)}}),[s]),a().useEffect((function(){var t;return null!=h&&h.remaining_time_to_open&&(t=setTimeout((function(){x(S(h.remaining_time_to_open)),new Date(h.remaining_time_to_open)-+new Date<1e3&&(j(!0),r&&i(!1))}),1e3)),function(){t&&clearTimeout(t)}}),[b,h,i,r]),a().useEffect((function(){O||n(!1)}),[O,n]);var P="";if(Object.keys(b).length){var C=(24*b.days+b.hours).toString().padStart(2,"0"),T=b.minutes.toString().padStart(2,"0"),L=b.seconds.toString().padStart(2,"0");P="".concat(C,":").concat(T,":").concat(L)}if(!h||!P)return null;var A=h.opening_time,N=h.days_offset,D=null;if(A){var I=(0,p.convertTimeFormat)(A),z=u()(new Date).add(N,"days"),M=z.format("DD MMM YYYY"),R=z.format("dddd");D=a().createElement(f.Text,{align:"center",as:"p",className:"market-is-closed-overlay__open-date",line_height:"m",color:"prominent",size:r?"s":"xs",weight:"bold"},a().createElement(d.Localize,{i18n_default_text:"{{formatted_opening_time}} (GMT) on {{opening_day}},<0></0> {{opening_date}}.",components:[a().createElement("div",{key:0})],values:{formatted_opening_time:I,opening_day:R,opening_date:M}}))}return O&&j(!1),a().createElement(a().Fragment,null,a().createElement(f.Text,{as:"p",className:o()("market-is-closed-overlay__open-at",{"market-is-closed-overlay__open-at--main-page":r}),line_height:"x",size:r?"xs":"xxs"},a().createElement(d.Localize,{i18n_default_text:"It will reopen at"})),D,a().createElement(f.Text,{align:"center",as:"p",className:o()("market-is-closed-overlay__come-back",{"market-is-closed-overlay__come-back--main-page":r}),line_height:"x",size:r?"xs":"xxs"},a().createElement(d.Localize,{i18n_default_text:"Please come back in"})),a().createElement(f.Text,{as:"p",className:o()("market-is-closed-overlay__timer",{"market-is-closed-overlay__timer--main-page":r}),line_height:"m",color:"prominent",size:r?"s":"xs",weight:"bold"},P),a().createElement("div",{className:"market-is-closed-overlay__separator"}))};x.propTypes={active_symbols:c().array,is_main_page:c().bool,setIsTimerLoading:c().func,onMarketOpen:c().func,symbol:c().string.isRequired};const k=(0,h.$j)((function(t){return{active_symbols:t.modules.trade.active_symbols}}))(x)},"./src/App/index.tsx":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>Qn});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("../../node_modules/react-loadable/lib/index.js"),c=r.n(s),l=r("../stores/src/index.ts"),u=r("mobx-react"),f=r("react-router"),p=r("@deriv/components"),d=r("@deriv/shared"),h=r("react-router-dom"),m=function t(e,r){var n;return r.some((function(r){var o;try{o=(0,f.matchPath)(e,r)}catch(t){if(/undefined/.test(t.message))return}return o?(n=r,!0):!!r.routes&&(n=t(e,r.routes))})),n},_=r("@deriv/translations"),y=r("../../node_modules/classnames/index.js"),v=r.n(y),b=r("./src/App/Components/Elements/chart-loader.jsx"),g=r("./src/Modules/Trading/Helpers/digits.js"),w=r("./src/Stores/connect.js"),E=r("../../node_modules/react-transition-group/esm/CSSTransition.js");const S=function(t){var e=t.error;return a().createElement("div",{className:"portfolio-empty"},a().createElement("div",{className:"portfolio-empty__wrapper"},e?a().createElement(p.Text,{color:"disabled",size:"xs"},e):a().createElement(a().Fragment,null,a().createElement(p.Icon,{icon:"IcPortfolio",className:"portfolio-empty__icon",size:96,color:"disabled"}),a().createElement(p.Text,{align:"center",className:"portfolio-empty__text",color:"disabled",size:"xs"},(0,_.localize)("You have no open positions for this asset. To view other open positions, click Go to Reports")))))};var x=r("./src/App/Components/Elements/PositionsDrawer/helpers/index.js"),k=["row","measure","onHoverPosition","symbol","is_new_row"],O=["all_positions","error","is_positions_drawer_on","onHoverPosition","symbol","toggleDrawer","trade_contract_type","onMount"];function j(){return j=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j.apply(this,arguments)}function P(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var C=function(t){var e=t.row,r=t.measure,n=t.onHoverPosition,o=t.symbol,i=t.is_new_row,s=P(t,k),c=(0,d.useNewRowTransition)(i).in_prop;return a().useEffect((function(){r()}),[e.contract_info.is_sold,r]),a().createElement(E.Z,{in:c,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},onEntered:r,unmountOnExit:!0},a().createElement("div",{className:"dc-contract-card__wrapper"},a().createElement(p.PositionsDrawerCard,j({},e,s,{onMouseEnter:function(){n(!0,e,o)},onMouseLeave:function(){n(!1,e,o)},onFooterEntered:r,should_show_transition:i}))))},T=function(t){var e=t.all_positions,r=t.error,n=t.is_positions_drawer_on,o=t.onHoverPosition,i=t.symbol,s=t.toggleDrawer,c=t.trade_contract_type,l=t.onMount,u=P(t,O),f=a().useRef(null),m=a().useRef(null),y=a().useRef(null);a().useEffect((function(){l()}),[l]),a().useEffect((function(){var t,e;null==m||null===(t=m.current)||void 0===t||t.scrollTo(0),null==y||null===(e=y.current)||void 0===e||e.scrollToTop()}),[i,c]);var b=e.filter((function(t){return t.contract_info&&i===t.contract_info.underlying&&(0,x._M)(t.contract_info,c)})),g=a().createElement(p.DataList,{data_source:b,rowRenderer:function(t){return a().createElement(C,j({onHoverPosition:o,symbol:i},t,u))},keyMapper:function(t){return t.id},row_gap:8});return a().createElement(a().Fragment,null,a().createElement("div",{className:v()("positions-drawer__bg",{"positions-drawer__bg--open":n})}),a().createElement("div",{id:"dt_positions_drawer",className:v()("positions-drawer",{"positions-drawer--open":n})},a().createElement("div",{className:"positions-drawer__header"},a().createElement(p.Text,{color:"prominent",weight:"bold",size:"xs"},(0,_.localize)("Recent positions")),a().createElement("div",{id:"dt_positions_drawer_close_icon",className:"positions-drawer__icon-close",onClick:s},a().createElement(p.Icon,{icon:"IcMinusBold"}))),a().createElement("div",{className:"positions-drawer__body",ref:f},0===b.length||r?a().createElement(S,{error:r}):g),a().createElement("div",{className:"positions-drawer__footer"},a().createElement(h.NavLink,{id:"dt_positions_drawer_report_button",className:"dc-btn dc-btn--secondary dc-btn__large",to:d.routes.reports},a().createElement(p.Text,{size:"xs",weight:"bold"},(0,_.localize)("Go to Reports"))))))};T.propTypes={all_positions:u.PropTypes.arrayOrObservableArray,children:o().node,error:o().string,is_mobile:o().bool,is_positions_drawer_on:o().bool,onChangeContractUpdate:o().func,onClickContractUpdate:o().func,onHoverPosition:o().func,onMount:o().func,symbol:o().string,toggleDrawer:o().func,currency:o().string,server_time:o().object,addToast:o().func,current_focus:o().string,onClickCancel:o().func,onClickSell:o().func,onClickRemove:o().func,getContractById:o().func,removeToast:o().func,setCurrentFocus:o().func,should_show_cancellation_warning:o().bool,toggleCancellationWarning:o().func,toggleUnsupportedContractModal:o().func,trade_contract_type:o().string};const L=(0,w.$j)((function(t){var e=t.modules,r=t.ui,n=t.client,o=t.common,i=t.portfolio,a=t.contract_trade;return{all_positions:i.all_positions,error:i.error,onHoverPosition:i.onHoverPosition,onMount:i.onMount,symbol:e.trade.symbol,trade_contract_type:e.trade.contract_type,is_mobile:r.is_mobile,is_positions_drawer_on:r.is_positions_drawer_on,toggleDrawer:r.togglePositionsDrawer,currency:n.currency,server_time:o.server_time,addToast:r.addToast,current_focus:r.current_focus,onClickCancel:i.onClickCancel,onClickSell:i.onClickSell,onClickRemove:i.removePositionById,getContractById:a.getContractById,removeToast:r.removeToast,setCurrentFocus:r.setCurrentFocus,should_show_cancellation_warning:r.should_show_cancellation_warning,toggleCancellationWarning:r.toggleCancellationWarning,toggleUnsupportedContractModal:r.toggleUnsupportedContractModal}}))(T);var A=r("./src/App/Components/Elements/market-countdown-timer.jsx");function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var I=function(t){var e=t.is_eu,r=t.is_synthetics_trading_market_available,n=t.onClick,o=t.onMarketOpen,i=t.symbol,s=N(a().useState(!0),2),c=s[0],l=s[1],u=a().createElement(_.Localize,{i18n_default_text:"In the meantime, try our synthetic indices. They simulate real-market volatility and are open 24/7."}),f=(0,_.localize)("Try Synthetic Indices");return r||(u=null,f=(0,_.localize)("See open markets")),a().createElement("div",{className:v()("market-is-closed-overlay",{"market-is-closed-overlay--loading":c})},a().createElement(p.Text,{as:"p",className:"market-is-closed-overlay__main-heading",color:"prominent",weight:"bold"},a().createElement(_.Localize,{i18n_default_text:"This market is closed"})),a().createElement(A.Z,{is_main_page:!0,setIsTimerLoading:l,onMarketOpen:o,symbol:i}),u&&a().createElement(p.Text,{align:"center",as:"p",className:"market-is-closed-overlay__main-message",size:"xs"},u),(!e||e&&r)&&a().createElement(p.Button,{className:"market-is-closed-overlay__button",onClick:n,text:f,primary:!0}))};I.propTypes={is_eu:o().bool,is_synthetics_trading_market_available:o().bool,onClick:o().func,onMarketOpen:o().func,symbol:o().string};const z=I;var M=r("mobx");function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){F(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function F(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==B(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===B(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var V={container:{fontSize:"10px",lineHeight:"15px",position:"absolute",zIndex:1,background:"rgba(0, 0, 0, 0.8)",color:"#ccc",padding:"10px",marginTop:"-10px",display:"none",overflowY:"auto",height:"100%",width:"100%"},prop_name:{color:"yellowgreen"},tabs:{display:"flex",textAlign:"center",marginBottom:"10px"},tab:{fontSize:"18px",border:"1px solid grey",width:"100%",padding:"10px"}},W=function(t){var e=G(a().useState(!1),2),r=e[0],n=e[1],o=G(a().useState("trade"),2),i=o[0],s=o[1];a().useEffect((function(){return document.addEventListener("keyup",c,!1),function(){document.removeEventListener("keyup",c)}}));var c=function(t){t.ctrlKey&&83===t.keyCode&&n(!r)},l=V.container,u=V.tab,f=V.tabs;return a().createElement("code",{id:"state_info",style:U(U({},l),{},{display:r?"block":"none"})},a().createElement("div",{style:f},Object.keys(t).map((function(t){return a().createElement("p",{key:t,onClick:function(){return s(t)},style:U(U({},u),{},{fontWeight:t===i&&"bold"})},t)}))),t[i].sort().map((function(t){var e=G(t,2),r=e[0],n=e[1];return"root_store"!==r&&"function"!=typeof n&&a().createElement("div",{key:r},a().createElement("span",{style:V.prop_name},r,":")," ",n&&"object"===B(n)?JSON.stringify((0,M.toJS)(n),null,1):n)})))};W.propTypes={entries:o().array};const Y=(0,w.$j)((function(t){var e=t.modules,r=t.client,n=t.ui,o=t.portfolio;return{trade:Object.entries(e.trade),client:Object.entries(r),ui:Object.entries(n),portfolio:Object.entries(o)}}))(W);var q=r("./src/Modules/Contract/Components/Digits/index.js"),Z=r("./src/Modules/Contract/Components/AccumulatorsStats/index.js"),X=r("./src/Modules/SmartChart/Components/bottom-widgets.jsx"),$=r("./src/Modules/SmartChart/index.js"),J=function(t){var e=t.updateChartType,r=t.updateGranularity;return a().createElement(a().Fragment,null,a().createElement(p.DesktopWrapper,null,a().createElement($.oY,{portalNodeId:"modal_root",onChartType:function(t){return e(t)},onGranularity:function(t){return r(t)}}),a().createElement($.as,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),a().createElement($.NU,{portalNodeId:"modal_root"}),a().createElement($.kO,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),a().createElement($.mB,{portalNodeId:"modal_root"})))};J.propTypes={updateChartType:o().func,updateGranularity:o().func};const K=J;var Q=r("./src/Modules/SmartChart/Components/top-widgets.jsx"),tt=function(t){return t&&function(e){t({target:{name:"symbol",value:e}})}},et=(0,w.$j)((function(t){var e=t.modules,r=t.contract_trade;return{contract_info:r.last_contract.contract_info||{},digits_info:r.last_contract.digits_info||{},display_status:r.last_contract.display_status,is_digit_contract:r.last_contract.is_digit_contract,is_ended:r.last_contract.is_ended,selected_digit:e.trade.last_digit,onDigitChange:e.trade.onChange,underlying:e.trade.symbol,trade_type:e.trade.contract_type}}))((function(t){var e=t.contract_info,r=t.digits,n=t.digits_info,o=t.display_status,i=t.is_digit_contract,s=t.is_ended,c=t.onDigitChange,l=t.selected_digit,u=t.tick,f=t.trade_type,p=t.underlying;return a().createElement(q.Z,{contract_info:e,digits_array:r,digits_info:n,display_status:o,is_digit_contract:i,is_ended:s,onDigitChange:c,is_trade_page:!0,tick:u,trade_type:f,selected_digit:l,underlying:p})})),rt=(0,w.$j)((function(t){var e=t.modules,r=t.ui;return{onSymbolChange:e.trade.onChange,theme:r.is_dark_mode_on?"dark":"light"}}))((function(t){var e,r=t.onSymbolChange,n=t.charts_ref,o=t.theme,i=t.is_digits_widget_active,s=t.open_market,c=t.open;return n&&n.chart&&(e=n.chart.yAxiswidth),a().createElement(Q.Z,{open_market:s,open:c,is_mobile:(0,d.isMobile)(),is_digits_widget_active:i,onSymbolChange:tt(r),theme:o,y_axis_width:e})})),nt=function(t){var e=t.digits,r=t.tick,n=t.show_accumulators_stats;return a().createElement(X.Z,{Widget:n?a().createElement(Z.Z,null):a().createElement(et,{digits:e,tick:r})})},ot=((0,w.$j)((function(t){var e=t.contract_trade;return{updateChartType:e.updateChartType,updateGranularity:e.updateGranularity}}))((function(t){var e=t.updateChartType,r=t.updateGranularity;return a().createElement(K,{updateChartType:e,updateGranularity:r})})),c()({loader:function(){return(0,d.isMobile)()?Promise.all([r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_jsx-src-dbdd9e"),r.e("screen-small")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-small.jsx")):Promise.all([r.e("src_Modules_Trading_Components_Form_TradeParams_Accumulator_accumulators-info-display_jsx-src-dbdd9e"),r.e("screen-large")]).then(r.bind(r,"./src/Modules/Trading/Components/Form/screen-large.jsx"))},loading:function(){return null},render:function(t,e){var r=t.default;return a().createElement(r,e)}})),it=function(t){var e=t.is_market_closed,r=t.is_trade_enabled;return a().createElement(a().Fragment,null,a().createElement(ot,{is_trade_enabled:r,is_market_closed:(0,d.isMobile)()?void 0:e}))};it.propTypes={is_market_closed:o().bool,is_trade_enabled:o().bool};const at=a().memo(it);var st=r("./src/Modules/SmartChart/Components/all-markers.jsx"),ct=r("./src/App/Components/Elements/PositionsDrawer/helpers/positions-helper.js");function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ut(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==lt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===lt(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ft(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return pt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var dt="increment",ht="decrement",mt="add10",_t=function(t){var e,r=t.current_spot,n=t.current_spot_time,o=t.currency,i=t.className,s=void 0===i?"sc-accumulators-profit-loss-text":i,c=t.profit,l=ft(a().useState(!1),2),u=l[0],f=l[1],d=ft(a().useState(!1),2),h=d[0],m=d[1],_=+(null===(e=a().useRef(c).current)||void 0===e?void 0:e.toFixed(2).split(".")[1][0]),y=ft(a().useState(_),2),b=y[0],g=y[1],w=a().useRef(),E=a().useRef(null),S=a().useRef(),x=a().useRef(),k=c.toFixed(2).split("."),O=+k[0],j=+k[1][0],P=+k[1].slice(1),C=c>=0,T=c>0?"+":"",L=function(t,e,r,n){clearInterval(E.current);var o=setInterval((function(){t===dt&&w.current<n?w.current=(w.current+1)%10:t===ht&&w.current>n?w.current=Math.abs(w.current-1)%10:t===mt&&w.current<r+10?w.current+=1:(t===mt?w.current===r+10:w.current===n)&&clearInterval(o),g(w.current%10)}),e);E.current=o};a().useEffect((function(){if(c&&(f(!0),m(!0),S.current=setTimeout((function(){f(!1)}),600),x.current=setTimeout((function(){m(!1)}),300)),0!==c){t=_,e=j,r=Math.abs(e-t),w.current=t,t<e?L(dt,300/r,t,e):t>e?L(ht,300/r,t,e):L(mt,30,t,e)}var t,e,r;return function(){clearTimeout(S.current),clearTimeout(x.current),clearInterval(E.current)}}),[c,_,j]);return a().createElement($.KW,{markerRef:function(t){t&&(r||t.setPosition({epoch:null,price:null}),t.setPosition({epoch:+n,price:+r}))},className:v()(s,C?"won":"lost")},a().createElement(p.Text,{weight:"bold",size:"m",color:C?"profit-success":"loss-danger",className:v()("".concat(s,"__profit"),ut({},"".concat(s,"__profit--fading-in"),u)),"data-testid":"dt_accumulator_profit_text"},"".concat(T).concat(O,"."),a().createElement("div",{className:h?"".concat(s,"__sliding-tenth"):""},b),"".concat(P)),a().createElement(p.Text,{size:"xxs",as:"div",className:"".concat(s,"__currency")},o))};_t.propTypes={className:o().string,currency:o().string,current_spot:o().number,current_spot_time:o().number,profit:o().number};const yt=a().memo(_t);function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var gt=function(t){var e=t.alignment,r=void 0===e?"right":e,n=t.current_spot,o=t.current_spot_time,i=t.className,s=void 0===i?"sc-accumulators-profit-loss-tooltip":i,c=t.currency,l=t.exit_tick,u=t.exit_tick_time,f=t.high_barrier,d=t.is_sold,h=t.profit,m=vt(a().useState(!1),2),y=m[0],b=m[1],g=h>=0,w=h>0?"+":"",S=a().useRef(null);a().useEffect((function(){return function(){clearTimeout(S.current)}}),[]),a().useEffect((function(){d&&(b(!0),S.current=x(3e3))}),[d]);var x=function(t){return setTimeout((function(){b(!1)}),t)},k=function(){clearTimeout(S.current),S.current=x(1500)},O=a().useMemo((function(){var t=["left","right"];return t.includes(r)?t.find((function(t){return t!==r})):["top","bottom"].find((function(t){return t!==r}))}),[r]);return"number"!=typeof h?null:!d&&o&&f?a().createElement(yt,{currency:c,current_spot:n,current_spot_time:o,profit:h}):d&&u?a().createElement($.KW,{markerRef:function(t){t&&(l||t.setPosition({epoch:null,price:null}),t.setPosition({epoch:+u,price:+l}))},className:v()(s,g?"won":"lost")},a().createElement("span",{className:"".concat(s,"__spot-circle"),onMouseEnter:function(){return b(!0)},onMouseLeave:k,onTouchStart:function(){return b(!0)},onTouchEnd:k,"data-testid":"dt_accumulator_tooltip_spot"}),a().createElement(E.Z,{in:y,timeout:{exit:500},unmountOnExit:!0,classNames:"".concat(s,"__content")},a().createElement("div",{className:v()("".concat(s,"__content"),"arrow-".concat(O))},a().createElement(p.Text,{size:"xxs",className:"".concat(s,"__text")},(0,_.localize)("Total profit/loss:")),a().createElement(p.Text,{size:"xs",className:"".concat(s,"__text"),weight:"bold"},"".concat(w).concat(h," ").concat(c))))):null};gt.propTypes={alignment:o().string,current_spot:o().number,current_spot_time:o().number,className:o().string,currency:o().string,exit_tick:o().number,exit_tick_time:o().number,high_barrier:o().string,is_sold:o().number,profit:o().number};const wt=a().memo(gt);var Et=function(t){var e=t.current_spot,r=t.current_spot_time;return a().createElement($.KW,{markerRef:function(t){t&&(e||t.setPosition({epoch:null,price:null}),t.setPosition({epoch:+r,price:+e}))},className:"sc-current-spot-emphasizer"})};Et.propTypes={current_spot:o().number,current_spot_time:o().number};const St=a().memo(Et);function xt(){return xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xt.apply(this,arguments)}var kt=function(t){var e=t.all_positions,r=t.current_symbol_spot,n=t.current_symbol_spot_time,o=t.should_highlight_current_spot,i=t.symbol,s=e.filter((function(t){var e=t.contract_info;return e&&i===e.underlying&&(0,ct._M)(e,"accumulator")}));return a().createElement(a().Fragment,null,!!s.length&&s.map((function(t){var e=t.contract_info;return a().createElement(wt,xt({key:e.contract_id},e))})),o&&n&&a().createElement(St,{current_spot:r,current_spot_time:n}))};kt.propTypes={all_positions:o().array,current_symbol_spot:o().number,current_symbol_spot_time:o().number,should_highlight_current_spot:o().bool,symbol:o().string};const Ot=a().memo(kt);var jt=function(t){var e=t.is_accumulator,r=t.position,n=t.updateChartType,o=t.updateGranularity;return a().createElement($.av,{position:r||(0,d.isMobile)()?"bottom":null},!e&&a().createElement($.oY,{portalNodeId:"modal_root",onChartType:n,onGranularity:o}),(0,d.isDesktop)()&&a().createElement($.as,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,d.isDesktop)()&&a().createElement($.kO,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,d.isDesktop)()&&a().createElement($.NU,{portalNodeId:"modal_root"}),(0,d.isDesktop)()&&a().createElement($.mB,{portalNodeId:"modal_root"}))};jt.propTypes={position:o().string,updateChartType:o().func,updateGranularity:o().func,is_accumulator:o().func};const Pt=a().memo((0,w.$j)((function(t){return{is_accumulator:t.modules.trade.is_accumulator}}))(jt));function Ct(t){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ct(t)}function Tt(t){return function(t){if(Array.isArray(t))return Mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||zt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(){return Lt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lt.apply(this,arguments)}function At(){At=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Ct(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Nt(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Dt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Nt(i,n,o,a,s,"next",t)}function s(t){Nt(i,n,o,a,s,"throw",t)}a(void 0)}))}}function It(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||zt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(t,e){if(t){if("string"==typeof t)return Mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mt(t,e):void 0}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Rt=function(t){var e=t.tick,r=t.digits,n=t.setTick,o=t.setDigits;return a().useEffect((function(){n(e)}),[e]),a().useEffect((function(){o(r)}),[r]),null};const Ut=(0,w.$j)((function(t){var e=t.client,r=t.common,n=t.modules,o=t.ui;return{getFirstOpenMarket:n.trade.getFirstOpenMarket,is_accumulator:n.trade.is_accumulator,is_eu:e.is_eu,is_virtual:e.is_virtual,is_synthetics_available:n.trade.is_synthetics_available,is_synthetics_trading_market_available:n.trade.is_synthetics_trading_market_available,network_status:r.network_status,contract_type:n.trade.contract_type,form_components:n.trade.form_components,should_show_active_symbols_loading:n.trade.should_show_active_symbols_loading,is_chart_loading:n.trade.is_chart_loading,is_market_closed:n.trade.is_market_closed,show_digits_stats:n.trade.show_digits_stats,is_trade_enabled:n.trade.is_trade_enabled,prepareTradeStore:n.trade.prepareTradeStore,setMobileDigitView:n.trade.setMobileDigitView,symbol:n.trade.symbol,onMount:n.trade.onMount,onUnmount:n.trade.onUnmount,purchase_info:n.trade.purchase_info,NotificationMessages:o.notification_messages_ui,is_market_unavailable_visible:o.has_only_forward_starting_contracts,should_show_multipliers_onboarding:o.should_show_multipliers_onboarding,onChange:n.trade.onChange,setContractTypes:n.trade.setContractTypes,is_vanilla:n.trade.is_vanilla}}))((function(t){var e=t.contract_type,r=t.form_components,n=t.getFirstOpenMarket,o=t.should_show_active_symbols_loading,i=t.is_chart_loading,s=t.is_dark_theme,c=t.is_eu,l=t.is_market_closed,u=t.is_market_unavailable_visible,f=t.is_trade_enabled,h=t.is_virtual,m=t.network_status,_=t.NotificationMessages,y=t.onChange,w=t.onMount,E=t.onUnmount,S=t.prepareTradeStore,x=t.setContractTypes,k=t.setMobileDigitView,O=t.is_accumulator,j=t.show_digits_stats,P=t.should_show_multipliers_onboarding,C=t.symbol,T=t.is_synthetics_available,A=t.is_synthetics_trading_market_available,N=t.is_vanilla,D=It(a().useState([]),2),I=D[0],M=D[1],R=It(a().useState({}),2),U=R[0],F=R[1],B=It(a().useState(!1),2),G=B[0],H=B[1],V=It(a().useState(!1),2),W=V[0],q=V[1],Z=It(a().useState(null),2),X=Z[0],$=Z[1],J=It(a().useState(null),2),K=J[0],Q=J[1],tt=It(a().useState(!1),2),nt=tt[0],ot=tt[1],it=a().useRef(),st=a().useMemo((function(){return G?{category:"synthetics"}:W&&X?{category:X,subcategory:K}:null}),[G,W,X,K]);a().useEffect((function(){if(w(),!T){var t=function(){var t=Dt(At().mark((function t(){var e,r,o,i,a;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=["forex","indices","commodities"],t.next=3,n(r);case 3:if(t.t1=e=t.sent,t.t0=null!==t.t1,!t.t0){t.next=7;break}t.t0=void 0!==e;case 7:if(!t.t0){t.next=11;break}t.t2=e,t.next=12;break;case 11:t.t2={};case 12:o=t.t2,i=o.category,a=o.subcategory,i&&($(i),Q(a));case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}return function(){return E()}}),[w,E,n,T]),a().useEffect((function(){(0,d.isMobile)()&&M([]),H(!1),q(!1)}),[C,M,H,T]),a().useEffect((function(){var t=function(){var t=Dt(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:y({target:{name:"contract_type",value:"multiplier"}});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();!P||i||!T&&l||t()}),[P,i]);var ct=a().useCallback((function(t){var e=t.digits,r=t.tick;return a().createElement(Rt,{digits:e,tick:r,setTick:F,setDigits:M})}),[]),lt=function(){var t=Dt(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T?(H(!0),setTimeout((function(){return H(!1)}))):(q(!0),setTimeout((function(){return q(!1)})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ut=a().useCallback((function(t){var e=Lt({},(function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t),t));return a().createElement(rt,Lt({open_market:st,open:G||W,charts_ref:it,is_digits_widget_active:nt},e))}),[st,G,W,it,nt]),ft=(0,d.isMobile)()?"mobile-wrapper":"sidebar__container desktop-only";return a().createElement("div",{id:"trade_container",className:v()("trade-container",{"trade-container--accumulators":O})},a().createElement(p.DesktopWrapper,null,a().createElement(L,null)),a().createElement(p.Div100vhContainer,{id:"chart_container",className:"chart-container",is_disabled:(0,d.isDesktop)(),height_offset:O?"295px":"259px"},a().createElement(_,null),a().createElement(a().Suspense,{fallback:a().createElement(b.Z,{is_dark:s,is_visible:!C||i})},a().createElement(p.DesktopWrapper,null,a().createElement("div",{className:v()("chart-container__wrapper",{"vanilla-trade-chart":N})},a().createElement(b.Z,{is_visible:i||o}),a().createElement(Ht,{topWidgets:ut,charts_ref:it,is_accumulator:O}))),a().createElement(p.MobileWrapper,null,a().createElement(b.Z,{is_visible:i||o||(0,g.A)(e)&&!I[0]}),a().createElement(p.SwipeableWrapper,{onChange:function(t){k(0===t),ot(0===t)},is_disabled:!j||!f||0===r.length||i||o,className:v()({"vanilla-trade-chart":N})},j&&a().createElement(et,{digits:I,tick:U}),a().createElement(Ht,{topWidgets:ut,charts_ref:it,bottomWidgets:j?ct:void 0,is_accumulator:O})))),a().createElement(Y,null)),a().createElement("div",{className:ft},l&&!u&&a().createElement(z,Lt({is_eu:c,is_synthetics_trading_market_available:A},c&&X,{onClick:lt,onMarketOpen:S,symbol:C})),a().createElement(at,{is_market_closed:l,is_trade_enabled:f&&r.length>0&&"online"===m.class&&(h||!r.includes("accumulator"))})))}));var Ft=a().forwardRef((function(t,e){return a().createElement($.Xb,Lt({innerRef:e},t))})),Bt=(0,w.$j)((function(t){var e=t.ui,r=t.client,n=t.contract_trade;return{markers_array:n.markers_array,is_digit_contract:n.is_digit_contract,granularity:n.granularity,is_dark_theme:e.is_dark_mode_on,currency:r.currency}}))((function(t){var e=t.markers_array,r=t.is_dark_theme,n=t.granularity,o=t.currency,i=t.config;return e.map((function(t){var e=st.Z[t.type];return a().createElement(e,Lt({key:t.key,is_dark_theme:r,granularity:n,currency:o,config:i},t))}))})),Gt=function(t){var e=t.accumulator_barriers_data,r=t.all_positions,n=t.topWidgets,o=t.charts_ref,i=t.updateGranularity,s=t.updateChartType,c=t.active_symbols,l=t.chart_layout,u=t.chart_type,f=t.chartStateChange,p=t.exportLayout,h=t.extra_barriers,m=void 0===h?[]:h,_=t.end_epoch,y=t.granularity,v=t.has_alternative_source,b=t.is_accumulator,g=t.is_trade_enabled,w=t.is_socket_opened,E=t.main_barrier,S=t.refToAddTick,x=t.setChartStatus,k=t.settings,O=t.should_show_eu_content,j=t.show_digits_stats,P=t.should_highlight_current_spot,C=t.symbol,T=t.wsForget,L=t.wsForgetStream,A=t.wsSendRequest,N=t.wsSubscribe,D=e[C]||{},I=D.current_spot,z=D.current_spot_time,M=a().useCallback((function(t){var e=t.digits,r=t.tick;return a().createElement(nt,{digits:e,tick:r,show_accumulators_stats:b,is_trade_page:!0})}),[b]),R=E?[E].concat(Tt(m)):m,U=0===y?8:24;return C&&0!==c.length?a().createElement(Ft,{ref:o,barriers:R,bottomWidgets:(b||j)&&(0,d.isDesktop)()?M:t.bottomWidgets,crosshair:(0,d.isMobile)()?0:void 0,crosshairTooltipLeftAllow:560,showLastDigitStats:!!(0,d.isDesktop)()&&j,chartControlsWidgets:null,chartStatusListener:function(t){return x(!t)},chartType:u,initialData:{activeSymbols:JSON.parse(JSON.stringify(c))},chartData:{activeSymbols:JSON.parse(JSON.stringify(c))},feedCall:{activeSymbols:!1},enabledNavigationWidget:(0,d.isDesktop)(),enabledChartFooter:!1,id:"trade",isMobile:(0,d.isMobile)(),maxTick:(0,d.isMobile)()?U:void 0,granularity:y,requestAPI:A,requestForget:T,requestForgetStream:L,requestSubscribe:N,settings:k,should_show_eu_content:O,stateChangeListener:f,symbol:C,topWidgets:g?n:null,isConnectionOpened:w,clearChart:!1,toolbarWidget:function(){return a().createElement(Pt,{updateChartType:s,updateGranularity:i})},importedLayout:l,onExportLayout:p,shouldFetchTradingTimes:!_,hasAlternativeSource:v,refToAddTick:S,getMarketsOrder:function(t){var e="synthetic_index",r=!!t.find((function(t){return t.market===e}));return t.slice().sort((function(t,e){return t.display_name<e.display_name?-1:1})).map((function(t){return t.market})).reduce((function(t,e){return-1===t.indexOf(e)&&t.push(e),t}),r?[e]:[])},yAxisMargin:{top:(0,d.isMobile)()?76:106}},a().createElement(Bt,null),b&&a().createElement(Ot,{all_positions:r,current_symbol_spot:I,current_symbol_spot_time:z,should_highlight_current_spot:P,symbol:C})):null};Gt.propTypes={accumulator_barriers_data:o().object,all_positions:o().array,topWidgets:o().func,charts_ref:o().object,bottomWidgets:o().func,chart_type:o().string,chart_layout:o().any,chartStateChange:o().func,exportLayout:o().func,end_epoch:o().number,granularity:o().number,is_accumulator:o().bool,is_trade_enabled:o().bool,is_socket_opened:o().bool,has_alternative_source:o().bool,main_barrier:o().any,refToAddTick:o().func,setChartStatus:o().func,settings:o().object,should_show_eu_content:o().bool,should_highlight_current_spot:o().bool,symbol:o().string,wsForget:o().func,wsForgetStream:o().func,wsSendRequest:o().func,wsSubscribe:o().func};var Ht=(0,w.$j)((function(t){var e=t.client,r=t.modules,n=t.ui,o=t.common,i=t.contract_trade,a=t.portfolio;return{accumulator_barriers_data:i.accumulator_barriers_data,all_positions:a.all_positions,is_socket_opened:o.is_socket_opened,granularity:i.granularity,chart_type:i.chart_type,chartStateChange:r.trade.chartStateChange,updateChartType:i.updateChartType,updateGranularity:i.updateGranularity,settings:{assetInformation:!1,countdown:n.is_chart_countdown_visible,isHighestLowestMarkerEnabled:!1,language:o.current_language.toLowerCase(),position:n.is_chart_layout_default?"bottom":"left",theme:n.is_dark_mode_on?"dark":"light"},last_contract:{is_digit_contract:i.last_contract.is_digit_contract,is_ended:i.last_contract.is_ended},is_trade_enabled:r.trade.is_trade_enabled,main_barrier:r.trade.main_barrier_flattened,extra_barriers:r.trade.barriers_flattened,should_show_eu_content:e.should_show_eu_content,show_digits_stats:r.trade.show_digits_stats,should_highlight_current_spot:i.should_highlight_current_spot,contract_type:r.trade.contract_type,symbol:r.trade.symbol,exportLayout:r.trade.exportLayout,setChartStatus:r.trade.setChartStatus,chart_layout:r.trade.chart_layout,wsForget:r.trade.wsForget,wsForgetStream:r.trade.wsForgetStream,wsSendRequest:r.trade.wsSendRequest,wsSubscribe:r.trade.wsSubscribe,active_symbols:r.trade.active_symbols,has_alternative_source:r.trade.has_alternative_source,refToAddTick:r.trade.refToAddTick}}))(Gt);const Vt=Ut;var Wt,Yt=a().lazy((function(){return(0,d.moduleLoader)((function(){return r.e("contract").then(r.bind(r,"./src/Modules/Contract/index.js"))}))})),qt={component:a().lazy((function(){return(0,d.moduleLoader)((function(){return Promise.resolve().then(r.bind(r,"./src/Modules/Page404/index.js"))}))})),getTitle:function(){return(0,_.localize)("Error 404")}};const Zt=function(){return Wt||(Wt=[{path:d.routes.contract,component:Yt,getTitle:function(){return(0,_.localize)("Contract Details")},is_authenticated:!0},{path:d.routes.trade,component:Vt,getTitle:function(){return(0,_.localize)("Trader")},exact:!0}]).push(qt),Wt};var Xt=["active_class","to","children"];function $t(){return $t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$t.apply(this,arguments)}function Jt(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var Kt=function(t){var e=t.active_class,r=t.to,n=t.children,o=Jt(t,Xt),i=function(t){return/^\//.test(t)?t:"/".concat(t||"")}(r),s=m(i,Zt());if(!s)throw new Error("Route not found: ".concat(r));return r?a().createElement(h.NavLink,$t({"data-testid":"dt_binary_link",to:i,activeClassName:e||"active",exact:s.exact},o),n):a().createElement("a",$t({"data-testid":"dt_binary_link"},o),n)};Kt.propTypes={active_class:o().string,children:o().oneOfType([o().object,o().array,o().string]),to:o().string};const Qt=Kt;var te=r("./src/Modules/Page404/index.js");function ee(){return ee=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ee.apply(this,arguments)}const re=function(t){return a().createElement(h.Route,{exact:t.exact,path:t.path,render:function(e){var r,n=null,o=(0,d.removeBranchName)(location.pathname).replace(/\/$/,""),i=function(e){var r;return""===e||(null!==(r=t.path)&&void 0!==r&&r.includes(":")?e.substring(0,e.lastIndexOf("/")+1)===t.path.substring(0,t.path.indexOf(":")):t.path===e||!(!t.routes||!t.routes.find((function(t){return e===t.path}))))}(o);if(t.component===h.Redirect){var s=t.to;if(t.path===d.routes.index)s=e.location.pathname.toLowerCase().replace(t.path,"");n=a().createElement(h.Redirect,{to:s})}else if(i&&t.is_authenticated&&!t.is_logging_in&&!t.is_logged_in)(0,d.redirectToLogin)(t.is_logged_in,(0,_.getLanguage)());else{var c=t.routes?t.routes.find((function(t){return t.default})):{},l=!(0,d.isEmptyObject)(c);n=a().createElement(a().Fragment,null,l&&o===t.path&&a().createElement(h.Redirect,{to:c.path}),i?a().createElement(t.component,ee({},e,{routes:t.routes})):a().createElement(te.default,null))}var u=(null===(r=t.getTitle)||void 0===r?void 0:r.call(t))||"";return document.title="".concat(u," | ").concat(d.default_title),(0,d.alternateLinkTagChange)(),(0,d.canonicalLinkTagChange)(),n}})};function ne(){return ne=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ne.apply(this,arguments)}const oe=function(t){return a().createElement(a().Suspense,{fallback:a().createElement("div",null)},a().createElement(h.Switch,null,Zt().map((function(e,r){return a().createElement(re,ne({key:r},e,t))}))))};var ie=function(t,e){return t.some((function(t){return!!(0,f.matchPath)(e,{path:t,exact:!0})}))},ae=function(t){var e=t.path_from,r=t.path_to,n=t.action,o=t.match_patterns,i=t.callback;"PUSH"!==n&&"POP"!==n||i(o.some((function(t){return ie(t.from,e)&&ie(t.to,r)})));return!0},se=c()({loader:function(){return r.e("error-component").then(r.bind(r,"./src/App/Components/Elements/Errors/index.js"))},loading:p.UILoader,render:function(t,e){var r=t.default;return a().createElement(r,e)}}),ce=function(t){var e=t.onUnmountPortfolio,r=t.error,n=t.has_error,o=t.history,i=t.is_logged_in,s=t.is_logging_in,c=t.passthrough,l=t.setPromptHandler,u=t.setTradeMountingPolicy;return a().useEffect((function(){return l&&l(!0,(function(t,r){return ae({path_from:o.location.pathname,path_to:t.pathname,match_patterns:[{from:Zt().flatMap((function(t){return t.routes?t.routes.map((function(t){return t.path})):[t.path]})).filter((function(t){return t&&t!==d.routes.mt5&&t!==d.routes.dxtrade})),to:[d.routes.mt5,d.routes.dxtrade]}],action:r,callback:function(t){t&&e()}}),ae({path_from:o.location.pathname,path_to:t.pathname,match_patterns:[{from:[d.routes.contract],to:[d.routes.trade]},{from:[d.routes.trade],to:[d.routes.contract]}],action:r,callback:u})})),function(){null==l||l(!1)}}),[]),a().useEffect((function(){return function(){return e()}}),[e]),n?a().createElement(se,r):a().createElement(oe,{is_logged_in:i,is_logging_in:s,passthrough:c})};ce.propTypes={error:u.PropTypes.objectOrObservableObject,has_error:o().bool,history:o().object,is_logged_in:o().bool,is_logging_in:o().bool,onUnmountPortfolio:o().func,passthrough:o().object,setPromptHandler:o().func,setTradeMountingPolicy:o().func};const le=(0,f.withRouter)((0,w.$j)((function(t){var e=t.client,r=t.common,n=t.modules,o=t.ui;return{onUnmountPortfolio:t.portfolio.onUnmount,error:r.error,has_error:r.has_error,is_logged_in:e.is_logged_in,is_logging_in:e.is_logging_in,setPromptHandler:o.setPromptHandler,setTradeMountingPolicy:n.trade.setSkipPrePostLifecycle}}))(ce));var ue=r("../../node_modules/react-transition-group/esm/TransitionGroup.js"),fe=r("./src/Stores/Modules/Trading/Helpers/multiplier.js"),pe=r("./src/App/Components/Elements/ContentLoader/index.js"),de=r("./src/Constants/contract.js"),he=r("./src/Utils/Helpers/market-underlying.js"),me=function(t){var e=t.is_visible,r="won"===t.result;return a().createElement(a().Fragment,null,a().createElement(E.Z,{in:e,timeout:250,classNames:{enter:"positions-modal-card__result--enter",enterDone:"positions-modal-card__result--enter-done",exit:"positions-modal-card__result--exit"},unmountOnExit:!0},a().createElement("div",{className:"positions-modal-card__caption-wrapper","data-testid":"result_mobile"},a().createElement("span",{className:v()("positions-modal-card__caption",{"positions-modal-card__caption--won":r,"positions-modal-card__caption--lost":!r})},r?a().createElement(a().Fragment,null,(0,_.localize)("Won"),a().createElement(p.Icon,{icon:"IcCheckmarkCircle",className:"positions-modal-card__icon",color:"green"})):a().createElement(a().Fragment,null,(0,_.localize)("Lost"),a().createElement(p.Icon,{icon:"IcCrossCircle",className:"positions-modal-card__icon",color:"red"}))))))};me.propTypes={is_visible:o().bool,result:o().string};const _e=me;var ye=function(t){var e,r,n=t.active_symbols,o=t.addToast,i=t.className,s=t.contract_info,c=t.contract_update,l=t.currency,u=t.current_focus,f=t.current_tick,m=t.getContractById,y=t.id,b=t.indicative,g=t.is_loading,w=t.is_mobile,S=t.is_sell_requested,x=t.is_unsupported,k=t.onClickSell,O=t.profit_loss,j=t.onClickCancel,P=t.removeToast,C=t.result,T=t.sell_price,L=t.server_time,A=t.setCurrentFocus,N=t.should_show_cancellation_warning,D=t.status,I=t.toggleCancellationWarning,z=t.togglePositions,M=t.toggleUnsupportedContractModal,R=t.type,U=a().createElement("div",{className:"positions-modal-card__content-loader"},a().createElement(pe.r,{speed:2})),F=(0,d.isMultiplierContract)(s.contract_type),B=(0,d.isAccumulatorContract)(s.contract_type),G=(0,d.isVanillaContract)(s.contract_type),H=(0,d.isCryptoContract)(s.underlying),V=!F||H&&F,W=!!(0,d.getEndTime)(s),Y=O>=0?"won":"lost",q=(0,d.getTotalProfit)(s),Z=(0,d.hasContractEntered)(s)&&(0,d.isOpen)(s),X=(0,d.getSymbolDisplayName)(n,(0,he.cS)(s.shortcode).underlying),$=a().createElement(a().Fragment,null,a().createElement("div",{className:v()("positions-modal-card__grid","positions-modal-card__grid-header")},a().createElement("div",{className:"positions-modal-card__underlying-name"},a().createElement(p.Icon,{icon:s.underlying?"IcUnderlying".concat(s.underlying):"IcUnknown",size:34}),a().createElement(p.Text,{size:"xxs",className:"positions-modal-card__symbol",weight:"bold"},s.display_name)),a().createElement("div",{className:"positions-modal-card__type"},a().createElement(p.ContractCard.ContractTypeCell,{getContractTypeDisplay:de.h8,is_high_low:(0,d.isHighLow)({shortcode:s.shortcode}),multiplier:s.multiplier,type:R})),a().createElement(E.Z,{in:Z,timeout:250,classNames:{enter:"positions-modal-card__sell-button--enter",enterDone:"positions-modal-card__sell-button--enter-done",exit:"positions-modal-card__sell-button--exit"},unmountOnExit:!0},a().createElement("div",{className:"positions-modal-card__sell-button"},a().createElement(p.ContractCard.Sell,{contract_info:s,is_sell_requested:S,getCardLabels:de.gk,onClickSell:k})))),a().createElement(p.CurrencyBadge,{currency:null!==(e=null==s?void 0:s.currency)&&void 0!==e?e:""}),a().createElement("div",{className:v()("positions-modal-card__grid","positions-modal-card__grid-body")},a().createElement("div",{className:v()("positions-modal-card__grid-profit-payout")},a().createElement("div",{className:v()("positions-modal-card__profit-loss","positions-modal-card__profit-loss-label")},C?(0,_.localize)("Profit/Loss:"):(0,_.localize)("Potential profit/loss:")),a().createElement("div",{className:v()("positions-modal-card__indicative","positions-modal-card__indicative-label")},C?(0,_.localize)("Payout:"):(0,_.localize)("Indicative price:")),a().createElement("div",{className:v()("positions-modal-card__profit-loss",{"positions-modal-card__profit-loss--is-crypto":(0,d.isCryptocurrency)(l),"positions-modal-card__profit-loss--negative":O<0,"positions-modal-card__profit-loss--positive":O>0})},a().createElement(p.Money,{amount:Math.abs(O),currency:l}),a().createElement("div",{className:v()("positions-modal-card__indicative--movement",{"positions-modal-card__indicative--movement-complete":!!C})},"profit"===D&&a().createElement(p.Icon,{icon:"IcProfit"}),"loss"===D&&a().createElement(p.Icon,{icon:"IcLoss"}))),a().createElement("div",{className:"positions-modal-card__indicative"},a().createElement(p.Money,{amount:T||b,currency:l}),a().createElement("div",{className:v()("positions-modal-card__indicative--movement",{"positions-modal-card__indicative--movement-complete":!!C})},"profit"===D&&a().createElement(p.Icon,{icon:"IcProfit"}),"loss"===D&&a().createElement(p.Icon,{icon:"IcLoss"})))),a().createElement("div",{className:v()("positions-modal-card__grid-price-payout")},a().createElement("div",{className:"positions-modal-card__purchase-price"},a().createElement(p.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},(0,_.localize)("Purchase price:")),a().createElement(p.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},a().createElement(p.Money,{amount:s.buy_price,currency:l}))),a().createElement("div",{className:"positions-modal-card__payout-price"},a().createElement(p.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},(0,_.localize)("Potential payout:")),a().createElement(p.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},s.payout?a().createElement(p.Money,{amount:s.payout,currency:l}):a().createElement("strong",null,"-i")))),C||s.is_sold?a().createElement(_e,{contract_id:y,is_visible:!!s.is_sold,result:C||Y}):a().createElement(p.ProgressSliderMobile,{className:"positions-modal-card__progress",current_tick:f,getCardLabels:de.gk,is_loading:g,start_time:s.date_start,expiry_time:s.date_expiry,server_time:L,ticks_count:s.tick_count}))),J=a().createElement(a().Fragment,null,a().createElement(h.NavLink,{className:v()("dc-contract-card",{"dc-contract-card--green":!F&&O>0&&!C,"dc-contract-card--red":!F&&O<0&&!C}),to:{pathname:"/contract/".concat(s.contract_id)}},a().createElement(p.ContractCard.Header,{contract_info:s,display_name:X,getCardLabels:de.gk,getContractTypeDisplay:de.h8,has_progress_slider:!w&&V,is_mobile:w,is_sell_requested:S,onClickSell:k,server_time:L})),a().createElement(p.CurrencyBadge,{currency:null!==(r=null==s?void 0:s.currency)&&void 0!==r?r:""}),a().createElement("div",{className:v()("positions-modal-card__grid","positions-modal-card__grid-body")},a().createElement("div",{className:v()("positions-modal-card__grid-profit-payout")},a().createElement("div",{className:"positions-modal-card__purchase-price"},a().createElement(p.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},(0,_.localize)("Buy price:")),a().createElement(p.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},a().createElement(p.Money,{amount:s.buy_price,currency:l}))),a().createElement("div",{className:"positions-modal-card__payout-price"},a().createElement(p.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},(0,_.localize)("Contract value:")),a().createElement(p.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},a().createElement(p.Money,{amount:s.bid_price,currency:l})))),a().createElement("div",{className:v()("positions-modal-card__grid-price-payout")},a().createElement("div",{className:"positions-modal-card__purchase-price"},a().createElement(p.Text,{size:"xxxs",className:"positions-modal-card__purchase-label"},(0,_.localize)("Entry spot:")),a().createElement(p.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__purchase-value"},a().createElement(p.Money,{amount:s.entry_spot,currency:l}))),a().createElement("div",{className:"positions-modal-card__payout-price"},a().createElement(p.Text,{size:"xxxs",className:"positions-modal-card__payout-label"},(0,_.localize)("Strike:")),a().createElement(p.Text,{weight:"bold",size:"xxs",className:"positions-modal-card__payout-value"},a().createElement(p.Money,{amount:s.barrier,currency:l})))),C||s.is_sold?a().createElement(_e,{contract_id:y,is_visible:!!s.is_sold,result:C||Y}):a().createElement(p.ProgressSliderMobile,{className:"positions-modal-card__progress",current_tick:f,getCardLabels:de.gk,is_loading:g,start_time:s.date_start,expiry_time:s.date_expiry,server_time:L,ticks_count:s.tick_count})),a().createElement("div",{className:v()("positions-modal-card__item",i)},a().createElement("div",{className:"dc-contract-card-item__header"},(0,de.gk)().TOTAL_PROFIT_LOSS),a().createElement("div",{className:v()("dc-contract-card-item__body",{"dc-contract-card-item__body--crypto":(0,d.isCryptocurrency)(l),"dc-contract-card-item__body--loss":+q<0,"dc-contract-card-item__body--profit":+q>0})},a().createElement(p.Money,{amount:q,currency:l}),a().createElement("div",{className:v()("dc-contract-card__indicative--movement",{"dc-contract-card__indicative--movement-complete":!!s.is_sold})},"profit"===D&&a().createElement(p.Icon,{icon:"IcProfit"}),"loss"===D&&a().createElement(p.Icon,{icon:"IcLoss"})))),a().createElement(p.ContractCard.Footer,{contract_info:s,getCardLabels:de.gk,is_multiplier:F,is_sell_requested:S,onClickCancel:j,onClickSell:k,server_time:L,status:D})),K=a().createElement(p.ContractCard.Header,{contract_info:s,display_name:X,getCardLabels:de.gk,getContractTypeDisplay:de.h8,has_progress_slider:!w&&V||B,is_mobile:w,is_sell_requested:S,onClickSell:k,server_time:L}),Q=a().createElement(p.ContractCard.Body,{addToast:o,connectWithContractUpdate:fe.tP,contract_info:s,contract_update:c,currency:l,current_focus:u,getCardLabels:de.gk,getContractById:m,is_accumulator:B,is_mobile:w,is_multiplier:F,is_positions:!0,is_sold:!!s.is_sold,has_progress_slider:w&&V&&!W,removeToast:P,server_time:L,setCurrentFocus:A,should_show_cancellation_warning:N,status:D,toggleCancellationWarning:I}),tt=a().createElement(p.ContractCard.Footer,{contract_info:s,getCardLabels:de.gk,is_multiplier:F,is_sell_requested:S,onClickCancel:j,onClickSell:k,server_time:L,status:D}),et=a().createElement(a().Fragment,null,a().createElement(p.ContractCard,{contract_info:s,getCardLabels:de.gk,is_multiplier:F,profit_loss:O,should_show_result_overlay:!1},K,Q,tt)),rt=F||B?et:G?J:$;return a().createElement("div",{id:"dt_drawer_card_".concat(y),className:v()("positions-modal-card__wrapper",i)},x?a().createElement("div",{className:v()("positions-modal-card"),onClick:function(){return M(!0)}},s.underlying?rt:U):a().createElement(a().Fragment,null,a().createElement(Qt,{onClick:z,className:v()("positions-modal-card",{"positions-modal-card--multiplier":F}),to:(0,d.getContractPath)(y)},s.underlying?rt:U)))};ye.propTypes={active_symbols:o().array,addToast:o().func,className:o().string,contract_info:o().object,contract_update:o().object,currency:o().string,current_focus:o().string,current_tick:o().number,duration:o().oneOfType([o().number,o().string]),duration_unit:o().string,exit_spot:o().oneOfType([o().number,o().string]),getContractById:o().func,id:o().number,indicative:o().number,is_loading:o().bool,is_mobile:o().bool,is_sell_requested:o().bool,is_unsupported:o().bool,is_valid_to_sell:o().oneOfType([o().number,o().bool]),onClickRemove:o().func,onClickSell:o().func,onClickCancel:o().func,profit_loss:o().number,removeToast:o().func,result:o().string,sell_price:o().number,sell_time:o().number,server_time:o().object,setCurrentFocus:o().func,should_show_cancellation_warning:o().bool,status:o().string,toggleCancellationWarning:o().func,togglePositions:o().func,toggleUnsupportedContractModal:o().func,type:o().string};const ve=(0,w.$j)((function(t){var e=t.common,r=t.ui,n=t.contract_trade;return{active_symbols:t.modules.trade.active_symbols,addToast:r.addToast,current_focus:r.current_focus,getContractById:n.getContractById,is_mobile:r.is_mobile,removeToast:r.removeToast,server_time:e.server_time,setCurrentFocus:r.setCurrentFocus,should_show_cancellation_warning:r.should_show_cancellation_warning,toggleCancellationWarning:r.toggleCancellationWarning,updateLimitOrder:n.updateLimitOrder}}))(ye);var be=function(t){var e=t.positions_count,r=t.is_open,n=t.togglePositions,o=v()("positions-toggle",{"positions-toggle--active":r,"positions-toggle--has-count":e>0});return a().createElement("a",{id:"dt_positions_toggle","data-testid":"dt_positions_toggle",className:o,onClick:n,"data-count":e},a().createElement(p.Icon,{data_testid:"dt_icon",icon:"IcPortfolio",className:"positions-toggle__icon"}))};be.propTypes={is_open:o().bool,is_positions_drawer_on:o().bool,positions_count:o().number,togglePositions:o().func,togglePositionsDrawer:o().func};const ge=be;function we(){return we=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},we.apply(this,arguments)}const Ee=(0,w.$j)((function(t){var e=t.modules,r=t.ui,n=t.portfolio;return{symbol:e.trade.symbol,trade_contract_type:e.trade.contract_type,onClickRemove:n.removePositionById,togglePositionsDrawer:r.togglePositionsDrawer,is_positions_drawer_on:r.is_positions_drawer_on}}))((function(t){var e=t.active_positions_count,r=t.all_positions,n=t.currency,o=t.disableApp,i=t.enableApp,s=t.error,c=t.is_empty,l=t.is_positions_drawer_on,u=t.onClickSell,f=t.onClickRemove,m=t.onClickCancel,y=t.symbol,v=t.togglePositionsDrawer,b=t.toggleUnsupportedContractModal,g=t.trade_contract_type,w=[],k=function(){w.slice(0,5).map((function(t){var e=t.contract_info;null!=e&&e.is_sold&&f(e.contract_id)})),v()};w=r.filter((function(t){return t.contract_info&&y===t.contract_info.underlying&&(0,x._M)(t.contract_info,g)}));var O=a().createElement(a().Fragment,null,a().createElement(ue.Z,{component:"div"},w.slice(0,5).map((function(t){return a().createElement(E.Z,{appear:!0,key:t.id,in:!0,timeout:150,classNames:{appear:"dc-contract-card__wrapper--enter",enter:"dc-contract-card__wrapper--enter",enterDone:"dc-contract-card__wrapper--enter-done",exit:"dc-contract-card__wrapper--exit"},unmountOnExit:!0},a().createElement(ve,we({onClickSell:u,onClickCancel:m,onClickRemove:f,key:t.id,currency:n,toggleUnsupportedContractModal:b,togglePositions:v},t)))}))));return a().createElement(a().Fragment,null,a().createElement(ge,{is_open:l,togglePositions:v,positions_count:e}),a().createElement(p.Modal,{is_open:l,toggleModal:k,id:"dt_mobile_positions",is_vertical_top:!0,has_close_icon:!0,enableApp:i,disableApp:o,width:"calc(100vw - 32px)"},a().createElement(p.Div100vhContainer,{className:"positions-modal",height_offset:"48px"},a().createElement("div",{className:"positions-modal__header"},a().createElement(p.Text,{size:"xxxs",className:"positions-modal__title"},a().createElement(p.Icon,{icon:"IcPortfolio",className:"positions-modal__title-icon"}),(0,_.localize)("Recent positions")),a().createElement("div",{className:"positions-modal__close-btn",onClick:k},a().createElement(p.Icon,{icon:"IcMinusBold"}))),a().createElement("div",{className:"positions-modal__body"},c||s?a().createElement(S,{error:s}):O),a().createElement("div",{className:"positions-modal__footer"},a().createElement(h.NavLink,{onClick:k,className:"dc-btn dc-btn--secondary dc-btn__large positions-modal__footer-btn",to:d.routes.positions},a().createElement(p.Text,{size:"xs",weight:"bold"},(0,_.localize)("Go to Reports")))))))}));var Se=function(t){var e=t.active_positions_count,r=t.positions,n=t.positions_currency,o=t.disableApp,i=t.enableApp,s=t.positions_error,c=t.onPositionsSell,l=t.onPositionsRemove,u=t.onPositionsCancel,f=t.symbol,p=t.trade_contract_type,d=r.filter((function(t){return t.contract_info&&f===t.contract_info.underlying&&(0,x._M)(t.contract_info,p)}));return a().createElement(Ee,{active_positions_count:e,all_positions:r,currency:n,disableApp:o,is_empty:!d.length,enableApp:i,error:s,onClickSell:c,onClickRemove:l,onClickCancel:u})};Se.propTypes={active_positions_count:o().number,positions:u.PropTypes.arrayOrObservableArray,positions_currency:o().string,disableApp:o().func,enableApp:o().func,positions_error:o().string,onPositionsSell:o().func,onPositionsRemove:o().func,onPositionsCancel:o().func,symbol:o().string,trade_contract_type:o().string};const xe=(0,w.$j)((function(t){var e=t.client,r=t.modules,n=t.ui,o=t.portfolio;return{active_positions_count:o.active_positions_count,positions:o.all_positions,positions_currency:e.currency,disableApp:n.disableApp,enableApp:n.enableApp,positions_error:o.error,onPositionsSell:o.onClickSell,onPositionsRemove:o.removePositionById,onPositionsCancel:o.onClickCancel,symbol:r.trade.symbol,trade_contract_type:r.trade.contract_type}}))(Se);function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Oe(){Oe=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==ke(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function je(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var Pe=function(t){var e=t.populateHeaderExtensions,r=t.store,n=t.is_logged_in,o=t.is_populating_account_list,i=t.onMountPositions,s=t.onMountCashier,c=t.setAccountSwitchListener,l=location.pathname!==d.routes.mt5,u=n&&l,f=a().useCallback((function(){var t=u&&a().createElement(p.MobileWrapper,null,a().createElement(w.z1,{store:r},a().createElement(xe,null)));e(t)}),[e,r,l,o]);return a().useEffect((function(){var t=function(){var t,e=(t=Oe().mark((function t(){return Oe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,d.isMobile)()||!l){t.next=9;break}return t.next=3,(0,M.when)((function(){return!o}));case 3:if(!n){t.next=9;break}return t.next=6,d.WS.wait("authorize");case 6:i(),s(!0),c();case 9:f();case 10:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){je(i,n,o,a,s,"next",t)}function s(t){je(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return t(),function(){return e(null)}}),[s,i,f,e,c,r,l]),a().useEffect((function(){f()})),null};Pe.propTypes={populateHeaderExtensions:o().func,store:o().object,is_logged_in:o().bool,is_populating_account_list:o().bool,onMountPositions:o().func,onMountCashier:o().func,setAccountSwitchListener:o().func};const Ce=(0,w.$j)((function(t){var e=t.client,r=t.modules,n=t.ui,o=t.portfolio;return{populateHeaderExtensions:n.populateHeaderExtensions,is_logged_in:e.is_logged_in,is_populating_account_list:e.is_populating_account_list,onMountPositions:o.onMount,onMountCashier:r.cashier.general_store.onMountCommon,setAccountSwitchListener:r.cashier.general_store.setAccountSwitchListener}}))(Pe),Te=ge;var Le=function(t){var e=t.active_positions_count,r=t.is_logged_in,n=t.is_positions_drawer_on,o=t.location,i=t.populateFooterExtensions,s=t.togglePositionsDrawer;a().useEffect((function(){return l()})),a().useEffect((function(){return function(){return i([])}}),[]);var c=function(){return a().createElement(Te,{is_open:n,togglePositions:s,positions_count:e})},l=function(){var t=o.pathname===d.routes.trade;i(r&&t?[{position:"left",Component:c}]:[])};return null};Le.propTypes={active_positions_count:o().number,is_logged_in:o().bool,is_positions_drawer_on:o().bool,location:o().object,populateFooterExtensions:o().func,togglePositionsDrawer:o().func};const Ae=(0,w.$j)((function(t){var e=t.client,r=t.ui;return{active_positions_count:t.portfolio.active_positions_count,is_logged_in:e.is_logged_in,is_positions_drawer_on:r.is_positions_drawer_on,populateFooterExtensions:r.populateFooterExtensions,togglePositionsDrawer:r.togglePositionsDrawer}}))((0,h.withRouter)(Le));var Ne=c()({loader:function(){return r.e("settings-chart").then(r.bind(r,"./src/App/Containers/SettingsModal/settings-chart.jsx"))},loading:p.UILoader}),De=function(t){var e=t.populateSettingsExtensions,r=t.store,n=function(){var t=[{icon:"IcChart",label:(0,_.localize)("Charts"),value:function(t){return function(t,e){return a().createElement(w.z1,{store:e},a().createElement(Ne,t))}(t,r)}}];e(t)};return a().useEffect((function(){return function(){return e(null)}}),[e]),a().useEffect((function(){return n()})),null};De.propTypes={populateSettingsExtensions:o().func,store:o().object};const Ie=(0,w.$j)((function(t){return{populateSettingsExtensions:t.ui.populateSettingsExtensions}}))(De);var ze=r("./src/Modules/Trading/Containers/toast-popup.jsx"),Me=r("./src/Stores/Modules/Trading/Helpers/contract-type.js");function Re(t){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(t)}function Ue(){Ue=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Re(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Fe(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var Be=function(){var t,e=(t=Ue().mark((function t(e){return Ue().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Me.R.buildContractTypesConfig(e);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Fe(i,n,o,a,s,"next",t)}function s(t){Fe(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),Ge=r("./src/Stores/Modules/Trading/Helpers/start-date.js");function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function Ve(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return We(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qe(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==He(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===He(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ze=function(){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(r),!0).forEach((function(e){qe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({amount:{rules:[["req",{message:(0,_.localize)("Amount is a required field.")}],["number",{min:0,type:"float"}]]},barrier_1:{rules:[["req",{condition:function(t){return t.barrier_count&&t.form_components.indexOf("barrier")>-1},message:(0,_.localize)("Barrier is a required field.")}],["barrier",{condition:function(t){return t.barrier_count}}],["custom",{func:function(t,e,r,n){return!(r.barrier_count>1)||+t>+n.barrier_2},message:(0,_.localize)("Higher barrier must be higher than lower barrier.")}],["custom",{func:function(t,e,r,n){return!/^[+-]/.test(n.barrier_1)||(o=r.is_vanilla,i=+n.barrier_1,o||0!==i);var o,i},message:(0,_.localize)("Barrier cannot be zero.")}]],trigger:"barrier_2"},barrier_2:{rules:[["req",{condition:function(t){return t.barrier_count>1&&t.form_components.indexOf("barrier")>-1},message:(0,_.localize)("Barrier is a required field.")}],["barrier",{condition:function(t){return t.barrier_count}}],["custom",{func:function(t,e,r,n){return/^[+-]/g.test(n.barrier_1)&&/^[+-]/g.test(t)||/^(?![+-])/g.test(n.barrier_1)&&/^(?![+-])/g.test(t)},message:(0,_.localize)("Both barriers should be relative or absolute")}],["custom",{func:function(t,e,r,n){return+n.barrier_1>+t},message:(0,_.localize)("Lower barrier must be lower than higher barrier.")}]],trigger:"barrier_1"},duration:{rules:[["req",{message:(0,_.localize)("Duration is a required field.")}]]},start_date:{trigger:"start_time"},expiry_date:{trigger:"expiry_time"},start_time:{rules:[["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,d.isTimeValid)(t)},message:(0,_.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,d.isHourValid)(t)},message:(0,_.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,d.isMinuteValid)(t)},message:(0,_.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(t,e,r){if("spot"===r.contract_start_type)return!0;if(!(0,d.isTimeValid)(t))return!1;var n=(0,d.toMoment)(r.start_date),o=n.clone(),i=Ve(t.split(":"),2),a=i[0],s=i[1];return(0,Ge.Y)(r.sessions,o.hour(a).minute(s),n)},message:(0,_.localize)("Start time cannot be in the past.")}]]},expiry_time:{rules:[["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,d.isTimeValid)(t)},message:(0,_.localize)('Please enter the start time in the format "HH:MM".')}],["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,d.isHourValid)(t)},message:(0,_.localize)("Hour must be between 0 and 23.")}],["custom",{func:function(t,e,r){return"spot"===r.contract_start_type||(0,d.isMinuteValid)(t)},message:(0,_.localize)("Minute must be between 0 and 59.")}],["custom",{func:function(t,e,r){if("spot"===r.contract_start_type)return!0;if(!(0,d.isTimeValid)(t))return!1;var n=(0,d.toMoment)(r.start_date),o=n.clone(),i=Ve(t.split(":"),2),a=i[0],s=i[1];return(0,Ge.Y)(r.sessions,o.hour(a).minute(s),n)},message:(0,_.localize)("Expiry time cannot be in the past.")}]]}},Xe())},Xe=function(){return{stop_loss:{rules:[["req",{condition:function(t){return t.has_stop_loss&&!t.stop_loss},message:(0,_.localize)("Please enter a stop loss amount.")}]]},take_profit:{rules:[["req",{condition:function(t){return t.has_take_profit&&!t.take_profit},message:(0,_.localize)("Please enter a take profit amount.")}]]}}},$e=r("./src/_common/base/server_time.js"),Je=r.n($e);function Ke(t){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(t)}function Qe(){Qe=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Ke(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function tr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(r),!0).forEach((function(e){rr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Ke(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ke(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nr(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var or=function(){var t,e=(t=Qe().mark((function t(e,r,n){return Qe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d.WS.buy(er({proposal_id:e,price:r},n&&{passthrough:n})));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nr(i,n,o,a,s,"next",t)}function s(t){nr(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}(),ir=r("./src/Modules/Trading/Helpers/contract-type.js");function ar(t){return function(t){if(Array.isArray(t))return sr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return sr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var cr=function(t){var e=t.contract_types_list,r=t.contract_type;return Me.R.getContractType(e,r)},lr=function(t){return Me.R.getContractValues(t)};function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function fr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return pr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dr(Object(r),!0).forEach((function(e){mr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==ur(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ur(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _r=function(t){var e=(0,d.getExpiryType)(t);return hr({contract_expiry_type:e},t.contract_expiry_type!==e&&Me.R.getBarriers(t.contract_type,e))},yr=function(t){var e=(0,d.getExpiryType)(t),r=t.duration,n=t.duration_min_max,o=t.duration_unit;return hr({},vr({contract_expiry_type:e,duration:r,duration_min_max:n,duration_unit:o}))},vr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.contract_expiry_type,r=t.duration,n=t.duration_min_max,o=t.duration_unit,i=fr((0,d.getDurationMinMaxValues)(n,e,o),2),a=i[0],s=i[1];return r<a?{duration:a}:r>s?{duration:s}:{}};function br(t){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},br(t)}function gr(){gr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==br(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function wr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wr(Object(r),!0).forEach((function(e){Sr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==br(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===br(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xr(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function kr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xr(i,n,o,a,s,"next",t)}function s(t){xr(i,n,o,a,s,"throw",t)}a(void 0)}))}}var Or=function(){var t=kr(gr().mark((function t(e){var r,n,o,i,a,s,c,l,u,f,p,d,h,m,_,y,v,b;return gr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.contract_type,n=e.duration_unit,o=e.start_date,i=e.root_store.common.server_time,a=e.start_time,s=e.expiry_date,c=e.expiry_type,a=a||i.clone().add(6,"minute").format("HH:mm"),l=Me.R.getStartType(o),u=l.contract_start_type,f=Me.R.getSessions(r,o),p=f.sessions,d=Me.R.getStartTime(p,o,a),a=d.start_time,h=Me.R.getDurationUnitsList(r,u),m=h.duration_units_list,_=Me.R.getDurationUnit(n,r,u),y=Me.R.getExpiryType(m,c),c=y.expiry_type,v=Me.R.getExpiryDate(m,s,c,o),s=v.expiry_date,b=Me.R.getDurationMinMax(r,u),t.abrupt("return",Er(Er(Er(Er(Er(Er(Er(Er({},l),h),b),_),f),d),v),y));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),jr=function(){var t=kr(gr().mark((function t(e){var r,n,o,i,a,s,c,l,u,f,p,d;return gr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.start_time,n=e.expiry_date,o=e.expiry_type,i=e.expiry_time,a=e.start_date,s=e.symbol,c=e.sessions,t.next=3,Me.R.getTradingTimes(n,s);case 3:return l=t.sent,u={market_open_times:l.open},f={market_close_times:l.close},p=f.market_close_times,d=Me.R.getExpiryTime(n,i,o,p,c,a,r),t.abrupt("return",Er(Er(Er({},d),u),f));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function Pr(t){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pr(t)}function Cr(t){return function(t){if(Array.isArray(t))return Tr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Tr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lr(){Lr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==Pr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ar(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Nr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ar(Object(r),!0).forEach((function(e){Dr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dr(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Pr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Pr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ir(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function zr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ir(i,n,o,a,s,"next",t)}function s(t){Ir(i,n,o,a,s,"throw",t)}a(void 0)}))}}var Mr=function(){var t=zr(Lr().mark((function t(e,r){var n,o;return Lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getSnapshot(),o=0;case 2:if(!(o<r.length)){t.next=12;break}return t.t0=Object,t.t1=n,t.next=7,r[o](n);case 7:t.t2=t.sent,t.t0.assign.call(t.t0,t.t1,t.t2);case 9:o++,t.next=2;break;case 12:e.updateStore(Nr({},n));case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Rr=function(){var t=zr(Lr().mark((function t(e,r){var n,o;return Lr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Ur(e,r),t.next=3,Mr(e,n);case 3:return o=Fr(),t.next=6,Mr(e,o);case 6:e.updateStore({is_trade_enabled:!0});case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Ur=function(t,e){return[Me.R.getContractCategories,cr].concat(Cr(/\b(symbol|contract_type|is_equal)\b/.test(Object.keys(e))||!t.contract_type?[lr]:[]),[Or,_r],Cr(/\b(symbol|contract_type|is_equal)\b/.test(Object.keys(e))||!t.contract_type?[yr]:[]))},Fr=function(){return[jr]},Br=r("./src/Stores/Modules/Trading/Helpers/proposal.js"),Gr={CALL:"ABOVE",PUT:"BELOW",CALLE:"ABOVE",PUTE:"BELOW",EXPIRYRANGE:"BETWEEN",EXPIRYMISS:"OUTSIDE",RANGE:"BETWEEN",UPORDOWN:"OUTSIDE",ONETOUCH:"NONE_SINGLE",NOTOUCH:"NONE_SINGLE",ASIANU:"ABOVE",ASIAND:"BELOW",MULTUP:"ABOVE",MULTDOWN:"BELOW",ACCU:"NONE_DOUBLE"},Hr={1:"NONE_SINGLE",2:"NONE_DOUBLE"},Vr="#4bb4b3",Wr="#ff6444",Yr="#999999",qr="#6E6E6E",Zr="dotted",Xr="solid",$r=r("./src/_common/utility.js");function Jr(t){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jr(t)}function Kr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Jr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Jr(i)?i:String(i)),n)}var o,i}const Qr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}var e,r,n;return e=t,(r=[{key:"add",value:function(t,e){this.has(t)||(this.errors[t]=[]),-1===this.errors[t].indexOf(e)&&this.errors[t].push(e)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(t){return this.has(t)?this.errors[t][0]:null}},{key:"get",value:function(t){return this.has(t)?this.errors[t]:[]}},{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.errors,t)}}])&&Kr(e.prototype,r),n&&Kr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tn(t){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(t)}function en(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==tn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===tn(i)?i:String(i)),n)}var o,i}const rn=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.input=e,this.rules=r,this.store=n,this.errors=new Qr,this.error_count=0}var e,r,n;return e=t,n=[{key:"getRuleObject",value:function(t){var e="string"==typeof t,r={name:e?t:t[0],options:e?{}:t[1]||{}};return r.validator="custom"===r.name?t[1].func:(0,d.getPreBuildDVRs)()[r.name].func,r}}],(r=[{key:"addFailure",value:function(t,e,r){var n=r||e.options.message||(0,d.getPreBuildDVRs)()[e.name].message();"length"===e.name?n=(0,$r.template)(n,[e.options.min===e.options.max?e.options.min:"".concat(e.options.min,"-").concat(e.options.max)]):"min"===e.name?n=(0,$r.template)(n,[e.options.min]):"not_equal"===e.name&&(n=(0,$r.template)(n,[e.options.name1,e.options.name2])),this.errors.add(t,n),this.error_count++}},{key:"check",value:function(){var e=this;return Object.keys(this.input).forEach((function(r){Object.prototype.hasOwnProperty.call(e.rules,r)&&e.rules[r].forEach((function(n){var o=t.getRuleObject(n);if((o.validator||"function"==typeof o.validator)&&(!o.options.condition||o.options.condition(e.store))&&(""!==e.input[r]||"req"===o.name)){var i,a;if("number"===o.name){var s=o.validator(e.input[r],o.options,e.store,e.input);i=s.is_ok,a=s.message}else i=o.validator(e.input[r],o.options,e.store,e.input);i||e.addFailure(r,o,a)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}])&&en(e.prototype,r),n&&en(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nn(t){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nn(t)}function on(){on=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==nn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function an(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function sn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){an(i,n,o,a,s,"next",t)}function s(t){an(i,n,o,a,s,"throw",t)}a(void 0)}))}}function cn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ln(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?cn(Object(r),!0).forEach((function(e){un(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function un(t,e,r){return(e=pn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pn(n.key),n)}}function pn(t){var e=function(t,e){if("object"!==nn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nn(e)?e:String(e)}var dn=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,M.makeObservable)(this,{validation_errors:M.observable,validation_rules:M.observable,partial_fetch_time:M.observable,retrieveFromStorage:M.action,setValidationErrorMessages:M.action,setValidationRules:M.action,addRule:M.action,validateProperty:M.action,validateAllProperties:M.action,onSwitchAccount:M.action.bound,onPreSwitchAccount:M.action.bound,onLogout:M.action.bound,onClientInit:M.action.bound,onNetworkStatusChange:M.action.bound,onThemeChange:M.action.bound,onRealAccountSignupEnd:M.action.bound,disposePreSwitchAccount:M.action.bound,disposeSwitchAccount:M.action.bound,disposeLogout:M.action.bound,disposeClientInit:M.action.bound,disposeNetworkStatusChange:M.action.bound,disposeThemeChange:M.action.bound,disposeRealAccountSignupEnd:M.action.bound,onUnmount:M.action.bound,assertHasValidCache:M.action.bound});var n=r.root_store,o=r.local_storage_properties,i=r.session_storage_properties,a=r.validation_rules,s=r.store_name;if(Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0}),o&&o.length||i&&i.length){if(!s)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:s,enumerable:!1,writable:!1})}this.root_store=n,this.local_storage_properties=o||[],this.session_storage_properties=i||[],setTimeout((function(){e.setValidationRules(a),e.setupReactionForLocalStorage(),e.setupReactionForSessionStorage(),e.retrieveFromStorage()}),0)}var e,r,n;return e=t,r=[{key:"getSnapshot",value:function(t){var e=(0,M.toJS)(this);return(0,d.isEmptyObject)(this.root_store)||(e.root_store=this.root_store),t&&t.length&&(e=t.reduce((function(t,r){return Object.assign(t,un({},r,e[r]))}),{})),e}},{key:"setupReactionForLocalStorage",value:function(){var e=this;this.local_storage_properties.length&&(0,M.reaction)((function(){return e.local_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.local_storage_properties,t.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var e=this;this.session_storage_properties.length&&(0,M.reaction)((function(){return e.session_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.session_storage_properties,t.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(e,r){var n=JSON.stringify(this.getSnapshot(e),(function(t,e){if(null!==e)return e}));r===t.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,n):r===t.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,n)}},{key:"retrieveFromStorage",value:function(){var t=this,e=JSON.parse(localStorage.getItem(this.store_name,{})),r=JSON.parse(sessionStorage.getItem(this.store_name,{})),n=ln(ln({},e),r);Object.keys(n).forEach((function(e){return t[e]=n[e]}))}},{key:"setValidationErrorMessages",value:function(t,e){var r=this;this.validation_errors[t]&&!r.validation_errors[t].filter((function(t){return!e.includes(t)})).concat(e.filter((function(e){return!r.validation_errors[t].includes(e)}))).length||(this.validation_errors[t]=e)}},{key:"setValidationRules",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(r){t.addRule(r,e[r])}))}},{key:"addRule",value:function(t,e){var r=this;this.validation_rules[t]=e,(0,M.intercept)(this,t,(function(e){return r.validateProperty(t,e.newValue),e}))}},{key:"validateProperty",value:function(t,e){var r=this,n=this.validation_rules[t].trigger,o=un({},t,void 0!==e?e:this[t]),i=un({},t,this.validation_rules[t].rules||[]);n&&Object.hasOwnProperty.call(this,n)&&(o[n]=this[n],i[n]=this.validation_rules[n].rules||[]);var a=new rn(o,i,this);a.isPassed(),Object.keys(o).forEach((function(t){r.setValidationErrorMessages(t,a.errors.get(t))}))}},{key:"validateAllProperties",value:function(){var t=this,e=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);e.forEach((function(e){t.validateProperty(e,t[e])})),r.forEach((function(r){e.includes(r)||delete t.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(t){var e=this;t&&(this.switch_account_listener=t,this.switchAccountDisposer=(0,M.when)((function(){return e.root_store.client.switch_broadcast}),(function(){try{var t=e.switch_account_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Switching account listeners are required to return a promise.");t.then((function(){e.root_store.client.switchEndSignal(),e.onSwitchAccount(e.switch_account_listener)}))}catch(t){(0,d.isProduction)()||console.error(t)}})))}},{key:"onPreSwitchAccount",value:function(t){var e=this;t&&(this.pre_switch_account_listener=t,this.preSwitchAccountDisposer=(0,M.when)((function(){return e.root_store.client.pre_switch_broadcast}),(function(){try{var t,r=null===(t=e.pre_switch_account_listener)||void 0===t?void 0:t.call(e);if(!r||!r.then||"function"!=typeof r.then)throw new Error("Pre-switch account listeners are required to return a promise.");r.then((function(){e.root_store.client.setPreSwitchAccount(!1),e.onPreSwitchAccount(e.pre_switch_account_listener)}))}catch(t){(0,d.isProduction)()||console.error(t)}})))}},{key:"onLogout",value:function(t){var e=this;this.logoutDisposer=(0,M.when)((function(){return e.root_store.client.has_logged_out}),sn(on().mark((function t(){var r;return on().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r=e.logout_listener())||!r.then||"function"!=typeof r.then){t.next=6;break}r.then((function(){e.root_store.client.setLogout(!1),e.onLogout(e.logout_listener)})),t.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,d.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.logout_listener=t}},{key:"onClientInit",value:function(t){var e=this;this.clientInitDisposer=(0,M.when)((function(){return e.root_store.client.initialized_broadcast}),sn(on().mark((function t(){var r;return on().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r=e.client_init_listener())||!r.then||"function"!=typeof r.then){t.next=6;break}r.then((function(){e.root_store.client.setInitialized(!1),e.onClientInit(e.client_init_listener)})),t.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,d.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.client_init_listener=t}},{key:"onNetworkStatusChange",value:function(t){var e=this;this.networkStatusChangeDisposer=(0,M.reaction)((function(){return e.root_store.common.is_network_online}),(function(t){try{e.network_status_change_listener(t)}catch(t){(0,d.isProduction)()||console.error(t)}})),this.network_status_change_listener=t}},{key:"onThemeChange",value:function(t){var e=this;this.themeChangeDisposer=(0,M.reaction)((function(){return e.root_store.ui.is_dark_mode_on}),(function(t){try{e.theme_change_listener(t)}catch(t){(0,d.isProduction)()||console.error(t)}})),this.theme_change_listener=t}},{key:"onRealAccountSignupEnd",value:function(t){var e=this;this.realAccountSignupEndedDisposer=(0,M.when)((function(){return e.root_store.ui.has_real_account_signup_ended}),(function(){try{var t=e.real_account_signup_ended_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Real account signup listeners are required to return a promise.");t.then((function(){e.root_store.ui.setRealAccountSignupEnd(!1),e.onRealAccountSignupEnd(e.real_account_signup_ended_listener)}))}catch(t){(0,d.isProduction)()||console.error(t)}})),this.real_account_signup_ended_listener=t}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(t){if(this.root_store.client.loginid!==t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach((function(t){return t()})),this.partial_fetch_time=!1}}}],r&&fn(e.prototype,r),n&&fn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();dn.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var hn=function(t,e){var r=t.findIndex((function(t){return t.key===e}));r>-1&&t.splice(r,1)};function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function _n(t){return function(t){if(Array.isArray(t))return yn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return yn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==mn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===mn(i)?i:String(i)),n)}var o,i}var bn=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.color,a=o.line_style,s=o.not_draggable;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color=void 0,this.lineStyle=void 0,this.shade=void 0,this.shadeColor=void 0,this.high=void 0,this.low=void 0,this.relative=void 0,this.draggable=void 0,this.hidePriceLines=void 0,this.hideBarrierLine=void 0,this.hideOffscreenLine=void 0,this.title=void 0,this.onChartBarrierChange=void 0,(0,M.makeObservable)(this,{color:M.observable,lineStyle:M.observable,shade:M.observable,shadeColor:M.observable,high:M.observable,low:M.observable,relative:M.observable,draggable:M.observable,hidePriceLines:M.observable,hideBarrierLine:M.observable,hideOffscreenLine:M.observable,title:M.observable,updateBarriers:M.action.bound,updateBarrierShade:M.action.bound,onBarrierChange:M.action.bound,updateBarrierColor:M.action.bound,barrier_count:M.computed,default_shade:M.computed}),this.color=i,this.lineStyle=a||Xr,this.onChange=this.onBarrierChange,this.onChartBarrierChange="function"==typeof n?n.bind(this):function(){},this.high=e||0,r&&(this.low=r),this.shade=this.default_shade;var c=!!e;this.relative=!c||/^[+-]/.test(e),this.draggable=!s&&c,this.hidePriceLines=!c}var e,r,n;return e=t,r=[{key:"updateBarriers",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this.relative=/^[+-]/.test(t)),this.high=t||void 0,this.low=e||void 0}},{key:"updateBarrierShade",value:function(t,e){this.shade=t&&Gr[e]||this.default_shade}},{key:"onBarrierChange",value:function(t){var e=t.high,r=t.low;this.updateBarriers(e,r,!0),this.onChartBarrierChange.apply(this,_n(function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.filter((function(t){return null!=t})).map((function(e){return"".concat(t&&!/^[+-]/.test(e)?"+":"").concat(e)}))}(this.relative,e,r)))}},{key:"updateBarrierColor",value:function(t){this.color=t?qr:Yr}},{key:"barrier_count",get:function(){return(void 0!==this.high)+(void 0!==this.low)}},{key:"default_shade",get:function(){return Hr[this.barrier_count]}}],r&&vn(e.prototype,r),n&&vn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),gn=r("../../node_modules/lodash.debounce/index.js"),wn=r.n(gn),En={STOP_OUT:"stop_out",TAKE_PROFIT:"take_profit",STOP_LOSS:"stop_loss"},Sn=function(t){var e=t.barriers,r=t.contract_type,n=t.contract_info,o=void 0===n?{}:n;if(t.is_over&&function(t,e){return(0,d.isMultiplierContract)(t)&&e.limit_order}(r,o)){var i=Object.values(En),a=Object.keys(o.limit_order).some((function(t){return t===En.STOP_LOSS&&o.limit_order[t].value}));i.forEach((function(t){var r=o.limit_order[t];if(r&&r.value){var n=e.find((function(e){return e.key===t}));if(n){if(n.high===+r.value)return;n.onChange({high:r.value})}else{var i={key:t,title:"".concat(r.display_name),color:t===En.TAKE_PROFIT?Vr:Wr,draggable:!1,lineStyle:t===En.STOP_OUT?Zr:Xr,hidePriceLines:a&&t===En.STOP_OUT,hideOffscreenLine:!0,showOffscreenArrows:!0,isSingleBarrier:!0,opacityOnOverlap:t===En.STOP_OUT&&.15};n=new bn(r.value),Object.assign(n,i),e.push(n)}}else hn(e,t)}))}else{Object.values(En).forEach((function(t){return hn(e,t)}))}};function xn(t){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(t)}function kn(){kn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),s=new k(o||[]);return n(a,"_invoke",{value:w(t,r,s)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function d(){}function h(){}var m={};c(m,i,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var v=h.prototype=p.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,s){var c=u(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==xn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=h,n(v,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(v),c(v,s,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function On(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function jn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){On(i,n,o,a,s,"next",t)}function s(t){On(i,n,o,a,s,"throw",t)}a(void 0)}))}}function Pn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Cn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pn(Object(r),!0).forEach((function(e){Tn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Tn(t,e,r){return(e=An(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ln(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,An(n.key),n)}}function An(t){var e=function(t,e){if("object"!==xn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xn(e)?e:String(e)}function Nn(t,e){return Nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nn(t,e)}function Dn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=zn(t);if(e){var o=zn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return In(t)}(this,r)}}function In(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zn(t){return zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zn(t)}var Mn={},Rn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nn(t,e)}(w,t);var e,r,n,o,i,a,s,c,l,u,f,p,h,m,y,v,b=Dn(w);function w(t){var e,r=t.root_store;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,w);return(e=b.call(this,{root_store:r,local_storage_properties:["amount","currency","barrier_1","barrier_2","basis","contract_start_type","contract_type","duration","duration_unit","expiry_date","expiry_type","growth_rate","has_take_profit","has_stop_loss","has_cancellation","is_equal","last_digit","multiplier","start_date","start_time","symbol","stop_loss","take_profit","is_trade_params_expanded"],store_name:"trade_store",validation_rules:Ze()})).is_trade_component_mounted=!1,e.is_purchase_enabled=!1,e.is_trade_enabled=!1,e.is_equal=0,e.has_equals_only=!1,e.symbol=void 0,e.is_market_closed=!1,e.previous_symbol="",e.active_symbols=[],e.form_components=[],e.contract_expiry_type="",e.contract_start_type="",e.contract_type="",e.contract_types_list={},e.trade_types={},e.amount=10,e.basis="",e.basis_list=[],e.currency="",e.stake_boundary={VANILLALONGCALL:{},VANILLALONGPUT:{}},e.duration=5,e.duration_unit="",e.duration_units_list=[],e.duration_min_max={},e.expiry_date="",e.expiry_time="",e.expiry_type="duration",e.barrier_1="",e.barrier_2="",e.barrier_count=0,e.main_barrier=null,e.barriers=[],e.strike_price_choices=[],e.start_date=Number(0),e.start_dates_list=[],e.start_time=null,e.sessions=[],e.market_open_times=[],e.market_close_times=[],e.last_digit=5,e.is_mobile_digit_view_selected=!1,e.proposal_info={},e.purchase_info={},e.is_chart_loading=void 0,e.should_show_active_symbols_loading=!1,e.accumulator_range_list=[],e.growth_rate=.03,e.maximum_payout=0,e.maximum_ticks=0,e.ticks_history_stats={},e.tick_size_barrier=0,e.multiplier=void 0,e.multiplier_range_list=[],e.stop_loss=void 0,e.take_profit=void 0,e.has_stop_loss=!1,e.has_take_profit=!1,e.has_cancellation=!1,e.commission=void 0,e.cancellation_price=void 0,e.stop_out=void 0,e.expiration=void 0,e.hovered_contract_type=void 0,e.cancellation_duration="60m",e.cancellation_range_list=[],e.vanilla_trade_type="VANILLALONGCALL",e.is_trade_params_expanded=!0,e.contract_purchase_toast_box=void 0,e.addTickByProposal=function(){return null},e.debouncedProposal=wn()(e.requestProposal,500),e.proposal_requests={},e.is_purchasing_contract=!1,e.initial_barriers=void 0,e.is_initial_barrier_applied=!1,e.should_skip_prepost_lifecycle=!1,e.clearContracts=function(){e.root_store.contract_trade.contracts=[]},e.setMainBarrier=function(t){if(t){var r=t.contract_type,n=t.barrier,o=t.high_barrier,i=t.low_barrier;if((0,d.isBarrierSupported)(r)){var a=e.root_store.ui.is_dark_mode_on?qr:Yr;e.main_barrier=new bn(n||o,i,e.onChartBarrierChange,{color:a,not_draggable:e.is_vanilla})}else e.main_barrier=null}},e.onPurchase=wn()(e.processPurchase,300),e.disablePurchaseButtons=function(){var t=document.getElementsByClassName("trade-container__price-info"),e=document.getElementsByClassName("btn-purchase");[].forEach.bind(e,(function(t){t.classList.add("btn-purchase--disabled")}))(),[].forEach.bind(t,(function(t){t.classList.add("trade-container__price-info--fade")}))()},e.prev_chart_layout=null,e.wsSubscribe=function(t,r){if(1===t.subscribe){var n=JSON.stringify(t),o=d.WS.subscribeTicksHistory(t,(function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(r.apply(void 0,n),e.is_accumulator){var i={current_symbol:e.symbol,tick_size_barrier:e.tick_size_barrier};if("tick"in n[0]){var a=e.root_store.contract_trade.accumulator_barriers_data[e.symbol]||{},s=a.current_spot,c=a.current_spot_time,l=n[0].tick,u=l.epoch,f=l.pip_size,p=l.quote,d=l.symbol;i=Cn(Cn({},i),{},{previous_spot:s,previous_spot_time:c,current_spot:p,current_spot_time:u,pip_size:f,symbol:d})}else{if(!("history"in n[0]))return;var h=n[0].history,m=h.prices,_=h.times,y=n[0].echo_req.ticks_history;i=Cn(Cn({},i),{},{previous_spot:m[m.length-2],previous_spot_time:_[_.length-2],current_spot:m[m.length-1],current_spot_time:_[_.length-1],pip_size:n[0].pip_size,symbol:y})}e.root_store.contract_trade.updateAccumulatorBarriersAndSpots(i)}}));Mn[n]=o}},e.wsForget=function(t){var e=JSON.stringify(t);Mn[e]&&(Mn[e].unsubscribe(),delete Mn[e])},e.wsForgetStream=function(t){d.WS.forgetStream(t)},e.wsSendRequest=function(t){return t.time?Je().timePromise().then((function(t){return t?{msg_type:"time",time:t.unix()}:d.WS.time()})):t.active_symbols?d.WS.activeSymbols("brief"):t.trading_times?d.WS.tradingTimes(t.trading_times):d.WS.storage.send(t)},e.refToAddTick=function(t){e.addTickByProposal=t},(0,M.makeObservable)(In(e),{accumulator_range_list:M.observable,active_symbols:M.observable,amount:M.observable,barrier_1:M.observable,barrier_2:M.observable,barrier_count:M.observable,barriers:M.observable,basis_list:M.observable,basis:M.observable,cancellation_duration:M.observable,cancellation_price:M.observable,cancellation_range_list:M.observable,commission:M.observable,contract_expiry_type:M.observable,contract_start_type:M.observable,contract_type:M.observable,contract_types_list:M.observable,currency:M.observable,duration_min_max:M.observable,duration_unit:M.observable,duration_units_list:M.observable,duration:M.observable,expiration:M.observable,expiry_date:M.observable,expiry_time:M.observable,expiry_type:M.observable,form_components:M.observable,growth_rate:M.observable,has_cancellation:M.observable,has_equals_only:M.observable,has_stop_loss:M.observable,has_take_profit:M.observable,hovered_contract_type:M.observable,is_accumulator:M.computed,is_chart_loading:M.observable,is_equal:M.observable,is_market_closed:M.observable,is_mobile_digit_view_selected:M.observable,is_purchase_enabled:M.observable,is_trade_component_mounted:M.observable,is_trade_enabled:M.observable,is_trade_params_expanded:M.observable,last_digit:M.observable,main_barrier:M.observable,market_close_times:M.observable,market_open_times:M.observable,maximum_payout:M.observable,maximum_ticks:M.observable,multiplier_range_list:M.observable,multiplier:M.observable,previous_symbol:M.observable,proposal_info:M.observable.ref,purchase_info:M.observable.ref,sessions:M.observable,setDefaultGrowthRate:M.action.bound,should_show_active_symbols_loading:M.observable,should_skip_prepost_lifecycle:M.observable,stake_boundary:M.observable,start_date:M.observable,start_dates_list:M.observable,start_time:M.observable,stop_loss:M.observable,stop_out:M.observable,strike_price_choices:M.observable,symbol:M.observable,take_profit:M.observable,ticks_history_stats:M.observable,tick_size_barrier:M.observable,trade_types:M.observable,accountSwitcherListener:M.action.bound,barrier_pipsize:M.computed,barriers_flattened:M.computed,changeDurationValidationRules:M.action.bound,chartStateChange:M.action.bound,clearContracts:M.action.bound,clearLimitOrderBarriers:M.action.bound,clearPurchaseInfo:M.action.bound,clientInitListener:M.action.bound,enablePurchase:M.action.bound,exportLayout:M.action.bound,forgetAllProposal:M.action.bound,getFirstOpenMarket:M.action.bound,has_alternative_source:M.computed,initAccountCurrency:M.action.bound,is_multiplier:M.computed,is_symbol_in_active_symbols:M.computed,is_synthetics_available:M.computed,is_vanilla:M.computed,loadActiveSymbols:M.action.bound,logoutListener:M.action.bound,main_barrier_flattened:M.computed,manageMxMltRemovalNotification:M.action.bound,networkStatusChangeListener:M.action.bound,onAllowEqualsChange:M.action.bound,onChange:M.action.bound,onChangeMultiple:M.action.bound,onChartBarrierChange:M.action.bound,onHoverPurchase:M.action.bound,onMount:M.action.bound,onProposalResponse:M.action.bound,onPurchase:M.action.bound,onUnmount:M.override,prepareTradeStore:M.action.bound,preSwitchAccountListener:M.action.bound,processPurchase:M.action.bound,pushPurchaseDataToGtm:M.action.bound,refresh:M.action.bound,requestProposal:M.action.bound,resetErrorServices:M.action.bound,resetPreviousSymbol:M.action.bound,resetAccumulatorData:M.action.bound,setActiveSymbols:M.action.bound,setAllowEqual:M.action.bound,setChartStatus:M.action.bound,setContractTypes:M.action.bound,setDefaultSymbol:M.action.bound,setIsTradeParamsExpanded:M.action.bound,setMarketStatus:M.action.bound,setMobileDigitView:M.action.bound,setPreviousSymbol:M.action.bound,setPurchaseSpotBarrier:M.action.bound,setSkipPrePostLifecycle:M.action.bound,setStakeBoundary:M.action.bound,setStrikeChoices:M.action.bound,setTradeStatus:M.action.bound,show_digits_stats:M.computed,themeChangeListener:M.action.bound,updateBarrierColor:M.action.bound,updateLimitOrderBarriers:M.action.bound,updateStore:M.action.bound,updateSymbol:M.action.bound,contract_purchase_toast_box:M.observable,clearContractPurchaseToastBox:M.action.bound,setContractPurchaseToastbox:M.action.bound}),(0,M.reaction)((function(){return[e.contract_expiry_type,e.duration_min_max,e.duration_unit,e.expiry_type]}),(function(){e.changeDurationValidationRules()})),(0,M.reaction)((function(){return e.is_equal}),(function(){e.onAllowEqualsChange()})),(0,M.reaction)((function(){return e.symbol}),(function(){var t=(0,d.resetEndTimeOnVolatilityIndices)(e.symbol,e.expiry_type);t&&(e.expiry_date=t),e.setDefaultGrowthRate(),e.resetAccumulatorData()})),(0,M.reaction)((function(){return e.duration_unit}),(function(){e.contract_expiry_type="t"===e.duration_unit?"tick":"intraday"})),(0,M.reaction)((function(){return[e.has_stop_loss,e.has_take_profit]}),(function(){e.has_stop_loss||(e.validation_errors.stop_loss=[]),e.has_take_profit||(e.validation_errors.take_profit=[])})),(0,M.reaction)((function(){return[e.contract_type]}),(function(){e.root_store.portfolio.setContractType(e.contract_type),e.is_multiplier||e.is_accumulator?Object.assign(e.validation_rules,Xe()):(delete e.validation_rules.stop_loss,delete e.validation_rules.take_profit),e.resetAccumulatorData()})),(0,M.reaction)((function(){return e.root_store.common.is_language_changing}),(function(){e.setValidationRules(Ze()),e.changeDurationValidationRules()})),(0,M.when)((function(){return e.accumulator_range_list.length}),(function(){return e.setDefaultGrowthRate()})),e}return e=w,r=[{key:"is_symbol_in_active_symbols",get:function(){var t=this;return this.active_symbols.some((function(e){return e.symbol===t.symbol&&1===e.exchange_is_open}))}},{key:"resetAccumulatorData",value:function(){this.tick_size_barrier&&(this.tick_size_barrier=0),(0,d.isEmptyObject)(this.root_store.contract_trade.accumulator_barriers_data)||this.root_store.contract_trade.clearAccumulatorBarriersData()}},{key:"setDefaultGrowthRate",value:function(){this.is_accumulator&&!this.accumulator_range_list.includes(this.growth_rate)&&this.accumulator_range_list.length&&(this.growth_rate=this.accumulator_range_list[0])}},{key:"setSkipPrePostLifecycle",value:function(t){!!t!=!!this.should_skip_prepost_lifecycle&&(this.should_skip_prepost_lifecycle=t)}},{key:"setTradeStatus",value:function(t){this.is_trade_enabled=t}},{key:"refresh",value:function(){this.forgetAllProposal(),this.proposal_info={},this.purchase_info={},this.proposal_requests={}}},{key:"loadActiveSymbols",value:(v=jn(kn().mark((function t(){var e,r,n,o,i,a=this,s=arguments;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!(s.length>0&&void 0!==s[0])||s[0],n=!(s.length>1&&void 0!==s[1])||s[1],this.should_show_active_symbols_loading=n,t.next=5,this.setActiveSymbols();case 5:return t.next=7,this.root_store.active_symbols.setActiveSymbols();case 7:if(!r){t.next=10;break}return t.next=10,this.setDefaultSymbol();case 10:return t.next=12,d.WS.storage.contractsFor(this.symbol);case 12:if(o=t.sent,!["InvalidSymbol","InputValidationFailed"].includes(null===(e=o.error)||void 0===e?void 0:e.code)){t.next=19;break}return t.next=16,(0,d.pickDefaultSymbol)(this.active_symbols);case 16:return i=t.sent,t.next=19,this.processNewValuesAsync({symbol:i});case 19:(0,M.runInAction)((function(){a.should_show_active_symbols_loading=!1}));case 20:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"setDefaultSymbol",value:(y=jn(kn().mark((function t(){var e;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.is_symbol_in_active_symbols){t.next=7;break}return this.is_trade_enabled=!1,t.next=4,(0,d.pickDefaultSymbol)(this.active_symbols);case 4:return e=t.sent,t.next=7,this.processNewValuesAsync({symbol:e});case 7:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"setActiveSymbols",value:(m=jn(kn().mark((function t(){var e,r,n,o,i,a,s,c,l,u;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="maltainvest"===this.root_store.client.landing_company_shortcode,r=!!parseInt(localStorage.getItem("hide_close_mx_mlt_account_notification")),n=this.root_store.client.is_logged_in,o=this.root_store.client.clients_country,i=this.root_store.common.showError,a=this.root_store.common.setError,["be","im"].includes(o)&&!n&&(0,d.showUnavailableLocationError)(i,n),t.next=9,d.WS.authorized.activeSymbols();case 9:if(s=t.sent,c=s.active_symbols,!s.error){t.next=15;break}return i({message:(0,_.localize)("Trading is unavailable at this time.")}),t.abrupt("return");case 15:if(c&&c.length){t.next=37;break}return t.next=18,d.WS.wait("get_settings");case 18:if(l=this.root_store.client.can_have_mx_account,!(u=this.root_store.client.can_have_mlt_account)&&!l||!n||r){t.next=25;break}a(!0,{type:"mx_mlt_removal"}),t.next=37;break;case 25:if(!n||!r){t.next=29;break}(0,d.showMxMltUnavailableError)(i,u,l),t.next=37;break;case 29:if(e){t.next=34;break}return r?(0,d.showUnavailableLocationError)(i,n):a(!0,{type:"mx_mlt_removal"}),t.abrupt("return");case 34:if(!e){t.next=37;break}return(0,d.showDigitalOptionsUnavailableError)(i,{text:(0,_.localize)("Were working to have this available for you soon. If you have another account, switch to that account to continue trading. You may add a Deriv MT5 Financial."),title:(0,_.localize)("{{platform_name_trader}} is not available for this account",{platform_name_trader:(0,d.getPlatformSettings)("trader").name}),link:(0,_.localize)("Go to {{platform_name_mt5}} dashboard",{platform_name_mt5:(0,d.getPlatformSettings)("mt5").name})}),t.abrupt("return");case 37:return t.next=39,this.processNewValuesAsync({active_symbols:c});case 39:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"setContractTypes",value:(h=jn(kn().mark((function t(){var e=this;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.symbol||!this.is_symbol_in_active_symbols){t.next=4;break}return t.next=3,Be(this.symbol);case 3:(0,M.runInAction)((function(){var t=Me.R.getContractCategories();e.is_accumulator&&!e.root_store.client.is_virtual&&t.contract_types_list.Accumulators?(delete t.contract_types_list.Accumulators,e.processNewValuesAsync(Cn(Cn({},t),Me.R.getContractType(t.contract_types_list)))):e.processNewValuesAsync(Cn(Cn({},t),Me.R.getContractType(t.contract_types_list,e.contract_type))),e.processNewValuesAsync(Me.R.getContractValues(e))}));case 4:this.root_store.common.setSelectedContractType(this.contract_type),this.root_store.portfolio.setContractType(this.contract_type);case 6:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"prepareTradeStore",value:(p=jn(kn().mark((function t(){var e,r=this,n=arguments;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(n.length>0&&void 0!==n[0])||n[0],this.initial_barriers={barrier_1:this.barrier_1,barrier_2:this.barrier_2},t.next=4,(0,M.when)((function(){return!r.root_store.client.is_populating_account_list}));case 4:return t.next=6,d.WS.wait("website_status");case 6:return t.next=8,(0,M.runInAction)(jn(kn().mark((function t(){return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.processNewValuesAsync({currency:r.root_store.client.currency||r.root_store.client.default_currency},!0,null,!1);case 2:case"end":return t.stop()}}),t)}))));case 8:return t.next=10,this.loadActiveSymbols(e);case 10:return t.next=12,this.setContractTypes();case 12:return t.next=14,this.processNewValuesAsync({is_market_closed:(0,d.isMarketClosed)(this.active_symbols,this.symbol)},!0,null,!1);case 14:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"onChangeMultiple",value:(f=jn(kn().mark((function t(e){var r=this;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.keys(e).forEach((function(t){if(!(t in r))throw new Error("Invalid Argument: ".concat(t))})),t.next=3,this.processNewValuesAsync(Cn({},e),!0);case 3:this.validateAllProperties();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"onChange",value:(u=jn(kn().mark((function t(e){var r,n,o;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.target,n=r.name,o=r.value,"symbol"!==n||!o){t.next=7;break}this.setChartStatus(!0),this.setMarketStatus(!1),this.is_trade_enabled=!1,t.next=17;break;case 7:if("currency"!==n){t.next=11;break}this.root_store.client.is_logged_in||this.root_store.client.selectCurrency(o),t.next=17;break;case 11:if("expiry_date"!==n){t.next=15;break}this.expiry_time=null,t.next=17;break;case 15:if(n in this){t.next=17;break}throw new Error("Invalid Argument: ".concat(n));case 17:return t.next=19,this.processNewValuesAsync(Tn({},n,o),!0,"contract_type"===n?{contract_type:this.contract_type}:{},!0);case 19:this.validateAllProperties(),this.root_store.common.setSelectedContractType(this.contract_type);case 21:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"setPreviousSymbol",value:function(t){this.previous_symbol!==t&&(this.previous_symbol=t)}},{key:"setAllowEqual",value:function(t){this.is_equal=t}},{key:"setIsTradeParamsExpanded",value:function(t){this.is_trade_params_expanded=t}},{key:"resetPreviousSymbol",value:(l=jn(kn().mark((function t(){var e=this;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setMarketStatus((0,d.isMarketClosed)(this.active_symbols,this.previous_symbol)),t.next=3,Be(this.previous_symbol);case 3:return t.next=5,this.updateSymbol(this.symbol);case 5:this.setChartStatus(!1),(0,M.runInAction)((function(){e.previous_symbol=""}));case 7:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"updateBarrierColor",value:function(t){this.main_barrier&&this.main_barrier.updateBarrierColor(t)}},{key:"onHoverPurchase",value:function(t,e){this.is_accumulator||(this.is_purchase_enabled&&this.main_barrier&&!this.is_multiplier?this.main_barrier.updateBarrierShade(t,e):t||!this.main_barrier||this.is_multiplier||this.main_barrier.updateBarrierShade(!1,e),this.hovered_contract_type=t?e:null,Sn({barriers:this.root_store.portfolio.barriers,is_over:t,contract_type:e,contract_info:this.proposal_info[e]}))}},{key:"setPurchaseSpotBarrier",value:function(t,e){var r="PURCHASE_SPOT_BARRIER";if(t){var n=this.root_store.portfolio.barriers.find((function(t){return t.key===r}));n?n.high!==+e.contract_info.entry_spot&&n.onChange({high:e.contract_info.entry_spot}):((n=new bn(e.contract_info.entry_spot)).key=r,n.draggable=!1,n.hideOffscreenBarrier=!0,n.isSingleBarrier=!0,n.updateBarrierColor(this.root_store.ui.is_dark_mode_on),this.barriers.push(n),this.root_store.portfolio.barriers.push(n))}else(0,d.removeBarrier)(this.root_store.portfolio.barriers,r)}},{key:"updateLimitOrderBarriers",value:function(t,e){var r=e.contract_info,n=this.barriers;Sn({barriers:n,contract_info:r,contract_type:r.contract_type,is_over:t})}},{key:"clearLimitOrderBarriers",value:function(){this.hovered_contract_type=null;var t=this.barriers;Sn({barriers:t,is_over:!1})}},{key:"barrier_pipsize",get:function(){return(0,d.getBarrierPipSize)(this.barrier_1)}},{key:"main_barrier_flattened",get:function(){return(0,g.A)(this.contract_type)?null:(0,M.toJS)(this.main_barrier)}},{key:"barriers_flattened",get:function(){return this.root_store.portfolio.barriers&&(0,M.toJS)(this.root_store.portfolio.barriers)}},{key:"processPurchase",value:function(t,e,r){var n=this;if(this.is_purchase_enabled&&t){this.is_purchase_enabled=!1,this.is_purchasing_contract=!0;var o="t"===this.duration_unit;or(t,e).then((0,M.action)((function(e){if(!n.is_trade_component_mounted)return n.enablePurchase(),void(n.is_purchasing_contract=!1);var i,a,s=+n.last_digit;if(e.error)n.disablePurchaseButtons(),"InvalidToken"!==e.error.code&&(n.root_store.common.setServicesError(Cn({type:e.msg_type},e.error)),(0,d.isMobile)()&&"buy"===(null===(i=n.root_store.common)||void 0===i||null===(a=i.services_error)||void 0===a?void 0:a.type)&&setTimeout((function(){n.clearPurchaseInfo(),n.requestProposal()}),3500));else if(e.buy){if(n.proposal_info[r]&&n.proposal_info[r].id!==t)throw new Error("Proposal ID does not match.");var c=Cn(Cn(Cn({},n.proposal_requests[r]),n.proposal_info[r]),{},{buy_price:e.buy.buy_price}),l=e.buy,u=l.contract_id,f=l.longcode,p=l.start_time;if(u){var h=e.buy.shortcode,m=(0,d.extractInfoFromShortcode)(h),_=m.category,y=m.underlying,v=(0,g.H)(_.toUpperCase()),b=_.toUpperCase();return n.root_store.contract_trade.addContract({contract_id:u,start_time:p,longcode:f,underlying:y,barrier:v?s:null,contract_type:b,is_tick_contract:o}),n.root_store.portfolio.onBuyResponse({contract_id:u,longcode:f,contract_type:b}),((0,d.isDesktop)()||(0,d.isMobile)()&&(n.is_multiplier||n.is_accumulator))&&n.root_store.ui.openPositionsDrawer(),n.proposal_info={},n.forgetAllProposal(),n.purchase_info=e,n.proposal_requests={},n.debouncedProposal(),n.clearLimitOrderBarriers(),n.pushPurchaseDataToGtm(c),n.setContractPurchaseToastbox(e.buy),void(n.is_purchasing_contract=!1)}}n.forgetAllProposal(),n.purchase_info=e,n.enablePurchase(),n.is_purchasing_contract=!1})))}}},{key:"enablePurchase",value:function(){this.root_store.client.is_unwelcome||(this.is_purchase_enabled=!0)}},{key:"updateStore",value:function(t){var e=this;return Object.keys((0,d.cloneObject)(t)||{}).forEach((function(r){"root_store"===r||["validation_rules","validation_errors","currency"].indexOf(r)>-1||(JSON.stringify(e[r])===JSON.stringify(t[r])?delete t[r]:("symbol"===r&&(e.is_purchase_enabled=!1,e.is_trade_enabled=!1),t.start_date&&"string"==typeof t.start_date&&(t.start_date=parseInt(t.start_date)),e[r]=t[r],"barrier_2"===r&&t.barrier_1&&(e.barrier_1=t.barrier_1)))})),t}},{key:"processNewValuesAsync",value:(c=jn(kn().mark((function t(){var e,r,n,o,i,a,s,c,l,u,f,p,h,m,_,y,v,b,w=arguments;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=w.length>1&&void 0!==w[1]&&w[1],n=w.length>2&&void 0!==w[2]?w[2]:{},o=!(w.length>3&&void 0!==w[3])||w[3],(e=w.length>0&&void 0!==w[0]?w[0]:{}).contract_type&&"rise_fall"===e.contract_type&&this.is_equal&&(e.contract_type="rise_fall_equal"),i=this.root_store.contract_trade||{},a=i.clearAccumulatorBarriersData,s=i.prev_chart_type,c=i.prev_granularity,l=i.chart_type,u=i.granularity,f=i.savePreviousChartMode,p=i.updateChartType,h=i.updateGranularity,"accumulator"===e.contract_type?(a(),f(l,u),h(0),p("mountain")):(e.contract_type||e.symbol)&&s&&c&&(s!==l||c!==u)&&(h(c),p(s),f("",null)),/\bduration\b/.test(Object.keys(e))&&"string"==typeof e.duration&&(e.duration=+e.duration),o&&(this.forgetAllProposal(),this.proposal_requests={}),r&&/\bcurrency\b/.test(Object.keys(e))&&(m=(null==n?void 0:n.currency)||this.currency,_=e.currency!==m,y=(0,d.isCryptocurrency)(e.currency)||(0,d.isCryptocurrency)(e.currency)!==(0,d.isCryptocurrency)(m),_&&y&&(e.amount=e.amount||(0,d.getMinPayout)(e.currency)),this.currency=e.currency),!Object.keys(e).includes("symbol")){t.next=16;break}return this.setPreviousSymbol(this.symbol),t.next=14,Be(e.symbol);case 14:this.setMarketStatus((0,d.isMarketClosed)(this.active_symbols,e.symbol)),v=Me.R.getContractCategories().has_only_forward_starting_contracts;case 16:if(this.root_store.ui.setHasOnlyForwardingContracts(v),!v){t.next=19;break}return t.abrupt("return");case 19:if(b=this.updateStore((0,d.cloneObject)(e)),!r&&!/\b(symbol|contract_types_list)\b/.test(Object.keys(b))){t.next=29;break}return this.updateStore({is_purchase_enabled:!1,proposal_info:{}}),e.contract_type&&this.root_store.ui.is_advanced_duration&&(0,g.A)(e.contract_type)&&(this.barrier_1="",this.barrier_2="",this.expiry_type="duration",this.root_store.ui.is_advanced_duration=!1),t.next=25,Rr(this,b);case 25:this.updateStore(Cn({},this.is_initial_barrier_applied?{}:this.initial_barriers)),this.is_initial_barrier_applied=!0,/\b(contract_type|currency)\b/.test(Object.keys(b))&&this.validateAllProperties(),this.debouncedProposal();case 29:this.root_store.client.is_virtual||delete this.contract_types_list.Accumulators;case 30:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"is_synthetics_available",get:function(){var t;return!(null===(t=this.active_symbols)||void 0===t||!t.find((function(t){return"synthetic_index"===t.market})))}},{key:"is_synthetics_trading_market_available",get:function(){var t,e=this;return!(null===(t=this.active_symbols)||void 0===t||!t.find((function(t){return"synthetic_index"===t.market&&!(0,d.isMarketClosed)(e.active_symbols,t.symbol)})))}},{key:"show_digits_stats",get:function(){return(0,g.A)(this.contract_type)}},{key:"setMobileDigitView",value:function(t){this.is_mobile_digit_view_selected=t}},{key:"pushPurchaseDataToGtm",value:function(t){var e={event:"buy_contract",bom_ui:"new",contract:{amount:t.amount,barrier1:t.barrier,barrier2:t.barrier2,basis:t.basis,buy_price:t.buy_price,contract_type:t.contract_type,currency:t.currency,date_expiry:t.date_expiry,date_start:t.date_start,duration:t.duration,duration_unit:t.duration_unit,payout:t.payout,symbol:t.symbol},settings:{theme:this.root_store.ui.is_dark_mode_on?"dark":"light",positions_drawer:this.root_store.ui.is_positions_drawer_on?"open":"closed",chart:{toolbar_position:this.root_store.ui.is_chart_layout_default?"bottom":"left",chart_asset_info:this.root_store.ui.is_chart_asset_info_visible?"visible":"hidden",chart_type:this.root_store.contract_trade.chart_type,granularity:this.root_store.contract_trade.granularity}}};this.root_store.gtm.pushDataLayer(e)}},{key:"clearPurchaseInfo",value:function(){this.purchase_info={},this.proposal_requests={},this.proposal_info={}}},{key:"requestProposal",value:function(){var t=this,e=(0,Br.RX)(this);if(Object.values(this.validation_errors).some((function(t){return t.length})))return this.proposal_info={},this.purchase_info={},void this.forgetAllProposal();(0,d.isEmptyObject)(e)||(this.proposal_requests=e,this.purchase_info={},Object.keys(this.proposal_requests).forEach((function(e){d.WS.subscribeProposal(t.proposal_requests[e],t.onProposalResponse)}))),this.root_store.ui.resetPurchaseStates()}},{key:"forgetAllProposal",value:function(){Object.keys(this.proposal_requests).length>0&&d.WS.forgetAll("proposal")}},{key:"setMarketStatus",value:function(t){this.is_market_closed=t}},{key:"onProposalResponse",value:function(t){var e,r,n=t.echo_req.contract_type,o=(0,d.getPropertyValue)(this.proposal_info,n)||{},i=(0,d.getPropertyValue)(o,"obj_contract_basis")||{},a=null===(e=t.proposal)||void 0===e?void 0:e.date_expiry;if(!t.error&&a&&this.is_crypto_multiplier&&(this.expiration=a),this.proposal_info=Cn(Cn({},this.proposal_info),{},Tn({},n,(0,Br._N)(this,t,i))),this.is_multiplier&&this.proposal_info&&this.proposal_info.MULTUP){var s,c=this.proposal_info.MULTUP,l=c.commission,u=c.cancellation,f=c.limit_order;l&&(this.commission=l),u&&(this.cancellation_price=u.ask_price),this.stop_out=null==f||null===(s=f.stop_out)||void 0===s?void 0:s.order_amount}if(this.is_accumulator&&this.proposal_info&&this.proposal_info.ACCU){var p=this.proposal_info.ACCU,h=p.maximum_ticks,m=p.ticks_stayed_in,_=p.tick_size_barrier,y=p.last_tick_epoch,v=p.maximum_payout;this.ticks_history_stats=function(t){var e=t.previous_ticks_history_stats,r=void 0===e?{}:e,n=t.new_ticks_history_stats,o=void 0===n?[]:n,i=t.last_tick_epoch,a=r.ticks_stayed_in||[],s=r.last_tick_epoch;return o.length&&i?{ticks_stayed_in:o.length>1?ar(o).reverse():o[0]<=a[0]&&i>s?[o[0]].concat(ar(a.slice(0,a.length-1))):i===s?a:[o[0]].concat(ar(a.slice(1))),last_tick_epoch:i}:r}({previous_ticks_history_stats:this.ticks_history_stats,new_ticks_history_stats:m,last_tick_epoch:y}),this.maximum_ticks=h,this.maximum_payout=v,this.tick_size_barrier=_;var b=this.root_store.contract_trade.accumulator_barriers_data[this.symbol]||{};b.accumulators_high_barrier||this.root_store.contract_trade.updateAccumulatorBarriersAndSpots(Cn(Cn({},b),{},{pip_size:this.pip_size,symbol:this.symbol,current_symbol:this.symbol,tick_size_barrier:_}))}if((!this.main_barrier||null!==(r=this.main_barrier)&&void 0!==r&&r.shade)&&this.setMainBarrier(t.echo_req),this.hovered_contract_type===n&&(this.addTickByProposal(t),Sn({barriers:this.root_store.portfolio.barriers,contract_info:this.proposal_info[this.hovered_contract_type],contract_type:n,is_over:!0})),t.error){var g=(0,Br.yr)(t);if(g&&(this.is_vanilla?this.vanilla_trade_type===n&&this.setValidationErrorMessages(g,[t.error.message]):this.setValidationErrorMessages(g,[t.error.message])),this.is_multiplier){var w=t.error,E=w.message,S=w.details,x=(E||"").match(/\((\d+\.*\d*)\)/);"stop_loss"===(null==S?void 0:S.field)&&null!=x&&x[1]&&(this.commission=x[1])}if(this.is_vanilla){var k=t.error.details,O=k.barrier_choices,j=k.max_stake,P=k.min_stake;if(this.setStakeBoundary(n,P,j),this.setStrikeChoices(O),!this.strike_price_choices.includes(this.barrier_1)){var C=Math.floor(this.strike_price_choices.length/2);this.barrier_1=this.strike_price_choices[C],this.onChange({target:{name:"barrier_1",value:this.barrier_1}})}}if("AlreadySubscribed"===t.error.code)return this.refresh(),void(this.is_trade_component_mounted&&this.debouncedProposal())}else if(this.validateAllProperties(),this.is_vanilla){var T=t.proposal,L=T.max_stake,A=T.min_stake,N=T.barrier_choices;this.setStrikeChoices(N),this.setStakeBoundary(n,A,L)}this.is_purchasing_contract||this.enablePurchase()}},{key:"onChartBarrierChange",value:function(t,e){this.processNewValuesAsync({barrier_1:t,barrier_2:e},!0)}},{key:"onAllowEqualsChange",value:function(){this.processNewValuesAsync({contract_type:parseInt(this.is_equal)?"rise_fall_equal":"rise_fall"},!0)}},{key:"updateSymbol",value:function(t){t&&this.onChange({target:{name:"symbol",value:t}})}},{key:"changeDurationValidationRules",value:function(){if("endtime"!==this.expiry_type){if(this.validation_rules.duration){var t=this.validation_rules.duration.rules.findIndex((function(t){return"number"===t[0]})),e=this.duration_min_max[this.contract_expiry_type]||!1;if(e){var r={min:(0,d.convertDurationLimit)(+e.min,this.duration_unit),max:(0,d.convertDurationLimit)(+e.max,this.duration_unit)};t>-1?this.validation_rules.duration.rules[t][1]=r:this.validation_rules.duration.rules.push(["number",r]),this.validateProperty("duration",this.duration)}}}else this.validation_errors.duration=[]}},{key:"accountSwitcherListener",value:(s=jn(kn().mark((function t(){var e=this;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.root_store.common.is_language_changing){t.next=6;break}return t.next=3,this.loadActiveSymbols(!1,!1);case 3:this.root_store.common.is_language_changing=!1,t.next=8;break;case 6:return t.next=8,this.loadActiveSymbols(!0,!1);case 8:return this.resetErrorServices(),t.next=11,this.setContractTypes();case 11:return(0,M.runInAction)(jn(kn().mark((function t(){return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.processNewValuesAsync({currency:e.root_store.client.currency||e.root_store.client.default_currency},!0,{currency:e.currency},!1);case 1:case"end":return t.stop()}}),t)})))),t.abrupt("return",Promise.resolve());case 13:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"preSwitchAccountListener",value:function(){return this.clearContracts(),this.is_trade_enabled=!1,Promise.resolve()}},{key:"logoutListener",value:(a=jn(kn().mark((function t(){return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clearContracts(),this.refresh(),this.resetErrorServices(),!this.root_store.common.is_language_changing){t.next=9;break}return t.next=6,this.loadActiveSymbols(!1);case 6:this.root_store.common.is_language_changing=!1,t.next=11;break;case 9:return t.next=11,this.loadActiveSymbols();case 11:return t.next=13,this.setContractTypes();case 13:this.is_trade_enabled=!0,this.debouncedProposal();case 15:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"clientInitListener",value:function(){return this.initAccountCurrency(this.root_store.client.currency||this.root_store.client.default_currency),Promise.resolve()}},{key:"networkStatusChangeListener",value:function(t){this.setTradeStatus(t)}},{key:"themeChangeListener",value:function(t){this.updateBarrierColor(t)}},{key:"resetErrorServices",value:function(){this.root_store.ui.toggleServicesErrorModal(!1)}},{key:"onMount",value:function(){var t=this;this.is_trade_component_mounted&&this.should_skip_prepost_lifecycle||(this.root_store.notifications.setShouldShowPopups(!1),this.onPreSwitchAccount(this.preSwitchAccountListener),this.onSwitchAccount(this.accountSwitcherListener),this.onLogout(this.logoutListener),this.onClientInit(this.clientInitListener),this.onNetworkStatusChange(this.networkStatusChangeListener),this.onThemeChange(this.themeChangeListener),this.setChartStatus(!0),(0,M.runInAction)(jn(kn().mark((function e(){return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_trade_component_mounted=!0,e.next=3,t.prepareTradeStore();case 3:t.root_store.notifications.setShouldShowPopups(!0);case 4:case"end":return e.stop()}}),e)})))),this.manageMxMltRemovalNotification())}},{key:"manageMxMltRemovalNotification",value:function(){var t=this.root_store.notifications,e=t.addNotificationMessage,r=t.client_notifications,n=t.notification_messages,o=t.unmarkNotificationMessage,i=JSON.parse(localStorage.getItem("notification_messages")),a=this.root_store.client,s=a.has_iom_account,c=a.has_malta_account,l=a.is_logged_in;o({key:"close_mx_mlt_account"}),null!==i&&l&&(s||c)&&(0,M.when)((function(){return l&&0===n.length}),(function(){var t=1===parseInt(localStorage.getItem("hide_close_mx_mlt_account_notification"));(s||c)&&!t&&e(r.close_mx_mlt_account)}))}},{key:"setChartStatus",value:function(t){this.is_chart_loading=t}},{key:"initAccountCurrency",value:(i=jn(kn().mark((function t(e){return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currency!==e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.processNewValuesAsync({currency:e},!0,{currency:this.currency},!1);case 4:this.refresh(),this.debouncedProposal();case 6:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"onUnmount",value:function(){this.should_skip_prepost_lifecycle||(this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.is_trade_component_mounted=!1,this.root_store.contract_trade.onUnmount(),this.refresh(),this.resetErrorServices(),this.root_store.notifications.is_notifications_visible&&this.root_store.notifications.toggleNotificationsModal(),this.prev_chart_layout&&(this.prev_chart_layout.is_used=!1))}},{key:"chart_layout",get:function(){var t=null;return this.prev_chart_layout&&!1===this.prev_chart_layout.is_used&&(t=this.prev_chart_layout),t}},{key:"is_crypto_multiplier",get:function(){return"multiplier"===this.contract_type&&/^cry/.test(this.symbol)}},{key:"exportLayout",value:function(t){var e=this;delete t.previousMaxTicks,this.prev_chart_layout=t,this.prev_chart_layout.isDone=function(){e.prev_chart_layout.is_used=!0,e.setChartStatus(!1)}}},{key:"chartStateChange",value:function(t,e){var r="isClosed";"MARKET_STATE_CHANGE"===t&&e&&r in e&&this.is_trade_component_mounted&&e[r]!==this.is_market_closed&&this.prepareTradeStore(!1)}},{key:"has_alternative_source",get:function(){return this.is_multiplier&&!!this.hovered_contract_type}},{key:"is_accumulator",get:function(){return"accumulator"===this.contract_type}},{key:"is_multiplier",get:function(){return"multiplier"===this.contract_type}},{key:"is_vanilla",get:function(){return"vanilla"===this.contract_type}},{key:"setContractPurchaseToastbox",value:function(t){var e=(0,ir.wu)(this.contract_types_list,d.unsupported_contract_types_list);return this.contract_purchase_toast_box={key:!0,buy_price:(0,d.formatMoney)(this.root_store.client.currency,t.buy_price,!0,0,0),contract_type:this.contract_type,currency:(0,d.getCurrencyDisplayCode)(this.root_store.client.currency),list:e}}},{key:"clearContractPurchaseToastBox",value:function(){this.contract_purchase_toast_box=void 0}},{key:"getFirstOpenMarket",value:(o=jn(kn().mark((function t(e){var r,n,o;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(r=this.active_symbols)||void 0===r||!r.length){t.next=2;break}return t.abrupt("return",(0,d.findFirstOpenMarket)(this.active_symbols,e));case 2:return t.next=4,d.WS.authorized.activeSymbols();case 4:if(n=t.sent,o=n.active_symbols,!n.error){t.next=10;break}return this.root_store.common.showError({message:(0,_.localize)("Trading is unavailable at this time.")}),t.abrupt("return",void 0);case 10:return t.abrupt("return",(0,d.findFirstOpenMarket)(o,e));case 11:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"setStrikeChoices",value:function(t){this.strike_price_choices=null!=t?t:[]}},{key:"setStakeBoundary",value:function(t,e,r){this.stake_boundary[t]={min_stake:e,max_stake:r}}}],r&&Ln(e.prototype,r),n&&Ln(e,n),Object.defineProperty(e,"prototype",{writable:!1}),w}(dn);function Un(t){return Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un(t)}function Fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Un(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Un(i)?i:String(i)),n)}var o,i}function Bn(t,e,r){return e&&Fn(t.prototype,e),r&&Fn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Gn=Bn((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cashier=r.modules.cashier,this.trade=new Rn({root_store:e})}));function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Hn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Hn(i)?i:String(i)),n)}var o,i}function Wn(t,e,r){return e&&Vn(t.prototype,e),r&&Vn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Yn,qn=Wn((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=e.client,this.common=e.common,this.modules=new Gn(this,e),this.ui=e.ui,this.gtm=e.gtm,this.rudderstack=e.rudderstack,this.pushwoosh=e.pushwoosh,this.notifications=e.notifications,this.contract_replay=e.contract_replay,this.contract_trade=e.contract_trade,this.portfolio=e.portfolio,this.chart_barrier_store=e.chart_barrier_store,this.active_symbols=e.active_symbols}));(0,M.configure)({enforceActions:"observed"});const Zn=function(t,e){return Yn||(Je().init(t.common),(0,d.setWebsocket)(e),Yn=new qn(t))};function Xn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Jn=c()({loader:function(){return r.e("trade-modals").then(r.bind(r,"./src/App/Containers/Modals/index.js"))},loading:function(){return null}}),Kn=function(t){var e=t.passthrough,r=Xn(a().useState(Zn(e.root_store,e.WS)),1)[0];return a().useEffect((function(){return function(){return r.ui.setPromptHandler(!1)}}),[r]),a().createElement(w.z1,{store:r},a().createElement(l.g3,{store:r},a().createElement(le,null),a().createElement(Jn,null),a().createElement(ze.S,null),a().createElement(Ce,{store:r}),a().createElement(Ae,null),a().createElement(Ie,{store:r})))};Kn.propTypes={passthrough:o().shape({root_store:o().object,WS:o().object})};const Qn=Kn},"./src/Constants/contract.js":(t,e,r)=>{"use strict";r.d(e,{gk:()=>u,h8:()=>d,lA:()=>f,ng:()=>h});var n=r("react"),o=r.n(n),i=r("@deriv/translations");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u=function(){return{APPLY:(0,i.localize)("Apply"),BUY_PRICE:(0,i.localize)("Buy price:"),CANCEL:(0,i.localize)("Cancel"),CLOSE:(0,i.localize)("Close"),CONTRACT_VALUE:(0,i.localize)("Contract value:"),CURRENT_STAKE:(0,i.localize)("Current stake:"),DAY:(0,i.localize)("day"),DAYS:(0,i.localize)("days"),DEAL_CANCEL_FEE:(0,i.localize)("Deal cancel. fee:"),DECREMENT_VALUE:(0,i.localize)("Decrement value"),DONT_SHOW_THIS_AGAIN:(0,i.localize)("Don't show this again"),ENTRY_SPOT:(0,i.localize)("Entry spot:"),INCREMENT_VALUE:(0,i.localize)("Increment value"),NOT_AVAILABLE:(0,i.localize)("N/A"),RESALE_NOT_OFFERED:(0,i.localize)("Resale not offered"),SELL:(0,i.localize)("Sell"),STAKE:(0,i.localize)("Stake:"),STOP_LOSS:(0,i.localize)("Stop loss:"),STRIKE:(0,i.localize)("Strike:"),TICK:(0,i.localize)("Tick "),TICKS:(0,i.localize)("Ticks"),TOTAL_PROFIT_LOSS:(0,i.localize)("Total profit/loss:"),PROFIT_LOSS:(0,i.localize)("Profit/Loss:"),POTENTIAL_PROFIT_LOSS:(0,i.localize)("Potential profit/loss:"),INDICATIVE_PRICE:(0,i.localize)("Indicative price:"),LOST:(0,i.localize)("Lost"),PAYOUT:(0,i.localize)("Sell price:"),PURCHASE_PRICE:(0,i.localize)("Buy price:"),POTENTIAL_PAYOUT:(0,i.localize)("Payout limit:"),TAKE_PROFIT:(0,i.localize)("Take profit:"),TAKE_PROFIT_LOSS_NOT_AVAILABLE:(0,i.localize)("Take profit and/or stop loss are not available while deal cancellation is active."),WON:(0,i.localize)("Won")}},f=function(){return{FRXAUDCAD:(0,i.localize)("AUD/CAD"),FRXAUDCHF:(0,i.localize)("AUD/CHF"),FRXAUDJPY:(0,i.localize)("AUD/JPY"),FRXAUDNZD:(0,i.localize)("AUD/NZD"),FRXAUDPLN:(0,i.localize)("AUD/PLN"),FRXAUDUSD:(0,i.localize)("AUD/USD"),FRXBROUSD:(0,i.localize)("Oil/USD"),FRXEURAUD:(0,i.localize)("EUR/AUD"),FRXEURCAD:(0,i.localize)("EUR/CAD"),FRXEURCHF:(0,i.localize)("EUR/CHF"),FRXEURGBP:(0,i.localize)("EUR/GBP"),FRXEURJPY:(0,i.localize)("EUR/JPY"),FRXEURNZD:(0,i.localize)("EUR/NZD"),FRXEURUSD:(0,i.localize)("EUR/USD"),FRXGBPAUD:(0,i.localize)("GBP/AUD"),FRXGBPCAD:(0,i.localize)("GBP/CAD"),FRXGBPCHF:(0,i.localize)("GBP/CHF"),FRXGBPJPY:(0,i.localize)("GBP/JPY"),FRXGBPNOK:(0,i.localize)("GBP/NOK"),FRXGBPUSD:(0,i.localize)("GBP/USD"),FRXNZDJPY:(0,i.localize)("NZD/JPY"),FRXNZDUSD:(0,i.localize)("NZD/USD"),FRXUSDCAD:(0,i.localize)("USD/CAD"),FRXUSDCHF:(0,i.localize)("USD/CHF"),FRXUSDJPY:(0,i.localize)("USD/JPY"),FRXUSDNOK:(0,i.localize)("USD/NOK"),FRXUSDPLN:(0,i.localize)("USD/PLN"),FRXUSDSEK:(0,i.localize)("USD/SEK"),FRXXAGUSD:(0,i.localize)("Silver/USD"),FRXXAUUSD:(0,i.localize)("Gold/USD"),FRXXPDUSD:(0,i.localize)("Palladium/USD"),FRXXPTUSD:(0,i.localize)("Platinum/USD"),OTC_AEX:(0,i.localize)("Netherlands 25"),OTC_AS51:(0,i.localize)("Australia 200"),OTC_DJI:(0,i.localize)("Wall Street 30"),OTC_FCHI:(0,i.localize)("France 40"),OTC_FTSE:(0,i.localize)("UK 100"),OTC_GDAXI:(0,i.localize)("Germany 40"),OTC_HSI:(0,i.localize)("Hong Kong 50"),OTC_IBEX35:(0,i.localize)("Spanish Index"),OTC_N225:(0,i.localize)("Japan 225"),OTC_NDX:(0,i.localize)("US Tech 100"),OTC_SPC:(0,i.localize)("US 500"),OTC_SSMI:(0,i.localize)("Swiss 20"),OTC_SX5E:(0,i.localize)("Euro 50"),R_10:(0,i.localize)("Volatility 10 Index"),R_25:(0,i.localize)("Volatility 25 Index"),R_50:(0,i.localize)("Volatility 50 Index"),R_75:(0,i.localize)("Volatility 75 Index"),R_100:(0,i.localize)("Volatility 100 Index"),BOOM300N:(0,i.localize)("Boom 300 Index"),BOOM500:(0,i.localize)("Boom 500 Index"),BOOM1000:(0,i.localize)("Boom 1000 Index"),CRASH300N:(0,i.localize)("Crash 300 Index"),CRASH500:(0,i.localize)("Crash 500 Index"),CRASH1000:(0,i.localize)("Crash 1000 Index"),RDBEAR:(0,i.localize)("Bear Market Index"),RDBULL:(0,i.localize)("Bull Market Index"),STPRNG:(0,i.localize)("Step Index"),WLDAUD:(0,i.localize)("AUD Basket"),WLDEUR:(0,i.localize)("EUR Basket"),WLDGBP:(0,i.localize)("GBP Basket"),WLDXAU:(0,i.localize)("Gold Basket"),WLDUSD:(0,i.localize)("USD Basket"),"1HZ10V":(0,i.localize)("Volatility 10 (1s) Index"),"1HZ100V":(0,i.localize)("Volatility 100 (1s) Index"),"1HZ150V":(0,i.localize)("Volatility 150 (1s) Index"),"1HZ200V":(0,i.localize)("Volatility 200 (1s) Index"),"1HZ250V":(0,i.localize)("Volatility 250 (1s) Index"),"1HZ300V":(0,i.localize)("Volatility 300 (1s) Index"),JD10:(0,i.localize)("Jump 10 Index"),JD25:(0,i.localize)("Jump 25 Index"),JD50:(0,i.localize)("Jump 50 Index"),JD75:(0,i.localize)("Jump 75 Index"),JD100:(0,i.localize)("Jump 100 Index"),JD150:(0,i.localize)("Jump 150 Index"),JD200:(0,i.localize)("Jump 200 Index"),CRYBCHUSD:(0,i.localize)("BCH/USD"),CRYBNBUSD:(0,i.localize)("BNB/USD"),CRYBTCLTC:(0,i.localize)("BTC/LTC"),CRYIOTUSD:(0,i.localize)("IOT/USD"),CRYNEOUSD:(0,i.localize)("NEO/USD"),CRYOMGUSD:(0,i.localize)("OMG/USD"),CRYTRXUSD:(0,i.localize)("TRX/USD"),CRYBTCETH:(0,i.localize)("BTC/ETH"),CRYZECUSD:(0,i.localize)("ZEC/USD"),CRYXMRUSD:(0,i.localize)("ZMR/USD"),CRYXMLUSD:(0,i.localize)("XLM/USD"),CRYXRPUSD:(0,i.localize)("XRP/USD"),CRYBTCUSD:(0,i.localize)("BTC/USD"),CRYDSHUSD:(0,i.localize)("DSH/USD"),CRYETHUSD:(0,i.localize)("ETH/USD"),CRYEOSUSD:(0,i.localize)("EOS/USD"),CRYLTCUSD:(0,i.localize)("LTC/USD")}},p=function(t){return c(c({},function(t){return{ACCU:{button_name:o().createElement(i.Localize,{i18n_default_text:"Buy"}),name:o().createElement(i.Localize,{i18n_default_text:"Accumulator"}),position:"top"},CALL:{name:t?o().createElement(i.Localize,{i18n_default_text:"Higher"}):o().createElement(i.Localize,{i18n_default_text:"Rise"}),position:"top"},PUT:{name:t?o().createElement(i.Localize,{i18n_default_text:"Lower"}):o().createElement(i.Localize,{i18n_default_text:"Fall"}),position:"bottom"},CALLE:{name:o().createElement(i.Localize,{i18n_default_text:"Rise"}),position:"top"},PUTE:{name:o().createElement(i.Localize,{i18n_default_text:"Fall"}),position:"bottom"},DIGITMATCH:{name:o().createElement(i.Localize,{i18n_default_text:"Matches"}),position:"top"},DIGITDIFF:{name:o().createElement(i.Localize,{i18n_default_text:"Differs"}),position:"bottom"},DIGITEVEN:{name:o().createElement(i.Localize,{i18n_default_text:"Even"}),position:"top"},DIGITODD:{name:o().createElement(i.Localize,{i18n_default_text:"Odd"}),position:"bottom"},DIGITOVER:{name:o().createElement(i.Localize,{i18n_default_text:"Over"}),position:"top"},DIGITUNDER:{name:o().createElement(i.Localize,{i18n_default_text:"Under"}),position:"bottom"},ONETOUCH:{name:o().createElement(i.Localize,{i18n_default_text:"Touch"}),position:"top"},NOTOUCH:{name:o().createElement(i.Localize,{i18n_default_text:"No Touch"}),position:"bottom"},MULTUP:{name:o().createElement(i.Localize,{i18n_default_text:"Up"}),position:"top"},MULTDOWN:{name:o().createElement(i.Localize,{i18n_default_text:"Down"}),position:"bottom"},VANILLALONGCALL:{name:o().createElement(i.Localize,{i18n_default_text:"Call"}),position:"top"},VANILLALONGPUT:{name:o().createElement(i.Localize,{i18n_default_text:"Put"}),position:"bottom"}}}(t)),{EXPIRYMISS:{name:o().createElement(i.Localize,{i18n_default_text:"Ends Outside"}),position:"top"},EXPIRYRANGE:{name:o().createElement(i.Localize,{i18n_default_text:"Ends Between"}),position:"bottom"},RANGE:{name:o().createElement(i.Localize,{i18n_default_text:"Stays Between"}),position:"top"},UPORDOWN:{name:o().createElement(i.Localize,{i18n_default_text:"Goes Outside"}),position:"bottom"},RESETCALL:{name:o().createElement(i.Localize,{i18n_default_text:"Reset Call"}),position:"top"},RESETPUT:{name:o().createElement(i.Localize,{i18n_default_text:"Reset Put"}),position:"bottom"},TICKHIGH:{name:o().createElement(i.Localize,{i18n_default_text:"High Tick"}),position:"top"},TICKLOW:{name:o().createElement(i.Localize,{i18n_default_text:"Low Tick"}),position:"bottom"},ASIANU:{name:o().createElement(i.Localize,{i18n_default_text:"Asian Up"}),position:"top"},ASIAND:{name:o().createElement(i.Localize,{i18n_default_text:"Asian Down"}),position:"bottom"},LBFLOATCALL:{name:o().createElement(i.Localize,{i18n_default_text:"Close-to-Low"}),position:"top"},LBFLOATPUT:{name:o().createElement(i.Localize,{i18n_default_text:"High-to-Close"}),position:"top"},LBHIGHLOW:{name:o().createElement(i.Localize,{i18n_default_text:"High-to-Low"}),position:"top"},CALLSPREAD:{name:o().createElement(i.Localize,{i18n_default_text:"Spread Up"}),position:"top"},PUTSPREAD:{name:o().createElement(i.Localize,{i18n_default_text:"Spread Down"}),position:"bottom"},RUNHIGH:{name:o().createElement(i.Localize,{i18n_default_text:"Only Ups"}),position:"top"},RUNLOW:{name:o().createElement(i.Localize,{i18n_default_text:"Only Downs"}),position:"bottom"}})},d=function(t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=p(arguments.length>1&&void 0!==arguments[1]&&arguments[1])[t];return e&&r.button_name||r.name||""},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p(e)[t]?p(e)[t.toUpperCase()].position:"top"}},"./src/Constants/index.js":(t,e,r)=>{"use strict";r.d(e,{lA:()=>n.lA});var n=r("./src/Constants/contract.js")},"./src/Modules/Contract/Components/AccumulatorsStats/index.js":(t,e,r)=>{"use strict";r.d(e,{Z:()=>j});var n=r("react"),o=r.n(n),i=r("../../node_modules/classnames/index.js"),a=r.n(i),s=r("../../node_modules/prop-types/index.js"),c=r.n(s),l=r("@deriv/components"),u=r("@deriv/shared"),f=r("@deriv/translations"),p=r("./src/Stores/connect.js"),d=function(t){var e=t.has_progress_dots,r=t.value;return o().createElement("div",{"data-testid":"dt_accu_stats_history_counter",className:a()("accumulators-stats__history-counter",{"accumulators-stats__history-counter--emphasized":e&&0===r})},r,e&&o().createElement("div",{className:"accumulators-stats__progress-dots"},[1,2,3].map((function(t){return o().createElement("span",{key:t,className:"dot-".concat(t)})}))))};d.propTypes={has_progress_dots:c().bool,value:c().number};const h=o().memo(d);var m=function(t){var e=t.history_text_size,r=t.rows;return o().createElement(l.Text,{size:e,className:"accumulators-stats__history--expanded"},r.map((function(t,e){return o().createElement("div",{key:e.toString()+t[0],"data-testid":"dt_accu_stats_history_row",className:"accumulators-stats__row"},t.map((function(t,r){return o().createElement(h,{key:r.toString()+t,value:t,has_progress_dots:0===e&&0===r})})))})))};m.propTypes={history_text_size:c().string,rows:c().array};const _=o().memo(m);function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=function(t){var e=t.icon_classname,r=t.is_dark_theme,n=t.is_manual_open,i=t.title,a=t.toggleManual,s=y(o().useState(!0),2),c=s[0],p=s[1],d=(0,u.isMobile)(),h=o().useCallback((function(t){return(0,u.getUrlBase)("/public/images/common/accumulators_manual_".concat(d?"mobile":"desktop").concat(r?"_dark":"",".").concat(t))}),[d,r]),m=o().useMemo((function(){return h("mp4")}),[h]),_=o().useMemo((function(){return h("webm")}),[h]);return o().createElement(o().Fragment,null,o().createElement(l.Icon,{icon:"IcInfoOutline",onClick:a,size:16,className:e}),o().createElement(l.Modal,{is_open:n&&!!m&&!!_,should_header_stick_body:!1,title:i,toggleModal:a,width:d?"328px":"596px",className:"accumulators-stats-manual-modal"},o().createElement(l.Modal.Body,{className:"accumulators-stats-modal-body"},o().createElement("div",{className:"accumulators-stats-modal-body__video"},c&&o().createElement(l.Loading,{is_fullscreen:!1}),o().createElement("video",{autoPlay:!0,"data-testid":"dt_accumulators_stats_manual_video",loop:!0,onLoadedData:function(){return p(!1)},playsInline:!0,preload:"auto",width:d?296:563},o().createElement("source",{src:m,type:"video/mp4"}),o().createElement("source",{src:_,type:"video/webm"}),(0,f.localize)("Unfortunately, your browser does not support the video."))),o().createElement(l.Text,{as:"p",size:d?"xs":"s",color:"prominent",className:"accumulators-stats-modal-body__text"},(0,f.localize)("Stats show the history of consecutive tick counts, i.e. the number of ticks the price remained within range continuously.")))))};function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}b.propTypes={icon_classname:c().string,is_dark_theme:c().bool,is_manual_open:c().bool,title:c().string,toggleManual:c().func};var E=10,S=10,x=15,k=5,O=function(t){var e,r=t.is_dark_theme,n=t.is_expandable,i=void 0===n||n,s=t.ticks_history_stats,c=void 0===s?{}:s,p=g(o().useState(!0),2),d=p[0],m=p[1],y=g(o().useState(!1),2),v=y[0],w=y[1],O=(0,f.localize)("Stats"),j=(null==c?void 0:c.ticks_stayed_in)||[],P=(0,u.isDesktop)()||!d?"xxs":"xxxs",C=j.reduce((function(t,e,r){var n=d?E:S,o=d?x:k,i=(0,u.isDesktop)()?n:o;return r%i==0&&t.push(j.slice(r,r+i)),t}),[]);return j.length?o().createElement("div",{className:"accumulators-stats"},o().createElement("div",{className:a()("accumulators-stats__container--collapsed")},o().createElement("div",{className:"accumulators-stats__title"},o().createElement(b,{is_dark_theme:r,icon_classname:"info",is_manual_open:v,title:O,toggleManual:function(){return w(!v)}}),o().createElement(l.Text,{weight:"bold",size:(0,u.isMobile)()?"xxxs":"xxs",className:"accumulators-stats__title-text"},O)),o().createElement(l.Text,{size:P,className:"accumulators-stats__history"},d?null===(e=C[0])||void 0===e?void 0:e.map((function(t,e){return o().createElement(h,{key:e,value:t,has_progress_dots:0===e})})):o().createElement("div",{className:"accumulators-stats__history-heading"},(0,f.localize)("Number of ticks")))),i&&!d&&o().createElement(o().Fragment,null,o().createElement(l.DesktopWrapper,null,o().createElement(_,{history_text_size:P,rows:C})),o().createElement(l.MobileWrapper,null,o().createElement(l.MobileDialog,{onClose:function(){return m(!d)},portal_element_id:"modal_root",title:O,visible:!d,wrapper_classname:"accumulators-stats"},o().createElement(_,{history_text_size:P,rows:C})))),i&&o().createElement(l.Icon,{icon:d?"IcArrowUp":"IcArrowDown",onClick:function(){return m(!d)},className:"accordion-toggle-arrow"})):null};O.propTypes={is_dark_theme:c().bool,is_expandable:c().bool,ticks_history_stats:c().object};const j=(0,p.$j)((function(t){var e=t.modules;return{is_dark_theme:t.ui.is_dark_mode_on,ticks_history_stats:e.trade.ticks_history_stats}}))(O)},"./src/Modules/Contract/Components/Digits/index.js":(t,e,r)=>{"use strict";r.d(e,{Z:()=>F});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("../../node_modules/prop-types/index.js"),a=r.n(i),s=r("react"),c=r.n(s),l=r("mobx"),u=r("@deriv/components"),f=r("@deriv/shared"),p=r("@deriv/translations"),d=r("./src/App/Components/Animations/index.js"),h=r("./src/Constants/index.js"),m=r("mobx-react"),_=function(t){var e=t.is_latest,r=t.is_lost,n=t.is_selected,i=t.is_won,a=t.percentage,s=t.value,l=a&&!isNaN(a)?parseFloat(a).toFixed(1):null;return c().createElement(c().Fragment,null,c().createElement("span",{className:o()("digits__digit-value",{"digits__digit-value--latest":e,"digits__digit-value--selected":n,"digits__digit-value--win":i&&e,"digits__digit-value--loss":r&&e})},c().createElement("i",{className:o()("digits__digit-display-value",{"digits__digit-display-value--no-stats":!l})},s),!!l&&c().createElement("i",{className:"digits__digit-display-percentage"},l,"%")))};_.propTypes={is_latest:a().bool,is_lost:a().bool,is_selected:a().bool,is_trade_page:a().bool,is_won:a().bool,percentage:a().number,value:a().number};const y=_;var v=function(t){var e=t.current_spot,r=t.is_selected_winning,n=t.is_lost,i=t.is_won;return c().createElement(c().Fragment,null,c().createElement(u.Text,{size:"xs",align:"center",weight:"bold",className:"digits__digit-spot-value"},e.slice(0,-1)),c().createElement("span",{className:o()("digits__digit-spot-last",{"digits__digit-spot-last--selected-win":r,"digits__digit-spot-last--win":i,"digits__digit-spot-last--loss":n})},e.slice(-1)))};v.propTypes={current_spot:a().string,is_lost:a().bool,is_selected_winning:a().bool,is_won:a().bool};const b=v;var g=function(t){var e=t.is_max,r=t.is_min,n=t.is_selected,i=t.percentage,a=(i-10)/4;a=((a=Math.min(Math.max(a,-1),1))+1)/2*.85+.15;var s=339.292,l=(20*i-102)/3/100;return l=Math.max(Math.min(l,.66),.06),c().createElement("div",{className:o()("digits__pie-container",{"digits__pie-container--selected":n})},c().createElement("svg",{className:"digits__pie-progress",width:"120",height:"120",viewBox:"0 0 120 120"},c().createElement("circle",{className:"progress__bg",cx:"60",cy:"60",r:"54",fill:"none",stroke:"#E8EEFC",strokeWidth:"12"}),i&&c().createElement("circle",{className:o()("progress__value",{"progress__value--is-max":e,"progress__value--is-min":r}),cx:"60",cy:"60",r:"54",fill:"none",strokeOpacity:e||r?1:a,strokeWidth:"12",strokeDasharray:[s*l,s*(1-l)],strokeDashoffset:s*((l+1)/2)})))};g.propTypes={is_max:a().bool,is_min:a().bool,is_selected:a().bool,percentage:a().number};const w=g;var E=function(t){var e=t.barrier,r=t.is_digit_contract,n=t.has_entry_spot,i=t.is_lost,a=t.is_max,s=t.is_min,l=t.is_won,p=t.onSelect,h=t.latest_digit,m=t.selected_digit,_=t.status,v=t.stats,g=t.value,E=t.onLastDigitSpot,S=h.digit,x=h.spot,k=g===S,O=g===e,j=S===e,P=v?100*v/1e3:null;c().useEffect((function(){E&&E({spot:x,is_lost:i,is_selected_winning:j,is_latest:k,is_won:l})}),[h,x,e,g,i,j,k,l,E]);var C=(0,f.isMobile)()&&"function"==typeof p&&!_,T=(0,f.isMobile)()&&g===m&&!_;return c().createElement("div",{className:o()("digits__digit",{"digits__digit--latest":k,"digits__digit--win":l&&k,"digits__digit--loss":i&&k,"digits__digit--is-selectable":C,"digits__digit--is-selected":T}),onClick:function(){C&&p(g)}},c().createElement(w,{is_min:s,is_max:a,is_selected:O,percentage:P}),c().createElement(u.DesktopWrapper,null,c().createElement(d.s,{is_visible:!!(r&&k&&x&&_&&n),className:"digits__digit-spot",keyname:"digits__digit-spot"},c().createElement(b,{current_spot:x,is_lost:i,is_selected_winning:j,is_visible:!(!k||!x),is_won:l}))),c().createElement(y,{is_latest:k,is_lost:i,is_selected:O,is_won:l,percentage:P,value:g}))};E.propTypes={barrier:a().number,has_entry_spot:a().bool,is_digit_contract:a().bool,is_lost:a().bool,is_max:a().bool,is_min:a().bool,is_won:a().bool,latest_digit:a().object,onLastDigitSpot:a().func,onSelect:a().func,selected_digit:a().number,stats:a().number,status:a().string,value:a().number};const S=(0,m.observer)(E);var x=function(t){var e=t.is_lost,r=t.is_trade_page,n=t.is_won,i=t.position;return c().createElement(c().Fragment,null,!!i&&c().createElement("span",{className:"digits__pointer",style:{transform:"translate3d(calc(".concat(i.left,"px), ").concat(i.top,"px, 0px)")}},c().createElement(u.Icon,{icon:"IcProfit",className:o()("digits__icon",{"digits__icon--win":n&&!r,"digits__icon--loss":e&&!r}),color:n?"green":"red",custom_color:n||e?void 0:"var(--brand-orange)"})))};x.propTypes={is_lost:a().bool,is_trade_page:a().bool,is_won:a().bool,position:a().object};const k=x;function O(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||P(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||P(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){if(t){if("string"==typeof t)return C(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(t,e):void 0}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var T=Array.from(Array(10).keys()),L=function(t){var e=t.barrier,r=t.contract_type,n=t.digits,i=t.digits_info,a=t.dimension,s=t.is_digit_contract,l=t.has_entry_spot,u=t.is_ended,p=t.is_trade_page,d=t.onDigitChange,h=t.onLastDigitSpot,m=t.selected_digit,_=t.status,y=t.tick,v=t.trade_type,b=j(c().useState({0:{left:6,top:0},1:{left:6+1*a,top:0},2:{left:6+2*a,top:0},3:{left:6+3*a,top:0},4:{left:6+4*a,top:0},5:{left:6+5*a,top:0},6:{left:6+6*a,top:0},7:{left:6+7*a,top:0},8:{left:6+8*a,top:0},9:{left:6+9*a,top:0}}),1)[0],g=j(c().useState({0:{left:6,top:-60},1:{left:6+1*a,top:-60},2:{left:6+2*a,top:-60},3:{left:6+3*a,top:-60},4:{left:6+4*a,top:-60},5:{left:6+0*a,top:8},6:{left:6+1*a,top:8},7:{left:6+2*a,top:8},8:{left:6+3*a,top:8},9:{left:6+4*a,top:8}}),1)[0],w=function(t){x()&&t!==m&&"function"==typeof d&&d({target:{name:"last_digit",value:t}})},E=function(){return(0,f.isMobile)()?g:b},x=function(){return!!(0,f.isMobile)()&&"even_odd"!==v},P=Object.keys(i).sort().map((function(t){return i[t]})).slice(-1)[0]||{},C=u&&"won"===_&&s,L=u&&"lost"===_&&s,A=n?Math.min.apply(Math,O(n)):null,N=n?Math.max.apply(Math,O(n)):null,D=y?+y.pip_size:null,I=y&&y.ask?y.ask.toFixed(D):null,z=I?+I.split("").pop():null,M=y?E()[z]:E()[P.digit],R=C||L?P:{digit:z,spot:I};return c().createElement("div",{className:o()("digits",{"digits--trade":p})},T.map((function(t){return c().createElement(S,{barrier:(o=t,i={DIGITMATCH:function(t){return t===e},DIGITDIFF:function(t){return t!==e&&!isNaN(e)},DIGITOVER:function(t){return t>e},DIGITUNDER:function(t){return t<e},DIGITODD:function(t){return t%2},DIGITEVEN:function(t){return!(t%2)}},r&&i[r]&&i[r](o)?o:null),has_entry_spot:l,is_digit_contract:s,is_lost:L,is_trade_page:p,is_won:C,key:t,is_max:n?n[t]===N:null,is_min:n?n[t]===A:null,stats:n?n[t]:null,status:_,latest_digit:p?R:P,value:t,onLastDigitSpot:h,onSelect:x()?w:null,selected_digit:!!x()&&m});var o,i})),c().createElement(k,{is_lost:L,is_trade_page:p,is_won:C,position:M}))};L.propTypes={barrier:a().number,contract_type:a().string,digits:a().array,digits_info:a().object,dimension:a().number,has_entry_spot:a().bool,is_digit_contract:a().bool,is_ended:a().bool,is_trade_page:a().bool,status:a().string,trade_type:a().string,onDigitChange:a().func,onLastDigitSpot:a().func,selected_digit:a().number,tick:a().object};const A=(0,m.observer)(L);var N=["contract_info","digits_array","digits_info","display_status","is_digit_contract","is_ended","is_trade_page","onDigitChange","selected_digit","trade_type","onChangeStatus"];function D(){return D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D.apply(this,arguments)}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var R=function(t){var e=t.contract_info,r=t.digits_array,n=t.digits_info,o=t.display_status,i=t.is_digit_contract,a=t.is_ended,s=t.is_trade_page,u=t.onDigitChange,p=t.selected_digit,d=t.trade_type,h=t.onChangeStatus,m=M(t,N),_=e.date_start,y=m.tick,v=!s||!!y,b=!!s&&(0,f.isContractElapsed)(e,y),g=!b&&v?o:null;if(_&&!b){y=null;var w=e.tick_stream;if(w&&w.length){var E=(0,l.toJS)(w.slice(-1)[0]);y={ask:E.tick,bid:E.tick,epoch:E.epoch,pip_size:E.tick_display_value.split(".")[1].length,current_tick:w.length}}}return c().useEffect((function(){h&&h({status:g,current_tick:y?y.current_tick:null})}),[y,s,o,h,g]),c().createElement(A,{dimension:(0,f.isMobile)()?64:52,has_entry_spot:!!e.entry_tick,barrier:!b&&v?+e.barrier:null,contract_type:!b&&v?e.contract_type:null,digits:r,digits_info:!b&&v?n:{},is_digit_contract:i,is_ended:a,is_trade_page:s,status:g,tick:y,trade_type:d,onDigitChange:u,selected_digit:p,onLastDigitSpot:m.onLastDigitSpot})},U=c().memo((function(t){var e,r=I(c().useState(),2),n=r[0],i=r[1],a=I(c().useState(),2),s=a[0],l=a[1],m=I(c().useState(),2),_=m[0],y=m[1],v=I(c().useState(),2),g=v[0],w=v[1],E=I(c().useState(),2),S=E[0],x=E[1],k=I(c().useState(),2),O=k[0],j=k[1],P=I(c().useState(),2),C=P[0],T=P[1],L=(0,f.useIsMounted)(),A=t.contract_info,N=t.digits_array,z=t.is_digit_contract,M=t.is_trade_page,U=t.underlying;return c().createElement(c().Fragment,null,c().createElement(u.DesktopWrapper,null,c().createElement(d.o,{is_visible:(N||z)&&L(),className:"digits__container",keyname:"digits",type:"bottom"},M&&c().createElement("div",{className:"digits__tooltip-container"},c().createElement(u.Popover,{alignment:"top",classNameBubble:"digits__tooltip-bubble",icon:"info",id:"dt_last_digits_info_tooltip",margin:4,message:(e=M?U:A.underlying,(0,p.localize)("Last digit stats for latest 1000 ticks for {{underlying_name}}",{underlying_name:(0,h.lA)()[e.toUpperCase()]}))})),c().createElement(R,t))),c().createElement(u.MobileWrapper,null,c().createElement("div",{className:"digits__container"},c().createElement(d.s,{is_visible:!!(z&&n&&_&&A.entry_tick),className:o()("digits__digit-spot",{"digits__digit-spot--is-trading":M}),keyname:"digits__digit-spot"},M&&c().createElement(u.Text,{size:"xs",align:"center",className:"digits__digit-spot-value"},c().createElement(p.Localize,{i18n_default_text:"Tick {{current_tick}} - ",values:{current_tick:s}})),c().createElement(b,{current_spot:_,is_lost:C,is_selected_winning:g,is_visible:!(!S||!_),is_won:O})),c().createElement(R,D({},t,{onChangeStatus:function(t){i(t.status),l(t.current_tick)},onLastDigitSpot:function(t){y(t.spot),T(t.is_lost),w(t.is_selected_winning),x(t.is_latest),j(t.is_won)}})))))}));U.displayName="Digits",U.propTypes={contract_info:a().object,digits_array:a().array,digits_info:a().object,display_status:a().string,is_digit_contract:a().bool,is_ended:a().bool,is_trade_page:a().bool,trade_type:a().string,onDigitChange:a().func,selected_digit:a().number,underlying:a().string};const F=U},"./src/Modules/Page404/index.js":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>c});var n=r("react"),o=r.n(n),i=r("@deriv/components"),a=r("@deriv/shared"),s=r("@deriv/translations");const c=function(){return o().createElement(i.PageError,{header:(0,s.localize)("We couldnt find that page"),messages:[(0,s.localize)("You may have followed a broken link, or the page has moved to a new address."),(0,s.localize)("Error code: {{error_code}} page not found",{error_code:404})],redirect_urls:[a.routes.trade],redirect_labels:[(0,s.localize)("Return to trade")],classNameImage:"page-404__image",image_url:(0,a.getUrlBase)("/public/images/common/404.png")})}},"./src/Modules/SmartChart/Components/all-markers.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>z});var n=r("react"),o=r.n(n),i=r("@deriv/shared"),a=r("./src/Modules/SmartChart/index.js"),s=function(t){if(!window.DOMParser)return null;var e=(new window.DOMParser).parseFromString(t,"image/svg+xml").children[0],r=e.attributes,n=r.width,o=r.height;n=1*n.value,o=1*o.value;var i=[];return[].forEach.call(e.children,(function(t){var e=t.attributes,r=e.d,n=e.fill,o=e.stroke;i.push({points:r.value.match(/M|C|H|A|L|V|-?\d*(\.\d+)?/g).filter((function(t){return t})).map((function(t){return-1==="MCHALV".indexOf(t)?1*t:t})),fill:n&&n.value,stroke:o&&o.value})})),{width:n,height:o,paths:i,with_color:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white";return{width:n,height:o,paths:i.map((function(r){var n=r.points,o=r.fill;return{points:n,stroke:r.stroke,fill:"white"!==o?t:e}}))}}}},c=s('\n<svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7,20 C11.2,14.4 14,10.8659932 14,7 C14,3.13400675 10.8659932,0 7,0 C3.13400675,0 0,3.13400675 0,7 C0,10.8659932 2.8,14.4 7,20 Z" fill="#333333"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="A7 7 4.2 0 6.283185307179586" fill="white" />\n</svg>'),l=s('\n<svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2L18 2L18 12L2 12Z" fill="white" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2,0 L2,1 L19,1 L19,12 L2,12 L2,20 L1,20 L1,0 L2,0 Z M18,8 L15,8 L15,11 L18,11 L18,8 Z M12,8 L9,8 L9,11 L12,11 L12,8 Z M6,8 L3,8 L3,11 L6,11 L6,8 Z M15,5 L12,5 L12,8 L15,8 L15,5 Z M9,5 L6,5 L6,8 L9,8 L9,5 Z M6,2 L3,2 L3,5 L6,5 L6,2 Z M18,2 L15,2 L15,5 L18,5 L18,2 Z M12,2 L9,2 L9,5 L12,5 L12,2 Z" fill="#333333"/>\n</svg>\n');function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}var f=["epoch_array","price_array"];function p(t,e){return y(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||m(t,e)||h()}function d(t){return y(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||m(t)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){if(t){if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y(t){if(Array.isArray(t))return t}function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var E=navigator.userAgent.search("Firefox")>0,S=function(t){return function(e){var r=e.epoch_array,n=e.price_array,i=w(e,f);return o().createElement(a.If,{epoch_array:r,price_array:n,draw_callback:function(e){return t(b(b({},e),i))}})}},x={open:"#377cfc",won:"#00a79e",lost:"#cc2e3d",sold:"#ffad3a",fg:"#ffffff",bg:"#0e0e0e",dashed_border:"#6E6E6E"},k={open:"#377cfc",won:"#4bb4b3",lost:"#ec3f3f",sold:"#ffad3a",fg:"#333333",bg:"#ffffff",dashed_border:"#999999"};function O(t){var e=t.status,r=t.profit,n=t.is_dark_theme,o=t.is_vanilla,i=n?x:k,a=i[e||"open"];return o?"open"===e?i.open:i[r>0?"won":"lost"]:("open"===e&&r&&(a=i[r>0?"won":"lost"]),a)}var j=function(t){return t?Math.max(Math.min(Math.sqrt(t/18),1.2),.8):1},P=[],C=function(t,e){if(0===P.length)for(var r=255;r>=0;--r)P[r]=(r<16?"0":"")+r.toString(16);var n=Math.floor(255*Math.min(Math.max(e-t-10,0)/6,1));return P[n]},T=function(t,e){var r=e.zoom,n=e.top,o=e.left,i=e.icon;t.save();var a=j(r);t.translate(o-i.width*a/2,n-i.height*a/2),t.scale(a,a),i.paths.forEach((function(e){var r,n,o=e.points,i=e.fill,a=e.stroke;i&&(t.fillStyle=i),a&&(t.strokeStyle=a),t.beginPath();for(var s=0;s<o.length;s++){var c=void 0,l=void 0,u=void 0,f=void 0,p=void 0,d=void 0,h=void 0;if("M"===o[s])c=o[++s],l=o[++s],t.moveTo(c,l);else if("L"===o[s])c=o[++s],l=o[++s],t.lineTo(c,l);else if("V"===o[s])l=o[++s],t.lineTo(r,l);else if("H"===o[s])c=o[++s],t.lineTo(c,n);else if("Q"===o[s])u=o[++s],p=o[++s],c=o[++s],l=o[++s],t.quadraticCurveTo(u,p,c,l);else if("C"===o[s])u=o[++s],p=o[++s],f=o[++s],d=o[++s],c=o[++s],l=o[++s],t.bezierCurveTo(u,p,f,d,c,l);else if("A"===o[s]){c=o[++s],l=o[++s],h=o[++s];var m=o[++s],_=o[++s];t.arc(c,l,h,m,_)}r=c,n=l}t.closePath(),i&&t.fill(),a&&t.stroke()})),t.scale(1,1),t.restore()},L=function(t){var e=t.ctx,r=t.start_left,n=t.top,o=t.bottom,i=t.stroke_color,a=t.fill_color,s=t.has_persistent_borders,c=t.scale,l=e.canvas.offsetWidth-e.canvas.parentElement.stx.panels.chart.yaxisTotalWidthRight,u=e.canvas.offsetHeight-e.canvas.parentElement.stx.xaxisHeight,f=n<u&&(n>=0||!s),p=o<u,d=f?n:n<0&&s?2:u,h=p?o:u;r<l&&(e.lineWidth=1,e.strokeStyle=i,(f||s)&&(e.beginPath(),e.setLineDash([]),e.arc(r,d,1.5,0,2*Math.PI),e.stroke(),e.beginPath(),e.setLineDash([2,3]),e.moveTo(r+1.5*c,d),e.lineTo(l,d),e.stroke()),(p||s)&&(e.beginPath(),e.setLineDash([]),e.arc(r,h,1.5,0,2*Math.PI),e.stroke(),e.beginPath(),e.setLineDash([2,3]),e.moveTo(r+1.5*c,h),e.lineTo(l,h),e.stroke()),e.fillStyle=a,e.fillRect(r,d,l-r,Math.abs(h-d)))},A=function(t){var e=t.ctx,r=t.text,n=t.tick,o=n.zoom,i=n.left,a=n.top,s=j(o),c=Math.floor(3*s+7);e.font="".concat(c,"px Roboto"),r.split(/\n/).forEach((function(t,r){var n=Math.ceil(e.measureText(t).width);e.fillText(t,i-5-n,a+r*c+1)}))},N=function(t){var e=t.ctx,r=t.color,n=t.is_dark_theme,o=t.text,i=t.left,a=t.top,s=t.scale;e.textAlign="center";var c=Math.floor(12*s);e.font="bold ".concat(c,"px BinarySymbols, Roboto"),r&&(e.fillStyle=r),E||(e.shadowColor=n?"rgba(16,19,31,1)":"rgba(255,255,255,1)",e.shadowBlur=12);for(var l=0;l<(E?1:5);++l)e.fillText(o,i,a)},D=S((function(t){var e=t.ctx,r=t.canvas_height,n=d(t.points),o=n[0],a=n.slice(1),s=p(t.prices,2),u=s[0],f=s[1],h=t.is_last_contract,m=t.is_dark_theme,_=t.is_in_contract_details,y=t.granularity,v=t.contract_info,b=v.contract_type,g=v.status,w=v.profit,E=v.is_accumulators_trade_without_contract,S=v.is_sold,x=v.is_expired,k=v.tick_count,P=e,D=O({is_dark_theme:m,status:g,profit:S?w:null});P.strokeStyle=D,P.fillStyle=D,P.save();var I=h&&o.visible&&!S,z=(0,i.isAccumulatorContract)(b),M=j(o.zoom),R=r/window.devicePixelRatio;[u,f].filter(Boolean).forEach((function(t){t=Math.min(Math.max(t,2),R-32)}));var U=a[0],F=a[a.length-1],B=a[a.length-2]||F,G=S?C(o.left,F.left):"";if(o&&E)L({ctx:P,start_left:o.left,fill_color:"rgba(55, 124, 252, 0.08)",stroke_color:O({status:"dashed_border",is_dark_theme:m}),top:u,bottom:f,scale:M});else if(u&&f&&(B&&z&&_||!b&&o)&&L({ctx:P,start_left:_?B.left:o.left,fill_color:"rgba(0, 167, 158, 0.08)",has_persistent_borders:_,stroke_color:O({status:"dashed_border",is_dark_theme:m}),top:u,bottom:f,scale:M}),!_)if(P.restore(),I&&(A({ctx:P,text:"Start\nTime",tick:{zoom:o.zoom,left:o.left-1*M,top:R-50}}),P.beginPath(),P.setLineDash([3,3]),P.moveTo(o.left-1*M,0),a.length&&u&&!z&&(P.lineTo(o.left-1*M,u-34*M),P.moveTo(o.left-1*M,u+4*M)),P.lineTo(o.left-1*M,r),P.stroke()),a.length&&u){if(o.visible||U.visible||F.visible){var H=z?U.top:u;P.strokeStyle=D+G,P.beginPath(),P.setLineDash([1,1]),P.moveTo(o.left,H),P.lineTo(U.left,H),P.stroke(),P.beginPath(),P.setLineDash([]),P.moveTo(U.left,H),P.lineTo(F.left,H),P.stroke(),P.strokeStyle=D}h&&0===y&&!S&&(a.filter((function(t,e){return z?e>=a.length-2&&t.visible:t.visible})).forEach((function(t){var e=t===F?D:O({status:"fg",is_dark_theme:m});P.fillStyle=e+G,P.beginPath(),P.arc(t.left-1*M,t.top,1.5*M,0,2*Math.PI),P.fill()})),P.fillStyle=D),0===y&&([U,x?F:null].forEach((function(t){t&&t.visible&&(P.strokeStyle=D+G,P.setLineDash([2,2]),P.beginPath(),P.moveTo(t.left-1*M,t.top),t===U&&z?P.lineTo(o.left-1*M,U.top):t===F&&z?(P.moveTo(F.left,U.top),P.lineTo(F.left,F.top)):P.lineTo(t.left-1*M,u),P.stroke(),P.fillStyle=D+G,P.beginPath(),P.arc(t.left-1*M,t.top,3*M,0,2*Math.PI),P.fill(),t===U&&(P.beginPath(),P.fillStyle=O({status:"bg",is_dark_theme:m})+G,P.arc(t.left-1*M,t.top,2*M,0,2*Math.PI),P.fill()))})),P.strokeStyle=D,P.fillStyle=D),!o.visible||S||z||N({ctx:P,scale:M,is_dark_theme:m,text:"".concat(a.length-1,"/").concat(k),left:o.left,top:u-27*M}),o.visible&&T(P,{top:z?U.top-9*M:u-9*M,left:o.left-1*M,zoom:o.zoom,icon:c.with_color(D+(S?G:""),O({status:"bg",is_dark_theme:m})+(S?G:""))}),F.visible&&S&&T(P,{top:z?U.top-9*M:u-9*M,left:F.left+8*M,zoom:F.zoom,icon:l.with_color(D,O({status:"bg",is_dark_theme:m}))}),P.restore()}else P.restore()})),I={AUD:"A$",EUR:"",GBP:"",JPY:"",USD:"$",BTC:"",BCH:"",ETH:"E",ETC:"",LTC:"",UST:""};const z={TickContract:D,NonTickContract:S((function(t){var e=t.ctx,r=t.canvas_height,n=p(t.points,4),o=n[0],a=n[1],s=n[2],u=n[3],f=t.is_last_contract,d=p(t.prices,3),h=d[0],m=d[1],_=d[2],y=t.is_dark_theme,v=t.granularity,b=t.currency,g=t.contract_info,w=g.contract_type,E=g.is_sold,S=g.status,x=g.profit,k=e;0!==v&&(s&&(s.top=m),u&&(u.top=_));var P=O({status:S,profit:x,is_dark_theme:y,is_vanilla:(0,i.isVanillaContract)(w)});k.save(),k.strokeStyle=P,k.fillStyle=P;var L=f&&o.visible&&!E,D=f&&!E&&x&&o.visible&&h,z=j(o.zoom),M=E?C(o.left,a.left):"",R=r/window.devicePixelRatio;if(h&&(h=Math.min(Math.max(h,2),R-32)),L&&(A({ctx:k,text:"Start\nTime",tick:{zoom:o.zoom,left:o.left-1*z,top:R-50}}),k.beginPath(),k.setLineDash([3,3]),k.moveTo(o.left-1*z,0),h&&(k.lineTo(o.left-1*z,h-(D?38:20)*z),k.moveTo(o.left-1*z,h+4*z)),k.lineTo(o.left-1*z,r),k.stroke()),h&&s&&(o.visible||a.visible||Math.sign(o.left)!==Math.sign(a.left))&&(k.strokeStyle=P+M,k.beginPath(),k.setLineDash([1,1]),k.moveTo(o.left,h),k.lineTo(s.left,h),k.stroke(),k.beginPath(),k.setLineDash([]),k.moveTo(s.left,h),k.lineTo(a.left,h),k.stroke(),k.strokeStyle=P),[s,u].forEach((function(t){t&&t.visible&&(k.strokeStyle=P+M,k.setLineDash([2,2]),k.beginPath(),k.moveTo(t.left-1*z,t.top),k.lineTo(t.left-1*z,h),k.stroke(),k.fillStyle=P+M,k.beginPath(),k.arc(t.left-1*z,t.top,3*z,0,2*Math.PI),k.fill(),t===s&&(k.beginPath(),k.fillStyle=O({status:"bg",is_dark_theme:y})+M,k.arc(t.left-1*z,t.top,2*z,0,2*Math.PI),k.fill()),k.fillStyle=P,k.strokeStyle=P)})),o&&o.visible&&h&&T(k,{top:h-9*z,left:o.left-1*z,zoom:o.zoom,icon:c.with_color(P+M)}),D){var U=I[b]||"",F=(0,i.getDecimalPlaces)(b),B="".concat(x<0?"-":x>0?"+":" ").concat(U).concat(Math.abs(x).toFixed(F));N({ctx:k,color:O({status:"open",profit:x}),scale:z,text:B,is_dark_theme:y,left:o.left,top:h-28*z})}a.visible&&T(k,{top:h-9*z,left:a.left+8*z,zoom:a.zoom,icon:l.with_color(P,O({status:"bg",is_dark_theme:y}))}),k.restore()})),DigitContract:S((function(t){var e=t.ctx,r=d(t.points),n=r[0],o=r.slice(1),i=p(t.prices,2),a=i[0],s=i[1],u=t.is_last_contract,f=t.is_dark_theme,h=t.granularity,m=t.contract_info,_=m.status,y=m.profit,v=m.is_sold,b=m.tick_stream,g=m.tick_count,w=e,E=O({is_dark_theme:f,status:_,profit:v?y:null});w.save(),w.strokeStyle=E,w.fillStyle=E;var S=u&&n.visible&&!v,x=j(n.zoom);if(0!==h&&n&&a&&(n.top=a),S&&(w.beginPath(),w.setLineDash([3,3]),w.moveTo(n.left-1*x,0),o.length&&(w.lineTo(n.left-1*x,n.top-34*x),w.moveTo(n.left-1*x,n.top+4*x)),w.lineTo(n.left-1*x,w.canvas.height),w.stroke()),o.length){var k=o[o.length-1],P=v?C(n.left,k.left):"";0!==h&&k&&s&&(k.top=s),n.visible&&n.top&&!v&&N({ctx:w,scale:x,is_dark_theme:f,text:"".concat(o.length,"/").concat(g),left:n.left-1*x,top:n.top-27*x}),!n.visible||0!==h&&v||T(w,{top:n.top-9*x,left:n.left-1*x,zoom:n.zoom,icon:c.with_color(E+P,O({status:"bg",is_dark_theme:f})+P)}),o.forEach((function(t,e){if(t===k&&t.visible&&(0===h||t===k)&&(0===h||t!==k||v)){var r=t!==k?O({status:"fg",is_dark_theme:f}):E;w.beginPath(),w.fillStyle=r,w.arc(t.left,t.top,7*x,0,2*Math.PI),w.fill(),w.beginPath(),w.fillStyle=v?E:O({status:"bg",is_dark_theme:f}),w.arc(t.left,t.top,6*x,0,2*Math.PI),w.fill();var n=b[e].tick_display_value.slice(-1);w.fillStyle=v?"white":r,w.textAlign="center",w.shadowBlur=0,w.font="bold ".concat(12*x,"px BinarySymbols, Roboto"),w.fillText(n,t.left,t.top)}})),k.visible&&v&&(w.fillStyle=E,T(w,{top:k.top-16*x,left:k.left+8*x,zoom:k.zoom,icon:l.with_color(E,O({status:"bg",is_dark_theme:f}))})),w.restore()}else w.restore()}))}},"./src/Modules/SmartChart/Components/bottom-widgets.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=function(t){var e=t.Widget;return a().createElement("div",{className:"bottom-widgets"},e)};s.propTypes={Widget:o().node};const c=s},"./src/Modules/SmartChart/Components/top-widgets.jsx":(t,e,r)=>{"use strict";r.d(e,{Z:()=>b});var n=r("../../node_modules/prop-types/index.js"),o=r.n(n),i=r("react"),a=r.n(i),s=r("react-dom"),c=r.n(s),l=r("@deriv/components"),u=r("@deriv/translations"),f=r("@deriv/shared"),p=r("./src/Stores/connect.js"),d=r("./src/Modules/SmartChart/index.js"),h=r("./src/Modules/Trading/Helpers/contract-type.js"),m=r("../stores/src/index.ts");const _=(0,m.Pi)((function(){var t,e,r=document.getElementById("popup_root"),n=(0,m.oR)().modules.trade,o=n.contract_purchase_toast_box,i=n.clearContractPurchaseToastBox;if(a().useEffect((function(){var t=setTimeout((function(){i()}),4e3);return function(){clearTimeout(t)}}),[i,o]),!r||!o)return a().createElement(a().Fragment,null);var s=o.buy_price,f=o.currency,p=o.contract_type,d=o.list,_={value:p},y=null===(t=(0,h.vt)(d,_))||void 0===t||null===(e=t.contract_types)||void 0===e?void 0:e.find((function(t){return t.value===p})).text;return c().createPortal(a().createElement(l.MobileWrapper,null,a().createElement(l.Toast,{className:"dc-toast-popup-mobile",is_open:!!o.key,timeout:0,type:"notification"},a().createElement(l.Text,{as:"p",size:"xxs",className:"dc-toast__notification"},a().createElement(u.Localize,{i18n_default_text:"The purchase of <0>{{trade_type_name}} contract</0> has been completed successfully for the amount of <0> {{buy_price}} {{currency}}</0>",components:[a().createElement("strong",{key:0})],values:{trade_type_name:y,buy_price:s,currency:f},shouldUnescape:!0})))),r)}));var y=(0,p.$j)((function(t){var e=t.contract_trade;return{granularity:e.granularity,markers_array:e.markers_array}}))((function(t){var e=t.markers_array,r=t.granularity,n=e[e.length-1];if(!n||!n.contract_info.tick_stream||(0,f.isAccumulatorContract)(n.contract_info.contract_type))return null;if((0,f.isEnded)(n.contract_info)||0!==r)return null;var o=n.contract_info,i=o.contract_type,s=o.tick_stream,c=o.tick_count,p=(0,f.isDigitContract)(i)?s.length:Math.max(s.length-1,0);return a().createElement(l.Text,{weight:"bold",className:"recent-trade-info"},(0,u.localize)("Tick")," ",p,"/",c)})),v=function(t){var e=t.InfoBox,r=t.is_mobile,n=t.is_title_enabled,o=void 0===n||n,i=t.onSymbolChange,s=t.y_axis_width,u=t.theme,f=t.open_market,p=t.open,h=t.is_digits_widget_active,m=a().createElement(d.oP,{open_market:f,open:p,enabled:o,onChange:i,searchInputClassName:"data-hj-whitelist",isNestedList:r,portalNodeId:r?"deriv_app":void 0}),v=c().createPortal(a().createElement("div",{className:"smartcharts-".concat(u)},a().createElement("div",{className:"top-widgets-portal",style:{width:"calc(100% - ".concat(s?s+5:0,"px)")}},r&&a().createElement(_,null),m,!h&&a().createElement(y,null))),document.getElementById("app_contents"));return a().createElement(a().Fragment,null,e,a().createElement(l.MobileWrapper,null,v),a().createElement(l.DesktopWrapper,null,m))};v.propTypes={InfoBox:o().node,is_digits_widget_active:o().bool,is_mobile:o().bool,is_title_enabled:o().bool,onSymbolChange:o().func,open:o().bool,open_market:o().object,theme:o().string,y_axis_width:o().number};const b=v},"./src/Modules/SmartChart/index.js":(t,e,r)=>{"use strict";r.d(e,{If:()=>y,KW:()=>_,NU:()=>f,Xb:()=>c,as:()=>d,av:()=>m,kO:()=>h,mB:()=>p,oP:()=>l,oY:()=>u});var n=r("react"),o=r.n(n),i=r("@deriv/shared"),a=(0,i.moduleLoader)((function(){return Promise.resolve().then(r.t.bind(r,"@deriv/deriv-charts",23))}));a.then((function(t){(0,t.setSmartChartsPublicPath)((0,i.getUrlBase)("/js/smartcharts/"))}));var s=function(t){return function(){return a.then((function(e){return{default:e[t]}}))}},c=o().lazy(s("SmartChart")),l=o().lazy(s("ChartTitle")),u=(s("ChartSize"),o().lazy(s("ChartMode"))),f=o().lazy(s("DrawTools")),p=o().lazy(s("Share")),d=o().lazy(s("StudyLegend")),h=o().lazy(s("Views")),m=o().lazy(s("ToolbarWidget")),_=o().lazy(s("FastMarker")),y=o().lazy(s("RawMarker"))},"./src/Modules/Trading/Containers/toast-popup.jsx":(t,e,r)=>{"use strict";r.d(e,{S:()=>g,a:()=>v});var n=r("../../node_modules/classnames/index.js"),o=r.n(n),i=r("../../node_modules/prop-types/index.js"),a=r.n(i),s=r("react"),c=r.n(s),l=r("react-dom"),u=r.n(l),f=r("@deriv/components"),p=r("./src/Stores/connect.js"),d=["portal_id","children","className"];function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _(){return _=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_.apply(this,arguments)}function y(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var v=function(t){var e=t.portal_id,r=void 0===e?"popup_root":e,n=t.children,i=t.className,a=y(t,d);return document.getElementById(r)?u().createPortal(c().createElement(f.Toast,_({className:o()("dc-toast-popup",i)},a),n),document.getElementById(r)):null},b=function(t){var e=t.status,r=t.portal_id,n=t.message,i=h(c().useState(!1),2),a=i[0],s=i[1];return document.getElementById(r)&&n?(a||"online"===e?a&&"online"===e&&setTimeout((function(){s(!1)}),1500):s(!0),u().createPortal(c().createElement(f.MobileWrapper,null,c().createElement(f.Toast,{className:o()({"dc-toast--blinker":"blinker"===e}),is_open:a,timeout:0,type:"error"},n)),document.getElementById(r))):null};b.propTypes={portal_id:a().string,status:a().string,message:a().string};var g=(0,p.$j)((function(t){return{network_status:t.common.network_status}}))((function(t){var e=t.network_status;return c().createElement(b,{portal_id:"popup_root",message:e.tooltip,status:e.class})}))},"./src/Modules/Trading/Helpers/contract-type.js":(t,e,r)=>{"use strict";r.d(e,{JF:()=>h,K5:()=>d,Qe:()=>u,vt:()=>p,wu:()=>f});var n,o=r("react"),i=r.n(o),a=r("@deriv/translations");function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var l=(c(n={},(0,a.localize)("Ups & Downs"),"IcUpsDowns"),c(n,(0,a.localize)("Highs & Lows"),"IcHighsLows"),c(n,(0,a.localize)("Ins & Outs"),"IcInsOuts"),c(n,(0,a.localize)("Look Backs"),"IcLookbacks"),c(n,(0,a.localize)("Digits"),"IcDigits"),c(n,(0,a.localize)("Multipliers"),"IcMultiplier"),c(n,(0,a.localize)("Accumulators"),"IcCatAccumulator"),n),u=function(){return{All:"IcCatAll",Accumulators:"IcCatAccumulator",Options:"IcCatOptions",Multipliers:"IcCatMultiplier"}},f=function(t,e){return Object.keys(t).map((function(r){var n=t[r].categories,o=t[r].name,s=n.filter((function(t){return t.value&&!e.includes(t.value)?t:void 0}));if(s.length)return{key:r,label:o,contract_types:s,icon:l[o],component:o===(0,a.localize)("Accumulators")?i().createElement("span",{className:"dc-vertical-tab__header--new"},(0,a.localize)("NEW!")):null}})).filter(Boolean)},p=function(t,e){return(null==t?void 0:t.find((function(t){return t.contract_types.some((function(t){return t.value===e.value}))})))||{}},d=function(t,e){return p(t,e).key},h=function(t,e){return p(t,e).contract_types}},"./src/Modules/Trading/Helpers/digits.js":(t,e,r)=>{"use strict";r.d(e,{A:()=>i,H:()=>a});var n=["even_odd","match_diff","over_under"],o=["DIGITDIFF","DIGITMATCH","DIGITOVER","DIGITUNDER","DIGITEVEN","DIGITODD"],i=function(t){return n.includes(t)},a=function(t){return o.includes(t)}},"./src/Stores/Modules/Trading/Helpers/contract-type.js":(t,e,r)=>{"use strict";r.d(e,{R:()=>Y});var n=r("@deriv/shared"),o=r("./src/_common/base/server_time.js"),i=r.n(o),a=r("@deriv/translations"),s=r("./src/Stores/Modules/Trading/Helpers/start-date.js");function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),s=new j(o||[]);return n(a,"_invoke",{value:S(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var p={};function d(){}function h(){}function m(){}var _={};l(_,i,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(P([])));b&&b!==e&&r.call(b,i)&&(_=b);var g=m.prototype=d.prototype=Object.create(_);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function o(n,i,a,s){var c=f(t[n],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==v(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){o("next",t,a,s)}),(function(t){o("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,s)}))}s(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function S(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function x(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=m,n(g,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,a,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),l(g,s,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=P,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function l(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,s,"next",t)}function s(t){l(i,n,o,a,s,"throw",t)}a(void 0)}))}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}var b,g,w,E,S,x,k,O,j,P,C,T,L,A,N,D,I,z,M,R,U,F,B,G,H,V,W,Y=(g={},w={},E={},S={},x=!1,k=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[t.contract_type]=t.contract_display,e},O=function(t,e){return-1!==t.indexOf(e)?e:t[0]},j=function(t){var e,r,n=[];return n=null!==(e=b[t])&&void 0!==e&&null!==(r=e.config)&&void 0!==r&&r.should_override?p(b[t].components):["duration","amount"].concat(p(b[t].components)).filter((function(e){return!("duration"===e&&b[t].config&&b[t].config.hide_duration)})),b&&{form_components:n}},P=function(t,e){return{duration_units_list:(0,n.getPropertyValue)(g,[t,"config","durations","units_display",e])||[]}},C=function(t,e,r){var o=(0,n.getPropertyValue)(g,[e,"config","durations","units_display",r])||[],i=[];return o.forEach((function(t){i.push(t.value)})),{duration_unit:O(i,t)}},T=function(t,e,r){var o=(0,n.getPropertyValue)(g,[t,"config","durations","min_max",e])||{};return r&&(o=o[r]||{}),{duration_min_max:o}},L=function(t){return{contract_start_type:t===Number(0)?"spot":"forward"}},A=function(t,e){var r,o=(0,n.getPropertyValue)(g,[t,"config"]),i=[];return null!=o&&o.has_spot&&i.push({text:(0,a.localize)("Now"),value:Number(0)}),null!=o&&o.forward_starting_dates&&i.push.apply(i,p(o.forward_starting_dates)),{start_date:i.find((function(t){return t.value===e}))?e:null===(r=i[0])||void 0===r?void 0:r.value,start_dates_list:i}},N=p(Array(24).keys()).map((function(t){return"0".concat(t).slice(-2)})),D=p(Array(12).keys()).map((function(t){return"0".concat(5*t).slice(-2)})),I=function(t,e,r){return t&&!(0,s.Y)(t,e)&&(e.minute(D.find((function(r){return(0,s.Y)(t,e.minute(r))}))||e.format("mm")),(0,s.Y)(t,e)||(e.minute(0),e.hour(N.find((function(n){return(0,s.Y)(t,e.hour(n),r,!0)}))||e.format("HH")),e.minute(D.find((function(r){return(0,s.Y)(t,e.minute(r))}))||e.format("mm")))),e.format("HH:mm")},z=function(t,e){var r=f((0,n.isTimeValid)(e)?e.split(":"):[0,0],2),o=r[0],a=r[1];return(0,n.toMoment)(t||i().get()).hour(o).minute(a)},R=function(t){return t.minute(5*Math.ceil(t.minute()/5))},U=function(t){return{trade_types:(0,n.getPropertyValue)(g,[t,"config","trade_types"])}},B=function(t,e){var r=(0,n.getPropertyValue)(g,[t,"basis"])||[],o=(0,n.getLocalizedBasis)();return{basis_list:r.reduce((function(t,e){return[].concat(p(t),[{text:o[e],value:e}])}),[]),basis:O(r,e)}},G=function(t){return{accumulator_range_list:(0,n.getPropertyValue)(g,[t,"config","growth_rate_range"])||[]}},H=function(t,e){var r=(0,n.getPropertyValue)(g,[t,"config","multiplier_range"])||[];return{multiplier_range_list:r.map((function(t){return{text:"x".concat(t),value:t}})),multiplier:O(r,e)}},V=function(t,e,r){var o=(0,n.getPropertyValue)(g,[t,"config","cancellation_range"])||[],i=new RegExp("^([0-9]+)|([a-zA-Z]+)$","g"),a=(0,n.shouldShowCancellation)(r);return _({cancellation_duration:O(o,e),cancellation_range_list:o.map((function(t){return{text:"".concat((e=t,r=f(e.match(i),2),o=r[0],a=r[1],s=(0,n.getUnitMap)(),"".concat(o," ").concat(s[a].name_plural))),value:t};var e,r,o,a,s}))},a?{}:{has_cancellation:!1})},W=function(t){var e,r=null===(e=/^(.*)_equal$/.exec(t))||void 0===e?void 0:e[1];return r&&!g[r]?{is_equal:1,has_equals_only:!0}:{}},{buildContractTypesConfig:function(t){return n.WS.storage.contractsFor(t).then((function(e){var r=(0,n.getPropertyValue)(e,["contracts_for"]);if(x=r&&!e.contracts_for.available.find((function(t){return"forward"!==t.start_type})),r&&!x){var o=(0,n.getContractCategoriesConfig)();b=(0,n.getContractTypesConfig)(t),g={},w=(0,n.cloneObject)(o),e.contracts_for.available.forEach((function(t){var e=Object.keys(b).find((function(e){return-1!==b[e].trade_types.indexOf(t.contract_type)&&(void 0===b[e].barrier_count||+b[e].barrier_count===t.barriers)}));if(e){if(!g[e]){var r=w[Object.keys(w).find((function(t){return-1!==w[t].categories.indexOf(e)}))].categories;if(!r)return;r[r.indexOf(e)]={value:e,text:b[e].title},g[e]=(0,n.cloneObject)(b[e])}var o=g[e].config||{};o.has_spot=o.has_spot||"spot"===t.start_type,o.durations=!o.hide_duration&&(0,n.buildDurationConfig)(t,o.durations),o.trade_types=k(t,o.trade_types),o.barriers=(0,n.buildBarriersConfig)(t,o.barriers),o.forward_starting_dates=(0,n.buildForwardStartingConfig)(t,o.forward_starting_dates),o.growth_rate_range=t.growth_rate_range,o.multiplier_range=t.multiplier_range,o.cancellation_range=t.cancellation_range,g[e].config=o}})),Object.keys(w).forEach((function(t){var e,r;w[t].categories=null===(e=w[t].categories)||void 0===e?void 0:e.filter((function(t){return"object"===v(t)})),0===(null===(r=w[t].categories)||void 0===r?void 0:r.length)&&delete w[t]}))}}))},getBarriers:F=function(t,e){var r=(0,n.getPropertyValue)(g,[t,"config","barriers"])||{},o=r[e]||{},i=o.barrier||o.high_barrier||"",a=o.low_barrier||"";return{barrier_count:r.count||0,barrier_1:i.toString(),barrier_2:a.toString()}},getContractType:function(t,e){var r=Object.keys(t||{}).reduce((function(e,r){return[].concat(p(e),p(t[r].categories.map((function(t){return t.value}))))}),[]).filter((function(t){return-1===n.unsupported_contract_types_list.indexOf(t)})).sort((function(t,e){return"multiplier"===t||"multiplier"===e?-1:0}));return{contract_type:O(r,e)}},getContractValues:function(t){var e=t.contract_expiry_type,r=t.contract_type,n=t.basis,o=t.duration_unit,i=t.expiry_type,a=t.multiplier,s=t.start_date,c=t.cancellation_duration,l=t.symbol;if(!r)return{};var u=j(r),f=B(r,n),p=U(r),d=A(r,s),h=L(d.start_date),m=F(r,e),y=C(o,r,h.contract_start_type),v=P(r,h.contract_start_type),b=T(r,h.contract_start_type),g=G(r),w=H(r,a),E=V(r,c,l),S=M(v,i),x=W(r);return _(_(_(_(_(_(_(_(_(_(_(_(_(_({},u),f),p),d),h),m),y),v),b),S),g),w),E),x)},getDurationMinMax:T,getDurationUnit:C,getDurationUnitsList:P,getFullContractTypes:function(){return g},getExpiryDate:function(t,e,r,o){var i=null;if("endtime"===r){var a=(0,n.toMoment)(o),s=(0,n.toMoment)(e);i=(0,n.hasIntradayDurationUnit)(t)?(s.isBefore(a,"day")||o&&s.isAfter(a.clone().add(1,"day"))?a:s).format("YYYY-MM-DD"):(s.isSameOrBefore(a,"day")?a.clone().add(1,"day"):s).format("YYYY-MM-DD")}return{expiry_date:i}},getExpiryTime:function(t,e,r,o,a,c,l){var u=null;if("endtime"===r){var f="23:59:59";if(o&&o.length&&"--"!==o[0]&&(f=o.slice(-1)[0]),!c&&i().get().isBefore(z(t),"day"))u=f;else{var p=c?z(c,l):i().get(),d=z(t,e);u=d.format("HH:mm");var h=[{open:p.clone().add(5,"minute"),close:(0,n.minDate)(p.clone().add(24,"hour"),z(t,f))}];if((0,s.Y)(h,d)||(u=I(h,d.clone(),p.clone())),d.isSameOrBefore(p)||d.diff(p,"minute")<5){var m=23===p.get("hours")&&p.get("minute")>=55,_=a&&!(0,s.Y)(a,p.clone().add(5,"minutes"));u=p.clone().add(m||_?0:5,"minutes"),u=R(u).format("HH:mm")}"00:00"===u&&p.isBefore(d,"day")&&(u=p.clone().subtract(5,"minute").format("HH:mm"))}}return{expiry_time:u}},getExpiryType:M=function(t,e){if(t){if(!e&&t.length>0||1===t.length&&"t"===t[0].value)return{expiry_type:"duration"};if(0===t.length)return{expiry_type:null}}return{expiry_type:e}},getSessions:function(t,e){return{sessions:((((0,n.getPropertyValue)(g,[t,"config"])||{}).forward_starting_dates||[]).find((function(t){return t.value===e}))||{}).sessions}},getStartTime:function(t,e,r){return{start_time:e?I(t,z(e,r)):null}},getStartType:L,getTradingEvents:function(){var t=u(c().mark((function t(e){var r,o,i,a,s,l,u,f,p=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:null,e){t.next=3;break}return t.abrupt("return",[]);case 3:if(e in E){t.next=8;break}return t.next=6,n.WS.tradingTimes(e);case 6:if(o=t.sent,(0,n.getPropertyValue)(o,["trading_times","markets"]))for(i=0;i<o.trading_times.markets.length;i++)if(a=o.trading_times.markets[i].submarkets)for(s=0;s<a.length;s++)if(l=a[s].symbols)for(u=0;u<l.length;u++)f=l[u],E[o.echo_req.trading_times]||(E[o.echo_req.trading_times]={}),E[o.echo_req.trading_times][f.symbol]=f.events;case 8:return t.abrupt("return",E[e][r]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getTradingTimes:function(){var t=u(c().mark((function t(e){var r,o,i,a,s,l,u,f,p=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:null,e){t.next=3;break}return t.abrupt("return",[]);case 3:if(e in S){t.next=8;break}return t.next=6,n.WS.tradingTimes(e);case 6:if(o=t.sent,(0,n.getPropertyValue)(o,["trading_times","markets"]))for(i=0;i<o.trading_times.markets.length;i++)if(a=o.trading_times.markets[i].submarkets)for(s=0;s<a.length;s++)if(l=a[s].symbols)for(u=0;u<l.length;u++)f=l[u],S[o.echo_req.trading_times]||(S[o.echo_req.trading_times]={}),S[o.echo_req.trading_times][f.symbol]={open:f.times.open,close:f.times.close};case 8:return t.abrupt("return",r?S[e][r]:S[e]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getContractCategories:function(){return{contract_types_list:w,has_only_forward_starting_contracts:x}}})},"./src/Stores/Modules/Trading/Helpers/multiplier.js":(t,e,r)=>{"use strict";r.d(e,{Lf:()=>s,Qu:()=>c,tP:()=>l});var n=r("./src/Stores/connect.js");function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var s=function(t){var e=!t.has_cancellation;(0,t.onChangeMultiple)(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({has_cancellation:e},e?{has_stop_loss:!1,has_take_profit:!1}:{cancellation_price:void 0}))},c=function(t){var e=t.event;(0,t.onChangeMultiple)({has_cancellation:!0,has_take_profit:!1,has_stop_loss:!1,cancellation_duration:e.target.value})},l=(0,n.$j)((function(t,e){!function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t);var r=e.contract,n=void 0===r?{}:r;return{validation_errors:n.validation_errors,contract_update_take_profit:n.contract_update_take_profit,contract_update_stop_loss:n.contract_update_stop_loss,has_contract_update_take_profit:n.has_contract_update_take_profit,has_contract_update_stop_loss:n.has_contract_update_stop_loss}}))},"./src/Stores/Modules/Trading/Helpers/proposal.js":(t,e,r)=>{"use strict";r.d(e,{RX:()=>f,_N:()=>u,yr:()=>l});var n=r("@deriv/shared");function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c={barrier:"barrier_1",barrier2:"barrier_2",date_expiry:"expiry_date"},l=function(t){var e=(0,n.getPropertyValue)(t,["error","details","field"]);if(!e)return null;var r,o=c[e]||e,i=document.getElementsByName(o)[0];return i&&((r=i)&&(0!==r.offsetWidth||0!==r.offsetHeight))?o:null},u=function(t,e,r){var o,i,s,c=e.proposal||{},u=c.payout-c.ask_price||0,f=100*u/(c.ask_price||1),p=c.display_value,d=t.basis_list,h=t.is_vanilla?{text:"Payout",value:"number_of_contracts"}:d.find((function(e){return e.value!==t.basis}))||{},m="Stake"===h.text?p:c[h.value],_=m>r.value;r.value&&m!==r.value||(_=null);var y={text:h.text||"",value:m||""},v=c.commission,b=c.cancellation,g=a(a({},c.contract_details),{},{growth_rate:t.growth_rate});return a({commission:v,cancellation:b,id:c.id||"",has_error:!!e.error,has_error_details:!!l(e),error_code:null==e||null===(o=e.error)||void 0===o?void 0:o.code,error_field:null==e||null===(i=e.error)||void 0===i||null===(s=i.details)||void 0===s?void 0:s.field,has_increased:_,limit_order:c.limit_order,message:c.longcode||e.error.message,obj_contract_basis:y,payout:c.payout,profit:u.toFixed((0,n.getDecimalPlaces)(t.currency)),returns:"".concat(f.toFixed(2),"%"),stake:p},g)},f=function(t){var e={};return Object.keys(t.trade_types).forEach((function(r){var n=p(t,r);e[r]=n})),e},p=function(t,e){var r={},o={},i={};if("endtime"===t.expiry_type){var s=(0,n.toMoment)(t.expiry_date);o.date_expiry=(0,n.convertToUnix)(s.unix(),t.expiry_time)}return"multiplier"===t.contract_type&&function(t,e){e.multiplier=t.multiplier,e.cancellation=t.has_cancellation?t.cancellation_duration:void 0,e.limit_order=t.has_take_profit||t.has_stop_loss?{}:void 0,t.has_take_profit&&t.take_profit&&(e.limit_order.take_profit=+t.take_profit||0),t.has_stop_loss&&t.stop_loss&&(e.limit_order.stop_loss=+t.stop_loss||0)}(t,i),"accumulator"===t.contract_type&&function(t,e){e.growth_rate=t.growth_rate,e.limit_order=t.has_take_profit?{}:void 0,t.has_take_profit&&t.take_profit&&(e.limit_order.take_profit=+t.take_profit||0)}(t,r),a(a(a(a(a(a({proposal:1,subscribe:1,amount:parseFloat(t.amount)||0,basis:t.basis,contract_type:e,currency:t.currency,symbol:t.symbol},t.start_date&&{date_start:(0,n.convertToUnix)(t.start_date,t.start_time)}),"duration"===t.expiry_type?{duration:parseInt(t.duration),duration_unit:t.duration_unit}:o),(t.barrier_count>0||-1!==t.form_components.indexOf("last_digit"))&&!(0,n.isAccumulatorContract)(e)&&{barrier:t.barrier_1||t.last_digit}),2===t.barrier_count&&!(0,n.isAccumulatorContract)(e)&&{barrier2:t.barrier_2}),r),i)}},"./src/Stores/Modules/Trading/Helpers/start-date.js":(t,e,r)=>{"use strict";r.d(e,{Y:()=>s});var n=r("./src/_common/base/server_time.js"),o=r.n(n),i=r("@deriv/shared"),a=function(t,e,r){var n=(0,i.toMoment)(e);return r&&n.minute(0).second(0),t.isBefore(n)&&n.unix()!==t.unix()},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.toMoment)(o().get()),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.toMoment)(o().get()),n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!(a(e,o().get(),n)||a(e,r,n)||t.length&&!t.find((function(t){return e.isBetween(t.open,t.close,n?"hour":null,"[]")})))}},"./src/Stores/connect.js":(t,e,r)=>{"use strict";r.d(e,{$j:()=>p,z1:()=>f});var n=r("mobx-react"),o=r("react"),i=r.n(o);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u=i().createContext(null);var f=function(t){var e=t.store,r=t.children;return i().createElement(u.Provider,{value:c(c({},e),{},{mobxStores:e})},r)},p=function(t){return function(e){return function(t,e){var r=function(r){var o=i().useContext(u),a=e;return function(t){return!("function"!=typeof t||!t.prototype||!t.prototype.isReactComponent)}(e)&&(a=function(t){return i().createElement(e,t)}),(0,n.useObserver)((function(){return a(c(c({},r),t(o,r)))}))};return r.displayName=e.name,r}(t,e)}}},"./src/Utils/Helpers/market-underlying.js":(t,e,r)=>{"use strict";r.d(e,{cS:()=>n});r("./src/Constants/contract.js");var n=function(t){var e={category:"",underlying:""},r=new RegExp("^([A-Z]+)_((1HZ[0-9-V]+)|((CRASH|BOOM)[0-9\\d]+[A-Z]?)|(OTC_[A-Z0-9]+)|R_[\\d]{2,3}|[A-Z]+)").exec(t);return null!==r&&(e.category=r[1].toLowerCase(),e.underlying=r[2]),e}},"./src/_common/base/server_time.js":(t,e,r)=>{var n,o,i,a=r("./src/_common/utility.js").PromiseClass,s=(o=!1,i=new a,{init:function(t){o||(n=t,i.resolve(n.server_time),o=!0)},get:function(){return o&&n.server_time?n.server_time.clone():void 0},timePromise:function(){return o?Promise.resolve(n.server_time):i.promise}});t.exports=s},"./src/_common/utility.js":t=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),o)}var i,a}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var o,i=n((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.promise=new Promise((function(t,r){e.reject=r,e.resolve=t}))}));t.exports={template:function(t,e){var r=e;return e&&!Array.isArray(e)&&(r=[e]),t.replace(/\[_(\d+)]/g,(function(t,e){return r[+e-1]}))},createElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement(t);return Object.keys(e).forEach((function(t){var n=e[t];"text"===t?r.textContent=n:"html"===t?r.html(n):r.setAttribute(t,n)})),r},getStaticHash:function(){return o=o||(document.querySelector('script[src*="main"]').getAttribute("src")||"").split(".")[1]},PromiseClass:i}}}]);