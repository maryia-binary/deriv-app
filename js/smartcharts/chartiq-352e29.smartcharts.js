(window.webpackJsonpsmartcharts=window.webpackJsonpsmartcharts||[]).push([[0],{368:function(e,t,i){"use strict";i.r(t),i.d(t,"CIQ",(function(){return Ce.c})),i.d(t,"SplinePlotter",(function(){return Ce.d})),i.d(t,"timezoneJS",(function(){return Ce.e})),i.d(t,"$$",(function(){return Ce.a})),i.d(t,"$$$",(function(){return Ce.b})),i.d(t,"createEngine",(function(){return Se.e})),i.d(t,"customCharts",(function(){return Se.f})),i.d(t,"drawing",(function(){return Se.g})),i.d(t,"easeMachine",(function(){return Se.h})),i.d(t,"equations",(function(){return Se.i})),i.d(t,"i18n",(function(){return Se.j})),i.d(t,"interaction",(function(){return Se.k})),i.d(t,"markers",(function(){return Se.l})),i.d(t,"market",(function(){return Se.m})),i.d(t,"movement",(function(){return Se.p})),i.d(t,"nameValueStore",(function(){return Se.q})),i.d(t,"quoteFeed",(function(){return Se.s})),i.d(t,"series",(function(){return Se.t})),i.d(t,"share",(function(){return Se.u})),i.d(t,"span",(function(){return Se.v})),i.d(t,"storage",(function(){return Se.w})),i.d(t,"studies",(function(){return Se.x})),i.d(t,"symbolLookupBase",(function(){return Se.y})),i.d(t,"theme",(function(){return Se.z})),i.d(t,"timezone",(function(){return Se.A})),i.d(t,"touch",(function(){return Se.C})),i.d(t,"visualization",(function(){return Se.D})),i.d(t,"medianPrice",(function(){return Se.n})),i.d(t,"momentum",(function(){return Se.o})),i.d(t,"priceRelative",(function(){return Se.r})),i.d(t,"vwap",(function(){return Se.E})),i.d(t,"zigzag",(function(){return Se.F})),i.d(t,"aggregations",(function(){return n})),i.d(t,"drawingAdvanced",(function(){return s})),i.d(t,"equationsAdvanced",(function(){return o})),i.d(t,"highPerformanceMarkers",(function(){return l})),i.d(t,"renderersAdvanced",(function(){return h})),i.d(t,"accumulationDistribution",(function(){return c})),i.d(t,"adx",(function(){return u})),i.d(t,"alligator",(function(){return d})),i.d(t,"aroon",(function(){return p})),i.d(t,"atr",(function(){return m})),i.d(t,"awesomeOscillator",(function(){return g})),i.d(t,"balanceOfPower",(function(){return f})),i.d(t,"bollinger",(function(){return y})),i.d(t,"cci",(function(){return v})),i.d(t,"centerOfGravity",(function(){return x})),i.d(t,"chaikin",(function(){return b})),i.d(t,"chande",(function(){return C})),i.d(t,"choppiness",(function(){return S})),i.d(t,"comparisonStudies",(function(){return w})),i.d(t,"coppock",(function(){return D})),i.d(t,"darvasBox",(function(){return k})),i.d(t,"detrended",(function(){return M})),i.d(t,"disparity",(function(){return T})),i.d(t,"easeOfMovement",(function(){return A})),i.d(t,"ehlerFisher",(function(){return _})),i.d(t,"elder",(function(){return P})),i.d(t,"fractalChaos",(function(){return F})),i.d(t,"highLowStudies",(function(){return L})),i.d(t,"ichimoku",(function(){return E})),i.d(t,"intradayMomentum",(function(){return N})),i.d(t,"keltner",(function(){return H})),i.d(t,"klinger",(function(){return I})),i.d(t,"linearRegression",(function(){return j})),i.d(t,"macd",(function(){return O})),i.d(t,"massIndex",(function(){return Y})),i.d(t,"moneyFlow",(function(){return R})),i.d(t,"movingAverages",(function(){return z})),i.d(t,"parabolicSAR",(function(){return q})),i.d(t,"pivotPoints",(function(){return J})),i.d(t,"prettyGoodOscillator",(function(){return V})),i.d(t,"priceMomentumOscillator",(function(){return B})),i.d(t,"priceVolumeOscillator",(function(){return W})),i.d(t,"primeNumber",(function(){return U})),i.d(t,"pring",(function(){return Q})),i.d(t,"projectedVolume",(function(){return X})),i.d(t,"psychologicalLine",(function(){return Z})),i.d(t,"qstick",(function(){return G})),i.d(t,"rainbow",(function(){return K})),i.d(t,"randomWalk",(function(){return ee})),i.d(t,"relativeVigor",(function(){return te})),i.d(t,"rsi",(function(){return ie})),i.d(t,"schaffTrendCycle",(function(){return ae})),i.d(t,"shinohara",(function(){return re})),i.d(t,"stochastics",(function(){return ne})),i.d(t,"supertrend",(function(){return se})),i.d(t,"swingIndex",(function(){return oe})),i.d(t,"trendIntensity",(function(){return le})),i.d(t,"trix",(function(){return he})),i.d(t,"twiggsMoneyFlow",(function(){return ce})),i.d(t,"typicalPrice",(function(){return ue})),i.d(t,"ulcerIndex",(function(){return de})),i.d(t,"ultimateOscillator",(function(){return pe})),i.d(t,"valuationLines",(function(){return me})),i.d(t,"volatilityIndex",(function(){return ge})),i.d(t,"volumeProfile",(function(){return fe})),i.d(t,"volumeStudies",(function(){return ye})),i.d(t,"vortex",(function(){return ve})),i.d(t,"williamsMFI",(function(){return xe})),i.d(t,"extendedHours",(function(){return Ae})),i.d(t,"fullScreen",(function(){return _e})),i.d(t,"inactivityTimer",(function(){return Pe})),i.d(t,"rangeSlider",(function(){return Fe})),i.d(t,"shortcuts",(function(){return Le})),i.d(t,"tableView",(function(){return Ee})),i.d(t,"tooltip",(function(){return Ne})),i.d(t,"animation",(function(){return He})),i.d(t,"continuousZoom",(function(){return Ie})),i.d(t,"outliers",(function(){return je})),i.d(t,"plotComplementer",(function(){return Oe}));var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,z,q,J,V,B,W,U,Q,X,Z,G,K,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,xe,be,Ce=i(369),Se=i(370);function we(){}
/**!
 *	8.2.0
 *	Generation date: 2023-03-23T15:05:01.971Z
 *	Client name: deriv limited
 *	Package Type: Technical Analysis
 *	License type: annual
 *	Expiration date: "2024/04/01"
 *	Domain lock: ["127.0.0.1","localhost","deriv.com","deriv.app","deriv.me","binary.com","binary.sx","binary.me","binary.bot","deriv.be"]
 *	iFrame lock: true
 */
/***********************************************************!
 * Copyright by ChartIQ, Inc.
 * Licensed under the ChartIQ, Inc. Developer License Agreement https://www.chartiq.com/developer-license-agreement
*************************************************************/
/*************************************! DO NOT MAKE CHANGES TO THIS LIBRARY FILE!! !*************************************
* If you wish to overwrite default functionality, create a separate file with a copy of the methods you are overwriting *
* and load that file right after the library has been loaded, but before the chart engine is instantiated.              *
* Directly modifying library files will prevent upgrades and the ability for ChartIQ to support your solution.          *
*************************************************************************************************************************/
we[539515]=function(){for(var e=2;9!==e;)switch(e){case 2:e="object"==typeof globalThis?1:5;break;case 1:return globalThis;case 5:var t;e=4;break;case 4:try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"Sj9G3",{get:function(){for(;;)return this},configurable:!0}),t=Sj9G3,i=5;break;case 5:t.knqHO=t,i=4;break;case 4:i="undefined"==typeof knqHO?3:9;break;case 3:throw"";case 9:delete t.knqHO,delete Object.prototype.Sj9G3,i=6}}catch(e){t=window}return t}}(),function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function i(e,t,i,a,r){for(var n=2;14!==n;)switch(n){case 2:var s=[arguments];s[9]="erty",s[3]="",s[3]="efineProp",n=3;break;case 3:s[4]="d",s[1]=!0,s[1]=!0,s[1]=!1,n=6;break;case 6:try{for(var o=2;13!==o;)switch(o){case 9:s[7][s[0][4]]=s[7][s[0][2]],s[8].set=function(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];s[7][s[0][2]]=i[0][0],t=5}},s[8].get=function(){for(var e=2;13!==e;)switch(e){case 6:return t[3]+=t[8],typeof s[7][s[0][2]]==t[3]?void 0:s[7][s[0][2]];case 3:t[5]="f",t[2]="unde",t[3]=t[2],t[3]+=t[5],e=6;break;case 2:var t=[arguments];t[8]="",t[8]="ined",t[5]="",e=3}},s[8].enumerable=s[1];try{for(var l=2;3!==l;)switch(l){case 2:s[5]=s[4],s[5]+=s[3],s[5]+=s[9],l=4;break;case 4:s[0][0].Object[s[5]](s[7],s[0][4],s[8]),l=3}}catch(e){}o=13;break;case 3:return;case 4:o=s[7].hasOwnProperty(s[0][4])&&s[7][s[0][4]]===s[7][s[0][2]]?3:9;break;case 2:s[8]={},s[2]=(0,s[0][1])(s[0][0]),s[7]=[s[2],s[2].prototype][s[0][3]],o=4}}catch(e){}n=14}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}for(var r=2;100!==r;)switch(r){case 2:var n=[arguments];n[9]="z",n[6]="",n[6]="",r=3;break;case 26:n[85]="",n[71]="J",n[13]="Fs",n[22]="T",n[85]="t",r=21;break;case 73:n[25]+=n[55],n[25]+=n[85],n[26]=n[65],n[26]+=n[22],r=69;break;case 102:s(a,n[45],n[31],n[63]),r=101;break;case 69:n[26]+=n[56],n[21]=n[71],n[21]+=n[4],n[21]+=n[13],r=90;break;case 17:n[3]="__o",n[75]="F5",n[56]="",n[56]="3",r=26;break;case 90:n[38]=n[3],n[38]+=n[2],n[38]+=n[5],n[34]=n[75],n[34]+=n[7],r=85;break;case 45:n[32]=1,n[31]=8,n[31]=0,n[35]=n[36],r=62;break;case 44:n[97]="8bC",n[30]="",n[30]="p",n[42]="",r=40;break;case 21:n[65]="x7d",n[55]="",n[55]="bstrac",n[47]="",n[47]="__a",r=31;break;case 10:n[2]="pt",n[4]="",n[4]="6S",n[5]="imize",r=17;break;case 62:n[35]+=n[90],n[35]+=n[11],n[63]=n[10],n[63]+=n[73],n[63]+=n[89],n[45]=n[43],r=56;break;case 40:n[42]="ual",n[14]="",n[14]="resid",n[43]="",r=36;break;case 80:s(t,"charCodeAt",n[32],n[48]),r=79;break;case 31:n[91]="",n[91]="00",n[97]="",n[97]="",r=44;break;case 101:s(l,"apply",n[32],n[35]),r=100;break;case 78:s(a,n[38],n[31],n[21]),r=104;break;case 85:n[34]+=n[1],n[48]=n[6],n[48]+=n[8],n[48]+=n[9],r=81;break;case 51:n[10]="x",n[11]="uFN",n[90]="",n[90]="k",n[36]="X9",n[32]=2,r=45;break;case 36:n[43]="__",n[89]="a",n[10]="",n[73]="1ydX",r=51;break;case 103:s(a,n[25],n[31],n[96]),r=102;break;case 79:s(o,"test",n[32],n[34]),r=78;break;case 14:n[7]="",n[7]="rm",n[2]="",n[2]="",r=10;break;case 104:s(h,"push",n[32],n[26]),r=103;break;case 56:n[45]+=n[14],n[45]+=n[42],n[96]=n[30],n[96]+=n[97],n[96]+=n[91],n[25]=n[47],r=73;break;case 3:n[6]="i",n[1]="",n[8]="0lP",n[1]="",n[1]="B",r=14;break;case 81:var s=function(e,t,a,r){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];i(n[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};r=80}function o(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}function l(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}function h(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}}(we[539515]),we.c0C=function(){return"function"==typeof we[446427].N$y1PkD?we[446427].N$y1PkD.apply(we[446427],arguments):we[446427].N$y1PkD},we[238553]=!1,we[150014]=we[370258],we[539515].u7SS=we,we.j7J=function(){return"function"==typeof we[446427].g9iUvuS?we[446427].g9iUvuS.apply(we[446427],arguments):we[446427].g9iUvuS},we.S9Y=function(){return"function"==typeof we[370258].V29cT4d?we[370258].V29cT4d.apply(we[370258],arguments):we[370258].V29cT4d},we.O1W=function(){return"function"==typeof we[370258].V29cT4d?we[370258].V29cT4d.apply(we[370258],arguments):we[370258].V29cT4d},we.N_M=function(){return"function"==typeof we[446427].g9iUvuS?we[446427].g9iUvuS.apply(we[446427],arguments):we[446427].g9iUvuS},we[593596]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[3]=void 0,t[4]={},t[4].i9agN$W=function(){for(var e=2;90!==e;)switch(e){case 5:return 11;case 49:i[5].x7dT3(i[65]),i[5].x7dT3(i[77]),i[5].x7dT3(i[86]),e=46;break;case 58:i[58]=0,e=57;break;case 4:i[5]=[],i[9]={},i[9].r6o=["J4I"],e=8;break;case 67:return t[3]=27,94;case 68:e=68;break;case 57:e=i[58]<i[5].length?56:69;break;case 59:i[87]="o5_",e=58;break;case 56:i[12]=i[5][i[58]];try{i[22]=i[12][i[64]]()?i[74]:i[61]}catch(e){i[22]=i[61]}e=77;break;case 15:i[4]=i[7],i[66]={},i[66].r6o=["Y1H"],i[66].w$b=function(){var e=!1,t=[];try{for(var i in console)t.x7dT3(i);e=0===t.length}catch(e){}return e},i[86]=i[66],i[55]={},i[55].r6o=["J4I"],e=21;break;case 63:i[61]="X51",i[11]="r6o",i[52]="B5u",i[64]="w$b",e=59;break;case 76:e=i[45]<i[12][i[11]].length?75:70;break;case 21:i[55].w$b=function(){return/\u0074\x72\165\x65/.F5rmB(function(){return"aaa".includes("a")}+[])},i[77]=i[55],i[18]={},e=33;break;case 11:i[8]={},i[8].r6o=["Y1H"],i[8].w$b=function(){return"function"==typeof J6SFs},i[3]=i[8],i[7]={},i[7].r6o=["J4I"],i[7].w$b=function(){return/\130/.F5rmB(function(){return"x".toUpperCase()}+[])},e=15;break;case 70:i[58]++,e=57;break;case 36:i[44]=i[83],i[5].x7dT3(i[44]),i[5].x7dT3(i[1]),i[5].x7dT3(i[94]),e=51;break;case 14:i[6].r6o=["J4I"],i[6].w$b=function(){return!/\x7c/.F5rmB(function(){return"a|a".split("|")}+[])},i[2]=i[6],e=11;break;case 33:i[18].r6o=["Y1H"],i[18].w$b=function(){return"function"==typeof p8bC00},i[65]=i[18],i[46]={},e=29;break;case 51:i[5].x7dT3(i[3]),i[5].x7dT3(i[2]),e=49;break;case 8:i[9].w$b=function(){return/\x3d/.F5rmB(function(){return unescape("%3D")}+[])},i[1]=i[9],i[6]={},e=14;break;case 1:e=t[3]?5:4;break;case 75:i[42]={},i[42][i[87]]=i[12][i[11]][i[45]],i[42][i[52]]=i[22],i[70].x7dT3(i[42]),e=71;break;case 71:i[45]++,e=76;break;case 2:var i=[arguments];e=1;break;case 46:i[5].x7dT3(i[25]),i[5].x7dT3(i[4]),i[70]=[],i[74]="y8Q",e=63;break;case 29:i[46].r6o=["J4I"],i[46].w$b=function(){return/\u0039\x37/.F5rmB(function(){return"aa".charCodeAt(1)}+[])},i[25]=i[46],i[69]={},i[69].r6o=["J4I"],i[69].w$b=function(){return!/\x28\x5b/.F5rmB(function(){return[1,2,3,4,5].concat([5,6,7,8])}+[])},i[94]=i[69],e=39;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 16:t=a[3]<a[4].length?15:23;break;case 10:t=a[2][i[52]]===i[74]?20:19;break;case 4:a[7]={},a[4]=[],a[3]=0,t=8;break;case 26:t=a[5]>=.5?25:24;break;case 19:a[3]++,t=7;break;case 12:a[4].x7dT3(a[2][i[87]]),t=11;break;case 20:a[7][a[2][i[87]]].h+=!0,t=19;break;case 13:a[7][a[2][i[87]]]=function(){for(var e=2;9!==e;)switch(e){case 1:return t[8]={},t[8].h=0,t[8].t=0,t[8];case 2:var t=[arguments];e=1}}.X9kuFN(this,arguments),t=12;break;case 7:t=a[3]<a[0][0].length?6:18;break;case 5:return;case 11:a[7][a[2][i[87]]].t+=!0,t=10;break;case 2:var a=[arguments];t=1;break;case 1:t=0===a[0][0].length?5:4;break;case 23:return a[9];case 25:a[9]=!0,t=24;break;case 18:a[9]=!1,t=17;break;case 15:a[8]=a[4][a[3]],a[5]=a[7][a[8]].h/a[7][a[8]].t,t=26;break;case 8:a[3]=0,t=7;break;case 17:a[3]=0,t=16;break;case 6:a[2]=a[0][0][a[3]],t=14;break;case 24:a[3]++,t=16;break;case 14:t=void 0===a[7][a[2][i[87]]]?13:11}}(i[70])?68:67;break;case 77:i[45]=0,e=76;break;case 39:i[83]={},i[83].r6o=["Y1H"],i[83].w$b=function(){return"function"==typeof x1ydXa},e=36}},t[4]}}(),we[103941]=we[593596],we[156040]=!1,we.a$j=function(){return"function"==typeof we[446427].N$y1PkD?we[446427].N$y1PkD.apply(we[446427],arguments):we[446427].N$y1PkD},we[446427]={N$y1PkD:function(){var e,t=arguments;switch(a){case 178:e=(t[1]+t[4]+t[0])/t[3]-t[2];break;case 153:e=t[0]>t[1];break;case 85:e=(t[0]-t[1])*t[2]-t[3];break;case 42:e=((t[2]|t[4])+t[3])/t[1]/t[0];break;case 118:e=(t[2]+t[0]-t[1])*t[4]-t[3];break;case 103:e=(-t[0]-t[1])*t[2]+t[3];break;case 161:e=(t[0]+t[4]+t[2])*t[3]-t[1];break;case 166:e=t[0]*-t[1];break;case 156:e=t[1]/t[4]*t[2]/t[3]-t[0];break;case 89:e=-(t[1]-t[0])*t[2]+t[3];break;case 146:e=t[4]*t[3]-t[1]+t[2]-t[0];break;case 133:e=-t[4]+t[3]-t[0]+t[1]-t[2];break;case 55:e=t[1]/t[3]*t[0]-t[2];break;case 37:e=(t[3]-t[0]-t[2])/t[4]+t[1];break;case 67:e=(t[3]-t[1])*(t[6]-t[4])/(t[2]-t[0])+t[5];break;case 109:e=t[1]-t[4]+t[0]-t[2]+t[3];break;case 70:e=(-t[2]+t[3])/t[0]*t[1]-t[4];break;case 87:e=t[3]/t[1]*t[0]/t[4]+t[2];break;case 132:e=(-t[0]+t[4]-t[1])/t[3]+t[2];break;case 157:e=t[3]-t[4]-t[2]+t[1]+t[0];break;case 90:e=(-t[1]-t[0])*t[4]/t[2]+t[3];break;case 5:e=t[1]*t[0];break;case 119:e=(-t[2]+t[0])*t[3]+t[1];break;case 44:e=(t[3]+t[0])*t[1]-t[2];break;case 68:e=(t[2]-t[3])/t[1]+t[0];break;case 186:e=-t[2]*t[0]*t[1]+t[3];break;case 1:e=t[0]+t[1];break;case 74:e=+t[0]/t[1];break;case 15:e=t[0]-t[2]+t[1];break;case 111:e=t[2]*t[0]/t[1];break;case 165:e=(t[5]>>t[4])-t[3]/(t[0]+t[1]/t[2]);break;case 60:e=(t[3]-t[2])/(t[0]-t[1]);break;case 58:e=(t[3]|t[2])*t[1]-t[0];break;case 158:e=t[0]*(t[3]%(+t[1]/t[2]));break;case 30:e=t[2]/t[4]/t[1]+t[3]+t[0];break;case 129:e=(t[3]*t[0]-t[2])*t[4]-t[1];break;case 45:e=-t[1]/t[0]+t[3]-t[2];break;case 126:e=(t[1]/t[2]+t[4])*t[0]-t[3];break;case 0:e=t[2]*t[3]-t[1]-t[0];break;case 34:e=-t[2]/t[1]+t[0];break;case 125:e=t[4]-t[0]-t[2]+t[1]-t[3];break;case 172:e=-t[2]+t[3]-t[0]+t[1];break;case 57:e=t[4]*t[1]*t[2]-t[3]-t[0];break;case 134:e=-t[0]-t[3]+t[2]+t[1];break;case 17:e=t[2]*t[1]+t[3]-t[0];break;case 19:e=t[2]*t[0]*t[1]-t[3];break;case 25:e=t[2]+t[0]*t[1];break;case 99:e=(t[0]+t[1]*t[2])/t[3];break;case 113:e=-t[2]/t[1]/t[3]*t[4]+t[0];break;case 18:e=t[2]*t[3]/t[1]-t[0];break;case 121:e=t[1]*t[4]*t[2]+(t[5]-t[3]*t[0])*t[6];break;case 145:e=t[3]/t[2]+t[1]-t[4]-t[0];break;case 177:e=t[3]-t[1]*(t[4]|t[0])-t[2];break;case 144:e=t[4]*(t[1]/t[2]-(t[3]|t[0]));break;case 95:e=(t[4]*t[3]+t[2])/(t[1]-t[0]);break;case 31:e=t[0]>>t[1];break;case 160:e=t[3]/t[1]*t[0]+t[2];break;case 154:e=t[0]*(t[2]+t[1]);break;case 174:e=-t[0]*t[1]/t[4]+t[2]-t[3];break;case 47:e=t[0]+ +t[1];break;case 163:e=t[4]*t[3]/t[2]-t[0]+t[1];break;case 100:e=(t[3]+t[4])/t[2]/t[1]-t[0];break;case 26:e=t[0]-+t[2]*t[1];break;case 175:e=t[3]-t[2]*t[0]-t[1];break;case 83:e=t[0]-t[4]+t[3]+t[2]-t[1];break;case 143:e=t[1]/t[0]+t[2]+t[3];break;case 92:e=t[0]+(t[5]-t[2])/(t[3]-t[4])*(t[6]-t[1]);break;case 122:e=(t[0]+t[3])/t[2]-t[1];break;case 98:e=(t[0]+t[2]*t[1])/+t[3];break;case 120:e=t[3]*t[2]-t[0]+t[1];break;case 10:e=t[1]*t[0]/t[2]/t[3];break;case 84:e=(t[0]+t[2])/+t[1];break;case 169:e=(t[3]-t[1])/t[0]-t[2];break;case 2:e=(t[1]+t[0])/t[2];break;case 91:e=(t[1]+t[3])/t[0]-t[2]+t[4];break;case 29:e=t[1]<<t[0];break;case 155:e=t[1]*t[3]/t[2]+t[0];break;case 137:e=-t[2]*t[3]/t[0]+t[1];break;case 73:e=(t[0]<<t[2])/(t[1]*t[3]);break;case 117:e=t[2]/t[3]+t[1]+t[4]-t[0];break;case 93:e=(t[3]-t[4]-t[1])*t[0]+t[2];break;case 9:e=t[2]*t[1]-t[0];break;case 114:e=t[0]-(t[1]|t[2]);break;case 51:e=-t[1]/t[3]-t[2]+t[0];break;case 3:e=t[2]+t[1]-t[0];break;case 38:e=(t[0]-t[2])*t[3]+t[1];break;case 176:e=t[2]+t[1]*t[3]+t[0];break;case 96:e=((t[2]>>t[3])*t[1]+t[0])/t[4];break;case 184:e=t[3]/t[1]-t[2]+t[0];break;case 116:e=(t[2]+ +t[1])*t[0];break;case 75:e=t[3]+(t[1]-t[0])/t[2];break;case 106:e=(t[2]-(t[1]+(t[3]^t[0])))/t[4];break;case 32:e=t[2]-(t[0]-t[1]);break;case 152:e=(-t[0]-t[2])/t[1]-t[3];break;case 21:e=-t[2]*t[1]+t[0];break;case 43:e=+t[3]*t[1]-t[2]-t[0];break;case 115:e=t[1]+(t[0]<<t[2]);break;case 63:e=t[2]-t[0]-t[1];break;case 35:e=t[1]/t[2]-t[0];break;case 71:e=(t[3]-t[4])*t[0]*t[2]+t[1];break;case 79:e=(t[2]*t[3]-t[5]*t[6])/(t[4]*t[1]-t[0]);break;case 7:e=t[0]/t[1];break;case 127:e=t[0]-t[3]-t[1]-t[4]+t[2];break;case 69:e=t[1]*t[2]+t[0];break;case 104:e=t[3]+t[2]+t[1]-t[4]-t[0];break;case 20:e=(t[1]+t[0]+t[3]+t[4])/t[2];break;case 164:e=t[3]*t[4]*t[0]*t[1]-t[2];break;case 97:e=(t[2]+t[3])/(t[1]*t[0]);break;case 78:e=t[0]*(+t[3]*t[4]+t[1])/t[2];break;case 81:e=t[0]+(t[2]^t[1]);break;case 112:e=(t[0]+t[3])/t[2]+t[1];break;case 159:e=t[3]-t[0]/(+t[1]+t[2]);break;case 66:e=t[0]+t[2]+t[1]-t[3];break;case 108:e=t[1]/t[2]*t[0]*t[3]-t[4];break;case 77:e=t[0]*(t[2]+t[3])/(t[4]*t[1]);break;case 181:e=t[0]*t[2]/(t[3]+t[1]);break;case 107:e=t[1]+t[3]+t[2]+t[0];break;case 123:e=(t[3]-t[1])/t[2]/t[0]+t[4];break;case 185:e=-t[1]/t[3]*t[0]+t[2];break;case 183:e=t[4]+(t[0]/t[3]-t[1]/t[2]);break;case 12:e=(t[1]-t[2])/t[0];break;case 170:e=t[3]+t[0]-t[2]+t[1];break;case 13:e=t[3]+t[1]-t[2]-t[0];break;case 6:e=t[1]%t[2]*t[0];break;case 150:e=(t[1]%t[2]+t[0])*t[3];break;case 140:e=t[0]*(t[2]/t[3]-t[1]);break;case 179:e=t[1]==t[0];break;case 141:e=-t[1]-t[0]+t[2];break;case 11:e=t[2]/t[0]%t[1]/t[3];break;case 147:e=t[1]/t[3]/t[0]+t[2];break;case 105:e=t[2]+t[3]+t[4]+t[6]+t[5]+t[0]+t[7]+t[1];break;case 162:e=-t[0]/t[2]+t[4]+t[1]-t[3];break;case 180:e=t[3]+t[1]/(t[0]-t[2])+t[4];break;case 33:e=(t[0]-t[3])/(t[2]*t[1]);break;case 49:e=t[2]+t[1]/t[0];break;case 167:e=t[0]-t[2]*t[1];break;case 39:e=t[1]-t[3]-t[2]+t[0];break;case 148:e=t[0]/t[1]*t[4]*t[2]+t[3];break;case 135:e=(-t[1]-t[2])/t[3]+t[0];break;case 59:e=t[0]<t[1];break;case 182:e=t[2]/t[0]/t[4]/t[3]-t[1];break;case 14:e=t[0]-t[1];break;case 130:e=(t[1]*t[0]-t[4])/t[3]-t[2];break;case 76:e=t[1]-t[3]*(t[0]-t[2]);break;case 110:e=-t[2]/t[1]/t[3]+t[0];break;case 16:e=t[2]-t[1]+t[3]+t[0];break;case 64:e=(t[4]*t[3]+t[1])/t[0]-t[2];break;case 41:e=t[0]+(t[2]-t[1]);break;case 101:e=t[3]*t[4]+t[2]+t[1]-t[0];break;case 46:e=t[0]^t[1];break;case 62:e=-t[0]-t[3]+t[1]-t[2];break;case 23:e=t[0]-t[2]+t[3]-t[1];break;case 80:e=(t[2]-t[0]*t[3])/t[1];break;case 138:e=t[2]*t[0]*t[1];break;case 142:e=t[0]+t[1]*(t[3]-t[2]);break;case 24:e=t[0]-t[3]-t[2]-t[1];break;case 131:e=-t[1]/t[4]*t[3]*t[0]+t[2];break;case 82:e=t[2]+t[1]+t[0];break;case 171:e=(t[4]-t[2])*t[3]+t[1]+t[0];break;case 136:e=+t[3]*t[2]/(t[0]+t[1]);break;case 72:e=(t[0]*t[3]+t[4])*t[2]-t[1];break;case 56:e=t[1]/t[2]+t[3]-t[0];break;case 168:e=+t[0]*(t[1]/t[2]-t[3]);break;case 102:e=-t[3]+t[0]+t[1]-t[2];break;case 128:e=(-t[0]+t[3]+t[4])/t[1]-t[2];break;case 149:e=(t[0]+t[2])/t[3]+t[1]-t[4];break;case 139:e=+t[1]-t[3]/((t[5]|t[0])+t[2]/t[4]);break;case 27:e=-t[1]+t[0];break;case 28:e=(t[2]+t[4])*t[3]*t[1]-t[0];break;case 4:e=t[0]|t[1];break;case 151:e=t[0]/(t[1]*t[2])<=+t[3];break;case 40:e=t[0]*t[2]<t[1];break;case 36:e=(-t[2]+t[0]+t[3])*t[4]-t[1];break;case 88:e=-t[0]*t[3]+t[2]+t[1];break;case 94:e=t[0]-+t[1];break;case 22:e=-t[2]*t[0]*t[1]-t[4]+t[3];break;case 54:e=(t[4]/t[2]+t[0])/t[3]-t[1];break;case 50:e=t[1]+t[2]/+t[0];break;case 53:e=(t[1]-t[2])/(t[4]-t[3])>t[0];break;case 86:e=t[3]/t[4]/t[2]-t[0]+t[1];break;case 61:e=t[0]/t[1]+t[2];break;case 124:e=t[2]+t[4]-t[3]-t[1]-t[0];break;case 8:e=(t[2]-t[0])*t[3]%t[1];break;case 52:e=-t[0]+t[1]-t[2];break;case 48:e=t[0]-t[1]/t[2];break;case 65:e=(t[4]-t[2])/(t[3]-t[0])>(t[1]|t[5]);break;case 173:e=-t[4]/t[3]/t[1]-t[0]+t[2]}return e},g9iUvuS:function(e){a=e}},we.T$X=function(){return"function"==typeof we[593596].i9agN$W?we[593596].i9agN$W.apply(we[593596],arguments):we[593596].i9agN$W},we.f3X=function(){return"function"==typeof we[593596].i9agN$W?we[593596].i9agN$W.apply(we[593596],arguments):we[593596].i9agN$W},we[370258]=(r=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{V29cT4d:function(e,t,i){for(var a=i,n=-4&t,s=0;s<n;s+=4){var o=255&e.i0lPz(s)|(255&e.i0lPz(s+1))<<8|(255&e.i0lPz(s+2))<<16|(255&e.i0lPz(s+3))<<24;o=r(o,3432918353),a=5*(a=(524287&(a^=o=r(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.i0lPz(n+2))<<16;case 2:o|=(255&e.i0lPz(n+1))<<8;case 1:o|=255&e.i0lPz(n),o=r(o,3432918353),a^=o=r(o=(131071&o)<<15|o>>>17,461845907)}return a^=t,a=r(a^=a>>>16,2246822507),a=r(a^=a>>>13,3266489909),a^=a>>>16}}),we[636832]=327,n=e=>{var t,i=we;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Renderer.Aggregations=function(e){var t;this.construct(e),t=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,this.isAggregation=!0,i.T$X(),t.highlightable=!1,"_main_series"!=t.name&&(console.warn("Aggregations are only allowed on main series."),t.invalid=!0)},t.inheritsFrom(t.Renderer.Aggregations,t.Renderer.OHLC,!1),t.Renderer.Aggregations.requestNew=function(e,a){var r,n,s;i.T$X(),r=null;for(var o=0;o<e.length;o++)switch("p","andf",n=e[o]){case"kagi":case"pandf":r=n;break;case"heikinashi":case"linebreak":case"rangebars":case"renko":r="candle";break;default:return null}return null===r?null:((s=new t.Renderer["candle"==r?"OHLC":"Aggregations"]({params:t.extend(a,{type:r})})).isAggregation=!0,s)},t.Renderer.Aggregations.prototype.drawIndividualSeries=function(e,t){var a,r;if("k","agi",!t.invalid)return a=this.stx,i.f3X(),r={colors:[]},"kagi"==t.type?("st","x_kagi_down","stx_","k","agi_do","wn","stx_ka","gi_up",a.drawKagiSquareWave(e.panel,"stx_kagi_up","stx_kagi_down",t),r.colors.push(a.getCanvasColor("stx_kagi_up")),r.colors.push(a.getCanvasColor("stx_kagi_down"))):"pandf"==t.type&&("stx_pandf","_down","st","x_pan","df_do","wn","stx_p","and","f","_up",a.drawPointFigureChart(e.panel,"stx_pandf_up","X",t),r.colors.push(a.getCanvasColor("stx_pandf_up")),a.drawPointFigureChart(e.panel,"stx_pandf_down","O",t),r.colors.push(a.getCanvasColor("stx_pandf_down"))),r},t.ChartEngine.prototype.setAggregationType=function(e){var a;this.layout.chartType="candle",!1!==(a=this.chart).baseline.userLevel&&(a.baseline.userLevel=a.baseline.defaultLevel,a.panel.yAxis.scroll=t.ChartEngine.YAxis.prototype.scroll),i.T$X(),this.layout.aggregationType=e,this.setMainSeriesRenderer(),a.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.drawKagiSquareWave=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k;s=e.chart,this.startClip(e.name),o=s.dataSegment,l=s.context,(h=e.yAxis).flipped&&(c=a,a=r,r=c),u=this.canvasStyle(a),d=this.canvasStyle(r),this.canvasColor(a),n.border_color_up&&(l.strokeStyle=n.border_color_up),i.f3X(),p=l.strokeStyle,this.canvasColor(r),n.border_color_down&&(l.strokeStyle=n.border_color_down),m=l.strokeStyle,g=1,u.width&&parseInt(u.width,10)<=25&&(g=Math.max(1,t.stripPX(u.width))),f=1,d.width&&parseInt(d.width,10)<=25&&(f=Math.max(1,t.stripPX(d.width))),this.highlightedDraggable&&(l.globalAlpha*=.3),l.beginPath(),i.j7J(0);var M=i.c0C(51,20,8,9);y=s.dataSet.length-s.scroll-M,v=!0,x=null,b=null,C=e.left-.5*this.layout.candleWidth+this.micropixels-1;for(var T=0;T<=o.length;T++)if(C+=this.layout.candleWidth,S=o[T]){if(S.projection)break;b=S.kagiTrend,h.flipped&&(b*=-1),S.transform&&s.transformFunc&&(w=S.kagiPrevOpen,(S=S.transform).kagiPrevOpen=s.transformFunc(this,s,w)),D=S.cache,i.j7J(1),((k=i.c0C(y,T))<e.cacheLeft||k>e.cacheRight||!D.kagiOpen)&&(D.kagiOpen=h.semiLog?h.height*(1-(Math.log(Math.max(S.Open,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-S.Open)*h.multiplier,D.kagiClose=h.semiLog?h.height*(1-(Math.log(Math.max(S.Close,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-S.Close)*h.multiplier,h.flipped?(D.kagiOpen=h.bottom-D.kagiOpen,D.kagiClose=h.bottom-D.kagiClose):(D.kagiOpen+=h.top,D.kagiClose+=h.top)),D.kagiClose,x=h.semiLog?h.height*(1-(Math.log(Math.max(S.kagiPrevOpen,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-S.kagiPrevOpen)*h.multiplier,h.flipped?x=h.bottom-x:x+=h.top,v?(l.moveTo(y>=0?e.left:Math.floor(C),D.kagiOpen),l.lineTo(Math.floor(C),D.kagiOpen),D.kagiClose<D.kagiOpen?(l.strokeStyle=p,l.lineWidth=g):(l.strokeStyle=m,l.lineWidth=f)):-1!=b&&D.kagiClose<x&&x<D.kagiOpen?(l.lineTo(Math.floor(C),x),l.stroke(),l.beginPath(),l.moveTo(Math.floor(C),x),l.strokeStyle=p,l.lineWidth=g):1!=b&&D.kagiClose>x&&x>D.kagiOpen&&(l.lineTo(Math.floor(C),x),l.stroke(),l.beginPath(),l.moveTo(Math.floor(C),x),l.strokeStyle=m,l.lineWidth=f),l.lineTo(Math.floor(C),D.kagiClose),T+1<o.length&&l.lineTo(Math.floor(C+this.layout.candleWidth),D.kagiClose),v=!1}l.stroke(),this.endClip(),l.lineWidth=1},t.ChartEngine.prototype.drawPointFigureChart=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L;i.T$X(),s=e.chart,this.startClip(e.name),o=s.dataSegment,l=s.context,this.canvasColor(a),"X"==r&&n.border_color_up?l.strokeStyle=n.border_color_up:"O"==r&&n.border_color_down&&(l.strokeStyle=n.border_color_down),h=this.canvasStyle(a),c=parseInt(h.paddingTop,10),u=parseInt(h.paddingBottom,10),d=parseInt(h.paddingLeft,10),p=2;for(var E=1;1344479106!==i.O1W(E.toString(),E.toString().length,12832);E++)m=parseInt(h.paddingRight,35),p+=2;-1790013436!==i.S9Y(p.toString(),p.toString().length,97742)&&(m=parseInt(h.paddingRight,10)),h.width&&parseInt(h.width,10)<=25?l.lineWidth=Math.max(1,t.stripPX(h.width)):l.lineWidth=2,this.highlightedDraggable&&(l.globalAlpha*=.3),l.beginPath(),g=this.chart.state.aggregation.box,i.j7J(1);var N=i.c0C(0,1);function H(e,t,a){var r;i.j7J(2),l.moveTo(i.c0C(t,e,2),i.c0C(C,c,a,i.N_M(3))),i.T$X(),i.j7J(4),r=i.c0C("2",2);for(var n=1;1781970155!==i.O1W(n.toString(),n.toString().length,35153);n++)i.j7J(5),l.bezierCurveTo(i.c0C(m,t),i.a$j(C,a,c,i.N_M(6)),i.a$j(t,m,i.j7J(7)),i.a$j(b,C,a,u,i.N_M(8)),i.a$j(4,t,e,i.j7J(9)),i.a$j(b,a,u,C,i.j7J(10))),i.N_M(1),l.bezierCurveTo(i.a$j(e,d),i.c0C(b,u,a,C,i.j7J(11)),i.c0C(d,e,i.j7J(5)),i.c0C(C,a,c,i.j7J(12)),i.a$j(8,t,e,i.N_M(9)),i.a$j(C,a,c,i.N_M(6))),r+=2;-1343812757!==i.S9Y(r.toString(),r.toString().length,29856)&&(i.N_M(1),l.bezierCurveTo(i.c0C(t,m),i.c0C(C,c,a,i.N_M(3)),i.c0C(t,m,i.j7J(1)),i.a$j(C,b,u,a,i.j7J(13)),i.c0C(t,e,2,i.j7J(2)),i.c0C(C,b,u,a,i.N_M(13))),i.N_M(14),l.bezierCurveTo(i.c0C(e,d),i.c0C(C,b,u,a,i.N_M(13)),i.c0C(e,d,i.j7J(14)),i.a$j(C,c,a,i.N_M(3)),i.c0C(t,e,2,i.N_M(2)),i.a$j(C,c,a,i.j7J(3))))}f=s.dataSet.length-s.scroll-N,y=e.yAxis,b=g*y.multiplier,i.N_M(7),C=i.c0C(b,2),S=this.layout.candleWidth,i.j7J(14);var I=i.c0C(11,10);w=e.left-S+this.micropixels-I;for(var j=0;j<o.length;j++)if(w+=S,D=o[j]){if(D.projection)break;if(k=D.pfOpen,M=D.pfClose,T=D.pfTrend,A=D.pfStepBack,D.transform&&s.transformFunc&&(D=D.transform,k=s.transformFunc(this,s,k),M=s.transformFunc(this,s,M)),_=D.cache,i.j7J(1),((P=i.a$j(f,j))<e.cacheLeft||P>e.cacheRight||!_.pfOpen)&&(y.flipped?(_.pfOpen=y.bottom-(y.high-k)*y.multiplier,_.pfClose=y.bottom-(y.high-M)*y.multiplier):(_.pfOpen=(y.high-k)*y.multiplier+y.top,_.pfClose=(y.high-M)*y.multiplier+y.top)),F=Math.round(w),i.N_M(1),L=Math.round(i.a$j(w,S)),v=Math.abs(Math.round((M-k)/g)),x=_.pfOpen,r==A&&("X"==A?(i.N_M(14),O(F,L,i.c0C(x,b))):"O"==A&&(i.N_M(1),H(F,L,i.a$j(x,b)))),r==T)for(;v>=0;v--)"X"==r?(O(F,L,x),x-=y.flipped?-b:b):"O"==r&&(H(F,L,x),x+=y.flipped?-b:b)}function O(e,t,a){i.j7J(1),l.moveTo(i.c0C(e,d),i.a$j(a,C,u,i.N_M(15))),i.j7J(14),l.lineTo(i.a$j(t,m),i.a$j(C,b,a,c,i.j7J(16))),i.f3X(),i.j7J(1),l.moveTo(i.c0C(e,d),i.c0C(C,b,a,c,i.j7J(16))),i.N_M(14),l.lineTo(i.a$j(t,m),i.a$j(a,C,u,i.N_M(15)))}l.stroke(),this.endClip(),l.lineWidth=1},t.ChartEngine.calculateAggregation=function(e,a,r,n){var s,o;return"rangeb",i.f3X(),"a","rs",o=e.layout,["heikinashi","heikenashi"].indexOf(a)>-1?s=t.calculateHeikinAshi(e,r,n):"rangebars"==a?s=t.calculateRangeBars(e,r,o.rangebars,n):"kagi"==a?s=t.calculateKagi(e,r,o.kagi,n):"linebreak"==a?s=t.calculateLineBreak(e,r,o.priceLines,n):"renko"==a?s=t.calculateRenkoBars(e,r,o.renko,n):"pandf"==a&&(s=t.calculatePointFigure(e,r,o.pandf,n)),s},t.calculateHeikinAshi=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,m;if(!t.length)return t;a||(a=[]),r=[];for(var g=0;g<t.length;g++)if(n=t[g]){i.N_M(17);var f=i.c0C(152,8,17,17);if(!(s=r[r.length-f])&&!g){i.N_M(18);var y=i.a$j(5,1,3,2);s=a[a.length-y]}s||(s=n),o=n.Close,l=(l=n.Open)||0===l?l:o,h=(h=n.High)||0===h?h:o,c=(c=n.Low)||0===c?c:o,u=(u=s.Open)||0===u?u:s.Close,i.N_M(19);var v=i.a$j(4,20,10,798);for(var x in d=(u+s.Close)/v,i.j7J(20),p=i.a$j(h,l,4,c,o),m={DT:n.DT,displayDate:n.displayDate,Date:n.Date,Open:d,Close:p,High:Math.max(h,Math.max(d,p)),Low:Math.min(c,Math.min(d,p)),Volume:n.Volume,iqPrevClose:s.Close},n)m[x]||0===m[x]||(m[x]=n[x]);r.push(m)}return r},t.calculateKagi=function(e,a,r,n){var s,o,l,h,c,u,d,p;if(i.f3X(),!a.length)return a;n||(n=[]),s=e.layout,o=e.chart,r=parseFloat(r),o.defaultChartStyleConfig.kagi=t.ChartEngine.isDailyInterval(s.interval)?4:.4,(isNaN(r)||r<=0)&&(r=o.defaultChartStyleConfig.kagi,t.Market.Symbology.isForexSymbol(o.symbol)&&(r/=4),null!==s.kagi&&(s.kagi=null,e.changeOccurred("layout"))),r/=100,l=[],i.j7J(21);var m=i.c0C(85,12,7);c=(h=n[n.length-m])?h.DT:0;for(var g=0;g<a.length;g++)if((u=a[g])&&(h||(i.N_M(14),h=a[i.c0C(g,1)]),h)){if((d=h.Open||0===h.Open?h.Open:h.Close)>h.Close){if(u.Close>h.Close*(1+r))u.Open=h.Close;else if(h.Close>u.Close&&(h.Close=u.Close),h.Volume+=u.Volume,g<a.length-1)continue}else if(d<h.Close){if(u.Close<h.Close*(1-r))u.Open=h.Close;else if(h.Close<u.Close&&(h.Close=u.Close),h.Volume+=u.Volume,g<a.length-1)continue}else if(h.Close=u.Close,h.Volume+=u.Volume,g<a.length-1)continue;for(var f in p={DT:h.DT,displayDate:h.displayDate,Date:h.Date,Open:h.Open,Close:h.Close,High:Math.max(h.Open,h.Close),Low:Math.min(h.Open,h.Close),Volume:h.Volume,iqPrevClose:h.iqPrevClose},h)p[f]||0===p[f]||(p[f]=h[f]);l.length?p.kagiPrevOpen=l[l.length-1].Open:p.kagiPrevOpen=p.Open,p.Close>p.kagiPrevOpen&&p.kagiPrevOpen>p.Open?p.kagiTrend=1:p.Close<p.kagiPrevOpen&&p.kagiPrevOpen<p.Open&&(p.kagiTrend=-1),c<p.DT&&l.push(p),h=u,o.currentQuote={Close:u.Close}}return l},t.calculateLineBreak=function(e,t,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x;if(!t.length)return t;if(r||(r=[]),n=e.layout,(s=e.chart).defaultChartStyleConfig.priceLines=3,a=parseInt(a,10),isNaN(a)||a<=0)a=s.defaultChartStyleConfig.priceLines,null!==n.priceLines&&(n.priceLines=null,e.changeOccurred("layout"));else if(a>10){-2111347095,-823734860,o=2;for(var b=1;-2111347095!==i.O1W(b.toString(),b.toString().length,32527);b++)n.priceLines=a=28,o+=2;-823734860!==i.S9Y(o.toString(),o.toString().length,99972)&&(n.priceLines=a=10)}h=(l=r.slice(-a)).length,c=0;e:for(var C=0;C<t.length;C++)if(u=t[C]){c+=u.Volume,i.j7J(22);var S=i.c0C(5,8,18,738,17);if((d=l[l.length-S])||(d={Open:u.Open,Close:u.Open,High:u.Open,Low:u.Open}),p=d.Close,m=(m=d.High)||0===m?m:p,g=(g=d.Low)||0===g?g:p,f=(f=d.Open)||0===f?f:p,y={DT:u.DT,displayDate:u.displayDate,Date:u.Date,Close:u.Close,Volume:c,iqPrevClose:p},s.currentQuote={Close:u.Close},u.Close>p&&d.Close>f);else if(u.Close<p&&d.Close<f);else if(u.Close>m){for(v=2;v<=a;v++)if((x=l[l.length-v])&&u.Close<=x.High)continue e}else{if(!(u.Close<g))continue;for(v=2;v<=a;v++)if((x=l[l.length-v])&&u.Close>=x.Low)continue e}for(var w in u.Close<d.Close?y.Open=Math.min(f,p):y.Open=Math.max(f,p),y.Low=Math.min(y.Open,y.Close),y.High=Math.max(y.Open,y.Close),u)y[w]||0===y[w]||(y[w]=u[w]);l.push(y),c=0}return l.slice(h)},i.T$X(),t.calculateRenkoBars=function(e,t,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if(!t.length)return[];r||(r=[]),n=e.layout,(o=(s=e.chart).state.aggregation)||(o=s.state.aggregation={}),l=Math.min(300,t.length),o.minMax||(o.minMax=e.determineMinMax(t.slice(t.length-l),["Close","High","Low"])),i.N_M(23);var C=i.c0C(0,2,17,20);if(h=o.minMax[C]-o.minMax[0],!(c=e.panels[s.name].height))return[];function S(e,t){var i;for(var a in e=Number(e.toFixed(8)),t=Number(t.toFixed(8)),i={DT:g.DT,displayDate:g.displayDate,Date:g.Date,Open:e,Close:t,High:Math.max(e,t),Low:Math.min(e,t),Volume:0,iqPrevClose:e!=t?e:null},g)i[a]||0===i[a]||(i[a]=g[a]);d.push(i)}i.j7J(24);var w=i.c0C(18e4,169996,2,2);if(s.defaultChartStyleConfig.renko=Math.floor(w*h/(c/30))/1e4,null===a||isNaN(a)||a<=0){if(a=s.defaultChartStyleConfig.renko,null!==n.renko){"lay","o","u","t",566825041,2008531130,u=2;for(var D=1;566825041!==i.S9Y(D.toString(),D.toString().length,86538);D++)n.renko=null,u+=2;2008531130!==i.O1W(u.toString(),u.toString().length,36698)&&(n.renko=1),e.changeOccurred("layout")}}else i.j7J(7),a=Math.max(a,i.c0C(h,c)),n.renko!==a&&(n.renko=a,e.changeOccurred("layout"));if(d=[],i.f3X(),p=null,m=null,g=null,r.length){i.N_M(1);var k=i.a$j(0,1);p=(f=r[r.length-k]).Low-a,m=f.High+a}for(var M=0;M<t.length;M++)if(y=t[M]){for(p||m||(v=y.Open||0===y.Open?y.Open:y.Close,x=Math.floor(v/a)*a,b=isNaN(x)?v:x,i.N_M(14),p=i.a$j(b,a),i.N_M(1),m=i.a$j(b,a));;)if(g||(g=y),y.Close<=p)i.N_M(1),S(i.a$j(p,a),p),i.j7J(25),m=i.a$j(2,a,p),p-=a,g=null;else{if(!(y.Close>=m))break;i.N_M(14),S(i.a$j(m,a),m),i.N_M(26),p=i.c0C(m,a,"2"),m+=a,g=null}s.currentQuote=y}return p<t[t.length-1].Close&&p+a>t[t.length-1].Close?(i.j7J(1),S(i.a$j(p,a),t[t.length-1].Close)):m>t[t.length-1].Close&&m-a<t[t.length-1].Close&&(i.j7J(14),S(i.c0C(m,a),t[t.length-1].Close)),d},t.calculateRangeBars=function(e,t,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D;function k(){i.N_M(1),p=i.a$j(d,a),i.N_M(14),m=i.a$j(d,a),g=d}if("L","o","w",!t.length)return t;r||(r=[]),n=e.layout,(o=(s=e.chart).state.aggregation)||(o=s.state.aggregation={}),l=Math.min(300,t.length),o.minMax||(o.minMax=e.determineMinMax(t.slice(t.length-l),["Close","High","Low"])),i.N_M(27);var M=i.c0C(15,14);function T(e,t){for(;;){if("u","nde","fine","d",f||(f=e),d<t){if(d=Math.min(t,p),i.j7J(14),m=Math.max(m,i.a$j(d,a)),t<p)break}else if(d>=t&&(d=Math.max(t,m),i.N_M(1),p=Math.min(p,i.c0C(d,a)),t>m))break;if(void 0===d)return void console.log("Uh oh undefined in calculateRangeBars:processMove");A(d),f=null,k()}}function A(e){var t;for(var i in(t={DT:f.DT,displayDate:f.displayDate,Date:f.Date,Open:Number(g.toFixed(8)),Close:Number(e.toFixed(8)),High:Number(p.toFixed(8)),Low:Number(m.toFixed(8)),Volume:0}).iqPrevClose=t.Open,f)t[i]||0===t[i]||(t[i]=f[i]);u.push(t)}if(h=o.minMax[M]-o.minMax[0],c=e.panels[s.name].height,i.f3X(),!c)return[];i.N_M(14);var _=i.c0C(510,480);i.N_M(3);var P=i.c0C(2,7,9995);s.defaultChartStyleConfig.range=Math.floor(1e4*h/(c/_))/P,null===a||isNaN(a)||a<0?(a=s.defaultChartStyleConfig.range,null!==n.range&&(n.range=null,e.changeOccurred("layout"))):(i.j7J(7),a=Math.max(a,i.a$j(h,c)),n.range!==a&&("lay","o","u","t",n.range=a,e.changeOccurred("layout"))),u=[],d=null,p=null,m=null,g=null,f=null;for(var F=0;F<t.length;F++)if(y=t[F]){if(i.j7J(14),v=t[i.c0C(F,1)],!F){if(!v){i.j7J(28);var L=i.c0C(2771,11,0,14,18);v=r[r.length-L]}v&&((d=v.Close)||0===d)&&k()}v&&(x=y.Close,b=y.Open,C=y.High,S=y.Low,(x||0===x)&&(b=b||0===b?b:x,C=C||0===C?C:x,S=S||0===S?S:x,d||0===d||(w=Math.floor(b/a)*a,d=isNaN(w)?b:w,k(),T(v,b)),F&&T(y,b),C-b<b-S?(C&&T(y,C),S&&T(y,S)):(S&&T(y,S),C&&T(y,C)),T(y,x),F==t.length-1&&x!=g&&(D=p,i.j7J(1),p=i.a$j(m,a),i.N_M(14),m=i.a$j(D,a),A(x))))}return u},t.calculatePointFigure=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k;if(!a.length)return a;function M(e,t){for(var i in e)t[i]||0===t[i]||(t[i]=e[i]);return t}function T(e,t,i,a,r){e.High=Math.max(t,e.High),e.Low=Math.min(i,e.Low),e.Close=a,e.Volume+=r}if(n||(n=[]),s=e.layout,o=e.chart,i.T$X(),(l=o.state.aggregation)||(l=o.state.aggregation={}),o.defaultChartStyleConfig.box=1,o.defaultChartStyleConfig.reversal=3,r||(r={}),(h=r.box)||(s.pandf&&null!==s.pandf.box&&(s.pandf.box=null,e.changeOccurred("layout")),h=o.defaultChartStyleConfig.box,(c=a[a.length-1].Close)&&(c<.25?h=.0625:c<1?h=.125:c<5?h=.25:c<20?h=.5:c<100?h=1:c<200?h=2:c<500?h=4:c<1e3?h=5:c<25e3?(i.N_M(4),h=i.a$j("50",48)):h=500),t.ChartEngine.isDailyInterval(s.interval)||(h/=10),t.Market.Symbology.isForexSymbol(o.symbol)&&(c&&(c<1?h=.001:c<2?h=.002:c<50?h=.02:c<200&&(h=.2)),t.ChartEngine.isDailyInterval(s.interval)&&(i.j7J(29),h*=i.c0C(64,"10"))),o.defaultChartStyleConfig.box=h),h=parseFloat(h),(isNaN(h)||h<=0)&&(s.pandf&&null!==s.pandf.box&&(s.pandf.box=null,e.changeOccurred("layout")),o.defaultChartStyleConfig.box=h=1),(u=Math.ceil(parseFloat(r.reversal)))>0&&u>r.reversal)"l","ayo","u","t",s.pandf.reversal=u,e.changeOccurred("layout");else if(isNaN(u)||u<=0){if(s.pandf&&null!==s.pandf.reversal){-1551960333,-1523541582,d=2;for(var A=1;-1551960333!==i.S9Y(A.toString(),A.toString().length,78645);A++)s.pandf.reversal=1,d+=2;-1523541582!==i.S9Y(d.toString(),d.toString().length,5714)&&(s.pandf.reversal=null),e.changeOccurred("layout")}u=o.defaultChartStyleConfig.reversal}function _(e,t,a,r,n,s,o,l,h){return i.T$X(),{DT:e.DT,Date:e.Date,pfOpen:l,pfClose:h,Open:t,Close:n,High:a,Low:r,Volume:s,iqPrevClose:o}}l.box=h,u*=h,p=1e-8,m=(h.toString()+".").split(".")[1].length,g=[],f=0;for(var P=0;P<a.length;P++)if(v=a[P])if(f+=v.Volume,b=v.Close,C=(C=v.Open)||0===C?C:b,S=(S=v.High)||0===S?S:b,w=(w=v.Low)||0===w?w:b,g.length||n.length){i.N_M(14);var F=i.c0C(48,16);(x=g[g.length-("1">>F)])||(x=t.clone(n[n.length-1])),"O"==x.pfTrend?(w<=x.pfClose-h?(x.pfClose=Number((Math.ceil(w/h-p)*h).toFixed(m)),"O"==x.pfStepBack&&(x.pfStepBack=null),T(x,S,w,b,f)):S>=x.pfClose+u?(D=x.pfClose+h,k=Number((Math.floor(S/h+p)*h).toFixed(m)),y=_(v,C,S,w,b,f,x.pfClose,D,k),D==k&&(y.pfStepBack="X"),"O"==x.pfStepBack?(x.pfOpen=D,x.pfClose=k,x.pfTrend="X",T(x,S,w,b,f)):((y=M(v,y)).pfTrend="X",g.push(y))):T(x,S,w,b,f),f=0):"X"==x.pfTrend&&(S>=x.pfClose+h?(x.pfClose=Number((Math.floor(S/h+p)*h).toFixed(m)),"X"!=x.pfStepBack&&"-"!=x.pfStepBack||(x.pfStepBack=null),T(x,S,w,b,f)):w<=x.pfClose-u?(D=x.pfClose-h,k=Number((Math.ceil(w/h-p)*h).toFixed(m)),y=_(v,C,S,w,b,f,x.pfClose,D,k),D==k&&(y.pfStepBack="O"),"X"==x.pfStepBack||"-"==x.pfStepBack?(x.pfOpen=D,x.pfClose=k,x.pfTrend="O",T(x,S,w,b,f),D!=k&&"-"==x.pfStepBack&&(x.pfStepBack=null)):((y=M(v,y)).pfTrend="O",g.push(y))):T(x,S,w,b,f),f=0)}else(y=M(v,_(v,C,S,w,b,f,S+h,Number((Math.ceil(w/h-p)*h).toFixed(m)),Number((Math.floor(S/h+p)*h).toFixed(m))))).pfTrend="X",y.pfOpen==y.pfClose&&(y.pfStepBack="-"),g.push(y),f=0;return g}},s=e=>{var t,i,a=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.Drawing?("br[cq-","wave-","pa","rameters]","waveParamete","rs","l","ineColo","r","en","c","losed","pa","t","ter","n","l","ineWi","dth","a","x","isLab","el","fil","l","Color","c","o","lo","r","cq-cv","p-control","ler[cq-cv",'p-header="2"]',"cq-cvp-controller[cq",'-cvp-header="1"]',"col","o","r","2","fill","C","olo","r","c","o","lo","r","pa","tter","n","fil","lColor","patte","rn","c","o","l","or","pa","tt","ern","line","Wid","th","fillCol","or",t.Drawing.ray=function(){this.name="ray"},t.inheritsFrom(t.Drawing.ray,t.Drawing.line),t.Drawing.ray.prototype.calculateOuterSet=function(e){var i,r;if(this.p0[0]!=this.p1[0]&&this.p0[1]!=this.p1[1]&&!t.ChartEngine.isDailyInterval(this.stx.layout.interval)){i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]},a.N_M(15);var n=a.a$j(333,673,6);if(r=i.x1+n,i.x0>i.x1){a.N_M(30);var s=a.c0C(897,2,996,20,6);r=i.x1-s}this.v0B=this.v0,this.v1B=t.yIntersection(i,r),this.d0B=this.d0,this.d1B=this.stx.dateFromTick(r,e.chart)}},t.Drawing.ray.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,e.chart))},t.Drawing.continuous=function(){a.T$X(),this.name="continuous",this.dragToDraw=!1,this.maxSegments=null},t.inheritsFrom(t.Drawing.continuous,t.Drawing.segment),t.Drawing.continuous.prototype.click=function(e,i,r){var n,s,o;if("vect","o","r",n=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown){this.setPoint(0,i,r,n.chart),this.penDown=!0,-732415514,-940080879,2;for(var l=1;-732415514!==a.S9Y(l.toString(),l.toString().length,67305);l++)return!0;return a.O1W(2..toString(),2..toString().length,26867),!1}return this.accidentalClick(i,r)?(this.stx.undo(),!0):(a.N_M(31),this.setPoint(a.a$j("1",0),i,r,n.chart),s=new(0,t.Drawing.segment),a.f3X(),o=this.serialize(this.stx),s.reconstruct(this.stx,o),this.stx.addDrawing(s),this.stx.changeOccurred("vector"),this.stx.draw(),this.segment++,!!(this.maxSegments&&this.segment>this.maxSegments)||(this.setPoint(0,i,r,n.chart),!1))}},t.Drawing.ellipse=function(){this.name="ellipse"},t.inheritsFrom(t.Drawing.ellipse,t.Drawing.BaseTwoPoint),t.Drawing.ellipse.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x;if("n","one","a","u","t","o",i=this.stx.panels[this.panelName]){if(r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),a.j7J(32),l=a.a$j(n,r,r),h=n,c=s,u=o,a.f3X(),a.N_M(32),d=a.a$j(o,s,s),a.j7J(33),p=a.a$j(u,1,"6",d),(m=this.lineWidth)||(m=1.1),("auto"==(g=this.color)||t.isTransparent(g))&&(g=this.stx.defaultColor),this.highlighted){-1286846140,a.j7J(31),f=-a.a$j("1931758559",32),y=2;for(var b=1;-1286846140!==a.O1W(b.toString(),b.toString().length,25031);b++)g=this.stx.getCanvasColor(""),508===m&&(m=961),y+=2;a.O1W(y.toString(),y.toString().length,23129)!==f&&(g=this.stx.getCanvasColor("stx_highlight_vector"),.1==m&&(m=1.1))}v=this.fillColor,e.beginPath(),e.moveTo(l,c),a.j7J(1),e.bezierCurveTo(l,a.c0C(u,p),h,a.c0C(u,p),h,c),a.j7J(14),e.bezierCurveTo(h,a.c0C(d,p),l,a.a$j(d,p),l,c),v&&!t.isTransparent(v)&&"auto"!=v&&(e.fillStyle=v,e.globalAlpha=.2,e.fill(),e.globalAlpha=1),g&&"none"!=this.pattern&&(e.strokeStyle=g,e.lineWidth=m,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(m,this.pattern)),a.j7J(14),e.lineDashOffset=a.c0C("0",0)),e.stroke()),e.closePath(),this.highlighted&&(x="p1"==this.highlighted,this.littleCircle(e,n,o,x))}},t.Drawing.ellipse.prototype.intersected=function(e,i,r){var n,s,o,l;if(!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],r))return"p","1",this.highlighted="p1",{action:"drag",point:"p1"};n=this.p0[0]-(this.p1[0]-this.p0[0]),s=this.p1[0],o=this.p1[1],a.N_M(21);var h=a.a$j(37,12,3);a.N_M(9);var c=a.c0C(59,20,3);a.N_M(14);var u=a.a$j(6,5);return l=this.p0[h]-(this.p1[c]-this.p0[u]),!(r.x0>Math.max(n,s)||r.x1<Math.min(n,s))&&(!(r.y1>Math.max(l,o)||r.y0<Math.min(l,o))&&(a.T$X(),this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))},t.Drawing.ellipse.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.ellipse.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,a.f3X(),this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},t.Drawing.ellipse.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.channel=function(){a.T$X(),this.name="channel",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.channel,t.Drawing.segment),t.Drawing.channel.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.channel.prototype.move=function(e,t,i){var r;if(a.f3X(),this.penDown){if(this.copyConfig(),null===this.p2)this.p1=[t,i];else{a.N_M(19);var n=a.c0C(17,10,12,2039);a.N_M(3);var s=a.a$j(6,5,2);r=i-(this.p1[n]-this.p0[s])/(this.p1[0]-this.p0[0])*(t-this.p1[0]),this.p2=[this.p1[0],r]}this.render(e)}},t.Drawing.channel.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(t,i)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],a.chart),this.penDown=!1,!0):(this.setPoint(1,t,i,a.chart),this.p0[0]==this.p1[0]?(this.p1=null,!1):(this.p2=[this.p1[0],this.p1[1]],!1)):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1)},t.Drawing.channel.prototype.boxIntersection=function(e,t,i){var r,n,s,o,l;if(r=this.p0,n=this.p1,s=this.p2,!r||!n||!s)return!1;if(i.x0>Math.max(r[0],n[0])||i.x1<Math.min(r[0],n[0]))return!1;a.N_M(34);var h=a.c0C(16,1,15);a.N_M(35);var c=a.c0C(0,14,14);a.j7J(14);var u=a.c0C(15,14);a.j7J(36);var d=a.a$j(18,107,19,10,12);o=(n[0]-r[0])*((s[h]<r[1]?i.y1:i.y0)-r[c])-(n[u]-r[d])*(e-r[0]),a.j7J(14);var p=a.a$j(7,6);a.j7J(37);var m=a.c0C(17,2,16,10,23);a.j7J(38);var g=a.c0C(4,23,15,2);a.j7J(3);var f=a.a$j(18,7,12);a.j7J(39);var y=a.a$j(12,5,11,5);return l=(s[0]-r[0])*((s[1]>r[1]?i.y1:i.y0)-(r[p]+s[m]-n[g]))-(n[f]-r[y])*(e-r[0]),a.j7J(40),a.a$j(o,0,l)},t.Drawing.channel.prototype.intersected=function(e,i,r){var n;if(!this.p0||!this.p1||!this.p2)return null;for(var s in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[s][0],n[s][1],r))return"d","r","a","g",a.j7J(1),this.highlighted=a.c0C("p",s),{action:"drag",point:"p"+s};return a.f3X(),this.boxIntersection(e,i,r)?("m","o","ve",this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:i}):null},t.Drawing.channel.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g;a.T$X(),(i=this.stx.panels[this.panelName])&&(r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=null,this.p2&&(l=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1])),h=this.lineWidth,c=this.getLineColor(),u=this.fillColor,this.p2&&u&&!t.isTransparent(u)&&"auto"!=u&&(e.beginPath(),e.moveTo(r,s),e.lineTo(n,o),e.lineTo(n,l),a.N_M(41),e.lineTo(r,a.c0C(s,o,l)),e.closePath(),e.globalAlpha=.2,e.fillStyle=u,e.fill(),e.globalAlpha=1),d={pattern:this.pattern,lineWidth:h},(this.penDown||this.highlighted)&&"none"==this.pattern&&(d.pattern="dotted"),this.stx.plotLine(r,n,s,o,c,"segment",e,i,d),this.p2&&(a.N_M(41),this.stx.plotLine(r,n,a.c0C(s,o,l),l,c,"segment",e,i,d)),this.highlighted&&("p","2","p","1","p","0",p="p0"==this.highlighted,m="p1"==this.highlighted,g="p2"==this.highlighted,this.littleCircle(e,r,s,p),this.littleCircle(e,n,o,m),this.littleCircle(e,n,l,g)))},t.Drawing.channel.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,"move"==t.action?(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.setPoint(1,t.p1[0]-n,t.p1[1]-s,r.chart),this.setPoint(2,t.p2[0]-n,t.p2[1]-s,r.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],r.chart),this.setPoint(1,this.p1[0],this.p1[1],r.chart),this.setPoint(2,this.p2[0],this.p2[1],r.chart),this.render(e)))},t.Drawing.channel.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),a.T$X(),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d1,this.v2,e.chart))},t.Drawing.channel.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,a.f3X(),this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.adjust()},t.Drawing.channel.prototype.serialize=function(){return a.f3X(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2}},t.Drawing.pitchfork=function(){this.name="pitchfork",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.pitchfork,t.Drawing.channel),t.Drawing.pitchfork.prototype.configs=["color","lineWidth","pattern"],t.Drawing.pitchfork.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],a.T$X(),this.render(e))},t.Drawing.pitchfork.prototype.intersected=function(e,i,r){var n,s;if(!this.p0||!this.p1||!this.p2)return null;for(var o in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[o][0],n[o][1],r))return a.j7J(1),this.highlighted=a.c0C("p",o),{action:"drag",point:"p"+o};a.f3X(),s=this.rays;for(var l=0;l<s.length;l++)if("r","ay",this.lineIntersection(e,i,r,l?"ray":"segment",s[l][0],s[l][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:i};return null},t.Drawing.pitchfork.prototype.render=function(e){var t,i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w;if(t=this.stx.panels[this.panelName]){i=this.stx,(r=this.p2)||(r=this.p1),n=i.pixelFromTick(this.p0[0],t.chart),s=i.pixelFromTick(this.p1[0],t.chart),o=i.pixelFromTick(r[0],t.chart),l=i.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),a.j7J(29),h=a.a$j(0,"204078802"),-173087591,c=2,a.T$X();for(var D=1;a.O1W(D.toString(),D.toString().length,25285)!==h;D++)u=i.pixelFromValueAdjusted(t,this.p1[3],this.p1[7]),d=i.pixelFromValueAdjusted(t,r[1],r[4]),p=this.lineWidth,m=this.getLineColor(),g={pattern:this.pattern,lineWidth:p},f=92,a.j7J(42),y=a.a$j(d,u,"9",l,1),c+=2;-173087591!==a.O1W(c.toString(),c.toString().length,42105)&&(u=i.pixelFromValueAdjusted(t,this.p1[0],this.p1[1]),d=i.pixelFromValueAdjusted(t,r[0],r[1]),p=this.lineWidth,m=this.getLineColor(),g={pattern:this.pattern,lineWidth:p},a.j7J(5),f=a.a$j(1,"50"),a.j7J(43),y=a.c0C(d,l,u,"2")),a.N_M(0),(v=a.c0C(o,s,2,n))<0&&(f*=-1),a.N_M(7),y*=a.a$j(f,v),a.N_M(2),this.rays=[[[s,u],[o,d]],[[n,l],[a.a$j(o,s,2),a.a$j(d,u,2)]]],s==o&&u==d||(a.j7J(14),this.rays.push([[s,u],[a.c0C(s,f),a.a$j(u,y)]],[[o,d],[a.c0C(o,f),a.c0C(d,y)]]));for(var k=0;k<this.rays.length;k++)x=this.rays[k],b=k?"ray":"segment",i.plotLine(x[0][0],x[1][0],x[0][1],x[1][1],m,b,e,t,g);this.highlighted&&(C="p0"==this.highlighted,S="p1"==this.highlighted,w="p2"==this.highlighted,this.littleCircle(e,n,l,C),this.littleCircle(e,s,u,S),this.littleCircle(e,o,d,w))}},t.Drawing.pitchfork.prototype.adjust=function(){var e,t;e=2;for(var i=1;-1246191620!==a.S9Y(i.toString(),i.toString().length,72042);i++){if(+(t=this.stx.panels[this.panelName]))return;this.setPoint(9,this.d0,this.v0,t.chart),e+=2}if(2053540169!==a.O1W(e.toString(),e.toString().length,98135)){if(!(t=this.stx.panels[this.panelName]))return;this.setPoint(0,this.d0,this.v0,t.chart)}this.setPoint(1,this.d1,this.v1,t.chart),this.setPoint(2,this.d2,this.v2,t.chart)},t.Drawing.pitchfork.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.d2=t.d2,a.T$X(),this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.tzo2=t.tzo2,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.adjust()},t.Drawing.pitchfork.prototype.serialize=function(){return a.T$X(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2}},t.Drawing.gartley=function(){a.T$X(),this.name="gartley",this.dragToDraw=!1,this.maxSegments=4,this.shape=null,this.points=[]},t.inheritsFrom(t.Drawing.gartley,t.Drawing.continuous),t.Drawing.gartley.prototype.check=function(e,t){if(!t)return!0;if(e[0]>=t[0]||e[1]==t[1])return!1;if(1==this.segment)e[1]<t[1]?this.shape="M":this.shape="W";else if(2==this.segment){if("M"==this.shape&&e[1]<t[1])return!1;if("W"==this.shape&&e[1]>t[1])return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])>=.786)return!1}else if(3==this.segment){if("M"==this.shape&&e[1]>t[1])return!1;if("W"==this.shape&&e[1]<t[1])return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])>=.786)return!1}else if(4==this.segment){if("M"==this.shape&&(e[1]<t[1]||t[1]<this.points[0][1]))return!1;if("W"==this.shape&&(e[1]>t[1]||t[1]>this.points[0][1]))return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])<1.27)return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}return!0},t.Drawing.gartley.prototype.click=function(e,t,i){var r;if(r=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown)return this.setPoint(0,t,i,r.chart),this.pts=[],this.penDown=!0,this.segment=1,!1;if(this.accidentalClick(t,i))return this.penDown=!0,!1;if(a.f3X(),this.check(this.p0,this.p1)){if(1==this.segment&&this.points.push(this.p0),this.points.push(this.p1),a.j7J(31),this.setPoint(a.a$j("1",64),t,i,r.chart),this.segment++,this.segment>this.maxSegments)return this.setPoint(0,this.points[0][0],this.points[0][1],r.chart),this.penDown=!1,!0;this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,t,i,r.chart)}return!1}},t.Drawing.gartley.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y;if("dott","ed",i=this.stx.panels[this.panelName]){if(r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),2==this.segment)this.drawDropZone(e,.618*this.points[0][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]);else if(3==this.segment)this.drawDropZone(e,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+.214*this.p0[1],this.p0[0]);else if(4==this.segment){a.N_M(17);var v=a.a$j(32,4,5,14);a.N_M(44);var x=a.c0C(16,16,255,0);a.N_M(1);var b=a.a$j(0,1);a.j7J(1);var C=a.c0C(0,1);l=1.618*this.points[v][x]-.618*this.points["1"|b][C],l="M"==this.shape?Math.max(l,this.points[0][1]):Math.min(l,this.points[0][1]),this.drawDropZone(e,l,1.27*this.points[2][1]-.27*this.points[1][1],this.p0[0])}if(h=this.lineWidth,c=this.getLineColor(),u={pattern:this.pattern,lineWidth:h},(this.penDown||this.highlighted)&&"none"==this.pattern&&(u.pattern="dotted"),this.segment<=this.maxSegments&&this.stx.plotLine(r,n,s,o,c,this.name,e,i,u),d=this.fillColor,p=[],this.points.length){e.beginPath();for(var S=1;S<this.points.length&&S<=4;S++)m=this.stx.pixelFromTick(this.points[S-1][0],i.chart),g=this.stx.pixelFromTick(this.points[S][0],i.chart),f=this.stx.pixelFromValueAdjusted(i,this.points[S-1][0],this.points[S-1][1]),y=this.stx.pixelFromValueAdjusted(i,this.points[S][0],this.points[S][1]),1==S&&p.push(m,f),p.push(g,y),this.stx.plotLine(m,g,f,y,c,this.name,e,i,u);if(2!=this.points.length&&4!=this.points.length||p.push(n,o),this.points[2]&&p.push(this.stx.pixelFromTick(this.points[2][0],i.chart),this.stx.pixelFromValueAdjusted(i,this.points[2][0],this.points[2][1])),d&&"auto"!=d&&!t.isTransparent(d)){for(var w=0;w<p.length;w+=2)0===w&&e.moveTo(p[0],p[1]),e.lineTo(p[w],p[w+1]);e.fillStyle=d,e.globalAlpha=.2,e.closePath(),e.fill(),e.globalAlpha=1}}}},t.Drawing.gartley.prototype.lineIntersection=function(e,i,r,n){var s,o;if(s=this.points,a.f3X(),o=this.stx.panels[this.panelName],s.length!=this.maxSegments+1||!o)return!1;for(var l=0;l<s.length-1;l++)if("s","e","gme","nt",t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,r,"segment",s[l],s[l+1]))return!0;return!1},t.Drawing.gartley.prototype.boxIntersection=function(e,t,i){var a,r;if(!this.p0||!this.p1)return!1;if(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))return!1;a=Math.min(this.p0[1],this.p1[1]),r=Math.max(this.p0[1],this.p1[1]);for(var n=0;n<this.points.length;n++)a=Math.min(a,this.points[n][1]),r=Math.max(r,this.points[n][1]);return!(i.y1>r||i.y0<a)},t.Drawing.gartley.prototype.reposition=function(e,t,i,r){var n,s,o;if(a.T$X(),t&&(n=this.stx.panels[this.panelName],s=t.tick-i,t.tick=i,o=t.value-r,t.value=r,"move"==t.action)){this.pts=[];for(var l=0;l<this.points.length;l++)this.points[l][0]-=s,this.points[l][1]-=o,a.j7J(14),this.setPoint(a.a$j("1",0),this.points[l][0],this.points[l][1],n.chart),l&&l<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[l]=this.p1;this.setPoint(0,this.points[0][0],this.points[0][1],n.chart),this.render(e)}},t.Drawing.gartley.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.gartley.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(a.T$X(),this.reconstructPoints(),this.setPoint(0,this.d0,this.v0,e.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,e.chart),this.points.push(this.p1))},t.Drawing.gartley.prototype.reconstructPoints=function(){var e,i;if(e=this.stx.panels[this.panelName]){this.points=[];for(var a=0;a<this.pts.length;a+=3)(i=t.strToDateTime(this.pts[a])).setMinutes(i.getMinutes()+Number(this.pts[a+1])-i.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(t.yyyymmddhhmmssmmm(i),e.chart),this.pts[a+2]])}},t.Drawing.gartley.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.pts=t.pts.split(","),this.adjust()},t.Drawing.gartley.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,pts:this.pts.join(",")}},t.Drawing.freeform=function(){this.name="freeform",this.splineTension=.3,a.f3X(),this.dragToDraw=!0},t.inheritsFrom(t.Drawing.freeform,t.Drawing.segment),t.Drawing.freeform.prototype.measure=function(){},t.Drawing.freeform.prototype.intersected=function(e,i,r){return"m","o",a.f3X(),"v","e",r.x0>this.hiX||r.x1<this.lowX||r.y1>this.hiY||r.y0<this.lowY?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),tick:e,value:i})},t.Drawing.freeform.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,"move"==t.action&&(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.adjust(),this.render(e)))},t.Drawing.freeform.prototype.click=function(e,i,r){var n,s;if(n=this.stx.panels[this.panelName])return!1===this.penDown?("p","oin","ter",this.copyConfig(),this.startX=Math.round(this.stx.resolveX(this.stx.pixelFromTick(i,n.chart))),this.startY=Math.round(this.stx.resolveY(this.stx.pixelFromValueAdjusted(n,i,r))),s=this.stx.dateFromTick(i,n.chart,!0),this.d0=t.yyyymmddhhmmssmmm(s),this.tzo0=s.getTimezoneOffset(),this.v0=r,this.p0=[t.ChartEngine.crosshairX-this.startX,t.ChartEngine.crosshairY-this.startY],a.N_M(29),this.nodes=[this.p0[0],this.p0[a.c0C(0,"1")]],this.pNodes=[this.p0],this.candleWidth=this.stx.layout.candleWidth,this.multiplier=n.yAxis.multiplier,this.interval=this.stx.layout.interval,this.periodicity=this.stx.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,document.body.style.cursor="pointer",this.penDown=!0,!1):(this.penDown=!1,this.splineTension=this.tempSplineTension,document.body.style.cursor="auto",!0)},t.Drawing.freeform.prototype.move=function(e,i,r){var n,s;if(this.penDown)return n=this.stx.panels[this.panelName],s=this.stx.dateFromTick(i,n.chart,!0),this.d1=t.yyyymmddhhmmssmmm(s),this.tzo1=s.getTimezoneOffset(),this.v1=r,this.p1=[t.ChartEngine.crosshairX-this.startX,n.yAxis.flipped?this.startY-t.ChartEngine.crosshairY:t.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]?(this.pNodes.length--,this.nodes.length-=2):this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1]&&(this.pNodes.length--,a.j7J(31),this.nodes.length-=a.a$j("2",96))),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(e),!1},t.Drawing.freeform.prototype.intervalRatio=function(e,i,r,n,s,o){var l;if(l=0,a.T$X(),e==i)l=1;else if(isNaN(e)||isNaN(i))if(isNaN(e)){if("d","a","y","month"==e)"week"==i?l=u(s,o):"day"==i?l=c(s,o):isNaN(i)||(l=c(s,o)*h(s,o)/i);else if("week"==e){if("month"==i)a.j7J(1),l=a.c0C(0,1)/u(s,o);"day"==i?l=5:isNaN(i)||(l=5*h(s,o)/i)}else if("day"==e){if("m","on","t","h","week"==i)a.j7J(45),l=("1"|a.a$j(4,8,9,12))/5;else if("month"==i){a.j7J(27),l=a.a$j(11,10)/c(s,o)}else isNaN(i)||(l=h(s,o)/i)}}else isNaN(e)||("da","y","m","onth","month"==i?l=e/(c(s,o)*h(s,o)):"week"==i?l=e/(5*h(s,o)):"day"==i&&(l=e/h(s,o)));else a.j7J(7),l=a.c0C(e,i);function h(e,i){return t.Market.Symbology.isForexSymbol(i)?1440:390}function c(e,t){var i;a.N_M(46),i=-a.c0C("1359803321",0);for(var r=1;1114596948!==a.S9Y(r.toString(),r.toString().length,66475);r++)return 30;if(a.O1W(2..toString(),2..toString().length,37483)!==i)return 89}function u(e,t){return a.f3X(),5}return a.j7J(7),l*=a.c0C(r,n)},t.Drawing.freeform.prototype.render=function(e){var t,i,r,n,s,o,l,h,c,u,d,p;if((t=this.stx.panels[this.panelName])&&0!==(i=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,t.chart.symbol))){r=this.stx.layout.candleWidth/this.candleWidth,n=t.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,t.chart),s=this.stx.pixelFromTick(this.p0[0],t.chart),o=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),l=[],h=this.lineWidth,c=this.getLineColor(),u={pattern:this.pattern,lineWidth:h};for(var m=0;m<this.pNodes.length;m++){d=i*r*this.pNodes[m][0]+s,a.N_M(39);var g=a.a$j(11,4,11,3);p=n*this.pNodes[m][g],t.yAxis.flipped?(a.j7J(14),p=a.a$j(o,p)):p+=o,l.push(d,p)}l.length&&(this.splineTension<0?this.stx.connectTheDots(l,c,this.name,e,t,u):this.stx.plotSpline(l,this.splineTension,c,this.name,e,!0,u))}},t.Drawing.freeform.prototype.adjust=function(){var e,t,i,r,n,s,o,l;if(e=this.stx.panels[this.panelName]){a.j7J(29),t=[this.nodes[0],this.nodes[a.c0C(0,"1")]],this.pNodes=[t],this.lowX=this.nodes[0],this.hiX=this.nodes[0],a.N_M(5),this.lowY=this.nodes[a.c0C(1,"1")],this.hiY=this.nodes[1];for(var h=2;h<this.nodes.length;h+=2)a.j7J(47),i=[this.nodes[h],this.nodes[a.a$j(h,"1")]],this.pNodes.push(i),this.lowX=Math.min(this.lowX,i[0]),this.hiX=Math.max(this.hiX,i[0]),this.lowY=Math.max(this.lowY,i[1]),this.hiY=Math.min(this.hiY,i[1]);0!==(r=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,e.chart.symbol))&&(n=this.stx.layout.candleWidth/this.candleWidth,s=e.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,e.chart),o=this.stx.pixelFromTick(this.p0[0],e.chart),l=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),this.lowX=this.stx.tickFromPixel(Math.floor(r*n*this.lowX)+o,e.chart),this.hiX=this.stx.tickFromPixel(Math.ceil(r*n*this.hiX)+o,e.chart),e.yAxis.flipped?(this.lowY=this.stx.valueFromPixel(l-Math.floor(s*this.lowY),e),this.hiY=this.stx.valueFromPixel(l-Math.ceil(s*this.hiY),e)):(this.lowY=this.stx.valueFromPixel(Math.floor(s*this.lowY)+l,e),this.hiY=this.stx.valueFromPixel(Math.ceil(s*this.hiY)+l,e)))}},t.Drawing.freeform.prototype.serialize=function(){return a.f3X(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(4)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes}},t.Drawing.freeform.prototype.reconstruct=function(e,t){this.stx=e,a.T$X(),this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.candleWidth=t.cw,this.multiplier=t.mlt,this.d0=t.d0,this.tzo0=t.tzo0,this.v0=t.v0,this.interval=t.inter,this.periodicity=t.pd,this.nodes=t.nodes,this.adjust()},t.Drawing.callout=function(){this.name="callout",this.arr=[],this.w=0,this.h=0,this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={},this.stemEntry="",this.defaultWidth=50,this.defaultHeight=10},t.inheritsFrom(t.Drawing.callout,t.Drawing.annotation),t.Drawing.callout.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.callout.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e),this.borderColor=this.color},t.Drawing.callout.prototype.move=function(e,t,i){a.T$X(),this.penDown&&(this.copyConfig(),this.p0=[t,i],this.render(e))},t.Drawing.callout.prototype.onChange=function(e){var i,r;this.stx.panels[this.panelName]&&(i=e.target,this.w=i.clientWidth,this.h=i.clientHeight,a.f3X(),r=this.context||this.stx.chart.tempCanvas.context,t.clearCanvas(r.canvas,this.stx),this.render(r),this.edit(r))},t.Drawing.callout.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w;if(this.context=e,(i=this.stx.panels[this.panelName])&&(r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),!isNaN(n))){e.font=this.fontString,e.textBaseline="top",s=r,o=n,a.N_M(28);var D=a.a$j(338,10,0,17,2);l=this.w/D,a.j7J(14);var k=a.a$j(21,19);if(h=this.h/k,this.penDown&&(l=this.defaultWidth,(h=this.defaultHeight)||(h=this.fontSize)),(c=this.lineWidth)||(c=1.1),("auto"==(u=this.color)||t.isTransparent(u))&&(u=this.stx.defaultColor),("auto"==(d=this.borderColor)||t.isTransparent(d))&&(d=this.stx.defaultColor),this.highlighted&&(d=this.stx.getCanvasColor("stx_highlight_vector")),y=Math.min(Math.min(l,h)/2,8),this.stem){this.stem.t?(p=this.stx.pixelFromTick(this.stem.t),g=this.stx.pixelFromValueAdjusted(i,this.stem.t,this.stem.v)):this.stem.x&&(p=s,g=o,s+=this.stem.x,o+=this.stem.y),-1801199561,-1975668760,a.N_M(14),v=a.a$j("2",0);for(var M=1;-1801199561!==a.O1W(M.toString(),M.toString().length,95124);M++)x="",v+=2;if(-1975668760!==a.S9Y(v.toString(),v.toString().length,25256)&&(x=""),p>=s+l?(a.j7J(1),m=a.a$j(s,l),x="r"):p>s-l&&p<s+l?(m=s,x="c"):p<=s-l&&(a.j7J(14),m=a.a$j(s,l),x="l"),g>=o+h){-478116192,223288090,b=2;for(var T=1;-478116192!==a.O1W(T.toString(),T.toString().length,60354);T++)a.N_M(1),f=a.a$j(o,h),x+="b",b+=2;223288090!==a.S9Y(b.toString(),b.toString().length,73834)&&(a.N_M(14),f=a.c0C(o,h),x/="j")}else g>o-h&&g<o+h?(f=o,x+="m"):g<=o-h&&(a.j7J(14),f=a.c0C(o,h),x+="t");this.stemEntry=x,"cm"!=x&&(p=Math.round(p),m=Math.round(m),g=Math.round(g),f=Math.round(f))}if(this.highlighted?this.stx.canvasColor("stx_annotation_highlight_bg",e):this.fillColor?(e.fillStyle=this.fillColor,e.globalAlpha=.4):this.stem&&(e.fillStyle=this.stx.containerColor),e.strokeStyle=d,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(c,this.pattern)),e.lineDashOffset=0),d){if("l","t","c","b","r","b","r","t",e.beginPath(),e.lineWidth=c,a.j7J(3),e.moveTo(a.c0C(y,l,s),a.c0C(o,h,a.j7J(14))),"rt"!=this.stemEntry?(a.j7J(1),e.quadraticCurveTo(a.a$j(s,l),a.c0C(o,h,a.j7J(14)),a.a$j(s,l,a.N_M(1)),a.c0C(o,y,h,a.N_M(15)))):(e.lineTo(p,g),a.N_M(1),e.lineTo(a.c0C(s,l),a.c0C(o,y,h,a.N_M(15)))),a.N_M(1),e.lineTo(a.c0C(s,l),a.c0C(o,y,2,a.N_M(48))),"rm"==this.stemEntry&&e.lineTo(p,g),a.j7J(1),e.lineTo(a.c0C(s,l),a.a$j(2,y,o,a.N_M(49))),a.j7J(1),e.lineTo(a.c0C(s,l),a.c0C(y,h,o,a.N_M(3))),"rb"!=this.stemEntry){a.j7J(1),e.quadraticCurveTo(a.c0C(s,l),a.c0C(o,h,a.j7J(1)),a.a$j(y,l,s,a.j7J(3)),a.c0C(o,h,a.j7J(1))),-1787821410,-334914513,C=2;for(var A=1;-1787821410!==a.O1W(A.toString(),A.toString().length,58859);A++)C+=2;a.O1W(C.toString(),C.toString().length,43222)}else e.lineTo(p,g),a.j7J(3),e.lineTo(a.a$j(y,l,s),a.a$j(o,h,a.j7J(1)));if(a.j7J(49),e.lineTo(a.a$j(2,y,s),a.c0C(o,h,a.j7J(1))),"cb"==this.stemEntry&&e.lineTo(p,g),a.j7J(48),e.lineTo(a.a$j(s,y,2),a.a$j(o,h,a.N_M(1))),a.j7J(15),e.lineTo(a.a$j(s,y,l),a.c0C(o,h,a.N_M(1))),"lb"!=this.stemEntry){a.N_M(14),e.quadraticCurveTo(a.c0C(s,l),a.a$j(o,h,a.j7J(1)),a.a$j(s,l,a.j7J(14)),a.a$j(y,h,o,a.j7J(3))),687739654,324565001,S=2;for(var _=1;687739654!==a.O1W(_.toString(),_.toString().length,21916);_++)S+=2;a.O1W(S.toString(),S.toString().length,39618)}else e.lineTo(p,g),a.j7J(14),e.lineTo(a.a$j(s,l),a.c0C(y,h,o,a.N_M(3)));a.N_M(14),e.lineTo(a.c0C(s,l),a.a$j(2,y,o,a.N_M(49))),"lm"==this.stemEntry&&e.lineTo(p,g),a.j7J(14),e.lineTo(a.a$j(s,l),a.a$j(o,y,2,a.j7J(48))),a.j7J(14),e.lineTo(a.c0C(s,l),a.c0C(o,y,h,a.N_M(15))),"lt"!=this.stemEntry?(a.j7J(14),e.quadraticCurveTo(a.a$j(s,l),a.a$j(o,h,a.j7J(14)),a.a$j(s,y,l,a.j7J(15)),a.c0C(o,h,a.N_M(14)))):(e.lineTo(p,g),a.j7J(15),e.lineTo(a.c0C(s,y,l),a.c0C(o,h,a.N_M(14)))),a.N_M(48),e.lineTo(a.a$j(s,y,2),a.a$j(o,h,a.N_M(14))),"ct"==this.stemEntry&&e.lineTo(p,g),a.j7J(50),e.lineTo(a.c0C("2",s,y),a.c0C(o,h,a.j7J(14))),a.N_M(3),e.lineTo(a.c0C(y,l,s),a.a$j(o,h,a.j7J(14))),e.fill(),e.globalAlpha=1,"none"!=this.pattern&&e.stroke()}if(a.T$X(),this.highlighted?("st","x_annotation_highl","ight",this.stx.canvasColor("stx_annotation_highlight",e)):e.fillStyle=u,o+=this.padding,!this.ta)for(var P=0;P<this.arr.length;P++)e.fillText(this.arr[P],s-l+this.padding,o-h),o+=this.fontSize;e.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&(w="p0"==this.highlighted,this.littleCircle(e,p,g,w))}},t.Drawing.callout.prototype.click=function(e,t,i){var r;if(!this.stx.overXAxis&&!this.stx.overYAxis)return r=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,t,i,r.chart),this.penDown?(this.adjust(),a.T$X(),this.edit(e),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)},t.Drawing.callout.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,t.stem?("d","ra","g","drag"==t.action?this.stem={d:this.stx.dateFromTick(i,r.chart,!0),v:a}:"move"==t.action&&(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(t.stem.d,r.chart)-n),v:t.stem.v-s}),this.adjust()):this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.render(e))},t.Drawing.callout.prototype.lineIntersection=function(e,i,r,n){var s,o,l,h,c,u,d,p,m,g,f,y;if(s=this.stx.panels[this.panelName],a.f3X(),o=this.stem,l=this.p0,h=this.stx,!l||!o||!s)return!1;if(c=o.t||this.stx.tickFromDate(o.d,s.chart),u={x0:l[0],x1:c,y0:l[1],y1:o.v},p=(d=t.convertBoxToPixels(h,this.panelName,u)).x0,m=d.y0,g=d.x1,f=d.y1,"string"==typeof this.stemEntry){if(this.stemEntry.indexOf("l")>-1)p-=this.w/2;else if(this.stemEntry.indexOf("r")>-1){a.N_M(27);var v=a.a$j(12,10);p+=this.w/v}if(this.stemEntry.indexOf("t")>-1){a.N_M(19);var x=a.a$j(8,10,6,478);m-=this.h/x}else this.stemEntry.indexOf("b")>-1&&(m+=this.h/2)}return y=t.convertBoxToPixels(h,this.panelName,r),t.boxIntersects(y.x0,y.y0,y.x1,y.y1,p,m,g,f,n)},t.Drawing.callout.prototype.intersected=function(e,i,r){var n,s,o,l,h,c,u;if(n=this.stx.panels[this.panelName],!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,r))return"p","0",this.highlighted="p0",{action:"drag",stem:!0};a.N_M(45);var d=a.a$j(1,7,1,10);s=this.stx.pixelFromTick(this.p0[0],n.chart)-this.w/d,a.j7J(51);var p=a.a$j(7,3,5,3);a.j7J(52);var m=a.c0C(9,15,4);return o=this.stx.pixelFromValueAdjusted(n,this.p0[0],this.p0[p])-this.h/m,l=s+this.w,h=o+this.h,this.stem&&this.stem.x&&(s+=this.stem.x,l+=this.stem.x,o+=this.stem.y,h+=this.stem.y),c=this.stx.pixelFromTick(e,n.chart),u=this.stx.pixelFromValueAdjusted(n,e,i),c+r.r>=s&&c-r.r<=l&&u+r.r>=o&&u-r.r<=h?(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:i}):this.lineIntersection(e,i,r,"segment")?(this.highlighted=!0,{action:"move",stem:t.clone(this.stem),p0:t.clone(this.p0),tick:e,value:i}):null},t.Drawing.fibonacci=function(){this.name="fibonacci",this.configurator="fibonacci"},t.inheritsFrom(t.Drawing.fibonacci,t.Drawing.BaseTwoPoint),t.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:"pl",printValues:"pv",timezone:"tz",display:"d"},a.N_M(14),t.Drawing.fibonacci.prototype.recommendedLevels=[-.618,-a.a$j("0.382",0),0,.382,.5,.618,1,1.382,1.618],t.Drawing.fibonacci.prototype.configs=["color","fillColor","lineWidth","pattern","parameters"],t.Drawing.fibonacci.prototype.initializeSettings=function(e){var t,i;if((t=this.recommendedLevels)&&!e.currentVectorParameters.fibonacci.fibsAlreadySet){i=e.currentVectorParameters.fibonacci.fibs;for(var a=0;a<i.length;a++){delete i[a].display;for(var r=0;r<t.length;r++)i[a].level==t[r]&&(i[a].display=!0)}}},t.Drawing.fibonacci.prototype.setOuter=function(){var e,i,r,n,s,o,l,h,c,u,d,p,m,g;if(i=(e=this.stx).panels[this.panelName]){r=Math.max(this.p0[1],this.p1[1]),n=Math.min(this.p0[1],this.p1[1]),a.N_M(14),s=a.a$j(r,n),a.f3X(),this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},o=e.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=e.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),h=e.pixelFromTick(this.p0[0],i.chart),c=e.pixelFromTick(this.p1[0],i.chart),u=0,d=1;for(var f=0;f<this.parameters.fibs.length;f++)(p=this.parameters.fibs[f]).level>=u&&p.level<=d||!p.display||(m=e.pixelFromValueAdjusted(i,this.p0[0],l<o?r-s*p.level:n+s*p.level),g=t.xIntersection({x0:h,x1:c,y0:o,y1:l},m),p.level<u?(u=p.level,this.outer.p1[1]=e.valueFromPixel(m,i),this.outer.p1[0]=e.tickFromPixel(g,i.chart)):p.level>d&&(d=p.level,this.outer.p0[1]=e.valueFromPixel(m,i),this.outer.p0[0]=e.tickFromPixel(g,i.chart)))}},t.Drawing.fibonacci.prototype.click=function(e,i,r){var n;if(n=this.stx.panels[this.panelName])return a.f3X(),this.copyConfig(),this.penDown?this.accidentalClick(i,r)?this.dragToDraw:(this.setPoint(1,i,r,n.chart),this.setOuter(),this.parameters=t.clone(this.parameters),this.penDown=!1,!0):(this.setPoint(0,i,r,n.chart),this.penDown=!0,!1)},t.Drawing.fibonacci.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j;if("161",".8","%",(i=this.stx.panels[this.panelName])&&(r=i.yAxis,this.p1)){n=Math.max(this.p0[1],this.p1[1]),s=Math.min(this.p0[1],this.p1[1]),o=r.flipped?s-n:n-s,l=this.stx.pixelFromTick(this.p0[0],i.chart),h=this.stx.pixelFromTick(this.p1[0],i.chart),c=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),u=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),d=Math.min(u,c),p=Math.max(u,c),a.j7J(14),m=a.a$j(p,d),a.N_M(53),g=a.c0C(0,u,c,l,h),f={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=f),y=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),a.N_M(3);var O=a.a$j(0,4,6);v=e.measureText("161.8%").width+O,x=Number.MAX_VALUE,b=Number.MAX_VALUE,a.N_M(54);var Y=a.c0C(16,18,4,1,4);C=Number.MAX_VALUE*Y,a.j7J(3);var R=a.a$j(28,12,15);S=Number.MAX_VALUE*R,a.f3X(),("auto"==(w=this.color)||t.isTransparent(w))&&(w=this.stx.defaultColor),this.rays=[];for(var $=0;$<this.parameters.fibs.length;$++)if("un","defined","s","e","gmen","t","a","uto","au","t","o",e.textAlign="left",e.fillStyle=w,(D=this.parameters.fibs[$]).display){if(k=this.stx.pixelFromValueAdjusted(i,this.p0[0],u<c?n-o*D.level:s+o*D.level),M=t.xIntersection({x0:l,x1:h,y0:c,y1:u},k),T=this.parameters.extendLeft?0:M,A=i.left+i.width,this.parameters.printLevels){a.j7J(55);var z=a.c0C(2,60,0,12);_=Math.round(1e3*D.level)/z+"%",A-=v,this.parameters.printValues&&(e.fillStyle=w,this.stx.canvasFont("stx_yaxis",e)),A<T&&(e.textAlign="right"),e.fillText(_,A,k),A<T?A+=5:A-=5}this.parameters.printValues&&M<i.width&&(P=this.stx.transformedPriceFromPixel(k,i),P=r.priceFormatter?r.priceFormatter(this.stx,i,P):this.stx.formatYAxisPrice(P,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,P,k,w,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(F=D.color)||t.isTransparent(F))&&(F=this.color),("auto"==F||t.isTransparent(F))&&(F=this.stx.defaultColor),("auto"==(L=D.color)||t.isTransparent(L))&&(L=this.fillColor),("auto"==L||t.isTransparent(L))&&(L=this.stx.defaultColor),e.fillStyle=L,E=t.clone(D.parameters),this.highlighted&&(E.opacity=1),this.stx.plotLine(T,A,k,k,this.highlighted?y:F,"segment",e,i,E),this.rays.push([[T,k],[A,k]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(A,k),e.lineTo(T,k),T?e.lineTo(h,u):e.lineTo(T,u),e.lineTo(A,u),void 0!==L&&e.fill(),e.globalAlpha=1,k<b&&(x=M,b=k),k>S&&(C=M,S=k)}for(var q=0;q<=1;q++)N=g?p-m*q:d+m*q,(N=Math.round(N))<b&&(x=t.xIntersection({x0:l,x1:h,y0:c,y1:u},N),b=N),N>S&&(C=t.xIntersection({x0:l,x1:h,y0:c,y1:u},N),S=N);H=t.clone(this.parameters.trend.parameters),this.highlighted&&(H.opacity=1),this.stx.plotLine(x,C,b,S,y,"segment",e,i,H),this.highlighted&&("p","1",I="p0"==this.highlighted,j="p1"==this.highlighted,this.littleCircle(e,l,c,I),this.littleCircle(e,h,u,j))}},t.Drawing.fibonacci.prototype.reposition=function(e,i,r,n){var s,o,l;if(i){a.N_M(14),s=-a.c0C("1127652126",0),o=1278312784,l=2;for(var h=1;a.S9Y(h.toString(),h.toString().length,54347)!==s;h++)t.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust(),a.N_M(5),l+=a.a$j(1,"2");a.f3X(),a.O1W(l.toString(),l.toString().length,84820)!==o&&(t.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())}},t.Drawing.fibonacci.prototype.intersected=function(e,i,r){var n,s,o,l,h,c;if("s","egme","nt",n=this.p0,s=this.p1,!n||!s)return null;for(var u in o={0:n,1:s})if(this.pointIntersection(o[u][0],o[u][1],r))return a.j7J(1),this.highlighted=a.c0C("p",u),{action:"drag",point:"p"+u};if(a.T$X(),l=this.outer,h=this.rays,!(c=l&&this.lineIntersection(e,i,r,"segment",l.p0,l.p1)))for(var d=0;d<h.length;d++)if(this.lineIntersection(e,i,r,"ray",h[d][0],h[d][1],!0)){c=!0;break}return c?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):null},t.Drawing.fibonacci.prototype.reconstruct=function(e,i){i=t.replaceFields(i,t.reverseObject(t.Drawing.fibonacci.mapping)),this.stx=e,this.parameters=i.parameters,this.parameters||(this.parameters=t.clone(this.stx.currentVectorParameters.fibonacci)),this.color=i.col,this.fillColor=i.fc,this.panelName=i.pnl,this.d0=i.d0,this.d1=i.d1,this.d2=i.d2,this.tzo0=i.tzo0,this.tzo1=i.tzo1,this.tzo2=i.tzo2,this.v0=i.v0,this.v1=i.v1,this.v2=i.v2,a.T$X(),this.adjust()},t.Drawing.fibonacci.prototype.adjust=function(){var e;a.T$X(),(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setOuter())},t.Drawing.fibonacci.prototype.serialize=function(){var e;return a.f3X(),e={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2},t.replaceFields(e,t.Drawing.fibonacci.mapping)},t.Drawing.retracement=function(){a.T$X(),this.name="retracement"},t.inheritsFrom(t.Drawing.retracement,t.Drawing.fibonacci),t.Drawing.fibprojection=function(){a.f3X(),this.name="fibprojection",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.fibprojection,t.Drawing.fibonacci),t.Drawing.fibprojection.prototype.recommendedLevels=[0,.618,1,1.272,1.618,2.618,4.236],t.Drawing.fibprojection.prototype.click=function(e,i,a){var r;if(r=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(i,a)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],r.chart),this.parameters=t.clone(this.parameters),!0):(this.setPoint(1,i,a,r.chart),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,i,a,r.chart),this.penDown=!0,!1)},t.Drawing.fibprojection.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P;if("1","6",a.f3X(),"1.8%",(i=this.stx.panels[this.panelName])&&(r=i.yAxis,this.p1)){a.j7J(18);var F=a.a$j(27,10,20,14);a.j7J(21);var L=a.a$j(261,20,13);n=this.p1["1"*F]-this.p0[L],s=this.stx.pixelFromTick(this.p0[0],i.chart),-65720527,-2019386272,o=2;for(var E=1;-65720527!==a.O1W(E.toString(),E.toString().length,72157);E++)l=this.stx.pixelFromTick(this.p1[6],i.chart),o+=2;-2019386272!==a.O1W(o.toString(),o.toString().length,48866)&&(l=this.stx.pixelFromTick(this.p1[3],i.chart)),l=this.stx.pixelFromTick(this.p1[0],i.chart),h=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),c=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),u=null,d=null,this.p2&&(u=this.stx.pixelFromTick(this.p2[0],i.chart),d=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1])),p={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=p),m=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),a.j7J(15);var N=a.a$j(6,15,11);if(g=e.measureText("161.8%").width+N,("auto"==(f=this.color)||t.isTransparent(f))&&(f=this.stx.defaultColor),this.p2){this.rays=[];for(var H=0;H<this.parameters.fibs.length;H++)if("se","gme","nt",e.textAlign="left",e.fillStyle=f,(y=this.parameters.fibs[H]).display){if(v=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1]+n*y.level),x=t.xIntersection({x0:s,x1:l,y0:h,y1:c},v),b=this.parameters.extendLeft?0:s,C=i.left+i.width,this.parameters.printLevels){a.N_M(56);var I=a.a$j(11,1,1,20);a.N_M(57);var j=a.c0C(95500,20,10,4,480);a.N_M(1);var O=a.a$j(3,29);S=Math.round(1e3*y.level)/I+(7517>j?"%":"6.89e+3"<<O),C-=g,this.parameters.printValues&&("stx_y","a","xis",e.fillStyle=f,this.stx.canvasFont("stx_yaxis",e)),C<b&&(e.textAlign="right"),e.fillText(S,C,v),C<b?C+=5:C-=5}this.parameters.printValues&&x<i.width&&(w=this.stx.transformedPriceFromPixel(v,i),w=r.priceFormatter?r.priceFormatter(this.stx,i,w):this.stx.formatYAxisPrice(w,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,w,v,f,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(D=y.color)||t.isTransparent(D))&&(D=this.color),("auto"==D||t.isTransparent(D))&&(D=this.stx.defaultColor),("auto"==(k=y.color)||t.isTransparent(k))&&(k=this.fillColor),("auto"==k||t.isTransparent(k))&&(k=this.stx.defaultColor),e.fillStyle=k,M=t.clone(y.parameters),this.highlighted&&(M.opacity=1),this.stx.plotLine(b,C,v,v,this.highlighted?m:D,"segment",e,i,M),this.rays.push([[b,v],[C,v]]),a.N_M(5),e.globalAlpha=a.a$j(1,"0.05"),e.beginPath(),e.moveTo(C,v),e.lineTo(b,v),b?e.lineTo(s,d):e.lineTo(b,d),e.lineTo(C,d),void 0!==k&&e.fill(),e.globalAlpha=1}}T=t.clone(this.parameters.trend.parameters),this.highlighted&&(T.opacity=1),this.stx.plotLine(s,l,h,c,m,"segment",e,i,T),this.p2&&this.stx.plotLine(l,u,c,d,m,"segment",e,i,T),this.highlighted&&("p","2",A="p0"==this.highlighted,_="p1"==this.highlighted,P="p2"==this.highlighted,this.littleCircle(e,s,h,A),this.littleCircle(e,l,c,_),this.littleCircle(e,u,d,P))}},t.Drawing.fibprojection.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],this.render(e))},t.Drawing.fibprojection.prototype.reposition=function(e,t,i,r){var n,s,o;t&&(a.f3X(),n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,"move"==t.action?(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.setPoint(1,t.p1[0]-s,t.p1[1]-o,n.chart),this.setPoint(2,t.p2[0]-s,t.p2[1]-o,n.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,r],this.setPoint(0,this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),a.j7J(46),this.setPoint(a.c0C("2",0),this.p2[0],this.p2[1],n.chart),this.render(e)))},t.Drawing.fibprojection.prototype.intersected=function(e,i,r){var n,s,o,l,h,c,u;n=this.p0,s=this.p1,o=this.p2,l=2;for(var d=1;-1491408712!==a.S9Y(d.toString(),d.toString().length,50528);d++){if(~n&&-s&&~o)return 1;l+=2}if(!(125374011===a.S9Y(l.toString(),l.toString().length,98777)||n&&s&&o))return null;for(var p in h={0:n,1:s,2:o},a.f3X(),h)if(this.pointIntersection(h[p][0],h[p][1],r))return a.N_M(1),this.highlighted=a.c0C("p",p),{action:"drag",point:"p"+p};if(c=this.rays,!(u=this.lineIntersection(e,i,r,"segment",n,s)||this.lineIntersection(e,i,r,"segment",s,o)))for(var m=0;m<c.length;m++)if("r","a","y",this.lineIntersection(e,i,r,"ray",c[m][0],c[m][1],!0)){u=!0;break}return u?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),p2:t.clone(o),tick:e,value:i}):null},t.Drawing.fibprojection.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(a.f3X(),a.j7J(4),this.setPoint(a.a$j("0",0),this.d0,this.v0,e.chart),a.N_M(31),this.setPoint(a.c0C("1",96),this.d1,this.v1,e.chart),this.setPoint(2,this.d2,this.v2,e.chart))},t.Drawing.fibarc=function(){this.name="fibarc",a.f3X()},t.inheritsFrom(t.Drawing.fibarc,t.Drawing.fibonacci),t.Drawing.fibarc.prototype.recommendedLevels=[.382,.5,.618,1],t.Drawing.fibarc.prototype.setOuter=function(){var e,i,r,n,s,o,l;(e=this.stx.panels[this.panelName])&&(a.T$X(),this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},i=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),r=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),n=this.stx.pixelFromTick(this.p0[0],e.chart),s=this.stx.pixelFromTick(this.p1[0],e.chart),a.j7J(58),o=a.c0C(r,i,0,"2"),l=t.xIntersection({x0:n,x1:s,y0:i,y1:r},o),this.outer.p0[1]=this.stx.valueFromPixel(o,e),this.outer.p0[0]=this.stx.tickFromPixel(l,e.chart))},t.Drawing.fibarc.prototype.intersected=function(e,i,r){var n,s,o,l,h,c,u,d,p,m;if("s","e","gme","nt",n=this.stx.panels[this.panelName]){if(s=this.p0,o=this.p1,l=this.outer,!s||!o)return null;for(var g in h={0:s,1:o})if(this.pointIntersection(h[g][0],h[g][1],r))return a.j7J(1),this.highlighted=a.c0C("p",g),{action:"drag",point:"p"+g};return this.lineIntersection(e,i,r,"segment",l.p0,l.p1)?(this.highlighted=!0,{action:"move",p0:t.clone(s),p1:t.clone(o),tick:e,value:i}):(c={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},u=t.convertBoxToPixels(this.stx,this.panelName,c),d={x:Math.abs(Math.sqrt(2)*(u.x1-u.x0)),y:Math.abs(Math.sqrt(2)*(u.y1-u.y0))},p=this.stx.pixelFromTick(e,n.chart),m=this.stx.pixelFromValueAdjusted(n,e,i),p+r.r<u.x1-d.x||p-r.r>u.x1+d.x||m+r.r<u.y1-d.y||m-r.r>u.y1+d.y||u.y0<u.y1&&m-r.r>u.y1||u.y0>u.y1&&m+r.r<u.y1?null:(this.highlighted=!0,a.f3X(),{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))}},t.Drawing.fibarc.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D;if(a.f3X(),"lef","t",(i=this.stx.panels[this.panelName])&&(r=i.yAxis,this.p1)){n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),a.j7J(59),h=a.a$j(l,o),a.j7J(60),c=Math.abs(a.a$j(s,n,o,l)),u=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),("auto"==(d=this.color)||t.isTransparent(d))&&(d=this.stx.defaultColor);for(var k=0;k<this.parameters.fibs.length;k++)if("a","u","to",e.fillStyle=d,!((p=this.parameters.fibs[k]).level<0)&&p.display){a.j7J(9);var M=a.a$j(152,17,9);a.j7J(27);var T=a.a$j(17,16);a.N_M(61);var A=a.c0C(6,6,1);m=Math.abs(this.p1[M]-this.p0[T])*Math.sqrt(A)*p.level,a.N_M(55);var _=a.a$j(13,11,12,11);a.N_M(62);var P=a.a$j(5,14,2,8);a.N_M(63);var F=a.c0C(2,6,9);a.N_M(51);var L=a.c0C(7,9,5,3);a.j7J(35);var E=a.a$j(1,20,10);if(g=this.p1[_]+m*(h?P:F)*(r.flipped?L:E),f=this.stx.pixelFromValueAdjusted(i,this.p0[0],g),y=t.xIntersection({x0:n,x1:s,y0:o,y1:l},f),this.parameters.printLevels){"ce","nter",e.textAlign="center",a.N_M(3);var N=a.c0C(18,11,1007);a.j7J(61);var H=a.a$j(200,200,9);a.j7J(1);var I=a.c0C(9931,9);a.N_M(64);a.c0C(1,5,1545773,13,119613);v=Math.round(p.level*N)/H+(679.16==I?608.63:"%"),this.parameters.printValues&&("stx_ya","x","is",e.fillStyle=d,this.stx.canvasFont("stx_yaxis",e)),e.fillText(v,s,Math.round(f-5))}e.textAlign="left",this.parameters.printValues&&y<i.width&&(x=g,x=r.priceFormatter?r.priceFormatter(this.stx,i,x):this.stx.formatYAxisPrice(x,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,x,f,d,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(b=p.color)||t.isTransparent(b))&&(b=this.color),("auto"==b||t.isTransparent(b))&&(b=this.stx.defaultColor),e.strokeStyle=this.highlight?u:b,("auto"==(C=p.color)||t.isTransparent(C))&&(C=this.fillColor),("auto"==C||t.isTransparent(C))&&(C=this.stx.defaultColor),e.fillStyle=C,e.globalAlpha=this.highlighted?1:p.parameters.opacity,e.lineWidth=p.parameters.lineWidth,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(e.lineWidth,p.parameters.pattern)),e.lineDashOffset=0),e.save(),e.beginPath(),a.N_M(7),e.scale(a.c0C(1,c),1),a.j7J(5),e.arc(a.a$j(c,s),l,Math.abs(f-l),0,Math.PI,!h),"none"!=this.pattern&&e.stroke(),a.j7J(5),e.globalAlpha=a.a$j(1,"0.05"),e.fill(),e.restore(),e.setLineDash&&e.setLineDash([]),e.globalAlpha=1}e.textAlign="left",S=t.clone(this.parameters.trend.parameters),this.highlighted&&(S.opacity=1),a.N_M(9),this.stx.plotLine(s,a.a$j(s,n,2),l,a.c0C(l,o,2),u,"segment",e,i,S),this.highlighted&&("p","1",w="p0"==this.highlighted,D="p1"==this.highlighted,this.littleCircle(e,n,o,w),this.littleCircle(e,s,l,D))}},t.Drawing.fibfan=function(){this.name="fibfan"},t.inheritsFrom(t.Drawing.fibfan,t.Drawing.fibonacci),t.Drawing.fibfan.prototype.recommendedLevels=[0,.382,.5,.618,1],t.Drawing.fibfan.prototype.setOuter=function(){},t.Drawing.fibfan.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P;if((i=this.stx.panels[this.panelName])&&(r=i.yAxis,this.p1)){n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),h=Math.min(l,o),c=Math.max(l,o),a.j7J(14),u=a.c0C(c,h),a.j7J(65),d=a.a$j(n,"0",o,s,l,0),p=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),a.N_M(66);var F=a.a$j(2,17,12,21);m=e.measureText("161.8%").width+F,g=Number.MAX_VALUE,a.N_M(63);var L=a.a$j(5,155,192);f=Number.MAX_VALUE*-("1"<<L),("auto"==(y=this.color)||t.isTransparent(y))&&(y=this.stx.defaultColor),this.rays=[];for(var E=0;E<this.parameters.fibs.length;E++)if("aut","o",e.fillStyle=y,(v=this.parameters.fibs[E]).display&&(x=this.stx.pixelFromValueAdjusted(i,this.p0[0],(this.p0[1]-this.p1[1])*v.level+this.p1[1]),b=t.xIntersection({x0:s,x1:s,y0:o,y1:l},x),C=i.left,s>n&&(C+=i.width),a.j7J(67),S=a.a$j(n,n,b,C,o,o,x),!(n>C-(this.parameters.printLevels?m+5:0)&&s>n||n<C+(this.parameters.printLevels?m+5:0)&&s<n))){if(this.parameters.printLevels){a.N_M(9);var N=a.a$j(9020,10,1002);w=Math.round(v.level*N)/10+"%",s>n?(C-=m,e.textAlign="left"):(C+=m,e.textAlign="right"),this.parameters.printValues&&(e.fillStyle=y,this.stx.canvasFont("stx_yaxis",e)),a.N_M(67),S=a.a$j(n,n,b,C,o,o,x),e.fillText(w,C,S),s>n?C-=5:C+=5}e.textAlign="left",this.parameters.printValues&&b<i.width&&(D=this.stx.transformedPriceFromPixel(x,i),D=r.priceFormatter?r.priceFormatter(this.stx,i,D):this.stx.formatYAxisPrice(D,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,D,x,y,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(k=v.color)||t.isTransparent(k))&&(k=this.color),("auto"==k||t.isTransparent(k))&&(k=this.stx.defaultColor),("auto"==(M=v.color)||t.isTransparent(M))&&(M=this.fillColor),("auto"==M||t.isTransparent(M))&&(M=this.stx.defaultColor),e.fillStyle=M,this.parameters.printLevels&&(a.N_M(67),S=a.a$j(n,n,b,C,o,o,x)),T=t.clone(v.parameters),this.highlighted&&(T.opacity=1),this.stx.plotLine(n,C,o,S,this.highlighted?p:k,"segment",e,i,T),this.rays.push([[n,o],[C,S]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(C,S),e.lineTo(n,o),e.lineTo(C,o),e.fill(),e.globalAlpha=1,x<g&&(g=x),x>f&&(f=x)}for(var H=0;H<=1;H++)A=d?c-u*H:h+u*H,(A=Math.round(A))<g&&(g=A),A>f&&(f=A);this.highlighted&&("p","1","p","0",_="p0"==this.highlighted,P="p1"==this.highlighted,this.littleCircle(e,n,o,_),this.littleCircle(e,s,l,P))}},t.Drawing.fibtimezone=function(){this.name="fibtimezone"},t.inheritsFrom(t.Drawing.fibtimezone,t.Drawing.fibonacci),t.Drawing.fibtimezone.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S;if("segmen","t","l","e","f","t","au","to","mi","dd","l","e",(i=this.stx.panels[this.panelName])&&this.p1){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),a.T$X(),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=[1,0],h=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),a.N_M(14),c=a.c0C("20",0),u=this.p1[0]-this.p0[0],("auto"==(d=this.color)||t.isTransparent(d))&&(d=this.stx.defaultColor),e.textAlign="center",p=r,m=i.yAxis.top,g=i.yAxis.bottom,f=0,("auto"==(y=this.parameters.timezone.color)||t.isTransparent(y))&&(y=this.color),("auto"==y||t.isTransparent(y))&&(y=this.stx.defaultColor),("auto"==(v=this.parameters.timezone.color)||t.isTransparent(v))&&(v=this.fillColor),("auto"==v||t.isTransparent(v))&&(v=this.stx.defaultColor),this.parameters.printLevels&&(a.j7J(14),g-=a.a$j(c,7)),x=t.clone(this.parameters.timezone.parameters),this.highlighted&&(x.opacity=1);do{if(p=this.stx.pixelFromTick(this.p0[0]+f*u,i.chart),r<n&&p>i.left+i.width)break;if(r>n&&p<i.left)break;this.parameters.printLevels&&(e.fillStyle=d,e.fillText(n>r?f:-1*f,p,g+7)),e.fillStyle=v,this.stx.plotLine(p,p,0,g,this.highlighted?h:y,"segment",e,i,x),e.globalAlpha=.05,e.beginPath(),e.moveTo(r,m),e.lineTo(p,m),e.lineTo(p,g),e.lineTo(r,g),e.fill(),e.globalAlpha=1,a.j7J(68);var w=a.a$j(3,8,0,16);f=l[0]+l[w],l.unshift(f)}while(u);e.textAlign="left",this.stx.plotLine(r,n,s,o,h,"segment",e,i,x),this.highlighted?(b="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(e,r,s,b),this.littleCircle(e,n,o,C)):(S=this.stx.valueFromPixel(i.height/2,i),this.setPoint(0,this.p0[0],S,i.chart),a.j7J(29),this.setPoint(a.a$j(0,"1"),this.p1[0],S,i.chart))}},t.Drawing.fibtimezone.prototype.intersected=function(e,i,r){var n,s,o,l;if(n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],r))return"d","r","a","g",a.N_M(1),this.highlighted=a.a$j("p",h),{action:"drag",point:"p"+h};return this.lineIntersection(e,i,r,"segment")||r.x0<=this.p0[0]&&r.x1>=n[0]?("m","o","v","e",this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):null},t.Drawing.arrow_v0=function(){this.name="arrow",this.dimension=[11,11],a.j7J(29),this.points=[["M",3,0,"L",7,0,"L",7,5,"L",10,5,"L",5,10,"L",0,5,"L",a.a$j(32,"3"),5,"L",3,0]]},t.inheritsFrom(t.Drawing.arrow_v0,t.Drawing.shape),t.Drawing.xcross=function(){this.name="xcross",this.dimension=[7,7],a.N_M(5),this.points=[["M",1,0,"L",3,2,"L",5,0,"L",a.c0C(1,"6"),1,"L",4,a.a$j(1,"3"),"L",6,5,"L",5,6,"L",3,4,"L",1,6,"L",0,5,"L",2,3,"L",0,1,"L",1,0]]},t.inheritsFrom(t.Drawing.xcross,t.Drawing.shape),t.Drawing.check=function(){this.name="check",this.dimension=[8,9],a.j7J(31),this.points=[["M",1,5,"L",0,6,"L",2,a.a$j("8",32),"L",7,1,"L",6,0,"L",2,6,"L",1,5]]},t.inheritsFrom(t.Drawing.check,t.Drawing.shape),t.Drawing.star=function(){a.f3X(),this.name="star",this.dimension=[12,12],a.j7J(5),this.points=[["M",0,4,"L",a.a$j(1,"4"),4,"L",5.5,0,"L",7,4,"L",11,4,"L",8,7,"L",a.a$j("9",64,a.j7J(31)),11,"L",5.5,9,"L",2,11,"L",3,7,"L",0,4]]},t.inheritsFrom(t.Drawing.star,t.Drawing.shape),t.Drawing.heart=function(){this.name="heart",this.dimension=[23,20],a.f3X(),a.N_M(4),this.points=[["M",11,3,"B",11,2.4,10,0,6,0,"B",0,a.c0C("0",0),0,7.5,0,7.5,"B",0,a.a$j(0,"11",a.N_M(29)),4,a.c0C("15.4",0,a.j7J(14)),11,19,"B",18,15.4,22,11,22,7.5,"B",a.c0C("22",32,a.j7J(31)),7.5,22,0,a.a$j("16",0,a.j7J(14)),0,"B",13,0,11,a.a$j(1,"2.4",a.N_M(5)),11,3]]},t.inheritsFrom(t.Drawing.heart,t.Drawing.shape),t.Drawing.focusarrow=function(){this.name="focusarrow",this.dimension=[7,5],a.j7J(5),this.points=[["M",0,a.a$j(1,"0"),"L",2,2,"L",0,4,"L",0,0],["M",a.a$j("6",64,a.N_M(31)),a.c0C("0",64,a.N_M(31)),"L",4,2,"L",6,4,"L",6,a.c0C("0",0,a.j7J(14))]]},t.inheritsFrom(t.Drawing.focusarrow,t.Drawing.shape),t.Drawing.crossline=function(){this.name="crossline"},t.inheritsFrom(t.Drawing.crossline,t.Drawing.horizontal),t.extend(t.Drawing.crossline.prototype,{measure:function(){},accidentalClick:function(e,t){return a.T$X(),!1},adjust:function(){var e;(e=this.stx.panels[this.panelName])&&(a.f3X(),this.setPoint(0,this.d0,this.v0,e.chart),this.p1=t.clone(this.p0))},intersected:function(e,i,r){var n;return"l","in","e",this.p0&&this.p1?(this.p1[0]+=1,n=this.lineIntersection(e,i,r,"line"),this.p1=t.clone(this.p0),n||("lin","e",a.j7J(31),this.p1[1]+=a.a$j("1",64),n=this.lineIntersection(e,i,r,"line"),this.p1=t.clone(this.p0),n)?(this.highlighted=!0,a.f3X(),this.pointIntersection(this.p0[0],this.p0[1],r)&&(this.highlighted="p0"),{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null):null},render:function(e){var r,n,s,o,l,h,c,u,d,p,m,g;if(r=this.stx.panels[this.panelName]){if(n=this.stx.pixelFromTick(this.p0[0],r.chart),s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),o=this.getLineColor(),l={pattern:this.pattern,lineWidth:this.lineWidth},a.N_M(1),this.stx.plotLine(n,a.a$j(n,100),s,s,o,"horizontal",e,r,l),a.j7J(1),this.stx.plotLine(n,n,s,a.c0C(s,100),o,"vertical",e,r,l),this.axisLabel&&!this.repositioner&&(this.stx.endClip(),h=this.p0[1],r.chart.transformFunc&&(h=r.chart.transformFunc(this.stx,r.chart,h)),h=r.yAxis.priceFormatter?r.yAxis.priceFormatter(this.stx,r,h):this.stx.formatYAxisPrice(h,r),this.stx.createYAxisLabel(r,h,s,o),this.stx.startClip(r.name),this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw)){if(c=this.stx.dateFromTick(this.p0[0],r.chart,!0),t.ChartEngine.isDailyInterval(this.stx.layout.interval))c.setHours(0,0,0,0);else{a.j7J(69);var f=a.a$j(882,59,2);d=c.getSeconds()*f+c.getMilliseconds(),i.Date&&this.stx.displayZone&&(u=new i.Date(c.getTime(),this.stx.displayZone),c=new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes()),c=new Date(c.getTime()+d))}p=t.mmddhhmm(t.yyyymmddhhmm(c)),r.chart.xAxis.formatter?p=r.chart.xAxis.formatter(c,this.name,null,null,p):this.stx.internationalizer&&(0!==c.getHours()||0!==c.getMinutes()?(m=this.stx.internationalizer.monthDay.format(c),m+=" "+this.stx.internationalizer.hourMinute.format(c)):m=this.stx.internationalizer.yearMonthDay.format(c),p=m),this.stx.endClip(),this.stx.createXAxisLabel({panel:r,txt:p,x:n,backgroundColor:o,color:null,pointed:!0,padding:2}),this.stx.startClip(r.name)}this.highlighted&&(g="p0"==this.highlighted,this.littleCircle(e,n,s,g))}}},!0),t.Drawing.speedarc=function(){this.name="speedarc",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedarc,t.Drawing.segment),t.extend(t.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},intersected:function(e,i,r){var n,s,o,l,h;if(!this.p0||!this.p1)return null;for(var c in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[c][0],n[c][1],r))return"dr","a","g",a.N_M(1),this.highlighted=a.a$j("p",c),{action:"drag",point:"p"+c};return this.lineIntersection(e,i,r,this.name)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):(s=this.p1[0]-(this.p0[0]-this.p1[0]),o=this.p0[0],l=this.p1[1],h=this.p0[1],e>Math.max(s,o)||e<Math.min(s,o)||i>Math.max(h,l)||i<Math.min(h,l)?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if("stx_","ya","xi","s",(i=this.stx.panels[this.panelName])&&this.p1){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),a.N_M(59),l=a.c0C(o,s),a.j7J(60),h=Math.abs(a.a$j(n,r,s,o)),c=this.getLineColor(),e.strokeStyle=c,("auto"==(u=this.fillColor)||t.isTransparent(u))&&(u=this.stx.defaultColor),e.fillStyle=u,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(this.lineWidth,this.pattern)),e.lineDashOffset=0),a.f3X(),this.stx.canvasFont("stx_yaxis",e);for(var x=1;x<3;x++){a.j7J(9);var b=a.a$j(379,20,19);a.j7J(70);var C=a.a$j(6,15,4,10,12);d=Math.abs(this.p1[1]-this.p0[b])*Math.sqrt(2)*x/C,a.j7J(14);var S=a.c0C(15,14);a.j7J(14);var w=a.a$j(17,18);a.j7J(0);var D=a.c0C(93,10,8,13);a.j7J(71);var k=a.a$j(16,1281,4,0,20);a.j7J(72);var M=a.a$j(5,211,4,10,3);p=this.p1[S]+d*(l?w:D)*(i.yAxis.flipped?-1*k:M),m=this.stx.pixelFromValueAdjusted(i,this.p0[0],p),e.save(),e.beginPath(),a.N_M(7),e.scale(a.c0C(1,h),1),a.j7J(5),e.arc(a.a$j(h,n),o,Math.abs(m-o),0,Math.PI,!l),e.globalAlpha=this.highlighted?1:this.defaultOpacity,"none"!=this.pattern&&e.stroke(),e.globalAlpha=.1,e.fill(),e.restore(),e.globalAlpha=1,this.printLevels&&(e.fillStyle=c,e.textAlign="center",a.N_M(1),g=a.a$j(x,"/3"),e.fillText(g,n,Math.round(m-5)),e.fillStyle=u)}e.textAlign="left",f={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},this.stx.plotLine(r,n,s,o,c,"segment",e,i,f),e.setLineDash&&e.setLineDash([]),this.highlighted&&(y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(e,r,s,y),this.littleCircle(e,n,o,v))}},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,a.f3X(),this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},serialize:function(){return a.f3X(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}}},!0),t.Drawing.speedline=function(){a.f3X(),this.name="speedline",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedline,t.Drawing.speedarc),t.extend(t.Drawing.speedline.prototype,{intersected:function(e,i,r){var n,s,o,l;if(n=this.p0,s=this.p1,!n||!s)return null;for(var h in o={0:n,1:s})if(this.pointIntersection(o[h][0],o[h][1],r))return a.N_M(1),this.highlighted=a.c0C("p",h),{action:"drag",point:"p"+h};l=this.rays;for(var c=0;c<l.length;c++)if(this.lineIntersection(e,i,r,"ray",l[c][0],l[c][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i};return null},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k;if("3","/","2","au","to",(i=this.stx.panels[this.panelName])&&this.p1){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",e),l=this.getLineColor(),("auto"==(h=this.color)||t.isTransparent(h))&&(h=this.stx.defaultColor),e.strokeStyle=h,("auto"==(c=this.fillColor)||t.isTransparent(c))&&(c=this.stx.defaultColor),e.fillStyle=c,u={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},m=["1","2/3","1/3","3/2","3"],a.N_M(7),g=[1,a.c0C(2,3),a.c0C(1,3),a.c0C(3,2),3],f=[],this.rays=[];for(var M=0;M<g.length;M++)"se","gment",(y=g[M])>1&&!this.extension||(v=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*y),y>1?(x=t.xIntersection({x0:r,x1:n,y0:s,y1:v},o),f.push(x)):(x=t.xIntersection({x0:n,x1:n,y0:s,y1:o},v),f.push(v)),b=y>1?x:n,C=y>1?o:v,this.confineToGrid||(b=i.left,n>r&&(b+=i.width),a.j7J(67),C=a.c0C(r,r,n,b,s,s,v)),this.printLevels&&(1!=y||this.extension)&&(e.fillStyle=h,a.j7J(29),S=a.a$j(0,"0"),a.j7J(4),w=a.c0C("0",0),s>o?(w=-5,e.textBaseline="bottom"):(w=5,e.textBaseline="top"),r>n?(S=5,e.textAlign="right"):(S=-5,e.textAlign="left"),y>1?e.fillText(m[M],x+(this.confineToGrid?0:S),o):e.fillText(m[M],n,v+(this.confineToGrid?0:w)),e.fillStyle=c),this.stx.plotLine(r,b,s,C,this.highlighted?l:h,"segment",e,i,u),1==y&&(d=b,p=C),this.rays.push([[r,s],[b,C]]),a.j7J(5),e.globalAlpha=a.c0C(1,"0.1"),e.beginPath(),e.moveTo(b,C),e.lineTo(r,s),e.lineTo(d,p),e.fill(),e.globalAlpha=1);e.textAlign="left",e.textBaseline="middle",this.confineToGrid&&(e.globalAlpha=.3,e.beginPath(),a.j7J(14),e.strokeRect(r,s,a.c0C(n,r),a.a$j(o,s)),e.moveTo(r,f[1]),e.lineTo(n,f[1]),e.moveTo(r,f[2]),e.lineTo(n,f[2]),this.extension&&(e.moveTo(f[3],s),e.lineTo(f[3],o),e.moveTo(f[4],s),e.lineTo(f[4],o)),e.stroke(),e.globalAlpha=1),this.highlighted&&("p","1",D="p0"==this.highlighted,k="p1"==this.highlighted,this.littleCircle(e,r,s,D),this.littleCircle(e,n,o,k))}}},!0),t.Drawing.gannfan=function(){this.name="gannfan",a.f3X(),this.printLevels=!0},t.inheritsFrom(t.Drawing.gannfan,t.Drawing.speedline),t.extend(t.Drawing.gannfan.prototype,{render:function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w;if("m","i","ddle","a","uto","s","tx","_","yaxis",(i=this.stx.panels[this.panelName])&&this.p1){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",e),l=this.getLineColor(),a.T$X(),("auto"==(h=this.color)||t.isTransparent(h))&&(h=this.stx.defaultColor),e.strokeStyle=h,("auto"==(c=this.fillColor)||t.isTransparent(c))&&(c=this.stx.defaultColor),e.fillStyle=c,u={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},a.N_M(7),m=[1,2,3,4,8,a.a$j(1,2),a.c0C("1","3",32,1,a.j7J(73)),a.c0C(1,4,a.N_M(7)),a.c0C("1",8,a.N_M(74))],this.rays=[];for(var D=0;D<m.length;D++)g=m[D],a.N_M(75),f=a.c0C(r,n,g,r),a.j7J(76),y=a.c0C(s,s,o,g),v=i.left,n>r&&(v+=i.width),a.N_M(67),x=a.c0C(r,r,n,v,s,s,y),this.printLevels&&(e.fillStyle=h,b=0,a.N_M(46),C=a.c0C("0",0),s>o?(a.N_M(14),C=a.a$j("5",0),e.textBaseline="top"):(C=-5,e.textBaseline="bottom"),r>n?(a.j7J(14),b=a.c0C("5",0),e.textAlign="left"):("ri","ght",b=-5,e.textAlign="right"),g>1?(a.j7J(1),e.fillText(a.c0C(g,"x1"),a.c0C(f,b),o)):(a.j7J(75),e.fillText(a.c0C(0,"1",g,"1x"),n,a.a$j(y,C,a.N_M(1)))),e.fillStyle=c),this.stx.plotLine(r,v,s,x,this.highlighted?l:h,"segment",e,i,u),this.rays.push([[r,s],[v,x]]),1==g&&(d=v,p=x),e.globalAlpha=.1,e.beginPath(),e.moveTo(v,x),e.lineTo(r,s),e.lineTo(d,p),e.fill(),e.globalAlpha=1;e.textAlign="left",e.textBaseline="middle",this.highlighted&&(S="p0"==this.highlighted,w="p1"==this.highlighted,this.littleCircle(e,r,s,S),this.littleCircle(e,n,o,w))}}},!0),t.Drawing.timecycle=function(){this.name="timecycle",this.printLevels=!0},t.inheritsFrom(t.Drawing.timecycle,t.Drawing.speedarc),t.extend(t.Drawing.timecycle.prototype,{intersected:function(e,i,r){var n,s,o,l;if("se","g","me","nt",n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],r))return a.N_M(1),this.highlighted=a.c0C("p",h),{action:"drag",point:"p"+h};return this.lineIntersection(e,i,r,"segment")||r.x0<=this.p0[0]&&r.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):null},render:function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S;if("a","u","t","o","c","e","nt","er","m","i","ddl","e",(i=this.stx.panels[this.panelName])&&this.p1){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=0,h=this.getLineColor(),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),a.j7J(46),c=a.c0C("20",0),u=this.p1[0]-this.p0[0],e.textAlign="center",d=r,p=i.yAxis.top,m=i.yAxis.bottom,("auto"==(g=this.color)||t.isTransparent(g))&&(g=this.stx.defaultColor),("auto"==(f=this.fillColor)||t.isTransparent(f))&&(f=this.stx.defaultColor),this.printLevels&&(a.j7J(14),m-=a.c0C(c,7)),y={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},v=[],e.save(),e.fillStyle=f,e.globalAlpha=.05;do{if(d=this.stx.pixelFromTick(this.p0[0]+l*u,i.chart),l++,r<n&&d>i.left+i.width)break;if(r>n&&d<i.left)break;d<i.left||d>i.left+i.width||(e.beginPath(),e.moveTo(r,p),e.lineTo(d,p),e.lineTo(d,m),e.lineTo(r,m),e.fill(),v.push({c:l,x:d}))}while(u);e.globalAlpha=1,x=0;for(var w=0;w<v.length;w++)if(this.stx.plotLine(v[w].x,v[w].x,0,m,this.highlighted?h:g,"segment",e,i,y),this.printLevels){e.fillStyle=g,a.j7J(14);var D=a.a$j(41,9);this.stx.chart.context.measureText(v[w].c).width+("3"<<D)<this.stx.layout.candleWidth+x?(e.fillText(v[w].c,v[w].x,m+7),x=0):x+=this.stx.layout.candleWidth}e.restore(),e.textAlign="left",this.stx.plotLine(r,n,s,o,h,"segment",e,i,y),this.highlighted?(b="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(e,r,s,b),this.littleCircle(e,n,o,C)):(S=this.stx.valueFromPixel(i.height/2,i),this.setPoint(0,this.p0[0],S,i.chart),this.setPoint(1,this.p1[0],S,i.chart))}}},!0),t.Drawing.regression=function(){a.f3X(),this.name="regression"},t.inheritsFrom(t.Drawing.regression,t.Drawing.segment),t.extend(t.Drawing.regression.prototype,{configs:["color","lineWidth","pattern","active1","color1","lineWidth1","pattern1","active2","color2","lineWidth2","pattern2","active3","color3","lineWidth3","pattern3"],copyConfig:function(e){var i;t.Drawing.copyConfig(this,e),i=this.stx.currentVectorParameters,this.active1=!!i.active1,this.active2=!!i.active2,this.active3=!!i.active3,this.color1=i.color1||"auto",this.color2=i.color2||"auto",this.color3=i.color3||"auto",this.lineWidth1=i.lineWidth1,this.lineWidth2=i.lineWidth2,this.lineWidth3=i.lineWidth3,this.pattern1=i.pattern1,this.pattern2=i.pattern2,this.pattern3=i.pattern3},$controls:['cq-cvp-controller[cq-cvp-header="1"]','cq-cvp-controller[cq-cvp-header="2"]','cq-cvp-controller[cq-cvp-header="3"]'],click:function(e,t,i){var r,n,s,o;if(!(t<0)){if(this.copyConfig(),r=this.stx.panels[this.panelName],!this.penDown){if(this.setPoint(0,t,i,r.chart),this.penDown=!0,n=this.stx,this.field=n.highlightedDataSetField,!this.field&&r!=n.chart.panel){for(var l in n.chart.seriesRenderers)if((s=n.chart.seriesRenderers[l]).params.panel==r.name){this.field=s.seriesParams[0].field;break}for(var h in n.layout.studies)if((o=n.layout.studies[h]).panel==r.name){this.field=Object.keys(o.outputMap)[0];break}}return!1}return this.accidentalClick(t,i)?this.dragToDraw:(a.T$X(),this.setPoint(1,t,i,r.chart),this.penDown=!1,!0)}},getYValue:function(e){var i,a,r,n,s,o,l;if("Cl","ose",i=this.stx.chart.dataSet[e],a=this.stx.chart.dataSet[e],!i)return null;if(r=this.stx.panels[this.panelName],n=this.stx.getYAxisByField(r,this.field)||r.yAxis,this.stx.charts[r.name]&&r.chart.transformFunc&&n==r.yAxis&&(a=i.transform),!a)return null;if(s=null,o=null,l=this.stx.defaultPlotField||"Close",this.field){if(!(o=t.existsInObjectChain(a,this.field)))return null;s=o=o.obj[o.member],i!=a&&(s=(s=t.existsInObjectChain(i,this.field)).obj[s.member]),"object"==typeof o&&(o=o[l],s=s[l])}else o=a[l],s=i[l];return{transformed:o,untransformed:s}},render:function(e){var t,i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N;if("s","e","gm","ent",(t=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],t.chart),r=this.stx.pixelFromTick(this.p1[0],t.chart),i<t.left&&r<t.left||i>t.right&&r>t.right))){n=this.stx.getYAxisByField(t,this.field),s=[],o=[],a.N_M(4),l=a.a$j("0",0),h=0,c=0,u=0,d=Math.min(this.p1[0],this.p0[0]),a.j7J(14);var H=a.c0C(20,19);p=Math.max(this.p1[0],this.p0[0])+H,a.N_M(14),m=a.c0C(p,d);for(var I=d;I<p;I++)(g=this.getYValue(I))&&(s.push(g.transformed),o.push(g.untransformed));for(f=s.length,a.j7J(77),y=a.a$j(f,1,f,1,"2"),v=Math.pow(y,2),a.N_M(78),x=a.a$j(y,1,3,"2",f),I=0;I<f;I++)c+=f*s[I]-l,l+=s[I],u+=f*o[I]-h,h+=o[I];if(a.N_M(79),b=a.a$j(v,x,f,c,f,y,l),a.N_M(80),C=a.c0C(b,f,l,y),a.N_M(79),S=a.a$j(v,x,f,u,f,y,h),a.j7J(80),w=a.a$j(b,f,h,y),this.p0[0]<this.p1[0]?(D=C,a.j7J(69),k=a.a$j(C,b,m),this.p0[1]=w,a.N_M(69),this.p1[1]=a.c0C(w,S,m)):(a.N_M(69),D=a.a$j(C,b,m),k=C,a.N_M(69),this.p0[1]=a.c0C(w,S,m),a.j7J(14),this.p1[a.c0C("1",0)]=w),M=this.stx.pixelFromTransformedValue(D,t,n),T=this.stx.pixelFromTransformedValue(k,t,n),A=this.getLineColor(),_={pattern:this.pattern,lineWidth:this.lineWidth},this.stx.plotLine(i,r,M,T,A,"segment",e,t,_),a.N_M(14),this.stx.plotLine(i,i,a.c0C(M,20),a.a$j(M,20,a.N_M(1)),A,"segment",e,t,_),a.j7J(14),this.stx.plotLine(r,r,a.a$j(T,20),a.a$j(T,0,"20",a.j7J(81)),A,"segment",e,t,_),this.active1||this.active2||this.active3){for(a.N_M(7),P=a.c0C(l,f),F=0,I=0;I<f;I++)F+=Math.pow(s[I]-P,2);a.j7J(7),L={context:e,panel:t,points:{0:{x:i,v:D},1:{x:r,v:k}},stddev:Math.sqrt(a.a$j(F,f)),yAxis:n},this.lines={},this.active1&&(this.renderStddev("1","p",L),this.renderStddev("1","n",L)),this.active2&&(this.renderStddev("2","p",L),this.renderStddev("2","n",L)),this.active3&&(this.renderStddev("3","p",L),this.renderStddev("3","n",L))}this.highlighted?("p","1",E="p0"==this.highlighted,N="p1"==this.highlighted,this.littleCircle(e,i,M,E),this.littleCircle(e,r,T,N)):(this.pixelX=[i,r],this.pixelY=[M,T])}},renderStddev:function(e,t,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w;a.f3X(),a.N_M(82),r=a.a$j(t,e,"stddev"),a.j7J(1),n=a.c0C("color",e),a.j7J(1),s=a.c0C("pattern",e),a.j7J(1),o=a.a$j("lineWidth",e),h=(l=i.points)[0].v,c=l[1].v,u=i.stddev,d="n"===t?-1*e:1*e,p=this.stx,m=i.panel,g=i.yAxis,f={name:r,color:this.getLineColor(this[n]),type:"segment",y0:p.pixelFromTransformedValue(h+u*d,m,g),y1:p.pixelFromTransformedValue(c+u*d,m,g),params:{pattern:this[s],lineWidth:this[o]}},this.lines&&(this.lines[r]=f),y=i.context,v=l[0].x,x=l[1].x,p.plotLine(v,x,f.y0,f.y1,f.color,f.type,y,m,f.params),p.plotLine(v,v,f.y0-10,f.y0+10,f.color,f.type,y,m,f.params),p.plotLine(x,x,f.y1-10,f.y1+10,f.color,f.type,y,m,f.params),a.j7J(1),b=a.a$j(e,""),a.j7J(83);var D=a.c0C(45,63,19,11,7);C=Math.max(v,x)+D,S=v<x?f.y1:f.y0,y.fillStyle=f.color,y.save(),y.textBaseline="middle",y.fillText(b,C,S),y.restore(),i.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(v>=m.chart.left&&v<=m.chart.right||x>=m.chart.left&&x<=m.chart.right)&&(a.j7J(25),w=a.c0C(u,d,v<x?c:h),p.endClip(),p.createYAxisLabel(m,i.formatPrice(w,g),S,f.color,null,y,g),p.startClip(m.name))},intersected:function(e,i,r){var n,s,o,l,h,c,u;if(!this.pixelX||!this.pixelY)return null;if(n=this.repositionIntersection(e,i))return n;s={0:this.pixelX,1:this.pixelY};for(var d=0;d<2;d++)if(this.pointIntersection(s[0][d],s[1][d],r,!0))return a.j7J(1),this.highlighted=a.a$j("p",d),{action:"drag",point:"p"+d};if(o=this,a.j7J(5),l=this.pixelX[a.a$j(1,"0")],h=this.pixelX[1],!(u=(c=function(t){var a,n;return a=[l,t.y0],n=[h,t.y1],o.lineIntersection(e,i,r,o.name,a,n,!0)})({y0:this.pixelY[0],y1:this.pixelY[1]}))&&this.lines)for(var p in this.lines)if(c(this.lines[p])){u=!0;break}return u?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},repositionIntersection:function(e,i){return!(!this.p0||!this.p1)&&(!(this!=this.stx.repositioningDrawing||!this.highlighted)&&(!0===this.highlighted?{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}:{action:"drag",point:this.highlighted}))},lineIntersection:function(e,i,r,n,s,o,l){var h,c,u;if(!l){a.N_M(1),console.log(a.c0C(n," lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.")),1824200448,-1701133897,2;for(var d=1;1824200448!==a.S9Y(d.toString(),d.toString().length,32111);d++)return!0;return a.O1W(2..toString(),2..toString().length,35467),!1}return s||(s=this.p0),o||(o=this.p1),!(!s||!o)&&(h=this.stx,void 0!==(c=t.convertBoxToPixels(h,this.panelName,r)).x0&&(u={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},a.f3X(),t.boxIntersects(c.x0,c.y0,c.x1,c.y1,u.x0,u.y0,u.x1,u.y1)))},boxIntersection:function(e,t,i){return!(i.cx0>Math.max(this.pixelX[0],this.pixelX[1])||i.cx1<Math.min(this.pixelX[0],this.pixelX[1]))&&(!(!this.stx.repositioningDrawing&&(i.cy1<this.pixelY[0]||i.cy0>this.pixelY[1]))&&(a.T$X(),!0))},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.color1=t.col1,this.color2=t.col2,this.color3=t.col3,this.active1=t.dev1,this.active2=t.dev2,this.active3=t.dev3,this.panelName=t.pnl,this.pattern=t.ptrn,this.pattern1=t.ptrn1,this.pattern2=t.ptrn2,this.pattern3=t.ptrn3,this.lineWidth=t.lw,this.lineWidth1=t.lw1,this.lineWidth2=t.lw2,this.lineWidth3=t.lw3,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.trendline=function(){this.name="trendline"},t.inheritsFrom(t.Drawing.trendline,t.Drawing.segment),t.Drawing.trendline.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.trendline.prototype.measure=function(){a.T$X()},t.Drawing.trendline.prototype.reconstruct=function(e,i){t.Drawing.segment.prototype.reconstruct.call(this,e,i),a.f3X(),this.callout=new t.Drawing.callout,this.callout.reconstruct(e,i.callout)},t.Drawing.trendline.prototype.serialize=function(){var e;return(e=t.Drawing.segment.prototype.serialize.call(this)).callout=this.callout.serialize(),e},t.Drawing.trendline.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S;if("%",") ",(i=this.stx.panels[this.panelName])&&(t.Drawing.segment.prototype.render.call(this,e),this.callout||(this.callout=new t.Drawing.callout,r=t.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(this.stx,r)),this.callout.p0=t.clone(this.p0),n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),isFinite(o)&&isFinite(l))){a.j7J(84),h=a.a$j(n,"2",s),a.N_M(2),c=a.c0C(l,o,2),this.fontSize=t.stripPX(this.font&&this.font.size||13),a.j7J(1);a.c0C(292,3211);a.N_M(85);var w=a.c0C(3550,10,15,49543);a.j7J(86);var D=a.a$j(9,1518,7,1519,217);a.N_M(87);var k=a.c0C(13,6,37,42,7);u=1.2*this.callout.w+(this.callout.stemEntry[0]==(2309!==w?"c":D)?0:k),d=Math.sqrt(Math.pow(s-n,2)+Math.pow(l-o,2)),a.N_M(3);var M=a.a$j(17,18,0);a.N_M(88);var T=a.c0C(8,77,12,11);a.j7J(27);var A=a.a$j(2,3);p=u/(d||u)*(this.p1[M]<this.p0[1]?T:A),a.N_M(89),m=a.a$j(c,l,p,h),a.N_M(38),g=a.c0C(s,c,h,p),this.callout.p0[0]=this.stx.tickFromPixel(m,i.chart),this.callout.p0[1]=this.stx.priceFromPixel(g,i),this.callout.v0=this.callout.p0[1],this.callout.p1=t.clone(this.p0),this.callout.stx=this.stx,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,a.j7J(1);var _=a.a$j(0,1);a.N_M(90);var P=a.a$j(6,16,143,3,13);f=this.p1[_]-this.p0[P],a.j7J(55);var F=a.c0C(7,18,12,9);a.N_M(91);var L=a.a$j(29,13,3,16,3);a.N_M(27);var E=a.c0C(13,11);this.callout.text=Number(f).toFixed(F)+(0===this.p0[L]?"":" ("+Number(100*f/this.p0[1]).toFixed(E)+"%) ")+Math.abs(this.p1[0]-this.p0[0])+" Bars",y=Math.floor((this.p0[0]+this.p1[0])/2),Math.abs(this.p0[0]-this.p1[0])>1&&Math.abs(this.p0[0]-this.p1[0])<20?(x=this.stx.pixelFromTick(y,i.chart),a.N_M(92),b=a.c0C(o,n,o,s,n,l,x),v=this.stx.priceFromPixel(b,i)||c):v=this.stx.priceFromPixel(c,i),this.callout.stem={t:y,v:v},this.callout.renderText(),this.callout.render(e),this.highlighted&&(C="p0"==this.highlighted,S="p1"==this.highlighted,this.littleCircle(e,n,o,C),this.littleCircle(e,s,l,S))}},t.Drawing.trendline.prototype.lineIntersection=function(e,i,r,n){return a.f3X(),t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,r,"segment")},t.Drawing.trendline.prototype.intersected=function(e,i,a){var r,n;return this.p0&&this.p1?(r=this.callout.intersected(e,i,a),n=t.Drawing.segment.prototype.intersected.call(this,e,i,a),this.callout.highlighted=!(!r&&!n),n||(r?{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}:null)):null},t.Drawing.average=function(){a.T$X(),this.name="average"},t.inheritsFrom(t.Drawing.average,t.Drawing.regression),t.extend(t.Drawing.average.prototype,{configs:t.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){var e,i,a,r,n,s;this.p0&&this.p1&&(","," ",this.stx.setMeasure(0,!1,this.p0[0],this.p1[0],!0,this.name),e=[],i="",this.active1&&e.push("1"),this.active2&&e.push("2"),this.active3&&e.push("3"),e.length&&(i="&ensp;"+e.join(", ")+" &sigma;"),a=(this.stx.drawingContainer||document).querySelector(".mMeasure"),n=(r=this.stx.controls.mSticky)&&r.querySelector(".mStickyInterior"),a&&(a.innerHTML+=i),n&&((s=[]).push(t.capitalize(this.name)),s.push(this.field||this.stx.defaultPlotField||"Close"),s.push(n.innerHTML+i),n.innerHTML=s.join("<br>")))},render:function(e){var t,i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S;if((t=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],t.chart),r=this.stx.pixelFromTick(this.p1[0],t.chart),i<t.left&&r<t.left||i>t.right&&r>t.right))){n=this.stx.getYAxisByField(t,this.field),s=this.stx,o=Math.min(this.p1[0],this.p0[0]),a.j7J(93);var w=a.a$j(9,18,262,3,14);for(l=Math.max(this.p1[0],this.p0[0])+w,a.N_M(14),a.c0C(l,o),h=0,c=[],u=o;u<l;u++)null!==(d=this.getYValue(u))&&(h+=d.transformed,c.push(d));if(p=c.length){if(a.j7J(7),m=a.c0C(h,p),g=s.pixelFromTransformedValue(m,t,n),f=this.getLineColor(),y={pattern:this.pattern,lineWidth:this.lineWidth},s.plotLine(i,r,g,g,f,"segment",e,t,y),a.N_M(94),s.plotLine(i,i,a.c0C(g,"20"),a.a$j(g,"20",a.N_M(47)),f,"segment",e,t,y),a.j7J(14),s.plotLine(r,r,a.a$j(g,20),a.a$j(g,20,a.N_M(1)),f,"segment",e,t,y),!this.axisLabel||this.highlighted||this.penDown||(i>=t.chart.left&&i<=t.chart.right||r>=t.chart.left&&r<=t.chart.right)&&(s.endClip(),s.createYAxisLabel(t,D(m,n),g,f,null,e,n),s.startClip(t.name)),this.active1||this.active2||this.active3){for(v=0,u=0;u<p;u++)d=c[u],v+=Math.pow(d.transformed-m,2);a.j7J(7),x=Math.sqrt(a.c0C(v,p)),b={context:e,formatPrice:D,panel:t,points:{0:{x:i,v:m},1:{x:r,v:m}},stddev:x,yAxis:n},this.lines={},this.active1&&(this.renderStddev("1","p",b),this.renderStddev("1","n",b)),this.active2&&(this.renderStddev("2","p",b),this.renderStddev("2","n",b)),this.active3&&(this.renderStddev("3","p",b),this.renderStddev("3","n",b))}this.highlighted?(C="p0"==this.highlighted,S="p1"==this.highlighted,this.littleCircle(e,i,g,C),this.littleCircle(e,r,g,S)):(this.pixelX=[i,r],this.pixelY=[g,g])}}function D(e,i){var r;r=2;for(var n=1;-696693300!==a.S9Y(n.toString(),n.toString().length,32464);n++)e=i||i.priceFormatter?i.priceFormatter(s,t,e):s.formatYAxisPrice(e,t,1,i),r+=2;return 1543664214!==a.S9Y(r.toString(),r.toString().length,99016)&&(e=i&&i.priceFormatter?i.priceFormatter(s,t,e):s.formatYAxisPrice(e,t,null,i)),e}},reconstruct:function(e,i){a.T$X(),this.axisLabel=i.al,t.Drawing.regression.prototype.reconstruct.call(this,e,i)},serialize:function(){var e;return e=t.Drawing.regression.prototype.serialize.call(this),a.f3X(),e.al=this.axisLabel,e}},!0),t.Drawing.quadrant=function(){this.name="quadrant"},t.inheritsFrom(t.Drawing.quadrant,t.Drawing.regression),t.extend(t.Drawing.quadrant.prototype,{configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},$controls:[],render:function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S;if("ti","rone","qu","a","dr","ant",(r=(i=this.stx).panels[this.panelName])&&this.p1&&(n=i.pixelFromTick(this.p0[0],r.chart),s=i.pixelFromTick(this.p1[0],r.chart),!(n<r.left&&s<r.left||n>r.right&&s>r.right))){o=this.stx.getYAxisByField(r,this.field),l=null,h=null;for(var w=Math.min(this.p1[0],this.p0[0]);w<=Math.max(this.p1[0],this.p0[0]);w++)null!==(c=this.getYValue(w))&&((null===l||c.transformed>l)&&(l=c.transformed),(null===h||c.transformed<h)&&(h=c.transformed));a.f3X(),u=i.pixelFromTransformedValue(l,r,o),a.j7J(95),d=i.pixelFromTransformedValue(a.a$j(0,"4",h,l,3),r,o),a.j7J(96),p=i.pixelFromTransformedValue(a.c0C(h,l,"2",32,3),r,o),a.N_M(97),m=i.pixelFromTransformedValue(a.c0C(1,"2",l,h),r,o),a.N_M(98),g=i.pixelFromTransformedValue(a.c0C(l,h,2,"3"),r,o),a.j7J(99),f=i.pixelFromTransformedValue(a.a$j(l,3,h,4),r,o),y=i.pixelFromTransformedValue(h,r,o),this.p0[1]=0,this.p1[1]=!1,v=this.getLineColor(),("auto"==(x=this.fillColor)||t.isTransparent(x))&&(x=i.defaultColor),e.fillStyle=x,b={pattern:this.pattern,lineWidth:this.lineWidth},i.plotLine(n,s,u,u,v,"segment",e,r,b),i.plotLine(n,s,y,y,v,"segment",e,r,b),"quadrant"==this.name?(i.plotLine(n,s,d,d,v,"segment",e,r,b),i.plotLine(n,s,f,f,v,"segment",e,r,b)):"tirone"==this.name&&(i.plotLine(n,s,p,p,v,"segment",e,r,b),i.plotLine(n,s,g,g,v,"segment",e,r,b)),i.plotLine(n,n,u,y,v,"segment",e,r,b),i.plotLine(s,s,u,y,v,"segment",e,r,b),i.plotLine(n,s,m,m,v,"segment",e,r,t.extend(b,{opacity:"tirone"==this.name?.2:1})),e.globalAlpha=.1,e.beginPath(),a.N_M(14),e.fillRect(n,u,a.c0C(s,n),a.a$j(y,u)),"quadrant"==this.name?(a.j7J(14),e.fillRect(n,d,a.a$j(s,n),a.c0C(f,d))):"tirone"==this.name&&(a.j7J(14),e.fillRect(n,p,a.c0C(s,n),a.a$j(g,p))),e.globalAlpha=1,this.highlighted?("p","1",C="p0"==this.highlighted,S="p1"==this.highlighted,this.littleCircle(e,n,m,C),this.littleCircle(e,s,m,S)):("ti","r","one",this.pixelX=[n,s],this.pixelY=[u,y,m],"quadrant"===this.name&&this.pixelY.push(d,f),"tirone"===this.name&&this.pixelY.push(p,g))}},intersected:function(e,i,r){var n,s,o,{pixelX:l,pixelY:h}=this;if(!l||!h)return null;if(n=this.repositionIntersection(e,i))return n;for(var c=0;c<2;c++)if(this.pointIntersection(l[c],h[2],r,!0))return a.N_M(1),this.highlighted=a.c0C("p",c),{action:"drag",point:"p"+c};s=2;for(var u=1;1716363871!==a.O1W(u.toString(),u.toString().length,34506);u++)o=[],s+=2;return-2119932285!==a.S9Y(s.toString(),s.toString().length,65628)&&(o=[]),l.forEach(e=>{a.f3X(),o.push({p0:[e,h[0]],p1:[e,h[1]]})}),h.forEach(e=>{var t;t=2;for(var i=1;1977177541!==a.O1W(i.toString(),i.toString().length,42936);i++)o.push({p0:[l[1],e],p1:[l[0],e]}),t+=2;-672486959!==a.O1W(t.toString(),t.toString().length,29932)&&o.push({p0:[l[0],e],p1:[l[1],e]})}),o.some(t=>{let{p0:n,p1:s}=t;return a.f3X(),this.lineIntersection(e,i,r,this.name,n,s,!0)})?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return a.T$X(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.tirone=function(){this.name="tirone"},t.inheritsFrom(t.Drawing.tirone,t.Drawing.quadrant),t.Drawing.elliottwave=function(){this.name="elliottwave",this.lastPoint=0,this.points=[],this.pts=[],a.T$X(),this.dx=0,this.dy=-20,this.dragToDraw=!1,this.annotationPoints=[],this.edit=null},t.inheritsFrom(t.Drawing.elliottwave,t.Drawing.annotation),t.Drawing.elliottwave.defaultTemplate={impulse:["I","II","III","IV","V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},t.Drawing.elliottwave.prototype.initializeSettings=function(e){e.currentVectorParameters.waveParameters=t.clone(t.Drawing.elliottwave.defaultTemplate)},t.Drawing.elliottwave.prototype.configs=["color","lineWidth","lineColor","pattern","font","waveParameters"],t.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]","cq-wave-parameters"],t.Drawing.elliottwave.prototype.construct=function(e,t){var i;this.stx=e,this.panelName=t.name,i=e.currentVectorParameters,Object.assign(this,i.waveParameters)},t.Drawing.elliottwave.prototype.serialize=function(){var e;a.f3X(),e={};for(var i=0;i<this.points.length;i++)a.N_M(1),e[a.a$j("d",i)]=this[a.a$j("d",i)],a.N_M(1),e[a.c0C("tzo",i)]=this[a.c0C("tzo",i)],a.N_M(1),e[a.c0C("v",i)]=this[a.a$j("v",i)];return e.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fnt:t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"}))},e)},t.Drawing.elliottwave.prototype.reconstruct=function(e,i){this.stx=e,this.color=i.col,this.panelName=i.pnl,this.pattern=i.ptrn,this.lineWidth=i.lw,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.decoration=i.decor,this.showLines=i.show,this.dx=i.dx,this.dy=i.dy,this.trend=i.trend,this.annotationPoints=i.annotations.split(","),"enclosed"===i.decor&&this.calculateRadius(e.chart.tempCanvas.context),this.maxSegments=i.mxSeg,this.reconstructPoints(i),this.adjust()},t.Drawing.elliottwave.prototype.reconstructPoints=function(e){var i,r,n;if(i=this.stx.panels[this.panelName],a.f3X(),i)for(var s=0;s<this.annotationPoints.length;s++)"tz","o",a.j7J(1),this[a.c0C("d",s)]=e[a.a$j("d",s)],a.j7J(1),this[a.a$j("v",s)]=e[a.a$j("v",s)],a.N_M(1),this[a.a$j("tzo",s)]=e[a.a$j("tzo",s)],r=t.strToDateTime(e["d"+s]),n=this.stx.tickFromDate(r,i.chart),this.points.push([n,e["v"+s]])},t.Drawing.elliottwave.prototype.calculateRadius=function(e){var t,i;this.getFontString(),e.font=this.fontString,t=0;for(var a=0;a<this.annotationPoints.length;a++)t<(i=e.measureText(this.annotationPoints[a]).width)&&(t=i);this.enclosedRadius=t},t.Drawing.elliottwave.prototype.check=function(e,t,i){var r,n,s;if(1===i&&2===this.points.length)return!0;r=2,a.f3X();for(var o=1;1421718331!==a.O1W(o.toString(),o.toString().length,43536);o++){if(a.j7J(14),(n=this.points[a.c0C(i,1)])&&e<=n[0])return!1;r+=2}if(-177262923!==a.S9Y(r.toString(),r.toString().length,5583)&&(a.N_M(7),(n=this.points[a.a$j(i,5)])||e<n[8]))return!0;return a.N_M(1),!((s=this.points[a.c0C(i,1)])&&e>=s[0])&&!!function(e){for(var t=2;t<e.length;t++)if(Math.sign(e[t][1]-e[t-1][1])==Math.sign(e[t-1][1]-e[t-2][1]))return!1;return!0}(this.points)},t.Drawing.elliottwave.prototype.move=function(e,t,i){this.copyConfig(),a.N_M(100);var r=a.a$j(0,1,3,0,3);this.points[this.lastPoint+r]=[t,i],this.render(e)},t.Drawing.elliottwave.prototype.adjust=function(){var e,i;if(e=this.stx.panels[this.panelName])for(var r=0;this.maxSegments+1>r;r++)a.N_M(1),i=this[a.a$j("d",r)],this.setPoint(r,i,this["v"+r],e.chart),this.points[r][0]=this.stx.tickFromDate(t.strToDateTime(i),e.chart),a.j7J(1),this.points[r][1]=this[a.c0C("v",r)]},t.Drawing.elliottwave.prototype.click=function(e,t,i){var r;if(r=this.stx.panels[this.panelName]){if(this.copyConfig(),a.T$X(),!this.penDown){this.setPoint(0,t,i,r.chart),this.points.push(this.p0),this.penDown=!0,this.segment=0,this.lastPoint=0,this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),"enclosed"===this.decoration&&this.calculateRadius(e),a.N_M(68);var n=a.c0C(63,61,66,5);return this.maxSegments=this.annotationPoints.length-("1"<<n),this.trend=1,!1}return this.accidentalClick(t,i)?(this.penDown=!0,!1):!!(this.check(t,i,this.lastPoint+1)&&(this.lastPoint++,this.setPoint(this.lastPoint,t,i,r.chart),1===this.lastPoint&&(this.trend=Math.sign(this.v1-this.v0)),this.segment++,this.segment>=this.maxSegments))&&(this.penDown=!1,!0)}},t.Drawing.elliottwave.prototype.render=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A;if("ce","nter",i=this.stx.panels[this.panelName]){if(r=this.stx,n=this.annotationPoints,s=this.pattern?t.borderPatternToArray(this.lineWidth,this.pattern):[],this.getFontString(),e.font=this.fontString,e.textAlign="center",e.textBaseline="middle",e.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(e),this.lastFontString=this.fontString,o=this.getLineColor(),e.fillStyle=e.strokeStyle=o,e.save(),e.setLineDash(s),l=this.dx,h=this.dy,c=this.points,a.f3X(),u=this.pts,d=!this.showLines&&this.highlighted,p=c.length,this.penDown&&this.segment){a.j7J(101);var _=a.c0C(153,15,8,12,11);m=this.trend*(p%_-.5)<0,i.yAxis.flipped&&(m=!m),this.drawDropZone(e,c[p-2][1],this.stx.priceFromPixel(i.yAxis[m?"top":"bottom"]),c[p-2][0])}else if("string"==typeof this.highlighted&&this.stx.repositioningDrawing){g=parseInt(this.highlighted.substring(1,this.highlighted.length),10),a.j7J(14);var P=a.a$j(5,3);m=this.trend*(g%P-.5)>0,a.j7J(14),f=c[a.a$j(g,1)],a.j7J(1),y=c[a.a$j(g,1)],v=g>0?f[1]:y[1],y&&(v=Math[m?"max":"min"](v,y[1])),i.yAxis.flipped&&(m=!m),this.drawDropZone(e,v,this.stx.priceFromPixel(i.yAxis[m?"top":"bottom"]),f?f[0]:null,y?y[0]:null)}for(var F=0;F<p;F++)x=c[F],b=r.pixelFromTick(x[0],i.chart),C=r.pixelFromValueAdjusted(i,x[0],x[1]),u[F]=[b,C];if(F=0,this.showLines||d){for(e.beginPath(),d&&(e.globalAlpha=.3);F<u.length;F++)e.lineTo(u[F][0],u[F][1]);e.stroke(),F=0}for(e.restore();F<p;F++){"par","enth","es","es",S=F%2?l:-l,w=F%2?h:-h,S*=this.trend,w*=this.trend,i.yAxis.flipped&&(S*=-1,w*=-1),k=(D=u[F])[2]=D[0]+S,a.j7J(91);var L=a.a$j(2,0,10,2,10);M=D[3]=D[L]+w,T=this.enclosedRadius||8,A=n[F],"parentheses"===this.decoration&&(a.N_M(82),A=a.c0C(")",A,"(")),e.fillText(A,k,M),"enclosed"===this.decoration&&(e.beginPath(),e.arc(k,M,T,0,2*Math.PI,!1),e.stroke()),this.highlighted&&(e.save(),this.littleCircle(e,this.pts[F][0],this.pts[F][1],this.highlighted==="p"+F),e.restore())}}},t.Drawing.elliottwave.prototype.reposition=function(e,t,i,r){var n,s,o,l,h;if("m","ov","e",t){if(a.T$X(),n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-r,"move"===t.action)for(var c=0;t.points.length>c;c++){l=t.points[c],this.setPoint(c,l[0]-s,l[1]-o,n.chart),a.N_M(102);var u=a.c0C(18,4,3,18);this.points[c]=[l[0]-s,l[u]-o]}"drag"===t.action&&(h=t.point,this.points[h]=[i,r],this.check(i,r,h)&&this.setPoint(h,i,r,n.chart)),this.render(e)}},t.Drawing.elliottwave.prototype.intersected=function(e,i,r){var n,s;if(!this.p0||!this.p1)return null;for(var o=0;this.points.length>o;o++){if(s=this.points[o],this.pointIntersection(s[0],s[1],r))return a.j7J(1),this.highlighted=a.a$j("p",o),{action:"drag",point:o,tick:e,value:i};this.points[o+1]&&this.lineIntersection(e,i,r,"segment",s,this.points[o+1])&&(this.highlighted=!0,n={action:"move",points:t.clone(this.points),tick:e,value:i})}a.N_M(5),a.a$j(1,"211995307");for(var l=1;-1917827751!==a.S9Y(l.toString(),l.toString().length,67485);l++)return n;return a.S9Y(2..toString(),2..toString().length,68036),n},t.Drawing.elliottwave.prototype.measure=function(){var e,i,a,r;this.points.length>=2&&(e=this.points,this.stx.setMeasure(e[0][1],e[e.length-1][1],e[0][0],e[e.length-1][0],!0),(a=(i=this.stx.controls.mSticky)&&i.querySelector(".mStickyInterior"))&&("C","lo","s","e","El","liott ","W","ave",(r=[]).push(t.capitalize("Elliott Wave")),this.getYValue&&r.push(this.field||this.stx.defaultPlotField||"Close"),r.push(a.innerHTML),a.innerHTML=r.join("<br>")))},t.Drawing.printProjection=function(e,i,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if(n=i.arr,a.T$X(),n.length>1){s=n[0][0],o=Math.round(.75*e.chart.maxTicks);for(var C=1;C<n.length;C++){for(a.N_M(94),l=n[a.c0C(C,"1")][0],h=n[C][0],c=t.strToDateTime(l),u=t.strToDateTime(h).getTime(),d=e.standardMarketIterator(c),p=0;c.getTime()<u;)c=d.next(),p+=1;if((m=t.strToDateTime(l).getTime())>t.strToDateTime(r[r.length-1].Date).getTime()){a.N_M(103);var S=a.a$j(5,6,5,56);g=r.length-S,a.j7J(4),p+=a.c0C("1",0)}else for(g=r.length-1;g>=0&&!(m<=t.strToDateTime(r[g].Date).getTime());g--);f={x0:0,x1:p,y0:r[g].Close,y1:n[C][1]},s=t.strToDateTime(l),d=e.standardMarketIterator(s),y=!1;for(var w=0;w<=p;w++)if(y?s=d.next():y=!0,!(s.getTime()<=r[r.length-1].DT.getTime())){(v=t.yIntersection(f,w))||(v=0),a.j7J(104);var D=a.a$j(180026,11,17,19e4,2);a.j7J(1);var k=a.c0C(9985,15);if(0===(x=Math.round(v*D)/k)&&(x=n[C][1]),b={Date:t.yyyymmddhhmmssmmm(s),DT:s,Open:x,Close:x,High:x,Low:x,Volume:0,Adj_Close:x,Split_Close:x,projection:!0},"minute"==e.layout.interval&&o--<0)break;r[r.length]=b}}}}):("drawingAdvan","ced feature requires first activating drawing feature.",console.error("drawingAdvanced feature requires first activating drawing feature."))},o=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).computeEquationChart?(t.formatEquation=function(e){var t,i,a,r,n,s=we;s.f3X(),t="",i=[],a="",r=!1;for(var o=1;o<e.length;o++)"["!=(n=e[o].toUpperCase())||r?"]"==n&&r?(r=!1,""!==a&&(i.push(a),s.j7J(82),t+=s.a$j("]",a,"[")),a=""):r?a+=n:"+"==n||"-"==n||"*"==n||"/"==n||":"==n||"%"==n||"("==n||")"==n?(""!==a&&isNaN(a)?(i.push(a),s.j7J(82),t+=s.a$j("]",a,"[")):t+=a,":"==n&&(n="/"),t+=n,a=""):" "!=n&&(a+=n):r=!0;return""!==a&&isNaN(a)?(i.push(a),s.j7J(82),t+=s.c0C("]",a,"[")):t+=a,{equation:t,symbols:i}},t.fetchEquationChart=function(e,i){var a,r,n,s,o;r=(a=t.formatEquation(e.symbol)).symbols,n=[],we.f3X(),s=e.stx,e.stx=null;for(var l=0;l<r.length;l++)(o=t.shallowClone(e)).stx=s,o.symbol=r[l],o.symbolObject={symbol:r[l]},n.push(o);e.stx=s,s.quoteDriver.multiFetch(n,(function(r){var s,o,l,h,c;s={},e.loadMoreReplace=!0,o={charge:0};for(var u=0;u<r.length;u++){if((l=r[u]).dataCallback.error)return void i({error:l.dataCallback.error});s[l.params.symbol]=l.dataCallback.quotes,e.loadMoreReplace=e.loadMoreReplace&&l.params.loadMoreReplace,e.moreToLoad=e.moreToLoad||l.dataCallback.moreAvailable,(h=l.dataCallback.attribution)&&(h.charge&&(o.charge+=h.charge),o.source=h.source,void 0===o.exchange?o.exchange=h.exchange:o.exchange!=h.exchange&&(o.exchange=""))}if(n.length||!e.loadMore&&!e.update)try{c=t.computeEquationChart(a.equation,s),i({quotes:c,moreAvailable:e.moreToLoad,attribution:o})}catch(e){var d;d={error:"Invalid equation: "+a.equation},e.name&&"NoException"==e.name&&(d.suppressAlert=!0),i(d)}}))}):console.error("equationsAdvanced feature requires first activating equations feature.")},l=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Marker?t.Marker.Performance||(t.ChartEngine.prototype.removeDOMMarker=function(e){console.warn("CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance#remove instead."),t.Marker.Performance.prototype.removeDOMMarker.call(e.params.node,e)},t.ChartEngine.prototype.drawMarkers=function(){console.warn("CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),t.Marker.Performance.drawMarkers(this)},t.ChartEngine.prototype.calculateMarkerStyles=function(e,i){console.warn("CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.calculateStyles instead."),we.f3X(),t.Marker.Performance.calculateMarkerStyles(this,e,i)},t.ChartEngine.prototype.drawCircleMarker=function(e,i,a){we.T$X(),console.warn("CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCircleMarker instead."),t.Marker.Performance.drawCircleMarker(e,i,a)},t.ChartEngine.prototype.drawSquareMarker=function(e,i,a){console.warn("CIQ.ChartEngine#drawSquareMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawSquareMarker instead."),we.T$X(),t.Marker.Performance.drawSquareMarker(e,i,a)},t.ChartEngine.prototype.drawCalloutMarker=function(e,i,a){console.warn("CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCalloutMarker instead."),t.Marker.Performance.drawCalloutMarker(e,i,a)},t.ChartEngine.prototype.drawMarkerStem=function(e,i,a){we.T$X(),console.warn("CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkerStem instead."),t.Marker.Performance.drawMarkerStem(e,i,a)},t.ChartEngine.prototype.positionDOMMarkers=function(){console.warn("CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),t.Marker.Performance.drawMarkers(this)},t.Marker.Performance=function(e){var i,a,r,n,s,o,l,h,c,u=we;this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},t.extend(this.params,e),i=this.template=document.createElement("TEMPLATE"),u.j7J(105),i.innerHTML=u.c0C("</div>","</div>",'<div class="stx-marker highlight">','<div class="stx-visual">','<div class="stx-marker-content">',"</div>",'<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>','<div class="stx-stem"></div>'),(r=(a=this.template.content.cloneNode(!0)).querySelector(".stx-marker",i)).classList.add(e.type),r.classList.add(e.category),n=a.querySelector(".stx-visual",i),s=2;for(var d=1;178467127!==u.S9Y(d.toString(),d.toString().length,95469);d++)".stx-mark","er-expand",o=a.querySelector(".stx-marker-expand"),l=a.querySelector("h4",i),h=a.querySelector("p",i),l.innerText=this.params.headline,h.innerText=this.params.story,this.hasText=!!e.headline||!!e.story,this.deferAttach=!0,s+=2;-814060825!==u.S9Y(s.toString(),s.toString().length,94160)&&(o=a.querySelector(".stx-marker-expand"),l=a.querySelector("p",i),h=a.querySelector("p",i),l.innerText=this.params.headline,h.innerText=this.params.story,this.hasText=+~e.headline&&+-e.story,this.deferAttach=!1),this.node=a.firstChild,this.node.params=this.params,this.visual=n,this.expand=o,"callout"===e.type&&(c=o.removeChild(l),a.querySelector(".stx-marker-content",i).insertBefore(c,o))},t.inheritsFrom(t.Marker.Performance,t.Marker.NodeCreator,!1),t.Marker.Performance.consolidateExpanded=function(e){var t,i,a,r,n,s=we;if((t=e.markerHelper.highlighted).length){s.N_M(3);var o,l,h=s.c0C(7,8,0);a=(i=t[t.length-h]).params.node,i.consolidated||(i.consolidated=[]);for(var c=t.length-2;c>=0;c--)"<","consolidated",">",o=t[c],l=void 0,s.T$X(),r=(l=o.params.node.expand)&&"none"!==l.style.display?l.innerHTML:"",s.N_M(82),n=s.c0C("</consolidated>",r,"<consolidated>"),r.length&&(a.expand.innerHTML+=n);i.stxNodeCreator.quickCache(i)}},t.Marker.Performance.reconstituteExpanded=function(e){var t,i;if((t=e.markerHelper.highlighted).length&&e.activeMarker)for(var a=(t=[e.activeMarker]).length-1;a>=0;a--)for("CO","NSOLIDATED",i=t[a].params.node.expand;"CONSOLIDATED"===i.lastElementChild.nodeName;)i.removeChild(i.lastElementChild)},t.Marker.Performance.drawMarkers=function(e){var t,i,a,r,n,s;t=e.getMarkerArray("all"),i=e.chart;for(var o=0;o<t.length;o++)r=(a=t[o]).stxNodeCreator,n=i.dataSegment[0].tick,s=i.dataSegment[i.dataSegment.length-1].tick,n<=a.tick<=s&&r&&r.drawMarker&&r.drawMarker(a)},t.Marker.Performance.calculateMarkerStyles=function(e,t,i){var a,r,n;(a=document.querySelector(".stx-marker-templates"))||("-1000","px","D","IV",(a=document.createElement("DIV")).style.visibility="hidden",a.style.left="-1000px",document.body.append(a)),a.appendChild(t.node),r=getComputedStyle(t.stxNodeCreator.visual),e.styles.stx_marker_stem||(".st","x-st","em",n=getComputedStyle(document.querySelector(".stx-stem",t.node)),e.styles.stx_marker_stem=e.cloneStyle(n)),e.styles[i]=e.cloneStyle(r),a.removeChild(t.node)},t.Marker.Performance.drawCircleMarker=function(e,i,a){var r,n,s,o,l,h;r=e.params.stx.chart.context,n=a.x,s=a.y,o=a.radius,l=a.label,we.T$X(),h=a.color?a.color:i.backgroundColor,r.beginPath(),r.setLineDash([]),r.lineWidth=1,r.fillStyle=h,r.strokeStyle=h,r.font="normal bold 12px Roboto, Helvetica, sans-serif",r.arc(n,s,o,0,2*Math.PI,!1),r.fill(),r.stroke(),r.closePath(),l&&("bl","a","ck",r.fillStyle=t.colorsEqual("white",r.fillStyle)?"black":"white",r.fillText(l.charAt(0).toUpperCase(),n-4,s+1)),(e.highlight||e.active)&&(r.beginPath(),we.N_M(1),r.arc(n,s,we.c0C(o,4),0,2*Math.PI,!1),r.stroke(),r.closePath())},t.Marker.Performance.drawSquareMarker=function(e,i,a){var r,n,s,o,l,h,c,u,d=we;r=e.params.stx.chart,d.T$X(),n=r.context,s=a.x,o=a.y,l=a.half,h=a.label,c=a.color?a.color:i.backgroundColor,d.j7J(5),u=d.a$j(2,l),n.beginPath(),n.setLineDash([]),n.lineWidth=1,n.fillStyle=c,n.strokeStyle=c,n.font="normal bold 12px Roboto, Helvetica, sans-serif",d.N_M(14),n.rect(d.c0C(s,l),d.c0C(o,l),u,u),n.fill(),(e.highlight||e.active)&&(d.j7J(63),n.rect(d.c0C(l,4,s),d.c0C(l,4,o,d.N_M(63)),d.a$j(u,8,d.j7J(1)),d.c0C(u,8,d.j7J(1)))),n.stroke(),n.closePath(),h&&(n.fillStyle=t.colorsEqual("white",n.fillStyle)?"black":"white",n.fillText(h.charAt(0).toUpperCase(),s-4,o+1))},t.Marker.Performance.drawCalloutMarker=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p;a=e.params.stx.chart.context,r=e.params,i.x,n=i.y,s=i.half,o=i.midWidth,l=i.headline,h=i.color?i.color:t.backgroundColor,c=2*s||25,u=Math.round(a.measureText(l).width),d=o?2*o:u+8,a.beginPath(),a.setLineDash([]),a.lineWidth=1,a.fillStyle=h,a.strokeStyle=h,a.font="normal bold 12px Roboto, Helvetica, sans-serif",a.rect(r.box.x0,r.box.y0,d,c),a.fill(),a.stroke(),a.closePath(),a.beginPath(),a.fillStyle=e.highlight||e.active?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.65)",we.T$X(),we.N_M(106),p=we.c0C(0,u,d,"20",2),a.rect(r.box.x0+p,n-s,u+40,22),a.fill(),a.stroke(),a.closePath(),a.fillStyle="black",a.fillText(l,r.box.x0+p+10,n)},t.Marker.Performance.drawMarkerStem=function(e,i,a){var r,n,s,o,l;r=e.params.stx.chart.context,n=a.x,a.y,r.beginPath(),r.strokeStyle=i.borderLeftColor,r.setLineDash([1,1]),s=t.stripPX(i.height),we.T$X(),o=a.invert?e.params.box.y0:e.params.box.y1,l=a.invert?e.params.box.y0-s:e.params.box.y1+s,r.moveTo(n,o),r.lineTo(n,l),r.stroke(),r.closePath()},t.Marker.Performance.prototype.drawMarker=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S=we;if("cal","lout","c","ir","cl","e","stx_marke","r_",i=e.params,(a=e.params.stx)&&a.chart.dataSegment.length){r=a.panels[e.params.panelName],s=(n=e.stxNodeCreator.params).type,o=n.category,l=n.headline,h=n.displayCategory,c=n.color,u=n.invert,S.N_M(107),d=S.a$j(o,"stx_marker_","_",s),a.styles[d]||t.Marker.Performance.calculateMarkerStyles(a,e,d),p=e.style=a.styles[d],m=a.styles.stx_marker_stem,S.j7J(9);var w=S.c0C(26,18,2);S.N_M(14);var D=S.a$j(32,30);g=parseInt(p.height,w)/D,S.j7J(9);var k=S.c0C(896,20,48);S.N_M(108);var M=S.c0C(12,20,10,12,286);f=parseInt(p.width,"10"<<k)/M,y=n.displayStem?parseInt(m.height,10)+parseInt(m.marginBottom,10):0,S.j7J(35);var T=S.c0C(65,150,2);v=y+parseInt(p.height,T),x=y?y+g:0,b=a.pixelFromDate(i.x),C=i.node.calculateYPosition({marker:e,panel:r,height:v,half:g,offset:x,inverted:u}),(e.tick||0===e.tick)&&(i.box={x0:b-(f||g),y0:C-g,x1:b+(f||g),y1:C+g,midY:g,midX:f||g,stemHeight:y},h||(o=h),a.startClip(r.name),"circle"===s?t.Marker.Performance.drawCircleMarker(e,p,{x:b,y:C,radius:g,label:o,color:c}):"square"===s?t.Marker.Performance.drawSquareMarker(e,p,{x:b,y:C,half:g,label:o,color:c}):"callout"===s?t.Marker.Performance.drawCalloutMarker(e,p,{x:b,y:C,half:g,midWidth:f,headline:l,color:c}):(S.N_M(82),console.warn(S.a$j(" is unsupported with canvas markers!\nSupported Styles are Square, Circle, and Callout.",s,"Marker type: "))),n.displayStem&&t.Marker.Performance.drawMarkerStem(e,m,{x:b,y:C,invert:u}),a.endClip(),e.attached&&this.positionPopUpNode(e))}},t.Marker.Performance.prototype.positionPopUpNode=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C=we;if("p","x) trans","lateY(",e.attached&&e.params.box){if(i=(t=e.params).stx,a=t.box,r=e.params.node.expand,n=i.chart.dataSet,s=i.chart.dataSegment,e.tick){l=[n[s[0]&&s[0].tick-1],n[s[0]&&s[0].tick-2]],h=i.getFirstLastDataRecord(l.concat(s),"Date"),C.N_M(0);var S=C.a$j(273,14,18,16);C.N_M(86);var w=C.c0C(9,9,13,13,1);C.j7J(39);var D=C.a$j(28,7,18,16);c=[n[s[s.length-S].tick+w],n[s[s.length-D].tick+2]],u=i.getFirstLastDataRecord(s.concat(c),"Date",!0),o=h.DT<=n[e.tick].DT&&n[e.tick].DT<=u.DT}else o=!1;e.highlight||e.active||(o=!1),-1250343409,C.N_M(29),d=-C.c0C(0,"391911104"),p=2;for(var k=1;-1250343409!==C.S9Y(k.toString(),k.toString().length,67522);k++){if("hi","d","den",r.style.visibility=o?"":"hidden",+o)return;m=i.panels[t.panelName],p+=2}if(C.O1W(p.toString(),p.toString().length,34328)!==d){if(r.style.visibility=o?"":"hidden",!o)return;m=i.panels[t.panelName]}g=r.rects,C.j7J(109);var M=C.a$j(3,0,7,14,8);f=g.height/M,v=e.node.params.infoOffset||0,y=e.node.params.infoOnLeft?a.x0-g.width-v<m.left?a.x1+v:a.x0-g.width-v:a.x0+g.width>m.right?a.x0-g.width-v:a.x1+v,y-=i.chart.left,x=a.y0-f>=m.top?a.y0+a.midY-f:a.y0,C.T$X(),!t.avoidFlush&&a.y1+a.stemHeight===m.yAxis.bottom&&g.height>a.y1-a.y0+a.stemHeight&&(x=a.y1-g.height+a.stemHeight),x-=i.chart.panel.top,b="translateX("+Math.floor(y)+"px) translateY("+Math.floor(x)+"px) translateZ(0)",r.style.transform=b,r.transform={translateX:y,translateY:x}}},t.Marker.Performance.prototype.quickCache=function(e){var i,a,r;i=e.params.node.expand,a=e.style,r=t.stripPX(a.marginLeft)+t.stripPX(a.marginRight)+t.stripPX(a.borderRight)+t.stripPX(a.borderLeft),i.rects=i.getBoundingClientRect(),i.scrollBarWidth=i.rects.width-i.clientWidth-r},t.Marker.Performance.prototype.calculateYPosition=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g=we;if(t=e.marker,i=e.panel,a=e.height,r=e.half,n=e.offset,s=e.inverted,l=(o=t.params.stx).chart,h=o.chart.highLowBars,g.T$X(),c=l.dataSet[t.tick]){switch(u=h?c.High:c.Close,t.params.yPositioner){case"value":d=t.params.y||0===t.params.y?o.pixelFromPrice(t.params.y,i)-.5*a+r:o.pixelFromPrice(u,i)-n;break;case"above_candle":d=o.pixelFromPrice(u,i)-n;break;case"below_candle":d=o.pixelFromPrice(c.Low||u,i),d+=s&&n?n:r;break;case"on_candle":p=c.High||c.Close,m=c.Low||0===c.Low||c.Close,g.N_M(44);var f=g.c0C(20,18,466,6);g.N_M(27);var y=g.c0C(20,19);d=o.pixelFromPrice((p+m)/f,i)-a*("0.5"*y)+r;break;case"top":d=o.pixelFromPrice(i.yAxis.high,i),d+=s&&n?n:r;break;case"bottom":d=o.pixelFromPrice(i.yAxis.low,i)-(n||r)}return d}},t.Marker.Performance.prototype.prepareForHolder=function(e){var t,i;return t=this.expand,i=e.params.stx,t.classList.add(this.params.type),i.markerHelper.domMarkers.push(e),t},t.Marker.Performance.prototype.addToHolder=function(e){var i,a;function r(t){a.activeMarker=e,we.T$X(),a.activeMarker.click({cx:t.clientX,cy:t.clientY,panel:a.currentPanel}),t.stopPropagation()}we.T$X(),i=this.expand,a=e.params.stx,t.Marker.Performance.reconstituteExpanded(a),t.Marker.Performance.consolidateExpanded(a),this.quickCache(e),i.clickClosure||(i.addEventListener("mousedown",r),i.addEventListener("touchstart",r),i.clickClosure=r)},t.Marker.Performance.prototype.remove=function(e){var t,i,a,r;(t=e.params.stx)&&t.markerHelper.domMarkers&&(-1!=(i=t.markerHelper.domMarkers.indexOf(e))&&t.markerHelper.domMarkers.splice(i,1),e.attached&&(a=t.panels[e.params.panelName],(r=e.params.node.expand).parentNode===a.subholder&&a.subholder.removeChild(r),r.removeEventListener("click",r.clickClosure)))},t.Marker.Performance.prototype.click=function(e){var t,i,a;if(this.hasText){"number"==typeof arguments[0]&&(e={cx:arguments[0],cy:arguments[1],marker:arguments[2],panel:arguments[3]});var{cx:r,cy:n,marker:s,panel:o}=e;if(t=s.params.stx,s.attached){if((a=this.expand).rects.width-a.scrollBarWidth+a.transform.translateX<t.backOutX(r)&&t.backOutX(r)<a.rects.width+a.transform.translateX)return;this.remove(s)}else t.addToHolder(s),i=!0;s.attached=!s.attached,s.active=!s.active,i&&s.stxNodeCreator.positionPopUpNode(s)}}):console.error("highPerformanceMarkers feature requires first activating markers feature.")},h=e=>{var t,i=we;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Renderer.OHLC.requestNew=function(e,a){var r,n,s,o,l,h,c;r=null,n=a.hlc,s=a.colored,o=a.hollow,l=a.volume,h=a.histogram;for(var u=0;u<e.length;u++)switch("hist","ogr","a","m","can","d","l","e",c=e[u]){case"bar":case"candle":r=c;break;case"volume":l=!0;break;case"hollow":o=!0;break;case"colored":s=!0;break;case"histogram":"c","a","n","dle",h=!0,r="candle";break;case"hlc":"b","a","r",n=!0,r="bar";break;default:return null}return i.f3X(),null===r?null:new t.Renderer.OHLC({params:t.extend(a,{type:r,hlc:n,colored:s,hollow:o,volume:l,histogram:h})})},t.Renderer.OHLC.getChartParts=function(e,t){var a;return"fill","_colo","r_even","h","ol","l","ow","st","x_","hollow_candle_d","own","stx_hollow_candl","e_","up","stx_hollow_candl","e_eve","n","h","oll","o","w","f","ill","_color_up","stx_h","ollow_c","andle","_even","h",i.f3X(),"ollow","border_c","olor","_down","stx_ho","llo","w_candle_up","fill_color_d","own","ca","n","dl","e","stx_c","andle_shadow_down","stx_","c","andle_shadow_up","s","ha","do","w","c","a","ndl","e","c","a","n","dle","stx_","b","ar_e","ven","bo","rder","_color_down","b","a","r","b","ar","border_co","lor","b","a","r","b","a","r","s","tx_h","ist","ogram_up","histog","r","am",1,2,4,8,i.j7J(31),32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:a=i.c0C("16",32),fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"bar",drawType:"bar",style:e||"stx_bar_chart",border:"border_color",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_up",condition:t?8:1,border:"border_color_up",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_down",condition:t?a:2,border:"border_color_down",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_even",condition:t?32:4,border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:a,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:a,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_up",condition:1,border:"border_color_up"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:2,border:"border_color_down"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_even",condition:4,border:"border_color_even",skipIfPass:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:1|a,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:2|a,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:4|a,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:9,fill:"fill_color_up",border:"border_color_up"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:10,fill:"fill_color_down",border:"border_color_down"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:12,fill:"fill_color_even",border:"border_color_even"}]},t.Renderer.Bars=function(e){var t;i.T$X(),this.construct(e),(t=this.params).type="bar",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.volume=t.hollow=t.histogram=!1},t.inheritsFrom(t.Renderer.Bars,t.Renderer.OHLC,!1),i.f3X(),t.Renderer.HLC=function(e){var t;this.construct(e),t=this.params,i.f3X(),t.type="bar",t.hlc=!0,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.volume=t.hollow=t.histogram=!1},t.inheritsFrom(t.Renderer.HLC,t.Renderer.Bars,!1),t.Renderer.Shading=function(e){this.construct(e),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!1,this.shading=[],"rangechannel"==this.params.type&&(this.highLowBars=!0)},t.inheritsFrom(t.Renderer.Shading,t.Renderer.Lines,!1),t.Renderer.Shading.requestNew=function(e,i){var a,r,n;a=null,r=null;for(var s=0;s<e.length;s++)"r","angechannel","rangechannel"==(n=e[s])?a="rangechannel":"step"==n&&(r=!0);return null===a?null:new t.Renderer.Shading({params:t.extend(i,{type:a,step:r})})},t.Renderer.Shading.prototype.setShading=function(e){e.constructor!=Array&&(e=[e]),this.shading=e},t.Renderer.Shading.prototype.draw=function(){var e,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if(e=this.stx,a=this.params,r=e.panels[a.panel].chart,"rangechannel"==a.type&&(this.beenSetup?this.seriesParams.length>2&&this.removeSeries(this.seriesParams[2].id):("H","i","g","h",this.beenSetup=!0,a.display=this.seriesParams[0].display,a.yAxis=this.seriesParams[0].yAxis,n=this.seriesParams[0].color||"auto","",(s=this.seriesParams[0].symbol)&&(i.N_M(1),i.c0C(s,".")),this.removeAllSeries(!0),o=a.name,e.addSeries(null,{symbol:s,loadData:!!s,field:"High",renderer:"Shading",name:o,style:"stx_line_up",display:a.display,shareYAxis:!0}),e.addSeries(null,{symbol:s,loadData:!!s,field:"Low",renderer:"Shading",name:o,style:"stx_line_down",display:a.display,shareYAxis:!0}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:n}))),!this.shading&&!this.errTimeout){i.j7J(14),l=-i.c0C("916304431",0),1491262347,h=2;for(var C=1;i.O1W(C.toString(),C.toString().length,26098)!==l;C++)"Warning: no sh","ading scheme set.  Use myRen","derer.setShading(scheme) to set",".",console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set."),h+=2;1491262347!==i.S9Y(h.toString(),h.toString().length,35522)&&console.log(""),c=this,this.errTimeout=setTimeout((function(){i.f3X(),c.errTimeout=null}),1e4)}for(u={},d=0;d<this.seriesParams.length;d++)p={},r.series[this.seriesParams[d].id]&&(p=t.clone(r.series[this.seriesParams[d].id].parameters)),u[this.seriesParams[d].id]={parameters:t.extend(t.extend(p,a),this.seriesParams[d]),yValueCache:this.caches[this.seriesParams[d].id]};function S(e){var t,a,r;return(t=u[e])?(a=t.parameters.field,r=t.parameters.subField,i.N_M(1),i.a$j(a,r?"."+r:"")):(i.T$X(),e)}for(d in e.drawSeries(r,u,a.yAxis,this),r.legend&&"rangechannel"==a.type&&("stx_l","ine","_down",r.legend.colorMap||(r.legend.colorMap={}),m=a.display,g=[e.getCanvasColor("stx_line_up"),e.getCanvasColor("stx_line_down")],r.legend.colorMap[m]={color:g,display:m,isBase:this==e.mainSeriesRenderer}),u)this.caches[d]=u[d].yValueCache;for(d=0;d<this.shading.length;d++)"Clo","s","e",y=(f=this.shading[d]).color,"auto"==f.color&&(y=e.defaultColor),f.primary||(f.primary="Close"),!f.secondary&&this.seriesParams[0]&&(f.secondary=this.seriesParams[0].field),f.secondary&&(u[f.primary]||"Close"==f.primary)&&u[f.secondary]&&("Close"==f.primary&&a.yAxis&&a.yAxis!=r.yAxis||(v=S(f.primary).split("."),x=S(f.secondary).split("."),((b={topBand:v[0],topSubBand:v[1],topColor:f.greater||y||e.containerColor,topAxis:a.yAxis,bottomBand:x[0],bottomSubBand:x[1],bottomColor:f.lesser||y||e.containerColor,bottomAxis:"Close"==f.primary?null:a.yAxis,tension:a.tension||r.tension,opacity:.1,step:a.step}).topColor||b.bottomColor)&&(!a.highlight&&e.highlightedDraggable&&(b.opacity*=.3),t.fillIntersecting(e,a.panel,b))))},t.Renderer.Histogram=function(e){i.f3X(),this.construct(e),this.params.type="histogram",this.barsHaveWidth=this.standaloneBars=!0,this.params.yAxis&&("n","um","ber",this.params.bindToYAxis=!0,"number"==typeof this.params.yAxis.baseline&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline}))},t.inheritsFrom(t.Renderer.Histogram,t.Renderer,!1),t.Renderer.Histogram.prototype.adjustYAxis=function(){var e;(e=this.params.yAxis)&&!e.baseline&&(e.min=0,e.highValue/=this.params.heightPercentage||1)},t.Renderer.Histogram.prototype.draw=function(){var e,a,r,n;(e=t.clone(this.params)).type=e.subtype,this.useSum="stacked"==e.subtype,e.yAxis&&e.yAxis!=this.stx.chart.yAxis||(e.bindToYAxis=!0),this.stx.drawHistogram(e,this.seriesParams),a=e.yAxis&&e.yAxis.baseline,i.T$X(),a&&a.color&&("destinatio","n-over","li","n","e",r=this.stx.panels[this.params.panel],n=this.stx.pixelFromPrice(a.value,r,this.params.yAxis)-.5,this.stx.plotLine({x0:r.left,x1:r.right,y0:n,y1:n,color:a.color,type:"line",context:r.chart.context,confineToPanel:r,pattern:a.pattern||"solid",lineWidth:a.lineWidth||1,opacity:a.opacity||.8,globalCompositeOperation:"destination-over"}))},t.Renderer.Histogram.prototype.getBasis=function(e,t,a){var r,n,s;if(r=0,e&&this.useSum)for(var o=0;o<this.seriesParams.length&&("C","l","os","e",(n=this.seriesParams[o].field)!==t);o++)(s=e[n])&&"object"==typeof s&&(s=s[a||this.seriesParams[o].subField||this.stx.chart.defaultPlotField||"Close"]),s&&(r+=s);return i.f3X(),r},t.Renderer.Heatmap=function(e){this.construct(e),this.params.type="heatmap",this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!0},t.inheritsFrom(t.Renderer.Heatmap,t.Renderer,!1),t.Renderer.Heatmap.requestNew=function(e,i){var a;a=null;for(var r=0;r<e.length;r++)"heatmap"==e[r]&&(a="heatmap");return null===a?null:new t.Renderer.Heatmap({params:t.extend(i,{type:a})})},t.Renderer.Heatmap.prototype.draw=function(){this.stx.drawHeatmap(t.clone(this.params),this.seriesParams)},t.Renderer.Scatter=function(e){this.construct(e),this.standaloneBars=this.barsHaveWidth=!0,this.bounded=!0},t.inheritsFrom(t.Renderer.Scatter,t.Renderer.Lines,!1),t.Renderer.Scatter.requestNew=function(e,a){var r;i.T$X(),r=null;for(var n=0;n<e.length;n++)"scatterplot"==e[n]&&(r="scatter");return null===r?null:new t.Renderer.Scatter({params:t.extend(a,{type:r})})},t.Renderer.Scatter.prototype.drawIndividualSeries=function(e,t){var a,r;return i.f3X(),a=this.stx.panels[t.panel]||e.panel,r={colors:[]},this.stx.scatter?r=this.stx.scatter(a,t):console.warn("Error, Scatter renderer requires customChart.js"),r}},c=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateAccumulationDistribution=function(e,t){var i,a,r,n,s,o,l=we;i=2;for(var h=1;-328969262!==l.S9Y(h.toString(),h.toString().length,48771);h++)a=t.chart.scrubbed,i+=2;-1861241339!==l.O1W(i.toString(),i.toString().length,19848)&&(a=t.chart.scrubbed);for(var c=t.startFrom;c<a.length;c++)if("R","es","ult ","Res","ul","t"," ",c){if((r=a[c]).futureTick)break;l.N_M(14),n=a[l.c0C(c,1)],s=0,r.Close>n.Close?s=r.Close-Math.min(r.Low,n.Close):r.Close<n.Close&&(s=r.Close-Math.max(r.High,n.Close)),t.inputs["Use Volume"]&&(s*=r.Volume),(o=n["Result "+t.name])||(o=0),o+=s,isNaN(r.Close)||(r["Result "+t.name]=o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:t.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}}})):console.error("accumulationDistribution feature requires first activating studies feature.")},u=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","#F","F000","0",t.Studies.calculateADX=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=we;v.f3X(),t.Studies.calculateStudyATR(e,i),a=i.chart.scrubbed,r=2;for(var x=1;-2025389382!==v.O1W(x.toString(),x.toString().length,53330);x++)n=i.days,(+(s=parseInt(i.inputs[""],43))||4==s)&&(s=n),r+=2;if(525802871!==v.O1W(r.toString(),r.toString().length,233)&&(n=i.days,-(s=parseInt(i.inputs[""],50))&&6!=s&&(s=n)),n=i.days,(s=parseInt(i.inputs["Smoothing Period"],10))||0===s||(s=n),a.length<i.days+1)i.error=!0;else{o=0,l=0,h=0,c=0;for(var b=Math.max(1,i.startFrom);b<a.length;b++){if("_sm","+","D","M ",u=a[b],(d=Math.max(0,u.High-a[b-1].High))>(p=Math.max(0,a[b-1].Low-u.Low))?p=0:d=p>d?0:p=0,b<=n)l+=d,h+=p,o+=u["True Range "+i.name];else{"_","sm","TR ","_","s","m-","DM ","_","s","m+","DM ",v.N_M(55);var C=v.c0C(7,4,13,2);v.j7J(52);var S=v.a$j(1,4,2);l=a[b-C]["_sm+DM "+i.name]*(n-S)/n+d,v.N_M(9);var w=v.a$j(44,15,3);v.j7J(28);var D=v.c0C(1709,6,0,19,15);h=a[b-w]["_sm-DM "+i.name]*(n-D)/n+p,v.N_M(110);var k=v.c0C(5,4,16,1);v.N_M(34);var M=v.c0C(20,1,19);o=a[b-k]["_smTR "+i.name]*(n-M)/n+u["True Range "+i.name]}if(u["_sm+DM "+i.name]=l,u["_sm-DM "+i.name]=h,u["_smTR "+i.name]=o,!(b<n)){if(v.N_M(111),m=v.c0C(l,o,100),v.j7J(111),g=v.c0C(h,o,100),v.j7J(61),f=v.c0C(8,4,98)*Math.abs(m-g)/(m+g),u["+DI "+i.name]=m,u["-DI "+i.name]=g,!1!==i.inputs.Series&&s)if(b<n+s-1){if(b==i.startFrom)for(var T=n;T<i.startFrom;T++){v.j7J(112),c+=v.a$j(96,99,109,13)*Math.abs(a[T]["+DI "+i.name]-a[T]["-DI "+i.name])/(a[T]["+DI "+i.name]+a[T]["-DI "+i.name])}c+=f}else if(b==n+s-1)v.j7J(7),u["ADX "+i.name]=v.a$j(c,s);else{"A","D","X"," ",v.j7J(14);var A=v.c0C(13,12);v.j7J(21);var _=v.c0C(7,2,3);u["ADX "+i.name]=(a[b-A]["ADX "+i.name]*(s-_)+f)/s}if(i.inputs.Histogram){if("+","DI ",y=i.name+"_hist",!u["+DI "+i.name]&&0!==u["+DI "+i.name])continue;if(!u["-DI "+i.name]&&0!==u["-DI "+i.name])continue;u[y]=u["+DI "+i.name]-u["-DI "+i.name],!1===i.inputs.Series&&("+","DI"," ",u["+DI "+i.name]=null,u["-DI "+i.name]=null),i.outputMap[y]=""}}}}},t.Studies.displayADX=function(e,i,a){var r,n,s,o,l,h,c;r=i.underlay?.3:i.inputs.Series?.4:1,i.inputs.Series&&i.inputs.Shading&&(n="+DI "+i.name,s="-DI "+i.name,o=t.Studies.determineColor(i.outputs[i.outputMap[n]]),l=t.Studies.determineColor(i.outputs[i.outputMap[s]]),h=i.getYAxis(e),c={topBand:n,bottomBand:s,topColor:o,bottomColor:l,skipTransform:e.panels[i.panel].name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&e.highlightedDraggable&&(c.opacity*=.3),t.fillIntersecting(e,i.panel,c)),i.inputs.Histogram&&t.Studies.createHistogram(e,i,a,!1,r),!1!==i.inputs.Series?t.Studies.displaySeriesAsLine(e,i,a):i.inputs.Series||i.inputs.Histogram||e.displayErrorAsWatermark(i.panel,e.translateIf(i.name)+": "+e.translateIf("Nothing to display"))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ADX:{name:"ADX/DMS",calculateFN:t.Studies.calculateADX,seriesFN:t.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("adx feature requires first activating studies feature.")},d=e=>{var t,i=we;i.f3X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#FF000","0","#","00DD","00","#00","00F","F",t.Studies.calculateAlligator=function(e,a){var r,n,s,o,l;if("Gato","r","Li","ps Perio","d","J","aw"," Period",r={J:Number(a.inputs["Jaw Period"]),T:Number(a.inputs["Teeth Period"]),L:Number(a.inputs["Lips Period"])},(n=a.chart.scrubbed).length<Math.max(r.J,r.T,r.L)+1)a.error=!0;else{("Gator"===a.type||a.inputs["Show Lines"])&&("hl","/","2","Tee","th ","Offset","h","l/","2","J","a","w ","Offset",t.Studies.MA("welles wilder",r.J,"hl/2",a.inputs["Jaw Offset"],"Jaw",e,a),t.Studies.MA("welles wilder",r.T,"hl/2",a.inputs["Teeth Offset"],"Teeth",e,a),t.Studies.MA("welles wilder",r.L,"hl/2",a.inputs["Lips Offset"],"Lips",e,a));for(var h=a.startFrom;h<n.length;h++)if(n[h]&&("Gator"==a.type&&("_h","ist1","J","a","w"," ",s=n[h]["Jaw "+a.name],o=n[h]["Lips "+a.name],((l=n[h]["Teeth "+a.name])||0===l)&&((s||0===s)&&(i.N_M(14),n[h][a.name+"_hist1"]=Math.abs(i.c0C(s,l))),(o||0===o)&&(i.N_M(14),n[h][a.name+"_hist2"]=-Math.abs(i.c0C(l,o)))),a.outputMap={},a.outputMap[a.name+"_hist1"]="",a.outputMap[a.name+"_hist2"]=""),a.inputs["Show Fractals"])){if(!(n[h-2]&&n[h-1]&&n[h]&&n[h+1]&&n[h+2]))continue;n[h-2].High&&n[h-1].High&&n[h].High&&n[h+1].High&&n[h+2].High&&n[h].High>n[h-1].High&&n[h].High>n[h-2].High&&n[h].High>n[h+1].High&&n[h].High>n[h+2].High&&("F","ract","a","l High ",n[h]["Fractal High "+a.name]=1),n[h-2].Low&&n[h-1].Low&&n[h].Low&&n[h+1].Low&&n[h+2].Low&&n[h].Low<n[h-1].Low&&n[h].Low<n[h-2].Low&&n[h].Low<n[h+1].Low&&n[h].Low<n[h+2].Low&&("Fractal"," Low ",n[h]["Fractal Low "+a.name]=1)}}},t.Studies.displayAlligator=function(e,a,r){var n;if(n=a.getContext(e),a.inputs["Show Lines"]&&t.Studies.displaySeriesAsLine(e,a,r),a.inputs["Show Fractals"]){e.startClip(),n.globalAlpha=a.underlay?.3:1,!a.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var s=2;s<r.length-2;s++)r[s]&&("l","ow","Frac","ta","l Low"," ","hig","h",r[s]["Fractal High "+a.name]&&o("high",s),r[s]["Fractal Low "+a.name]&&o("low",s));e.endClip()}function o(t,i){var a,o;o=e.chart.panel.yAxis.flipped,"high"==t?("b","ot","tom",n.fillStyle=e.defaultColor,n.textBaseline=o?"top":"bottom",a=e.pixelFromPrice(r[i].High),n.fillText(o?"":"",e.pixelFromBar(s,e.chart)-n.measureText("").width/2+1,o?a+5:a-5)):"low"==t&&("t","o","p","bott","o","m",n.fillStyle=e.defaultColor,n.textBaseline=o?"bottom":"top",a=e.pixelFromPrice(r[i].Low),n.fillText(o?"":"",e.pixelFromBar(s,e.chart)-n.measureText("").width/2+1,o?a-5:a+5))}i.T$X()},t.Studies.displayGator=function(e,a,r){var n,s,o,l,h,c,u,d,p;n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),l=e.pixelFromPrice(0,n,o),i.j7J(113);var m=i.c0C(38,2,8,1,9);(h=e.layout.candleWidth-m)<2&&(h=1),c=t.Studies.determineColor(a.outputs["Increasing Bar"]),u=t.Studies.determineColor(a.outputs["Decreasing Bar"]),e.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),s.fillStyle="#CCCCCC",e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3),i.f3X();for(var g=0;g<r.length;g++)if(d=r[g],i.j7J(114),p=r[i.a$j(g,"1",1)],d)for(var f=1;f<=2;f++)"_","hi","s","t",p||(p=e.getPreviousBar(e.chart,a.name+"_hist"+f,g)),p?Math.abs(p[a.name+"_hist"+f])<Math.abs(d[a.name+"_hist"+f])?s.fillStyle=c:Math.abs(p[a.name+"_hist"+f])>Math.abs(d[a.name+"_hist"+f])&&(s.fillStyle=u):s.fillStyle="#CCCCCC",d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(g,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[a.name+"_hist"+f],n,o)-l));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Alligator:{name:"Alligator",overlay:!0,seriesFN:t.Studies.displayAlligator,calculateFN:t.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:"#00DD00"}},Gator:{name:"Gator Oscillator",seriesFN:t.Studies.displayGator,calculateFN:t.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0}})):console.error("alligator feature requires first activating studies feature.")},p=e=>{var t,i,a,r=we;if((t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)"0 ","to"," 100","Aroo","n",t.Studies.calculateAroon=function(e,t){var i,a,n,s,o,l,h,c,u,d,p,m;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if(a=0,n=0,s=null,o=null,t.startFrom>0){"_st","at","e"," ",r.N_M(3);var g=r.a$j(24,18,7);(l=i[t.startFrom-g]["_state "+t.name])&&(a=l[0],r.j7J(31),n=l[r.c0C("1",0)],s=l[2],o=l[3])}for(var f=t.startFrom;f<i.length&&("_stat","e ","A","r","oon"," Down ","Aroon"," ","Dow","n ",!(c=i[f]).futureTick);f++){if(null===s&&(s=c.High),null===o&&(o=c.Low),(s=Math.max(s,c.High))==c.High)a=0;else if(++a>t.days)for(s=c.High,a=0,h=1;h<=t.days;h++)(s=Math.max(s,i[f-h].High))==i[f-h].High&&(a=h);if((o=Math.min(o,c.Low))==c.Low)n=0;else if(++n>t.days)for(o=c.Low,n=0,h=1;h<=t.days;h++)(o=Math.min(o,i[f-h].Low))==i[f-h].Low&&(n=h);u=!isNaN(c.High),d=!isNaN(c.Low),r.j7J(61);var y=r.c0C(13,1,87);r.j7J(0),p=y*(r.c0C(126,8,15,9)-a/t.days),u&&(c["Aroon Up "+t.name]=p),r.N_M(14),m=r.c0C(106,6)*(1-n/t.days),d&&(c["Aroon Down "+t.name]=m),u&&d&&(c["Aroon Oscillator "+t.name]=c["Aroon Up "+t.name]-c["Aroon Down "+t.name]),c["_state "+t.name]=[a,n,s,o]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Aroon:{name:"Aroon",range:"0 to 100",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Up":"#00DD00","Aroon Down":"#FF0000"}},"Aroon Osc":{name:"Aroon Oscillator",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}}});else{-809326854,r.N_M(4),i=r.c0C("128905528",24),a=2;for(var n=1;-809326854!==r.O1W(n.toString(),n.toString().length,33224);n++)console.error(""),a+=2;r.O1W(a.toString(),a.toString().length,79149)!==i&&console.error(""),console.error("aroon feature requires first activating studies feature.")}},m=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("ATR Trailing Stop","s","au","to","AT","R Bands",t.Studies.calculateATRBands=function(e,a){var r,n,s;t.Studies.calculateStudyATR(e,a),(r=a.inputs.Field)&&"field"!=r||(r="Close"),i.j7J(4),n=-i.c0C("972743568",0),s=2;for(var o=1;i.S9Y(o.toString(),o.toString().length,75126)!==n;o++)t.Studies.calculateGenericEnvelope(e,a,a.inputs.Shift,r,""*a.name),i.j7J(14),s+=i.c0C("2",0);1560178187!==i.S9Y(s.toString(),s.toString().length,59413)&&t.Studies.calculateGenericEnvelope(e,a,a.inputs.Shift,r,""/a.name),t.Studies.calculateGenericEnvelope(e,a,a.inputs.Shift,r,"ATR "+a.name)},t.Studies.calculateSTARCBands=function(e,i){t.Studies.calculateStudyATR(e,i),t.Studies.MA("simple",i.inputs["MA Period"],"Close",0,"_MA",e,i),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Multiplier,"_MA "+i.name,"ATR "+i.name)},t.Studies.calculateATRStops=function(e,a){var r,n,s,o,l,h,c,u;if(r=a.chart.scrubbed,i.f3X(),r){t.Studies.calculateStudyATR(e,a),n=a.inputs.HighLow;for(var d=Math.max(a.startFrom-1,1);d<r.length-1;d++)s=r[d],i.j7J(14),o=r[i.a$j(d,1)],(l=s["Buy Stops "+a.name])||(l=s["Sell Stops "+a.name]),l||(l=0),s&&o&&(c=h=s.Close,u=s["ATR "+a.name]*a.inputs.Multiplier,s.Close>l&&o.Close>l?(n&&(h=s.High),i.j7J(14),c=Math.max(l,i.a$j(h,u))):s.Close<=l&&o.Close<=l?(n&&(h=s.Low),i.N_M(1),c=Math.min(l,i.c0C(h,u))):s.Close>l?(n&&(h=s.High),i.j7J(14),c=i.a$j(h,u)):s.Close<=l&&(n&&(h=s.Low),i.N_M(1),c=i.a$j(h,u)),h<=c?(i.j7J(1),r[i.a$j(d,1)]["Buy Stops "+a.name]=c,i.j7J(1),delete r[i.a$j(d,1)]["Sell Stops "+a.name]):h>c&&("Buy S","top","s ","Sell ","Stops ",i.j7J(1),r[i.a$j(d,1)]["Sell Stops "+a.name]=c,i.N_M(115),delete r[i.a$j("1",d,0)]["Buy Stops "+a.name]),i.j7J(1),r[i.a$j(d,1)]["All Stops "+a.name]=c);a.referenceOutput="All Stops",a.outputMap={},a.outputMap["All Stops "+a.name]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ATR:{name:"Average True Range",calculateFN:t.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!0},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:.1,step:.1}}},"STARC Bands":{name:"STARC Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":"auto"},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:t.Studies.displayPSAR2,calculateFN:t.Studies.calculateATRStops,inputs:{Period:21,Multiplier:3,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":"#FF0000","Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("atr feature requires first activating studies feature.")},g=e=>{var t,i,a=we;a.T$X(),t=2;for(var r=1;610765755!==a.S9Y(r.toString(),r.toString().length,84544);r++)i="undefined"!=typeof _CIQ?_CIQ:e.CIQ,t+=2;-1092841126!==a.O1W(t.toString(),t.toString().length,97768)&&(i=""==-_CIQ?_CIQ:e.CIQ),i.Studies?(i.Studies.calculateAwesomeOscillator=function(e,t){var r,n;if("_","hi","s","t","_","MA5","s","i","mple",(r=t.chart.scrubbed).length<33)t.error=!0;else{i.Studies.MA("simple",5,"hl/2",0,"_MA5",e,t),2070076368,-1587263358,n=2;for(var s=1;2070076368!==a.O1W(s.toString(),s.toString().length,21402);s++)"_M","A","3","4",i.Studies.MA("_MA34",45,"_MA34",1,"_MA34",e,t),n+=2;-1587263358!==a.O1W(n.toString(),n.toString().length,85914)&&i.Studies.MA("_MA34",51,"_MA34",0,"_MA34",e,t),i.Studies.MA("simple",34,"hl/2",0,"_MA34",e,t),a.T$X();for(var o=Math.max(t.startFrom,33);o<r.length;o++)"_MA5"," ",r[o]&&(r[o][t.name+"_hist"]=r[o]["_MA5 "+t.name]-r[o]["_MA34 "+t.name]);t.outputMap={},t.outputMap[t.name+"_hist"]=""}},i.Studies.displayAwesomeOscillator=function(e,t,r){var n,s,o,l,h,c,u,d,p;n=e.panels[t.panel],s=t.getContext(e),o=t.getYAxis(e),l=e.pixelFromPrice(0,n,o),a.j7J(15);var m=a.c0C(0,12,10);(h=e.layout.candleWidth-m)<2&&(h=1),c=i.Studies.determineColor(t.outputs["Increasing Bar"]),u=i.Studies.determineColor(t.outputs["Decreasing Bar"]),e.canvasColor("stx_histogram"),t.underlay||(s.globalAlpha=1),s.fillStyle="#CCCCCC",e.startClip(t.panel),!t.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var g=0;g<r.length;g++)"_","h","is","t",d=r[g],a.j7J(14),(p=r[a.c0C(g,1)])||(p=e.getPreviousBar(e.chart,t.name+"_hist",g)),d&&(p&&(p[t.name+"_hist"]<d[t.name+"_hist"]?s.fillStyle=c:p[t.name+"_hist"]>d[t.name+"_hist"]&&(s.fillStyle=u)),d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(g,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[t.name+"_hist"],n,o)-l)));e.endClip()},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Awesome:{name:"Awesome Oscillator",seriesFN:i.Studies.displayAwesomeOscillator,calculateFN:i.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("awesomeOscillator feature requires first activating studies feature.")},f=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("-","1"," to 1",t.Studies.calculateBalanceOfPower=function(e,i){var a,r;if("Re","sult","_R","at","io"," ",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var n=i.startFrom;n<a.length;n++)(r=a[n])["_Ratio "+i.name]=r.Close-r.Open,r.High-r.Low!=0&&(r["_Ratio "+i.name]/=r.High-r.Low);we.f3X(),t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Ratio "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bal Pwr":{name:"Balance of Power",range:"-1 to 1",centerline:0,calculateFN:t.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":"ma"}}})):("ba","lanceOfPower feature requires first activa","ting studies feature.",console.error("balanceOfPower feature requires first activating studies feature."))},y=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Bollinge","r Bandwidth","a","u","t","o","aut","o","a","u","to","au","t","o","fi","e","l","d",t.Studies.calculateBollinger=function(e,i){var a;we.f3X(),(a=i.inputs.Field)&&"field"!=a||(a="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"_MA",e,i),i.std=new t.Studies.StudyDescriptor(i.name,"STD Dev",i.panel),i.std.chart=i.chart,i.std.startFrom=i.startFrom,i.std.days=i.days,i.std.inputs={Field:a,"Standard Deviations":1,Type:i.inputs["Moving Average Type"]},i.std.outputs={"_STD Dev":null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.calculateGenericEnvelope(e,i,i.inputs["Standard Deviations"],"_MA "+i.name,"_STD Dev "+i.name),"Boll %b"==i.type&&(i.zoneOutput="%b")},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:t.Studies.calculateBollinger,seriesFN:t.Studies.displayChannel,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"Bollinger Bands Top":"auto","Bollinger Bands Median":"auto","Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:"auto"}},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}}})):("bol","linger feature requires first activa","ting studies f","eature.",console.error("bollinger feature requires first activating studies feature."))},v=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.f3X(),t.Studies?("a","ut","o",t.Studies.calculateCCI=function(e,a){var r,n,s,o;if("hlc",i.f3X(),"/","3",(r=a.chart.scrubbed).length<a.days+1){-750700883,-1276999249,n=2;for(var l=1;-750700883!==i.S9Y(l.toString(),l.toString().length,29259);l++)a.error=!1,n+=2;-1276999249!==i.S9Y(n.toString(),n.toString().length,32914)&&(a.error=!0)}else{t.Studies.MA("simple",a.days,"hlc/3",0,"MA",e,a);for(var h=Math.max(a.startFrom,a.days-1);h<r.length;h++)if("Re","sult ",s=r[h]){o=0;for(var c=0;c<a.days;c++)o+=Math.abs(r[h-c]["hlc/3"]-s["MA "+a.name]);o/=a.days,Math.abs(o)<1e-8?s["Result "+a.name]=0:s["Result "+a.name]=(s["hlc/3"]-s["MA "+a.name])/(.015*o)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{CCI:{name:"Commodity Channel Index",calculateFN:t.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:"auto"}},attributes:{Period:{min:2}}}})):console.error("cci feature requires first activating studies feature.")},x=e=>{var t,i=we;i.f3X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateCenterOfGravity=function(e,t){var a,r,n,s,o;if("fi","e","ld",(a=t.chart.scrubbed).length<t.days)t.error=!0;else{(r=t.inputs.Field)&&"field"!=r||(r="Close");for(var l=Math.max(t.startFrom,t.days-1);l<a.length;l++){i.j7J(5),n=i.a$j(1,"0"),s=0;for(var h=0;h<t.days;h++)i.N_M(14),o=a[i.c0C(l,h)][r],i.j7J(116),n-=i.a$j(o,"1",h),s+=o;s&&(i.j7J(7),a[l]["Result "+t.name]=i.a$j(n,s))}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{COG:{name:"Center Of Gravity",calculateFN:t.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"}}})):console.error("centerOfGravity feature requires first activating studies feature.")},b=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateChaikinMoneyFlow=function(e,t){var i,a,r,n,s=we;if((i=t.chart.scrubbed).length<t.days)t.error=!0;else{a=0,r=0,s.j7J(117);var o=s.c0C(36,12,17,1,8);n=i[t.startFrom-o],s.T$X(),n&&(n["_sumMF "+t.name]&&(a=n["_sumMF "+t.name]),n["_sumV "+t.name]&&(r=n["_sumV "+t.name]));for(var l=t.startFrom;l<i.length;l++){if(i[l].High==i[l].Low)i[l]["_MFV "+t.name]=0;else{s.j7J(118);var h=s.c0C(16,2,16,388,13);i[l]["_MFV "+t.name]=i[l].Volume*(h*i[l].Close-i[l].High-i[l].Low)/(i[l].High-i[l].Low)}a+=i[l]["_MFV "+t.name],r+=i[l].Volume,l>t.days-1&&(a-=i[l-t.days]["_MFV "+t.name],(r-=i[l-t.days].Volume)&&(s.j7J(7),i[l]["Result "+t.name]=s.c0C(a,r))),i[l]["_sumMF "+t.name]=a,i[l]["_sumV "+t.name]=r}}},t.Studies.calculateChaikinVolatility=function(e,i){var a,r,n;if(we.T$X(),(a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(r=i.startFrom;r<a.length&&("_Hig","h-Lo","w ",!a[r].futureTick);r++)a[r]["_High-Low "+i.name]=a[r].High-a[r].Low;for(t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_High-Low "+i.name,0,"_MA",e,i),(n=i.inputs["Rate Of Change"])||(n=i.days),r=Math.max(i.startFrom,n);r<a.length;r++)if(a[r-n]["_MA "+i.name]){if(a[r].futureTick)break;we.j7J(14);var s=we.c0C(3,2);a[r]["Result "+i.name]=100*(a[r]["_MA "+i.name]/a[r-n]["_MA "+i.name]-s)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:t.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:t.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}}})):("chai","kin feature requires first activating studies feature.",console.error("chaikin feature requires first activating studies feature."))},C=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","uto","Vari","able",t.Studies.prettify.variable="vma",t.Studies.movingAverage.conversions.vma="variable",t.Studies.movingAverage.translations.variable="Variable",t.Studies.movingAverage.typeMap.vma="Variable",t.Studies.movingAverage.typeMap.variable="Variable",t.Studies.calculateChandeForecast=function(e,i){var a,r,n,s=we;if(s.T$X(),"M","A","ti","me series",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("time series",i.days,r,0,"MA",e,i);for(var o=Math.max(1,i.startFrom);o<a.length;o++){"ob","j","e","ct",(n=a[o][r])&&"object"==typeof n&&(n=n[i.subField]),s.j7J(82);var l=s.a$j(4,2,94);s.j7J(17);var h=s.c0C(120,6,18,13);a[o]["Result "+i.name]=l*(h-a[o]["MA "+i.name]/n)}}},t.Studies.calculateChandeMomentum=function(e,t){var i,a,r,n,s,o,l,h,c,u,d=we;for(var p in"Cl","ose",i=t.name,t.outputs)d.N_M(82),i=d.a$j(i," ",p);if((a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(r=t.inputs.Field)&&"field"!=r||(r="Close"),n=0,d.T$X(),d.j7J(31),s=d.c0C("0",64),o=[];for(var m=t.startFrom-t.days+1;m<a.length;m++)"ob","j","e","ct",m<1||(l=a[m][r],d.N_M(14),h=a[d.c0C(m,1)][r],l&&"object"==typeof l&&(l=l.Close),h&&"object"==typeof h&&(h=h.Close),void 0!==h&&(d.N_M(14),c=d.a$j(l,h),o.push(c),n+=c,s+=Math.abs(c),o.length==t.days&&(d.N_M(111),a[m][i]=d.c0C(n,s,100),n-=u=o.shift(),s-=Math.abs(u))))}},t.Studies.calculateMovingAverageVariable=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=we;i.inputs.Type,a=i.chart.scrubbed,x.N_M(0);var b=x.a$j(139,3,36,4);x.j7J(119);var C=x.a$j(12,79,18,13);for(var S in r=b/(i.days+C),n=null,s=i.name,i.outputs)x.j7J(82),s=x.a$j(s," ",S);for((o=i.inputs.Field)&&"field"!=o||(o="Close"),i.cmo=new t.Studies.StudyDescriptor(i.name,"cmo",i.panel),i.cmo.chart=i.chart,i.cmo.days=9,i.cmo.inputs={Field:o},i.cmo.startFrom=i.startFrom,i.cmo.outputs={_CMO:null},t.Studies.calculateChandeMomentum(e,i.cmo),l=parseInt(i.inputs.Offset,10),x.T$X(),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}for(null===n&&(n=d=0),m=[],h=d;h<a.length;h++)if("_","C","MO ","_CM","O ","ob","ject",(c=(g=a[h])[o])&&"object"==typeof c&&(c=c[i.subField]),f=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c){if(g["_CMO "+i.name]||0===g["_CMO "+i.name]){x.N_M(120);var w=x.a$j(12,40,12,6);y=Math.abs(g["_CMO "+i.name])/w,x.j7J(121),n=v=x.a$j(y,r,c,r,y,1,n),h<i.days&&(v=null),f?f[s]=v:h+l>=a.length&&((u={})[s]=v,m.push(u))}}else f?f[s]=null:h+l>=a.length&&((u={})[s]=null,m.push(u));i.appendFutureTicks(e,m)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:t.Studies.calculateChandeForecast,inputs:{Period:14,Field:"field"}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:t.Studies.calculateChandeMomentum,inputs:{Period:9},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:"auto"}}}})):("chande feature requires first activating studie","s f","eature.",console.error("chande feature requires first activating studies feature."))},S=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateChoppiness=function(e,i){var a,r,n,s=we;function o(e,t){var i,r;s.N_M(27);var n=s.a$j(17,18);i=Number.MAX_VALUE*n,r=Number.MAX_VALUE;for(var o=t-e+1;o<=t;o++)o<0||(i=Math.max(i,a[o].High),r=Math.min(r,a[o].Low));return[r,i]}if(t.Studies.calculateStudyATR(e,i),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else for(var l=Math.max(i.startFrom,i.days);l<a.length;l++)if(r=a[l]){if(r.futureTick)break;if(n=o(i.days,l),r["Sum True Range "+i.name]){"Sum Tru","e Rang","e ","Resul","t ",s.N_M(3);var h=s.c0C(1414,14,1500);s.j7J(122);var c=s.c0C(0,0,4,4);r["Result "+i.name]=h*Math.log(r["Sum True Range "+i.name]/Math.max(1e-6,n[c]-n[0]))/Math.log(i.days)}else isNaN(r)||(r["Result "+i.name]=0)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Choppiness:{name:"Choppiness Index",calculateFN:t.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:50,step:"0.1"}}}})):("choppi","ness feature requ","ires first activating studies feature.",console.error("choppiness feature requires first activating studies feature."))},w=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.T$X(),t.Studies?t.Studies.initPriceRelative?("S","P","Y","S","P","Y","-1 to ","1",t.Studies.calculateCorrelationCoefficient=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f;if(a=t.chart.scrubbed,i.T$X(),r=t.days,a.length<r+1)t.error=!0;else{if(t.compare=t.inputs["Compare To"],t.compare)t.compare=[t.compare];else for(var y in t.compare=[],t.outputs={},t.outputMap={},e.chart.series)if((n=e.chart.series[y]).parameters.color){"Resul","t"," ",t.compare.push(n.display),t.outputs["Result "+n.display]=n.parameters.color,i.j7J(123);i.c0C(1,11,1,4084,27);i.j7J(14);var v=i.a$j(18,17);i.N_M(93);var x=i.a$j(5,4,91,0,14);i.j7J(1);var b=i.c0C(841,5046);i.N_M(124);var C=i.c0C(1430,11,1536,16,17);i.N_M(125);var S=i.c0C(5,20,19,4,3938);t.outputMap["Result "+n.display+("17.03"*v<="5429"*x?" ":b<"6590"<<C?S:3120)+t.name]="Result "+n.display}if(t.compare.length)for(var w=0;w<t.compare.length;w++){i.j7J(29),s=i.a$j(0,"0"),i.j7J(14),o=i.a$j("0",0),l=0,i.j7J(5),h=i.c0C(1,"0"),c=0,u=t.compare[w],d=0;for(var D=t.startFrom-r;D<a.length;D++)if("_","t","emp","s ",a[D]){if((p=a[D][u])&&"object"==typeof p&&(p=p.Close),p||0===p||(D>0&&a[D-1]&&a[D-1]["_temps "+t.name]&&a[D-1]["_temps "+t.name].c?p=a[D-1]["_temps "+t.name].c:(i.j7J(14),p=i.a$j("0",0))),p&&"object"==typeof p&&(p=p.Close),a[D]["_temps "+t.name]={},s+=a[D]["_temps "+t.name].b=a[D].Close,o+=a[D]["_temps "+t.name].c=p,l+=a[D]["_temps "+t.name].b2=Math.pow(a[D].Close,2),i.j7J(46),h+=a[D]["_temps "+t.name].c2=Math.pow(p,i.a$j("2",0)),c+=a[D]["_temps "+t.name].bc=a[D].Close*p,d>=r){"_","t","emps ",s-=a[D-r]["_temps "+t.name].b,o-=a[D-r]["_temps "+t.name].c,l-=a[D-r]["_temps "+t.name].b2,h-=a[D-r]["_temps "+t.name].c2,c-=a[D-r]["_temps "+t.name].bc,i.N_M(3);var k=i.c0C(8,10,0);m=l/r-Math.pow(s/r,k),i.j7J(66);var M=i.a$j(15,4,20,37);g=h/r-Math.pow(o/r,M),i.N_M(34);var T=i.a$j(9,1,7);f=(c/r-s*o/Math.pow(r,T))/Math.sqrt(m*g),a[D]["Result "+u+" "+t.name]=f}d++}}else t.error="Correlation Coefficient requires at least one comparison symbol"}},t.Studies.calculatePerformance=function(e,a){var r,n,s;if("Co","mparis","on Sy","mbol",r=a.chart.scrubbed,(n=a.inputs["Comparison Symbol"].toUpperCase())||(n=a.study.inputs["Comparison Symbol"]),a.days||(a.days=a.study.inputs.Period),r.length<a.days+1)a.error=!0;else{i.T$X(),t.Studies.MA("ma",a.days,"Close",0,"_MA Base",e,a),t.Studies.MA("ma",a.days,n,0,"_MA Comp",e,a);for(var o=a.startFrom;o<r.length;o++)(s=r[o][n])&&(s.Close||0===s.Close)&&(s=s.Close),r[o]["Result "+a.name]=r[o].Close/s*(r[o]["_MA Comp "+a.name]/r[o]["_MA Base "+a.name])}},t.Studies.calculateBeta=function(e,a){var r,n,s,o;if("m","a","m","a","Compa",i.T$X(),"rison Sym","bol","Compariso","n Sym","bol",r=a.chart.scrubbed,(n=a.inputs["Comparison Symbol"].toUpperCase())||(n=a.study.inputs["Comparison Symbol"]),a.days||(a.days=a.study.inputs.Period),r.length<a.days+1)a.error=!0;else{for(var l=Math.max(a.startFrom,1);l<r.length;l++){i.N_M(102);var h=i.c0C(12,13,6,18);i.j7J(27);var c=i.a$j(6,5);r[l]["_BaseChange "+a.name]=r[l].Close/r[l-h].Close-c,(s=r[l][n])&&(s.Close||0===s.Close)&&(s=s.Close),i.j7J(14),(o=r[i.a$j(l,1)][n])&&(o.Close||0===o.Close)&&(o=o.Close),i.j7J(35),r[l]["_CompChange "+a.name]=i.a$j(1,s,o)}for(t.Studies.MA("ma",a.days,"_BaseChange "+a.name,0,"_MA Base",e,a),t.Studies.MA("ma",a.days,"_CompChange "+a.name,0,"_MA Comp",e,a),l=Math.max(a.startFrom,a.days);l<r.length;l++)"_CompChange"," ","_","MA Base ",r[l]["_COVARn "+a.name]=(r[l]["_BaseChange "+a.name]-r[l]["_MA Base "+a.name])*(r[l]["_CompChange "+a.name]-r[l]["_MA Comp "+a.name]),r[l]["_VARn "+a.name]=Math.pow(r[l]["_CompChange "+a.name]-r[l]["_MA Comp "+a.name],2);for(t.Studies.MA("ma",a.days,"_COVARn "+a.name,0,"_COVAR",e,a),t.Studies.MA("ma",a.days,"_VARn "+a.name,0,"_VAR",e,a),l=Math.max(a.startFrom,2*a.days-1);l<r.length;l++)"_VAR"," ",r[l]["Result "+a.name]=r[l]["_COVAR "+a.name]/r[l]["_VAR "+a.name]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:t.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Performance Index",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePerformance,inputs:{Period:120,"Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0}})):console.error("comparisonStudies feature requires first activating priceRelative feature."):console.error("comparisonStudies feature requires first activating studies feature.")},D=e=>{var t,i,a,r=we;if("und","efi","n","ed",r.f3X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies){"f","i","e","ld",t.Studies.calculateCoppock=function(e,i){var a,n,s,o,l,h,c;if("_","Sum"," ","wei","g","h","ted","Short ","RoC","L","ong R","oC",a=i.chart.scrubbed,(n=i.inputs.Field)&&"field"!=n||(n="Close"),(s=parseInt(i.inputs["Long RoC"],10))||(s=14),(o=parseInt(i.inputs["Short RoC"],10))||(o=11),(l=i.days)||(l=10),!(s<o))if(a.length<Math.max(o,s,l)+1)i.error=!0;else{for(var u=Math.max(i.startFrom,s);u<a.length;u++)if(r.N_M(14),h=a[r.a$j(u,o)][n],r.j7J(14),c=a[r.c0C(u,s)][n],h&&c){r.j7J(118);var d=r.a$j(18,4,6,20,6);r.N_M(126);var p=r.a$j(19,8,2,245,9);a[u]["_Sum "+i.name]=d*(a[u][n]/h+a[u][n]/c-p)}t.Studies.MA("weighted",l,"_Sum "+i.name,0,"Result",e,i)}},r.j7J(5),i=r.c0C(1,"251709666"),1207877467,a=2;for(var n=1;r.S9Y(n.toString(),n.toString().length,55926)!==i;n++)"Lo","ng R","oC",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Coppock:{name:"Long RoC",calculateFN:t.Studies.calculateCoppock,inputs:{Period:64,Field:"Long RoC","Short RoC":73,"Long RoC":21}}}),a+=2;1207877467!==r.S9Y(a.toString(),a.toString().length,70280)&&(t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Coppock:{name:"Long RoC",calculateFN:t.Studies.calculateCoppock,inputs:{Period:64,Field:"Long RoC","Short RoC":73,"Long RoC":21}}})),t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Coppock:{name:"Coppock Curve",calculateFN:t.Studies.calculateCoppock,inputs:{Period:10,Field:"field","Short RoC":11,"Long RoC":14}}})}else"coppock feature requires first activatin","g"," studies feature.",console.error("coppock feature requires first activating studies feature.")},k=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","cl","ose","D","a","r","vas Box",t.Studies.calculateDarvas=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=we;a="A",a+="D",a+="V",r="L",r+="o",r+="s",r+="s",n=i.chart.scrubbed,s=0,o=parseInt(i.inputs["ATH Lookback Period"],10),i.inputs["Volume Spike"]&&("V","olume",t.Studies.MA("simple",o,"Volume",0,"ADV",e,i)),x.N_M(16);var b=x.c0C(7,20,0,17);for(l=parseFloat(i.inputs["Volume % of Avg"])/("100"|b),h="none",c={},u=null,d=null,p=null,m=parseFloat(i.inputs["Level Offset"]),!1,f={},["Darvas","Ghost","Profit",r,"ATH",a,"Spike"].forEach((function(e){f[e]=e+" "+i.name})),g=i.startFrom-1;g>0;g--){if(!(y=n[g])[f.Darvas]&&!y[f.Ghost]){s=y[f.ATH]||0,d=y[f.Profit],p=y[f.Loss];break}for(var C in f)y[C]=null}for(;g<n.length;g++)if(v=n[g]){if(parseFloat(i.inputs["Price Minimum"])<=n[s].Close){if("darva","s","n","o","n","e","high","/low",!u||u.End&&g!=u.End+1||(n[g-1].Close>c.High?c={State:1,High:2*c.High-c.Low,Low:c.High,Start:g,End:2*c.End-c.Start+1}:u=null,u&&(v[f.Ghost]=t.clone(c),c.State=0,n[c.End]&&(n[c.End][f.Ghost]=t.clone(c)),u={Start:c.Start,End:c.End},d=c.High+m,(!p||p<c.Low-m)&&(p=c.Low-m))),v[f.Profit]=d,v[f.Loss]=p,(v.Close>=d||"high/low"==i.inputs["Exit Field"]&&v.High>=d)&&(d=null),"none"==h&&g==s+3&&!n[s+2][f.Darvas]&&!n[s+1][f.Darvas]&&!n[s][f.Darvas]&&n[s].High>v.High&&(h="high"),"high"==h&&(v.High>n[s].High?("n","o","n","e",h="none"):n[g-3].Low<n[g-2].Low&&n[g-3].Low<n[g-1].Low&&n[g-3].Low<v.Low&&(c={State:1,High:n[s].High,Low:n[g-3].Low,Start:s},n[s][f.Darvas]=t.clone(c),h="darvas",u&&(u.End>g&&n[u.Start]&&(v[f.Ghost]=t.clone(n[u.Start][f.Ghost]),v[f.Ghost].End=g,n[u.End]&&delete n[u.End][f.Ghost]),v[f.Ghost].State=0,n[u.Start][f.Ghost].End=g,u=null),d=c.High+m,(!p||p<c.Low-m)&&(p=c.Low-m))),"darvas"==h&&("n","o","ne","n","one","n","o","ne","Exit F","iel","d","non","e","hi","gh","/low",v.Close>c.High||"high/low"==i.inputs["Exit Field"]&&v.High>c.High?u={}:(v.Close<c.Low||"high/low"==i.inputs["Exit Field"]&&v.Low<c.Low)&&(h="none"),u?h="none":"none"==h&&(d=null,p=null),i.inputs["Ghost Boxes"]||(u=null),"none"==h)){for(var S=c.Start+1;S<g;S++)n[S][f.Darvas]=t.clone(c);c.State=0,c.End=g,v[f.Darvas]=t.clone(c),v[f.ATH]=s;continue}p&&("E","xi","t"," Field",(v.Close<c.Low||"high/low"==i.inputs["Exit Field"]&&v.Low<c.Low)&&("Ex","it F","i","eld","darvas"==h&&(h="none"),(v.Close<p||"high/low"==i.inputs["Exit Field"]&&v.Low<p)&&(d=null,p=null),u&&(u.End>g&&n[u.Start]&&(v[f.Ghost]=t.clone(n[u.Start][f.Ghost]),v[f.Ghost].End=g,n[u.End]&&("Gh","ost End removed:",delete n[u.End][f.Ghost])),v[f.Ghost].State=0,n[u.Start][f.Ghost].End=g,u=null)))}if(v.High>=n[s].High&&("All T","i","me ","High:",s=g),(g<3||v.High>=n[g-1].High&&v.High>=n[g-2].High&&v.High>=n[g-3].High)&&g-s>=o){s=g;for(var w=0;w<o&&!(g-w<0);w++)n[g-w].High>n[s].High&&(x.j7J(14),s=x.a$j(g,w));0}i.inputs["Volume Spike"]&&g>o&&g==s&&v[f.ADV]*l<v.Volume&&(v[f.Spike]=1),v[f.ATH]=s}},t.Studies.displayDarvas=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L=we;(r=t.Studies.determineColor(i.outputs.Levels))&&"auto"!=r&&!t.isTransparent(r)||(r=e.defaultColor),(n=t.Studies.determineColor(i.outputs.Darvas))&&"auto"!=n&&!t.isTransparent(n)||(n=e.defaultColor),(s=t.Studies.determineColor(i.outputs.Ghost))&&"auto"!=s&&!t.isTransparent(s)||(s=e.defaultColor),o=e.panels[i.panel],l=i.getContext(e),L.N_M(1);var E=L.c0C(24,72);if((d=e.layout.candleWidth-("2"<<E))<2&&(d=1),e.startClip(i.panel),i.inputs["Stop Levels"]){for(l.setLineDash&&l.setLineDash([2,2]),l.lineWidth=2,l.strokeStyle=r,l.beginPath(),h=0;h<a.length;h++)"L","o","s","s ",c=a[h],L.j7J(14),p=a[L.a$j(h,1)],c&&(u=c["Loss "+i.name]?Math.floor(e.pixelFromPrice(c["Loss "+i.name],o)):null,m=p&&p["Loss "+i.name]?Math.floor(e.pixelFromPrice(p["Loss "+i.name],o)):null,u&&(c.candleWidth&&(d=Math.floor(Math.max(1,c.candleWidth))),g=Math.floor(e.pixelFromBar(h,o.chart)+d/2),f=Math.floor(e.pixelFromBar(h,o.chart)-d/2),m&&m>=u?l.lineTo(f,u):0===h?l.moveTo(e.chart.left,u):l.moveTo(f,u),l.lineTo(g,u)));l.stroke(),l.setLineDash&&l.setLineDash([]),l.lineWidth=1}y=-10,x=0,C=-10,w=0,k=!1,M=!1,L.N_M(61);var N=L.a$j(6203,1,17);L.j7J(14);var H=L.c0C(157930,148640);L.j7J(15);L.a$j(3941,25,6);L.N_M(9);var I=L.c0C(5544,17,330);L.N_M(82);L.a$j(140,17,23);L.j7J(61);var j=L.a$j(10290,10290,2057);for(T=l.measureText(9731>N?"":H<("9026"|I)?j:"P").width/2,A=0,h=0;h<a.length;h++)if("Da","r","vas"," ",a[h]){if((a[h].Close||0===a[h].Close)&&(A=h),a[h]["Spike "+i.name]&&(l.fillStyle=n,l.textBaseline="bottom",_=e.pixelFromPrice(a[h].High,e.chart.panel),l.fillText("",e.pixelFromBar(h)-T,_-5)),a[h].candleWidth&&(d=Math.floor(Math.max(1,a[h].candleWidth))),a[h]["Darvas "+i.name])if(1!=(c=a[h]["Darvas "+i.name]).State||k){if(0===c.State){"S","t","o","p Levels",L.N_M(127);var O=L.a$j(34,20,3,4,11);x=Math.floor(e.pixelFromBar(h,o.chart)+d/O)-y,v=Math.floor(e.pixelFromPrice(c.High,o)),b=Math.floor(e.pixelFromPrice(c.Low,o))-v,l.strokeStyle=n,l.fillStyle=n,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(y,v,x,b),l.globalAlpha=.2),l.fillRect(y,v,x,b),l.globalAlpha=1,k=!1}}else y=Math.floor(e.pixelFromBar(h,o.chart)-d/2),v=Math.floor(e.pixelFromPrice(c.High,o)),b=Math.floor(e.pixelFromPrice(c.Low,o))-v,k=!0;if(a[h]["Ghost "+i.name]&&i.inputs["Ghost Boxes"])if(1!=(c=a[h]["Ghost "+i.name]).State||M){if(0===c.State){c.Start==c.End&&(C=Math.floor(e.pixelFromBar(h,o.chart)-d/2)),L.j7J(3);var Y=L.a$j(10,5,7);w=Math.floor(e.pixelFromBar(h,o.chart)+d/Y)-C,S=Math.floor(e.pixelFromPrice(c.High,o)),D=Math.floor(e.pixelFromPrice(c.Low,o))-S,l.strokeStyle=s,l.fillStyle=s,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(C,S,w,D),l.globalAlpha=.2),l.fillRect(C,S,w,D),l.globalAlpha=1,M=!1}}else C=Math.floor(e.pixelFromBar(h,o.chart)-d/2),S=Math.floor(e.pixelFromPrice(c.High,o)),w=Math.floor((c.End-c.Start+1)*e.layout.candleWidth+d/2),D=Math.floor(e.pixelFromPrice(c.Low,o))-S,M=!0}if(k){"Stop"," Level","s",L.j7J(64);var R=L.a$j(1,8,149,11,13);x=Math.floor(e.pixelFromBar(A,o.chart)+d/R)-y,l.strokeStyle=n,l.fillStyle=n,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.beginPath(),L.j7J(25),l.moveTo(L.c0C(2,x,y),v),l.lineTo(y,v),L.N_M(1),l.lineTo(y,L.a$j(v,b)),L.j7J(25),l.lineTo(L.a$j(2,x,y),L.a$j(v,b,L.j7J(1))),l.stroke(),l.globalAlpha=.2),L.j7J(5),l.fillRect(y,v,L.a$j(x,2),b),l.globalAlpha=1}if(M&&(l.strokeStyle=s,l.fillStyle=s,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(C,S,w,D),L.j7J(14),l.globalAlpha=L.a$j("0.2",0)),l.fillRect(C,S,w,D),l.globalAlpha=1),k||M){if(i.inputs["Stop Levels"]){if(l.setLineDash){1074516398,211878868,P=2;for(var $=1;1074516398!==L.S9Y($.toString(),$.toString().length,4566);$++)l.setLineDash([2,2]),P+=2;211878868!==L.O1W(P.toString(),P.toString().length,47512)&&l.setLineDash([5,7])}l.lineWidth=2,l.strokeStyle=r,F=Math.floor(e.pixelFromBar(A-1,o.chart)+d/2),u&&(l.beginPath(),l.moveTo(F,u),l.lineTo(k?y+2*x:C+w,u),l.stroke()),l.setLineDash&&l.setLineDash([]),l.lineWidth=1}k=!1,M=!1}e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Darvas:{name:"Darvas Box",underlay:!0,calculateFN:t.Studies.calculateDarvas,seriesFN:t.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close","high/low"],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:"#5F7CB8",Ghost:"#699158",Levels:"auto"},customRemoval:!0,attributes:{"Price Minimum":{min:.01,step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("darvasBox feature requires first activating studies feature.")},M=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("m","a",t.Studies.calculateDetrendedPrice=function(e,i){var a,r,n,s,o;if("f","ie","ld",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.floor(i.days/2+1),t.Studies.MA(i.inputs["Moving Average Type"],i.days,r,-n,"MA",e,i);for(var l=Math.max(i.days-n-1,i.startFrom-n);l<a.length-n;l++)"R","e","sult"," ","M","A ",l<0||((s=a[l][r])&&"object"==typeof s&&(s=s[i.subField]),o=a[l]["MA "+i.name],!s&&0!==s||!o&&0!==o||(we.j7J(14),a[l]["Result "+i.name]=we.c0C(s,o)))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Detrended:{name:"Detrended Price Oscillator",calculateFN:t.Studies.calculateDetrendedPrice,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):console.error("detrended feature requires first activating studies feature.")},T=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.T$X(),t.Studies?("Di","sparity Index",t.Studies.calculateDisparity=function(e,a){var r,n,s;if("C","lo","se",(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{(n=a.inputs.Field)&&"field"!=n||(n="Close"),t.Studies.MA(a.inputs["Moving Average Type"],a.days,n,0,"_MA",e,a),i.T$X();for(var o=Math.max(a.startFrom,a.days-1);o<r.length;o++)if("R","e","s","ult ",r[o]&&(s=r[o]["_MA "+a.name])){i.N_M(61);var l=i.a$j(93,1,7);i.j7J(27);var h=i.a$j(9,8);r[o]["Result "+a.name]=l*(r[o][n]/s-h)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Disparity:{name:"Disparity Index",calculateFN:t.Studies.calculateDisparity,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):console.error("disparity feature requires first activating studies feature.")},A=e=>{var t,i=we;i.f3X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Ea","se of ","M","ovement",t.Studies.calculateEaseOfMovement=function(e,a){var r,n,s,o,l,h;if(r=a.chart.scrubbed,i.f3X(),r.length<a.days)a.error=!0;else{for(var c=Math.max(1,a.startFrom);c<r.length;c++){i.N_M(56);var u=i.a$j(5,32,16,5);n=(r[c].High+r[c].Low)/u,i.j7J(1);var d=i.c0C(46,18);i.j7J(44);var p=i.c0C(2,14,237,15);i.N_M(3);var m=i.a$j(18,9,11);s=(r[c-("1">>d)].High+r[c-p].Low)/m,i.N_M(14),o=i.c0C(n,s),i.j7J(17);var g=i.c0C(1900000191,20,100000009,11);l=r[c].Volume/g/(r[c].High-r[c].Low),i.j7J(7),h=i.c0C(o,l),isFinite(h)?r[c]["_EOM1 "+a.name]=h:r[c]["_EOM1 "+a.name]=NaN}t.Studies.MA(a.inputs["Moving Average Type"],a.days,"_EOM1 "+a.name,0,"Result",e,a)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{EOM:{name:"Ease of Movement",calculateFN:t.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("easeOfMovement feature requires first activating studies feature.")},_=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateEhlerFisher=function(e,t){var a,r,n,s,o;if((a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if(i.N_M(4),r=i.c0C("0",0),t.startFrom>1){i.N_M(1);var l=i.c0C(0,1);r=a[t.startFrom-l]["_n "+t.name]}for(var h=t.startFrom;h<a.length&&("E","F"," Trigge","r ",!(n=a[h]).futureTick);h++)if(h<t.days-1)"E","F"," ",n["EF "+t.name]=n["EF Trigger "+t.name]=r;else{s=f(t.days,h),i.N_M(1);var c=i.a$j(0,2);i.j7J(130);var u=i.a$j(10,12,3,23,5);i.j7J(102);var d=i.c0C(19,7,20,5);i.j7J(131);var p=i.a$j(14,18,1681,20,3);(r=.33*c*(((a[h].High+a[h].Low)/u-s[0])/Math.max(1e-6,s[d]-s[0])-.5)+"0.67"*p*r)>0?r=Math.min(r,.9999):r<0&&(r=Math.max(r,-.9999)),o=h?a[h-1]["EF "+t.name]:0,i.j7J(17);var m=i.c0C(122,9,12,15);i.N_M(14);var g=i.a$j(1,0);n["EF "+t.name]=.5*Math.log((m+r)/(g-r))+.5*o,n["EF Trigger "+t.name]=o,n["_n "+t.name]=r}}function f(e,t){var r,n,s,o;r=2;for(var l=1;-428939658!==i.S9Y(l.toString(),l.toString().length,25159);l++){n=Number.MAX_VALUE,i.N_M(128);var h=i.c0C(4,1,8,2,9);s=Number.MAX_VALUE*h,r+=2}if(-1778201131!==i.S9Y(r.toString(),r.toString().length,32314)){n=Number.MAX_VALUE,i.j7J(129);var c=i.a$j(11,1763,6,10,17);s=Number.MAX_VALUE-!c}for(var u=t-e+1;u<=t;u++){i.N_M(68);var d=i.a$j(18,1,0,16);o=(a[u].High+a[u].Low)/d,n=Math.min(n,o),s=Math.max(s,o)}return[n,s]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ehler Fisher":{name:"Ehler Fisher Transform",calculateFN:t.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}}})):console.error("ehlerFisher feature requires first activating studies feature.")},P=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","8","B","C176","Elder Forc","e Index",t.Studies.calculateElderImpulse=function(e,a){var r,n,s,o,l;r=a.chart.scrubbed,n=a.outputs.Bullish,s=a.outputs.Bearish,o=a.outputs.Neutral,t.Studies.MA("exponential",13,"Close",0,"_MA",e,a),i.N_M(55);i.a$j(10,108790,1078010,1);i.j7J(87);var h=i.a$j(6,83,4721,249,1);i.j7J(9);var c=i.c0C(111334,19,6186);i.N_M(14);i.c0C(19,18);i.j7J(68);i.c0C(6257,890,6249,19);i.N_M(14);var u=i.c0C(8758,18);a.macd=new t.Studies.StudyDescriptor((703.37!==h?"_":c<=5710?u:"A")+a.name,"macd",a.panel),a.macd.chart=a.chart,a.macd.days=a.days,a.macd.startFrom=a.startFrom,a.macd.inputs={"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},a.macd.outputs={_MACD:null,_Signal:null},t.Studies.calculateMACD(e,a.macd);for(var d=a.startFrom;d<r.length;d++)"_h","i","s","t","_M","A"," ",l=0===d?o:r[d]["_MA "+a.name]>r[d-1]["_MA "+a.name]&&r[d]["_"+a.name+"_hist"]>r[d-1]["_"+a.name+"_hist"]?n:r[d]["_MA "+a.name]<r[d-1]["_MA "+a.name]&&r[d]["_"+a.name+"_hist"]<r[d-1]["_"+a.name+"_hist"]?s:o,r[d]["Result "+a.name]=l},t.Studies.calculateElderRay=function(e,a){var r;if("_","his",i.T$X(),"t","1",(r=a.chart.scrubbed).length<a.days)a.error=!0;else{t.Studies.MA("exponential",a.days,"Close",0,"_EMA",e,a);for(var n=Math.max(a.startFrom,a.days-1);n<r.length;n++)r[n][a.name+"_hist1"]=r[n].High-r[n]["_EMA "+a.name],r[n][a.name+"_hist2"]=r[n].Low-r[n]["_EMA "+a.name];a.outputMap={},a.outputMap[a.name+"_hist1"]="",a.outputMap[a.name+"_hist2"]=""}},t.Studies.calculateElderForce=function(e,a){var r;if("_EF1"," ",(r=a.chart.scrubbed).length<a.days)a.error=!0;else{for(var n=Math.max(1,a.startFrom);n<r.length;n++){i.j7J(3);var s=i.c0C(9,6,4);r[n]["_EF1 "+a.name]=r[n].Volume*(r[n].Close-r[n-s].Close)}t.Studies.MA("exponential",a.days,"_EF1 "+a.name,0,"Result",e,a)}},t.Studies.initElderImpulse=function(e,a,r,n,s,o){var l;return"color","ed_b","ar",l=t.Studies.initializeFN(e,a,r,n,s,o),s.calculateOnly||(e.chart.customChart={chartType:"colored_bar",colorFunction:function(e,t,i){var a;return(a=t["Result "+l.name])&&"object"==typeof a&&(a=a.color),a}},e.setMainSeriesRenderer(),i.f3X()),l},t.Studies.displayElderForce=function(e,a,r){var n,s,o,l;i.f3X(),t.Studies.displaySeriesAsLine(e,a,r),n=t.Studies.determineColor(a.outputs.Result),s=e.panels[a.panel],o=a.getYAxis(e),l={skipTransform:s.name!=a.chart.name,panelName:a.panel,band:"Result "+a.name,threshold:0,color:n,yAxis:o},!a.highlight&&e.highlightedDraggable&&(l.opacity=.3),l.direction=1,t.preparePeakValleyFill(e,l),l.direction=-1,t.preparePeakValleyFill(e,l)},t.Studies.displayElderRay=function(e,a,r){var n,s,o,l,h,c,u;function d(r,c,d,p){i.f3X(),s.fillStyle=t.Studies.determineColor(a.outputs[d]),s.fillRect(Math.floor(e.pixelFromBar(r,n.chart)-h/2+h*c),Math.floor(l),Math.floor(h*(1-2*c)),Math.floor(e.pixelFromPrice(u[a.name+p],n,o)-l))}n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),i.N_M(4),i.f3X(),l=e.pixelFromPrice(i.c0C("0",0),n,o),i.j7J(14);var p=i.a$j(16,14);(h=e.layout.candleWidth-p)<2&&(h=1),e.canvasColor("stx_histogram"),c=s.fillStyle,a.underlay||(s.globalAlpha=1),e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var m=0;m<r.length;m++)"_hist","2","_h","ist1","_","hist1",(u=r[m])&&(u.candleWidth&&(h=Math.floor(Math.max(1,u.candleWidth-2))),u[a.name+"_hist1"]>0&&(i.j7J(29),d(m,i.a$j(0,"0"),"Elder Bull Power","_hist1")),u[a.name+"_hist2"]<0&&d(m,0,"Elder Bear Power","_hist2"),u[a.name+"_hist1"]<0&&d(m,.1,"Elder Bull Power","_hist1"),u[a.name+"_hist2"]>0&&(i.N_M(14),d(m,i.a$j("0.1",0),"Elder Bear Power","_hist2")));e.endClip(),s.fillStyle=c},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Elder Force":{name:"Elder Force Index",calculateFN:t.Studies.calculateElderForce,seriesFN:t.Studies.displayElderForce,inputs:{Period:13}},"Elder Ray":{name:"Elder Ray Index",seriesFN:t.Studies.displayElderRay,calculateFN:t.Studies.calculateElderRay,centerline:0,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:t.Studies.calculateElderImpulse,initializeFN:t.Studies.initElderImpulse,seriesFN:null,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:"#8BC176",Bearish:"#DD3E39",Neutral:"#5F7CB8"},removeFN:function(e,t){e.chart.customChart=null,e.setMainSeriesRenderer()}}})):console.error("elder feature requires first activating studies feature.")},F=e=>{var t,i,a=we;if((t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)"a","uto","a","uto","aut","o",t.Studies.calculateFractalChaos=function(e,t){var i,r,n,s,o,l,h;if("Fractal C","haos"," Band","s",i=t.chart.scrubbed,r=0,n=0,s=0,t.startFrom&&"Fractal Chaos Bands"==t.type){"F","ractal"," Low ",a.N_M(102);var c=a.c0C(13,13,17,8);r=i[t.startFrom-c]["Fractal High "+t.name],a.j7J(132);var u=a.c0C(13,16,9,2,13);n=i[t.startFrom-u]["Fractal Low "+t.name]}for(var d=Math.max(4,t.startFrom);d<i.length&&("F","ractal Cha","os Ba","nds",!i[d].futureTick);d++){for(o=!isNaN(i[d].High),l=!isNaN(i[d].Low),(o||l)&&(i[d]["Result "+t.name]=0),s=0,h=0;h<=d&&i[d-h]&&!(i[d-h].High>i[d-2].High)&&!(h<2&&i[d-h].High==i[d-2].High);h++)if(i[d-h].High<i[d-2].High&&s++,4==s){r=i[d-2].High;break}for("Fractal Chaos Bands"==t.type?o&&(i[d]["Fractal High "+t.name]=r>0?r:null):4==s&&(i[d]["Result "+t.name]=1),a.j7J(5),s=a.c0C(1,"0"),h=0;h<=d&&i[d-h]&&!(i[d-h].Low<i[d-2].Low)&&!(h<2&&i[d-h].Low==i[d-2].Low);h++)if(i[d-h].Low>i[d-2].Low&&s++,4==s){n=i[d-2].Low;break}"Fractal Chaos Bands"==t.type?l&&(i[d]["Fractal Low "+t.name]=n>0?n:null):4==s&&(i[d]["Result "+t.name]=-1)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Fractal Chaos":{name:"Fractal Chaos Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:t.Studies.calculateFractalChaos,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}}});else{122462410,320517448,i=2;for(var r=1;122462410!==a.O1W(r.toString(),r.toString().length,61779);r++)console.error(""),i+=2;320517448!==a.S9Y(i.toString(),i.toString().length,76585)&&console.error(""),console.error("fractalChaos feature requires first activating studies feature.")}},L=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Wil","liams %R","Lowest Low ","Value","Highest High V","alu","e","a","u","t","o","a","u","t","o","au","t","o",t.Studies.calculateMaxHighMinLow=function(e,t){var i,a,r,n,s,o,l,h=we;if("Low Peri","od","Hi","gh Pe","rio","d","High"," Period",i=t.chart.scrubbed,a=t.days,r=t.days,t.inputs["High Period"]&&(a=t.inputs["High Period"]),t.inputs["Low Period"]&&(r=t.inputs["Low Period"]),i.length<Math.max(a,r)+1)t.error=!0;else{n=Number.MAX_VALUE,h.j7J(14);var c=h.a$j(0,1);if(s=Number.MAX_VALUE*c,t.startFrom>1){for(o=1;o<a;o++)t.startFrom-o>=0&&(s=Math.max(s,i[t.startFrom-o].High));for(o=1;o<r;o++)t.startFrom-o>=0&&(n=Math.min(n,i[t.startFrom-o].Low))}for(var u=Math.max(0,t.startFrom-1);u<i.length;u++){if("VT HZ"," ","Fi","lter",s=Math.max(s,i[u].High),n=Math.min(n,i[u].Low),u>=a&&i[u-a].High==s)for(s=i[u].High,o=1;o<a;o++)s=Math.max(s,i[u-o].High);if(u>=r&&i[u-r].Low==n)for(n=i[u].Low,o=1;o<r;o++)n=Math.min(n,i[u-o].Low);if(l=0,"HHV"==t.type)l=s;else if("LLV"==t.type)l=n;else if("Donchian Width"==t.type)h.N_M(14),l=h.c0C(s,n);else if("GAPO"==t.type||"Gopala"==t.type)l=Math.log(s-n)/Math.log(r);else{if("VT HZ Filter"==t.type){h.j7J(14),l=h.c0C(s,n),i[u]["_MHML "+t.name]=l;continue}if("Williams %R"==t.type){h.j7J(133),l=h.c0C(20,17,22,18,93)*(s-i[u].Close)/(s-n),i[u]["Result "+t.name]=l;continue}}if(u==i.length-1)break;i[u+1].futureTick||("Donchian"," Channel","Donchian Channel"==t.type?("Donchian"," Median ",h.N_M(1),i[h.a$j(u,1)]["Donchian High "+t.name]=s,h.N_M(1),i[h.c0C(u,1)]["Donchian Low "+t.name]=n,h.j7J(1),i[h.c0C(u,1)]["Donchian Median "+t.name]=h.a$j(n,s,2,h.N_M(2))):(h.N_M(1),i[h.a$j(u,1)]["Result "+t.name]=l))}}},t.Studies.calculateVerticalHorizontalFilter=function(e,i){var a,r,n,s;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{i.mhml=new t.Studies.StudyDescriptor(i.name,i.type,i.panel),i.mhml.chart=i.chart,i.mhml.days=i.days,i.mhml.startFrom=i.startFrom,i.mhml.inputs={},i.mhml.outputs={_MHML:null},t.Studies.calculateMaxHighMinLow(e,i.mhml),r=0,n=[];for(var o=Math.max(1,i.startFrom-i.days);o<a.length;o++)s=Math.abs(a[o].Close-a[o-1].Close),n.push(s),r+=s,n.length==i.days&&(a[o]["Result "+i.name]=a[o]["_MHML "+i.name]/r,r-=n.shift())}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:t.Studies.calculateMaxHighMinLow,seriesFN:t.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":"auto","Donchian Low":"auto"}},"Donchian Width":{name:"Donchian Width",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:t.Studies.calculateMaxHighMinLow},HHV:{name:"Highest High Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:"Lowest Low Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:"auto",studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:t.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"High-Low":{name:"High Minus Low",calculateFN:function(e,t){var i;i=t.chart.scrubbed;for(var a=t.startFrom;a<i.length;a++)i[a]["Result "+t.name]=i[a].High-i[a].Low},inputs:{}}})):console.error("highLowStudies feature requires first activating studies feature.")},E=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","808","000","#FF","0000","I","chimoku Clouds",t.Studies.calculateIchimoku=function(e,t){var i,a,r,n,s,o,l,h,c=we;for("La","gging Span Perio","d",i=t.chart.scrubbed,a={Base:Number(t.inputs["Base Line Period"]),Conv:Number(t.inputs["Conversion Line Period"]),LeadB:Number(t.inputs["Leading Span B Period"]),Lag:Number(t.inputs["Lagging Span Period"])},r=t.startFrom;r<i.length;r++)if("La","gging Span ","Conve","rsion Line"," ",i[r]){n=f(a.Conv,r),c.N_M(134);var u=c.a$j(7,4,8,4);c.N_M(122);var d=c.c0C(22,18,2,18);i[r]["Conversion Line "+t.name]=(n[1]+n["0"*u])/d,n=f(a.Base,r),c.N_M(66);var p=c.c0C(18,12,6,35);c.j7J(44);var m=c.a$j(18,19,340,0);i[r]["Base Line "+t.name]=(n[p]+n[0])/m,r<a.Lag||(i[r-a.Lag]["Lagging Span "+t.name]=i[r].Close)}for(s=[],r=Math.max(0,t.startFrom-a.Base);r<i.length;r++){n=f(a.LeadB,r),c.j7J(27);var g=c.c0C(13,11);o=(i[r]["Conversion Line "+t.name]+i[r]["Base Line "+t.name])/g,c.N_M(17),l=(n[c.a$j(127,10,11,18)]+n[0])/2,i[r+a.Base]?("Leadin","g"," Span"," A ",i[r+a.Base]["Leading Span A "+t.name]=o,i[r+a.Base]["Leading Span B "+t.name]=l):("Lead","ing Span A ",(h={})["Leading Span A "+t.name]=o,h["Leading Span B "+t.name]=l,s.push(h))}function f(e,t){var a,r;c.T$X(),a=Number.MAX_VALUE,c.N_M(68);var n=c.c0C(4,5,0,15);r=Number.MAX_VALUE*(-1*n);for(var s=t-e+1;s<=t;s++)s<0||(a=Math.min(a,i[s].Low),r=Math.max(r,i[s].High));return[a,r]}t.appendFutureTicks(e,s)},t.Studies.displayIchimoku=function(e,i,a){var r,n,s,o,l,h,c;r="Leading Span A "+i.name,n="Leading Span B "+i.name,s=t.Studies.determineColor(i.outputs[i.outputMap[r]]),o=t.Studies.determineColor(i.outputs[i.outputMap[n]]),l=e.panels[i.panel],h=i.getYAxis(e),c={topBand:r,bottomBand:n,topColor:s,bottomColor:o,skipTransform:l.name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&e.highlightedDraggable&&(we.N_M(5),c.opacity*=we.a$j(1,"0.3")),t.fillIntersecting(e,i.panel,c),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,calculateFN:t.Studies.calculateIchimoku,seriesFN:t.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":52,"Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":"#808000"}}})):console.error("ichimoku feature requires first activating studies feature.")},N=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","a","u","to",t.Studies.calculateIntradayMomentum=function(e,t){var i,a,r,n,s,o,l=we;if(i=t.chart.scrubbed,a=t.days,i.length<a+1)t.error=!0;else{if(l.N_M(46),r=l.c0C("0",0),n=0,t.startFrom>1){"_totDn"," ",l.N_M(34);var h=l.c0C(4,2,6);r=i[t.startFrom-h]["_totUp "+t.name],l.N_M(135);var c=l.a$j(2,1,20,21);n=i[t.startFrom-c]["_totDn "+t.name]}for(var u=t.startFrom;u<i.length;u++)(s=i[u].Close-i[u].Open)>0?r+=s:n-=s,u>=a&&((o=i[u-a].Close-i[u-a].Open)>0?r-=o:n+=o),l.j7J(136),i[u]["Result "+t.name]=l.a$j(r,n,r,"100"),i[u]["_totUp "+t.name]=r,i[u]["_totDn "+t.name]=n}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:t.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("intradayMomentum feature requires first activating studies feature.")},H=e=>{var t;we.f3X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("au","t","o","Ke","ltner Cha","nnel",t.Studies.calculateKeltner=function(e,i){we.f3X(),t.Studies.MA(i.inputs["Moving Average Type"],i.days,"Close",0,"MA",e,i),t.Studies.calculateStudyATR(e,i),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Shift,"MA "+i.name,"ATR "+i.name)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Keltner:{name:"Keltner Channel",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateKeltner,inputs:{Period:50,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}}})):console.error("keltner feature requires first activating studies feature.")},I=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","FF00","0","0",t.Studies.calculateKlinger=function(e,i){var a,r,n,s,o,l,h,c,u,d,p;if("Sig","nal Peri","ods","expo","nential","expon","ential","_EM","A","-S","_EMA","-","S ","K","lingerSig","na","l ","_","his","t",a=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),n=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n)+1)i.error=!0;else{for(we.T$X(),s=i.name+"_hist",o="Klinger "+i.name,l="KlingerSignal "+i.name,h="_SV "+i.name,c="_EMA-S "+i.name,u="_EMA-L "+i.name,d=Math.max(1,i.startFrom);d<a.length;d++)"hlc/","3",p=a[d].Volume,a[d]["hlc/3"]<a[d-1]["hlc/3"]&&(p*=-1),p&&(a[d][h]=p);for(t.Studies.MA("exponential",r,h,0,"_EMA-S",e,i),t.Studies.MA("exponential",n,h,0,"_EMA-L",e,i),d=Math.max(n,i.startFrom);d<a.length&&(!a[d].futureTick&&null!==a[d][c]&&null!==a[d][u]);d++)a[d][o]=a[d][c]-a[d][u];for(t.Studies.MA("exponential",Number(i.inputs["Signal Periods"]),o,0,"KlingerSignal",e,i),d=i.startFrom;d<a.length;d++)a[d][s]=a[d][o]-a[d][l];i.outputMap[s]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Klinger:{name:"Klinger Volume Oscillator",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("klinger feature requires first activating studies feature.")},j=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("f","ie","l","d","Linear"," Reg ","Forecast","TimeSe","ries","ti","me"," s","eries","t","ime seri","es","ts","m","a","time"," series",t.Studies.prettify["time series"]="tsma",t.Studies.movingAverage.conversions.tsma="time series",t.Studies.movingAverage.translations["time series"]="Time Series",t.Studies.movingAverage.typeMap.tsma="TimeSeries",t.Studies.movingAverage.typeMap["time series"]="TimeSeries",t.Studies.calculateMovingAverageTimeSeries=function(e,i){var a,r,n,s,o,l,h,c,u=we;for(var d in"m","a",i.ma=new t.Studies.StudyDescriptor(i.name,"ma",i.panel),i.ma.chart=i.chart,i.ma.days=i.days,i.ma.startFrom=i.startFrom,i.ma.inputs=i.inputs,t.Studies.calculateLinearRegressionIndicator(e,i.ma),a=i.name,i.outputs)u.N_M(82),a=u.c0C(a," ",d);r=parseInt(i.inputs.Offset,10),isNaN(r)&&(r=0),n=i.chart.scrubbed,u.f3X(),s=r;for(var p=i.startFrom-1;p>=0;p--)if((o=n[p][a])||0===o){if(!(s>0))break;s--}for(l=[],p++;p<n.length;p++)h=n[p],p+r>=0&&("Fo","r","ecast ",p+r<n.length?(u.N_M(1),n[u.a$j(p,r)][a]=h["Forecast "+i.name]):("Fo","re","cas","t ",(c={})[a]=h["Forecast "+i.name],l.push(c)));i.appendFutureTicks(e,l)},t.Studies.calculateLinearRegressionIndicator=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=we;if("Cl","ose",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{f.T$X(),(a=t.inputs.Field)&&"field"!=a||(a="Close"),f.j7J(14);var y=f.c0C(4,3);f.j7J(3);var v=f.a$j(0,2,0);r=t.days*(t.days+y)/v,n=Math.pow(r,2),f.N_M(15);var x=f.a$j(0,10,9);f.N_M(137);var b=f.c0C(9,13,9,10);if(s=r*(2*t.days+x)/b,o=0,l=0,h=0,t.startFrom){"_","s","ums"," ",f.N_M(14);var C=f.a$j(1,0);(c=i[t.startFrom-C]["_sums "+t.name])&&(l=c[0],o=c[1],h=c[2])}for(var S=t.startFrom;S<i.length;S++)if((u=i[S][a])&&"object"==typeof u&&(u=u[t.subField]),(u||0===u)&&(l+=t.days*u-o,o+=u,h+=Math.pow(u,2),!(S<t.days-1))){if(S>t.days-1){if((d=i[S-t.days][a])&&"object"==typeof d&&(d=d[t.subField]),!d&&0!==d)continue;o-=d,h-=Math.pow(d,2)}p=(t.days*l-r*o)/(t.days*s-n),i[S]["Slope "+t.name]=p,m=(o-p*r)/t.days,i[S]["Intercept "+t.name]=m,i[S]["Forecast "+t.name]=m+p*t.days,f.N_M(122);var w=f.a$j(0,2,1,4);g=(t.days*s-n)/(t.days*h-Math.pow(o,w)),f.N_M(138),i[S]["RSquared "+t.name]=f.c0C(p,g,p),i[S]["_sums "+t.name]=[l,o,h]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Lin Fcst":{name:"Linear Reg Forecast",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:"auto"}},"LR Slope":{name:"Linear Reg Slope",calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}}})):console.error("linearRegression feature requires first activating studies feature.")},O=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#FF0","000",t.Studies.calculateMACD=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m=we;if("_h","i","s","t","exponent","i","a","l","Signal Pe","riod","Sl","ow MA Period","Fast M","A Perio","d",a=i.chart.scrubbed,r=i.inputs,n=i.name,i.macd1Days||(i.macd1Days=parseFloat(r["Fast MA Period"])),i.macd2Days||(i.macd2Days=parseFloat(r["Slow MA Period"])),i.signalDays||(i.signalDays=parseFloat(r["Signal Period"])),i.days||(i.days=Math.max(i.macd1Days,i.macd2Days,i.signalDays)),a.length<i.days+1)i.error=!0;else{for((s=i.inputs.Field)&&"field"!=s||(s="Close"),(o=r["Moving Average Type"])||(o="exponential"),t.Studies.MA(o,i.macd1Days,s,0,"_MACD1",e,i),t.Studies.MA(o,i.macd2Days,s,0,"_MACD2",e,i),l=c=Math.max(i.startFrom,i.days-1);l<a.length;l++)!(h=a[l])["_MACD1 "+n]&&0!==h["_MACD1 "+n]||!h["_MACD2 "+n]&&0!==h["_MACD2 "+n]||(m.N_M(1),h[m.c0C("MACD ",n)]=h["_MACD1 "+n]-h["_MACD2 "+n]);for((u=r["Signal MA Type"])||(u="exponential"),t.Studies.MA(u,i.signalDays,"MACD "+n,0,"Signal",e,i),m.N_M(1),d=m.c0C(n,"_hist"),l=c;l<a.length;l++)h=a[l],m.j7J(1),((p=h[m.c0C("Signal ",n)])||0===p)&&(h[d]=h["MACD "+n]-h["Signal "+n]);i.outputMap[d]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{macd:{name:"MACD",calculateFN:t.Studies.calculateMACD,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("macd feature requires first activating studies feature.")},Y=e=>{var t,i,a=we;if(a.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies){t.Studies.calculateMassIndex=function(e,i){var r,n,s;r=2;for(var o=1;1078781190!==a.S9Y(o.toString(),o.toString().length,83617);o++)n=i.chart.scrubbed,r+=2;if(1904025788!==a.O1W(r.toString(),r.toString().length,25167)&&(n=i.chart.scrubbed),n.length<Math.max(9,i.days+1))i.error=!0;else{for(var l=i.startFrom;l<n.length;l++)n[l]["_High-Low "+i.name]=n[l].High-n[l].Low;if(t.Studies.MA("exponential",9,"_High-Low "+i.name,0,"_EMA",e,i),t.Studies.MA("exponential",9,"_EMA "+i.name,0,"_EMA2",e,i),s=0,n[i.startFrom-1]&&n[i.startFrom-1]["_total "+i.name]){a.j7J(14);var h=a.a$j(16,15);s=n[i.startFrom-h]["_total "+i.name]}for(var c=Math.max(17,i.startFrom);c<n.length;c++){if("_to","ta","l"," ","_","EMA2 ",s+=n[c]["_EMA "+i.name]/n[c]["_EMA2 "+i.name],c>=17+i.days-1){n[c]["Result "+i.name]=s,a.N_M(63);var u=a.a$j(4,12,17);a.j7J(52);var d=a.a$j(6,8,1);s-=n[c-i.days+u]["_EMA "+i.name]/n[c-i.days+d]["_EMA2 "+i.name]}n[c]["_total "+i.name]=s}}},t.Studies.displayMassIndex=function(e,i,a){var r,n,s,o;t.Studies.displaySeriesAsLine(e,i,a),r=i.inputs["Bulge Threshold"],e.panels[i.panel],n=i.getYAxis(e),s=t.Studies.determineColor(i.outputs.Result),o={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:r,direction:1,color:s,yAxis:n,opacity:.3},!i.highlight&&e.highlightedDraggable&&(o.opacity*=.3),t.preparePeakValleyFill(e,o),t.Studies.drawHorizontal(e,i,null,r,n,s)},724537233,2069551907,i=2;for(var r=1;724537233!==a.S9Y(r.toString(),r.toString().length,73548);r++)t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Mass Idx":{name:"Mass Index",seriesFN:t.Studies.displayMassIndex,calculateFN:t.Studies.calculateMassIndex,inputs:{Period:14,"Bulge Threshold":63},attributes:{"Bulge Threshold":{min:57,max:14,step:780}}}}),i+=2;2069551907!==a.S9Y(i.toString(),i.toString().length,45439)&&(t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Mass Idx":{name:"Mass Index",seriesFN:t.Studies.displayMassIndex,calculateFN:t.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}}}))}else console.error("massIndex feature requires first activating studies feature.")},R=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Money F","low Ind","e","x",t.Studies.calculateMoneyFlowIndex=function(e,t){var a,r,n,s,o,l,h,c,u,d,p;if("_","r","awM","F ",(a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{r=0,n=0,i.j7J(14);var m=i.a$j(1,0);s=a[t.startFrom-m],o="_rawMF "+t.name,l="_cumMF "+t.name,h="Result "+t.name,s&&s[l]&&(r=s[l][0],n=s[l][1]);for(var g=t.startFrom;g<a.length;g++)c=a[g]["hlc/3"],g>0&&!a[g].futureTick&&("hlc","/3",i.N_M(14),u=a[i.a$j(g,1)]["hlc/3"],d=c*a[g].Volume,c>u?r+=d:c<u?n-=d*=-1:d=0,g>t.days&&((p=a[g-t.days][o])>0?r-=p:n+=p,0===n?a[g][h]=100:a[g].Volume&&(i.j7J(139),a[g][h]=i.a$j(0,"100",r,100,n,"1"))),a[g][o]=d,a[g][l]=[r,n])}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:t.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("moneyFlow feature requires first activating studies feature.")},z=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("aut","o","Pe","rcent","a","ut","o","p","oints","TripleExponentia","l","DoubleExpone","ntial","2-e","x","pon","ential","t","ema","de","m","a",t.Studies.prettify=t.extend({"2-exponential":"dema","3-exponential":"tema",hull:"hma"},t.Studies.prettify),t.extend(t.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:"3-exponential"},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":"TripleExponential"}}),t.Studies.calculateMovingAverageHull=function(e,i){var a,r,n,s,o,l,h,c,u=we;for("_W","MA2","w","m","a","_W","M","A","1",a=i.chart.scrubbed,u.T$X(),(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("wma",i.days,r,0,"_WMA1",e,i),t.Studies.MA("wma",Math.ceil(i.days/2),r,0,"_WMA2",e,i),n=i.startFrom-1;n>=0&&((s=a[n][r])&&"object"==typeof s&&(s=s[i.subField]),!s&&0!==s);n--);for(n++;n<a.length;n++){"_WM","A1"," ","_MMA"," ",o=a[n],u.j7J(86);var d=u.a$j(18,19,3,12,4);o["_MMA "+i.name]=d*o["_WMA2 "+i.name]-o["_WMA1 "+i.name]}for(var p in l=parseInt(i.inputs.Offset,10),isNaN(l)&&(u.j7J(46),l=u.a$j("0",0)),h=Math.floor(Math.sqrt(i.days)),t.Studies.MA("wma",h,"_MMA "+i.name,l,"_HMA",e,i),c=i.name,i.outputs)u.N_M(82),c=u.a$j(c," ",p);for(n=Math.max(i.days+h-1,i.startFrom);n<a.length;n++)a[n][c]=a[n]["_HMA "+i.name]},t.Studies.calculateMovingAverageDoubleExponential=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m=we;for("_EM","A","1 ","e","m","a","f","ie","ld",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("ema",i.days,r,0,"_EMA1",e,i),t.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",e,i),n=parseInt(i.inputs.Offset,10),isNaN(n)&&(n=0),l=n,s=i.startFrom-1;s>=0;s--)if((o=a[s][r])&&"object"==typeof o&&(o=o[i.subField]),o||0===o){if(!(l>0))break;l--}for(var g in h=i.name,i.outputs)m.N_M(82),h=m.c0C(h," ",g);for(c=[],s++;s<a.length;s++){if(!(s<2*(i.days-1)))u=a[s],m.j7J(9),d=m.c0C(49,3,17)*u["_EMA1 "+i.name]-u["_EMA2 "+i.name],s+n>=0&&(s+n<a.length?(m.N_M(1),a[m.a$j(s,n)][h]=d):((p={})[h]=d,c.push(p)))}i.appendFutureTicks(e,c)},t.Studies.calculateMovingAverageTripleExponential=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m=we;for("_E","MA","1 ","em","a","_","E","MA","1","e","m","a",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("ema",i.days,r,0,"_EMA1",e,i),t.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",e,i),t.Studies.MA("ema",i.days,"_EMA2 "+i.name,0,"_EMA3",e,i),n=parseInt(i.inputs.Offset,10),isNaN(n)&&(n=0),l=n,s=i.startFrom-1;s>=0;s--)if((o=a[s][r])&&"object"==typeof o&&(o=o[i.subField]),o||0===o){if(!(l>0))break;l--}for(var g in h=i.name,i.outputs)m.N_M(82),h=m.a$j(h," ",g);for(c=[],s++;s<a.length;s++)if("_EM","A3 ","_","EM","A","2 ",!(s<3*(i.days-1))){u=a[s],m.j7J(124);var f=m.c0C(15,16,42,10,2);m.j7J(9);var y=m.c0C(237,20,12);d=f*u["_EMA1 "+i.name]-y*u["_EMA2 "+i.name]+u["_EMA3 "+i.name],s+n>=0&&(s+n<a.length?(m.N_M(1),a[m.a$j(s,n)][h]=d):((p={})[h]=d,c.push(p)))}i.appendFutureTicks(e,c)},t.Studies.calculateMAEnvelope=function(e,i){var a,r,n;a=i.inputs.Field,we.f3X(),a&&"field"!=a||(a="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"MA",e,i),r=i.inputs["Shift Type"],n=i.inputs.Shift,r||(r="percent",n=i.inputs["Shift Percentage"]),"percent"==r?(we.N_M(7),t.Studies.calculateGenericEnvelope(e,i,we.a$j(n,100),"MA "+i.name)):"points"==r&&("M","A"," ",t.Studies.calculateGenericEnvelope(e,i,null,"MA "+i.name,null,Number(n)))},t.Studies.calculateMADev=function(e,i){var a,r,n,s,o,l,h,c,u=we;if("_","M","A","Po","i","nt","s",u.f3X(),"C","lose",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs["Points Or Percent"])||(n="Points"),(s=i.inputs["Moving Average Type"])||(s="exponential"),t.Studies.MA(s,i.days,r,0,"_MA",e,i),o=i.name+"_hist";for(var d=Math.max(i.startFrom,i.days-1);d<a.length;d++)(h=(l=a[d])[r])&&"object"==typeof h&&(h=h[i.subField]),((c=l["_MA "+i.name])||0===c)&&("Points"==n?(u.j7J(14),l[o]=u.a$j(h,c)):(u.N_M(140),l[o]=u.c0C(100,1,h,c)));i.outputMap={},i.outputMap[i.name+"_hist"]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateMAEnvelope,inputs:{Period:50,Field:"field","Shift Type":["percent","points"],Shift:5,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"MA Dev":{name:"Moving Average Deviation",calculateFN:t.Studies.calculateMADev,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:"field","Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"High Low":{name:"High Low Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:function(e,i){we.T$X(),i.inputs["Moving Average Type"]="triangular",t.Studies.calculateMAEnvelope(e,i)},inputs:{Period:10,Field:"field","Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:.1,step:.1}}}})):console.error("movingAverages feature requires first activating studies feature.")},q=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.T$X(),t.Studies?(t.Studies.calculatePSAR=function(e,t){var a,r,n,s,o,l,h,c,u,d,p;function m(){r=0,n=null,s=!s}if(a=t.chart.scrubbed,r=0,n=null,s=!1,o=0,l=parseFloat(t.inputs["Minimum AF"]),h=parseFloat(t.inputs["Maximum AF"]),i.f3X(),t.startFrom>0){"_","st","ate"," ","Re","su","lt"," ",i.j7J(141);var g=i.c0C(19,6,26);o=a[t.startFrom-g]["Result "+t.name],(c=a[t.startFrom-1]["_state "+t.name])&&3==c.length&&(r=c[0],n=c[1],i.N_M(46),s=c[i.c0C("2",0)])}for(var f=t.startFrom-1;f<a.length-1;f++)if(!(f<0)){if(a[f].futureTick)break;u=o,s?((!n||n<a[f].High)&&(n=a[f].High,i.j7J(1),r=Math.min(i.c0C(r,l),h)),i.j7J(142),o=i.c0C(u,r,u,n),d=Math.min(a[Math.max(1,f)-1].Low,a[f].Low),o>a[f+1].Low?(o=n,m()):o>d&&(o=d)):((!n||n>a[f].Low)&&(n=a[f].Low,i.N_M(1),r=Math.min(i.a$j(r,l),h)),i.j7J(142),o=i.c0C(u,r,u,n),p=Math.max(a[Math.max(1,f)-1].High,a[f].High),o<a[f+1].High?(o=n,m()):o<p&&(o=p)),i.N_M(1),a[i.a$j(f,1)]["_state "+t.name]=[r,n,s],isNaN(a[f].High)&&isNaN(a[f].Low)||(i.j7J(1),a[i.a$j(f,1)]["Result "+t.name]=o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:t.Studies.calculatePSAR,seriesFN:t.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}}})):("parabolicSAR feature requires first activa","ting studies feature.",console.error("parabolicSAR feature requires first activating studies feature."))},J=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#b","3d987","#b8","2","c0","b",t.Studies.calculatePivotPoints=function(e,i){var a,r,n,s,o,l,h,c,u,d,p=we;p.T$X(),a=i.chart.scrubbed,r="day",n=e.layout.interval,s=e.layout.timeUnit,"day"==n?r="month":t.ChartEngine.isDailyInterval(n)?r="year":"second"==n||"millisecond"==n||"second"==s||"millisecond"==s?r="15min":("minu","te",o=e.layout.periodicity,"minute"!=n&&(o*=n),o>=30&&(r="week")),l=null,p.j7J(82),h=p.a$j(2,4,1)-t.getFromNS(e.chart,"market.beginningDayOfWeek",0),c={pivotPoint:NaN,high:0,low:0,prevHigh:0,prevLow:0,hlSpread:0},i.startFrom>1&&a[i.startFrom-1]["_pointers "+i.name]&&(c=t.clone(a[i.startFrom-1]["_pointers "+i.name]));for(var m=Math.max(1,i.startFrom);m<a.length;m++)if("fibo","n","ac","ci","d","a","y",a[m-1]){if(c.high=Math.max(c.high,a[m-1].High),c.low=Math.min(c.low>0?c.low:a[m-1].Low,a[m-1].Low),i.inputs.Continuous||"year"==r&&a[m].DT.getYear()!=a[m-1].DT.getYear()||"month"==r&&a[m].DT.getMonth()!=a[m-1].DT.getMonth()||"week"==r&&(a[m].DT.getDay()+h)%7<(a[m-1].DT.getDay()+h)%7?v():"day"==r?(null===l&&(l=t.Studies.getMarketOffset({stx:e,localQuoteDate:a[m].DT,shiftToDateBoundary:!0})),u=new Date(new Date(+a[m].DT).setMilliseconds(a[m].DT.getMilliseconds()+l)),(d=new Date(new Date(+a[m-1].DT).setMilliseconds(a[m-1].DT.getMilliseconds()+l))).getDate()!==u.getDate()&&0!==d.getDay()&&e.chart.market.isMarketDate(u)&&(l=null,v())):"15min"!=r||a[m].DT.getHours()==a[m-1].DT.getHours()&&Math.floor(a[m].DT.getMinutes()/15)==Math.floor(a[m-1].DT.getMinutes()/15)||v(),a[m]["Pivot "+i.name]=c.pivotPoint,"fibonacci"==i.inputs.Type.toLowerCase())"S","u","pport 3 ","Sup","port ","2 ","Res","ista","nce ","2 ","Resi","stanc","e ","1 ",a[m]["Resistance 1 "+i.name]=c.pivotPoint+.382*c.hlSpread,a[m]["Resistance 2 "+i.name]=c.pivotPoint+.618*c.hlSpread,a[m]["Resistance 3 "+i.name]=c.pivotPoint+c.hlSpread,a[m]["Support 1 "+i.name]=c.pivotPoint-.382*c.hlSpread,a[m]["Support 2 "+i.name]=c.pivotPoint-.618*c.hlSpread,a[m]["Support 3 "+i.name]=c.pivotPoint-c.hlSpread;else{"Resis","tance ","2 ",p.N_M(14);var g=p.a$j(18,16);a[m]["Resistance 1 "+i.name]=g*c.pivotPoint-c.prevLow,a[m]["Resistance 2 "+i.name]=c.pivotPoint+c.hlSpread,p.N_M(3);var f=p.a$j(9,5,6);a[m]["Resistance 3 "+i.name]=c.prevHigh+f*(c.pivotPoint-c.prevLow),p.j7J(102);var y=p.a$j(15,3,4,12);a[m]["Support 1 "+i.name]=y*c.pivotPoint-c.prevHigh,a[m]["Support 2 "+i.name]=c.pivotPoint-c.hlSpread,a[m]["Support 3 "+i.name]=c.prevLow-2*(c.prevHigh-c.pivotPoint)}a[m]["_pointers "+i.name]=t.clone(c)}function v(){p.j7J(71);var e=p.c0C(18,145,8,1,2);c.pivotPoint=(c.high+c.low+a[m-e].Close)/3,c.prevHigh=c.high,c.prevLow=c.low,c.hlSpread=c.high-c.low,p.f3X(),c.high=c.low=0}},t.Studies.displayPivotPoints=function(e,i,a){var r,n;i.noSlopes=!i.inputs.Continuous,t.Studies.displaySeriesAsLine(e,i,a),i.inputs.Shading&&("Support"," 3","S","u","ppor","t 2 ","S","u","ppo","rt 1 ","Suppo","rt 1","P","i","vot ","Resistance ","3","Resistan","ce 2 ","Res","istance ","3"," ",r=e.panels[i.panel],n={noSlopes:i.noSlopes,opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:r.name!=i.chart.name,yAxis:i.getYAxis(e)},!i.highlight&&e.highlightedDraggable&&(n.opacity*=.3),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 3 "+i.name,bottomBand:"Resistance 2 "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 3"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 2 "+i.name,bottomBand:"Resistance 1 "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 2"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 1 "+i.name,bottomBand:"Pivot "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 1"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 1 "+i.name,bottomBand:"Pivot "+i.name,color:t.Studies.determineColor(i.outputs["Support 1"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 2 "+i.name,bottomBand:"Support 1 "+i.name,color:t.Studies.determineColor(i.outputs["Support 2"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 3 "+i.name,bottomBand:"Support 2 "+i.name,color:t.Studies.determineColor(i.outputs["Support 3"])},n)))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:t.Studies.displayPivotPoints,calculateFN:t.Studies.calculatePivotPoints,inputs:{Type:["standard","fibonacci"],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":"#699158","Resistance 2":"#e36460","Support 2":"#b3d987","Resistance 3":"#ffd0cf","Support 3":"#d3e8ae"},parameters:{init:{opacity:.2}}}})):("pivotPoints feature re","quires first activating studies feature.",console.error("pivotPoints feature requires first activating studies feature."))},V=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Pretty Good O","scillator",t.Studies.calculatePrettyGoodOscillator=function(e,i){var a;if(we.f3X(),"_EM","A","true","Rang","e",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{t.Studies.MA("exponential",i.days,"trueRange",0,"_EMA",e,i),t.Studies.MA("simple",i.days,"Close",0,"_SMA",e,i);for(var r=Math.max(1,i.startFrom);r<a.length;r++)"_","EMA ",a[r]["_SMA "+i.name]&&a[r]["_EMA "+i.name]&&(a[r]["Result "+i.name]=(a[r].Close-a[r]["_SMA "+i.name])/a[r]["_EMA "+i.name])}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pretty Good":{name:"Pretty Good Oscillator",calculateFN:t.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}}}})):console.error("prettyGoodOscillator feature requires first activating studies feature.")},B=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0.0","5","#F","F0","000","aut","o",t.Studies.calculatePMO=function(e,a){var r,n,s,o,l;if("P","M","O"," ","e","x","ponentia","l","_","EMAx","1","0","_","RO","Cx10 ","Clos","e","fi","e","ld",r={Smooth:Number(a.inputs["Smoothing Period"])-1,Double:Number(a.inputs["Double Smoothing Period"])-1,Signal:Number(a.inputs["Signal Period"])},(n=a.chart.scrubbed).length<r.Smooth+r.Double)a.error=!0;else{for(i.T$X(),(s=a.inputs.Field)&&"field"!=s||(s="Close"),o=a.startFrom;o<n.length;o++)if(n[o]&&n[o-1]&&(i.N_M(14),l=n[i.a$j(o,1)][s])){"_","RO","Cx","10 ",i.j7J(143);var h=i.c0C(59,59,13,986);n[o]["_ROCx10 "+a.name]=h*(n[o][s]/l-1)}t.Studies.MA("exponential",r.Smooth,"_ROCx10 "+a.name,0,"_EMAx10",e,a),t.Studies.MA("exponential",r.Double,"_EMAx10 "+a.name,0,"PMO",e,a),t.Studies.MA("exponential",r.Signal,"PMO "+a.name,0,"PMOSignal",e,a),a.zoneOutput="PMO"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PMO:{name:"Price Momentum Oscillator",calculateFN:t.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:"auto",PMOSignal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}}})):console.error("priceMomentumOscillator feature requires first activating studies feature.")},W=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0",".","1","#F","F0","00","0","vdm","a","Poi","nts","e","m","a",t.Studies.calculatePriceOscillator=function(e,a){var r,n,s,o,l,h,c,u,d;if("P","oints Or"," ","Percent",r=a.chart.scrubbed,n=Number(a.inputs["Short Cycle"]),s=Number(a.inputs["Long Cycle"]),r.length<Math.max(n,s)+1)a.error=!0;else{o=a.inputs.Field,(l=a.inputs["Moving Average Type"])||(l="simple"),o&&"field"!=o||(o="Close"),a.parameters.isVolume&&(o="Volume",l="exponential"),(h=a.inputs["Points Or Percent"])||(h="Percent"),t.Studies.MA(l,n,o,0,"_Short MA",e,a),i.j7J(29),t.Studies.MA(l,s,o,i.c0C(32,"0"),"_Long MA",e,a);for(var p=Math.max(s,a.startFrom);p<r.length;p++)"_Sho","rt MA ",(c=r[p])&&(u=c["_Short MA "+a.name],d=c["_Long MA "+a.name],!u&&0!==u||!d&&0!==d||("Point","s","Points"==h?(i.N_M(14),c["Result "+a.name]=i.c0C(u,d)):(i.j7J(144),c["Result "+a.name]=i.a$j(0,u,d,"1",100)),a.outputs["Increasing Bar"]&&("Res","ult ",c[a.name+"_hist"]=c["Result "+a.name],a.outputMap={},a.outputMap[a.name+"_hist"]="")))}},t.Studies.displayRAVI=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g;n=e.panels[a.panel],s=a.getContext(e),i.T$X(),o=a.getYAxis(e),l=e.pixelFromPrice(0,n,o),i.N_M(145);var f=i.a$j(8,8,3,18,4);(h=e.layout.candleWidth-f)<2&&(h=1),c=t.Studies.determineColor(a.outputs["Increasing Bar"]),u=t.Studies.determineColor(a.outputs["Decreasing Bar"]),e.startClip(a.panel),e.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var y=0;y<r.length;y++)"_","his","t","_","h","is","t","_","hist",d=r[y],i.N_M(14),(p=r[i.a$j(y,1)])||(p=e.getPreviousBar(e.chart,a.name+"_hist",y)),d&&(m=0,g=0,a.parameters&&a.parameters.studyOverZonesEnabled&&(m=parseFloat(a.parameters.studyOverBoughtValue),g=parseFloat(a.parameters.studyOverSoldValue)),p?d[a.name+"_hist"]>m&&p[a.name+"_hist"]<d[a.name+"_hist"]?s.fillStyle=c:d[a.name+"_hist"]<g&&p[a.name+"_hist"]>d[a.name+"_hist"]?s.fillStyle=u:s.fillStyle="#CCCCCC":s.fillStyle="#CCCCCC",d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(y,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[a.name+"_hist"],n,o)-l)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price Osc":{name:"Price Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Short Cycle":12,"Long Cycle":26,"Moving Average Type":"ema","Points Or Percent":["Points","Percent"]}},"Vol Osc":{name:"Volume Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},RAVI:{name:"RAVI",seriesFN:t.Studies.displayRAVI,calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:"0.1"}}}})):("priceVolumeOscillat","or feature requires first ac","tivating studies fe","ature.",console.error("priceVolumeOscillator feature requires first activating studies feature."))},U=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Pr","ime Nu","mber ","Bands",t.Studies.calculatePrimeNumber=function(e,t){var a,r,n,s,o,l,h,c;a=[],r=t.chart.scrubbed;for(var u=t.startFrom;u<r.length;u++)if("Pri","me Number Bands",n=r[u]){if(s=n.High,!isNaN(s)){for(var d=0;s>0&&s<=10;d++)s*=10;for(m(s)&&(s+=2),(s=Math.ceil(s))%2==0&&s++;!m(s);)s+=2;i.N_M(31),s/=Math.pow(i.a$j("10",32),d)}if(o=n.Low,!isNaN(o)){for(var p=0;o>0&&o<=10;p++)i.N_M(29),o*=i.c0C(0,"10");if(m(o)&&(i.j7J(14),o-=i.c0C("2",0)),(o=Math.floor(o))%2==0&&o--,o>0){for(;!m(o);)o-=2;o/=Math.pow(10,p)}}if("Prime Number Bands"==t.type)isNaN(s)||(n["Prime Bands Top "+t.name]=s),isNaN(o)||(n["Prime Bands Bottom "+t.name]=Math.max(0,o));else"Tolerance P","ercentage",l=0,h=t.inputs["Tolerance Percentage"]*(s-o)/100,i.N_M(63),(c=s+o-i.c0C(3,7,12)*n.Close)<h?l=1:c>h&&(l=-1),l&&(n["Result "+t.name]=l)}function m(e){var t;if(e<=0)return!1;if(e!=Math.floor(e))return!1;if(!0===a[e]||!1===a[e])return a[e];t=parseInt(Math.sqrt(e),10);for(var i=2;i<=t;i++)if(e%i==0)return a[e]=!1,!1;return a[e]=!0,!0}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Prime Number":{name:"Prime Number Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:.1,step:.1}}},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:t.Studies.calculatePrimeNumber,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":"auto","Prime Bands Bottom":"auto","Prime Bands Channel":"auto"}}})):("primeNumber feature r","equires first activating studies feature.",console.error("primeNumber feature requires first activating studies feature."))},Q=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.f3X(),t.Studies?("wee","kly","#F","F","0","000","#0","0","DD","00","f","ield",t.Studies.calculateKST=function(e,a){var r,n,s,o,l,h,c,u,d;for("Lig","htest S","MA"," Period","Heavi","est ","Rate of Change Period","Heavy Rate of C","hange Peri","od","Light Rate of Change P","eriod","Light","es","t Rate"," of Change Period","Cl","o","s","e",r=a.chart.scrubbed,(n=a.inputs.Field)&&"field"!=n||(n="Close"),o={},(s={})[1]=Number(a.inputs["Lightest Rate of Change Period"]),s[2]=Number(a.inputs["Light Rate of Change Period"]),s[3]=Number(a.inputs["Heavy Rate of Change Period"]),s[4]=Number(a.inputs["Heaviest Rate of Change Period"]),i.N_M(46),o[i.c0C("1",0)]=Number(a.inputs["Lightest SMA Period"]),o[2]=Number(a.inputs["Light SMA Period"]),o[3]=Number(a.inputs["Heavy SMA Period"]),o[4]=Number(a.inputs["Heaviest SMA Period"]),l=Number(a.inputs["Signal Period"]),h=a.startFrom;h<r.length;h++)if(r[h])for(c=1;c<=4;c++)if("_","RO","C",h>=s[c]&&r[h-s[c]]&&r[h-s[c]][n]){i.N_M(82);var p=i.a$j(12,7,13);r[h]["_ROC"+c+" "+a.name]=("100">>p)*(r[h][n]/r[h-s[c]][n]-1)}for(c=1;c<=4;c++)t.Studies.MA("simple",o[c],"_ROC"+c+" "+a.name,0,"_SMA"+c,e,a);for(h=a.startFrom;h<r.length;h++)for(r[h]["KST "+a.name]=null,c=1;c<=4;c++){i.j7J(1);i.c0C(312,1558);i.N_M(82);var m=i.c0C(3657,9,193);i.j7J(14);var g=i.c0C(94428,89182);i.j7J(82);i.a$j(2,10,8846);i.j7J(38);var f=i.a$j(0,33,8,4);i.j7J(146);var y=i.c0C(21459,18,19,4,7152);i.N_M(17);i.c0C(7,16,44,4);i.N_M(9);i.c0C(517920,12,43680);i.j7J(147);var v=i.c0C(1,6510,6520,3255);((u=r[h]["_SMA"+c+(985.76==m?g:"523.31"*f===y?v:" ")+a.name])||0===u)&&(i.N_M(5),r[h]["KST "+a.name]+=i.a$j(u,c))}i.N_M(14),d=i.a$j("2",0);for(var x=1;-1435656228!==i.S9Y(x.toString(),x.toString().length,18216);x++)t.Studies.MA("simple",l,"KST "+a.name,0,"KSTSignal",e,a),i.N_M(46),d+=i.c0C("2",0);63420138!==i.O1W(d.toString(),d.toString().length,20741)&&("KSTSigna","l","KS","T","Sign","al",t.Studies.MA("KST ",l,"KSTSignal"*a.name,7,"KSTSignal",e,a))},t.Studies.calculateSpecialK=function(e,a){var r,n,s,o,l,h,c,u;for(r=a.chart.scrubbed,(n=a.inputs.Field)&&"field"!=n||(n="Close"),(s=a.inputs.Interval)||(s="daily"),o={daily:[10,15,20,30,50,65,75,100,195,265,390,530],weekly:[4,5,6,8,10,13,15,20,39,52,78,104]},l={daily:[10,10,10,15,50,65,75,100,130,130,130,195],weekly:[4,5,6,8,10,13,15,20,26,26,26,39]},h=a.startFrom;h<r.length;h++)if(r[h])for(c=0;c<o[s].length;c++)if(h>=o[s][c]&&r[h-o[s][c]]&&r[h-o[s][c]][n]){i.N_M(148);var d=i.a$j(97,97,20,20,4);i.j7J(14);var p=i.c0C(16,15);r[h]["_ROC"+c+" "+a.name]=d*(r[h][n]/r[h-o[s][c]][n]-p)}for(c=0;c<l[s].length;c++)"s","im","p","le","da","i","l","y",t.Studies.MA("daily"==s?"simple":"exponential",l[s][c],"_ROC"+c+" "+a.name,0,"_MA"+c,e,a);for(h=a.startFrom;h<r.length;h++)for(r[h]["Result "+a.name]=null,c=0;c<l[s].length;c++){i.j7J(15);var m=i.c0C(69,833,7);i.j7J(149);i.c0C(72580,3,11,1,68774);i.N_M(69);var g=i.a$j(223,28,11);((u=r[h]["_MA"+c+(m>g&&" ")+a.name])||0===u)&&(i.j7J(150),r[h]["Result "+a.name]+=i.a$j(1,c,4,u))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:t.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:"Pring's Special K",calculateFN:t.Studies.calculateSpecialK,inputs:{Field:"field",Interval:["daily","weekly"]}}})):("pring feature ","requires first activating s","t","udies feature.",console.error("pring feature requires first activating studies feature."))},X=e=>{var t,i,a=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,a.T$X(),t.Studies?t.Studies.studyLibrary.PVAT||("hh",":","mm:s","s","#","b8","2c","0c","#fe6","4","1c","+","50%","-","15","0","%","-","10","0","%","-50","%","+5","0","%","Projected Volume at T","ime",t.Studies.initProjectedVolume=function(e,i,a,r,n,s){var o,l,{market:h}=e.chart;return o="00:00",h&&(o=h.getNormalOpen()),o.match(/^[\d]{2}:[\d]{2}$/)&&(o+=":00"),a["Anchor Time"]&&a["Anchor Time"].length||("Ancho","r Time",a["Anchor Time"]=o),l=t.Studies.initializeFN(e,i,a,r,n,s),e.currentlyImporting||(l.defaultAnchorTime=o),l},t.Studies.validateProjectedVolumeLookback=function(e,t){var{interval:i,periodicity:r}=e.layout,{"Lookback Days":n}=t.inputs;return a.j7J(151),a.a$j(n,i,r,"10")},t.Studies.calculateProjectedVolume=function(e,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z,q,J,V,B,W,U,Q,X,Z;function G(e,t,i){for(;t;)e=new Date(new Date(e).setDate(e.getDate()+(i?1:-1))),ne.isMarketDate(e)&&t--;return e}var{interval:K,timeUnit:ee,aggregationType:te}=e.layout,{symbol:ie,scroll:ae,scrubbed:re,market:ne}=e.chart;function se(e){return{hours:e.getHours(),minutes:e.getMinutes()}}if(n="PAV"===r.type,s=r.study?r.study.name:r.type,t.ChartEngine.isDailyInterval(K))r.error="".concat(s," is Intraday Only");else if("tick"===ee)r.error="Tick mode not supported for ".concat(s);else if("minute"!==ee)a.j7J(82),r.error="".concat(a.c0C("ute periodicities not supported for ","b-min","Su")).concat(s);else if(te&&["ohlc","heikinashi"].includes(te)){if(!t.Studies.validateProjectedVolumeLookback(e,r)){-2144216569,308328842,o=2;for(var oe=1;-2144216569!==a.S9Y(oe.toString(),oe.toString().length,51491);oe++)r.error="Selected lookback/periodicity combo not supported for ".concat(s),o+=2;308328842!==a.O1W(o.toString(),o.toString().length,280)&&(r.error="Selected lookback/periodicity combo not supported for ".concat(s))}}else r.error="Aggregation type not supported for ".concat(s);if(!r.error){if(r.inputs["Anchor Selector"]?t.Studies.initAnchorHandle(e,r):t.Studies.removeAnchorHandle(e,r),(l=ne?ne.getNormalOpen():"00:00").match(/^[\d]{2}:[\d]{2}$/)&&(l+=":00"),!e.currentlyImporting)if(r.defaultAnchorTime){if(l!==r.defaultAnchorTime){r.defaultAnchorTime=l,-1509490596,-948817835,h=2;for(var le=1;-1509490596!==a.S9Y(le.toString(),le.toString().length,38648);le++)r.inputs["Anchor Time"]=l,h+=2;return-948817835!==a.O1W(h.toString(),h.toString().length,208)&&(r.inputs[""]=l),void t.Studies.repositionAnchor(e,r)}}else r.defaultAnchorTime=l;var{"Lookback Days":he,"Anchor Time":ce}=r.inputs,[ue,de,pe=0]=ce.split(":");if(c=t.getFn("Market.Symbology.isForexSymbol")(ie),u=r.getDependents(e),d=0,p=[],u.forEach(e=>{let{inputs:t,outputMap:i}=e;a.f3X(),t.Period&&(d=Math.max(parseInt(t.Period),d),p.push(...Object.keys(i)))}),r.dependentsOutputMap=p,g=Me(re.length-1,!0),f=Math.ceil(re.length-1-ae),a.f3X(),a.N_M(14),y=Me(a.c0C(f,d)),c&&re[y]&&t.dateToStr(re[y].DT,"HH:mm")!==l&&(a.N_M(14),y=Me(a.a$j(y,1))),m=!c&&r.startFrom>y&&re[y]&&void 0!==re[y]["V "+r.name]&&p.every(e=>![void 0,null].includes(re[y][e]))&&!1!==g?g:y,(v=G(Te(y),he)).setHours(0,0,0),b=((x=Me(0,!0))||0===x)&&Ae(G(re[x].DT,he,!0)),re[0].DT>v){if(!e.quoteDriver)return a.j7J(1),r.error="".concat(a.c0C("Not e","nough data to calculate ")).concat(s);if(e.quoteDriver.extendHistoricalData({from:v}),!(b>0))return;m=b}if(!(m<0||m>re.length-1)){if(C=re.length-r.startFrom==1&&r.cachedFutureTicks&&r.cachedLastProjection&&+r.cachedLastProjection.DT==+re[re.length-1].DT&&re[m]["PV "+r.name]){a.j7J(3);var me=a.a$j(9,10,0);re[re.length-me]["PV "+r.name]=r.cachedLastProjection.projectedValue,r.appendFutureTicks(e,r.cachedFutureTicks),m=r.startFrom}else{"P","V"," ",r.cachedFutureTicks=null,r.cachedLastProjection=null,S=[g],w=[];for(var ge=0;ge<he;ge++)D=Me(S[0]-1),S.unshift(D);for(;S[he]>=m;){if(k=S.pop(),!re[k])return ke(k);M=se(re[k].DT);var{hours:fe,minutes:ye}=M;if(A=void 0,T=ne.getClose(re[k].DT)){for(_=ne.getNextClose(re[k].DT),A=se(T);(0!==A.hours||0!==A.minutes)&&T.getDate()===_.getDate();)T=_,_=ne.getNextClose(_);0===(A=se(T)).hours&&(A.hours=24)}else A={hours:24,minutes:0};P=S.slice();for(var ve=0;ve<P.length;ve++){if(F=P[ve],!re[F])return ke(F);var{hours:xe,minutes:be}=se(re[F].DT);if(xe<fe||xe===fe&&be<ye)do{F++,({hours:xe,minutes:be}=se(re[F].DT))}while(xe!==fe||be!==ye);P[ve]=F}for(;fe<A.hours||fe===A.hours&&ye<A.minutes;){L=!1,E=void 0,N=void 0,H=0,I=0;for(var Ce=0;Ce<P.length;Ce++)if(null!==(j=P[Ce])){if(!(O=re[j]))return ke(j);var{hours:Se,minutes:we}=se(O.DT);Y=O.DT.getDate(),Se===fe&&we===ye&&(H+=O.Volume,I++,P[Ce]++,re[P[Ce]].DT.getDate()!==Y?P[Ce]=null:L||(({hours:E,minutes:N}=se(re[P[Ce]].DT)),L=!0))}if(fe=E,ye=N,0===I)break;a.N_M(7),R=a.c0C(H,I),re[k]?re[k]["PV "+r.name]=R:("P","V"," ",w.push({["PV "+r.name]:R})),k++}S.unshift(Me(S[0]-1))}r.cachedLastProjection={DT:re[re.length-1].DT,projectedValue:re[re.length-1]["PV "+r.name]},r.cachedFutureTicks=w,r.appendFutureTicks(e,w)}if($=null,z=0,q=0,C&&n)for(;m>0;){if(a.N_M(14),(V=re[a.c0C(m,1)]["V "+r.name])||0===V){z=V;break}m--}for(var De=m;De<re.length;De++)if("V"," ","America/New_Y","ork",W=(B=re[De]).Volume,U=B["PV "+r.name],B.futureTick||(J=De),null===$&&($=t.Studies.getMarketOffset({stx:e,localQuoteDate:re[De].DT,shiftToDateBoundary:!0})),Q=new Date(new Date(B.DT).getTime()+$),X=re[De-1]&&new Date(new Date(re[De-1].DT).getTime()+$),(Z=new i.Date(B.DT,ne.market_def.market_tz||"America/New_York")).setHours(ue,de,pe),a.N_M(1),(Z=new Date(a.a$j(Z,$))).setDate(Q.getDate()),X&&Q.getDate()!==X.getDate()&&($=null,z=0,q=0),Q<Z)B["V "+r.name]=0,B["PV "+r.name]=0;else if(n?(z+=W,q+=U):(z=W,q=U),B["V "+r.name]=z,C||(B["PV "+r.name]=q),[NaN,null,void 0].includes(z)&&!B.futureTick)return a.N_M(1),void(r.error="".concat(s).concat(a.a$j(" requires vol","ume")));r.cachedLastProjection.projectedValue=re[J]["PV "+r.name],r.outputMap={},r.outputMap["V "+r.name]="",r.outputMap["PV "+r.name]="Average Line",u.forEach(t=>{t.startFrom=m,t.study.calculateFN(e,t)})}}function ke(e){a.f3X(),console.error("Expected data for ".concat(Te(e).toDateString()," but found none. This may be caused by gaps in your data or an improperly configured market definition."))}function Me(i,r){var n,s,o,l,h;return a.f3X(),n=Te(i),o=Ae(s=ne.getOpen(n)||(l=n,a.f3X(),a.N_M(46),l.setHours(a.a$j("0",0)),a.j7J(46),l.setMinutes(a.c0C("0",0)),h=t.Studies.getMarketOffset({stx:e,localQuoteDate:l}),new Date(l.getTime()+h))),r?(o<0&&(o=Ae(G(s,1,!0))),!(o>=re.length)&&o):o}function Te(t){return"s",a.f3X(),"cr","ubb","ed",e.dateFromTick(t,null,!0,"scrubbed")}function Ae(t){return a.T$X(),e.tickFromDate(t,null,null,!0,"scrubbed")}},t.Studies.displayProjectedVolume=function(e,i,r){var n,s,o,l,h,c,u;if("stx_volume_","underla","y_","down","stx_volu","me_","under","lay_up","o","bj","ect","A","lert Bar",i.error)return t.Studies.removeAnchorHandle(e,i);var{"Alert Threshold":d=""}=i.inputs;a.N_M(152);var p=a.a$j(13,15,2,0);a.j7J(85);var m=a.c0C(110,10,15,1490);a.j7J(9);var g=a.c0C(1754,18,103);n=parseInt(d.slice(0,p),m)/g,"object"==typeof(s=i.outputs["Alert Bar"])&&(s=s.color),i.volumeField="V "+i.name,i.alignStepToSide=!0,i.extendToEndOfLastBar=!0,i.lineWidth=2,o=e.canvasStyle("stx_volume_underlay_up").opacity,l=e.canvasStyle("stx_volume_underlay_down").opacity,i.colorFunction=function(t){var r,h,c,u,d,p,{Open:m,Close:g,iqPrevClose:f}=t;return r=e.colorByCandleDirection?m:f,a.N_M(153),h=a.a$j(r,g),a.f3X(),c=t["PV "+i.name],u=t["V "+i.name],a.j7J(154),d=a.a$j(c,1,n),{fill_color:(p=n<0?u<d:u>d)&&s||(h?this.fill_color_down:this.fill_color_up),border_color:h?this.border_color_down:this.border_color_up,opacity:p?1:h?l:o,border_opacity:h?l:o}},h=i.study?i.study.name:i.type;var{loadingMore:f}=e.chart;if(c=r.some(e=>e&&e[i.volumeField]&&e["PV "+i.name]),u=r[0]&&!r[0].futureTick&&(void 0===r[0]["PV "+i.name]||(i.dependentsOutputMap||[]).some(e=>(a.T$X(),[void 0,null].includes(r[0][e])))),!c&&f)return i.error="Fetching data for ".concat(h);t.Studies.createVolumeChart(e,i,r),t.Studies.displaySeriesAsLine(e,i,r),i.anchorHandle&&t.Studies.displayAnchorHandleAndLine(e,i,r),u&&t.Studies.calculateProjectedVolume(e,i)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PVAT:{name:"Projected Volume at Time",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Alert Threshold":["+150%","+125%","+100%","+75%","+50%","+25%","None","-25%","-50%","-75%","-100%","-125%","-150%"],"Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1},"Alert Threshold":{defaultSelected:"+50%"}}},PAV:{name:"Projected Aggregate Volume",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}})):("project","edVolume feature requires first activating studies feature.",console.error("projectedVolume feature requires first activating studies feature."))},Z=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculatePsychologicalLine=function(e,t){var i,a,r,n,s;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{a=[],we.N_M(85),r=we.c0C(1400,11,16,22124)/t.days,we.f3X(),n=0;for(var o=Math.max(t.startFrom-t.days,1);o<i.length&&("Re","sult ",!i[o].futureTick);o++)(s=Number(i[o].Close>i[o-1].Close))&&(n+=r),a.push(s),a.length>t.days&&(n-=a.shift()*r),o<t.startFrom||isNaN(i[o].Close)||(i[o]["Result "+t.name]=n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSY:{name:"Psychological Line",range:"0 to 100",calculateFN:t.Studies.calculatePsychologicalLine,inputs:{Period:20}}})):("psychologic","alLine feature requires first activating st","udies feature.",console.error("psychologicalLine feature requires first activating studies feature."))},G=e=>{var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,we.f3X(),t.Studies?("QSti","c","k",t.Studies.calculateQStick=function(e,i){var a;if(we.T$X(),"R","e","sult",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var r=i.startFrom;r<a.length;r++)a[r]["_Close-Open "+i.name]=a[r].Close-a[r].Open;t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Close-Open "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{QStick:{name:"QStick",calculateFN:t.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":"ma"}}})):("qsti","ck feature requires first activating studies feature.",console.error("qstick feature requires first activating studies feature."))},K=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.T$X(),t.Studies?("#","FF","0000","#F","F","00F","F","#7","F00FF","#","0","0","00FF","#","00F","FFF","#","7FF","F","00",t.Studies.calculateRainbow=function(e,a){var r,n,s,o,l,h,c,u,d;function p(e,t){var a,n;i.N_M(102);var s=i.c0C(16,14,12,19);a=Number.MAX_VALUE*s,n=Number.MAX_VALUE;for(var o=t-e+1;o<=t;o++)o<0||(a=Math.max(a,r[o].Close),n=Math.min(n,r[o].Close));return[n,a]}if("O","s","c","f","i","e","ld",(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{(n=a.inputs.Field)&&"field"!=n||(n="Close"),s=n;for(var m=1;m<=10;m++){t.Studies.MA("simple",a.days,s,0,"SMA"+m,e,a),i.N_M(24);i.c0C(68420,62170,11,19);s="SMA"+m+" "+a.name}for(var g=Math.max(a.startFrom,10);g<r.length;g++)if(r[g]){if(r[g].futureTick)break;o=0,i.j7J(31),l=i.a$j("0",96),i.N_M(27);var f=i.c0C(17,18);for(h=Number.MAX_VALUE*f,c=Number.MAX_VALUE,m=1;m<=10;m++){i.N_M(155);var y=i.c0C(1992,26e3,58500,18);i.j7J(1);var v=i.a$j(538,2692);i.j7J(1);var x=i.c0C(6143,10);((u=r[g]["SMA"+m+(y<v?" ":x)+a.name])||0===u)&&(o+=u,l++,h=Math.max(h,u),c=Math.min(c,u))}if(a.name.indexOf("Osc")>-1&&(d=p(a.inputs["HHV/LLV Lookback"],g),l)){"Zer","o"," ","Ov","er ","O","ver ","_hi","st",i.j7J(156);var b=i.c0C(150,1500,2,4,3);r[g][a.name+"_hist"]=b*(r[g][n]-o/l)/Math.max(1e-6,d[1]-d[0]),i.N_M(157);var C=i.c0C(16,8,18,0,5);r[g]["Over "+a.name]=100*(h-c)/Math.max(1e-6,d[C]-d[0]),r[g]["Under "+a.name]=-r[g]["Over "+a.name],r[g]["Zero "+a.name]=0}}a.name.indexOf("Osc")>-1&&("Under"," ","Pos","itive B","ar",a.outputMap={},a.outputMap["Over "+a.name]="Positive Bar",a.outputMap["Under "+a.name]="Negative Bar",a.outputMap["Zero "+a.name]="",a.outputMap[a.name+"_hist"]="")}},t.Studies.displayRainbowMA=function(e,a,r){var n;n=e.panels[a.panel],i.T$X();for(var s=10;s>0;s--)t.Studies.displayIndividualSeriesAsLine(e,a,n,"SMA"+s+" "+a.name,r)},t.Studies.displayRainbowOsc=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g;t.Studies.displaySeriesAsLine(e,a,r),n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3),l=e.pixelFromPrice(0,n,o),h=n.name!=a.chart.name,c=t.Studies.determineColor(a.outputs["Positive Bar"]),s.strokeStyle=c,e.plotDataSegmentAsLine("Over "+a.name,n,{skipTransform:h,label:!1,yAxis:o}),(u=s.createLinearGradient(0,l,0,o.flipped?o.bottom:o.top)).addColorStop(0,e.containerColor),u.addColorStop(1,c),t.prepareChannelFill(e,{skipTransform:h,color:u,opacity:!a.highlight&&e.highlightedDraggable?.3:1,panelName:a.panel,topBand:"Over "+a.name,bottomBand:"Zero "+a.name,yAxis:o}),d=t.Studies.determineColor(a.outputs["Negative Bar"]),s.strokeStyle=d,e.plotDataSegmentAsLine("Under "+a.name,n,{skipTransform:h,label:!1,yAxis:o}),(p=s.createLinearGradient(0,l,0,o.flipped?o.top:o.bottom)).addColorStop(0,e.containerColor),p.addColorStop(1,d),t.prepareChannelFill(e,{skipTransform:h,color:p,opacity:!a.highlight&&e.highlightedDraggable?.3:1,panelName:a.panel,topBand:"Zero "+a.name,bottomBand:"Under "+a.name,yAxis:o}),i.N_M(1);var f=i.c0C(0,2);(m=e.layout.candleWidth-f)<2&&(m=1),e.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3),s.fillStyle="#CCCCCC";for(var y=0;y<r.length;y++)"_his","t","_hi","s","t",(g=r[y])&&(g[a.name+"_hist"]>0?s.fillStyle=c:g[a.name+"_hist"]<0&&(s.fillStyle=d),g.candleWidth&&(m=Math.floor(Math.max(1,g.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(y,n.chart)-m/2),Math.floor(l),Math.floor(m),Math.floor(e.pixelFromPrice(g[a.name+"_hist"],n,o)-l)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowMA,inputs:{Period:2,Field:"field"},outputs:{SMA1:"#FF0000",SMA2:"#FF7F00",SMA3:"#FFFF00",SMA4:"#7FFF00",SMA5:"#00FF7F",SMA6:"#00FFFF",SMA7:"#007FFF",SMA8:"#0000FF",SMA9:"#7F00FF",SMA10:"#FF00FF"}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("rainbow feature requires first activating studies feature.")},ee=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#000","0FF","#F","F0000",t.Studies.calculateRandomWalk=function(e,t){var i,a,r,n,s,o,l,h,c;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else for(var u=Math.max(2,t.startFrom);u<i.length;u++){a=0,r=i[u].High,n=i[u].Low,s=0,o=0;for(var d=1;d<=t.days&&!i[u].futureTick;d++){if(u<=d){s=o=0;break}(l=(a+=i[u-d].trueRange)/d*Math.sqrt(d))&&(h=(r-i[u-d].Low)/l,c=(i[u-d].High-n)/l,s=Math.max(s,h),o=Math.max(o,c))}i[u].futureTick||isNaN(r)&&isNaN(n)||("Random Walk"," L","o","w ",i[u]["Random Walk High "+t.name]=s,i[u]["Random Walk Low "+t.name]=o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Random Walk":{name:"Random Walk Index",calculateFN:t.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":"#0000FF"}}})):console.error("randomWalk feature requires first activating studies feature.")},te=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateRelativeVigor=function(e,i){var a,r,n,s,o,l,h,c;if("R","el Vig ","_De","n","om","triang","ul","ar","triangul","ar",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(r=i.startFrom;r<a.length;r++)"_C","ha","n","ge ",n=a[r],isNaN(n.Close)||isNaN(n.Open)||(n["_Change "+i.name]=n.Close-n.Open),isNaN(n.High)||isNaN(n.Low)||(n["_Range "+i.name]=n.High-n.Low);for(t.Studies.MA("triangular",4,"_Change "+i.name,0,"_Numer",e,i),t.Studies.MA("triangular",4,"_Range "+i.name,0,"_Denom",e,i),s=[],o=[],r=Math.max(i.startFrom-i.days,0);r<a.length&&!a[r].futureTick;r++)if(null!==a[r]["_Numer "+i.name]||null!==a[r]["_Denom "+i.name]){for(s.push(a[r]["_Numer "+i.name]),o.push(a[r]["_Denom "+i.name]),s.length>i.days&&(s.shift(),o.shift()),l=0,h=0,c=0;c<s.length;c++)l+=s[c];for(c=0;c<o.length;c++)h+=o[c];0===h&&(h=1e-8),r<i.startFrom||(we.j7J(7),a[r]["Rel Vig "+i.name]=we.a$j(l,h))}for(t.Studies.MA("triangular",4,"Rel Vig "+i.name,0,"RelVigSignal",e,i),r=i.startFrom;r<a.length;r++)a[r][i.name+"_hist"]=a[r]["Rel Vig "+i.name]-a[r]["RelVigSignal "+i.name];i.outputMap[i.name+"_hist"]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rel Vig":{name:"Relative Vigor Index",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateRelativeVigor,inputs:{Period:10},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("relativeVigor feature requires first activating studies feature.")},ie=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateRSI=function(e,t){var a,r,n,s,o,l,h,c;if(a=t.chart.scrubbed,r=t.inputs.Field,i.T$X(),r&&"field"!=r||(r="Close"),a.length<t.days+1)t.error=!0;else{for(var u=t.startFrom;u<a.length;u++)if(u&&(n=a[u],i.j7J(14),s=a[i.a$j(u,1)],(n[r]||0===n[r])&&(s[r]||0===s[r]))){if(o=n[r]-s[r],l=Math.min(u,t.days),(h=s["_avgG "+t.name])||(h=0),i.N_M(7),h-=i.c0C(h,l),(c=s["_avgL "+t.name])||(c=0),i.j7J(7),c-=i.a$j(c,l),o>0)i.N_M(7),h+=i.a$j(o,l);else{if(!(o<=0))continue;i.j7J(7),c-=i.a$j(o,l)}u>=t.days&&(!h&&0===h||!c&&0===c||(n["RSI "+t.name]=d(h,c))),n["_avgG "+t.name]=h,n["_avgL "+t.name]=c}t.zoneOutput="RSI"}function d(e,t){var a;if(0===t)return 100;for(var r=1;1473040642!==i.O1W(r.toString(),r.toString().length,68909);r++)return i.N_M(14),a=i.a$j(e,t),i.N_M(158),i.a$j(465,"2",a,330);return i.T$X(),-262708369!==i.O1W(2..toString(),2..toString().length,1299)?(i.N_M(7),a=i.a$j(e,t),i.N_M(159),i.a$j(100,"1",a,100)):void 0}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{rsi:{name:"RSI",inputs:{Period:14,Field:"field"},calculateFN:t.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("rsi feature requires first activating studies feature.")},we.T$X(),ae=e=>{var t,i,a,r=we;if(r.f3X(),"un","de","fin","ed",(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)"a","u","t","o","fiel","d",t.Studies.calculateSchaff=function(e,i){var a,n,s,o,l,h,c,u,d,p,m,g,f;function y(e,t,n){var s,o,l;s=null,o=null;for(var h=t-e+1;h<=t;h++){r.N_M(1);var c=r.a$j(1132,6);r.j7J(17);var u=r.a$j(9615,2,9600,5);r.j7J(19);var d=r.a$j(14,10,656,91169);r.N_M(157);var p=r.a$j(18,13,17,468,20);r.j7J(160);var m=r.a$j(15,9460,5070,56760);(l=a[h][n+(c<u?708.76==d?p:" ":m)+i.name])&&(s=null===s?l:Math.min(s,l),o=null===o?l:Math.max(o,l))}return[s,o]}if("_MAC","D","2","Cl","o","s","e","Short"," ","Cycle",a=i.chart.scrubbed,n=i.days,s=Number(i.inputs["Short Cycle"]),o=Number(i.inputs["Long Cycle"]),a.length<Math.max(n,s,o)+1)i.error=!0;else{(l=i.inputs.Field)&&"field"!=l||(l="Close"),.5,t.Studies.MA(i.inputs["Moving Average Type"],s,l,0,"_MACD1",e,i),t.Studies.MA(i.inputs["Moving Average Type"],o,l,0,"_MACD2",e,i),h=0,c=0;for(var v=i.startFrom;v<a.length;v++)"_","MA","C","D2 ","_MA","C","D","1 ",u=a[v],v<o-1||(d=u["_MACD1 "+i.name],p=u["_MACD2 "+i.name],(d||0===d||p||0===p)&&(r.j7J(14),u["_MACD "+i.name]=r.c0C(d,p)),m=u["_MACD "+i.name],v<o+(n-1)||(h=(g=y(n,v,"_MACD"))[1]>g[0]?100*(m-g[0])/(g[1]-g[0]):h,(m||0===m)&&("_","P","F ",u["_PF "+i.name]=a[v-1]["_PF "+i.name]?a[v-1]["_PF "+i.name]+.5*(h-a[v-1]["_PF "+i.name]):h),f=u["_PF "+i.name],v<o+2*(n-1)||(c=(g=y(n,v,"_PF"))[1]>g[0]?100*(f-g[0])/(g[1]-g[0]):c,(f||0===f)&&("Res","ult ","Res","u","lt ","Res","u","lt"," ",u["Result "+i.name]=a[v-1]["Result "+i.name]?a[v-1]["Result "+i.name]+.5*(c-a[v-1]["Result "+i.name]):c))))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Schaff:{name:"Schaff Trend Cycle",range:"0 to 100",calculateFN:t.Studies.calculateSchaff,inputs:{Period:10,Field:"field","Short Cycle":23,"Long Cycle":50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}}});else{r.j7J(14),i=r.a$j("87314054",0),1060655783,r.N_M(14),a=r.a$j("2",0);for(var n=1;r.O1W(n.toString(),n.toString().length,82177)!==i;n++)console.error(""),a+=2;1060655783!==r.O1W(a.toString(),a.toString().length,7892)&&console.error(""),console.error("schaffTrendCycle feature requires first activating studies feature.")}},re=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#E99B","5","4",t.Studies.calculateShinohara=function(e,a){var r,n;if(i.T$X(),(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{n={weakNum:0,weakDen:0,strongNum:0,strongDen:0},a.startFrom>1&&("_accu","ms ",n=t.clone(r[a.startFrom-1]["_accums "+a.name]));for(var s=a.startFrom;s<r.length;s++){if(n.weakNum+=r[s].High-r[s].Close,n.weakDen+=r[s].Close-r[s].Low,s>0){i.N_M(21);var o=i.a$j(193,12,16);n.strongNum+=r[s].High-r[s-o].Close,i.j7J(137);var l=i.a$j(2,6,5,2);n.strongDen+=r[s-l].Close-r[s].Low}if(s>=a.days){"Weak R","ati","o"," ",n.weakNum-=r[s-a.days].High-r[s-a.days].Close,n.weakDen-=r[s-a.days].Close-r[s-a.days].Low,i.j7J(14);var h=i.a$j(117,17);if(r[s]["Weak Ratio "+a.name]=h*n.weakNum/n.weakDen,s>a.days){i.N_M(23);var c=i.c0C(0,4,3,8);n.strongNum-=r[s-a.days].High-r[s-a.days-c].Close,i.N_M(13);var u=i.c0C(0,6,5,0);n.strongDen-=r[s-a.days-u].Close-r[s-a.days].Low,r[s]["Strong Ratio "+a.name]=100*n.strongNum/n.strongDen}}r[s]["_accums "+a.name]=t.clone(n)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:t.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":"#E99B54","Weak Ratio":"#5F7CB8"}}})):("shinohara feature requires first activating stud","ies feature.",console.error("shinohara feature requires first activating studies feature."))},ne=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","F","F000","0","f","ie","l","d","#F","F","00","00","Stocha","sti","c Momentum Index",t.Studies.calculateStochastics=function(e,i){var a,r,n,s,o,l=we;function h(e,t,i){var a,r,s,o,h;l.N_M(15),a=l.a$j(e,1,i),r=-1*Number.MAX_VALUE,l.f3X(),s=Number.MAX_VALUE;for(var c=a;c<=e;c++)"L","ow",o=n[c]["Close"==t?"Low":t],h=n[c]["Close"==t?"High":t],(o||0===o)&&(h||0===h)&&(s=Math.min(s,o),r=Math.max(r,h));return r==-1*Number.MAX_VALUE||s==Number.MAX_VALUE?null:r==s?0:(n[e][t]-s)/(r-s)*100}if("_F","a","st%K ","fie","ld",i.smooth||(i.smooth=i.inputs.Smooth),l.f3X(),(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.inputs["%K Periods"])||(r=i.days),(n=i.chart.scrubbed).length<Math.max(r,i.days)+1)i.error=!0;else{(s=i.inputs["%K Smoothing Periods"])&&!i.inputs.Fast?i.smooth=!0:i.smooth&&(s=3),(o=i.inputs["%D Periods"])||(o=3),i.outputs.Fast&&("F","a","st",i.outputMap={},i.outputMap["%K "+i.name]="Fast",i.outputMap["%D "+i.name]="Slow");for(var c=Math.max(r,i.startFrom);c<n.length;c++)"_F","ast%K ",null!==h(c,a,r)&&(n[c]["_Fast%K "+i.name]=h(c,a,r));t.Studies.MA("simple",i.smooth?s:1,"_Fast%K "+i.name,0,"%K",e,i),t.Studies.MA("simple",o,"%K "+i.name,0,"%D",e,i)}},t.Studies.calculateStochMomentum=function(e,i){var a,r,n,s,o,l,h,c,u=we;function d(e,t){var i,a;i=null,a=null,u.f3X();for(var r=t-e+1;r<=t;r++)i=null===i?o[r].Low:Math.min(i,o[r].Low),a=null===a?o[r].High:Math.max(a,o[r].High);return[i,a]}if("%","K ","_","D","HL1"," ","_D","H","L"," ","exponent","ial","_H","S2","_H","S","1","exp","onen","tial","%K Smoo","thi","ng Periods","%","K Perio",u.T$X(),"ds",a=Number(i.inputs["%K Periods"]),r=Number(i.inputs["%K Smoothing Periods"]),n=Number(i.inputs["%K Double Smoothing Periods"]),s=Number(i.inputs["%D Periods"]),(o=i.chart.scrubbed).length<a+r+n-1||o.length<s)i.error=!0;else{for(l=Math.max(a,i.startFrom)-1;l<o.length;l++){h=o[l],c=d(a,l),u.j7J(14);var p=u.c0C(5,4);u.j7J(161);var m=u.c0C(0,414,10,16,16);h["_H "+i.name]=h.Close-(c[0]+c[p])/m,u.j7J(14);var g=u.a$j(10,9);h["_DHL "+i.name]=c[g]-c[0]}for(t.Studies.MA("exponential",r,"_H "+i.name,0,"_HS1",e,i),t.Studies.MA("exponential",n,"_HS1 "+i.name,0,"_HS2",e,i),t.Studies.MA("exponential",r,"_DHL "+i.name,0,"_DHL1",e,i),t.Studies.MA("exponential",n,"_DHL1 "+i.name,0,"_DHL2",e,i),l=a-1;l<o.length;l++){u.j7J(61);var f=u.c0C(1100,1100,99);o[l]["%K "+i.name]=o[l]["_HS2 "+i.name]/(.5*o[l]["_DHL2 "+i.name])*f}t.Studies.MA(i.inputs["%D Moving Average Type"],s,"%K "+i.name,0,"%D",e,i),i.zoneOutput="%K"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:t.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},stochastics:{name:"Stochastics (Simple)",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Period:14,Field:"field",Smooth:!0},outputs:{Fast:"auto",Slow:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Stochastics:{name:"Stochastics",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Field:"field","%K Periods":14,Fast:!1,"%K Smoothing Periods":3,"%D Periods":3},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}},attributes:{"%K Smoothing Periods":{hidden:function(){return we.T$X(),this.inputs.Fast}}},centerline:50}})):console.error("stochastics feature requires first activating studies feature.")},se=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateSupertrend=function(e,a){var r,n,s,o,l,h;if((r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{t.Studies.calculateStudyATR(e,a);for(var c=a.startFrom;c<r.length;c++)if("_Down","tren","d ","A","T","R"," ",n=r[c]){i.N_M(162);var u=i.a$j(3,6,3,13,10);s=(n.High+n.Low)/u,o=a.inputs.Multiplier*n["ATR "+a.name],i.j7J(14),l=i.c0C(s,o),i.j7J(1),h=i.c0C(s,o),c&&("_","Downtr","end ",r[c-1]&&r[c-1].Close&&r[c-1].Close>r[c-1]["_Uptrend "+a.name]&&r[c-1]["_Uptrend "+a.name]>l&&(i.j7J(14),l=r[i.c0C(c,1)]["_Uptrend "+a.name]),r[c-1]&&r[c-1].Close&&r[c-1].Close<r[c-1]["_Downtrend "+a.name]&&r[c-1]["_Downtrend "+a.name]<h&&(i.j7J(14),h=r[i.a$j(c,1)]["_Downtrend "+a.name])),i.N_M(31),n["_Direction "+a.name]=i.c0C("1",32),c&&("_Direction"," ","_Direction"," ",i.j7J(14),n["_Direction "+a.name]=r[i.c0C(c,1)]["_Direction "+a.name],n.Close>r[c-1]["_Downtrend "+a.name]?n["_Direction "+a.name]=1:n.Close<r[c-1]["_Uptrend "+a.name]&&(n["_Direction "+a.name]=-1)),n["_Uptrend "+a.name]=l,n["_Downtrend "+a.name]=h,n["Trend "+a.name]=n["_Direction "+a.name]>0?l:h}a.outputMap={},a.outputMap["Trend "+a.name]=""}},t.Studies.displaySupertrend=function(e,t,a){var r,n,s,o,l,h,c,u,d,p;r=e.panels[t.panel],n=t.getContext(e),s=t.getYAxis(e),o={skipTransform:r.name!=t.chart.name,skipProjections:!0,label:e.preferences.labels,yAxis:s,highlight:t.highlight},n.strokeStyle=g(e,a[a.length-1]),n.lineWidth=2,t.highlight&&(n.lineWidth=1.5),l="Trend "+t.name;for(var m=0;r.chart.transformFunc&&s!=r.chart.yAxis&&m<a.length;m++)(h=a[m])&&h.transform&&(h.transform[l]=r.chart.transformFunc(e,r.chart,h[l]));function g(e,a,r){if("_","D","irec",i.f3X(),"tion ",a&&a["_Direction "+t.name]<0)return t.outputs.Downtrend;for(var n=1;-1291900641!==i.S9Y(n.toString(),n.toString().length,45473);n++)return t.outputs.Uptrend;return-806501474!==i.S9Y(2..toString(),2..toString().length,46148)?t.outputs.Uptrend:void 0}e.plotDataSegmentAsLine(l,r,o,g),n.lineWidth=1,n.globalAlpha=1,e.startClip(t.panel),!t.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3),i.N_M(163);var f=i.a$j(18,116,4,3,416);i.j7J(1);var y=i.c0C(981,6863);i.j7J(3),i.f3X();i.c0C(15658,10,16626);i.N_M(122);i.a$j(16,18,1,3);i.N_M(3);var v=i.c0C(7,9,0);for(c=n.measureText(f!=y&&"").width/v,u=0;u<a.length;u++)if(a[u]&&a[u-1])if(a[u-1]["_Direction "+t.name]>a[u]["_Direction "+t.name]){n.fillStyle=t.outputs.Downtrend,n.textBaseline="bottom",d=e.pixelFromPrice(a[u].High,r,s);for(var x=5;x<=45;x+=10)s.flipped?n.fillText("",e.pixelFromBar(u)-c,d+x):n.fillText("",e.pixelFromBar(u)-c,d-x)}else if(a[u-1]["_Direction "+t.name]<a[u]["_Direction "+t.name]){"t","op",n.fillStyle=t.outputs.Uptrend,n.textBaseline="top",p=e.pixelFromPrice(a[u].Low,r,s);for(var b=5;b<=45;b+=10)s.flipped?n.fillText("",e.pixelFromBar(u)-c,p-b):n.fillText("",e.pixelFromBar(u)-c,p+b)}e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Supertrend:{name:"Supertrend",overlay:!0,seriesFN:t.Studies.displaySupertrend,calculateFN:t.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:"#8cc176",Downtrend:"#b82c0c"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("supertrend feature requires first activating studies feature.")},oe=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateSwingIndex=function(e,t){var a,r,n,s,o,l,h,c,u,d,p;(null===(a=t.inputs["Limit Move Value"])||isNaN(a))&&(a=99999),r=t.chart.scrubbed,n=0,t.startFrom>1&&(n=r[t.startFrom-1]["Result "+t.name]);for(var m=Math.max(1,t.startFrom);m<r.length;m++){"Re","sult ",s=Math.abs(r[m].High-r[m-1].Close),o=Math.abs(r[m].Low-r[m-1].Close),l=Math.abs(r[m].High-r[m].Low),h=Math.abs(r[m-1].Close-r[m-1].Open),c=Math.max(s,o),u=Math.max(l,c),i.N_M(25),d=i.c0C(.25,h,u),u==s?(i.N_M(5),d-=i.c0C(o,.5)):u==o&&(i.N_M(5),d-=i.c0C(s,.5)),i.N_M(164);var g=i.c0C(3,20,29950,100,5);i.j7J(14);var f=i.a$j(14,13);i.j7J(34);var y=i.c0C(2,17,17);i.j7J(9);var v=i.c0C(104,15,7);p=g*(r[m].Close-r[m-f].Close+.5*(r[m].Close-r[m].Open)+.25*(r[m-y].Close-r[m-v].Open))/d*(c/a),0!==d&&0!==a||(p=0),"Swing"==t.type&&(n=0),n+=p,r[m]["Result "+t.name]=n}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},Swing:{name:"Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}}})):console.error("swingIndex feature requires first activating studies feature.")},le=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.f3X(),t.Studies?("au","t","o","fi","e","l","d","0 t","o"," 100",t.Studies.calculateTrendIntensity=function(e,a){var r,n,s,o,l,h,c,u;if("T","I","I",i.T$X()," ","Signal ","Period","e","m","a","m","a",(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{for((n=a.inputs.Field)&&"field"!=n||(n="Close"),t.Studies.MA("ma",a.days,n,0,"_SMA",e,a),s=0,o=0,c=[],u=Math.ceil(a.days/2),l=Math.max(0,a.startFrom-u);l<r.length;l++)(r[l]["_SMA "+a.name]||0===r[l]["_SMA "+a.name])&&((h=r[l][n]-r[l]["_SMA "+a.name])<0?(i.N_M(166),o+=i.a$j(h,1)):s+=h,c.push(h),c.length>u&&((h=c.shift())<0?(i.j7J(166),o-=i.c0C(h,1)):s-=h),l<a.startFrom||(r[l]["TII "+a.name]=(d=s,p=o,Math.abs(p)<1e-8?100:(i.f3X(),i.j7J(165),i.a$j(1,d,p,100,0,"100")))));var d,p;t.Studies.MA("ema",a.inputs["Signal Period"],"TII "+a.name,0,"Signal",e,a)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Trend Int":{name:"Trend Intensity Index",calculateFN:t.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("trendIntensity feature requires first activating studies feature.")},he=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateTRIX=function(e,i){var a,r,n,s,o,l,h=we;if("_","MA","1 ",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{r=i.name,h.j7J(1),n=["Close",h.a$j("_MA1 ",r),h.a$j("_MA2 ",r),h.c0C("_MA3 ",r)];for(var c=0;c<n.length-1;c++)t.Studies.MA("exponential",i.days,n[c],0,"_MA"+(c+1).toString(),e,i);s=n[3];for(var u=Math.max(1,i.startFrom);u<a.length;u++)"R","e","sult"," ",h.N_M(167),(o=a[h.a$j(u,1,"1")][s])&&((l=a[u][s])||0===l)&&(h.j7J(1),a[u][h.a$j("Result ",r)]=h.c0C("100",l,o,1,h.j7J(168)))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{TRIX:{name:"TRIX",calculateFN:t.Studies.calculateTRIX}})):console.error("trix feature requires first activating studies feature.")},ce=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateTwiggsMoneyFlow=function(e,t){var i,a,r,n,s,o,l=we;if((i=t.chart.scrubbed).length<t.days)t.error=!0;else{a=0,r=0,l.N_M(3);var h=l.a$j(4,5,0);(n=i[t.startFrom-h])&&("_s","u","mV ","_","sumMF"," ",n["_sumMF "+t.name]&&(a=n["_sumMF "+t.name]),n["_sumV "+t.name]&&(r=n["_sumV "+t.name]));for(var c=Math.max(1,t.startFrom);c<i.length;c++){"_su","mV"," ","_su","mMF"," ","_","M","FV ",s=Math.max(i[c-1].Close,i[c].High),o=Math.min(i[c-1].Close,i[c].Low),l.j7J(13);var u=l.c0C(15,13,5,9);l.N_M(55);var d=l.a$j(4,13999986,54999945,1);if(i[c]["_MFV "+t.name]=i[c].Volume*(u*i[c].Close-s-o)/(s-o==0?d:s-o),c>t.days-1){a*=(t.days-1)/t.days,l.j7J(34);var p=l.c0C(8,1,7);r*=(t.days-p)/t.days}a+=i[c]["_MFV "+t.name],r+=i[c].Volume,c>t.days-1&&r&&(l.N_M(7),i[c]["Result "+t.name]=l.c0C(a,r>0?r:999999)),i[c]["_sumMF "+t.name]=a,i[c]["_sumV "+t.name]=r}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Twiggs:{name:"Twiggs Money Flow",calculateFN:t.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}}})):("twiggsMoneyFlow feature requires first activating stu","dies feature.",console.error("twiggsMoneyFlow feature requires first activating studies feature."))},ue=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?t.Studies.calculateTypicalPrice?("Weight","ed Close",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Typical Price":{name:"Typical Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}},"Weighted Close":{name:"Weighted Close",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):console.error("typicalPrice feature requires first activating medianPrice feature."):("typicalPrice feature requires first activating ","studies featu","re.",console.error("typicalPrice feature requires first activating studies feature."))},de=e=>{var t,i;t=2;for(var a=1;1978925238!==we.S9Y(a.toString(),a.toString().length,39212);a++)i=""===~_CIQ?_CIQ:e.CIQ,t+=2;we.f3X(),-1962589708!==we.S9Y(t.toString(),t.toString().length,50882)&&(i=""===~_CIQ?_CIQ:e.CIQ),(i="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(i.Studies.calculateUlcerIndex=function(e,t){var a,r,n,s;function o(e,t,i){var r;r=null;for(var n=t-e+1;n<=t;n++)n<0||(r=null===r?a[n][i]:Math.max(r,a[n][i]));return r}if("_","M","A","s","i","m","ple",(a=t.chart.scrubbed).length<2*t.days-1)t.error=!0;else{for((r=t.inputs.Field)&&"field"!=r||(r="Close"),n=Math.max(t.startFrom,t.days-1);n<a.length;n++)"_P","D","2 ",a[n]["_PD2 "+t.name]=Math.pow(100*(a[n][r]/o(t.days,n,r)-1),2);for(i.Studies.MA("simple",t.days,"_PD2 "+t.name,0,"_MA",e,t),n=Math.max(t.startFrom,2*(t.days-1));n<a.length;n++)((s=a[n]["_MA "+t.name])||0===s)&&(a[n]["Result "+t.name]=Math.sqrt(s))}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Ulcer:{name:"Ulcer Index",calculateFN:i.Studies.calculateUlcerIndex,inputs:{Period:14,Field:"field"}}})):console.error("ulcerIndex feature requires first activating studies feature.")},pe=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.T$X(),t.Studies?("U","ltim","ate Oscillator",t.Studies.calculateUltimateOscillator=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(a=t.chart.scrubbed,r=[t.inputs["Cycle 1"],t.inputs["Cycle 2"],t.inputs["Cycle 3"]],n=Math.max(r[0],r[1],r[2]),a.length<n+1)t.error=!0;else{i.f3X(),s=r[0]*r[1],o=r[0]*r[2],i.j7J(13);var x=i.c0C(3,11,7,0);i.N_M(169);var b=i.a$j(1,11,3,16);l=r[x]*r[b],h=[0,0,0],c=[0,0,0],t.startFrom&&("_acc","tr ",a[t.startFrom-1]["_accbp "+t.name]&&(h=a[t.startFrom-1]["_accbp "+t.name].slice()),a[t.startFrom-1]["_acctr "+t.name]&&(c=a[t.startFrom-1]["_acctr "+t.name].slice()));for(var C=Math.max(1,t.startFrom);C<a.length;C++){"Re","s","ult ","_a","cct","r ",u=Math.min(a[C].Low,a[C-1].Close),d=a[C].Close-u,i.j7J(170);var S=i.c0C(6,2,7,0);p=Math.max(a[C].High,a[C-S].Close)-u;for(var w=0;w<r.length;w++)if(h[w]+=d,c[w]+=p,C>r[w]){m=Math.min(a[C-r[w]].Low,a[C-r[w]-1].Close),g=a[C-r[w]].Close-m,i.j7J(171);var D=i.c0C(29,2,15,2,0);f=Math.max(a[C-r[w]].High,a[C-r[w]-D].Close)-m,h[w]-=g,c[w]-=f}if(a[C]["_accbp "+t.name]=h.slice(),a[C]["_acctr "+t.name]=c.slice(),!(C<n)){i.j7J(57);var k=i.c0C(952,10,12,7,8);i.j7J(27);var M=i.a$j(7,6);i.N_M(172);var T=i.a$j(7,5,1,5);i.N_M(173);var A=i.a$j(15,1,19,5,10);y=l*h[0]/c[0]+o*h[k]/c[M]+s*h[T]/c[A],i.N_M(82),v=i.a$j(s,o,l),i.N_M(111),a[C]["Result "+t.name]=i.a$j(y,v,100)}}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ultimate:{name:"Ultimate Oscillator",calculateFN:t.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):("ultimateOscillator feature require","s first activating studies feat","ure.",console.error("ultimateOscillator feature requires first activating studies feature."))},me=e=>{var t,i=we;i.f3X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#fff","69e","#","e1","e1e","1","har","mo","nic","media","n","m","e","a","n",t.Studies.calculateValuationLines=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,m,g,f;r="field"==t.inputs.Field?"Close":t.inputs.Field,n=t.inputs["Average Type"],s=t.inputs["Display Average"],o=t.inputs["Display 1 Standard Deviation (1)"],l=t.inputs["Display 2 Standard Deviation (2)"],h=t.inputs["Display 3 Standard Deviation (3)"],c=[];for(var y=0;y<a.length;++y)a[y]&&!isNaN(a[y][r])&&c.push(a[y][r]);u=function(e,t){var a,r,n,s,o,l;switch("me","d","i","an","h","armoni","c","m","ean",a=e.length,r=0,n=0,s=0,t){case"mean":for(n=a;s<a;++s)r+=e[s];break;case"harmonic":for(r=a;s<a;++s){i.j7J(68),n+=i.c0C(2,4,13,17)/e[s]}break;case"median":if(i.N_M(7),o=Math.floor(i.a$j(a,2)),l=e.slice().sort((function(e,t){return e>t?1:e<t?-1:0})),a%2==0){i.N_M(174);var h=i.a$j(14,15,19,11,30);r=l[o]+l[o-h],n=2}else r=l[o],n=1}return i.j7J(7),i.a$j(r,n)}(c,n),d=!(o||l||h)||function(e,t){var a,r;a=e.length,r=0,i.T$X();for(var n=0;n<a;++n)r+=Math.pow(e[n]-t,2);return i.j7J(7),Math.sqrt(i.a$j(r,a))}(c,u),t.data={Average:s?[u]:null,"1 Standard Deviation (1)":o?[u+d,u-d]:null,"2 Standard Deviation (2)":l?[u+2*d,u-2*d]:null,"3 Standard Deviation (3)":h?[u+3*d,u-3*d]:null},p=d,t.parameters||(t.parameters={}),h?(i.N_M(175),t.parameters.range=[i.a$j(3,p,d,u),i.a$j(p,d,u,3,i.j7J(176))]):l?(i.N_M(177),t.parameters.range=[i.c0C(0,d,p,u,"2"),i.a$j(p,d,u,2,i.N_M(176))]):o?(i.j7J(63),t.parameters.range=[i.a$j(d,p,u),i.a$j(p,d,u,i.N_M(82))]):s&&(i.j7J(14),t.parameters.range=[i.a$j(u,p),i.a$j(u,p,i.j7J(1))]),t.panel&&(m=e.panels[t.panel],(g=e.getYAxisByName(m,t.name))&&(g.decimalPlaces=m.chart.yAxis.printDecimalPlaces,f={yAxis:g},e.calculateYAxisRange(m,g,t.parameters.range[0],t.parameters.range[1]),e.createYAxis(m,f),e.drawYAxis(m,f)))},t.Studies.displayValuationLines=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w;r=e.panels[a.panel],n=a.getYAxis(e),s=a.getContext(e),o=a.data,l=a.parameters.labels,h=a.inputs["Average Type"],c={mean:"AVG",median:"MED",harmonic:"HAVG"},u=e.canvasStyle("ciq-valuation-average-line"),d=e.canvasStyle("ciq-valuation-deviation-line"),i.N_M(178);var D=i.a$j(13,0,1,5,2);for(var k in p=e.getCanvasFontSize("stx_yaxis")+3*D,o)if("Av","era","ge",o[k])for(i.N_M(179),m=i.a$j("Average",k),g=t.Studies.determineColor(a.outputs[k]),f=o[k],y=0;y<f.length;++y)"lef","t",":"," ","yaxi","s","li","ne","da","sh","ed","s","o","lid","non","e",v=f[y],(x=e.pixelFromPrice(v,r,n))<=r.top||x>=r.yAxis.bottom||(S=m?{pattern:"none"!=u.borderStyle&&u.borderStyle||"solid",lineWidth:parseFloat(u.borderWidth)||1,opacity:parseFloat(u.opacity)||1,yAxis:n}:{pattern:"none"!=d.borderStyle&&d.borderStyle||"dashed",lineWidth:parseFloat(d.borderWidth)||1,opacity:parseFloat(d.opacity)||1,yAxis:n},e.plotLine(r.left,r.right,x,x,g,"line",s,r,S),"yaxis"!==l?(x+=Math.floor(S.lineWidth/2))+p>=r.yAxis.bottom||(b=(m?c[h]+": ":k[0]+": ")+e.formatYAxisPrice(v,r),C=s.measureText(b).width,w=r.right-C-3,n&&"left"==n.position&&(w=r.left+3),i.N_M(180),s.strokeText(b,w,i.a$j("2",p,0,x,.5))):e.createYAxisLabel(r,e.formatYAxisPrice(v,r),x,g,null,s,n))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(e,a,r){i.T$X(),t.Studies.calculateValuationLines(e,a,r),t.Studies.displayValuationLines(e,a)},overlay:!0,yAxisFN:function(){},inputs:{Field:"field","Average Type":["mean","median","harmonic"],"Display Average":!0,"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1},outputs:{Average:"#00afed","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"}}})):("valuationLines feature requires first a","ctivating studies feature.",console.error("valuationLines feature requires first activating studies feature."))},ge=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","0 ","to 10","0","Relative Vol","atility",t.Studies.calculateRelativeVolatility=function(e,i){var a,r,n,s,o,l,h,c=we;if("m","a",i.days=Number(i.inputs["Smoothing Period"]),a=Number(i.inputs["STD Period"]),(r=i.chart.scrubbed).length<i.days+a)i.error=!0;else{(n=i.inputs.Field)&&"field"!=n||(n="Close"),i.std=new t.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=a,i.std.startFrom=i.startFrom,i.std.inputs={Field:n,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,i.std),s=0,o=0,i.startFrom>1&&(s=r[i.startFrom-1]["_avgG "+i.name]||0,o=r[i.startFrom-1]["_avgL "+i.name]||0);for(var u=Math.max(i.startFrom,i.days);u<r.length;u++)if(l=r[u],c.j7J(94),h=r[c.c0C(u,"1")],(l[n]||0===l[n])&&(h[n]||0===h[n])&&(l["_STD "+i.name]||0===l["_STD "+i.name])){if(l[n]>h[n]){c.N_M(14);var d=c.a$j(8,7);s=(s*(i.days-d)+l["_STD "+i.name])/i.days,c.j7J(14);var p=c.a$j(17,16);o=o*(i.days-p)/i.days}else{c.N_M(63);var m=c.c0C(11,8,20);o=(o*(i.days-m)+l["_STD "+i.name])/i.days,c.N_M(182);var g=c.c0C(6,0,6,1,1);s=s*(i.days-g)/i.days}l["Rel Vol "+i.name]=(f=s)+(y=o)===0?100:(c.N_M(181),c.c0C(100,y,f,f)),l["_avgG "+i.name]=s,l["_avgL "+i.name]=o}var f,y;i.zoneOutput="Rel Vol"}},t.Studies.calculateHistoricalVolatility=function(e,t){var i,a,r,n,s,o,l,h,c,u=we;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{var d;(a=t.inputs.Field)&&"field"!=a||(a="Close"),(r=t.inputs["Standard Deviations"])<0&&(r=1),u.j7J(101),n=u.c0C(1316,5,7,108,13)*Math.sqrt((d=t.inputs["Days Per Year"],isNaN(d)&&(d=365),"day"==e.layout.interval?d:"week"==e.layout.interval?52:"month"==e.layout.interval?12:(u.T$X(),d)))*r,s=[],o=0,t.startFrom>1&&(o=i[t.startFrom-1]["_state "+t.name][0],s=i[t.startFrom-1]["_state "+t.name][1].slice());for(var p=Math.max(1,t.startFrom);p<i.length;p++){if(u.j7J(94),(l=i[u.c0C(p,"1")][a])&&(h=Math.log(i[p][a]/l),s.push(h),o+=h,p>=t.days)){c=0,o/=t.days;for(var m=0;m<s.length;m++)c+=Math.pow(s[m]-o,2);o*=t.days,o-=s.shift(),i[p]["Result "+t.name]=Math.sqrt(c/t.days)*n}i[p]["_state "+t.name]=[o,s.slice()]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Hist Vol":{name:"Historical Volatility",calculateFN:t.Studies.calculateHistoricalVolatility,inputs:{Period:10,Field:"field","Days Per Year":[252,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:t.Studies.calculateRelativeVolatility,inputs:{Field:"field","STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":"auto"},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("volatilityIndex feature requires first activating studies feature.")},fe=e=>{var t,i=we;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.T$X(),t.Studies?("Volu","m","e Prof","ile",t.Studies.displayVolumeProfile=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A;if(e&&e.chart.dataSet&&(n=e.chart,s=a.parameters.numberOfBars,o=a.parameters.widthPercentage,l=a.parameters.displayBorder,h=a.parameters.displayVolume,(!s||s<0)&&(s=30),s=Math.ceil(s),(!o||o<0)&&(o=.25),!1!==l&&(l=!0),!0!==h&&(h=!1),0!==(c=(n.highValue-n.lowValue)/s))){u=[];for(var _=n.lowValue;_<n.highValue+.1;_+=c)u.push([_,0]);if(u.length<2)e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile"));else{d=0;for(var P=0;P<r.length;P++)if(p=r[P]){m=p.Volume,a.panel==n.name&&p.transform&&(p=p.transform),g=u[0][0],f=0;for(var F=1;F<u.length;F++)f=u[F][0],(p.Low>=g&&p.Low<=f||p.Low<g&&p.High>f||p.High>=g&&p.High<=f)&&(u[F][1]+=m,u[F][1]>d&&(d=u[F][1])),g=f}if(0!==d){e.setStyle("stx_volume_profile","color",t.Studies.determineColor(a.outputs["Bars Color"])),y=a.getContext(e),v="stx-float-date",e.canvasFont(v,y),x=e.getCanvasFontSize(v),b=n.panel,C=b.yAxis.bottom,S=Math.round(n.right)-.5,w=n.width*o,D=e.canvasStyle("stx_volume_profile").borderTopColor,k=!t.isTransparent(e.canvasStyle("stx_volume_profile").borderTopColor)&&l,M=e,E("stx_volume_profile",!1),k&&E("stx_volume_profile",!0),i.j7J(4),T=-i.c0C("1922240287",1),-1247173282,A=2;for(var L=1;i.O1W(L.toString(),L.toString().length,96806)!==T;L++)y.globalAlpha=5,A+=2;-1247173282!==i.S9Y(A.toString(),A.toString().length,90616)&&(y.globalAlpha=5),y.globalAlpha=1}else e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile"))}}function E(r,n){var s,o,l,c,p,m,g,f,v;n||(S-=2),M.canvasColor(r),y.beginPath(),i.N_M(46),s=u[0][i.c0C("0",0)],o=S;for(var k=1;k<u.length;k++){if(u[k][1]){i.N_M(0);var T=i.a$j(320,3,18,18);if(l=Math.round(S-u[k][T]*w/d)-.5,c=Math.round(M.pixelFromTransformedValue(s,b))+.5,p=Math.round(M.pixelFromTransformedValue(u[k][0],b))+.5,n||(c-=.5,p+=.5,l+=.5),c>C&&(c=C),p<C)if(y.moveTo(S,c),y.lineTo(S,p),y.lineTo(l,p),y.lineTo(l,c),n)(o>l||1==k)&&y.lineTo(o,c);else if(y.lineTo(S,c),h&&(m=t.condenseInt(u[k][1]),i.N_M(14),g=i.c0C(c,p),x<=g-2)){try{f=y.measureText(m).width}catch(e){f=0}y.textBaseline="top",v=y.fillStyle,y.fillStyle=D,i.j7J(63),y.fillText(m,i.a$j(f,3,l),i.a$j(g,x,2,2,p,i.j7J(183))),y.fillStyle=v}o=l}else o=S;i.j7J(46),s=u[k][i.c0C("0",0)]}!a.highlight&&e.highlightedDraggable&&(y.globalAlpha*=.3),n||y.fill(),y.strokeStyle=D,n&&y.stroke(),y.closePath()}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"vol profile":{name:"Volume Profile",underlay:!0,seriesFN:t.Studies.displayVolumeProfile,calculateFN:null,inputs:{},outputs:{"Bars Color":"#b64a96"},customRemoval:!0,parameters:{init:{displayBorder:!0,displayVolume:!1,numberOfBars:30,widthPercentage:.25}},attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("volumeProfile feature requires first activating studies feature.")},ye=e=>{var t,i,a=we;t=2;for(var r=1;-326070533!==a.O1W(r.toString(),r.toString().length,12746);r++)i="undefined"!=typeof _CIQ?_CIQ:e.CIQ,t+=2;1405609193!==a.S9Y(t.toString(),t.toString().length,50755)&&(i=""==-_CIQ?_CIQ:e.CIQ),i.Studies?("#b82","c0c","Vo","lu","me Under","lay","Trade Volume I","ndex","Price Volume ","Trend","#F","F0","000","a","u","t","o","#FF","00","00","m","a","f","iel","d","Negative Vol","ume ","Inde","x",i.Studies.calculateOnBalanceVolume=function(e,t){var i,r,n,s,o,l,h,c,u,d;if("f","ield",(i=t.inputs.Field)&&"field"!=i||(i="Close"),n=!1,!(r=t.inputs["Min Tick Value"])&&0!==r){n=!0,1160176223,1055944688,s=2;for(var p=1;1160176223!==a.S9Y(p.toString(),p.toString().length,66165);p++)r=0,s+=2;1055944688!==a.S9Y(s.toString(),s.toString().length,87319)&&(r=2)}o=t.chart.scrubbed,l=0,a.f3X(),a.N_M(5),a.a$j(1,"2073931254"),h=2;for(var m=1;781454516!==a.S9Y(m.toString(),m.toString().length,15810);m++)h+=2;a.S9Y(h.toString(),h.toString().length,79077);for(var g=t.startFrom;g<o.length;g++)c=o[g],g&&c[i]&&(o[g-1][i]&&(a.j7J(14),u=o[a.a$j(g,1)]),u&&(c[i]-u[i]>r?l=1:u[i]-c[i]>r?l=-1:n&&(l=0),(d=u["Result "+t.name])||(d=0),d+=c.Volume*l,c["Result "+t.name]=d))},i.Studies.calculatePriceVolumeTrend=function(e,t){var i,r,n;if((i=t.inputs.Field)&&"field"!=i||(i="Close"),r=t.chart.scrubbed,n=0,t.startFrom>1){"Re","su","lt ",a.j7J(184);var s=a.c0C(25,1,7,46);n=r[t.startFrom-("1"<<s)]["Result "+t.name]}for(var o=Math.max(1,t.startFrom);o<r.length;o++)if(r[o][i]&&r[o-1][i]){a.N_M(185);var l=a.c0C(9,4,19,2);a.N_M(184);var h=a.c0C(4,6,5,12);n+=r[o].Volume*(r[o][i]-r[o-l][i])/r[o-h][i],r[o]["Result "+t.name]=n}},i.Studies.calculateVolumeIndex=function(e,t){var r,n,s,o,l,h,c;if("I","ndex ",(r=t.inputs.Field)&&"field"!=r||(r="Close"),(n=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if(a.T$X(),s=100,t.startFrom>1){a.N_M(123);var u=a.a$j(1,18,6,0,4);s=n[t.startFrom-u]["Index "+t.name]}for(var d=Math.max(1,t.startFrom);d<n.length;d++)"In","d","ex ","Ne","g Vol",o=n[d][r],l=n[d].Volume,o&&"object"==typeof o&&(l=o.Volume,o=o[t.subField]),a.N_M(14),h=n[a.c0C(d,1)][r],c=n[d-1].Volume,h&&"object"==typeof h&&(c=h.Volume,h=h[t.subField]),o&&h&&(("Pos Vol"==t.type&&l>c||"Neg Vol"==t.type&&l<c)&&(a.N_M(7),s*=a.a$j(o,h)),n[d]["Index "+t.name]=s);i.Studies.MA(t.inputs["Moving Average Type"],t.days,"Index "+t.name,0,"MA",e,t)}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Neg Vol":{name:"Negative Volume Index",calculateFN:i.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:i.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:"Positive Volume Index",calculateFN:i.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"Price Vol":{name:"Price Volume Trend",calculateFN:i.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Trade Vol":{name:"Trade Volume Index",calculateFN:i.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:function(e,t){i.Studies.calculateRateOfChange?i.Studies.calculateRateOfChange(e,t):(console.error("Volume Rate of Change study requires first activating momentum feature."),i.Studies.calculateRateOfChange=function(e,t){})},parameters:{init:{isVolume:!0}}},"vol undr":{name:"Volume Underlay",underlay:!0,range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,position:"none",zoom:0,heightFactor:.25},seriesFN:i.Studies.createVolumeChart,calculateFN:i.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(e,t){e.layout.volumeUnderlay=!1,e.changeOccurred("layout")},attributes:{panelName:{hidden:!0}}}})):console.error("volumeStudies feature requires first activating studies feature.")},ve=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0",".0","1","#00","F","F00","Vo","rtex Indicator",t.Studies.calculateVortex=function(e,i){var a,r,n,s,o,l,h,c,u=we;if(a=i.chart.scrubbed,r=i.days,a.length<r+1)i.error=!0;else{u.T$X(),n={tr:0,vmPlus:0,vmMinus:0},i.startFrom>1&&(n=t.clone(a[i.startFrom-1]["_totals "+i.name]));for(var d=Math.max(i.startFrom,1);d<a.length;d++)s=a[d],u.j7J(14),o=a[u.a$j(d,1)],l=Math.abs(s.High-o.Low),h=Math.abs(s.Low-o.High),c=Math.max(s.High,o.Close)-Math.min(s.Low,o.Close),n.tr+=c,n.vmPlus+=l,n.vmMinus+=h,d>r&&("_VM","Mi","n","us ","_VMP","l","u","s ","_True Rang","e ",u.j7J(14),n.tr-=a[u.a$j(d,r)]["_True Range "+i.name],u.N_M(14),n.vmPlus-=a[u.c0C(d,r)]["_VMPlus "+i.name],u.j7J(14),n.vmMinus-=a[u.c0C(d,r)]["_VMMinus "+i.name]),s["_True Range "+i.name]=c,s["_VMPlus "+i.name]=l,s["_VMMinus "+i.name]=h,d>=r&&("-","V","I"," ",s["+VI "+i.name]=n.vmPlus/n.tr,s["-VI "+i.name]=n.vmMinus/n.tr),s["_totals "+i.name]=t.clone(n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Vortex:{name:"Vortex Indicator",calculateFN:t.Studies.calculateVortex,centerline:1,outputs:{"+VI":"#00FF00","-VI":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:1,step:"0.01"},studyOverSoldValue:{max:1,step:"0.01"}}}})):("vortex featu","re requires firs","t acti","vating studies feature.",console.error("vortex feature requires first activating studies feature."))},xe=e=>{var t,i=we;i.T$X(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#ffd0c","f",t.Studies.calculateMFI=function(e,t){var a,r,n,s,o,l;if(i.T$X(),a=t.chart.scrubbed,i.j7J(31),n=i.a$j("0",32),(s=t.inputs["Scale Factor"])||(s=t.study.inputs["Scale Factor"]),o=Math.pow(10,Number(s)),t.startFrom>1){i.N_M(119);var h=i.a$j(5,57,19,4);n=a[t.startFrom-h]["_high "+t.name]}for(l=t.startFrom;l<a.length;l++)a[l]&&a[l].Volume&&("_","hi","st",a[l][t.name+"_hist"]=r=o*(a[l].High-a[l].Low)/a[l].Volume,a[l]["_high "+t.name]=n=Math.max(n,r));t.outputMap={},t.outputMap[t.name+"_hist"]=""},t.Studies.displayMFI=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g;n=e.panels[a.panel],s=a.getContext(e),l=(o=a.getYAxis(e)).flipped?o.top:o.bottom,i.N_M(186);var f=i.c0C(18,15,15,4052);(h=e.layout.candleWidth-f)<2&&(h=1),c=t.Studies.determineColor(a.outputs.Green),u=t.Studies.determineColor(a.outputs.Fade),i.T$X(),d=t.Studies.determineColor(a.outputs.Fake),p=t.Studies.determineColor(a.outputs.Squat),e.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),s.fillStyle="#CCCCCC",e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var y=0;y<r.length;y++)m=r[y],i.N_M(14),(g=r[i.c0C(y,1)])||(g=e.getPreviousBar(e.chart,a.name+"_hist",y)),m&&(g&&(g[a.name+"_hist"]<m[a.name+"_hist"]?g.Volume<m.Volume?s.fillStyle=c:g.Volume>m.Volume&&(s.fillStyle=d):g[a.name+"_hist"]>m[a.name+"_hist"]&&(g.Volume<m.Volume?s.fillStyle=p:g.Volume>m.Volume&&(s.fillStyle=u))),m.candleWidth&&(h=Math.floor(Math.max(1,m.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(y,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(m[a.name+"_hist"],n,o)-l)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W MFI":{name:"Market Facilitation Index",seriesFN:t.Studies.displayMFI,calculateFN:t.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:"#ab611f",Fake:"#5f7cb8",Squat:"#ffd0cf"}}})):console.error("williamsMFI feature requires first activating studies feature.")},be={CIQ:Se.c,SplinePlotter:Se.d,timezoneJS:Se.B,$$:Se.a,$$$:Se.b},"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||be.CIQ.activateImports(n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,z,q,J,V,B,W,U,Q,X,Z,G,K,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,xe,null);
/**!
 *	8.2.0
 *	Generation date: 2023-03-23T15:05:01.971Z
 *	Client name: deriv limited
 *	Package Type: Technical Analysis
 *	License type: annual
 *	Expiration date: "2024/04/01"
 *	Domain lock: ["127.0.0.1","localhost","deriv.com","deriv.app","deriv.me","binary.com","binary.sx","binary.me","binary.bot","deriv.be"]
 *	iFrame lock: true
 */
/***********************************************************!
 * Copyright by ChartIQ, Inc.
 * Licensed under the ChartIQ, Inc. Developer License Agreement https://www.chartiq.com/developer-license-agreement
*************************************************************/
/*************************************! DO NOT MAKE CHANGES TO THIS LIBRARY FILE!! !*************************************
* If you wish to overwrite default functionality, create a separate file with a copy of the methods you are overwriting *
* and load that file right after the library has been loaded, but before the chart engine is instantiated.              *
* Directly modifying library files will prevent upgrades and the ability for ChartIQ to support your solution.          *
*************************************************************************************************************************/
/***********************************************************!
 * Copyright by ChartIQ, Inc.
 * Licensed under the ChartIQ, Inc. Developer License Agreement https://www.chartiq.com/developer-license-agreement
*************************************************************/
/*************************************! DO NOT MAKE CHANGES TO THIS LIBRARY FILE!! !*************************************
* If you wish to overwrite default functionality, create a separate file with a copy of the methods you are overwriting *
* and load that file right after the library has been loaded, but before the chart engine is instantiated.              *
* Directly modifying library files will prevent upgrades and the ability for ChartIQ to support your solution.          *
*************************************************************************************************************************/
var De=null;Ce.c.deprecationWarning=function(e){De||(De={},setInterval((function(){for(var e in De)console.warn(e+" ("+De[e]+" occurrences)"),delete De[e]}),1e4)),De[e]?De[e]++:De[e]=1};var ke=Ce.c.deprecationWarning;Function.prototype.ciqInheritsFrom||(Function.prototype.ciqInheritsFrom=function(e,t){ke("Function.prototype.ciqInheritsFrom() has been deprecated.  Use CIQ.inheritsFrom(me, ctor, autosuper) instead."),Ce.c.inheritsFrom(this,e,t)},Function.prototype.stxInheritsFrom=Function.prototype.ciqInheritsFrom),String.prototype.capitalize=function(){return ke("String.prototype.capitalize() has been deprecated.  Use CIQ.capitalize(string) instead."),Ce.c.capitalize(this)},CanvasRenderingContext2D.prototype.dashedLineTo=function(e,t,i,a,r){if(ke("CanvasRenderingContext2D.prototype.dashedLineTo() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo(), lineTo() and setLineDash() instead."),!(r instanceof Array))return r&&console.log('WARNING: Unsupported drawing pattern "'+r+'"; defaulting to "solid"'),void this.stxLine(e,t,i,a,this.strokeStyle,this.globalAlpha,this.lineWidth);if(t!==1/0&&e!==1/0&&a!==1/0&&i!==1/0){var n=function(e,t){return e-t<=1e-8},s=function(e,t){return e-t>=-1e-8},o=function(e,t){return Math.min(e,t)},l=function(e,t){return Math.max(e,t)},h={thereYet:s,cap:o},c={thereYet:s,cap:o};if(t-a>0&&(c.thereYet=n,c.cap=l),e-i>0&&(h.thereYet=n,h.cap=l),this.moveTo(e,t),!isNaN(e)&&!isNaN(t))for(var u=e,d=t,p=0,m=!0;!h.thereYet(u,i)||!c.thereYet(d,a);){var g=Math.atan2(a-t,i-e),f=r[p];u=h.cap(i,u+Math.cos(g)*f),d=c.cap(a,d+Math.sin(g)*f),m?this.lineTo(u,d):this.moveTo(u,d),p=(p+1)%r.length,m=!m}}},CanvasRenderingContext2D.prototype.stxLine=function(e,t,i,a,r,n,s,o){ke("CanvasRenderingContext2D.prototype.stxLine() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo() and lineTo() instead."),this.beginPath(),this.lineWidth=s,this.strokeStyle=r,this.globalAlpha=n,o&&o.length?this.dashedLineTo(e,t,i,a,o):(this.moveTo(e,t),this.lineTo(i,a)),this.stroke(),this.closePath(),this.lineWidth=1},CanvasRenderingContext2D.prototype.stxCircle=function(e,t,i,a){ke("CanvasRenderingContext2D.prototype.stxCircle() has been deprecated.  Use native CanvasRenderingContext2D methods such as arc() instead."),this.beginPath(),this.arc(e,t,i,0,2*Math.PI,!1),a&&this.fill(),this.stroke(),this.closePath()},Ce.c.getAjaxServer=function(e){return ke("CIQ.getAjaxServer() has been deprecated.  Use `new XMLHttpRequest` instead."),new XMLHttpRequest},Ce.c.convertClickToTouchEnd=function(e){ke("CIQ.convertClickToTouchEnd() has been deprecated.  Use CIQ.safeClickTouch() instead.");var t=document.getElementById(e),i=t.getAttribute("onClick");i&&(t.removeAttribute("onClick"),t.setAttribute("onTouchEnd",i))},Ce.c.standardUTCDate=function(e){ke("CIQ.standardUTCDate(dt) has been deprecated.  Use dt.toISOString() instead.");var t=e.getUTCMonth()+1;t<10&&(t="0"+t);var i=e.getUTCDate();i<10&&(i="0"+i);var a=e.getUTCHours();a<10&&(a="0"+a);var r=e.getUTCMinutes();r<10&&(r="0"+r);var n=e.getUTCSeconds();return n<10&&(n="0"+n),e.getUTCFullYear()+"-"+t+"-"+i+"T"+a+":"+r+":"+n+"Z"},Ce.c.isDST=function(e){ke("CIQ.isDST() has been deprecated.  Use dt.toISOString() instead."),e||(e=new Date);var t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1),a=Math.max(t.getTimezoneOffset(),i.getTimezoneOffset());return e.getTimezoneOffset()!=a},Ce.c.getEventDOM=function(e){return ke("CIQ.getEventDOM() has been deprecated.  Use `e.target` instead."),e?e.target:window.event.srcElement},Ce.c.outerWidth=function(e){ke("CIQ.outerWidth() has been deprecated.  Use `CIQ.elementDimensions(node, {margin:1, padding:1, border:1}).width` instead.");var t=e.offsetWidth;return t+=Ce.c.stripPX(getComputedStyle(e).marginLeft),t+=Ce.c.stripPX(getComputedStyle(e).marginRight)},Ce.c.clearNode=function(e){if(ke("CIQ.clearNode() has been deprecated.  Use `node.innerHTML=''` instead."),e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild)},Ce.c.findClosestParent=function(e,t){var i,a;if(ke("CIQ.findClosestParent() has been deprecated.  Use `Element.parentElement.prototype.closest()` instead."),["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(i=e,!0)})),!i)return!1;for(;e;){if((a=e.parentElement)&&a[i](t))return a;e=a}return null},Ce.c.appendClassName=function(e,t){if(ke("CIQ.appendClassName() has been deprecated.  Use `node.classList.add(className)` instead."),e&&e.className!=t){for(var i=e.className.split(" "),a=0;a<i.length;a++)if(i[a]==t)return;e.className?e.className+=" "+t:e.className=t}},Ce.c.unappendClassName=function(e,t){if(ke("CIQ.unappendClassName() has been deprecated.  Use `node.classList.remove(className)` instead."),e&&-1!=e.className.indexOf(t))if(e.className==t)e.className="";else{for(var i=e.className.split(" "),a="",r=0;r<i.length;r++)i[r]!=t&&(""!==a&&(a+=" "),a+=i[r]);e.className=a}},Ce.c.swapClassName=function(e,t,i){ke("CIQ.swapClassName() has been deprecated.  Use `node.classList.replace(oldClassName, newClassName)` instead."),Ce.c.unappendClassName(e,i),Ce.c.appendClassName(e,t)},Ce.c.hasClassName=function(e,t){return ke("CIQ.hasClassName() has been deprecated.  Use `node.classList.contains(className)` instead."),!!e&&(" "+e.className+" ").indexOf(" "+t+" ")>-1},Ce.c.toggleClassName=function(e,t){ke("CIQ.toggleClassName() has been deprecated.  Use `node.classList.toggle(className)` instead."),Ce.c.hasClassName(e,t)?Ce.c.unappendClassName(e,t):Ce.c.appendClassName(e,t)},function(){var e,t,i=document.attachEvent,a=navigator.userAgent.match(/Trident/),r=(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,20)},function(t){return e(t)}),n=(t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)});function s(e){var t=e.target||e.srcElement;t.__resizeRAF__&&n(t.__resizeRAF__),t.__resizeRAF__=r((function(){var i=t.__resizeTrigger__;i.__resizeListeners__.forEach((function(t){t.call(i,e)}))}))}function o(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",s)}Ce.c.addResizeListener=function(e,t){ke("CIQ.addResizeListener() has been deprecated.  Use CIQ.UI.addResizeListener() instead.");var r=document.querySelector("cq-ui-manager");if(r.length>0&&(r=r[0]).registerForResize(e),!e.__resizeListeners__)if(e.__resizeListeners__=[],i)e.__resizeTrigger__=e,e.attachEvent("onresize",s);else{var n=e.__resizeTrigger__=document.createElement("object");n.setAttribute("style","visibility:hidden; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; border:0px;"),n.__resizeElement__=e,n.onload=o,n.type="text/html",a&&e.appendChild(n),n.data="about:blank",a||e.appendChild(n)}e.__resizeListeners__.push(t)},Ce.c.removeResizeListener=function(e,t){ke("CIQ.removeResizeListener() has been deprecated.  Use CIQ.UI.removeResizeListener() instead.");var a=document.querySelector("cq-ui-manager");a.length>0&&(a=a[0]).unregisterForResize(e),e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(i?e.detachEvent("onresize",s):(e.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",s),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)))}}(),Ce.c.Renderer.prototype.performCalculations=function(){ke("CIQ.Renderer.prototype.performCalculations has been deprecated.  Use CIQ.Renderer.prototype.adjustYAxis instead.")},Ce.c.ChartEngine.hideDates=function(){return ke("CIQ.Renderer.hideDates is no longer supported.  To hide an axis, set its noDraw property.  To hide the floating date label, set stxx.controls.floatDate=null."),!1},Ce.c.ChartEngine.chartShowsHighs=function(e){return ke("CIQ.ChartEngine.prototype.chartShowsHighs has been deprecated.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),1!={line:1,colored_line:1,mountain:1,colored_mountain:1,baseline_delta:1,baseline_delta_mountain:1,histogram:1,scatterplot:1,step:1,colored_step:1}[e]},Ce.c.ChartEngine.prototype.createBlock=function(e,t,i,a,r,n){ke("CIQ.ChartEngine.prototype.createBlock has been deprecated.  Use native canvas context operation fillRect instead."),n||(n=this.chart.context),void 0!==a&&(this.canvasColor(r,n),n.fillRect(e,i,t,a),n.globalAlpha=1)},Ce.c.ChartEngine.prototype.setVolumeUnderlay=function(e){ke("CIQ.ChartEngine.prototype.setVolumeUnderlay is no longer supported.  To enable a volume underlay, use CIQ.Studies.addStudy(stxx, 'vol undr').  To disable, use CIQ.Studies.removeStudy."),this.layout.volumeUnderlay=e,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},Ce.c.ChartEngine.prototype.serializeDrawings=function(){return ke("CIQ.ChartEngine.prototype.serializeDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.exportDrawings instead."),this.exportDrawings()},Ce.c.ChartEngine.prototype.reconstructDrawings=function(e){ke("CIQ.ChartEngine.prototype.reconstructDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.importDrawings instead."),this.importDrawings(e)},Ce.c.ChartEngine.prototype.computePosition=function(e,t){return ke("CIQ.ChartEngine.prototype.computePosition has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromBar instead."),void 0===t&&(t=0),e*this.layout.candleWidth+t+this.micropixels},Ce.c.ChartEngine.prototype.computeColor=function(e,t){return ke("CIQ.ChartEngine.prototype.computeColor has been deprecated.  There is no suggested alternative."),e<t?"stx_candle_up":e>t?"stx_candle_down":"stx_candle_shadow"},Ce.c.ChartEngine.prototype.computeLength=function(e,t){ke("CIQ.ChartEngine.prototype.computeLength has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice to compute values and find the difference.");var i=this.pixelFromPrice(e);return this.pixelFromPrice(t)-i},Ce.c.ChartEngine.prototype.setCrosshairColors=function(){ke("CIQ.ChartEngine.prototype.setCrosshairColors is no longer supported.  Use CSS to set the crosshair color")},Ce.c.ChartEngine.prototype.valueFromPixelUntransform=function(e,t,i){return ke("CIQ.ChartEngine.prototype.valueFromPixelUntransform has been deprecated.  Use CIQ.ChartEngine.prototype.valueFromPixel instead."),this.valueFromPixel(e,t,i)},Ce.c.ChartEngine.prototype.pixelFromPriceTransform=function(e,t,i){return ke("CIQ.ChartEngine.prototype.pixelFromPriceTransform has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice instead."),this.pixelFromPrice(e,t,i)},Ce.c.ChartEngine.prototype.isDailyInterval=function(e){return ke("CIQ.ChartEngine.prototype.isDailyInterval has been deprecated. Use CIQ.ChartEngine.isDailyInterval instead."),Ce.c.ChartEngine.isDailyInterval(e)},Ce.c.ChartEngine.prototype.newChart=function(e,t,i,a,r){ke("CIQ.ChartEngine.prototype.newChart has been deprecated. Use CIQ.ChartEngine.prototype.loadChart instead.");var n={masterData:t,chart:i};return Ce.c.extend(n,r,!0),this.loadChart(e,n,a)},Ce.c.ChartEngine.prototype.streamTrade=function(e,t,i,a){ke("CIQ.ChartEngine.prototype.streamTrade has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead.");var r=this.chart;a||(a={}),a.chart&&(r=a.chart),a.fillGaps=this.streamParameters.fillGaps;var n="object"==typeof e,s=n?e.last:arguments[0],o=n?e.volume:arguments[1],l=n?e.bid:null,h=n?e.ask:null;n||(t=arguments[2],i=arguments[3]),i&&(a.secondarySeries=i);var c={DT:t,Last:s,Volume:o,Bid:l,Ask:h};this.updateChartData(c,r,a)},Ce.c.ChartEngine.prototype.appendMasterData=function(e,t,i){ke("CIQ.ChartEngine.prototype.appendMasterData has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead."),this.updateChartData(e,t,i)},Ce.c.ChartEngine.prototype.setPeriodicityV2=function(e,t,i,a){ke("CIQ.ChartEngine.prototype.setPeriodicityV2 has been deprecated. Use CIQ.ChartEngine.prototype.setPeriodicity instead."),"function"==typeof i&&(a=i,i=null),this.runPrepend("setPeriodicityV2",arguments)||(this.setPeriodicity(e,t,i,a),this.runAppend("setPeriodicityV2",arguments))},Ce.c.ChartEngine.prototype.addChart=function(e,t){ke("CIQ.ChartEngine.prototype.addChart has been deprecated. Add manually to stxx.charts object instead."),t.name=e,this.charts[e]=t};var Me=Ce.c.ChartEngine.prototype.changeOccurred;Ce.c.ChartEngine.prototype.changeOccurred=function(e){this.currentlyImporting||(this.changeCallback&&this.changeCallback(this,e),Me.call(this,e))};var Te=Ce.c.ChartEngine.prototype.construct;if(Ce.c.ChartEngine.prototype.construct=function(){function e(e,t,i){return e._deprecatedPropertyValues||(e._deprecatedPropertyValues={}),t in e._deprecatedPropertyValues||(e._deprecatedPropertyValues[t]=i),e._deprecatedPropertyValues[t]}function t(e,t,i){e._deprecatedPropertyValues||(e._deprecatedPropertyValues={}),e._deprecatedPropertyValues[t]=i}function i(t,i,a){return function(){return ke("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Iterate through CIQ.ChartEngine.prototype.callbackListeners instead."),e(this,t,a||null)}}function a(e,t){return function(i){ke("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Utilize CIQ.ChartEngine.prototype.addEventListener to add a callback, and/or CIQ.ChartEngine.prototype.removeEventListener to remove one."),this._deprecatedPropertyValues||(this._deprecatedPropertyValues={});var a=this._deprecatedPropertyValues[e];a&&t.removeEventListener(e,a),i&&t.addEventListener(e,i),this._deprecatedPropertyValues[e]=i}}var r;Te.call(this),Object.defineProperties(this,{changeCallback:{enumerable:!0,get:function(){return e(this,"changeCallback",null)},set:function(e){ke("CIQ.ChartEngine.prototype.changeCallback has been deprecated.  Use CIQ.ChartEngine.prototype.addEventListener instead."),t(this,"changeCallback",e)}},highLowBars:{enumerable:!0,get:function(){return ke("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),e(this,"highLowBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,wave:!0,rangechannel:!0,none:!0})},set:function(e){ke("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),t(this,"highLowBars",e)}},standaloneBars:{enumerable:!0,get:function(){return ke("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),e(this,"standaloneBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0})},set:function(e){ke("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),t(this,"standaloneBars",e)}},barsHaveWidth:{enumerable:!0,get:function(){return ke("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),e(this,"barsHaveWidth",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0,wave:!0})},set:function(e){ke("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),t(this,"barsHaveWidth",e)}}}),this.callbacks={},Object.defineProperties(this.callbacks,{studyOverlayEdit:{enumerable:!0,get:i("studyOverlayEdit"),set:a("studyOverlayEdit",this)},studyPanelEdit:{enumerable:!0,get:i("studyPanelEdit"),set:a("studyPanelEdit",this)},tap:{enumerable:!0,get:i("tap"),set:a("tap",this)},rightClick:{enumerable:!0,get:i("rightClick"),set:a("rightClick",this)},longhold:{enumerable:!0,get:i("longHold"),set:a("longHold",this)},move:{enumerable:!0,get:i("move"),set:a("move",this)},layout:{enumerable:!0,get:i("layout"),set:a("layout",this)},drawing:{enumerable:!0,get:i("drawing"),set:a("drawing",this)},drawingEdit:{enumerable:!0,get:i("drawingEdit"),set:a("drawingEdit",this)},preferences:{enumerable:!0,get:i("preferences"),set:a("preferences",this)},theme:{enumerable:!0,get:i("theme"),set:a("theme",this)},symbolChange:{enumerable:!0,get:i("symbolChange"),set:a("symbolChange",this)},symbolImport:{enumerable:!0,get:i("symbolImport"),set:a("symbolImport",this)},calculateTradingDecimalPlaces:{enumerable:!0,get:(r=this,function(){return ke("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),e(this,"calculateTradingDecimalPlaces",r.chart.calculateTradingDecimalPlaces)}),set:function(e){return function(i){ke("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),t(this,"calculateTradingDecimalPlaces",i),e.chart.calculateTradingDecimalPlaces=i}}(this)}}),Object.defineProperty(this.streamParameters,"fillGaps",{enumerable:!0,get:function(){return ke("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),e(this,"fillGaps",!0)},set:function(e){ke("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),t(this,"fillGaps",e)}})},"undefined"!=typeof window&&Object.defineProperties(window,{STX:{enumerable:!0,get:function(){return ke("STX namespace has been deprecated.  Use CIQ namespace instead."),Ce.c}},STXChart:{enumerable:!0,get:function(){return ke("STXChart namespace has been deprecated.  Use CIQ.ChartEngine namespace instead."),Ce.c.ChartEngine}}}),Ce.c.ChartEngine.prototype.attachEngineQuoteFeed=function(e,t){ke("CIQ.ChartEngine.prototype.attachEngineQuoteFeed has been deprecated. Use CIQ.ChartEngine.prototype.attachQuoteFeed instead."),this.attachQuoteFeed(e,t)},Ce.c.ChartEngine.prototype.dragPlot=function(e){ke("CIQ.ChartEngine.prototype.dragPlot is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},Ce.c.ChartEngine.prototype.dragYAxis=function(e){ke("CIQ.ChartEngine.prototype.dragYAxis is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},Ce.c.Drawing=Ce.c.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},Ce.c.Drawing.prototype.setLineColor=function(){if(ke("CIQ.Drawing.prototype.setLineColor has been deprecated.  Use CIQ.Drawing.prototype.setLineColor instead."),Ce.c.Drawing.prototype.getLineColor)return Ce.c.Drawing.prototype.getLineColor.apply(this,arguments)},Ce.c.Studies=Ce.c.Studies||function(){},Ce.c.Studies.quickAddStudy=function(){if(ke("CIQ.Studies.quickAddStudy has been deprecated.  Use CIQ.Studies.addStudy instead."),Ce.c.Studies.addStudy)return Ce.c.Studies.addStudy.apply(null,arguments)},Ce.c.Studies.overZones=function(){if(ke("CIQ.Studies.overZones has been deprecated.  Use CIQ.Studies.drawZones instead."),Ce.c.Studies.drawZones)return Ce.c.Studies.drawZones.apply(null,arguments)},Ce.c.Studies.volUnderlay=function(){ke("CIQ.Studies.volUnderlay has been deprecated.  Use CIQ.Studies.createVolumeChart instead."),Ce.c.Studies.createVolumeChart&&Ce.c.Studies.createVolumeChart.apply(null,arguments)},Ce.c.Studies.determineMinMax=function(e,t,i){ke("CIQ.Studies.determineMinMax is no longer supported.  The calculation is done automatically elsewhere.")},Ce.c.Studies.createYAxis=function(e,t,i,a){ke("CIQ.Studies.createYAxis is no longer supported.  The action is done automatically elsewhere.")},Ce.c.Studies.volumeChart=function(e,t,i,a){ke("CIQ.Studies.volumeChart has been deprecated.  Use CIQ.ChartEngine.prototype.drawHistogram instead.");var r,n,s=-1*Number.MAX_VALUE;for(r in i)for(var o=0;o<i[r].length;o++)(n=i[r][o])&&n>s&&(s=n);var l=e.panels[t.panel],h=Math.floor(l.yAxis.bottom)+.5,c=h-(Math.floor(l.yAxis.top)+.5),u=e.layout.candleWidth,d=null;t.parameters&&t.parameters.displayBorder||(a=null);var p=0;a||(p=(u-e.chart.tmpWidth)/2);var m=t.getContext(e);for(r in m.lineWidth=1,e.startClip(t.panel),i){a&&(d=a[r]),m.fillStyle=r,d&&(m.strokeStyle=d),m.beginPath();for(var g,f=h+.5,y=Math.floor(e.pixelFromBar(0,l.chart)),v=0;v<i[r].length;v++)if(e.chart.dataSegment[v]&&e.chart.dataSegment[v].candleWidth?(u=e.chart.dataSegment[v].candleWidth,a||(p=u/4)):(u=e.layout.candleWidth,a||(p=(u-e.chart.tmpWidth)/2)),0===v&&(g=y-=u/2),n=i[r][v]){var x,b,C=n*(c/s),S=Math.min(Math.floor(h-c+(c-C))+.5,h);x=Math.floor(g+p),b=Math.floor(g+u-p),x=Math.max(x,y),m.moveTo(x,h),m.lineTo(b,h),m.lineTo(b,S),m.lineTo(x,S),a?(f>S||0===v)&&m.lineTo(x,f):m.lineTo(x,h),f=S,g+=u}else f=h,g+=u;m.fill(),m.strokeStyle=d,a&&e.layout.candleWidth>=2&&m.stroke(),m.closePath()}e.endClip()},"undefined"!=typeof window&&Object.defineProperty(window,"STXSocial",{enumerable:!0,get:function(){return ke("STXSocial namespace has been deprecated.  Use CIQ.Share namespace instead."),Ce.c.Share}}),"function"==typeof $&&$.fn){$.fn.extend($.expr[":"],{trulyvisible:function(e,t,i){ke("Use of jQuery has been deprecated. Use CIQ.trulyVisible() to return element visibility instead of custom pseudo-selector :trulyvisible.");var a=$(e).parents();a=a.add(e);for(var r=0;r<a.length;r++){var n=$(a[r]);if("0"===n.css("opacity"))return!1;if("hidden"===n.css("visibility"))return!1;if("0px"===n.css("height")&&"hidden"==n.css("overflow-y"))return!1;if(!n.is(":visible"))return!1}return!0}});$.fn.extend({stxtap:function(e,t){return ke("Use of jQuery has been deprecated. Use CIQ.UI.stxtap() to attach a listener instead of $.fn.stxtap()."),this.each((function(){Ce.c.installTapEvent(this),"string"==typeof e?$(this).on("stxtap",e,(function(e){t.call(this,e)})):$(this).on("stxtap",(function(t){e.call(this,t)}))}))},parentsAndMe:function(e){ke("Use of jQuery has been deprecated. Use CIQ.climbUpDomTree() instead of $.fn.parentsAndMe().");var t=$(this).parents();return t=t.add($(this)).get().reverse()},cqvirtual:function(e){ke("Use of jQuery has been deprecated. Use CIQ.cqvirtual() instead of $.fn.cqvirtual().");var t=this.clone(!0);return t.empty(),t.original=this,t},cqrender:function(e){if(ke("Use of jQuery has been deprecated. Use CIQ.cqrender() instead of $.fn.cqrender()."),this[0].innerHTML==this.original[0].innerHTML)return this.original;this.original.children(":not(template)").remove();var t=this.children();if(t.length){var i=t.detach();this.original.append(i)}return this.original},guaranteedWidth:function(){ke("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedWidth().");for(var e=this,t=e.width();!t;){if("BODY"===(e=e.parent())[0].tagName||e[0]===window)return window.innerWidth;t=e.width()}return t},guaranteedHeight:function(){ke("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedHeight().");for(var e=this,t=e.height();!t;){if("BODY"===(e=e.parent())[0].tagName||e[0]===window)return window.innerHeight;t=e.height()}return t},emptyExceptTemplate:function(){return ke("Use of jQuery has been deprecated. Use CIQ.removeChildIfNot(node, 'template') instead of $.fn.emptyExceptTemplate()."),this.children().not("template").remove(),this},truthyAttr:function(e){ke("Use of jQuery has been deprecated. Use ['false','0',null,undefined].indexOf(this.getAttribute('...'))==-1 instead of $.fn.truthyAttr().");var t=this.attr(e);return void 0!==t&&("false"!=t.toLowerCase()&&"0"!=t)},attrBetter:function(e,t){return ke("Use of jQuery has been deprecated. check attribute value before setting instead of $.fn.attrBetter()."),this.attr(e,(function(e,i){if(void 0===t&&(t="true"),t!==i)return t}))},removeAttrBetter:function(e){ke("Use of jQuery has been deprecated. check hasAttribute before removing instead of $.fn.removeAttrBetter().");var t=this.attr(e);return!(!t&&""!==t)&&(this.removeAttr(e),!0)},textBetter:function(e){return ke("Use of jQuery has been deprecated. check innerText before setting instead of $.fn.textBetter()."),this.text()!==e&&(this.text(e),!0)}}),$.queryString=function(e){ke("Use of jQuery has been deprecated. Use CIQ.qs() to return an object containing querystring tokens instead of $.querystring().");for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var a=t[i].split("=");if(a[0]==e)return a[1]}return null}}Ce.c.UI||(Ce.c.UI={}),Ce.c.UI.allContexts=function(){return ke("CIQ.UI.allContexts has been deprecated. Use document.querySelectorAll('cq-context,*[cq-context]') instead."),$("cq-context,*[cq-context]")},Ce.c.UI.observe=function(e){if(ke("CIQ.UI.observe has been deprecated.  Use CIQ.UI.observeProperty instead."),Object.observe){if("function"==typeof $&&$.fn){var t=this,i=function(e){e.forEach(a)};return Object.observe(e.obj,i,["update","add","delete"]),a({name:e.member}),i}ke("You must include jQuery in your project to use CIQ.UI.observe.")}else ke("You must include thirdparty/object-observe.js in your project to use CIQ.UI.observe.");function a(i){var a=!1;if(e.member){if(i.name===e.member)a=!0;else if(e.member.constructor==Array)for(var r=0;r<e.member.length;r++)i.name===e.member[r]&&(a=!0)}else a=!0;if(a){var n=$(e.selector);if(!n.length&&"callback"===e.action)return void e.value.call(t,e);"class"===e.action&&n.removeClass(e.value),n.each((function(){var i=!1;e.member&&(e.condition?e.obj[e.member]===e.condition&&(i=!0):i=e.obj[e.member]),"class"===e.action&&i&&n.addClass(e.value),"callback"===e.action&&e.value.call(t,e,this),"value"===e.action&&(e.value?this.value=e.value:e.obj[e.member]?this.value=e.obj[e.member]:this.value="")}))}}},Ce.c.UI.unobserve=function(e){ke("CIQ.UI.unobserve has been deprecated.  Use CIQ.UI.unobserveProperty instead."),Object.unobserve&&Object.unobserve(e.obj,e.handler)},Ce.c.UI.trulyVisible=function(e){return ke("CIQ.UI.trulyVisible has been deprecated.  Use CIQ.trulyVisible instead."),Ce.c.trulyVisible(e)},Ce.c.UI.Lookup=function(){},Ce.c.UI.Lookup.Driver=function(){this.deprecated=!0},Ce.c.UI.Lookup.Driver.prototype.acceptText=function(e,t,i,a){this.cb},Ce.c.UI.Lookup.Driver.ChartIQ=function(e){ke("CIQ.UI.Lookup.Driver.ChartIQ has been deprecated.  Use CIQ.ChartEngine.Driver.Lookup.ChartIQ instead."),this.exchanges=e,this.exchanges||(this.exchanges=["XNYS","XASE","XNAS","XASX","INDCBSX","INDXASE","INDXNAS","IND_DJI","ARCX","INDARCX","forex"]),this.url="https://symbols.chartiq.com/chiq.symbolserver.SymbolLookup.service",this.requestCounter=0},Ce.c.inheritsFrom(Ce.c.UI.Lookup.Driver.ChartIQ,Ce.c.UI.Lookup.Driver),Ce.c.UI.Lookup.Driver.ChartIQ.prototype.acceptText=function(e,t,i,a){"FX"==t&&(t="FOREX"),isNaN(parseInt(i,10))&&(i=100);var r=this.url+"?t="+encodeURIComponent(e)+"&m="+i+"&x=[";this.exchanges&&(r+=this.exchanges.join(",")),r+="]",t&&"ALL"!=t.toUpperCase()&&(r+="&e="+t);var n=++this.requestCounter,s=this;Ce.c.postAjax({url:r,cb:function(e,t){if(!(n<s.requestCounter)&&200==e)try{for(var i=(t=JSON.parse(t)).payload.symbols,r=[],o=0;o<i.length;o++){var l=i[o].split("|"),h={symbol:l[0],name:l[1],exchDisp:l[2]};r.push({display:[h.symbol,h.name,h.exchDisp],data:h})}a(r)}catch(e){}}})},Ce.c.UI.BaseComponent&&(Ce.c.UI.BaseComponent.bind=function(e,t){ke("CIQ.UI.BaseComponent.bind has been deprecated. Use CIQ.UI.BaseComponent.bindNode() instead."),Ce.c.UI.BaseComponent.bindNode(e,t)});
/**!
 *	8.2.0
 *	Generation date: 2023-03-23T15:05:01.971Z
 *	Client name: deriv limited
 *	Package Type: Technical Analysis
 *	License type: annual
 *	Expiration date: "2024/04/01"
 *	Domain lock: ["127.0.0.1","localhost","deriv.com","deriv.app","deriv.me","binary.com","binary.sx","binary.me","binary.bot","deriv.be"]
 *	iFrame lock: true
 */
/***********************************************************!
 * Copyright by ChartIQ, Inc.
 * Licensed under the ChartIQ, Inc. Developer License Agreement https://www.chartiq.com/developer-license-agreement
*************************************************************/
/*************************************! DO NOT MAKE CHANGES TO THIS LIBRARY FILE!! !*************************************
* If you wish to overwrite default functionality, create a separate file with a copy of the methods you are overwriting *
* and load that file right after the library has been loaded, but before the chart engine is instantiated.              *
* Directly modifying library files will prevent upgrades and the ability for ChartIQ to support your solution.          *
*************************************************************************************************************************/
let Ae=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ExtendedHours=t.ExtendedHours||function(e){var i=e.stx;this.filter=e.filter,i||(i=e,this.filter=!1);var a={};this.stx=i,this.stx.extendedHours=this,this.cssRequired=!0,i.addEventListener("theme",(function(e){for(var t in a={},i.layout.marketSessions)a.session||(a.session={}),a.session[t]=i.canvasStyle("stx_market_session "+t)})),i.addEventListener("symbolChange",(function(e){"master"!=e.action||!i.layout.extended||i.chart.market.market_def&&i.chart.market.sessions.length||t.alert("There are no Extended Hours for this instrument.")})),this.prepare=function(e,t){for(var r in i.layout.extended=e,i.layout.marketSessions)a.session={},i.chart.market.disableSession(r);if(i.layout.marketSessions={},e)if(t||(t=["pre","post"]),t.length)for(var n=0;n<t.length;n++)i.layout.marketSessions[t[n]]=!0;else i.layout.marketSessions=t;for(r in i.layout.marketSessions)a.session||(a.session={}),a.session[r]=i.canvasStyle("stx_market_session "+r),i.chart.market.disableSession(r,!0)},this.complete=function(e){i.changeOccurred("layout"),i.chart.market.market_def?this.filter?(i.createDataSet(),i.draw(),e&&e()):i.loadChart(i.chart.symbol,e):e&&e()},this.set=function(e,t,i){this.prepare(e,t),this.complete(i)},this.stx.append("drawYAxis",(function(e,r){if(this.layout.extended&&e.yAxis==r.yAxis&&!1!==e.shareChartXAxis&&!e.hidden){var n=e.chart;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&(a.divider=this.canvasStyle("stx_market_session divider"),a.session)){for(var s,o,l=n.market,h=[],c={},u=0;u<n.dataSegment.length;u++){var d=n.dataSegment[u];if(d&&d.DT){var p=null;if(l.market_def)if(!s||s<=d.DT)o=l.getSession(d.DT),s=l[!(""===o||this.layout.marketSessions&&this.layout.marketSessions[o])?"getNextOpen":"getNextClose"](d.DT);var m=a.session[o];if(m&&(p=m.backgroundColor),c.color&&c.color!=p&&(h.push({start:c.start,end:c.end,color:c.color}),c={}),p){var g=this.layout.candleWidth;d.candleWidth&&(g=d.candleWidth),c.end=this.pixelFromBar(u,n)+g/2,c.start||0===c.start||(c.start=c.end-g+1),c.color=p}else c={}}}(c.start||0===c.start)&&h.push({start:c.start,end:c.end,color:c.color});var f=t.isTransparent(a.divider.backgroundColor),y=a.divider.width.replace(/px/g,""),v={y0:e.bottom,y1:e.top,color:a.divider.backgroundColor,type:"line",context:n.context,confineToPanel:e,pattern:"dashed",lineWidth:y,deferStroke:!0};for(this.startClip(e.name),n.context.beginPath(),i.highlightedDraggable&&(n.context.globalAlpha*=.3),u=0;u<h.length;u++)n.context.fillStyle=h[u].color,!f&&h[u].start>n.left&&this.plotLine(t.extend({x0:h[u].start,x1:h[u].start},v)),n.context.fillRect(h[u].start,e.top,h[u].end-h[u].start,e.bottom-e.top),!f&&h[u].end<n.right&&this.plotLine(t.extend({x0:h[u].end,x1:h[u].end},v));n.context.stroke(),this.endClip()}}}))}},_e=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.FullScreen=t.FullScreen||function(e){if(e||(e={}),e.stx){try{if(window.location.host!==window.top.location.host)throw new Error(window.location.host+" does not match "+window.top.location.host)}catch(e){return void console.warn("Full screen mode disabled.")}this.stx=e.stx,this.stx.fullScreen=this,this.fullScreenButton=null,this.fullScreenState=!1,this.addFullScreenButton=function(){var e;this.stx.registerChartControl&&(this.fullScreenButton=this.stx.registerChartControl("stx-full-screen","Full Screen",(e=this,function(t){e.fullScreenToggle(t),t.stopPropagation()})))},this.fullScreenToggle=function(e){document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen||document.documentElement.mozRequestFullscreen||document.documentElement.msRequestFullscreen?this.getFullScreenElement()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.mozRequestFullscreen?document.documentElement.mozRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen():(this.fullScreenState=!this.fullScreenState,this.fullScreenRender())},this.fullScreenRender=function(){var e=null;(e=this.stx.container.closest("*[cq-context], cq-context, body"))&&(!0===this.fullScreenState?(this.fullScreenButton&&this.fullScreenButton.classList.add("active"),e.classList.add("full-screen")):(this.fullScreenButton&&this.fullScreenButton.classList.remove("active"),e.classList.remove("full-screen")),window.dispatchEvent(new Event("resize")))},this.onFullScreenChange=function(){this.getFullScreenElement()?this.fullScreenState=!0:this.fullScreenState=!1,this.fullScreenRender()},this.getFullScreenElement=function(){return document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement},document.addEventListener("fullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("webkitfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("mozfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("MSFullscreenChange",this.onFullScreenChange.bind(this),!1),this.addFullScreenButton()}else console.warn("The Full Screen addon requires an stx parameter")}},Pe=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.InactivityTimer=t.InactivityTimer||function(e){if(e.minutes){(!e.interval||e.interval<0)&&(e.interval=60),this.stx=e.stx,this.timeout=e.minutes,this.interval=e.interval,this.wakeCB=e.wakeCB,this.sleepCB=e.sleepCB,this.sleepTimer=null,this.sleeping=!1,this.last=(new Date).getTime(),this.wakeChart=function(){clearTimeout(this.sleepTimer),this.last=(new Date).getTime(),this.sleeping&&(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(),this.sleeping=!1,document.body.classList.remove("ciq-sleeping")),this.sleepTimer=setTimeout(this.sleepChart.bind(this),6e4*this.timeout),this.wakeCB&&this.wakeCB()},this.sleepChart=function(){this.sleeping||(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(this.interval),this.sleeping=!0,document.body.classList.add("ciq-sleeping")),this.sleepCB&&this.sleepCB()};var t=this;["mousemove","mousedown","touchstart","touchmove","pointerdown","pointermove","keydown","wheel"].forEach((function(e){document.body.addEventListener(e,(function(e){t.wakeChart()}))})),this.wakeChart()}}},Fe=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.RangeSlider=t.RangeSlider||function(e){this.cssRequired=!0;var i=e.stx;i.slider=this;var a=e.height?e.height:"95px",r=e.chartContainer?e.chartContainer:e.stx.container,n=document.createElement("div");n.className="ciq-chart";var s=document.createElement("div");s.className="chartContainer",n.appendChild(s),r.parentElement.parentElement.insertBefore(n,r.parentElement.nextSibling),Object.assign(n.style,{height:a,paddingTop:"5px",display:"none"}),s.style.height="100%",s.dimensionlessCanvas=!0;var o=this.slider=new t.ChartEngine({container:s,preferences:{labels:!1,whitespace:0}});o.xaxisHeight=30,o.manageTouchAndMouse=!1,o.minimumCandleWidth=0,o.chart.panel.subholder.style.cursor="ew-resize";var l=o.chart.panel.yAxis;l.drawCurrentPriceLabel=!1,Object.defineProperty(l,"position",{get:function(){return i.slider.yAxisPosition||i.chart.panel.yAxis.position},set:function(e){i.slider.yAxisPosition=e}});const{get:h,set:c}=Object.getOwnPropertyDescriptor(t.ChartEngine.YAxis.prototype,"width");Object.defineProperty(l,"width",{get:function(){return Math.max(h.call(l),i.chart.yAxis.width)},set:function(e){c.call(l,e)}}),t.extend(l,e.yAxis),o.chart.baseline.userLevel=!1,o.controls.home&&(o.controls.home.style.width=0),o.initializeChart();var u=o.chart.panel.subholder;this.updateStyles=function(e,t,a){i.setStyle(e,t,a),this.style=i.canvasStyle("stx_range_slider shading")},this.display=function(e){if(i.layout.rangeSlider!==e)return i.layout.rangeSlider=e,void i.changeOccurred("layout");n.style.display=e?"":"none",i.resizeChart(),window.dispatchEvent(new Event("resize")),e&&(o.resizeChart(),o.initializeChart(),o.draw(),this.drawSlider())},this.setSymbol=function(e){o.chart.panel.display=o.chart.symbol=e,o.setMainSeriesRenderer(),o.resizeChart(),this.adjustRange(i.chart),o.draw(),this.drawSlider()},this.acceptLayoutChange=function(e){var a=!1;o.layout.rangeSlider!==e.rangeSlider&&i.slider.display(e.rangeSlider);["chartType","aggregationType","periodicity","interval","timeUnit","chartScale","rangeSlider","flipped","extended","marketSessions","kagi","rangebars","renko","priceLines","pandf"].forEach((function(i){t.equals(o.layout[i],e[i])||(o.layout[i]=e[i],a=!0)})),t.trulyVisible(n)&&a&&(o.setMainSeriesRenderer(),o.draw(),this.drawSlider())},this.adjustRange=function(e){if(e.dataSet&&e.endPoints&&e.endPoints.begin){var t=o.chart;if(t.width){var a=0,r=0;if(i.quoteDriver){var n={symbol:e.symbol,symbolObject:e.symbolObject,interval:i.layout.interval};"month"!=n.interval&&"week"!=n.interval||i.dontRoll||(n.interval="day");var s=i.quoteDriver.getQuoteFeed(n).behavior;s&&s.bufferSize&&(e.moreAvailable&&(a=s.bufferSize),i.isHistoricalMode()&&(r=s.bufferSize))}t.baseline.defaultLevel=e.baseline.actualLevel,t.scroll=Math.max(0,e.dataSet.length-i.tickFromDate(e.endPoints.begin)-a)+1,t.maxTicks=t.scroll-r+1,o.layout.candleWidth=t.width/t.maxTicks}}},this.copyData=function(e){if(e.dataSet){var t=o.chart;t.masterData=o.masterData=e.masterData,t.dataSet=e.dataSet,t.state=e.state,o.draw(),this.drawSlider()}},this.calculateYAxisPosition=function(){var e=o.chart.panel;o.getYAxisCurrentPosition(e.yAxis,e)!=e.yAxis.position&&o.calculateYAxisPositions()},this.drawSlider=function(){if(t.trulyVisible(n)&&i.chart.dataSet&&i.chart.dataSet.length){var e=this.style;e||(e=this.style=i.canvasStyle("stx_range_slider shading"));var a=i.chart.panel,r=o.chart.context,s=o.chart.segmentImage||[],l=o.layout.candleWidth/2,h=o.tickLeft=Math.max(i.tickFromPixel(a.left+l),0),c=o.tickRight=Math.min(i.tickFromPixel(a.right-l),i.chart.dataSet.length-1),d=o.pixelLeft=o.pixelFromTick(h)-(s[h]?s[h].candleWidth/2:l),p=o.pixelRight=o.pixelFromTick(c)+(s[c]?s[c].candleWidth/2:l),m=u.offsetLeft,g=m+u.offsetWidth;r.save(),r.beginPath(),r.fillStyle=e.backgroundColor,r.fillRect(m,u.offsetTop,d-m,u.offsetHeight),r.fillRect(g,u.offsetTop,p-g,u.offsetHeight),r.strokeStyle=e.borderTopColor,r.lineWidth=parseInt(e.borderWidth,10),r.moveTo(d,u.offsetTop),r.lineTo(d,u.offsetTop+u.offsetHeight),r.moveTo(p,u.offsetTop),r.lineTo(p,u.offsetTop+u.offsetHeight),r.stroke(),r.beginPath(),r.lineWidth=parseInt(e.width,10),r.lineCap="round",r.moveTo(d,u.offsetTop+u.offsetHeight/4),r.lineTo(d,u.offsetTop+3*u.offsetHeight/4),r.moveTo(p,u.offsetTop+u.offsetHeight/4),r.lineTo(p,u.offsetTop+3*u.offsetHeight/4),r.stroke(),r.restore()}},i.addEventListener("layout",(function(e){e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("preferences",(function(e){const{language:i}=e.stx.preferences;t.I18N&&o.preferences.language!=i&&t.I18N.setLocale(o,i),o.preferences.language=i,o.draw()})),i.addEventListener("symbolChange",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol)})),i.addEventListener("symbolImport",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol),e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("theme",(function(e){if(o.clearPixelCache(),o.styles={},o.chart.container.style.backgroundColor="",t.ThemeHelper){var i=new t.ThemeHelper({stx:e.stx});i.params.stx=o,i.update()}})),i.append("createDataSet",(function(){this.slider.adjustRange(this.chart),this.slider.copyData(this.chart)})),i.append("draw",(function(){t.trulyVisible(n)&&o.chart.dataSet&&(this.slider.adjustRange(this.chart),this.slider.calculateYAxisPosition(),o.draw(),this.slider.drawSlider())})),i.prepend("resizeChart",(function(){var e=r.parentElement,i=e.parentElement,a=(parseFloat(getComputedStyle(e).height),parseFloat(getComputedStyle(r).height),t.elementDimensions(i).height),s=i.querySelectorAll(".chartContainer");Array.from(s).forEach((function(e){e!==r&&t.trulyVisible(e)&&(a-=t.elementDimensions(e,{border:1,padding:1,margin:1}).height)})),e.style.height=a+"px",this.layout.rangeSlider?(o.chart.breakpoint!==this.chart.breakpoint&&o.notifyBreakpoint(this.chart.breakpoint),n.style.display="",o.resizeChart(),o.initializeChart(),o.draw(),this.slider.drawSlider()):n.style.display="none"})),["mousedown","touchstart","pointerdown"].forEach((function(e){u.addEventListener(e,(function(e){var a=o.backOutX(e.pageX);if(a||0===a){a-=e.target.offsetLeft,o.startDrag=a,o.startPixelLeft=o.pixelLeft,o.startPixelRight=o.pixelRight;var r=i.slider.style;r||(r=i.slider.style=i.canvasStyle("stx_range_slider shading"));var n=parseInt(r.borderLeftWidth,10);(a+=this.offsetLeft)<o.pixelRight-n&&(o.needsLeft=!0),a>o.pixelLeft+n&&(o.needsRight=!0),t.touchDevice||o.needsLeft&&o.needsRight&&e.target.classList.add("stx-drag-chart")}}),{passive:!1})})),["mouseup","mouseover","touchend","pointerup"].forEach((function(e){u.addEventListener(e,(function(e){const{which:t,type:i}=e;1===t&&"pointerup"!==i&&"mouseup"!==i||(e.target.classList.remove("stx-drag-chart"),o.chart.panel.subholder.style.cursor="ew-resize",o.startDrag=null,o.needsLeft=!1,o.needsRight=!1)}))})),["mousemove","touchmove","pointermove"].forEach((function(e){u.addEventListener(e,(function(e){var t=o.startDrag;if(t||0===t){var a=e.touches,r=(a&&a.length?o.backOutX(a[0].pageX):o.backOutX(e.pageX))-e.target.offsetLeft;if(r||0===r){r-=t;var n=o.tickLeft,s=o.tickRight,l=o.startPixelLeft,h=o.startPixelRight,c=o.needsLeft,u=o.needsRight;if(c)l+r<o.chart.left&&(r=o.chart.left-l),u&&h+r>=o.chart.right&&(r=o.chart.right-h,o.isHome()||(r+=o.layout.candleWidth/2)),n=o.tickFromPixel(l+r),u&&(s=n+o.tickRight-o.tickLeft);else{if(!u)return;s=Math.min(o.tickFromPixel(h+r),i.chart.dataSet.length-1)}var d=i.chart.width/(s-n+1);s>=n&&d>=i.minimumCandleWidth&&(o.tickLeft=n,o.tickRight=s,i.chart.scroll=i.chart.dataSet.length-n,c&&u||i.setCandleWidth(d),i.micropixels=0,i.draw())}}}),{passive:!1})})),this.adjustRange(i.chart),this.copyData(i.chart)}},Le=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Shortcuts=t.Shortcuts||function(){let{stx:e,width:t=580,windowForEachChart:i=!0,config:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?(this.stx=e,this.width=t,this.windowForEachChart=i,this.content=this.getShortcutContent(a),this.enclosingContainer=e.container.querySelector(".stx-subholder"),this.ensureMessagingAvailable(e),this.enableUI(e),this.cssRequired=!0,e.shortcuts=this):console.warn("The Shortcuts addon requires an stx parameter")},t.Shortcuts.prototype.enableUI=function(e){e&&t.UI&&setTimeout(()=>{e.uiContext.getAdvertised("Layout").showShortcuts=(e,t)=>this.toggle(t)})},t.Shortcuts.prototype.ensureMessagingAvailable=function(e){setTimeout(()=>{const t=e.uiContext.topNode;t.querySelector("cq-floating-window")||t.append(document.createElement("cq-floating-window"))})},t.Shortcuts.prototype.getShortcutContent=function(e){const t=(e.drawingTools||[]).filter(e=>e.shortcut).map(e=>{let{label:t,shortcut:i}=e;return'<div class="ciq-shortcut">\n\t\t\t\t\t<div>'.concat(t,"</div>\n\t\t\t\t\t<div><span>Alt</span> + <span>").concat(i.toUpperCase(),"</span></div>\n\t\t\t\t</div>")}).join(""),i=e=>" + "===e?"<span>+</span>":e.split("+").map(e=>e&&" "!==e?"<span>"+e+"</span>":"").join(" + "),a=this.stx.container.closest("cq-context"),r=(e.hotkeyConfig&&e.hotkeyConfig.hotkeys||[]).map(e=>{let{label:t,action:r,commands:n,extension:s}=e;return s&&(o=s,!a.hasAttribute(o.toLowerCase()+"-active"))?"":'<div class="ciq-shortcut"><div>'.concat(t||r,"</div><div>").concat((e=>e.map(e=>e.replace(/Arrow|Key|Digit|^ | $/g,"")).map(e=>e.replace(/\+/," + ")).reduce((e,t)=>{return!e.includes(t)&&(i=t).charCodeAt(i.length-1)<127?e.concat(t):e;var i},[]).map(i).join("<br>"))(n),"</div></div>");var o}).join("");return'\n\t\t<div class="ciq-shortcut-container">\n\t\t\t<div>\n\t\t\t\t<div><b>Drawing tools shortcuts</b></div>\n\t\t\t\t<div>'.concat(t,"</div>\n\t\t\t</div>\n\t\t\t<hr>\n\t\t\t<div>\n\t\t\t\t<div><b>Hotkeys</b></div>\n\t\t\t\t<div>").concat(r,"</div>\n\t\t\t</div>\n\t\t</div>\n\t")},t.Shortcuts.prototype.toggle=function(e){this.stx.dispatch("floatingWindow",{type:"shortcut",title:"Shortcuts",content:this.content,container:this.enclosingContainer,onClose:()=>this.closed=!0,width:this.width,status:e,tag:this.windowForEachChart?void 0:"shortcut"})}},Ee=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;function i(){}t.TableView=t.TableView||function(){let{stx:e,minColumnWidth:a="84px",coverUIMaxWidth:r=400,coverContainer:n,usePreviousCloseForChange:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?(this.stx=e,this.viewAdditionalColumns=!1,this.minColumnWidth=a,this.coverUIMaxWidth=r,this.coverContainer=n,this.usePreviousCloseForChange=s,this.builder=i,this.listeners=[],e.tableView=this,this.cssRequired=!0,t.UI&&t.UI.observeProperty("uiContext",e,e=>{let{value:i}=e;i&&setTimeout(()=>{this.subscribeToChanges(i);const e=t.getFromNS(i.config,"hotkeyConfig.hotkeys",[]).find(e=>{let{action:t}=e;return"tableView"===t});e&&(e.action=()=>{const{tableView:e}=document.body.keystrokeHub.context.stx;if(e)return e.toggle(),!0})})})):console.warn("The TableView addon requires an stx parameter")},t.TableView.prototype.open=function(e){e&&(this.params=e);const{config:i={},onClose:a}=this.params||{};if(this.view&&this.close(!1),i.minColumnWidth=this.minColumnWidth,i.coverUIMaxWidth=this.coverUIMaxWidth,i.coverContainer=this.coverContainer,this.onClose=a,this.view=this.builder.createTable(this.stx,i),!this.view)return;t.I18N&&t.I18N.translateUI(null,this.view);const{stx:r}=this,n=this.close.bind(this);setTimeout(()=>this.removeCloseListener=function(e){const i=r.uiContext.topNode,a=e=>{let{target:t}=e;return!t.closest(".ciq-data-table-container")&&n()};i.addEventListener("click",a);const s=e=>{if("Escape"===e.code){const{tableView:t}=document.body.keystrokeHub.context.stx;t&&(t.close(),e.preventDefault())}};document.body.addEventListener("keydown",s);const o=t.getFn("UI.getUIManager")();o&&(e.view.show=e.view.hide=function(){},o.openMenu(e.view,{}));return()=>{i.removeEventListener("click",a),document.body.removeEventListener("keydown",s),o&&o.closeMenu(e.view)}}(this));const s=t.getFromNS(r,"uiContext.config.scrollbarStyling");s&&(s.refresh(this.view.querySelector("tbody")),s.refresh(this.view.querySelector(".ciq-data-table-wrapper"),{suppressScrollY:!0}))},t.TableView.prototype.close=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.view&&(this.view.remove(),this.view=null),e&&this.onClose&&this.onClose(),this.removeCloseListener&&(this.removeCloseListener(),this.removeCloseListener=null)},t.TableView.prototype.toggle=function(){this[this.view?"close":"open"]()},t.TableView.prototype.subscribeToChanges=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channels.tableView";const{channelSubscribe:a,channelWrite:r}=t.UI.BaseComponent.prototype,{channels:{tableView:n=i}={}}=e.config||{},{stx:s}=this;a(n,e=>{e?s.tableView.open({onClose:()=>{r(n,!1,s)}}):s.tableView.close()},s)},i.colHeaders={date:{label:"Date"},open:{label:"Open"},high:{label:"High"},low:{label:"Low"},close:{label:"Close"},pctChange:{label:"% Change",cls:"ciq-extra"},pctChangeVsAvg:{label:"% Change vs Average",cls:"ciq-extra"},volume:{label:"Volume",cls:"ciq-extra"}},i.percentDecimalPlaces=2,i.createTable=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.chart||!e.chart.dataSegment)return;const{builder:i}=e.tableView,{getChartData:a,dataToHtml:r,dataToCsv:n,downloadCsv:s,getDateFormatter:o,getValueFormatter:l,getVolumeFormatter:h,getFilenameFormatter:c,getSeriesDataNames:u,getStudyDataNames:d,getChartCover:p}=i,m=Object.assign({},this.colHeaders);if(e.chart.highLowBars||(delete m.open,delete m.high,delete m.low),!e.tableView.viewAdditionalColumns)for(let e in m)m[e].cls&&delete m[e];const g=Object.values(m).map(e=>e.label),f=u(e);f.forEach(e=>m[e]={label:e});const y=d(e);y.forEach(e=>{g.includes(e)||(m[e]={label:e})});const v=f.concat(y),{dateFormatter:x=o(e),valueFormatter:b=l(e),percentFormatter:C=l(e,this.percentDecimalPlaces),volumeFormatter:S=h(e),fileNameFormatter:w=c(e),minColumnWidth:D="84px"}=t,k=a(e,{dateFormatter:x,valueFormatter:b,percentFormatter:C,volumeFormatter:S,additionalDataFields:v}),M=p(e,t),{symbolDisplay:T,symbol:A}=e.chart,_=i.getCoverToolbar({symbol:T||A,viewAdditionalColumns:e.tableView.viewAdditionalColumns,copyFn:F,downloadFn:L,toggleAdditionalColumnsFn:()=>{const{tableView:t}=e;t.viewAdditionalColumns=!t.viewAdditionalColumns,t.open()},closeFn:()=>e.tableView.close()});M.appendChild(_);const P=r(k,{colHeaders:m,minColumnWidth:D});return M.appendChild(P),M;function F(){const t=document.createElement("textArea");document.body.appendChild(t),t.textContent=n(k,{colHeaders:m}),t.select(),document.execCommand("copy"),t.remove(),e.dispatch("notification","copytoclipboard")}function L(){const e=n(k,{colHeaders:m}),t=w(e);s(e,t)}},i.dataToHtml=function(e,t){let{colHeaders:i,minColumnWidth:a}=t;const r=Object.keys(i).length,n="calc((100% - ".concat(10+4*r,"px ) / ").concat(r,")"),s=Object.entries(i).map((e,t)=>{let[,{label:i}]=e;return'<th\n\t\t\tscope="col"\n\t\t\tstyle="width: '.concat(n,';"\n\t\t\t>').concat(i.replace("(","  ("),"</th>")}),o=e.map(e=>{const t=Object.keys(i).map((t,i)=>{const a=e[t];return 0===i?'<th scope="row"\n\t\t\t\t\t\t\t\tstyle="width: '.concat(n,'"\n\t\t\t\t\t\t\t\t>').concat(a,"</th>"):'<td style="width: '.concat(n,'">').concat(a,"</td>")}).join("");return"<tr>".concat(t,"</tr>")}),l=document.createElement("div");l.classList.add("ciq-data-table-wrapper");const h=a?"calc(".concat(r," * ").concat(a,")"):"";return l.innerHTML='\n\t\t<table class="header-fixed"\t'.concat(h?'style="min-width: '.concat(h,'"'):"",">\n\t\t<thead>").concat(s.join(""),"</thead>\n\t\t<tbody>").concat(o.join(""),"</tbody>\n\t\t</table>"),l},i.dataToCsv=function(e,t){let{colHeaders:i,colSeparator:a="\t"}=t;const r=Object.entries(i).map(e=>{let[,{label:t}]=e;return'"'.concat(t,'"')}).join(a),n=e.map(e=>Object.keys(i).map(t=>'"'.concat(e[t],'"')).join(a));return"".concat(r,"\n").concat(n.join("\n"))},i.downloadCsv=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"filename";const i=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=window.URL.createObjectURL(i,{type:"text/plain"}),a.download="".concat(t,".csv"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},i.getChartData=function(e,i){let{dateFormatter:a,valueFormatter:r,percentFormatter:n,volumeFormatter:s,additionalDataFields:o}=i;const l=e.chart.dataSegment.filter(e=>null!==e),{usePreviousCloseForChange:h}=e.tableView;let c=[],u=0;const d=l.reduce((e,t)=>{let{Close:i,iqPrevClose:a,Open:r}=t;const n=h?a:r;return void 0===i||Number.isNaN(i)||void 0===n||Number.isNaN(n)?e:(u++,e+(i-n)/n)},0)/u;return l.forEach((i,l)=>{const{DT:u,displayDate:p,High:m,Low:g,Open:f,Close:y,iqPrevClose:v,Volume:x}=i,b=h?v:f,C=(y-b)/b,S=p||(e.displayZone?t.convertTimeZone(u,e.dataZone,e.displayZone):u),w={DT:u,date:a(S),open:r(f),close:r(y),change:r(y-b),pctChange:n(100*C),pctChangeVsAvg:n(100*(C-d)),high:r(m),low:r(g),volume:s(x)};o.forEach(e=>{let t=i[e];null!=t?("object"==typeof t&&(t=t.Close),w[e]=r(t)):w[e]=""}),c.push(w)}),c.sort((e,t)=>t.DT-e.DT),c},i.getDateFormatter=function(e){return(i,a)=>i?t.displayableDate(e,e.chart,i,!0):""},i.getValueFormatter=function(e,t){const{chart:{panel:i,yAxis:a},layout:{chartScale:r}}=e;let n;return n=a.originalPriceFormatter&&a.originalPriceFormatter.func?r=>a.originalPriceFormatter.func(e,i,r,t):a.priceFormatter&&"percent"!=r&&"relative"!=r?r=>a.priceFormatter(e,i,r,t):a=>e.formatYAxisPrice(a,i,t),e=>n(e).replace(/^-*0\.0*$/,"0")},i.getVolumeFormatter=function(e){return t=>{if(null==t)return"";if(e.internationalizer)return e.internationalizer.priceFormatters[0].format(t);const i=t.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i[0]}},i.getFilenameFormatter=function(e){return t=>{const i=e.chart.symbolDisplay||e.chart.symbol;let a,r;if(t){const e=t.split("\n");e.length>1&&([,a=""]=e[1].match(/^"([^"]*)"/)||[],[,r=""]=e[e.length-1].match(/^"([^"]*)"/)||[],a=a.replace(/:/g,".").replace(/\//g,"-"),r=r.replace(/:/g,".").replace(/\//g,"-"))}return"".concat(i).concat(a?" (".concat(a," _ ").concat(r,")"):"")}},i.getChartCover=function(e,t){let{coverUIMaxWidth:i,coverContainer:a}=t;const r=a&&document.querySelector(a)||(e.uiContext&&e.container.offsetWidth<i?e.uiContext.topNode:e.container.parentElement.parentElement),n=document.createElement("div");return Object.assign(n.style,{top:0,left:0,right:0,bottom:0}),n.classList.add("ciq-data-table-container"),r.appendChild(n),n},i.getCoverToolbar=function(e){let{symbol:t,viewAdditionalColumns:i,copyFn:a,downloadFn:r,toggleAdditionalColumnsFn:n,closeFn:s}=e;const o=document.createElement("div");o.classList.add("ciq-data-table-toolbar"),o.innerHTML='\n\t\t<div class="ciq-data-table-title"></div>\n\t\t<button class="ciq-data-table-copy">'.concat(this.copyLabel,'</button>\n\t\t<button class="ciq-data-table-download">').concat(this.downloadLabel,'</button>\n\t\t<button class="ciq-data-table-additionalColumns">').concat(this.getAdditionalColumnLabel(i),"</button>\n\t\t<cq-close />\n\t");o.querySelector(".ciq-data-table-title").textContent=t;const l=o.querySelector(".ciq-data-table-copy");a?l.addEventListener("click",a):l.style.display="none";const h=o.querySelector(".ciq-data-table-download");r?h.addEventListener("click",(function(){h.blur(),r()})):h.style.display="none";const c=o.querySelector(".ciq-data-table-additionalColumns");return n?c.addEventListener("click",n):c.style.display="none",o.close=s,o},i.copyLabel="Copy",i.downloadLabel="Download",i.getAdditionalColumnLabel=function(e){return"<span>".concat(e?"- ":"+ ","</span>Additional columns")},i.getStudyDataNames=function(e){return Object.values(e.layout.studies||{}).map((function(e){return Object.keys(e.outputMap).filter(t)})).reduce((e,t)=>e.concat(t),[]);function t(t){return e.chart.dataSegment.some(e=>e&&e[t])}},i.getSeriesDataNames=function(e){return Object.values(e.chart.seriesRenderers||{}).filter(e=>"_main_series"!==e.params.name).map(e=>e.seriesParams.map(e=>{let{symbol:t}=e;return t})).reduce((e,t)=>e.concat(t),[])}},Ne=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Marker?t.Tooltip=t.Tooltip||function(e){if(!t.Marker)return void console.warn("CIQ.Tooltip addon requires CIQ.Marker module to be enabled.");this.cssRequired=!0;const{stx:i,ohl:a,change:r,volume:n,series:s,studies:o,interpolation:l,showOverBarOnly:h,showBarHighlight:c=!0,useDataZone:u}=e,{container:d}=i.chart;let p=d.querySelector("stx-hu-tooltip");p||(p=document.createElement("stx-hu-tooltip"),d.appendChild(p));let m=d.querySelector(".stx-hu-tooltip-highlight");function g(){const{headsUp:e}=i.layout,t=!!i.huTooltip,a="object"!=typeof e,r=!1===e,n=e&&("floating"===e||e.floating);if(t&&(!n&&!a||r)){const{huTooltip:e}=i,{node:t}=e||{};return t&&(t.style.left="-50000px",t.style.right="auto",e.lastBar={},e.highlightEl&&(e.highlightEl.style.display="none")),!0}return!1}function f(){if(!g()){var e=this.barFromPixel(this.cx),h=this.chart.dataSegment[e];if(h){if(!t.Marker.Tooltip.sameBar(h,this.huTooltip.lastBar)||e==this.chart.dataSegment.length-1){var c=this.huTooltip.node;Array.from(c.parentElement.querySelectorAll("[auto]")).forEach((function(e){e.remove()})),Array.from(c.parentElement.querySelectorAll("stx-hu-tooltip-field-value")).forEach((function(e){e.innerHTML=""}));var d=this.chart.panel,p=d.yAxis,m={},f=[];if(f.push({member:"DT",display:"DT",panel:d,yAxis:p}),f.push({member:"Close",display:"Close",panel:d,yAxis:p}),m.DT=m.Close=1,r&&t.ChartEngine.isDailyInterval(this.layout.interval)&&f.push({member:"Change",display:"Change",panel:d,yAxis:p}),a&&(f.push({member:"Open",display:"Open",panel:d,yAxis:p}),f.push({member:"High",display:"High",panel:d,yAxis:p}),f.push({member:"Low",display:"Low",panel:d,yAxis:p}),m.Open=m.High=m.Low=1),n&&(f.push({member:"Volume",display:"Volume",panel:null,yAxis:null}),m.Volume=1),s){var y=this.chart.seriesRenderers;for(var v in y){var x=y[v];if(x!==this.mainSeriesRenderer){d=this.panels[x.params.panel],!(p=x.params.yAxis)&&x.params.shareYAxis&&(p=d.yAxis);for(var b=0;b<x.seriesParams.length;b++){var C=x.seriesParams[b],S=C.symbol,w=C.field;S?w&&S!=w&&(S=t.createObjectChainNames(S,w)[0]):S=w;var D=C.display||C.symbol||C.field;S&&!m[D]&&(f.push({member:S,display:D,panel:d,yAxis:p,isSeries:!0}),m[D]=1)}}}}if(o)for(var k in this.layout.studies){var M=this.layout.studies[k];for(var T in p=(d=this.panels[M.panel])&&M.getYAxis(this),this.layout.studies[k].outputMap)T&&!m[T]&&(f.push({member:T,display:T,panel:d,yAxis:p}),m[T]=1);m[k+"_hist"]||(f.push({member:k+"_hist",display:k+"_hist",panel:d,yAxis:p}),f.push({member:k+"_hist1",display:k+"_hist1",panel:d,yAxis:p}),f.push({member:k+"_hist2",display:k+"_hist2",panel:d,yAxis:p}),m[k+"_hist"]=1)}for(var A=0;A<f.length;A++){var _=f[A],P=_.member,F=_.display,L="DT"==P;!L||u||t.ChartEngine.isDailyInterval(i.layout.interval)||(P="displayDate"),d=_.panel;var E=null;(p=_.yAxis)&&(d&&d===d.chart.panel?(E=Math.max(p.printDecimalPlaces,d.chart.decimalPlaces),(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(E=Math.min(E,p.maxDecimalPlaces))):p.decimalPlaces||0===p.decimalPlaces?E=p.decimalPlaces:(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(E=p.maxDecimalPlaces));var N=null,H=t.existsInObjectChain(h,P);H?N=H.obj[H.member]:"Change"==P&&(N=h.Close-h.iqPrevClose);var I=F.replace(/^(Result )(.*)/,"$2");if(l&&f[A].isSeries&&null==N){var j=this.valueFromInterpolation(e,I,"Close",d,p);if(null===j)break;N=j}if(!N&&0!==N||!L&&"object"==typeof N&&!N.Close&&0!==N.Close){var O=c.querySelector('stx-hu-tooltip-field[field="'+I+'"]');if(O)""!==O.querySelector("stx-hu-tooltip-field-name").innerHTML&&(O.querySelector("stx-hu-tooltip-field-value").innerHTML="n/a")}else{var Y="";(N.Close||0===N.Close)&&(N=N.Close),N.constructor==Number?Y=p?p.originalPriceFormatter&&p.originalPriceFormatter.func?p.originalPriceFormatter.func(this,d,N,E):p.priceFormatter&&p.priceFormatter!=t.Comparison.priceFormat?p.priceFormatter(this,d,N,E):this.formatYAxisPrice(N,d,E,p):N:N.constructor==Date?L&&this.controls.floatDate&&this.controls.floatDate.innerHTML?Y=this.chart.xAxis.noDraw?"N/A":t.displayableDate(this,d.chart,N):(Y=t.yyyymmdd(N),t.ChartEngine.isDailyInterval(this.layout.interval)||(Y+=" "+N.toTimeString().substr(0,8))):Y=N;var R=c.querySelector('stx-hu-tooltip-field[field="'+I+'"]');if(R){R.querySelector("stx-hu-tooltip-field-value").innerHTML=Y;var $=R.querySelector("stx-hu-tooltip-field-name");""===$.innerHTML&&($.innerHTML=this.translateIf(I))}else{var z=document.createElement("stx-hu-tooltip-field");z.setAttribute("auto",!0);var q=document.createElement("stx-hu-tooltip-field-name");q.innerHTML=this.translateIf(I),z.appendChild(q);var J=document.createElement("stx-hu-tooltip-field-value");J.innerHTML=Y,z.appendChild(J),c.appendChild(z)}}}this.huTooltip.render()}}else this.positionMarkers()}}m||(m=document.createElement("div"),m.classList.add("stx-hu-tooltip-highlight"),d.appendChild(m)),t.Marker.Tooltip=function(e){this.className||(this.className="CIQ.Marker.Tooltip"),this.highlightEl=m,e.label="tooltip",t.Marker.call(this,e)},t.inheritsFrom(t.Marker.Tooltip,t.Marker,!1),t.Marker.Tooltip.sameBar=function(e,t){return!(!e||!t)&&(+e.DT==+t.DT&&(e.Close==t.Close&&(e.Open==t.Open&&e.Volume==t.Volume)))},t.Marker.Tooltip.placementFunction=function(e){if(!g()){for(var i=e.stx,a=0;a<e.arr.length;a++){var r,n,s,o=e.arr[a],l=i.barFromPixel(i.cx),u=i.chart.dataSegment[l],p=!0;if("undefined"!=u&&u&&u.DT&&(r=!0,u.High&&(n=i.pixelFromPrice(u.High)),u.Low&&(s=i.pixelFromPrice(u.Low)),i.chart.highLowBars||u.Close&&(n=i.pixelFromPrice(u.Close)-15,s=i.pixelFromPrice(u.Close)+15),!h||i.cy>=n&&i.cy<=s||(p=!1)),!i.insideChart||i.openDialog||i.activeDrawing||i.grabbingScreen||!r||!p)return m.style.display="none",o.node.style.left="-50000px",o.node.style.right="auto",void(o.lastBar={});if(t.Marker.Tooltip.sameBar(i.chart.dataSegment[l],o.lastBar)&&l!=i.chart.dataSegment.length-1)return;o.lastBar=i.chart.dataSegment[l];var f=o.lastBar.candleWidth||i.layout.candleWidth;parseInt(getComputedStyle(o.node).width,10)+i.chart.panel.left+30+f<i.backOutX(t.ChartEngine.crosshairX)?(o.node.style.left="auto",o.node.style.right=Math.round(d.clientWidth-i.pixelFromBar(l)+30)+"px"):(o.node.style.left=Math.round(i.pixelFromBar(l)+30)+"px",o.node.style.right="auto");var y=parseInt(getComputedStyle(o.node).height,10),v=Math.round(t.ChartEngine.crosshairY-i.top-y/2);if(v+y>i.height&&(v=i.height-y),v<0&&(v=0),o.node.style.top=v+"px",c&&!i.layout.crosshair){const e=o.lastBar.candleWidth||i.layout.candleWidth,t=i.pixelFromBar(l)-e/2;let a=e;t+a>i.chart.width&&(a=i.chart.width-t),m.style.display="block",m.style.left=t+"px",m.style.width=a+"px"}else m.style.display="none"}var x=i.overXAxis,b=i.overYAxis;i.overXAxis=i.overYAxis=!1,i.overXAxis=x,i.overYAxis=b}},i.append("deleteHighlighted",(function(){this.huTooltip.lastBar={},this.headsUpHR()})),i.append("headsUpHR",f),i.append("createDataSegment",f),i.huTooltip=new t.Marker.Tooltip({stx:i,xPositioner:"bar",chartContainer:!0,node:p})}:console.error("tooltip addon requires first activating markers feature.")},He=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Animation=t.Animation||function(e){if(!e)throw new Error("Invalid constructor arguments.");var i,a,r;if(e instanceof t.ChartEngine?(i=arguments[0],a=arguments[1],r=arguments[2]):(i=e.stx,a=e.animationParameters,r=e.easeMachine),!i)return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");var n={stayPut:!1,ticksFromEdgeOfScreen:5,granularity:1e6};a=t.extend(n,a),n.tension&&(i.chart.tension=a.tension),i.tickAnimator=r||new t.EaseMachine(Math.easeOutCubic,1e3);var s=new t.EaseMachine(Math.easeInOutCubic,1e3),o=["#0298d3","#19bcfc","#5dcffc","#9ee3ff"],l=0,h=20,c=0,u=!1,d=null;function p(){u=!1,d=null}i.addEventListener(["symbolChange","layout"],(function(e){p()})),i.prepend("updateCurrentMarketData",(function(e,t,i,a){t||(t=this.chart),a&&a.fromTrade&&(t.closePendingAnimation||0===t.closePendingAnimation)&&(a.finalClose=t.closePendingAnimation)})),i.prepend("updateChartData",(function(e,i,r){var n=this;if(i||(i=n.chart),i&&i.defaultChartStyleConfig&&"none"!=i.defaultChartStyleConfig&&(void 0===r||!r.animationEntry&&!r.secondarySeries)&&i.dataSegment){var s=n.tickAnimator,o=this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation;if(o){if(!s)return void console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");if(this.prevSymbol!=i.symbol&&(this.prevQuote=0,i.closePendingAnimation=null,this.prevSymbol=i.symbol),T(),s.stop(),e.length>2)return}var l=t.clone(r);l||(l={}),l.animationEntry=!0,l.bypassGovernor=!0,l.noCreateDataSet=!1,l.appending=!0,l.firstLoop=!0;var h=this.chart.symbol,c=this.layout.periodicity,p=this.layout.interval,m=this.layout.timeUnit;if(o){var g=e[e.length-1];this.prevQuote=this.currentQuote();var f=!1,y=!1;if(1==c&&2==e.length){this.prevQuote=e[0];var v=i.dataSet.length;M(this.prevQuote),v==i.dataSet.length&&(y=!0)}if(!(g&&g.Close&&this.prevQuote&&this.prevQuote.Close))return!1;if(this.extendedHours&&i.market.market_def){var x=g.DT;if(t.ChartEngine.isDailyInterval(p))u=!i.market.isMarketDate(x);else if(!d||d<=x){var b=i.market.getSession(x);u=!(""===b||this.layout.marketSessions&&this.layout.marketSessions[b]),d=i.market[u?"getNextOpen":"getNextClose"](x)}if(u)return this.draw(),!1}var C=c;"second"==p||"second"==m?C*=1e3:"minute"!=p&&"minute"!=m||(C*=6e4),isNaN(p)||(C*=p),f="day"==p||"day"==m?g.DT.getDate()!=this.prevQuote.DT.getDate():"week"==p||"week"==m?g.DT.getDate()>=this.prevQuote.DT.getDate()+7:"month"==p||"month"==m?g.DT.getMonth()!=this.prevQuote.DT.getMonth():g.DT.getTime()>=this.prevQuote.DT.getTime()+C;var S=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,w=0;if(f){if(!this.animations.zoom.hasCompleted)return!1;var D=this.layout.candleWidth;if(i.scroll<=i.maxTicks)for(;this.micropixels>0;)i.scroll++,this.micropixels-=D;i.scroll<=i.maxTicks?(this.previousMicroPixels=this.micropixels,this.nextMicroPixels=this.micropixels+D,w=-1*D,i.dataSegment.length<i.maxTicks-a.ticksFromEdgeOfScreen&&!a.stayPut&&(this.nextMicroPixels=this.micropixels,i.scroll++),i.animatingHorizontalScroll=S,i.previousDataSetLength=i.dataSet.length):y||i.scroll++}i.closePendingAnimation=g.Close;var k=f&&!S?g.Open:this.prevQuote.Close;return s.run(function(e,r,o){return function(u){var d=u.Close;if(!i.dataSet.length||h!=i.symbol||c!=n.layout.periodicity||p!=n.layout.interval||m!=n.layout.timeUnit)return s.stop(),void T();var g=t.clone(e);g.Adj_Close=null,g.Close=Math.round(d*a.granularity)/a.granularity,o?(g.Open||0===g.Open||(g.Open=g.Close),g.High||0===g.High||(g.High=Math.max(g.Open,g.Close)),g.Low||0===g.Low||(g.Low=Math.min(g.Open,g.Close))):(e.Close>r.High&&(g.High=g.Close),e.Close<r.Low&&(g.Low=g.Close)),i.animatingHorizontalScroll&&(n.micropixels=u.micropixels,i.lastTickOffset=u.lineOffset),l.updateDataSegmentInPlace=!s.hasCompleted;var f=[g];o&&"tick"!==n.layout.interval&&f.unshift(r),n.updateChartData(f,i,l),l.firstLoop=!1,s.hasCompleted&&T()}}(g,t.clone(this.prevQuote),f),{Close:k,micropixels:this.nextMicroPixels,lineOffset:w},{Close:g.Close,micropixels:this.micropixels,lineOffset:0}),!0}}function M(e){if(i.masterData)for(var t=i.masterData.length-1;t>=0;t--){var a=i.masterData[t];if(a.Close||0===a.Close)return a.Close=e.Close,e.LastSize&&(a.LastSize=e.LastSize),e.LastTime&&(a.LastTime=e.LastTime),n.updateCurrentMarketData({Close:a.Close,DT:a.DT,LastSize:a.LastSize,LastTime:a.LastTime}),void n.createDataSet(null,null,{appending:!0})}}function T(){if(i.animatingHorizontalScroll&&(i.animatingHorizontalScroll=!1,n.micropixels=n.nextMicroPixels=n.previousMicroPixels,i.lastTickOffset=0),null!==i.closePendingAnimation){var e=i.closePendingAnimation;i.closePendingAnimation=null,M({Close:e})}}})),i.prepend("renderYAxis",(function(e){if(!this.grabbingScreen&&this.isHome()&&(this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation)){var i=e.panel.yAxis;if(!t.Comparison||i.priceFormatter!=t.Comparison.priceFormat)if(e.prevLowValue||0===e.prevLowValue||(e.prevLowValue=e.animatedLow=e.lowValue),e.prevHighValue||0===e.prevHighValue||(e.prevHighValue=e.animatedHigh=e.highValue),s.running||(e.animatingVerticalScroll=!1),e.prevLowValue>=e.lowValue&&e.prevHighValue<=e.highValue)e.animatingVerticalScroll&&(i.highValue=e.animatedHigh,i.lowValue=e.animatedLow);else if(s.running&&s.stop(),e.lowValue||e.highValue){var a,r=e.prevLowValue,n=e.prevHighValue;e.prevLowValue=e.lowValue,e.prevHighValue=e.highValue,e.animatingVerticalScroll=!0,s.run((a=this,function(t){e.animatedLow=t.low,e.animatedHigh=t.high,a.draw()}),{low:r,high:n},{low:e.lowValue,high:e.highValue}),i.lowValue=e.animatedLow,i.highValue=e.animatedHigh}}})),i.append("draw",(function(){if(!u&&this.chart.dataSet&&this.chart.dataSet.length&&this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation){c%h==0&&(l++,c=0),c++;var e=this.chart.context,t=this.chart.panel,i=this.currentQuote();if(!i)return;var a=i.Close,r=this.pixelFromTick(i.tick,this.chart);this.chart.lastTickOffset&&(r+=this.chart.lastTickOffset);var n=this.pixelFromPrice(a,t);this.chart.yAxis.left>r&&this.chart.yAxis.top<=n&&this.chart.yAxis.bottom>=n&&(l>=o.length&&(l=0),e.beginPath(),e.moveTo(r,n),e.arc(r,n,2+1.07*l,0,2*Math.PI,!1),e.fillStyle=o[l],e.fill())}}))}},Ie=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ContinuousZoom=t.ContinuousZoom||function(e){this.cssRequired=!0,this.update(e),this.stx.continuousZoom=this,this.addSmartZoomButton=function(){var e,t=this.stx.registerChartControl&&this.stx.registerChartControl("stx-smart-zoom","SmartZoom (Alt + 0)",(e=this,function(t){e.smartZoomToggle(t),t.stopPropagation()}));t&&(this.stx.addEventListener("layout",(function(e){!0===e.stx.layout.smartzoom?t.classList.add("active"):t.classList.remove("active")})),this.stx.addEventListener("symbolImport",(function(e){!1===e.stx.layout.smartzoom&&t.classList.remove("active")})))},this.smartZoomToggle=function(e){this.smartZoomEnable(!this.stx.layout.smartzoom)},this.smartZoomEnable=function(e){this.stx.layout.smartzoom=e,this.stx.changeOccurred("layout")},this.addSmartZoomButton(),this.smartZoomEnable(!0)},t.ContinuousZoom.prototype.update=function(e){e||(e={}),this.stx=e.stx,this.periodicities=e.periodicities,this.boundaries=e.boundaries},t.ContinuousZoom.prototype.execute=function(e){function t(e){var t=e.period||e.periodicity,i=e.interval,a=e.timeUnit||"minute";switch(isNaN(i)&&(a=i,i=1),a){case"month":i*=4.35;case"week":i*=7;case"day":i*=1440;case"minute":i*=60;case"second":break;case"millisecond":i/=1e3;break;default:return null}return t*i}if(this.stx&&this.stx.layout.smartzoom){var i=this.periodicities,a=this.boundaries,r=this.stx,n=r.layout,s=r.chart;if(i&&a&&(!e&&a.maxCandleWidth&&n.candleWidth>a.maxCandleWidth||e&&a.minCandleWidth&&n.candleWidth<a.minCandleWidth||!e&&a.minTicks&&s.maxTicks<a.minTicks||e&&a.maxTicks&&s.maxTicks>a.maxTicks)){for(var o={value:e?Number.MAX_VALUE:0},l=t(n),h=0;h<i.length;h++){var c=t(i[h]);(c>l&&c<o.value&&e||c<l&&c>o.value&&!e)&&(o={value:c,periodicity:i[h]})}var u=o.periodicity;u&&r.setRange({dtLeft:s.xaxis[0].DT,dtRight:s.xaxis[s.xaxis.length-1].DT,dontSaveRangeToLayout:!0,periodicity:u})}}}},je=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Outliers=t.Outliers||function(e){if(e||(e={}),e.stx){Array.isArray(e.altColors)||(e.altColors=["#323390","#66308f","#0073ba","#f4932f","#0056a4","#00a99c","#00a553","#ea1d2c","#e9088c","#fff126","#912a8e","#ee652e","#00afed","#8ec648"]),this.stx=e.stx,this.stx.outliers=this,this.cssRequired=!0,this.multiplier=e.multiplier||3,this.altColors=e.altColors,this.axisData={},this.stx.addEventListener("layout",(function(e){Object.keys(e.stx.outliers.axisData).forEach(function(e){this.removeAllMarkers(this.axisData[e]),delete this.axisData[e]}.bind(e.stx.outliers))})),this.processDataSet=function(e,t,i){if(!e.length||e.length<=1)return!1;var a=[0,0];if(!this.axisData[i.name]){var r="",n=-1;Object.keys(this.axisData).forEach(function(e){this.axisData[e].panel.name==t.name&&n++}.bind(this)),n>-1&&n<this.altColors.length&&(r=this.altColors[n]),this.axisData[i.name]={axis:i,panel:t,displayState:"none",isFlipped:!1,originalZoom:i.zoom,markerColor:r,markers:{},axisMarkers:{}}}var s=this.axisData[i.name];return Object.assign(s,this.find(e)),this.refreshMarkerArray(s),this.refreshMarkers(s),"low"!==s.displayState&&"all"!==s.displayState||null===s.outlierMin?a[0]=s.trendMin:a[0]=s.outlierMin,"high"!==s.displayState&&"all"!==s.displayState||null===s.outlierMax?a[1]=s.trendMax:a[1]=s.outlierMax,a},this.find=function(e){if(e.length&&!(e.length<=0)){var t,i,a=function(e,t){return{quote:e.quote,DT:e.quote.DT,value:e.value,position:t}},r=null,n=null,s=null,o=null,l=[],h=e.slice();h.sort((function(e,t){return e.value-t.value}));var c=h.length,u=h[Math.floor(c/4)].value,d=h[Math.floor(c*(3/4))].value,p=d-u;t=u-p*this.multiplier,i=d+p*this.multiplier;for(var m=0;m<c;m++){var g=h[m],f=h[c-(m+1)];if(g.value<=t&&l.push(a(g,"low")),f.value>=i&&l.push(a(f,"high")),null===s&&g.value<=t&&(s=g.value),null===o&&f.value>=i&&(o=f.value),null===r&&g.value>t&&(r=g.value),null===n&&f.value<i&&(n=f.value),null!==r&&null!==n)break}return{minValue:t,maxValue:i,trendMin:r,trendMax:n,outlierMin:s,outlierMax:o,activeOutliers:l}}},this.refreshMarkerArray=function(e){this.deprecateMarkers(e);var t=e.markers;e.activeOutliers.forEach(function(i){var a=i.DT.getTime().toString();t[a]||(t[a]={isFresh:!0,type:"quote",value:i.value,marker:this.markOutlier(i,i.position,e)}),t[a].isFresh=!0}.bind(this)),null!==e.outlierMax&&(t.axisHigh||(t.axisHigh={isFresh:!0,type:"axis",value:e.outlierMax,marker:this.markAxis("high",e)}),t.axisHigh.isFresh=!0),null!==e.outlierMin&&(t.axisLow||(t.axisLow={isFresh:!0,type:"axis",value:e.outlierMin,marker:this.markAxis("low",e)}),t.axisLow.isFresh=!0)},this.setDisplayState=function(e,t){"high"!=e&&"low"!=e&&"all"!=e&&(e="none");var i=e;"all"==t.displayState&&"high"==e?i="low":"all"==t.displayState&&"low"==e?i="high":"high"==t.displayState&&"low"==e||"low"==t.displayState&&"high"==e?i="all":t.displayState==e&&(i="none"),t.displayState=i,t.axis.zoom=t.originalZoom,this.refreshMarkers(t),this.stx.draw()},this.deprecateMarkers=function(e){Object.keys(e.markers).forEach(function(e){var t;(t=this.markers[e]).marker&&!t.isFresh?(t.marker.remove&&t.marker.remove(),t.marker=null):t.isFresh=!1,this.markers[e].marker||delete this.markers[e]}.bind(e))},this.removeAllMarkers=function(e){Object.keys(e.markers).forEach((function(t){var i=e.markers[t].marker;i&&(i.remove&&i.remove(),i=null),i||delete e.markers[t]}))},this.updateMarkerVisibility=function(){Object.keys(this.markers).forEach(function(e){"all"==this.displayState||this.markers[e].marker.node.classList.contains(this.displayState)?this.markers[e].marker.node.style.display="none":this.markers[e].marker.node.style.display="block"}.bind(this))},this.refreshAxisMarkers=function(e,t){var i=!1;e.classList.contains("high")&&(i=!0);var a=t.axis.top;(!t.isFlipped&&!i||t.isFlipped&&i)&&(a=t.axis.bottom-50),e.classList.contains("nano")&&(a=t.axis.top+t.axis.height/2-22);var r=Math.floor(t.axis.left).toString()+"px",n=Math.floor(a).toString()+"px",s=i?t.outlierMax:t.outlierMin;e.style.transform="translate("+r+", "+n+")",e.querySelector(".outlier-value").innerText=this.stx.formatYAxisPrice(s),"0px"===r?e.classList.add("right"):e.classList.remove("right")},this.refreshMarkers=function(e){Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,r=e.markers[t].type;a>e.trendMax&&e.axis.high>=a||a<e.trendMin&&e.axis.low<=a?"quote"==r?i.node.style.display="none":"axis"==r&&i.node.classList.add("compress"):"quote"==r?i.node.style.display="block":"axis"==r&&i.node.classList.remove("compress"),"axis"==r&&this.refreshAxisMarkers(i.node,e),e.axis.height<100?i.node.classList.add("nano"):i.node.classList.remove("nano"),e.axis.height<250?i.node.classList.add("micro"):i.node.classList.remove("micro")}.bind(this,e)),e.isFlipped!==e.axis.flipped&&this.flipMarkers(e)},this.markAxis=function(e,i){var a=document.createElement("div");a.classList.add("outlier-sticker","axis","mini",e),a.innerHTML='<div class="expansion"><div class="pill"><div class="icon"></div></div><div class="tick"></div><span class="outlier-value"></div><div class="compression"><div class="pill"><div class="icon"></div></div></div></span>',this.matchYAxisStyle(a),this.setMarkerColor(a,i.markerColor);var r=this.handleMarkerClick.bind(this,e,i,a);return a.addEventListener("click",r),a.addEventListener("touchend",r),new t.Marker({stx:this.stx,xPositioner:"none",yPositioner:"none",label:"expand",permanent:!0,chartContainer:!0,node:a})},this.markOutlier=function(e,i,a){if(e){a||(a={panel:this.stx.panels.chart}),i=i||"high";var r=document.createElement("div");r.classList.add("outlier-sticker","quote","mini",i),r.innerHTML='<div class="pill"><div class="icon"></div></div><span class="outlier-value">'+this.stx.formatYAxisPrice(e.value,a.panel)+"</span>",this.matchYAxisStyle(r),this.setMarkerColor(r,a.markerColor);var n=this.handleMarkerClick.bind(this,i,a,r);return r.addEventListener("click",n),r.addEventListener("touchend",n),new t.Marker({stx:this.stx,xPositioner:"date",yPositioner:"high"==i?"top":"bottom",x:e.quote.DT,panelName:a.panel.name,node:r})}},this.handleMarkerClick=function(e,t,i){i.classList.contains("nano")&&(e="all"),this.setDisplayState(e,t),this.stx.draw()},this.matchYAxisStyle=function(e){if(this.stx.styles.stx_yaxis){var t=this.stx.styles.stx_yaxis;e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.color=t.color,e.style.borderColor=t.color}},this.setMarkerColor=function(e,t){if(""!=t)for(var i=e.querySelectorAll(".pill"),a=0;a<i.length;a++)i[a].style.backgroundColor=t},this.flipMarkers=function(e){e.isFlipped=e.axis.flipped,Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,r=e.markers[t].type;e.isFlipped?i.node.classList.add("flipped"):i.node.classList.remove("flipped"),"quote"==r&&(a>e.trendMax?e.isFlipped?i.params.yPositioner="bottom":i.params.yPositioner="top":a<e.trendMin&&(e.isFlipped?i.params.yPositioner="top":i.params.yPositioner="bottom"))}.bind(this,e))};var i=t.ChartEngine.prototype.determineMinMax.bind(this.stx);t.ChartEngine.prototype.determineMinMax=function(e,t,a,r,n,s,o,l,h){return h||(h=[]),o&&l&&this.layout.outliers&&h.push(this.outliers.processDataSet.bind(this.outliers)),i(e,t,a,r,n,s,o,l,h)}}else console.warn("The Outliers addon requires an stx parameter")}},Oe=e=>{var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.PlotComplementer=t.PlotComplementer||function(e){var i=e.stx,a=t.uniqueID();e.decorator||(e.decorator={});var r=e.decorator.symbol||"_"+a,n=e.decorator.display||" (addl)";i.plotComplementers||(i.plotComplementers=[]),i.plotComplementers.push(this),this.id=e.id||a,this.defaultRenderingParameters={chartType:"line",width:1,opacity:.5},e.renderingParameters&&(this.defaultRenderingParameters=e.renderingParameters);var s=this;function o(i,a,o,l){if("err"!=function(t){if(t.quoteDriver&&e.quoteFeed){for(var i=0;i<t.quoteDriver.quoteFeeds.length;i++)if(t.quoteDriver.quoteFeeds[i].engine==e.quoteFeed)return;return"err"}}(i)&&(l||(l=a),!i.isEquationChart(a)&&(o||(o={}),!o.isComparison&&l&&-1==l.indexOf(r)))){var h=l+r,c=a+r,u=i.getRendererFromSeries(l),d=t.extend({display:a+n,name:h,symbol:c,symbolObject:{symbol:c,generator:s.id,masterSymbol:a},overChart:!1,gapDisplayStyle:!0,permanent:!0,panel:o.panel,yAxis:o.yAxis,shareYAxis:!0,loadData:!!s.quoteFeed,dependentOf:u?u.params.name:i.mainSeriesRenderer.params.name},s.renderingParameters);d.color||(d.color=o.color||"auto"),i.addSeries(h,d,(function(e,t){e&&i.removeSeries(h,i.chart),i.chart.seriesRenderers[h]&&(i.chart.seriesRenderers[h].params.display=d.display)}))}}function l(e,t,i){t&&-1==t.indexOf(r)&&e.removeSeries(t+r,i)}function h(e){"master"==e.action?(e.prevSymbol||(e.prevSymbol=e.symbol),l(e.stx,e.prevSymbol,e.stx.chart),o(e.stx,e.symbol)):"add-series"==e.action?(l(e.stx,e.id,e.stx.chart),o(e.stx,e.symbol,e.parameters,e.id)):"remove-series"==e.action&&l(e.stx,e.id,e.stx.chart)}i.addEventListener("symbolChange",h),i.addEventListener("symbolImport",h),this.resetRenderingParameters=function(){this.renderingParameters=this.defaultRenderingParameters},this.setQuoteFeed=function(e){if(e.quoteFeed&&e.behavior){var a=t.clone(e.behavior);a.generator=this.id;var r=e.filter;i.attachQuoteFeed(e.quoteFeed,a,(function(e){return!(r&&!r(e))&&e.symbolObject.generator==a.generator})),this.quoteFeed=e.quoteFeed}},this.setQuoteFeed(e),this.resetRenderingParameters()}},Ye={CIQ:Ce.c};"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||Ye.CIQ.activateImports(Ae,_e,Pe,Fe,Le,Ee,Ne,He,Ie,je,Oe,null)},369:function(e,t,i){"use strict";(function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z;function q(){}i.d(t,"c",(function(){return J})),i.d(t,"d",(function(){return V})),i.d(t,"e",(function(){return B})),i.d(t,"a",(function(){return W})),i.d(t,"b",(function(){return U})),
/**!
 *	8.2.0
 *	Generation date: 2023-03-23T15:05:01.971Z
 *	Client name: deriv limited
 *	Package Type: Technical Analysis
 *	License type: annual
 *	Expiration date: "2024/04/01"
 *	Domain lock: ["127.0.0.1","localhost","deriv.com","deriv.app","deriv.me","binary.com","binary.sx","binary.me","binary.bot","deriv.be"]
 *	iFrame lock: true
 */
/***********************************************************!
 * Copyright by ChartIQ, Inc.
 * Licensed under the ChartIQ, Inc. Developer License Agreement https://www.chartiq.com/developer-license-agreement
*************************************************************/
/*************************************! DO NOT MAKE CHANGES TO THIS LIBRARY FILE!! !*************************************
* If you wish to overwrite default functionality, create a separate file with a copy of the methods you are overwriting *
* and load that file right after the library has been loaded, but before the chart engine is instantiated.              *
* Directly modifying library files will prevent upgrades and the ability for ChartIQ to support your solution.          *
*************************************************************************************************************************/
/*************************************************************************!
* Please note that manually changing the domain list or expiration dates  *
*                                                                         *
* >>>>>>>>>>>>>>>>>>>>>>>>>>>>>> WILL NOT <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< *
*                                                                         *
*   modify the library locking mechanism. Any changes must be requested   *
*                          directly from chartIQ.                         *
***************************************************************************/
function(){var e,t=["127.0.0.1","localhost","deriv.com","deriv.app","deriv.me","binary.com","binary.sx","binary.me","binary.bot","deriv.be"];if(e=new Date("2024/04/01").getTime()){var i=(new Date).getTime();if(e<=i)console.error("This license has expired!");else;}if("undefined"!=typeof document&&t&&t.length>0){for(var a=document.location.href,r=!1,n=0;n<t.length;n++)if(a.indexOf(t[n])>-1){r=!0;break}r||(alert("ERROR: Not licensed for domain "+a),console.error("ERROR: Not licensed for domain "+a))}}(),q[370258]=function(){for(var e=2;9!==e;)switch(e){case 2:e="object"==typeof globalThis?1:5;break;case 1:return globalThis;case 5:var t;e=4;break;case 4:try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"Ll6R9",{get:function(){for(;;)return this},configurable:!0}),t=Ll6R9,i=5;break;case 5:t.BBO88=t,i=4;break;case 4:i="undefined"==typeof BBO88?3:9;break;case 3:throw"";case 9:delete t.BBO88,delete Object.prototype.Ll6R9,i=6}}catch(e){t=window}return t}}(),function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function r(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function n(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}for(var s=2;125!==s;)switch(s){case 126:o(t,"apply",l[64],l[81]),s=125;break;case 20:l[2]="x0",l[4]="",l[7]="eg",l[4]="",s=16;break;case 3:l[3]="U$",l[6]="",l[6]="1d",l[1]="",l[1]="c",s=14;break;case 70:l[81]+=l[10],l[81]+=l[16],l[37]=l[73],l[37]+=l[94],s=66;break;case 83:l[34]+=l[27],l[34]+=l[40],l[44]=l[96],l[44]+=l[98],s=79;break;case 50:l[61]="ak",l[40]="sidual",l[85]="0XDz",l[23]="",l[23]="Xn",s=45;break;case 25:l[59]="",l[97]="3TT",l[59]="O",l[95]="C",s=21;break;case 102:l[13]=l[26],l[13]+=l[41],l[13]+=l[52],l[76]=l[71],s=98;break;case 74:l[64]=1,l[49]=4,l[49]=0,l[81]=l[53],s=70;break;case 14:l[5]="",l[5]="$p",l[8]="H2",l[2]="",l[2]="",s=20;break;case 16:l[4]="Zuy",l[79]="",l[79]="",l[79]="N",s=25;break;case 54:l[96]="I",l[31]="_",l[27]="_re",l[61]="",s=50;break;case 79:l[44]+=l[77],l[15]=l[71],l[15]+=l[85],l[15]+=l[91],s=102;break;case 87:l[33]=l[62],l[33]+=l[23],l[33]+=l[61],l[34]=l[31],s=83;break;case 127:o(r,l[90],l[49],l[37]),s=126;break;case 131:o(i,"test",l[64],l[76]),s=130;break;case 94:l[86]+=l[59],l[80]=l[50],l[80]+=l[79],l[80]+=l[4],l[28]=l[95],l[28]+=l[97],l[28]+=l[43],s=116;break;case 105:o(r,"String",l[49],l[74]),s=135;break;case 135:o(a,"fromCharCode",l[49],l[88]),s=134;break;case 107:var o=function(e,t,i,a){for(var r=2;5!==r;)switch(r){case 2:var n=[arguments];h(l[0][0],n[0][0],n[0][1],n[0][2],n[0][3]),r=5}};s=106;break;case 116:l[88]=l[2],l[88]+=l[5],l[88]+=l[1],l[74]=l[48],l[74]+=l[6],s=111;break;case 111:l[74]+=l[8],l[58]=l[3],l[58]+=l[7],l[58]+=l[9],s=107;break;case 58:l[16]="f",l[12]="abstrac",l[26]="__",l[53]="",l[53]="P",l[64]=2,l[64]=9,s=74;break;case 44:l[41]="",l[41]="optimiz",l[68]="Y8F",l[71]="",l[71]="S",s=39;break;case 129:o(n,"push",l[64],l[44]),s=128;break;case 98:l[76]+=l[47],l[76]+=l[92],l[86]=l[68],l[86]+=l[83],s=94;break;case 32:l[92]="sjf",l[47]="",l[47]="$y",l[52]="",l[52]="e",s=44;break;case 128:o(r,l[34],l[49],l[33]),s=127;break;case 45:l[48]="",l[98]="5beB",l[48]="t",l[62]="O_",s=62;break;case 39:l[91]="w",l[77]="",l[77]="g",l[96]="",s=54;break;case 134:o(a,"substring",l[64],l[28]),s=133;break;case 2:var l=[arguments];l[9]="",l[9]="J",l[3]="",s=3;break;case 133:o(a,"replace",l[64],l[80]),s=132;break;case 106:o(a,"charCodeAt",l[64],l[58]),s=105;break;case 62:l[43]="z",l[94]="fo",l[73]="R82",l[10]="8x2a",s=58;break;case 132:o(n,"map",l[64],l[86]),s=131;break;case 130:o(r,l[13],l[49],l[15]),s=129;break;case 21:l[83]="",l[50]="T3",l[83]="L1",l[92]="",s=32;break;case 66:l[37]+=l[43],l[90]=l[26],l[90]+=l[12],l[90]+=l[48],s=87}function h(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 3:l[2]="",l[2]="definePro",l[1]=!1;try{for(var s=2;13!==s;)switch(s){case 14:try{for(var o=2;3!==o;)switch(o){case 1:l[3]+=l[4],l[3]+=l[5],l[0][0].Object[l[3]](l[8],l[0][4],l[9]),o=3;break;case 2:l[3]=l[2],o=1}}catch(e){}s=13;break;case 3:return;case 9:l[8][l[0][4]]=l[8][l[0][2]],l[9].set=function(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];l[8][l[0][2]]=i[0][0],t=5}},l[9].get=function(){for(var e=2;11!==e;)switch(e){case 2:var t=[arguments];t[4]="",t[4]="",t[4]="ed",e=3;break;case 6:return t[1]=t[8],t[1]+=t[7],t[1]+=t[4],typeof l[8][l[0][2]]==t[1]?void 0:l[8][l[0][2]];case 3:t[7]="n",t[8]="",t[8]="",t[8]="undefi",e=6}},l[9].enumerable=l[1],s=14;break;case 4:s=l[8].hasOwnProperty(l[0][4])&&l[8][l[0][4]]===l[8][l[0][2]]?3:9;break;case 2:l[9]={},l[6]=(0,l[0][1])(l[0][0]),l[8]=[l[6],l[6].prototype][l[0][3]],s=4}}catch(e){}n=6;break;case 2:var l=[arguments];l[4]="",l[5]="y",l[4]="pert",n=3}}}(q[370258]),q[150014]=function(e){for(var t=2;10!==t;)switch(t){case 11:return{R3ta_F9:function(t){for(var a=2;6!==a;)switch(a){case 5:a=n--?3:4;break;case 3:a=n--?8:9;break;case 2:var r=(new i[e[0]])[e[1]]();a=1;break;case 9:h=r+6e4,a=8;break;case 7:return s?l:!l;case 1:a=r>h?5:8;break;case 8:var s=function(a,r){for(var n=2;10!==n;)switch(n){case 9:n=o<a[r[5]]?8:11;break;case 3:var s,o=0;n=9;break;case 8:var l=i[r[4]](a[r[2]](o),16)[r[3]](2),h=l[r[2]](l[r[5]]-1);n=6;break;case 13:o++,n=9;break;case 4:r=e,n=3;break;case 11:return s;case 12:s^=h,n=13;break;case 5:n=void 0===r&&void 0!==e?4:3;break;case 6:n=0===o?14:12;break;case 14:s=h,n=13;break;case 1:a=t,n=5;break;case 2:n=void 0===a&&void 0!==t?1:5}}(void 0,void 0);a=7;break;case 4:l=c(r),a=3}}};case 2:var i,a,r,n;t=1;break;case 4:var s="fromCharCode",o="RegExp";t=3;break;case 5:i=q[370258],t=4;break;case 13:t=n--?11:12;break;case 12:var l,h=0;t=11;break;case 8:t=n--?6:7;break;case 7:r=a.T3NZuy(new i[o]("^['-|]"),"S"),t=6;break;case 6:t=n--?13:14;break;case 14:e=e.Y8FL1O((function(e){for(var t=2;13!==t;)switch(t){case 8:o++,t=3;break;case 14:return a;case 7:t=a?14:6;break;case 2:var a;t=1;break;case 4:var o=0;t=3;break;case 6:return;case 9:a+=i[r][s](e[o]+93),t=8;break;case 1:t=n--?4:5;break;case 3:t=o<e.length?9:7;break;case 5:a="",t=4}})),t=13;break;case 1:t=n--?4:5;break;case 9:a=typeof s,t=8;break;case 3:t=n--?8:9}function c(t){for(var a=2;15!==a;)switch(a){case 3:s=27,a=9;break;case 20:r=t-c>s&&l-t>s,a=19;break;case 8:o=e[6],a=7;break;case 13:h=e[7],a=12;break;case 4:a=n--?9:3;break;case 10:a=c>=0&&l>=0?20:18;break;case 17:r=t-c>s,a=19;break;case 5:u=i[e[4]],a=4;break;case 16:r=l-t>s,a=19;break;case 19:return r;case 12:a=n--?10:11;break;case 11:c=(h||0===h)&&u(h,s),a=10;break;case 6:l=o&&u(o,s),a=14;break;case 7:a=n--?14:6;break;case 14:a=n--?12:13;break;case 1:a=n--?4:5;break;case 2:var r,s,o,l,h,c,u;a=1;break;case 18:a=c>=0?17:16;break;case 9:a=n--?7:8}}}([[-25,4,23,8],[10,8,23,-9,12,16,8],[6,11,4,21,-28,23],[23,18,-10,23,21,12,17,10],[19,4,21,22,8,-20,17,23],[15,8,17,10,23,11],[-39,-44,18,6,19,17,8,7,-45],[]]),q.h$V=function(){return"function"==typeof q[539515].x96qQgs?q[539515].x96qQgs.apply(q[539515],arguments):q[539515].x96qQgs},q[238553]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[2]=void 0,t[8]={},t[8].i9agN$W=function(){for(var e=2;90!==e;)switch(e){case 4:i[9]=[],i[3]={},i[3].E$t=["G$p"],e=8;break;case 70:i[73]++,e=57;break;case 53:i[9].I5beBg(i[68]),i[9].I5beBg(i[4]),i[9].I5beBg(i[53]),i[9].I5beBg(i[75]),e=49;break;case 57:e=i[73]<i[9].length?56:69;break;case 30:i[83]={},e=29;break;case 38:i[57].E$t=["G$p"],i[57].v3c=function(){return!/\060\x78\u0036\x31/.S$ysjf(function(){return String.fromCharCode(97)}+[])},i[18]=i[57],i[9].I5beBg(i[97]),e=53;break;case 68:e=68;break;case 59:i[16]="t93",e=58;break;case 58:i[73]=0,e=57;break;case 75:i[49]={},i[49][i[16]]=i[28][i[48]][i[52]],i[49][i[61]]=i[10],e=72;break;case 72:i[37].I5beBg(i[49]),e=71;break;case 49:i[9].I5beBg(i[6]),i[9].I5beBg(i[8]),i[9].I5beBg(i[2]),e=46;break;case 71:i[52]++,e=76;break;case 46:i[9].I5beBg(i[18]),i[9].I5beBg(i[29]),e=65;break;case 5:return 41;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 11:a[9][a[5][i[16]]].t+=!0,t=10;break;case 8:a[6]=0,t=7;break;case 6:a[5]=a[0][0][a[6]],t=14;break;case 26:t=a[7]>=.5?25:24;break;case 14:t=void 0===a[9][a[5][i[16]]]?13:11;break;case 15:a[4]=a[2][a[6]],a[7]=a[9][a[4]].h/a[9][a[4]].t,t=26;break;case 17:a[6]=0,t=16;break;case 10:t=a[5][i[61]]===i[80]?20:19;break;case 19:a[6]++,t=7;break;case 4:a[9]={},a[2]=[],a[6]=0,t=8;break;case 18:a[8]=!1,t=17;break;case 2:var a=[arguments];t=1;break;case 1:t=0===a[0][0].length?5:4;break;case 23:return a[8];case 20:a[9][a[5][i[16]]].h+=!0,t=19;break;case 5:return;case 16:t=a[6]<a[2].length?15:23;break;case 24:a[6]++,t=16;break;case 12:a[2].I5beBg(a[5][i[16]]),t=11;break;case 7:t=a[6]<a[0][0].length?6:18;break;case 13:a[9][a[5][i[16]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[7]={},e=5;break;case 5:return t[7].h=0,t[7].t=0,t[7]}}.P8x2af(this,arguments),t=12;break;case 25:a[8]=!0,t=24}}(i[37])?68:67;break;case 42:i[85].E$t=["G$p"],i[85].v3c=function(){return!/\142\x74\x6f\u0061/.S$ysjf(function(){return btoa("=")}+[])},i[29]=i[85],i[57]={},e=38;break;case 1:e=t[2]?5:4;break;case 56:i[28]=i[9][i[73]];try{i[10]=i[28][i[20]]()?i[80]:i[60]}catch(e){i[10]=i[60]}e=77;break;case 65:i[37]=[],i[80]="N7n",i[60]="C2f",i[48]="E$t",i[61]="g5n",i[20]="v3c",e=59;break;case 13:i[5].v3c=function(){return!/\174/.S$ysjf(function(){return"a|a".split("|")}+[])},i[4]=i[5],e=11;break;case 8:i[3].v3c=function(){return/\x61\x61\141\u0061\x61/.S$ysjf(function(){return"aaaa".padEnd(5,"a")}+[])},i[6]=i[3],i[5]={},i[5].E$t=["G$p"],e=13;break;case 2:var i=[arguments];e=1;break;case 11:i[7]={},i[7].E$t=["c53"],i[7].v3c=function(){return"function"==typeof S0XDzw},e=19;break;case 35:i[97]=i[36],i[70]={},i[70].E$t=["c53"],i[70].v3c=function(){return"function"==typeof R82foz},i[75]=i[70],e=30;break;case 76:e=i[52]<i[28][i[48]].length?75:70;break;case 24:i[68]=i[13],i[36]={},i[36].E$t=["c53"],i[36].v3c=function(){return"function"==typeof O_Xnak},e=35;break;case 15:i[8]=i[1],i[13]={},i[13].E$t=["c53"],i[13].v3c=function(){var e=!1,t=[];try{for(var i in console)t.I5beBg(i);e=0===t.length}catch(e){}return e},e=24;break;case 67:return t[2]=64,68;case 29:i[83].E$t=["G$p"],i[83].v3c=function(){return/\x31\x39\x32/.S$ysjf(function(){!function(e){for(var t=0;t<20;t++)e+=t}(2)}+[])},i[53]=i[83],i[85]={},e=42;break;case 19:i[2]=i[7],i[1]={},i[1].E$t=["G$p"],i[1].v3c=function(){return!/(\x5b|\u005d)/.S$ysjf(function(){return["a","a"].join()}+[])},e=15;break;case 77:i[52]=0,e=76}},t[8]}}(),q.E2w=function(){return"function"==typeof q[539515].q7DznqI?q[539515].q7DznqI.apply(q[539515],arguments):q[539515].q7DznqI},q.Y$r=function(){return"function"==typeof q[150014].R3ta_F9?q[150014].R3ta_F9.apply(q[150014],arguments):q[150014].R3ta_F9},q[156040]=q[593596],q.c6Y=function(){return"function"==typeof q[593596].N$y1PkD?q[593596].N$y1PkD.apply(q[593596],arguments):q[593596].N$y1PkD},q[593596]={N$y1PkD:function(){var e,t=arguments;switch(a){case 167:e=(t[3]+t[4])*t[0]-t[1]-t[2];break;case 144:e=(-t[3]-t[2])*t[1]+t[0]+t[4];break;case 65:e=(t[3]+t[2])/t[1]-t[0];break;case 58:e=t[3]/t[2]+t[4]-t[1]-t[0];break;case 57:e=t[0]/t[2]-t[1]+t[3]-t[4];break;case 64:e=t[0]/t[3]/t[2]+t[1];break;case 155:e=t[3]/t[4]*t[0]*t[1]-t[2];break;case 86:e=(t[1]+t[3]-t[0])/t[4]+t[2];break;case 15:e=-t[1]*t[3]*t[0]+t[2];break;case 163:e=t[1]/t[2]/t[0]*t[4]+t[3];break;case 46:e=t[0]<<t[1];break;case 145:e=(t[2]>>t[0])-t[1];break;case 110:e=(t[0]-t[4])/t[2]+t[1]+t[3];break;case 3:e=t[3]+t[2]+t[1]-t[0];break;case 55:e=(t[0]/t[4]-t[1])/t[3]+t[2];break;case 17:e=(t[2]-t[3])/t[4]/t[0]+t[1];break;case 71:e=t[0]+t[7]+t[2]+t[6]+t[3]+t[5]+t[8]+t[1]+t[4];break;case 171:e=t[4]*t[3]-t[1]+t[0]-t[2];break;case 134:e=-t[2]*t[1]+t[0];break;case 48:e=t[3]+(t[6]-t[1])*(t[5]/t[2]-t[4])*t[0];break;case 51:e=t[3]-t[1]/(t[0]*t[2]);break;case 151:e=t[1]+t[3]/t[0]*t[2];break;case 106:e=t[0]==t[1];break;case 84:e=t[1]*t[3]-t[2]-t[0];break;case 80:e=t[2]+t[4]+t[1]+t[3]+t[0];break;case 30:e=t[1]-t[0]-t[2];break;case 104:e=t[0]!==t[1];break;case 32:e=(t[2]*t[1]-t[4])*t[0]-t[3];break;case 6:e=t[0]-t[1]-t[2]+t[3]+t[4];break;case 79:e=t[3]+t[2]-t[1]-t[0];break;case 12:e=(t[4]-t[3]+t[0])/t[1]-t[2];break;case 50:e=t[3]+t[1]/(t[2]^t[0]);break;case 35:e=t[4]*t[2]*t[1]-t[3]-t[0];break;case 89:e=(t[3]-t[2])/t[0]-t[1];break;case 63:e=(t[4]-t[1])/t[0]-t[2]+t[3];break;case 117:e=(t[1]-t[0])*t[4]-t[2]-t[3];break;case 159:e=(-t[1]+t[4])/t[3]+t[2]-t[0];break;case 5:e=t[2]-t[1]+t[4]+t[0]-t[3];break;case 67:e=t[0]/t[2]+t[1];break;case 146:e=t[0]*-t[1];break;case 78:e=t[2]-t[3]+t[1]-t[0];break;case 109:e=t[4]*t[2]-t[0]-t[3]+t[1];break;case 158:e=-t[1]*t[3]/t[2]-t[4]+t[0];break;case 45:e=(t[1]-t[3])/t[4]+(t[0]|t[2]);break;case 118:e=(t[3]-t[2]-t[1])*t[0]-t[4];break;case 85:e=t[0]+t[1]-t[3]-t[2]+t[4];break;case 9:e=t[0]*t[4]*t[2]+t[3]-t[1];break;case 99:e=t[1]/t[4]*t[3]*t[0]+t[2];break;case 108:e=(t[3]-t[0])*t[1]+t[2]-t[4];break;case 29:e=(-t[0]-t[1])*t[2]+t[3];break;case 18:e=-t[0]*t[3]/t[1]+t[2];break;case 41:e=t[1]*(t[3]-t[0]/(t[2]-t[4]));break;case 112:e=t[3]/t[2]+t[0]+t[1];break;case 115:e=t[1]/t[3]/t[2]-t[0]+t[4];break;case 150:e=t[2]+(t[1]+t[3]*t[0]);break;case 26:e=-t[1]+t[2]+t[0];break;case 111:e=t[1]-t[0]-t[3]+t[2];break;case 129:e=t[0]===t[1];break;case 4:e=(-t[0]-t[2])/t[3]*t[4]+t[1];break;case 139:e=t[1]+t[2]/t[0];break;case 7:e=t[1]-t[0]+t[2];break;case 73:e=t[1]*t[2]*t[0]*t[3];break;case 120:e=t[3]/t[0]-t[1]+t[2];break;case 114:e=t[4]*t[3]*t[2]/t[0]+t[1];break;case 0:e=t[0]-t[1];break;case 68:e=t[2]*t[1]-t[0];break;case 34:e=t[0]/t[2]*t[3]-t[1];break;case 42:e=(t[0]-t[1])/t[2];break;case 169:e=-t[0]/t[1]-t[2]+t[3];break;case 49:e=+t[2]*t[0]-t[1];break;case 160:e=t[1]!=t[0];break;case 82:e=(-t[3]*t[1]+t[2])/t[4]+t[0];break;case 52:e=t[1]*(t[0]>>t[2]);break;case 21:e=t[0]*-+t[1];break;case 11:e=(-t[0]-t[3])/t[1]+t[2];break;case 132:e=(t[2]-t[1])/(t[0]-t[3]);break;case 147:e=t[0]+t[1]*t[2];break;case 83:e=t[0]<t[1]*t[2];break;case 22:e=t[1]+t[0];break;case 28:e=t[1]/+t[0];break;case 13:e=(t[4]+t[0])/t[3]-t[1]+t[2];break;case 100:e=-t[4]/(t[2]<<t[7])*(t[1]*(t[0]-t[6])-+t[5])+t[3];break;case 172:e=-t[3]*t[0]+t[1]+t[2];break;case 25:e=t[0]+t[2]-t[1];break;case 133:e=t[2]*(t[3]-t[0])+t[1];break;case 53:e=t[0]+t[1]+t[2];break;case 141:e=t[2]/t[4]-t[0]+t[3]+t[1];break;case 113:e=(t[1]/t[3]-t[4])*t[0]-t[2];break;case 72:e=t[9]+t[10]+t[8]+t[2]+t[0]+t[3]+t[5]+t[1]+t[4]+t[6]+t[7];break;case 116:e=(t[2]+t[3])/t[0]*t[4]-t[1];break;case 16:e=(t[1]+t[0])*t[2]-t[3];break;case 127:e=(-t[4]+t[3]-t[1])/t[0]+t[2];break;case 101:e=t[5]/(t[2]|t[4])*t[1]*t[3]*t[6]+t[0];break;case 81:e=t[1]*t[0]*t[2]-t[3];break;case 36:e=t[2]*t[1]/t[3]+t[0];break;case 93:e=-t[1]+t[2]-t[0];break;case 119:e=(t[3]+t[1]+t[2])/t[4]+t[0];break;case 103:e=t[1]*(t[2]*t[4]*t[5]+t[0])+t[3];break;case 102:e=t[1]/(t[4]-t[6])*(t[0]*t[7]*t[2]+t[3])+t[5];break;case 20:e=t[0]^t[1];break;case 121:e=(t[1]-t[4])*t[0]*t[3]-t[2];break;case 90:e=t[2]*t[0]/t[3]+t[4]+t[1];break;case 96:e=(t[3]-t[4])/t[0]+t[1]-t[2];break;case 152:e=t[0]>t[1];break;case 76:e=(t[0]+t[3])/t[1]+t[2];break;case 62:e=t[4]/t[3]*t[0]+t[2]-t[1];break;case 38:e=t[0]*t[1];break;case 137:e=(-t[2]+t[3])*t[0]+t[1];break;case 135:e=-t[2]-t[3]-t[4]-t[0]+t[1];break;case 94:e=(t[4]*t[1]-t[2])/t[3]+t[0];break;case 54:e=t[0]*t[1]-t[2]+t[3];break;case 128:e=(t[2]*t[0]+t[3])/t[4]-t[1];break;case 165:e=t[1]/t[0]*t[2];break;case 170:e=t[1]*(t[2]<<t[0]);break;case 24:e=t[1]+ +t[0];break;case 77:e=t[3]*t[2]+t[1]-t[0];break;case 122:e=(-t[2]/t[3]-t[4])*t[1]+t[0];break;case 143:e=t[1]*t[0]/t[2]+t[4]-t[3];break;case 69:e=t[2]/t[0]+t[3]-t[1];break;case 88:e=(t[2]-t[1])/t[4]*t[0]-t[3];break;case 23:e=(t[3]-t[2])*(t[0]-t[5])/(t[4]-t[1]);break;case 124:e=t[0]+t[2]-t[3]+t[1];break;case 37:e=t[3]+t[1]-t[2]+t[0]-t[4];break;case 123:e=t[4]+t[2]-t[1]+t[3]+t[0];break;case 164:e=t[3]*t[4]*t[0]*+t[1]*t[2];break;case 138:e=(t[0]-t[4]-t[1])/t[3]+t[2];break;case 98:e=t[0]-+t[1];break;case 107:e=t[1]+t[2]*(t[0]-t[3]);break;case 154:e=-t[2]/t[0]*t[3]+t[1];break;case 153:e=t[3]+t[2]-t[4]-t[0]-t[1];break;case 148:e=(t[2]*t[4]-t[0])/t[1]-t[3];break;case 75:e=(t[2]+t[3]+t[4])*t[0]-t[1];break;case 60:e=(t[0]-t[4])*t[3]/t[1]+t[2];break;case 33:e=t[0]/t[3]/t[1]+t[4]+t[2];break;case 95:e=t[4]*t[2]-t[3]-t[1]-t[0];break;case 149:e=t[3]-t[1]/+t[2]+(t[0]-t[4]);break;case 19:e=t[1]>>t[0];break;case 126:e=t[3]+t[2]+t[1]+t[0];break;case 59:e=(t[2]-t[1])*t[3]-t[0];break;case 161:e=t[1]*t[2]*t[0];break;case 140:e=t[0]-t[2]-(t[3]-t[1]);break;case 91:e=t[1]+t[4]+t[3]-t[0]+t[2];break;case 47:e=t[3]+(t[0]-t[4])*t[1]*t[2];break;case 1:e=(t[0]*t[2]+t[3])*t[1]-t[4];break;case 31:e=(t[0]+t[4])*t[1]+t[3]-t[2];break;case 92:e=t[0]-t[2]+t[3]+t[1];break;case 136:e=t[1]*t[3]/t[0]-t[2];break;case 39:e=t[1]+t[6]+t[0]+t[2]+t[8]+t[4]+t[9]+t[5]/t[3]+t[7];break;case 8:e=t[0]/t[2]-t[1];break;case 131:e=t[0]<t[1];break;case 166:e=(-t[4]+t[2])*t[0]*t[3]+t[1];break;case 66:e=(t[0]+t[1]+t[3])/t[2]-t[4];break;case 157:e=-t[0]+t[1]-t[2]+t[3];break;case 40:e=t[1]/t[0];break;case 168:e=t[0]+t[1]+t[3]-t[2]-t[4];break;case 43:e=(t[1]+t[2])/t[0];break;case 125:e=t[1]/(t[0]>>t[2]);break;case 162:e=t[2]*(t[1]^t[0]);break;case 14:e=-t[0]/t[1]+t[2];break;case 10:e=-t[1]-t[2]+t[0];break;case 2:e=-t[1]+t[0];break;case 61:e=t[1]/t[3]*t[4]/t[2]-t[0];break;case 87:e=t[3]*t[0]/t[4]*t[2]-t[1];break;case 97:e=-t[3]/t[4]*t[1]*t[0]+t[2];break;case 74:e=t[0]|t[1];break;case 142:e=t[2]/t[0]-t[4]-t[3]+t[1];break;case 44:e=(t[1]-t[0])/t[3]+t[2];break;case 130:e=t[2]-(t[0]-t[1]);break;case 27:e=t[0]|t[2]<<t[1]|t[3]<<t[4];break;case 156:e=t[3]*t[0]*t[1]*t[2]-t[4];break;case 105:e=(t[2]-t[3])*(t[0]-t[7])-(t[1]-t[4])*(t[6]-t[5]);break;case 70:e=t[5]+t[4]+t[1]+t[2]+t[3]+t[0]+t[6];break;case 56:e=-t[3]*t[4]-t[0]+t[1]+t[2]}return e},g9iUvuS:function(e){a=e}},q.R2R=function(){return"function"==typeof q[539515].x96qQgs?q[539515].x96qQgs.apply(q[539515],arguments):q[539515].x96qQgs},q[370258].L3EE=q,q[539515]=function(){for(var e=2;4!==e;)switch(e){case 2:var t,i,a=q[370258];e=5;break;case 5:return{x96qQgs:function(e,t,i,a){for(;;)return n(e,t,i,a)},q7DznqI:function(e,t,i,a){for(;;)return n(e,t,i,a,!0)}}}function r(e){for(var t=2;7!==t;)switch(t){case 2:var i=9,a="";t=5;break;case 3:a+=t1dH2.x0$pc(e[r]-i+96),t=9;break;case 9:r++,t=4;break;case 5:var r=0;t=4;break;case 4:t=r<e.length?3:8;break;case 8:return a}}function n(e,n,s,o,l){for(var h=2;15!==h;)switch(h){case 13:h=n&&m>0&&46!==d.U$egJ(m-1)?12:11;break;case 6:case 16:return q.q2D(c,u,s);case 2:var c,u,d,p;p=a[r([21,24,12,10,29,18,24,23])],!t&&(t=void 0!==p?p[r([17,24,28,29,23,10,22,14])]||" ":""),!i&&(i=void 0!==p?p[r([17,27,14,15])]:""),h=3;break;case 12:return!1;case 8:u=(c=d.C3TTz(e,o)).length,h=6;break;case 9:h=o>0?8:19;break;case 11:return u=(c=d.C3TTz(m,d.length)).length,q.q2D(c,u,s);case 19:h=null===e||e<=0?18:14;break;case 14:var m=d.length-e;h=13;break;case 18:u=(c=d.C3TTz(0,d.length)).length,h=16;break;case 3:d=l?i:t,h=9}}}(),q.J8h=function(){return"function"==typeof q[238553].i9agN$W?q[238553].i9agN$W.apply(q[238553],arguments):q[238553].i9agN$W},q.T9A=function(){return"function"==typeof q[539515].q7DznqI?q[539515].q7DznqI.apply(q[539515],arguments):q[539515].q7DznqI},q.I7W=function(){return"function"==typeof q[150014].R3ta_F9?q[150014].R3ta_F9.apply(q[150014],arguments):q[150014].R3ta_F9},q[636832]="$j0",q.M8Y=function(){return"function"==typeof q[593596].g9iUvuS?q[593596].g9iUvuS.apply(q[593596],arguments):q[593596].g9iUvuS},q.q2D=function(){return"function"==typeof q[446427].V29cT4d?q[446427].V29cT4d.apply(q[446427],arguments):q[446427].V29cT4d},q[446427]=(r=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{V29cT4d:function(e,t,i){for(var a=i,n=-4&t,s=0;s<n;s+=4){var o=255&e.U$egJ(s)|(255&e.U$egJ(s+1))<<8|(255&e.U$egJ(s+2))<<16|(255&e.U$egJ(s+3))<<24;o=r(o,3432918353),a=5*(a=(524287&(a^=o=r(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.U$egJ(n+2))<<16;case 2:o|=(255&e.U$egJ(n+1))<<8;case 1:o|=255&e.U$egJ(n),o=r(o,3432918353),a^=o=r(o=(131071&o)<<15|o>>>17,461845907)}return a^=t,a=r(a^=a>>>16,2246822507),a=r(a^=a>>>13,3266489909),a^=a>>>16}}),q.O$R=function(){return"function"==typeof q[446427].V29cT4d?q[446427].V29cT4d.apply(q[446427],arguments):q[446427].V29cT4d},q.r2m=function(){return"function"==typeof q[238553].i9agN$W?q[238553].i9agN$W.apply(q[238553],arguments):q[238553].i9agN$W},q.C$o=function(){return"function"==typeof q[593596].g9iUvuS?q[593596].g9iUvuS.apply(q[593596],arguments):q[593596].g9iUvuS},q[103941]=!0,q.d58=function(){return"function"==typeof q[593596].N$y1PkD?q[593596].N$y1PkD.apply(q[593596],arguments):q[593596].N$y1PkD},q.h1V=function(e){if(q.J8h(),q&&e)return q.I7W(e)},q.C4O=function(e){if(q.J8h(),q)return q.I7W(e)},q.l_E=function(e){if(q.r2m(),q&&e)return q.I7W(e)},q.C9r=function(e){if(q.r2m(),q)return q.I7W(e)},q.s8p=function(e){if(q.J8h(),q&&e)return q.Y$r(e)},q.C4U=function(e){if(q.J8h(),q)return q.I7W(e)},n=e=>{function t(){}e.timezoneJS={},e.CIQ=t,t.inheritsFrom=function(e,t,i){var a,r;a=t.prototype||Object.getPrototypeOf(t),q.J8h(),r=2;for(var n=1;-358944174!==q.O$R(n.toString(),n.toString().length,34045);n++)e.prototype=1==i||""!==!t?new t:Object.create(a),Object.defineProperties(e.prototype,{constructor:{configurable:!1,enumerable:!0,value:e,writable:!1},parent:{configurable:!1,enumerable:!0,value:a,writable:!1}}),r+=2;-371888614!==q.O$R(r.toString(),r.toString().length,69612)&&(e.prototype=!1===i&&""===+t?new t:Object.create(a),Object.defineProperties(e.prototype,{constructor:{configurable:!0,enumerable:!1,value:e,writable:!0},parent:{configurable:!0,enumerable:!1,value:a,writable:!0}})),e.prototype=!1!==i&&"function"==typeof t?new t:Object.create(a),Object.defineProperties(e.prototype,{constructor:{configurable:!0,enumerable:!1,value:e,writable:!0},parent:{configurable:!0,enumerable:!1,value:a,writable:!0}})},t.extend=function(e,i,a){var r,n;for(r in i)e!==(n=i[r])&&void 0!==n&&(null===n||!0===a?e[r]=n:n.constructor==Array?e[r]=n.slice():n.constructor==Object?e[r]=t.extend("object"==typeof e[r]&&null!==e[r]?e[r]:{},n):e[r]=n);return e},t.activateImports=function(){var t;q.J8h(),(t=this).activatedImports||(t.activatedImports={});for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];a.forEach(i=>{"function"==typeof i&&(i.__guid in t.activatedImports||(i.__guid=t.uniqueID(!0),t.activatedImports[i.__guid]=i.__name||i.name,i(e)))})},q.J8h()},s=t=>{var i,a,r;q.r2m(),a=function(e,t){var i,a;i=2;for(var r=1;830193040!==q.q2D(r.toString(),r.toString().length,3278);r++)(a=document.createEvent("Event")).initEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable)),i+=2;return-1169352855!==q.O$R(i.toString(),i.toString().length,33528)&&(a=document.createEvent("")).initEvent(e,~+(t||t.bubbles),+~(t||t.cancelable)),a},(i="undefined"!=typeof window?window:void 0!==e?e:{}).Event&&"function"!=typeof i.Event&&(a.prototype=i.Event.prototype,i.Event=a),r=function(e,t){var i;return(i=document.createEvent("CustomEvent")).initCustomEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable),t&&t.detail),i},i.CustomEvent&&"function"!=typeof i.CustomEvent&&(r.prototype=i.CustomEvent.prototype,i.CustomEvent=r),void 0!==e&&void 0===e.CanvasRenderingContext2D&&(e.CanvasRenderingContext2D=function(){})},o=e=>{var t,i,a,r,n,s=q;t=e.CIQ,a=(i="undefined"!=typeof navigator?navigator:{userAgent:""}).userAgent,r="undefined"!=typeof window?window:{},n="undefined"!=typeof document?document:{},t.ipad=-1!=a.indexOf("iPad")||"MacIntel"===i.platform&&i.maxTouchPoints>1,t.iphone=-1!=a.indexOf("iPhone"),s.C$o(0);var o=s.d58(19,20);t.isAndroid=a.toLowerCase().indexOf("android")>o,t.isIE=a.toLowerCase().indexOf("msie")>-1||a.indexOf("Trident/")>-1,s.M8Y(1);var l=s.c6Y(6,15,9,7,916);t.isEdge=a.indexOf("Edge/")>l,s.M8Y(2);var h=s.c6Y(20,21);t.isSafari=a.indexOf("Safari/")>h,t.isIOS7=a.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),t.isIOS8=a.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),t.isIOS9=a.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),t.isIOS10=a.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),t.isIOS7or8=t.isIOS7||t.isIOS8||t.isIOS9||t.isIOS10,t.isMobile=t.isAndroid||t.ipad||t.iphone,t.touchDevice=void 0!==n.ontouchstart||i.maxTouchPoints>1,t.isSurface=t.touchDevice&&(t.isEdge||t.isIE||a.indexOf("Edg/")>-1),t.is_chrome=a.toLowerCase().indexOf("chrome")>-1&&!t.isEdge,s.M8Y(3);var c=s.c6Y(19,2,16,0);t.isFF=a.toLowerCase().indexOf("firefox")>c,t.isSurfaceApp=r.MSApp,t.isWebComponentsSupported="undefined"!=typeof document&&"registerElement"in document&&"import"in document.createElement("link")&&"content"in document.createElement("template"),t.noKeyboard=t.isMobile||t.isSurfaceApp},l=e=>{var t,i,a;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,a=function(e,t,i,a){var r,n,s;function o(e,t,a){var r=q;r.r2m(),[1,2].forEach(e=>{t[e].cp={},["x","y"].forEach((function(i){var n;r.C$o(0);var s=r.c6Y(72,8);r.C$o(3);var o=r.c6Y(25,4,4,19);r.C$o(4);var l=r.d58(16,218,15,1,7);r.M8Y(5);var h=r.c6Y(2,6,30,32,8);r.C$o(0);var c=r.d58(22,20);r.M8Y(6);var u=r.c6Y(8,11,12,14,3);r.M8Y(7);var d=r.c6Y(14,7,9);r.C$o(8);var p=r.c6Y(6,4,1);r.C$o(9);var m=r.d58(1,149,8,15,17);r.M8Y(10);var g=r.c6Y(19,11,6);r.C$o(11);var f=r.c6Y(11,26,2,15);r.M8Y(0);var y=r.d58(4,2);r.C$o(12);var v=r.c6Y(15,1,17,17,21);r.M8Y(13);var x=r.c6Y(9,14,14,9,0);r.C$o(14);var b=r.d58(17,17,3);n=("1">>s)/(1+Math.sqrt(Math.pow(t[o*e-l].x-t[2*e-h].x,"2"|c)+Math.pow(t[u*e-1].y-t[d*e-p].y,m))/Math.sqrt(Math.pow(t[g].x-t[f].x,y)+Math.pow(t[v].y-t[x].y,b))),r.C$o(15);var C=r.c6Y(6,1,33,5);r.M8Y(16);var S=r.d58(5,0,4,18);r.C$o(17);var w=r.d58(1,6,3,8,1);r.C$o(18);var D=r.d58(2,26,2,13);t[e].cp[i]=t[e][i]+(C-S*e)*(t[e+w][i]-t[e-D][i])*a*(n||0),t[e].cp[i]<Math.min(t[1][i],t[2][i])&&(t[e].cp[i]=Math.min(t[1][i],t[2][i])),t[e].cp[i]>Math.max(t[1][i],t[2][i])&&(t[e].cp[i]=Math.max(t[1][i],t[2][i]))}))}),0===e?i.quadraticCurveTo(t[2].cp.x,t[2].cp.y,t[2].x,t[2].y):e===n-4?i.quadraticCurveTo(t[1].cp.x,t[1].cp.y,t[2].x,t[2].y):i.bezierCurveTo(t[1].cp.x,t[1].cp.y,t[2].cp.x,t[2].cp.y,t[2].x,t[2].y)}r=0,a||(a=[]),(!t||t<0)&&(t=0),n=e.length,i.moveTo(e[0],e[1]);for(var l=0;l<n-3;l+=2)h(l),(s=[])[0]={x:e[Math.max(0,l-2)],y:e[Math.max(1,l-1)]},s[1]={x:e[l],y:e[l+1]},s[2]={x:e[l+2],y:e[l+3]},s[3]={x:e[Math.min(n-2,l+4)],y:e[Math.min(n-1,l+5)]},4===n&&(t=0),o(l,s,t);function h(t){var n;q.J8h(),r!=a.length&&(n=a[r]).coord[0]==e[t]&&n.coord[1]==e[t+1]&&(i.stroke(),i.strokeStyle=n.color,i.setLineDash(n.pattern),i.lineDashOffset=0,i.lineWidth=n.width,i.beginPath(),i.moveTo(e[t],e[t+1]),r++)}},e.SplinePlotter.plotSpline||(e.SplinePlotter.plotSpline=a),t.clearCanvas=function(e,i){var a,r,n,s=q;s.r2m(),e.isDirty=!1,(a=e.context).clearRect(0,0,e.width,e.height),!t.isAndroid||t.is_chrome||t.isFF||(t.ChartEngine.useOldAndroidClear&&i&&(a.fillStyle=i.containerColor,s.M8Y(0),a.fillRect(0,s.c6Y("0",0),e.width,e.height),s.C$o(19),a.clearRect(s.d58(64,"0"),s.d58("0",0,s.M8Y(20)),e.width,e.height)),r=e.width,e.width=1,e.width=r),n=i.chart.canvasShim.childNodes.length>0,(i.useBackgroundCanvas||n)&&(i.useBackgroundCanvas=n,e==i.chart.canvas&&t.clearCanvas(i.chart.backgroundCanvas,i))},t.fillTransparentCanvas=function(e,t,i,a){var r;q.r2m(),r=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.fillStyle=t,q.C$o(0),e.fillRect(q.c6Y("0",0),0,i,a),e.globalCompositeOperation=r},t.convertBoxToPixels=function(e,t,i){var a;return a=e.panels[t],{x0:e.pixelFromTick(i.x0,a.chart),x1:e.pixelFromTick(i.x1,a.chart),y0:i.cy0||0===i.cy0?i.cy0:e.pixelFromValueAdjusted(a,i.x0,i.y0),y1:i.cy1||0===i.cy1?i.cy1:e.pixelFromValueAdjusted(a,i.x1,i.y1)}},t.fillArea=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,m,g;if(t.length){if(n=(r=e.chart.context).globalAlpha,s=arguments[2],o=arguments[3],l=arguments[4],h=0,c=null,a&&"object"==typeof a&&(s=a.color,o=a.opacity,h=a.tension,l=a.panelName,c=a.yAxis),o||0===o||(o=.2),"auto"==s&&(s=e.defaultColor),r.globalAlpha=o,s&&(r.fillStyle=s),u=Number.MAX_VALUE,q.C$o(21),d=q.d58(u,"1"),(p=e.panels[l])&&(d=(c||p.yAxis).top,u=(c||p.yAxis).bottom,r.save(),r.beginPath(),r.rect(p.left,d,p.width,u-d),r.clip()),r.beginPath(),h){for(g=[],m=0;m<t.length-2;m++)g.push(t[m][0],t[m][1]);for(i.plotSpline(g,h,r),m=t.length-2;m<t.length;m++)r.lineTo(Math.round(t[m][0]),Math.round(t[m][1]))}else for(r.moveTo(t[0][0],t[0][1]),m=1;m<t.length;m++)r.lineTo(t[m][0],t[m][1]);r.closePath(),r.fill(),p&&r.restore(),r.globalAlpha=n}},t.prepareChannelFill=function(e,i){var a,r,n,s,o,l;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),a=e.panels[i.panelName],e.chart.context.strokeStyle,r={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},n=t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{},yAxis:a.yAxis}),s=e.plotDataSegmentAsLine(i.topBand,a,n),o=e.plotDataSegmentAsLine(i.bottomBand,a,n),i.noDraw=r.noDraw,i.gapDisplayStyle=r.gapDisplayStyle,l=[];for(var h=0;h<s.points.length;h+=2)l.push([s.points[h],s.points[h+1]]);for(var c=o.points.length-1;c>=0;c-=2)l.push([o.points[c-1],o.points[c]]);t.fillArea(e,l,i)},t.preparePeakValleyFill=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O=q;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),r=(a=e.panels[i.panelName]).yAxis,(n=e.chart.context).strokeStyle,s={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},o=e.plotDataSegmentAsLine(i.band,a,t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{}})),i.noDraw=s.noDraw,i.gapDisplayStyle=s.gapDisplayStyle,l=i.threshold,h=i.direction,c=i.reverse,u=i.gapDisplayStyle,i.yAxis&&(r=i.yAxis),O.r2m(),d=-Number.MAX_VALUE,p=Number.MAX_VALUE,m=c?d:p,(l||0===l)&&(m=e.pixelFromPrice(l,a,r)),g=[],f=o.points.length;for(var Y=0;Y<f;Y+=2)y=o.points[Y],O.M8Y(22),v=o.points[O.d58(1,Y)],i.roundOffEdges&&(0===Y?y=Math.floor(y):Y+2==f&&(y=Math.ceil(y))),isNaN(v)||(v>m&&h>0||v<m&&h<0||(g.push([y,v]),d=Math.max(v,d),p=Math.min(v,p)),Y<f-3&&(O.C$o(22),x=o.points[O.d58(2,Y)],O.C$o(22),b=o.points[O.d58(3,Y)],(v<m&&b>m||v>m&&b<m)&&(O.M8Y(23),y+=O.c6Y(x,v,v,m,b,y),g.push([y,m]))));if(f=g.length){if(C=i.edgeParameters,i.edgeHighlight){C.lineWidth>100&&(C.lineWidth=1),n.save(),n.beginPath();for(var R=0;R<f-1;R++)if(S="se",S+="gm",S+="en",S+="t",w=g[R],O.M8Y(22),D=g[O.d58(1,R)],w[1]!=m||D[1]!=m){if(w[0]==D[0]&&e.layout.candleWidth>=1){if(w[1]==m&&g[R-1]&&g[R-1][1]==m)continue;if(D[1]==m&&g[R+2]&&g[R+2][1]==m)continue}e.plotLine(t.extend({x0:w[0],x1:D[0],y0:w[1],y1:D[1],color:i.edgeHighlight,type:S,context:n,confineToPanel:a,deferStroke:!0},C))}n.stroke(),n.restore()}if(l||0===l||(r.flipped&&(c=!c),m=c?Math.min(p,r.top):Math.max(d,r.bottom)),g.push([g[f-1][0],m],[g[0][0],m]),(k=i.opacity)||0===k||(i.opacity=.3),t.fillArea(e,g,i),u&&u.color&&u.fillMountain&&!i.tension&&!t.isTransparent(u.color)&&!t.isTransparent(i.color)){if(n.save(),n.fillStyle instanceof CanvasGradient)M=t.colorToHex(u.color),O.M8Y(19),(T=n.createLinearGradient(O.c6Y(32,"0"),1===h?a.top:a.bottom,0,m)).addColorStop(0,t.hexToRgba(M,60)),T.addColorStop(1,t.hexToRgba(M,10)),n.fillStyle=T;else{A=210540913,O.M8Y(0),_=-O.d58("786904475",0),P=2;for(var $=1;O.q2D($.toString(),$.toString().length,25273)!==A;$++)n.fillStyle=u.color,P+=2;O.O$R(P.toString(),P.toString().length,48196)!==_&&(n.fillStyle=u.color),n.fillStyle=u.color}for(F=[],L={opacity:i.opacity,panelName:i.panelName},n.beginPath(),Y=0;Y<o.gapAreas.length;Y++)N=(E=o.gapAreas[Y]).start,H=E.end,I=E.threshold,N?(O.M8Y(19),F=[[N[O.d58(32,"0")],N[1]],[N[0],I]]):F.push([H[0],I],[H[0],i.step?F[0][1]:H[1]]),4==F.length&&(t.fillArea(e,F,L),j=t.extend({x1:F[3][0],y0:F[0][1],type:"segment",deferStroke:!0,context:n,confineToPanel:a},u),i.step?(e.plotLine(t.extend({x0:F[0][0],y1:F[0][1]},j)),e.plotLine(t.extend({x0:F[3][0],y1:F[3][1]},j))):e.plotLine(t.extend({x0:F[0][0],y1:F[3][1]},j)));n.stroke(),n.restore()}i.opacity=k}},t.fillIntersecting=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y;r="x",r+="o",r+="r",(!a||a instanceof Array)&&(a=arguments[3]),q.J8h(),n=a.topBand,s=a.bottomBand,o=a.topSubBand,l=a.bottomSubBand,h=a.topColor,c=a.bottomColor,(u=i).panel&&(u.outputs&&u.outputMap&&(h||(h=u.outputs[u.outputMap[n]]),c||(c=u.outputs[u.outputMap[s]])),u=u.panel),u=e.panels[u],p=(d=e.chart.context).canvas,(m=e.scratchContext)||(m=e.scratchContext=p.cloneNode(!0).getContext("2d")),(g=m.canvas).height=p.height,g.width=p.width,g.context=m,t.clearCanvas(g,e),f=.3,a.opacity&&(f=a.opacity),m.globalCompositeOperation=r,e.chart.context=m,y={band:n,subField:o,color:h,opacity:1,panelName:u.name,yAxis:a.topAxis,skipTransform:a.skipTransform,tension:a.tension,roundOffEdges:!0,step:a.step},t.preparePeakValleyFill(e,y),t.extend(y,{band:s,subField:l,color:c,yAxis:a.bottomAxis}),t.preparePeakValleyFill(e,y),d.save(),d.globalAlpha=f,d.drawImage(g,0,0),d.restore(),e.chart.context=d},t.drawLegendItem=function(e,t,i,a,r){var n,s,o,l=q;r||(l.M8Y(0),r=l.d58("1",0)),n=t[0],s=t[1],(o=e.chart.context).globalAlpha=r,o.fillStyle=a,o.fillRect(n,s,10,10),o.globalAlpha=1,l.M8Y(24),n+=l.d58("2",10),o.fillStyle=e.defaultColor,o.fillText(i,n,s),l.C$o(22);var h=l.d58(5,1);return[n+=o.measureText(i).width+h,s]},t.drawLegend=function(e,i){var a,r,n,s,o,l,h,c,u,d,p;a=i.coordinates,r=e.chart.context,q.J8h(),r.textBaseline="top",n=r.font,e.canvasFont("stx-legend",r),s=i.chart||e.chart,a||(a=s.legend),o=[a.x,a.y],l=e.defaultColor;for(var m=0;m<2;m++)for(var g in i.legendColorMap)if((!(h=i.legendColorMap[g]).isBase||!m&&!i.noBase)&&(h.isBase||m)){if(h.color instanceof Array){for(c=(u=h.color).length-1;c>=0;c--)t.isTransparent(u[c])&&u.splice(c,1);if(u.length>1){for(d=r.createLinearGradient(o[0],o[1],o[0]+10,o[1]),c=0;c<u.length;c++)d.addColorStop(c/(u.length-1),u[c]);l=d}else l=u.length>0?u[0]:e.getCanvasColor("stx_line_chart")}else l=h.color?h.color:null;if(l){if(p=g,h.display&&(p=h.display),p||(p=s.symbolDisplay?s.symbolDisplay:s.symbol),o[0]+r.measureText(p).width>s.panel.right){q.M8Y(25);var f=q.c6Y(18,23,11);o=[a.x,a.y+r.measureText("M").width+f]}o=t.drawLegendItem(e,o,p,l,h.opacity)}}r.font=n}},h=e=>{var t,i=q;(t=e.CIQ).colorsEqual=function(e,i){var a,r,n,s,o;return"rgb","a(0,0,0,0)",e==i||(!e&&!i||!(!e||!i)&&("transparent"==e&&(e="rgba(0,0,0,0)"),"transparent"==i&&(i="rgba(0,0,0,0)"),a=/^rgba\(.*,(.+)\)/,r=e.match(a),n=i.match(a),(r=r?parseFloat(r[1]):1)==(n=n?parseFloat(n[1]):1)&&(s=t.colorToHex(e),o=t.colorToHex(i),s.toLowerCase()==o.toLowerCase())))},i.J8h(),t.colorToHex=function(e){var a,r,n,s,o,l,h;if("transparen","t",t.colorToHexMapping||(t.colorToHexMapping={}),e&&"transparent"!=e||(e="#000000"),t.colorToHexMapping[e])return t.colorToHexMapping[e];if("#"===e.substr(0,1)){if(4==e.length){i.M8Y(26);var c=i.d58(3,5,3);i.M8Y(0);var u=i.c6Y(20,18);i.M8Y(22);var d=i.d58(1,0);i.C$o(0);var p=i.c6Y(4,3);e=t.colorToHexMapping[e]="#"+Array(3).join(e.substr(1,c))+Array(3).join(e.substr(u,d))+Array(3).join(e.substr(3,p))}return e}if((a=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(e))||(a=/(.*?)rgba\((\d+), ?(\d+), ?(\d+),.*\)/.exec(e)),!a)return r=function(e){var i,r;if("col","or","undefined"==typeof document)return"#000000";(i=document.querySelector(".ciq_color_converter"))||("n","one",(i=document.createElement("textarea")).className="ciq_color_converter",i.style.display="none",document.body.appendChild(i));if(i.style.color="#000000",i.style.color=e,r=getComputedStyle(i).getPropertyValue("color"),a=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(r))return t.colorToHex(r);if("#"===r.substr(0,1))return r;return e}(e),t.colorToHexMapping[e]=r,r;n=parseFloat(a[2]),s=parseFloat(a[3]),o=parseFloat(a[4]),i.M8Y(27);for(var m=(l=i.d58(o,8,s,n,16).toString(16)).length;m<6;m++)i.M8Y(22),l=i.d58(l,"0");return h=a[1]+"#"+l,t.colorToHexMapping[e]=h,h},t.hexToRgba=function(e,a){var r,n,s,o,l;if("r","g","b","a",e&&"transparent"!=e||(e="rgba(0,0,0,0)"),"rgba"===e.substr(0,4)){"r","g","ba","(",n=(r=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(e))[5],(a||0===a)&&(n=a),n>1&&(i.M8Y(28),n=i.c6Y("100",n)),i.M8Y(29);var h=i.c6Y(6,11,6,104);i.C$o(30);i.c6Y(14,87800,83396);i.M8Y(0);var c=i.d58(24780,20650);i.M8Y(22);var u=i.d58(19,1091);i.M8Y(22);var d=i.c6Y(3,0);i.M8Y(25);var p=i.c6Y(0,4,5);i.C$o(0);var m=i.d58(18,14);i.C$o(30);var g=i.d58(7,5450,4353);i.C$o(31);var f=i.c6Y(9021,16,135643,17,19);i.M8Y(30);var y=i.d58(2,5436,14);i.M8Y(32);i.d58(7,10,39e3,2727274,18);i.C$o(33);var v=i.d58(2177,2177,2160,1,5);i.M8Y(22);var x=i.c6Y(6,566);i.M8Y(16);var b=i.c6Y(2,7538,3,15090);i.C$o(34);var C=i.c6Y(691,11049,1,17);i.M8Y(35);var S=i.d58(311730,8,5,10,7993);i.C$o(36);i.d58(9079,17,9084,154428);i.C$o(37);i.c6Y(2,3,3,205,0);return"rgba("+r[h]+(994.28!==c?",":u)+r[d]+("11"*p==8779?153.5:",")+r[m]+(233.06>g?f:y>=v?",":x)+n+(!(b>C)||(499.95===S||")"))}return"rgb"===e.substr(0,3)&&(e=t.colorToHex(e)),a||0===a||(i.M8Y(38),a=i.d58("100",1)),a<=1&&(i.M8Y(38),a=i.c6Y(a,100)),e=e.replace("#",""),s=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16),isNaN(s)||isNaN(o)||isNaN(l)?(console.log("CIQ.hexToRgba: invalid hex :",e),null):(i.C$o(39),i.d58(",","rgba(",o,100,l,a,s,")",",",","))},t.convertToNativeColor=function(e){var t,i;return(t=document.createElement("DIV")).style.color=e,t.style.display="none",document.body.appendChild(t),i=getComputedStyle(t).color,document.body.removeChild(t),i},t.isTransparent=function(e){var t;return i.r2m(),!!e&&("transparent"==e||null!==(t=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(e))&&0===parseFloat(t[5]))},t.hsv=function(e){var a,r,n,s,o,l,h,c,u,d,p;i.M8Y(38),a=-i.c6Y("280419664",1),i.M8Y(0),r=i.d58("2",0);for(var m=1;i.q2D(m.toString(),m.toString().length,62243)!==a;m++)n=t.colorToHex(e),r+=2;887083023!==i.q2D(r.toString(),r.toString().length,83685)&&(n=t.colorToHex(e)),"#"===(n=t.colorToHex(e)).substr(0,1)&&(n=n.slice(1));for(var g=n.length;g<6;g++)i.M8Y(22),n=i.c6Y(n,"0");return s=parseInt(n.slice(0,2),16),o=parseInt(n.slice(2,4),16),l=parseInt(n.slice(4,6),16),i.C$o(20),i.d58("0",0),0,0,s=parseInt((""+s).replace(/\s/g,""),10),o=parseInt((""+o).replace(/\s/g,""),10),l=parseInt((""+l).replace(/\s/g,""),10),null===s||null===o||null===l||isNaN(s)||isNaN(o)||isNaN(l)?(console.log("CIQ.hsv: invalid color :",e),null):s<0||o<0||l<0||s>255||o>255||l>255?null:(i.M8Y(40),s=i.d58(255,s),i.M8Y(40),o=i.d58(255,o),i.C$o(40),l=i.d58(255,l),i.J8h(),(c=Math.min(s,Math.min(o,l)))==(u=Math.max(s,Math.max(o,l)))?[0,0,c]:(d=s==c?o-l:l==c?s-o:l-s,p=s==c?3:l==c?1:5,i.C$o(41),h=i.c6Y(d,60,u,p,c),i.C$o(42),[h,i.d58(u,c,u),u]))},t.hsl=function(e){var a,r,n,s,o,l,h,c,u,d;"#"===(a=t.colorToHex(e)).substr(0,1)&&(a=a.slice(1));for(var p=a.length;p<6;p++)i.C$o(22),a=i.d58(a,"0");if(r=parseInt(a.slice(0,2),16),n=parseInt(a.slice(2,4),16),s=parseInt(a.slice(4,6),16),r/=255,n/=255,s/=255,o=Math.max(r,n,s),l=Math.min(r,n,s),i.C$o(43),u=i.c6Y(2,o,l),o==l)h=c=0;else{switch(i.M8Y(0),d=i.c6Y(o,l),c=u>.5?d/(2-o-l):d/(o+l),o){case r:i.M8Y(44),h=i.c6Y(s,n,n<s?6:0,d);break;case n:i.C$o(44),h=i.d58(r,s,2,d);break;case s:i.C$o(45),h=i.c6Y("4",r,0,n,d)}h/=6}return[h,c,u]},t.hslToRgb=function(e,t,a){var r,n,s,o,l,h,c;r=2;for(var u=1;-1379125776!==i.O$R(u.toString(),u.toString().length,9138);u++)r+=2;return i.q2D(r.toString(),r.toString().length,17256),0===t?n=s=o=a:(l=function(e,t,a){return i.J8h(),a<0&&(i.M8Y(46),a+=i.c6Y("1",0)),a>1&&(a-=1),a<1/6?(i.M8Y(47),i.d58(t,6,a,e,e)):a<.5?t:a<2/3?(i.M8Y(48),i.c6Y(6,e,3,e,a,2,t)):e},h=a<.5?a*(1+t):a+t-a*t,i.M8Y(49),c=i.d58(a,h,"2"),i.M8Y(50),n=l(c,h,i.d58(0,1,"3",e)),s=l(c,h,e),i.C$o(51),o=l(c,h,i.d58("3",1,1,e))),i.C$o(38),[Math.round(i.c6Y(n,255)),Math.round(i.c6Y("255",s,64,i.M8Y(52))),Math.round(i.d58(o,255,i.M8Y(38)))]},t.chooseForegroundColor=function(e){var i;return i=t.colorToHex(e),.2126*parseInt(i.slice(1,3),16)+.7152*parseInt(i.slice(3,5),16)+.0722*parseInt(i.slice(5,7),16)<100?"#FFFFFF":"#000000"},t.borderPatternToArray=function(e,t){return'"; defaulting to',i.J8h(),' "solid"',"d","a","she","d",t?t instanceof Array?t:"dotted"==t?[e,e]:"dashed"==t?(i.M8Y(38),[i.d58(e,5),i.c6Y(e,5)]):("solid"!=t&&"none"!=t&&(i.C$o(53),console.log(i.c6Y('Unsupported pattern "',t,'"; defaulting to "solid"'))),[]):[]},t.getBackgroundColor=function(e){var i,a;for(i=null;!i||t.isTransparent(i);){if(!(a=getComputedStyle(e)))return;if(i=a.backgroundColor,t.isTransparent(i)&&(i="transparent"),!(e=e.parentNode)||!e.tagName)break}return i&&"transparent"!=i||(i="#FFFFFF"),i}},c=e=>{var t,i,a=q;t=e.CIQ,i=e.timezoneJS,t.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],t.monthAbv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.MILLISECOND=1,t.SECOND=1e3,a.C$o(22);var r=a.d58(2,58);t.MINUTE=r*t.SECOND,a.M8Y(0);var n=a.c6Y(1020,960);t.HOUR=n*t.MINUTE,t.DAY=24*t.HOUR,a.C$o(8);var s=a.d58(105,14,5);t.WEEK=s*t.DAY,a.C$o(7);var o=a.d58(4,27,8);t.MONTH=o*t.DAY,a.M8Y(54);var l=a.c6Y(23,5,3,254);t.YEAR=l*t.DAY,a.C$o(0);var h=a.d58(19,9);t.DECADE=h*t.YEAR-7*t.DAY,t.yyyymmddhhmmssmmmrx=new RegExp("\\d{17}"),t.strToDateTime=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(!e||e.getFullYear)return e;if(i=[],12==e.length||14==e.length){r=parseFloat(e.substring(0,4)),a.M8Y(55);var v=a.d58(15,11,7,2,3);a.C$o(0);var x=a.c6Y(10,9);return n=parseFloat(e.substring(4,"6"|v))-x,s=parseFloat(e.substring(6,8)),o=parseFloat(e.substring(8,10)),l=parseFloat(e.substring(10,12)),h=parseFloat(e.substring(12,14))||0,new Date(r,n,s,o,l,h,0)}if(t.yyyymmddhhmmssmmmrx.test(e)){r=parseFloat(e.substring(0,4)),a.C$o(56);var b=a.d58(15,9,310,15,20);a.M8Y(0);var C=a.d58(30,24);a.M8Y(57);var S=a.c6Y(14,7,7,9,3);return n=parseFloat(e.substring(b,C))-S,s=parseFloat(e.substring(6,8)),o=parseFloat(e.substring(8,10)),l=parseFloat(e.substring(10,12)),h=parseFloat(e.substring(12,14)),c=parseFloat(e.substring(14,17)),new Date(r,n,s,o,l,h,c)}if(u=[e],-1!=(d=e.indexOf("T"))){if(-1!=(p=e.substring(d)).indexOf("Z")||-1!=p.indexOf("-")||-1!=p.indexOf("+"))return new Date(e);u=e.split("T")}else-1!=e.indexOf(" ")&&(u=e.split(" "));if(-1!=u[0].indexOf("/"))i=u[0].split("/");else{if(-1==u[0].indexOf("-"))return t.strToDate(e);i=u[0].split("-")}if(m=parseFloat(i[2],10),i[0]&&4==i[0].length&&(m=parseFloat(i[0],10),i[0]=i[1],i[1]=i[2]),a.r2m(),u.length>1){if(g=u[2],u=u[1].split(":"),g)if("1","2","12"==u[0]&&"AM"==g.toUpperCase())u[0]=0;else if("12"!=u[0]&&"PM"==g.toUpperCase()){a.C$o(0);var w=a.c6Y(24,12);u[0]=parseInt(u[0],10)+w}f=0,y=0,3==u.length&&(-1==u[2].indexOf(".")?f=parseInt(u[2],10):3==(f=u[2].split("."))[1].length&&(y=f[1],f=f[0])),a.M8Y(58);var D=a.d58(4,14,1,7,12);return new Date(m,i[0]-D,i[1],u[0],u[1],f,y)}a.C$o(59);var k=a.c6Y(125,5,12,18);return new Date(m,i[0]-k,i[1],0,0,0,0)},t.strToDate=function(e){var t,i;if(-1!=e.indexOf("/"))t=e.split("/");else{if(-1==e.indexOf("-")){if(e.length>=8){a.M8Y(60);var r=a.d58(103,98,89,7,5);a.M8Y(61);var n=a.d58(4,12,2,12,10);return new Date(parseFloat(e.substring(0,4)),parseFloat(e.substring(4,"6">>r))-n,parseFloat(e.substring(6,8)))}return new Date}t=e.split("-")}if(t.length<3)return new Date;-1!=t[2].indexOf(" ")?t[2]=t[2].substring(0,t[2].indexOf(" ")):-1!=t[2].indexOf("T")&&(t[2]=t[2].substring(0,t[2].indexOf("T"))),(i=parseFloat(t[2],10))<20&&(i+=2e3),4==t[0].length&&(i=parseFloat(t[0],10),t[0]=t[1],t[1]=t[2]),a.C$o(36);var s=a.c6Y(25,14,46,92);a.C$o(62);var o=a.d58(18,150,7,1,8);return new Date(i,t["0">>s]-o,t[1])},t.dateToStr=function(e,t){var i,r,n,s;return"S","SS","s","s","H","H","d","d","YY","Y","Y",r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return a.J8h(),("0".repeat(t)+e).slice(-t)},n=(e,i)=>(a.J8h(),t=t.replace(e,i)),s=(e,t)=>(a.r2m(),e>t?e-t:e),(i=e=>t.includes(e))("YYYY")&&n(/YYYY/g,e.getFullYear()),i("MM")&&n(/MM/g,r(e.getMonth()+1)),i("dd")&&n(/dd/g,r(e.getDate())),i("HH")&&n(/HH/g,r(e.getHours())),i("hh")&&n(/hh/g,r(s(e.getHours()||12,12))),i("mm")&&n(/mm/g,r(e.getMinutes())),i("ss")&&n(/ss/g,r(e.getSeconds())),i("SSS")&&n(/SSS/g,r(e.getMilliseconds(),3)),a.r2m(),t},t.mmddyyyy=function(e){var i,r;"string"==typeof e&&(e=t.strToDate(e)),a.C$o(10);var n=a.c6Y(25,6,18);(i=e.getMonth()+n)<10&&(a.C$o(22),i=a.c6Y(i,"0")),(r=e.getDate())<10&&(a.M8Y(22),r=a.c6Y(r,"0")),a.M8Y(63);a.c6Y(2076,4,3,1558,6232);a.M8Y(7);var s=a.d58(3,5662,21);a.C$o(16);a.d58(9,6053,15,84895);a.M8Y(0);a.c6Y(24390,16260);a.C$o(22);var o=a.c6Y(9,1251);a.C$o(7);a.d58(15,283,5102);a.C$o(55);var l=a.c6Y(6054,13,6071,10,2018);a.C$o(0);a.c6Y(1825,5);a.M8Y(64);var h=a.d58(124770,8317,10,12477);a.C$o(0);var c=a.c6Y(71060,64600);return i+(!(773.5>=s)&&"/")+r+(o<l?"/":857.25!==h&&c)+e.getFullYear()},t.yyyymmdd=function(e){var t,i;a.M8Y(34),a.J8h();var r=a.c6Y(6,27,3,14);return(t=e.getMonth()+r)<10&&(a.C$o(22),t=a.c6Y(t,"0")),(i=e.getDate())<10&&(a.M8Y(22),i=a.d58(i,"0")),e.getFullYear()+"-"+t+"-"+i},t.hhmm=function(e){var t,i;return a.r2m(),(t=e.getHours())<10&&(a.M8Y(22),t=a.d58(t,"0")),(i=e.getMinutes())<10&&(a.M8Y(22),i=a.d58(i,"0")),a.C$o(53),a.c6Y(t,":",i)},t.hhmmss=function(e){var i;(i=e.getSeconds())<10&&(a.C$o(22),i=a.c6Y(i,"0")),a.M8Y(7);a.c6Y(17,8343,14);a.r2m(),a.M8Y(22);var r=a.c6Y(20,442);a.C$o(65);a.d58(15,1,16,0);return t.hhmm(e)+(6518!==r?":":"k")+i},t.yyyymmddhhmm=function(e){return a.M8Y(46),a.J8h(),t.yyyymmddhhmmssmmm(e).substr(0,a.d58("12",64))},t.yyyymmddhhmmssmmm=function(e){var t,i,r,n,s,o;a.J8h(),a.C$o(66);var l=a.d58(0,15,13,11,1);return(t=e.getMonth()+l)<10&&(a.M8Y(22),t=a.c6Y(t,"0")),(i=e.getDate())<10&&(a.C$o(22),i=a.c6Y(i,"0")),(r=e.getHours())<10&&(a.M8Y(22),r=a.d58(r,"0")),(n=e.getMinutes())<10&&(a.M8Y(22),n=a.d58(n,"0")),(s=e.getSeconds())<10&&(a.M8Y(22),s=a.d58(s,"0")),(o=e.getMilliseconds())<10?(a.M8Y(22),o=a.d58(o,"00")):o<100&&(a.M8Y(22),o=a.d58(o,"0")),""+e.getFullYear()+t+i+r+n+s+o},t.friendlyDate=function(e){return t.dateToStr(e,"YYYY/MM/dd HH:mm")},t.mmddhhmm=function(e){var i,r,n,s,o,l,h;if("00","0","0","0","0","0","0",i=t.strToDateTime(e),a.J8h(),(r=i.getMonth()+1)<10&&(a.C$o(22),r=a.c6Y(r,"0")),(n=i.getDate())<10&&(a.M8Y(22),n=a.d58(n,"0")),(s=i.getHours())<10&&(a.C$o(22),s=a.d58(s,"0")),(o=i.getMinutes())<10&&(a.M8Y(22),o=a.d58(o,"0")),(l=i.getSeconds())<10&&(a.C$o(22),l=a.d58(l,"0")),(h=i.getMilliseconds())<10?(a.M8Y(22),h=a.d58(h,"00")):h<100&&(a.C$o(22),h=a.c6Y(h,"0")),"00"==s&&"00"==o&&"00"==l&&"000"==h){a.M8Y(7);a.c6Y(15,8778,9);a.C$o(30);a.c6Y(8,164220,154552);a.C$o(67);var c=a.c6Y(5890,5890,589);a.M8Y(0);a.c6Y(11115,10530);a.M8Y(68);var u=a.d58(1970,2,1978);return a.M8Y(69),r+(388.51!=c&&"-")+n+(u>a.d58(4,2100,10564,15)?"-":"I")+i.getFullYear()}return"00"==l&&"000"==h?(a.C$o(70),a.d58(":",n," ",s,"-",r,o)):"000"==h?(a.C$o(71),a.d58(r,":",n,s,l,":"," ","-",o)):(a.M8Y(72),a.d58(s,":"," ",":",l,o,":",h,n,r,"-"))},t.getYearDay=function(e){var t,i,r,n;return a.J8h(),(t=e)||(t=new Date),a.M8Y(19),t.setHours(0,a.c6Y(96,"0"),0,0),a.C$o(0),i=new Date(t.getFullYear(),a.c6Y("0",0),a.d58(0,"0",a.M8Y(19))),a.C$o(0),r=a.d58(t,i),a.M8Y(73),n=a.d58(60,1e3,60,24),a.C$o(40),Math.round(a.c6Y(n,r))},t.getETDateTime=function(){var e;return e=new Date,t.convertTimeZone(new Date(e.getTime()+6e4*e.getTimezoneOffset()),"UTC","America/New_York")},t.fromET=function(e){var t,i,r;t=new Date,a.C$o(74),i=a.c6Y("4",0),a.r2m(),(t.getMonth()<2||2==t.getMonth()&&t.getDate()<11||t.getMonth()>10||10==t.getMonth()&&t.getDate()>=4)&&(i=5),a.C$o(8);var n=a.d58(468e5,225e4,8);return r=e.getTime()+n*i,new Date(r)},t.monthAsDisplay=function(e,i,a){return i?a&&a.monthLetters?a.monthLetters[e]:t.monthLetters[e]:a&&a.monthAbv?a.monthAbv[e]:t.monthAbv[e]},t.timeAsDisplay=function(e,i,r){var n,s,o,l,h;return(n=i?i.internationalizer:null)?r==t.SECOND?n.hourMinuteSecond.format(e):r==t.MILLISECOND?n.hourMinuteSecond.format(e)+"."+e.getMilliseconds():n.hourMinute.format(e):((s=e.getMinutes())<10&&(a.M8Y(22),s=a.c6Y(s,"0")),o=e.getHours()+":"+s,a.J8h(),l="",r<=t.SECOND&&((l=e.getSeconds())<10&&(a.C$o(22),l=a.c6Y(l,"0")),a.M8Y(22),o+=a.d58(l,":")),r==t.MILLISECOND&&((h=e.getMilliseconds())<10?(a.C$o(22),h=a.d58(h,"00")):h<100&&(a.C$o(22),h=a.d58(h,"0")),a.M8Y(22),o+=a.c6Y(h,".")),o)},t.displayableDate=function(e,i,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v;function x(e){return e<10?(a.C$o(22),a.d58(e,"0")):e}if("millisec","ond",s="",a.r2m(),o=e.layout.interval,l=t.ChartEngine.isDailyInterval(o),h=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.SECOND||"second"==e.layout.timeUnit,c=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.MILLISECOND||"millisecond"==e.layout.timeUnit,i.xAxis.formatter)s=i.xAxis.formatter(r);else if(e.internationalizer)if(s=e.internationalizer.monthDay.format(r),h||c){a.C$o(75);var b=a.d58(13,52012,4312,10,12);a.C$o(25);var C=a.d58(32320,28296,16);a.M8Y(22);var S=a.c6Y(1587,793);a.C$o(67);var w=a.c6Y(4253,4240,4253);a.M8Y(68);var D=a.d58(2095,2,2103);a.C$o(25);var k=a.d58(383,7,4);if(s+=(b>C?S!==w?" ":D:k)+e.internationalizer.hourMinuteSecond.format(r),c){a.M8Y(22);a.d58(17,9272);a.C$o(68),s+=(1990!=("7588"|a.c6Y(14,3,6))?".":"s")+r.getMilliseconds()}}else if(l){-1253199454,-156823918,u=2;for(var M=1;-1253199454!==a.O$R(M.toString(),M.toString().length,85259);M++)s="month"==o?e.internationalizer.yearMonth.format(r):e.internationalizer.yearMonthDay.format(r),u+=2;-156823918!==a.O$R(u.toString(),u.toString().length,17170)&&(s=""!=o?e.internationalizer.yearMonth.format(r):e.internationalizer.yearMonthDay.format(r))}else{n&&(s=e.internationalizer.yearMonthDay.format(r)),a.M8Y(76);var T=a.d58(10030,10043,1002,13);a.M8Y(77);var A=a.c6Y(94864,19,15,6775);a.C$o(22);a.c6Y(17,245);a.C$o(0);var _=a.c6Y(1722,2);a.M8Y(78);a.d58(13,2,7403,9);a.M8Y(67);var P=a.d58(476,3572,2);a.M8Y(78);a.c6Y(6,18,5368,10);a.M8Y(79);var F=a.d58(28708,16,20,30498);s+=(T===A?"F":_>7163?94.2>P||F:" ")+e.internationalizer.hourMinute.format(r)}else if(d=x(r.getMonth()+1),p=x(r.getDate()),m=x(r.getHours()),g=x(r.getMinutes()),l)"m","o","nth",s="month"==o?d+"/":d+"/"+p+"/",s+=r.getFullYear();else{if(a.C$o(53),f=a.c6Y(d,"/",p),n){a.C$o(16);var L=a.c6Y(6,9,18,269);a.M8Y(0);a.c6Y(2595,1730);a.C$o(64);var E=a.d58(4055,3249,5,1);a.M8Y(80);a.d58(26,16,62,9,11);f+=("5530"*L!==E?"/":"b")+r.getFullYear()}a.C$o(80),s=a.c6Y(g,m,f,":"," "),(h||c)&&(y=x(r.getSeconds()),a.M8Y(22),s+=a.c6Y(y,":"),c&&((v=x(r.getMilliseconds()))<100&&(a.M8Y(22),v=a.c6Y(v,"0")),a.C$o(22),s+=a.d58(v,":")))}return s},t.convertTimeZone=function(e,t,a){var r;return i.Date?((r=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t)).setTimezone(a),r):e},t.convertToLocalTime=function(e,t){var a,r,n;return i.Date?(a=e.getSeconds(),r=e.getMilliseconds(),n=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),t),new Date(n.getTime()+1e3*a+r)):e}},u=e=>{var t,i,a,r=q;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,e.SplinePlotter,i=function(e,t){var a;if(!t)return document.getElementById(e);if(t.id==e)return t;if(!t.hasChildNodes)return null;for(var r=0;r<t.childNodes.length;r++)if(a=i(e,t.childNodes[r]))return a;return null},e.$$=i,a=function(e,t){return t||(t=document),t.querySelectorAll(e)[0]},e.$$$=a,t.wheelEvent=function(){if("whe","el","d","i","v","undef","in","ed","undefined"!=typeof document)return t.isIE||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}(),t.newChild=function(e,t,i,a){var n;return n=document.createElement(t),r.J8h(),i&&(n.className=i),e.appendChild(n),a&&(n.innerHTML=a),n},t.innerHTML=function(e,t){r.r2m(),window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction((function(){e.innerHTML=t})):e.innerHTML=t},t.focus=function(e,i){var a;t.isSurface||i?(a=0,isNaN(parseInt(i,10))||(a=i),setTimeout((function(){r.J8h(),e.focus()}),a)):e.focus()},t.blur=function(e){e||(e=document.activeElement),e&&e.blur(),window.focus()},t.findNodesByText=function(e,i){var a,r;if(e.innerHTML==i)return[e];a=[];for(var n=0;n<e.childNodes.length;n++)(r=t.findNodesByText(e.childNodes[n],i))&&(a=a.concat(r));return a.length?a:null},t.hideByText=function(e,i){var a;a=t.findNodesByText(e,i),r.J8h();for(var n=0;n<a.length;n++)a[n].style.display="none"},t.pageHeight=function(){var{innerHeight:e,top:t,parent:i,self:a}=window;if(t!=a)try{e>i.innerHeight&&(e=i.innerHeight)}catch(e){}return r.r2m(),e},r.r2m(),t.pageWidth=function(){var{innerWidth:e,top:t,parent:i,self:a}=window;if(t!=a)try{e>i.innerWidth&&(e=i.innerWidth)}catch(e){}return r.J8h(),e},t.stripPX=function(e){return e?(r.r2m(),"number"==typeof e?e:parseInt(e.substr(0,e.indexOf("p")),10)):0},t.withinElement=function(e,t,i){var a;return!(t<=(a=e.getBoundingClientRect()).left)&&(!(i<=a.top)&&(!(t>=a.left+e.offsetWidth)&&!(i>=a.top+e.offsetHeight)))},t.efficientDOMUpdate=function(e,t,i){return e[t]!==i?(e[t]=i,!0):(r.r2m(),!1)},t.cqvirtual=function(e){var t;if(e)return(t=e.cloneNode(!0)).innerHTML="",t.original=e,t},t.cqrender=function(e){var i;if(e)return e.innerHTML==e.original.innerHTML||(t.removeChildIfNot(e.original,"template"),r.r2m(),(i=Array.from(e.children)).length&&i.forEach((function(t){e.original.appendChild(e.removeChild(t))}))),e.original},t.removeChildIfNot=function(e,t){var i;return r.r2m(),(i=Array.from(e.children)).length&&i.forEach((function(i){t&&i.matches(t)||e.removeChild(i)})),e},t.safeMouseOut=function(e,i){var a,n;e.addEventListener("mouseout",(a=e,n=i,r.J8h(),function(e){r.r2m(),void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),t.withinElement(a,e.pageX,e.pageY)||(a.stxMouseOver=!1,n(e))}))},t.safeMouseOver=function(e,i){var a,n;e.addEventListener("mouseover",(a=e,n=i,function(e){if(void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),t.withinElement(a,e.pageX,e.pageY)){if(a.stxMouseOver)return;a.stxMouseOver=!0,n(e)}})),r.J8h()},t.installTapEvent=function(e,i){var a;r.r2m(),a=function(e){var t,a,n;t=new Event("stxtap",{bubbles:!0,cancelable:!0}),void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),t.pageX=e.pageX,r.M8Y(19),a=-r.c6Y(64,"788278568"),n=2;for(var s=1;-2029794677!==r.O$R(s.toString(),s.toString().length,20029);s++)t.pageY=e.pageY,r.C$o(38),n+=r.d58("2",1);r.q2D(n.toString(),n.toString().length,95613)!==a&&(t.pageY=e.pageY),e.target.dispatchEvent(t),i&&i.stopPropagation&&e.stopPropagation()},t.safeClickTouch(e,a,i)},t.safeClickTouch=function(e,i,a){var n,s,o,l,h,c,u,d,p;function m(e,t){return r.J8h(),function(i){var a,n,s;if(r.J8h(),a=i.clientX?i.clientX:i.pageX,n=i.clientY?i.clientY:i.pageY,t){e.t=(new Date).getTime(),93380431,-656741645,s=2;for(var o=1;93380431!==r.O$R(o.toString(),o.toString().length,35238);o++)e.x=a,s+=2;-656741645!==r.O$R(s.toString(),s.toString().length,63843)&&(e.x=a),e.x=a,e.y=n}else e.x&&Math.pow(e.x-a,2)+Math.pow(e.y-n,2)>16&&(e.t=null)}}a||(a={}),n={},a.allowMultiple||t.clearSafeClickTouches(e),!1!==a.preventUnderlayClick&&(a.preventUnderlayClick=!0),!1!==a.absorbDownEvent&&(a.absorbDownEvent=!0),a.allowAnotherDevice=0,a.registeredClick=!1,(s=e.safeClickTouchEvents)||(s=e.safeClickTouchEvents=[]),o=f("mouseup",a,n),l=f("touchend",a,n),h=f("pointerup",a,n),c=function(e){e.stopPropagation()},u=2;for(var g=1;-1419556650!==r.q2D(g.toString(),g.toString().length,82640);g++)d={},u+=2;function f(e,a,n){return r.J8h(),function(s){var o;if(!t.safeClickTouchEvent){if(!n.t)return;if(o=n.t,n.t=null,o+1e3<(new Date).getTime())return}if(!(a.safety&&a.safety.recentlyDragged||s.which&&s.which>=2||s.button&&s.button>=2)){if(a.preventUnderlayClick)"INPUT"!==s.target.tagName&&s.preventDefault();else{if(a.lastType!=e&&Date.now()<a.allowAnotherDevice)return;a.lastType=e,r.C$o(81);var l=r.d58(16,13e3,16,3327e3);a.allowAnotherDevice=Date.now()+l}i(s)}}}-27149222!==r.O$R(u.toString(),u.toString().length,89913)&&(d={}),d={},t.safeClickTouchEvent?(p=f(t.safeClickTouchEvent,a),e.addEventListener(t.safeClickTouchEvent,p),d[t.safeClickTouchEvent]=p,s.push(d)):"onpointerup"in document&&!t.noPointerEvents?(e.addEventListener("pointerdown",m(n,!0)),e.addEventListener("pointermove",m(n)),e.addEventListener("pointerup",h),d.pointerup=h,a.absorbDownEvent&&(e.addEventListener("pointerdown",c),d.pointerdown=c),s.push(d)):("to","u","ch","move","to","uc","hstart",e.addEventListener("mousedown",m(n,!0)),e.addEventListener("mousemove",m(n)),e.addEventListener("touchstart",m(n,!0)),e.addEventListener("touchmove",m(n)),e.addEventListener("mouseup",o),e.addEventListener("touchend",l),d.mouseup=o,d.touchend=l,a.absorbDownEvent&&("moused","own",e.addEventListener("mousedown",c),d.mousedown=c,e.addEventListener("touchstart",c),d.touchstart=c),s.push(d))},t.clearSafeClickTouches=function(e){var t,i,a;if(r.r2m(),t=e.safeClickTouchEvents){for(var n=0;n<t.length;n++)for(var s in i=t[n])a=i[s],e.removeEventListener(s,a);e.safeClickTouchEvents=null}},t.safeDrag=function(e,i){var a,n,s,o,l,h,c,u,d,p,m,g;function f(e){return function(a){var n,s;d||(d=!0,t.ChartEngine.ignoreTouch=!0,n=function(e){var t,a;e&&e.preventDefault&&e.preventDefault(),g.recentlyDragged=!0,r.C$o(46),t=-r.c6Y("2059865880",64),r.C$o(20),a=r.c6Y("2",0);for(var n=1;r.q2D(n.toString(),n.toString().length,41852)!==t;n++)e.displacementX=h(e)*p,a+=2;-1992592325!==r.O$R(a.toString(),a.toString().length,79583)&&(e.displacementX=h(e)-p),e.displacementY=c(e)-m,i.move(e)},i.move&&document.body.addEventListener(e.move,n),s=function(a){t.ChartEngine.ignoreTouch=!1,i.move&&document.body.removeEventListener(e.move,n),document.body.removeEventListener(e.up,s),r.r2m(),a.displacementX=h(a)-p,a.displacementY=c(a)-m,i.up&&i.up(a),setTimeout((function(){g.recentlyDragged=!1}),50)},document.body.addEventListener(e.up,s),setTimeout((function(){r.J8h(),d=!1}),u),p=h(a),m=c(a),i.down&&i.down(a))}}return a="t",r.J8h(),a+="o",a+="uc",a+="hend",n="p",n+="ointe",n+="r",n+="move",s="po",s+="i",s+="nt",s+="erdown",o="cli",h=(l=function(e,t){return r.J8h(),function(i){if(i.touches){if(i.touches.length>0)return r.C$o(74),i.touches[r.d58("0",0)][e];if(i.changedTouches&&i.changedTouches.length>0)return i.changedTouches[0][e]}return void 0!==i[e]?i[e]:i[t]}})("pageX",o+="entX"),c=l("pageY","clientY"),"function"==typeof i&&(i={down:arguments[1],move:arguments[2],up:arguments[3]}),i=i||{},u=100,d=!1,p=0,m=0,g={recentlyDragged:!1},e.addEventListener("mousedown",f({down:"mousedown",move:"mousemove",up:"mouseup"})),e.addEventListener("pointerdown",f({down:s,move:n,up:"pointerup"})),e.addEventListener("touchstart",f({down:"touchstart",move:"touchmove",up:a}),{passive:!1}),g},t.inputKeyEvents=function(e,t){e.addEventListener("keyup",(function(i){switch(i.keyCode){case 13:t();break;case 27:e.value=""}}),!1)},t.fixScreen=function(){r.C$o(0),window.scrollTo(r.c6Y("0",0),0)},t.setCaretPosition=function(e,i){var a;if(r.J8h(),e.style.zIndex=5e3,e.setSelectionRange){t.focus(e);try{e.setSelectionRange(i,i)}catch(e){}}else e.createTextRange&&((a=e.createTextRange()).collapse(!0),a.moveEnd("character",i),a.moveStart("character",i),a.select())},t.setValueIfNotActive=function(e,t){document.activeElement!=e&&(e.value=t)},t.hideKeyboard=function(e){var t;"INPUT"!=(t=document.activeElement).tagName&&"TEXTAREA"!=t.tagName||(t.blur(),window.focus(),e&&(e===document.body||document.body.contains(e))&&e.focus())},t.smartHover=function(){var e,t,i;if(document&&!document.documentElement.hasAttribute("ciq-last-interaction")){e=!1,document.addEventListener("touchend",(function(i){clearTimeout(t),e=!0,"touch"!=document.documentElement.getAttribute("ciq-last-interaction")&&n("touch"),t=setTimeout((function(){r.J8h(),e=!1}),500)}),!1),document.addEventListener("mouseover",(function(t){r.r2m(),e||n("mouse")}),!1),-1349354765,-69100854,i=2;for(var a=1;-1349354765!==r.O$R(a.toString(),a.toString().length,23643);a++)n(""),i+=2;-69100854!==r.q2D(i.toString(),i.toString().length,91616)&&n("")}function n(e){r.J8h(),document.documentElement.setAttribute("ciq-last-interaction",e)}},t.translatableTextNode=function(e,t,i){var a;return r.J8h(),e.translationCallback?((a=document.createElement("translate")).setAttribute("original",t),a.innerHTML=e.translationCallback(t,i),a):document.createTextNode(t)},t.climbUpDomTree=function(e,t){var i;if(r.r2m(),!(e instanceof HTMLElement))return null;for(i=[];e;)t&&!e.matches(t)||i.push(e),e=e.parentElement;return i},t.guaranteedSize=function(e){var t,i;if(e===document&&(e=window),!e.nodeType)return{width:e.innerWidth,height:e.innerHeight};if(r.J8h(),!e||e.nodeType>1)return{};for(t=e.offsetWidth,i=e.offsetHeight;!t||!i;){if("BODY"===e.tagName||e===window){t||(t=window.innerWidth),i||(i=window.innerHeight);break}e=e.parentElement,t||(t=e.offsetWidth),i||(i=e.offsetHeight)}return{width:t,height:i}},t.trulyVisible=function(e){var i;return"hidd","e","n",!e||"0"!==(i=getComputedStyle(e)).opacity&&("none"!==i.display&&("hidden"!==i.visibility&&(0!==parseInt(i.width,10)&&((0!==parseInt(i.height,10)||"hidden"!=i.overflowY)&&t.trulyVisible(e.parentElement)))))},t.elementDimensions=function(e,t){var i,a,n,s,o;if("w","id",r.J8h(),"t","h",!e||1!==e.nodeType)return{};for(var l in i=getComputedStyle(e),a={width:parseFloat(i.width),height:parseFloat(i.height)},s=["width","height"],n={margin:{},border:{},padding:{}})"B","ottom","Wi","dt","h",o="border"==l?"Width":"",n[l]={width:parseFloat(i[l+"Left"+o])+parseFloat(i[l+"Right"+o]),height:parseFloat(i[l+"Top"+o])+parseFloat(i[l+"Bottom"+o])};return t&&t.margin&&s.forEach((function(e){a[e]+=n.margin[e]})),t&&"content-box"===i.boxSizing?(t.padding&&s.forEach((function(e){a[e]+=n.padding[e]})),t.border&&s.forEach((function(e){a[e]+=n.border[e]}))):"border-box"===i.boxSizing&&(t&&t.padding||s.forEach((function(e){r.r2m(),a[e]-=n.padding[e]})),t&&t.border||s.forEach((function(e){r.J8h(),a[e]-=n.border[e]}))),a},t.resizeObserver=function(e,t,i,a){return a?"undefined"!=typeof ResizeObserver?i||(i=new ResizeObserver(t)).observe(e):(i&&clearInterval(i),i=setInterval(t,a)):(i&&("undefined"!=typeof ResizeObserver?i.disconnect():clearInterval(i)),i=null),i},t.getLines=function(e,t,i){var a,n,s,o,l;a=t.split(" "),n=[],r.r2m(),s="",o=!1;for(var h=0;h<a.length;h++)if(l=a[h],e.measureText(s+l).width<i?(o&&(s+=" "),o=!0,s+=l):(n.push(s),s=l),h===a.length-1){n.push(s);break}return n},t.alert=function(e){var t;r.r2m(),t=2;for(var i=1;-1923671589!==r.O$R(i.toString(),i.toString().length,27188);i++)"undefined"!=typeof window?window.alert(e):console.log(e),t+=2;-2106280244!==r.O$R(t.toString(),t.toString().length,61558)&&(""===-window?window.alert(e):console.log(e))};try{"undefin","e","d","undefined"!=typeof localStorage&&(t.localStorage=localStorage)}catch(e){}t.localStorage||(t.localStorage={items:{},getItem:function(e){return r.r2m(),t.localStorage.items[e]||null},setItem:function(e,i){r.r2m(),t.localStorage.items[e]=i},removeItem:function(e){delete t.localStorage.items[e]}}),t.privateBrowsingAlert=!1,t.localStorageSetItem=function(e,i){try{t.localStorage.setItem(e,i)}catch(e){t.privateBrowsingAlert||(t.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),t.privateBrowsingAlert=!0)}}},d=e=>{var t,i,a=q;a.r2m(),(t=e.CIQ).ChartEngine=function(e){var r;for(var n in e?"undefined"!=typeof HTMLDivElement&&e.constructor==HTMLDivElement&&(e={container:e}):e={container:null},i)this[n]=t.clone(t.ChartEngine.prototype[n]);this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,this.grabStartY=0,this.grabStartScrollX=0,this.grabStartScrollY=0,this.swipe={},this.grabStartCandleWidth=0,a.M8Y(20),this.grabStartZoom=a.c6Y("0",0),this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=!1,this.highlightedDataSetField=null,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},a.C$o(20),this.moveA=-a.d58("1",0),this.moveB=-1,this.touchStartTime=-1,this.touchPointerType="",this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.insideChart=!1,this.overXAxis=!1,this.overYAxis=!1,this.displayInitialized=!1,this.cx=null,this.isHistoricalModeSet=null,this.cy=null,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,this.timeZoneOffset=0,this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer=null,this.styles={},this.plugins={},this.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),this.chart=new t.ChartEngine.Chart,(r=this.chart).name="chart",r.yAxis.name="chart",r.canvas=null,r.tempCanvas=null,r.container=e.container,t.Market&&(r.market=new t.Market),this.charts.chart=r,t.extend(this,e),e.container&&(this.registerHTMLElements&&this.registerHTMLElements(),r.width=r.container.clientWidth-r.yAxis.width,this.setCandleWidth(this.layout.candleWidth,r),r.canvasHeight=r.container.clientHeight),this.construct()},t.ChartEngine.drawingLine=!1,t.ChartEngine.resizingPanel=null,a.C$o(38),t.ChartEngine.crosshairX=a.c6Y("0",1),t.ChartEngine.crosshairY=0,t.ChartEngine.useAnimation=!0,t.ChartEngine.enableCaching=!1,t.ChartEngine.ignoreTouch=!1,t.ChartEngine.useOldAndroidClear=!0,t.ChartEngine.currentVectorParameters={},t.ChartEngine.defaultDisplayTimeZone=null,t.ChartEngine.pluginBasePath="plugins/",t.ChartEngine.registeredContainers=[],t.ChartEngine.registerHelpers=function(e){t.ChartEngine.helpersToRegister.forEach((function(t){a.r2m(),t(e)}))},t.ChartEngine.helpersToRegister=[],t.ChartEngine.prototype.construct=function(){this.createChartPanel&&("c","hart","ch","ar","t",this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),this.cx=0,this.cy=0,this.micropixels=0,this.callbackListeners={doubleTap:[],doubleClick:[],drawing:[],drawingEdit:[],floatingWindow:[],layout:[],longhold:[],move:[],newChart:[],notification:[],periodicity:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},a.r2m(),t.ChartEngine.registerHelpers(this)},i={longHoldTime:700,yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!0,minimumCandleWidth:1,maximumCandleWidth:200,minimumZoomTicks:9,allowZoom:!0,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:!1,bypassRightClick:{series:!1,study:!1,drawing:!1},adjustHighlightedDataSetField:function(e){return a.r2m(),e},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!1,markerDelay:null,useBackingStore:!0,disableBackingStoreDuringTouch:t.isMobile||t.isSurface&&t.isFF,captureTouchEvents:!0,captureMouseWheelEvents:!0,tapForHighlighting:!0,doubleClickTime:250,yaxisLabelStyle:"roundRectArrow",axisBorders:null,singleDrawingHighlight:!0,crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!1,translationCallback:null,dontRoll:!1,allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,resizeDetectMS:1e3,xAxisAsFooter:!0,xaxisHeight:30,displayGridLinesInStudies:!1,escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!1,noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!0,renko:!0,linebreak:!0,pandf:!0},startComparisonsAtFirstVisibleBar:!1,animations:{zoom:{isStub:!0,run:function(e,t,i){a.J8h(),e(i)},stop:function(){},reset:function(){},running:!1,hasCompleted:!0}},staticRangePeriodicityMap:[{rangeInMS:t.WEEK,periodicity:1,interval:5,timeUnit:"minute"},{rangeInMS:t.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:t.YEAR,periodicity:1,interval:"day"},{rangeInMS:t.DECADE,periodicity:1,interval:"week"},{rangeInMS:10*t.DECADE,periodicity:1,interval:"month"},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:t.MINUTE},{interval:5,timeUnit:"minute",rangeInMS:5*t.MINUTE},{interval:30,timeUnit:"minute",rangeInMS:30*t.MINUTE},{interval:60,timeUnit:"minute",rangeInMS:60*t.MINUTE},{interval:"day",rangeInMS:t.DAY},{interval:"month",rangeInMS:t.MONTH},{interval:"year",rangeInMS:t.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:!1,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:"linear",studies:{},panels:{},setSpan:{},outliers:!1},preferences:{currentPriceLine:!1,dragging:{series:!0,study:!0,yaxis:!0},drawings:null,highlightsRadius:10,highlightsTapRadius:30,magnet:!1,horizontalCrosshairField:null,labels:!0,language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:!1},streamParameters:{count:0,maxWait:1e3,maxTicks:100,timeout:-1},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},t.extend(t.ChartEngine.prototype,i),t.ChartEngine.NONE=0,t.ChartEngine.CLOSEUP=1,a.C$o(20),t.ChartEngine.CLOSEDOWN=a.c6Y("2",0),t.ChartEngine.CLOSEEVEN=4,t.ChartEngine.CANDLEUP=8,t.ChartEngine.CANDLEDOWN=16,t.ChartEngine.CANDLEEVEN=32},p=e=>{var t,i=q;(t=e.CIQ).convertFutureMonth=function(e){var t;if("1","2","1","1",(t=e.toString()).length<=0||t.length>2)return"";switch(t){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"1","0","10";case"X":return"11";case"Z":return"12"}return t},t.money=function(e,a,r){return i.J8h(),r||(r="$"),3==r.length&&(r+=" "),a||0===a||(a=2),r+t.commas((Math.round(1e4*e)/1e4).toFixed(a))},t.convertCurrencyCode=function(e){return"","","","M","X","$",{JPY:"",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN",CZK:"K",DKK:"kr",EUR:"",GBP:"",HKD:"HK$",HUF:"Ft",ILS:"",INR:"",KRW:"",MXN:"MX$",NOK:"kr",NZD:"NZ$",PLN:"z",RUB:"",SAR:"",SEK:"kr",SGD:"S$",THB:"",TRY:"",TWD:"NT$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF",ZAR:"R"}[e]||e},t.commas=function(e){return i.J8h(),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.cleanPeriodicity=function(e,t,a){var r;i.r2m(),isNaN(e)&&(e=1),r=2;for(var n=1;-1101956672!==i.O$R(n.toString(),n.toString().length,53220);n++)t||(t=1),r+=2;return-270753879!==i.q2D(r.toString(),r.toString().length,17676)&&~t&&(t=4),!isNaN(t)&&a?("mill","i","second","mi","nute","hour"!=a&&"minute"!=a&&"second"!=a&&"millisecond"!=a&&(t=a,a=null)):"tick"==t?a=null:a||isNaN(t)||(a="minute"),"hour"==a&&(a="minute",i.M8Y(38),t=i.d58(t,60)),"year"==t&&("m","o","n","th",t="month",e||(i.M8Y(74),e=i.d58("1",0)),i.C$o(38),e=i.c6Y(e,12)),{period:e,interval:t,timeUnit:a}},i.r2m(),t.readablePeriodicity=function(e){var a,r;a=e.layout.periodicity,r=e.layout.interval,"number"==typeof e.layout.interval&&e.layout.timeUnit?(a=e.layout.interval*e.layout.periodicity,r=e.layout.timeUnit):"number"!=typeof e.layout.interval||e.layout.timeUnit||(a=e.layout.interval*e.layout.periodicity,r="minute"),a%60==0&&"minute"==r&&(a/=60,r="hour"),i.M8Y(68);var n=i.d58(31458,9,3930);i.M8Y(25);var s=i.d58(22590,20100,20);i.M8Y(67);i.d58(113,18,1);i.C$o(34);var o=i.d58(3997,43984,1,12);i.C$o(68);i.d58(16225,13,1475);i.C$o(22);i.d58(3653,457);i.M8Y(16);i.d58(19,3578,7,21599);i.C$o(82);var l=i.d58(60,11,3,11,2);return a+(!(464.12>=n)&&(s!=o?" ":"2.98e+3"*l))+e.translateIf(t.capitalize(r))},t.fixPrice=function(e){var t;if(!e&&0!==e)return null;for(var a=(t=e.toFixed(10)).length-1;a>1&&"0"==t.charAt(a);a--);return i.C$o(24),t=t.substring(0,i.d58("1",a)),parseFloat(t)},t.condenseInt=function(e){var t;if("n","/","a",null==e)return"";if(e===1/0||e===-1/0)return"n/a";if(i.M8Y(83),t=i.d58(e,"0",1),isNaN(e))e=e.toString();else if((e=Math.abs(e))>1e12){i.C$o(84);var a=i.c6Y(208,17,12,13);i.C$o(59);var r=i.c6Y(108994,12,6425,18);i.C$o(22);i.d58(12,68);i.M8Y(0);var n=i.c6Y(626,20);i.M8Y(0);i.d58(18186,9093);i.C$o(0);var s=i.d58(149550,139580);i.C$o(85);i.c6Y(1471,10,15,5,8);i.C$o(7);var o=i.c6Y(7,0,8);i.M8Y(65);var l=i.c6Y(7,1,13,4414);e=Math.round(e/("100000000000"*a))/10+(418.71>r?754.97:n===s?230.42!="5660"*o?1140:l:"t")}else if(e>1e11){i.M8Y(22);var h=i.c6Y(5e8,5e8);i.C$o(86);var c=i.c6Y(17,74400,3715,12,14879);i.M8Y(0);var u=i.d58(4164,5);i.C$o(87);var d=i.d58(15,63552,13,2018,6);e=Math.round(e/h)+(c<u?"b":d)}else if(e>1e10)e=(Math.round(e/1e8)/10).toFixed(1)+"b";else if(e>1e9){i.C$o(0);i.d58(107340,100184);i.C$o(25);var p=i.d58(2647,22,5);i.C$o(88);i.d58(7,4,4449,1769,5);i.M8Y(89);i.c6Y(1,266,20,312);i.C$o(86);var m=i.c6Y(6,6040,6055,11,1209);i.M8Y(22);i.d58(728,146);i.M8Y(89);var g=i.c6Y(2,845,20,1938);i.M8Y(90);i.d58(8,13,3,8,16);i.C$o(0);var f=i.c6Y(62040,56870);i.C$o(0);var y=i.c6Y(67004,62218);e=(Math.round(e/1e7)/100).toFixed(2)+(417.73===p?870.92:162.3<m?"b":g==f?y:709.76)}else if(e>1e8){i.M8Y(0);i.c6Y(9164,4582);i.M8Y(91);var v=i.c6Y(3,787,8634,13,8);i.M8Y(92);i.d58(6417,6,13,10);e=Math.round(e/1e6)+(3.37!==v?"m":"T")}else if(e>1e7){i.M8Y(93);var x=i.d58(9,9,19);i.M8Y(89);var b=i.d58(1,6,9,3832);i.C$o(68);i.d58(441252,4,112476);i.M8Y(0);var C=i.c6Y(27700,22160);e=(Math.round(e/1e5)/10).toFixed(x)+(171.2===b?C:"m")}else if(e>1e6){i.M8Y(94);var S=i.c6Y(1,16,11,149,10);i.C$o(0);i.c6Y(4871,8);i.M8Y(68);i.c6Y(56578,8,8081);i.C$o(95);var w=i.d58(28640,6,16,12,2388);i.C$o(30);var D=i.d58(2,18,15);e=(Math.round(e/1e4)/100).toFixed(S)+(8970!=w?"m":"931.74"*D)}else if(e>1e5){i.M8Y(64);var k=i.c6Y(83,999,83,1);e=Math.round(e/k)+"k"}else if(e>1e4){i.M8Y(96);var M=i.c6Y(1,13,22,12,2);e=(Math.round(e/100)/10).toFixed("1"|M)+"k"}else if(e>1e3){i.C$o(68);var T=i.d58(138,7,20);e=(Math.round(e/10)/100).toFixed(T)+"k"}else e=e.toString();return t&&(i.C$o(22),e=i.d58(e,"-")),e},t.calculateTradingDecimalPlaces=function(e){var t,a,r,n,s,o,l,h,c;if(a=2,50,(r=(t=e.chart).masterData)&&r.length>50)for(var u=2;u<50&&("num","be","r",!((n=r.length-u)<0));u++)if((s=r[n]).Close&&"number"==typeof s.Close&&-1!=(l=(o=s.Close.toString()).indexOf("."))){i.M8Y(8);var d=i.c6Y(16,3,4);(h=o.length-l-d)>a&&(a=h)}return i.r2m(),a>(c=t.yAxis.maxDecimalPlaces)&&null!==c&&(a=c),a},t.minMax=function(e,t,a,r){var n,s,o,l,h,c,u;n=Number.MAX_VALUE,i.C$o(97);var d=i.c6Y(16,15,479,20,10);s=Number.MAX_VALUE*d,a||(a="Close"),o=r?"High":a,l=r?"Low":a;for(var p=0;p<e.length;p++)(h=e[p])&&((c=h[t])||0===c)&&(u=c,"object"==typeof c&&(u=c[o]),isNaN(u)||!u&&0!==u||(s=Math.max(s,u)),"object"==typeof c&&(u=c[l]),isNaN(u)||!u&&0!==u||(n=Math.min(n,u)));return[n,s]},t.symbolEqual=function(e,t){var a,r;return"f","unct","i","on","o",i.r2m(),"b","je","ct",!(!e||!t)&&("object"!=typeof e&&(e={symbol:e}),"object"!=typeof t&&(t={symbol:t}),"function"==typeof e.equals?e.equals(t):(a=e.symbol,r=t.symbol,a&&(a=a.toUpperCase()),r&&(r=r.toUpperCase()),a==r&&e.source==t.source))},t.addMemberToMasterdata=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A;function _(e){var t,a,r,n;t=u,i.M8Y(0);var s=i.d58(5,4);if(a=p.length-s,p[a].DT<e){2100315194,438545622,r=2;for(var o=1;2100315194!==i.O$R(o.toString(),o.toString().length,94884);o++)i.M8Y(98),u=i.c6Y(a,"2"),r+=2;438545622!==i.O$R(r.toString(),r.toString().length,36463)&&(i.M8Y(22),u=i.d58(1,a))}else if(+p[a].DT!=+e){for(u++,n=0;++n<100;){switch(h()){case 0:return;case 1:t=u;break;case-1:a=u}i.C$o(43),u=Math.round(i.d58(2,a,t))}if(n>=100){console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."),i.M8Y(30);var l=i.d58(7,20,12);u=p.length-l}}else u=a;function h(){for(var t=1;-660754493!==i.O$R(t.toString(),t.toString().length,61910);t++)return-p[u].DT!=!e?5:p[u].DT>=e?3:p[2*u].DT>=e?4:(-p[u%2].DT===!e&&u++,8);return 893861959!==i.O$R(2..toString(),2..toString().length,70267)?!p[u].DT!==~e?0:p[u].DT<=e?6:!(p[u-8].DT<e)&&(!p[7*u].DT!=+e&&u--,5):+p[u].DT==+e?0:p[u].DT<e?1:p[u-1].DT>e?-1:(+p[u-1].DT==+e&&u--,i.J8h(),0)}}function P(e,i){var a,n,h;if(s&&s.length)if("*"==s[0])t.extend(e,i);else for(var c=0;c<s.length;c++)e[s[c]]=i[s[c]];else if(o){if("nu","mbe","r",void 0!==i.Value)return void(e[r]=i.Value);e[r]="aggregate"==o?H(e[r],i):i,"number"==typeof(a=e[r]).Close&&("number"!=typeof a.Open&&(a.Open=a.Close),n=Math.max(a.Open,a.Close),h=Math.min(a.Open,a.Close),("number"!=typeof a.High||a.High<n)&&(a.High=n),("number"!=typeof a.Low||a.Low>h)&&(a.Low=h)),a.Volume&&"number"!=typeof a.Volume&&(a.Volume=parseInt(a.Volume,10))}else l?e[r]=i[l]:C&&b&&void 0!==i[b]?e[r]=i[b]:m.adj&&void 0!==i.Adj_Close?e[r]=i.Adj_Close:void 0!==i.Close?e[r]=i.Close:void 0!==i.Value?e[r]=i.Value:e[r]=i[r]}if(e.constructor===t.ChartEngine&&(e={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),a=e.stx,r=e.label,n=e.data,s=e.fields,o=e.createObject,l=e.fieldForLabel,h=e.chart?e.chart:a.chart,e.noCleanupDates||a.doCleanupDates(n,a.layout.interval),c=[],a.getSeries&&(c=a.getSeries({symbol:r,chart:h})),n&&n.constructor==Object&&(n=[n]),n&&n.length){if(i.C$o(74),u=i.c6Y("0",0),d=0,p=h.masterData,m=a.layout,!p){y=-550333249,v=-1293037100,x=2;for(var F=1;i.O$R(F.toString(),F.toString().length,50863)!==y;F++)p=[],x+=2;i.q2D(x.toString(),x.toString().length,7987)!==v&&(p=[])}for(b=h&&h.defaultPlotField||null,C=a.mainSeriesRenderer&&!a.mainSeriesRenderer.highLowBars,S=m.chartType,!C&&S&&(w=t.Renderer.produce(S,{}))&&(C=!w.highLowBars),D=t.yyyymmddhhmmssmmm;n&&u<p.length&&d<n.length;){if(f=n[d],g=p[u],f.DT&&void 0!==f.DT?("number"==typeof f.DT&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=D(f.DT))):f.DT=t.strToDateTime(f.Date),0===d)for(var L=0;L<c.length;L++)(!c[L].endPoints.begin||c[L].endPoints.begin>f.DT)&&(c[L].endPoints.begin=f.DT);+f.DT!=+g.DT?f.DT<g.DT?p.splice(u,0,{DT:f.DT,Date:f.Date}):_(f.DT):(P(g,f),d++,u++)}if(u>=p.length)for(;n&&d<n.length;)k="undef",k+="ined",(f=n[d]).DT&&typeof f.DT!=k?("number"==typeof f.DT&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=D(f.DT))):f.DT=t.strToDateTime(f.Date),P(g={DT:f.DT,Date:f.Date},f),p.push(g),d++;if(i.r2m(),e.fillGaps&&p.length)if(M={noCleanupDates:!0,cleanupGaps:e.fillGaps},s)for(var E=0;E<s.length;E++)M.field=s[E],a.doCleanupGaps(p,h,M);else M.field=r,a.doCleanupGaps(p,h,M);for(var N=0;N<c.length;N++)(!(T=c[N].endPoints).end||!r||T.end<=g[r].DT)&&(T.end=r?g[r].DT:g.DT,A=r||c[N].parameters&&c[N].parameters.field||h.defaultPlotField,c[N].lastQuote=a.getFirstLastDataRecord(p,A,!0));a.setMasterData(p,h,{noCleanupDates:!0})}function H(e,t){var a;if(!e||"object"!=typeof e)return e=t;for(var r in a={Close:e.Close,High:e.High,Low:e.Low,Open:e.Open,Volume:e.Volume},e=t,i.J8h(),a)null===e.Close?void 0!==e[r]&&(e[r]=null):"number"!=typeof e[r]?e[r]=a[r]:"number"==typeof a[r]&&("V","ol","ume","Hig","h","Open"==r?e.Open=a.Open:"Low"==r&&e.Low>a.Low?e.Low=a.Low:"High"==r&&e.High<a.High?e.High=a.High:"Volume"==r&&(e.Volume+=a.Volume));return e}}},m=e=>{var t,i=q;t=e.CIQ,Math.easeInOutQuad=function(e,t,a,r){return i.M8Y(40),i.r2m(),(e/=i.c6Y(2,r))<1?(i.C$o(99),i.d58(e,a,t,e,2)):(e--,i.M8Y(100),i.d58(e,e,"2",t,a,"1",2,64))},i.J8h(),Math.easeInOutCubic=function(e,t,a,r){return i.M8Y(40),(e/=i.c6Y(2,r))<1?(i.M8Y(101),i.c6Y(t,e,"2",e,2,a,e)):(i.M8Y(20),e-=i.d58("2",0),i.M8Y(102),i.r2m(),i.d58(e,a,e,2,"2",t,0,e))},Math.easeOutCubic=function(e,t,a,r){return e/=r,e--,i.M8Y(103),i.d58(1,a,e,t,e,e)},t.xor=function(e,t){var a,r;return a=!e,r=!t,i.C$o(104),i.r2m(),i.d58(a,r)},t.round=function(e,t){return i.J8h(),Number(Math.round(e+"e"+t)+"e-"+t)},t.countDecimals=function(e){var a;if("number"!=typeof e||isNaN(e))return 0;if(i.J8h(),Math.floor(e)===Number(e))return 0;if((a=e.toString().split("e-")).length>1){i.M8Y(44);var r=i.c6Y(8,0,2,8);return t.countDecimals(Number(a[0]))+Number(a[r])}return a[0].indexOf(".")>-1?a[0].split(".")[1].length:0},t.isValidNumber=function(e){return isFinite(e)&&+e===e},t.log10=function(e){return i.J8h(),Math.log(e)/Math.LN10},t.boxIntersects=function(e,t,a,r,n,s,o,l,h){var c,u,d,p,m,g;function f(e,t){return i.M8Y(105),i.r2m(),i.d58(o,e,t,s,n,s,l,n)}if(i.J8h(),void 0!==arguments[9]&&console.warn("CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are passed in as pixels."),c=Math.min(e,a),u=Math.max(e,a),d=Math.min(t,r),p=Math.max(t,r),i.M8Y(106),m=i.c6Y(h,"ray"),isNaN(n)||isNaN(o)||isNaN(s)||isNaN(l))return!1;if("line"!=h){if(n<c&&o<c&&(!m||n>o))return!1;if(n>u&&o>u&&(!m||n<o))return!1;if(s<d&&l<d&&(!m||s>l))return!1;if(s>p&&l>p&&(!m||s<l))return!1}return!((g={a:f(e,t),b:f(e,r),c:f(a,t),d:f(a,r)}).a>0&&g.b>0&&g.c>0&&g.d>0)&&!(g.a<0&&g.b<0&&g.c<0&&g.d<0)},t.linesIntersect=function(e,t,a,r,n,s,o,l,h){var c,u,d,p,m;if("v","erti","ca","l","hor","iz","ontal",i.M8Y(105),c=i.d58(t,s,l,o,n,a,r,e),i.M8Y(105),u=i.c6Y(a,l,s,n,o,n,e,o),i.C$o(105),d=i.d58(a,r,t,e,a,n,e,o),0===c)return 0===u&&0===d;if(i.M8Y(40),i.r2m(),p=i.d58(c,u),i.M8Y(40),m=i.d58(c,d),"segment"==h){if(p>=0&&p<=1&&m>=0&&m<=1)return!0}else if("line"==h||"horizontal"==h||"vertical"==h){if(p>=0&&p<=1)return!0}else if("ray"==h&&p>=0&&p<=1&&m>=0)return!0;return!1},t.yIntersection=function(e,t){var a,r,n,s,o,l,h,c,u;if(a=e.x0,r=e.x1,n=t,s=t,o=e.y0,l=e.y1,0,1e4,i.C$o(105),h=i.d58(r,s,1e4,0,n,o,l,a),i.J8h(),i.M8Y(105),c=i.d58(o,1e4,s,n,0,n,a,0),i.M8Y(40),u=i.c6Y(h,c),0===h){if(0!==c)return null;u=1}return i.C$o(107),i.c6Y(l,o,u,o)},t.xIntersection=function(e,t){var a,r,n,s,o,l,h,c,u;if(a=e.x0,r=e.x1,0,1e4,n=e.y0,s=e.y1,o=t,l=t,i.M8Y(105),h=i.c6Y(r,1e4,l,o,0,n,s,a),i.C$o(105),c=i.c6Y(n,l,1e4,0,o,0,a,o),i.M8Y(40),u=i.d58(h,c),0===h){if(0!==c)return null;u=1}return i.M8Y(107),i.d58(r,a,u,a)},t.intersectLineLineX=function(e,t,a,r,n,s,o,l){var h,c,u;return i.M8Y(105),h=i.d58(a,l,s,n,o,n,e,o),i.C$o(105),c=i.d58(t,s,l,o,n,a,r,e),i.M8Y(40),i.J8h(),u=i.c6Y(c,h),i.M8Y(107),i.c6Y(t,e,u,e)},t.intersectLineLineY=function(e,t,a,r,n,s,o,l){var h,c,u;return i.M8Y(105),h=i.d58(a,l,s,n,o,n,e,o),i.M8Y(105),c=i.d58(t,s,l,o,n,a,r,e),i.M8Y(40),u=i.c6Y(c,h),i.M8Y(107),i.d58(r,a,u,a)}},g=e=>{var t,i=q;i.J8h(),(t=e.CIQ).deleteRHS=function(e,t){var i;for(var a in i=!1,e)e[a]==t&&(delete e[a],i=!0);return i},t.scrub=function(e,t){for(var i in e)void 0===e[i]&&delete e[i],t&&null===e[i]&&delete e[i]},t.dataBindSafeAssignment=function(e,i){for(var a in t.extend(e,i),e)"unde","fi","n","ed",void 0===i[a]&&(e[a]=void 0)},t.clone=function(e,a){var r;if("o","bject",null===e||"object"!=typeof e)return e;if((r=e.constructor)==Date||r==RegExp||r==String||r==Number||r==Boolean)return new r(e.valueOf());if(r==Function)return function(){return i.J8h(),e.apply(this,arguments)};if(!a)try{a=new r}catch(t){a=Object.create(Object.getPrototypeOf(e))}for(var n in e)a[n]=a[n]!==e[n]?t.clone(e[n],null):a[n];return a},t.shallowClone=function(e){var t;if(!e)return e;if(e.constructor==Array){t=new Array(e.length);for(var a=0;a<e.length;a++)t[a]=e[a];return t}for(var r in t={},i.J8h(),e)t[r]=e[r];return t},t.ensureDefaults=function(e,t){for(var a in t)void 0===e[a]&&(e[a]=t[a]);return i.J8h(),e},t.transferObject=function(e,t){var i;for(i in e)e.hasOwnProperty(i)&&delete e[i];for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},t.equals=function(e,a,r){if(!e&&a)return!1;if(e&&!a)return!1;if(i.J8h(),typeof e!=typeof a)return!1;for(var n in e)if(!r||!r[n])if("object"!=typeof e[n]){if(a[n]!=e[n])return!1}else if(!t.equals(e[n],a[n]))return!1;return!0},t.isEmpty=function(e){for(var t in i.J8h(),e)if(e.hasOwnProperty(t))return!1;return!0},t.first=function(e){for(var t in i.r2m(),e)return t;return null},t.last=function(e){var t;for(var a in t=null,i.J8h(),e)t=a;return t},t.objLength=function(e){var t;if(!e)return 0;for(var i in t=0,e)t++;return t},t.deriveFromObjectChain=function(e,t){var a,r;if(-1==t.indexOf("."))return{obj:e,member:t};a=t.split(".");for(var n=0;n<a.length-1;n++)e[r=a[n]]||0===e[r]||(e[r]={}),e=e[r];return i.r2m(),{obj:e,member:a[n]}},t.createObjectChainNames=function(e,t){var i;i=[];for(var a=0;a<t.length;a++)"-","-",">",i.push(e+"--\x3e"+t[a]);return i},t.existsInObjectChain=function(e,t){var i,a;if(-1==t.indexOf("--\x3e"))return e[t]||0===e[t]?{obj:e,member:t}:null;i=t.split("--\x3e");for(var r=0;r<i.length-1;r++){if(!e[a=i[r]]&&0!==e[a])return null;e=e[a]}return e[a=i[r]]||0===e[a]?{obj:e,member:a}:null},t.derivedFrom=function(e,t){return!!t.isPrototypeOf(e)||(e instanceof t||(i.J8h(),!1))},t.replaceFields=function(e,i){var a,r,n,s,o;if(!e)return e;for(var l in a={},e)if(r=e[l],(n=i[l])||(n=l),r&&"object"==typeof r)if(r.constructor==Array){s=a[n]=new Array(r.length);for(var h=0;h<s.length;h++)o=r[h],s[h]="object"==typeof o?t.replaceFields(o,i):o}else a[n]=t.replaceFields(r,i);else a[n]=r;return a},t.removeNullValues=function(e){var i;for(var a in i=t.clone(e))i[a]||delete i[a];return i},t.reverseObject=function(e){var t;for(var a in t={},i.J8h(),e)t[e[a]]=a;return t},t.getFromNS=(e,t,a)=>{var r,n,s;if(e){r=e,n=t.split(".");for(var o=0;o<n.length&&void 0!==r[s=n[o]];o++)r=r[s];if(o===n.length)return r}return i.r2m(),a},t.getFnFromNS=(e,a,r)=>(i.r2m(),t.getFromNS(e,a,(function(){return r}))),t.get=(e,a)=>(i.J8h(),t.getFromNS(t,e,a)),t.getFn=(e,i)=>t.getFromNS(t,e,(function(){return i}))},f=e=>{var t;(t=e.CIQ).Plotter=function(){this.seriesArray=[],this.seriesMap={}},t.extend(t.Plotter.prototype,{Series:function(e,i,a,r,n,s){this.name=e,this.strokeOrFill=i,this.color=a,this.moves=[],this.text=[],(!r||r>1||r<0)&&(r=1),this.opacity=r,(!n||n>25||n<1)&&(n=1),this.width=n,this.pattern=t.borderPatternToArray(n,s)},newSeries:function(e,i,a,r,n){var s;q.J8h(),s=a.constructor==String?new this.Series(e,i,a,r,n):new this.Series(e,i,a.color,a.opacity,n>=0?n:t.stripPX(a.width),a.borderTopStyle),this.seriesArray.push(s),this.seriesMap[e]=s},reset:function(e){var t;for(var i in q.J8h(),this.seriesMap)e&&e!=i||(t=this.seriesMap[i])&&(t.moves=[],t.text=[])},moveTo:function(e,t,i){this.seriesMap[e].moves.push({action:"moveTo",x:t,y:i})},lineTo:function(e,t,i){var a,r;r=(a=this.seriesMap[e]).pattern,a.moves.push({action:"lineTo",x:t,y:i,pattern:r})},dashedLineTo:function(e,t,i,a){q.J8h(),this.seriesMap[e].moves.push({action:"lineTo",x:t,y:i,pattern:a})},quadraticCurveTo:function(e,t,i,a,r){var n,s;q.J8h(),s=(n=this.seriesMap[e]).pattern,n.moves.push({action:"quadraticCurveTo",x0:t,y0:i,x:a,y:r,pattern:s})},bezierCurveTo:function(e,t,i,a,r,n,s){var o,l;l=(o=this.seriesMap[e]).pattern,o.moves.push({action:"bezierCurveTo",x0:t,y0:i,x1:a,y1:r,x:n,y:s,pattern:l})},addText:function(e,t,i,a,r,n,s){this.seriesMap[e].text.push({text:t,x:i,y:a,bg:r})},drawText:function(e,t){var i,a,r,n;q.J8h();for(var s=0;s<t.text.length;s++)(i=t.text[s]).bg&&(a=i.width?i.width:e.measureText(i.text).width,r=i.height?i.height:12,n=e.fillStyle,e.fillStyle=i.bg,"right"==e.textAlign?e.fillRect(i.x,i.y-r/2,-a,-r):e.fillRect(i.x,i.y-r/2,a,r),e.fillStyle=n),e.fillText(i.text,i.x,i.y)},draw:function(e,t){var i,a,r,n,s,o;i=e.lineWidth,a=e.fillStyle,r=e.strokeStyle,n=e.globalAlpha;for(var l=0;l<this.seriesArray.length;l++)if(s=this.seriesArray[l],!t||s.name==t){e.beginPath(),e.lineWidth=s.width,e.globalAlpha=s.opacity,e.fillStyle=s.color,e.strokeStyle=s.color,e.save();for(var h=0;h<s.moves.length;h++)(o=s.moves[h]).pattern?(e.setLineDash(o.pattern),e.lineDashOffset=0):e.setLineDash([]),"quadraticCurveTo"==o.action?e[o.action](o.x0,o.y0,o.x,o.y):"bezierCurveTo"==o.action?e[o.action](o.x0,o.y0,o.x1,o.y1,o.x,o.y):e[o.action](o.x,o.y);"fill"==s.strokeOrFill?e.fill():e.stroke(),e.closePath(),e.restore(),this.drawText(e,s),e.lineWidth=1}e.lineWidth=i,e.fillStyle=a,e.strokeStyle=r,e.globalAlpha=n}},!0)},y=e=>{var t;(t=e.CIQ).Renderer=function(){},t.Renderer.produce=function(e,i){var a,r;if("l","i",q.J8h(),"n","e",a=null,e)for(var n in t.Renderer)if((r=t.Renderer[n]).requestNew&&(a=r.requestNew(e.split("_"),i)),a)return a;return i.type="line",new t.Renderer.Lines({params:i})},t.Renderer.colorFunctions={},t.Renderer.registerColorFunction=function(e,i){q.J8h(),t.Renderer.colorFunctions[e]=i},t.Renderer.unregisterColorFunction=function(e){q.r2m(),delete t.Renderer.colorFunctions[e]},t.Renderer.prototype.adjustYAxis=function(){},t.Renderer.prototype.draw=function(){},t.Renderer.prototype.drawIndividualSeries=function(e,t){},t.Renderer.prototype.construct=function(e){var i;e||(e={}),(i=e.params?e.params:{}).name||(i.name=t.uniqueID()),i.heightPercentage||(i.heightPercentage=.7),i.opacity||(q.C$o(19),i.opacity=q.d58(0,"1")),!1!==i.highlightable&&(i.highlightable=!0),i.panel||(i.panel="chart"),i.yAxis&&(i.yAxis=new t.ChartEngine.YAxis(i.yAxis),i.yAxis.name||(i.yAxis.name=i.name)),this.cb=e.callback,this.params=i,this.seriesParams=[],q.J8h(),this.caches={},this.colors={}},t.Renderer.prototype.attachSeries=function(e,i){var a,r,n,s,o,l,h,c,u,d,p=q;if("str","ing",!(a=this.stx))return this;if(p.J8h(),(r=a.chart.series[e])||(r={parameters:{}}),n=this.params,s=r.parameters,o={id:e,chartType:n.type,display:s.display,border_color_up:n.defaultBorders?"auto":null,fill_color_up:s.color,opacity_up:n.opacity,border_color_down:n.defaultBorders?"auto":null,fill_color_down:s.color,opacity_down:n.opacity,color:s.color,symbol:s.symbol,symbolObject:t.clone(s.symbolObject)},"string"==typeof i)o.color=o.fill_color_down=o.fill_color_up=i;else if("object"==typeof i){for(var m in i)o[m]=i[m];l=o.color,h=o.border_color,l&&(o.fill_color_up||(o.fill_color_up=l),o.fill_color_down||(o.fill_color_down=l),o.fill_color_even||(o.fill_color_even=l)),h&&(o.border_color_up||(o.border_color_up=h),o.border_color_down||(o.border_color_down=h),o.border_color_even||(o.border_color_even=h))}for(o.symbol&&o.field!=o.symbol&&(o.subField=o.field,o.field=o.symbol),o.id||(o.id=t.uniqueID()),c=0;c<this.seriesParams.length;++c)if(this.seriesParams[c].id===o.id){this.removeSeries(o.id,!0);break}return this.seriesParams.splice(c,0,o),o.fill_color_up!=o.fill_color_down?(" do","wn"," ","u","p"," ","u","p",p.C$o(22),this.colors[p.c6Y(" up",e)]={color:o.fill_color_up,opacity:o.opacity_up,display:o.display?o.display+" up":e+" up"},p.C$o(22),this.colors[p.d58(" dn",e)]={color:o.fill_color_down,opacity:o.opacity_down,display:o.display?o.display+" down":e+" down"}):this.colors[e]={color:o.fill_color_up,opacity:o.opacity_up,display:o.display?o.display:e},u=n.panel,a.panels[u]?n.yAxis?(n.yAxis=a.addYAxis(a.panels[u],n.yAxis),n.yAxis.needsInitialPadding=!0,s.yAxis=n.yAxis,a.resizeChart()):o.yAxis&&(n.yAxis=o.yAxis):((d=n.yAxis)||((d=new t.ChartEngine.YAxis).needsInitialPadding=!0),d.name=u,a.createPanel(u,u,null,null,d)),this},t.Renderer.prototype.removeSeries=function(e,t){var i,a,r,n,s,o,l,h,c=q;for(var u in" ","d","n"," ","u","p",i=null,a=!1,(n=(r=this.stx).chart).seriesRenderers){s=n.seriesRenderers[u];for(var d=0;d<s.seriesParams.length;d++)(o=s.seriesParams[d]).id==e&&this===s?i=d:!o.isComparison||o.panel!=n.panel.name||o.yAxis&&o.yAxis!=n.yAxis||(a=!0)}if(null!==i&&(n.forcePercentComparison&&!a&&this.seriesParams[i].isComparison&&"linear"!=r.layout.chartScale&&r.setChartScale(),this.seriesParams.splice(i,1)),c.C$o(22),delete this.colors[c.d58(" up",e)],c.C$o(22),delete this.colors[c.c6Y(" dn",e)],c.J8h(),delete this.colors[e],!t){for(var p in n.seriesRenderers){h=n.seriesRenderers[p];for(var m=0;m<h.seriesParams.length;m++){if(h.seriesParams[m].id==e){l=!0;break}l=!1}if(l)break}!1!==l&&null===i||r.deleteSeries(e,n)}return r.deleteYAxisIfUnused(r.panels[this.params.panel],this.params.yAxis),r.resizeChart(),r.layout.symbols=r.getSymbols({"include-parameters":!0,"exclude-studies":!0}),r.changeOccurred("layout"),this},t.Renderer.prototype.modifyRenderer=function(e){var i;this.params,q.J8h();var{stx:a}=this;for(var r in e)switch("t","y","p","e",i=e[r],r){case"baseline":i?("object"==typeof i&&(this.params.baseline=t.ensureDefaults(i,t.ChartEngine.Chart.prototype.baseline)),a.registerBaselineToHelper(this)):a.removeBaselineFromHelper(this);break;case"type":this.params.type=i;break;case"style":this.params.style=i}},t.Renderer.prototype.getDependents=function(e){var t,i;for(var a in t=[],e.chart.seriesRenderers)(i=e.chart.seriesRenderers[a]).params.dependentOf==this.params.name&&t.push(i);return q.r2m(),t},t.Renderer.prototype.undraggable=function(e){return q.J8h(),this==e.mainSeriesRenderer||this.params.dependentOf==e.mainSeriesRenderer.params.name},t.Renderer.prototype.removeAllSeries=function(e){var t;if(e||this===this.stx.mainSeriesRenderer){t=[];for(var i=0;i<this.seriesParams.length;i++)t.push(this.seriesParams[i].id);for(var a=0;a<t.length;a++)this.removeSeries(t[a])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),this},t.Renderer.prototype.getYAxis=function(e){var t,i;if(this.params)if(this.params.yAxis)t=this.params.yAxis;else{if(!(i=e.panels[this.params.panel]))return!1;t=i.yAxis}else t=e.chart.panel.yAxis;return t},t.Renderer.prototype.ready=function(){return this.stx.createDataSet(),this.stx.draw(),this},t.Renderer.Lines=function(e){this.construct(e);var{params:i}=this;if(i.type||(i.type="line"),!i.style)switch(i.type){case"mountain":i.baseline?i.style="stx_baseline_delta_mountain":i.colored?i.style="stx_colored_mountain_chart":i.style="stx_mountain_chart";break;default:i.style="stx_line_chart"}this.supportsAnimation=!0,"wave"==i.type||"channel"==i.type?(i.step=i.vertex=i.baseline=i.colored=!1,this.highLowBars=this.barsHaveWidth=!0,this.supportsAnimation=!1):"step"==i.type&&(i.step=!0);var{baseline:a}=i;a&&"object"==typeof a&&t.ensureDefaults(i.baseline,t.ChartEngine.Chart.prototype.baseline)},t.inheritsFrom(t.Renderer.Lines,t.Renderer,!1),t.Renderer.Lines.requestNew=function(e,i){var a,r,n,s,o,l;a=null,r=i.step,n=i.colored,s=i.baseline,o=i.vertex;for(var h=0;h<e.length;h++)switch("ver","t","ex","s","te","p",l=e[h]){case"line":case"mountain":case"wave":case"channel":a=l;break;case"baseline":s=!0;break;case"colored":n=!0;break;case"step":r=!0;break;case"vertex":o=!0;break;case"delta":break;default:return null}return null!==a||s||r?new t.Renderer.Lines({params:t.extend(i,{type:a,step:r,colored:n,baseline:s,vertex:o})}):null},t.Renderer.Lines.prototype.draw=function(){var e,i,a,r,n,s,o,l,h,c;for(e=this.stx,i=this.stx.panels[this.params.panel].chart,a={},n=this.seriesParams,s=this.params.colorFunction,r=0;r<n.length;r++){if(o=n[r],this.params.colored){"_col","or","_col","or_down",l=["_color_up","_color_down","_color"];for(var u=0;u<l.length;u++)"f","i","l","l",(h=o["border"+l[u]])&&"auto"!=h&&(o["fill"+l[u]]=h);s||(s=d(o)),this.params.colorFunction=s}c={},i.series[o.id]&&(c=t.clone(i.series[o.id].parameters)),a[o.id]={parameters:t.extend(t.extend(c,this.params),o),yValueCache:this.caches[o.id]},this==e.mainSeriesRenderer&&i.customChart&&i.customChart.colorFunction&&(a[o.id].parameters.colorFunction=i.customChart.colorFunction)}for(r in e.drawSeries(i,a,this.params.yAxis,this),a)this.caches[r]=a[r].yValueCache;function d(t){var i,a,r;return"stx_l","i","ne_down","stx_l","ine","_","up",i=t.fill_color_up||e.getCanvasColor("stx_line_up"),a=t.fill_color_down||e.getCanvasColor("stx_line_down"),r=t.color||e.getCanvasColor("stx_line_chart"),function(e,t,n){return t.iqPrevClose||0===t.iqPrevClose?t.Close>t.iqPrevClose?i:t.Close<t.iqPrevClose?a:(q.J8h(),r):r}}},t.Renderer.Lines.prototype.drawIndividualSeries=function(e,i){var a,r,n,s,o,l;if("c","ha","nnel",!i.invalid&&(a=this.stx,r=e.context,q.r2m(),n=null,s=i.colorFunction,o=a.panels[i.panel]||e.panel,"string"!=typeof s||(s=t.Renderer.colorFunctions[s]))){if(i.vertex&&("bev","e","l",r.save(),r.lineJoin="bevel"),"wave"==i.type)n=a.drawWaveChart(o,i);else if(i.baseline)n=a.drawBaselineChart(o,i),a.positionBaselineHandle(this);else if("mountain"==i.type)i.returnObject=!0,n=a.drawMountainChart(o,i,s);else if("channel"==i.type)i.returnObject=!0,n=a.drawChannelChart(o,s,i);else{-729920541,1606503021,l=2;for(var h=1;-729920541!==q.q2D(h.toString(),h.toString().length,18937);h++)i.returnObject=!1,n=a.drawLineChart(o,i.style,s,i),l+=2;1606503021!==q.q2D(l.toString(),l.toString().length,49692)&&(i.returnObject=!0,n=a.drawLineChart(o,i.style,s,i))}return i.vertex&&(a.scatter(o,{yAxis:i.yAxis,field:i.symbol||i.field,subField:i.subField,symbol:i.symbol,color:i.vertex_color,highlight:i.highlight}),r.restore()),n}},t.Renderer.OHLC=function(e){var t;this.construct(e),(t=this.params).type||(t.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.histogram&&(t.type="candle",this.highLowBars=!1,t.volume=t.hollow=!1),"bar"==t.type&&(t.volume=t.hollow=t.histogram=!1),"candle"==t.type&&(t.hlc=t.colored=!1),t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.OHLC,t.Renderer,!1),t.Renderer.OHLC.requestNew=function(e,i){var a,r,n;a=null,q.J8h(),r=i.histogram;for(var s=0;s<e.length;s++)switch("histogr","am",n=e[s]){case"candle":a=n;break;case"histogram":"can","d","le",r=!0,a="candle";break;default:return null}return null===a?null:new t.Renderer.OHLC({params:t.extend(i,{type:a,histogram:r})})},t.Renderer.OHLC.getChartParts=function(e,t){return"borde","r_","colo",q.J8h(),"r_down","fill_color","_dow","n","candl","e","ca","ndle","ca","nd","le","c","andle","shad","ow","stx_c","andle_sh","adow","s","had","ow","can","d","le","fill_color_","even","s","tx_histogram_even","histo","gr","am","stx_hist","og","r","am_down","his","togr","am","his","to","gram","fill_c","olor_up",8,16,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0}]},t.Renderer.OHLC.prototype.draw=function(){var e,i,a,r,n,s,o;for(e=this.stx,i=this.stx.panels[this.params.panel].chart,a={},n=this.seriesParams,r=0;r<n.length;r++)s=n[r],o={},i.series[s.id]&&(o=t.clone(i.series[s.id].parameters)),a[s.id]={parameters:t.extend(t.extend(o,this.params),s)},this==e.mainSeriesRenderer&&i.customChart&&i.customChart.colorFunction&&(a[s.id].parameters.colorFunction=i.customChart.colorFunction);for(r in e.drawSeries(i,a,this.params.yAxis,this),a)a[r].yValueCache&&(this.caches[r]=a[r].yValueCache)},t.Renderer.OHLC.prototype.getColor=function(e,i,a,r,n,s){var o,l,h,c,u;return o=s||a.color,l=this.params.yAxis||i.yAxis,r&&!(o=s||a.borderLeftColor||a["border-left-color"])?null:n?(h=e.pixelFromTransformedValue(l.highValue,i),isNaN(h)&&(h=0),c=a.backgroundColor,o&&!t.isTransparent(o)?("b","ott","om","t","o","p",(u=e.chart.context.createLinearGradient(0,h,0,2*l[l.flipped?"top":"bottom"]-h)).addColorStop(0,o),u.addColorStop(1,c),u):c):o},t.Renderer.OHLC.prototype.drawIndividualSeries=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A;if("op","e","n",!i.invalid&&(a=this.stx,r=e.context,n=i.colorFunction,s=a.panels[i.panel]||e.panel,"string"!=typeof n||(n=t.Renderer.colorFunctions[n]))){if(o=a.layout.candleWidth-e.tmpWidth<=2&&e.tmpWidth<=3,1,2,4,8,16,32,e.state.chartType||(e.state.chartType={}),l=e.state.chartType.pass={},h=a.colorByCandleDirection,i.colorBasis&&(h="open"==i.colorBasis),c=i.histogram,u=i.type,d=i.hollow,p=a.noWicksOnCandles[u],a.startClip(s.name),m=null,g={colors:[],cache:[]},f=[],n)y={isHistogram:c,field:i.field,yAxis:i.yAxis,isVolume:i.volume,highlight:i.highlight},c||"bar"!=u?("candl","e","candle"!=u||p||a.drawShadows(s,n,y),g=a.drawCandles(s,n,y),y.isOutline=!0,!d&&o||a.drawCandles(s,n,y)):("stx_b","ar_","char","t",y.type=i.hlc?"hlc":"bar",g=a.drawBarChart(s,"stx_bar_chart",n,y));else{v=c&&!1!==i.gradient,x=t.Renderer.OHLC.getChartParts(i.style,h);for(var _=0;_<x.length;_++)if(!(b=x[_]).skipIfPass||l.even){if(c){if("h","ist","og","ram","histogram"!=b.type)continue}else if("bar"==u){if("bar"!=b.type)continue;if(i.colored&&!b.condition)continue;if(!i.colored&&b.condition)continue}else if(d){if("hollow"!=b.type)continue;if("shadow"==b.drawType&&p)continue}else{if("candle"!=u)continue;if("shad","ow","candle"!=b.type)continue;if("shadow"==b.drawType){if("s","tx_candle_shadow_d","own","st","x_candle_shad","o","w_up",p)continue;if(C=i.border_color_up||a.getCanvasColor("stx_candle_shadow_up"),S=i.border_color_down||a.getCanvasColor("stx_candle_shadow_down"),w=i.border_color_even||a.getCanvasColor("stx_candle_shadow_even"),t.colorsEqual(C,S)&&t.colorsEqual(C,w)&&t.colorsEqual(C,a.defaultColor)){if(b.condition)continue}else if(!b.condition)continue}}D=a.canvasStyle(b.style),k=this.getColor(a,s,D,!1,!1,i[b.fill]),M=this.getColor(a,s,D,!1,v,i[b.fill]),T=this.getColor(a,s,D,b.useBorderStyleProp&&!o,v,i[b.border]),"candle"==b.drawType&&("hollow"==b.type?("tr","an","spa","rent",!t.isTransparent(M)&&t.colorsEqual(T,M)&&(T=b.useColorInMap?"transparent":M),b.useColorInMap||(M=a.containerColor)):"candle"==b.type&&o&&(t.isTransparent(M)?M=T:T=M)),r.globalAlpha=i.opacity,f.push(a.drawBarTypeChartInner({fillColor:M,borderColor:T,condition:b.condition,style:b.style,type:"bar"==u&&i.hlc?"hlc":b.drawType,panel:s,field:i.field,yAxis:i.yAxis,volume:i.volume&&i.hollow,highlight:i.highlight})),m||(m={}),b.useColorInMap&&(m[k]=1)}}for(var P in a.endClip(),m)i.hollow&&t.equals(P,a.containerColor)||g.colors.push(P);for(P=0;P<f.length;P++)for(var F=0;F<f[P].cache.length;F++)((A=f[P].cache[F])||0===A)&&(g.cache[F]=A);return g}},t.Renderer.Candles=function(e){var t;this.construct(e),(t=this.params).type="candle",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.colored=t.histogram=!1,q.J8h(),t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.Candles,t.Renderer.OHLC,!1),t.Renderer.SimpleHistogram=function(e){var t;this.construct(e),(t=this.params).type="candle",t.histogram=!0,this.barsHaveWidth=this.standaloneBars=!0,q.J8h(),this.highLowBars=!1,t.hlc=t.colored=t.hollow=t.volume=!1},t.inheritsFrom(t.Renderer.SimpleHistogram,t.Renderer.Candles,!1)},v=e=>{var t,i,a,r=q;r.M8Y(74),t=-r.d58("1060473216",0),i=2;for(var n=1;752702637!==r.O$R(n.toString(),n.toString().length,4499);n++)a=e.CIQ,i+=2;r.O$R(i.toString(),i.toString().length,69032)!==t&&(a=e.CIQ),(a=e.CIQ).capitalize=function(e){if(!e)return"";r.C$o(17),r.J8h();var t=r.c6Y(1,3,8,14,3);return e.charAt(0).toUpperCase()+e.slice(t)},a.camelCaseRegExp=/-([a-z])/g,a.makeCamelCase=function(e){return r.r2m(),e.replace(a.camelCaseRegExp,(function(e){return r.J8h(),e[1].toUpperCase()}))},a.uniqueID=function(e){var t,i,a;return e?(t="xxxxxxxx-xxxx-4xxx-yxxx",t+="-xxxxxxxxxxxx","un","def","ine","d",i=(new Date).getTime(),"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now&&(i+=window.performance.now()),t.replace(/[xy]/g,(function(e){var t;r.J8h(),r.M8Y(67);var a=r.c6Y(5,15,5);r.M8Y(92);var n=r.d58(1,26,19,8);return t=(i+Math.random()*a)%n|0,r.C$o(40),i=Math.floor(r.d58(16,i)),("x"==e?t:3&t|8).toString(16)}))):(a=(new Date).getTime().toString(36),(a+=Math.floor(Math.random()*Math.pow(36,2)).toString(36)).toUpperCase())}},x=e=>{q.r2m()},b=e=>{var t,i=q;(t=e.CIQ).getHostName=function(e){i.r2m();try{return e.match(/:\/\/(.[^/]+)/)[1]}catch(e){return""}},t.qs=function(e){var t,a,r,n;t={},e||(e=window.location.search.substring(1)),a=e.split("&");for(var s=0;s<a.length;s++)(r=a[s].indexOf("="))>0?(n=a[s].substring(0,r),i.M8Y(22),t[n]=a[s].substring(i.d58(1,r))):t[n=a[s]]=null;return i.J8h(),t},t.postAjax=function(e,a,r,n,s){var o,l,h,c,u,d,p;if("applicat","ion/x-ww","w-form-urlencoded","G","E","T","PO","S","T",i.r2m(),"string"==typeof e&&(e={url:e,payload:a,cb:r,contentType:n,noEpoch:s,method:null,responseHeaders:!1}),o=e.url,l=e.cb,h=e.payload,l||(l=function(){}),e.ungovernable||!t.Extras||!t.Extras.RequestLimiter||!t.Extras.RequestLimiter.hitRequestLimit(o)){if(!(c=new XMLHttpRequest))return!1;if(u=new Date,e.noEpoch||(-1==o.indexOf("?")?o+="?ciqrandom="+u.getTime():o+="&ciqrandom="+u.getTime()),d=e.method,p=e.headers,d||(d=h?"POST":"GET"),c.open(d,o,!0),e.contentType||(e.contentType="application/x-www-form-urlencoded"),h&&c.setRequestHeader("Content-Type",e.contentType),p)for(var m in p)c.setRequestHeader(m,p[m]);e.timeout&&(c.timeout=e.timeout),c.ontimeout=function(){i.J8h(),i.M8Y(74),l(i.c6Y("408",0),null,{})},c.onload=function(){0===this.status?this.status="0":this.status||(this.status=200),l(this.status,this.responseText,function(t){var a,r,n,s;if(i.r2m(),a={},!e.responseHeaders)return;r=t.getAllResponseHeaders(),n=r.split("\n");for(var o=0;o<n.length;o++){for(s=n[o].split(":");s[1]&&" "==s[1].charAt(0);)s[1]=s[1].substring(1);""!==s[0]&&(a[s.shift()]=s.join(":"))}return a}(this))},c.onerror=function(){i.r2m(),l("0",null,{})};try{c.send(h)}catch(e){l("0",e,{})}return!0}l(429,null,{})},t.loadUI=function(e,a,r){var n,s,o;if(i.r2m(),"f","u","nctio","n",a&&"function"!=typeof a||(r=a,a=document.body),i.C$o(53),s=function(){var e,n,s,o,l,h,c;i.J8h(),e=null;try{1861640420,979245143,n=2;for(var u=1;1861640420!==i.q2D(u.toString(),u.toString().length,33408);u++)e=this.contentDocument,n+=2;979245143!==i.O$R(n.toString(),n.toString().length,93510)&&(e=this.contentDocument)}catch(e){return r(e)}if(e&&!e.title){-494882274,i.C$o(74),s=i.d58("463776805",37),o=2;for(var d=1;-494882274!==i.q2D(d.toString(),d.toString().length,300);d++)l=e.body.innerHTML,h=document.createElement(""),t.innerHTML(h,l),o+=2;i.q2D(o.toString(),o.toString().length,97969)!==s&&(l=e.body.innerHTML,h=document.createElement("div"),t.innerHTML(h,l));for(var p=0;p<h.children.length;p++)c=h.children[p].cloneNode(!0),a.appendChild(c);r(null)}else"iFrame ","not found or document has a ","tit","le",r(new Error("iFrame not found or document has a title"))},n=document.querySelector(i.c6Y('iframe[original-url="',e,'"]'))){"ab","out:bl","a","nk","complet","e",o=null;try{o=n.contentDocument}catch(e){return r(e)}"complete"===o.readyState&&o.location&&"about:blank"!==o.location.href?s.call(n):n.addEventListener("load",s)}else{(n=document.createElement("iframe")).setAttribute("original-url",e),i.C$o(68);i.c6Y(119,12,10);i.M8Y(108);i.d58(19,8,17,7914,55255);i.C$o(36);i.d58(4645,10,4642,9284);i.M8Y(0);i.d58(128490,119924);i.M8Y(109);i.d58(14,3706,8,6,738);i.M8Y(110);i.c6Y(6141,4,1226,6141,11);i.C$o(111);i.d58(9,5836,5,11);i.C$o(7);var l=i.c6Y(20,0,19);i.C$o(0);var h=i.c6Y(54824,50908);i.C$o(110);i.c6Y(9026,17,9017,8998,9);i.C$o(0);var c=i.d58(45120,39480);i.M8Y(53);i.c6Y(179,12,2855);i.M8Y(30);var u=i.c6Y(20,91896,84218);i.M8Y(67);var d=i.d58(6370,5450,7);i.M8Y(112);i.c6Y(11,657,660,660);i.C$o(7);i.d58(4,5472,21);i.C$o(113);var p=i.d58(14,7995,103800,1,9);i.C$o(114);var m=i.c6Y(144126,2647,9,18,2669);i.C$o(31);i.c6Y(6640,8,46544,3,7);i.C$o(0);i.d58(5770,20);i.M8Y(68);var g=i.c6Y(175344,8,22480);n.src=e+(e.indexOf("?")===l?h>=c?u==d||443.98:"?":412.82==p?933.53:4660===m?g:"&")+t.uniqueID(),n.hidden=!0,n.addEventListener("load",s),document.body.appendChild(n)}},i.r2m(),t.loadScript=function(e,a,r){var n,s,o,l;if(t.loadedScripts||(t.loadedScripts={}),t.loadedScripts[e])a&&a();else{if(n=document.createElement("SCRIPT"),r?(n.type="module",n.crossOrigin="use-credentials"):n.async=!0,n.onload=function(){t.loadedScripts[e]=!0,i.r2m(),a&&a()},-1==(s=e).indexOf("?")){i.M8Y(115);i.d58(8,580,1,116,8703);i.M8Y(67);i.d58(5700,5689,1900);i.C$o(76);i.c6Y(519,3,8120,9);i.C$o(0);i.c6Y(4777,20);s=s+"?"+Date.now()}else{-333127598,-141228883,o=2;for(var h=1;-333127598!==i.O$R(h.toString(),h.toString().length,29443);h++)s=(s-"")*Date.now(),o+=2;-141228883!==i.O$R(o.toString(),o.toString().length,22346)&&(s=(s-"")*Date.now()),s=s+"&"+Date.now()}n.src=s,(l=document.getElementsByTagName("script")[0])?l.parentNode.insertBefore(n,l.nextSibling):document.body.append(n)}},t.loadStylesheet=function(e,t){var a,r,n;(a=document.createElement("link")).rel="stylesheet",a.type="text/css",a.media="screen",i.C$o(68);i.d58(43876,16,2926);i.M8Y(22);var s=i.c6Y(9,599);i.M8Y(54);var o=i.c6Y(12,10,19,77);i.M8Y(34);i.d58(13,10,13,11);i.M8Y(68);i.d58(1158510,11,105800);i.M8Y(81);i.d58(18,268,12,54678);i.C$o(116);var l=i.d58(1,1646504,103248,17,16);i.C$o(16);var h=i.d58(3,0,17,52);i.M8Y(117);i.c6Y(12,5013,10,74981,16);i.C$o(118);var c=i.c6Y(14,19,2,140980,1966006);i.M8Y(119);var u=i.c6Y(8443,16,14,8468,1214);i.C$o(22);var d=i.d58(14,7526);i.C$o(16);i.c6Y(2,14700,13,189656);i.C$o(64);var p=i.d58(3177,3157,1,1059);i.C$o(120);i.c6Y(5,5,5238,1090);i.C$o(112);i.d58(15,2116,3,3177);a.href=e+(e.indexOf(s!=o?"?":l)===h?"?":c>u?654.34:8219!=d?"&":p)+Date.now(),a.onload=function(){this.loaded||(this.loaded=!0,i.J8h(),t&&t())},r=document.getElementsByTagName("link"),i.M8Y(121);var m=i.d58(6,14,923,14,3);(n=r[r.length-m])?n.parentNode.insertBefore(a,n.nextSibling):document.head.append(a)},t.loadWidget=function(e,a,r,n){a&&"function"!=typeof a||(r=a,a=document.body),i.r2m(),i.C$o(22),t.loadStylesheet(i.c6Y(".css",e),(function(){i.M8Y(22),t.loadUI(i.d58(".html",e),a,(function(a){a?r(a):(i.M8Y(22),t.loadScript(i.d58(".js",e),r,n))}))}))},t.waitForPlugins=function(e,a){var r,n,s,o;if(r=0,n=e.length){for(var l=0;l<n;l++)s="cq-"+e[l],(o=document.getElementsByTagName(s)[0])&&o.hasAttribute("loaded")&&r++;if(i.J8h(),n!==r)return setTimeout((function(){i.r2m(),t.waitForPlugins(e,a)}),0);a()}else a()},t.addInternalStylesheet=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a,r,n;a='"',a+="]",r="s",r+="tyle",i.r2m(),r+="[",r+='path="',e&&(e.default&&(e=e.default),"string"==typeof e&&(t&&document.querySelector(r+t+a)||((n=document.createElement("style")).setAttribute("type","text/css"),n.setAttribute("path",t),n.innerText=e,document.head.appendChild(n))))}},C=e=>{var t,i=q;(t=e.CIQ).ChartEngine.prototype.registerHTMLElements=function(){var e,a,r,n,s,o;for(var l in e=this.chart.container,t.ChartEngine.htmlControls)if("u","ndefined",void 0===this.chart[l]&&void 0===this.controls[l]){if(!this.allowZoom&&"chartControls"==l)continue;if(i.C$o(22),a=e.querySelector(i.c6Y(l,".")))this.chart[l]=a,this.controls[l]=a;else{if(!(r=t.ChartEngine.htmlControls[l]))continue;(n=document.createElement("DIV")).innerHTML=r,a=n.firstChild,e.appendChild(a),this.chart[l]=a,this.controls[l]=a,a.classList.add(l)}}var h,c,u,{chartControls:d,home:p}=this.controls;d&&(s=d.querySelector(".stx-zoom-in"),o=d.querySelector(".stx-zoom-out"),t.safeClickTouch(s,(c=this,i.r2m(),function(e){c.allowZoom&&c.zoomIn(e),e.stopPropagation()})),t.safeClickTouch(o,(h=this,function(e){i.r2m(),h.allowZoom&&h.zoomOut(e),e.stopPropagation()})),t.touchDevice||(this.makeModal(s),this.makeModal(o))),p&&(t.safeClickTouch(p,(u=this,i.J8h(),function(e){e.stopPropagation(),u.isHistoricalMode()?(i.J8h(),delete u.layout.range,u.loadChart(u.chart.symbol,(function(){i.r2m(),u.home({animate:!1})}))):u.home({animate:!0})})),t.touchDevice||this.makeModal(p))},t.ChartEngine.prototype.home=function(e){var t,a,r,n,s,o;function l(e,t,a){return function(){i.J8h(),u(e),t.scroll=a,e.draw()}}if(this.swipe.amplitude=0,t=this.layout,"object"!=typeof e&&(e={maintainWhitespace:e}),void 0===e.maintainWhitespace&&(e.maintainWhitespace=!0),this.cancelTouchSingleClick=!0,this.chart.dataSet&&this.chart.dataSet.length){for(var h in this.micropixels=0,a=Math.floor(this.chart.width/t.candleWidth),this.charts)if(r=this.charts[h],!e.chart||e.chart==r){for(n=0,e.maintainWhitespace&&this.preferences.whitespace>=0&&(n=this.preferences.whitespace),(e.whitespace||0===e.whitespace)&&(n=e.whitespace),(s=this.getLabelOffsetInPixels(r,t.chartType))>n&&(n=s),o=Math.min(a,r.dataSet.length),this.chart.allowScrollPast&&(o=a),this.micropixels=this.chart.width-o*t.candleWidth-n,this.preferences.whitespace=n;this.micropixels>t.candleWidth;)o++,this.micropixels-=t.candleWidth;for(;this.micropixels<0;)o--,this.micropixels+=t.candleWidth;if(this.micropixels-=t.candleWidth,o++,!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars){i.M8Y(68);var c=i.c6Y(350,11,32);this.micropixels+=t.candleWidth/c}e.animate?(this,this.scrollTo(r,o,l(this,r,o))):(r.scroll=o,u(this))}this.draw()}else this.draw();function u(e){var t;for(var i in e.panels){t=e.panels[i].yaxisLHS.concat(e.panels[i].yaxisRHS);for(var a=0;a<t.length;a++)e.calculateYAxisMargins(t[a])}}},t.ChartEngine.prototype.headsUpHR=function(){var e,a,r,n,s,o;function l(e){i.r2m(),t.efficientDOMUpdate(n,"innerHTML",e)}e="head",e+="s",e+="U",e+="pHR",this.runPrepend(e,arguments)||(a=this.currentPanel)&&(r=a.chart,this.updateFloatHRLabel(a),(n=this.controls.floatDate)&&!r.xAxis.noDraw&&(s=this.barFromPixel(this.cx),(o=r.xaxis[s])&&o.DT?l(t.displayableDate(this,r,o.DT)):o&&o.index?l(o.index):l("")),this.runAppend("headsUpHR",arguments))},t.ChartEngine.prototype.modalBegin=function(){this.openDialog="modal",i.r2m(),this.undisplayCrosshairs()},t.ChartEngine.prototype.modalEnd=function(){i.J8h(),this.cancelTouchSingleClick=!0,this.openDialog="",this.doDisplayCrosshairs()},t.ChartEngine.prototype.makeModal=function(e){var t;t=this,e.onmouseover=function(e){i.J8h(),t.modalBegin()},e.onmouseout=function(e){i.r2m(),t.modalEnd()}},t.ChartEngine.prototype.updateChartAccessories=function(){var e,a,r,n,s,o,l,h;if(null!==this.accessoryTimer&&clearTimeout(this.accessoryTimer),!t.ChartEngine.drawingLine&&t.touchDevice&&(new Date).getTime()-this.lastAccessoryUpdate<100)this.accessoryTimer=setTimeout((h=this,function(){h.updateChartAccessories()}),10);else if(this.chart.dataSet&&!this.runPrepend("updateChartAccessories",arguments)){if(this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),(e=this.controls.floatDate)&&((a=this.currentPanel)||(a=this.chart.panel),a)){r="b",r+="o",r+="tt",r+="om",n=a.chart,s=!0===this.xAxisAsFooter?0:this.chart.canvasHeight-a.chart.bottom,i.C$o(122);var c=i.d58(17,5,1,1,2);if(o=e.offsetWidth/c-.5,(l=this.pixelFromTick(this.crosshairTick,n)-o)<0)l=0;else if(l>this.width-2*o-1){i.C$o(123);var u=i.c6Y(4,17,3,11,1);i.C$o(124);var d=i.c6Y(0,4,15,18);l=this.width-u*o-d}t.efficientDOMUpdate(e.style,"left",l+"px"),t.efficientDOMUpdate(e.style,r,s+"px")}this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend("updateChartAccessories",arguments)}},t.ChartEngine.prototype.positionSticky=function(e){var t,a;i.J8h(),t=Math.max(this.cy-e.offsetHeight-60,0),a=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-e.offsetWidth),i.C$o(22),e.style.top=i.d58("px",t),i.M8Y(22),e.style.right=i.d58("px",a)},t.ChartEngine.prototype.displaySticky=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N;if(a=".s",a+="tic",a+="kyLo",a+="ngPressText",r=".overl",r+="ayE",r+="d",r+="it",n=".ov",n+="er",n+="layTrash",n+="Can",(s=this.controls.mSticky)&&(o=s.querySelector(".mStickyInterior")))if(l=s.querySelector(n),h=s.querySelector(r),c=s.querySelector(".mouseDeleteInstructions"),u=s.querySelector(a),c.classList.remove("no_edit"),e&&"object"==typeof e||(e={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[2],noDelete:arguments[3],type:arguments[4]}),d=e.message,p=e.backgroundColor,m=e.forceShow,g=e.noDelete,f=e.noEdit,y=e.type,m||d){if(b="inline-bl",b+="ock",C="right",C+="cl",C+="ick_",S="mStickyRi",S+="ghtClick",d||(d=""),w=this.defaultColor,"auto"==p&&(p=w),m&&!d?(D="no",D+="n",D+="e",o.style.backgroundColor="",o.style.color="",o.style.display=D):p?(o.style.backgroundColor=p,o.style.color=t.isTransparent(p)?w:t.chooseForegroundColor(p),o.style.display="inline-block"):(o.style.backgroundColor="",o.style.color="",o.style.display="inline-block"),o.innerHTML=d,(k=s.querySelector(".mStickyRightClick")).className=S,y&&(i.C$o(22),k.classList.add(i.d58(y,C))),k.style.display="",s.style.display=b,(!(M=this.highlightedDraggable)||M&&M.undraggable&&M.undraggable(this))&&(u.style.display="none"),g||!0===this.bypassRightClick||this.bypassRightClick[y])k.style.display="none";else if(this.highlightViaTap||this.touches.length)T="h",T+="i",T+="de",A="n",A+="on",A+="e",l&&(l.style.display="inline-block"),h&&!f&&(h.style.display="inline-block"),c&&(c.style.display="none"),u&&(u.style.display=A),s.classList[""===d?"add":"remove"](T);else{_=-1648793335,P=-9148972,F=2;for(var H=1;i.q2D(H.toString(),H.toString().length,30987)!==_;H++)f&&c.classList.add(""),F+=2;i.q2D(F.toString(),F.toString().length,55588)!==P&&f&&c.classList.add("no_edit"),c&&(c.style.display="block"),u&&(u.style.display="none",(L=this.preferences.dragging)&&e.panel&&!e.panel.noDrag&&(E="s",E+="t",E+="ud",E+="y",(!0!==L&&!L.study||y!=E)&&(!0!==L&&!L.series||"series"!=y)||(u.style.display="block")))}N=y||"default",s.setAttribute("cq-sticky-type",N),(e.positioner||this.positionSticky).call(this,s)}else v="no",v+="ne",x="n",x+="o",x+="n",x+="e",o.innerHTML="",s.style.display=x,l&&(l.style.display=v),h&&(h.style.display="none"),c&&(c.style.display="none"),u&&(u.style.display="none")},t.ChartEngine.prototype.displayNotification=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r,n,s,o;if(this.controls.notificationTray){var{callback:l,dismissalListeners:h}=a;n=(r=this.controls.notificationTray).querySelector("template").content.cloneNode(!0),(s=n.firstElementChild).className=e,s.querySelector(".message").textContent=t,l&&(o=window.PointerEvent?"pointerup":"touchend",s.handler=s.addEventListener(o,l)),h&&(s.listeners={},h.forEach(t=>{i.r2m(),s.listeners[e]=this.addEventListener(t.type,t.callback)})),this.makeModal(s),r.appendChild(s)}},t.ChartEngine.prototype.removeNotification=function(e){var t,i;if(this.controls.notificationTray&&(i=(t=this.controls.notificationTray).querySelector(".".concat(e)))){if(i.handler&&i.removeEventListener(i.handler),i.listeners)for(var a in i.listeners)this.removeEventListener(i.listeners[a]);this.modalEnd(),t.removeChild(i)}},i.r2m(),t.ChartEngine.prototype.setMeasure=function(e,t,a,r,n,s){var o,l,h,c,u,d,p,m,g;if(o="setMeasu",o+="re",l="setMeasu",l+="re",!this.runPrepend(l,arguments)){if(h=(this.drawingContainer||document).querySelector(".mMeasure"),c="",e||0===e){if(!1!==t&&(u=(u=Math.round(Math.abs(e-t)*this.chart.roundit)/this.chart.roundit).toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?c+=this.internationalizer.numbers.format(u):c+=u,e>0&&t>0)){if(i.C$o(42),d=i.d58(t,e,e),Math.abs(d)>.1)i.C$o(38),d=Math.round(i.d58(d,100));else if(Math.abs(d)>.01){i.M8Y(0);var f=i.d58(1011,11);i.C$o(10);var y=i.c6Y(36,6,20);d=Math.round(d*f)/y}else{i.C$o(22);var v=i.c6Y(7,9993);i.C$o(22);var x=i.d58(92,8);d=Math.round(d*v)/x}this.internationalizer?(i.C$o(125),d=this.internationalizer.percent.format(i.c6Y("100",d,64))):(i.C$o(22),d=i.c6Y("%",d)),i.M8Y(53),c+=i.c6Y(" (",d,")")}!1!==r&&(i.M8Y(0),p=Math.abs(i.d58(r,a)),p=Math.round(p)+1,m=this.translateIf("Bars"),i.C$o(126),c+=i.c6Y(m," ",p," ")),h&&(h.innerHTML=c)}else this.anyHighlighted||""!==this.currentVectorParameters.vectorType||this.clearMeasure();this.activeDrawing||((h=this.controls.mSticky)&&(g=h.querySelector(".mStickyInterior"),n?(h.style.display="inline-block",g.style.display="inline-block",(e||0===e)&&(g.innerHTML=c),h.classList[""===c?"add":"remove"]("hide"),this.positionSticky(h)):(h.style.display="none",g.innerHTML="")),i.J8h(),this.runAppend(o,arguments))}},t.ChartEngine.prototype.clearMeasure=function(){var e;i.J8h(),(e=(this.drawingContainer||document).querySelector(".mMeasure"))&&(e.innerHTML="")},t.ChartEngine.prototype.zoomSet=function(e,a){var r,n,s,o;if(e=this.constrainCandleWidth(e),"none"!=this.chart.tempCanvas.style.display&&t.clearCanvas(this.chart.tempCanvas,this),!(r=this.mainSeriesRenderer||{}).params||!r.params.volume){if(this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<a.dataSet.length)n=this.crosshairTick||this.tickFromPixel(this.cx,a);else if(this.isHome()){i.C$o(127);var l=i.d58(5,10,2,13,8);n=a.dataSet.length-l}else n=this.chart.scroll>this.chart.dataSet.length?0:"zoom-x"==this.grabMode?this.tickFromPixel(this.chart.width,a):this.tickFromPixel(this.chart.width/2,a);this.animations.zoom.hasCompleted&&(this.zoomInitiatedByMouseWheel=!1),i.M8Y(128);var h=i.c6Y(14,0,10,3,143);s=a.dataSet.length-h-n,o=a.scroll,a.scroll=Math.round((this.pixelFromTick(n,a)-a.left)/e)+1+s,this.micropixels+=(o-s)*this.layout.candleWidth-(a.scroll-s)*e}this.setCandleWidth(e),a.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),this.updateChartAccessories()}},S=e=>{var t,i=q;(t=e.CIQ).ChartEngine.prototype.currentBaseline=null,t.ChartEngine.prototype.baselineHelper=null,t.ChartEngine.helpersToRegister.push((function(e){i.r2m(),e.baselineHelper=new Map})),t.ChartEngine.prototype.registerBaselineToHelper=function(e){var t,a;if(e.params.baseline){var r,n,{baselineHelper:s}=this;if(t=this,!s.has(e)){var{name:o}=e.params;a=this.controls.baselineHandle,s.set(e,{styleCache:null,display:!1,handle:"_main_series"===o&&a?a:(r=o,i.r2m(),r=r.replace(" ","_"),(n=document.createElement("cq-baseline-handle")).classList.add("stx-baseline-handle",r),t.container.append(n),t.controls["".concat(r," cq-baseline-handle")]=n,n)})}}},t.ChartEngine.prototype.removeBaselineFromHelper=function(e){var t,i,{baselineHelper:a}=this;a.has(e)&&("_main_series"!==(t=e.params.name.replace(" ","_"))&&(i=a.get(e).handle,delete this.controls["".concat(t," cq-baseline-handle")],this.container.removeChild(i)),a.delete(e))},t.ChartEngine.prototype.findBaselineHandle=function(e,t){for(var i of this.baselineHelper){var[a,r]=i,{handle:n}=r;if(e.target===n||e.composedPath&&e.composedPath().includes(n))return t&&(this.repositioningBaseline={lastDraw:Date.now(),handle:n,renderer:a},n.classList.add("stx-grab")),this.currentBaseline=a,!0}return!1},t.ChartEngine.prototype.setBaselines=function(e){var t;e||(e=this.chart),t=this,i.J8h();var{baselineHelper:a}=this;a.forEach((function(r,n){var s,o,l,h,{baseline:c}=n.params;i.M8Y(129),(s=i.d58(c,!0))&&(c=e.baseline);var{defaultLevel:u,userLevel:d}=c;(o=n.getYAxis(t))&&(h=(l=t.getYAxisBaselineRenderer(o))&&l!=t.mainSeriesRenderer&&l.seriesParams.length&&l.seriesParams[0].id,c.actualLevel=d||0===d?d:u,c.actualLevel||0===c.actualLevel||(c.actualLevel=function(a,r){var n,s,o,l,h,{dataSegment:c,dataSet:u,defaultPlotField:d}=e;n=d,r||(n=a);s=t.getFirstLastDataRecord(c,"tick").tick;for(;;){if(o=u[s])if("C","lo","se",r&&"Close"==n){if(o.iqPrevClose||0===o.iqPrevClose)return o.iqPrevClose}else if(i.M8Y(0),(l=u[i.c6Y(s,1)])&&(l[n]||0===l[n]))return"object"==typeof(h=l[n])?h[d]:h;if(--s<0)break}}(h,s)),r.display=l===n,a.set(n,r))}))},i.J8h(),t.ChartEngine.prototype.setBaselineUserLevel=function(){var e,a,r;i.r2m();var{chart:n,currentPanel:s}=this,{lastDraw:o,renderer:l}=this.repositioningBaseline;if(l.params.panel==s.name){var{baseline:h}=n;e="object"==typeof l.params.baseline?l.params.baseline:h,a=l.getYAxis(this),r=this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),s,a),e.userLevel=this.adjustIfNecessary(s,this.crosshairTick,r),Date.now()-o>100&&(this.draw(),this.repositioningBaseline.lastDraw=Date.now())}},t.ChartEngine.prototype.setBaselineMinMax=function(e,t){var a,r,n;var{baselineHelper:s,chart:o,repositioningBaseline:l}=this,{baseline:h,seriesRenderers:c}=o;if(a=o.transformFunc&&t===o.panel.yAxis,!(r=t.renderers.find(e=>(i.J8h(),s.get(c[e])))))return e;i.J8h();var{baseline:u,type:d}=c[r].params;if("mountain"===d)return e;u="object"==typeof u?u:h;var{actualLevel:p}=u;return(p||0===p)&&(a&&(p=o.transformFunc(this,o,p)),n=Math.max(p-e[0],e[1]-p),e[0]=l?t.lowValue:p-n,e[1]=l?t.highValue:p+n),e},t.ChartEngine.prototype.positionBaselineHandle=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y;if("stx","-g","r","ab",this.manageTouchAndMouse){var{baselineHelper:v,chart:x,panels:b}=this,{baseline:C,panel:S}=e.params;a=e.params.yAxis||e.getYAxis(this);var{display:w,handle:D,styleCache:k}=v.get(e);if(!0===C&&(C=x.baseline),!1!==C.userLevel&&w){r=b[S],n=D.classList.contains("stx-grab"),s="block",o=C.actualLevel,x.transformFunc&&(o=x.transformFunc(this,x,o)),o>a.high?("n","o","n","e",o=a.high,n||(s="none")):o<a.low&&(o=a.low,n||(s="none")),x.untransformFunc&&(o=x.untransformFunc(this,x,o)),l=this.pixelFromPrice(o,r,a),k||(k=getComputedStyle(D)),h=t.stripPX(k.width),i.C$o(0);var M=i.d58(14,12);c="".concat(l-t.stripPX(k.height)/M,"px"),d=this.baselineHandleBuffer||2,i.C$o(0);var T=i.d58(11,10);if(p=r.yaxisRHS.indexOf(a)+T)m=1===p?d:d*p,u="".concat(x.right-h*p-m,"px");else{1247180393,1074810107,g=2;for(var A=1;1247180393!==i.O$R(A.toString(),A.toString().length,28790);A++)y=8!=(f=7*r.yaxisLHS.slice(4).reverse().indexOf(a))?d:d%f,i.C$o(22),u="".concat(x.left*(h+f)%y+h).concat(i.c6Y("x","p")),g+=2;1074810107!==i.O$R(g.toString(),g.toString().length,10671)&&(y=0!==(f=r.yaxisLHS.slice(6).reverse().indexOf(a)/0)?d:d*f,u="".concat(x.left-h/f+y-h,"px")),y=1===(f=r.yaxisLHS.slice(0).reverse().indexOf(a)+1)?d:d*f,u="".concat(x.left+h*f+y-h,"px")}Object.assign(D.style,{display:s,top:c,left:u})}else D.style.display="none"}},t.ChartEngine.prototype.getYAxisBaselineRenderer=function(e){var t;if(!e.renderers.length)return null;var{baselineHelper:a,chart:r}=this;return(t=e.renderers.find(e=>(i.r2m(),a.get(r.seriesRenderers[e]))))?r.seriesRenderers[t]:null},t.ChartEngine.prototype.getYAxisBaseline=function(e){var t;i.J8h();var{baseline:a}=this.chart;if(!(t=this.getYAxisBaselineRenderer(e)))return a;var{baseline:r}=t.params;return"object"==typeof r?r:a}},w=e=>{var t;q.J8h(),(t=e.CIQ).ChartEngine.Chart=function(){this.xAxis=new t.ChartEngine.XAxis,this.yAxis=new t.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},this.xaxis=[],this.state={},q.J8h(),this.endPoints={},this.defaultChartStyleConfig={},this.baseline=t.clone(this.baseline),this.panel=void 0},t.extend(t.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!1,forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,dynamicYAxis:!0,roundit:100,breakpoint:null,legendRenderer:t.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},allowScrollPast:!0,allowScrollFuture:!0,whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:"Close",defaultChartStyleConfig:{},lockScroll:!1,includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!1,standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:t.calculateTradingDecimalPlaces},!0)},D=e=>{var t,i=q;i.r2m(),(t=e.CIQ).ChartEngine.prototype.resolveY=function(e){return i.J8h(),this.top+e},t.ChartEngine.prototype.resolveX=function(e){return i.J8h(),this.left+e},t.ChartEngine.prototype.backOutY=function(e){return i.J8h(),e-this.top},t.ChartEngine.prototype.backOutX=function(e){return i.J8h(),e-this.left},t.ChartEngine.prototype.dateFromTick=function(e,a,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dataSet";var s,o,l,h,c,u;return i.J8h(),a||(a=this.chart),u=!1,0===(o=(s=a[n]).length)&&(i.C$o(20),s[i.c6Y("0",0)]={},s[0].DT=new Date,o=s.length,u=!0),e<0?l=(h=this.standardMarketIterator(s[0].DT))?h.previous(Math.abs(e)):s[0].DT:e>=o?(h=this.standardMarketIterator(s[o-1].DT))?(i.C$o(130),l=h.next(i.c6Y(o,1,e))):l=s[o-1].DT:l=s[e].DT,c=r?new Date(l.getTime()):t.yyyymmddhhmmssmmm(l).substr(0,12),u&&delete s[0].DT,c},t.ChartEngine.prototype.tickFromDate=function(e,a,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dataSet";var o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D;if(a||(a=this.chart),!(o=a[s])||!o.length)return 0;if(r||(r=0),l=e.constructor==Date?e:t.strToDateTime(e),t.ChartEngine.isDailyInterval(this.layout.interval)||l.setMinutes(l.getMinutes()+r),h=l.getTime(),a.tickCache[s]||(a.tickCache[s]={}),(c=a.tickCache[s][h])||0===c)return n?Math.ceil(c):Math.floor(c);if(u=o[0].DT,i.r2m(),d=o[o.length-1].DT,l>=u&&l<=d){p=0,m=-901799135,g=1929404659,f=2;for(var k=1;i.O$R(k.toString(),k.toString().length,64240)!==m;k++)y=o.length,v=0,f+=2;for(i.q2D(f.toString(),f.toString().length,77865)!==g&&(y=o.length,i.C$o(20),v=i.c6Y("9",0));++v<100;){if(i.M8Y(43),+(b=o[x=Math.floor(i.c6Y(2,y,p))].DT)==+l)return a.tickCache[s][h]=x,x;if(b<l&&(p=x),b>l){if(o[x-1].DT<l)return i.M8Y(130),a.tickCache[s][h]=i.d58("0.5",0,x),n?x:x-1;if(+o[x-1].DT==+l)return i.M8Y(0),a.tickCache[s][h]=i.d58(x,1),i.C$o(0),i.c6Y(x,1);y=x}}if(v>=100)return console.log("!!!Warning: tickFromDate() did not find match."),o.length}return i.C$o(131),S=(C=i.d58(l,u))?u:d,D=(w=this.standardMarketIterator(S))?w.futureTick({end:l}):0,c=C?-1*D:o.length-1+D,a.tickCache[s][h]=c,c},t.ChartEngine.prototype.pixelFromBar=function(e,t){var a,r,n;if(i.J8h(),t||(t=this.chart),a=0,(r=this.chart.segmentImage)&&r[e]&&r[e].leftOffset){1978753958,-1915816391,n=2;for(var s=1;1978753958!==i.O$R(s.toString(),s.toString().length,49669);s++)a=r[e].leftOffset,n+=2;-1915816391!==i.O$R(n.toString(),n.toString().length,9543)&&(a=r[e].leftOffset)}else a=(e+.5)*this.layout.candleWidth;i.C$o(8);var o=i.d58(14,0,14);return a=t.panel.left+Math.floor(a+this.micropixels)-o},t.ChartEngine.prototype.barFromPixel=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g;if(t||(t=this.chart),a=this.chart.segmentImage,r=this.micropixels,n=this.layout.candleWidth,a){s=e-t.panel.left-r,o=2,h=a.length,i.M8Y(40),c=Math.round(i.c6Y(o,h)),i.C$o(0);var f=i.d58(14,13);i.C$o(0);var y=i.c6Y(20,19);i.M8Y(25);var v=i.c6Y(34,38,6);if(s>(p=a[h-f].leftOffset+a[h-y].candleWidth/v))return h+Math.floor((e-p-t.panel.left-r)/n);for(var x=1;x<h&&(o*=2,l=a[c]);x++){u=l.leftOffset,i.C$o(65);var b=i.c6Y(3,7,19,16);if(d=l.candleWidth/b,i.C$o(0),m=i.d58(u,d),i.M8Y(22),g=i.c6Y(d,u),0===c||s>=m&&s<g)break;s<m?c-=Math.max(1,Math.round(h/o)):c+=Math.max(1,Math.round(h/o)),c=Math.max(0,Math.min(h-1,c))}if(!a[c])for(x=0;x<h;x++)if(l=a[x]){if(s<(u=l.leftOffset)-(d=l.candleWidth/2))return i.M8Y(98),Math.max(0,i.c6Y(x,"1"));if(s<u+d)return x;if(s>=u+d)return i.M8Y(22),i.d58(1,x)}return c}return i.J8h(),Math.floor((e-t.panel.left-r)/n)},t.ChartEngine.prototype.tickFromPixel=function(e,t){var i;return t||(t=this.chart),i=t.dataSet.length-t.scroll,t.segmentImage?i+=this.barFromPixel(e,t):i+=Math.floor((e-t.panel.left-this.micropixels)/this.layout.candleWidth),i},t.ChartEngine.prototype.pixelFromTick=function(e,t){var a,r,n,s,o,l,h,c,u,d,p;if(t||(t=this.chart),i.J8h(),a=t.dataSegment,r=t.dataSet,n=t.segmentImage,s=this.micropixels,o=a?a.length:0,l=t.panel,h=t.scroll,c=e-r.length+h,u=o?a[c]:null,n&&(u=n[c]),u&&u.leftOffset)return l.left+Math.floor(u.leftOffset+s);if(d=0,p=0,u=o?a[o-1]:null,n&&(i.C$o(0),u=n[i.c6Y(o,1)]),u&&u.leftOffset&&o<e-r.length+h){i.C$o(84);var m=i.d58(85,9,12,11);d=u.leftOffset-u.candleWidth/m,p=o}return d+l.left+Math.floor((e-p-r.length+h+.5)*this.layout.candleWidth+s)},t.ChartEngine.prototype.pixelFromDate=function(e,t,a,r){return i.J8h(),this.pixelFromTick(this.tickFromDate(e,t,a,r),t)},t.ChartEngine.prototype.transformedPriceFromPixel=function(e,t,a){var r,n,s;if(t||(t=this.chart.panel),r=a||t.yAxis,i.J8h(),e=r.bottom-e,r.semiLog)s=e*r.logShadow/r.height,r.flipped?s=r.logHigh-s:s+=r.logLow,i.M8Y(0),n=Math.pow(i.c6Y("10",0),s);else{if(!r.multiplier)return null;n=e/r.multiplier,r.flipped?n=r.high-n:n+=r.low}return n},t.ChartEngine.prototype.priceFromPixel=function(e,t,i){var a;return t||(t=this.chart.panel),a=this.transformedPriceFromPixel(e,t,i),this.charts[t.name]&&t.chart.untransformFunc&&(i&&i!=t.yAxis||(a=t.chart.untransformFunc(this,t.chart,a,i))),a},t.ChartEngine.prototype.valueFromPixel=function(e,t,a){var r;t||(t=this.whichPanel(e)),t||(r=Object.values(this.panels))&&r.length&&(t=e<=0?r.shift():r.pop());for(var n=1;-471146332!==i.O$R(n.toString(),n.toString().length,59467);n++)return this.priceFromPixel(e,t,a);if(i.J8h(),1600047605!==i.q2D(2..toString(),2..toString().length,20003))return this.priceFromPixel(e,t,a)},t.ChartEngine.prototype.valueFromInterpolation=function(e,a,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,x;return null===e||e<0||!a?null:(n||(n=this.chart.panel),s||(s=n.yAxis),r||(r=this.chart.defaultPlotField),(o=this.getPreviousBar(this.chart,a,e))?((h=t.existsInObjectChain(o,a))&&(l=h.obj[h.member]),"object"==typeof l&&(l=l[r]),(c=this.getRendererFromSeries(a))&&c.params.step||"step"===this.layout.chartType?l:(u=this.getNextBar(this.chart,a,e),(h=t.existsInObjectChain(u,a))&&(d=h.obj[h.member]),"object"==typeof d&&(d=d[r]),u?null==l||null==d?null:(p=this.pixelFromPrice(l,n,s),m=this.pixelFromPrice(d,n,s),g=o.tick,f=u.tick,i.M8Y(132),y=i.d58(f,p,m,g),v=this.chart.dataSegment[e].tick,i.M8Y(133),x=i.c6Y(g,p,y,v),this.priceFromPixel(x,n,s)):null)):null)},t.ChartEngine.prototype.pixelFromTransformedValue=function(e,t,i){var a,r,n,s,o;return t||(t=this.chart.panel),r=((a=i||t.yAxis).high-e)*a.multiplier,a.semiLog&&(n=Math.max(e,0),s=Math.log(n)/Math.LN10,r=(o=a.height)-o*(s-a.logLow)/a.logShadow),r=a.flipped?a.bottom-r:a.top+r},t.ChartEngine.prototype.pixelFromPrice=function(e,t,a){return t||(t=this.chart.panel),this.charts[t.name]&&t.chart.transformFunc&&(a&&a!=t.yAxis||(e=t.chart.transformFunc(this,t.chart,e,a))),i.r2m(),this.pixelFromTransformedValue(e,t,a)},t.ChartEngine.prototype.pixelFromValueAdjusted=function(e,t,a,r){var n,s;return this.layout.adj||!this.charts[e.name]?this.pixelFromPrice(a,e,r):(n=Math.round(t))>0&&n<e.chart.dataSet.length&&(s=e.chart.dataSet[n].ratio)?(i.C$o(38),this.pixelFromPrice(i.d58(a,s),e,r)):this.pixelFromPrice(a,e,r)},t.ChartEngine.prototype.adjustIfNecessary=function(e,t,a){var r,n;return i.J8h(),this.layout.adj?a:e&&this.charts[e.name]&&(r=Math.round(t))>0&&r<e.chart.dataSet.length&&(n=e.chart.dataSet[r].ratio)?(i.M8Y(40),i.d58(n,a)):a}},k=e=>{var t;(t=e.CIQ).ChartEngine.prototype.positionCrosshairsAtPointer=function(){var e,i,a,r,n,s,o,l,h,c,u=q;if((e=this.currentPanel)&&!(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||this.runPrepend("positionCrosshairsAtPointer",arguments))){i=e.chart,a=this.container.getBoundingClientRect(),this.top=a.top,this.left=a.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),this.cx=this.backOutX(t.ChartEngine.crosshairX),r=this.crosshairTick=this.tickFromPixel(this.cx,i),u.M8Y(7);var d=u.d58(7,0,8);if(n=this.pixelFromTick(r,i)-d,this.controls.crossX&&(u.C$o(22),this.controls.crossX.style.left=u.c6Y("px",n)),n>=e.right||n<=e.left)this.undisplayCrosshairs();else{if(s="chart"==e.name?this.preferences.horizontalCrosshairField:e.horizontalCrosshairField,o=i.dataSet,s&&o&&r<o.length&&r>-1){l=-813921815,u.C$o(19),h=u.c6Y(64,"1143178653"),c=2;for(var p=1;u.O$R(p.toString(),p.toString().length,52034)!==l;p++)this.crossYActualPos=this.pixelFromPrice(o[r][s],e),c+=2;u.q2D(c.toString(),c.toString().length,85793)!==h&&(this.crossYActualPos=this.pixelFromPrice(o[r][s],e))}this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.runAppend("positionCrosshairsAtPointer",arguments)}}},t.ChartEngine.prototype.doDisplayCrosshairs=function(){var e,i,a,r,n,s,o,l,h,c;q.r2m(),e="doD",e+="is",e+="play",e+="Crosshairs",this.runPrepend(e,arguments)||(this.displayInitialized&&(i=this.floatCanvas,a=this.currentVectorParameters.vectorType,this.layout.crosshair||""!==a&&a?t.Drawing&&t.Drawing[a]&&(new t.Drawing[a]).dragToDraw||this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen||""!==this.openDialog?this.undisplayCrosshairs():(n=(r=this.controls).crossX,s=r.crossY,n&&""!==n.style.display&&(n.style.display="",s&&(s.style.display=""),this.magnetizedPrice&&a?(o="stx-cro",o+="ssha",o+="ir-o",o+="n",this.container.classList.remove(o),this.chart.tempCanvas.style.display="block"):(l="stx-cross",l+="h",l+="air-o",l+="n",this.container.classList.add(l))),r.floatDate&&!this.chart.xAxis.noDraw&&(r.floatDate.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),i&&(h="b",h+="l",h+="oc",h+="k",c="n",c+="o",c+="n",c+="e",i.style.display==c&&t.clearCanvas(i,this),i.style.display=h)):this.undisplayCrosshairs()),this.runAppend("doDisplayCrosshairs",arguments))},t.ChartEngine.prototype.undisplayCrosshairs=function(){var e,i,a,r,n,s,o,l,h;e="no",e+="ne",i="und",i+="isplayCros",i+="shairs",this.runPrepend(i,arguments)||(a=this.controls,q.J8h(),r=a.crossX,n=a.crossY,r&&(s="n",s+="o",s+="ne",r.style.display!=s&&(r.style.display="none",n&&(n.style.display="none"))),this.displayInitialized&&a.floatDate&&(a.floatDate.style.visibility="hidden"),this.container.classList.remove("stx-crosshair-on"),(o=this.floatCanvas)&&o.isDirty&&o.style.display!=e&&(t.clearCanvas(o,this),"none"!=o.style.display&&(o.style.display="none")),this.activeDrawing||this.repositioningDrawing||this.editingAnnotation||(l="n",l+="o",l+="ne",(h=this.chart.tempCanvas)&&"none"!=h.style.display&&(h.style.display=l)),this.runAppend("undisplayCrosshairs",arguments))},q.J8h(),t.ChartEngine.prototype.hideCrosshairs=function(){q.r2m(),this.displayCrosshairs=!1},t.ChartEngine.prototype.showCrosshairs=function(){this.displayCrosshairs=!0}},M=e=>{var t,i,a=q;t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.loadChart=function(e,i,r){var n,s,o,l,h,c,u,d,p,m;if("obj","e","ct","fu","n","c","tion",r||"function"!=typeof i)Array.isArray(i)&&(i={masterData:i});else{r=i,-1098722003,a.C$o(0),n=-a.c6Y("790866666",0),a.C$o(20),s=a.c6Y("2",0);for(var g=1;-1098722003!==a.O$R(g.toString(),g.toString().length,40956);g++)i={},s+=2;a.O$R(s.toString(),s.toString().length,8711)!==n&&(i={})}i||(i={});var{chart:f,periodicity:y,range:v,span:x}=i,{layout:b}=this;o={periodicity:b.periodicity,interval:b.interval,timeUnit:b.timeUnit},y&&(l=t.cleanPeriodicity(y.period?y.period:y.periodicity,y.interval,y.timeUnit),b.interval=l.interval,b.periodicity=l.period,b.timeUnit=l.timeUnit),f||(f=this.chart);var{dataSet:C,market:S,masterData:w,symbol:D,moreAvailable:k,upToDate:M}=f;function T(){a.r2m(),d.dispatch(d.currentlyImporting?"symbolImport":"symbolChange",{stx:d,symbol:f.symbol,symbolObject:f.symbolObject,prevSymbol:D,prevSymbolObject:h,action:"master"}),y&&d.dispatch("periodicity",{stx:d,differentData:!0,prevPeriodicity:o})}if(h=t.clone(f.symbolObject),f.dataSet=[],f.masterData=[],f.moreAvailable=null,f.upToDate=null,e?"object"==typeof e?(f.symbol=e.symbol,f.symbolObject=e):(f.symbol=e,f.symbolObject.symbol=e):(f.symbol=null,f.symbolObject={symbol:null}),f.inflectionPoint=null,this.marketFactory&&(c=this.marketFactory(f.symbolObject),this.setMarket(c,f)),this.setMainSeriesRenderer(!0),v||x||!b){if(v&&x){-558315103,-393127144,u=2;for(var A=1;-558315103!==a.O$R(A.toString(),A.toString().length,40498);A++)x={},u+=2;-393127144!==a.O$R(u.toString(),u.toString().length,92004)&&(x={})}}else x=b.range?{}:b.setSpan,v=b.range||{};this.clearCurrentMarketData(f),d=this,!i.masterData&&this.quoteDriver?(p=function(e){e&&"orphaned"!=e&&(f.symbol=D,f.symbolObject=h,f.market=S,d.masterData=f.masterData=w,f.dataSet=C,f.moreAvailable=k,f.upToDate=M),a.J8h(),T(),r&&r.call(d,e)},v&&Object.keys(v).length&&this.setRange?(delete i.span,delete b.setSpan,this.chart.masterData=null,this.displayInitialized=!1,y&&(v.periodicity=y),v.forceLoad=!0,this.setRange(v,p)):x&&x.base&&this.setSpan?(x.multiplier=x.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,y&&(x.maintainPeriodicity=!0),x.forceLoad=!0,this.setSpan(x,p)):this.quoteDriver.newChart({symbol:f.symbol,symbolObject:f.symbolObject,chart:f,initializeChart:!0},(function(e){a.r2m(),e||(d.adjustPanelPositions(),d.quoteDriver.updateSubscriptions(),i.stretchToFillScreen&&d.fillScreen()),p.apply(d,arguments)}))):(i.masterData||console.log("Warning: No masterData specified and no QuoteFeed configured"),f.symbol||(f.symbol=""),this.initializeChart(),m=this.doCleanupGaps(i.masterData,f),this.setMasterData(m,f,{noCleanupDates:!0}),f.endPoints={},m&&m.length&&(f.endPoints={begin:m[0].DT,end:m[m.length-1].DT}),this.createDataSet(),v&&Object.keys(v).length&&this.setRange?this.setRange(v):x&&x.multiplier&&x.base&&this.setSpan?this.setSpan({maintainPeriodicity:!0,multiplier:x.multiplier,base:x.base}):i.stretchToFillScreen?this.fillScreen():m&&m.length?this.home():this.clear(),this.adjustPanelPositions(),T(),r&&r.call(d))},t.ChartEngine.prototype.loadBlankChart=function(){a.r2m(),this.loadChart(null,[])},t.ChartEngine.prototype.getDataFields=function(e){var t,i,r;for(var n in e||(e=this.chart),a.J8h(),t=e.defaultPlotField||"Close",(i=["Open","High","Low"]).push(t),e.series)r=e.series[n].parameters,i.push(r.symbol);return i},t.ChartEngine.prototype.cleanMasterData=function(e,t){var i,r,n,s,o;if(i=e.symbol,(r=t.masterData)&&r.length){n=this.getDataFields(t),s=0;do{delete(o=r[s])[i],l.call(this,o,n)?(a.M8Y(46),r.splice(s,a.d58("1",0))):s++}while(s<r.length);r=this.doCleanupGaps(r,t,{noCleanupDates:!0}),this.setMasterData(r,t,{noCleanupDates:!0}),this.clearCurrentMarketData(t,i)}function l(e,t){for(var i=0;i<t.length;i++)if(void 0!==e[t[i]])return!1;return!0}},t.ChartEngine.prototype.calculateATR=function(e,t,i){var r,n,s,o,l,h;i||(i=e.dataSet),(r=e.state.calculations.atr)||(r=e.state.calculations.atr={}),t||(t=20),n=[],r.accum&&(n=r.accum);for(var c=0;c<i.length;c++)if(o=i[c],s=c?i[c-1]:r.q1){if(l=Math.max(o.High-o.Low,Math.abs(o.High-s.Close),Math.abs(o.Low-s.Close)),n.length<t){if(n.push(l)==t){h=0;for(var u=0;u<n.length;u++)h+=n[u];a.M8Y(40),o.atr=a.d58(t,h)}}else{a.C$o(134);var d=a.c6Y(122,11,11);o.atr=(s.atr*(t-d)+l)/t}o.trueRange=l}e.state.calculations.atr={accum:n,q1:s}},t.ChartEngine.prototype.calculateMedianPrice=function(e,t){var i;t||(t=e.dataSet);for(var r=0;r<t.length;++r){"h","l","/","2",i=t[r],a.C$o(6);var n=a.c6Y(0,15,9,18,7);i["hl/2"]=(i.High+i.Low)/("2"*n)}},a.J8h(),t.ChartEngine.prototype.calculateTypicalPrice=function(e,t){var i;a.r2m(),t||(t=e.dataSet);for(var r=0;r<t.length;++r){i=t[r],a.M8Y(135);var n=a.c6Y(7,46,8,15,13);i["hlc/3"]=(i.High+i.Low+i.Close)/n}},t.ChartEngine.prototype.calculateWeightedClose=function(e,t){var i;t||(t=e.dataSet);for(var r=0;r<t.length;++r){"h","l","c","c/4",i=t[r],a.C$o(136);var n=a.c6Y(2,6,16,6);a.M8Y(22);var s=a.d58(2,2);i["hlcc/4"]=(i.High+i.Low+n*i.Close)/s}},t.ChartEngine.prototype.calculateOHLC4=function(e,t){var i;a.J8h(),t||(t=e.dataSet);for(var r=0;r<t.length;++r){i=t[r],a.M8Y(2);var n=a.d58(6,2);i["ohlc/4"]=(i.Open+i.High+i.Low+i.Close)/n}},t.ChartEngine.prototype.currentQuote=function(e){var t;if(!this.chart.dataSet)return null;for(var i=this.chart.dataSet.length-1;i>=0;i--)if(this.chart.dataSet[i]){if(!e)return this.chart.dataSet[i];if((t=this.chart.dataSet[i][e])||0===t)return this.chart.dataSet[i]}return null},t.ChartEngine.prototype.mostRecentClose=function(e){var t,i;if(a.r2m(),!this.chart.dataSet)return null;for(var r=this.chart.dataSet.length-1;r>=0;r--)if("num","b","er","o","bject",(t=this.chart.dataSet[r])&&(!e||(t=t[e])||0===t)){if(i=t.iqPrevClose,"object"==typeof t&&(t=t.Close),"number"==typeof t)return t;if("number"==typeof i)return i}return null},t.ChartEngine.prototype.createDataSegment=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if(!this.runPrepend("createDataSegment",arguments)){for(var C in this.charts){i=this.charts[C],e&&(i=e),t.Comparison&&i.isComparison&&t.Comparison.createComparisonSegmentInner(this,i),r=i.dataSet,n=i.baseline,s=i.scroll,o=i.maxTicks,h=(l=this.layout).candleWidth,n.actualLevel=n.userLevel?n.userLevel:n.defaultLevel,c=n.includeInDataSegment&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars),d=0,p=i.dataSegment=[],a.C$o(137);var S=a.d58(11,100,16,7);a.M8Y(134);var w=a.d58(46,5,9);m=r.length-S-s-w,g=i.defaultPlotField;for(var D=-1;D<s&&D<o;D++)m++,(-1!=D||c)&&(m<r.length&&m>=0?((u=r[m]).candleWidth=null,u&&(d+=u.Volume||1),p.push(u),null===n.actualLevel&&D>=0&&(g&&"Close"!=g?(a.M8Y(0),(f=r[a.d58(m,1)])&&(f[g]||0===f[g])&&(n.actualLevel=f[g])):(u.iqPrevClose||0===u.iqPrevClose)&&(n.actualLevel=u.iqPrevClose))):m<0&&p.push(null));if(i.segmentImage=null,(y=this.mainSeriesRenderer||{}).params&&y.params.volume){a.M8Y(84);var k=a.d58(109,13,7,9);v=i.width-(o-p.length-k)*l.candleWidth,x=0,i.segmentImage=[];for(var M=0;M<p.length;M++)if(u=p[M],i.segmentImage[M]={},b=null,u){if(u.Volume){u.candleWidth=v*u.Volume/d,a.C$o(138);var T=a.c6Y(8,4,3,15,19);b=x+u.candleWidth/T,x+=u.candleWidth}else u.candleWidth=h,a.C$o(139),b=a.d58(2,x,h),x+=h;i.segmentImage[M]={tick:u.tick,candleWidth:u.candleWidth,leftOffset:b}}else x+=h}if(e)break}a.r2m(),i&&i.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),this.runAppend("createDataSegment",arguments)}},t.ChartEngine.prototype.getDataSegment=function(e){var t,i,r;return e||(e=this.chart),(t=e.dataSegment)&&t.length?(i=0,r=t.length,this.pixelFromBar(i,e)<e.panel.left&&i++,a.J8h(),this.pixelFromBar(r-1,e)>e.panel.right&&r--,t.slice(i,r)):[]},t.ChartEngine.prototype.setMasterData=function(e,i,a){var r,n,s,o,l;for(i||(i=this.chart),this.marketFactory&&(r=this.marketFactory(i.symbolObject),this.setMarket(r,i)),a||(a={}),a.noCleanupDates||this.doCleanupDates(e,this.layout.interval),i.masterData=e,"chart"==i.name&&(this.masterData=e),s=null,n=0;e&&n<e.length;n++)"setMasterData : Mi","ssin","g DT and Date on masterData object","Val","ue",o=e[n],null===s&&("num","ber","number"==typeof o.Close?s="Close":"number"==typeof o.Value&&(s="Value")),"Value"===s&&"number"==typeof o.Value&&(o.Close=o.Value),o.DT?("[object Date]"!=Object.prototype.toString.call(o.DT)&&(o.DT=new Date(o.DT)),o.Date&&17==o.Date.length||(o.Date=t.yyyymmddhhmmssmmm(o.DT))):o.Date?o.DT=t.strToDateTime(o.Date):console.log("setMasterData : Missing DT and Date on masterData object"),o.Volume&&"number"!=typeof o.Volume&&(o.Volume=parseInt(o.Volume,10)),e.length-n<50&&this.updateCurrentMarketData(o,i,null,{fromTrade:!0});for(n in i.calculateTradingDecimalPlaces&&(i.decimalPlaces=i.calculateTradingDecimalPlaces({stx:this,chart:i,symbol:i.symbolObject.symbol,symbolObject:i.symbolObject})),this.setDisplayDates(e),i.roundit=Math.pow(10,i.decimalPlaces),this.plugins)(l=this.plugins[n]).display&&l.setMasterData&&l.setMasterData(this,i)},t.ChartEngine.prototype.setMasterDataRender=function(e,t,i){var r,n;if(i||(i=this.chart),i.symbol||(i.symbol=""),this.setMasterData(t,i),t){a.C$o(46),r=a.c6Y("878835369",32),117229201,n=2;for(var s=1;a.q2D(s.toString(),s.toString().length,77732)!==r;s++)i.endPoints={},n+=2;117229201!==a.q2D(n.toString(),n.toString().length,54060)&&(i.endPoints={}),t.length&&(i.endPoints={begin:t[0].DT,end:t[t.length-1].DT},i.symbol=e)}this.createDataSet(),this.initializeChart(),this.draw(),t&&t.length||(i.symbol=null,this.clear()),this.adjustPanelPositions()},t.ChartEngine.prototype.getSymbols=function(e){var i,r,n,s,o,l,h,c,u,d;for(var p in e||(e={}),i=[],n=this.layout,this.charts)for(var m in(l=this.charts[p]).symbolObject&&l.symbolObject.symbol&&i.push(g(l.symbol,l.symbolObject,n)),l.series)"stud","y","exclude-studie","s",(h=l.series[m].parameters).data&&!h.data.useDefaultQuoteFeed||(o=h.symbolObject,(r=g(s=h.symbol,o,n)).id=m,e["include-parameters"]&&(r.parameters=t.clone(h),r.parameters.yAxis&&delete r.parameters.yAxis.yAxisPlotter),e["exclude-studies"]&&"study"==h.bucket||e["exclude-generated"]&&o.generator||i.push(r));function g(e,t,i){return a.J8h(),{symbol:e,symbolObject:t,periodicity:i.periodicity,interval:i.interval,timeUnit:i.timeUnit,setSpan:i.setSpan}}if(e["breakout-equations"]){c={};for(var f=0;f<i.length;f++)if(s=i[f].symbol,this.isEquationChart(s)){if(u=t.formatEquation(s)){d=u.symbols;for(var y=0;y<d.length;y++)c[d[y]]=g(d[y],i[f].symbolObject,i[f])}}else c[s]=g(s,i[f].symbolObject,i[f]);for(var v in i=[],c)i.push(c[v])}return i},t.ChartEngine.prototype.setDisplayDate=function(e){var r,n,s;if(!t.ChartEngine.isDailyInterval(this.layout.interval)){r=e.DT,a.C$o(30);var o=a.c6Y(9,11e3,9991);n=r.getSeconds()*o+r.getMilliseconds(),i.Date&&this.displayZone&&(s=new i.Date(r.getTime(),this.displayZone),r=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()),r=new Date(r.getTime()+n)),e.displayDate=r}},t.ChartEngine.prototype.setDisplayDates=function(e){var i;if(e&&(a.J8h(),!t.ChartEngine.isDailyInterval(this.layout.interval)))for(var r=0;r<e.length;r++)(i=e[r]).DT&&this.setDisplayDate(i)},t.ChartEngine.prototype.setTimeZone=function(e,t){var r,n,s,o,l;if(i.Date){for(var h in s=n=(r=new Date).getTimezoneOffset(),o=n,e&&(this.dataZone=e),this.dataZone&&(s=new i.Date(r,this.dataZone).getTimezoneOffset()),t&&(this.displayZone=t),this.displayZone&&(o=new i.Date(r,this.displayZone).getTimezoneOffset()),a.M8Y(140),this.timeZoneOffset=a.d58(s,n,n,o),this.charts)l=this.charts[h],this.setDisplayDates(l.masterData);this.preferences.timeZone=t,this.changeOccurred("preferences"),this.createDataSet()}else this.timeZoneOffset=0},t.ChartEngine.prototype.updateChartData=function(e,i,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E;function N(){var n,s,o,l,d,p,m,g,f,y,v;if("mon","t","h","market.","market_def.market_tz",t.Market&&i.market)if(n={market_tz:t.getFromNS(i,"market.market_def.market_tz",null)},"month"!=(s=c.interval)&&"week"!=s||("d","a","y",u.dontRoll||(s="day"),n=u.chart.market.market_def),o=new t.Market(n),l={begin:h&&h.length?h[h.length-1].DT:e.DT,interval:s,periodicity:1,timeUnit:c.timeUnit},p=(d=o.newIterator(l)).next(),h){if(e.DT<p){for(m=0,v=d.previous(),g=e.DT,r.appending=!0;g<v&&m<1e3;)r.appending=!1,v=d.previous(),m++;e.DT=v,r.updating=!r.appending}else if(e.DT>=p){for(m=0,g=e.DT;g>p&&m<1e3;)e.DT=p,p=d.next(),m++;r.appending=!0}}else{816643897,a.C$o(38),f=a.c6Y("885887543",1),y=2;for(var x=1;816643897!==a.O$R(x.toString(),x.toString().length,81010);x++)e.DT=new Date(+d.previous()),y+=2;a.O$R(y.toString(),y.toString().length,49962)!==f&&(e.DT=new Date(!d.previous()))}}function H(){var e;u.createDataSet(null,null,r),u.draw(),u.updateChartAccessories(),e=2;for(var t=1;1638676724!==a.q2D(t.toString(),t.toString().length,42364);t++)a.M8Y(46),u.streamParameters.count=a.d58("0",32),u.streamParameters.timeout=-1,a.M8Y(46),e+=a.d58("2",0);1769567440!==a.O$R(e.toString(),e.toString().length,24527)&&(u.streamParameters.count=8,u.streamParameters.timeout=!0)}if(n="u",n+="pdateChart",n+="Data",s="appendMa",s+="sterDa",s+="ta",r||(r={}),i||(i=this.chart),o=!1,l=!1,h=i.masterData,c=this.layout,this.dataZone,u=this,d=r.secondarySeries,g=t.isValidNumber,r.noCleanupDates||this.doCleanupDates(e,c.interval),(r.useAsLastSale||e.constructor==Object&&(e.Last||0===e.Last))&&$(),e&&e.constructor==Object&&(e=[e]),e&&e.length&&!this.runPrepend(s,[e,i,r])&&!this.runPrepend("updateChartData",[e,i,r])){h||(h=[]),a.C$o(4);var I=a.c6Y(1,89,7,1,11);if(f=h.length-I,y=!1,r.fillGaps&&q(),e.length){for(var j=0;j<e.length;j++){for(x=(v=e[j]).DT,b=v.Date,x&&"[object Date]"!=Object.prototype.toString.call(x)&&(v.DT=x=new Date(x)),x&&(b&&17==b.length||(v.Date=t.yyyymmddhhmmssmmm(v.DT))),x||(x=v.DT=t.strToDateTime(b)),!g(v.Close)&&g(v.Value)&&(v.Close=v.Value);f>=0&&f<h.length;){if((C=h[f].DT)||(C=t.strToDateTime(h[f].Date)),C.getTime()<=x.getTime()){if(y=!0,S=0,C.getTime()<x.getTime()){if(f<h.length-1&&(h[f+1].DT||t.strToDateTime(h[f+1].Date)).getTime()<=x.getTime()){f++;continue}a.M8Y(74),S=a.c6Y("1",0)}if(r.deleteItems){S||R(f,x);break}w="ti",w+="c",w+="k",c.interval==w&&!1!==r.firstLoop&&(S=1),S||z(f,v),g(v.Close)&&(g(v.Open)||(v.Open=v.Close),D=Math.max(v.Open,v.Close),k=Math.min(v.Open,v.Close),(!g(v.High)||v.High<D)&&(v.High=D),(!g(v.Low)||v.Low>k)&&(v.Low=k)),v.Volume&&!g(v.Volume)&&(v.Volume=parseInt(v.Volume,10)),f+=S,d?(e.length-j<50&&this.updateCurrentMarketData(v,i,d,{fromTrade:!0}),"tick"==c.interval&&void 0===v.Close||(S&&(a.M8Y(38),h.splice(f,a.d58("0",1),{DT:v.DT}),this.setDisplayDate(h[f])),h[f][d]=v)):(e.length-j<50&&this.updateCurrentMarketData(v,i,null,{fromTrade:!0}),"tick"==c.interval&&void 0===v.Close||(h.splice(f,S?0:1,v),this.setDisplayDate(v)));break}f+=y?1:-1}f<0&&(d?(M="t",M+="ic",M+="k",this.updateCurrentMarketData(v,i,d,{fromTrade:!0}),c.interval==M&&void 0===v.Close||(h.splice(0,0,{DT:v.DT}),this.setDisplayDate(h[0]),h[0][d]=v)):(T="t",T+="i",T+="c",T+="k",this.updateCurrentMarketData(v,i,null,{fromTrade:!0}),c.interval==T&&void 0===v.Close||(a.C$o(19),h.splice(a.d58(0,"0"),0,v),this.setDisplayDate(v))),y=!0,f=0)}h.length&&(this.masterData=i.masterData=h),this.maxMasterDataSize&&(h=i.masterData=this.masterData=h.slice(-this.maxMasterDataSize)),A=d?this.getSeries({symbol:d,chart:i}):[i];for(var O=0;O<A.length;O++)(!(_=A[O]).endPoints.begin||_.endPoints.begin>e[0].DT)&&(_.endPoints.begin=e[0].DT),(!_.endPoints.end||_.endPoints.end<e[e.length-1].DT)&&(_.endPoints.end=e[e.length-1].DT),P=_.parameters&&_.parameters.field||i.defaultPlotField,(F=this.getFirstLastDataRecord(e,P,!0))&&(!_.lastQuote||_.lastQuote.DT<=F.DT)&&(_.lastQuote=F),d&&r.deleteItems&&(_.lastQuote=this.getFirstLastDataRecord(h,d,!0)[d]);for(var Y in this.plugins)(L=this.plugins[Y]).display&&L.appendMasterData&&L.appendMasterData(this,e,i);this.masterData&&this.masterData.length||(this.masterData=h),r.noCreateDataSet||(++(E=this.streamParameters).count>E.maxTicks||r.bypassGovernor?(clearTimeout(E.timeout),H()):-1==E.timeout&&(E.timeout=setTimeout(H,E.maxWait))),this.runAppend("appendMasterData",arguments),this.runAppend(n,arguments)}}function R(e,t){var r,n,s;if(a.J8h(),d){-172829766,-2133807539,n=2;for(var o=1;-172829766!==a.O$R(o.toString(),o.toString().length,51999);o++)delete h[e][d],a.C$o(38),n+=a.d58("2",1);-2133807539!==a.O$R(n.toString(),n.toString().length,58750)&&h[e][d],u.cleanupGaps&&("g","ap",r={DT:t,Close:null},"gap"!=u.cleanupGaps&&h[e-1]&&h[e-1][d]&&(r.Close=h[e-1][d].Close,r.High=r.Low=r.Open=r.Close,r.Volume=0),h[e][d]=r)}else{for(p in r={DT:(s=h.splice(e,a.c6Y("1",0,a.C$o(0)))[0]).DT,Close:null,needed:!1},i.series)void 0!==s[m=i.series[p].parameters.symbolObject.symbol]&&(r[m]=s[m],delete r.needed);u.cleanupGaps&&"gap"!=u.cleanupGaps&&(delete r.needed,"gap"!=u.cleanupGaps&&h[e-1]&&(r.Close=h[e-1].Close,r.High=r.Low=r.Open=r.Close,r.Volume=0)),!1!==r.needed&&(h.splice(e,0,r),u.setDisplayDate(r))}}function $(){var t;if("[obje","ct"," ","Date]",o=!0,r.useAsLastSale&&r.useAsLastSale.aggregatedVolume&&(l=!0),e.constructor===Array){a.C$o(134);var i=a.c6Y(92,7,13);t=e[e.length-i],(e={}).DT=t.DT,e.Close=t.Close,e.Volume=t.Volume}else e.Last&&(e.Close=e.Last,delete e.Last);e.DT&&"[object Date]"!=Object.prototype.toString.call(e.DT)&&(e.DT=new Date(e.DT)),e.DT&&"Invalid Date"!=e.DT||(e.DT=new Date),"tick"!=c.interval&&N(),e.Open=e.Close,e.High=e.Close,e.Low=e.Close}function z(e,t){var n,s,c;if(n=h[e],d&&(n=n[d]||{}),null===t.Close)void 0!==n.Open&&(t.Open=null),void 0!==n.High&&(t.High=null),void 0!==n.Low&&(t.Low=null),void 0!==n.Volume&&(t.Volume=null);else for(p in s="L",s+="o",s+="w",c="O",c+="p",c+="en",o?(t.Volume&&(t.Volume=parseInt(t.Volume,10)),l||(t.Volume+=n.Volume)):!g(t.Volume)&&n.Volume&&(t.Volume=n.Volume),r.allowReplaceOHL||(g(n.Open)&&(t.Open=n.Open),g(n.High)&&g(t.High)&&n.High>t.High&&(t.High=n.High),g(n.Low)&&g(t.Low)&&n.Low<t.Low&&(t.Low=n.Low)),["Close",c,"High",s,"Bid","Ask"].forEach((function(e){a.J8h(),g(t[e])||(t[e]=n[e])})),i.series)"u","ndef","i","ned",m=i.series[p].parameters.symbolObject.symbol,void 0===t[m]&&void 0!==n[m]&&(t[m]=n[m])}function q(){var t,r,n;if(t=null,r=0,h.length&&(t=u.getFirstLastDataRecord(h,d||i.defaultPlotField,!0))){if(e[e.length-1].DT<=t.DT)return;for(;r<e.length;r++){if(+e[r].DT==+t.DT){u.getFirstLastDataRecord([e[r]],d||i.defaultPlotField)&&(t=null);break}if(e[r].DT>t.DT)break}}n=e.slice(r),t&&n.unshift(d?t[d]:t),n=u.doCleanupGaps(n,i),a.J8h(),t&&n.shift(),e=e.slice(0,r).concat(n)}},t.ChartEngine.prototype.updateCurrentMarketData=function(e,i,r,n){var s,o,l,h,c,u,d,p,m,g;if(s="updat",s+="eCur",s+="rentMarketData",o="A",o+="skL2",e&&e.DT){if(i||(i=this.chart),l=n&&n.fromTrade,h=e.DT,!l&&"tick"!=this.layout.interval&&i.market){if(i.market.market_def){if(!i.market.isMarketDate(e.DT))return;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&null===i.market.getSession(e.DT))return}c={begin:e.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},u=new t.Market(i.market.market_def),this.extendedHours&&this.extendedHours.filter&&u.enableAllAvailableSessions(),(d=u.newIterator(c)).next(),e.DT=d.previous()}this.runPrepend("updateCurrentMarketData",arguments)||(p=i.currentMarketData,r&&(p[r]||(p[r]={}),p=p[r]),["Last","Bid","Ask"].forEach((function(t){a.J8h(),e[t]&&"number"==typeof e[t]&&(!p[t]||!p[t].DT||p[t].DT<=e.DT)&&(p[t]={DT:e.DT,Price:e[t],Size:e[t+"Size"],Timestamp:h})})),["BidL2",o].forEach((function(t){e[t]&&e[t]instanceof Array&&(!p[t]||!p[t].DT||p[t].DT<=e.DT)&&(p[t]={DT:e.DT,Price_Size:e[t],Timestamp:h})})),e.Close&&(!p.Last||p.Last.DT<=e.DT)&&(m=e.Close,((g=n&&n.finalClose)||0===g)&&(m=g),p.Last={DT:e.DT,Price:m,Size:void 0===e.LastSize&&"tick"==this.layout.interval?e.Volume:e.LastSize,Timestamp:e.LastTime||h}),p.touched=new Date,l||delete e.Last,this.runAppend(s,arguments))}},t.ChartEngine.prototype.clearCurrentMarketData=function(e,t){var i,a,r,n;if(i="clearC",i+="urrent",i+="MarketDat",i+="a",!this.runPrepend(i,arguments)){if(r=[],e)r.push(e);else for(a in this.charts)r.push(this.charts[a]);for(a=0;a<r.length;a++)if(n=r[a].currentMarketData,t)delete n[t];else for(var s in n)n[s]=void 0;this.runAppend("clearCurrentMarketData",arguments)}}},T=e=>{var t;(t=e.CIQ).ChartEngine.prototype.changeOccurred=function(e){var t;t={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},"theme"==e&&this.dispatch("theme",t),this.currentlyImporting||(q.r2m(),"layout"==e?this.dispatch("layout",t):"vector"==e?("dra","win","g",this.dispatch("drawing",t)):"preferences"==e&&this.dispatch("preferences",t))},t.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),this.pendingAsyncs.push(!0)},t.ChartEngine.prototype.registerChartDrawnCallback=function(e){return this.asyncCallbacks||(this.asyncCallbacks=[]),q.r2m(),this.asyncCallbacks.push(e),{fc:e}},t.ChartEngine.prototype.unregisterChartDrawnCallback=function(e){for(var t=0;t<this.asyncCallbacks.length;t++)if(this.asyncCallbacks[t]==e.fc)return q.C$o(74),void this.asyncCallbacks.splice(t,q.d58("1",0))},t.ChartEngine.prototype.makeAsyncCallbacks=function(){if(q.r2m(),this.asyncCallbacks&&(!this.pendingAsyncs||!this.pendingAsyncs.length))for(var e=0;e<this.asyncCallbacks.length;e++)this.asyncCallbacks[e]()},t.ChartEngine.prototype.completeAsyncAction=function(){q.r2m(),this.pendingAsyncs.pop(),this.makeAsyncCallbacks()},t.ChartEngine.prototype.addDomEventListener=function(e,t,i,a){q.J8h(),e.addEventListener(t,i,a),this.eventListeners.push({element:e,event:t,function:i,options:a})},t.ChartEngine.prototype.addEventListener=function(e,t){var i;if(q.r2m(),"*"===e)for(var a in this.callbackListeners)this.callbackListeners[a].push(t);else if(e instanceof Array)for(var r=0;r<e.length;r++)this.callbackListeners[e[r]].push(t);else{if(!(i=this.callbackListeners[e]))throw new Error("Attempted to add an invalid listener.");i.push(t)}return{type:e,cb:t}},t.ChartEngine.prototype.removeEventListener=function(e,t){var i,a;if(e&&"object"==typeof e||(e={type:e,cb:t}),i=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return void e.splice(i,1)},a=this.callbackListeners,"*"!==e.type){if(!a[e.type])throw"Attempted ","to remove an invalid listener.",new Error("Attempted to remove an invalid listener.");i(a[e.type],e.cb)}else for(var r in a)i(a[r],e.cb)},t.ChartEngine.prototype.dispatch=function(e,t){var i;if(i=this.callbackListeners[e])for(var a=0;a<i.length;a++)if(!0===i[a].call(this,t))return!0;if(i=this.callbackListeners["*"])for(var r=0;r<i.length;r++)if(!0===i[r].call(this,t))return!0;return!1},t.ChartEngine.prototype.updateListeners=function(e){var t;for(var i in q.J8h(),this.plugins)(t=this.plugins[i]).display&&t.listener&&t.listener(this,e)}},A=e=>{var t,i=q;i.r2m(),(t=e.CIQ).ChartEngine.prototype.prepend=function(e,a){var r,n;return i.C$o(22),r=i.d58(e,"prepend"),this instanceof t.ChartEngine?(n=this.hasOwnProperty(r)?this[r]:[],this[r]=[a].concat(n)):(n=t.ChartEngine.prototype[r]||[],t.ChartEngine.prototype[r]=[a].concat(n)),{method:r,func:a}},t.ChartEngine.prototype.append=function(e,a){var r,n;return"appen","d",i.C$o(22),r=i.d58(e,"append"),this instanceof t.ChartEngine?(n=this.hasOwnProperty(r)?this[r]:[],this[r]=n.concat(a)):(n=t.ChartEngine.prototype[r]||[],t.ChartEngine.prototype[r]=n.concat(a)),{method:r,func:a}},t.ChartEngine.prototype.runPrepend=function(e,a,r){var n,s,o;if(i.C$o(22),i.r2m(),n=i.d58(e,"prepend"),!(s=(s=this.hasOwnProperty(n)?this[n]:[]).concat(t.ChartEngine.prototype[n]||[])).length)return!1;r||(r=this);for(var l=0;l<s.length;l++)if(o=s[l].apply(r,a))return o;return!1},t.ChartEngine.prototype.runAppend=function(e,a,r){var n,s,o;if(i.r2m(),i.M8Y(22),n=i.d58(e,"append"),!(s=(s=this.hasOwnProperty(n)?this[n]:[]).concat(t.ChartEngine.prototype[n]||[])).length)return!1;r||(r=this);for(var l=0;l<s.length;l++)if(o=s[l].apply(r,a))return o;return!1},t.ChartEngine.prototype.removeInjection=function(e){var i,a;if(i=e.method,this instanceof t.ChartEngine){if(!this[i])return;for(a=0;a<this[i].length;a++)if(this[i][a]==e.func)return void this[i].splice(a,1)}else{if(!t.ChartEngine.prototype[i])return;for(a=0;a<t.ChartEngine.prototype[i].length;a++)if(t.ChartEngine.prototype[i][a]==e.func)return void t.ChartEngine.prototype[i].splice(a,1)}},t.ChartEngine.prototype.remove=function(e){i.J8h(),this instanceof t.ChartEngine?(i.C$o(22),delete this[i.c6Y(e,"append")],i.C$o(22),delete this[i.d58(e,"prepend")]):("appen","d",i.C$o(22),delete t.ChartEngine.prototype[i.d58(e,"append")],i.M8Y(22),delete t.ChartEngine.prototype[i.c6Y(e,"prepend")])}},_=e=>{var t,i,a=q;t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.convertToDataZone=function(e){var i;return(e||0===e)&&this.dataZone&&(i=t.convertTimeZone(e,null,this.dataZone),e=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())),e},t.ChartEngine.prototype.debug=function(){},t.ChartEngine.prototype.fps=function(e,i){var r,n,s;e=e||5,r=(new Date).getTime(),n=0,s=this,a.M8Y(53),console.log(a.d58("Running fps() for ",e," seconds")),function o(){var l,h;if(l=((new Date).getTime()-r)/1e3,a.r2m(),l>e)return a.C$o(40),h=a.d58(l,n),a.C$o(22),console.log(a.c6Y(h,"FPS=")),void(i&&i(h));s.draw(),n++,t.ChartEngine.useAnimation?requestAnimationFrame(o):setTimeout(o,0)}()},t.ChartEngine.htmlControls={mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span></div>',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div></div>'},t.ChartEngine.prototype.setChartType=function(e){var t,i;if(a.J8h(),t=this.layout,i=this.chart,"ohlc"!=t.aggregationType&&(t.aggregationType="ohlc",i.canvas&&this.createDataSet()),t.chartType=e,this.setMainSeriesRenderer(),this.mainSeriesRenderer.isAggregation&&this.setAggregationType)return this.setAggregationType(e);i.defaultChartStyleConfig={type:e},this.displayInitialized&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.setChartScale=function(e){e||(e="linear"),this.layout.chartScale=e,a.J8h(),this.chart.canvas&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.checkLogScale=function(){var e,t;if(e="lo",e+="g",!this.runPrepend("checkLogScale",arguments))return this.layout.chartScale===e&&(t=!1,this.chart.yAxis.lowValue<=0&&(this.setChartScale("linear"),this.dispatch("notification","logdeactivated"),t=!0),this.runAppend("checkLogScale",arguments),t)},t.ChartEngine.prototype.setAdjusted=function(e){this.layout.adj=e,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.padOutPrice=function(e,t){var i,r,n,s;if(0!==e&&(!e||"number"!=typeof e))return"";if(t||0===t||(t=e),a.C$o(22),r=0,(i=a.d58(t,"")).indexOf(".")>-1){a.M8Y(59);a.c6Y(1005,20,311,12);a.C$o(0);a.d58(7472,8);a.C$o(67);var o=a.c6Y(8490,2828,4245);a.C$o(141);var l=a.c6Y(5,2187,4362,6,2);a.C$o(79);a.c6Y(14141,5,16,14915);a.C$o(142);var h=a.c6Y(2525,7603,7575,7,19);a.M8Y(111);var c=a.c6Y(8,10,1,2);r=i.substring(i.indexOf(o<l?".":h)).length-c}return r=t>=1e3?Math.max(r,0):t<2?Math.max(r,4):Math.max(r,2),(n=this.internationalizer)?(r>=(s=n.priceFormatters.length)&&(a.C$o(0),r=a.c6Y(s,1)),e=n.priceFormatters[r].format(e)):e=e.toFixed(r),e},t.ChartEngine.prototype.formatPrice=function(e,t){var i,r,n;return 0===e||e&&void 0!==e?(t||(t=this.currentPanel),t||(t=this.chart.panel),a.J8h(),t?((i=t.decimalPlaces)||0===i||(i=t.chart.decimalPlaces),i||0===i?((r=this.internationalizer)?(i>=(n=r.priceFormatters.length)&&(a.M8Y(0),i=a.d58(n,1)),e=r.priceFormatters[i].format(e)):e=e.toFixed(i),e):e.toString()):e.toString()):""},t.ChartEngine.prototype.determineMinMax=function(e,i,r,n,s,o,l,h,c){var u,d,p,m,g,f,y,v,x,b,C;a.M8Y(124);var S=a.d58(0,14,2,17);u=Number.MAX_VALUE*S,d=Number.MAX_VALUE,a.J8h(),p=!1,m=e.length,c||(c=[]),g=[],s&&(m=s);for(var w=0;w<=m+1;w++)if(i.length&&(f=w==m?this.getPreviousBar(this.chart,i[0],0):w==m+1?this.getNextBar(this.chart,i[0],m-1):e[w]),f){if(!n)if(f.transform)p=!0,f=f.transform;else if(p)continue;y=0;for(var D=0;D<i.length;D++)if("n","umber",v=t.existsInObjectChain(f,i[D])){"number"==typeof(x=v.obj[v.member])&&(x=[x]);for(var k=0;k<x.length;k++)b=x[k],o&&b instanceof Array&&(b=b[0]),(b||0===b)&&(!0===r||r instanceof Array&&r.indexOf(i[D])>-1?((y+=b)>u&&(u=y),y<d&&(d=y)):(b>u&&(u=b),b<d&&(d=b),g.push({value:b,quote:f})))}(!0===r||r instanceof Array&&r.indexOf(i[D])>-1)&&g.push({value:y,quote:f})}return C=[d,u],c.forEach((function(e){C=e(g,l,h)||C})),C[1]==-1*Number.MAX_VALUE&&(C[1]=0),C[0]==Number.MAX_VALUE&&(C[0]=0),C},t.ChartEngine.prototype.initializeDisplay=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(i="Clo",i+="se",r="H",r+="i",r+="g",r+="h",!this.runPrepend("initializeDisplay",arguments)){n=[],s=[],o=!1,l=this,h=["Close","Open",r,"Low"],c=[e.defaultPlotField||i];var{mainSeriesRenderer:x}=this,{dataSegment:b,seriesRenderers:C}=e;if(d=null,p=Math.floor((e.width-this.micropixels)/this.layout.candleWidth),e.scroll>e.maxTicks&&e.maxTicks>p+1){a.C$o(44);var S=a.d58(9,7,3,1);d=b.length-S}for(var w in m=[],this.panels){m=(g=this.panels[w]).yaxisLHS.concat(g.yaxisRHS);for(var D=0;D<m.length;D++)f=m[D],n=[],s=[],y=e.transformFunc&&f==e.panel.yAxis,T(f,g),this.currentlyImporting||f.renderers.length||f.studies.length?(u=x&&x.determineMax?x.determineMax(b,n,s,!y,d,o,g,f):this.determineMinMax(b,n,s,!y,d,o,g,f),this.baselineHelper&&(u=this.setBaselineMinMax(u,f)),f.lowValue=u[0],f.highValue=u[1],f==e.panel.yAxis&&(e.lowValue=f.lowValue,e.highValue=f.highValue)):this.deleteYAxisIfUnused(g,f)}if((v=e.state.aggregation)&&v.box){a.M8Y(26);var k=a.d58(9,15,8);e.lowValue-=v.box/k,a.M8Y(143);var M=a.c6Y(14,18,1,259,9);e.highValue+=v.box/M}this.runAppend("initializeDisplay",arguments)}function T(i,a){var r,u,d,p,m,g,f,y,v;if(r=!1,(u=l.layout&&l.layout.studies&&l.layout.studies[i.name])&&(!a||a.name==u.panel)){for(var x in u.outputMap)n.push(x),u.study&&(u.study.renderer?n=n.concat(t.createObjectChainNames(x,h)):u.study.seriesFN||(n=n.concat(t.createObjectChainNames(x,c))));for(var b=0;b<=2;b++)n.push(u.name+"_hist"+(b||""));r=!0}if(a){for(var S in i.studies=[],i.renderers=[],r&&i.studies.push(i.name),C)if(m=(p=(d=C[S]).params).panel,(p.yAxis||!l.panels[m]||l.panels[m].yAxis)==i&&m==a.name){g=d.highLowBars?h:c,o=d.bounded;for(var w=0;w<d.seriesParams.length;w++)(f=d.seriesParams[w]).hidden||(y=void 0,f.subField?y=t.createObjectChainNames(f.symbol,[f.subField]).concat(f.symbol):f.symbol?y=t.createObjectChainNames(f.symbol,g).concat(f.symbol):f.field?y=f.field:i==e.panel.yAxis&&(y=g),y&&(n=n.concat(y)),d.useSum&&(s=s.concat(y)));i.renderers.push(S)}for(var D in l.overlays)(v=l.overlays[D]).panel==a.name&&v.name!=i.name&&v.getYAxis(l)==i&&(i.studies.push(v.name),e.includeOverlaysInMinMax&&T({name:v.name}))}}},t.ChartEngine.prototype.setMarket=function(e,i){if(a.J8h(),t.Market)for(var r in i||(i=this.chart),i.market=new t.Market(e),this.layout.marketSessions)i.market.disableSession(r,this.layout.marketSessions[r])},t.ChartEngine.prototype.setMarketFactory=function(e){a.r2m(),this.marketFactory=e},t.ChartEngine.prototype.setResizeTimer=function(e){var i,r;a.J8h(),this.resizeDetectMS=e,this.resizeHandle=t.resizeObserver(this.chart.container,(i=this,a.J8h(),r=function(){i.chart.canvas&&(a.J8h(),t.isAndroid||i.chart.canvas.height==Math.floor(i.devicePixelRatio*i.chart.container.clientHeight)&&i.chart.canvas.width==Math.floor(i.devicePixelRatio*i.chart.container.clientWidth)||i.resizeChart())},function(){"undefined"!=typeof ResizeObserver?t.ChartEngine.useAnimation?requestAnimationFrame(r):(a.C$o(46),setTimeout(r,a.c6Y("0",0))):r()}),this.resizeHandle,e)},t.ChartEngine.prototype.getRenderedItems=function(){var e,i,a,r,n,s,o,l;if("Hig","h",e=this.chart,i=this.currentPanel){for(var h in a=["Open","High","Low","Close"],r=["Close"],n=[],this.overlays)this.overlays[h].panel===i.name&&(n=n.concat(Object.keys(this.overlays[h].outputMap)));for(var c in e.seriesRenderers)if((s=e.seriesRenderers[c]).params.panel==i.name)for(var u in s.seriesParams)o=s.seriesParams[u],l=s.highLowBars?a:r,o.subField?n=n.concat(t.createObjectChainNames(o.symbol,[o.subField])).concat(o.symbol):o.symbol?n=n.concat(t.createObjectChainNames(o.symbol,l)).concat(o.symbol):o.field?n.push(o.field):i==e.panel&&(n=n.concat(l));return n}},t.ChartEngine.prototype.setTransform=function(e,t,i){e.transformFunc=t,e.untransformFunc=i},t.ChartEngine.prototype.unsetTransform=function(e){delete e.transformFunc,delete e.untransformFunc;for(var t=0;e.dataSet&&t<e.dataSet.length;t++)e.dataSet[t].transform=null},t.ChartEngine.prototype.isEquationChart=function(e){return!(!e||"="!=e[0])&&(!(!this.allowEquations||!t.fetchEquationChart)||(console.warn("Error, equation chart option requires equationsAdvanced.js"),!1))},t.ChartEngine.prototype.correctIfOffEdge=function(e){var t,i,r,n,s,o,l,h,c,u;if(t="cor",t+="r",t+="ectIfOffEdge",!this.runPrepend("correctIfOffEdge",arguments)){for(var d in this.charts){if(r=(i=this.charts[d]).dataSet,n=i.maxTicks,s=this.layout,o=this.minimumLeftBars,l=Math.min(o,n),i.allowScrollPast){if(a.C$o(0),h=a.d58(n,l),l>r.length&&(h=n-r.length),i.scroll-h>=r.length){a.C$o(69);var p=a.d58(2,18,4,17);i.scroll=r.length+h-p,this.micropixels=0}i.scroll<=l&&(i.scroll=l,this.micropixels=0)}else i.scroll<l&&(i.scroll=l),i.scroll>r.length&&(i.scroll=r.length);if(!1===i.allowScrollFuture){c=this.getLabelOffsetInPixels(i,s.chartType)+s.candleWidth*i.whiteSpaceFutureTicks,a.M8Y(85);var m=a.c6Y(2,16,3,17,3);u=n-Math.round(c/s.candleWidth)-m,(this.micropixels<0?i.scroll-1:i.scroll)<u&&(i.scroll=u,this.micropixels=0)}}this.runAppend(t,arguments)}},a.r2m(),t.ChartEngine.prototype.getStartDateOffset=function(){for(var e=0;e<this.chart.dataSegment.length;e++)if(this.chart.dataSegment[e])return e;return 0},t.ChartEngine.prototype.setStartDate=function(e){for(var t=0;t<this.chart.dataSet.length;t++)if(this.chart.dataSet[t].DT.getTime()==e.getTime())return this.chart.scroll=this.chart.dataSet.length-t,void this.draw()},t.ChartEngine.prototype.clearPixelCache=function(){var e,t;for(var i in this.panels)(e=this.panels[i]).cacheHigh=null,e.cacheLow=null,e.cacheLeft=1e6,e.cacheRight=-1;for(var a in this.charts)if((t=this.charts[a]).dataSet)for(var r=0;r<t.dataSet.length;r++)t.dataSet[r].cache={}},t.ChartEngine.prototype.adjustBackingStore=function(e,i){var r,n,s,o;this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1),r=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,n=this.devicePixelRatio/r,this.useBackingStore?(!t.isAndroid||t.is_chrome||t.isFF)&&(s=e.width,o=e.height,a.C$o(38),e.width=a.d58(s,n),a.M8Y(38),e.height=a.c6Y(o,n),a.C$o(22),e.style.width=a.c6Y("px",s),a.C$o(22),e.style.height=a.c6Y("px",o),i.scale(n,n),this.adjustedDisplayPixelRatio=n,this.backing={ratio:n,width:e.width,height:e.height,styleWidth:s,styleHeight:o}):this.devicePixelRatio=this.adjustedDisplayPixelRatio=1},t.ChartEngine.prototype.reconstituteBackingStore=function(){var e,t,i;if(this.useBackingStore&&this.backing){e=[this.chart.canvas],this.useBackgroundCanvas&&e.push(this.chart.backgroundCanvas),t=this.backing,e.forEach((function(e){e.width!=t.width&&(e.width=t.width,e.height=t.height,a.r2m(),e.context.scale(t.ratio,t.ratio))})),712748429,1654436079,i=2;for(var r=1;712748429!==a.O$R(r.toString(),r.toString().length,15960);r++)this.adjustedDisplayPixelRatio=t.ratio,i+=2;1654436079!==a.q2D(i.toString(),i.toString().length,11143)&&(this.adjustedDisplayPixelRatio=t.ratio),this.draw()}},t.ChartEngine.prototype.disableBackingStore=function(){var e,t;this.useBackingStore&&this.backing&&(e=[this.chart.canvas],this.useBackgroundCanvas&&e.push(this.chart.backgroundCanvas),t=this.backing,e.forEach((function(e){var i;if(e.width!=t.styleWidth){-1933644852,-581806431,i=2;for(var r=1;-1933644852!==a.O$R(r.toString(),r.toString().length,493);r++)e.width=t.styleWidth,e.height=t.styleHeight,e.context.scale(1,1),i+=2;-581806431!==a.O$R(i.toString(),i.toString().length,13839)&&(e.width=t.styleWidth,e.height=t.styleHeight,e.context.scale(7,3))}})),a.M8Y(19),a.r2m(),this.adjustedDisplayPixelRatio=a.d58(0,"1"),this.draw())},t.ChartEngine.prototype.getBackgroundCanvas=function(e){return e||(e=this.chart),this.useBackgroundCanvas?e.backgroundCanvas:e.canvas},t.ChartEngine.prototype.resizeCanvas=function(){var e,t,i,r,n,s,o,l;for(var h in a.J8h(),e=this.chart.canvas,t=this.chart.context,e&&t&&(this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=e.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=e.width=this.chart.container.clientWidth,this.adjustBackingStore(e,t),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)),i=this.container.getBoundingClientRect(),this.top=i.top,this.left=i.left,this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,0===this.width&&!this.container.dimensionlessCanvas&&this.container.closest("html")&&("warning: zero width chart. Check CSS for cha","rt co","ntainer.",console.log("warning: zero width chart. Check CSS for chart container.")),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,void 0===(r=this.layout.candleWidth)&&(r=8),this.charts){n=this.charts[h],this.setCandleWidth(r,n),n.scroll<n.width/r&&(n.scroll=Math.floor(n.width/r),s=Math.round(this.preferences.whitespace/this.layout.candleWidth),n.scroll-=s),o=10;try{a.M8Y(0);var c=a.d58(24,22);l=t.measureText("10:00").width*c}catch(e){l=100}for(;o>1&&!(this.chart.width/l>o);)o/=1.5;n.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/o),n.xAxis.autoComputedTickSizePixels<1&&(n.xAxis.autoComputedTickSizePixels=1)}},t.ChartEngine.prototype.setCandleWidth=function(e,t){t||(t=this.chart),e=this.constrainCandleWidth(e),this.layout.candleWidth=e,a.C$o(144);var i=a.d58(7,14,7,11,246);t.maxTicks=Math.round(t.width/e)+i},t.ChartEngine.prototype.constrainCandleWidth=function(e){var t,i,a;return t=this.minimumCandleWidth,i=this.maximumCandleWidth,a=this.animations.zoom,t&&e<t&&(e=t,a&&a.running&&a.stop()),i&&e>i&&(e=i,a&&a.running&&a.stop()),e},t.ChartEngine.prototype.resizeChart=function(e){var t;this.runPrepend("resizeChart",arguments)||(!1!==e&&(e=!0),e&&this.preAdjustScroll(),t=this.chart.canvasHeight,this.resizeCanvas(),e&&this.postAdjustScroll(),(this.displayInitialized||0!==this.chart.canvasHeight&&0===t)&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments))},t.ChartEngine.prototype.clear=function(){var e;for(var i in this.displayInitialized=!1,this.layout.studies)e=this.layout.studies[i],t.getFn("Studies.removeStudy")(this,e);this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},t.ChartEngine.prototype.fillScreen=function(){var e,t,i,r,n;a.r2m(),e=this.chart,t=this.layout.candleWidth,i=e.width-this.preferences.whitespace,(r=e.dataSet.length)*t>=i?this.draw():(this.mainSeriesRenderer&&this.mainSeriesRenderer.standaloneBars||r--,a.M8Y(40),n=a.c6Y(r,i),this.setCandleWidth(n,e),this.home({maintainWhitespace:!0}))},t.ChartEngine.prototype.setMaxTicks=function(e,t){var i;t||(t={}),(e=Math.round(e))<2&&(e=2),i=t.padding?t.padding:0,a.r2m(),this.layout.candleWidth=(this.chart.width-i)/e,this.layout.candleWidth||(this.layout.candleWidth=8),this.chart.maxTicks=Math.round(this.chart.width/this.layout.candleWidth-.499),(t.padding||0===t.padding)&&(a.C$o(22),this.chart.scroll=a.c6Y(1,e))},t.ChartEngine.prototype.initializeChart=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w;if(i="in",i+="i",i+="tializeC",i+="hart",r="canva",r+="s",n="c",n+="an",n+="va",n+="s",!this.runPrepend("initializeChart",arguments)){for(var D in(s=this.chart).symbolObject.symbol||(s.symbolObject.symbol=s.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&t.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,t.ChartEngine.defaultDisplayTimeZone),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.micropixels=0,e?s.container=e:e=s.container,e.stx=this,e.CIQRegistered||(e.CIQRegistered=!0,t.ChartEngine.registeredContainers.push(e)),this.registerHTMLElements&&this.registerHTMLElements(),o=s.canvas,l=s.backgroundCanvas,h=s.tempCanvas,c=this.floatCanvas,u=s.canvasShim,o&&document.createElement("canvas").getContext?(o.id||(e.removeChild(o),s.canvas=null),h&&!h.id&&(e.removeChild(h),s.tempCanvas=null),c&&!c.id&&(e.removeChild(c),this.floatCanvas=null),l&&!l.id&&(e.removeChild(l),s.backgroundCanvas=null)):this.setCandleWidth(this.layout.candleWidth),s.backgroundCanvas||(l=s.backgroundCanvas=document.createElement("canvas")),e.appendChild(l),_(l),s.canvasShim||(u=s.canvasShim=document.createElement("div")),u.className="stx-canvas-shim",e.appendChild(u),s.canvas||(o=s.canvas=document.createElement(n)),e.appendChild(o),_(o),s.context=o.context,s.tempCanvas||(h=s.tempCanvas=document.createElement("canvas")),e.appendChild(h),_(h,!0),this.floatCanvas||(c=this.floatCanvas=document.createElement(r)),e.appendChild(c),_(c,!0),this.resizeCanvas(),t.isAndroid&&(h.ontouchstart=c.ontouchstart=function(e){e.preventDefault&&e.preventDefault()}),d=this.panels,s.panel.display=s.symbol,s.symbolDisplay&&(s.panel.display=s.symbolDisplay),this.adjustPanelPositions(),s.panel=d[s.name],d){p=d[D].yaxisLHS.concat(d[D].yaxisRHS);for(var k=0;k<p.length;k++)p[k].height=d[D].yAxis.height,this.calculateYAxisMargins(p[k])}var M;for(var T in this.initialWhitespace=this.preferences.whitespace,s.dataSet&&s.dataSet.length>0&&(s.scroll=Math.floor(s.width/this.layout.candleWidth),m=Math.round(this.preferences.whitespace/this.layout.candleWidth),s.scroll-=m),t.touchDevice&&(g=".ov",g+="erla",g+="yTras",g+="hCan",f=e.querySelector(".overlayEdit"),y=e.querySelector(g),v=e.querySelector(".vectorTrashCan"),x=function(e,t,i){return a.r2m(),function(r){a.r2m(),e.deleteHighlighted(t,i)}},f?(t.safeClickTouch(f,x(this,!0,!0)),y&&t.safeClickTouch(y,x(this,!1))):y&&t.safeClickTouch(y,x(this,!0)),v&&t.safeClickTouch(v,x(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(e.onmouseout=(M=this,function(e){M.handleMouseOut(e)}),t.smartHover()),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[],d)(b=d[T]).markerHolder&&(e.removeChild(b.markerHolder),b.markerHolder=null);for(var A in this.plugins)(C=this.plugins[A]).display&&C.initializeChart&&C.initializeChart(this);this.resizeListenerInitialized||(S=this,this.resizeListenerInitialized=!0,w=function(){return function(e){S.resizeChart()}},this.addDomEventListener(window,"resize",w(),!0)),s.baseline.userLevel&&(s.baseline.userLevel=null),this.setResizeTimer(this.resizeDetectMS),this.runAppend(i,arguments)}function _(e,t){var i;e.context=e.getContext("2d"),a.C$o(0),e.context.lineWidth=a.d58("1",0),(i=e.style).position="absolute",i.left="0px",t&&(i.display="none")}},t.ChartEngine.prototype.destroy=function(){var e,i,r,n;a.r2m(),this.setResizeTimer(0),this.quoteDriver&&this.quoteDriver.die(),this.styles={};for(var s=0;s<this.eventListeners.length;s++)(e=this.eventListeners[s]).element.removeEventListener(e.event,e.function,e.options);this.touchAndMouseEventsRegistered=!1,this.eventListeners=[],this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),(r=(i=t.ChartEngine.registeredContainers).indexOf(this.chart.container))>-1&&i.splice(r,1),this.slider&&(n=i.indexOf(this.slider.slider.chart.container))>-1&&i.splice(n,1)},t.ChartEngine.prototype.preAdjustScroll=function(e){a.J8h(),e||(e=this.chart),this.previousAdjust={chart:e,scroll:e.scroll,maxTicks:e.maxTicks}},t.ChartEngine.prototype.postAdjustScroll=function(){var e;this.previousAdjust&&((e=this.previousAdjust.chart).scroll=this.previousAdjust.scroll+(e.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw())},t.ChartEngine.prototype.translateIf=function(e){return this.translationCallback?this.translationCallback(e):(a.J8h(),e)},t.ChartEngine.prototype.doCleanupDates=function(e,r){var n,s,o,l,h;if(a.J8h(),e&&e.length)for(var c=0;c<e.length;c++)if("[obj","ect Stri","ng]",(s=(n=e[c]).DT)||n.Date){if(n.DT&&"[object String]"==Object.prototype.toString.call(s)&&s.length<=10)(s=new Date(s)).setMinutes(s.getMinutes()+s.getTimezoneOffset());else{if("[obj","ect Da","te]",o=!0,n.DT||(s=t.strToDateTime(n.Date),n.Date.length<=10&&(o=!1)),"[object Date]"!=Object.prototype.toString.call(s)&&(s=new Date(s)),i.Date&&this.dataZone&&o){l=new i.Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),this.dataZone),a.M8Y(77);var u=a.c6Y(8804,4,10,980);h=s.getSeconds()*u+s.getMilliseconds(),s=new Date(l.getTime()+h)}t.ChartEngine.isDailyInterval(r)&&(a.C$o(38),s.setHours(0,0,0,a.d58("0",1)))}n.DT||(n.Date=t.yyyymmddhhmmssmmm(s)),n.DT=s}},t.ChartEngine.prototype.doCleanupGaps=function(e,i,r){var n,s,o,l,h,c,u,d,p,m,g,f,y;function v(e,i){var a,n,s;if("u","ndefin","ed",a=r.field)return"undefin","ed",void(void 0!==e[a]&&void 0===i[a]&&(i[a]=o?null:e[a]));o||(n=e[m],s=i[m],void 0!==n&&void 0===s&&t.ensureDefaults(i,{Close:n,Open:n,High:n,Low:n,Volume:0,Adj_Close:e.Adj_Close}))}if("w","e","e","k",!e||!e.length)return e;function x(e,i){var n,s,l,u,d;for(n=r.field,a.r2m(),void 0===(s=n?c[n]:c)&&(s={}),l=o?null:s[m],u=o?null:s.Adj_Close;+e<+i;)d={DT:e},n||(h.push(d),t.extend(d,{Open:l,High:l,Low:l,Close:l,Volume:0,Adj_Close:u})),e=p.next()}if(n=this.layout.interval,r=r||{},i||(i=this.chart),!t.Market||!i.market)return e;if(r.noCleanupDates||this.doCleanupDates(e,n),!1===(s=r.cleanupGaps))return e;if(s&&!0!==s||(s=this.cleanupGaps||s),a.M8Y(106),o=a.c6Y(s,"gap"),!s)return e;if("tick"==n)return e;if("month"==n||"week"==n){if("d","a","y",this.dontRoll)return e;n="day"}l=function(e){return a.J8h(),e.DT?"[object Date]"!=Object.prototype.toString.call(e.DT)?new Date(e.DT):new Date(+e.DT):t.strToDateTime(e.Date)},h=[],c=e[0],a.J8h(),h.push(c),u={begin:l(c),interval:n,periodicity:1,timeUnit:this.layout.timeUnit},d=new t.Market(i.market.market_def),p=d.newIterator(u),this.extendedHours&&this.extendedHours.filter&&p.market.enableAllAvailableSessions(),m=i.defaultPlotField;for(var b=0;b<e.length&&void 0===e[b][m];b++)if(void 0!==e[b].Value){m="Value";break}for(var C=1;C<e.length;C++){for(f=e[C],(g=p.next())<(y=l(f))&&(x(g,y),g=p.market._convertFromMarketTZ(p.begin,p.outZone));y<g;){if(++C==e.length)return h;v(c,f),h.push(f),c=f,y=l(f=e[C])}g<y?(C--,g=p.previous()):(v(c,f),h.push(f),c=f)}return h},t.ChartEngine.prototype.getCreatingLibrary=function(){return a.r2m(),e}},P=e=>{var t,i=q;t=e.CIQ,i.r2m(),t.ChartEngine.Panel=function(e,a){this.yAxis=a||new t.ChartEngine.YAxis,this.name=e,i.J8h(),this.state={}},t.extend(t.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!0},!0),t.ChartEngine.prototype.whichPanel=function(e){var t;for(var i in this.panels)if(!(t=this.panels[i]).hidden&&e>=t.top&&e<t.bottom)return t;return null},t.ChartEngine.prototype.panelExists=function(e){for(var t in this.panels)if(this.panels[t].name==e)return!0;return!1},t.ChartEngine.prototype.storePanels=function(){var e,t;for(var i in this.layout||(this.layout={}),(e=this.layout).panels={},this.panels)t=this.panels[i],e.panels[t.name]={percent:t.percent,display:t.display,yAxis:t.yAxis}},t.ChartEngine.prototype.savePanels=function(e){this.storePanels(),!1!==e&&this.changeOccurred("layout")},t.ChartEngine.prototype.privateDeletePanel=function(e){var t,i;for(var a in this.layout.studies)(t=this.layout.studies[a]).panel==e.name&&this.cleanupRemovedStudy(t);for(var r in delete this.panels[e.name],this.overlays)this.overlays[r].panel==e.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[r]),delete this.overlays[r]);for(var n in this.chart.series)this.chart.series[n].parameters.panel==e.name&&this.removeSeries(this.chart.series[n],this.chart);if(e.holder&&(this.chart.container.removeChild(e.holder),this.getMarkerArray)){"p","anelName",i=this.getMarkerArray("panelName",e.name);for(var s=0;s<i.length;s++)this.removeFromHolder(i[s])}e.handle&&e.handle.remove(),this.currentPanel=null},t.ChartEngine.prototype.plotsInPanel=function(e){var t,i,a,r;for(var n in t=[],i=e,"object"==typeof e&&(i=e.name),this.layout.studies)i===(a=this.layout.studies[n]).panel&&t.push(a);for(var s in this.chart.seriesRenderers)i===(r=this.chart.seriesRenderers[s]).params.panel&&t.push(r);return t},t.ChartEngine.prototype.checkForEmptyPanel=function(e,t,a){var r,n;if(i.r2m(),!e)return!1;if(r=e,"object"==typeof e&&(r=e.name),r===this.chart.name)return!1;a?a instanceof Array||(a=[a]):a=[],n=this.plotsInPanel(e);for(var s=0;s<n.length;s++)if(-1==a.indexOf(n[s]))return!1;return t||this.panelClose(this.panels[r]),!0},t.ChartEngine.prototype.panelClose=function(e){var i;if(e&&!this.runPrepend("panelClose",arguments)){if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,e.soloing&&this.panelSolo(e),this.charts[e.name]){for(var a in this.panels)(i=this.panels[a]).chart.name==e.name&&this.privateDeletePanel(i);delete this.charts[e.name]}else this.privateDeletePanel(e);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!1,this.openDialog&&(this.openDialog=""),this.runAppend("panelClose",arguments)}},t.ChartEngine.prototype.deleteAllPanels=function(){var e;for(var t in this.panels)e=this.panels[t],this.privateDeletePanel(e);this.layout.panels={},this.panels={}},t.ChartEngine.prototype.panelUp=function(e){var a,r,n,s;for(n in this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),a={},r=0,i.r2m(),this.panels){if(n==e.name)break;r++}if(r){for(n in s=0,this.panels)s==r-1&&(a[e.name]=e),n!=e.name&&(a[n]=this.panels[n],s++);this.panels=a,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelDown=function(e){var a,r,n,s,o;for(n in i.r2m(),this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),a={},r=0,this.panels){if(n==e.name)break;r++}for(n in s=0,this.panels)s++;if(r!=s-1){for(n in o=0,this.panels)n!=e.name?(a[n]=this.panels[n],o==r+1&&(a[e.name]=e),o++):o++;this.panels=a,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelSolo=function(e){var a,r,n;if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),a=!0,e.soloing){if("s","tx_solo_lit",a=!1,e.soloing=!1,e.solo.classList.remove("stx_solo_lit"),e.percent=e.oldPercent,"chart"!=e.name)if(this.soloPanelToFullScreen){if(1==e.percent)for(r in this.panels)(n=this.panels[r])!=e&&(e.percent-=n.percent)}else this.chart.panel.percent=this.chart.panel.oldPercent;this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else if("ch","art","st","x_solo_lit",e.soloing=!0,e.solo.classList.add("stx_solo_lit"),e.oldPercent=e.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,"chart"!=e.name)if(this.soloPanelToFullScreen)this.xAxisAsFooter=!0;else{this.chart.panel.oldPercent=this.chart.panel.percent,i.M8Y(16);var s=i.c6Y(10,0,12,119);e.percent=s-this.chart.panel.percent}for(r in this.panels)this.panels[r].hidden=a;this.soloPanelToFullScreen||(this.chart.panel.hidden=!1),e.hidden=!1,this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()},t.ChartEngine.prototype.calculatePanelPercent=function(e){var t;t=e.bottom-e.top,e.percent=t/this.chart.canvasHeight},t.ChartEngine.prototype.resizePanels=function(){var e,a,r,n,s,o,l,h;if(t.ChartEngine.resizingPanel){1868099388,i.C$o(38),e=-i.d58("872807414",1),a=2;for(var c=1;1868099388!==i.q2D(c.toString(),c.toString().length,39756);c++)l=t.ChartEngine.crosshairY>=this.resolveY(t.ChartEngine.resizingPanel.top),a+=2;for(var u in i.O$R(a.toString(),a.toString().length,42342)!==e&&(l=t.ChartEngine.crosshairY>this.resolveY(t.ChartEngine.resizingPanel.top)),this.panels){if(this.panels[u]==t.ChartEngine.resizingPanel)break;this.panels[u].hidden||(r=this.panels[u])}if(h=this.backOutY(t.ChartEngine.crosshairY),l)for(s=t.ChartEngine.resizingPanel.yaxisLHS.concat(t.ChartEngine.resizingPanel.yaxisRHS),o=0;o<s.length;o++){i.M8Y(16);var d=i.c6Y(10,1,3,23);n=s[o].initialMarginTop+s[o].initialMarginBottom+d,h>s[o].bottom-n&&(h=s[o].bottom-n)}else for(s=r.yaxisLHS.concat(r.yaxisRHS),o=0;o<s.length;o++)n=s[o].initialMarginTop+s[o].initialMarginBottom+10,h<s[o].top+n&&(h=s[o].top+n);t.ChartEngine.crosshairY=this.resolveY(h),r.bottom=h,t.ChartEngine.resizingPanel.top=h,this.calculatePanelPercent(r),i.r2m(),this.calculatePanelPercent(t.ChartEngine.resizingPanel),this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.isPanelAboveChart=function(e){for(var t in i.J8h(),this.panels){if("chart"==t)return!1;if(t==e.name)return!0}return!1},t.ChartEngine.prototype.adjustPanelPositions=function(){var e,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A;e="stx-sho",e+="w",a="adjus",a+="tPanelPos",a+="ition",a+="s";var{chart:_,panels:P}=this;if(_.tempCanvas&&t.clearCanvas(_.tempCanvas,this),!this.runPrepend(a,arguments)){for(c in r=0,n=_.canvasHeight,s=!1,o=0,i.J8h(),l=0,h=!1,P)u=P[c],(isNaN(u.percent)||u.percent<=0)&&(u.percent=.05),u.hidden||(o+=u.percent,l++,u.soloing&&(h=!0));for(c in P)if(d=0,(u=P[c]).hidden)u.markerHolder&&(u.markerHolder.style.display="none");else{if(this.manageTouchAndMouse&&(u.up&&(s?(p="stx-sho",p+="w",this.displayIconsUpDown&&u.up.classList.add(p)):(s=!0,u.up.classList.remove("stx-show"))),u.solo&&(h?u.soloing&&this.displayIconsSolo?u.solo.classList.add("stx-show"):u.solo.classList.remove("stx-show"):1==l?u.solo.classList.remove("stx-show"):2!=l||this.soloPanelToFullScreen?(m="stx",m+="-show",this.displayIconsSolo&&u.solo.classList.add(m)):u.solo.classList.remove("stx-show")),u.down&&(1==l?(g="st",g+="x-sh",g+="ow",u.down.classList.remove(g)):this.displayIconsUpDown&&u.down.classList.add("stx-show")),u.edit&&(u.editFunction?u.edit.classList.add("stx-show"):u.edit.classList.remove("stx-show")),u.close&&(f="s",f+="tx-show",y="st",y+="x-show",this.displayIconsClose?u.close.classList.add(y):u.close.classList.remove(f))),u.percent=u.percent/o,u.top=r,u.bottom=u.top+n*u.percent,u.height=u.bottom-u.top,u.chart.name==u.name&&(u.chart.top=u.top,u.chart.bottom=u.bottom,u.chart.height=u.height),r=u.bottom,u.yaxisLHS){v=u.yaxisLHS.concat(u.yaxisRHS);for(var F=0;F<v.length;F++)x="n",x+="o",x+="ne",(b=v[F]).zoom&&b.height>0&&(d=b.zoom/b.height),this.adjustYAxisHeightOffset(u,b),b.height=b.bottom-b.top,d&&(b.scroll*=d*b.height/b.zoom,b.zoom=d*b.height,b.zoom>b.height&&(b.zoom=0,b.scroll=0)),b.high||0===b.high||(b.high=100,b.low=0,b.shadow=100),b.multiplier=b.height/b.shadow,b.position===x&&this.calculateYAxisMargins(b)}u.holder&&(C="p",C+="x",S="p",S+="x",u.holder.style.right="0px",u.holder.style.top=u.top+"px",u.holder.style.left="0px",u.holder.style.height=u.height+"px",u.subholder.style.left=u.left+S,u.subholder.style.width=u.width+"px",u.subholder.style.top="0px",u.yAxis.height>=0&&(u.subholder.style.height=u.yAxis.height+C))}if(c&&P[c].down&&P[c].down.classList.remove(e),this.manageTouchAndMouse&&2==l&&!h&&_.panel.solo&&_.panel.solo.classList.add("stx-show"),_.panel){if(w="p",w+="x",h&&this.soloPanelToFullScreen)D=_.canvasHeight-u.yAxis.bottom+12;else{i.M8Y(0);var L=i.c6Y(43,11);D=_.canvasHeight-_.panel.yAxis.bottom+("12">>L)}k=this.controls;var{chartControls:E,home:N,notificationTray:H}=k;M=this.width-_.panel.right,E&&(i.C$o(22),E.style.bottom=i.d58(w,D)),N&&(T="p",T+="x",i.M8Y(22),N.style.bottom=i.d58("px",D),i.M8Y(22),N.style.marginRight=i.d58(T,M)),H&&(A="p",A+="x",i.C$o(22),H.style.bottom=i.c6Y("px",D),i.M8Y(22),H.style.marginRight=i.d58(A,M))}this.clearPixelCache(),this.drawingObjects.length&&this.adjustDrawings(),this.runAppend("adjustPanelPositions",arguments)}},t.ChartEngine.prototype.createPanel=function(e,t,a,r,n,s){var o,l,h,c,u;if(!this.runPrepend("createPanel",arguments)){for(var d in r||(r="chart"),o=this.chart.canvasHeight,a||(i.M8Y(38),a=i.d58(o,.2)),a>o&&(i.M8Y(38),a=i.d58(o,.5)),i.M8Y(40),l=i.c6Y(o,a),i.C$o(0),h=i.c6Y(1,l),c=!1,this.panels)(u=this.panels[d]).percent*=h,u.soloing&&(c=!0);return this.stackPanel(e,t,l,r,n),this.panels[t].hidden=c,this.panels[t].exportable=!s,this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments),this.panels[t]}},t.ChartEngine.prototype.modifyPanel=function(e,i){var a,r,n,s,o,l,h,c;a=e.name;var{studies:u}=this.layout,{series:d}=this.chart,{name:p,display:m,yAxis:g}=i||{};for(var f in p||(p=t.uniqueID()),m||(m=p),g||((g=e.yAxis).name=p),r={},this.panels)f===e.name?((n=this.panels[f]).name=p,n.display=m,n.yAxis=g,e=r[p]=n,this.moveMarkers&&a!==p&&this.moveMarkers(a,p)):r[f]=this.panels[f];for(var y in this.panels=r,s=!1,u)(o=u[y]).panel===a&&(o.panel=p,o.parameters&&o.parameters.panelName&&(s=!0,o.parameters.panelName=p));for(var v in d)d[v].parameters.panel===a&&(s=!0,l={panel:p},d[v].parameters.yAxis&&d[v].parameters.yAxis.name===a&&(l.yAxis=g),this.modifySeries(v,l,!0));s&&this.changeOccurred("layout"),h=!1;for(var x=0;x<this.drawingObjects.length;x++)a===(c=this.drawingObjects[x]).panelName&&(c.panelName=p,h=!0);h&&this.changeOccurred("vector"),this.calculateYAxisPositions()},t.ChartEngine.prototype.setPanelHeight=function(e,t){var a,r,n,s;if(t){Object.values(this.panels).slice(-1)[0]===e&&(t+=this.xaxisHeight);var{canvasHeight:o}=this.chart,{percent:l}=e;i.M8Y(40),a=i.c6Y(o,t),i.C$o(0),r=i.c6Y(1,l),i.M8Y(145),n=i.c6Y(64,a,"1"),i.M8Y(40),s=i.d58(n,r),Object.values(this.panels).forEach(e=>{var t,a;i.r2m(),i.C$o(74),t=-i.d58("390080432",16),a=2;for(var r=1;i.O$R(r.toString(),r.toString().length,35159)!==t;r++)e.percent%=s,a+=2;-522222260!==i.q2D(a.toString(),a.toString().length,9733)&&(e.percent/=s)}),e.percent=a,this.adjustPanelPositions(),this.savePanels()}},t.ChartEngine.prototype.electNewPanelOwner=function(e,a){var r,n,s,o,l,h,c,u,d;if(i.r2m(),"string"==typeof e&&(e=this.panels[e]),n=e.yAxis,e&&e!=this.chart.panel){if((o=(s=e.yAxis).studies[0])&&o!=n.name||(o=s.renderers[0]),o&&o!=n.name||(o=s.studies[1]),o||(o=s.renderers[1]),a){s=e.yAxis=a,-2012665674,-592765991,l=2;for(var p=1;-2012665674!==i.q2D(p.toString(),p.toString().length,84711);p++)r=a.name,l+=2;-592765991!==i.q2D(l.toString(),l.toString().length,21447)&&(r=a.name),r=a.name}else if(o)(s=this.addYAxis(e,new t.ChartEngine.YAxis({name:o,position:s.position}))).renderers=e.yAxis.renderers,s.studies=e.yAxis.studies,r=o;else if(e.yaxisLHS){c=(h=e.yaxisRHS.concat(e.yaxisLHS).filter((function(e){return e.name!=n.name})))[0];for(var m=0;m<h.length;m++)if(!h[m].position){c=h[m];break}c&&(s=e.yAxis=c,r=c.studies[0]||c.renderers[0])}r?(o=r,n.name!=e.name&&(o=e.name),(d=this.layout.studies)&&d[r]&&(u=d[r].inputs.display),this.modifyPanel(e,{name:o,display:u||r,yAxis:s}),this.deleteYAxisIfUnused(e,n),this.calculateYAxisMargins(this.panels[o].yAxis)):this.checkForEmptyPanel(e)}return r},t.ChartEngine.prototype.configurePanelControls=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g;(".stx-ic","o-","edit",".stx","-ico-down",a=e.icons)&&(r=e.name==e.chart.name,a.classList.add("stx-show"),e.title=a.querySelector(".stx-panel-title"),e.up=a.querySelector(".stx-ico-up"),e.up&&(e.up=e.up.parentNode),e.solo=a.querySelector(".stx-ico-focus"),e.solo&&(e.solo=e.solo.parentNode),e.down=a.querySelector(".stx-ico-down"),e.down&&(e.down=e.down.parentNode),e.edit=a.querySelector(".stx-ico-edit"),e.edit&&(e.edit=e.edit.parentNode),e.close=a.querySelector(".stx-ico-close"),e.close&&(e.close=e.close.parentNode),e.title&&(e.title.innerHTML="",e.display&&e.title.appendChild(document.createTextNode(e.display)),r&&("stx-chart-","panel",e.title.classList.add("chart-title"),a.classList.add("stx-chart-panel"))),t.touchDevice&&!t.isSurface||this.makeModal(a),e.handle&&(t.touchDevice&&!t.isSurface||(e.handle.onmouseover=(o=this,function(){o.hideCrosshairs()})),t.touchDevice&&!t.isSurface||(e.handle.onmouseout=(s=this,function(){i.J8h(),s.showCrosshairs()})),n=function(e,i){return function(a){t.ChartEngine.resizingPanel||""!==e.openDialog||e.grabHandle(i)}},t.isSurface?e.handle.onpointerdown=n(this,e):e.handle.onmousedown=n(this,e),t.touchDevice&&(e.handle.ontouchstart=n(this,e))),e.up&&t.safeClickTouch(e.up,(l=this,h=e,i.r2m(),function(){i.r2m(),l.panelUp(h)})),e.down&&t.safeClickTouch(e.down,(c=this,u=e,i.J8h(),function(){i.r2m(),c.panelDown(u)})),e.solo&&t.safeClickTouch(e.solo,(d=this,p=e,i.r2m(),function(){i.r2m(),d.panelSolo(p)})),e.close&&("chart"==e.name?("non","e",e.close.style.display="none"):t.safeClickTouch(e.close,(m=this,g=e,function(){i.J8h(),m.panelClose(g)}))))},t.ChartEngine.prototype.stackPanel=function(e,a,r,n,s){var o,l,h,c,u,d,p;o="d",o+="i",o+="v",l="d",l+="i",l+="v",h="cha",h+="rt",this.runPrepend("stackPanel",arguments)||(n||(n=h),c=this.charts[n],i.M8Y(106),(u=i.c6Y(a,n))&&(e=c.symbol,c.symbolDisplay&&(e=c.symbolDisplay),s||(s=c.yAxis)),d=this.panels[a]=new t.ChartEngine.Panel(a,s),!u&&c.yAxis&&d.yAxis.position==c.yAxis.position&&(d.yAxis.width=c.yAxis.width),u&&!c.panel&&(c.panel=d),d.percent=r,d.chart=c,d.display=e,d.holder=t.newChild(this.container,l,"stx-holder"),d.subholder=t.newChild(d.holder,o,"stx-subholder"),d.subholder.style.zIndex=1,d.holder.panel=d,p=u?"stx-panel-chart":"stx-panel-study",d.holder.classList.add(p),this.controls.handleTemplate&&this.manageTouchAndMouse&&(d.handle=this.controls.handleTemplate.cloneNode(!0),this.container.appendChild(d.handle),d.handle.panel=d),this.controls.iconsTemplate&&(d.icons=this.controls.iconsTemplate.cloneNode(!0),d.subholder.appendChild(d.icons),this.configurePanelControls(d)),this.currentlyImporting||this.resizeCanvas(),this.runAppend("stackPanel",arguments))},t.ChartEngine.prototype.setPanelEdit=function(e,i){e.editFunction=i,e.edit&&t.safeClickTouch(e.edit,i),this.adjustPanelPositions()},t.ChartEngine.prototype.drawPanels=function(){var e,t,a,r,n,s,o,l,h,c,u,d;if(e="draw",e+="P",e+="a",e+="nels",i.J8h(),!this.runPrepend("drawPanels",arguments)){for(var p in t=!1,this.panels)if((a=this.panels[p]).state={},r=this.translateIf(a.display),a.title&&a.title.textContent!=r&&(a.title.innerHTML="",a.title.appendChild(document.createTextNode(r))),a.icons&&a.icons.classList.add("stx-show"),a.hidden)n="non",n+="e",a.icons&&a.icons.classList.remove("stx-show"),a.handle&&(a.handle.style.display="none"),a.holder.style.display=n;else{if("chart"!=a.name&&(s=this.manageTouchAndMouse,a.up&&(a.up.style.display=this.displayIconsUpDown&&s?"":"none"),a.down&&(a.down.style.display=this.displayIconsUpDown&&s?"":"none"),a.solo&&(a.solo.style.display=this.displayIconsSolo&&s?"":"none"),a.close&&(a.close.style.display=this.displayIconsClose&&s?"":"none"),a.edit&&(a.edit.style.display=a.editFunction&&s?"":"none")),a.holder.style.display="block",a.displayEdgeIfPadded){o="se",o+="g",o+="ment",l=Math.round(a.left)+.5,h=a.yAxis.top-.5,c=a.yAxis.bottom+.5,a.yaxisCalculatedPaddingLeft&&!a.yaxisTotalWidthLeft&&this.plotLine(l,l,h,c,this.canvasStyle("stx_grid_border"),o,this.chart.context,!1,{lineWidth:1}),i.M8Y(58);var m=i.d58(3,5,4,16,5);l=Math.round(a.right)+"0.5"*m,a.yaxisCalculatedPaddingRight&&!a.yaxisTotalWidthRight&&this.plotLine(l,l,h,c,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1})}if(t){if(u=a.top,u=Math.round(u)+.5,this.plotLine(a.left-.5,a.right+.5,u,u,this.canvasStyle("stx_panel_border"),"segment",this.chart.context,!1,{}),a.handle){this.displayPanelResize?a.handle.style.display="":(d="non",d+="e",a.handle.style.display=d),i.M8Y(81);var g=i.c6Y(3,19,6,340);a.handle.style.top=u-a.handle.offsetHeight/g+"px"}}else a.handle&&(a.handle.style.display="none"),t=!0}this.runAppend(e,arguments)}}},F=e=>{var t;(t=e.CIQ).ChartEngine.isDailyInterval=function(e){return"w",q.J8h(),"e","e","k","d","a","y","day"==e||("week"==e||"month"==e)},t.ChartEngine.prototype.setPeriodicity=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=q;if(a="set",a+="P",a+="e",a+="riodicity",!this.runPrepend(a,arguments)){if("object"!=typeof arguments[0]){e={period:arguments[0],interval:arguments[1],timeUnit:arguments[2]},x.C$o(97);var b=x.c6Y(4,10,121,3,1);i=arguments[arguments.length-b],3===arguments.length&&(e.timeUnit=void 0)}var{period:C,interval:S,timeUnit:w}=e;"function"!=typeof i&&(i=null),({period:C,interval:S,timeUnit:w}=t.cleanPeriodicity(C,S,w));var{layout:D}=this;D.setSpan={},D.range={},this.chart.inflectionPoint=null,r=!1,this.chart.symbol&&(r=this.needDifferentData({period:C,interval:S,timeUnit:w}));var{candleWidth:k,periodicity:M,interval:T,timeUnit:A}=D;if(n={prvPeriodicity:M,prvInterval:T,prvTimeUnit:A},D.periodicity=C,D.interval=S,D.timeUnit=w,o={stx:s=this,differentData:r,prevPeriodicity:n},r){if(l="la",l+="yout",this.changeOccurred(l),this.clearCurrentMarketData(),this.quoteDriver)for(var _ in this.charts)(h=this.charts[_]).symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:h.symbol,symbolObject:h.symbolObject,chart:h},j):this.loadChart(h.symbol,{chart:h},j));else this.dataCallback?(this.dataCallback(),j()):console.log("cannot change periodicity because neither dataCallback or quoteDriver are set");this.home()}else{for(var P in this.charts){c=this.charts[P];var{dataSegment:F,dataSet:L,maxTicks:E,scroll:N}=c;if(u=F?F.length:0,d=L?L.length:0,p=void 0,m=Math.round(c.maxTicks/2),this.setCandleWidth(k,c),g=!0,f=!1,N<=E?g=!1:F&&!F[m]&&(g=!1,x.C$o(0),f=x.d58(N,d)),g&&u>0&&(E<(Math.round(this.chart.width/k-.499)-1)/2&&(x.C$o(0),m=x.d58(u,1)),m>=u?(p=F[u-1].DT,x.C$o(0),m=x.d58(u,1)):p=F[m].DT),this.createDataSet(),g){if(u>0)for(var H=d-1;H>=0;H--)if(L[H].DT.getTime()<p.getTime()){x.C$o(111),c.scroll=x.d58(1,d,m,H);break}}else f?c.scroll=L.length+f:(y=Math.round(this.preferences.whitespace/k),x.C$o(30),c.scroll=x.d58(y,E,1))}if(this.displayInitialized&&this.draw(),this.changeOccurred("layout"),this.quoteDriver)for(var I in this.charts)!(v=this.charts[I]).symbol||!v.moreAvailable&&v.upToDate||this.quoteDriver.checkLoadMore(v);j(),this.runAppend("setPeriodicity",arguments)}}function j(){s.dispatch("periodicity",o),i&&i(null)}},t.ChartEngine.prototype.needDifferentData=function(e){var i,a,r,n;return"min","ute","minu","t","e",i=this.layout,a=t.ChartEngine.isDailyInterval(e.interval),r=t.ChartEngine.isDailyInterval(i.interval),n=!1,this.dontRoll||!r?i.interval!=e.interval&&(n=!0):a!=r&&(n=!0),a||e.timeUnit||(e.timeUnit="minute"),r||i.timeUnit||(i.timeUnit="minute"),e.timeUnit!=i.timeUnit&&(n=!0),q.J8h(),this.masterData&&this.masterData.length||(n=!0),n},t.ChartEngine.prototype.getPeriodicity=function(){var e,t,i;return t=(e=this.layout).interval,q.r2m(),(i=e.timeUnit)||(i=t,t=1),{period:e.periodicity,interval:t,timeUnit:i}}},L=e=>{var t,i=q;(t=e.CIQ).ChartEngine.prototype.isHistoricalMode=function(){var e,a,r,n,s,o;return e=new Date,a=!0,r=this.masterData,!!this.isHistoricalModeSet&&(r.length&&("D","T",n=this.getFirstLastDataRecord(r,"DT",!0),(a=((s=this.standardMarketIterator(n.DT))?s.next():n.DT)<=e)&&t.ChartEngine.isDailyInterval(s.interval)&&(o=this.chart.market.getOpen())&&e<o&&(i.M8Y(19),e.setHours(0,i.d58(0,"0"),0,0),+e==+s.begin&&(a=!1))),a)},i.r2m(),t.ChartEngine.prototype.isHome=function(){var e,t,a;t=(e=this.chart).dataSet,a=e.animatingHorizontalScroll,i.M8Y(0),i.r2m();var r=i.c6Y(12,10);i.C$o(36);var n=i.d58(31,11,47,517);return this.pixelFromTick(t.length-(a?r:"1">>n),e)<e.width+e.panel.left},t.ChartEngine.prototype.getPreviousBar=function(e,t,i){return this.getNextBarInternal(e,t,i,-1)},t.ChartEngine.prototype.getNextBar=function(e,t,i){return this.getNextBarInternal(e,t,i,1)},t.ChartEngine.prototype.getNextBarInternal=function(e,a,r,n){var s,o,l,h;if(s=e.dataSegment&&e.dataSegment[r])for(o=s.tick;o>0&&o<e.dataSet.length;)if(i.M8Y(22),o=i.c6Y(n,o),(l=e.dataSet[o])&&(h=t.existsInObjectChain(l,a))&&h.obj[h.member])return l;return null},t.ChartEngine.prototype.getFirstLastDataRecord=function(e,t,i){var a;if(e&&e.length)for(a=i?e.length-1:0;a>=0&&a<e.length;){if(e[a]&&void 0!==e[a][t])return e[a];i?a--:a++}return null},t.ChartEngine.prototype.leftTick=function(){return this.chart.dataSet.length-this.chart.scroll},t.ChartEngine.prototype.getNextInterval=function(e,t,a){var r;return t||(t=1),!1!==a&&(a=!0),(r=this.standardMarketIterator(e,a?this.dataZone:this.displayZone))?t<1?(i.C$o(146),r.previous(i.d58(t,1))):r.next(t):e},t.ChartEngine.prototype.standardMarketIterator=function(e,t,i){var a,r;return(a=i||this.chart).market?(r={begin:e,interval:this.layout.interval,periodicity:"tick"==this.layout.interval?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:t},a.market.newIterator(r)):null}},E=e=>{var t,i,a=q;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.draw=function(){var e,i,r,n,s,o,l,h,c,u,d,p,m,g;if(e="dr",e+="a",e+="w",i="n",i+="o",i+="n",i+="e",this.debug(),r=this.chart,n=this.layout,r.canvas&&r.dataSet&&r.canvasHeight){a.M8Y(85);var f=a.c6Y(0,15,13,7,7);if(this.offset=n.candleWidth*this.candleWidthPercent/f,t.clearCanvas(r.canvas,this),this.masterData&&!this.runPrepend("draw",arguments)){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.createDataSegment(),this.setBaselines(r),l=this.createXAxis(r),this.initializeDisplay(r),this.drawXAxis(r,l);try{this.renderYAxis(r)}catch(e){var y;if(y="reboo",y+="t draw",e&&e.message===y)return this.draw();throw e}for(s in r.tmpWidth=Math.floor(n.candleWidth*this.candleWidthPercent),r.tmpWidth%2==0&&(r.tmpWidth+=1,r.tmpWidth>n.candleWidth&&(a.M8Y(74),r.tmpWidth-=a.c6Y("2",2))),a.r2m(),r.tmpWidth<.5&&(r.tmpWidth=.5),this.plugins)(o=this.plugins[s]).display&&o.drawUnder&&o.drawUnder(this,r);if(r.legend&&(r.legend.colorMap=null),this.controls.baselineHandle&&(this.controls.baselineHandle.style.display=i),this.rendererAction(r,"underlay"),t.getFn("Studies.displayStudies")(this,r,!0),this.displayChart(r),t.getFn("Studies.displayStudies")(this,r,!1),this.rendererAction(r,"overlay"),r.legend&&r.legend.colorMap&&r.legendRenderer){h=-914919967,c=761783298,a.C$o(74),u=a.d58("2",2);for(var v=1;a.O$R(v.toString(),v.toString().length,98158)!==h;v++)r.legendRenderer(this,{chart:r,legendColorMap:r.legend.colorMap,coordinates:{x:r.legend.x,y:r.legend.y%r.panel.yAxis.top}}),u+=2;a.q2D(u.toString(),u.toString().length,41546)!==c&&r.legendRenderer(this,{chart:r,legendColorMap:r.legend.colorMap,coordinates:{x:r.legend.x,y:r.legend.y+r.panel.yAxis.top}})}for(s in this.plugins)(o=this.plugins[s]).display&&o.drawOver&&o.drawOver(this,r);for(var x in this.panels)this.panels[x].hidden||this.plotYAxisText(this.panels[x]);for(var b=0;b<this.yAxisLabels.length;b++)"series"==(d=this.yAxisLabels[b]).src&&d.args[6]&&!1===d.args[6].drawSeriesPriceLabels||this.createYAxisLabel.apply(this,d.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.displayInitialized=!0,(p=this.controls)&&(m="n",m+="one",g=this.manageTouchAndMouse&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.nonInteractive),p.home&&(p.home.style.display=g&&!this.isHome()?"block":"none"),p.chartControls&&(p.chartControls.style.display=g?"block":m)),t.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(r),this.runAppend(e,arguments),this.makeAsyncCallbacks()}}},t.ChartEngine.prototype.setSeriesRenderer=function(e){var{baseline:t,name:i,panel:r,yAxis:n}=e.params;return this.chart.seriesRenderers[i]?this.chart.seriesRenderers[i]:(n&&(e.params.yAxis=this.addYAxis(this.panels[r],n),this.resizeChart()),a.r2m(),e.stx=this,this.chart.seriesRenderers[i]=e,t&&this.registerBaselineToHelper(e),e)},t.ChartEngine.prototype.setMainSeriesRenderer=function(e){var i,r,n,s,o;i="sta",i+="nda",i+="loneBars",r="highLow",r+="Bars";var{chartType:l,aggregationType:h}=this.layout,{chart:c}=this,{custom:u}=c;n=this.mainSeriesRenderer,s=this.displayInitialized,n&&(e&&this.setMasterData(),this.displayInitialized=!1,n.removeAllSeries(),this.removeSeriesRenderer(n),n=this.mainSeriesRenderer=null),u&&u.chartType&&(l=u.chartType),"none"!=l&&(h&&"ohlc"!=h&&(l=h),(o=t.Renderer.produce(l,{panel:c.panel.name,name:"_main_series",highlightable:!1,useChartLegend:!0}))&&(this.setSeriesRenderer(o).attachSeries(null,{display:c.symbol}),n=this.mainSeriesRenderer=o),this.displayInitialized=s,[r,i,"barsHaveWidth"].forEach(function(e){a.r2m(),c[e]=this.mainSeriesRenderer&&this.mainSeriesRenderer[e]}.bind(this)))},t.ChartEngine.prototype.removeSeriesRenderer=function(e){var t;a.J8h();var{baseline:i,name:r}=e.params;t=this.controls["".concat(r," baseline-handle")],i&&(this.removeBaselineFromHelper(e),t&&(this.container.removeChild(t),delete this.controls[t])),delete this.chart.seriesRenderers[r]},t.ChartEngine.prototype.getSeriesRenderer=function(e){return this.chart.seriesRenderers[e]},t.ChartEngine.prototype.getRendererFromSeries=function(e){var t;for(var i in t=this.chart.seriesRenderers,a.J8h(),t)for(var r in t[i].seriesParams)if(t[i].seriesParams[r].id==e)return t[i];return null},t.ChartEngine.prototype.startClip=function(e,t){var i,a,r,n,s;e||(e=this.chart.panel.name),a=(i=this.panels[e]).yAxis,(r=this.chart).context.save(),r.context.beginPath(),n=i.left,s=i.width,t?(n=0,s=this.width):i.yaxisLHS&&i.yaxisLHS.length&&(n++,s--),r.context.rect(n,a.top,s,a.height),r.context.clip()},t.ChartEngine.prototype.endClip=function(){a.r2m(),this.chart.context.restore()},t.ChartEngine.prototype.setLineStyle=function(e,i){var a,r;a={},e&&"object"==typeof e?a=e:a.color=e,a.color||a.pattern||a.width||a.baseColor||(a=null),i||(i=this.chart),r=1,a&&a.width&&(r=a.width),a&&a.pattern&&(a.pattern=t.borderPatternToArray(r,a.pattern)),i.lineStyle=a},t.ChartEngine.prototype.setGapLines=function(e,i){var a;if(i||(i=this.chart),a={},e&&"object"==typeof e)a=e;else{if("boolean"==typeof e)return i.gaplines=e;a.color=e}a.color||a.pattern||a.fillMountain||(a=null),a&&a.pattern&&(a.pattern=t.borderPatternToArray(a.width,a.pattern)),a&&a.width<=0&&(a.width=null),i.gaplines=a},t.ChartEngine.prototype.getGapColorFunction=function(e,t,i,r,n){return"object"!=typeof i&&(i={color:i}),function(s,o,l){var h,c;return(h=n?n(s,o,l):i).color&&(h=h.color),a.r2m(),(c=o[e])||0===c||(c=o[t]),l||!c&&0!==c?r?("object"!=typeof r&&(r="string"==typeof r?{color:r}:{}),{color:r.color||h,pattern:r.pattern||i.pattern,width:r.width||i.width}):null:{color:h,pattern:i.pattern,width:i.width}}},t.ChartEngine.prototype.drawLineChart=function(e,i,r,n){var s,o,l,h,c,u,d,p,m,g,f;return"C",a.r2m(),"lo","se",o=(s=this.chart).context,l=s.lineStyle||{},h=this.canvasStyle(i),n||(n={}),this.startClip(e.name),(c=n.width||l.width||h.width)&&parseInt(c,10)<=25?o.lineWidth=Math.max(1,t.stripPX(c)):o.lineWidth=1,n.pattern=n.pattern||l.pattern||h.borderTopStyle,n.pattern=t.borderPatternToArray(o.lineWidth,n.pattern),this.canvasColor(i),(u=n.color||l.color)&&("a","u","to","auto"==u&&(u=this.defaultColor),n.opacity&&1!==n.opacity&&(u=t.hexToRgba(t.colorToHex(u),parseFloat(n.opacity))),o.strokeStyle=u),n.skipProjections=!0,d=n.field||s.defaultPlotField,p=n.subField||s.defaultPlotField||"Close",(m=n.gapDisplayStyle)||!1===m||(m=n.gaps),m||!1===m||(m=s.gaplines),m||(m="transparent"),n.gapDisplayStyle=m,g=this.getGapColorFunction(d,p,{color:o.strokeStyle,pattern:n.pattern,width:o.lineWidth},m,r),e.chart.tension&&(n.tension=e.chart.tension),(f=this.plotDataSegmentAsLine(d,e,n,g)).colors.length||f.colors.push(o.strokeStyle),o.lineWidth=1,this.endClip(),n.returnObject?f:f.colors},t.ChartEngine.prototype.drawChannelChart=function(e,i,r){var n,s,o,l,h,c,u,d,p,m;for("subFi","eld","H","igh",(n=t.clone(r)).color=r.color,s=this.drawLineChart(e,n.style,i,n),o=n.border_color_up||this.getCanvasColor("stx_channel_up"),l=n.border_color_down||this.getCanvasColor("stx_channel_down"),n[r.field?"subField":"field"]=n.field_high||"High",n.color=o,h=this.drawLineChart(e,n.style,i,n),n[r.field?"subField":"field"]=n.field_low||"Low",n.color=l,c=this.drawLineChart(e,n.style,i,n),n[r.field?"subField":"field"]=r.subField||this.chart.defaultPlotField||"Close",d=[],p=[],u=0;u<h.points.length;u+=2)d.push([h.points[u],h.points[u+1]]);for(u=0;u<c.points.length;u+=2)p.push([c.points[u],c.points[u+1]]);for(m=this.chart.context.lineWidth/2,u=s.points.length-2;u>=0;u-=2)d.push([s.points[u],s.points[u+1]-m]),p.push([s.points[u],s.points[u+1]+m]);return this.startClip(e.name),n.color=o,t.fillArea(this,d,n),n.color=l,t.fillArea(this,p,n),this.endClip(),s.colors=s.colors.concat(h.colors).concat(c.colors),a.J8h(),r.returnObject?s:s.colors},t.ChartEngine.prototype.connectTheDots=function(e,i,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M;if(a.J8h(),o||(o={}),"none"!=o.pattern&&(!0===s&&(s=this.chart.panel),null==n&&(n=this.chart.context),!(e.length<4))){l=0,h=this.chart.canvasHeight,0,c=this.chart.width,s&&(h=s.yAxis.bottom,l=s.yAxis.top),n.lineWidth=1.1,"object"==typeof i?(n.strokeStyle=i.color,i.opacity?n.globalAlpha=i.opacity:n.globalAlpha=1,n.lineWidth=t.stripPX(i.width)):!i||"auto"==i||t.isTransparent(i)?n.strokeStyle=this.defaultColor:n.strokeStyle=i,o.opacity&&(n.globalAlpha=o.opacity),o.lineWidth&&(n.lineWidth=o.lineWidth),u=t.borderPatternToArray(n.lineWidth,o.pattern),n.beginPath();for(var T=0;T<e.length-2;T+=2){if(d=e[T],a.M8Y(22),p=e[a.c6Y(1,T)],a.C$o(22),m=e[a.d58(2,T)],a.M8Y(22),g=e[a.d58(3,T)],isNaN(d)||isNaN(m)||isNaN(p)||isNaN(g))return;f=0,y=1,a.M8Y(0),v=a.c6Y(m,d),a.M8Y(0),x=a.d58(g,p);for(var A=0;A<4;A++){if(0===A&&(b=-v,a.M8Y(0),C=-a.d58(0,d)),1==A&&(b=v,a.C$o(0),C=a.c6Y(c,d)),2==A&&(b=-x,a.C$o(0),C=-a.d58(l,p)),3==A&&(b=x,a.M8Y(0),C=a.d58(h,p)),a.C$o(40),S=a.d58(b,C),(g||0===g)&&0===b&&C<0)return!1;if(b<0){if(S>y)return!1;S>f&&(f=S)}else if(b>0){if(S<f)return!1;S<y&&(y=S)}}a.M8Y(147),w=a.c6Y(d,f,v),a.C$o(147),D=a.c6Y(p,f,x),a.C$o(147),k=a.c6Y(d,y,v),a.M8Y(147),M=a.c6Y(p,y,x);try{n.setLineDash(u&&u.length?u:[]),n.moveTo(w,D),n.lineTo(k,M)}catch(e){}}n.stroke(),n.closePath(),n.globalAlpha=1,n.lineWidth=1}},t.ChartEngine.prototype.plotSpline=function(e,r,n,s,o,l,h){var c;h||(h={}),"none"!=h.pattern&&(!0===l&&(l=this.chart.panel),null==o&&(o=this.chart.context),o.save(),a.J8h(),o.lineWidth=1.1,"object"==typeof n?(o.strokeStyle=n.color,n.opacity?o.globalAlpha=n.opacity:o.globalAlpha=1,o.lineWidth=t.stripPX(n.width)):("a","uto",!n||"auto"==n||t.isTransparent(n)?o.strokeStyle=this.defaultColor:o.strokeStyle=n),h.opacity&&(o.globalAlpha=h.opacity),h.lineWidth&&(o.lineWidth=h.lineWidth),c=t.borderPatternToArray(o.lineWidth,h.pattern),h.pattern&&o.setLineDash&&(o.setLineDash(c),o.lineDashOffset=0),o.beginPath(),i.plotSpline(e,r,o),o.stroke(),o.closePath(),o.restore())},t.ChartEngine.prototype.rawWatermark=function(e,t,i,a){this.canvasFont("stx_watermark",e),e.fillStyle=this.defaultColor,e.globalAlpha=.5,this.chart.context.textBaseline="alphabetic",e.fillText(a,t,i),e.globalAlpha=1},a.r2m(),t.ChartEngine.prototype.watermark=function(e,t){var i,r,n,s,o,l,h,c,u,d,p,m;if(i="ri",i+="g",i+="ht",r="m",r+="iddle",n="to",a.r2m(),n+="p",s="bo",s+="ttom",o="obj",o+="e",o+="c",o+="t",t&&typeof t!=o&&(t={h:arguments[1],v:arguments[2],text:arguments[3]}),(l=(t={h:t.h||"left",v:t.v||s,text:t.text||"",hOffset:0===t.hOffset?0:t.hOffset||10,vOffset:0===t.vOffset?0:t.vOffset||20,context:t.context||this.chart.context}).context)&&(h=this.panels[e])&&!h.hidden){if(c=h.yAxis.bottom-t.vOffset,t.v==n)c=h.top+t.vOffset;else if(t.v==r){a.M8Y(2);var g=a.c6Y(17,15);c=(h.top+h.yAxis.bottom)/g}if(l.save(),this.canvasFont("stx_watermark",l),this.canvasColor("stx_watermark",l),l.textBaseline="alphabetic",u=h.left+t.hOffset,t.h==i)u=h.right-t.hOffset;else if("center"==t.h){a.C$o(25);var f=a.d58(8,8,2);u=(h.right+h.left-l.measureText(t.text).width)/f}l.globalAlpha=.5,this.highlightedDraggable&&(a.C$o(38),l.globalAlpha*=a.c6Y("0.3",1)),d=1137626162,p=255910138,m=2;for(var y=1;a.O$R(y.toString(),y.toString().length,46519)!==d;y++)l.fillText(t.text,u,c),l.restore(),m+=2;a.O$R(m.toString(),m.toString().length,5622)!==p&&(l.fillText(t.text,u,c),l.restore())}},t.ChartEngine.prototype.displayErrorAsWatermark=function(e,t){var i,r,n,s,o,l,h,c,u,d;t&&(e||(e="chart"),(i=this.panels[e])&&!i.hidden&&((r=i.state)||(i.state=r={}),(n=r.studyErrors)||(r.studyErrors=n=new Set),n.has(t)||(s=r.watermarkOffset||10,10,o=this.getCanvasFontSize("stx_watermark"),this.chart&&this.chart.chartControls&&(l=i.yAxis.bottom,h=this.chart.chartControls,a.M8Y(0),c=a.d58(l,s),a.M8Y(0),u=a.c6Y(c,o),(c>h.offsetTop&&c<h.offsetTop+h.offsetHeight||u>h.offsetTop&&u<h.offsetTop+h.offsetHeight)&&(s=l-h.offsetTop+10)),n.add(t),d={h:"center",v:"bottom",text:t,vOffset:s},a.M8Y(22),s+=a.d58(10,o),r.watermarkOffset=s,this.watermark(e,d))))},t.ChartEngine.prototype.displayChart=function(e){this.runPrepend("displayChart",arguments)||(this.rendererAction(e,"main"),this.runAppend("displayChart",arguments))}},N=e=>{var t,i=q;i.r2m(),(t=e.CIQ).ChartEngine.prototype.cloneStyle=function(e){var i,a,r,n,s,o,l;function h(e){return e[1].toUpperCase()}for(var c in i={},a=!1,e)if(r=e[c],"backgroundAttachment"==c&&(a=!0),a)r&&r.constructor==String&&isNaN(c)&&(i[c]=r);else if(isNaN(c))i[c.replace(t.camelCaseRegExp,h)]=r;else if(n=e.getPropertyValue(r)){for(s=0,o=(r=r.split("-")).length,l=r[0];++s<o;)l+=r[s].charAt(0).toUpperCase()+r[s].slice(1);i[l]=n}return i},t.ChartEngine.prototype.canvasStyle=function(e){var t,a,r;return i.J8h(),(t=this.styles[e])||((a=document.createElement("div")).className=e,this.container.appendChild(a),r=getComputedStyle(a),t=this.styles[e]=this.cloneStyle(r),this.container.removeChild(a),r||(this.styles[e]=null)),t},t.ChartEngine.prototype.colorOrStyle=function(e){return-1!=e.indexOf("#")?e:(i.r2m(),-1!=e.indexOf("(")||"transparent"==e?e:this.canvasStyle(e))},t.ChartEngine.prototype.clearStyles=function(){this.styles={},this.defaultColor=""},t.ChartEngine.prototype.setStyle=function(e,a,r){this.styles[e]||this.canvasStyle(e),this.styles[e]||(this.styles[e]={}),i.J8h(),this.styles[e][t.makeCamelCase(a)]=r},t.ChartEngine.prototype.canvasFont=function(e,t){var a,r;if("und","e","fine","d",t||(t=this.chart.context),a=this.canvasStyle(e)){i.M8Y(124);var n=i.d58(2446,20,10,17);i.C$o(76);i.d58(1961,2,966,7);i.J8h(),i.M8Y(148);var s=i.c6Y(3,1,6075,12142,3);i.M8Y(77);var o=i.d58(178169,19,9,20360);i.M8Y(0);i.d58(2552,12);i.M8Y(0);var l=i.c6Y(3028,8);i.M8Y(8);i.d58(11,10,1);-1==(r=a.fontStyle+" "+a.fontWeight+" "+a.fontSize+(n>=s?o<=l?516.59:475.96:" ")+a.fontFamily).indexOf("undefined")?t.font=r:("bad css style for clas","s ",this.styles[e]=null,i.M8Y(22),console.log(i.c6Y(e,"bad css style for class ")))}},t.ChartEngine.prototype.canvasColor=function(e,t){var a,r,n;i.J8h(),t||(t=this.chart.context),(a=this.canvasStyle(e))&&((r=a.color)||(r=this.defaultColor),t.globalAlpha=1,t.fillStyle=r,t.strokeStyle=r,void 0!==(n=a.opacity)&&(t.globalAlpha=n))},t.ChartEngine.prototype.getCanvasFontSize=function(e){var i;return(i=this.canvasStyle(e).fontSize)||(i="12"),parseInt(t.stripPX(i),10)},t.ChartEngine.prototype.getCanvasColor=function(e){return i.J8h(),this.canvasStyle(e).color},t.ChartEngine.prototype.getDefaultColor=function(){var e,a,r,n;for(i.J8h(),this.defaultColor="#000000",e=null,a=this.chart.container;!e||t.isTransparent(e);){if(!(r=getComputedStyle(a)))return;if(e=r.backgroundColor,t.isTransparent(e)&&(e="transparent"),!(a=a.parentNode)||!a.tagName)break}e?("#","FF","FFFF","tr","anspar","ent","transparent"==e&&(e="#FFFFFF"),this.containerColor=e,t.isTransparent(e)?this.defaultColor="#000000":(n=t.hsv(e)[2],this.defaultColor=n>.65?"#000000":"#FFFFFF")):("#FF","FFFF",this.containerColor="#FFFFFF")}},H=e=>{var t;(t=e.CIQ).ChartEngine.XAxis=function(e){for(var t in e)this[t]=e[t]},t.extend(t.ChartEngine.XAxis.prototype,{formatter:null,adjustTimeZone:!0,idealTickSizePixels:null,timeUnit:null,timeUnitMultiplier:null,displayBorder:!0,displayGridLines:!0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:1},!0),t.ChartEngine.XAxisLabel=function(e,t,i){this.hz=e,q.J8h(),this.grid=t,this.text=i},t.ChartEngine.prototype.createXAxis=function(e){var t,i;return"crea","teX","Axis",e.dataSegment.length<=0||e.xAxis.noDraw?null:(t=[e],q.J8h(),(i=this.runPrepend("createXAxis",t))||(i=this.mainSeriesRenderer&&this.mainSeriesRenderer.createXAxis?this.mainSeriesRenderer.createXAxis(e):this.createTickXAxisWithDates(e),this.headsUpHR(),this.runAppend("createXAxis",t)),i)},t.ChartEngine.prototype.createXAxisLabel=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=q;arguments[0]instanceof t.ChartEngine.Panel&&(e={panel:arguments[0],txt:arguments[1],x:arguments[2],backgroundColor:arguments[3],color:arguments[4],pointed:arguments[5],padding:arguments[6]}),i=e.panel,a=e.txt,f.r2m(),r=e.x,n=e.backgroundColor,s=e.color,o=e.pointed,l=0===e.padding?0:e.padding||2,h=this.chart.context,c="stx-float-date",f.C$o(25);var y=f.d58(21,23,4);u=this.getCanvasFontSize(c)+l*y,this.canvasFont(c,h);try{d=h.measureText(a).width+2*l}catch(e){d=0}if(p=i.top+i.height-u-l,!(r+d/2<i.left||r-d/2>i.right)){if(!o){if(r+d/2>i.right){f.M8Y(44);var v=f.d58(20,0,3,20);r=i.right-d/v}if(r-d/2<i.left){f.C$o(136);var x=f.d58(1,8,78,10);r=i.left+d/x}}h.fillStyle=n,t.roundRect({ctx:h,x:r-d/2,top:p,width:d,height:u,radius:3,fill:!0}),m=i.bottom-i.yAxis.bottom-u,h.beginPath(),o?(f.C$o(0),h.moveTo(f.c6Y(r,m),p),f.C$o(30),h.lineTo(r,f.c6Y(m,p,1)),f.M8Y(22),h.lineTo(f.c6Y(m,r),p),h.closePath(),h.fill()):(h.moveTo(r,p),f.C$o(0),h.lineTo(r,f.c6Y(p,m)),h.strokeStyle=n,h.stroke()),h.textBaseline="top",h.fillStyle=s||t.chooseForegroundColor(n),h.fillStyle==n&&(g="#",g+="FFFFFF","#FFFFFF"==n.toUpperCase()?h.fillStyle="#000000":h.fillStyle=g),f.M8Y(149),h.fillText(a,f.c6Y(l,d,"2",r,1),f.d58(1,l,p,"2",f.C$o(150)))}}},I=e=>{var t,i=q;(t=e.CIQ).createLabel=function(e){i.r2m(),e.ctx.textBaseline="middle",e.ctx.fillStyle=e.color?e.color:t.chooseForegroundColor(e.backgroundColor),e.ctx.fillStyle===e.backgroundColor&&("#","FFFFF","F","#FFFFFF"==e.backgroundColor.toUpperCase()?e.ctx.fillStyle="#000000":e.ctx.fillStyle="#FFFFFF"),e.ctx.fillText(e.txt,e.x+e.margin.left,e.y+e.margin.top),e.ctx.textAlign="left"},t.roundRectArrow=function(e){i.J8h(),t.roundRect(e,"arrow")},t.semiRoundRect=function(e){t.roundRect(e,"flush")},t.rect=function(e){var a;i.J8h(),e.radius=0,a=2;for(var r=1;1235241838!==i.O$R(r.toString(),r.toString().length,22296);r++)t.roundRect(e),i.C$o(0),a+=i.c6Y("2",0);1091206516!==i.O$R(a.toString(),a.toString().length,87195)&&t.roundRect(e)},t.noop=function(e){e.color=e.backgroundColor,t.createLabel(e)},t.tickedRect=function(e){var a;t.rect(e),i.r2m(),i.C$o(22);var r=i.c6Y(2,0);a=Math.round(e.top+e.height/r)+.5,e.ctx.beginPath(),e.ctx.moveTo(e.x-2,a),e.ctx.lineTo(e.x,a),e.ctx.stroke(),e.ctx.closePath()},t.roundRect=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C;r="u",r+="n",r+="def",r+="ined",n="un",n+="d",n+="efin",n+="ed",9===arguments.length&&(e={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments[3],height:arguments[4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),s=e.stroke,o=e.x,l=e.top,h=e.width,c=e.height,u=e.radius,d=e.fill,p=e.ctx,typeof s==n&&(s=!0),typeof u===r&&(u=5,h<0&&(u=-5)),m=h<0?-1*u:u,u&&!a&&(i.M8Y(0),o=i.d58(o,1)),i.C$o(22),i.J8h(),g=i.c6Y(u,o),i.C$o(22),f=i.c6Y(h,o),i.M8Y(22),y=i.d58(m,l),i.C$o(22),v=i.d58(c,l),i.M8Y(0),x=i.c6Y(f,u),i.M8Y(0),b=i.c6Y(v,m),p.beginPath(),p.moveTo(g,l),p.lineTo(x,l),p.quadraticCurveTo(f,l,f,y),p.lineTo(f,b),p.quadraticCurveTo(f,v,x,v),p.lineTo(g,v),"flush"==a?(p.lineTo(o,v),p.lineTo(o,l)):"arrow"==a?(i.C$o(0),p.quadraticCurveTo(o,v,i.d58(o,u),b),C=h<0?1:-1,i.M8Y(151),p.lineTo(i.c6Y(2,o,C,c),i.c6Y(2,l,c,i.M8Y(139))),i.C$o(0),p.lineTo(i.d58(o,u),y),p.quadraticCurveTo(o,l,g,l)):(p.quadraticCurveTo(o,v,o,b),p.lineTo(o,y),p.quadraticCurveTo(o,l,g,l)),p.closePath(),e.backgroundColor&&(p.fillStyle=e.backgroundColor),s&&p.stroke(),d&&p.fill(),e.txt&&t.createLabel(e)},t.ChartEngine.YAxis=function(e){for(var a in e)this[a]=e[a];this.name||(this.name=t.uniqueID()),"none"==this.position&&(i.M8Y(46),this.width=i.d58("0",64))},t.extend(t.ChartEngine.YAxis.prototype,{high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,multiplier:null,bottom:null,top:null,height:null,left:null,width:null,renderers:[],studies:[]},!0),i.M8Y(0),t.ChartEngine.YAxis.defaultShadowBreaks=[[1e3,i.c6Y("2",0)],[5,4],[.001,8]],t.ChartEngine.YAxis.smallChartShadowBreaks=[[10,2],[1,4]],t.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,t.ChartEngine.YAxis.prototype.max=null,i.J8h(),t.ChartEngine.YAxis.prototype.min=null,t.ChartEngine.YAxis.prototype.decimalPlaces=null,t.ChartEngine.YAxis.prototype.idealTickSizePixels=null,t.ChartEngine.YAxis.prototype.minimumPriceTick=null,t.ChartEngine.YAxis.prototype.fractional=null,t.ChartEngine.YAxis.prototype.displayBorder=!0,t.ChartEngine.YAxis.prototype.displayGridLines=!0,t.ChartEngine.YAxis.prototype.noDraw=null,t.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,t.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,t.ChartEngine.YAxis.prototype.drawPriceLabels=!0,t.ChartEngine.YAxis.prototype.goldenRatioYAxis=!0,t.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,t.ChartEngine.YAxis.prototype.justifyRight=null,t.ChartEngine.YAxis.prototype.flipped=!1,t.ChartEngine.YAxis.prototype.textBackground=!1,t.ChartEngine.YAxis.prototype.priceFormatter=null,t.ChartEngine.YAxis.prototype.bottomOffset=0,t.ChartEngine.YAxis.prototype.topOffset=0,t.ChartEngine.YAxis.prototype.initialMarginTop=10,t.ChartEngine.YAxis.prototype.initialMarginBottom=10,t.ChartEngine.YAxis.prototype.zoom=0,t.ChartEngine.YAxis.prototype.scroll=0,i.M8Y(20),t.ChartEngine.YAxis.prototype.heightFactor=i.c6Y("1",0),Object.defineProperty(t.ChartEngine.YAxis.prototype,"width",{configurable:!0,enumerable:!0,get:function(){return i.r2m(),this._dynamicWidth||this._width},set:function(e){this._width=e,this._dynamicWidth<e&&(this._dynamicWidth=NaN)}}),t.ChartEngine.YAxis.prototype.width=60,t.ChartEngine.YAxis.prototype.smallScreenWidth=50,t.ChartEngine.YAxis.prototype.textStyle=null,t.ChartEngine.YAxis.prototype.position=null,t.ChartEngine.YAxis.prototype.pretty=!0,t.ChartEngine.YAxis.prototype.increments=[1,2.5,5],t.ChartEngine.YAxis.prototype.prettySemiLog=!0,t.ChartEngine.YAxis.prototype.shadowBreaks=t.ChartEngine.YAxis.defaultShadowBreaks,t.ChartEngine.YAxis.prototype.getYAxis=function(e){return this},t.ChartEngine.YAxis.prototype.isShared=function(e,t){var a,r;if(i.r2m(),a=this.studies.length,r=this.renderers.length,a>1)return!0;if(r&&a)return!0;if(!r)return!1;if(r>1&&t)return!0;for(var n=r-1;n>=0;n--)e.chart.seriesRenderers[this.renderers[n]].params.dependentOf&&r--;return i.M8Y(152),i.d58(r,1)},t.ChartEngine.YAxis.prototype.setBackground=function(e,i){var a;i||(i={}),i.color||(i.color="auto"),a=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],t.fillArea(e,a,{color:i.color,opacity:i.opacity})},t.ChartEngine.YAxis.prototype.setBreakpointWidth=function(e){var a;if(e){var{width:r,smallScreenWidth:n}=t.ChartEngine.YAxis.prototype;i.M8Y(129),a=i.c6Y(e,"break-sm"),this.width=a?n:r}},t.ChartEngine.prototype.getLabelOffsetInPixels=function(e,t){var a,r;if(i.J8h(),"rou","ndRectArrow",a=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,!("roundRectArrow"!=this.yaxisLabelStyle||a&&this.extendLastTick&&0!==e.yaxisPaddingRight)){3,i.M8Y(153);var n=i.d58(10,6,13,19,14);return r=this.getCanvasFontSize("stx_yaxis")+3*n,i.C$o(38),i.d58(r,.66)}return 0},t.ChartEngine.prototype.flipChart=function(e){i.r2m(),this.layout.flipped!=e&&(this.layout.flipped=e,this.chart.yAxis.flipped=e,this.changeOccurred("layout"),this.draw())},t.ChartEngine.prototype.calculateYAxisMargins=function(e){if(e.heightFactor){i.C$o(7);var t=i.d58(12,0,13);e.zoom=e.height*(t-e.heightFactor)}e.zoom+=e.initialMarginTop+e.initialMarginBottom,i.C$o(68);var a=i.c6Y(43,3,15);e.scroll=(e.initialMarginTop-e.initialMarginBottom)/a,e.zoom>e.height&&(e.zoom=0,e.scroll=0)},t.ChartEngine.prototype.resetDynamicYAxis=function(e){var t,a,r,n;if(t="resetDynamicY",t+="Ax",t+="is",!this.runPrepend("resetDynamicYAxis",arguments)){for(var s in a=!1,this.panels)if(r=this.panels[s],(!e||!e.chartName||r.chart.name===e.chartName)&&r.yaxisLHS&&r.yaxisRHS){n=r.yaxisLHS.concat(r.yaxisRHS);for(var o=0;o<n.length;o++)n[o]._dynamicWidth&&(n[o]._dynamicWidth=NaN,a=!0)}i.J8h(),!a||e&&e.noRecalculate||this.calculateYAxisPositions(),this.runAppend(t,arguments)}},t.ChartEngine.prototype.notifyBreakpoint=function(e){var t,i;if(this.chart.breakpoint!==e&&["break-lg","break-md","break-sm"].includes(e)){var{chart:a}=this,{dynamicYAxis:r}=a;for(var n in this.clearStyles(),a.breakpoint=e,this.panels){i=(t=this.panels[n]).yaxisRHS.concat(t.yaxisLHS);for(var s=0;s<i.length;s++)i[s].setBreakpointWidth(e)}r&&this.resetDynamicYAxis({chartName:a.name})}},t.ChartEngine.prototype.adjustYAxisHeightOffset=function(e,t){var a,r;(a=t.topOffset)+(r=t.bottomOffset)>e.height&&(console.log("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0."),t.bottomOffset=0,t.topOffset=0),this.xaxisHeight||0===this.xaxisHeight||(this.xaxisHeight=this.getCanvasFontSize("stx_xaxis")+4,(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)),i.J8h(),(this.xAxisAsFooter&&e.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&e==this.chart.panel)&&(r+=this.xaxisHeight),t.top=e.top+a,t.bottom=e.bottom-r},t.ChartEngine.prototype.plotYAxisGrid=function(e){var t,a,r,n;t="p",t+="lo",t+="tYAxisGrid",this.runPrepend("plotYAxisGrid",arguments)||(a=this.getBackgroundCanvas().context,r=e.yAxis,i.J8h(),r.yAxisPlotter&&(n="gri",n+="d",r.yAxisPlotter.draw(a,n)),this.runAppend(t,arguments))},t.ChartEngine.prototype.plotYAxisText=function(e){var t,a,r,n,s,o;if(t="midd",t+="l",t+="e",!this.runPrepend("plotYAxisText",arguments)){for(a=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",a),this.canvasColor("stx_yaxis",a),a.textBaseline=t,r=e.yaxisLHS,n=0;n<r.length;n++)s="righ",s+="t",a.textAlign=s,l(r[n]);for(r=e.yaxisRHS,n=0;n<r.length;n++)o="l",o+="eft",a.textAlign=o,l(r[n]);a.textAlign="left",a.textBaseline="alphabetic",this.runAppend("plotYAxisText",arguments)}function l(e){e.yAxisPlotter&&(i.r2m(),!e.noDraw&&e.width&&(e.justifyRight?a.textAlign="right":!1===e.justifyRight&&(a.textAlign="left"),e.yAxisPlotter.draw(a,"text")))}},t.ChartEngine.prototype.decimalPlacesFromPriceTick=function(e){return e<1e-4?8:e<.01?4:(i.r2m(),e<.1?2:e<1?1:0)},t.ChartEngine.prototype.formatYAxisPrice=function(e,a,r,n,s){var o,l,h,c,u;return null==e||isNaN(e)?"":(a||(a=this.chart.panel),o=n||a.yAxis,(l=r)||0===l||(l=o.printDecimalPlaces),l||0===l||(l=this.decimalPlacesFromPriceTick(o.priceTick)),h=o==a.chart.yAxis?2e4:1e3,o.priceTick>=h?(e=e.toFixed(l),t.condenseInt(e)):((c=this.internationalizer)&&!1!==s?(l>=(u=c.priceFormatters.length)&&(i.C$o(0),l=i.d58(u,1)),e=c.priceFormatters[l].format(e)):e=e.toFixed(l),e))},t.ChartEngine.prototype.calculateYAxisRange=function(e,t,a,r){var n,s,o,l,h,c,u,d,p;if(a==Number.MAX_VALUE&&(a=0,r=0),n=e.height,s=null,o=null,this.adjustYAxisHeightOffset(e,t),t.height=t.bottom-t.top,l=Math.round(Math.abs(n/5)),t.zoom>=0&&n-Math.abs(t.scroll)<l){i.C$o(0);var m=i.d58(0,1);i.C$o(0);var g=i.c6Y(19,18);t.scroll=(n-l)*(t.scroll<0?m:g)}i.r2m(),h=e.chart.name===e.name&&e.yAxis.name===t.name,c=a>0&&(this.layout.semiLog||"log"==this.layout.chartScale)&&!e.chart.isComparison&&"pandf"!=this.layout.aggregationType,(a||0===a)&&(r-a==0?(1==(u=Math.pow(10,-(a.toString()+".").split(".")[1].length))&&(i.M8Y(74),u=i.c6Y("100",68)),i.C$o(22),s=i.c6Y(u,a),i.C$o(0),o=i.c6Y(a,u)):h&&c&&(r||0===r)?(d=Math.log(a)/Math.LN10,p=Math.log(r)/Math.LN10,s=Math.pow(10,p),o=Math.pow(10,d)):(s=r,o=a),t.high=s,t.low=o),(t.max||0===t.max)&&(t.high=t.max),(t.min||0===t.min)&&(t.low=t.min),t.shadow=t.high-t.low,h&&(t.semiLog!=c&&(this.clearPixelCache(),t.semiLog=c),t.flipped=this.layout.flipped)},t.ChartEngine.prototype.renderYAxis=function(e){var i,a,r,n,s,o,l,h,c,u,d;if(i="r",i+="end",i+="erYA",i+="xis",a="y",a+="A",a+="xi",a+="s",!this.runPrepend("renderYAxis",arguments)){if(this.checkLogScale())throw new Error("reboot draw");this.rendererAction(e,a);var{context:p}=this.getBackgroundCanvas(e);for(var m in this.panels)if((r=this.panels[m]).chart==e){for(n=r.yaxisRHS.concat(r.yaxisLHS),s=0;s<n.length;s++)l="Stud",l+="ies.doPostDrawYAxis",o=n[s],this.calculateYAxisRange(r,o,o.lowValue,o.highValue),(h=t.getFn("Studies.getYAxisParameters",{})(this,o)).yAxis=o,this.createYAxis(r,h),this.drawYAxis(r,h),t.getFn(l)(this,o);for(s=0;s<n.length;s++)(o=n[s]).dropzone&&(c="stx-subhol",c+="der",c+=" dropzone left",(u=this.canvasStyle(c))&&(p.strokeStyle=u.borderLeftColor,p.lineWidth=parseFloat(u.borderLeftWidth),p.beginPath(),"all"==o.dropzone?p.strokeRect(o.left,o.top,o.width,o.height):(d=o.left+("left"==o.dropzone?0:o.width),p.moveTo(d,o.top),p.lineTo(d,o.top+o.height),p.stroke())));this.displayDragOK&&this.displayDragOK(!0)}this.runAppend(i,arguments)}},t.ChartEngine.prototype.updateFloatHRLabel=function(e){var a,r,n,s,o,l,h;if("n","on","e",this.floatCanvas&&(a=e.yaxisLHS.concat(e.yaxisRHS),r=this.crossYActualPos?this.crossYActualPos:this.cy,this.floatCanvas.isDirty&&t.clearCanvas(this.floatCanvas,this),!this.controls.crossX||"none"!=this.controls.crossX.style.display)){this.controls.crossY&&("p","x",n=e.width,"roundRectArrow"==this.yaxisLabelStyle&&(n-=7),this.controls.crossY.style.left=e.left+"px",i.M8Y(22),this.controls.crossY.style.width=i.d58("px",n));for(var c=0;c<a.length;c++)s=a[c],o=this.transformedPriceFromPixel(r,e,s),isNaN(o)||(s.min||0===s.min)&&o<s.min||(s.max||0===s.max)&&o>s.max||(l=null,s!==e.chart.yAxis&&(l=this.decimalPlacesFromPriceTick(s.priceTick),(s.decimalPlaces||0===s.decimalPlaces)&&(l=s.decimalPlaces)),o=s.priceFormatter?s.priceFormatter(this,e,o,l):this.formatYAxisPrice(o,e,l,s),h=this.canvasStyle("stx-float-price"),this.createYAxisLabel(e,o,r,h.backgroundColor,h.color,this.floatCanvas.context,s),this.floatCanvas.isDirty=!0)}},t.ChartEngine.prototype.whichYAxis=function(e,t,i){var a,r,n;if(void 0===t&&(t=this.cx),void 0===i&&(i=this.cy),a=this.whichPanel(i),e&&e==a){r=e.yaxisLHS.concat(e.yaxisRHS);for(var s=0;s<r.length;s++)if((n=r[s]).left<=t&&n.left+n.width>=t)return n}return null},t.ChartEngine.prototype.yaxisMatches=function(e,i){return!!(e&&e.getYAxis&&i&&i instanceof t.ChartEngine.YAxis)&&e.getYAxis(this).name==i.name},t.ChartEngine.prototype.createYAxisLabel=function(e,a,r,n,s,o,l){var h,c,u,d,p,m,g,f,y,v;if("st","x","_y","axis",!1!==e.yAxis.drawPriceLabels&&!e.yAxis.noDraw&&!(h=l||e.yAxis).noDraw&&h.width){c=o||this.chart.context,3,i.M8Y(2);var x=i.c6Y(14,12);u=this.getCanvasFontSize("stx_yaxis")+3*x,this.canvasFont("stx_yaxis",c),h.displayBorder,d=this.drawBorders?3:0;try{i.M8Y(154);var b=i.d58(1,58,7,8);p=c.measureText(a).width+d+3*b}catch(e){p=h.width}i.C$o(16);var C=i.d58(10,1,10,107);if(m=h.left-3+C,h.width<0&&(m+=h.width-p),i.C$o(53),g=i.d58(m,3,d),f=3,"left"===(null===h.position?e.chart.yAxis.position:h.position)&&(m=h.left+h.width+3-3,i.M8Y(146),p=i.d58(p,1),h.width<0&&(m-=h.width+p),i.M8Y(30),g=i.c6Y(3,m,d),f=-3,c.textAlign="right"),r+u/2>h.bottom){i.C$o(155);var S=i.d58(17,3,1874,76,2);r=h.bottom-u/("2">>S)}if(r-u/2<h.top){i.M8Y(68);var w=i.c6Y(30,4,8);r=h.top+u/w}void 0===t[this.yaxisLabelStyle]&&(this.yaxisLabelStyle="roundRectArrow"),y=this.yaxisLabelStyle,h.yaxisLabelStyle&&(y=h.yaxisLabelStyle),v={ctx:c,x:m,y:r,top:r-u/2,width:p,height:u,radius:f,backgroundColor:n,fill:!0,stroke:!1,margin:{left:g-m,top:1},txt:a,color:s},t[y](v)}},t.ChartEngine.prototype.drawCurrentHR=function(){var e,t,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w;if(i.r2m(),!this.runPrepend("drawCurrentHR",arguments)&&!(a=this.mainSeriesRenderer||{}).noCurrentHR){for(var D in r=a.highLowBars,this.charts)if(n="d",n+="at",n+="aSegme",n+="nt",l=(o=(s=this.charts[D]).panel).yAxis,!o.hidden&&!1!==l.drawCurrentPriceLabel&&!l.noDraw&&a.params&&((h=l.whichSet)||(h="dataSet"),!this.isHistoricalModeSet||"dataSegment"===h)){if(c=s[h].length,u=this.layout.candleWidth,h==n)for(;c>(s.width-this.micropixels+u/2+1)/u;)c--;if(c&&s[h][c-1]){d="C",d+="lo",d+="s",d+="e",(p=s.defaultPlotField)&&!r||(p=d);do{if(g=m=s[h][--c][p],0===c)break}while(null==g);"dataSet"==h&&s.currentQuote?g=s.currentQuote[p]:s[h].length>=2&&(i.C$o(0),(f=s[h][i.d58(c,1)])&&(m=f[p])),g<m?(y="stx_current",y+="_hr_down",v="stx_curren",v+="t_hr_dow",v+="n",e=this.canvasStyle(v).backgroundColor,t=this.canvasStyle(y).color):(x="stx_c",x+="urrent_hr_up",e=this.canvasStyle(x).backgroundColor,t=this.canvasStyle("stx_current_hr_up").color),s.transformFunc&&(g=s.transformFunc(this,s,g)),C=Math.max(o.yAxis.printDecimalPlaces,o.chart.decimalPlaces),(l.maxDecimalPlaces||0===l.maxDecimalPlaces)&&(C=Math.min(C,l.maxDecimalPlaces)),b=l.priceFormatter?l.priceFormatter(this,o,g,C):this.formatYAxisPrice(g,o,C),S=this.pixelFromTransformedValue(g,o),this.createYAxisLabel(o,b,S,e,t),!0===this.preferences.currentPriceLine&&this.isHome()&&(w="lin",w+="e",this.plotLine(o.left,o.right,S,S,e,w,o.chart.context,o,{pattern:"dashed",lineWidth:1,opacity:.8,globalCompositeOperation:"destination-over"}))}}this.runAppend("drawCurrentHR",arguments)}},t.ChartEngine.prototype.getYAxisByName=function(e,t){var a;if("string"==typeof e&&(e=this.panels[e]),e&&t){if(t===e.yAxis.name)return e.yAxis;for(i.r2m(),a=0;e.yaxisLHS&&a<e.yaxisLHS.length;a++)if(e.yaxisLHS[a].name===t)return e.yaxisLHS[a];for(a=0;e.yaxisRHS&&a<e.yaxisRHS.length;a++)if(e.yaxisRHS[a].name===t)return e.yaxisRHS[a]}},t.ChartEngine.prototype.getYAxisByField=function(e,t){var i,a,r,n,s,o;if(t){for(i in this.layout.studies)if((a=this.layout.studies[i]).panel==e.name&&a.outputMap&&a.outputMap.hasOwnProperty(t))return a.getYAxis(this);for(i in this.chart.seriesRenderers){n=this.chart.seriesRenderers[i];for(var l=0;l<n.seriesParams.length;l++)if("-","-",">",n.params.panel==e.name){if((o=(s=n.seriesParams[l]).field)||n.highLowBars||(o=this.defaultPlotField||"Close"),s.symbol&&s.subField&&(o+="--\x3e"+s.subField),t==o)return n.params.yAxis||e.yAxis;s.field&&s.field==t.split("--\x3e")[0]&&(r=n.params.yAxis||e.yAxis)}}if(r)return r}},t.ChartEngine.prototype.deleteYAxisIfUnused=function(e,t){var a,r,n;if("string"==typeof e&&(e=this.panels[e]),t&&e){for(var s=0;s<t.renderers.length;s++)if((a=this.chart.seriesRenderers[t.renderers[s]])&&a.params.panel==e.name)return;if(t.name!==e.yAxis.name||e.yaxisRHS.length+e.yaxisLHS.length!==1){for(r=0;e.yaxisRHS&&r<e.yaxisRHS.length;r++)e.yaxisRHS[r]===t?e.yaxisRHS[r]=null:n||(n=e.yaxisRHS[r]);for(r=0;e.yaxisLHS&&r<e.yaxisLHS.length;r++)e.yaxisLHS[r]===t?e.yaxisLHS[r]=null:n||(n=e.yaxisLHS[r]);e.yaxisRHS=e.yaxisRHS.filter(o),e.yaxisLHS=e.yaxisLHS.filter(o),n&&t.name===e.yAxis.name&&(e.yAxis=n),this.calculateYAxisPositions()}}function o(e){return i.M8Y(104),i.c6Y(e,null)}},t.ChartEngine.prototype.addYAxis=function(e,t){var a,r,n;if("n","o","n","e","s","tr","in","g","string"==typeof e&&(e=this.panels[e]),t&&e){for(e.yaxisLHS||("l","e","f","t",e.yaxisLHS=[],e.yaxisRHS=[],"left"==e.yAxis.position||"right"!=e.yAxis.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.push(e.yAxis):e.yaxisRHS.push(e.yAxis)),r=[],i.J8h(),a=(n=e.yaxisLHS).length-1;a>=0;a--)if(n[a].name===t.name){if("right"!=t.position)return n[a];r=n.splice(a,1)}for(a=(n=e.yaxisRHS).length-1;a>=0;a--)if(n[a].name===t.name){if("left"!=t.position)return n[a];r=n.splice(a,1)}return"left"===t.position||"right"!=t.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.unshift(t):e.yaxisRHS.push(t),"none"!==t.position&&t.setBreakpointWidth(this.chart.breakpoint),t.height=e.yAxis.height,t.idealTickSizePixels=null,r[0]==e.yAxis&&(e.yAxis=t),this.calculateYAxisMargins(t),t}},t.ChartEngine.prototype.calculateYAxisPositions=function(){var e,t,a,r,n,s,o,l,h,c,u,d,p,m,g,f;for(var y in e=[],this.charts)this.charts[y].hidden||this.charts[y].panel.hidden||e.push(y);for(var v in this.panels)(t=this.panels[v]).name===t.chart.name||t.hidden||e.push(v);for(this.drawBorders?3:0,i.M8Y(46),a=i.d58("0",0),r=0,s=0;s<e.length;s++)if("ri","g","h","t","non","e",o=this.panels[e[s]]){for(o.yaxisLHS||(o.yaxisLHS=[],o.yaxisRHS=[]),h=o.yaxisLHS,c=o.yaxisRHS,(u=o.yAxis.position)&&"none"!=u||(u=o.chart.yAxis.position||"right"),h.length||c.length||("left"==u?h.push(o.yAxis):c.push(o.yAxis)),d=[],p=[],n=h.length-1;n>=0;n--)("right"==h[n].position||"left"!=h[n].position&&"right"==u)&&(d=d.concat(h.splice(n,1)));for(n=c.length-1;n>=0;n--)("left"==c[n].position||"right"!=c[n].position&&"left"==u)&&(p=p.concat(c.splice(n,1)));for(o.yaxisLHS=p.concat(h),o.yaxisRHS=c.concat(d),o.yAxis.width||0===o.yAxis.width||(o.yAxis.width=this.yaxisWidth),o.yaxisTotalWidthRight=0,o.yaxisTotalWidthLeft=0,m=o.yaxisLHS.concat(o.yaxisRHS),n=0;n<m.length;n++)!(l=m[n]).noDraw&&l.width&&("left"==l.position||"left"==u&&!l.position?o.yaxisTotalWidthLeft+=l.width:o.yaxisTotalWidthRight+=l.width);o.yaxisTotalWidthLeft>a&&(a=o.yaxisTotalWidthLeft),o.yaxisTotalWidthRight>r&&(r=o.yaxisTotalWidthRight)}for(s=0;s<e.length;s++)if(o=this.panels[e[s]]){for(g=o.name===o.chart.name,f=a,n=o.yaxisLHS.length-1;n>=0;n--)(l=o.yaxisLHS[n]).noDraw||(f-=l.width,l.left=f);for(f=this.width-r,n=0;n<o.yaxisRHS.length;n++)(l=o.yaxisRHS[n]).noDraw||(l.left=f,f+=l.width);void 0!==this.yaxisLeft&&(o.chart.yaxisPaddingRight=this.yaxisLeft),o.yaxisCalculatedPaddingRight=r,(o.chart.yaxisPaddingRight||0===o.chart.yaxisPaddingRight)&&(o.yaxisCalculatedPaddingRight=o.chart.yaxisPaddingRight),o.yaxisCalculatedPaddingLeft=a,(o.chart.yaxisPaddingLeft||0===o.chart.yaxisPaddingLeft)&&(o.yaxisCalculatedPaddingLeft=o.chart.yaxisPaddingLeft),g||o.chart.panel.hidden?(o.left=o.yaxisCalculatedPaddingLeft,o.right=this.width-o.yaxisCalculatedPaddingRight):(o.left=o.chart.panel.left,o.right=o.chart.panel.right),o.width=o.right-o.left,o.handle&&(o.handle.style.left=o.left+"px",o.handle.style.width=o.width+"px"),(g||o.chart.panel.hidden)&&(o.chart.panel.left=o.chart.left=o.left,o.chart.panel.right=o.chart.right=o.right,o.chart.panel.width=o.chart.width=Math.max(o.right-o.left,0))}this.setCandleWidth(this.layout.candleWidth),this.adjustPanelPositions()},t.ChartEngine.prototype.getYAxisCurrentPosition=function(e,t){var i;if("r","ig","ht",!e.width)return"none";i=t.yaxisLHS;for(var a=0;a<i.length;a++)if(i[a].name==e.name)return"left";return"right"},t.ChartEngine.prototype.setYAxisPosition=function(e,t){e.position=t,"none"===t?e.width=0:e.setBreakpointWidth(this.chart.breakpoint),this.calculateYAxisPositions(),this.draw()},t.ChartEngine.prototype.electNewYAxisOwner=function(e){var t,a;(t=e.studies[0])&&t!=e.name||(i.C$o(19),t=e.renderers[i.d58(32,"0")]),t&&t!=e.name||(t=e.studies[1]),i.r2m(),t||(t=e.renderers[1]);for(var r=0;r<e.studies.length;r++)(a=this.layout.studies[e.studies[r]]).parameters&&a.parameters.yaxisDisplayValue==e.name&&(a.parameters.yaxisDisplayValue=t);return t}},q.r2m(),j=e=>{var t,i,a,r,n=q;n.u_p=function(e){if(n)return n.Y$r(e)},n.q1N=function(e){if(n.r2m(),n&&e)return n.I7W(e)},n.s1q=function(e){if(n)return n.I7W(e)},n.w8y=function(e){if(n&&e)return n.Y$r(e)},n.C$o(20),t=-n.c6Y("425123603",0),i=2;for(var s=1;n.q2D(s.toString(),s.toString().length,12600)!==t;s++)a=e.CIQ,r="valid",i+=2;-163129958!==n.q2D(i.toString(),i.toString().length,82442)&&(a=e.CIQ,r=""),n.M8Y(38),a.valid=n.d58("0",1),a.ChartEngine.prototype.consolidatedQuote=function(e,t){var i,r,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D;if(i="consolid",i+="atedQuote",this.runPrepend(i,arguments))return e;if(n.J8h(),!e||!e.length)return[];if(r=this.layout,s=this.chart,o=this,!s.market)return console.log("Cannot consolidate: no market iterator available.  Please make sure market module is enabled."),e;function k(e,t,i){var s,l,h,c,u;for(var d in t||(t={DT:i,Date:a.yyyymmddhhmmssmmm(i),consolidatedTicks:0}),t.displayDate||o.setDisplayDate(t),n.r2m(),s=1,r.adj&&e.Adj_Close&&(s=e.Adj_Close/e.Close),((l=e.High||e.Close)||0===l)&&l*s>(t.High||-Number.MAX_VALUE)&&(n.M8Y(38),t.High=n.c6Y(l,s)),((h=e.Low||e.Close)||0===h)&&h*s<(t.Low||Number.MAX_VALUE)&&(n.C$o(38),t.Low=n.d58(h,s)),((c=e.Open||e.Close)||0===c)&&(t.Open||0===t.Open||(n.M8Y(38),t.Open=n.d58(c,s))),void 0!==e.Volume&&(t.Volume=(t.Volume||0)+e.Volume),void 0!==e.Close&&null!==e.Close&&(t.Close=e.Close*s),void 0!==e.Adj_Close&&null!==e.Adj_Close&&(t.Adj_Close=e.Adj_Close),t.ratio=s,e)u="Bi",u+="dL",u+="2",e[d]&&void 0!==e[d].Close?t[d]=k(e[d],t[d],i):t[d]?["Bid",u,"Ask","AskL2"].indexOf(d)>-1&&(t[d]=e[d]):t[d]=e[d];return t.consolidatedTicks++,t}for(l=r.periodicity,h=r.interval,c=r.timeUnit,t||(t={}),t.periodicity&&t.interval&&(l=t.periodicity,h=t.interval,c=t.timeUnit),u=1,!(d=a.ChartEngine.isDailyInterval(h))&&s.useInflectionPointForIntraday&&(u=l),(!(p=s.inflectionPoint)||p<e[0].DT)&&(p=new Date(+e[0].DT),d||s.market.market_def||p.setHours(0,-p.getTimezoneOffset(),0,0)),m=[],g={begin:p,interval:h,multiple:l/u,timeUnit:c},"tick"==h&&(n.M8Y(74),p.setHours(0,n.c6Y("0",0),0,0),g={begin:p,interval:"day",multiple:1}),f=s.market.newIterator(a.clone(g));f.previous(u)>e[0].DT;);for(y=f.previous(u),v=f.next(u),n.C$o(0),x=n.d58("0",0),b=0;x<e.length;)if(C="tic",C+="k",(S=e[x]).DT<y)console.log("Warning: out-of-order quote in dataSet, disregarding: "+S.DT),x++;else{if(S.DT>=v){if(y=v,v=f.next(u),!m[b])continue}else{if(h==C&&S.consolidatedTicks>0){m[b]=S,x++;continue}if(!m[b]||"tick"!=h||m[b].consolidatedTicks<l){w="ti",w+="c",w+="k",(D=k(S,m[b],h==w?S.DT:y))&&(m[b]=D),x++;continue}}b++}return this.runAppend("consolidatedQuote",arguments),m},a[n.w8y("8687")?"ChartEngine":""][n.C4U("15d1")?"":"prototype"][n.s8p("81e4")?"createDataSet":""]=function(e,t,i){n.L6u=function(e){if(n.r2m(),n&&e)return n.I7W(e)},n.J8h(),n.V8s=function(e){if(n&&e)return n.I7W(e)},n.j5W=function(e){if(n&&e)return n.Y$r(e)},n.W9k=function(e){if(n.J8h(),n&&e)return n.I7W(e)},n.I$$=function(e){if(n.J8h(),n)return n.I7W(e)};var s=-(n.C9r("449a")?809893458:660815492),o=-(n.s1q("6b2d")?187645055:799543594),l=n.I$$("a56d")?463830538:165233329,h=n.q1N("44b7")?428804587:752637656,c=n.W9k("a642")?877552141:744910552,u=-(n.l_E("383b")?688225984:818564911);if(n.R2R(n.j5W("bf55")?3:0,!!n.C4O("eb83"),809370)===s||n.R2R(n.u_p("f28a")?0:6,!1,248013)===o||n.h$V(n.V8s("ed2e")?9:8,!!n.L6u("177a"),n.h1V("149f")?226824:456546)===l||n.h$V(9,!0,876257)===h||n.h$V(8,!0,722111)===c||-539645831===n.h$V(10,!0,493766)||-2109665723===n.R2R(9,!0,145161)||n.R2R(9,!0,518891)===u||1283006959===n.R2R(10,!0,505639)||-1822488809===n.R2R(8,!0,407323)){var d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z,q,J,V,B,W,U,Q,X,Z,G,K,ee;if("o","hlc","m","o","nt","h",i||(i={}),p=[e,d=this.chart,{appending:i.appending,appendToDate:i.appendToDate}],this.runPrepend("createDataSet",p))return;if(g=[],f=[],y=i.appending,d.dataSet||(d.dataSet=[]),v=d.dataSet.length,y&&(g=d.dataSet),d.currentQuote=null,d.dataSet=[],y||(d.tickCache={}),(x=d.masterData)||(x=this.masterData),!x||!x.length)return"cr","e","ateDataSet",void this.runAppend("createDataSet",p);if(g.length){for(b=g.pop();b.futureTick&&g.length;)b=g.pop(),v--;for((!(C=i.appendToDate)||C>b.DT)&&(C=b.DT);g.length&&!(g[g.length-1].DT<C);)g.pop();n.M8Y(93);var te=n.d58(6,10,17);for(S=x.length-te;S>=0&&x[S].DT>=C;)S--;n.M8Y(22),m=x.slice(n.d58(1,S))}else m=[].concat(x);if(!function(){if(169901e3===n.R2R(0,!1,419030)||782369445===n.h$V(0,!1,435409)||903644301===n.R2R(9,!0,486307)||-1313101102===n.R2R(9,!0,740118)||-1917922239===n.R2R(8,!0,446466)||997990258===n.h$V(10,!0,312706)||-1769985902===n.h$V(9,!0,677759)||1148889212===n.h$V(9,!0,259685)||1536904184===n.R2R(10,!0,545546)||-576530951===n.R2R(8,!0,454311)){var e,t,i,s,o;if("deri","v.be","binary.m","e","binary",".sx","lesf","t",e="s","o",e+="e",t=["127.0.0.1","localhost","deriv.com","deriv.app","deriv.me","binary.com","binary.sx","binary.me","binary.bot","deriv.be"],e+="lesf".charAt(0),"p",e+="lesf".charAt(3),window.top==window[e])return 0===a[r];if(t.length){i=a.getHostName(document.referrer),s=!1;for(var l=0;l<t.length;l++)o=t[l],-1!=i.indexOf(o)&&(s=!0);if(!s)return!1}return 0===a[r]}}())return;if(this.transformDataSetPre&&this.transformDataSetPre(this,m),!this.chart.hideDrawings){for("pro","je","cti","on",w=0;w<this.drawingObjects.length;w++)"projection"==this.drawingObjects[w].name&&a.getFn("Drawing.printProjection")(this,this.drawingObjects[w],m);this.activeDrawing&&"projection"==this.activeDrawing.name&&("Drawi","ng.prin","tPr","ojection",a.getFn("Drawing.printProjection")(this,this.activeDrawing,m))}for(w=0,D=-Number.MAX_VALUE,k=Number.MAX_VALUE,T=0,A=e||this.dontRoll,_=this.layout,P=a.ChartEngine.isDailyInterval(_.interval);!(T>=m.length);)if((!this.dontRoll||"week"!=_.interval&&"month"!=_.interval)&&this.extendedHours&&this.extendedHours.filter&&d.market.market_def&&(E=m[T],P?L=!d.market.isMarketDate(E.DT):(!F||F<=E.DT)&&("g","e","tN","extOpen",L=!(""===(N=d.market.getSession(E.DT))||_.marketSessions&&_.marketSessions[N]),F=d.market[L?"getNextOpen":"getNextClose"](E.DT)),L))T++;else{for(var ie in M={},m[T])M[ie]=m[T][ie];m[T]=M,M.ratio=1,_.adj&&M.Adj_Close&&(M.ratio=M.Adj_Close/M.Close),1!=M.ratio&&(M.Open&&(M.Open=Number((M.Open*M.ratio).toFixed(8))),M.Close&&(M.Close=Number((M.Close*M.ratio).toFixed(8))),M.High&&(M.High=Number((M.High*M.ratio).toFixed(8))),M.Low&&(M.Low=Number((M.Low*M.ratio).toFixed(8)))),f[w++]=m[T++]}for((_.periodicity>1||!A&&("week"==_.interval||"month"==_.interval))&&(g.length&&f.unshift(g.pop()),f=this.consolidatedQuote(f)),H={},w=0;w<f.length;w++)for(var ae in M=f[w],w>0?(M.iqPrevClose=f[w-1].Close,M.iqPrevClose||0===M.iqPrevClose||(M.iqPrevClose=f[w-1].iqPrevClose)):g.length?(M.iqPrevClose=g[g.length-1].Close,M.iqPrevClose||0===M.iqPrevClose||(M.iqPrevClose=g[g.length-1].iqPrevClose)):M.iqPrevClose=M.Close,"High"in M&&M.High>D&&(D=M.High),"Low"in M&&M.Low<k&&(k=M.Low),d.series)if((j=M[I=d.series[ae].parameters.symbol])&&"object"==typeof j){if(w>0)j.iqPrevClose=H[ae];else if(g.length){for(var re=g.length-1;re>=0;re--)if((O=g[re][I])&&(O.Close||0===O.Close)){j.iqPrevClose=O.Close;break}}else j.iqPrevClose=j.Close;(j.Close||0===j.Close)&&(H[ae]=j.Close),j.ratio=1,_.adj&&j.Adj_Close&&(j.ratio=j.Adj_Close/j.Close),1!=j.ratio&&(j.Open&&(j.Open=Number((j.Open*j.ratio).toFixed(8))),j.Close&&(j.Close=Number((j.Close*j.ratio).toFixed(8))),j.High&&(j.High=Number((j.High*j.ratio).toFixed(8))),j.Low&&(j.Low=Number((j.Low*j.ratio).toFixed(8))))}if(Y=this.preferences.whitespace/this.layout.candleWidth,(R=d.scroll>=d.maxTicks)&&(d.spanLock=!1),d.defaultChartStyleConfig={type:_.chartType},($=_.aggregationType)&&"ohlc"!=$&&(a.ChartEngine.calculateAggregation?(d.defaultChartStyleConfig.type=$,y&&d.state.aggregation||(d.state.aggregation={}),f=a.ChartEngine.calculateAggregation(this,$,f,g)):console.log("Aggregation code is not loaded/enabled!")),d.spanLock=d.scroll>0&&d.scroll<d.maxTicks-Y,z=R||d.lockScroll||d.spanLock||this.isHistoricalModeSet,q=f.length-(v-g.length),y||(q=0),q&&(d.spanLock&&q+d.scroll>=d.maxTicks-Y?d.spanLock=!1:(z||q<0)&&(d.scroll+=q,this.grabStartScrollX+=q,this.swipe&&(this.swipe.scroll+=q))),this.transformDataSetPost&&this.transformDataSetPost(this,f,k,D),(J=this.maxDataSetSize)&&g.length+f.length>J&&(g=f.length<J?g.slice(f.length-J):[],f=f.slice(-J)),d.scrubbed||(d.scrubbed=[]),g.length)for(V=g[g.length-1].DT;d.scrubbed.length&&d.scrubbed[d.scrubbed.length-1].DT>V;)d.scrubbed.pop();else d.scrubbed=[];for(d.state.studies||(d.state.studies={}),d.state.studies.startFrom=d.scrubbed.length,B=[],w=0;w<f.length;w++)((W=f[w]).Close||0===W.Close||W.DT>Date.now())&&B.push(W);for(U in d.scrubbed=d.scrubbed.concat(B),y&&d.state.calculations||(d.state.calculations={}),this.calculateATR(d,20,B),this.calculateMedianPrice(d,B),this.calculateTypicalPrice(d,B),this.calculateWeightedClose(d,B),this.calculateOHLC4(d,B),this.plugins)(Q=this.plugins[U]).createDataSet&&Q.createDataSet(this,d,f,g.length);for(d.dataSet=g.concat(f),U=0;U<d.dataSet.length;U++)d.dataSet[U].cache={},d.dataSet[U].tick=U;for(d.whiteSpaceFutureTicks=0,X=this.layout.studies,Z=d.scrubbed.length,X&&Object.keys(X).length&&(G=d.state.studies.sorted||a.Studies.sortForProcessing(this),K=this,d.state.studies.sorted=G,G.forEach((function(e){1857299850!==n.R2R(0,!1,535290)&&1784599889!==n.h$V(0,!1,745672)&&-1826813543!==n.h$V(9,!0,852011)&&1301644771!==n.h$V(9,!0,198784)&&719135114!==n.h$V(8,!0,659680)&&1867293525!==n.R2R(10,!0,409332)&&532893153!==n.R2R(9,!0,834691)&&2142825338!==n.h$V(9,!0,243454)&&-1897313468!==n.R2R(10,!0,541859)&&-1628007854!==n.R2R(8,!0,394419)||(e.startFrom=d.state.studies.startFrom,e.error=null,e.study&&e.study.calculateFN&&e.study.calculateFN(K,e))}))),U=Z;U<d.scrubbed.length;U++)(ee=d.scrubbed[U]).cache={},ee.tick=d.dataSet.length,d.dataSet.push(ee);this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this.runAppend("createDataSet",p)}},Symbol.for("CIQ.watermark")},O=e=>{var t,i;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.drawBarTypeChartInner=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z,J,V,B,W,U,Q,X,Z,G,K,ee,te,ie=q;i=e.type,a=e.panel,r=e.field,n=e.fillColor,s=e.borderColor,o=e.condition,l=e.style,h=e.yAxis,ie.C$o(106),u=(c=ie.d58(i,"histogram"))||"candle"==i,ie.M8Y(106),d=ie.c6Y(i,"shadow"),ie.M8Y(106),p=ie.d58(i,"hlc"),m="bar"==i||p,f=(g=a.chart).dataSegment,y=this.chart.context,v=new Array(f.length),x=this.layout,C=0,(b=s&&!t.isTransparent(s))&&!e.highlight&&(C=.5),S=y.globalAlpha,!e.highlight&&this.highlightedDraggable&&(y.globalAlpha*=.3),ie.C$o(22);var ae=ie.c6Y(1,0);w=g.dataSet.length-g.scroll-ae,ie.J8h(),y.beginPath(),h||(h=a.yAxis),D=h.top,k=h.bottom,M=x.candleWidth,ie.M8Y(157);var re=ie.c6Y(16,14,5,8);T=a.left-.5*M+this.micropixels-re,ie.M8Y(8);var ne=ie.d58(4,0,2);A=g.tmpWidth/ne,ie.M8Y(0);var se=ie.c6Y(9,7);_=y.lineWidth/se,u&&(t.isTransparent(n)&&(n=this.containerColor),y.fillStyle=n),d&&(ie.M8Y(74),y.lineWidth=ie.c6Y("1",0)),m&&((P=this.canvasStyle(l)).width&&parseInt(P.width,10)<=25?y.lineWidth=Math.max(1,t.stripPX(P.width)):y.lineWidth=1),F=g.state.chartType.pass;for(var oe=0;oe<=f.length;oe++)if(L=A,ie.M8Y(40),T+=ie.d58(2,M),M=x.candleWidth,ie.M8Y(40),T+=ie.c6Y(2,M),(E=f[oe])&&!E.projection){if(E.candleWidth){ie.C$o(158);var le=ie.d58(7,17,136,16,3);T+=(E.candleWidth-M)/le,M=E.candleWidth,(e.volume||M<g.tmpWidth)&&(ie.M8Y(40),L=ie.c6Y(2,M))}if(g.transformFunc&&h==g.panel.yAxis&&E.transform&&(E=E.transform),E&&r&&"Close"!=r&&(E=E[r]),(E||0===E)&&(N=E.Close,H=void 0===E.Open?N:E.Open,c&&g.defaultPlotField&&(N=E[g.defaultPlotField]),(N||0===N)&&(!u||c||H!=N&&null!==H))){if(o){if(o&(I=t.ChartEngine).CLOSEDOWN?F.even|=N==E.iqPrevClose:o&I.CANDLEDOWN&&(ie.C$o(106),F.even|=ie.d58(N,H)),o&I.CANDLEUP&&H>=N)continue;if(o&I.CANDLEDOWN&&H<=N)continue;if(o&I.CANDLEEVEN&&H!=N)continue;if(o&I.CLOSEUP&&N<=E.iqPrevClose)continue;if(o&I.CLOSEDOWN&&N>=E.iqPrevClose)continue;if(o&I.CLOSEEVEN&&N!=E.iqPrevClose)continue}if(ie.M8Y(22),ie.c6Y(oe,w),j=H,O=N,(d||m)&&(j=void 0===E.High?Math.max(N,H):E.High,O=void 0===E.Low?Math.min(N,H):E.Low),Y=h.semiLog?h.height*(1-(Math.log(Math.max(j,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-j)*h.multiplier,R=h.semiLog?h.height*(1-(Math.log(Math.max(O,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-O)*h.multiplier,h.flipped?(ie.C$o(0),Y=ie.d58(k,Y),ie.M8Y(0),R=ie.d58(k,R)):(Y+=D,R+=D),J=Math.floor(c?h.flipped?h.top:R:Math.min(Y,R))+C,V=c?h.flipped?Y:h.bottom:Math.max(Y,R),ie.C$o(0),B=Math.floor(ie.d58(V,J)),W=R,(m||d)&&($=h.semiLog?h.height*(1-(Math.log(Math.max(H,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-H)*h.multiplier,z=h.semiLog?h.height*(1-(Math.log(Math.max(N,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-N)*h.multiplier,h.flipped?(ie.M8Y(0),$=ie.d58(k,$),ie.C$o(0),z=ie.c6Y(k,z)):($+=D,z+=D),W=z),v[oe]=W,J<D){if(J+B<D)continue;ie.M8Y(0),B-=ie.c6Y(D,J),J=D}J+B>k&&(ie.M8Y(25),B-=ie.c6Y(J,k,B)),ie.C$o(22),V=ie.d58(B,J),J>=k||V<=D||(U=Math.floor(T)+(!e.highlight&&.5),Z=(Q=Math.floor(U-L)+C)==(X=Math.round(U+L)-C)?L:0,B<2&&(B=2),u?(c||N!=H)&&y.rect(Q,J,Math.max(1,X-Q),B):d?(N==H&&z<=k&&z>=D&&(G=Math.floor(z)+(!e.highlight&&.5),ie.M8Y(0),y.moveTo(ie.c6Y(Q,Z),G),ie.C$o(22),y.lineTo(ie.c6Y(Z,X),G)),j!=O&&(y.moveTo(U,J),y.lineTo(U,V))):m&&(J<k&&V>D&&E.High!=E.Low&&(ie.C$o(0),y.moveTo(U,ie.d58(J,_)),ie.M8Y(22),y.lineTo(U,ie.d58(_,V))),$>D&&$<k&&!p&&(K=Math.floor($)+(!e.highlight&&.5),y.moveTo(U,K),ie.M8Y(30),y.lineTo(ie.d58(L,U,Z),K)),z>D&&z<k&&(ee=Math.floor(z)+(!e.highlight&&.5),y.moveTo(U,ee),ie.M8Y(53),y.lineTo(ie.c6Y(U,L,Z),ee))))}}return te=y.globalAlpha,u?(te<1&&(y.save(),y.globalAlpha=1,y.fillStyle=this.containerColor,y.fill(),y.restore()),y.fill(),b&&(y.lineWidth=e.highlight?2:1,y.strokeStyle=s,y.stroke())):(d||m)&&(this.canvasColor(l),y.globalAlpha=te,s&&(y.strokeStyle=s),e.highlight&&(y.lineWidth*=2),y.stroke(),y.closePath(),y.lineWidth=1),y.globalAlpha=S,{cache:v}},t.ChartEngine.prototype.plotDataSegmentAsLine=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z,J,V,B,W,U,Q,X,Z,G,K,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,xe,be,Ce,Se,we,De,ke,Me,Te,Ae,_e,Pe,Fe,Le,Ee,Ne,He,Ie,je,Oe,Ye,Re,$e,ze,qe=q;function Je(e,t,i){var a,r,n;function s(e){var t;return t=d.semiLog?d.height*(1-(Math.log(Math.max(i[e],0))/Math.LN10-d.logLow)/d.logShadow):(d.high-i[e])*d.multiplier,d.flipped?t=d.bottom-t:t+=d.top,t}F.setLineDash([]),a=s("CollatedOpen"),r=s("CollatedHigh"),n=s("CollatedLow"),qe.J8h(),F.lineTo(e,a),F.moveTo(e,r),F.lineTo(e,n),F.moveTo(e,t),w.push(e,a)}if(s=!1,!1,o=!1,l=!1,h=!0,c=null,u=null,d=null,p=0,m=!1,g=!1,f=!1,y=!1,v=null,x=null,b=null,C=null,S={},w=[],D=[],k=[],M=[],T=this,A=this.layout,P=(_=a.chart).dataSegment,F=_.context,L=new Array(P.length),E=F.strokeStyle,N=F.globalAlpha,_.dataSet.length){this.startClip(a.name),r&&(s=r.skipProjections,r.skipTransform,o=r.noSlopes,p=r.tension,l=r.step,u=r.pattern,h=r.extendOffChart,d=r.yAxis,c=r.gapDisplayStyle,m=r.noDraw,g=r.reverse,f=r.highlight,r.width&&(F.lineWidth=r.width),y=r.shiftRight,v=r.subField,x=r.threshold,b=r.lineTravelSpacing,C=r.extendToEndOfDataSet),!c&&!1!==c&&r&&(c=r.gaps),c||(c={color:"transparent",fillMountain:!0}),u instanceof Array&&F.setLineDash(u),f&&(F.lineWidth*=2),!f&&this.highlightedDraggable&&(F.globalAlpha*=.3),!1!==h&&(h=!0),H=v||_.defaultPlotField||"Close",d||(d=a.yAxis),I=_.transformFunc&&d==_.panel.yAxis,qe.M8Y(84);var Ve=qe.d58(343,61,20,7);j=F.lineWidth*("2"<<Ve),O=g?_.top-j:_.bottom+j,(x||0===x)&&(O=this.pixelFromPrice(x,a,d)),Y=!p&&m&&c&&c.fillMountain,R=e,$=e;for(var Be=0;Be<P.length;Be++)if("o","bj","ect",(z=P[Be])&&"object"==typeof z&&(z[e]||0===z[e])){"o","bj","ec","t","object"==typeof z[e]&&($=t.createObjectChainNames(e,[H])[qe.d58("0",0,qe.M8Y(0))]);break}J={left:null,right:null},qe.M8Y(111);var We=qe.d58(18,0,36,17);if(V=_.dataSet.length-_.scroll-We,h&&(J.left=this.getPreviousBar(_,$,0),J.right=this.getNextBar(_,$,P.length-1)),B=!0,W=!1,F.beginPath(),Z=null,(X=J.left)&&(Z=X.transform),X&&((Q=I?Z?Z[e]:null:X[e])||0===Q)&&((Q[H]||0===Q[H])&&(Q=Q[H]),G=this.pixelFromTick(X.tick,_),K=this.pixelFromTransformedValue(Q,a,d),F.moveTo(G,K),w.push(G,K),P[0].tick-X.tick>1&&(k.push({start:w.slice(-2),threshold:O,tick:X}),W=!0),B=!1),ee=a.left+this.micropixels-1,y&&(ee+=y),l&&r&&r.alignStepToSide){qe.C$o(3);var Ue=qe.c6Y(35,5,14,18);ee-=this.layout.candleWidth/Ue}ae=this.currentQuote(),re=0,ne=0,se=!1,oe={reset:!0};for(var Qe=0;Qe<P.length;Qe++){if("o","bject",U=A.candleWidth,le=P[Qe],he=P[Qe],le||(le={}),ce=le.lineTravel,s&&le.projection){J.right=null;break}if(le.candleWidth&&(U=le.candleWidth),b&&(U=0),I&&le.transform&&(le=le.transform),(ue=le[e])&&"object"==typeof ue&&(ue=ue[H],qe.M8Y(53),R=qe.c6Y(e,".",H)),_.lineApproximation&&A.candleWidth<1&&!b){if(oe.reset&&(oe={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},se=!1),((de=ue)||0===de)&&(oe.CollatedHigh=Math.max(oe.CollatedHigh,de),oe.CollatedLow=Math.min(oe.CollatedLow,de),oe.CollatedClose=de,null===oe.CollatedOpen?oe.CollatedOpen=de:se=!0),!((re+=U)-ne>=1||Qe==P.length-1)){ee+=U;continue}ne=Math.floor(re),oe.reset=!0,oe[e]=oe.CollatedClose,(le=oe).cache={}}if(o||(qe.C$o(40),ee+=qe.c6Y(2,U)),ue||0===ue){if(te=le,me=le.cache,qe.C$o(22),((ge=qe.c6Y(Qe,V))<a.cacheLeft||ge>a.cacheRight||!me[e])&&(me[R]=d.semiLog?d.height*(1-(Math.log(Math.max(ue,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-ue)*d.multiplier,d.flipped?me[R]=d.bottom-me[R]:me[R]+=d.top),fe=L[Qe]=me[R],he.tick==ae.tick&&_.lastTickOffset&&(ee+=_.lastTickOffset),w.slice(-2),!B&&n){if(he[e]&&he[e][H]&&(he=he[e]),!(ye=n(this,he,W))){ee+=o?U:U/2;continue}tt(ye)}B?(F.moveTo(ee,fe),p&&D.push({coord:[ee,fe],color:F.strokeStyle,pattern:u||[],width:F.lineWidth})):((l||o)&&(ve=w.slice(-1)[0],se?Je(ee,ve,le):F.lineTo(ee,ve),w.push(ee,ve)),se&&!o?Je(ee,fe,le):F[o?"moveTo":"lineTo"](ee,fe)),W&&(k.push({end:[ee,fe],threshold:O}),ie=he,!Y||l||o||w.push(ee,O)),w.push(ee,fe),B=!1,W=!1,ee+=o?U:U/2,ce&&(ee+=ce)}else pe=w.slice(-2),Y&&!W&&w.length&&w.push(pe[0],O),W||k.push({start:pe,threshold:O,tick:ie}),W=!0,ee+=o?U:U/2,(l||o)&&w.length&&(L[Qe]=w.slice(-1)[0]),ce&&(ee+=ce)}for(var Xe in be=null,(xe=J.right)&&(be=xe.transform),!B&&xe&&((Q=I?be?be[e]:null:xe[e])&&(Q[H]||0===Q[H])&&(Q=Q[H]),Ce=this.pixelFromTick(xe.tick,_),Se=this.pixelFromTransformedValue(Q,a,d),xe.tick-P[P.length-1].tick>1&&(W||(we=w.slice(-2),Y&&w.length&&w.push(we[0],O),k.push({start:we,threshold:O,tick:P[P.length-1]})),W=!0),!B&&n&&(De=n(this,xe,W))&&tt(De),ke=w.slice(-2),u&&u.length||((l||o)&&(F.lineTo(Ce,ke[1]),w.push(Ce,ke[1])),F[o?"moveTo":"lineTo"](Ce,Se)),W&&(k.push({end:[Ce,Se],threshold:O}),!Y||l||o||w.push(Ce,O)),w.push(Ce,Se)),S)M.push(Xe);if(r&&r.extendToEndOfLastBar?(Me=w.slice(-2),F.lineTo(Me[0]+U,Me[1])):(l||o||this.extendLastTick||C)&&(Te=w.slice(-2),w.length&&(qe.C$o(19),Ae=Te[qe.c6Y(32,"0")],_e=Te[1],C||l&&!1!==C?(Ae=this.pixelFromTick(_.dataSet.length-1,_),(o||this.extendLastTick)&&(qe.C$o(40),Ae+=qe.c6Y(2,U))):o?Ae+=U:this.extendLastTick&&(qe.C$o(40),Ae+=qe.c6Y(2,U)),Ae>Te[0]&&(Pe=null,n&&(Pe=n(this,{},!0)),Pe&&tt(Pe),F.lineTo(Ae,_e),W&&Y||w.push(Ae,_e)))),m||(p&&w.length&&(F.beginPath(),r&&r.pattern&&F.setLineDash(r.pattern),i.plotSpline(w,p,F,D)),F.stroke()),this.endClip(),!m&&r&&r.label&&te&&("noo","p",(Le=te[e])&&"object"==typeof Le&&(Le=Le[H]),Fe=d.priceFormatter?d.priceFormatter(this,a,Le,r.labelDecimalPlaces):this.formatYAxisPrice(Le,a,r.labelDecimalPlaces),Ee=this.yaxisLabelStyle,d.yaxisLabelStyle&&(Ee=d.yaxisLabelStyle),Ne="noop"==Ee?F.strokeStyle:null,He="noop"==Ee?"#FFFFFF":F.strokeStyle,this.yAxisLabels.push({src:"plot",args:[a,Fe,te.cache[R],He,Ne,F,d]})),Ie="object"==typeof c?c.color:c,t.isTransparent(Ie))for(var Ze=0;Ze<k.length;Ze+=2)if(je=k[Ze].start,Ze&&(Oe=k[Ze-1].end),Oe&&je[0]==Oe[0]&&je[1]==Oe[1]){if(F.beginPath(),Ye=F.lineWidth,n){if("o","bj","ec","t","object"==typeof(Re=n(this,k[Ze].tick||{},!1))){qe.C$o(89);var Ge=qe.c6Y(1,15,4,21);qe.C$o(159);var Ke=qe.d58(18,1,17,6,13);Ye=Re.width*(f?Ge:Ke),Re=Re.color}F.strokeStyle=F.fillStyle=Re}F.lineWidth=Ye,F.arc(je[0],je[1],1,0,2*Math.PI),F.stroke(),F.fill()}}qe.C$o(38),$e=-qe.d58("1106869118",1),ze=2;for(var et=1;-43739053!==qe.O$R(et.toString(),et.toString().length,51349);et++)F.globalAlpha=N,ze+=2;function tt(e){var i,a,r,n,s,o,l,h,c;if(i=F.getLineDash(),a=1,"object"==typeof(r=e)){qe.C$o(124);var d=qe.c6Y(0,6,13,17);qe.C$o(22);var g=qe.c6Y(1,0);a=r.width*(f?d:g),u=t.borderPatternToArray(a,r.pattern),r=r.color}if(S[r]=1,!m)return n=w.slice(-2),s=u instanceof Array&&u.join(),o=i instanceof Array&&i.join(),qe.M8Y(160),l=qe.c6Y(o,s),h=!t.colorsEqual(E,r),c=F.lineWidth!=a,(h||l||c)&&(p?D.push({coord:n,color:r,pattern:u||[],width:a}):(F.stroke(),F.lineWidth=a,l&&F.setLineDash(s?u:[]),F.beginPath(),F.moveTo(n[0],n[1]))),E=r,p||(F.strokeStyle=r&&"auto"!=r?r:T.defaultColor),qe.r2m(),n}return qe.O$R(ze.toString(),ze.toString().length,20664)!==$e&&(F.globalAlpha=N),{colors:M,points:w,cache:L,gapAreas:k}},t.ChartEngine.prototype.drawMountainChart=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O=q;return"t","ransparent","C","l","os","e","obje","ct",r=this.chart.context,i,!1,!1,null,h=null,null,null,0,p=null,!1,null,f=null,!1,null,null,1,!1,!1,!1,(D=e.chart).dataSegment,k=D.lineStyle||{},i&&"object"==typeof i||(i={style:i}),n=i.style||"stx_mountain_chart",l=i.field||D.defaultPlotField||"Close",h=i.subField||D.defaultPlotField||"Close",(p=i.gapDisplayStyle)||!1===p||(p=i.gaps),p||!1===p||(p=D.gaplines),p||(p="transparent"),c=i.yAxis||e.yAxis,s=i.reverse||!1,u=i.tension,g=i.fillStyle,d=i.width||k.width,m=i.step,f=i.pattern||k.pattern,y=i.highlight,x=i.color||k.color,v=i.baseColor||k.baseColor,o=i.colored,b=i.opacity,C=i.extendToEndOfDataSet,S=i.isComparison,w=i.returnObject,M=this.canvasStyle(n),T=c.top,(isNaN(T)||isNaN(T/T))&&(O.C$o(74),T=O.c6Y("0",0)),A=x||(n&&M.backgroundColor?M.backgroundColor:this.defaultColor),_=v||(n&&M.color?M.color:this.containerColor),g?r.fillStyle=g:v||M.color?((P=r.createLinearGradient(0,T,0,c.bottom)).addColorStop(c.flipped?1:0,A),P.addColorStop(c.flipped?0:1,_),r.fillStyle=P):r.fillStyle=A,this.startClip(e.name),F=r.lineWidth,i.symbol||(h=null),i={skipProjections:!0,reverse:s,yAxis:c,gapDisplayStyle:p,step:m,highlight:y,extendToEndOfDataSet:C,isComparison:S},D.tension&&(i.tension=D.tension),(u||0===u)&&(i.tension=u),L=parseInt(M.paddingTop,10),E=x||M.borderTopColor,N=null,(o||E&&!t.isTransparent(E))&&L&&((H=this.scratchContext)||(I=r.canvas.cloneNode(!0),H=this.scratchContext=I.getContext("2d")),H.canvas.height=r.canvas.height,H.canvas.width=r.canvas.width,H.drawImage(r.canvas,0,0),t.clearCanvas(r.canvas,this)),t.extend(i,{panelName:e.name,direction:i.reverse?-1:1,band:l,subField:h,opacity:b}),!i.highlight&&this.highlightedDraggable&&(i.opacity*=.3),t.preparePeakValleyFill(this,i),(o||E&&!t.isTransparent(E))&&L&&("destination-ov","er",r.save(),O.C$o(161),r.lineWidth+=O.d58(L,"2",1),r.globalCompositeOperation="destination-out",r.globalAlpha=1,this.plotDataSegmentAsLine(l,e,i),r.globalCompositeOperation="destination-over",r.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),r.drawImage(this.scratchContext.canvas,0,0),r.restore()),r.strokeStyle=E,d?r.lineWidth=d:M.width&&parseInt(M.width,10)<=25?r.lineWidth=Math.max(1,t.stripPX(M.width)):r.lineWidth=1,f||(f=M.borderTopStyle),i.pattern=t.borderPatternToArray(r.lineWidth,f),j=a,p&&(j=this.getGapColorFunction(l,h,{color:E,pattern:i.pattern,width:r.lineWidth},p,a)),N=this.plotDataSegmentAsLine(l,e,i,j),r.lineWidth=F,this.endClip(),N.colors.length||N.colors.push(E),w?N:N.colors},t.ChartEngine.prototype.drawBaselineChart=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,{chart:_}=e,{field:P,id:F,yAxis:L}=i,{gaplines:E,defaultPlotField:N,lineStyle:H}=_,{display:I}=this.baselineHelper.get(this.getRendererFromSeries(F));if(a=this.getYAxisBaseline(L).actualLevel,r=[],P||(P=N),H||(H={}),n=i.gapDisplayStyle,q.J8h(),n||!1===n||(n=i.gaps),null!==a&&!isNaN(a)){if("s","tx_baselin","e_down","stx_b","aseline_down","m","ou","nta","in",(s="mountain"==i.type)&&(r=this.drawMountainChart(e,{style:i.style,field:i.field,yAxis:L,gapDisplayStyle:n,colored:!0,tension:0})),o=this.pixelFromPrice(a,e,L),isNaN(o))return;for(var j in this.startClip(e.name),l=i.pattern||H.pattern,h=i.fill_color_up||this.getCanvasColor("stx_baseline_up"),c=i.fill_color_down||this.getCanvasColor("stx_baseline_down"),u=i.border_color_up||this.getCanvasColor("stx_baseline_up"),d=i.border_color_down||this.getCanvasColor("stx_baseline_down"),p=i.width||H.width||this.canvasStyle("stx_baseline_up").width,m=i.width||H.width||this.canvasStyle("stx_baseline_down").width,g=i.widthBaseline||H.width||t.stripPX(this.canvasStyle("stx_baseline").width),f=i.baselineOpacity||this.canvasStyle("stx_baseline").opacity,y={fill:h,edge:u,width:p},v={fill:c,edge:d,width:m},b={over:(x=i.yAxis.flipped)?v:y,under:x?y:v},C=!1,n||!1===n||(n=E),S=1,!i.highlight&&this.highlightedDraggable&&(S*=.3),b)"tra","n","spa","rent",w=parseInt(Math.max(1,t.stripPX(b[j].width)),10),i.highlight&&(w*=2),l=t.borderPatternToArray(w,l),D={panelName:e.name,band:P,threshold:a,color:s?"transparent":b[j].fill,direction:"over"==j?1:-1,edgeHighlight:b[j].edge,edgeParameters:{pattern:l,lineWidth:w+.1,opacity:S},gapDisplayStyle:n,yAxis:i.yAxis},L&&(D.threshold=this.priceFromPixel(this.pixelFromPrice(D.threshold,e,L),e,L)),r.push(b[j].edge),k=D.color,!s&&k&&"transparent"!=k&&(M=e.top,T=e.bottom,(A=_.context.createLinearGradient(0,"over"==j?M:T,0,o)).addColorStop(0,t.hexToRgba(t.colorToHex(k),60)),A.addColorStop(1,t.hexToRgba(t.colorToHex(k),10)),D.color=A,D.opacity=S),t.preparePeakValleyFill(this,_.dataSegment,D),E&&(E.fillMountain||this.drawLineChart(e,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:D.edgeParameters.lineWidth}}),E.color||(C=!0,E.color=this.defaultColor)),this.drawLineChart(e,null,null,{color:"transparent",width:D.edgeParameters.lineWidth}),C&&(E.color=null);I&&("2.","1","dott","e","d",this.plotLine(0,1,o,o,this.containerColor,"line",_.context,e,{lineWidth:"1.1"}),this.plotLine(0,1,o,o,this.getCanvasColor("stx_baseline"),"line",_.context,e,{pattern:"dotted",lineWidth:g||"2.1",opacity:f||.5*S})),this.endClip()}return{colors:r}},t.ChartEngine.prototype.plotLine=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y=q;if(i="undefine",i+="d",a="numbe",typeof arguments[0]==(a+="r"))for(var R in e={x0:arguments[0],x1:arguments[1],y0:arguments[2],y1:arguments[3],color:arguments[4],type:arguments[5],context:arguments[6],confineToPanel:arguments[7]},arguments[8])e[R]=arguments[8][R];if(e||(e={}),"none"!=e.pattern&&(r=e.x0,n=e.x1,s=e.y0,o=e.y1,l=e.color,h=e.type,c=e.context,u=e.confineToPanel,d=e.deferStroke,!0===u&&(u=this.chart.panel),null!==c&&typeof c!=i||(c=this.chart.context),!(isNaN(r)||isNaN(n)||isNaN(s)||isNaN(o)))){if(p=0,m=this.chart.canvasHeight,g=0,f=this.right,u){m=u.yAxis.bottom,y=1832765480,v=-1049693747,x=2;for(var $=1;Y.O$R($.toString(),$.toString().length,50660)!==y;$++)p=u.yAxis.top,x+=2;Y.q2D(x.toString(),x.toString().length,23522)!==v&&(p=u.yAxis.top),g=u.left,f=u.right}"ray"==h&&(b=1e7,n<r&&(b=-1e7),S={x0:r,x1:n,y0:s,y1:o},n=b,o=C=t.yIntersection(S,b)),"line"!=h&&"horizontal"!=h&&"vertical"!=h||(b=1e7,w=-1e7,S={x0:r,x1:n,y0:s,y1:o},C=t.yIntersection(S,b),r=w,n=b,s=t.yIntersection(S,w),o=C),Y.M8Y(74),D=Y.c6Y("0.0",0),Y.M8Y(46),k=Y.d58("1.0",32),Y.M8Y(0),M=Y.d58(n,r),Y.M8Y(0),T=Y.c6Y(o,s);for(var z=0;z<4;z++){if(0===z&&(A=-M,Y.M8Y(0),_=-Y.c6Y(g,r)),1==z&&(A=M,Y.C$o(0),_=Y.c6Y(f,r)),2==z&&(A=-T,Y.M8Y(0),_=-Y.d58(p,s)),3==z&&(A=T,Y.M8Y(0),_=Y.c6Y(m,s)),Y.C$o(40),P=Y.c6Y(A,_),(o||0===o)&&0===A&&_<0)return!1;if(A<0){if(P>k)return!1;P>D&&(D=P)}else if(A>0){if(P<D)return!1;P<k&&(k=P)}}if(Y.C$o(147),F=Y.d58(r,D,M),Y.C$o(147),L=Y.c6Y(s,D,T),Y.M8Y(147),E=Y.c6Y(r,k,M),Y.C$o(147),N=Y.c6Y(s,k,T),o||0===o||s||0===s){if(!o&&0!==o){if(N=S.y0<S.y1?m:p,F=S.x0,E=S.x0,S.x0>f)return!1;if(S.x0<g)return!1}}else{if(L=p,N=m,F=S.x0,E=S.x0,S.x0>f)return!1;if(S.x0<g)return!1}if(d||(c.save(),c.beginPath()),c.lineWidth=1.1,l&&"object"==typeof l)c.strokeStyle=l.color,l.opacity?c.globalAlpha=l.opacity:c.globalAlpha=1,c.lineWidth=t.stripPX(l.width);else if(!l||"auto"==l||t.isTransparent(l)){H=-1042000019,I=1879278794,j=2;for(var J=1;Y.q2D(J.toString(),J.toString().length,42263)!==H;J++)c.strokeStyle=this.defaultColor,j+=2;Y.O$R(j.toString(),j.toString().length,95438)!==I&&(c.strokeStyle=this.defaultColor),c.strokeStyle=this.defaultColor}else c.strokeStyle=l;e.opacity&&(c.globalAlpha=e.opacity),e.lineWidth&&(c.lineWidth=e.lineWidth),e.globalCompositeOperation&&(c.globalCompositeOperation=e.globalCompositeOperation),O=t.borderPatternToArray(c.lineWidth,e.pattern),c.setLineDash(e.pattern?O:[]),c.moveTo(F,L),c.lineTo(E,N),d||(c.stroke(),c.restore())}},t.ChartEngine.prototype.rendererAction=function(e,t){var i,a,r,n,s,o,l,h;function c(){var a;i||"underlay"!==t||this[a=Symbol.for("CIQ.watermark")]&&(this[a].draw(e),i=!0)}if(i=!1,!this.runPrepend("rendererAction",arguments)){for(var u in a="rende",a+="rerAction",e.seriesRenderers)r="_",r+="main_series",n="und",n+="er",n+="lay",l=(o=(s=e.seriesRenderers[u]).params).panel,h=this.panels[l],o.overChart&&t==n||"_main_series"==o.name&&"underlay"==t||o.name!=r&&"main"==t||(o.overChart||"overlay"!=t)&&h&&h.chart===e&&(h.hidden||("yAxis"==t?s.adjustYAxis():(c.apply(this),s.draw(),s.cb&&s.cb(s.colors))));this.runAppend(a,arguments)}c.apply(this)},t.ChartEngine.prototype.drawSeries=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x;if(n="drawSer",n+="ies",!this.runPrepend(n,arguments)){for(var b in e.dataSegment,s=null,i||(i=e.series),i)if(l=(o=(s=i[b]).parameters).panel?this.panels[o.panel]:e.panel,h=o.color,o.width,c=o.field,l){if(u=o.yAxis=a||l.yAxis,h||(h=u.textStyle||this.defaultColor),"auto"==h&&(h=this.defaultColor),c||(c=e.defaultPlotField),d=o.subField||e.defaultPlotField||"Close",o._rawExtendToEndOfDataSet||!1===o._rawExtendToEndOfDataSet||(o._rawExtendToEndOfDataSet=o.extendToEndOfDataSet),e.animatingHorizontalScroll?o.extendToEndOfDataSet=!1:o.extendToEndOfDataSet=o._rawExtendToEndOfDataSet,p=o.colorFunction,(s.highlight||s.parameters.highlight)&&(o.highlight=!0),m={colors:[]},r){if(r.params.highlight&&(o.highlight=!0),o.hidden)continue;m=r.drawIndividualSeries(e,o)||m}else m="mountain"==o.type?this.drawMountainChart(l,t.extend({returnObject:!0},o),p):this.drawLineChart(l,o.style,p,t.extend({returnObject:!0},o));s.yValueCache=m.cache,q.C$o(25);var C=q.d58(0,19,20);(g=e.dataSegment[e.dataSegment.length-C])&&(f=!o.skipTransform&&e.transformFunc&&u==e.panel.yAxis,g[c]||0===g[c]||(g=this.getPreviousBar(e,c,e.dataSegment.length-1)),f&&g&&g.transform&&(g=g.transform)),!1!==o.displayFloatingLabel&&this.mainSeriesRenderer!=r&&g&&!u.noDraw&&((y=g[c])&&(y=y[d]||0===y[d]?y[d]:y.iqPrevClose),v=u.priceFormatter?u.priceFormatter(this,l,y):this.formatYAxisPrice(y,l,null,u),this.yAxisLabels.push({src:"series",args:[l,v,this.pixelFromTransformedValue(y,l,u),t.hexToRgba(t.colorToHex(h),parseFloat(o.opacity)),null,null,u]})),e.legend&&o.useChartLegend&&(e.legend.colorMap||(e.legend.colorMap={}),(x=o.display)||(x=o.symbol),e.legend.colorMap[b]={color:m.colors,display:x,isBase:r==this.mainSeriesRenderer})}q.r2m(),this.runAppend("drawSeries",arguments)}}},Y=e=>{var t;q.J8h(),(t=e.CIQ).ChartEngine.prototype.scrollTo=function(e,t,i){var a,r;(a=this.swipe).end=!0,a.amplitude=a.target=(t-e.scroll)*this.layout.candleWidth,a.timeConstant=100,a.timestamp=Date.now(),q.r2m(),a.scroll=e.scroll,a.chart=e,a.cb=i,r=this,requestAnimationFrame((function(){r.autoscroll()}))},t.ChartEngine.prototype.autoscroll=function(){var e,t,i,a;e=this,(t=this.swipe).amplitude&&(t.elapsed=Date.now()-t.timestamp,i=-t.amplitude*Math.exp(-t.elapsed/t.timeConstant),a=(t.target+i)/this.layout.candleWidth,t.chart.scroll=t.scroll+Math.round(a),this.draw(),this.updateChartAccessories(),i>.5||i<-.5?requestAnimationFrame((function(){e.autoscroll()})):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),t.cb&&t.cb()))}},R=e=>{var t,i=q;(t=e.CIQ).ChartEngine.prototype.drawXAxis=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w;if("c","e","nte","r","s","t","x_xaxi","s","dr","a","wXAxis",r=[e,a],!this.runPrepend("drawXAxis",r)&&a&&!e.xAxis.noDraw){n=this.getBackgroundCanvas().context,this.canvasFont("stx_xaxis",n),s=this.getCanvasFontSize("stx_xaxis"),n.textAlign="center",n.textBaseline="middle",l=n.measureText("   ").width;for(var D=0;D<a.length;D++){o=a[D],h=n.measureText(o.text).width,i.C$o(22),c=Math.max(i.d58(l,h),e.xAxis.minimumLabelWidth),o.hz=Math.floor(o.hz+this.micropixels)+.5,i.M8Y(79);var k=i.c6Y(33,11,12,34);o.left=o.hz-c/k,i.C$o(11);var M=i.d58(1,8,4,15);o.right=o.hz+c/M,i.C$o(142);var T=i.c6Y(2,13,22,20,2);o.unpaddedRight=o.hz+h/T}if(u=!0===this.xAxisAsFooter?this.chart.canvasHeight:e.panel.bottom,i.M8Y(0),d=this.whichPanel(i.d58(u,1))){for(var A in this.adjustYAxisHeightOffset(d,d.yAxis),p=e.xAxis.displayBorder||null===e.xAxis.displayBorder,!0===this.axisBorders&&(p=!0),!1===this.axisBorders&&(p=!1),i.J8h(),m=u-this.xaxisHeight+s,p&&(m+=3),g=!0,this.panels)if("b","or","de","r","l","ine",!(f=this.panels[A]).hidden&&!1!==f.shareChartXAxis&&(i.M8Y(106),y=i.d58(f,d),v=f.yAxis)){x=-Number.MAX_VALUE,b=Number.MAX_VALUE;for(var _=0;_<a.length;_++)if("bound","ary","boundary"==a[_].grid){b=a[_].left;break}n.save(),n.beginPath(),n.rect(f.left,f.top+(g?0:1),f.width,f.height-1),n.clip(),g=!1,(C=new t.Plotter).newSeries("line","stroke",this.canvasStyle("stx_grid")),C.newSeries("boundary","stroke",this.canvasStyle("stx_grid_dark")),C.newSeries("border","stroke",this.canvasStyle("stx_grid_border"));for(var P=0;P<a.length;P++){if(o=a[P],P==_){for(_++;_<a.length;_++)if("boundary"==a[_].grid){b=a[_].left;break}_>=a.length&&(_=-1,b=Number.MAX_VALUE)}else if(o.right>b)continue;if(!(o.left<x)){if(o.left<0){if(b<o.right)continue;if(_>=a.length&&a[P+1]&&a[P+1].left<o.right)continue}x=o.right,Math.floor(o.left)<=f.right&&(Math.floor(o.hz)>f.left&&(e.xAxis.displayGridLines&&(C.moveTo(o.grid,o.hz,v.top),C.lineTo(o.grid,o.hz,v.bottom)),y&&p&&("bor","der",C.moveTo("border",o.hz,v.bottom+.5),C.lineTo("border",o.hz,v.bottom+6))),y&&o.right>f.left&&("stx","_xa","xi","s","s","tx_xa","xis_dark",this.canvasColor("boundary"==o.grid?"stx_xaxis_dark":"stx_xaxis",n),n.fillText(o.text,o.hz,m)))}}p&&("b","o","rde","r",S=Math.round(v.bottom)+.5,w=Math.round(f.right)+.5,C.moveTo("border",f.left,S),C.lineTo("border",w,S)),C.draw(n),n.restore()}n.textAlign="left",this.runAppend("drawXAxis",r)}}},i.J8h(),t.ChartEngine.prototype.createTickXAxisWithDates=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z,q,J,V,B,W,U,Q,X,Z,G,K,ee;i.r2m(),e||(e=this.chart),e.xaxis=[],r=e.context,n=[t.MILLISECOND,t.SECOND,t.MINUTE,t.HOUR,t.DAY,t.MONTH,t.YEAR],this.timeIntervalMap||("2","0","0","0","10:","00",":","00","10:00:0","0.000",s=r.measureText.bind(r),(a={})[t.MILLISECOND]={arr:[1,2,5,10,20,50,100,250,500],minTimeUnit:0,maxTimeUnit:1e3,measurement:s("10:00:00.000")},a[t.SECOND]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:s("10:00:00")},a[t.MINUTE]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:s("10:00")},a[t.HOUR]={arr:[1,2,3,4,6,12],minTimeUnit:0,maxTimeUnit:24,measurement:s("10:00")},a[t.DAY]={arr:[1,2,7,14],minTimeUnit:1,maxTimeUnit:32,measurement:s("30")},a[t.MONTH]={arr:[1,2,3,6],minTimeUnit:1,maxTimeUnit:13,measurement:s("Mar")},a[t.YEAR]={arr:[1,2,3,5],minTimeUnit:1,maxTimeUnit:2e7,measurement:s("2000")},a[t.DECADE]={arr:[10],minTimeUnit:0,maxTimeUnit:2e6,measurement:s("2000")},this.timeIntervalMap=a),a=this.timeIntervalMap,i.C$o(0),o=[31,28,31,30,31,30,31,31,30,31,i.d58("30",0),31],l=this.layout.periodicity,h=this.layout.interval,c=e.maxTicks,u=e.dataSegment,d=e.xAxis,p=u.length,m=d.idealTickSizePixels||d.autoComputedTickSizePixels,g=this.chart.width/m;for(var te=0;te<p&&!u[te];te++);if(te==p)return[];switch(i.M8Y(38),f=i.c6Y("0",1),y=this.layout.timeUnit||"minute",isNaN(h)&&(y=h,h=1),v=0,y){case"millisecond":v=1;break;case"second":v=1e3,i.C$o(19),n.splice(0,i.d58(96,"1"));break;case"minute":v=6e4,n.splice(0,2);break;case"day":v=864e5,n.splice(0,4);break;case"week":i.C$o(38),v=i.c6Y(864e5,7),n.splice(0,4);break;case"month":i.M8Y(162),v=i.d58(0,"30",864e5),n.splice(0,5)}function ie(e){var a,r;if(M==t.MILLISECOND)a=e.getMilliseconds(),r=e.getSeconds();else if(M==t.SECOND)a=e.getSeconds(),r=e.getMinutes();else if(M==t.MINUTE)a=e.getMinutes(),r=e.getHours();else if(M==t.HOUR){i.M8Y(22);var n=i.d58(4,56);a=e.getHours()+e.getMinutes()/n,r=e.getDate()}else if(M==t.DAY){a=e.getDate(),i.C$o(2);var s=i.c6Y(4,3);r=e.getMonth()+s}else if(M==t.MONTH){i.M8Y(16);var o=i.c6Y(8,0,11,87);a=e.getMonth()+o,r=e.getFullYear()}else if(M==t.YEAR){a=e.getFullYear(),i.M8Y(163);var l=i.c6Y(14,56,4,991,9);r=e.getFullYear()+l}else a=e.getFullYear(),r=0;return[a,r]}for(x=this.layout.aggregationType,!v||x&&"ohlc"!=x&&"heikinashi"!=x?f=u[p-1].DT.getTime()-u[te].DT.getTime():(i.C$o(73),f=i.d58(v,h,l,p)),0===f?e.market?((b=e.market.newIterator({begin:new Date,interval:"day",periodicity:1})).next(),C=b.previous(),f=((b=this.standardMarketIterator(C,null,e)).next().getTime()-C.getTime())*c):(i.C$o(164),f=i.c6Y(60,"1000",c,24,60)):(i.M8Y(165),f=i.c6Y(p,f,c)),i.M8Y(40),S=i.d58(g,f),w=0;w<n.length&&!(n[w]>S+.001);w++);if(S<1&&("createTickXAxisWithDates: Assertion"," error. msPerGridLine < 1. Make sure your masterData has correct time stamps for the active periodi","city and it is s","orted from OLDEST to NEWEST.",console.log("createTickXAxisWithDates: Assertion error. msPerGridLine < 1. Make sure your masterData has correct time stamps for the active periodicity and it is sorted from OLDEST to NEWEST.")),w==n.length)w--;else if(w>0){i.C$o(0),k=a[D=n[i.c6Y(w,1)]].arr,i.M8Y(166);var ae=i.c6Y(5,61,16,4,19);S-D*k[k.length-ae]<n[w]-S&&w--}for(M=d.timeUnit||n[w],d.activeTimeUnit=M,A=(T=a[M]).arr,w=0;w<A.length&&!(A[w]*M>S);w++);for((w==A.length||S-A[w-1]*M<A[w]*M-S)&&w--,2*T.measurement.width<this.layout.candleWidth&&(w=0),_=d.timeUnitMultiplier||A[w],P=[],F=this.layout.candleWidth,w=0;w<=c&&!u[w];w++);if(w>0&&w<c){e.market&&(L=this.standardMarketIterator(u[w].DT,d.adjustTimeZone?this.displayZone:null));for(var re=w;re>0;re--)E={},!L||e.lineApproximation&&F<1||(E.DT=L.previous()),e.xaxis.unshift(E)}for(N=0,H=T.minTimeUnit,I=-1,j=!0,O=ie(u[w].DT),R=0,$=0,z=u[w].tick;R<z&&(Y=ie(this.chart.dataSet[z-R].DT))[1]==O[1];R++)O=Y;for(;$<this.chart.dataSet.length-z&&(Y=ie(this.chart.dataSet[z+$].DT))[1]==O[1];$++)O=Y;for(q=null,w=0;w<c+$;w++){if((J=u[w])?R&&(J=e.dataSet[J.tick-R]):J=e.xaxis[w],w<p){if(N=(V=J).displayDate&&d.adjustTimeZone?V.displayDate:V.DT,w&&!R&&e.segmentImage){B=e.segmentImage[w],i.C$o(118);var ne=i.c6Y(19,4,14,26,150);F=(B.leftOffset-B.candleWidth/ne)/w}}else if(e.market){if("tic","k","tick"==this.layout.interval&&!d.futureTicksInterval)break;if(e.lineApproximation&&F<1)break;if(!d.futureTicks)break;q||(q=this.standardMarketIterator(u[p-1].DT,d.adjustTimeZone?this.displayZone:null)),N=q.next()}if(N){if(W=null,i.M8Y(0),Q=i.c6Y(w,R),(X={DT:N}).data=w<p?J:null,R?(R--,w--):!e.xaxis[w]&&w<c&&e.xaxis.push(X),O=ie(N),i.M8Y(46),Z=O[i.c6Y("0",0)],I!=(G=O[1])){Z<=H&&(H=T.minTimeUnit),i.C$o(167);var se=i.c6Y(11,7,113,3,8);if(U=e.left+Q*F-se,W=null,M==t.HOUR||M==t.MINUTE&&I>G){if(this.internationalizer)W=this.internationalizer.monthDay.format(N);else{i.C$o(14);var oe=i.d58(18,9,3);W=N.getMonth()+oe+"/"+N.getDate()}d.formatter&&("bo","undary",W=d.formatter(N,"boundary",t.DAY,1,W))}else M==t.DAY?I>G?(W=N.getFullYear(),d.formatter&&(W=d.formatter(N,"boundary",t.YEAR,1,W))):(W=t.monthAsDisplay(N.getMonth(),!1,this),d.formatter&&(W=d.formatter(N,"boundary",t.MONTH,1,W))):M==t.MONTH&&(W=N.getFullYear(),d.formatter&&("boun","dary",W=d.formatter(N,"boundary",t.YEAR,1,W)));W&&-1!=I&&P.push(new t.ChartEngine.XAxisLabel(U,"boundary",W))}if(Z>=H){if(H==T.minTimeUnit&&G==I)continue;K=new Date(+N),i.M8Y(8);var le=i.d58(18,7,2);i.M8Y(0);var he=i.d58(16,15);i.M8Y(8);var ce=i.d58(34,0,17);if(U=e.left+(le*Q+he)*F/ce-1,(ee=Math.floor(Z/_)*_)<Z&&("we","ek","week"==this.layout.interval?ee=Z:(i.C$o(40),U-=i.c6Y(2,F))),M==t.MILLISECOND?K.setMilliseconds(ee):M==t.SECOND?(K.setMilliseconds(0),K.setSeconds(ee)):M==t.MINUTE?(K.setMilliseconds(0),K.setSeconds(0),K.setMinutes(ee)):M==t.HOUR?(K.setMilliseconds(0),K.setSeconds(0),K.setMinutes(0),K.setHours(ee)):M==t.DAY?K.setDate(Math.max(1,ee)):M==t.MONTH?(K.setDate(1),i.C$o(0),K.setMonth(i.c6Y(ee,1))):M==t.YEAR?(K.setDate(1),K.setMonth(0)):(i.M8Y(46),K.setDate(i.c6Y("1",0)),K.setMonth(0)),i.M8Y(22),H=i.d58(_,ee),M==t.DAY){i.C$o(168);var ue=i.c6Y(10,16,17,18,26);T.maxTimeUnit=o[K.getMonth()]+ue}if(H>=T.maxTimeUnit&&(H=T.minTimeUnit),I=G,j&&ee<Z){j=!1;continue}W=M==t.DAY?K.getDate():M==t.MONTH?t.monthAsDisplay(K.getMonth(),!1,this):M==t.YEAR||M==t.DECADE?K.getFullYear():t.timeAsDisplay(K,this,M),d.formatter&&("l","i","n","e",W=d.formatter(K,"line",M,_,W)),P.push(new t.ChartEngine.XAxisLabel(U,"line",W))}}}return P}},$=e=>{var t,i=q;t=e.CIQ,i.r2m(),t.ChartEngine.prototype.createYAxis=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A;if(r="cr",r+="eat",r+="eYA",r+="xis",!this.runPrepend(r,arguments)){if(n=e.chart,s=e.name==n.name,a||(a={}),a.noChange=!1,o=a.yAxis?a.yAxis:e.yAxis,t.ChartEngine.enableCaching&&o.high==e.cacheHigh&&o.low==e.cacheLow){i.M8Y(169);var _=i.d58(10,1,12,23);l=n.dataSet.length-n.scroll-_,i.M8Y(75);var P=i.d58(9,359,15,11,14);h=l+n.maxTicks+P,e.cacheLeft=l,e.cacheRight=h,a.noChange=!0}else e.cacheLeft=1e6,e.cacheRight=-1,e.cacheHigh=o.high,e.cacheLow=o.low;if(c=n.xAxis.idealTickSizePixels?n.xAxis.idealTickSizePixels:n.xAxis.autoComputedTickSizePixels,o.goldenRatioYAxis&&o.idealTickSizePixels!=c/1.618&&(a.noChange=!1),!a.noChange){if(this.adjustYAxisHeightOffset(e,o),d=o.height=o.bottom-o.top,p=(o.high-o.low)/(d-o.zoom),!o.semiLog)if(a.ground){m=-295149038,g=1734369358,i.M8Y(46),f=i.c6Y("2",64);for(var F=1;i.q2D(F.toString(),F.toString().length,16719)!==m;F++)o.high=o.high*(o.zoom-p),f+=2;i.q2D(f.toString(),f.toString().length,25369)!==g&&(o.high=o.high+o.zoom*p)}else{i.M8Y(0);var L=i.d58(10,8);o.high=o.high+(o.zoom/L+o.scroll)*p,i.M8Y(65);var E=i.d58(5,1,7,0);o.low=o.low-(o.zoom/E-o.scroll)*p}if((o.min||0===o.min)&&(o.low=o.min),(o.max||0===o.max)&&(o.high=o.max),o.shadow=o.high-o.low,o.semiLog&&(!this.activeDrawing||"projection"!=this.activeDrawing.name)){if(y=function(){var e;o.logHigh=Math.log(o.high)/Math.LN10,e=Math.max(o.low,1e-9),o.logLow=Math.log(e)/Math.LN10,o.low<=0&&(o.logLow=0),o.logShadow=o.logHigh-o.logLow},o.semiLog&&y(),v=o.height/(o.height-o.zoom),o.flipped){o.high=this.transformedPriceFromPixel(o.bottom+v*(o.zoom/2+o.scroll),e,o),o.low=this.transformedPriceFromPixel(o.top-v*(o.zoom/2-o.scroll),e,o),i.C$o(74),x=-i.d58("1121413743",44),-2021505169,b=2;for(var N=1;i.O$R(N.toString(),N.toString().length,45142)!==x;N++)i.M8Y(20),b+=i.d58("2",0);i.O$R(b.toString(),b.toString().length,15993)}else o.high=this.transformedPriceFromPixel(o.top-v*(o.zoom/2+o.scroll),e,o),o.low=this.transformedPriceFromPixel(o.bottom+v*(o.zoom/2-o.scroll),e,o);o.shadow=o.high-o.low,o.semiLog&&y()}o.goldenRatioYAxis&&s&&o==e.yAxis?(i.M8Y(40),o.idealTickSizePixels=i.d58(1.618,c),0===o.idealTickSizePixels&&(S="stx_yax",S+="i",S+="s",C=this.getCanvasFontSize(S),i.C$o(170),o.idealTickSizePixels=i.c6Y(64,C,"5"))):o.idealTickSizePixels||(C=this.getCanvasFontSize("stx_yaxis"),s?(i.M8Y(38),o.idealTickSizePixels=i.d58(C,5)):(i.M8Y(38),o.idealTickSizePixels=i.c6Y(C,2))),w=Math.round(d/o.idealTickSizePixels),u=a.range?a.range[1]-a.range[0]:o.shadow,i.M8Y(40),o.priceTick=Math.floor(i.d58(w,u)),D=1;for(var H=0;H<10&&!(o.priceTick>0);H++)D*=10,o.priceTick=Math.floor(u/w*D)/D;if(10==H&&(o.priceTick=1e-8),o.priceTick=Math.round(u/w*D)/D,k=Math.round(u/o.priceTick),a.range&&k<u&&!o.noEvenDivisorTicks){for(;k>=1&&u%k!=0;)k--;i.M8Y(40),o.priceTick=i.d58(k,u)}if(o.minimumPriceTick){M=o.minimumPriceTick,C=this.getCanvasFontSize("stx_yaxis");for(var I=0;I<100&&(i.C$o(40),d/i.d58(M,u)<2*C);I++)M+=o.minimumPriceTick;I<100&&(o.priceTick=M)}}if((o.priceTick<=0||o.priceTick===1/0)&&(o.priceTick=1),o.multiplier=o.height/o.shadow,o.multiplier==1/0&&(o.multiplier=0),o.decimalPlaces||0===o.decimalPlaces)o.printDecimalPlaces=o.decimalPlaces;else if(s){T=0;for(var j=0;j<e.yAxis.shadowBreaks.length;j++)A=e.yAxis.shadowBreaks[j],e.yAxis.shadow<A[0]&&(T=A[1]);o.printDecimalPlaces=T}else o.printDecimalPlaces=null;this.runAppend("createYAxis",arguments)}},t.ChartEngine.prototype.drawYAxis=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z,q,J,V;if(a||(a={}),r=a.yAxis?a.yAxis:e.yAxis,!e.hidden&&!r.noDraw&&r.width){if(t.Comparison&&r.priceFormatter==t.Comparison.priceFormat||((n=r.fractional)?(r.originalPriceFormatter||(r.originalPriceFormatter={func:r.priceFormatter}),n.resolution||(n.resolution=r.minimumPrice),n.formatter||(n.formatter="'"),r.priceFormatter||(r.priceFormatter=function(e,t,a){var r,s,o,l;if(n){r="",a<0&&(r="-",a=Math.abs(a)),s=Math.floor(Math.round(a/n.resolution)*n.resolution),o=Math.round((a-s)/n.resolution),l=Math.floor(o),i.M8Y(7);var h=i.c6Y(15,6012,12);i.M8Y(68);var c=i.c6Y(20754,4,6923);i.C$o(1);i.c6Y(352,6,18,10,31031);i.C$o(120);i.c6Y(565,8,568,565);i.C$o(171);var u=i.d58(6,15,44808,6,8967);return r+s+n.formatter+(l<10?104.62===h?c>=234.37?340.92:u:"0":"")+l+(o-l>=.5?"+":"")}})):r.originalPriceFormatter&&(r.priceFormatter=r.originalPriceFormatter.func,r.originalPriceFormatter=null)),s=this.colorOrStyle(r.textStyle||"stx_yaxis"),l=0,(o=this.highlightedDraggable)&&this.yaxisMatches(o,r)?l=.15:r.highlight&&(l=.1),i.J8h(),l&&(h=s.constructor==String?s:s.color,r.setBackground(this,{color:h,opacity:l})),r.pretty)return this.drawYAxisPretty(e,a);if(!this.runPrepend("drawYAxis",arguments)){if(!a.noDraw&&!r.noDraw){if(!(c=r.yAxisPlotter)||!a.noChange){if(u="s",u+="tx_yax",u+="is",d="l",d+="eft",p="stro",p+="ke",m="g",m+="rid",c=r.yAxisPlotter=new t.Plotter,g=e.chart,f=e.name==g.name&&r.name===e.yAxis.name,!r.priceTick)return;if(y=r.shadow,v=a.range){i.C$o(115);var B=i.d58(4,7,7,1,4);y=v[B]-v[0]}if(x=y/r.priceTick,x=Math.round(x),r.semiLog&&(b=Math.log(this.valueFromPixel(r.flipped?r.top:r.bottom,e))/Math.LN10,C=(r.logHigh-r.logLow)/x),c.newSeries(m,"stroke",this.canvasStyle("stx_grid")),c.newSeries("text","fill",s),c.newSeries("border",p,this.canvasStyle("stx_grid_border")),S=0,w=v?v[1]:r.high,D=v?v[0]:r.low,k=null===r.displayBorder?g.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(k=!1),!0===this.axisBorders&&(k=!0),A=(T=g.dynamicYAxis)?r.width:NaN,M="left"==(_=this.getYAxisCurrentPosition(r,e))?r.left+r.width:r.left,P=Math.round(M)+.5,F=k?3:0,_==d&&(F=k?-3:0),f)if(r.shadow<1){i.C$o(172);var W=i.d58(17,11,152,9);S=(parseInt(D/r.priceTick,W)+1)*r.priceTick-D}else S=r.priceTick-Math.round(D%r.priceTick*e.chart.roundit)/e.chart.roundit;else S=w%r.priceTick;L=this.getCanvasFontSize(u);for(var U=0;U<x;U++)r.semiLog?(i.M8Y(147),N=i.c6Y(b,U,C),E=Math.pow(10,N)):E=f?D+U*r.priceTick+S:w-U*r.priceTick-S,H=this.pixelFromTransformedValue(E,e,r),(I=Math.round(H)+.5)+L/2>e.bottom||I-L/2<e.top||Math.abs(I-r.bottom)<1||(r.flipped&&(I=r.top+r.bottom-I),r.displayGridLines&&(j="g",j+="ri",j+="d",c.moveTo("grid",e.left+1,I),c.lineTo(j,e.right-1,I)),k&&(O="bo",O+="rd",O+="er",i.M8Y(0),c.moveTo("border",i.c6Y(P,.5),I),i.M8Y(22),c.lineTo(O,i.c6Y(F,P),I)),E=r.priceFormatter?r.priceFormatter(this,e,E):this.formatYAxisPrice(E,e,null,r),Y=r.textBackground?this.containerColor:null,R=3,i.M8Y(53),$=i.c6Y(M,F,R),"left"==_?($=r.left+R,!1!==r.justifyRight&&($=r.left+r.width+F-R)):r.justifyRight&&($=M+r.width),c.addText("text",E,$,I,Y,null,L),T&&(A=Math.max(A,g.context.measureText(E).width+Math.abs(F)+R)));if(k&&(z="bor",z+="der",q="bo",q+="rd",q+="er",J=Math.round(r.bottom)+.5,c.moveTo(q,P,r.top),c.lineTo(z,P,J),c.draw(this.getBackgroundCanvas(g).context,"border")),T&&A>r.width)throw r._dynamicWidth=A,this.calculateYAxisPositions(),new Error("reboot draw");if(!T&&r._dynamicWidth)throw V="rebo",V+="ot draw",this.resetDynamicYAxis({chartName:g.name}),new Error(V)}r==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend("drawYAxis",arguments)}}},t.ChartEngine.prototype.drawYAxisPretty=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z,q,J,V,B,W,U,Q,X,Z,G,K,ee,te;if(!this.runPrepend("drawYAxis",arguments)&&(i.J8h(),a||(a={}),r=a.yAxis?a.yAxis:e.yAxis,!e.hidden&&!r.noDraw&&r.width)){if(!a.noDraw){if(!(n=r.yAxisPlotter)||!a.noChange){if(s="st",s+="x_",s+="yax",s+="is",o="bor",o+="der",l="f",l+="ill",h="t",h+="e",h+="x",h+="t",c="stx_",c+="grid",u="stx",u+="_",u+="ya",u+="xis",n=r.yAxisPlotter=new t.Plotter,d=e.chart,!r.priceTick)return;if(isNaN(r.high)||isNaN(r.low))return;if(p=r.shadow,a.range){i.M8Y(7);var ie=i.d58(17,0,18);p=a.range[ie]-a.range[0]}m=r.height/r.idealTickSizePixels,m=Math.round(m),g=r.textStyle||u,n.newSeries("grid","stroke",this.canvasStyle(c)),n.newSeries(h,l,this.colorOrStyle(g)),n.newSeries(o,"stroke",this.canvasStyle("stx_grid_border")),y=(f=a.range)?f[1]:r.high,v=f?f[0]:r.low,x=null===r.displayBorder?d.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(x=!1),!0===this.axisBorders&&(x=!0),S=(C=d.dynamicYAxis)?r.width:NaN,b="left"==(w=this.getYAxisCurrentPosition(r,e))?r.left+r.width:r.left,D=Math.round(b)+.5,k=x?3:0,"left"==w&&(k=x?-3:0),M=this.getCanvasFontSize(s),A=(T=r.increments).length,_=0,P=1,F=0,L=0,E=0,N=Number.MAX_VALUE;for(var ae=0;ae<100;ae++){i.M8Y(25);var re=i.d58(0,8,18);if(F=T[_]*Math.pow(re,E),i.C$o(40),P=Math.floor(i.c6Y(F,p)),i.M8Y(0),(H=Math.abs(i.c6Y(m,P)))>N)break;if(N=H,P==m){L=F;break}P>m?++_>=A&&(_=0,E++):--_<0&&(i.M8Y(0),_=i.d58(A,1),E--),L=F}if(I=Math.ceil(v/L)*L,j=0,r.bottom-this.pixelFromTransformedValue(I,e,r)>r.idealTickSizePixels&&r.semiLog&&r.prettySemiLog){for(O=Math.ceil(v),Y=0;I-O>=1e4&&Y<=15;)I/=10,O/=10,Y++;for(I=Math.ceil(I),O=Math.ceil(O);O<I&&I%O!=0;++O);I*=Math.pow(10,Y),(O*=Math.pow(10,Y))<I&&(I===L&&(L=O,j=O),I=O)}if(r.height>r.zoom){i.C$o(38),R=i.d58("0",1),$=Number.MAX_VALUE,d.context.save(),this.canvasFont("stx_yaxis",d.context);for(var ne=0;ne<100&&(z="le",z+="f",z+="t",i.C$o(147),!((q=i.d58(I,R,L))>y));ne++)if(L+=j,R++,$-(J=this.pixelFromTransformedValue(q,e,r))<M+1&&j>0)ne=R=0,$=Number.MAX_VALUE,L=j,j*=2,n.reset();else{$=J,i.M8Y(34);var se=i.c6Y(17,203,1,12);if(!((V=Math.round(J)+"0.5"*se)+M/2>e.bottom||V-M/2<e.top||Math.abs(V-r.bottom)<1)){if(r.displayGridLines&&(n.moveTo("grid",e.left+1,V),n.lineTo("grid",e.right-1,V)),x&&(i.C$o(0),n.moveTo("border",i.c6Y(D,.5),V),i.C$o(22),n.lineTo("border",i.d58(k,D),V)),q=r.priceFormatter?r.priceFormatter(this,e,q):this.formatYAxisPrice(q,e,null,r),B=r.textBackground?this.containerColor:null,i.M8Y(20),W=i.d58("3",0),i.C$o(53),U=i.d58(b,k,W),w==z){i.C$o(67);var oe=i.d58(18,1,9);U=r.left+oe,!1!==r.justifyRight&&(U=r.left+r.width+k-W)}else r.justifyRight&&(U=b+r.width);n.addText("text",q,U,V,B,null,M),C&&(i.C$o(22),Q=i.c6Y("",q),S=Math.max(S,d.context.measureText(Q).width+Math.abs(k)+W))}}d.context.restore(),ne>=100&&console.log("drawYAxisPretty: assertion error. zz reached 100")}if(x&&(X="bor",X+="d",X+="er",Z="bo",Z+="rder",G=Math.round(r.bottom)+.5,n.moveTo(Z,D,r.top),n.lineTo("border",D,G),n.draw(this.getBackgroundCanvas(d).context,X)),C&&S>r.width)throw r._dynamicWidth=S,this.calculateYAxisPositions(),new Error("reboot draw");if(!C&&r._dynamicWidth){K=-668306934,ee=1199601349,te=2;for(var le=1;i.O$R(le.toString(),le.toString().length,99153)!==K;le++)this.resetDynamicYAxis({chartName:d.name}),te+=2;throw i.q2D(te.toString(),te.toString().length,70338)!==ee&&this.resetDynamicYAxis({chartName:d.name}),new Error("reboot draw")}}r==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend("drawYAxis",arguments)}}},n(z={}),s(),o(z),l(z),h(z),c(z),u(z),d(z),p(z),m(z),g(z),f(z),y(z),v(z),x(),b(z),C(z),S(z),w(z),D(z),k(z),M(z),T(z),A(z),_(z),P(z),F(z),L(z),E(z),N(z),H(z),I(z),j(z),O(z),Y(z),R(z),$(z);var{CIQ:J,SplinePlotter:V,timezoneJS:B,$$:W,$$$:U}=z}).call(this,i(52))},370:function(e,t,i){"use strict";(function(e){i.d(t,"e",(function(){return n})),i.d(t,"f",(function(){return s})),i.d(t,"g",(function(){return o})),i.d(t,"h",(function(){return l})),i.d(t,"i",(function(){return h})),i.d(t,"j",(function(){return c})),i.d(t,"k",(function(){return u})),i.d(t,"l",(function(){return d})),i.d(t,"m",(function(){return p})),i.d(t,"p",(function(){return m})),i.d(t,"q",(function(){return g})),i.d(t,"s",(function(){return f})),i.d(t,"t",(function(){return y})),i.d(t,"u",(function(){return v})),i.d(t,"v",(function(){return x})),i.d(t,"w",(function(){return b})),i.d(t,"x",(function(){return C})),i.d(t,"y",(function(){return S})),i.d(t,"z",(function(){return w})),i.d(t,"A",(function(){return D})),i.d(t,"C",(function(){return k})),i.d(t,"D",(function(){return M})),i.d(t,"n",(function(){return T})),i.d(t,"o",(function(){return A})),i.d(t,"r",(function(){return _})),i.d(t,"E",(function(){return P})),i.d(t,"F",(function(){return F}));var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E=i(369);function N(){}i.d(t,"c",(function(){return E.c})),i.d(t,"d",(function(){return E.d})),i.d(t,"B",(function(){return E.e})),i.d(t,"a",(function(){return E.a})),i.d(t,"b",(function(){return E.b})),
/**!
 *	8.2.0
 *	Generation date: 2023-03-23T15:05:01.971Z
 *	Client name: deriv limited
 *	Package Type: Technical Analysis
 *	License type: annual
 *	Expiration date: "2024/04/01"
 *	Domain lock: ["127.0.0.1","localhost","deriv.com","deriv.app","deriv.me","binary.com","binary.sx","binary.me","binary.bot","deriv.be"]
 *	iFrame lock: true
 */
/***********************************************************!
 * Copyright by ChartIQ, Inc.
 * Licensed under the ChartIQ, Inc. Developer License Agreement https://www.chartiq.com/developer-license-agreement
*************************************************************/
/*************************************! DO NOT MAKE CHANGES TO THIS LIBRARY FILE!! !*************************************
* If you wish to overwrite default functionality, create a separate file with a copy of the methods you are overwriting *
* and load that file right after the library has been loaded, but before the chart engine is instantiated.              *
* Directly modifying library files will prevent upgrades and the ability for ChartIQ to support your solution.          *
*************************************************************************************************************************/N[370258]=function(){for(var e=2;9!==e;)switch(e){case 2:e="object"==typeof globalThis?1:5;break;case 1:return globalThis;case 5:var t;e=4;break;case 4:try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"Ll6R9",{get:function(){for(;;)return this},configurable:!0}),t=Ll6R9,i=5;break;case 5:t.BBO88=t,i=4;break;case 4:i="undefined"==typeof BBO88?3:9;break;case 3:throw"";case 9:delete t.BBO88,delete Object.prototype.Ll6R9,i=6}}catch(e){t=window}return t}}(),function(e){function t(e,t,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[6]="fi",s[7]="neProperty",s[2]="",s[2]="de",n=9;break;case 9:s[4]=!0,s[4]=!1;try{for(var o=2;13!==o;)switch(o){case 14:try{for(var l=2;3!==l;)switch(l){case 2:s[8]=s[2],s[8]+=s[6],s[8]+=s[7],s[0][0].Object[s[8]](s[1],s[0][4],s[5]),l=3}}catch(e){}o=13;break;case 7:s[5].get=function(){for(var e=2;13!==e;)switch(e){case 7:return t[2]+=t[5],t[2]+=t[1],typeof s[1][s[0][2]]==t[2]?void 0:s[1][s[0][2]];case 2:var t=[arguments];t[1]="d",t[5]="",t[5]="",t[5]="ne",t[7]="undefi",t[2]=t[7],e=7}},s[5].enumerable=s[4],o=14;break;case 9:s[1][s[0][4]]=s[1][s[0][2]],s[5].set=function(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];s[1][s[0][2]]=i[0][0],t=5}},o=7;break;case 3:return;case 4:o=s[1].hasOwnProperty(s[0][4])&&s[1][s[0][4]]===s[1][s[0][2]]?3:9;break;case 2:s[5]={},s[3]=(0,s[0][1])(s[0][0]),s[1]=[s[3],s[3].prototype][s[0][3]],o=4}}catch(e){}n=6}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function r(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}function n(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}for(var s=2;151!==s;)switch(s){case 37:o[20]="l",o[50]="residu",o[70]="",o[70]="rs",s=52;break;case 127:l(h,"substring",o[79],o[59]),s=126;break;case 85:o[15]+=o[22],o[15]+=o[97],o[17]=o[72],o[17]+=o[28],s=81;break;case 92:o[29]=o[27],o[29]+=o[57],o[29]+=o[35],o[73]=o[99],s=117;break;case 68:o[79]=1,o[48]=1,o[48]=9,o[48]=0,s=89;break;case 72:o[84]="",o[84]="",o[84]="l8",o[79]=4,s=68;break;case 126:l(h,"replace",o[79],o[16]),s=125;break;case 81:o[17]+=o[63],o[56]=o[94],o[56]+=o[96],o[56]+=o[91],s=104;break;case 100:o[24]+=o[38],o[24]+=o[26],o[81]=o[18],o[81]+=o[70],s=96;break;case 14:o[2]="b",o[9]="",o[9]="BEA",o[6]="",s=10;break;case 10:o[6]="7",o[1]="1I",o[4]="",o[4]="",o[4]="1UPs",o[5]="",o[5]="",s=27;break;case 152:l(i,"apply",o[79],o[86]),s=151;break;case 130:l(h,"charCodeAt",o[79],o[95]),s=129;break;case 123:l(a,o[89],o[48],o[81]),s=122;break;case 96:o[81]+=o[20],o[89]=o[49],o[89]+=o[50],o[89]+=o[87],s=92;break;case 3:o[3]="",o[3]="pz",o[7]="",o[7]="KJ",o[2]="",s=14;break;case 120:l(a,o[17],o[48],o[15]),s=152;break;case 28:o[57]="",o[57]="r4",o[27]="",o[27]="v2D",s=41;break;case 129:l(a,"String",o[48],o[47]),s=128;break;case 104:o[31]=o[66],o[31]+=o[93],o[31]+=o[32],o[24]=o[98],s=100;break;case 124:l(r,"push",o[79],o[29]),s=123;break;case 41:o[87]="",o[87]="al",o[99]="P5ii",o[20]="",s=37;break;case 2:var o=[arguments];o[8]="",o[8]="",o[8]="h",s=3;break;case 131:var l=function(e,i,a,r){for(var n=2;5!==n;)switch(n){case 2:var s=[arguments];t(o[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),n=5}};s=130;break;case 125:l(r,"map",o[79],o[73]),s=124;break;case 48:o[93]="",o[93]="trac",o[38]="7qAr",o[66]="",o[49]="__",s=64;break;case 89:o[86]=o[84],o[86]+=o[65],o[86]+=o[55],o[15]=o[14],s=85;break;case 111:o[59]+=o[37],o[59]+=o[4],o[85]=o[26],o[85]+=o[6],o[85]+=o[9],s=106;break;case 121:l(a,o[31],o[48],o[56]),s=120;break;case 128:l(h,"fromCharCode",o[48],o[85]),s=127;break;case 76:o[94]="u",o[63]="mize",o[55]="L",o[65]="l_m",s=72;break;case 117:o[73]+=o[41],o[73]+=o[21],o[16]=o[13],o[16]+=o[78],o[16]+=o[5],o[59]=o[76],s=111;break;case 106:o[47]=o[2],o[47]+=o[1],o[47]+=o[7],o[95]=o[68],s=133;break;case 52:o[26]="",o[26]="r",o[32]="t",o[98]="U",s=48;break;case 133:o[95]+=o[3],o[95]+=o[8],s=131;break;case 27:o[68]="u1",o[5]="I",o[78]="",o[78]="",s=23;break;case 23:o[78]="1sbW",o[21]="",o[21]="s",o[37]="6",s=34;break;case 34:o[41]="",o[76]="P",o[13]="C",o[41]="M",o[35]="",o[35]="c",s=28;break;case 122:l(n,"test",o[79],o[24]),s=121;break;case 57:o[97]="SoN",o[14]="R",o[55]="",o[22]="7x",s=76;break;case 64:o[66]="__abs",o[96]="",o[18]="Y9z",o[96]="9",o[28]="i",o[91]="FqVY",o[72]="__opt",s=57}function h(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}}(N[370258]),N[446427]=(a=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{V29cT4d:function(e,t,i){for(var r=i,n=-4&t,s=0;s<n;s+=4){var o=255&e.u1pzh(s)|(255&e.u1pzh(s+1))<<8|(255&e.u1pzh(s+2))<<16|(255&e.u1pzh(s+3))<<24;o=a(o,3432918353),r=5*(r=(524287&(r^=o=a(o=(131071&o)<<15|o>>>17,461845907)))<<13|r>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.u1pzh(n+2))<<16;case 2:o|=(255&e.u1pzh(n+1))<<8;case 1:o|=255&e.u1pzh(n),o=a(o,3432918353),r^=o=a(o=(131071&o)<<15|o>>>17,461845907)}return r^=t,r=a(r^=r>>>16,2246822507),r=a(r^=r>>>13,3266489909),r^=r>>>16}}),N.i0k=function(){return"function"==typeof N[539515].x96qQgs?N[539515].x96qQgs.apply(N[539515],arguments):N[539515].x96qQgs},N.Z2Z=function(){return"function"==typeof N[446427].V29cT4d?N[446427].V29cT4d.apply(N[446427],arguments):N[446427].V29cT4d},N[539515]=function(){for(var e=2;4!==e;)switch(e){case 2:var t,i,a=N[370258];e=5;break;case 5:return{x96qQgs:function(e,t,i,a){for(;;)return n(e,t,i,a)},q7DznqI:function(e,t,i,a){for(;;)return n(e,t,i,a,!0)}}}function r(e){for(var t=2;7!==t;)switch(t){case 2:var i=8,a="";t=5;break;case 3:a+=b1IKJ.r7BEA(e[r]-i+103),t=9;break;case 9:r++,t=4;break;case 5:var r=0;t=4;break;case 4:t=r<e.length?3:8;break;case 8:return a}}function n(e,n,s,o,l){for(var h=2;15!==h;)switch(h){case 13:h=n&&m>0&&46!==d.u1pzh(m-1)?12:11;break;case 6:case 16:return N.Z2Z(c,u,s);case 2:var c,u,d,p;p=a[r([13,16,4,2,21,10,16,15])],!t&&(t=void 0!==p?p[r([9,16,20,21,15,2,14,6])]||" ":""),!i&&(i=void 0!==p?p[r([9,19,6,7])]:""),h=3;break;case 12:return!1;case 8:u=(c=d.P61UPs(e,o)).length,h=6;break;case 9:h=o>0?8:19;break;case 11:return u=(c=d.P61UPs(m,d.length)).length,N.Z2Z(c,u,s);case 19:h=null===e||e<=0?18:14;break;case 14:var m=d.length-e;h=13;break;case 18:u=(c=d.P61UPs(0,d.length)).length,h=16;break;case 3:d=l?i:t,h=9}}}(),N.X_e=function(){return"function"==typeof N[539515].q7DznqI?N[539515].q7DznqI.apply(N[539515],arguments):N[539515].q7DznqI},N[238553]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[6]=void 0,t[4]={},e=4;break;case 4:return t[4].i9agN$W=function(){for(var e=2;90!==e;)switch(e){case 4:i[8]=[],i[7]={},i[7].q7f=["l1M"],i[7].J7t=function(){var e=!1,t=[];try{for(var i in console)t.v2Dr4c(i);e=0===t.length}catch(e){}return e},e=7;break;case 67:return t[6]=69,43;case 76:e=i[60]<i[48][i[26]].length?75:70;break;case 41:i[15].J7t=function(){return"function"==typeof R7xSoN},i[66]=i[15],i[39]={},i[39].q7f=["l0m"],i[39].J7t=function(){return/\164\x72\x75\u0065/.U7qArr(function(){return"A".normalize("NFC")==="".normalize("NFC")}+[])},e=36;break;case 46:i[8].v2Dr4c(i[3]),i[8].v2Dr4c(i[4]),i[75]=[],i[28]="i4d",e=63;break;case 50:i[8].v2Dr4c(i[9]),i[8].v2Dr4c(i[93]),i[8].v2Dr4c(i[6]),i[8].v2Dr4c(i[66]),e=46;break;case 63:i[25]="z5O",i[26]="q7f",i[50]="N9_",i[88]="J7t",e=59;break;case 77:i[60]=0,e=76;break;case 59:i[14]="g0W",e=58;break;case 1:e=t[6]?5:4;break;case 54:i[8].v2Dr4c(i[31]),i[8].v2Dr4c(i[90]),i[8].v2Dr4c(i[52]),i[8].v2Dr4c(i[10]),e=50;break;case 17:i[5].q7f=["l0m"],i[5].J7t=function(){return/\164\u0072\x75\145/.U7qArr(function(){return"x".startsWith("x")}+[])},i[3]=i[5],i[57]={},e=26;break;case 56:i[48]=i[8][i[99]];try{i[47]=i[48][i[88]]()?i[28]:i[25]}catch(e){i[47]=i[25]}e=77;break;case 57:e=i[99]<i[8].length?56:69;break;case 71:i[60]++,e=76;break;case 70:i[99]++,e=57;break;case 26:i[57].q7f=["l1M"],i[57].J7t=function(){return"function"==typeof u9FqVY},e=24;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 14:t=void 0===a[8][a[4][i[14]]]?13:11;break;case 23:return a[9];case 17:a[7]=0,t=16;break;case 11:a[8][a[4][i[14]]].t+=!0,t=10;break;case 2:var a=[arguments];t=1;break;case 6:a[4]=a[0][0][a[7]],t=14;break;case 24:a[7]++,t=16;break;case 18:a[9]=!1,t=17;break;case 15:a[5]=a[6][a[7]],a[3]=a[8][a[5]].h/a[8][a[5]].t,t=26;break;case 26:t=a[3]>=.5?25:24;break;case 1:t=0===a[0][0].length?5:4;break;case 16:t=a[7]<a[6].length?15:23;break;case 20:a[8][a[4][i[14]]].h+=!0,t=19;break;case 5:return;case 12:a[6].v2Dr4c(a[4][i[14]]),t=11;break;case 10:t=a[4][i[50]]===i[28]?20:19;break;case 4:a[8]={},a[6]=[],a[7]=0,t=8;break;case 13:a[8][a[4][i[14]]]=function(){for(var e=2;9!==e;)switch(e){case 4:return t[6].t=0,t[6];case 2:var t=[arguments];t[6]={},t[6].h=0,e=4}}.l8l_mL(this,arguments),t=12;break;case 8:a[7]=0,t=7;break;case 25:a[9]=!0,t=24;break;case 7:t=a[7]<a[0][0].length?6:18;break;case 19:a[7]++,t=7}}(i[75])?68:67;break;case 20:i[2].J7t=function(){return/\x33\x44/.U7qArr(function(){return escape("=")}+[])},i[9]=i[2],i[5]={},e=17;break;case 5:return 24;case 7:i[4]=i[7],i[1]={},i[1].q7f=["l1M"],i[1].J7t=function(){return"function"==typeof Y9zrsl},i[6]=i[1],i[2]={},i[2].q7f=["l0m"],e=20;break;case 28:i[11].J7t=function(){return!/\x79/.U7qArr(function(){return"x y".slice(0,1)}+[])},i[31]=i[11],i[15]={},i[15].q7f=["l1M"],e=41;break;case 68:e=68;break;case 2:var i=[arguments];e=1;break;case 32:i[59].J7t=function(){return/\x3d/.U7qArr(function(){return unescape("%3D")}+[])},i[52]=i[59],i[11]={},i[11].q7f=["l0m"],e=28;break;case 21:i[62].J7t=function(){return/\x31\u0039\x32/.U7qArr(function(){!function(e){for(var t=0;t<20;t++)e+=t}(2)}+[])},i[90]=i[62],i[59]={},i[59].q7f=["l0m"],e=32;break;case 36:i[93]=i[39],e=54;break;case 58:i[99]=0,e=57;break;case 24:i[10]=i[57],i[62]={},i[62].q7f=["l0m"],e=21;break;case 75:i[58]={},i[58][i[14]]=i[48][i[26]][i[60]],i[58][i[50]]=i[47],i[75].v2Dr4c(i[58]),e=71}},t[4]}}(),N.D0J=function(){return"function"==typeof N[593596].g9iUvuS?N[593596].g9iUvuS.apply(N[593596],arguments):N[593596].g9iUvuS},N[370258].N8gg=N,N[150014]=function(e){for(var t=2;10!==t;)switch(t){case 11:return{R3ta_F9:function(t){for(var a=2;6!==a;)switch(a){case 5:a=n--?3:4;break;case 3:a=n--?8:9;break;case 2:var r=(new i[e[0]])[e[1]]();a=1;break;case 9:h=r+6e4,a=8;break;case 7:return s?l:!l;case 1:a=r>h?5:8;break;case 8:var s=function(a,r){for(var n=2;10!==n;)switch(n){case 9:n=o<a[r[5]]?8:11;break;case 3:var s,o=0;n=9;break;case 8:var l=i[r[4]](a[r[2]](o),16)[r[3]](2),h=l[r[2]](l[r[5]]-1);n=6;break;case 13:o++,n=9;break;case 4:r=e,n=3;break;case 11:return s;case 12:s^=h,n=13;break;case 5:n=void 0===r&&void 0!==e?4:3;break;case 6:n=0===o?14:12;break;case 14:s=h,n=13;break;case 1:a=t,n=5;break;case 2:n=void 0===a&&void 0!==t?1:5}}(void 0,void 0);a=7;break;case 4:l=c(r),a=3}}};case 2:var i,a,r,n;t=1;break;case 4:var s="fromCharCode",o="RegExp";t=3;break;case 5:i=N[370258],t=4;break;case 13:t=n--?11:12;break;case 12:var l,h=0;t=11;break;case 8:t=n--?6:7;break;case 7:r=a.C1sbWI(new i[o]("^['-|]"),"S"),t=6;break;case 6:t=n--?13:14;break;case 14:e=e.P5iiMs((function(e){for(var t=2;13!==t;)switch(t){case 8:o++,t=3;break;case 14:return a;case 7:t=a?14:6;break;case 2:var a;t=1;break;case 4:var o=0;t=3;break;case 6:return;case 9:a+=i[r][s](e[o]+93),t=8;break;case 1:t=n--?4:5;break;case 3:t=o<e.length?9:7;break;case 5:a="",t=4}})),t=13;break;case 1:t=n--?4:5;break;case 9:a=typeof s,t=8;break;case 3:t=n--?8:9}function c(t){for(var a=2;15!==a;)switch(a){case 3:s=27,a=9;break;case 20:r=t-c>s&&l-t>s,a=19;break;case 8:o=e[6],a=7;break;case 13:h=e[7],a=12;break;case 4:a=n--?9:3;break;case 10:a=c>=0&&l>=0?20:18;break;case 17:r=t-c>s,a=19;break;case 5:u=i[e[4]],a=4;break;case 16:r=l-t>s,a=19;break;case 19:return r;case 12:a=n--?10:11;break;case 11:c=(h||0===h)&&u(h,s),a=10;break;case 6:l=o&&u(o,s),a=14;break;case 7:a=n--?14:6;break;case 14:a=n--?12:13;break;case 1:a=n--?4:5;break;case 2:var r,s,o,l,h,c,u;a=1;break;case 18:a=c>=0?17:16;break;case 9:a=n--?7:8}}}([[-25,4,23,8],[10,8,23,-9,12,16,8],[6,11,4,21,-28,23],[23,18,-10,23,21,12,17,10],[19,4,21,22,8,-20,17,23],[15,8,17,10,23,11],[-39,-44,18,6,19,17,8,7,-45],[]]),N.j89=function(){return"function"==typeof N[539515].q7DznqI?N[539515].q7DznqI.apply(N[539515],arguments):N[539515].q7DznqI},N.D0H=function(){return"function"==typeof N[238553].i9agN$W?N[238553].i9agN$W.apply(N[238553],arguments):N[238553].i9agN$W},N.T36=function(){return"function"==typeof N[150014].R3ta_F9?N[150014].R3ta_F9.apply(N[150014],arguments):N[150014].R3ta_F9},N[103941]=285,N[636832]=N[539515],N.S40=function(){return"function"==typeof N[593596].N$y1PkD?N[593596].N$y1PkD.apply(N[593596],arguments):N[593596].N$y1PkD},N.U6$=function(){return"function"==typeof N[446427].V29cT4d?N[446427].V29cT4d.apply(N[446427],arguments):N[446427].V29cT4d},N.q7n=function(){return"function"==typeof N[593596].N$y1PkD?N[593596].N$y1PkD.apply(N[593596],arguments):N[593596].N$y1PkD},N[156040]=!1,N.H6P=function(){return"function"==typeof N[593596].g9iUvuS?N[593596].g9iUvuS.apply(N[593596],arguments):N[593596].g9iUvuS},N[593596]={N$y1PkD:function(){var e,t=arguments;switch(r){case 28:e=t[0]>>t[1];break;case 48:e=t[3]+t[2]+t[1]+t[0];break;case 112:e=-t[3]-t[2]+t[4]+t[0]-t[1];break;case 135:e=(t[1]-t[3])*t[2]-t[0];break;case 143:e=(t[4]+t[2])/t[0]+t[1]-t[3];break;case 141:e=(t[1]-t[7])*(t[5]-t[6])+(t[3]-t[0])*(t[4]-t[2]);break;case 138:e=t[0]/t[1]/t[3]/t[2]+t[4];break;case 47:e=t[0]+ +t[2]*t[1];break;case 142:e=-t[4]*t[1]*t[2]-t[0]+t[3];break;case 19:e=t[0]+t[2]+t[1]-t[3];break;case 10:e=t[0]|t[1];break;case 49:e=t[1]+(t[3]-t[2])+t[0];break;case 4:e=t[3]+t[0]/t[1]-t[2];break;case 35:e=(t[2]+t[1]+t[3])*t[0]-t[4];break;case 91:e=-t[0]/t[4]*t[3]/t[1]+t[2];break;case 109:e=(t[1]+t[2]-t[0])/t[3]+t[4];break;case 2:e=-t[2]-t[0]+t[1];break;case 42:e=t[2]*t[0]+t[3]*t[1];break;case 54:e=(t[1]+t[2])*t[4]+t[3]-t[0];break;case 102:e=t[1]*(t[2]/t[0]);break;case 34:e=(t[0]+t[1])*t[2]/t[4]-t[3];break;case 65:e=(t[3]-t[2])/t[1]*t[4]-t[0];break;case 11:e=(t[0]+t[1])*t[3]-t[2];break;case 92:e=(t[0]+t[2]-t[3])*t[4]-t[1];break;case 62:e=t[3]*t[0]-t[2]-t[1];break;case 21:e=t[0]^t[1];break;case 132:e=t[3]/t[4]*t[1]+t[2]-t[0];break;case 25:e=(t[1]-t[0])*t[2];break;case 63:e=t[2]*t[0]/t[1]*t[3]-t[4];break;case 128:e=t[0]-t[2]/+t[1];break;case 147:e=(t[3]-t[1]/t[0])*t[2];break;case 40:e=t[1]<<t[0];break;case 5:e=t[1]+(t[2]>>t[0]);break;case 72:e=t[1]!=t[0];break;case 144:e=t[4]*(t[0]/t[2]-t[1])+t[3];break;case 27:e=(-t[0]-t[1])*t[3]+t[2];break;case 33:e=t[1]+t[3]-t[2]-t[0];break;case 67:e=t[4]+t[1]-t[0]+t[3]-t[2];break;case 95:e=-t[1]/t[2]+t[0];break;case 20:e=(t[1]-t[3])*t[0]+t[4]+t[2];break;case 85:e=t[0]-(t[2]-t[1]);break;case 137:e=t[2]-(t[1]|t[0]);break;case 50:e=t[0]-(t[1]>>t[3])+t[2];break;case 127:e=t[3]*t[2]*t[0]+(t[5]-t[4]*t[1])*t[6];break;case 22:e=t[2]/t[0]*t[1]-t[3];break;case 134:e=(t[2]+t[3])/t[0]*t[4]+t[1];break;case 120:e=(t[1]-t[4])/t[3]/t[0]+t[2];break;case 115:e=t[2]/(t[1]*t[0]);break;case 146:e=t[2]-t[0]*t[1];break;case 122:e=(t[2]+t[1])*t[3]-t[0]-t[4];break;case 117:e=-t[0]+t[2]-t[3]+t[1];break;case 125:e=(t[1]-t[3])*t[0]+t[2];break;case 133:e=(t[4]+t[0])/t[1]/t[3]-t[2];break;case 106:e=(t[1]-t[4])/t[0]+t[3]+t[2];break;case 81:e=t[0]|t[3]|t[4]|t[1]|t[2];break;case 107:e=(t[4]*t[1]+t[0])/t[3]-t[2];break;case 37:e=t[1]+t[2]+t[0];break;case 118:e=t[4]/t[2]*t[3]*t[1]-t[0];break;case 8:e=t[0]/+t[1];break;case 94:e=t[4]+t[2]+t[0]-t[1]-t[3];break;case 23:e=t[1]/t[4]+t[0]+t[3]-t[2];break;case 66:e=t[2]+t[3]+t[1]-t[0]+t[4];break;case 140:e=t[2]/t[0]/t[1];break;case 16:e=-t[0]+t[1];break;case 9:e=(t[2]+t[1])/t[0];break;case 80:e=t[2]|t[1]|t[0];break;case 6:e=(t[1]-t[3]-t[2])/t[4]+t[0];break;case 76:e=+t[1]<<t[0];break;case 43:e=t[2]+t[0]/t[1];break;case 111:e=t[2]/t[1]-t[3]-t[4]+t[0];break;case 96:e=t[0]*t[2]/(t[1]+t[3]);break;case 60:e=t[3]/t[2]+t[1]-t[0];break;case 82:e=(t[3]-t[1]-t[0])%t[2];break;case 64:e=t[0]/t[1]-t[3]+t[2];break;case 100:e=t[1]*t[2]/t[0];break;case 99:e=t[0]*(t[1]+t[2]/t[3]);break;case 79:e=t[2]|t[1]|t[0]|t[3];break;case 30:e=(t[1]+t[0])*t[3]+t[2];break;case 38:e=t[2]-(t[0]>>t[1]);break;case 53:e=t[4]/t[1]/t[3]*t[2]-t[0];break;case 83:e=t[3]/t[2]*t[0]/t[4]-t[1];break;case 56:e=t[2]+t[1]-t[4]-t[3]+t[0];break;case 104:e=t[3]/t[0]+t[2]+t[1];break;case 131:e=t[0]*((t[2]-t[3])/t[4]+t[1]);break;case 61:e=-t[0]*t[3]/t[1]+t[2];break;case 51:e=(t[2]-t[0])/t[1]-t[4]+t[3];break;case 89:e=t[2]+(t[3]-t[1])*t[0];break;case 124:e=t[2]/(t[1]+t[0]);break;case 46:e=t[0]-t[2]/t[1];break;case 101:e=(t[3]-t[0]+t[2])*t[1]-t[4];break;case 108:e=t[0]*t[2]/t[1]+t[3];break;case 39:e=t[0]-t[1]-t[2];break;case 97:e=t[0]+(t[2]^t[1]);break;case 93:e=(-t[2]*t[1]-t[3])*t[4]+t[0];break;case 103:e=t[0]/(t[2]^t[1]);break;case 41:e=-t[0]*t[1]+t[2];break;case 69:e=t[0]*t[1];break;case 73:e=t[0]+t[4]+t[3]+t[2]+t[1];break;case 75:e=t[0]%t[1];break;case 139:e=-t[3]-t[1]-t[4]+t[2]+t[0];break;case 87:e=-t[2]*t[1]-t[0]+t[4]+t[3];break;case 55:e=(t[1]+t[0])/t[2]+t[3];break;case 105:e=-t[2]/t[4]+t[3]-t[1]+t[0];break;case 17:e=(t[4]+t[0]-t[3])/t[2]-t[1];break;case 149:e=-t[1]*t[2]/t[4]-t[0]+t[3];break;case 116:e=t[0]*(t[2]<<t[3])/t[1];break;case 129:e=t[2]+t[0]/(t[1]<<t[3]);break;case 58:e=t[1]+(t[0]-t[2]);break;case 36:e=t[1]-t[2]+t[0];break;case 7:e=t[1]-t[0];break;case 44:e=t[2]-t[0]/t[3]-t[1];break;case 14:e=t[1]/t[0];break;case 98:e=(t[1]+t[0]+t[2])/t[4]-t[3];break;case 68:e=t[0]==t[1];break;case 29:e=(t[2]+t[3])/t[1]/t[4]+t[0];break;case 90:e=t[1]*t[2]*t[3]-t[0];break;case 32:e=t[2]*t[1]+t[0];break;case 24:e=t[3]/t[4]+t[2]-t[1]-t[0];break;case 74:e=t[0]<=t[1];break;case 13:e=t[3]*t[2]/t[1]-t[0];break;case 12:e=t[0]/t[2]+t[1];break;case 78:e=t[0]<<(t[1]|t[2]);break;case 52:e=t[1]*t[2]-t[0];break;case 59:e=(t[0]-t[1])/(t[2]-t[3]);break;case 0:e=t[0]+t[1];break;case 15:e=t[1]+t[0]-t[2];break;case 114:e=t[3]-(t[0]-t[1])-+t[2];break;case 77:e=t[1]>=t[0];break;case 45:e=t[2]+t[0]*t[1];break;case 148:e=(t[1]+t[0]/t[3])*t[2];break;case 88:e=t[0]-+t[2]*t[1];break;case 1:e=t[1]*t[0];break;case 3:e=t[2]-t[0]/(t[4]^t[1])+t[3];break;case 26:e=t[0]+(t[1]+t[4]*t[2])*t[3];break;case 136:e=t[1]*+t[0];break;case 31:e=t[3]/t[1]/t[0]-t[2];break;case 84:e=t[0]===t[1];break;case 130:e=t[1]*+t[0]*+t[3]*t[2];break;case 145:e=t[0]*t[2]*t[1];break;case 70:e=t[0]>t[1];break;case 57:e=(t[1]-t[2])/t[3]+t[0];break;case 110:e=t[1]*t[2]*t[3]-t[0]-t[4];break;case 126:e=(t[3]/t[4]+t[1])*t[2]-t[0];break;case 18:e=t[0]/t[1]-t[2];break;case 71:e=t[1]<t[0];break;case 121:e=t[3]-t[2]-t[0]+t[1];break;case 113:e=t[3]-t[2]+(t[1]>>t[0]);break;case 86:e=-t[2]+t[1]+t[0];break;case 123:e=t[3]*t[1]+t[0]-t[2];break;case 119:e=t[3]+t[4]-t[0]-t[2]-t[1]}return e},g9iUvuS:function(e){r=e}},N.b3E=function(){return"function"==typeof N[150014].R3ta_F9?N[150014].R3ta_F9.apply(N[150014],arguments):N[150014].R3ta_F9},N.n54=function(){return"function"==typeof N[539515].x96qQgs?N[539515].x96qQgs.apply(N[539515],arguments):N[539515].x96qQgs},N.a9S=function(){return"function"==typeof N[238553].i9agN$W?N[238553].i9agN$W.apply(N[238553],arguments):N[238553].i9agN$W},N.a3z=function(e){if(N.a9S(),N)return N.T36(e)},N.Q6a=function(e){if(N.D0H(),N&&e)return N.T36(e)},N.e3H=function(e){if(N.D0H(),N&&e)return N.b3E(e)},N.D$Y=function(e){if(N.D0H(),N)return N.T36(e)},N.k2l=function(e){if(N.a9S(),N)return N.T36(e)},N.N1F=function(e){if(N.a9S(),N)return N.b3E(e)},n=e=>{var t,i,a,r=N;r.a9S(),t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i=class{get(e,t){r.D0H(),t("no storage defined")}set(e,t){}remove(e){}},t.ChartEngine.create=function(){let{container:e,config:n,deferLoad:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o,l,h;e||(e=document.querySelector(".chartContainer")||document.body),n||(n={}),o=Object.assign({container:e},n.chartEngineParams),l=new this(o);var{quoteFeeds:c,marketFactory:u,addOns:d,chartId:p,onChartReady:m}=n;function g(){l.loadChart(n.initialSymbol,{masterData:n.initialData},f),l.draw()}function f(){r.a9S(),m&&setTimeout(()=>(r.D0H(),m(l)))}for(var y in c&&l.attachQuoteFeed&&c.forEach(e=>{let{quoteFeed:t,behavior:i,filter:a}=e;l.attachQuoteFeed(t,i,a)}),u&&l.setMarketFactory(u),d&&Object.entries(d).filter(e=>{let[,t]=e;return r.a9S(),!!t}).forEach(e=>{let[i,a]=e;var s;if(r.a9S(),n.enabledAddOns[i])if(s=a.moduleName||t.capitalize(i),t[s]){var{cssRequired:o}=new t[s](Object.assign({stx:l},a,{config:n}));o&&t.UI&&t.UI.activatePluginUI(l,s)}else t.debug&&console.log("".concat(s," not available for addons with params:"),a)}),h=t.ensureDefaults(n.callbacks||{},{layout:this.getSaveLayout(n),symbolChange:this.getSaveLayout(n),drawing:this.getSaveDrawings(n),preferences:this.getSavePreferences(n),newChart:this.getRetoggleEvents(n)}))h[y]&&l.addEventListener(y,h[y]);return a=new(a=n.nameValueStore||t.NameValueStore||i),r.a9S(),s||(n.restore?(this.restorePreferences(l,p),this.restoreLayout(l,e=>{r.D0H(),!l.chart.symbol&&n.initialSymbol?g():f()},p)):g()),l},t.ChartEngine.getSaveLayout=function(e){return function(t){let{stx:i}=t;var r;e.restore&&i.exportLayout&&(r=JSON.stringify(i.exportLayout(!0)),a.set("myChartLayout"+(e.chartId||""),r))}},t.ChartEngine.restoreLayout=function(e,t,i){var{restoreDrawings:n}=this;function s(){n(e,e.chart.symbol,i),r.a9S(),t&&t()}i||(i=""),r.H6P(0),a.get(r.S40("myChartLayout",i),(function(t,i){if(!t){try{i=JSON.parse(i)}catch(e){}r.a9S(),e.importLayout&&e.importLayout(i,{managePeriodicity:!0,cb:s}),e.termStructure&&e.setCandleWidth(1)}}))},t.ChartEngine.getSaveDrawings=function(e){return function(t){let{stx:i,symbol:n}=t;var s,o;r.D0H(),e.restore&&i.exportDrawings&&(s=i.exportDrawings(),o=e.chartId?e.chartId+"~"+n:n,0===s.length?a.remove(o):a.set(o,JSON.stringify(s)))}},t.ChartEngine.restoreDrawings=function(e,i,r){var n;t.Drawing&&(n=r?r+"~"+i:i,a.get(n,(function(t,i){if(!t){try{i=JSON.parse(i)}catch(e){}i&&(e.importDrawings(i),e.draw())}})))},t.ChartEngine.getSavePreferences=function(e){return function(t){let{stx:i}=t;var n;r.a9S(),e.restore&&i.exportPreferences&&(n=JSON.stringify(i.exportPreferences()),a.set("myChartPreferences"+(e.chartId||""),n))}},t.ChartEngine.restorePreferences=function(e,t){t||(t=""),r.D0J(0),a.get(r.S40("myChartPreferences",t),(function(t,i){if(!t){r.D0H();try{i=JSON.parse(i)}catch(e){}i&&e.importPreferences&&e.importPreferences(i)}}))},t.ChartEngine.getRetoggleEvents=function(e){return r.D0H(),function(i){let{stx:a}=i;var n;n=document.getElementById(e.chartId),r.D0H(),n||(n=(t.getFn("UI.getMyContext")(a.container)||{}).topNode),n||(n=document),n.querySelectorAll("".concat(e.selector.markersMenuItem,".ciq-active:not(.span-event)")).forEach((function(e){e.dispatchEvent(new Event("stxtap"))}))}}},s=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.drawHeatmap=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g;if("ch","art",t&&t.length&&((i=e.panel)||(i="chart"),a=this.panels[i])){r=e.yAxis?e.yAxis:a.yAxis,n=this.chart.dataSegment,e.name||(e.name="Data"),e.widthFactor||(e.widthFactor=1),e.height||(e.height=Math.pow(10,1-(a.decimalPlaces||a.chart.decimalPlaces))),s="stx-float-date",o=this.chart.context,this.canvasFont(s,o),l=this.getCanvasFontSize(s),h=1,!e.highlight&&this.highlightedDraggable&&(h=.3),c=.5,a.chart.tmpWidth<=1&&(c=0),u=null,d=null,p=this,m=null,N.D0H(),this.startClip(i),o.globalAlpha=h;for(var f=0;f<t.length;f++)y((g=t[f]).field,g.color,g.opacity,null,e.widthFactor,g.height,g.border_color?c:-c/4,g.subField),g.border_color&&this.layout.candleWidth>=2&&y(g.field,g.border_color,g.opacity,!0,e.widthFactor,g.height,c,g.subField);o.lineWidth=1,o.globalAlpha=1,this.endClip()}function y(t,i,s,c,g,f,y,v){var x,b,C,S,w,D,k,M,T,A,_,P,F,L,E=N;o.beginPath(),o.fillStyle=i,o.strokeStyle=i,o.textAlign="center",x=p.layout.candleWidth*g,b=Math.floor(p.pixelFromBar(0,a.chart)-p.layout.candleWidth),"number"==typeof s&&(E.D0J(1),o.globalAlpha=E.q7n(h,s)),"object"==typeof s&&(w={minOpacity:s.min||0,maxOpacity:s.max||1});for(var H=0;H<n.length;H++){if("n","umb","er",(D=n[H])&&D.candleWidth){if(0===H)b+=p.layout.candleWidth;else{E.H6P(2);var I=E.q7n(3,21,16);b+=(D.candleWidth+x/g)/I}x=D.candleWidth*g}else b+=p.layout.candleWidth;if(E.H6P(3),C=E.S40(x,0,b,y,"2"),E.H6P(4),(S=E.S40(x,2,y,b))-C<2&&(E.H6P(5),S=E.q7n(32,C,"1")),D&&(k=D[t])){k[v]&&(k=k[v]),"number"==typeof k&&(k=[k]);for(var j=0;j<k.length;j++){if(T=0,(M=k[j])instanceof Array){if(w){E.D0J(6);var O=E.S40(19,0,9,8,1);o.globalAlpha=h*(M[O]*w.maxOpacity+(1-M[2])*w.minOpacity)}T=M[1],M=M[0]}A=p.pixelFromPrice(M,a,r),m||(f||(f=e.height),_=p.pixelFromPrice(M+f*(r.flipped?1:-1),a,r),o.lineWidth=1,E.H6P(7),u=E.S40(A,_),E.H6P(8),d=E.S40(u,"2"),m=o.lineWidth),c?(E.D0J(7),P=E.q7n(d,A),E.H6P(0),F=E.S40(A,d),E.D0J(7),o.rect(C,P,E.q7n(C,S),E.q7n(P,F))):(E.D0J(7),o.fillRect(C,E.q7n(d,A),E.q7n(C,S),u),e.showSize&&T&&l<=u-2&&(L=o.globalAlpha,o.fillStyle=p.defaultColor,E.D0J(1),o.globalAlpha=E.S40(h,.5),E.D0J(9),o.fillText(T,E.S40(2,C,S),A),o.fillStyle=i,E.H6P(1),o.globalAlpha=E.S40(h,L))),w&&M instanceof Array&&(o.globalAlpha=0)}}}c&&o.stroke(),o.globalAlpha=h,o.closePath()}},t.ChartEngine.prototype.drawCandles=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,H,I,j,O,Y,R,$,z,q,J=N;if(r="o",r+="bje",r+="c",r+="t",(n=e.chart)||(n=e,e=e.chart),s=!1,o=!1,l=null,h=e.yAxis,a&&typeof a==r)s=a.isOutline,o=a.isHistogram,l=a.field,h=a.yAxis;else{c=-779852817,J.H6P(10),u=J.S40("384688691",32),d=2;for(var V=1;J.Z2Z(V.toString(),V.toString().length,4408)!==c;V++)s=a,o=arguments[3],d+=2;J.Z2Z(d.toString(),d.toString().length,83805)!==u&&(s=a,o=arguments[4])}p=n.dataSegment,m=n.context,g=h.top,f=h.bottom,b=new Array(p.length),C="t",C+="ransp",J.D0H(),C+="arent",S="transparent",w=0,J.H6P(11);var B=J.q7n(0,2,9,5);D=n.dataSet.length-n.scroll-B,k={},J.H6P(12);var W=J.q7n(14,1,14);M=n.tmpWidth/W,T=this.layout.candleWidth,J.D0J(0);var U=J.q7n(0,1);J.H6P(13);var Q=J.S40(4,10,5,10);A=e.left-"0.5"*U*T+this.micropixels-Q;for(var X=0;X<=p.length;X++)if(_=M,J.H6P(8),A+=J.S40(T,"2"),T=this.layout.candleWidth,J.H6P(14),A+=J.S40(2,T),(P=p[X])&&!P.projection){if(P.candleWidth){J.D0J(7);var Z=J.S40(14,16);A+=(P.candleWidth-T)/Z,T=P.candleWidth,(a.isVolume||T<n.tmpWidth)&&(J.H6P(14),_=J.q7n(2,T))}if(n.transformFunc&&h==n.panel.yAxis&&P.transform&&(P=P.transform),P&&l&&(P=P[l]),(P||0===P)&&(F=P.Close,L=void 0===P.Open?F:P.Open,o&&n.defaultPlotField&&(F=P[n.defaultPlotField]),(F||0===F)&&(o||L!=F&&null!==L)&&(E=i(this,P,s?"outline":"solid")))){if(s?C=E:S=E,k[S]=1,(H=C&&!t.isTransparent(C))&&!a.highlight&&(J.D0J(7),w=J.S40(0,"0.5")),m.beginPath(),m.fillStyle=S,P.cache||(P.cache={}),I=P.cache,J.D0J(0),(j=J.S40(D,X))<e.cacheLeft||j>e.cacheRight||!I.open){if(O=h.semiLog?h.height*(1-(Math.log(Math.max(L,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-L)*h.multiplier,Y=h.semiLog?h.height*(1-(Math.log(Math.max(F,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-F)*h.multiplier,h.flipped?(J.H6P(7),O=J.S40(O,f),J.H6P(7),Y=J.q7n(Y,f)):(O+=g,Y+=g),b[X]=Y,y=Math.floor(o?Y:Math.min(O,Y))+w,v=o?h.bottom:Math.max(O,Y),J.H6P(7),x=Math.floor(J.S40(y,v)),y<g){if(y+x<g){I.open=y,I.close=y;continue}J.D0J(7),x-=J.q7n(y,g),y=g}y+x>f&&(J.D0J(15),x-=J.q7n(x,y,f)),x=Math.max(x,2),I.open=y,I.close=I.open+x}I.open>=f||I.close<=g||(R=Math.floor(A)+(!a.highlight&&.5),$=Math.floor(R-_)+w,z=Math.round(R+_)-w,I.open!=I.close&&m.rect($,I.open,Math.max(1,z-$),Math.max(1,I.close-I.open)),!a.highlight&&this.highlightedDraggable&&(m.globalAlpha*=.3),"transparent"!=S&&m.fill(),H&&(m.lineWidth=1,a.highlight&&(m.lineWidth*=2),m.strokeStyle=C,m.stroke()))}}for(var G in q={colors:[],cache:b},k)a.hollow&&t.equals(G,this.containerColor)||q.colors.push(G);return q},t.ChartEngine.prototype.drawShadows=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_=N;(a=e.chart)||(a=e,e=e.chart),r=a.dataSegment,(n=this.chart.context).lineWidth=1,i.highlight&&(n.lineWidth*=2),!i.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),s=i.field,l=(o=i.yAxis||e.yAxis).top,h=o.bottom,c=a.dataSet.length-a.scroll-1,u=this.layout.candleWidth,_.D0J(16);var P=_.S40(13,14);d=e.left-.5*u+this.micropixels-P,_.D0H();for(var F=0;F<=r.length;F++)if(_.D0J(14),d+=_.q7n(2,u),u=this.layout.candleWidth,_.H6P(14),d+=_.q7n(2,u),(p=r[F])&&!p.projection){if(p.candleWidth){_.D0J(17);var L=_.q7n(13,19,1,7,15);d+=(p.candleWidth-u)/L,u=p.candleWidth}if((m=t(this,p,"shadow"))&&(a.transformFunc&&o==a.panel.yAxis&&p.transform&&(p=p.transform),p&&s&&(p=p[s]),(p||0===p)&&(g=p.Close,f=void 0===p.Open?g:p.Open,y=void 0===p.High?Math.max(g,f):p.High,v=void 0===p.Low?Math.min(g,f):p.Low,g||0===g))){if(p.cache||(p.cache={}),x=p.cache,_.H6P(0),(b=_.q7n(c,F))<e.cacheLeft||b>e.cacheRight||!x.top){if(C=o.semiLog?o.height*(1-(Math.log(Math.max(y,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-y)*o.multiplier,S=o.semiLog?o.height*(1-(Math.log(Math.max(v,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-v)*o.multiplier,o.flipped?(_.H6P(7),C=_.q7n(C,h),_.D0J(7),S=_.S40(S,h)):(C+=l,S+=l),_.H6P(7),w=_.S40(C,S),C<l){if(C+w<l){x.top=C,x.bottom=C;continue}_.D0J(7),w-=_.q7n(C,l),C=l}C+w>h&&(_.H6P(15),w-=_.S40(w,C,h)),x.top=C,x.bottom=x.top+w}x.top>=h||x.bottom<=l||(D=Math.floor(d)+(!i.highlight&&.5),n.beginPath(),g==f&&(k=this.offset,i.isVolume&&(_.D0J(14),k=_.q7n(2,u)),_.H6P(7),M=_.S40(k,D),_.H6P(0),T=_.S40(D,k),A=o.semiLog?o.height*(1-(Math.log(Math.max(g,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-g)*o.multiplier,o.flipped?(_.D0J(7),A=_.S40(A,h)):A+=l,A<=h&&A>=l&&(n.moveTo(M,A),n.lineTo(T,A))),y!=v&&(n.moveTo(D,x.top),n.lineTo(D,x.bottom)),n.strokeStyle=m,n.stroke())}}},t.ChartEngine.prototype.drawBarChart=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E=N;(n=e.chart)||(n=e,e=e.chart),s=n.dataSegment,o=new Array(s.length),l=n.context,(h=this.canvasStyle(i)).width&&parseInt(h.width,10)<=25?l.lineWidth=Math.max(1,t.stripPX(h.width)):l.lineWidth=1,r.highlight&&(l.lineWidth*=2),!r.highlight&&this.highlightedDraggable&&(l.globalAlpha*=.3),c=r.field,d=(u=r.yAxis||e.yAxis).top,p=u.bottom,E.D0J(18);var H=E.q7n(13,13,0);g=n.dataSet.length-n.scroll-H,f={},E.D0J(13);var I=E.S40(0,25,10,5);y=n.tmpWidth/I,E.H6P(19);var j=E.S40(0,15,20,33);v=l.lineWidth/j,x=this.layout.candleWidth,b=e.left-.5*x+this.micropixels-1;for(var O=0;O<=s.length;O++)if("h","l","c",E.H6P(14),b+=E.S40(2,x),x=this.layout.candleWidth,E.H6P(14),b+=E.S40(2,x),C=s[O]){if(C.projection)break;if(C.candleWidth){E.H6P(20);var Y=E.S40(13,0,123,10,9);b+=(C.candleWidth-x)/Y,x=C.candleWidth}if((S=a(this,C))&&(E.H6P(21),f[S]=E.S40("1",0),l.strokeStyle=S,l.beginPath(),n.transformFunc&&u==n.panel.yAxis&&C.transform&&(C=C.transform),C&&c&&(C=C[c]),(C||0===C)&&(w=C.Close,D=void 0===C.Open?w:C.Open,k=void 0===C.High?Math.max(w,D):C.High,M=void 0===C.Low?Math.min(w,D):C.Low,w||0===w))){if(C.cache||(C.cache={}),T=C.cache,E.D0J(0),(A=E.q7n(g,O))<e.cacheLeft||A>e.cacheRight||!T.top){if(_=this.pixelFromTransformedValue(k,e,u),P=this.pixelFromTransformedValue(M,e,u),T.open=u.semiLog?u.height*(1-(Math.log(Math.max(D,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-D)*u.multiplier,T.close=u.semiLog?u.height*(1-(Math.log(Math.max(w,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-w)*u.multiplier,u.flipped?(T.open=u.bottom-T.open,T.close=u.bottom-T.close):(T.open+=u.top,T.close+=u.top),o[O]=T.close,E.H6P(7),m=E.S40(_,P),_<d){if(_+m<d){T.top=_,T.bottom=_;continue}E.H6P(7),m-=E.q7n(_,d),_=d}_+m>p&&(E.H6P(15),m-=E.S40(m,_,p)),T.top=_,E.D0J(0),T.bottom=E.S40(_,m)}E.H6P(7);var R=E.S40(18,19);F=Math.floor(b)+(!r.highlight&&"0.5"*R),T.top<p&&T.bottom>d&&C.High!=C.Low&&(l.moveTo(F,T.top-v),l.lineTo(F,T.bottom+v)),"hlc"!=r.type&&T.open>d&&T.open<p&&(l.moveTo(F,T.open),E.D0J(7),l.lineTo(E.S40(y,F),T.open)),T.close>d&&T.close<p&&(l.moveTo(F,T.close),E.D0J(0),l.lineTo(E.S40(F,y),T.close)),l.stroke()}}for(var $ in l.lineWidth=1,L={colors:[],cache:o},f)t.equals($,this.containerColor)||L.colors.push($);return L},t.ChartEngine.prototype.drawWaveChart=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M=N;function T(t){return p.pixelFromTransformedValue(t,e,o)}r=(a=e.chart).dataSegment,n=new Array(r.length),s=a.context,i||(i={}),o=i.yAxis||e.yAxis,this.startClip(e.name),s.beginPath(),l=!1,h=!1,c=e.yAxis.top,u=e.yAxis.bottom,d=e.left+Math.floor(-.5*this.layout.candleWidth+this.micropixels),p=this;for(var A=0;A<=r.length;A++)if(d+=this.layout.candleWidth,m=r[A]){if(m.projection)break;if(a.transformFunc&&o==a.panel.yAxis&&m.transform&&(m=m.transform),m&&i.field&&(m=m[i.field]),(m||0===m)&&(g=m.Close,f=void 0===m.Open?g:m.Open,y=void 0===m.High?Math.max(g,f):m.High,v=void 0===m.Low?Math.min(g,f):m.Low,g||0===g)){M.D0J(22);var _=M.q7n(1,11,23,250);M.H6P(23);var P=M.S40(7,24,34,11,1);if(x=d-_*this.layout.candleWidth/P,(b=T(f))<c){if(b=c,h){s.moveTo(x,b);continue}h=!0}else if(b>u){if(b=u,h){s.moveTo(x,b);continue}h=!0}else h=!1;l?s.lineTo(x,b):(l=!0,(C=a.dataSet.length-a.scroll-1)<0?s.moveTo(x,b):C>=0&&((S=a.dataSet[C]).transform&&(S=S.transform),w=T(w=S.Close),w=Math.min(Math.max(w,c),u),s.moveTo(e.left+(A-1)*this.layout.candleWidth+this.micropixels,w),s.lineTo(x,b)),s.moveTo(x,b)),M.D0J(16);var F=M.q7n(7,11);if(x+=this.layout.candleWidth/F,f<g){(b=T(v))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b),M.H6P(16);var L=M.S40(10,14);x+=this.layout.candleWidth/L,(b=T(y))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)}else(b=T(y))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b),x+=this.layout.candleWidth/4,(b=T(v))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b);M.D0J(24);var E=M.S40(5,9,16,10,5);x+=this.layout.candleWidth/E,b=T(g),n[A]=b,b<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)}}return(D=this.canvasStyle("stx_line_chart")).width&&parseInt(D.width,10)<=25?s.lineWidth=Math.max(1,t.stripPX(D.width)):s.lineWidth=1,i.highlight&&(s.lineWidth*=2),this.canvasColor("stx_line_chart"),i.color&&(s.strokeStyle=i.color),!i.highlight&&this.highlightedDraggable&&(s.globalAlpha*=.3),s.stroke(),s.closePath(),k={colors:[s.strokeStyle],cache:n},this.endClip(),s.lineWidth=1,k},t.ChartEngine.prototype.drawHistogram=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,H=N;if("c","ha","rt",i&&i.length&&((a=e.panel)||(a="chart"),r=this.panels[a])){for(n=e.yAxis?e.yAxis:r.yAxis,s=e.type,o=this.chart.dataSegment,l=!1,h=1,H.D0J(7),c=H.S40(0,"1"),d=0;d<i.length;d++)l|=i[d].border_color_up&&!t.isTransparent(i[d].border_color_up),l|=i[d].border_color_down&&!t.isTransparent(i[d].border_color_down),h=i[d].opacity_up,c=i[d].opacity_down,!e.highlight&&this.highlightedDraggable&&(h*=.3,c*=.3);!1===e.borders&&(l=!1),e.name||(e.name="Data"),p=n.multiplier,e.heightPercentage||(e.heightPercentage=.7),e.widthFactor||(e.widthFactor=.8),H.H6P(28),m=H.q7n("0",0),g=0;for(var I=0;I<this.chart.maxTicks;I++)if(f=o[I])for(y=0,d=0;d<i.length;d++)((v=f[i[d].field])||0===v)&&("st","ac","k","ed","C","los","e",u=i[d].subField||this.chart.defaultPlotField||"Close","object"==typeof v&&v[u]&&(v=v[u]),"stacked"==s?y+=v:y=v,y>m&&(m=y),y<g&&(g=y));if(H.a9S(),0===m&&0===g)return" Not ","Ava","ilab","le",void this.displayErrorAsWatermark(a,this.translateIf(e.name+" Not Available"));for(b=!1,e.bindToYAxis?(n.baseline&&(g=n.baseline.value,b=!0),x=Math.floor(this.pixelFromPrice(g,r,n))+(n.flipped?-.5:.5)):(n.flipped?(x=Math.floor(n.top)-.5,C=Math.floor(n.bottom)-.5):(x=Math.floor(n.bottom)+.5,C=Math.floor(n.top)+.5),p=Math.abs(x-C)*e.heightPercentage/(m-g)),this.startClip(a),S=this.layout.candleWidth<=1||!l?0:.5,w=this.chart.context,n.flipped&&(w.translate(0,2*n.top),w.scale(1,-1)),D=Math.max(0,(1-e.widthFactor)*this.layout.candleWidth/2),k=new Array(o.length),M=[],T=this,A=1,d=0;d<i.length;d++){if("s","tac","k","ed","clus","tere","d",_=i[d],A=this.layout.candleWidth*e.widthFactor,D&&this.layout.candleWidth-A<=2&&(l=!1),P=0,"clustered"==s&&(P=d,A/=i.length),u=_.subField||this.chart.defaultPlotField||"Close","function"==typeof _.color_function){L={};for(var j=0;j<o.length;j++)if(o[j]){"border_op","acit","y","string"==typeof(F=_.color_function(o[j]))&&(F={fill_color:F,border_color:F}),F.hasOwnProperty("border_opacity")||(F.border_opacity=F.opacity),H.H6P(15);H.q7n(12,18714,15607);H.D0J(7);H.q7n(42480,50976);H.H6P(29);var O=H.S40(2853,1,25686,17,25703);H.D0J(0);var Y=H.q7n(2,30);H.H6P(30);var R=H.q7n(7,304,232,10);H.H6P(31);H.S40(2,1,7973,17822);H.H6P(32);var $=H.q7n(5030,2,387);H.D0J(15);var z=H.S40(19,1097,16);H.D0J(13);H.S40(18661,3,9,9337);(E=F.fill_color+(O==="9200"<<Y?713.18:R<=$?",":z)+F.border_color)in L?L[E].positions.push(j):(F.positions=[j],L[E]=F)}for(E in L)F=L[E],q(_.field,u,F.fill_color,F.opacity,null,null,P,A,F.positions),q(_.field,u,F.border_color,F.border_opacity,!0,null,P,A,F.positions)}else q(_.field,u,_.fill_color_up,h,null,!0,P,A),q(_.field,u,_.fill_color_down,c,null,null,P,A),this.layout.candleWidth>=2&&l&&(q(_.field,u,_.border_color_up,h,!0,!0,P,A),q(_.field,u,_.border_color_down,c,!0,null,P,A));"stacked"==s&&(M=t.shallowClone(k))}w.globalAlpha=1,this.endClip()}function q(e,t,i,a,n,l,h,c,u){var d,m,f,y,v,C,A,_,P,F,L,E,N;a||(a=1),w.globalAlpha=a,w.beginPath(),H.D0J(0),d=H.S40(x,.5),m=Math.floor(T.pixelFromBar(0,r.chart)-T.layout.candleWidth/2);for(var I=0;I<o.length;I++)if("clu","stered","o","b","jec","t",f=M[I]||x,0===I&&(d=f),o[I]&&o[I][e]){if("object"==typeof(v=(y=o[I])[e])&&v[t]&&(v=v[t]),H.D0J(25),C=H.q7n(g,v,p),!isNaN(C))if(A=T.layout.candleWidth,y.candleWidth&&(A=y.candleWidth,0===I&&(m=Math.floor(T.pixelFromBar(0,r.chart)-y.candleWidth/2))),(_=Math.floor(f-C)+.5)>f&&!b&&(_=f),u&&-1==u.indexOf(I)||!u&&(l&&y.Close<y.iqPrevClose||!l&&y.Close>=y.iqPrevClose))d=_,m+=A;else{if(P=A/T.layout.candleWidth,D){H.H6P(26),F=Math.round(H.S40(m,D,c,P,h)),H.D0J(0),L=H.q7n(F,n?0:S),H.D0J(27);var j=H.S40(18,8,209,8);E=F+Math.round(c*P)-(n?"0"*j:S)}else H.D0J(26),F=H.S40(m,D,c,P,h),L=Math.round(F)+(n?0:S),E=Math.round(F+c*P)-(n?0:S);E-L<2&&(H.D0J(0),E=H.S40(L,1)),L%1==(N=n?0:.5)&&(L+=.5),E%1==N&&(E+=.5),w.moveTo(E,f),x!=f&&n&&!D&&M[I+1]&&w.moveTo(E,Math.max(_,Math.min(f,M[I+1]))),w.lineTo(E,_),w.lineTo(L,_),n&&h?(k[I]>_||0===I)&&w.lineTo(L,Math.min(f,k[I])):n&&!D&&"clustered"==s?I>0&&k[I-1]&&k[I-1]>_&&w.lineTo(L,Math.min(f,k[I-1])):n&&!D?(d>_||0===I)&&w.lineTo(L,Math.min(f,d)):w.lineTo(L,f),d=_,m+=A,("clustered"!=s||n)&&(k[I]=_)}}else d=f,m+=T.layout.candleWidth;n?("a","uto",w.strokeStyle=i&&"auto"!=i?i:T.defaultColor,w.stroke()):(w.fillStyle=i&&"auto"!=i?i:T.defaultColor,w.fill()),w.closePath()}},t.ChartEngine.prototype.scatter=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=N;a=(i=e.chart).dataSegment,r=new Array(a.length),n=this.chart.context,this.canvasColor("stx_scatter_chart"),t||(t={}),s=t.field||i.defaultPlotField,o=t.yAxis||e.yAxis,l=t.subField||i.defaultPlotField||"Close",this.startClip(e.name),n.beginPath(),n.lineWidth=t.lineWidth||4,t.highlight&&(n.lineWidth*=2),!t.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),t.color&&(n.strokeStyle=t.color),h=o.top,c=o.bottom,u=this.layout.candleWidth,b.H6P(33);var C=b.S40(5,17,18,7);b.H6P(18);var S=b.S40(7,1,6);d=e.left-"0.5"*C*u+this.micropixels-S;for(var w=0;w<=a.length;w++)if(b.H6P(14),d+=b.S40(2,u),u=this.layout.candleWidth,b.H6P(14),d+=b.q7n(2,u),p=a[w]){if(p.candleWidth){b.D0J(34);var D=b.S40(0,13,20,3,52);d+=(p.candleWidth-u)/D,u=p.candleWidth}if(!p.projection){i.transformFunc&&o==i.panel.yAxis&&p.transform&&(p=p.transform),(m=p[s])&&void 0!==m[l]&&(m=m[l]),m instanceof Array||(m=[m]),"Scatter"in p&&(m=p.Scatter);for(var k=0;k<m.length;k++)(m[k]||0===m[k])&&(g=m[k],f=0,m[k]instanceof Array&&(g=m[k][0],f=m[k][2]),y=o.semiLog?o.height*(1-(Math.log(Math.max(g,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-g)*o.multiplier,o.flipped?(b.D0J(7),y=b.q7n(y,c)):y+=h,y<h||y>c||(v=2,f&&(b.H6P(1),v=b.q7n(f,u)),b.D0J(7),n.moveTo(b.q7n(v,d),y),b.D0J(0),n.lineTo(b.q7n(d,v),y),r[w]=y))}}return n.stroke(),n.closePath(),x={colors:[n.strokeStyle],cache:r},this.endClip(),n.lineWidth=1,x}},o=e=>{var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine.drawingTools={},t.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:"#7DA6F5",currentColor:"auto",axisLabel:!0,fibonacci:{trend:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:1.272,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:1.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:2.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},annotation:{font:{style:null,size:null,weight:null,family:null}}},t.ChartEngine.registerDrawingTool=function(e,i){t.ChartEngine.drawingTools[e]=i},t.ChartEngine.prototype.setDrawingContainer=function(e){this.drawingContainer=e},t.ChartEngine.prototype.exportDrawings=function(){var e;N.D0H(),e=[];for(var t=0;t<this.drawingObjects.length;t++)e.push(this.drawingObjects[t].serialize());return e},t.ChartEngine.prototype.abortDrawings=function(e){var t;!1!==e&&(e=!0);for(var i=this.drawingObjects.length-1;i>=0;i--)(t=this.drawingObjects[i]).abort(!0),!e&&t.permanent||this.drawingObjects.splice(i,1)},t.ChartEngine.prototype.importDrawings=function(e){var i,a,r;if(t.Drawing)for(var n=0;n<e.length;n++)"fibonacci"==(i=e[n]).name&&(i.name="retracement"),(a=t.ChartEngine.drawingTools[i.name])||t.Drawing[i.name]&&(a=t.Drawing[i.name],t.ChartEngine.registerDrawingTool(i.name,a)),a&&((r=new a).reconstruct(this,i),this.drawingObjects.push(r))},t.ChartEngine.prototype.clearDrawings=function(e,i){var a,r;N.a9S(),!1!==i&&(i=!0),a=this.exportDrawings(),this.abortDrawings(i),e?this.undoStamps=[]:this.undoStamp(a,this.exportDrawings()),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),this.draw(),(r=this.controls.mSticky)&&(r.style.display="none",r.children[0].innerHTML="")},t.ChartEngine.prototype.createDrawing=function(e,i){var a,r;if(t.Drawing){for(var n in a=new t.Drawing[e],N.D0H(),a.reconstruct(this,i),(r=new t.Drawing[e]).stx=this,r.copyConfig(),r)a[n]=a[n]||r[n];return this.drawingObjects.push(a),this.draw(),a}},t.ChartEngine.prototype.removeDrawing=function(e){for(var t=0;t<this.drawingObjects.length;t++)if(this.drawingObjects[t]==e)return this.drawingObjects.splice(t,1),this.changeOccurred("vector"),void this.draw()},t.ChartEngine.prototype.undo=function(){var e,i,a,r,n;e="un",e+="do",i="u",i+="nd",i+="o",this.runPrepend(i,arguments)||(this.activeDrawing&&(a="stx",a+="_crosshair",r="st",r+="x_cr",r+="ossha",r+="ir_drawing",n="stx",n+="_cr",n+="osshair",this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),t.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace("stx_crosshair_drawing",n),this.controls.crossY.classList.replace(r,a),t.ChartEngine.drawingLine=!1),this.runAppend(e,arguments))},t.ChartEngine.prototype.undoStamp=function(e,t){this.undoStamps.push(e),this.dispatch("undoStamp",{before:e,after:t,stx:this})},t.ChartEngine.prototype.undoLast=function(){this.activeDrawing?this.undo():this.undoStamps.length&&(this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred("vector"),this.draw())},t.ChartEngine.prototype.addDrawing=function(e){var t;t=this.exportDrawings(),this.drawingObjects.push(e),N.D0H(),this.undoStamp(t,this.exportDrawings())},t.ChartEngine.prototype.repositionDrawing=function(e,i){var a,r,n;a=this.panels[e.panelName],N.D0H(),r=this.adjustIfNecessary(a,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),a)),n=this.chart.tempCanvas,t.clearCanvas(n,this),i?(this.drawingSnapshot=this.exportDrawings(),e.render(n.context)):(e.reposition(n.context,e.repositioner,this.crosshairTick,r),this.drawingSnapshot&&this.undoStamp(t.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null),e.measure&&e.measure()},t.ChartEngine.prototype.activateRepositioning=function(e){N.D0H(),this.repositioningDrawing=e,e&&(this.draw(),this.repositionDrawing(e,!0)),this.chart.tempCanvas.style.display=e?"block":"none"},t.ChartEngine.prototype.activateDrawing=function(e,i){var a;function r(e){var t;e.layout.studies&&(t=e.layout.studies[i.name])&&!t.overlay&&delete e.overlays[t.name]}return"b","lo","ck",i||(i=this.currentPanel),e?((a=t.ChartEngine.drawingTools[e])||t.Drawing[e]&&(a=t.Drawing[e],t.ChartEngine.registerDrawingTool(e,a)),a&&(this.activeDrawing=new a,this.activeDrawing.construct(this,i),!this.charts[i.name]&&this.activeDrawing.chartsOnly)?(this.activeDrawing=null,r(this),!1):(this.chart.tempCanvas.style.display="block",this.controls.drawOk&&(this.controls.drawOk.style.display="none"),r(this),!0)):(this.activeDrawing=null,this.chart.tempCanvas.style.display="none",r(this),!1)},t.ChartEngine.prototype.drawingClick=function(e,i,a){var r,n,s;if(t.Drawing&&(N.a9S(),e&&""===this.openDialog&&(this.activeDrawing||this.activateDrawing(this.currentVectorParameters.vectorType,e))))return!!this.activeDrawing&&(this.userPointerDown&&!this.activeDrawing.dragToDraw?void(t.ChartEngine.drawingLine||this.activateDrawing(null)):(r=this.tickFromPixel(i,e.chart),n=this.panels[this.activeDrawing.panelName],s=this.adjustIfNecessary(n,r,this.valueFromPixel(a,n)),this.magnetizedPrice&&(s=this.adjustIfNecessary(n,r,this.magnetizedPrice)),this.activeDrawing.click(this.chart.tempCanvas.context,r,s)?this.activeDrawing&&(t.ChartEngine.drawingLine=!1,t.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair")):("stx","_cross","h","air_drawing","stx","_cro","s","shair","dra","wing",this.changeOccurred("drawing"),t.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace("stx_crosshair","stx_crosshair_drawing"),this.controls.crossY.classList.replace("stx_crosshair","stx_crosshair_drawing")),!0))},t.ChartEngine.prototype.rightClickDrawing=function(e,t){var i;this.runPrepend("rightClickDrawing",arguments)||e.permanent||(this.callbackListeners.drawingEdit.length?this.dispatch("drawingEdit",{stx:this,drawing:e,forceEdit:t}):(e.abort()||(i=this.exportDrawings(),this.removeDrawing(e),this.undoStamp(i,this.exportDrawings())),this.changeOccurred("vector")),this.runAppend("rightClickDrawing",arguments))},t.ChartEngine.prototype.magnetize=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k=N;if(e="magn",e+="etize",i="H",i+="igh",a="fr",a+="e",a+="e",a+="form",r="proj",r+="ection",this.magnetizedPrice=null,this.preferences.magnet&&!this.runPrepend("magnetize",arguments)&&!this.repositioningDrawing&&(n=this.currentVectorParameters.vectorType)&&n!=r&&n!=a&&("annotation"!=n&&"callout"!=n||!t.ChartEngine.drawingLine)&&(o=(s=this.currentPanel).chart,!((l=this.crosshairTick)>o.dataSet.length)&&(h=o.dataSet[l]))){(c=o.transformFunc&&s.yAxis===o.yAxis)&&h.transform&&(h=h.transform),d=this.getRenderedItems(),p=["Open",i,"Low","Close"],this.magneticHold&&this.activeDrawing&&this.activeDrawing.penDown?(m="H",m+="igh",d=-1!=p.indexOf(this.magneticHold)&&-1!=d.indexOf(m)?p:[this.magneticHold]):this.magneticHold=null,g=1e9,f=parseFloat(this.preferences.magnet);for(var M=0;M<d.length;M++)if(y=h[d[M]],v=this.getYAxisByField(s,d[M]),(x=t.existsInObjectChain(h,d[M]))&&(y=x.obj[x.member]),(y||0===y)&&(b=this.pixelFromTransformedValue(y,s,v),Math.abs(this.cy-b)<g)){if(g=Math.abs(this.cy-b),f&&f<=g)continue;this.magnetizedPrice=c?this.valueFromPixel(b,s):y,u=b,this.magneticHold=d[M]}C=this.pixelFromTick(l,o),S=u,t.clearCanvas(o.tempCanvas,this),(w=o.tempCanvas.context).beginPath(),w.lineWidth=1,k.D0J(22);var T=k.S40(4,8,108,204);k.D0J(35);var A=k.q7n(3,10,18,18,135);D=Math.max(this.layout.candleWidth,T)/A,w.arc(C,S,Math.min(D,8),0,2*Math.PI,!1),w.fillStyle="#398dff",k.D0H(),w.strokeStyle="#398dff",w.fill(),w.stroke(),w.closePath(),o.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove("stx-draggable"),this.activeDrawing&&this.activeDrawing.move(w,this.crosshairTick,this.magnetizedPrice),this.runAppend(e,arguments)}},t.ChartEngine.prototype.changeVectorType=function(e){this.currentVectorParameters.vectorType=e,t.Drawing&&t.Drawing.initializeSettings(this,e),t.ChartEngine.drawingLine&&this.undo(),N.D0H(),this.insideChart&&this.doDisplayCrosshairs()},t.ChartEngine.prototype.changeVectorParameter=function(e,t){var i;if("f","o","nt","p","x","tr","ue","axi","sL","abel","axisLabel"==e)t="true"===t.toString()||Number(t);else if("lineWidth"==e)t=Number(t);else if("fontSize"==e){N.D0J(36);var a=N.q7n(19,0,9);t=parseInt(t,a)+"px"}return(void 0!==(i=this.currentVectorParameters)[e]||"font"==e.substr(0,4)&&("fam","i","ly","family"==(e=e.substr(4).toLowerCase())&&"default"==t.toLowerCase()&&(t=null),void 0!==(i=i.annotation.font)[e]))&&(i[e]=t,!0)},t.ChartEngine.prototype.drawVectors=function(){var e,t,i,a,r,n,s;if(e="draw",e+="Vecto",e+="rs",N.D0H(),t="d",t+="raw",t+="V",t+="ectors",!this.vectorsShowing&&!this.runPrepend(t,arguments)){if(this.vectorsShowing=!0,!this.chart.hideDrawings&&!this.highlightedDraggable){for(i={},r=0;r<this.drawingObjects.length;r++)(n=this.drawingObjects[r]).hidden||this.repositioningDrawing!==n&&(a=n.panelName,this.panels[n.panelName]&&!this.panels[n.panelName].hidden&&(i[a]||(i[a]=[]),i[a].push(n)));for(a in i){for(this.startClip(a),s=i[a],r=0;r<s.length;r++)s[r].render(this.chart.context);this.endClip()}}this.runAppend(e,arguments)}},t.ChartEngine.prototype.adjustDrawings=function(){for(var e,t=0;t<this.drawingObjects.length;t++)e=this.drawingObjects[t],this.panels[e.panelName]&&e.adjust()},t.Drawing=t.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},t.Drawing.getDrawingParameters=function(e,i){var a,r,n,s;try{a=new t.Drawing[i]}catch(e){}if(!a)return null;a.stx=e,a.copyConfig(!0),r={},n=a.configs;for(var o=0;o<n.length;o++)r[n[o]]=a[n[o]];return s=e.canvasStyle("stx_annotation"),N.D0H(),s&&r.font&&(r.font.size=s.fontSize,r.font.family=s.fontFamily,r.font.style=s.fontStyle,r.font.weight=s.fontWeight),r},t.Drawing.saveConfig=function(e,i){var a,r;i&&((a=e.preferences).drawings||(a.drawings={}),a.drawings[i]={},(r=new t.Drawing[i]).stx=e,t.Drawing.copyConfig(r),r.configs.forEach((function(e){a.drawings[i][e]=r[e]})),e.changeOccurred("preferences"))},t.Drawing.restoreDefaultConfig=function(e,i,a){a?e.preferences.drawings=null:e.preferences.drawings[i]=null,N.a9S(),e.changeOccurred("preferences"),e.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),e.currentVectorParameters.vectorType=i},t.Drawing.initializeSettings=function(e,i){var a,r;(a=t.Drawing[i])&&(r=new a).initializeSettings&&r.initializeSettings(e)},t.Drawing.updateSource=function(e,t,i,a){var r,n;if("vect","o","r",t){for(var s in r=!1,e.drawingObjects)(n=e.drawingObjects[s]).field&&(i?n.field==t?(n.field=i,r=!0):n.field.indexOf(t)>-1&&-1==n.field.indexOf(t+"-")&&(n.field=n.field.replace(t,i),r=!0):n.field.split("--\x3e")[0]!=t&&n.panelName!=t||(n.panelName=a,r=!0));N.D0H(),r&&e.changeOccurred("vector")}},t.Drawing.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e)},t.Drawing.copyConfig=function(e,i){var a,r,n,s,o;for(a=e.stx.currentVectorParameters,r=e.configs,n=0;n<r.length;n++)"par","a","meters","color"==(s=r[n])?e.color=a.currentColor:"parameters"==s?e.parameters=t.clone(a.fibonacci):"font"==s?e.font=t.clone(a.annotation.font):e[s]=a[s];if(i&&(o=e.stx.preferences,N.D0H(),o&&o.drawings))for(t.extend(e,o.drawings[a.vectorType]),n=0;n<r.length;n++)"f","o","n","t","color"==(s=r[n])?a.currentColor=e.color:"parameters"==s?a.fibonacci=t.clone(e.parameters):"font"==s?a.annotation.font=t.clone(e.font):a[s]=e[s]},t.Drawing.prototype.dragToDraw=!1,t.Drawing.prototype.permanent=!1,t.Drawing.prototype.chartsOnly=!1,t.Drawing.prototype.abort=function(e){},t.Drawing.prototype.measure=function(){},t.Drawing.prototype.construct=function(e,t){this.stx=e,this.panelName=t.name},t.Drawing.prototype.render=function(e){console.warn("must implement render function!")},t.Drawing.prototype.click=function(e,t,i){console.warn("must implement click function!")},t.Drawing.prototype.move=function(e,t,i){console.warn("must implement move function!")},t.Drawing.prototype.reposition=function(e,t,i,a){},t.Drawing.prototype.intersected=function(e,t,i){console.warn("must implement intersected function!")},t.Drawing.prototype.reconstruct=function(e,t){console.warn("must implement reconstruct function!")},t.Drawing.prototype.serialize=function(){N.a9S(),console.warn("must implement serialize function!")},t.Drawing.prototype.adjust=function(){N.D0H(),console.warn("must implement adjust function!")},t.Drawing.prototype.highlight=function(e){return N.a9S(),(e&&!this.highlighted||!e&&this.highlighted)&&(this.highlighted=e),this.highlighted},t.Drawing.prototype.littleCircleRadius=function(){return 6,6},t.Drawing.prototype.littleCircle=function(e,i,a,r){var n,s;this.permanent||(n=this.stx.defaultColor,s=t.chooseForegroundColor(n),e.beginPath(),N.D0H(),e.lineWidth=1,e.arc(i,a,this.littleCircleRadius(),0,2*Math.PI,!1),e.fillStyle=r?n:s,e.strokeStyle=n,e.setLineDash([]),e.fill(),e.stroke(),e.closePath())},t.Drawing.prototype.rotator=function(e,t,i,a){var r,n,s,o=N;this.permanent||(r=this.littleCircleRadius(),n=this.stx.defaultColor,e.beginPath(),o.H6P(10),e.lineWidth=o.q7n("2",0),a||(e.globalAlpha=.5),o.H6P(0),s=o.S40(4,r),e.arc(t,i,s,0,3*Math.PI/2,!1),o.D0J(37),e.moveTo(o.S40(s,t,2),o.S40(i,2,o.H6P(0))),o.D0J(0),e.lineTo(o.S40(t,s),i),o.H6P(36),e.lineTo(o.q7n(s,t,2),o.S40(i,2,o.D0J(0))),o.H6P(7),e.moveTo(o.q7n(2,t),o.S40(2,i,s,o.H6P(15))),o.H6P(7),e.lineTo(t,o.q7n(s,i)),o.D0J(38),e.lineTo(o.q7n("2",32,t),o.q7n(i,2,s,o.D0J(39))),e.strokeStyle=n,e.stroke(),e.closePath(),o.D0J(40),e.globalAlpha=o.S40(0,"1"))},t.Drawing.prototype.mover=function(e,t,i,a){var r,n,s,o,l=N;if(!this.permanent){r=this.littleCircleRadius(),n=this.stx.defaultColor,l.H6P(40),s=l.q7n(64,"5"),l.H6P(0),o=l.q7n(r,1),e.save(),l.D0J(40),e.lineWidth=l.S40(32,"2"),e.strokeStyle=n,e.translate(t,i),a||(e.globalAlpha=.5);for(var h=0;h<4;h++)e.rotate(Math.PI/2),e.beginPath(),e.moveTo(0,o),l.H6P(0),e.lineTo(0,l.S40(o,s)),l.D0J(15),e.moveTo(-2,l.q7n(s,o,2)),l.H6P(0),e.lineTo(0,l.S40(o,s)),l.H6P(15),e.lineTo(2,l.S40(s,o,2)),e.closePath(),e.stroke();l.a9S(),e.globalAlpha=1,e.restore()}},t.Drawing.prototype.resizer=function(e,t,i,a){var r,n,s,o,l=N;if(!this.permanent){r=this.littleCircleRadius(),n=this.stx.defaultColor,l.a9S(),l.H6P(22);var h=l.q7n(10,16,100,155);l.H6P(41);var c=l.q7n(6,15,92);s=h*Math.sqrt(c),l.H6P(0),o=l.q7n(r,1),e.save(),e.lineWidth=2,e.strokeStyle=n,e.translate(t,i),e.rotate(-t*i/Math.abs(t*i)*Math.PI/4),a||(e.globalAlpha=.5);for(var u=0;u<2;u++)e.rotate(Math.PI),e.beginPath(),e.moveTo(0,o),l.H6P(0),e.lineTo(0,l.q7n(o,s)),l.D0J(15),e.moveTo(-2,l.S40(s,o,2)),l.D0J(0),e.lineTo(0,l.q7n(o,s)),l.H6P(15),e.lineTo(2,l.q7n(s,o,2)),e.closePath(),e.stroke();e.globalAlpha=1,e.restore()}},t.Drawing.prototype.pointIntersection=function(e,t,i,a){if(!this.stx.panels[this.panelName])return!1;if(a){if(e>=i.cx0&&e<=i.cx1&&t>=i.cy0&&t<=i.cy1)return!0}else if(e>=i.x0&&e<=i.x1&&t>=Math.min(i.y0,i.y1)&&t<=Math.max(i.y0,i.y1))return!0;return!1},t.Drawing.prototype.setPoint=function(e,i,a,r){var n,s,o,l,h,c=N;n=null,s=null,"number"==typeof i?n=i:i.length>=8?s=i:n=Number(i),(a||0===a)&&(c.H6P(0),this[c.q7n("v",e)]=a),null!==n?(o=this.stx.dateFromTick(n,r,!0),c.D0J(0),this[c.q7n("tzo",e)]=o.getTimezoneOffset(),c.D0J(0),this[c.S40("d",e)]=t.yyyymmddhhmmssmmm(o),c.D0J(0),this[c.S40("p",e)]=[n,a]):null!==s&&("t","z","o",o=t.strToDateTime(s),this["tzo"+e]||0===this["tzo"+e]||(c.D0J(0),this[c.q7n("tzo",e)]=o.getTimezoneOffset()),c.D0J(0),this[c.S40("d",e)]=s,l=this["tzo"+e]-o.getTimezoneOffset(),o.setMinutes(o.getMinutes()+l),h=!1,"freeform"==this.name||t.ChartEngine.isDailyInterval(this.stx.layout.interval)||o.getHours()||o.getMinutes()||o.getSeconds()||o.getMilliseconds()||(h=!0),c.H6P(0),this[c.q7n("p",e)]=[this.stx.tickFromDate(t.yyyymmddhhmmssmmm(o),r,null,h),a])},t.Drawing.prototype.getLineColor=function(e){var i,a,r,n,s,o,l,h,c;if(e||(e=this.color),i=this.stx,N.D0H(),a=e,this.highlighted)"st","x_highli","ght_vector",a=i.getCanvasColor("stx_highlight_vector");else if(t.isTransparent(a))a=i.defaultColor;else if("auto"==a&&(a=i.defaultColor,this.field)){for(r in i.layout.studies)if(s=(n=i.layout.studies[r]).outputs[n.outputMap[this.field]]){a=s.color||s;break}for(r in i.chart.seriesRenderers){l=i.chart.seriesRenderers[r];for(var u=0;u<l.seriesParams.length;u++){if("-","-",">",(c=(h=l.seriesParams[u]).field)||l.highLowBars||(c=this.defaultPlotField||"Close"),h.symbol&&h.subField&&(c+="--\x3e"+h.subField),this.field==c){a=h.color;break}h.field&&h.field==this.field.split("--\x3e")[0]&&(o=h.color)}}o&&(a=o)}return"auto"==a&&(a=i.defaultColor),a},t.Drawing.BaseTwoPoint=function(){this.p0=null,this.p1=null,this.color=""},t.inheritsFrom(t.Drawing.BaseTwoPoint,t.Drawing),t.Drawing.BaseTwoPoint.prototype.configs=[],t.Drawing.BaseTwoPoint.prototype.lineIntersection=function(e,i,a,r,n,s,o){var l,h,c;return n||(n=this.p0),s||(s=this.p1),l=this.stx,!(!n||!s)&&(void 0!==(h=t.convertBoxToPixels(l,this.panelName,a)).x0&&(c={x0:n[0],x1:s[0],y0:n[1],y1:s[1]},o||(c=t.convertBoxToPixels(l,this.panelName,c)),t.boxIntersects(h.x0,h.y0,h.x1,h.y1,c.x0,c.y0,c.x1,c.y1,r)))},t.Drawing.BaseTwoPoint.prototype.boxIntersection=function(e,t,i){return!(!this.p0||!this.p1)&&(N.D0H(),!(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))&&!(i.y1>Math.max(this.p0[1],this.p1[1])||i.y0<Math.min(this.p0[1],this.p1[1])))},t.Drawing.BaseTwoPoint.prototype.accidentalClick=function(e,t){var i,a,r,n,s,o,l,h=N;if(i=this.stx.panels[this.panelName],a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(e,i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,e,t),h.H6P(7),o=Math.abs(h.q7n(a,r)),h.H6P(7),l=Math.abs(h.q7n(n,s)),h.D0J(42),Math.sqrt(h.S40(o,l,o,l))<10)return this.penDown=!1,this.dragToDraw&&this.stx.undo(),!0},t.Drawing.BaseTwoPoint.prototype.click=function(e,t,i){var a;return N.D0H(),this.copyConfig(),a=this.stx.panels[this.panelName],this.penDown?this.accidentalClick(t,i)?this.dragToDraw:(this.setPoint(1,t,i,a.chart),this.penDown=!1,!0):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1)},t.Drawing.BaseTwoPoint.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart))},t.Drawing.BaseTwoPoint.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),N.a9S(),this.p1=[t,i],this.render(e))},t.Drawing.BaseTwoPoint.prototype.measure=function(){var e,i,a;N.D0H(),this.p0&&this.p1&&(this.stx.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0,this.name),(i=(e=this.stx.controls.mSticky)&&e.querySelector(".mStickyInterior"))&&((a=[]).push(t.capitalize(this.name)),this.getYValue&&a.push(this.field||this.stx.defaultPlotField||"Close"),a.push(i.innerHTML),i.innerHTML=a.join("<br>")))},t.Drawing.BaseTwoPoint.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],N.a9S(),n=t.tick-i,s=t.value-a,"move"==t.action?(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.setPoint(1,t.p1[0]-n,t.p1[1]-s,r.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],r.chart),this.setPoint(1,this.p1[0],this.p1[1],r.chart),this.render(e)))},t.Drawing.BaseTwoPoint.prototype.drawDropZone=function(e,t,i,a,r){var n,s,o,l,h,c=N;(n=this.stx.panels[this.panelName])&&(s=n.left,o=n.width,(a||0===a)&&(s=this.stx.pixelFromTick(a,n.chart)),(r||0===r)&&(o=this.stx.pixelFromTick(r,n.chart)),l=this.stx.pixelFromPrice(t,n),h=this.stx.pixelFromPrice(i,n),e.fillStyle="#008000",c.D0J(1),e.globalAlpha=c.q7n(1,"0.2"),c.D0J(7),e.fillRect(s,l,c.q7n(s,o),c.S40(l,h)),c.D0H(),e.globalAlpha=1)},t.Drawing.annotation=function(){var e=N;e.a9S(),this.name="annotation",this.arr=[],this.w=0,e.H6P(1),this.h=e.S40(1,"0"),this.padding=4,this.text="",this.ta=null,e.H6P(7),this.fontSize=e.q7n(0,"0"),this.font={}},t.inheritsFrom(t.Drawing.annotation,t.Drawing.BaseTwoPoint),t.Drawing.annotation.prototype.getFontString=function(){var e,t;for(var i in this.fontDef={style:null,weight:null,size:"12px",family:null},(e=this.stx.canvasStyle("stx_annotation"))&&(e.fontStyle&&(this.fontDef.style=e.fontStyle),e.fontWeight&&(this.fontDef.weight=e.fontWeight),e.fontSize&&(this.fontDef.size=e.fontSize),e.fontFamily&&(this.fontDef.family=e.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),N.a9S(),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="",t=!0,this.fontDef)this.fontDef[i]&&(t?t=!1:this.fontString+=" ",this.fontString+=this.fontDef[i])},t.Drawing.annotation.prototype.configs=["color","font"],t.Drawing.annotation.prototype.measure=function(){},t.Drawing.annotation.prototype.render=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,m=N;if(!this.ta&&(t=this.stx.panels[this.panelName])){i=this.stx.pixelFromTick(this.p0[0],t.chart),a=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),e.font=this.fontString,e.textBaseline="middle",r=i,m.D0H(),n=a,s=this.w,o=this.h,l=this.getLineColor(),this.stem&&(this.stem.d?(h=this.stx.pixelFromTick(this.stem.t),u=this.stx.pixelFromValueAdjusted(t,this.stem.t,this.stem.v),m.D0J(43),c=m.S40(s,2,r),m.H6P(43),d=m.S40(o,2,n)):this.stem.x&&(h=r,u=n,r+=this.stem.x,n+=this.stem.y,m.H6P(43),c=m.S40(s,2,r),m.H6P(43),d=m.S40(o,2,n)),e.beginPath(),this.borderColor?e.strokeStyle=this.borderColor:e.strokeStyle=l,e.moveTo(h,u),e.lineTo(c,d),e.stroke()),p=e.lineWidth,this.highlighted?(this.stx.canvasColor("stx_annotation_highlight_bg",e),m.D0J(7),e.fillRect(m.q7n(p,r),m.q7n(o,p,n,2,m.D0J(44)),m.q7n(2,p,s,m.D0J(45)),m.q7n(2,p,o,m.H6P(45)))):this.fillColor?(e.fillStyle=this.fillColor,m.H6P(46),e.fillRect(r,m.S40(n,2,o),s,o)):this.stem&&(e.fillStyle=this.stx.containerColor,m.D0J(46),e.fillRect(r,m.q7n(n,2,o),s,o)),this.borderColor&&(e.beginPath(),e.strokeStyle=this.highlighted?this.stx.getCanvasColor("stx_highlight_vector"):this.borderColor,m.H6P(7),e.rect(m.q7n(p,r),m.q7n(o,p,n,2,m.H6P(44)),m.S40(2,p,s,m.H6P(45)),m.q7n(o,p,"2",m.H6P(47))),e.stroke()),this.highlighted?this.stx.canvasColor("stx_annotation_highlight",e):e.fillStyle=l,m.D0J(33);var g=m.S40(11,1,5,17);if(n+=this.padding/g,!this.ta)for(var f=0;f<this.arr.length;f++)e.fillText(this.arr[f],r+this.padding,n-o/2+this.fontSize/2),n+=this.fontSize+2;e.textBaseline="alphabetic"}},t.Drawing.annotation.prototype.onChange=function(e){},t.Drawing.annotation.prototype.edit=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f=N;if("p","x","annota","t","io","n",(a=this.stx.panels[this.panelName])&&(r=this.stx.controls.annotationSave,n=this.stx.controls.annotationCancel,r&&n)){var y,v,x;if(s=this.stx,o=this.ta,s.editingAnnotation=!0,s.undisplayCrosshairs(),s.openDialog="annotation",o||("absolu","te","p","lac","eholde","r","w","r","a","p","stx_anno","tation","TE","XTARE","A",(o=this.ta=document.createElement("TEXTAREA")).className="stx_annotation",o.onkeyup=D(this),o.onmouseup=(y=s,f.D0H(),function(e){f.D0H(),y.manageTouchAndMouse&&t.ChartEngine.drawingLine&&y.mouseup(e)}),o.setAttribute("wrap","hard"),t.isIOS7or8&&o.setAttribute("placeholder","Enter Text"),s.chart.container.appendChild(o),o.style.position="absolute",o.style.width="100px",o.style.height="20px",o.value=this.text,t.touchDevice&&(o.ontouchstart=function(e){f.a9S(),e.stopPropagation()})),l=this,o.oninput=function(e){f.D0H(),"historyUndo"!=e.inputType&&"historyRedo"!=e.inputType&&l.onChange(e)},o.style.font=this.fontString,this.color&&("au","t","o","transparent"==this.color||"auto"==this.color?(h=getComputedStyle(o))&&t.isTransparent(h.backgroundColor)?o.style.color=s.defaultColor:("#","0","0","0",o.style.color="#000"):o.style.color=this.color),c=s.pixelFromTick(this.p0[0],a.chart),u=s.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),o.style.left=c+140<s.chart.canvasRight?c+"px":s.chart.canvasRight-200+"px",o.style.top=u+60<s.chart.canvasHeight?u-(isNaN(this.h)?this.defaultHeight:this.h/2)+"px":u-60+"px","callout"==this.name){"p","x",694941385,-666431109,d=2;for(var b=1;694941385!==f.Z2Z(b.toString(),b.toString().length,31029);b++){f.H6P(0);var C=f.S40(46,18);o.style.left=t.stripPX(o.style.left)*(-isNaN(this.w)?this.w+("0"<<C):this.defaultWidth)%"",d+=2}-666431109!==f.Z2Z(d.toString(),d.toString().length,3178)&&(o.style.left=t.stripPX(o.style.left)*(-isNaN(this.w)?this.w+0:this.defaultWidth)%""),f.H6P(51);var S=f.q7n(5,1,0,27,20);o.style.left=t.stripPX(o.style.left)-(isNaN(this.w)?this.defaultWidth:this.w/S)+"px"}if(t.safeClickTouch(r,(v=this,f.D0H(),function(e){var i;""!==v.ta.value&&(v.text=v.ta.value,(i=v.stx).editingAnnotation=!1,v.adjust(),i.drawingSnapshot?i.undoStamp(t.shallowClone(i.drawingSnapshot),i.exportDrawings()):i.addDrawing(v),i.undo(),i.cancelTouchSingleClick=!0,i.changeOccurred("vector"))})),t.safeClickTouch(n,(x=this,function(e){var t;t=x.stx,f.a9S(),t.editingAnnotation=!1,t.undo(),t.cancelTouchSingleClick=!0})),D(this)(),r.style.display="inline-block",n.style.display="inline-block",i&&(s.drawingSnapshot=s.exportDrawings(),this.hidden=!0,s.draw(),s.activeDrawing=this,t.ChartEngine.drawingLine=!0,e=s.chart.tempCanvas.context,s.chart.tempCanvas.style.display="block",this.w=o.clientWidth,this.h=o.clientHeight,t.clearCanvas(e.canvas,s),this.render(e),this.edit(e)),o.focus(),t.isAndroid&&!t.is_chrome&&!t.isFF){this.priorBottom=s.chart.container.style.bottom,400,f.D0J(32);var w=f.S40(58,6,7);(p=s.resolveY(u)+w)>t.pageHeight()-400&&(m=t.pageHeight()-p,f.H6P(7),g=f.q7n(m,400),f.D0J(0),s.chart.container.style.bottom=f.S40(g,"px"))}}function D(e){return f.D0H(),function(i){var a,s,o,l,h,c,u,d;if("p","x","p","x",i)switch(i.keyCode){case 27:return void e.stx.undo()}f.a9S(),a=e.stx,o=(s=e.ta).value.split("\n"),f.H6P(21),l=f.q7n("0",0),a.chart.context.font=e.fontString;for(var p=0;p<o.length;p++)(h=a.chart.context.measureText(o[p]).width)>l&&(l=h);f.D0J(15);var m=f.S40(12,0,11);f.H6P(7);var g=f.q7n(20,23);c=(o.length+m)*(e.fontSize+g),l<50&&(l=50),f.H6P(37),s.style.width=f.q7n("px",l,30),f.H6P(0),s.style.height=f.q7n(c,"px"),u=parseInt(t.stripPX(s.style.top),10),d=t.stripPX(s.style.left),l=s.clientWidth,c=s.clientHeight,d+l+100<e.stx.chart.canvasWidth?(f.H6P(0),r.style.top=f.S40(u,"px"),f.D0J(0),n.style.top=f.S40(u,"px"),f.D0J(48),r.style.left=f.S40("px",10,l,d),f.D0J(48),n.style.left=f.S40("px",60,l,d)):u+c+30<e.stx.chart.canvasHeight?("p","x","p","x",f.D0J(48),r.style.top=f.S40("px",10,c,u),f.H6P(48),n.style.top=f.q7n("px",10,c,u),f.D0J(0),r.style.left=f.S40(d,"px"),f.H6P(49),n.style.left=f.S40("px",d,0,"50")):("p","x","p","x","p","x",f.D0J(36),r.style.top=f.S40("px",u,35),f.D0J(50),n.style.top=f.q7n(u,"35","px",0),f.H6P(0),r.style.left=f.S40(d,"px"),f.D0J(37),n.style.left=f.S40("px",d,50))}}},t.Drawing.annotation.prototype.click=function(e,t,i){var a;if(!this.stx.overXAxis&&!this.stx.overYAxis)return a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,t,i,a.chart),this.adjust(),this.edit(e),!1},t.Drawing.annotation.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.render(e))},t.Drawing.annotation.prototype.intersected=function(e,i,a){var r,n,s,o,l,h,c,u=N;if(r=this.stx.panels[this.panelName],!this.p0)return null;n=this.stx.pixelFromTick(this.p0[0],r.chart),u.D0J(39);var d=u.q7n(19,3,15);u.D0J(52);var p=u.S40(112,6,19);return s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[d])-this.h/p,o=n+this.w,l=s+this.h,this.stem&&this.stem.x&&(n+=this.stem.x,o+=this.stem.x,s+=this.stem.y,l+=this.stem.y),h=this.stx.pixelFromTick(e,r.chart),c=this.stx.pixelFromValueAdjusted(r,e,i),h+a.r>=n&&h-a.r<=o&&c+a.r>=s&&c-a.r<=l&&(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:i})},t.Drawing.annotation.prototype.abort=function(){var e,i;e=this.stx.controls.annotationSave,i=this.stx.controls.annotationCancel,e&&(e.style.display="none"),i&&(i.style.display="none"),this.ta&&this.stx.chart.container.removeChild(this.ta),this.ta=null,this.stx.openDialog="",this.stx.showCrosshairs(),this.stx.editingAnnotation=!1,t.clearCanvas(this.stx.chart.tempCanvas,this.stx),!t.isAndroid||t.is_chrome||t.isFF||(this.stx.chart.container.style.bottom=this.priorBottom),t.fixScreen()},t.Drawing.annotation.prototype.reconstruct=function(e,i){this.stx=e,this.color=i.col,this.panelName=i.pnl,this.d0=i.d0,this.tzo0=i.tzo0,this.v0=i.v0,this.text=e.escapeOnSerialize?decodeURIComponent(i.text):i.text,this.stem=i.stem,this.borderColor=i.bc,N.a9S(),this.fillColor=i.bg,this.lineWidth=i.lw,this.pattern=i.ptrn,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.font||(this.font={}),this.adjust()},t.Drawing.annotation.prototype.serialize=function(){var e,i,a;if(N.a9S(),e={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text},this.font&&("f","l",i=t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"})),t.isEmpty(i)||(e.fnt=i)),this.stem){-1816893135,633140930,a=2;for(var r=1;-1816893135!==N.Z2Z(r.toString(),r.toString().length,40737);r++)e.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y},a+=2;633140930!==N.Z2Z(a.toString(),a.toString().length,61047)&&(e.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y})}return this.borderColor&&(e.bc=this.borderColor),this.fillColor&&(e.bg=this.fillColor),this.lineWidth&&(e.lw=this.lineWidth),this.pattern&&(e.ptrn=this.pattern),e},t.Drawing.annotation.prototype.renderText=function(){var e,i,a,r,n,s,o=N;if(this.getFontString(),e=this.stx.panels[this.panelName]){this.arr=this.text.split("\n"),i=0,this.stx.chart.context.font=this.fontString;for(var l=0;l<this.arr.length;l++)(a=this.stx.chart.context.measureText(this.arr[l]).width)>i&&(i=a);if(0===i)o.H6P(53),i=o.q7n(18,3,10,1,6)*this.defaultWidth;this.fontSize=t.stripPX(this.fontDef.size),o.H6P(7);var h=o.S40(32,34);r=this.arr.length*(this.fontSize+h),t.touchDevice&&(r+=5),this.w=i+2*this.padding,o.D0J(54);var c=o.q7n(158,0,17,7,9);this.h=r+this.padding*c,n=this.stx.pixelFromTick(this.p0[0],e.chart)+i,s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1])+r,this.p1=[this.stx.tickFromPixel(n,e.chart),this.stx.valueFromPixel(s,e)],this.stem&&this.stem.d&&(this.stem.t=this.stx.tickFromDate(this.stem.d,e.chart))}},t.Drawing.annotation.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.renderText())},t.Drawing.segment=function(){this.name="segment"},t.inheritsFrom(t.Drawing.segment,t.Drawing.BaseTwoPoint),t.Drawing.segment.prototype.render=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=N;if("vertic","al","sol","id",a=this.stx.panels[this.panelName]){if(r=this.stx.pixelFromTick(this.p0[0],a.chart),n=this.stx.pixelFromTick(this.p1[0],a.chart),s=this.stx.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(a,this.p1[0],this.p1[1]),l=this.lineWidth,h=this.getLineColor(),"none"==(c={pattern:this.pattern,lineWidth:l}).pattern&&(c.pattern="solid"),this.stx.plotLine(r,n,s,o,h,this.name,e,a,c),this.axisLabel&&!this.repositioner)if("horizontal"==this.name)this.stx.endClip(),u=this.p0[1],a.chart.transformFunc&&(u=a.chart.transformFunc(this.stx,a.chart,u)),u=a.yAxis.priceFormatter?a.yAxis.priceFormatter(this.stx,a,u):this.stx.formatYAxisPrice(u,a),this.stx.createYAxisLabel(a,u,s,h),this.stx.startClip(a.name);else if("vertical"==this.name&&this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw){if(d=this.stx.dateFromTick(this.p0[0],a.chart,!0),t.ChartEngine.isDailyInterval(this.stx.layout.interval))d.setHours(0,0,0,0);else{b.D0J(55);var C=b.q7n(5,985,5,802);m=d.getSeconds()*C+d.getMilliseconds(),i.Date&&this.stx.displayZone&&(p=new i.Date(d.getTime(),this.stx.displayZone),d=new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes()),d=new Date(d.getTime()+m))}1084531130,-678620398,g=2;for(var S=1;1084531130!==b.Z2Z(S.toString(),S.toString().length,45530);S++)f=t.mmddhhmm(t.yyyymmddhhmm(d)),g+=2;if(-678620398!==b.Z2Z(g.toString(),g.toString().length,10434)&&(f=t.mmddhhmm(t.yyyymmddhhmm(d))),a.chart.xAxis.formatter)f=a.chart.xAxis.formatter(d,this.name,null,null,f);else if(this.stx.internationalizer){if(0!==d.getHours()||0!==d.getMinutes()){y=this.stx.internationalizer.monthDay.format(d),b.H6P(52);b.S40(14488,1317,14);y+=" "+this.stx.internationalizer.hourMinute.format(d)}else y=this.stx.internationalizer.yearMonthDay.format(d);f=y}this.stx.endClip(),this.stx.createXAxisLabel({panel:a,txt:f,x:r,backgroundColor:h,color:null,pointed:!0,padding:2}),this.stx.startClip(a.name)}this.highlighted&&"horizontal"!=this.name&&"vertical"!=this.name&&(v="p0"==this.highlighted,x="p1"==this.highlighted,this.littleCircle(e,r,s,v),this.littleCircle(e,n,o,x))}},t.Drawing.segment.prototype.abort=function(){N.a9S(),this.stx.setMeasure(null,null,null,null,!1)},t.Drawing.segment.prototype.intersected=function(e,i,a){var r,n;if("h","or","izon","tal",!this.p0||!this.p1)return null;if("horizontal"!=(r=this.name)&&"vertical"!=r&&"gartley"!=r)for(var s in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[s][0],n[s][1],a))return N.D0J(0),this.highlighted=N.q7n("p",s),{action:"drag",point:"p"+s};return"horizontal"!=r&&"vertical"!=r||(r="line"),this.lineIntersection(e,i,a,r)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},t.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],t.Drawing.segment.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e),"none"==this.pattern&&-1==this.configs.indexOf("fillColor")&&(this.pattern="solid")},t.Drawing.segment.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},t.Drawing.segment.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.line=function(){N.D0H(),this.name="line"},t.inheritsFrom(t.Drawing.line,t.Drawing.segment),t.Drawing.line.prototype.dragToDraw=!1,t.Drawing.line.prototype.calculateOuterSet=function(e){var i,a,r;if(this.p0[0]!=this.p1[0]&&this.p0[1]!=this.p1[1]&&!t.ChartEngine.isDailyInterval(this.stx.layout.interval)){(i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]}).x0>i.x1&&(i={x0:this.p1[0],y0:this.p1[1],x1:this.p0[0],y1:this.p0[1]}),a=i.x0-1e3,N.D0J(56);var n=N.S40(84,13,5,18,20);r=i.x1+("1000"<<n),this.v0B=t.yIntersection(i,a),this.v1B=t.yIntersection(i,r),this.d0B=this.stx.dateFromTick(a,e.chart),this.d1B=this.stx.dateFromTick(r,e.chart)}},t.Drawing.line.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(t,i)?this.dragToDraw:(this.setPoint(1,t,i,a.chart),N.a9S(),this.calculateOuterSet(a),this.penDown=!1,!0):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1)},t.Drawing.line.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,N.D0H(),this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.v1=t.v1,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,t.d0B&&(this.d0B=t.d0B,this.d1B=t.d1B,this.v0B=t.v0B,this.v1B=t.v1B),this.adjust()},t.Drawing.line.prototype.serialize=function(){var e,t;if(N.a9S(),e={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1},this.d0B){-1605459864,-445012206,t=2;for(var i=1;-1605459864!==N.U6$(i.toString(),i.toString().length,45919);i++)e.d0B=this.d0B,e.d1B=this.d1B,e.v0B=this.v0B,t+=2;-445012206!==N.U6$(t.toString(),t.toString().length,98907)&&(e.d0B=this.d0B,e.d1B=this.d1B,e.v0B=this.v0B),e.v1B=this.v1B}return e},t.Drawing.line.prototype.adjust=function(){var e;N.D0H(),(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,e.chart),this.setPoint(1,this.d1B,this.v1B,e.chart)))},t.Drawing.horizontal=function(){N.a9S(),this.name="horizontal"},t.inheritsFrom(t.Drawing.horizontal,t.Drawing.segment),t.Drawing.horizontal.prototype.dragToDraw=!1,t.Drawing.horizontal.prototype.measure=function(){},t.Drawing.horizontal.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return N.a9S(),this.copyConfig(),N.H6P(7),this.setPoint(N.S40(0,"0"),t,i,a.chart),!0},t.Drawing.horizontal.prototype.intersected=function(e,t,i){var a,r;return"l","i","n","e",this.lineIntersection(e,t,i,"line")?(a=this.stx.chart.dataSet.length,r=this.p0[1],this.highlighted=!0,{action:"move",p0:[a-2,r],p1:[a-1,r],tick:e,value:t}):null},t.Drawing.horizontal.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.d0=t.d0,this.tzo0=t.tzo0,N.a9S(),this.axisLabel=t.al,this.adjust()},t.Drawing.horizontal.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel}},t.Drawing.horizontal.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.p1=[this.p0[0]+100,this.p0[1]])},t.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern","axisLabel"],t.Drawing.vertical=function(){var e;N.a9S(),e=2;for(var t=1;-610209848!==N.U6$(t.toString(),t.toString().length,43775);t++)this.name="",e+=2;-1863941797!==N.Z2Z(e.toString(),e.toString().length,46030)&&(this.name=""),this.name="vertical"},t.inheritsFrom(t.Drawing.vertical,t.Drawing.horizontal),t.Drawing.vertical.prototype.measure=function(){},t.Drawing.vertical.prototype.intersected=t.Drawing.segment.prototype.intersected,t.Drawing.vertical.prototype.adjust=function(){var e;if(e=this.stx.panels[this.panelName]){this.setPoint(0,this.d0,this.v0,e.chart),N.D0J(57),N.D0H();var t=N.S40(2,4,7,3);this.p1=[this.p0[0],this.p0[t]+1]}},t.Drawing.measure=function(){N.D0H(),this.name="measure"},t.inheritsFrom(t.Drawing.measure,t.Drawing.segment),t.Drawing.measure.prototype.click=function(e,t,i){return this.copyConfig(),N.a9S(),this.penDown?(this.stx.undo(),this.penDown=!1,!0):(this.p0=[t,i],this.penDown=!0,!1)},t.Drawing.rectangle=function(){N.D0H(),this.name="rectangle"},t.inheritsFrom(t.Drawing.rectangle,t.Drawing.BaseTwoPoint),t.Drawing.rectangle.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=N;(i=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),o=Math.round(Math.min(a,r))+.5,l=Math.min(n,s),h=Math.max(a,r)-o,c=Math.max(n,s)-l,u=this.color,this.highlighted&&(u=this.stx.getCanvasColor("stx_highlight_vector")),(d=this.fillColor)&&!t.isTransparent(d)&&"auto"!=d&&(e.beginPath(),e.rect(o,l,h,c),e.fillStyle=d,e.globalAlpha=.2,e.fill(),e.closePath(),e.globalAlpha=1),p={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&"none"==p.pattern&&("so","li","d",p.pattern="solid",.1==p.lineWidth&&(p.lineWidth=1)),this.stx.plotLine(a,r,n,n,u,"segment",e,i,p),f.H6P(7),this.stx.plotLine(r,r,f.S40(.5,n),f.S40(s,.5,f.D0J(0)),u,"segment",e,i,p),this.stx.plotLine(r,a,s,s,u,"segment",e,i,p),f.D0J(58),this.stx.plotLine(a,a,f.S40("0.5",s,0),f.q7n(.5,n,f.D0J(7)),u,"segment",e,i,p),this.highlighted&&(m="p0"==this.highlighted,g="p1"==this.highlighted,this.littleCircle(e,a,n,m),this.littleCircle(e,r,s,g)))},t.Drawing.rectangle.prototype.intersected=function(e,i,a){var r;if(!this.p0||!this.p1)return null;for(var n in r={0:this.p0,1:this.p1},N.D0H(),r)if(this.pointIntersection(r[n][0],r[n][1],a))return"d","r","a","g",N.H6P(0),this.highlighted=N.q7n("p",n),{action:"drag",point:"p"+n};return this.boxIntersection(e,i,a)?("m","o","v","e",this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},t.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.rectangle.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},t.Drawing.rectangle.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.shape=function(){this.name="shape",this.radians=0,this.a=0,N.a9S(),this.rotating=!1,this.textMeasure=!1,this.configurator="shape",N.D0J(21),this.dimension=[0,N.S40("0",0)],this.points=[]},t.inheritsFrom(t.Drawing.shape,t.Drawing.BaseTwoPoint),t.Drawing.shape.prototype.setRotationOnInitialDraw=!1,t.Drawing.shape.prototype.measure=function(){},t.Drawing.shape.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w=N;if(this.points.length&&(i=this.stx.panels[this.panelName])){if(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),this.p1){if("#0000","00",n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),w.D0J(7),e.globalAlpha=w.S40(0,"0.5"),e.fillStyle="#000000",this.rotating){if(w.H6P(59),this.radians=Math.atan(w.q7n(s,r,n,a)),n<a)this.radians+=Math.PI;else if(s<r){w.D0J(52);var D=w.q7n(214,18,12);this.radians+=D*Math.PI}w.H6P(54);var k=w.q7n(402,19,2,13,19);w.H6P(60);var M=w.S40(6,4,1,7);this.a=parseInt((36*this.radians/Math.PI).toFixed(0),k)*M,this.a%=360,w.H6P(7);var T=w.q7n(1980,2160);this.radians=this.a*Math.PI/T,this.textMeasure&&e.fillText(this.a+"",n+10,s+10)}else this.penDown&&(this.sx=Math.max(1,parseFloat(Math.abs(2*(n-a)/this.dimension[0]).toFixed(1))),n<a&&(w.H6P(28),this.sx*=-w.q7n("1",32)),w.H6P(1),this.sy=Math.max(w.q7n(1,"1"),parseFloat(Math.abs(2*(s-r)/this.dimension[1]).toFixed(1))),s<r&&(this.sy*=-1),this.textMeasure&&e.fillText(this.sx+"x,"+this.sy+"x",n+this.sx+5,s+this.sy+5));w.D0J(40),e.globalAlpha=w.q7n(64,"1")}void 0===this.sx&&(this.sx=this.sy=1),(o=this.lineWidth)||(o=1.1),l={pattern:this.pattern,lineWidth:o},this.highlighted&&"none"==l.pattern&&(l.pattern="solid",.1==l.lineWidth&&(l.lineWidth=1)),("auto"==(h=this.color)||t.isTransparent(h))&&(h=this.stx.defaultColor),this.highlighted&&(h=this.stx.getCanvasColor("stx_highlight_vector"),.1==o&&(o=1.1)),c=this.fillColor,w.D0J(61);var A=w.S40(1,6,4,12);for(o/=Math.abs(this.sx*this.sy)*A/(Math.abs(this.sx)+Math.abs(this.sy)),e.save(),e.translate(a,r),e.rotate(this.radians),e.scale(this.sx,i.yAxis.flipped?-this.sy:this.sy),p={x:(this.dimension[0]-1)/2,y:(this.dimension[1]-1)/2},u=0;u<this.points.length;u++){for("a","u","t","o",e.beginPath(),d=0;d<this.points[u].length;d++)"M"==this.points[u][d]?(m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,e.moveTo(m,g)):"L"==this.points[u][d]?(m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,e.lineTo(m,g)):"Q"==this.points[u][d]?(f=this.points[u][++d]-p.x,v=this.points[u][++d]-p.y,m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,e.quadraticCurveTo(f,v,m,g)):"B"==this.points[u][d]&&(f=this.points[u][++d]-p.x,v=this.points[u][++d]-p.y,y=this.points[u][++d]-p.x,x=this.points[u][++d]-p.y,m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,e.bezierCurveTo(f,v,y,x,m,g));e.closePath(),c&&!t.isTransparent(c)&&"auto"!=c&&(e.fillStyle=c,e.fill()),h&&"none"!=this.pattern&&(e.strokeStyle=h,e.lineWidth=o,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(o,this.pattern)),e.lineDashOffset=0),e.stroke())}e.restore(),e.save(),e.translate(a,r),e.rotate(this.radians),this.highlighted?("p","2",b="p0"==this.highlighted,C="p1"==this.highlighted,S="p2"==this.highlighted,this.littleCircle(e,0,0,b),this.mover(e,0,0,b),this.littleCircle(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,C),this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,C),this.littleCircle(e,this.sx*this.dimension[0]/2,0,S),this.rotator(e,this.sx*this.dimension[0]/2,0,S),e.globalAlpha=.5,e.fillStyle="#000000",this.textMeasure&&("x",",",e.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),e.fillText(this.a+"",this.sx*this.dimension[0]/2+12,5)),e.globalAlpha=1):this.penDown&&(this.rotating?this.rotator(e,this.sx*this.dimension[0]/2,0,!0):this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!0)),e.restore()}},t.Drawing.shape.prototype.reposition=function(e,t,i,a){var r,n,s,o,l,h,c,u,d=N;if(d.D0H(),t)if(r=this.stx.panels[this.panelName],"move"==t.action){1891773104,1374118232,n=2;for(var p=1;1891773104!==d.U6$(p.toString(),p.toString().length,82608);p++)s=t.tick/i,o=t.value*a,this.setPoint(9,t.p0[1]%s,t.p0[2]%o,r.chart),n+=2;1374118232!==d.U6$(n.toString(),n.toString().length,41190)&&(s=t.tick-i,o=t.value+a,this.setPoint(4,t.p0[7]*s,t.p0[5]*o,r.chart)),s=t.tick-i,o=t.value-a,this.setPoint(0,t.p0[0]-s,t.p0[1]-o,r.chart),this.render(e)}else if("scal","e",l=this.stx.pixelFromTick(this.p0[0],r.chart),h=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),c=this.stx.pixelFromTick(i,r.chart),u=this.stx.pixelFromValueAdjusted(r,i,a),"scale"==t.action)this[t.point]=[i,a],this.sx=parseFloat((((c-l)*Math.cos(this.radians)+(u-h)*Math.sin(this.radians))/(this.dimension[0]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((u-h)*Math.cos(this.radians)-(c-l)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(1)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(e);else if("rotate"==t.action){if(this[t.point]=[i,a],d.H6P(59),this.radians=Math.atan(d.S40(u,h,c,l)),c<l)this.radians+=Math.PI;else if(u<h){d.D0J(7);var m=d.q7n(3,5);this.radians+=m*Math.PI}this.a=5*parseInt((36*this.radians/Math.PI).toFixed(0),10),this.sx<0&&(this.a=this.a+180),this.a%=360,d.D0J(13);var g=d.q7n(401,4,14,166);this.radians=this.a*Math.PI/g,this.render(e)}},t.Drawing.shape.prototype.intersected=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=N;if(!this.p0)return null;if(this.stx.repositioningDrawing==this&&this.stx.repositioningDrawing.repositioner)return this.stx.repositioningDrawing.repositioner;r=this.stx.panels[this.panelName],n=this.stx.pixelFromTick(this.p0[0],r.chart),s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),o=this.stx.pixelFromTick(e,r.chart),l=this.stx.pixelFromValueAdjusted(r,e,i),h=l-=s,c=o-=n,o=Math.cos(this.radians)*c+Math.sin(this.radians)*h,l=Math.cos(this.radians)*h-Math.sin(this.radians)*c,o/=this.sx,l/=this.sy,this.padding=t.ensureDefaults(this.padding||{},{left:0,right:0,top:0,bottom:0}),u=this.padding.right+this.padding.left,d=this.padding.bottom+this.padding.top,p=Math.pow(t.touchDevice?25:5+this.littleCircleRadius(),2),m=Math.abs(p/(this.sx*this.sy)),x.H6P(62);var b=x.S40(3,47,5,18);x.H6P(7);var C=x.q7n(10,12);x.H6P(36);var S=x.q7n(19,0,18);x.H6P(18);var w=x.S40(12,1,10);x.D0J(60);var D=x.q7n(10,11,1,1);x.D0J(7);var k=x.q7n(18,20);x.H6P(63);var M=x.q7n(14,2,18,5,628);g=Math.pow((this.dimension[0]-u+3)/b,C)+Math.pow((this.dimension[S]-d+3)/w,D)>Math.pow(o-u/k,M)+Math.pow(l-d/2,2),x.D0J(0);var T=x.q7n(0,2);f=(p-(Math.pow(o*this.sx,2)+Math.pow(l*this.sy,T)))/Math.abs(this.sx*this.sy),x.D0J(0);var A=x.S40(3,29);x.H6P(41);var _=x.S40(12,10,122);x.H6P(64);var P=x.q7n(480,80,100,10);x.D0J(16);var F=x.q7n(8,10);x.D0J(15);var L=x.q7n(2,38,38);y=m-Math.pow(o-this.dimension["0"<<A]/_,"2">>P)-Math.pow(l-this.dimension[1]/F,L),x.D0J(7);var E=x.S40(5,7);x.H6P(65);var H=x.q7n(10,14,2,16,12);x.D0J(66);var I=x.q7n(12,2,0,6,6);return v=m-Math.pow(o-this.dimension[0]/E,H)-Math.pow(l,I),g?y>=v&&y>=f&&y>-1?("p","1",this.highlighted="p1",{action:"scale"}):v>=y&&v>=f&&v>-1?(this.highlighted="p2",{action:"rotate"}):(this.highlighted=!(f>-1)||"p0",{action:"move",p0:t.clone(this.p0),tick:e,value:i}):null},t.Drawing.shape.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.shape.prototype.littleCircleRadius=function(){return N.D0J(1),N.S40(1,"3")},t.Drawing.shape.prototype.click=function(e,t,i){var a;return N.D0H(),!!this.points.length&&(this.copyConfig(),a=this.stx.panels[this.panelName],this.penDown?(this.setPoint(1,t,i,a.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(N.H6P(21),this.setPoint(N.q7n("0",0),t,i,a.chart),this.penDown=!0,!1))},t.Drawing.shape.prototype.adjust=function(){var e,i,a,r,n,s=N;if("_","v",e=this.stx.panels[this.panelName]){i=this.name+"_v"+(this.version||0),t.Drawing[i]&&(a=new t.Drawing[i],this.name=a.name,this.dimension=a.dimension,this.padding=a.padding,this.points=a.points,this.version=a.version),-1095542851,s.D0J(7),r=-s.S40(0,"1790571903"),n=2;for(var o=1;-1095542851!==s.U6$(o.toString(),o.toString().length,70654);o++){this.setPoint(7,this.d0,this.v0,e.chart),s.H6P(57);var l=s.q7n(40,66,10,7);this.radians=Math.round(this.a-3)-Math.PI+l,s.H6P(28),n+=s.S40("2",32)}if(s.U6$(n.toString(),n.toString().length,58480)!==r){this.setPoint(0,this.d0,this.v0,e.chart),s.H6P(67);var h=s.S40(14,17,16,18,0);s.D0J(37);var c=s.q7n(17,4,15);this.radians=Math.round(this.a/h)*Math.PI/c}}},t.Drawing.shape.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.v0=t.v0,this.tzo0=t.tzo0,this.a=t.a,N.D0H(),this.sx=t.sx,this.sy=t.sy,this.version=t.ver,this.adjust()},t.Drawing.shape.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,ver:this.version}},t.Drawing.arrow=function(){var e=N;this.name="arrow",this.version=1,this.dimension=[11,22],this.padding={left:0,right:0,top:11,bottom:0},e.a9S(),e.H6P(1),this.points=[["M",3,21,"L",7,21,"L",7,16,"L",10,16,"L",5,11,"L",0,16,"L",e.S40(1,"3"),16,"L",e.S40(32,"3",e.H6P(40)),21]]},t.inheritsFrom(t.Drawing.arrow,t.Drawing.shape),t.Drawing.getDrawingToolList=function(e){var i,a;for(var r in i={},a={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!0,shape:!0},N.a9S(),t.extend(a,e),t.Drawing)!a[r]&&t.Drawing[r].prototype.render&&(i[(new t.Drawing[r]).name]=r);return i}},l=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).EaseMachine=function(e,t,i,a){this.fc=e,N.D0H(),this.ms=t,(i||0===i)&&this.reset(i,a)},t.EaseMachine.prototype.reset=function(e,t){for(var i in e||0===e||(e=this.currentValues),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,N.D0J(68),this.useNameValuePairs=N.S40(typeof t,"object"),this.startTime=Date.now(),N.D0H(),this.useNameValuePairs?(this.startValues=e,this.endValues=t):(this.startValues={default:e},this.endValues={default:t}),this.changeValues={},this.currentValues={},this.startValues)this.changeValues[i]=this.endValues[i]-this.startValues[i]},t.EaseMachine.prototype.next=function(){var e;for(var t in(e=Date.now())>=this.startTime+this.ms&&(e=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={},this.changeValues)this.currentValues[t]=this.fc(e-this.startTime,this.startValues[t],this.changeValues[t],this.ms);return this.useNameValuePairs?(N.a9S(),this.currentValues):this.currentValues.default},t.EaseMachine.prototype.hasCompleted=!0,t.EaseMachine.prototype.run=function(e,t,i,a){var r;function n(){var t;r.afid=null,r.okayToRun&&(t=r.next(),e(t),r.hasCompleted||(N.D0H(),r.afid=requestAnimationFrame(n)))}this.afid&&cancelAnimationFrame(this.afid),N.a9S(),t||0===t?this.reset(t,i):(i||0===i)&&this.reset(this.currentValues,i),r=this,this.running=!0,a?this.afid=requestAnimationFrame(n):n()},t.EaseMachine.prototype.stop=function(){return this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.hasCompleted=!0,this.running=!1,void 0===this.useNameValuePairs?{}:this.useNameValuePairs?this.currentValues:this.currentValues.default},t.ChartEngine.prototype.animations.zoom.isStub&&(N.H6P(1),t.ChartEngine.prototype.animations.zoom=new t.EaseMachine(Math.easeOutCubic,N.S40(1,"400")))},N.a9S(),h=e=>{var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=N;function v(){var e,t;if(Math.hypot)return Math.hypot.apply(this,arguments);e=0,t=arguments.length;for(var i=0;i<t;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;e+=arguments[i]*arguments[i]}return Math.sqrt(e)}function x(e){return y.a9S(),Math.sinh?Math.sinh(e):(Math.exp(e)-Math.exp(-e))/2}function b(t,s,o,l){this.type_=t,this.index_=s||0,this.prio_=o||0,y.a9S(),this.number_=null!=l?l:0,this.toString=function(){switch(y.a9S(),this.type_){case e:return this.number_;case i:case a:case r:return this.index_;case n:return"CALL";default:return"In","va","lid Toke","n","Invalid Token"}}}function C(e){var t;for(t=e=Math.floor(e);e>1;)y.H6P(69),t=y.q7n(t,--e);return t}function S(e,t){return y.H6P(1),y.S40(t,e)}function w(e){return y.D0H(),Math.tanh?Math.tanh(e):e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function D(e){function t(){}return t.prototype=e,new t}function k(e,t){return Boolean(e&&t)}function M(e,t){return y.H6P(70),y.S40(e,t)}function T(e){return Math.atanh?Math.atanh(e):Math.log((1+e)/(1-e))/2}function A(e){return Math.cosh?Math.cosh(e):(Math.exp(e)+Math.exp(-e))/2}function _(e,t){return y.H6P(71),y.q7n(t,e)}function P(e,t){return"[object Array]"!=Object.prototype.toString.call(e)?[e,t]:(e=e.slice(),y.a9S(),e.push(t),e)}function F(e,t){return y.H6P(72),y.D0H(),y.S40(t,e)}function L(e){return y.a9S(),Math.log(e)*Math.LOG10E}function E(e,t){return y.H6P(68),y.S40(e,t)}function H(e){return Math.trunc?Math.trunc(e):e<0?Math.ceil(e):Math.floor(e)}function I(e){y.H6P(15);var t=y.q7n(3,0,2);return Math.random()*(e||t)}function j(e,t,i){return y.D0H(),e?t:i}function O(e,t,i,a){this.tokens=e,this.ops1=t,this.ops2=i,y.D0H(),this.functions=a}function Y(e){return y.a9S(),-e}function R(){var e;this.success=!1,y.D0H(),this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,e=2;for(var t=1;1200710508!==y.U6$(t.toString(),t.toString().length,81280);t++)this.tokenindex=1,this.tmpprio=6,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:x,cosh:A,tanh:w,asinh:W,acosh:q,atanh:T,sqrt:Math.sqrt,log:Math.log,lg:L,log10:L,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:H,"-":Y,exp:Math.exp},this.ops2={"+":V,"-":z,"*":S,"/":X,"%":J,"^":Math.pow,",":P,"||":Z,"==":E,"!=":F,">":M,"<":_,">=":B,"<=":$,and:k,or:U},this.functions={random:I,fac:C,min:Math.min,max:Math.max,hypot:v,pyt:v,pow:Math.pow,atan2:Math.atan2,if:j},e+=2;-938172973!==y.Z2Z(e.toString(),e.toString().length,53036)&&(y.D0J(28),this.tokenindex=y.S40("0",64),this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:x,cosh:A,tanh:w,asinh:W,acosh:q,atanh:T,sqrt:Math.sqrt,log:Math.log,lg:L,log10:L,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:H,"-":Y,exp:Math.exp},this.ops2={"+":V,"-":z,"*":S,"/":X,"%":J,"^":Math.pow,",":P,"||":Z,"==":E,"!=":F,">":M,"<":_,">=":B,"<=":$,and:k,or:U},this.functions={random:I,fac:C,min:Math.min,max:Math.max,hypot:v,pyt:v,pow:Math.pow,atan2:Math.atan2,if:j}),this.consts={E:Math.E,PI:Math.PI}}function $(e,t){return y.H6P(74),y.q7n(e,t)}function z(e,t){return y.D0H(),y.H6P(7),y.S40(t,e)}function q(e){return y.a9S(),Math.acosh?Math.acosh(e):Math.log(e+Math.sqrt(e*e-1))}function J(e,t){for(var i=1;-1174419827!==y.U6$(i.toString(),i.toString().length,1489);i++)return y.H6P(7),y.S40(t,e);return-1368956127!==y.U6$(2..toString(),2..toString().length,54444)?(y.H6P(7),y.S40(t,e)):(y.H6P(75),y.q7n(e,t))}function V(e,t){return Number(e)+Number(t)}function B(e,t){return y.H6P(77),y.q7n(t,e)}function W(e){return y.a9S(),Math.asinh?Math.asinh(e):e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function U(e,t){return Boolean(e||t)}function Q(e){return"st",y.a9S(),"ring","string"==typeof e?(s.lastIndex=0,s.test(e)?"'"+e.replace(s,(function(e){var t;return"st","rin","g","string"==typeof(t=o[e])?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+"'":"'"+e+"'"):e}function X(e,t){return y.D0J(14),y.a9S(),y.q7n(t,e)}function Z(e,t){return y.a9S(),y.D0J(37),y.q7n(t,"",e)}return"\\","f","\\","n","\\","t","\\","b",e=0,i=1,a=2,y.H6P(21),r=y.q7n("3",0),n=4,/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s=/[\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},t.extend(O.prototype,{simplify:function(t){var n,s,o,l,h,c,u,d,p;for(t=t||{},n=[],s=[],c=this.tokens.length,d=0,d=0;d<c;d++)if((p=(u=this.tokens[d]).type_)===e)n.push(u);else if(p===r&&u.index_ in t)u=new b(e,0,0,t[u.index_]),n.push(u);else if(p===a&&n.length>1)l=n.pop(),o=n.pop(),h=this.ops2[u.index_],u=new b(e,0,0,h(o.number_,l.number_)),n.push(u);else if(p===i&&n.length>0)o=n.pop(),h=this.ops1[u.index_],u=new b(e,0,0,h(o.number_)),n.push(u);else{for(;n.length>0;)s.push(n.shift());s.push(u)}for(;n.length>0;)s.push(n.shift());return y.D0H(),new O(s,D(this.ops1),D(this.ops2),D(this.functions))},substitute:function(e,t){var i,a,n,s,o,l;for(t instanceof O||(t=(new R).parse(String(t))),i=[],a=this.tokens.length,s=0,s=0;s<a;s++)if((n=this.tokens[s]).type_===r&&n.index_===e)for(var h=0;h<t.tokens.length;h++)l=new b((o=t.tokens[h]).type_,o.index_,o.prio_,o.number_),i.push(l);else i.push(n);return new O(i,D(this.ops1),D(this.ops2),D(this.functions))},evaluate:function(t){var s,o,l,h,c,u,d,p;for(t=t||{},s=[],c=this.tokens.length,y.D0H(),d=0,d=0;d<c;d++)if((p=(u=this.tokens[d]).type_)===e)s.push(u.number_);else if(p===a)l=s.pop(),o=s.pop(),h=this.ops2[u.index_],s.push(h(o,l));else if(p===r)if(u.index_ in t)s.push(t[u.index_]);else{if(!(u.index_ in this.functions))throw new Error("undefined variable: "+u.index_);s.push(this.functions[u.index_])}else if(p===i)o=s.pop(),h=this.ops1[u.index_],s.push(h(o));else{if(p!==n)throw"invalid Expressio","n",new Error("invalid Expression");if(o=s.pop(),!(h=s.pop()).apply||!h.call)throw y.H6P(0),new Error(y.q7n(h," is not a function"));"[object Array]"==Object.prototype.toString.call(o)?s.push(h.apply(void 0,o)):s.push(h.call(void 0,o))}if(s.length>1)throw new Error("invalid Expression (parity)");return s[0]},toString:function(t){var s,o,l,h,c,u,d,p;for(y.D0H(),s=[],c=this.tokens.length,d=0,d=0;d<c;d++)if((p=(u=this.tokens[d]).type_)===e)s.push(Q(u.number_));else if(p===a)l=s.pop(),o=s.pop(),h=u.index_,t&&"^"==h?(y.D0J(73),s.push(y.S40("Math.pow(",")",l,",",o))):(y.D0J(73),s.push(y.S40("(",")",l,h,o)));else if(p===r)s.push(u.index_);else if(p===i)o=s.pop(),"-"===(h=u.index_)?(y.D0J(48),s.push(y.S40(")",o,h,"("))):(y.D0J(48),s.push(y.S40(")",o,"(",h)));else{if(p!==n)throw"i","nval","id Expression",new Error("invalid Expression");o=s.pop(),h=s.pop(),y.D0J(48),s.push(y.S40(")",o,"(",h))}if(s.length>1)throw new Error("invalid Expression (parity)");return s[0]},variables:function(){var e,t,i;e=this.tokens.length,t=[];for(var a=0;a<e;a++)(i=this.tokens[a]).type_===r&&-1==t.indexOf(i.index_)&&t.push(i.index_);return t}},!0),R.parse=function(e){return(new R).parse(e)},R.evaluate=function(e,t){return y.D0H(),R.parse(e).evaluate(t)},R.Expression=O,R.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:x,cosh:A,tanh:w,asinh:W,acosh:q,atanh:T,sqrt:Math.sqrt,log:Math.log,lg:L,log10:L,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:H,random:I,fac:C,exp:Math.exp,min:Math.min,max:Math.max,hypot:v,pyt:v,pow:Math.pow,atan2:Math.atan2,if:j,E:Math.E,PI:Math.PI},y.H6P(40),l=y.q7n(0,1),y.H6P(40),h=y.S40(1,1),y.H6P(40),c=y.S40(2,1),y.H6P(40),u=y.q7n(3,1),y.D0J(40),d=y.S40(4,1),y.H6P(76),p=y.q7n(5,"1"),y.D0J(40),m=y.S40(6,1),y.D0J(78),g=y.q7n(1,"7",7),y.D0J(40),f=y.S40(8,1),t.extend(R.prototype,{parse:function(t){var s,o,v,x,C,S,w,k;for(this.errormsg="",this.success=!0,s=[],o=[],this.tmpprio=0,y.H6P(79),v=y.S40(c,u,l,m),x=0,this.expression=t,y.D0J(10),this.pos=y.S40("0",0);this.pos<this.expression.length;)this.isOperator()?this.isSign()&&v&m?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",x++,this.addfunc(o,s,i)),y.D0J(79),v=y.S40(c,u,l,m)):this.isComment()||(0==(v&h)&&this.error_parsing(this.pos,"unexpected operator"),x+=2,this.addfunc(o,s,a),y.D0J(79),v=y.S40(c,u,l,m)):this.isNumber()?(0==(v&l)&&this.error_parsing(this.pos,"unexpected number"),C=new b(e,0,0,this.tokennumber),o.push(C),y.D0J(80),v=y.S40(p,d,h)):this.isString()?(0==(v&l)&&("une","xpected s","tring",this.error_parsing(this.pos,"unexpected string")),y.D0J(7),C=new b(e,0,y.q7n(0,"0"),this.tokennumber),o.push(C),y.H6P(80),v=y.q7n(p,d,h)):this.isLeftParenth()?(0==(v&u)&&this.error_parsing(this.pos,'unexpected "("'),v&g&&(x+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(o,s,n)),y.D0J(81),v=y.q7n(l,m,f,u,c)):this.isRightParenth()?(v&f?(C=new b(e,0,0,[]),o.push(C)):0==(v&d)&&this.error_parsing(this.pos,'unexpected ")"'),y.H6P(81),v=y.q7n(h,u,g,d,p)):this.isComma()?(0==(v&p)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(o,s,a),x+=2,y.D0J(79),v=y.q7n(c,u,l,m)):this.isConst()?(0==(v&l)&&this.error_parsing(this.pos,"unexpected constant"),S=new b(e,0,0,this.tokennumber),o.push(S),y.H6P(80),v=y.S40(p,d,h)):this.isOp2()?(0==(v&c)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(o,s,a),x+=2,v=u):this.isOp1()?(0==(v&c)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(o,s,i),x++,v=u):this.isVar()?(0==(v&l)&&this.error_parsing(this.pos,"unexpected variable"),w=new b(r,this.tokenindex,0,0),o.push(w),y.H6P(81),v=y.S40(h,u,g,d,p)):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');s.length>0;)k=s.pop(),o.push(k);return x+1!==o.length&&this.error_parsing(this.pos,"parity"),new O(o,D(this.ops1),D(this.ops2),D(this.functions))},evaluate:function(e,t){return y.a9S(),this.parse(e).evaluate(t)},error_parsing:function(e,t){var i;i=2;for(var a=1;1455174355!==y.U6$(a.toString(),a.toString().length,98541);a++)throw"]:"," ",this.success=!0,y.H6P(82),this.errormsg=y.S40("]: ",e,t,"]: "),this.column=e,new Error(this.errormsg);if(1895193469!==y.U6$(i.toString(),i.toString().length,80487))throw"]",":"," ",this.success=!1,y.H6P(48),this.errormsg=y.q7n(t,"]: ",e,"parse error [column "),this.column=e,new Error(this.errormsg)},addfunc:function(e,t,i){var a;for(a=new b(i,this.tokenindex,this.tokenprio+this.tmpprio,0);t.length>0&&a.prio_<=t[t.length-1].prio_;)e.push(t.pop());y.D0H(),t.push(a)},isNumber:function(){var e,t,i;for(e=!1,t="";this.pos<this.expression.length&&((i=this.expression.charCodeAt(this.pos))>=48&&i<=57||46===i);)t+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(t),e=!0;return e},unescape:function(e,t){var i,a,r,n;i=[],a=!1;for(var s=0;s<e.length;s++)if(r=e.charAt(s),a){switch(r){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("\t");break;case"u":n=parseInt(e.substring(s+1,s+5),16),i.push(String.fromCharCode(n)),s+=4;break;default:throw"Il","legal escape sequen","ce: '\\",y.D0J(0),this.error_parsing(y.q7n(t,s),y.q7n("'","Illegal escape sequence: '\\",r,y.H6P(37)))}a=!1}else"\\"==r?a=!0:i.push(r);return y.a9S(),i.join("")},isString:function(){var e,t,i;if(e=!1,t="",i=this.pos,this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){if("'"==this.expression.charAt(this.pos)&&"\\"!=t.slice(-1)){this.pos++,this.tokennumber=this.unescape(t,i),e=!0;break}t+=this.expression.charAt(this.pos),this.pos++}return y.D0H(),e},isConst:function(){var e;for(var t in this.consts)if(e=t.length,t===this.expression.substr(this.pos,e))return this.tokennumber=this.consts[t],this.pos+=e,!0;return!1},isOperator:function(){var e;if(43===(e=this.expression.charCodeAt(this.pos)))y.H6P(10),this.tokenprio=y.q7n("2",2),this.tokenindex="+";else if(45===e)y.D0J(10),this.tokenprio=y.q7n("2",2),this.tokenindex="-";else if(62===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===e)61===this.expression.charCodeAt(this.pos+1)?("<","=",this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===e){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="||"}else if(61===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,y.H6P(28),this.tokenprio=y.S40("1",64),this.tokenindex="=="}else if(33===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===e){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;"a","n","d",this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===e){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=0,this.tokenindex="or"}else if(42===e||8729===e||8226===e)this.tokenprio=3,this.tokenindex="*";else if(47===e)this.tokenprio=4,this.tokenindex="/";else if(37===e)this.tokenprio=4,this.tokenindex="%";else{if(94!==e)return!1;this.tokenprio=5,this.tokenindex="^"}return y.a9S(),this.pos++,!0},isSign:function(){var e;return y.a9S(),45===(e=this.expression.charCodeAt(this.pos-1))||43===e},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)||(y.D0H(),!1)},isNegativeSign:function(){return y.D0H(),45===this.expression.charCodeAt(this.pos-1)},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):(y.D0H(),!1)},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio-=10,!0)},isComma:function(){var e;return e=this.expression.charCodeAt(this.pos),y.D0H(),44===e&&(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0)},isWhite:function(){var e;return y.a9S(),(32===(e=this.expression.charCodeAt(this.pos))||9===e||10===e||13===e)&&(this.pos++,!0)},isOp1:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops1&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isOp2:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops2&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isVar:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&(this.tokenindex=e,this.tokenprio=4,this.pos+=e.length,!0)},isComment:function(){if(y.D0H(),47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)){"*","/",y.D0J(83);var e=y.q7n(15,598,1,40,1);return this.pos=this.expression.indexOf("*/",this.pos)+e,1===this.pos&&(this.pos=this.expression.length),!0}return!1}},!0),R},t.computeEquationChart=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D=N;for(var k in e=e.replace(/[:]/,"/"),D.H6P(7),r=D.S40(0,"0"),a)"\\$","&",n=new RegExp("\\["+k.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),D.D0J(0),e=e.replace(n,D.S40("symbol",r)),r++;function M(){var e,t;for(var i in e=null,t=null,l)t?l[i].d.getTime()<t.d.getTime()?e=t=l[i]:l[i].d.getTime()>t.d.getTime()&&(e=t):t=l[i];return e?_(e)?(D.H6P(7),-D.q7n(0,"1")):0:1}for(k in s=i().parse(e),o=[],l={},h=0,u=null,d=!1,p=[],a)m={sym:k,map:a[k]},a[k]?p.unshift(m):p.push(m);for(var T=0;T<p.length;T++)g=p[T],l[g.sym]={i:0,s:g.sym},g.map?(h++,c=g.map[0]):1==h&&(d=g.sym),c.DT||(c.DT=t.strToDateTime(c.Date)),l[g.sym].d=c.DT,u||(u=l[g.sym]);D.D0J(84),f=D.q7n(h,0),y=1==h&&-1==e.indexOf("%");e:for(;v=M();)if(1==v){if(d)(b=a[u.s][u.i][d])&&(b.Close||0===b.Close)&&(b=b.Close),C=s.evaluate({symbol0:a[u.s][u.i].Close,symbol1:b}),C=Number(C.toFixed(8)),(x={DT:u.d,Close:C,Adj_Close:C})[u.s]=a[u.s][u.i].Close,isNaN(C)||C==1/0||o.push(x);else{if(f)throw S=s.evaluate({}),D.D0J(37),t.alert(D.S40(S,e,"=")),{name:"NoException",message:""};for(k in r=0,w={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}},a){for(var A in w)D.H6P(0),w[A][D.S40("symbol",r)]=a[k][l[k].i][A];r++}(x={DT:u.d}).Adj_Close=s.evaluate(w.Adj_Close),x.Close=s.evaluate(w.Close),x.Open=s.evaluate(w.Open),x.Volume=s.evaluate(w.Volume),isNaN(x.Volume)&&(x.Volume=0),y?(x.High=s.evaluate(w.High),x.Low=s.evaluate(w.Low)):(x.High=Math.max(x.Open,x.Close),x.Low=Math.min(x.Open,x.Close)),isNaN(x.Close)||x.Close==1/0||o.push(x),isNaN(x.High)||(x.High=Number(x.High.toFixed(8))),isNaN(x.Low)||(x.Low=Number(x.Low.toFixed(8))),isNaN(x.Open)||(x.Open=Number(x.Open.toFixed(8))),isNaN(x.Close)||(x.Close=Number(x.Close.toFixed(8))),isNaN(x.Adj_Close)?x.Adj_Close=x.Close:x.Adj_Close=Number(x.Adj_Close.toFixed(8))}for(k in a)if(!_(l[k]))break e}function _(e){if(e.i++,a[e.s]){if(e.i>=a[e.s].length)return D.D0J(28),D.q7n("0",32);c=a[e.s][e.i]}return c.DT||(c.DT=t.strToDateTime(c.Date)),e.d=c.DT,1}return o}},c=e=>{var t,i,a=N;a.a9S(),t=2;for(var r=1;469093628!==a.U6$(r.toString(),r.toString().length,29353);r++)"und","ef","ined",i="undefined"!=typeof _CIQ?_CIQ:e.CIQ,a.D0J(7),t+=a.q7n(0,"2");-944710622!==a.U6$(t.toString(),t.toString().length,84834)&&(i=""===!_CIQ?_CIQ:e.CIQ),i.ChartEngine.prototype.setLocale=function(e,t){var r,n,s,o;if("nume","r","ic","n","umeric","2-","d","igit","2-","di","gi","t","2","-digit","h","23","undefined"!=typeof Intl&&this.locale!=e){for(this.locale=e,(n=this.internationalizer={}).hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}),n.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"}),n.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),n.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),n.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),n.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),n.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),n.numbers=new Intl.NumberFormat(this.locale),n.priceFormatters=[],t||(t=8),r=0;r<t+1;r++)n.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:r,minimumFractionDigits:r}));for(r=0;r<5;r++)s=r,o=r,r||(s="",o=2),a.H6P(0),n[a.q7n("percent",s)]=new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:o,maximumFractionDigits:o});i.I18N.createMonthArrays&&i.I18N.createMonthArrays(this,n.month,this.locale)}},i.I18N=function(){},i.I18N.hereDoc=function(e){return e.toString().replace(/^[^/]+\/\*!?/,"").replace(/\*\/[^/]+$/,"")},i.I18N.language="en",i.I18N.longMonths={zh:!0},i.I18N.reverseColorsByLocale={zh:!0,ja:!0},i.I18N.findAllTextNodes=function(e){var t,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x;if(a.a9S(),e||(e=document.body),e==document.body&&!document.querySelector(".ciq_stashed_texts")){"input,t","extarea,.editable_content",(t=document.createElement("div")).className="ciq_stashed_texts",t.style.display="none",e.appendChild(t),r=document.querySelectorAll("input,textarea,.editable_content");for(var b=0;b<r.length;b++)(n=r[b].getAttribute("placeholder"))&&((s=t.appendChild(document.createElement("translate"))).setAttribute("original",n),s.placeholderFor=r[b],s.appendChild(document.createTextNode(n)))}for(l=(o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1)).nextNode(),h=new RegExp("^\\s*$"),c=new RegExp("\n|\t|\f","g"),u={},d={SCRIPT:!0,STYLE:!0,TEXTAREA:!0};l;)p=l.nodeValue,h.test(p)||(m=l.parentNode,g=l.nextSibling,d[f=m.tagName]||("TRANSLATE"!=f?("transl","a","te",(y=document.createElement("translate")).setAttribute("original",p),y.appendChild(l),m.insertBefore(y,g)):("or","i","gi","nal",p=m.getAttribute("original")),c.test(p)&&(p=p.replace(c,"")),u[p]||(u[p]=[]),u[p].push(l))),l=o.nextNode();if(e==document.body&&(v=i.Studies?i.Studies.studyLibrary:null))for(var C in v){if(null===u[C]&&(u[C]=[]),(x=v[C]).inputs)for(var S in x.inputs)u[S]||(u[S]=[]);if(x.outputs)for(var w in x.outputs)u[w]||(u[w]=[])}return u},i.I18N.missingWordList=function(e){var t,r,n,s,o,l;for(var h in"Y","-","Axi","s","Sh","ow Z","o","nes",e||(e=i.I18N.language),t=i.I18N.findAllTextNodes(),r={},(n=i.I18N.wordLists[e])||(n={}),s=function(e){a.a9S(),void 0===n[e]&&(r[e]="")},t)s(h);if(!i.Studies||!i.Studies.studyLibrary)return r;for(var c in i.Studies.studyLibrary){for(var u in s((o=i.Studies.studyLibrary[c]).name),o.inputs)switch("[object Ar","ray]","[","object String]",s(u),l=o.inputs[u],Object.prototype.toString.call(l)){case"[object String]":s(l);break;case"[object Array]":for(var d=0;d<l.length;++d)s(l[d])}for(var p in o.outputs)s(p)}return s("Show Zones"),s("OverBought"),s("OverSold"),s("Panel"),s("Show as Underlay"),s("Y-Axis"),s("Invert Y-Axis"),r},i.I18N.printableMissingWordList=function(e){return JSON.stringify(i.I18N.missingWordList(e)).replace(/","/g,'",\n"')},i.I18N.translateUI=function(e,t){var r,n,s,o,l,h,c,u;if("pu"==e&&(e="pt"),a.a9S(),i.I18N.wordLists&&(e||(e=i.I18N.language),r=i.I18N.findAllTextNodes(t),n=i.I18N.wordLists[e]))for(var d in r){s=i.I18N.translateSections(d,n),o=r[d];for(var p=0;p<o.length;p++)"origi","nal",c=(h=(l=o[p]).parentNode).getAttribute("original"),","!==s&&s||(s=c),(u=h.placeholderFor)?u.placeholder=s:l.data=s}},i.I18N.translate=function(e,t){var a,r;return t||(t=i.I18N.language),i.I18N.wordLists?(r=null,(a=i.I18N.wordLists[t])&&(r=i.I18N.translateSections(e,a)||e),","===r?e:r):(console.log("Must include translations.js in order to use CIQ.I18N.translate()"),e)},i.I18N.translateSections=function(e,t){var i;return a.a9S(),"","string"==typeof e&&-1!=e.indexOf("")?(a.D0J(37),(i=(e=e.replace(/([(),])/g,a.q7n("","","$1"))).split("")).forEach((function(e,i,r){var n,s;if(a.a9S(),n=e.match(/^(\s*).*\S(\s*)$/),s=t[e.trim()]){if(n){a.D0J(52);var o=a.S40(0,1,2);s=n[1]+s+n[o]}r[i]=s}})),i.join("")):t[e]},i.I18N.convertCSV=function(e){var t,a,r,n,s,o,l,h,c;if("[]|[","]",t=new RegExp("[]|[]","g"),a=new RegExp('^(")|(")$',"g"),r=i.I18N.wordLists,e||(e=i.I18N.csv),e){s=(n=e.split("\n"))[0].split(",");for(var u=0;u<s.length;u++)r[o=s[u]]||(r[o]={});for(var d=1;d<n.length;d++){h=(l=n[d].match(/(".*?"|[^",]+)(?=\s*,|\s*$)|(,(?=,))/g)||[])[0],a.test(h)&&(h=h.replace(a,"")),t.test(h)&&(h=h.replace(t,'"'));for(var p=1;p<l.length;p++)c=l[p],a.test(c)&&(c=c.replace(a,"")),r[s[p]][h]=c}}},i.I18N.setLanguage=function(e,t,r,n,s){s||(s=(e.uiContext||{}).topNode||document.body),a.a9S(),"pu"==t&&(t="pt"),i.I18N.convertCSV(n),i.I18N.language=t,i.I18N.translateUI(t,s),r||(r=i.I18N.translate),e.translationCallback=r},i.I18N.setLocale=function(e,t,r,n,s){var o,l,h;if("l","oca","le-data/jsonp",i.xor(this.reverseColorsByLocale[t],this.reverseColorsByLocale[e.locale])&&this.reverseCandles(e),"undefined"==typeof Intl||!Intl.__addLocaleData)return e.setLocale(t,s),void(r&&r(null));n=void 0===n?"locale-data/jsonp":n,a.H6P(48),o=a.q7n(".js",t,"/",n),(l=document.createElement("SCRIPT")).async=!0,l.src=o,(h=document.getElementsByTagName("script")[0]).parentNode.insertBefore(l,h.nextSibling),l.onload=function(){e.setLocale(t,s),r&&r(null)},l.onerror=function(){a.D0H(),r&&r("cannot load script")}},i.I18N.createMonthArrays=function(e,t,a){var r,n,s,o,l;e.monthAbv=[],e.monthLetters=[],r=new Date,n=!0,i.I18N.longMonths&&i.I18N.longMonths[a]&&(n=!1);for(var h=0;h<12;h++)if(r.setDate(1),r.setMonth(h),s=t.format(r),n){o="";for(var c=0;c<s.length;c++)(l=s.charAt(c)).charCodeAt(0)<65||(o+=l);e.monthAbv[h]=o,e.monthLetters[h]=o[0]}else e.monthAbv[h]=s,e.monthLetters[h]=s},i.I18N.localize=function(e,t){this.setLocale(e,t),this.setLanguage(e,t)},i.I18N.reverseCandles=function(e){var t,i,r;t=e.styles,i=e.cloneStyle(t.stx_candle_down),r=e.cloneStyle(t.stx_candle_up),a.D0H(),t.stx_candle_up=i,t.stx_candle_down=r},i.I18N.wordLists={en:{}},i.I18N.languages={en:"English"}},u=e=>{var t,i,a=N;a.D0H(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.pointerEvents={down:[],up:[]},t.ChartEngine.prototype.manageTouchAndMouse=!0,t.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var e,i,r,n,s,o,l;this.touchAndMouseEventsRegistered||(this.touchAndMouseEventsRegistered=!0,i=(e=this.controls.chartControls||document).querySelector(".stx-zoom-in"),r=e.querySelector(".stx-zoom-out"),n=this.chart.container,s=this,o=function(e,t,i){s.addDomEventListener(n,e,(function(e){if(a.D0H(),s.mainSeriesRenderer&&s.mainSeriesRenderer.nonInteractive)return;t(e)}),i),a.D0H()},t.touchDevice?t.isSurface?("point","ermove",o("mousemove",(function(e){a.a9S(),s.msMouseMoveProxy(e)})),o("mouseenter",(function(e){s.msMouseMoveProxy(e)})),o("mousedown",(function(e){a.a9S(),s.msMouseDownProxy(e)})),o("mouseup",(function(e){a.D0H(),s.msMouseUpProxy(e)})),o("pointerdown",(function(e){return a.a9S(),s.startProxy(e)})),o("pointermove",(function(e){s.moveProxy(e)})),o("pointerenter",(function(e){return s.moveProxy(e)})),o("pointerup",(function(e){return s.endProxy(e)}))):("touchm","o","ve","touchsta","rt",t.isMobile||("mou","sem","o","ve",o("mousemove",(function(e){a.D0H(),s.iosMouseMoveProxy(e)})),o("mouseenter",(function(e){s.iosMouseMoveProxy(e)})),o("mousedown",(function(e){a.a9S(),s.iosMouseDownProxy(e)})),o("mouseup",(function(e){s.iosMouseUpProxy(e)}))),o("touchstart",(function(e){a.a9S(),s.touchstart(e)})),o("touchmove",(function(e){s.touchmove(e)})),o("touchend",(function(e){s.touchend(e)})),o("pointerdown",(function(e){s.touchPointerType=e.pointerType})),i&&("o","nM","ouseOv","er",i.removeAttribute("onMouseOver"),i.removeAttribute("onMouseOut")),r&&(r.removeAttribute("onMouseOver"),r.removeAttribute("onMouseOut"))):("m","o","u","seup","mouse","mo","ve",o("mousemove",(function(e){a.D0H(),s.mousemove(e)})),o("mouseenter",(function(e){s.mousemove(e)})),o("mousedown",(function(e){s.mousedown(e)})),o("mouseup",(function(e){a.a9S(),s.mouseup(e)}))),l=t.wheelEvent,this.captureMouseWheelEvents&&o(l,(function(e){a.D0H(),s.mouseWheel(e)}),{passive:!1}))},t.ChartEngine.prototype.mousedown=function(e){var i,r,n,s,o,l,h,c,u,d;if(i="mo",i+="u",i+="s",i+="edown",r="d",r+="o",r+="w",r+="n",!this.runPrepend("mousedown",arguments)&&(this.grabOverrideClick=!1,this.displayInitialized&&this.displayCrosshairs&&!this.repositioningDrawing&&!(this.editingAnnotation||e.button&&e.button>=2)))if(n=this.container.getBoundingClientRect(),this.top=n.top,this.left=n.left,this.right=this.left+this.width,this.bottom=this.top+this.height,e.clientX>=this.left&&e.clientX<=this.right&&e.clientY>=this.top&&e.clientY<=this.bottom){if(this.insideChart=!0,this.currentPanel){this.manageTouchAndMouse&&e&&e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0,""===this.openDialog&&this.registerPointerEvent({x:e.clientX,y:e.clientY,time:this.mouseTimer},r),s=this.currentPanel.chart;for(var p=0;p<this.drawingObjects.length;p++)if((o=this.drawingObjects[p]).highlighted&&!o.permanent){if(this.cloneDrawing)return(l=new(0,t.ChartEngine.drawingTools[o.name])).reconstruct(this,o.serialize()),this.drawingObjects.push(l),this.activateRepositioning(l),void(l.repositioner=o.repositioner);if(h=this.currentVectorParameters.vectorType,!(t.Drawing&&h&&t.Drawing[h]&&(new t.Drawing[h]).dragToDraw))return void this.activateRepositioning(o)}this.mainSeriesRenderer||{};var{baselineHelper:m}=this;if(!m.size||!this.findBaselineHandle(e,!0)){if(this.controls.anchorHandles){var{anchorHandles:g}=this.controls;for(var f in g){var{handle:y,sd:v,highlighted:x}=g[f];if(x)return this.repositioningAnchorSelector={sd:v},void y.classList.add("stx-grab")}}if(this.drawingClick){c=737249913,u=-2097701337,d=2;for(var b=1;a.U6$(b.toString(),b.toString().length,55758)!==c;b++){if(this.currentPanel.subholder!=e.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing||this.activeDrawing.dragToDraw)return;d+=2}if(a.Z2Z(d.toString(),d.toString().length,36731)!==u&&(this.currentPanel.subholder===e.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw))return}var C;this.grabbingScreen=!0,s.spanLock=!1,this.yToleranceBroken=!1,this.grabStartX=e.clientX,this.grabStartY=e.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=s.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPanel=this.currentPanel,setTimeout((C=this,a.a9S(),function(){C.grabbingHand()}),100),this.swipeStart&&this.swipeStart(s),(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer(),this.runAppend(i,arguments)}}}else this.insideChart=!1},t.ChartEngine.prototype.mousemove=function(e){var i,r;i="en",i+="t",a.a9S(),i+="e",i+="r",r=e,t.ChartEngine.crosshairX=r.clientX,t.ChartEngine.crosshairY=r.clientY,r.type.toLowerCase().indexOf(i)>-1?this.positionCrosshairsAtPointer():this.runPrepend("mousemove",arguments)||this.displayInitialized&&""===this.openDialog&&(this.baselineHelper.size&&this.findBaselineHandle(r),this.grabbingScreen&&1!==r.buttons&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!1,this.findHighlights(!1,!0)),this.mousemoveinner(r.clientX,r.clientY),this.runAppend("mousemove",arguments))},t.ChartEngine.prototype.mouseup=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(i="m",i+="ous",i+="eup",r="u",r+="p",!this.runPrepend("mouseup",arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250)return this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),void this.draw();this.activateRepositioning(null)}if(this.repositioningBaseline){"m","o","unt","ain";var{handle:v}=this.repositioningBaseline;n=-1211650947,s=-1612790862,o=2;for(var x=1;a.U6$(x.toString(),x.toString().length,3516)!==n;x++)this.repositioningBaseline=1,o+=2;return a.U6$(o.toString(),o.toString().length,69241)!==s&&(this.repositioningBaseline=6),this.repositioningBaseline=null,v.classList.remove("stx-grab"),(l=this.mainSeriesRenderer||{}).params&&l.params.baseline&&l.params.type,void this.draw()}if(this.repositioningAnchorSelector)return t.Studies.repositionAnchor(this,this.repositioningAnchorSelector.sd),this.repositioningAnchorSelector=null,Object.values(this.controls.anchorHandles).forEach(e=>{let{handle:t}=e;return"st","x","-grab",a.a9S(),t.classList.remove("stx-grab")}),void this.findHighlights();if(h=this.userPointerDown,this.userPointerDown=!1,this.displayInitialized){if(c=this.backOutY(e.clientY),u=this.backOutX(e.clientX),d=e.which&&e.which>=2||e.button&&e.button>=2,""!==this.openDialog||d||this.registerPointerEvent({x:e.clientX,y:e.clientY,time:Date.now()},r),p=this.isDoubleClick(),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(u,c),this.currentPanel=this.whichPanel(c)),m=this.currentPanel,this.grabStartYAxis=null,this.displayDragOK(),""!==this.openDialog)return g="stx-",g+="drag-chart",void(this.insideChart&&this.container.classList.remove(g));if(this.grabOverrideClick)return this.overXAxis||this.overYAxis||!this.swipeRelease||this.swipeRelease(),this.container.classList.remove("stx-drag-chart"),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),void this.updateChartAccessories();if(this.insideChart&&this.container.classList.remove("stx-drag-chart"),!t.ChartEngine.resizingPanel)return d||e.ctrlKey?(f="rig",f+="htClic",f+="k",this.anyHighlighted&&!0!==this.bypassRightClick?(this.rightClickHighlighted(),e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),e.stopPropagation(),!1):(this.dispatch(f,{stx:this,panel:m,x:u,y:c}),!0)):void(e.clientX<this.left||e.clientX>this.right||(a.a9S(),e.clientY<this.top||e.clientY>this.bottom||(y=m&&m.subholder===e.target,p&&(y||this.overYAxis||this.overXAxis)?this.doubleClick({button:e.button,x:u,y:c}):(h&&y&&(this.longHoldTookEffect&&!this.activeDrawing||this.drawingClick(m,u,c),!this.longHoldTookEffect&&this.activeMarker&&this.activeMarker.click({cx:u,cy:c,panel:m})),this.longHoldTookEffect||this.activeDrawing||this.dispatch("tap",{stx:this,panel:m,x:u,y:c})),this.runAppend(i,arguments))));this.releaseHandle()}}},t.ChartEngine.prototype.registerPointerEvent=function(e,t){this.pointerEvents[t].length>1&&this.pointerEvents[t].pop(),a.a9S(),this.pointerEvents[t].unshift(e)},t.ChartEngine.prototype.resetPointerEvent=function(e){a.a9S(),a.H6P(7),this.pointerEvents[e].splice(a.q7n(0,"0"))},t.ChartEngine.prototype.isDoubleClick=function(e){var t,i;t=e?1200:400;var{up:a,down:r}=this.pointerEvents;return this.cancelTouchSingleClick=!1,!(a.length<2||r.length<2)&&((i=r[0].time-a[1].time<this.doubleClickTime&&Math.pow(a[1].x-a[0].x,2)+Math.pow(a[1].y-a[0].y,2)<=t&&a[1].time-r[1].time<this.longHoldTime&&a[0].time-r[0].time<this.longHoldTime)&&("d","o","w","n",this.resetPointerEvent("up"),this.resetPointerEvent("down"),this.cancelTouchSingleClick=!0),i)},t.ChartEngine.prototype.doubleClick=function(e,i,a){var r,n;if(r="doubl",r+="eC",r+="lick",n="doubl",n+="eClic",n+="k",!this.runPrepend(n,arguments)&&!this.editingAnnotation)return t.ChartEngine.drawingLine?this.undo():void(this.activeDrawing||(this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:a,panel:this.currentPanel})||this.dispatch("doubleClick",{stx:this,button:e,x:i,y:a}),this.runAppend(r,arguments)))},t.ChartEngine.prototype.handleMouseOut=function(e){var i,a;if(e=e||window.event,!t.withinElement(this.chart.container,e.pageX,e.pageY)){if(this.runPrepend("handleMouseOut",arguments))return;this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown&&(this.userPointerDown=!1,this.drawingLine=!1,i=this.backOutY(e.pageY),a=this.backOutX(e.pageX),this.drawingClick(this.currentPanel,a,i)),this.repositioningAnchorSelector&&(this.repositioningAnchorSelector=null),this.insideChart=!1,this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),this.runAppend("handleMouseOut",arguments)}},t.ChartEngine.prototype.startLongHoldTimer=function(){var e,t;e=this,this.cancelLongHold=!1,this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),a.D0H(),t=function(){e.cancelLongHold||(e.longHoldTookEffect=!0,e.dispatch("longhold",{stx:e,panel:e.currentPanel,x:e.cx,y:e.cy}),a.a9S(),e.displayDragOK())},this.longHoldTime?this.longHoldTimeout=setTimeout(t,this.longHoldTime):0===this.longHoldTime&&t()},t.ChartEngine.prototype.grabHandle=function(e){this.runPrepend("grabHandle",arguments)||e&&(t.ChartEngine.crosshairY=e.top+this.top,t.ChartEngine.resizingPanel=e,e.handle.classList.add("stx-grab"),a.D0H(),this.runAppend("grabHandle",arguments))},t.ChartEngine.prototype.grabbingHand=function(){this.allowScroll&&this.grabbingScreen&&(t.touchDevice||this.container.classList.add("stx-drag-chart"))},t.ChartEngine.prototype.releaseHandle=function(){var e;if(e="relea",e+="seHa",e+="n",e+="dle",this.runPrepend("releaseHandle",arguments))return!0;t.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),t.ChartEngine.resizingPanel&&t.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),t.ChartEngine.resizingPanel=null,this.runAppend(e,arguments)},t.ChartEngine.prototype.findHighlights=function(e,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z,q,J;r=this.preferences[e?"highlightsTapRadius":"highlightsRadius"],this.highlightViaTap=e;var{cx:V,cy:B}=this;if(this.anyHighlighted=!1,this.currentPanel){var{chart:W}=this.currentPanel;if(this.activeDrawing&&(i=!0),n=!1,s=null,o=i?{}:{forceShow:!0,type:"drawing"},l={x0:this.tickFromPixel(V-r,W),x1:this.tickFromPixel(V+r,W),y0:this.valueFromPixel(B-r,this.currentPanel),y1:this.valueFromPixel(B+r,this.currentPanel),cx0:V-r,cx1:V+r,cy0:B-r,cy1:B+r,r:r},this.repositioningDrawing&&l.x1-l.x0<2)l.x1++,l.x0--;else if(l.x1==l.x0){l.x0-=.5,-682632090,-1653184673,h=2;for(var U=1;-682632090!==a.U6$(U.toString(),U.toString().length,38333);U++)l.x1/=201,h+=2;-1653184673!==a.Z2Z(h.toString(),h.toString().length,56734)&&(l.x1%=663),l.x1+=.5}if(c=this.markerHelper&&this.markerHelper.chartMap[W.name]&&this.markerHelper.chartMap[W.name].markers,!W.hideDrawings)for(var Q=this.drawingObjects.length-1;Q>=0;Q--)u=this.drawingObjects[Q],this.panels[u.panelName]&&(this.repositioningDrawing&&this.repositioningDrawing!=u||(d=u.highlighted,p=u.panelName==this.currentPanel.name,u.repositioner=u.intersected(this.crosshairTick,this.crosshairValue,l),p=p&&u.repositioner,!i&&p?(d?(s=u,this.anyHighlighted&&this.singleDrawingHighlight&&(u.highlighted=!1),u.highlighted&&u.highlighted!=d&&(n=!0)):d!=u.highlight(!0)&&(s||(s=u),this.anyHighlighted&&this.singleDrawingHighlight&&(u.highlighted=!1),n=!0),this.anyHighlighted=!0):d!=u.highlight(!1)&&(n=!0),u.highlighted&&(o.noDelete=u.permanent,o.noEdit=!this.callbackListeners.drawingEdit.length)));for(m in this.layout.studies)(g=this.layout.studies[m]).prev=g.highlight,g.highlight=this.yaxisMatches(g,this.grabStartYAxis);for(m in W.seriesRenderers){(x=W.seriesRenderers[m]).params.highlight=this.yaxisMatches(x,this.grabStartYAxis);for(var X=0;X<x.seriesParams.length;X++)(v=x.seriesParams[X]).prev=v.highlight,v.highlight=x.params.highlight}for(f=0;c&&f<c.length;f++)(y=c[f]).params.box&&(this.activeMarker=null,y.prev=c[f].highlight,y.highlight=!1);if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedDraggable=null,!i&&!this.anyHighlighted&&this.controls.anchorHandles)for(var Z in this.controls.anchorHandles){b=this.controls.anchorHandles[Z];var{handle:G,sd:K}=b;if(C=this.resolveX(V),S=this.resolveY(B),G){var{left:ee,top:te,right:ie,bottom:ae}=G.getBoundingClientRect();if(t.boxIntersects(ee,te,ie,ae,C,S,C,S)){"a","nch","orHandle",b.highlighted=!0,this.anyHighlighted=!0,n=!0,o={message:K.name,type:"anchorHandle"};continue}!0===b.highlighted&&(b.highlighted=!1,n=!0)}}if(!i&&!this.anyHighlighted&&W.dataSegment&&(w=this.barFromPixel(V))>=0&&w<W.dataSegment.length){for(m in this.overlays)if("fun","ction",(g=this.overlays[m]).panel==this.currentPanel.name&&!1!==g.study.isHighlighted)if("function"!=typeof g.study.isHighlighted){if(W.dataSegment[w]){for(var re in g.outputMap)if(oe.call(this,w,l,re,g.getYAxis(this))){g.name!=g.panel&&(this.anyHighlighted=!0),g.highlight=re;break}if(g.highlight){this.highlightedDataSetField=re;break}}}else g.study.isHighlighted(this,V,B)&&(g.highlight=!0,this.anyHighlighted=!0);for(m in W.seriesRenderers){if(this.highlightedDataSetField)break;if(M=(k=W.seriesRenderers[m]).params.panel,k!=this.mainSeriesRenderer&&(k.params.highlightable||this.currentVectorParameters.vectorType)&&M==this.currentPanel.name)for(f=0;f<k.seriesParams.length;f++){if("-","-",">","C","l","os","e",(T=(v=k.seriesParams[f]).field)||k.highLowBars||(T=this.defaultPlotField||"Close"),v.symbol&&v.subField&&(T+="--\x3e"+v.subField),!(A=k.params.yAxis)&&M&&(A=this.panels[M].yAxis),k.params.step&&w>0){if(!k.caches[v.id])continue;if(!(D=k.caches[v.id][w])&&0!==D)continue;a.D0J(38),(((_=k.caches[v.id][a.q7n("1",64,w)])||0===_)&&B+r>=D&&B-r<=_||B-r<=D&&B+r>=_)&&(v.highlight=!0,this.anyHighlighted=!0)}else oe.call(this,w,l,T,A,k,v.id)&&(v.highlight=!0,this.anyHighlighted=!0);if(v.highlight){this.highlightedDataSetField=T;break}}}}for(m in F=this.preferences.dragging,this.overlays)(g=this.overlays[m]).highlight&&(this.anyHighlighted=!0,E=g.inputs.display||g.name,o={message:E=this.translateIf(E),noDelete:g.permanent,noEdit:!g.editFunction,type:"study"},s=null,(!0===F||F&&F.study)&&(P=g),L=g.getYAxis(this)),g.prev!=g.highlight&&(n=!0);for(m in W.seriesRenderers){H=(N=W.seriesRenderers[m]).params.yAxis?N.params.yAxis.textStyle:null;for(var ne=0;ne<N.seriesParams.length;ne++)v=N.seriesParams[ne],N.params.highlightable&&v.highlight&&(this.anyHighlighted=!0,"auto"==(I=v.color||H)&&(I=this.defaultColor),v.opacity&&1!==v.opacity&&(I=t.hexToRgba(t.colorToHex(I),parseFloat(v.opacity))),o={message:v.display||v.symbol,backgroundColor:I,noDelete:v.permanent,type:"series"},s=null,(!0===F||F&&F.series)&&(P=N,N.params.highlight=!0),L=N.getYAxis(this)),v.prev!=v.highlight&&(n=!0)}for(m in this.plugins)O={},(j=this.plugins[m]).findHighlights&&((O=j.findHighlights(this,e,i)).somethingChanged&&(n=!0),O.anyHighlighted&&(this.anyHighlighted=!0,o=O.stickyArgs||{}));for(var se in Y=this.whichPanel(B),R=this.whichYAxis(Y,V),L||(L=R),this.currentBaseline&&(L=this.currentBaseline.getYAxis(this)),L&&(L.highlight||(n=!0),L.highlight=!0),$=[],this.panels)$=$.concat(this.panels[se].yaxisLHS).concat(this.panels[se].yaxisRHS);for(m=0;m<$.length;m++)(L!=$[m]||i)&&($[m].highlight&&(n=!0),$[m].highlight=!1);for(f=0;c&&f<c.length;f++)(z=(y=c[f]).params.box)&&y.params.panelName===this.currentPanel.name&&(q=t.convertBoxToPixels(this,this.currentPanel.name,l),t.boxIntersects(q.x0,q.y0,q.x1,q.y1,z.x0,z.y0,z.x1,z.y1)&&(this.activeMarker=y,y.highlight=!0,this.markerHelper.highlighted.push(y)),y.prev!=y.highlight&&(n=!0));if(n&&(this.draw(),o.panel=Y,this.anyHighlighted&&!this.grabStartYAxis?o.panel=Y:o={},this.displaySticky(o),this.clearMeasure(),s&&s.measure()),(!0===F||F&&F.yaxis)&&R&&!R.noDraw&&(this.anyHighlight=!0,P=R),this.anyHighlighted||this.setMeasure(),P&&!Y.noDrag){if("stx","-","draggable",this.longHoldTookEffect&&!this.cancelLongHold){if(P.params)for(m in P.params.dependentOf&&((P=W.seriesRenderers[P.params.dependentOf]).params.highlight=!0),W.seriesRenderers)W.seriesRenderers[m].params.dependentOf==P.params.name&&(W.seriesRenderers[m].params.highlight=!0);if(this.highlightedDraggable=P,P.getDependents)for(m in J=P.getDependents(this,!0),this.overlays)g=this.overlays[m],J.indexOf(g)>-1&&(g.highlight=!0)}this.container.classList.add("stx-draggable")}else"stx-draggabl","e",this.container.classList.remove("stx-draggable");this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()}function oe(e,i,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,D,k,M,T,A,_,P;if(l=this.chart,h=this.currentPanel,n||(n=h.yAxis),c=r.split("--\x3e"),u=c[0],(d=c[1])||(d="Close"),p=l.dataSegment[w],x=null,b=null,C=null,a.D0J(1),S=new Array(a.q7n(1,"3")),D=s&&s.caches[o],p&&D){for(f=D[w],x=p.tick,(f||0===f)&&(S[0]=1),k=w-1;k>=0;k--)if(D[k]||0===D[k]){y=D[k],a.D0J(85),b=a.q7n(x,k,w),a.D0J(7),S[a.q7n(0,"1")]=1;break}for(k=w+1;k<l.dataSegment.length;k++)if(D[k]||0===D[k]){v=D[k],a.D0J(85),C=a.S40(x,k,w),S[2]=1;break}}if(null===b&&(m=this.getPreviousBar.call(this,l,r,w))&&(b=m.tick,y=F(m)),null===C&&(g=this.getNextBar.call(this,l,r,w))&&(C=g.tick,v=F(g)),null===b&&null===C)return!1;function F(e){var t;if(!e)return null;if((t=e[u])&&(t[d]||0===t[d])&&(t=t[d]),s&&s.getBasis&&(t+=s.getBasis(e,u,d)),!l.transformFunc||n!=l.yAxis)return t;if(e.transform&&u in e.transform)return(t=e.transform[u])&&(t[d]||0===t[d])&&(t=t[d]),t;for(var i=1;-823366544!==a.Z2Z(i.toString(),i.toString().length,19843);i++)return l.transformFunc(this,l,t);return a.U6$(2..toString(),2..toString().length,16541),l.transformFunc(this,l,t)}return D||(f=F(p),y=F(m),v=F(g),x=p.tick,m&&(b=m.tick),g&&(C=g.tick)),y||0===y||(y=0,b=0),v||0===v||(f||0===f?(v=f,a.H6P(10),S[2]=S[a.q7n("0",0)]):(v=y,S[2]=S[1]),C=o&&l.series[o].parameters.extendToEndOfDataSet?l.dataSet.length-1:b),f||0===f||(f=v,x=C,S[0]=S[2],0===y&&0===b&&(y=f,b=x,S[1]=S[0])),M=this.pixelFromTransformedValue.bind(this),f=(T=this.valueFromPixel.bind(this))(S[0]?f:M(f,h,n),h),y=T(S[1]?y:M(y,h,n),h),v=T(S[2]?v:M(v,h,n),h),A=t.convertBoxToPixels(this,h.name,i),_=t.convertBoxToPixels(this,h.name,{x0:b,y0:y,x1:x,y1:f}),P=t.convertBoxToPixels(this,h.name,{x0:x,y0:f,x1:C,y1:v}),!(!t.boxIntersects(A.x0,A.y0,A.x1,A.y1,_.x0,_.y0,_.x1,_.y1,"segment")&&!t.boxIntersects(A.x0,A.y0,A.x1,A.y1,P.x0,P.y0,P.x1,P.y1,"segment"))}},t.ChartEngine.prototype.rightClickHighlighted=function(){this.runPrepend("rightClickHighlighted",arguments)||(this.deleteHighlighted(!0),this.runAppend("rightClickHighlighted",arguments))},t.ChartEngine.prototype.deleteHighlighted=function(e,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(r="deleteH",r+="ighlight",r+="ed",!this.runPrepend("deleteHighlighted",arguments)){if(this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),(n=!1===this.bypassRightClick)||!this.bypassRightClick.drawing)for(var x=this.drawingObjects.length-1;x>=0;x--)(s=this.drawingObjects[x]).highlighted&&(e?this.rightClickDrawing(s,i):s.permanent||(s.abort()||(o=this.exportDrawings(),this.drawingObjects.splice(x,1),this.undoStamp(o,this.exportDrawings())),this.changeOccurred("vector")));if(n||!this.bypassRightClick.study)for(var b in this.overlays)((l=this.overlays[b]).overlay||l.underlay)&&l.highlight&&!l.permanent&&(e||i?this.rightClickOverlay(b,i):this.removeOverlay(b));if(h=this.currentPanel.chart,n||!this.bypassRightClick.series)for(var C in h.seriesRenderers)if((c=h.seriesRenderers[C]).params.highlightable){d=(u=this.panels[c.params.panel])&&u.yAxis.name;for(var S=c.seriesParams.length-1;S>=0;S--)p=c.seriesParams[S],!c.params.highlight&&!p.highlight||p.permanent||(c.removeSeries(p.id),c.seriesParams.length<1&&(this.removeSeriesRenderer(c),c.params.name==d?this.electNewPanelOwner(c.params.panel):(this.checkForEmptyPanel(c.params.panel),(m=this.getYAxisByName(u,c.params.name))&&(m.name=m.studies[0]||m.renderers[1]))))}if(this.draw(),this.resizeChart(),this.clearMeasure(),g=this.controls.mSticky){g.style.display="none",f=-1776811706,y=-1920009664,v=2;for(var w=1;a.U6$(w.toString(),w.toString().length,74662)!==f;w++)g.children[2].innerHTML="",a.H6P(28),v+=a.S40("2",32);a.U6$(v.toString(),v.toString().length,46823)!==y&&(g.children[0].innerHTML="")}this.runAppend(r,arguments)}},t.ChartEngine.prototype.displayDragOK=function(e){var t,i,r,n,s,o,l,h,c,u;if(a.a9S(),t=this.controls.dragOk){if(e||this.tapForHighlighting&&this.touchingEvent&&!this.anyHighlighted||this.findHighlights(this.highlightViaTap),r=(i=this.highlightedDraggable)&&i.undraggable&&i.undraggable(this),n=this.cx,s=this.cy,!e){if(i&&!r&&this.longHoldTookEffect&&!this.cancelLongHold)"stx-dra","g-chart",".fie","ld",o=i.inputs&&i.inputs.display||i.params&&(i.params.display||i.params.name)||i.name,t.querySelector(".field").setAttribute("text",o),p.call(this,t),t.style.display="inline-block",this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart","stx-drag-axis"):this.container.classList.replace("stx-drag-chart","stx-drag-series");else for(var d in t.style.display="none",this.draw(),this.container.classList.remove("stx-drag-series"),this.container.classList.remove("stx-drag-axis"),this.panels){for("r","ig","ht","l","e","f","t",(l=this.panels[d].subholder.classList).remove("dropzone"),l.remove("all"),l.remove("left"),l.remove("right"),l.remove("top"),l.remove("bottom"),h=0;h<this.panels[d].yaxisLHS.length;h++)this.panels[d].yaxisLHS[h].dropzone=null;for(h=0;h<this.panels[d].yaxisRHS.length;h++)this.panels[d].yaxisRHS[h].dropzone=null}this.draw()}i&&("p","x",c=s+t.offsetHeight,u=Math.max(0,n-t.offsetWidth),a.D0J(0),t.style.top=a.q7n(c,"px"),a.D0J(0),t.style.left=a.S40(u,"px"),p.call(this,t))}function p(e){var t,i;t=this.translateIf(e.querySelector(".field").getAttribute("text")),a.D0H(),(i=this.whichYAxis(this.whichPanel(this.cy),this.cx,this.cy))&&"all"==i.dropzone&&(t+="--\x3e"+this.translateIf(i.name)),e.querySelector(".field").innerHTML=t}},t.ChartEngine.prototype.displayDrawOK=function(){var e,i,r,n,s,o,l;if(a.D0H(),(e=this.controls.drawOk)&&t.Drawing)if((i=t.Drawing[this.currentVectorParameters.vectorType])&&(i=new i),this.highlightedDataSetField&&i&&i.getYValue){a.D0J(21),r=-a.S40("255978135",0),a.H6P(21),n=-a.q7n("987213232",0),s=2;for(var h=1;a.U6$(h.toString(),h.toString().length,3564)!==r;h++)e.style.display="inline-block",o=this.cy+e.offsetHeight,l=this.cx-e.offsetWidth,a.H6P(0),e.style.top=a.q7n(o,"px"),a.H6P(0),e.style.left=a.q7n(l,"px"),e.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField),s+=2;a.U6$(s.toString(),s.toString().length,45301)!==n&&("p","x",e.style.display=".field",o=this.cy-e.offsetHeight,l=this.cx/e.offsetWidth,a.D0J(14),e.style.top=a.S40("px",o),a.H6P(14),e.style.left=a.S40(".field",l),e.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField))}else e.style.display="none"},t.ChartEngine.prototype.mouseWheel=function(e){var i,r,n,s,o,l,h,c,u,d;if(i="mou",i+="seWh",i+="e",i+="el",r="vertica",r+="l",n="mo",n+="us",n+="eWhee",n+="l",!this.runPrepend(n,arguments)&&(e.preventDefault&&e.preventDefault(),""===this.openDialog&&(s=e.deltaX,o=e.deltaY,Math.abs(o)>Math.abs(s)?s=0:o=0,a.D0H(),this.lastMouseWheelEvent=Date.now(),0!==Math.abs(s)||0!==Math.abs(o)))){if(this.allowSideswipe&&0!==s)return this.lastMove="horizontal",(l=s)>50&&(l=50),l<-50&&(l=-50),this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=t.ChartEngine.crosshairX,this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mousemoveinner(t.ChartEngine.crosshairX-l,t.ChartEngine.crosshairY),this.updateChartAccessories(),void(this.grabbingScreen=!1);if(this.lastMove=r,this.allowZoom&&this.displayInitialized){if(!o)if("mousewheel"==t.wheelEvent){a.H6P(86);var p=a.S40(5,8,14);a.D0J(0);var m=a.S40(33,7);if(o=p/m*e.wheelDelta,e.wheelDeltaX){a.D0J(87);var g=a.q7n(17,20,7,154,2);a.H6P(7);var f=a.q7n(400,440);s=g/f*e.wheelDeltaX}}else o=e.detail;if(void 0===e.deltaMode&&(e.deltaMode="MozMousePixelScroll"==e.type?0:1),h=-o,1==e.deltaMode&&(a.H6P(7),h*=a.q7n(0,"33")),c=null,u=null,this.mouseWheelAcceleration&&(d=Math.max(Math.pow(Math.abs(h),.3),1),a.H6P(88),c=a.S40(1,d,"0.1"),a.H6P(89),u=a.q7n(d,0,1,"0.2")),this.zoomInitiatedByMouseWheel=!0,h>0?this.reverseMouseWheel?this.zoomOut(null,u):this.zoomIn(null,c):h<0&&(this.reverseMouseWheel?this.zoomIn(null,c):this.zoomOut(null,u)),!this.runAppend(i,arguments))return!1}}},t.ChartEngine.handleContextMenu=function(e){var i;a.D0H();for(var r=0;r<t.ChartEngine.registeredContainers.length;r++)if((i=t.ChartEngine.registeredContainers[r].stx)&&i.anyHighlighted)return e.preventDefault&&e.preventDefault(),!1},"undefined"!=typeof document&&document.addEventListener("contextmenu",t.ChartEngine.handleContextMenu),t.ChartEngine.htmlControls={annotationSave:'<span class="stx-btn stx_annotation_save" style="display: none;">save</span>',annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;">cancel</span>',mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span> <span class="mStickyRightClick"><span class="overlayEdit stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="overlayTrashCan stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="mouseDeleteInstructions"><span>(</span><span class="mouseDeleteText">right-click to delete</span><span class="mouseManageText">right-click to manage</span><span class="dragAnchorText">drag to change anchor time</span><span>)</span></span></span><span class="stickyLongPressText">(long-press to drag)</span></div>',drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:'<div class="stx_drag_ok"><div class="icon"></div><div class="field"></div></div>',crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:'<div class="stx_chart_controls" style="display: none; bottom: 22px;"><div class="chartSize"><span class="stx-zoom-out"></span><span class="stx-zoom-in"></span></div></div>',home:'<div class="stx_jump_today" style="display:none"><span></span></div>',floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:'<div class="stx-ico-handle" style="display: none;"><span></span></div> ',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>',notificationTray:'<div class="stx_notification_tray"><template><div><span class="icon"></span><span class="message"></span></div></template></div>'},t.ChartEngine.prototype.registerChartControl=function(e,i,r){var n,s,o;if(".stx","-zoom-in",n=this.controls,a.a9S(),n&&n.chartControls&&!n.chartControls.querySelector("."+e))return s=null,(o=n.chartControls.querySelector(".stx-zoom-in"))?(s=document.createElement("span"),a.D0J(37),s.innerHTML=a.q7n("</span>",'<span class="stx-tooltip">',i),a.D0J(0),s.className=a.q7n("stx-chart-control-button ",e),o.parentNode.appendChild(s),r&&t.safeClickTouch(s,r),t.touchDevice||this.makeModal(s),s):void 0},t.ChartEngine.prototype.zoomOut=function(e,t){var i,r,n,s;if(!this.runPrepend("zoomOut",arguments))for(var o in this.preferences.zoomOutSpeed?t=this.preferences.zoomOutSpeed:t||(a.D0J(8),t=a.q7n(1,"0.7")),a.D0H(),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,i=this,this.charts)n=(r=this.charts[o]).width*t/this.layout.candleWidth,!1===r.allowScrollFuture&&!1===r.allowScrollPast&&n>r.dataSet.length&&(n=r.dataSet.length),s=this.chart.width/n,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(l(r),this.layout.candleWidth,s);function l(e){return a.D0H(),function(t){var a;if(i.zoomSet(t,e),i.animations.zoom.hasCompleted){if(a="zoo",a+="mOut",i.runAppend(a,arguments))return;i.changeOccurred("layout"),i.continuousZoom&&i.continuousZoom.execute(!0)}}}},t.ChartEngine.prototype.zoomIn=function(e,t){var i,r,n,s;if(!this.runPrepend("zoomIn",arguments))for(var o in a.a9S(),this.preferences.zoomInSpeed?t=this.preferences.zoomInSpeed:t||(t=.7),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,i=this,this.charts){if(n=(r=this.charts[o]).width*t/this.layout.candleWidth,r.maxTicks-n<1){a.D0J(7);var l=a.q7n(9,10);n=r.maxTicks-l}n<this.minimumZoomTicks&&(n=this.minimumZoomTicks),s=this.chart.width/n,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(h(r),this.layout.candleWidth,s)}function h(e){return a.D0H(),function(t){var a;if(i.zoomSet(t,e),i.animations.zoom.hasCompleted){if(a="la",a+="y",a+="ou",a+="t",i.runAppend("zoomIn",arguments))return;i.changeOccurred(a),i.continuousZoom&&i.continuousZoom.execute()}}}},t.ChartEngine.prototype.createCrosshairs=function(){var e,t,i,a;e="createCrossh",e+="airs",t="cre",t+="a",t+="teCrosshairs",this.runPrepend(t,arguments)||!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(i=this.controls.crossX,a=this.controls.crossY,i&&(i.onmousedown||(i.onmousedown=function(e){return e.preventDefault&&e.preventDefault(),!1})),a&&(a.onmousedown||(a.onmousedown=function(e){return e.preventDefault&&e.preventDefault(),!1})),this.runAppend(e,arguments))},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){a.D0H(),i||console.error("interaction feature requires activating movement feature."),i=!0}},d=e=>{var t,i=N;i.D0H(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Marker||(t.ChartEngine.helpersToRegister.push((function(e){e.markerHelper={chartMap:{},classMap:{},domMarkers:[],highlighted:[]}})),t.ChartEngine.prototype.addToHolder=function(e){var a,r,n,s;(a=this.panels[e.params.panelName])&&(r=e.params,n=e.node,(s=e.stxNodeCreator)&&s.prepareForHolder&&(n=s.prepareForHolder(e)),r.chartContainer?this.container.appendChild(e.node):r.includeAxis?a.holder.appendChild(e.node):a.subholder.appendChild(n),e.chart=a.chart,s&&s.addToHolder&&s.addToHolder(e),i.D0H(),s&&s.expand&&t.Marker.initializeScrollBehavior(s))},t.ChartEngine.prototype.getMarkerArray=function(e,t){var a,r;for(var n in a=[],i.D0H(),this.markers)for(var s=0;s<this.markers[n].length;s++)"pa","n","elNam","e",r=this.markers[n][s],"panelName"==e?r.params.panelName==t&&a.push(r):"label"==e?n==t&&a.push(r):"all"==e&&a.push(r);return a},t.ChartEngine.prototype.removeFromHolder=function(e){var t,i,a,r,n,s;if((t=this.panels[e.params.panelName])&&(e.node.parentNode==t.holder?t.holder.removeChild(e.node):e.node.parentNode==t.subholder?t.subholder.removeChild(e.node):e.node.parentNode==this.container&&this.container.removeChild(e.node)),i=this.markers[e.params.label]){for(a=0;a<i.length;a++)if(i[a]===e){i.splice(a,1);break}if(r=this.markerHelper.chartMap[e.chart.name])for(a=0;a<r.markers.length;a++)if(r.markers[a]===e){r.markers.splice(a,1);break}if((n=this.markerHelper.classMap[e.className])&&(s=n[e.params.panelName]))for(a=0;a<s.length;a++)if(s[a]===e){s.splice(a,1);break}}},t.ChartEngine.prototype.moveMarkers=function(e,t){var i,a;i=this.getMarkerArray("panelName",e);for(var r=0;r<i.length;r++)i[r].params.panelName=t;for(var n in this.markerHelper.classMap)(a=this.markerHelper.classMap[n][e])&&(this.markerHelper.classMap[n][t]=a,delete this.markerHelper.classMap[n][e])},t.ChartEngine.prototype.establishMarkerTicks=function(){var e,t;for(var i in e=this.markerHelper.chartMap)if((t=e[i]).dataSetLength!=this.charts[i].dataSet.length)for(var a=0;a<t.markers.length;a++)this.setMarkerTick(t.markers[a])},t.ChartEngine.prototype.futureTickIfDisplayed=function(e){var t,a,r,n,s,o,l,h,c;if(!((t=e.chart).dataSet.length<1)){a=t.xaxis[t.xaxis.length-1].DT,i.H6P(90);var u=i.q7n(4740640,60008,8,10);if(a=new Date(a.getTime()-this.timeZoneOffset*u),!(e.params.x>a)){r=t.maxTicks-t.dataSegment.length,n=t.dataSet.length+r,i.D0H(),l=new Date(+t.dataSet[t.dataSet.length-1].DT),h=this.standardMarketIterator(l,null,t),c=e.params.x.getTime();for(var d=t.dataSet.length;d<n;d++){if(s=l.getTime(),(o=(l=h.next()).getTime())==c)return void(e.tick=d);if(o>c&&s<c)return i.H6P(7),void(e.tick=Math.max(i.q7n(1,d),0))}}}},t.ChartEngine.prototype.setMarkerTick=function(e){var t,a,r,n;if(t=e.chart,"master"==e.params.xPositioner&&e.params.x)e.tick=Math.floor(e.params.x/this.layout.periodicity);else if("date"==e.params.xPositioner&&e.params.x){n=e.params.x.getTime();for(var s=0;s<t.dataSet.length;s++){if(a=r=t.dataSet[s].DT.getTime(),s>0&&(a=t.dataSet[s-1].DT.getTime()),r==n)return void(e.tick=s);if(r>n&&a<n)return i.H6P(7),void(e.tick=Math.max(i.S40(1,s),0));if(n<r)return void(e.tick=null)}if(t.dataSet.length<1)return;new Date(+t.dataSet[s-1].DT).getTime()<n&&(e.params.future=!0),e.tick=null}},t.ChartEngine.prototype.positionMarkers=function(){var e,t,a,r,n,s,o;if(e=this,t=this.chart,e.markerHelper&&(this.markerDelay||0===this.markerDelay?this.markerTimeout||(this.markerTimeout=setTimeout(h,this.markerDelay)):h(),a=this.getFirstLastDataRecord(t.dataSegment,"tick"),i.a9S(),r=this.getFirstLastDataRecord(t.dataSegment,"tick",!0),a&&r)){n=this.getMarkerArray("all");for(var l=0;l<n.length;l++)o=(s=n[l]).stxNodeCreator,a.tick<=s.tick&&s.tick<=r.tick?o&&o.drawMarker&&o.drawMarker(s):s.attached&&o.expand&&(o.expand.style.visibility="hidden")}function h(){var t,a,r,n;if(!e.runPrepend("positionMarkers",arguments)){for(var s in e.markerTimeout=null,e.markerHelper.classMap)for(var o in e.markerHelper.classMap[s])t=e.markerHelper.classMap[s][o],a=e.panels[o],t.length&&((r={stx:e,arr:t,panel:a}).firstTick=a.chart.dataSet.length-a.chart.scroll,r.lastTick=r.firstTick+a.chart.dataSegment.length,(n=t[0].constructor.placementFunction)?n(r):e.defaultMarkerPlacement(r));i.D0H(),e.runAppend("positionMarkers",arguments)}}},t.Marker=t.Marker||function(e){var i,a,r,n;if(this.params={xPositioner:"date",yPositioner:"value",panelName:"chart",permanent:!1,label:"generic",includeAxis:!1},t.extend(this.params,e),this.params.node||("D","I","V",this.params.node=document.createElement("DIV")),!(i=this.params.stx))return"Marker created"," without specifying stx",void console.log("Marker created without specifying stx");this.className||(this.className="CIQ.Marker"),t.derivedFrom(this.params.node,t.Marker.NodeCreator)?(this.stxNodeCreator=this.params.node,this.node=this.stxNodeCreator.node):this.node=this.params.node,a=this.params.label,i.markers[a]||(i.markers[a]=[]),i.markers[a].push(this),r=i.panels[this.params.panelName],this.chart=r.chart,i.markerHelper.chartMap[this.chart.name]||(i.markerHelper.chartMap[this.chart.name]={dataSetLength:0,markers:[]}),i.markerHelper.chartMap[this.chart.name].markers.push(this),(n=i.markerHelper.classMap[this.className])||(n=i.markerHelper.classMap[this.className]={}),n[this.params.panelName]||(n[this.params.panelName]=[]),n[this.params.panelName].push(this),this.stxNodeCreator&&this.stxNodeCreator.deferAttach||i.addToHolder(this),i.setMarkerTick(this),this.stxNodeCreator&&this.stxNodeCreator.drawMarker&&this.stxNodeCreator.drawMarker(this)},t.Marker.prototype.remove=function(){this.params.stx.removeFromHolder(this)},t.Marker.prototype.click=function(e){var t;"number"==typeof arguments[0]&&(e={cx:arguments[0],cy:arguments[1],panel:arguments[3]});var{cx:a,cy:r,panel:n}=e;i.a9S(),this.params.stx&&(t=this.params.node).click&&t.click(a,r,this,n)},t.Marker.prototype.doubleClick=function(e){let{cx:t,cy:a,panel:r}=e;return i.D0H(),!1},t.Marker.prototype.render=function(){var e,t;i.D0H(),e=[this],t={stx:this.params.stx,arr:e,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(t)},t.Marker.removeByLabel=function(e,t){var i,a;i=e.getMarkerArray("label",t);for(var r=0;r<i.length;r++)a=i[r],e.removeFromHolder(a),a.stxNodeCreator&&a.stxNodeCreator.remove&&a.stxNodeCreator.remove(a);e.draw()},t.Marker.positionContentVerticalAndHorizontal=function(e){var a,r,n,s,o,l,h,c,u,d,p;if((a=e.querySelectorAll(".stx-marker-expand")[0])&&t.trulyVisible(a)){i.a9S(),r=a.offsetHeight,(n=a.style).left=n.right="",n.bottom=n.top="",o=(s=getComputedStyle(a)).left,l=s.bottom,i.H6P(36);var m=i.q7n(19,3,12);h=e.offsetLeft+parseInt(o,m),c=parseInt(l,10),u=e.offsetTop-(c+r-e.offsetHeight),d=e.parentNode.offsetWidth,p=e.parentNode.offsetHeight,h+a.offsetWidth>d&&(n.right=o,n.left="auto"),e.offsetTop<=p?u>p-r&&(n.top=p-e.offsetTop-r+"px",n.bottom="auto"):(i.H6P(0),n.top=i.q7n(p,"px")),e.offsetTop+e.offsetHeight>=0?u<0&&("p","x",n.top=-e.offsetTop+"px",n.bottom="auto"):n.bottom="0px"}},t.Marker.initializeScrollBehavior=function(e){var{expand:i}=e;if(i){i.addEventListener(t.wheelEvent,e=>e.stopPropagation());var{scrollbarStyling:a}=t.UI||{};a?a.refresh(i):("scr","o","l","l",i.style.overflowY="scroll")}},t.ChartEngine.prototype.getBarBounds=function(e){var t,a,r,n;return"p","an",i.a9S(),"d","f",this.layout.chartType,t="pandf"==this.layout.aggregationType?{high:Math.max(e.pfOpen,e.pfClose),low:Math.min(e.pfOpen,e.pfClose)}:{high:e.High,low:e.Low},e.markerHigh&&(t.high=e.markerHigh),e.markerLow&&(t.low=e.markerLow),void 0===e.Open&&(a=e.Close),void 0===e.High&&(r=Math.max(e.Open||a,e.Close)),void 0===e.Low&&(n=Math.min(e.Open||a,e.Close)),t.high||0===t.high||(t.high=r),t.low||0===t.low||(t.low=n),t},t.ChartEngine.prototype.defaultMarkerPlacement=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A;a=e.panel,r=e.yAxis?e.yAxis:e.panel.yAxis,n=a.chart,o=(s=e.stx).chart.highLowBars,(l=n.defaultPlotField)&&!o||(l="Close"),h={};for(var _=0;_<e.arr.length;_++)if("a","u","t","o",u=(c=e.arr[_]).params,!c.params.box){if(d=c.node,c.clientWidth||(c.clientWidth=d.clientWidth),c.clientHeight||(c.clientHeight=d.clientHeight),p=null,m=u.xPositioner,g=u.yPositioner,f=c.tick,y=n.dataSet,v=c.clientWidth,"none"!=m){if("bar"==m&&u.x){u.x<n.xaxis.length&&(x=n.xaxis[u.x])&&(p=x.data),i.H6P(36);var P=i.q7n(11,0,10);d.style.left=Math.round(s.pixelFromBar(u.x,n)-v/2)+P+"px"}else{if(!f&&0!==f){if(!(u.future&&n.scroll<n.maxTicks)){d.style.left="-1000px";continue}if(s.futureTickIfDisplayed(c),!(f=c.tick)&&0!==f){d.style.left="-1000px";continue}}if(f<y.length&&(p=y[f]),c.leftpx=Math.round(s.pixelFromTick(f,n)-n.left-v/2),c.rightEdge=c.leftpx+v,d.style.left=c.leftpx+"px",f<e.firstTick&&c.rightEdge<n.left-50)continue}if(!p){i.D0J(7);var F=i.S40(20,21);p=y[y.length-("1"|F)]}}else if(g.indexOf("candle")>-1&&(b=getComputedStyle(d).left)&&(C=s.barFromPixel(parseInt(b,10),n))>=0&&!(p=n.xaxis[C].data)){i.D0J(35);var L=i.q7n(11,8,5,3,175);p=y[y.length-L]}if(d.style.top="auto",S=u.y,w=c.clientHeight,"none"!=g){"b","o","ttom","o","n_","candle","und","er_candle",i.D0J(0);i.q7n(859,15);i.D0J(52);var E=i.q7n(96978,8817,12);i.D0J(91);var N=i.q7n(9,1,6,5,9);i.H6P(15);i.q7n(6,135,96);i.D0J(11);var H=i.S40(0,4,39,10);i.D0J(39);var I=i.q7n(27958,3,23961);i.H6P(0);var j=i.S40(604,9066);if(k=g+(E>"238.66"*N?"-":"7990"*H<I?399:j)+d.style.left,M=u.chartContainer?s.height:a.yAxis.bottom,T=0,0,void 0===h[k]&&(h[k]=0),A=h[k],h[k]+=w,"value"!=g||!S&&0!==S)if("below_candle"!=g&&"under_candle"!=g||!p)if("on_candle"==g&&p){if("p","x",D=p[l],o){i.H6P(41);var O=i.S40(3,12,38);D=(p.Low+p.High)/O}i.D0J(39);var Y=i.S40(36,19,15);T=Math.round(M-s.pixelFromPrice(D,a,r)-w/Y-A)+"px"}else"top"==g?T=Math.round(M-w-A-a.top)+"px":"bottom"==g?("p","x",T=Math.round(A)+"px"):p&&(D=p[l],o&&(D=s.getBarBounds(p)[r.flipped?"low":"high"]),T=Math.round(M-s.pixelFromPrice(D,a,r)+A)+"px");else"h","i","g","h",D=p[l],o&&(D=s.getBarBounds(p)[r.flipped?"high":"low"]),T=Math.round(M-s.pixelFromPrice(D,a,r)-w-A)+"px";else{i.H6P(92);var R=i.S40(1,58,18,16,20);T=Math.round(M-s.pixelFromPrice(S,a,r)-w/R)+"px"}d.style.bottom!=T&&(d.style.bottom=T)}t.Marker.positionContentVerticalAndHorizontal(d)}},t.Marker.NodeCreator=function(){},t.Marker.NodeCreator.toNode=function(){return i.D0H(),this.node},t.Marker.Simple=function(e){var a,r,n,s;function o(){i.D0H(),t.Marker.positionContentVerticalAndHorizontal(a)}(a=this.node=document.createElement("div")).className="stx-marker",a.classList.add(e.type),e.category&&a.classList.add(e.category),r=t.newChild(a,"div","stx-visual"),t.newChild(a,"div","stx-stem"),"callout"==e.type?("di","v",s=t.newChild(r,"div","stx-marker-content"),t.newChild(s,"h4",null,e.headline),n=t.newChild(s,"div","stx-marker-expand"),t.newChild(n,"p",null,e.story)):(n=t.newChild(a,"div","stx-marker-expand"),t.newChild(n,"h4",null,e.headline),t.newChild(n,"p",null,e.story),t.safeClickTouch(n,(function(e){i.D0H(),a.classList.toggle("highlight")}))),t.safeClickTouch(r,(function(e){a.classList.toggle("highlight"),setTimeout(o,10)})),this.nodeType="Simple",this.expand=n},t.inheritsFrom(t.Marker.Simple,t.Marker.NodeCreator,!1))},p=e=>{var t,i,a,r,n,s,o,l=N;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,r=24*(a=36e5),n=t.Market,t.Market=function(e){this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",i.Date?this.tz_lib=i.Date:this.tz_lib=Date,this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,void 0!==e&&e&&!t.isEmpty(e)&&("und","ef","ined",e.market_definition&&(e=e.market_definition),e.rules&&(this.rules=e.rules),e.market_tz&&(this.market_tz=e.market_tz),e.convertOnDaily&&(this.convertOnDaily=e.convertOnDaily),e.hour_aligned,this.hour_aligned=e.hour_aligned,void 0!==e.beginningDayOfWeek&&(this.beginningDayOfWeek=e.beginningDayOfWeek),void 0!==e.enabled_by_default&&e.enabled_by_default instanceof Array&&(this.enabled_by_default=e.enabled_by_default),this.market_def=e,void 0===this.market_def.name&&(this.market_def.name="no market name specified"),t.Market._createTimeSegments(this),this.getSessionNames())},t.Market.Symbology=function(){},t.Market.Symbology.isForeignSymbol=function(e){return!1},l.D0H(),t.Market.Symbology.isFuturesSymbol=function(e){return!1},t.Market.Symbology.isRateSymbol=function(e){return!1},t.Market.Symbology.isForexSymbol=function(e){return l.D0H(),!1},t.Market.Symbology.isForexMetal=function(e,t){return l.a9S(),!1},t.Market.Symbology.isForexFuturesSymbol=function(e){return!!t.Market.Symbology.isForexSymbol(e)||(!!t.Market.Symbology.isFuturesSymbol(e)||(l.D0H(),!1))},t.Market.Symbology.factory=function(e){return null},t.Market.Symbology.encodeTermStructureInstrumentSymbol=function(e,t){l.D0H(),console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.")},n&&t.extend(t.Market,n),t.Market.prototype.sessions=null,t.Market.prototype.beginningDayOfWeek=0,t.Market.prototype.getSessionNames=function(){var e,t;return this.rules?this.sessions||(e=[],t=[],this.rules.map((function(i){i.name&&-1===e.indexOf(i.name)&&(e.push(i.name),t.push({name:i.name,enabled:!!i.enabled&&i.enabled}))})),this.sessions=t):this.sessions=[],l.D0H(),this.sessions.slice()},t.Market.prototype._find_next_segment=function(e,t){var i,a,r,n;return this.market_def&&this.rules?(i=new Date(+e),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(i)&&(r=this.zseg_match.close_parts.hours,n=this.zseg_match.close_parts.minutes,i.setHours(r),i.setMinutes(n),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})),a.next()):null},t.Market.prototype._find_prev_segment=function(e,t){var i,a,r,n,s;return this.market_def&&this.rules?(i=new Date(+e),l.D0H(),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),null===(r=this._wasOpenIntraDay(i))?(i=new Date(i-6e4),r=this._wasOpenIntraDay(i)):(t&&i.getHours()===this.zseg_match.open_parts.hours&&i.getMinutes()===this.zseg_match.open_parts.minutes||!t&&i.getHours()===this.zseg_match.close_parts.hours&&i.getMinutes()===this.zseg_match.close_parts.minutes)&&(i=a.previous()),r?(n=this.zseg_match.open_parts.hours,s=this.zseg_match.open_parts.minutes,i.setHours(n),i.setMinutes(s),i=(a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})).previous(),this.zseg_match.close_parts.hours===n&&this.zseg_match.close_parts.minutes===s?t?a.next():i:this.zseg_match.adjacent_child?i:t?a.next():i):a.previous()):null},t.Market.prototype.disableSession=function(e,t){var i;if(i=!1,void 0!==t&&t&&(i=!0),e){for(var a=0;a<this.normalHours.length;a++)this.normalHours[a].name===e&&(this.normalHours[a].enabled=i);for(a=0;a<this.extraHours.length;a++)this.extraHours[a].name===e&&(this.extraHours[a].enabled=i)}},t.Market.prototype.enableSession=function(e){this.disableSession(e,"enable_instead")},t.Market.prototype.enableAllAvailableSessions=function(){var e;l.a9S(),e=this.getSessionNames();for(var t=0;t<e.length;t++)this.enableSession(e[t].name)},t.Market.prototype.getClose=function(e,t,i,a){var r,n;if(!this.market_def)return null;if(!this.rules)return null;if(r=e,e||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==t){if(this._wasOpenIntraDay(r)&&this.zseg_match.name===t)return r.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.child_;)n=n.child_;for(;!n.enabled;)n=n.parent_;return r.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNextClose=function(e,t,i){var a,r,n;if(!this.market_def)return null;if(!this.rules)return null;for(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),this._wasOpenIntraDay(a)||(a=this.newIterator({begin:a,interval:1,inZone:this.market_tz,outZone:this.market_tz}).next()),r=a.getDate(),n=this.zseg_match;n.adjacent_child;)n=n.adjacent_child,r+=1;return a.setDate(r),a.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),a=this._convertFromMarketTZ(a,i)},t.Market.prototype.getNextOpen=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_next_segment(a),this.zseg_match.adjacent_parent?(a=this.getNextOpen(a,this.market_tz,this.market_tz),a=this._convertFromMarketTZ(a,i)):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getOpen=function(e,t,i,a){var r,n;if(!this.market_def)return null;if(!this.rules)return null;if(r=e,e||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==t){if(this._wasOpenIntraDay(r)&&this.zseg_match.name==t)return r.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.parent_;)n=n.parent_;for(;!n.enabled;)n=n.child_;return r.setHours(n.open_parts.hours,n.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNormalOpen=function(){var{market_def:e,rules:t}=this;return e&&t?e.normal_daily_open?e.normal_daily_open:"FOREX"===e.name?"17:00":t.find(e=>{let{name:t}=e;return!t||""===t}).open:"00:00"},t.Market.prototype.getNormalClose=function(){var{market_def:e,rules:t}=this;return e&&t?e.normal_daily_close?e.normal_daily_close:"FOREX"===e.name?"17:00":t.filter(e=>{let{dayofweek:t,name:i}=e;return t&&(!i||""===i)}).pop().close:"24:00"},t.Market.prototype.getPreviousClose=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!1),this.zseg_match.adjacent_child?this.getPreviousClose(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.close_parts.hours),a.setMinutes(this.zseg_match.close_parts.minutes),a=this._convertFromMarketTZ(a,i),l.D0H(),a)):null},t.Market.prototype.getPreviousOpen=function(e,t,i){var a;return l.D0H(),this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getSession=function(e,t){return l.D0H(),e=this._convertToMarketTZ(e,t),this._wasOpenIntraDay(e)&&this.zseg_match?this.zseg_match.name:null},t.Market.prototype.marketZoneNow=function(){return l.D0H(),this._convertToMarketTZ(new Date)},t.Market.prototype.isHourAligned=function(){return this.hour_aligned},t.Market.prototype.isOpen=function(){var e;return e=new Date,this.market_tz&&(e=new this.tz_lib(e.getTime(),this.market_tz)),this._wasOpenIntraDay(e)},t.Market.prototype.isMarketDay=function(){var e;return e=new Date,this.market_tz&&(e=new this.tz_lib(e.getTime(),this.market_tz)),this._wasOpenDaily(e)},t.Market.prototype.isMarketDate=function(e){return l.D0H(),this._wasOpenDaily(e)},t.Market.prototype.newIterator=function(e){var i,a;return i=!1,e.periodicity?i=e.periodicity:e.multiple&&(i=e.multiple),(a=e.interval)||("m","in","u","te",a="minute"),"hour"==a&&(a=60),i||(i=1),e.begin||(e.begin=new Date,e.inZone=null),a==parseInt(a,10)&&(a=parseInt(a,10),e.periodicity<1/60?("mil","l","isecon","d",i=i*a*6e4,a="millisecond"):e.periodicity<1?("s","econd",i=i*a*60,a="second"):(i*=a,a="minute")),e.timeUnit&&("secon","d","mill","isecond","millisecond"===e.timeUnit||"second"===e.timeUnit?a=e.timeUnit:"tick"===e.timeUnit&&(a="second")),"tick"==a&&(a="second"),e.interval=a,e.multiple=i,e.market=this,new t.Market.Iterator(e)},t.Market.prototype._wasOpenDaily=function(e){return this._was_open(e,!1)},t.Market.prototype._wasOpenIntraDay=function(e){return this._was_open(e,!0)},t.Market.prototype._was_open=function(e,t){var i,a,r,n,s,o,h,c,u,d;if(i=this.zseg_match,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;for(a=!1,r=!1,n=e.getFullYear(),s=e.getMonth()+1,o=e.getDay(),l.a9S(),h=e.getDate(),u=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds(),void 0===t&&(t=!0),d=0;d<this.normalHours.length;d++)if((c=this.normalHours[d]).enabled&&((a=c.dayofweek===o)&&t&&(a=u>=c.open&&u<c.close),a)){if(!t&&this.zseg_match&&(c.open_parts.hours>this.zopen_hour||c.open_parts.hours==this.zopen_hour&&c.open_parts.minutes>this.zopen_minute))continue;if(c===i||c.adjacent_parent||c.adjacent_child||(this.shouldResetToBeginningOfSegment=!0),this.zopen_hour=c.open_parts.hours,this.zopen_minute=c.open_parts.minutes,this.zclose_hour=c.close_parts.hours,this.zclose_minute=c.close_parts.minutes,this.zmatch_open=u===c.open,this.zseg_match=c,t)break}for(d=0;d<this.extraHours.length;d++)if((c=this.extraHours[d]).enabled&&("*"===c.year||n===c.year)&&s===c.month&&h===c.day&&(!(r=!t&&c.open||u>=c.open&&u<c.close)&&this.zseg_match&&(a=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),r)){if(!t&&this.zseg_match&&(c.open_parts.hours>this.zopen_hour||c.open_parts.hours==this.zopen_hour&&c.open_parts.minutes>this.zopen_minute))continue;if(this.zopen_hour=c.open_parts.hours,this.zopen_minute=c.open_parts.minutes,this.zclose_hour=c.close_parts.hours,this.zclose_minute=c.close_parts.minutes,this.zmatch_open=u===c.open,this.zseg_match=c,t)break}return this.zseg_match},t.Market.prototype._wasClosed=function(e){return!this._was_open(e,!0)},t.Market.prototype._wasOpen=function(e){return this._was_open(e,!0)},t.Market.prototype._tzDifferenceMillis=function(e,t,i){var a;return 0,a=e,60*(e.getTimezoneOffset()-a.getTimezoneOffset())*1e3},t.Market._createTimeSegments=function(e){var t,i,a,r,n;t=function(e,t){if(l.D0H(),24===e.close_parts.hours&&0===t.open_parts.hours&&0===t.open_parts.minutes){if(i.dayofweek===r.dayofweek-1)return!0;if(6===i.dayofweek&&0===r.dayofweek)return!0}return!1};for(var o=0;o<e.rules.length;o++){"n","a","m","e","und","efine","d",void 0===(a=JSON.parse(JSON.stringify(e.rules[o]))).open&&void 0===a.close&&("0","0:","00",a.open="00:00",a.close="00:00"),a.hasOwnProperty("name")||(a.name="");try{if("und","ef","i","ned",void 0!==a.dayofweek?(a.year="*",r=s._createDayOfWeekSegment(e,a),i&&(i.dayofweek===r.dayofweek?(i.child_=r,r.parent_=i):t(i,r)&&(i.adjacent_child=r,r.adjacent_parent=i)),i=r):void 0!==a.date?(a.isDayOfWeek=!1,a.dayofweek=-1,r=s._createDateTimeSegment(e,a)):console.log("Error, unknown rule type "+a),e.enabled_by_default)for(var h=0;h<e.enabled_by_default.length;h++)if(n=e.enabled_by_default[h],r.name===n){r.enabled=!0;break}}catch(e){"Error, creating market ru","les ",console.log("Error, creating market rules "+e)}}},t.Market._timeSegment={},(s=t.Market._timeSegment).re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,s.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s.re_split_hours_minutes=/^(\d\d):(\d\d)$/,s.re_split_hour_minutes=/^(\d):(\d\d)$/,s._hashCode=function(e){var t,i,a;if(t=0,0===e.length)return t;for(i=0,a=e.length;i<a;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t},s._splitHoursMinutes=function(e){var t,i;return i={hours:NaN,minutes:NaN},null===(t=s.re_split_hour_minutes.exec(e))&&null===(t=s.re_split_hours_minutes.exec(e))||(i.hours=parseInt(t[1],10),i.minutes=parseInt(t[2],10)),i},s._createDayOfWeekSegment=function(e,t){var i;return""===(i={name:t.name,isDayOfWeek:!0,dayofweek:t.dayofweek,date_str:"*",open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1}).name&&(i.enabled=!0),i.hash_code=this._hashCode((i.open+i.close).toString()),e.normalHours.push(i),i},s._createDateTimeSegment=function(e,t){var i,a,r;if(null===(i=this.re_regular_iso.exec(t.date))){if(null===(i=this.re_wild_card_iso.exec(t.date)))return void console.log("Warning: invalid date format on rule -> "+t.date);a="*"}else a=parseInt(i[1],10);return""===(r={name:t.name,isDayOfWeek:!1,dayofweek:-1,year:a,month:parseInt(i[2],10),day:parseInt(i[3],10),date_str:t.date,open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),enabled:!1}).name&&(r.enabled=!0),r.hash_key=this._hashCode(r.date_str+r.open+r.close),e.extraHours.push(r),r},s._secSinceMidnight=function(e,t,i){var a,r,n;return a=t.split(":"),n=60*(r=parseInt(a[0],10))*60+60*parseInt(a[1],10),i||24===r&&(n=60*r*60+1),n},t.Market.prototype._convertToMarketTZ=function(e,t){var i,a;if(t)i=new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t);else{-1229625172,807487669,a=2;for(var r=1;-1229625172!==l.Z2Z(r.toString(),r.toString().length,50758);r++)i=new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),a+=2;807487669!==l.U6$(a.toString(),a.toString().length,52538)&&(i=new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))}return i.setTimezone&&i.setTimezone(this.market_tz),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())},t.Market.prototype._convertFromMarketTZ=function(e,t){var i;return l.D0H(),i=new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),this.market_tz),t?(i.setTimezone&&i.setTimezone(t),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(i.getTime())},t.Market.Iterator=function(e){this.market=e.market,this.begin=e.begin,this.interval=e.interval,this.multiple=e.multiple,this.inZone=e.inZone,this.outZone=e.outZone,this.clock=new t.Market.Iterator._Clock(e.market,e.interval,e.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,e.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!1},t.Market.Iterator.prototype.date=function(){return this.clock._date()},t.Market.Iterator.prototype.futureTick=function(e){var t,i,a,r,n,s,o;if(this.clock.skip=1,t=0,(i=this.intraDay?this.market._convertToMarketTZ(e.end,this.inZone).getTime():e.end.getTime())===(a=this.clock.ctime))return t;if(r=2,1e3,n=0,e.sample_size&&(r=e.sample_size),s=(new Date).getTime(),i>a){for(this.clock.forward=!0;this.clock.ctime<i;)if(t+=1,n+=1,this.clock._findNext(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(this.clock.ctime-a)/t,t=Math.floor((i-a)/o);break}this.clock.ctime>i&&t--}else for(this.clock.forward=!1;this.clock.ctime>i;)if(t+=1,n+=1,this.clock._findPrevious(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(a-this.clock.ctime)/t,t=Math.floor((a-i)/o);break}return t},t.Market.Iterator.prototype.isHourAligned=function(){return l.a9S(),!this.intraDay||this.market.isHourAligned()},t.Market.Iterator.prototype.isOpen=function(){return this.market.isOpen()},t.Market.Iterator.prototype.next=function(e){this.clock.skip=1,e&&(this.clock.skip=e),l.a9S(),this.clock.forward=!0;for(var t=0;t<this.clock.skip;t++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator.prototype.peek=function(){return l.a9S(),this.clock._peek()},t.Market.Iterator.prototype.previous=function(e){this.clock.skip=1,l.D0H(),e&&(this.clock.skip=e),this.clock.forward=!1;for(var t=0;t<this.clock.skip;t++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator._Clock=function(e,t,i){var n,s;i%60==0&&"second"===t&&("m","inute",t="minute",i/=60),this.market=e,this.interval=t,this.multiple=i,this.intra_day=!1,this.intervals=[],this.max_iters=10080,n=r,s=this._dayImpl,"millisecond"===t?(s=this._millisImpl,n=1):"second"===t?(s=this._secondImpl,n=1e3):"minute"===t?(s=this._minuteImpl,n=6e4):"hour"===t?(s=this._hourImpl,n=a):"day"===t?(s=this._dayImpl,n=r):"week"===t?(s=this._weekImpl,n=7*r):"month"===t?(s=this._monthImpl,n=30*r):console.log('Periodicity ERROR: "'+t+'" is not a valid interval. Please see setPeriodicity() for details.'),this.tick_time=n*i,this.intra_day=this.tick_time<r,this._findPrevious=this._findNext=s},(o=t.Market.Iterator._Clock.prototype)._total_minutes=function(e,t,i,a){return 60*(i-e)-t+a},o._alignMinutes=function(){var e,t,i,a,r;if(!this.market.market_def||void 0===this.market.zopen_minute)return[];for(e=this.market.zopen_minute,(t=this.market.zseg_match)&&t.adjacent_parent?e=t.adjacent_parent.open/60-1440:this.market.isHourAligned()&&this.multiple%60==0&&(e=0),l.a9S(),i=this._total_minutes(this.market.zopen_hour,e,this.market.zclose_hour,this.market.zclose_minute),a=[],r=0;r<i;)a.push(e+r),r+=this.multiple;return a},o._alignBaseZero=function(e){var t,i;for(i=[t=0];!((t+=this.multiple)>=e);)i.push(t);return i},o._date=function(){var e,t;return e=Math.round(this.ctime),t=new Date(e),l.D0H(),this.intra_day?this.display_date=new Date(e+this.shift_millis):this.display_date=t,t},o._alignToBoundary=function(e,t){var i,a,r;i=0,a=0,r=t;for(var n=0;n<e.length-1&&(i=e[n],a=e[n+1],t!==i&&t!==a);n++){if(t>i&&t<a){r=i;break}n+1===e.length-1&&(r=a)}return l.a9S(),r},o._peek=function(){return this._date().toString()},o._seekHr=function(){this.forward?this.ctime-=a:this.ctime+=a},o._setStart=function(e){var t,i;t=this.market._tzDifferenceMillis(e),i=new Date(e.getTime()+t),this.shift_millis=t,this.ctime=i.getTime(),this.shift_millis=0,this.ctime=e.getTime()},o._tickTock=function(){l.a9S(),this.forward?this.ctime+=this.tick_time:this.ctime-=this.tick_time},o._tockTick=function(){l.D0H(),this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},o._tickTock24=function(){l.a9S(),this.ctime+=r},o._tockTick24=function(){this.ctime-=r},o._windMaybe=function(e,t){var i,a,r,n;for(i=0,a=new Date(this.ctime),l.a9S(),r=!1;!e.call(this.market,a);)if(t.call(this),r=!0,a=new Date(this.ctime),(i+=1)>this.max_iters){n="Warning! max iterations ("+this.max_iters,n+=") reached with no rule match.",console.log(n);break}return r},o._millisImpl=function(){var e,t,i,a,r,n,s,o,l,h;return e=!1,this.mperiods_aligned||(t=this._alignBaseZero(1e3),a=(i=new Date(this.ctime)).getMilliseconds(),a=this._alignToBoundary(t,a),i.setMilliseconds(0),this.ctime=i.getTime()+a,this.mperiods_aligned=!0,e=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),!e&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this._date().getMilliseconds(),l=this.tick_time,this.tick_time=6e4,h=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=l,this.multiple=h,this.ctime+=1e3*s+o),this._date()},o._secondImpl=function(){var e,t,i,a,r,n,s,o,l;return e=!1,this.speriod_aligned||(t=this._alignBaseZero(60),a=(i=new Date(this.ctime)).getSeconds(),a=this._alignToBoundary(t,a),i.setSeconds(a),i.setMilliseconds(0),this.ctime=i.getTime(),this.speriod_aligned=!0,e=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),!e&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this.tick_time,this.tick_time=6e4,l=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=o,this.multiple=l,this.ctime+=1e3*s),this._date()},o._minuteImpl=function(){var e,t,i,a,r,n,s,o,h,c;return e=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),i=(t=new Date(this.ctime)).getTimezoneOffset(),a=t.getMinutes(),r=t.getHours(),n=this._alignMinutes(),s=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,r,a)+this.market.zopen_minute,s=e?this.forward?n[n.length-1]:n[0]:this._alignToBoundary(n,s),r=Math.floor(s/60)+this.market.zopen_hour,t.setHours(r,s%60,0,0),o=t.getTimezoneOffset()-i,(this.forward&&o<0||!this.forward&&o>0)&&t.setTime(t.getTime()-6e4*o),this.ctime=t.getTime(),this._tickTock(),h=this.market.hour_aligned&&this.multiple%60==0,(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!h&&this.shouldResetToBeginningOfSegment)&&(t=new Date(this.ctime),this.forward?(t.setMinutes(this.market.zopen_minute),t.setHours(this.market.zopen_hour)):(c=(n=this._alignMinutes())[n.length-1],t.setMinutes(c%60),t.setHours(Math.floor(c/60)+this.market.zopen_hour)),this.ctime=t.getTime()),l.a9S(),this._date()},o._hourImpl=function(){var e,t,i,a,r;return this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),e=new Date(this.ctime),this.market.isHourAligned()?e.setMinutes(0):e.setMinutes(this.market.zopen_minute),e.setSeconds(0),e.setMilliseconds(0),this.ctime=e.getTime(),this._tickTock(),t=this.market.zseg_match,(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!this.market.hour_aligned&&t!=this.market.zseg_match)&&(i=new Date(this.ctime),this.forward?(i.setMinutes(this.market.zopen_minute),i.setHours(this.market.zopen_hour)):(r=(a=this._alignMinutes())[a.length-1],i.setMinutes(r%60),i.setHours(Math.floor(r/60)+this.market.zopen_hour)),this.ctime=i.getTime()),this._date()},o._dayImpl=function(){var e,t;for(this._windMaybe(this.market._wasOpenDaily,this._seekHr),(e=new Date(this.ctime)).setHours(12,0,0,0),this.ctime=e.getTime(),t=0;t<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(t+=1);return e=new Date(this.ctime),l.D0H(),e.setHours(0),this.ctime=e.getTime(),this._date()},o._weekImpl=function(){var e,t;for(e=this.market,(t=new Date(this.ctime)).setHours(12),this.ctime=t.getTime(),this._tickTock(),t=new Date(this.ctime);t.getDay()!==e.beginningDayOfWeek;)this._tockTick24(),t=new Date(this.ctime);return this._windMaybe(e._wasOpenDaily,this._tickTock24),(t=new Date(this.ctime)).setHours(0,0,0,0),this.ctime=t.getTime(),this._date()},o._monthImpl=function(){var e;return(e=new Date(this.ctime)).setDate(15),this.ctime=e.getTime(),this._tickTock(),(e=new Date(this.ctime)).setDate(1),e.setHours(12),this.ctime=e.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),(e=new Date(this.ctime)).setHours(0,0,0,0),this.ctime=e.getTime(),this._date()},o._findNext=null,o._findPrevious=null},m=e=>{var t,i,a,r=N;r.W9l=function(e){if(r&&e)return r.b3E(e)},r.t8k=function(e){if(r&&e)return r.T36(e)},r.p$N=function(e){if(r)return r.T36(e)},r.T8d=function(e){if(r.a9S(),r)return r.T36(e)},t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,r.D0H(),i="valid",t.valid=0,t[r.N1F("b2c4")?"ChartEngine":""][r.k2l("7ffa")?"prototype":""][r.T8d("4161")?"":"mousemoveinner"]=function(e,a){r.Z8y=function(e){if(r.a9S(),r&&e)return r.b3E(e)},r.h$W=function(e){if(r.D0H(),r)return r.T36(e)},r.E_H=function(e){if(r.a9S(),r)return r.b3E(e)},r.W8S=function(e){if(r&&e)return r.T36(e)},r.T88=function(e){if(r)return r.T36(e)};var n=-(r.D$Y("92a7")?844542962:324290841),s=-(r.p$N("1a74")?3302050485:1048811085),o=r.T88("1c18")?8315121327:1094513846,l=-(r.t8k("3be7")?457334356:220651779),h=-(r.e3H("4bf3")?203811305:160172757),c=938329254,u=-(r.W8S("13c3")?841488028:606335826),d=-(r.Q6a("97be")?1125489557:9123140606),p=-(r.a3z("c2a4")?456310199:119647035),m=-1009981692;if(r.n54(0,!1,156439)===n||r.i0k(0,!1,r.W9l("847a")?943323:752378)===s||r.i0k(r.E_H("a9aa")?9:3,!!r.h$W("5ec6"),773926)===o||r.i0k(r.Z8y("1f8c")?1:9,!0,690418)===l||r.i0k(8,!0,312995)===h||r.i0k(10,!0,301501)===c||r.i0k(9,!0,915786)===u||r.i0k(9,!0,934133)===d||r.i0k(10,!0,326031)===p||r.i0k(8,!0,619256)===m){var g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z;if(!this.chart.canvas)return;if(!(t.isAndroid||t.isIOS7or8||this.chart.canvas.height==Math.floor(this.devicePixelRatio*this.chart.container.clientHeight)&&this.chart.canvas.width==Math.floor(this.devicePixelRatio*this.chart.container.clientWidth)))return void this.resizeChart();if(this.runPrepend("mousemoveinner",arguments))return;function q(e){if(993328910===r.i0k(0,!1,604262)||2095898763===r.i0k(0,!1,895612)||582624611===r.i0k(9,!0,614852)||-1720030956===r.n54(9,!0,939183)||1778808651===r.i0k(8,!0,249190)||1110901479===r.i0k(10,!0,641023)||-1633607308===r.n54(9,!0,872180)||-497724238===r.i0k(9,!0,541880)||-1857759905===r.i0k(10,!0,296497)||-2061065206===r.i0k(8,!0,123661)){var t,i;e.currentBaseline=null,-1073236151,r.H6P(21),t=-r.S40("1654866714",0),r.D0J(21),i=r.S40("2",0);for(var a=1;-1073236151!==r.U6$(a.toString(),a.toString().length,47096);a++)e.runAppend("",f),r.H6P(28),i+=r.q7n("2",64);r.Z2Z(i.toString(),i.toString().length,20404)!==t&&e.runAppend("mousemoveinner",f)}}if(f=arguments,y=this.container.getBoundingClientRect(),this.top=y.top,this.left=y.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.hasDragged=!0,t.ChartEngine.crosshairX=e,t.ChartEngine.crosshairY=a,v=this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),x=this.cx=this.crossXActualPos=this.backOutX(t.ChartEngine.crosshairX),this.grabbingScreen&&this.anyHighlighted){r.D0J(93);var J=r.S40(5762,17,16,16,20);r.D0J(94);var V=r.q7n(9,17,7,13,16);if(Math.pow(this.grabStartX-e,J)+Math.pow(this.grabStartY-a,V)<36)return}if(this.cancelLongHold=!0,b=function(e,a){if(-1375377331===r.n54(0,!1,988309)||1709747795===r.n54(0,!1,512672)||2101416112===r.n54(9,!0,285223)||1473004637===r.i0k(9,!0,820859)||-570364054===r.i0k(8,!0,386337)||485238424===r.n54(10,!0,635588)||-277515614===r.n54(9,!0,236778)||-720212561===r.i0k(9,!0,691052)||-156853376===r.i0k(10,!0,438322)||-2142817629===r.i0k(8,!0,996088)){if(0===t[i])return e.whichPanel(a)||e.chart.panel;e.draw[i]||(e.draw=function(){r.a9S();2137621837!==r.i0k(0,!1,161315)&&-1316499516!==r.i0k(0,!1,272674)&&77316148!==r.n54(9,!0,116838)&&-1276284452!==r.n54(9,!0,799075)&&-1949278359!==r.n54(8,!0,694869)&&1330680705!==r.n54(10,!0,213141)&&-695431039!==r.n54(9,!0,525393)&&1589160700!==r.n54(9,!0,834294)&&-1223308209!==r.i0k(10,!0,855574)&&-2139150734!==r.i0k(8,!0,619691)||t.clearCanvas(this.chart.canvas,this)},e.draw[i]=!0)}},this.currentPanel=b(this,v),!this.currentPanel)return;if((C=this.currentPanel.chart).dataSet&&(this.crosshairTick=this.tickFromPixel(x,C),g=this.valueFromPixel(v,this.currentPanel),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,g),(S="chart"==this.currentPanel.name?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField)&&this.crosshairTick<C.dataSet.length&&this.crosshairTick>-1&&(g=C.dataSet[this.crosshairTick][S],this.crossYActualPos=this.pixelFromPrice(g,this.currentPanel))),t.ChartEngine.crosshairX>=this.left&&t.ChartEngine.crosshairX<=this.right&&t.ChartEngine.crosshairY>=this.top&&t.ChartEngine.crosshairY<=this.bottom?this.insideChart=!0:this.insideChart=!1,w=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&t.ChartEngine.crosshairY<=w+this.top&&t.ChartEngine.crosshairY>w-this.xaxisHeight+this.top,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel.left)&&this.insideChart,(this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen)&&(this.undisplayCrosshairs(),!this.overXAxis&&!this.overYAxis))return;if(!this.displayCrosshairs&&!t.ChartEngine.resizingPanel)return void this.undisplayCrosshairs();if(this.repositioningBaseline)return this.setBaselineUserLevel(),q(this);if(this.repositioningAnchorSelector)return D=this.repositioningAnchorSelector.hoverTick,(k=this.tickFromPixel(this.cx,this.chart))>=0&&k<this.chart.dataSet.length&&(!D||0===D||k!==D)&&(this.repositioningAnchorSelector.hoverTick=k,this.draw()),q(this);if(this.grabbingScreen&&!t.ChartEngine.resizingPanel){if(M="z",M+="oo",M+="m",T="p",T+="a",T+="n",this.highlightedDraggable)return this.displayDragOK(!0),this.dragPlotOrAxis(x,v),q(this);if(this.anyHighlighted){for(A in t.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=!1,this.overlays)this.overlays[A].highlight=!1;for(A in C.series)C.series[A].highlight=!1;this.displaySticky()}if(-1==this.grabStartX&&(this.grabStartX=t.ChartEngine.crosshairX,this.grabStartScrollX=C.scroll),-1==this.grabStartY&&(this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollY=this.currentPanel.yAxis.scroll),_=t.ChartEngine.crosshairX-this.grabStartX,P=t.ChartEngine.crosshairY-this.grabStartY,0===_&&0===P)return;if(Math.abs(_)+Math.abs(P)>5&&(this.grabOverrideClick=!0),L=this.layout.candleWidth,this.allowZoom&&this.grabMode!=T&&(0===this.grabMode.indexOf(M)||this.overXAxis||this.grabStartYAxis)){if(E="z",E+="oom-",E+="y",""===this.grabMode&&(N="zo",N+="o",N+="m",N+="-y",this.overXAxis?this.grabMode="zoom-x":this.grabStartYAxis&&(this.grabMode=N)),"zoom-x"==this.grabMode?P=0:this.grabMode==E&&(_=0),_&&(this.grabStartX=t.ChartEngine.crosshairX,H=L-_/this.chart.maxTicks,this.zoomSet(H,this.chart)),this.layout.setSpan&&(this.layout.setSpan=null,this.changeOccurred("layout")),F=this.grabStartYAxis)if(F.flipped&&(P*=-1),F.zoom=Math.round(this.grabStartZoom+P),this.grabStartZoom<F.height){if(F.zoom>=F.height){r.D0J(16);var B=r.S40(15,16);F.zoom=F.height-B}}else if(F.zoom<=F.height){r.D0J(95);var W=r.S40(15,14,1);F.zoom=F.height+W}}else if(!this.overYAxis&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!0}),this.allowScroll)){if(I="s",I+="c",I+="roll",j="p",j+="a",j+="n",Math.abs(P)<this.yTolerance){if(!this.yToleranceBroken&&(r.H6P(28),P=r.q7n("0",0),0===_))return}else this.yToleranceBroken=!0;this.grabStartMicropixels||(this.grabStartMicropixels=0),this.grabMode=j,C.scroll=this.grabStartScrollX,r.D0J(7);var U=r.q7n(75,80);r.D0J(35);var Q=r.S40(3,8,0,20,83);if(this.micropixels=this.grabStartMicropixels+_*(this.shift?U:Q),!this.lineTravelSpacing){for(;this.micropixels>0;)this.micropixels-=L,C.scroll++;for(;this.micropixels<-L;)this.micropixels+=L,C.scroll--}C.scroll>=C.maxTicks?this.preferences.whitespace=this.initialWhitespace:this.preferences.whitespace=(C.maxTicks-C.scroll)*L,this.currentPanel==this.grabStartPanel&&((F=this.currentPanel.yAxis).flipped&&(P*=-1),F.scroll=this.grabStartScrollY+P),this.dispatch(I,{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}return O=function(e){if(r.a9S(),1884413784===r.n54(0,!1,344643)||843305499===r.n54(0,!1,248261)||-1828805273===r.n54(9,!0,510641)||-237356123===r.n54(9,!0,537059)||-416237720===r.n54(8,!0,990150)||-896677701===r.i0k(10,!0,899186)||-2073281220===r.n54(9,!0,420358)||-699202426===r.i0k(9,!0,117347)||1224353024===r.i0k(10,!0,899180)||-431992262===r.n54(8,!0,704648))return function(){-1293231227!==r.i0k(0,!1,569305)&&646952451!==r.i0k(0,!1,691864)&&1991222530!==r.n54(9,!0,932806)&&963808928!==r.n54(9,!0,103712)&&74811302!==r.n54(8,!0,622995)&&-1013306543!==r.n54(10,!0,895631)&&347559400!==r.n54(9,!0,438279)&&753282069!==r.i0k(9,!0,986995)&&-1020650155!==r.n54(10,!0,837758)&&777206014!==r.i0k(8,!0,898309)||(e.draw(),e.updateChartAccessories())}},t.ChartEngine.useAnimation?window.requestAnimationFrame(O(this)):(this.draw(),this.updateChartAccessories()),this.activeDrawing&&(t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.render(this.chart.tempCanvas.context),this.activeDrawing.measure()),void this.undisplayCrosshairs()}return this.grabMode="",this.overXAxis||this.overYAxis?(this.updateChartAccessories(),this.tapForHighlighting&&this.touchingEvent&&!this.anyHighlighted||this.findHighlights(),q(this)):(this.controls.crossX&&(this.controls.crossX.style.left=this.pixelFromTick(this.crosshairTick,C)-.5+"px"),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.insideChart&&!t.ChartEngine.resizingPanel?(Y=this.currentVectorParameters.vectorType,this.layout.studies&&(R=this.layout.studies[this.currentPanel.name])&&(this.preferences.dragging&&this.preferences.dragging.study||delete this.overlays[R.name],Y&&(this.overlays[R.name]=R)),t.Drawing&&Y&&t.Drawing[Y]&&(new t.Drawing[Y]).dragToDraw||this.doDisplayCrosshairs(),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):t.ChartEngine.drawingLine?this.activeDrawing&&($=this.panels[this.activeDrawing.panelName],g=this.adjustIfNecessary($,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),$)),this.magnetizedPrice&&$.name==this.currentPanel.name&&(g=this.adjustIfNecessary($,this.crosshairTick,this.magnetizedPrice)),null===this.magnetizedPrice&&t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.move(this.chart.tempCanvas.context,this.crosshairTick,g),this.activeDrawing.measure&&this.activeDrawing.measure()):t.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(z="m",z+="ove",this.dispatch(z,{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!1}),this.tapForHighlighting&&this.touchingEvent&&!this.anyHighlighted||this.findHighlights()),q(this))}},t.ChartEngine.prototype.swipeStart=function(e){var t;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),this.swipe.velocity=0,this.swipe.amplitude=0,this.swipe.frame=e.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),this.swipe.chart=e,this.swipe.end=!1,this.swipe.timeConstant=325,this.swipe.cb=null,t=this,requestAnimationFrame((function(){r.a9S(),t.swipeSample()}))},t.ChartEngine.prototype.swipeSample=function(){var e,i,a,n,s,o,l;(e=this.swipe).end||(i=this,20,(n=(a=Date.now())-e.timestamp)<20?requestAnimationFrame((function(){r.D0H(),i.swipeSample()})):(o=t.touchDevice?.4:.8,e.timestamp=a,s=(e.chart.scroll-e.frame)*this.layout.candleWidth+this.micropixels-e.micropixels,e.frame=e.chart.scroll,e.micropixels=this.micropixels,r.D0J(96),l=o*r.S40(1e3,1,s,n)+.2*e.velocity,Math.abs(l)>Math.abs(e.velocity)&&(e.velocity=l),Math.abs(s)<6&&(e.velocity=0),r.a9S(),requestAnimationFrame((function(){i.swipeSample()}))))},t.ChartEngine.prototype.swipeRelease=function(){var e,t;(e=this.swipe).velocity>3e3&&(e.velocity=3e3),e.velocity<-3e3&&(e.velocity=-3e3),r.D0H(),(e.velocity>10||e.velocity<-10)&&(e.amplitude=.8*e.velocity,e.scroll=e.chart.scroll,e.target=e.amplitude,e.timestamp=Date.now(),t=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame((function(){r.a9S(),t.autoscroll()})))},t.ChartEngine.prototype.dragPlotOrAxis=function(e,i){var a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j,O,Y,R,$,z,q,J,V,B,W,U;if("non","e",(function(){var e,t,i;for(var a in r.a9S(),e=!1,this.panels){for(t="a",t+="l",["dropzone",t+="l","left","right","top","bottom"].forEach(n(this.panels[a])),i=0;i<this.panels[a].yaxisLHS.length;i++)this.panels[a].yaxisLHS[i].dropzone&&(e=!0),this.panels[a].yaxisLHS[i].dropzone=null;for(i=0;i<this.panels[a].yaxisRHS.length;i++)this.panels[a].yaxisRHS[i].dropzone&&(e=!0),this.panels[a].yaxisRHS[i].dropzone=null}function n(t){return function(i){r.a9S(),t.subholder.classList.contains(i)&&(t.subholder.classList.remove(i),e=!0)}}return e}.call(this)||this.grabbingScreen)&&(a=null,20,10,r.H6P(7),n=this.whichPanel(r.S40(20,i)),r.D0J(0),s=this.whichPanel(r.q7n(i,20)),o=this.whichPanel(i),l=this.highlightedDraggable,o&&(!l.undraggable||!l.undraggable(this)))){for(b in h=this.whichYAxis(o,e,i),r.D0J(7),c=this.whichYAxis(o,r.q7n(10,e),i),r.H6P(0),u=this.whichYAxis(o,r.q7n(e,10),i),this.xAxisAsFooter&&o.name==Object.keys(this.panels).pop()&&(s=this.whichPanel(i+20+this.xaxisHeight),a&&(a+=this.xaxisHeight)),d=!1,r.D0H(),p=!1,!1,t.Renderer&&(d=l instanceof t.Renderer),t.Studies&&(p=l instanceof t.Studies.StudyDescriptor),g=function(e){if(r.D0H(),!m){if("right"==e)return o.right-o.width/6;if("left"==e)return o.left+o.width/6}r.D0J(33);var t=r.q7n(18,11,7,16);return(o.left+o.right)/t},(m=l instanceof t.ChartEngine.YAxis)||h||("rig","h","t",e<g("left")?c=this.whichYAxis(o,o.left-1,i):e>g("right")&&(u=this.whichYAxis(o,o.right+1,i))),f=[],l.getDependents&&(f=l.getDependents(this,!0)),y=l.panel,v=l.getYAxis(this),d?y=l.params.panel:m&&(y=this.grabStartPanel.name),x=this.panels[y],this.panels)this.panels[b].soloing&&(C=!0);if(S=v.isShared(this),w=!m&&!C&&(x!==o&&x!=n&&x!=s||!this.checkForEmptyPanel(x,!0,[l].concat(f))),D=y==o.name&&v!==h&&v!==u&&v!==c||S,!w||n&&o===n)if(!w||s&&o===s){if(o!==x)m||o.noDrag||("a","l","l","d","ro","pzone",o.subholder.classList.add("dropzone"),o.subholder.classList.add("all"),k=o.name);else if((!o.yaxisRHS.length||1==o.yaxisRHS.length&&o.yaxisRHS[0]==v&&"none"==v.position)&&!h&&!u&&e>g("right"))o.subholder.classList.add("dropzone"),o.subholder.classList.add("right"),M="right";else if((!o.yaxisLHS.length||1==o.yaxisLHS.length&&o.yaxisLHS[0]==v&&"none"==v.position)&&!h&&!c&&e<g("left"))"d","ropzon","e",o.subholder.classList.add("dropzone"),o.subholder.classList.add("left"),M="left";else if(D){if(m&&e>o.left&&e<o.right){r.D0J(2);var Q=r.S40(5,13,7);T=o.yaxisLHS[o.yaxisLHS.length-Q],A=o.yaxisRHS[0],e<(_=g())&&T!=v?c=T:e>_&&A!=v&&(u=A)}m&&h===v||(P=!m&&S,!u||u===v&&!P||h&&h===u?!c||c===v&&!P||h&&h===c?h&&(u||h===v&&!P?c||h===v&&!P?h!==v&&(h.dropzone="all"):h.dropzone="left":h.dropzone="right",h.dropzone&&(M=h.position||this.chart.panel.yAxis.position||"right")):(c.dropzone="right",M=c.position||this.chart.panel.yAxis.position||"right"):(u.dropzone="left",M=u.position||this.chart.panel.yAxis.position||"right"))}}else o.subholder.classList.add("dropzone"),o.subholder.classList.add("bottom");else"d","ro","pz","one",o.subholder.classList.add("dropzone"),o.subholder.classList.add("top"),s=o;if(this.grabbingScreen||!o.subholder.classList.contains("dropzone")&&!M)this.draw();else{if(L=-1,!k&&!M&&w){for(var X in k=p?l.inputs.id:l.params.name||t.uniqueID(),this.panels)if(L++,this.panels[X]==s)break;s||L++,this.panels[y].yAxis.name==k&&(y=this.electNewPanelOwner(y)),E=p?l.inputs.display:null,y?this.createPanel(E||k,k,a,this.chart.name,new t.ChartEngine.YAxis({name:k})):y=k,p?l.panel=y:l.params.panel=y}if(k){if(p)"Stu","d","ies.replaceStu","dy",l.parameters||(l.parameters={}),l.parameters.panelName=k,this.highlightedDraggable=t.getFn("Studies.replaceStudy")(this,l.inputs.id,l.type,l.inputs,l.outputs,l.parameters,null,l.study);else if(d)for(var Z in l.seriesParams)N=l.seriesParams[Z],H=null,l.params.yAxis&&l.params.yAxis!==this.chart.panel.yAxis&&((H=l.params.yAxis).name=l.params.name),this.modifySeries(N.id,{panel:k,yAxis:H});if(L>-1){for(b in I={},j=0,this.panels)L==j++&&(I[k]=this.panels[k]),b!=k&&(I[b]=this.panels[b]);I[k]||(I[k]=this.panels[k]),this.panels=I}this.checkForEmptyPanel(y);for(var G=0;G<f.length;G++)f[G].params?this.checkForEmptyPanel(f[G].params.name):this.checkForEmptyPanel(f[G].name);this.adjustPanelPositions()}else if(M){if("a","l","l",O=function(e,i,a,n){var s,o;if("stu",r.a9S(),"dy","study"==a&&("Studies.","replaceStudy",i.parameters||(i.parameters={}),n?i.parameters.yaxisDisplayValue=n.position:delete i.parameters.yaxisDisplayValue,s=t.getFn("Studies.replaceStudy")(e,i.inputs.id,i.type,i.inputs,i.outputs,i.parameters,i.panel,i.study)),"renderer"==a)for(var l in i.seriesParams)o=i.seriesParams[l],s=e.modifySeries(o.id,{panel:k,yAxis:n});return s},(Y=h&&"all"==h.dropzone)||(m?(l.position=M,this.layout.studies&&(R=this.layout.studies[l.name])&&(R.parameters||(R.parameters={}),R.parameters.yaxisDisplayValue=M)):p?("stu","d","y",this.highlightedDraggable=O(this,l,"study",{position:M})):d&&O(this,l,"renderer",new t.ChartEngine.YAxis({name:l.params.name||t.uniqueID(),position:M})),v=this.highlightedDraggable.getYAxis(this)),!S||!Y||m){for($=v,Y&&v==this.chart.panel.yAxis&&($=h),F=0;F<o.yaxisLHS.length;F++)if(o.yaxisLHS[F]==$){o.yaxisLHS.splice(F,1);break}for(F=0;F<o.yaxisRHS.length;F++)if(o.yaxisRHS[F]==$){o.yaxisRHS.splice(F,1);break}}922850339,-64993701,z=2;for(var K=1;922850339!==r.Z2Z(K.toString(),K.toString().length,76373);K++)z+=2;if(r.U6$(z.toString(),z.toString().length,77999),Y)if(this.getYAxisByName(o,v.name)==o.yAxis&&this.electNewPanelOwner(o,h),m){for(J in V=v,B=h,v==this.chart.panel.yAxis&&(V=h,B=v),V.studies)"s","t","ud","y",O(this,this.layout.studies[V.studies[J]],"study",B===this.chart.panel.yAxis?null:{position:B.name});for(J in V.renderers)O(this,this.chart.seriesRenderers[V.renderers[J]],"renderer",B);this.highlightedDraggable=B}else p?("st","u","dy",this.highlightedDraggable=O(this,l,"study",{position:h.name})):d&&O(this,l,"renderer",h);else{for("none"==v.position&&(v.width=t.ChartEngine.YAxis.prototype.width),v.position=M,q="left"==M?o.yaxisLHS:o.yaxisRHS,F=0;F<q.length;F++){if(q[F]!==v)if("left"==q[F].dropzone)q.splice(F,0,v);else{if("right"!=q[F].dropzone)continue;r.D0J(97),q.splice(r.S40(F,0,"1"),0,v)}break}F==q.length&&q.push(v)}}for(var ee in this.panels)for(U=(W=this.panels[ee]).yaxisLHS.concat(W.yaxisRHS),F=0;F<U.length;F++)U[F].height=W.yAxis.height,this.calculateYAxisMargins(U[F]);this.displayDragOK(),this.draw(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!0),this.savePanels()}}},a=!1,t.ChartEngine.prototype.findHighlights=t.ChartEngine.prototype.findHighlights||function(e,t){a||console.error("movement feature requires activating interaction feature."),a=!0}},g=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).NameValueStore=t.NameValueStore||function(){},t.NameValueStore.prototype.toJSONIfNecessary=function(e){if(e.constructor==String)return e;try{return JSON.stringify(e)}catch(t){return N.H6P(0),console.log(N.S40("Cannot convert to JSON: ",e)),null}},t.NameValueStore.prototype.fromJSONIfNecessary=function(e){N.D0H();try{return JSON.parse(e)}catch(t){return e}},t.NameValueStore.prototype.get=function(e,i){var a;a=t.localStorage.getItem(e),i(null,this.fromJSONIfNecessary(a))},t.NameValueStore.prototype.set=function(e,i,a){t.localStorageSetItem(e,this.toJSONIfNecessary(i)),N.D0H(),a&&a(null)},t.NameValueStore.prototype.remove=function(e,i){N.a9S(),t.localStorage.removeItem(e),i&&i(null)}},f=e=>{var t,i=N;function a(){}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine||(t.ChartEngine=function(){}),a.fetchInitialData=function(e,t,i,a,r){},a.fetchUpdateData=function(e,t,i,a){},a.fetchPaginationData=function(e,t,i,a,r){},a.subscribe=function(e){},a.unsubscribe=function(e){},t.QuoteFeed=t.QuoteFeed||function(){},t.QuoteFeed.prototype.fetch=function(e,t){this.v2QuoteFeed||("You m","ust implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()",console.log("You must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()"))},t.QuoteFeed.prototype.announceError=function(e,a){e.suppressErrors||a.suppressAlert||(i.D0H(),e.startDate||e.endDate||a.error&&("Error fetchi","ng qu","ote:",t.alert("Error fetching quote:"+a.error)))},t.QuoteFeed.prototype.multiFetch=function(e,t){return 0===e.length&&t([]),e[0].stx.driver.multiFetch(e,t)},t.QuoteFeed.Subscriptions=function(){i.D0H(),this.subscriptions=[]},t.inheritsFrom(t.QuoteFeed.Subscriptions,t.QuoteFeed),t.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(e){var t,a,r,n,s;r=e.getSymbols({"breakout-equations":!0}),n=this,r=r.filter((function(t){var i;return(i=e.quoteDriver.getQuoteFeed(t))&&i.engine==n}));for(var o=0;o<this.subscriptions.length;o++)this.subscriptions[o].match=!1;i.D0H();for(var l=0;l<r.length;l++)for("mon","th","month"!=(s=(a=r[l]).interval)&&"week"!=s||e.dontRoll||(s="day"),a.interval=s,a.period=1,a.match=!1,isNaN(a.interval)||(a.period=a.interval,a.interval=a.timeUnit,a.interval||(a.interval="minute")),delete a.periodicity,delete a.timeUnit,delete a.setSpan,o=0;o<this.subscriptions.length;o++){if((t=this.subscriptions[o]).symbol==a.symbol&&t.period==a.period&&t.interval==a.interval){a.match=!0,t.match=!0;break}t.symbol!=a.symbol?("symbo","l","period"!=a.reason&&(a.reason="symbol"),t.reason="symbol"):("peri","od",a.reason="period",t.reason="period")}this.subscriptions=this.subscriptions.filter((function(t){return t.match||(t.stx||(t.stx=e),n.unsubscribe(t)),t.match})),r.forEach((function(t){t.match||(t.stx||(t.stx=e),t.reason||(t.reason="initialize"),t.symbol!==e.chart.symbol&&(t.series=!0),n.subscribe(t),n.subscriptions.push(t))}))},t.QuoteFeed.Subscriptions.prototype.fetch=function(e,t){var a;i.D0H(),a=this,this.fetchFromSource(e,(function(r){i.D0H(),r.error||a.checkSubscriptions(e.stx),t(r)}))},t.QuoteFeed.Subscriptions.prototype.subscribe=function(e){i.D0H(),console.log("subscribe",e)},t.QuoteFeed.Subscriptions.prototype.unsubscribe=function(e){i.a9S(),console.log("unsubscribe",e)},t.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(e,t){console.log("Please provide implementation of fetchFromSource")},t.QuoteFeed.prototype.requiresImmediateRefresh=function(e){return i.D0H(),!1},t.ChartEngine.prototype.attachQuoteFeed=function(e,a,r){var n,s,o;if("func","t","io","n","func",i.a9S(),"ti","on","f","un","ction",a||(a={}),"function"!=typeof e.fetchInitialData&&"function"!=typeof e.fetchUpdateData&&"function"!=typeof e.fetchPaginationData||("functi","on",n="announce",n+="Error","f","unc","tio","n","fu","nctio","n","function"!=typeof e.fetchPaginationData&&"function"!=typeof e.fetchUpdateData&&(a.noLoadMore=!0),e.v2QuoteFeed=!0,["multiFetch",n,"requiresImmediateRefresh"].forEach((function(i){e[i]||!1===e[i]||(e[i]=t.QuoteFeed.prototype[i])})),"function"==typeof e.subscribe&&(e.checkSubscriptions=t.QuoteFeed.Subscriptions.prototype.checkSubscriptions,e.subscriptions=[])),a.maximumTicks||(a.maximumTicks=e.maxTicks?e.maxTicks:2e4),(!a.bufferSize||a.bufferSize<0)&&(a.bufferSize=0),a.bufferSize=Math.round(a.bufferSize),a.intervalTimer=null,this.quoteDriver&&(!r&&this.quoteDriver.hasUnfilteredQuoteFeed?this.detachQuoteFeed():(s=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:e,behavior:a,filter:r}),s&&this.quoteDriver.quoteFeeds.push(s),this.quoteDriver.updateChartLoop(null,a))),!this.quoteDriver){-278826038,-2052160918,o=2;for(var l=1;-278826038!==i.U6$(l.toString(),l.toString().length,81119);l++)this.quoteDriver=new t.ChartEngine.Driver(this,e,a,r),o+=2;-2052160918!==i.Z2Z(o.toString(),o.toString().length,86964)&&(this.quoteDriver=new t.ChartEngine.Driver(this,e,a,r))}r||(this.quoteDriver.hasUnfilteredQuoteFeed=!0)},t.ChartEngine.prototype.detachQuoteFeed=function(e){var t;if(t=this.quoteDriver){for(var a=t.quoteFeeds.length-1;a>=0;a--)e&&t.quoteFeeds[a].quoteFeed!=e||(t.die(t.quoteFeeds[a]),i.H6P(28),t.quoteFeeds.splice(a,i.S40("1",0)));t.quoteFeeds.length?e==t.quoteFeed&&(t.quoteFeed=t.quoteFeeds[0].quoteFeed,t.behavior=t.quoteFeeds[0].behavior):t=this.quoteDriver=null}},t.ChartEngine.Driver=function(e,i,a,r){this.stx=e,a||(a={}),this.quoteFeeds=[{engine:i,behavior:a,filter:r}],this.id=t.uniqueID(!0),this.behavior=a,this.quoteFeed=i,this.loadingNewChart=!1,this.updatingChart=!1,r||(this.hasUnfilteredQuoteFeed=!0),this.updateChartLoop()},t.ChartEngine.Driver.prototype.die=function(e){for(var t,i=0;i<this.quoteFeeds.length;i++)e&&this.quoteFeeds[i]!=e||(t=this.quoteFeeds[i].behavior).intervalTimer&&(clearInterval(t.intervalTimer),t.intervalTimer=-1)},t.ChartEngine.Driver.prototype.getQuoteFeed=function(e){var t;e.symbolObject||(e.symbolObject={symbol:e.symbol});for(var i=0;i<this.quoteFeeds.length;i++)if((t=this.quoteFeeds[i]).behavior.generator==e.symbolObject.generator&&(!t.filter||t.filter(e)))return t;return null},t.ChartEngine.Driver.prototype.multiFetch=function(e,a){var r,n,s;0===e.length&&a([]),r={counter:0,finished:e.length,results:[]};for(var o=0;o<e.length;o++)(n=e[o]).stx.isEquationChart(n.symbol)?t.fetchEquationChart(n,l(n,r,a)):(s=this.getQuoteFeed(n))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.SERIES,s.engine,n,l(n,r,a));function l(e,t,a){return function(r){var n;i.a9S(),t.results.push({dataCallback:r,params:e}),t.counter++,t.counter>=t.finished&&(n=t.results,t.results=[],a(n))}}},t.ChartEngine.Driver.prototype.updateSubscriptions=function(){for(var e=0;e<this.quoteFeeds.length;e++)this.quoteFeeds[e].checkSubscriptions&&this.quoteFeeds[e].checkSubscriptions(this.stx)},t.ChartEngine.Driver.prototype.loadDependents=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_;if(i.D0H(),s=this,!n)return i.D0J(1),o=i.q7n(1,"0"),l=[],h=[],c=function(e){var t;t=2,i.a9S();for(var r=1;1610569589!==i.U6$(r.toString(),r.toString().length,43266);r++)(a||--o>s.quoteFeeds.length)&&a(1),t+=2;-1183685668!==i.U6$(t.toString(),t.toString().length,27574)&&(a||--o>s.quoteFeeds.length)&&(i.H6P(10),a(i.q7n("1",1))),a&&++o>=s.quoteFeeds.length&&a(null)},u=function(t){i.D0H(),++o<l.length||(h.length||c(),h.forEach((function(t){s.loadDependents(e,c,r,t.behavior)})))},s.quoteFeeds.forEach((function(e){i.D0H(),e.behavior.generator?h.push(e):l.push(e)})),void l.forEach((function(t){i.a9S(),s.loadDependents(e,u,r,t.behavior)}));for(d in{},p=e.stx,g=(m=e.chart).series,p.masterData,v=[],x={},b=r==t.QuoteFeed.UPDATE,C=r==t.QuoteFeed.PAGINATION,S=t.shallowClone(e),g){if(w=(f=g[d]).parameters,!b){if(!e.future&&!1===f.moreAvailable)continue;if(e.future&&!0===f.upToDate)continue}if(!f.loading&&(!1!==w.loadData&&(!b&&!C||f.endPoints&&Object.keys(f.endPoints).length)&&(!w.data||w.data.useDefaultQuoteFeed)&&(y=w.symbolObject).symbol&&y.generator==n.generator&&(S.symbolObject=y,S.symbol=y.symbol,D=this.getQuoteFeed(S),n==(D&&D.behavior)))){k=!0,b||(f.loading=!0);for(var P=0;P<v.length;P++)t.symbolEqual(v[P],y)&&(k=!1);k&&(v.push(y),x[y.symbol]=f.endPoints)}}M=[];for(var F=0;F<v.length;F++)y=v[F],(T=t.shallowClone(e.originalState)).symbol=y.symbol,T.symbolObject=y,T.update||T.future?(T.endDate||(T.endDate=e.endDate),T.startDate=x[y.symbol].end):(T.startDate||(T.startDate=e.startDate),T.endDate=C&&!e.future?x[y.symbol].begin:e.endDate,T.ticks=e.ticks),M.push(T);if(!M.length&&b)return(A={appending:e.appending||e.originalState.update}).appending&&(A.appendToDate=e.startDate),p.createDataSet(null,null,A),e.nodraw||p.draw(),void(a&&a(null));this.multiFetch(M,(_=b,i.a9S(),function(o){var l,h,c,u,d,g,y,v,x,b;i.a9S(),l=null;for(var C=0;C<o.length;C++)if(!(c=(h=o[C]).dataCallback.error)&&0!==c){u=h.params.symbolObject,g=(d=h.dataCallback).quotes,y=d.moreAvailable,v=d.upToDate,x=[],p.getSeries&&(x=p.getSeries({symbolObject:u})),b=!1;for(var S=0;S<x.length;S++)f=x[S],_||(e.future?(f.upToDate=!0===v||v||g.length<=(h.params.startDate?1:0),p.isHistoricalModeSet&&g.length<2&&(f.mostRecentForwardAttempt=new Date)):f.moreAvailable=!1!==y&&(y||g.length>(h.params.endDate?1:0)),f.loading=!1),b=f.parameters.fillGaps||b;g=s.cleanup(p,f,g,r,e,b),p.updateChartData(g,m,{secondarySeries:u.symbol,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),g&&g.length&&(!l||l>g[0].DT)&&(l=g[0].DT)}o.length&&(p.createDataSet(null,null,{appending:e.originalState.update||e.future,appendToDate:l}),e.nodraw||p.draw(),r==t.QuoteFeed.INITIAL&&s.resetRefreshInterval(n.refreshInterval,n)),a&&a(null)}))},t.ChartEngine.Driver.prototype.cleanup=function(e,a,r,n,s,o){var l,h,c,u,d,p,m;if(e.doCleanupDates(r,e.layout.interval),!s.missingBarsCreated&&r&&r.length&&e.cleanupGaps&&!1!==o){if(c=s.chart,a){c=a,-2130115434,1988562837,u=2;for(var g=1;-2130115434!==i.U6$(g.toString(),g.toString().length,89641);g++)h=a.parameters.symbol&&a.id,u+=2;1988562837!==i.U6$(u.toString(),u.toString().length,78403)&&(h=a.parameters.symbol||a.id)}else h=c.defaultPlotField;if(n!=t.QuoteFeed.PAGINATION||s.loadMoreReplace)n==t.QuoteFeed.UPDATE&&c.endPoints.end&&c.endPoints.end<r[0].DT&&(m=e.getFirstLastDataRecord(e.masterData,h,!0),a&&(m=m[h]),r.unshift(m),l="shift");else if(c.endPoints.begin&&c.endPoints.begin>r[r.length-1].DT){"po","p",d=e.getFirstLastDataRecord(e.masterData,h,!1),-1114560283,1722881602,p=2;for(var f=1;-1114560283!==i.Z2Z(f.toString(),f.toString().length,7515);f++)a&&(d=d[h]),r.push(d),p+=2;1722881602!==i.Z2Z(p.toString(),p.toString().length,72574)&&(a&&(d=d[h]),r.push(d)),l="pop"}r=e.doCleanupGaps(r,s.chart,{cleanupGaps:o,noCleanupDates:!0}),l&&r[l]()}return r},i.a9S(),t.ChartEngine.Driver.prototype.updateChart=function(e){var a,r,n,s,o,l,h,c,u;if(!this.updatingChart&&!this.loadingNewChart)for(var d in i.a9S(),a=Object.keys(this.stx.charts).length,r=0,n=this.stx,s=n.layout.interval,o=n.layout.timeUnit,n.charts)(l=n.charts[d]).symbol&&(h=this.makeParams(l.symbol,l.symbolObject,l),c=this.getQuoteFeed(h),l.masterData&&l.masterData.length&&(h.startDate=l.endPoints.end),h.update=!0,h.originalState=t.shallowClone(h),e&&e!=h.behavior?this.loadDependents(h,null,t.QuoteFeed.UPDATE,e):(this.updatingChart=!0,u=p(this,h,l.symbol,c),n.isEquationChart(h.symbol)?t.fetchEquationChart(h,u):c&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.UPDATE,c.engine,h,u)));function p(e,l,h,c){return l.behavior.prefetchAction&&l.behavior.prefetchAction("updateChart"),function(u){var d,p;i.D0H(),r++,(d=l.chart).masterData,h!=d.symbol||s!=n.layout.interval||o!=n.layout.timeUnit||n.isHistoricalMode()?e.updatingChart=!1:(u.error?c&&c.engine.announceError(l.originalState,u):(p=u.quotes,p=e.cleanup(n,null,p,t.QuoteFeed.UPDATE,l),n.updateChartData(p,d,{noCreateDataSet:!0,noCleanupDates:!0}),d.attribution=u.attribution),r==a&&(e.updatingChart=!1),l.behavior.callback&&l.behavior.callback(l),e.loadDependents(l,null,t.QuoteFeed.UPDATE,l.behavior))}}},t.ChartEngine.Driver.prototype.updateChartLoop=function(e,t){var i,a;if(t||(t=this.behavior),-1!=t.intervalTimer){t.intervalTimer&&clearInterval(t.intervalTimer),i=function(e,t){return function(){t.noUpdate||e.updateChart(t)}};for(var r=0;r<this.quoteFeeds.length;r++)t!=(a=this.quoteFeeds[r].behavior)||a.noUpdate||(e||0===e||(e=a.refreshInterval),e&&(t.intervalTimer=setInterval(i(this,a),1e3*e)))}},t.ChartEngine.Driver.prototype.resetRefreshInterval=function(e,t){(t||this.behavior).refreshInterval=e,this.updateChartLoop(null,t)},t.ChartEngine.Driver.prototype.loadAll=function(e,t){var a,r;a=this,i.a9S(),r=0,function n(){return function(s){i.D0H(),s?t(s):!e.moreAvailable&&e.upToDate?t(null):++r>20?t("error, moreAvailable not implemented correctly in QuoteFeed"):(e.loadingMore=!1,a.checkLoadMore(e,!0,!0,n(),!0))}}()()},t.ChartEngine.Driver.prototype.checkLoadMore=function(e,a,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M;if(i.D0H(),o=this.stx,this,e.loadingMore||this.loadingNewChart)return e.initialScroll=e.scroll,void(n&&n(null));function T(t){return!t.endPoints.begin||c.length-e.scroll<h.bufferSize||c.length-e.scroll-o.tickFromDate(t.endPoints.begin,e)<h.bufferSize}if(o.isHistoricalMode()||(o.isHistoricalModeSet=!1),l=this.makeParams(e.symbol,e.symbolObject,e),o.currentlyImporting)n&&n(null);else{h=l.behavior,c=e.dataSet,i.D0J(12);var A,_,P=i.q7n(1,4,1);if(d=1e3*(h.forwardPaginationRetryInterval||P),p=!1,m=!1,e.dataSet.length)for(var F in e.series)(g=e.series[F]).loading||!1!==g.parameters.loadData&&(u=!g.mostRecentForwardAttempt||g.mostRecentForwardAttempt.getTime()+d<Date.now(),!1!==g.moreAvailable&&T(g)&&(p=!0),u&&!g.upToDate&&L(g)&&(m=!0));if(u=!e.mostRecentForwardAttempt||e.mostRecentForwardAttempt.getTime()+d<Date.now(),f=(T(e)||a)&&!1!==e.moreAvailable,y=(L(e)||a)&&!e.upToDate&&u,v=f||p,x=o.isHistoricalModeSet&&!v&&(y||m),b=o.layout.interval,C=o.layout.timeUnit,S=!1,w=h.findHeadOfData||e.masterData&&e.masterData.length,!h.noLoadMore&&w&&(x||!o.maxDataSetSize||e.dataSet.length<o.maxDataSetSize)&&(v||x)){if(e.initialScroll=e.scroll,e.loadingMore=!0,(l=this.makeParams(e.symbol,e.symbolObject,e)).pagination=!0,l.future=x,e.masterData&&e.masterData.length?(x?l.startDate=e.endPoints.end:l.endDate=e.endPoints.begin,x&&!l.startDate?("D","T",(D=o.getFirstLastDataRecord(e.masterData,"DT",!0))&&(l.startDate=D.DT)):v&&!l.endDate&&(D=o.getFirstLastDataRecord(e.masterData,"DT"))&&(l.endDate=D.DT)):l.endDate=new Date,l.originalState=t.shallowClone(l),l.nodraw=s,!f&&p||!y&&m)return this.loadingMore=!0,this.loadDependents(l,(function(t){e.loadingMore=!1,i.D0H(),n&&n(t)}),t.QuoteFeed.PAGINATION),void(n&&n(null));o.fetchMaximumBars[o.layout.aggregationType]&&(l.fetchMaximumBars=!0,!o.maxMasterDataSize||h.maximumTicks<o.maxMasterDataSize?l.ticks=h.maximumTicks:l.ticks=o.maxMasterDataSize),A=this,_=l,i.D0H(),h.prefetchAction&&h.prefetchAction("checkLoadMore"),k=function(e){var a,r,o,l,c,u,d,p,m,g,f;if(a=A.stx,r=_.chart,i.D0H(),_.symbol==r.symbol&&b==a.layout.interval&&C==a.layout.timeUnit)if(_.loadMore||(_.chart.loadingMore=!1),e.error)A.quoteFeed.announceError(_.originalState,e),_.chart.loadingMore=!1,n&&n(e.error);else{if(e.quotes||(e.quotes=[]),o=e.quotes,l=r.masterData,(o=A.cleanup(a,null,o,t.QuoteFeed.PAGINATION,_)).length&&r.masterData&&r.masterData.length)if(_.future)(c=o[0]).DT&&c.DT==r.masterData[r.masterData.length-1].DT&&l.pop();else{i.H6P(16);var y=i.q7n(17,18);u=o[o.length-y],d=2;for(var v=1;162407022!==i.U6$(v.toString(),v.toString().length,70825);v++)(u.DT||-u.DT!=~r.masterData[9].DT)&&o.pop(),d+=2;-74994599!==i.Z2Z(d.toString(),d.toString().length,68276)&&u.DT&&~u.DT==-r.masterData[5].DT&&o.pop(),u.DT&&+u.DT==+r.masterData[0].DT&&o.pop()}if(_.future?(e.upToDate?r.upToDate=!0:(!1===e.upToDate||o.length>1)&&(r.upToDate=!1),a.isHistoricalModeSet&&o.length<2&&(r.mostRecentForwardAttempt=new Date)):e.moreAvailable||!1!==e.moreAvailable&&o.length?r.moreAvailable=!0:r.moreAvailable=!1,A.tickMultiplier=o.length?2:2*A.tickMultiplier,p=o[0]?o[0].DT:_.startDate,m=o[0]?o[o.length-1].DT:_.endDate,(!r.endPoints.begin||r.endPoints.begin>p)&&(r.endPoints.begin=p),(!r.endPoints.end||r.endPoints.end<m)&&(r.endPoints.end=m),r.loadingMore=!1,_.loadMoreReplace)a.setMasterData(o,r,{noCleanupDates:!0});else if(_.future){g=2;for(var x=1;426247228!==i.U6$(x.toString(),x.toString().length,67155);x++)a.updateChartData(o,r,{noCreateDataSet:!1,noCleanupDates:!1}),g+=2;1627668229!==i.U6$(g.toString(),g.toString().length,54573)&&a.updateChartData(o,r,{noCreateDataSet:!1,noCleanupDates:!1}),a.updateChartData(o,r,{noCreateDataSet:!0,noCleanupDates:!0})}else t.addMemberToMasterdata({stx:a,chart:r,data:o,fields:["*"],noCleanupDates:!0});_.future&&(f={appending:!0,appendToDate:o[0]&&o[0].DT}),a.createDataSet(void 0,void 0,f),s||a.draw(),h.callback&&h.callback(_),A.loadDependents(_,n,t.QuoteFeed.PAGINATION)}},o.isEquationChart(l.symbol)?t.fetchEquationChart(l,k):(x&&(l.appending=!0),(M=this.getQuoteFeed(l))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,M.engine,l,k)),S=!0}!S&&n&&n(null)}function L(t){return!t.endPoints.end||e.scroll-e.maxTicks+1<h.bufferSize||o.tickFromDate(t.endPoints.end,e,null,!0)-c.length+e.scroll-e.maxTicks+2<h.bufferSize}},t.ChartEngine.Driver.prototype.extendHistoricalData=function(e){let{from:a}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};var n,s,{stx:o}=this,{chart:l,layout:h}=o,{masterData:c,dataSet:u}=l,{interval:d,timeUnit:p}=h;if(i.a9S(),n=this.makeParams(l.symbol,l.symbolObject,l),s=this.getQuoteFeed(n),l.loadingMore||this.loadingNewChart||o.currentlyImporting||!c.length||!s||o.maxDataSetSize&&u.length>o.maxDataSetSize)return r(null);function m(e,a){return function(n){let{quotes:s,moreAvailable:c,error:u}=n;if(a.symbol===l.symbol&&d===h.interval&&p===h.timeUnit){if(i.D0H(),l.loadingMore=!1,u)return r(u);s=e.cleanup(o,null,s,t.QuoteFeed.PAGINATION,a),l.moreAvailable="boolean"==typeof c?c:!!s.length,l.endPoints.begin=s[0].DT,t.addMemberToMasterdata({stx:o,chart:l,data:s,fields:["*"],noCleanupDates:!0}),o.createDataSet(),o.draw()}}}l.loadingMore=!0,n.originalState=Object.assign({},n),n.startDate=a,n.endDate=c[0].DT,t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,s.engine,n,m(this,n))},t.ChartEngine.Driver.prototype.barsToFetch=function(e){var i,a;return"mo","nth",t.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),i=this.stx.layout.interval,a=e.stx.layout.periodicity,"month"!=i&&"week"!=i||this.stx.dontRoll||("w","e","e","k",a*="week"==i?7:30),e.stx.chart.maxTicks*a*this.tickMultiplier},t.ChartEngine.Driver.determineStartDate=function(e,t,i){return this.determineStartOrEndDate(e,t,i,!0)},t.ChartEngine.Driver.determineStartOrEndDate=function(e,t,a,r){return i.D0H(),r||e.fetchMaximumBars?e.startDate||t.previous(a):e.future?t.next(a):new Date},t.ChartEngine.Driver.prototype.makeParams=function(e,a,r){var n,s,o,l,h,c,u,d,p,m;if("m","ont","h",s=(n=this.stx).layout.interval,o=this.barsToFetch({stx:n}),"month"!=s&&"week"!=s||n.dontRoll||(s="day"),h=(l=this.getQuoteFeed({interval:s,symbol:e,symbolObject:a}))&&l.behavior,(c=t.shallowClone(h)||{}).behavior=h,u=!1,d=[],r.market&&r.market.getSessionNames&&(d=r.market.getSessionNames()),n.extendedHours)if(n.extendedHours.filter)u=!0;else{i.D0J(1),p=i.S40(1,"1747222390"),-276394982,m=2;for(var g=1;i.U6$(g.toString(),g.toString().length,33318)!==p;g++)u=n.layout.extended,m+=2;-276394982!==i.Z2Z(m.toString(),m.toString().length,57174)&&(u=n.layout.extended),u=n.layout.extended,d=d.filter((function(e){return e.enabled||n.layout.marketSessions[e.name]}))}else d=d.filter((function(e){return e.enabled}));for(var f=0;f<d.length;f++)d[f]=d[f].name;return t.extend(c,{stx:n,symbol:e,symbolObject:a,chart:r,interval:s,extended:u,period:1,ticks:o,additionalSessions:d,quoteDriverID:this.id},!0),c.symbolObject||(c.symbolObject={symbol:e}),isNaN(c.interval)||(c.period=parseInt(c.interval,10),c.interval=n.layout.timeUnit,c.interval||(c.interval="minute")),c},t.ChartEngine.Driver.prototype.newChart=function(e,a){var r,n,s,o,l,h,c,u,d,p,m;r=this.stx,n=e.symbol,s=r.layout.interval,o=r.layout.timeUnit,(l=e.chart).moreAvailable=null,l.upToDate=null,l.loadingMore=!1,l.attribution=null,h=this.makeParams(n,e.symbolObject,l),t.extend(h,e,!0),c=this.getQuoteFeed(h),u=h.behavior,(r.fetchMaximumBars[r.layout.aggregationType]||e.fetchMaximumBars)&&(!r.maxMasterDataSize||u.maximumTicks<r.maxMasterDataSize?h.ticks=u.maximumTicks:h.ticks=r.maxMasterDataSize,h.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,h.originalState=t.shallowClone(h),p=this,m=h,u.prefetchAction&&u.prefetchAction("newChart"),i.a9S(),d=function(i){var l,h,d,g;if(l=m.chart,h=i.quotes,d=!1,n==l.symbol&&s==r.layout.interval&&o==r.layout.timeUnit){for(var f in p.loadingNewChart=!1,i.error?c.engine.announceError(m.originalState,i):(h=p.cleanup(r,null,h,t.QuoteFeed.INITIAL,m),r.setMasterData(h,l,{noCleanupDates:!0}),l.endPoints={},l.endPoints.begin=h[0]?h[0].DT:m.startDate,l.endPoints.end=h[0]?h[h.length-1].DT:m.endDate,h?(l.moreAvailable=!1!==i.moreAvailable,l.upToDate=i.upToDate):(l.moreAvailable=!1,l.upToDate=!0),l.attribution=i.attribution,e.initializeChart&&r.initializeChart(),r.createDataSet(),d=!0),l.series)l.series[f].endPoints={},l.series[f].moreAvailable=null,l.series[f].upToDate=null;(g=l.masterData)&&g.length&&(m.startDate=g[0].DT,m.endDate=g[g.length-1].DT),u.callback&&u.callback(m),p.loadDependents(m,(function(){d&&!m.nodraw&&p.stx.home(),a&&a(i.error),p.stx.dispatch("newChart",{stx:p.stx,symbol:p.stx.chart.symbol,symbolObject:p.stx.chart.symbolObject,moreAvailable:p.stx.chart.moreAvailable,upToDate:p.stx.chart.upToDate,quoteDriver:p}),p.resetRefreshInterval(u.refreshInterval,u)}),t.QuoteFeed.INITIAL)}else a&&a("orphaned")},this.stx.isEquationChart(h.symbol)?t.fetchEquationChart(h,d):c&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.INITIAL,c.engine,h,d)},t.QuoteFeed.INITIAL=1,t.QuoteFeed.UPDATE=2,t.QuoteFeed.PAGINATION=3,t.QuoteFeed.SERIES=4,t.ChartEngine.Driver.fetchData=function(e,a,r,n){if(i.D0H(),!r.symbol)return n({quotes:[]});a.v2QuoteFeed?("f","unction","function"!=typeof a.subscribe?t.ChartEngine.Driver.fetchDataInContext(e,a,r,n):t.ChartEngine.Driver.fetchDataInContext(e,a,r,function(e){e.error||this.checkSubscriptions(r.stx),n(e)}.bind(a))):(r.stx.convertToDataZone(r.startDate),r.stx.convertToDataZone(r.endDate),a.fetch(r,n))},t.ChartEngine.Driver.fetchDataInContext=function(e,a,r,n){var s,o,l,h,c,u,d,p,m;if("functi","on",(c=r.stx).chart.market.newIterator)switch(i.a9S(),e===t.QuoteFeed.SERIES&&(r.series=!0,e=t.QuoteFeed.INITIAL,r.endDate&&!r.startDate||r.future?e=t.QuoteFeed.PAGINATION:r.startDate&&!r.endDate&&(e=t.QuoteFeed.UPDATE)),u=Math.min(r.ticks,r.maximumTicks),a.maxTicks&&(u=Math.min(u,a.maxTicks)),d=r.symbolObject.masterSymbol||r.symbol,e){case t.QuoteFeed.UPDATE:if(c.isHistoricalModeSet)return void(c.quoteDriver.updatingChart=!1);r.startDate?p=r.startDate:(p=new Date,i.D0J(40),p.setHours(i.q7n(96,"0"),0,0,0)),"function"==typeof a.fetchUpdateData&&a.fetchUpdateData(d,c.convertToDataZone(p),r,n);break;case t.QuoteFeed.INITIAL:s={begin:h=r.endDate||new Date,interval:r.interval,periodicity:"tick"==r.interval?c.chart.xAxis.futureTicksInterval:r.period,outZone:c.dataZone},o=c.chart.market.newIterator(s),l=t.ChartEngine.Driver.determineStartDate(r,o,u),r.endDate&&(h=r.endDate),"function"==typeof a.fetchInitialData&&a.fetchInitialData(d,l,c.convertToDataZone(h),r,n);break;case t.QuoteFeed.PAGINATION:if(s={begin:r.endDate||r.startDate,interval:r.interval,periodicity:"tick"==r.interval?c.chart.xAxis.futureTicksInterval:r.period,outZone:c.dataZone},o=c.chart.market.newIterator(s),m=t.ChartEngine.Driver.determineStartOrEndDate(r,o,u,!r.future),l=r.startDate||m,h=r.endDate||m,r.startDate?r.stx.convertToDataZone(l):r.stx.convertToDataZone(h),"function"==typeof a.fetchPaginationData){if(c.maxMasterDataSize&&c.maxMasterDataSize<=c.masterData.length)return;a.fetchPaginationData(d,l,h,r,(function(e){h>=Date.now()&&(c.isHistoricalModeSet=!1),n&&n(e)}))}break;default:console.error("Illegal fetchData constant")}else console.error("quoteFeed feature requires first activating market feature.")}},y=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.addSeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S=N;if(r="add",r+="S",r+="eries",n=this.runPrepend("addSeries",arguments))return n;function w(e){return S.a9S(),function(t){var r,n;S.D0H(),t.error||(r=t.quotes,n=i.fillGaps,g.cleanupGaps||(n=!1),r=g.doCleanupGaps(r,g.chart,{cleanupGaps:n}),g.updateChartData(r,g.chart,{secondarySeries:o,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),l.loading=!1,l.moreAvailable=t.moreAvailable,l.upToDate=t.upToDate,D(g,l)),null===i.action||d.length||g.dispatch(f?"symbolImport":"symbolChange",{stx:g,symbol:e.symbol,symbolObject:e.symbolObject,action:i.action,id:l.id,parameters:i}),a&&a.call(g,t.error,l)}}function D(a,r){var n,s,o,l;if(n=i.renderer||"Lines",s=i.name||e,!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||f||(i.yAxis.name=s),i.renderer||i.name||i.color||i.chartType){if(S.a9S(),!(o=a.getSeriesRenderer(s))){if(l={name:s,overChart:!1!==i.overChart,useChartLegend:!0},i.chartType?o=t.Renderer.produce(i.chartType,t.extend({highlightable:i.highlightable,dependentOf:i.dependentOf,panel:i.panel,yAxis:i.yAxis,baseline:i.baseline},l)):(t.ensureDefaults(i,l),o=new t.Renderer[n]({params:i})),!o)return;a.setSeriesRenderer(o)}o.attachSeries(e,i),!1!==i.loadData&&o.ready(),a.layout.symbols=a.getSymbols({"include-parameters":!0,"exclude-studies":!0}),a.changeOccurred("layout")}}return s=e||null,o=e,e||(e=t.uniqueID()),i&&!0===i.panel&&(i.panel=e),(l={parameters:i?t.clone(i):{},yValueCache:[],display:s,id:e,loading:!i||!1!==i.loadData}).parameters.yAxis=i&&i.yAxis,(i=l.parameters).symbol&&(o=i.symbol),i.isComparison&&(i.shareYAxis=!0),!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||(i.yAxis=new t.ChartEngine.YAxis(i.yAxis)),t.ensureDefaults(i,{chartName:this.chart.name,symbolObject:{symbol:o},panel:this.chart.panel.name,fillGaps:!1,action:"add-series"}),"display"in i&&(l.display=i.display),h=this.charts[i.chartName],c=i.symbolObject,S.a9S(),o=i.symbol=c.symbol,l.display||(l.display=o||i.field),l.endPoints={},i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),i.isComparison&&(u="tra",u+="n",u+="spare",u+="nt",void 0===i.gapDisplayStyle&&(i.gapDisplayStyle=u)),d=this.getSeries({symbolObject:c,chart:h,includeMaster:!0}),p=i.panel,this.panels[p]?i.yAxis||i.shareYAxis||(i.yAxis=new t.ChartEngine.YAxis({name:e,position:"none"})):((m=i.yAxis||new t.ChartEngine.YAxis).name=e,this.createPanel(e,p,null,null,m),this.preferences.dragging&&this.preferences.dragging.series||(i.highlightable=!1)),h.series[e]=l,g=this,f=this.currentlyImporting,!i.isComparison||!h.forcePercentComparison||i.panel!=h.panel.name||i.yAxis&&i.yAxis!=h.yAxis||this.setChartScale("percent"),(y=h.masterData)||(y=h.masterData=this.masterData=[]),v=y.length,i.data&&!i.data.useDefaultQuoteFeed?w({symbol:o,symbolObject:c,action:i.action})({quotes:i.data}):d.length?(l.endPoints=d[0].endPoints,l.loading=d[0].loading,D(this,l),a&&setTimeout((function(){S.a9S(),a.call(g,null,l)}),0)):this.quoteDriver&&!1!==i.loadData?(b=(x=this.quoteDriver).makeParams(o,c,h),v&&(b.startDate=y[0].DT,b.endDate=this.isHistoricalMode()?y[y.length-1].DT:new Date),b.stx.isEquationChart(b.symbol)?t.fetchEquationChart(b,w(b)):(C=x.getQuoteFeed(b))&&t.ChartEngine.Driver.fetchData(4,C.engine,b,w(b))):(D(this,l),a&&a.call(this,null,l)),this.runAppend(r,arguments),l},t.ChartEngine.prototype.getSeries=function(e){var i,a,r,n,s;for(var o in a=(i=e.chart?e.chart:this.chart).series,(r=e.symbolObject)||(r={symbol:e.symbol}),n=[],a)s=a[o],t.symbolEqual(r,s.parameters.symbolObject)&&n.push(s);return e.includeMaster&&t.symbolEqual(r,i.symbolObject)&&n.push({}),N.a9S(),n},t.ChartEngine.prototype.modifySeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(r="modify",r+="Series",!this.runPrepend(r,arguments)&&i&&("string"==typeof e?(s=e,n=(o=i.chartName?this.charts[i.chartName]:this.chart).series[s]):(s=(n=e).id,o=this.charts[n.parameters.chartName]),n)){for(var x in t.extend(n.parameters,i,!0),this.getRendererFromSeries(s).modifyRenderer(i),l=n.parameters,o.seriesRenderers){u=(c=o.seriesRenderers[x]).params,d=c.seriesParams;for(var b=0;b<d.length;++b)if(p=d[b],g=(m=this.panels[p.panel])&&m.yAxis.name,p.id===n.id){!0===l.panel&&(l.panel=l.dependentOf||l.name),u.panel=l.panel,i.yAxis&&(i.yAxis instanceof t.ChartEngine.YAxis||(i.yAxis=new t.ChartEngine.YAxis(i.yAxis)),u.yAxis=i.yAxis),l.panel!=p.panel&&u.name==g?this.electNewPanelOwner(p.panel):(f=this.getYAxisByName(l.panel,u.name))&&l.yAxis&&f.name!==l.yAxis.name&&(f.name=this.electNewYAxisOwner(f)),l.field||(l.field=null),c.attachSeries(s,t.ensureDefaults(l,p)),l.field||(l.field=l.subField),delete l.subField,!l.isComparison||!o.forcePercentComparison||l.panel!=o.panel.name||n.parameters.yAxis&&l.yAxis.name!=o.yAxis.name||this.setChartScale("percent"),h=c;break}}if(this.changeOccurred("layout"),t.getFn("Drawing.updateSource")(this,n.parameters.symbol||s,null,n.parameters.panel),this.runAppend("modifySeries",arguments),!0!==a){y=h.getDependents(this);for(var C=0;C<y.length;C++)this.modifySeries(y[C].params.name,{panel:h.params.panel,yAxis:n.parameters.yAxis},!0);(v=o.seriesRenderers[h.params.dependentOf])&&(v.params.yAxis==n.parameters.yAxis&&v.params.panel==h.params.panel||this.modifySeries(h.params.dependentOf,{panel:h.params.panel,yAxis:n.parameters.yAxis},!0))}return this.draw(),n}},t.ChartEngine.prototype.deleteSeries=function(e,t,i){var a,r,n,s,o,l,h,c;a="ob",a+="j",a+="ect",this.runPrepend("deleteSeries",arguments)||(r=(i=i||{}).action?i.action:"remove-series",typeof e===a?(n=e.id,t=t||this.charts[e.parameters.chartName]):(n=e,t=t||this.chart),(s=t.series[n])&&(o=s.parameters.loadData,l=s.parameters.symbolObject,delete t.series[n],h=this.getSeries({symbolObject:l,includeMaster:!0}),!1===o&&h.push(n),h.length||this.cleanMasterData(l,t),(c=this.panels[s.parameters.panel])&&this.checkForEmptyPanel(c),this.createDataSet(),h.length||this.dispatch(this.currentlyImporting?"symbolImport":"symbolChange",{stx:this,symbol:l.symbol,symbolObject:l,id:n,action:r}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend("deleteSeries",arguments)))},t.ChartEngine.prototype.removeSeries=function(e,t){var i,a,r,n,s,o,l;if(i="re",i+="mov",i+="eSerie",i+="s",!this.runPrepend(i,arguments)){for(var h in r=!1,"object"==typeof e?(a=e.id,t=t||this.charts[e.parameters.chartName]):(a=e,t=t||this.chart),t.seriesRenderers){n=t.seriesRenderers[h],o=(s=this.panels[n.params.panel])&&s.yAxis.name;for(var c=n.seriesParams.length-1;c>=0;c--)n.seriesParams[c].id===a&&(n.removeSeries(a),n.seriesParams.length<1&&(this.removeSeriesRenderer(n),n.params.name==o?this.electNewPanelOwner(n.params.panel):this.checkForEmptyPanel(n.params.panel)||(l=this.getYAxisByName(s,n.params.name))&&(l.name=l.studies[0]||l.renderers[1])),r=!0)}r||this.deleteSeries(a,t),this.resetDynamicYAxis(),this.draw(),this.resizeChart(),this.runAppend("removeSeries",arguments)}},t.Comparison=t.Comparison||function(){},t.Comparison.initialPrice=100,t.Comparison.getInitialPrice=function(e){var i,a,r;if(e.initialComparisonPrice)return e.initialComparisonPrice;if(e.initialComparisonPrice=100,"number"==typeof(i=t.Comparison.initialPrice)&&(e.initialComparisonPrice=i),"string"==typeof i&&(e.series[i]||""===i)){a="Close",e.defaultPlotField&&(e.highLowBars||(a=e.defaultPlotField));for(var n=e.dataSet.length-e.scroll-1;n<e.dataSet.length;n++)if(r=e.dataSet[n]){if(r[i]&&r[i][a]){e.initialComparisonPrice=r[i][a];break}if(""===i&&r[a]){e.initialComparisonPrice=r[a];break}}}return e.initialComparisonPrice},t.Comparison.priceToPercent=function(e,i,a){var r,n=N;n.D0H(),r=t.Comparison.baseline||a,n.H6P(98);var s=n.S40(3,3e4,6,3,3);n.H6P(36);var o=n.S40(9519,500,19);return Math.round((a-r)/r*100*s)/o},t.Comparison.percentToPrice=function(e,i,a){var r;return N.D0H(),r=t.Comparison.baseline||1,N.H6P(99),N.S40(r,1,a,100)},t.Comparison.priceToRelative=function(e,i,a){var r,n;return r=t.Comparison.baseline||a,n=t.Comparison.getInitialPrice(i),N.H6P(100),N.q7n(r,n,a)},t.Comparison.relativeToPrice=function(e,i,a){var r,n;return N.D0H(),r=t.Comparison.baseline||1,n=t.Comparison.getInitialPrice(i),N.D0J(100),N.S40(n,r,a)},t.Comparison.createComparisonSegmentInner=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T=N;for(r in T.a9S(),"i","qPrevClose","C","los","e",a=[],i.series)(o=i.series[r].parameters).isComparison&&a.push(o.symbol);for(var A in l=["Close","Open","High","Low","iqPrevClose"],h=e.chart.highLowBars,i.defaultPlotField&&!h&&l.unshift(i.defaultPlotField),c=l[0],u=e.layout.studies)if(d=u[A],n=e.panels[d.panel],s=d.getYAxis(e),n&&n.yAxis==s){for(r in d.outputMap)l.push(r);for(var _=0;_<=2;_++)l.push(d.name+"_hist"+(_||""));d.referenceOutput&&l.push(d.referenceOutput+" "+d.name)}for(var P in e.plugins)if((p=e.plugins[P]).transformOutputs)for(r in p.transformOutputs)l.push(r);i.initialComparisonPrice=null,i.dataSegment=[],m=null,T.D0J(101);var F=T.S40(12,11,17,88,927);g=i.dataSet.length-i.scroll-("1">>F),e.startComparisonsAtFirstVisibleBar&&(g+=1),f=i.maxTicks+3;for(var L=0;L<=f;L++){if(L==f&&(L=-1),T.D0J(0),(y=T.S40(g,L))<i.dataSet.length&&y>=0){if(x=(v=i.dataSet[y])[c],!m){if(0===x||null===x){if(L<0)break;continue}m=t.clone(v)}for(v.transform||(v.transform={cache:{},DT:v.DT,Date:v.Date}),!t.Comparison.baseline&&x&&(m=t.clone(v)),t.Comparison.baseline=m[c],b=0;b<l.length;b++)(v[r=l[b]]||0===v[r])&&(v.transform[r]=i.transformFunc(e,i,v[r]));for(b=0;b<a.length;b++)if(r=a[b],C=i.series[r],-1==L&&C&&C.parameters.isComparison)delete v.transform[r];else{S=v[r];for(var E=0;S&&E<l.length;E++)((w=S[l[E]])||0===w)&&((D=m[r]&&m[r][l[0]])||0===D||(m[r]||(m[r]={}),m[r][l[E]]=D=w*t.Comparison.baseline/v[c]),0!==D&&(k=t.Comparison.baseline||1,T.D0J(102),M=T.S40(D,w,k),v.transform[r]||(v.transform[r]={}),v.transform[r][l[E]]=i.transformFunc(e,i,M)))}i.dataSegment.push(v)}else y<0&&i.dataSegment.push(null);if(L<0)break}},t.Comparison.priceFormat=function(e,t,i){var a,r,n=N;if(null==i||isNaN(i))return"";if(a=t.yAxis.priceTick,r=e.internationalizer)a>=5?(n.D0J(14),i=r.percent.format(n.S40(100,i))):a>=.5?(n.H6P(103),i=r.percent1.format(n.S40(i,0,"100"))):a>=.05?(n.H6P(14),i=r.percent2.format(n.S40(100,i))):a>=.005?(n.D0J(14),i=r.percent3.format(n.S40(100,i))):(n.D0J(8),i=r.percent4.format(n.q7n(i,"100")));else if(a>=5){n.H6P(52);n.S40(860,84,11);n.H6P(7);var s=n.S40(15831,21108);n.H6P(7);var o=n.S40(27540,32130);n.D0J(104);var l=n.q7n(4,9623,20,756);n.H6P(6);var h=n.q7n(1201,100,8,4,44);i=i.toFixed(0)+(s>o?"%":478.36!==l?h:257.08)}else if(a>=.5){n.D0J(105);var c=n.q7n(30,20,15,6,1);n.D0J(0);n.S40(75,1356);n.D0J(12);var u=n.q7n(2290,20,1);n.D0J(106);var d=n.q7n(3,3112,2079,5,4);n.H6P(107);var p=n.q7n(6,17,15003,1,937);n.D0J(98);var m=n.q7n(8,14560,14,11,2);n.H6P(15);n.S40(19,7596,5083);n.D0J(108);var g=n.S40(3920,15680,16,276);i=i.toFixed(c)+(u!=d?p>m||"%":g)}else if(a>=.05){n.D0J(0);var f=n.S40(0,2);n.D0J(109);n.q7n(18,1241,6,1,1);n.D0J(7);var y=n.S40(5,8225);n.D0J(7);var v=n.S40(8,3838);n.H6P(36);n.S40(23,7357,4);n.D0J(0);var x=n.S40(0,1);n.D0J(36);n.S40(8727,512,19);n.D0J(110);var b=n.q7n(9,9860,18,18,3184761);n.H6P(111);var C=n.q7n(15,1,1,9,6);n.D0J(111);n.S40(9337,932,9320,5,2);n.H6P(36);var S=n.q7n(11,9811,9);n.D0J(33);var w=n.q7n(26,5969,10,17);i=i.toFixed(f)+(8407>y?"%":v=="2925"*x?b:"770.58"*C>=S||w)}else if(a>=.005){n.H6P(52);var D=n.q7n(57,12,5);i=i.toFixed(D)+"%"}else{n.D0J(112);var k=n.q7n(16,2,8,15,13);i=i.toFixed(k)+"%"}return 0===parseFloat(i)&&"-"==i.charAt(0)&&(n.H6P(40),i=i.substring(n.q7n(64,"1"))),n.a9S(),i},t.ChartEngine.prototype.setComparison=function(e,i,a){var r,n,s,o,l=N;if("percen","t","str","ing",i||(i=this.chart),"string"==typeof i&&(i=this.charts[i]),(a||""===a)&&(t.Comparison.initialPrice=a),!0===e){if(i.isComparison)return;e="percent"}switch(this.resetDynamicYAxis(),n=(r=i.panel.yAxis).priceFormatter==t.Comparison.priceFormat,e){case"relative":if(this.setTransform(i,t.Comparison.priceToRelative,t.Comparison.relativeToPrice),n){l.D0J(40),s=l.S40(32,"1079035736"),-840809156,o=2;for(var h=1;l.U6$(h.toString(),h.toString().length,4151)!==s;h++)r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null,o+=2;-840809156!==l.U6$(o.toString(),o.toString().length,71797)&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:1,r.originalPriceFormatter=1)}r.whichSet="dataSegment",i.isComparison=!0;break;case"percent":"dataSegme","nt",this.setTransform(i,t.Comparison.priceToPercent,t.Comparison.percentToPrice),n||(r.originalPriceFormatter={func:r.priceFormatter},r.priceFormatter=t.Comparison.priceFormat),r.whichSet="dataSegment",i.isComparison=!0;break;default:this.unsetTransform(i),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSet",i.isComparison=!1}},t.ChartEngine.prototype.setChartScale=function(e){var i,a;i=this.chart,e||(e="linear"),(a={percent:!0,relative:!0})[e]?this.setComparison(e,i,t.Comparison.initialPrice):a[this.layout.chartScale]&&this.setComparison(!1,i),this.layout.chartScale=e,i.canvas&&this.draw(),this.changeOccurred("layout")}},v=e=>{var t,i,a=N;function r(e,t,a){var r,s,o,l,h,c,u;if(t||(t={}),[],"ciq-no-share",r=document.querySelector("body"),t.hide&&t.hide instanceof Array){s=t.hide.join(", "),o=document.querySelectorAll(s);for(var d=0;d<o.length;d++)o[d].classList.add("ciq-no-share")}for(r.classList.add("sharing"),l=e.chart.container.getElementsByTagName("svg"),h=[],c=0;c<l.length;c++)u=l[c],h.push(u.innerHTML),n(u);i(e.chart.container,{allowTaint:!1,logging:!1,width:t.width||null,height:t.height||null,backgroundColor:t.background||null,useCORS:!0}).then((function(e){for(a&&a(null,t.data?e.toDataURL("image/png"):e),c=0;c<l.length;c++)l[c].innerHTML=h[c];r.classList.remove("sharing")})).catch((function(e){for("sh","ari","ng",a&&a(e),c=0;c<l.length;c++)l[c].innerHTML=h[c];r.classList.remove("sharing")}))}function n(e){var t;if("alignment","-baseline",e.style)for(var i in t=getComputedStyle(e),["alignment-baseline","dominant-baseline","fill","fill-opacity","font-family","font-size","font-variant","font-weight","text-align","text-anchor"].forEach((function(i){a.a9S(),!e.style[i]&&t[i]&&(e.style[i]=t[i])})),e.children)n(e.children[i])}function s(e){if(a.a9S(),"undefined"!=typeof html2canvas)return i=html2canvas,e();if("undefined"!=typeof requirejs)try{return requirejs(["html2canvas.min.js"],(function(t){return i=t,a.D0H(),e()}))}catch(e){console.warn("Require loading has failed, attempting to load html2canvas manually.")}t.loadScript(function(){var e,i,r;e=2;for(var n=1;-708624285!==a.Z2Z(n.toString(),n.toString().length,1096);n++){if(t.Share.html2canvasLocation)return t.Share.html2canvasLocation;e+=2}if(-1302474083!==a.U6$(e.toString(),e.toString().length,61088)&&t.Share.html2canvasLocation)return t.Share.html2canvasLocation;a.a9S(),i=document.getElementsByTagName("script");for(var s=0;s<i.length;s++)if("s","h","are.js",(r=i[s]).src&&r.src.indexOf("share.js")>-1)return r.src.replace(/standard\/share\.js/,"")+"thirdparty/";return"js/thirdparty/"}()+"html2canvas.min.js",(function(){return a.a9S(),i=html2canvas,e()}))}a.a9S(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Share=t.Share||function(){},t.Share.FullChart2PNG=function(e,t,n){if(a.D0H(),"u","nd","efined",e&&e.chart){if("undefined"==typeof html2canvas)return s((function(){return r(e,t,n)}));i=html2canvas,r(e,t,n)}},t.Share.createImage=function(e,i,r){var n,s,o,l,h,c,u,d,p;n="im",n+="g",s=[].slice.call(arguments),r=s.pop(),null!==i&&"object"==typeof i||(i={widthPX:s[1],heightPX:s[2],imageType:s[3]}),o=i.widthPX,l=i.heightPX,h=i.imageType,c=e.chart.canvas.height,u=e.chart.canvas.width,e.chart.canvas.style.height&&(c=t.stripPX(e.chart.canvas.style.height),u=t.stripPX(e.chart.canvas.style.width)),o&&l?(c=l,u=o):l?u=e.chart.canvas.width*(c/e.chart.canvas.height):o&&(u=o,c=e.chart.canvas.height*(o/e.chart.canvas.width)),d=h?"image/"+h:"image/png",(p=document.createElement(n)).onload=function(){t.Share.FullChart2PNG(e,{image:this,width:u,height:c,hide:i.hide},(function(e,t){if(a.D0H(),e)"Error producin","g canvas snap","shot: ",a.D0J(0),console.warn(a.q7n("Error producing canvas snapshot: ",e));else try{r(t.toDataURL(d))}catch(e){console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."),r(p.src)}}))},p.src=e.chart.canvas.toDataURL(d)},t.Share.uploadImage=function(e,i,r,n){r||(r={}),a.D0H(),r.image=e,t.postAjax(i,JSON.stringify(r),(function(e,t){200==e?n(null,t):n(e,null)}))||n(0,null)},t.Share.shareChart=function(e,i,r){t.Share.createImage(e,{},(function(n){var s,o,l,h,c;a.a9S(),s=t.uniqueID(),o="https://share.chartiq.com",a.D0J(37),l=a.q7n(s,o,"/upload/"),i&&(i.host&&(o=i.host),i.path&&(l=o+i.path+"/"+s)),h=e.getStartDateOffset(),c={id:s,image:n,config:{layout:e.exportLayout(),drawings:e.exportDrawings(),xOffset:h,startDate:e.chart.dataSegment[h].Date,endDate:e.chart.dataSegment[e.chart.dataSegment.length-1].Date,id:s,symbol:e.chart.symbol}},t.Share.uploadImage(n,l,c,(function(e,i){null!==e?t.alert("error sharing chart: ",e):(a.D0J(0),r(a.q7n(o,i)))}))}))}},x=e=>{var t,i,a=N;t=2;for(var r=1;1908465696!==a.Z2Z(r.toString(),r.toString().length,46458);r++)i=""===!_CIQ?_CIQ:e.CIQ,t+=2;1307475919!==a.U6$(t.toString(),t.toString().length,14190)&&(i="undefined"!=typeof _CIQ?_CIQ:e.CIQ),a.a9S(),i.ChartEngine.prototype.setRange=function(e,t){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,N,H,I,j;function O(i){var l,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,P;if("l","a","you","t","d","a","y","undef","ined",void 0===i&&(i=null),l=0,c=0,u=new Date,a.a9S(),d=e.base,p=e.periodicity,m=h.layout,e.goIntoFuture&&(!n.masterData.length||s>n.masterData[n.masterData.length-1].DT)){g=n.masterData.length?n.masterData.pop():{DT:s},a.H6P(40),f=a.S40(32,"33390567"),1303637610,y=2;for(var F=1;a.U6$(F.toString(),F.toString().length,27995)!==f;F++)v=h.doCleanupGaps([g,{DT:o}],n,{cleanupGaps:"",noCleanupDates:!1}),h.setMasterData(n.masterData.concat(v),n,{noCleanupDates:!1}),a.D0J(40),h.createDataSet(1,a.q7n(64,"1"),{appending:!1}),y+=2;1303637610!==a.Z2Z(y.toString(),y.toString().length,81742)&&(v=h.doCleanupGaps([g,{DT:o}],n,{cleanupGaps:"gap",noCleanupDates:!0}),h.setMasterData(n.masterData.concat(v),n,{noCleanupDates:!0}),h.createDataSet(null,null,{appending:!0}))}if(b=(x=n.dataSet).length,x&&0!==b){if("day"===d&&p&&"day"===p.interval)l=b<(S=e.multiplier)?0:b-S,a.D0J(7),c=a.S40(1,b);else if("today"===d&&x[b-1].DT.getDate()<u.getDate()){(w=new Date(x[b-1].DT.getTime())).getTime(),C=0;for(var L=b-1;L>=0;L--)if(x[L]&&x[L].DT.getDate()!=w.getDate()){w=new Date(+x[L+1].DT),a.H6P(0),C=a.q7n(L,1);break}l=C,a.D0J(7),c=a.q7n(1,b)}else"a","l","l",l="all"!=e.base&&(s.getTime()>=x[0].DT.getTime()||e.goIntoPast)?h.tickFromDate(s,n,null,!0):0,"all"!=e.base&&(o.getTime()<=x[b-1].DT.getTime()||e.goIntoFuture)?(c=h.tickFromDate(o,n))>b-1&&c--:(a.H6P(7),c=a.q7n(1,b));if(a.D0J(113),(D=a.S40(64,"1",l,c))<1)t&&t(i);else{for(var E in k=e.padding||0,c<b-1&&(k=0),P=(n.width-k)/D,h.setCandleWidth(P,n),a.D0J(114),n.scroll=a.S40(c,b,"1",D),h.micropixels=1,h.panels)h.calculateYAxisMargins(h.panels[E].yAxis);e.dontSaveRangeToLayout?delete m.range:(delete e.chart,delete m.setSpan,m.range=e),h.draw(),h.changeOccurred("layout"),r||h.dispatch("periodicity",{stx:h,differentData:_,prevPeriodicity:{interval:M,periodicity:T,timeUnit:A}}),t&&t(i)}}else t&&t(i)}function Y(e,t,r,n,s,o){var l,h;return l=0,a.H6P(7),h=a.q7n(t,e),i.ChartEngine.isDailyInterval(r)?("w","eek",l="month"==r?h/i.MONTH/n:"week"==r?h/i.WEEK/n:h/i.DAY/n):isNaN(r)||("secon","d","millisecond"==s?(a.H6P(115),l=a.q7n(r,n,h)):l="second"==s?h/i.SECOND/(n*r):h/i.MINUTE/(n*r)),Math.round(l)}if(i.isEmpty(e)&&(e={dtLeft:arguments[0],dtRight:arguments[1],padding:arguments[2],chart:arguments[3]},t=arguments[4]),this.staticRange&&(e.goIntoPast=e.goIntoFuture=!0),e.chart||(e.chart=this.chart),void 0===e.padding&&(e.padding=0),r=!1,n=e.chart,s="string"==typeof e.dtLeft?new Date(e.dtLeft):e.dtLeft,o=new Date,e.dtRight&&(o="string"==typeof e.dtRight?new Date(e.dtRight):e.dtRight),s||(l=this.standardMarketIterator(o,null,n),s=l.previous(n.maxTicks),e.periodicity||(r=!0)),a.a9S(),n.inflectionPoint=s,this.layout.range={dtLeft:s,dtRight:o},h=this,c=0,this.quoteDriver){if(r)u=this.layout.interval,p=this.layout.timeUnit,d=this.layout.periodicity;else if(e.periodicity)u=(m=i.cleanPeriodicity(e.periodicity.period,e.periodicity.interval,e.periodicity.timeUnit)).interval,p=m.timeUnit,d=m.period;else if(g=o.getTime()-s.getTime(),this.autoPickCandleWidth.turnOn){x=0,x=this.autoPickCandleWidth.candleWidth?this.autoPickCandleWidth.candleWidth:this.chart.barsHaveWidth?5:2,b=n.width/x,u=(C=this.dynamicRangePeriodicityMap)[0].interval,d=1;for(var R=0;R<C.length;R++){if((w=g/C[R].rangeInMS)<b){C[R-1]?(u=C[R-1].interval,p=C[R-1].timeUnit,a.D0J(14),d=Math.ceil(a.q7n(b,S))):(u=C[R].interval,p=C[R].timeUnit,d=1);break}S=w}}else{f=this.staticRangePeriodicityMap,y=null;for(var $=0;$<f.length;$++)if(g/(v=f[$]).rangeInMS<1.001){y=v;break}u=y.interval,d=y.periodicity,p=y.timeUnit}if(D=this.chart.scroll,k=this.layout.candleWidth,M=this.layout.interval,T=this.layout.periodicity,A=this.layout.timeUnit,this.chart.scroll=this.chart.maxTicks=Y(o.getTime(),s.getTime(),u,d,p,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks,_=this.needDifferentData({period:d,interval:u,timeUnit:p}),Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>s||this.chart.endPoints.end<o)&&(_=!0),!this.chart.masterData||!this.chart.masterData.length||_||e.forceLoad){if(P="w",P+="e",P+="e",P+="k",this.layout.interval=u,this.layout.periodicity=d,this.layout.timeUnit=p,this.layout.timeUnit||(F="t",F+="i",F+="c",F+="k",i.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:"second"==this.layout.interval?this.layout.timeUnit="second":this.layout.interval!=F&&(this.layout.timeUnit="minute")),L={symbol:n.symbol,symbolObject:n.symbolObject,chart:n,nodraw:!0},"tick"==this.layout.interval){a.H6P(10),E=a.q7n("1123097109",20),N=-953471532,H=2;for(var z=1;a.Z2Z(z.toString(),z.toString().length,19603)!==E;z++)L.startDate=s,H+=2;a.Z2Z(H.toString(),H.toString().length,34020)!==N&&(L.startDate=s),L.startDate=s,L.endDate=o}this.displayInitialized||(L.initializeChart=!0),"month"!=(I={symbol:n.symbol,symbolObject:n.symbolObject,interval:this.layout.interval}).interval&&I.interval!=P||this.dontRoll||(I.interval="day"),j=Math.max(this.quoteDriver.getQuoteFeed(I).behavior.bufferSize+50,200),l=this.standardMarketIterator(s,null,n),L.startDate=new Date(l.previous(j).getTime()),l=this.standardMarketIterator(o,null,n),L.endDate=new Date(l.next(j).getTime()),L.endDate<Date.now()&&(this.isHistoricalModeSet=!0),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(L,q)}else this.layout.interval==u&&this.layout.periodicity==d&&this.layout.timeUnit==p&&this.chart.dataSegment&&this.chart.dataSegment[0]&&this.chart.dataSegment[0].DT==n.inflectionPoint||(this.layout.interval=u,this.layout.periodicity=d,this.layout.timeUnit=p,this.createDataSet()),q()}else O();function q(e){return e&&0===c?(n.scroll=D,h.setCandleWidth(k),h.layout.interval=M,h.layout.periodicity=T,h.layout.timeUnit=A,void(t&&t(e))):++c>10?("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stoppi","ng. Check periodicity logic.",console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),void O()):void O()}},i.ChartEngine.prototype.setSpan=function(e,t){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w;function D(e,t){return y?(7,t?e.setHours(e.getHours()+7):(e.setHours(e.getHours()-7),h.isMarketDate(e)||e.setDate(e.getDate()-2)),e):e}if(r="ob",r+="j",r+="e",n=arguments[0],s=arguments[1],o=arguments[2],l=arguments[3],typeof e==(r+="ct")?(n=e.period?e.period:e.multiplier?e.multiplier:1,s=e.interval?e.interval:e.base?e.base:e.span?e.span:e.period,o=e.padding,l=e.chart):(e={period:n,interval:s,padding:o,chart:l},t=arguments[5]),l||(l=this.chart),h=l.market,"all"==(s=s.toLowerCase()))return e.dontSaveRangeToLayout=!0,void this.displayAll(e,t);function k(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}u=s,d=1,"today"==s?u="day":"year"==s&&(p="m",p+="on",p+="t",u=p+="h",d=12),m=i.shallowClone(e),f=(g={begin:h.marketZoneNow(),interval:u,period:d}).begin,y=i.Market.Symbology.isForexSymbol(l.symbol),"ytd"===s?((f=k(f)).setMonth(0),f.setDate(1)):"month"===s?(f=k(new Date)).setMonth(f.getMonth()-n):"year"===s?(f=k(new Date)).setFullYear(f.getFullYear()-n):"week"===s?(f=k(new Date)).setDate(f.getDate()-7*n):"day"===s&&1==n&&h.isMarketDay()?(v=f.getHours(),x=f.getMinutes(),b=f.getSeconds(),C=f.getMilliseconds(),(f=(c=h.newIterator(g)).previous()).setHours(v,x,b,C),f=h._convertFromMarketTZ(f)):"today"===s?(g.begin=D(f,!0),c=h.newIterator(g),(h.isOpen()||h.getPreviousOpen().getDate()==f.getDate())&&c.next(),D(f=c.previous()),m.goIntoFuture=!0,m.dtRight=new Date(+f),m.dtRight.setDate(f.getDate()+1),m.dtRight=h._convertFromMarketTZ(m.dtRight),y||(f.setHours(c.market.zopen_hour),f.setMinutes(c.market.zopen_minute),f.setSeconds(0)),f=h._convertFromMarketTZ(f)):(S="d",S+="ay","day"==s&&(g.begin=D(f,!0)),c=h.newIterator(g),1==n&&n++,a.H6P(7),f=c.previous(a.S40(1,n)),s==S&&(f=h._convertFromMarketTZ(D(f)))),m.dtLeft=f,m.maintainPeriodicity&&(m.periodicity={},m.periodicity.interval=this.layout.interval,m.periodicity.period=this.layout.periodicity),l.spanLock=!1,m.dontSaveRangeToLayout=!0,w=this,this.setRange(m,(function(i){w.layout.setSpan=e,w.changeOccurred("layout"),a.a9S(),"today"==s&&(l.spanLock=!0),t&&t(i)}))},i.ChartEngine.prototype.getSpanCandleWidth=function(e){var t,i,r,n,s,o;if("mont","h",e&&e.base&&e.multiplier){if(t=parseFloat(e.multiplier),i=e.base,r=new Date,n=new Date,"year"==i)n.setFullYear(n.getFullYear()-t);else if("month"==i){391528754,1131678275,s=2;for(var l=1;391528754!==a.Z2Z(l.toString(),l.toString().length,84725);l++)n.setMonth(n.getMonth()%t),s+=2;1131678275!==a.U6$(s.toString(),s.toString().length,90186)&&n.setMonth(n.getMonth()-t)}else"day"==i?n.setDate(n.getDate()-t):"week"==i?n.setDate(n.getDate()-7*t):"YTD"==i&&(n.setMonth(0),a.H6P(10),n.setDate(a.S40("1",0)));a.H6P(94);var h=a.q7n(2,7,16,12011,13e3);a.H6P(52),a.a9S();var c=a.q7n(660,72,10);a.D0J(0);var u=a.S40(49,11);a.H6P(94);var d=a.S40(14,18,3,17,42);return o=(r.getTime()-n.getTime())/h/c/u/d,a.H6P(116),o=a.S40(o,7,"5",32),this.chart.width/o}},i.ChartEngine.prototype.displayAll=function(e,t){var r,n,s,{chart:o,layout:l}=this;function h(e){e||r.quoteDriver.loadAll(o,c)}function c(){var n;o.masterData&&o.masterData.length&&((n=i.clone(e)).dtLeft=o.endPoints.begin.DT,n.dtRight=o.endPoints.end.DT,n.periodicity={},n.periodicity.interval=l.interval,n.periodicity.period=l.periodicity,n.periodicity.timeUnit=l.timeUnit,a.D0H(),r.setRange(n,(function(i){for(var n in r.layout.setSpan={base:e.base,multiplier:e.multiplier},r.changeOccurred("layout"),a.a9S(),r.panels)r.calculateYAxisMargins(r.panels[n].yAxis);r.draw(),t&&t(i)})))}e&&e.chart&&(o=e.chart),r=this,this.quoteDriver?(n=e.maintainPeriodicity?{period:l.periodicity,interval:l.interval,timeUnit:l.timeUnit}:{period:1,interval:"month",timeUnit:null},n=e.periodicity?e.periodicity:n,n=i.cleanPeriodicity(n.period,n.interval,n.timeUnit),s=this.needDifferentData(n),this.layout.periodicity=n.period,this.layout.interval=n.interval,this.layout.timeUnit=n.timeUnit,a.a9S(),e.forceLoad||s?(this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({noDraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},h)):o.moreAvailable||!o.upToDate?h():(this.createDataSet(),c())):c()}},b=e=>{var t,i=N;i.a9S(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.importLayout=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L;if(e){for(var E in r=this,n=[],"object"!=typeof a&&(a={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]}),s=this.layout,o=t.shallowClone(s),l=a.managePeriodicity,h=a.cb,c=a.seriesCB,u=a.noDataLoad,d=a.preserveTicksAndCandleWidth,p=null,this.exportDrawings&&(p=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!0,s.studies)m=s.studies[E],t.getFn("Studies.removeStudy")(this,m);for(v in this.overlays={},g=t.shallowClone(this.panels),this.panels={},f=t.clone(e),s.periodicity=o.periodicity,s.interval=o.interval,s.timeUnit=o.timeUnit,s.setSpan=o.setSpan,s.range=o.range,d?s.candleWidth=o.candleWidth:s.candleWidth||(s.candleWidth=8),this.setCandleWidth(s.candleWidth),s.flipped&&this.flipChart(s.flipped),C=function(e,t){return i.a9S(),e.index<t.index?-1:1},y=f.panels)"index"in y[v]||(C=null),(x=y[v]).name=v,n.push(x);if(s.panels={},S=null,n.length>0){C&&n.sort(C);for(var N=0;N<n.length;++N)b=(x=n[N]).yAxis?new t.ChartEngine.YAxis(x.yAxis):null,this.stackPanel(x.display,x.name,x.percent,x.chartName,b),x.soloing&&(S=this.panels[x.name])}for(var H in t.isEmpty(y)&&this.stackPanel("chart","chart",1,"chart"),this.resizeCanvas(),g)if(w=g[H],D=this.panels[H]){for(var I in this.container.removeChild(D.holder),w.handle&&this.container.removeChild(w.handle),{holder:!0,subholder:!0,display:!0,icons:!0})D[I]=w[I];this.configurePanelControls(D),w.chart.panel==w&&(w.chart.panel=D)}else this.privateDeletePanel(w);for(var j in this.chart.panel=this.panels.chart,O(this.panels),t.dataBindSafeAssignment(s,t.clone(f)),k=t.clone(s.studies),delete s.studies,k)M=k[j],t.getFn("Studies.addStudy")(this,M.type,M.inputs,M.outputs,M.parameters,M.panel);if(this.extendedHours&&this.extendedHours.prepare(s.extended,s.marketSessions),void 0===s.chartType&&(s.chartType="line"),this.setMainSeriesRenderer(),S&&this.panelSolo(S),this.adjustPanelPositions(),O(this.panels),this.storePanels(),!u){if(f.symbols&&f.symbols.length)return T={chart:this.chart},!d&&l&&f.range&&Object.keys(f.range).length?T.range=f.range:!d&&l&&f.setSpan&&Object.keys(f.setSpan).length?T.span=f.setSpan:l&&f.interval?T.periodicity={interval:f.interval,period:f.periodicity,timeUnit:f.timeUnit}:T.periodicity={interval:o.interval,period:o.periodicity,timeUnit:o.timeUnit},A=f.symbols[0].symbolObject||f.symbols[0].symbol,void this.loadChart(A,T,(function(e){var a,n;if(i.a9S(),!e){for(var s,o=1;o<f.symbols.length&&r.addSeries;++o)(s=f.symbols[o]).parameters||(s.parameters={}),a=t.clone(s.parameters),this.panels[a.panel]?r.addSeries(s.id,a,R):(n="Warning: Seri",n+='es "',console.warn(n+s.id+'" could not be imported due to a missing corresponding panel "'+a.panel+'"'));f.chartScale&&r.setChartScale(f.chartScale)}Y(e),h&&h.apply(null,arguments)}));if(l){if(!d&&this.setRange){if((_=f.range)&&Object.keys(_).length&&this.chart.symbol)return void this.setRange(_,(function(){Y(),h&&h()}));if(f.setSpan&&Object.keys(f.setSpan).length&&this.chart.symbol)return void this.setSpan(f.setSpan,(function(){i.a9S(),Y(),h&&h()}))}return P=f.interval,F=f.periodicity,L=f.timeUnit,isNaN(F)&&(F=1),P||(P="day"),void this.setPeriodicity({period:F,interval:P,timeUnit:L},(function(){Y(),h&&h()}))}}l&&(s.periodicity=f.periodicity,s.interval=f.interval,s.timeUnit=f.timeUnit,s.setSpan=f.setSpan),this.createDataSet(),d||this.home(),Y(),h&&h()}else a.cb&&a.cb();function O(e){for(var t,i=0;i<n.length;i++)"yaxisL","HS",a(t=n[i],"yaxisLHS"),a(t,"yaxisRHS");function a(t,i){var a,r,n,o;if(t[i]&&t[i].length&&(a=e[t.name])){r=a[i],n=new Array(r.length);for(var l=0;l<r.length;l++)(o=t[i].indexOf(r[l].name))>-1?n[o]=r[l]:n.push(r[l]);n.length&&(a[i]=n.filter(s))}}function s(e){return!!e}r.chart.yAxis=r.chart.panel.yAxis}function Y(e){var t,a,n;if("lay","out",p&&r.importDrawings(p),r.currentlyImporting=!1,!e){for(var s in n=[],r.chart.series){if("s","tu","dy",!r.removeSeries)break;"study"==(a=r.chart.series[s]).parameters.bucket&&(t=!0,r.removeSeries(a),n.push(a))}for(var o=0;o<n.length;o++)a=n[o],r.addSeries(a.id,a.parameters,l);t||r.draw(),r.updateListeners("layout"),i.D0H(),r.changeOccurred("layout")}function l(){r.createDataSet(),O(r.panels),r.calculateYAxisPositions(),r.draw()}}function R(){r.calculateYAxisPositions(),O(r.panels),c&&c()}},t.ChartEngine.prototype.exportLayout=function(e){var a,r,n,s,o,l;for(var h in i.D0H(),a={},this.layout)"pane","ls","stu","d","ies","studies"!=h&&"panels"!=h&&"drawing"!=h?a[h]=t.clone(this.layout[h]):"studies"==h?a.studies={}:"panels"==h&&(a.panels={});for(var c in r=0,this.panels)!1!==(n=this.panels[c]).exportable&&((s=a.panels[c]={}).percent=n.percent,s.display=n.display,s.chartName=n.chart.name,s.soloing=n.soloing,s.index=r++,s.yAxis={name:n.yAxis.name,position:n.yAxis.position},n.yaxisLHS&&(s.yaxisLHS=u(n.yaxisLHS)),n.yaxisRHS&&(s.yaxisRHS=u(n.yaxisRHS)));function u(e){var t;t=[];for(var a=0;a<e.length;a++)t.push(e[a].name);return i.a9S(),t}for(var d in this.layout.studies)o=a.studies[d]={},l=this.layout.studies[d],o.type=l.type,o.inputs=t.clone(l.inputs),o.outputs=t.clone(l.outputs),o.panel=l.panel,o.parameters=t.clone(l.parameters);return e?a.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0,"exclude-generated":!0}):delete a.symbols,a},t.ChartEngine.prototype.importPreferences=function(e){t.extend(this.preferences,e),e.timeZone&&this.setTimeZone(this.dataZone,e.timeZone),e.language&&t.I18N&&t.I18N.localize(this,e.language),this.changeOccurred("preferences")},t.ChartEngine.prototype.exportPreferences=function(){return i.D0H(),this.preferences}},C=e=>{var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine&&(t.ChartEngine.prototype.rightClickOverlay=function(e,t){var i,a;i="rig",i+="htClickOverla",i+="y",this.runPrepend("rightClickOverlay",arguments)||((a=this.overlays[e]).editFunction?a.editFunction(t):this.removeOverlay(e),this.runAppend(i,arguments))},t.ChartEngine.prototype.addOverlay=function(e){var t,i,a,r;if(t="a",t+="ddOverl",t+="ay",!this.runPrepend(t,arguments)){N.D0H(),i=1520886097,a=1981641975,r=2;for(var n=1;N.U6$(n.toString(),n.toString().length,3782)!==i;n++)this.overlays[e.name]=e,this.runAppend("addOverlay",arguments),r+=2;N.U6$(r.toString(),r.toString().length,5784)!==a&&(this.overlays[e.name]=e,this.runAppend("",arguments))}},t.ChartEngine.prototype.removeOverlay=function(e){var i,a,r,n,s,o;if(i="remo",i+="veOv",i+="erl",i+="ay",!this.runPrepend(i,arguments)){for(var l in a=this.overlays[e],this.overlays){r="F",r+="i",r+="el",r+="d",n=this.overlays[l],s=[r],t.Studies&&(s=t.Studies.getFieldInputs(n));for(var h=0;h<s.length;h++)a.outputMap[n.inputs[s[h]]]&&this.removeOverlay(n.name)}N.a9S(),a&&(this.cleanupRemovedStudy(a),this.panels[a.panel],delete this.overlays[e],this.checkForEmptyPanel(a.panel)),this.currentlyImporting||(o="lay",o+="out",this.displaySticky(),this.createDataSet(),this.changeOccurred(o)),this.resetDynamicYAxis(),this.runAppend("removeOverlay",arguments)}},t.ChartEngine.prototype.cleanupRemovedStudy=function(e){if(e){for(var i in e.study.removeFN&&e.study.removeFN(this,e),this.plugins)i.indexOf("{"+e.id+"}")>-1&&delete this.plugins[i];this.layout.studies&&delete this.layout.studies[e.name],delete this.overlays[e.name],t.Studies&&t.Studies.removeStudySymbols(e,this),N.D0H(),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}}),t.Studies=t.Studies||function(){},t.Studies.DEFAULT_INPUTS={Period:14},t.Studies.DEFAULT_OUTPUTS={Result:"auto"},t.Studies.sortForProcessing=e=>{var t,i;return t=[],(i=e.layout.studies)&&function t(i,a){i.forEach(i=>{var r;-1==a.indexOf(i)&&((r=i.getDependents(e)).length&&t(r,a),a.unshift(i))})}(Object.values(i),t),t},t.Studies.StudyDescriptor=function(e,i,a,r,n,s){var o;this.name=e,this.type=i,this.panel=a,this.inputs=r,this.outputs=n,this.parameters=s,this.outputMap={},this.min=null,this.max=null,N.D0J(1),this.startFrom=N.q7n(1,"0"),this.subField="Close",(o=t.Studies.studyLibrary[i])||(o={},("chart"==a||!a&&s&&"chart"==s.chartName)&&(this.overlay=!0)),void 0===o.inputs&&(o.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),void 0===o.outputs&&(o.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),this.study=o,N.D0H(),this.libraryEntry=o},t.Studies.StudyDescriptor.prototype.getYAxis=function(e){var t,i,a;return t=this.yAxis,this.parameters&&(i=this.parameters.yaxisDisplayValue),t||(a=e.panels[this.panel])&&(t=e.getYAxisByName(a,i)||e.getYAxisByName(a,this.name)||a.yAxis),t||(t=e.getYAxisByName(e.chart.panel,i)||e.chart.panel.yAxis),t},t.Studies.StudyDescriptor.prototype.getContext=function(e){return e.chart.context},t.Studies.StudyDescriptor.prototype.getDependents=function(e,i){var a,r,n;for(var s in a=[],e.layout.studies)if((r=e.layout.studies[s])!=this){n=t.Studies.getFieldInputs(r);for(var o=0;o<n.length;o++)if(r.inputs[n[o]].includes(this.name)){if(i&&r.parameters&&r.parameters.panelName)continue;a.push(r),a=a.concat(r.getDependents(e,i));break}}return N.a9S(),a},t.Studies.StudyDescriptor.prototype.undraggable=function(e){var t;if(t=this.study.attributes){if(t.panelName&&t.panelName.hidden)return!0;if(t.yaxisDisplayValue&&t.yaxisDisplayValue.hidden)return!0}return!1},t.Studies.StudyDescriptor.prototype.appendFutureTicks=function(e,t){var i,a,r,n;if(i=e.chart.scrubbed,N.a9S(),i.length){for(a=e.standardMarketIterator(i[i.length-1].DT),r=t.length-1;r>=0;r--){for(var s in n=t[r])if(n[s]||0===n[s]){r=-1;break}if(-1==r)break;t.pop()}for(r=0;r<t.length;r++)(n=t[r]).DT||(n.DT=a.next()),n.displayDate||e.setDisplayDate(n),n.futureTick=!0,i.push(n)}},t.Studies.generateID=function(e,i,a,r,n){var s,o,l,h,c,u,d=N;if(s=t.Studies.studyLibrary[i],d.H6P(37),o=d.q7n("","",n||i),s&&s.customRemoval)return o;if(d.D0H(),!t.isEmpty(a)){for(var p in l=!0,a)h="Anc",h+="h",["id","display","Shading",h+="or Selector"].includes(p)||"field"!=(c=a[p])&&(c=c.toString(),void 0!==t.Studies.prettify[c]&&(c=t.Studies.prettify[c]),l?(" ","(",l=!1,o+=" ("):c&&(o+=","),o+=c);l||(o+=")")}if(r&&0===r.indexOf(o))return r;if(e.layout.studies&&e.layout.studies[o])for(var m=2;m<50;m++)if(d.D0J(37),u=d.q7n(m,o,"-"),!e.layout.studies[u]){o=u;break}return o},t.Studies.DialogHelper=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F=N;function L(e,t){this.attributes[e]||(this.attributes[e]={}),t&&(this.attributes[e].hidden=!0)}function E(e){var t,a,r;t={},a=e.defaults,r={name:e.name,heading:i.translateIf(e.label),defaultValue:a[0],value:e.value,options:t,type:"select"};for(var n=0;n<a.length;n++)t[a[n]]=i.translateIf(a[n]);return void 0!==e.color&&(r.defaultColor=i.defaultColor,r.color=e.color),r}for(var H in"u","ndefi","n","ed",i=this.stx=e.stx,a=this.sd=e.sd,this.name=a?a.type:e.name,this.signal=1,this.inputs=[],this.outputs=[],this.parameters=[],void 0===(r=this.libraryEntry=a?a.study:t.Studies.studyLibrary[e.name]).inputs&&(r.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),void 0===r.outputs&&(r.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),s=(n=a&&i.panels[a.panel]?i.panels[a.panel]:i.chart.panel).chart,this.title=i.translateIf(r.name),this.attributes=t.clone(r.attributes),this.attributes||(this.attributes={}),this.attributes)for(var I in o=this.attributes[H])"function"==typeof o[I]&&(o[I]=o[I].call(a));function j(e){var t,a;if("a","li","a","s","alias"==k)for(var r in t=1,i.panels){if(r==e)return a=t,F.a9S(),"Panel "+a.toString();t++}return e}for(var O in l=[],h=i.layout.studies,c=[],a&&(c=Array.prototype.concat(a,a.getDependents(i))),h)if(!(c.indexOf(h[O])>-1))for(var Y in h[O].outputMap)l.push(Y);function R(e){return"checkb","ox",F.D0H(),{name:e.name,heading:i.translateIf(e.label),defaultValue:e.defaults,value:e.value,type:"checkbox"}}for(var $ in r.inputs)if(u={},this.inputs.push(u),u.name=$,u.heading=i.translateIf($),d=r.inputs[$],a&&a.inputs&&void 0!==a.inputs[$]&&null!==a.inputs[$]?u.value=a.inputs[$]:u.value=r.inputs[$],u.defaultInput=r.inputs[$],this.attributes[$]||(this.attributes[$]=t.Studies.inputAttributeDefaultGenerator(u.defaultInput)),d.constructor==Number)u.type="number";else if(d.constructor==String)if(p=t.Studies.movingAverageHelper(i,u.defaultInput))"o","p","t","ions",u.type="select",u.defaultInput=p,(m=t.Studies.movingAverageHelper(i,u.value))||(m=u.value),u.value=m,u.options=t.Studies.movingAverageHelper(i,"options");else if("field"==d){g="hl/",g+="2",u.type="select",u.options={},f=["Open","High","Low","Close","Adj_Close",g,"hlc/3","hlcc/4","ohlc/4",s.defaultPlotField].concat(l);for(var z=0;z<f.length;z++)y=f[z],u.options[y]=i.translateIf(y);"field"==u.value&&(u.value="Close"),"field"==u.defaultInput&&(u.defaultInput="Close")}else"hh:mm",":ss","yyyy-m","m-dd","t","e","x","t",u.type="text","yyyy-mm-dd"==this.attributes[$].placeholder?u.type="date":"hh:mm:ss"==this.attributes[$].placeholder&&(u.type="time");else if(d.constructor==Boolean)u.type="checkbox",!0!==u.value&&"true"!=u.value&&"on"!=u.value||(u.value=!0);else if(d.constructor==Array){u.type="select",u.options={};for(var q=0;q<d.length;q++)u.options[d[q]]=i.translateIf(d[q]);u.value.constructor==Array&&(u.value=u.value[0]),this.attributes[$].defaultSelected?u.defaultInput=this.attributes[$].defaultSelected:(F.D0J(21),u.defaultInput=d[F.S40("0",0)])}this.dateTimeInputs=[];for(var J=0;J<this.inputs.length;J++)if("d","at","e","date"==(v=this.inputs[J]).type){" ","Date",x=v.name.substring(0,v.name.indexOf(" Date"));for(var V=0;V<this.inputs.length;V++)if("t","i","m","e","time"==(b=this.inputs[V]).type&&b.name==x+" Time"){this.dateTimeInputs.push(x);break}}for($ in this.adjustInputTimesForDisplayZone(),r.outputs)(C={name:$,heading:i.translateIf($)}).color=C.defaultOutput=r.outputs[$],a&&a.outputs&&a.outputs[$]&&(C.color=a.outputs[$]),"auto"==C.color&&(C.color=i.defaultColor),this.outputs.push(C);if(S=a?a.parameters:null,r.parameters&&(w=r.parameters.init)&&(void 0!==w.studyOverZonesEnabled&&(D={name:"studyOverZones",heading:i.translateIf("Show Zones"),defaultValue:w.studyOverZonesEnabled,value:w.studyOverZonesEnabled},S&&(S.studyOverZonesEnabled||!1===S.studyOverZonesEnabled)&&(D.value=S.studyOverZonesEnabled),D.type="checkbox",this.parameters.push(D)),void 0!==w.studyOverBoughtValue&&("t","e","x","t",D={name:"studyOverBought",heading:i.translateIf("OverBought"),defaultValue:w.studyOverBoughtValue,value:w.studyOverBoughtValue,defaultColor:w.studyOverBoughtColor,color:w.studyOverBoughtColor},S&&S.studyOverBoughtValue&&(D.value=S.studyOverBoughtValue),S&&S.studyOverBoughtColor&&(D.color=S.studyOverBoughtColor),"auto"==D.color&&(D.color=i.defaultColor),D.type="text",this.parameters.push(D)),void 0!==w.studyOverSoldValue&&(D={name:"studyOverSold",heading:i.translateIf("OverSold"),defaultValue:w.studyOverSoldValue,value:w.studyOverSoldValue,defaultColor:w.studyOverSoldColor,color:w.studyOverSoldColor},S&&S.studyOverSoldValue&&(D.value=S.studyOverSoldValue),S&&S.studyOverSoldColor&&(D.color=S.studyOverSoldColor),"auto"==D.color&&(D.color=i.defaultColor),D.type="text",this.parameters.push(D)),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})),k=this.panelSelect=e.panelSelect,M=this.axisSelect=e.axisSelect,F.a9S(),e.addWhenDone&&(M=k=!1),M||k){"yaxisDis","play","Valu","e",a||(a=t.Studies.addStudy(i,e.name,null,null,{calculateOnly:!0}),t.Studies.removeStudy(i,a)),k&&("Sho","w"," ","as Underlay","A","uto",this.parameters.push(E({label:"Panel",name:"panelName",defaults:function(){var e;for(var t in e=[],F.a9S(),e.push("Auto"),i.panels)t==a.panel&&S&&S.panelName||e.push(j(t));return i.checkForEmptyPanel(a.panel,!0,a)||e.push("New panel"),e}(),value:S&&S.panelName?j(S.panelName):"Auto"}),R({label:"Show as Underlay",name:"underlay",defaults:!1,value:a.underlay||a.parameters&&a.parameters.underlayEnabled}))),F.H6P(1),T=-F.S40(1,"1361208857"),F.D0J(1),A=-F.q7n(1,"729350451"),_=2;for(var B=1;F.U6$(B.toString(),B.toString().length,66596)!==T;B++)P=i.getYAxisByName(n,a.name),_+=2;F.U6$(_.toString(),_.toString().length,59405)!==A&&(P=i.getYAxisByName(n,a.name)),M&&("flip","p","ed","I","nvert Y-Axi","s","d","ef","au","lt","Y-A","x","is",this.parameters.push(E({label:"Y-Axis",name:"yaxisDisplay",defaults:function(){var e,t;e=n.yaxisLHS.concat(n.yaxisRHS),(t=[]).push("default","right","left","none","shared");for(var i=0;i<e.length;i++)e[i]!=P&&t.push(e[i].name);return t}(),value:S&&S.yaxisDisplayValue||P&&P.position||(a.panel!=a.name?"shared":n.yAxis.position||"default"),color:P&&P.textStyle?P.textStyle:"auto"}),R({label:"Invert Y-Axis",name:"flipped",defaults:!1,value:S?S.flippedEnabled:!!P&&P.flipped}))),L.call(this,"flippedEnabled",!P&&a.panel!=a.name),L.call(this,"underlayEnabled",r.underlay),L.call(this,"panelName",null===r.seriesFN),L.call(this,"yaxisDisplayValue",null===r.seriesFN||r.yAxis&&r.yAxis.noDraw)}},t.Studies.DialogHelper.prototype.updateStudy=function(e){var i,a,r,n;for(var s in i={},a=this.sd,(r=this.libraryEntry)||(r={}),a||(a=r),i.inputs=t.clone(a.inputs),i.outputs=t.clone(a.outputs),i.parameters=t.clone(a.parameters),this.adjustInputTimesForDisplayZone(e),e.parameters&&e.parameters.panelName&&(e.parameters.panelName=function(e){var t,i,a,r,n=N;if("alias"==this.panelSelect&&(a=e,n.D0H(),t=(r=a.match(/.* (\d)/))&&r[1]))for(var s in this.stx.panels)if(!--t)return s;n.H6P(21),i=n.q7n("2",0);for(var o=1;-1771844819!==n.U6$(o.toString(),o.toString().length,84155);o++)return e;if(-225640795!==n.Z2Z(i.toString(),i.toString().length,20071))return e}.call(this,e.parameters.panelName)),t.extend(i,e),i.parameters||(i.parameters={}),a=i.inputs&&i.inputs.id?t.Studies.replaceStudy(this.stx,i.inputs.id,this.name,i.inputs,i.outputs,i.parameters,null,a.study):t.Studies.addStudy(this.stx,this.name,i.inputs,i.outputs,i.parameters,null,a.study),n=new t.Studies.DialogHelper({stx:this.stx,sd:a,axisSelect:this.axisSelect,panelSelect:this.panelSelect}))"signal"!=s&&(this[s]=n[s]);N.D0H(),this.signal*=-1},t.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(e){var i,a,r,n,s,o,l,h,c=N;if(this.stx.displayZone)for(var u=0;u<this.dateTimeInputs.length;u++){for(i=this.dateTimeInputs[u],o="",e&&e.inputs&&(c.H6P(0),r=e.inputs[c.S40(i," Date")],c.D0J(0),r&&(o=r),(n=e.inputs[c.S40(i," Time")])&&(o+=n)),a=0;a<this.inputs.length;a++)" D","ate",s=this.inputs[a],r||""===r||s.name!=i+" Date"?n||""===n||s.name!=i+" Time"||(o+=s.value):o=s.value+o;if((o=o.replace(/\D/g,"")).length<12)return;if(l=t.strToDateTime(o),!isNaN(l.valueOf()))if(e)e.inputs||(e.inputs={}),h=t.convertTimeZone(l,this.stx.displayZone),c.D0J(0),e.inputs[c.q7n(i," Date")]=t.yyyymmdd(h),c.H6P(0),e.inputs[c.S40(i," Time")]=t.hhmmss(h);else for(h=t.convertTimeZone(l,null,this.stx.displayZone),a=0;a<this.inputs.length;a++)" Tim","e",(s=this.inputs[a]).name==i+" Date"&&(s.value=t.yyyymmdd(h)),s.name==i+" Time"&&(s.value=t.hhmmss(h))}},t.Studies.prepareStudy=function(e,i,a){var r=N;if("undefin","e","d",void 0===i.calculateFN&&(i.useRawValues=!0),t.isEmpty(a.outputMap))for(var n in a.outputs)if(i.useRawValues)a.outputMap[n]=n;else{r.D0J(62);var s=r.S40(11,423,7,42);r.D0J(101);var o=r.S40(4,14,11,4286,55804);r.H6P(57);r.S40(4772,9548,6,2);r.D0J(90);var l=r.q7n(113050,7106,2,8);r.D0J(0);r.q7n(1040,10);r.D0J(52);var h=r.q7n(67090,3532,20);r.D0J(0);r.S40(489,3421);r.H6P(109);var c=r.q7n(2,602,20,10,6558);r.D0J(117);var u=r.S40(8,5,20,16);r.H6P(118);r.q7n(780,15,65,15,325);r.D0J(15);r.q7n(10,1160,30);a.outputMap[n+(("4849"|s)>o?" ":3990!==l?h<c?"0x1ca7"*u:"k":5070)+a.name]=n}},t.Studies.rejiggerDerivedStudies=function(e,i,a){var r,n,s,o,l,h;r=i.name,i.panel,n=i.getDependents(e);for(var c=0;c<n.length;c++)if(s=n[c],l=(o=t.clone(s.inputs)).id){!1,h=t.Studies.getFieldInputs(s);for(var u=0;u<h.length;u++)o[h[u]]=o[h[u]].replace(r,a);delete t.Studies.replaceStudy(e,l,s.type,o,s.outputs,t.extend(s.parameters,{rejiggering:!0}),null,s.study).parameters.rejiggering}},t.Studies.removeStudySymbols=function(e,t){if(N.D0H(),e.series)for(var i in e.series)t.deleteSeries(e.series[i],null,{action:"remove-study"})},t.Studies.replaceStudy=function(e,i,a,r,n,s,o,l){var h,c,u,d;for(u in s||(s={}),i&&(s.replaceID=i),i=s.replaceID,h=e.layout.studies[i],t.Studies.removeStudySymbols(h,e),h.attribution&&e.removeFromHolder(h.attribution.marker),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),r&&(r.id==r.display&&delete r.display,delete r.id),(c=t.Studies.addStudy(e,a,r,n,s,o,l)).highlight=h.highlight,c.uniqueId=h.uniqueId,d={},e.layout.studies)u==i?d[c.name]=c:d[u]=e.layout.studies[u];for(u in e.layout.studies=d,d={},e.overlays)u==i?(c.overlay||c.underlay)&&(d[c.name]=c):d[u]=e.overlays[u];return e.overlays=d,e.overlays[c.name]||!c.overlay&&!c.underlay||e.addOverlay(c),e.checkForEmptyPanel(h.panel),s.rejiggering||(e.initializeDisplay(e.chart),t.Studies.rejiggerDerivedStudies(e,h,c.inputs.id,c.panel),e.changeOccurred("layout"),e.currentlyImporting||s.calculateOnly||!c.chart.dataSet||e.createDataSet(null,c.chart),e.draw()),t.transferObject(h,c),e.layout.studies[c.name]=h,e.overlays[c.name]=h,e.chart.state.studies.sorted=null,h},t.Studies.addStudy=function(e,i,a,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,H,I,j,O=N;if(l=o||t.Studies.studyLibrary[i],n||(n={}),l){if(l.inputs){for(var Y in h=t.clone(l.inputs))h[Y]instanceof Array&&(l.attributes&&l.attributes[Y]&&l.attributes[Y].defaultSelected?h[Y]=l.attributes[Y].defaultSelected:h[Y]=h[Y][0]);a=t.extend(h,a)}l.outputs&&(r=t.extend(t.clone(l.outputs),r)),(c=l.parameters)&&c.init&&(n=t.extend(t.clone(c.init),n)),c&&!n.display&&(n.display=c.display)}if(a||(a=t.clone(t.Studies.DEFAULT_INPUTS)),r||(r=t.clone(t.Studies.DEFAULT_OUTPUTS)),n.chartName||(n.chartName="chart"),"Auto"!=n.panelName&&"Default panel"!=n.panelName||(n.panelName=""),a.Period<1&&(a.Period=1),u=null,e.layout.studies||(e.layout.studies={}),!(u=l&&l.initializeFN?l.initializeFN(e,i,a,r,n,s,o):t.Studies.initializeFN(e,i,a,r,n,s,o)))return O.H6P(0),void console.log(O.q7n("CIQ.Studies.addStudy: initializeFN() returned null for ",i));if(o=u.study,u.chart=e.charts[n.chartName],u.type=i,u.permanent=o.permanent,u.customLegend=o.customLegend,u.uniqueId=t.uniqueID(),t.Studies.prepareStudy(e,o,u),(d=e.chart.state.studies)||(d=e.chart.state.studies={}),d.sorted=null,n.replaceID?(p=!0,delete n.replaceID):(e.layout.studies[u.inputs.id]=u,(u.overlay||u.underlay)&&e.addOverlay(u),e.currentlyImporting||n.calculateOnly||!u.chart.dataSet||e.createDataSet(null,u.chart)),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),n.calculateOnly)return"lay","o","u","t",e.changeOccurred("layout"),u;if(m=e.panels[u.panel],g=!1,(f=!(u.overlay||u.underlay))&&o.horizontalCrosshairFieldFN&&(m.horizontalCrosshairField=o.horizontalCrosshairFieldFN(e,u)),e.editCallback?g=!0:f?e.callbackListeners.studyPanelEdit&&e.callbackListeners.studyPanelEdit.length&&(g=!0):e.callbackListeners.studyOverlayEdit&&e.callbackListeners.studyOverlayEdit.length&&(g=!0),g){for(var R in n.editMode=!0,y=!1,u.inputs)if("id"!=R&&"display"!=R){y=!0;break}if(!y)for(var $ in u.outputs){y=!0;break}y&&(void 0!==u.study.edit?u.study.edit&&(E=e,H=u,I=a,j=r,O.D0H(),v=function(){t.clearCanvas(E.chart.tempCanvas,E),H.study.edit(H,{stx:E,inputs:I,outputs:j,parameters:n})},e.setPanelEdit(m,v),u.editFunction=v):f?e.editCallback?(D=e,k=u,M=a,T=r,O.a9S(),v=function(){var e;e=D.editCallback(D,k),t.clearCanvas(D.chart.tempCanvas,D),t.Studies.studyDialog(D,i,e,{inputs:M,outputs:T,parameters:n})},"chart"!=m.name&&e.setPanelEdit(m,v)):("ch","a","rt",x=e,b=u,C=a,S=r,w=n,v=function(){t.clearCanvas(x.chart.tempCanvas,x),x.dispatch("studyPanelEdit",{stx:x,sd:b,inputs:C,outputs:S,parameters:w})},"chart"!=m.name&&(e.setPanelEdit(m,v),u.editFunction=v)):(A=e,_=u,P=a,F=r,L=n,O.a9S(),v=function(e){O.a9S(),t.clearCanvas(A.chart.tempCanvas,A),A.dispatch("studyOverlayEdit",{stx:A,sd:_,inputs:P,outputs:F,parameters:L,forceEdit:e})},u.editFunction=v))}return e.changeOccurred("layout"),p||e.draw(),u},t.Studies.removeStudy=function(e,t){var i,a,r,n;a=(i=e.panels[t.panel])&&i.yAxis.name,(t.overlay||t.underlay)&&e.removeOverlay(t.name),r=e.panels[t.panel],t.attribution&&e.removeFromHolder(t.attribution.marker),delete e.layout.studies[t.name],r&&!e.checkForEmptyPanel(r)&&(a==t.name&&e.electNewPanelOwner(r),(n=e.getYAxisByName(t.panel,t.name))&&(n.name=n.studies[1]||n.renderers[0])),e.draw(),N.D0H(),e.resizeChart()},t.Studies.getPanelFromFieldName=function(e,i){var a,r,n,s,o;if(!(a=t.Studies.getFieldInputs(i)).length)return null;if(!(r=e.layout.studies))return null;for(var l in n={},r)for(var h in r[l].outputMap)n[h]=r[l].panel;for(var c=0;c<a.length;c++)if((s=i.inputs[a[c]])&&(o=n[s]))return o;return null},t.Studies.createLibraryHash=function(){var e,i,a=N;a.D0J(10),e=-a.q7n("231253380",0),a.H6P(21),i=a.q7n("2",0);for(var r=1;-308398831!==a.Z2Z(r.toString(),r.toString().length,23553);r++)return Object.keys(t.Studies.studyLibrary).join("h");if(a.Z2Z(i.toString(),i.toString().length,60065)!==e)return Object.keys(t.Studies.studyLibrary).join("|")},t.Studies.displayStudies=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(a&&(i.studyLibraryHash=t.Studies.createLibraryHash()),r=e.layout.studies)for(var v in(n={})[i.name]=!0,r)if("u","n","defined",(o=(s=r[v]).study)&&(l=s.underlay||s.parameters&&s.parameters.underlayEnabled,!(a&&!l||!a&&l)))if(!(h=t.clone(o.renderer))||h instanceof Array||(h=[h]),c=e.panels[s.panel]){if(c.chart==i&&!c.hidden)if(n[c.name]||(u=s.permanent||!e.manageTouchAndMouse,c.closeX?u&&(c.closeX.style.display="none"):c.close&&("no","ne",u&&(c.close.style.display="none")),c.edit&&u&&(c.edit.style.display="none"),n[c.name]=u),d=s.chart.dataSegment,s.panel!=s.parameters.chartName||s.parameters&&s.parameters.panelName||(p=t.Studies.getPanelFromFieldName(e,s))&&s.panel!=p&&(s.panel=p),void 0===o.seriesFN){if(h){s.overlay||t.Studies.createYAxis(e,s,d,c);for(var x=0;x<h.length;x++){for(var b in m=h[x],s.outputMap)s.outputMap[b]==m.field&&(m.field=b);if(m.field){if(m.panel=s.panel,g=m.binding)for(var C in g)(f=t.Studies.determineColor(s.outputs[g[C]]))&&"auto"!=f&&(m[C]=f);m.yAxis=null,(y=t.Renderer.produce(m.type,m)).stx=e,y.attachSeries(null,m).draw()}}}else t.Studies.displaySeriesAsLine(e,s,d);c&&t.Studies.displayError(e,s)}else o.seriesFN&&c&&(o.seriesFN(e,s,d),t.Studies.displayError(e,s))}else e.currentlyImporting&&delete r[v]},t.Studies.displayError=function(e,t,i){var a,r;t.error&&(a=i&&i.panel?i.panel:t.panel,r=!0===t.error?e.translateIf("Not enough data to compute ")+e.translateIf(t.study.name):e.translateIf(t.error),!i||"center"===i.h&&"bottom"===i.v?e.displayErrorAsWatermark(a,r):e.watermark(a,i))},t.Studies.calculateMinMaxForDataPoint=function(e,t,i){var a,r,n;N.D0H(),a=Number.MAX_VALUE,r=-1*Number.MAX_VALUE;for(var s=0;s<i.length;s++)null!=(n=i[s][t])&&(isNaN(n)||(a=Math.min(n,a),r=Math.max(n,r)));return{min:a,max:r}},t.Studies.getYAxisParameters=function(e,t){var i,a,r;return N.a9S(),i={},(a=e.layout.studies&&e.layout.studies[t.name])&&((r=a.study).yaxis||r.yAxisFN?i.noDraw=!0:(r.parameters&&r.parameters.excludeYAxis&&(i.noDraw=!0),i.ground=r.yAxis&&r.yAxis.ground,t&&("bypass"!=r.range&&("0 t","o 100","0 to 100"==r.range?i.range=[0,100]:"-1 to 1"==r.range?i.range=[-1,1]:"0 to max"==r.range?i.range=[0,Math.max(0,t.high)]:(r.centerline||0===r.centerline)&&(i.range=[Math.min(r.centerline,t.low),Math.max(r.centerline,t.high)])),i.range&&(t.low=i.range[0],t.high=i.range[1]),a.min&&(t.min=a.min),a.max&&(t.max=a.max),a.parameters&&a.parameters.studyOverZonesEnabled&&(i.noDraw=!0)))),i},t.Studies.doPostDrawYAxis=function(e,i){var a,r,n,s;for(var o in e.layout.studies)a=e.layout.studies[o],(r=e.panels[a.panel])&&!r.hidden&&a.getYAxis(e)==i&&(n=a.study,i.name==a.name&&(n.yaxis&&n.yaxis(e,a),n.yAxisFN&&n.yAxisFN(e,a)),t.Studies.drawZones(e,a),a.error||((s=n.centerline)||0===s||null!==s&&i.highValue>0&&i.lowValue<0)&&t.Studies.drawHorizontal(e,a,null,s||0,i))},t.Studies.displaySeriesAsLine=function(e,i,a){var r;if(a.length&&(r=e.panels[i.panel])&&!r.hidden)for(var n in N.D0H(),i.outputMap)t.Studies.displayIndividualSeriesAsLine(e,i,r,n,a)},t.Studies.displaySeriesAsHistogram=function(e,t,i){var a,r,n,s,o,l,h,c,u,d;if(i.length&&(a=e.panels[t.panel])&&!a.hidden){for(var p in r=[],t.outputMap)(n=t.outputs[t.outputMap[p]])&&(s=.3,"object"==typeof n&&(s=n.opacity,n=n.color),o={field:p,fill_color_up:n,border_color_up:n,fill_color_down:n,border_color_down:n},t.underlay&&(o.opacity_up=o.opacity_down=s||.3),r.push(o));N.D0H(),l=t.getYAxis(e),c=(h=t.inputs).WidthFactor,t.study&&t.study.parameters&&void 0!==(u=t.study.parameters).widthFactor&&(c=u.widthFactor),d={name:t.name,type:h.HistogramType?h.HistogramType:"overlaid",panel:t.panel,yAxis:l,widthFactor:c||.5,bindToYAxis:!0,highlight:t.highlight},e.drawHistogram(d,r)}},t.Studies.displayIndividualSeriesAsLine=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if("t","rans","p","arent","st","ring",a.height||(a.height=a.bottom-a.top),s=i.getContext(e),o=i.outputs[i.outputMap[r]]){if(s.save(),"string"==typeof o&&(o={color:o,width:1}),s.lineWidth=o.width||1,"auto"==(l=o.color)&&(l=e.defaultColor),s.strokeStyle=l,h=o.pattern,s.setLineDash(t.borderPatternToArray(s.lineWidth,h)),s.lineDashOffset=0,c=0,u=i.study,d=i.getYAxis(e),c=e.decimalPlacesFromPriceTick(d.priceTick),(i.overlay||i.underlay)&&(c=null),(d.decimalPlaces||0===d.decimalPlaces)&&(c=d.decimalPlaces),p=null,i.parameters&&(p=i.parameters.label),(m=u.parameters)||(m={}),g="step"==m.plotType,i.series)for(var C in i.series)(f=i.series[C].parameters.type)&&(N.H6P(68),g=N.S40(f,"step"));m.noLabels&&(p=!1),i.noSlopes||!1===i.noSlopes||(i.noSlopes=m.noSlopes),i.extendToEnd||!1===i.extendToEnd||(i.extendToEnd=m.extendToEnd),y=p||e.preferences.labels&&!1!==p,!1===(v=i.gaplines)&&(v="transparent"),N.a9S(),x=i.inputs.Symbol,b=v?e.getGapColorFunction(x,r,o,v):null,e.plotDataSegmentAsLine(r,a,{yAxis:d,skipTransform:e.panels[i.panel].name!=i.chart.name,label:y,labelDecimalPlaces:c,noSlopes:i.noSlopes,step:g,alignStepToSide:i.alignStepToSide,extendToEndOfLastBar:i.extendToEndOfLastBar,width:i.lineWidth,extendToEndOfDataSet:i.extendToEnd,gapDisplayStyle:v,highlight:i.highlight},b),u.appendDisplaySeriesAsLine&&u.appendDisplaySeriesAsLine(e,i,n,r,a),s.restore()}},t.Studies.drawHorizontal=function(e,t,i,a,r,n){var s,o,l;s=e.panels[t.panel],o=e.getBackgroundCanvas().context,s&&(n||(n=r.textStyle),N.D0H(),(l=e.pixelFromPrice(a,s,r))>r.top&&l<r.bottom&&e.plotLine(s.left,s.right,l,l,n,"segment",o,!1,{opacity:n&&n.opacity?n.opacity:.5}))},t.Studies.displayHistogramWithSeries=function(e,i,a){var r;e.panels[i.panel],r=.5,N.D0H(),i.underlay&&(r=.3),t.Studies.createHistogram(e,i,a,!1,r),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.drawZones=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A=N;if("borde","r","l","ef","t","aut","o",i.parameters&&i.parameters.studyOverZonesEnabled){r=parseFloat(i.parameters.studyOverSoldValue),n=parseFloat(i.parameters.studyOverBoughtValue),s=i.parameters.studyOverSoldColor,o=i.parameters.studyOverBoughtColor,(l=i.zoneOutput)||(l="Result"),(h=t.Studies.determineColor(i.outputs[l]))&&"auto"!=h&&!t.isTransparent(h)||(h=e.defaultColor),s||(s=h),s&&"auto"!=s&&!t.isTransparent(s)||(s=e.defaultColor),o||(o=h),o&&"auto"!=o&&!t.isTransparent(o)||(o=e.defaultColor),c=e.panels[i.panel],d=(u=i.getYAxis(e)).displayBorder,!1===e.axisBorders&&(d=!1),!0===e.axisBorders&&(d=!0),0===u.width&&(d=!1),p=e.getYAxisCurrentPosition(u,c),A.D0J(68),m=A.S40(p,"left"),(g=u.justifyRight)||!1===g||(g=e.chart.yAxis.justifyRight||!1===e.chart.yAxis.justifyRight?e.chart.yAxis.justifyRight:m),f=Math.round(u.left+(m?u.width:0))+.5,y=d?3:0,x=(v=e.getBackgroundCanvas().context).fillStyle,v.globalAlpha=.2,e.startClip(c.name,!0),v.beginPath(),b=Math.round(e.pixelFromPrice(n,c,u))+.5,v.strokeStyle=o,v.moveTo(c.left,b),v.lineTo(c.right,b),v.stroke(),v.closePath(),v.beginPath(),A.H6P(119);var _=A.q7n(3,3,7,0,14);if(C=Math.round(e.pixelFromPrice(r,c,u))+"0.5"*_,v.strokeStyle=s,v.moveTo(c.left,C),v.lineTo(c.right,C),v.stroke(),v.closePath(),(S=new t.Plotter).newSeries("border","stroke",e.canvasStyle("stx_grid_border")),d&&(w=m?f-y:f-.5,D=m?f+.5:f+y,S.moveTo("border",w,b),S.lineTo("border",D,b),S.moveTo("border",w,C),S.lineTo("border",D,C)),v.fillStyle=x,k={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:l+" "+i.name,yAxis:u,opacity:.3},!i.highlight&&e.highlightedDraggable&&(A.D0J(1),k.opacity*=A.q7n(1,"0.3")),t.preparePeakValleyFill(e,t.extend(k,{threshold:n,direction:u.flipped?-1:1,color:o})),t.preparePeakValleyFill(e,t.extend(k,{threshold:r,direction:u.flipped?1:-1,color:s})),v.globalAlpha=1,!(i.study&&i.study.yaxis||(d&&(M=Math.round(u.bottom)+.5,S.moveTo("border",f,u.top),S.lineTo("border",f,M),S.draw(v,"border")),0===u.width))){if("ri","ght",e.canvasFont("stx_yaxis",v),e.canvasColor("stx_yaxis",v),v.textAlign=g?"right":"left",m){A.D0J(120);var P=A.S40(1,0,4,6,6);if(T=u.left+P,g){A.D0J(121);var F=A.S40(10,24,11,0);T=u.left+u.width-y-F}}else{A.H6P(16);var L=A.S40(17,20);T=u.left+y+L,g&&(T=u.left+u.width)}v.fillStyle=o,v.fillText(n,T,b),v.fillStyle=s,v.fillText(r,T,C),v.fillStyle=x}e.endClip(),v.globalAlpha=1,u.name==i.name&&(u.yAxisPlotter=new t.Plotter)}},t.Studies.createHistogram=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D;s=e.panels[i.panel],o=i.getContext(e),l=i.getYAxis(e),e.startClip(s.name),(h=e.layout.candleWidth-2)<2&&(h=1),c=e.pixelFromPrice(0,s,l),l.min>0&&(c=e.pixelFromPrice(l.min,s,l)),r&&(c=Math.floor(s.top+s.height/2)),u=i.name+"_hist",e.canvasColor("stx_histogram"),d=o.fillStyle,(n||0===n)&&(o.globalAlpha=n),!i.highlight&&e.highlightedDraggable&&(o.globalAlpha*=.3),p=null,m=null,g=i.outputs;for(var k=0;k<a.length;k++)"Positive"," ","Bar",(f=a[k])&&(f.candleWidth&&(h=Math.floor(Math.max(1,f.candleWidth-2))),y=Math.floor(e.pixelFromBar(k,s.chart)-h/2),v=Math.floor(h),p=null===p?(x=e.tickFromPixel(y,s.chart)-1)<0?m:e.pixelFromPrice(e.chart.dataSet[x][u],s,l)-c:m,m=e.pixelFromPrice(f[u],s,l)-c,b=t.Studies.determineColor(g["Decreasing Bar"]),C=t.Studies.determineColor(g["Increasing Bar"]),S=t.Studies.determineColor(g["Positive Bar"]),w=t.Studies.determineColor(g["Negative Bar"]),D=l.flipped,o.fillStyle=d,b&&(D?m<p:m>p)?o.fillStyle=b:C&&(D?m>p:m<p)?o.fillStyle=C:S&&(D?m>0:m<0)?o.fillStyle=S:w&&(D?m<0:m>0)&&(o.fillStyle=w),o.fillRect(y,c,v,Math.floor(m)));N.D0H(),o.globalAlpha=1,e.endClip()},t.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema",triangular:"tma",VIDYA:"vdma",weighted:"wma","welles wilder":"smma",true:"y",false:"n"},t.Studies.prettyRE=/^.*\((.*?)\).*$/,t.Studies.prettyDisplay=function(e){var i,a;if(!(i=t.Studies.prettyRE.exec(e)))return e;if(N.D0J(21),a=i[N.q7n("1",0)]){for(var r in t.Studies.prettify)a=a.replace(r,t.Studies.prettify[r]);e=e.replace(i[1],a)}return N.D0H(),e},t.Studies.getFieldInputs=function(e){var t,i;for(var a in N.D0H(),t=[],i=e.study.inputs)"field"==i[a]&&t.push(a);return t},t.Studies.initializeFN=function(e,i,a,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M=N;if("st","r","in","g",a||(a={}),n||(n={}),!a.id){-197226571,-1759371641,l=2;for(var T=1;-197226571!==M.Z2Z(T.toString(),T.toString().length,21588);T++)a.id=t.Studies.generateID(e,i,a,n.replaceID,n.display),l+=2;-1759371641!==M.U6$(l.toString(),l.toString().length,10804)&&(a.id=t.Studies.generateID(e,i,a,n.replaceID,n.display))}if(a.display||(a.display=a.id),h=new t.Studies.StudyDescriptor(a.id,i,a.id,a,r,n),a.Period&&(M.H6P(1),h.days=Math.max(M.q7n(1,"1"),parseInt(h.inputs.Period,10))),o?(o.inputs||(o.inputs=h.study.inputs),o.outputs||(o.outputs=h.study.outputs),h.study=o):o=h.study,o.display&&(a.display=o.display),"string"==typeof n.panelName&&(s=n.panelName),(s==a.id||s&&!e.panelExists(s))&&(h.underlay=h.overlay=!1),"Own panel"!=s&&"New panel"!=s||(s=null),c=h.overlay||a.Overlay||!1!==h.overlay&&o.overlay,u=h.underlay||a.Underlay||!1!==h.underlay&&o.underlay,c&&n.underlayEnabled&&(u=!0),u&&(h.underlay=!0),!u&&e.chart.panel&&s==e.chart.panel.name&&(c=!0),c&&(h.overlay=!0),(!0===(d=e.preferences.dragging)||d&&d.study)&&(h.overlay=!0),s?n.panelName=s:c||u||(s=a.id),n.calculateOnly)return(c||u)&&(e.panels[n.panelName]?h.panel=n.panelName:h.panel=t.Studies.getPanelFromFieldName(e,h)||n.chartName),h;if(p={},(m=e.layout.studies[n.replaceID])&&(p={outputMap:t.clone(m.outputMap),panel:m.panel}),h.panel="",s?("New p","anel",(g=t.Studies.smartMovePanel(e,h.inputs,s,n.replaceID,"New panel"==n.panelName))&&(h.panel=g.name)):(c||u)&&(h.panel=t.Studies.getPanelFromFieldName(e,h)||n.chartName),!h.panel){f=o.panelHeight||null,(y=o.yAxis||{}).name=h.inputs.id,h.panel=h.inputs.id,-199681504,M.H6P(40),v=M.S40(32,"1232114324"),x=2;for(var A=1;-199681504!==M.U6$(A.toString(),A.toString().length,74241);A++)e.createPanel(h.inputs.display,h.panel,f,n.chartName,new t.ChartEngine.YAxis(y)),M.H6P(1),x+=M.q7n(1,"2");M.U6$(x.toString(),x.toString().length,65180)!==v&&e.createPanel(h.inputs.display,h.panel,f,n.chartName,new t.ChartEngine.YAxis(y)),e.createPanel(h.inputs.display,h.panel,f,n.chartName,new t.ChartEngine.YAxis(y))}if(h.parameters&&h.parameters.panelName&&(h.parameters.panelName=h.panel),b=e.panels[h.panel],C=t.Studies.smartCreateYAxis(e,b,h.inputs.id,n.yaxisDisplayValue,n.yAxis||o.yAxis),(w=(S=o?t.clone(o.yAxis):null)||C)&&(w.ground&&(w.initialMarginBottom=0),(w.initialMarginTop||0===w.initialMarginTop||w.initialMarginBottom||0===w.initialMarginBottom)&&e.calculateYAxisMargins(w),w.name==n.replaceID&&(w.name=h.inputs.id)),C&&("defa","u","l","t","s","har","e","d","n","o","n","e",C.width="none"==C.position?0:t.ChartEngine.YAxis.prototype.width,"shared"==n.yaxisDisplayValue||"default"==n.yaxisDisplayValue?delete n.yaxisDisplayValue:S?t.ensureDefaults(C,S):C.name==h.name&&("au","t","o",n.yaxisDisplayColor&&"auto"!=n.yaxisDisplayColor?C.textStyle=t.colorToHex(n.yaxisDisplayColor):delete C.textStyle,C.justifyRight=null,C.flipped=n.flippedEnabled),C!=b.yAxis?C.displayGridLines=!1:C!=e.chart.yAxis&&(C.displayGridLines=e.displayGridLinesInStudies)),e.calculateYAxisPositions(),m){for(var _ in D=!1,e.drawingObjects)k=e.drawingObjects[_],p.outputMap&&p.outputMap.hasOwnProperty(k.field)?(k.field=k.field.replace(n.replaceID,h.inputs.id),h.parameters&&h.parameters.panelName?k.panelName=h.parameters.panelName:k.panelName=h.panel,D=!0):p.panel&&p.panel==k.panelName&&(k.panelName=k.panelName.replace(n.replaceID,h.inputs.id),D=!0);D&&e.changeOccurred("vector")}return h},t.Studies.smartMovePanel=function(e,t,i,a,r){var n,s,o,l;return s=t.id,a&&(n=e.layout.studies[a]),n&&(o=e.panels[n.panel])&&o.yAxis.name==a&&(!r&&i==a||e.checkForEmptyPanel(o.name,!0,n)?i!=a&&e.panels[i]||(s!=o.name&&e.modifyPanel(o,{name:s,display:t.display}),i=s):(e.electNewPanelOwner(o),(l=n.getYAxis(e)).name==a&&e.electNewYAxisOwner(l))),N.a9S(),e.panels[i]},t.Studies.smartCreateYAxis=function(e,i,a,r,n){var s,o,l,h,c;return s="n",s+="o",s+="n",s+="e",o=e.getYAxisByName(i,a),!r&&n&&(r=n.position),"default"!=r&&"shared"!=r&&r!=i.yAxis.name||(r=""),["left","right",s].indexOf(r)>-1?(!o||o.isShared(e)?(l=n||{},t.extend(l,{name:a,position:r}),o||e.currentlyImporting||i==i.chart.panel||i.yAxis.studies.length||i.yAxis.renderers.length?(h=o==i.yAxis,o&&(o.name=e.electNewYAxisOwner(o)),o=e.addYAxis(i,new t.ChartEngine.YAxis(l)),h&&(i.yAxis=o)):(o=i.yAxis,t.extend(o,l))):o.position=r,o):r?((c=e.getYAxisByName(i,r))&&o==i.yAxis&&!o.isShared(e)&&(i.yAxis=c),o&&o.isShared(e)?o.name=e.electNewYAxisOwner(o):o!==i.yAxis&&e.deleteYAxisIfUnused(i,o),c):(o&&(o.isShared(e)?o.name=e.electNewYAxisOwner(o):(delete o.position,o!==i.yAxis&&e.deleteYAxisIfUnused(i,o))),e.resizeChart(),i.yAxis)},t.Studies.calculateVolume=function(e,i){var a,r,n;if("vol undr"==i.type){if(!e||!e.chart.dataSet)return;a=e.layout,r=i.parameters.removeStudy,n=a.volumeUnderlay,a.volumeUnderlay=!r,n!=a.volumeUnderlay&&e.changeOccurred("layout"),r&&t.Studies.removeStudy(e,i)}i.outputMap={},i.outputMap.Volume=""},t.Studies.MA=function(e,i,a,r,n,s,o,l){var h;(h=new t.Studies.StudyDescriptor(n+" "+o.name,"ma",o.panel)).chart=o.chart,h.days=parseInt(i,10),h.startFrom=o.startFrom,l&&(h.subField=l),N.D0H(),h.inputs={},e&&(h.inputs.Type=e),a&&(h.inputs.Field=a),r&&(h.inputs.Offset=parseInt(r,10)),t.Studies.calculateMovingAverage(s,h)},t.Studies.movingAverage={conversions:{ma:"simple",sma:"simple",ema:"exponential",tma:"triangular",vdma:"vidya",wma:"weighted",smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential",triangular:"Triangular",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tma:"Triangular",triangular:"Triangular",vdma:"VIDYA",vidya:"VIDYA",wma:"Weighted",weighted:"Weighted",smma:"Exponential","welles wilder":"Exponential"}},t.Studies.movingAverageHelper=function(e,i){var a;if(N.D0H(),"options"==i){for(var r in a={},t.Studies.movingAverage.translations)a[r]=e.translateIf(t.Studies.movingAverage.translations[r]);return a}return t.Studies.movingAverage.conversions[i]},t.Studies.createVolumeChart=function(e,i,a){var r,n,s,o,l,h,c,u,d,p=N;r=i.panel,i.inputs,n=i.underlay,s=i.overlay,o=t.Studies.determineColor(i.outputs["Up Volume"]),l=t.Studies.determineColor(i.outputs["Down Volume"]),h=n?"stx_volume_underlay":"stx_volume",p.D0J(0),e.setStyle(p.S40(h,"_up"),"color",o),p.H6P(0),e.setStyle(p.S40(h,"_down"),"color",l),c=[{field:i.volumeField||"Volume",fill_color_up:e.canvasStyle(h+"_up").color,border_color_up:e.canvasStyle(h+"_up").borderLeftColor,opacity_up:e.canvasStyle(h+"_up").opacity,fill_color_down:e.canvasStyle(h+"_down").color,border_color_down:e.canvasStyle(h+"_down").borderLeftColor,opacity_down:e.canvasStyle(h+"_down").opacity,color_function:i.colorFunction}],u=c[0],n||"rgb(184, 44, 12)"!==u.border_color_down||("#","00","00","00","#0","0","00","00",u.border_color_down="#000000",u.border_color_up="#000000"),d={name:"Volume",panel:r,yAxis:i.getYAxis(e),widthFactor:1,bindToYAxis:!0,highlight:i.highlight},t.extend(d,i.study.parameters),t.extend(d,i.parameters),e.colorByCandleDirection&&!i.colorFunction&&(u.color_function=function(e){var t,i;return{fill_color:(t=e.Open)>(i=e.Close)?u.fill_color_down:u.fill_color_up,border_color:t>i?u.border_color_down:u.border_color_up,opacity:t>i?u.opacity_down:u.opacity_up}}),e.drawHistogram(d,c)},t.Studies.calculateStandardDeviation=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f=N;if(f.a9S(),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var y in(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs["Moving Average Type"])||(n=i.inputs.Type),t.Studies.MA(n,i.days,r,i.inputs.Offset,"_MA",e,i),s=0,o=0,l=0,(h=Number(i.inputs["Standard Deviations"]))<0&&(h=2),c=i.name,i.outputs)f.H6P(37),c=f.S40(c,y," ");for(u=i.startFrom-1,p=0;u>=0&&p<i.days;u--,p++)(d=a[u][r])&&"object"==typeof d&&(d=d[i.subField]),isNaN(d)&&(d=0),s+=Math.pow(d,2),o+=d;for(u=i.startFrom;u<a.length;u++)if("_M","A"," ",(d=(m=a[u])[r])&&"object"==typeof d&&(d=d[i.subField]),d||0===d||(d=0),s+=Math.pow(d,2),o+=d,!(u<i.days-1)&&(u>=i.days&&((g=a[u-i.days][r])&&"object"==typeof g&&(g=g[i.subField]),isNaN(g)&&(g=0),s-=Math.pow(g,2),o-=g),(l=m["_MA "+i.name])||0===l)){f.D0J(122);var v=f.q7n(20,19,0,4,54);f.D0J(16);var x=f.q7n(2,4);m[c]=Math.sqrt((s+i.days*Math.pow(l,v)-x*l*o)/i.days)*h}}},t.Studies.calculateMovingAverage=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if("Clos","e",i.chart.scrubbed){if("ma"!=(a=i.inputs.Type)&&"sma"!=a&&a||(a="simple"),r=t.Studies.movingAverage.typeMap,N.a9S(),a in r)return t.Studies["calculateMovingAverage"+r[a]](e,i);if("simple"===a){for(var x in n=i.chart.scrubbed,s=0,o=[],l=i.name,i.outputs)N.D0J(37),l=N.q7n(l,x," ");for((h=i.inputs.Field)&&"field"!=h||(h="Close"),c=parseInt(i.inputs.Offset,10),isNaN(c)&&(c=0),m=i.startFrom,g=c,u=i.startFrom-1;u>=0;u--)if("obj","e","c","t",(d=n[u][h])&&"object"==typeof d&&(d=d[i.subField]),d||0===d)if(g>0)g--,m=u;else{if(o.length==i.days-1)break;s+=d,o.unshift(d)}for(o.length<i.days-1&&(o=[],m=0),f=[],u=m;u<n.length;u++)"o","bject",(d=n[u][h])&&"object"==typeof d&&(d=d[i.subField]),y=u+c>=0&&u+c<n.length?n[u+c]:null,d||0===d?(s+=d,o.push(d),o.length>i.days&&(s-=o.shift()),v=o.length==i.days?s/i.days:null,y?y[l]=v:u+c>=n.length&&((p={})[l]=v,f.push(p))):y?y[l]=null:u+c>=n.length&&((p={})[l]=null,f.push(p));i.appendFutureTicks(e,f)}}},t.Studies.calculateMovingAverageExponential=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C=N;i=t.inputs.Type,a=t.chart.scrubbed,r=0,n=0,s=0,C.H6P(11);var S=C.S40(32,13,178,4);C.D0J(123);var w=C.S40(4,2,19,8);(o=S/(t.days+w),"welles wilder"===i||"smma"===i)&&(C.H6P(19),o=C.S40(18,17,2,36)/t.days);for(var D in l=null,h=t.name,t.outputs)C.H6P(37),h=C.q7n(h,D," ");for((c=t.inputs.Field)&&"field"!=c||(c="Close"),u=parseInt(t.inputs.Offset,10),isNaN(u)&&(u=0),m=t.startFrom,g=u,d=t.startFrom-1;d>=0;d--)if((p=a[d][h])||0===p){if(null===l&&(l=p),s=t.days,g<=0)break;g--,m=d}if(null===l){-431256440,1650909003,f=2;for(var k=1;-431256440!==C.Z2Z(k.toString(),k.toString().length,52360);k++)l=m=6,f+=2;1650909003!==C.U6$(f.toString(),f.toString().length,284)&&(l=m=6),l=m=0}for(y=[],C.a9S(),d=m;d<a.length;d++)"obje","ct",(p=a[d][c])&&"object"==typeof p&&(p=p[t.subField]),v=d+u>=0&&d+u<a.length?a[d+u]:null,p||0===p?(s==t.days-1?x=n=(r+=p)/t.days:s<t.days-1?(r+=p,C.H6P(124),n=C.q7n(1,s,r),x=null):0===s?(n=r+=p,x=null):(l||0===l)&&(C.H6P(125),x=n=C.q7n(o,p,l,l)),l=n,s++):x=null,v?v[h]=x:d+u>=a.length&&((b={})[h]=x,y.push(b));t.appendFutureTicks(e,y)},t.Studies.calculateMovingAverageVIDYA=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=N;i.inputs.Type,a=i.chart.scrubbed,x.D0J(126);var b=x.S40(94,15,6,5,5);for(var C in r=b/(i.days+1),n=null,s=i.name,i.outputs)x.H6P(37),s=x.S40(s,C," ");for((o=i.inputs.Field)&&"field"!=o||(o="Close"),i.std=new t.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=5,i.std.startFrom=i.startFrom,i.std.inputs={Field:o,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.MA("ma",20,"_STD "+i.name,0,"_MASTD",e,i),l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}for(null===n&&(n=d=0),m=[],h=d;h<a.length;h++)"o","b","jec","t",(c=(g=a[h])[o])&&"object"==typeof c&&(c=c[i.subField]),f=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c?(g["_MASTD "+i.name]||0===g["_MASTD "+i.name])&&(y=g["_STD "+i.name]/g["_MASTD "+i.name],x.H6P(127),n=v=x.q7n(c,y,y,r,r,1,n),h<i.days&&(v=null),f?f[s]=v:h+l>=a.length&&((u={})[s]=v,m.push(u))):f?f[s]=null:h+l>=a.length&&((u={})[s]=null,m.push(u));i.appendFutureTicks(e,m)},t.Studies.calculateMovingAverageTriangular=function(e,i){var a,r,n,s,o,l,h,c,u,d=N;for(var p in"T",d.D0H(),"R","I","2","T","RI","1 ","f","ield",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.ceil(i.days/2),t.Studies.MA("simple",n,r,0,"TRI1",e,i),i.days%2==0&&n++,t.Studies.MA("simple",n,"TRI1 "+i.name,0,"TRI2",e,i),s=i.name,i.outputs)d.D0J(37),s=d.S40(s,p," ");o=parseInt(i.inputs.Offset,10),isNaN(o)&&(d.D0J(40),o=d.S40(0,"0")),l=o;for(var m=i.startFrom-1;m>=0;m--)if((h=a[m][s])||0===h){if(!(l>0))break;l--}for(c=[],m++;m<a.length;m++)m+o>=0&&(m+o<a.length?(d.H6P(0),a[d.S40(m,o)][s]=a[m]["TRI2 "+i.name]):((u={})[s]=a[m]["TRI2 "+i.name],c.push(u)));i.appendFutureTicks(e,c)},t.Studies.calculateMovingAverageWeighted=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=N;i=t.chart.scrubbed,a=0,r=0,(n=t.inputs.Field)&&"field"!=n||(n="Close"),v.H6P(39);var x=v.q7n(12,8,3);v.D0J(7);var b=v.S40(12,14);for(var C in s=t.days*(t.days+x)/b,o=t.name,t.outputs)v.H6P(37),o=v.S40(o,C," ");for(l=parseInt(t.inputs.Offset,10),isNaN(l)&&(l=0),v.D0H(),d=[],p=t.startFrom,m=l,h=t.startFrom-1;h>=0;h--)if((c=i[h][n])&&"object"==typeof c&&(c=c[t.subField]),c||0===c)if(m>0)m--,p=h;else{if(d.length==t.days-1)break;d.unshift(c)}for(d.length<t.days-1&&(d=[],p=0),h=0;h<d.length;h++){v.D0J(123),a+=(h+v.q7n(7,7,55,7))*d[h],r+=d[h]}for(g=[],h=p;h<i.length;h++)"obj","e","ct",(c=i[h][n])&&"object"==typeof c&&(c=c[t.subField]),f=h+l>=0&&h+l<i.length?i[h+l]:null,c||0===c?(d.push(c),d.length>t.days&&(a-=r,r-=d.shift()),a+=d.length*c,r+=c,y=h<t.days-1?null:a/s,f?f[o]=y:h+l>=i.length&&((u={})[o]=y,g.push(u))):f?f[o]=null:h+l>=i.length&&((u={})[o]=null,g.push(u));t.appendFutureTicks(e,g)},t.Studies.calculateStudyATR=function(e,t){var i,a,r,n,s,o,l,h=N;if(i=t.chart.scrubbed,a=t.days,i.length<a+1)t.error=!0;else{r=0,h.D0H(),n=t.name;for(var c=Math.max(t.startFrom,1);c<i.length;c++)"A","TR"," ","AT","R ","True"," ","Range"," ",s=i[c],h.H6P(7),o=i[h.q7n(1,c)],l=s.trueRange,o["Sum True Range "+n]&&(h.H6P(0),r=o[h.q7n("Sum True Range ",n)]),r+=l,c>a&&(h.D0J(7),r-=i[h.q7n(a,c)][h.q7n("True Range ",n,h.D0J(0))]),h.H6P(0),s[h.S40("True Range ",n)]=l,h.H6P(0),s[h.q7n("Sum True Range ",n)]=r,c==a?(h.H6P(0),s[h.q7n("ATR ",n)]=h.S40(a,r,h.H6P(14))):c>a&&(h.D0J(0),s[h.q7n("ATR ",n)]=(o["ATR "+n]*(a-1)+l)/a)}},t.Studies.displayPSAR2=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y=N;for(var v in r=e.panels[i.panel],s=(n=i.getYAxis(e))==e.chart.panel.yAxis,e.startClip(r.name),o=i.getContext(e),l="squarewave"==i.inputs["Plot Type"],i.outputs){"a","u","t","o",y.H6P(0);y.q7n(2645,7);y.D0J(19);y.S40(54560,8,6,47754);y.D0J(0);var x=y.q7n(9262,8);y.D0J(62);var b=y.q7n(4,3270,10,1090);y.H6P(18);y.S40(17808,1,11872);h=v+(442.57>x?275.62==b&&"x":" ")+i.name,o.beginPath(),c=e.layout.candleWidth,u=Math.max(3,Math.floor(e.chart.tmpWidth/2));for(var C=0;C<a.length;C++)(d=a[C])&&(d[h]||0===d[h])&&(d.candleWidth&&(c=d.candleWidth),s&&d.transform&&(d=d.transform),p=e.pixelFromBar(C,r.chart),l&&(y.D0J(14),p-=y.S40(2,c)),m=e.pixelFromTransformedValue(d[i.referenceOutput?i.referenceOutput+" "+i.name:h],r,n),0!==C&&a[C-1]&&(a[C-1][h]||0===a[C-1][h])||o.moveTo(p,m),l?(o.lineTo(p,m),y.H6P(0),o.lineTo(y.q7n(p,c),m),a[C+1]&&(y.H6P(0),g=a[y.S40(C,1)],s&&g.transform&&(g=g.transform),g[h]||0===g[h]||(y.H6P(0),o.lineTo(y.q7n(p,c),e.pixelFromTransformedValue(g[i.referenceOutput?i.referenceOutput+" "+i.name:h],e.panels[i.panel],n))))):(y.H6P(128),o.moveTo(y.q7n(p,"2",u),m),y.H6P(129),o.lineTo(y.S40(u,"2",p,64),m)));o.lineWidth=1,i.highlight&&(o.lineWidth=3),"auto"==(f=t.Studies.determineColor(i.outputs[v]))&&(f=e.defaultColor),o.strokeStyle=f,!i.highlight&&e.highlightedDraggable&&(o.globalAlpha*=.3),o.stroke(),o.closePath(),o.lineWidth=1}e.endClip()},t.Studies.inputAttributeDefaultGenerator=function(e){return(e||0===e)&&e.constructor==Number?Math.floor(e)==e?e>0?{min:1,step:1}:{step:1}:e>0?{min:0,step:.01}:{step:.01}:{}},t.Studies.getMarketOffset=function(e){let{stx:i,localQuoteDate:a,shiftToDateBoundary:r}=e;var n,s,o,l,h,c,u,d=N;n="U",n+="TC",arguments.length>1&&(i=arguments[0],a=arguments[1],s=arguments[2]);var{symbol:p}=i.chart;o=t.getFn("Market.Symbology.isForexMetal")(p),void 0===s&&(l="Market.Symbolog",l+="y.isForexSymbol",s=t.getFn(l)(p)),h=i.chart.market?s?"America/New_York":i.chart.market.market_tz:null,d.D0J(33);var m=d.S40(14,60009,8,13);return c=new Date(a.getTime()+a.getTimezoneOffset()*m),h&&-1!=h.indexOf("UTC")||(c=t.convertTimeZone(c,n,h)),u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()).getTime()-a.getTime(),r&&s&&(d.H6P(130),u+=d.S40("60",o?6:7,1e3,"60")),u},t.Studies.getStudyList=function(e){var i,a;for(var r in i={},a={},t.extend(a,e),N.a9S(),t.Studies.studyLibrary)a[r]||(i[t.Studies.studyLibrary[r].name]=r);return i},t.Studies.determineColor=function(e){return"ob","j","e","ct",e?"object"==typeof e?e.color:e:null},t.Studies.calculateGenericEnvelope=function(e,t,i,a,r,n){var s,o,l,h,c,u,d,p=N;i||(i=0),n||(n=0),a&&"field"!=a||(a="Close"),r||(r=a),s=t.chart.scrubbed,(o=t.inputs.Field)&&"field"!==o||(o="Close");for(var m=t.startFrom;s&&m<s.length;m++)"Band","w","idth"," ",(l=s[m])&&l[a]&&((h=l[o])&&"object"==typeof h&&(h=h.Close),(c=l[a])&&"object"==typeof c&&(c=c[t.subField]),(u=l[r])&&"object"==typeof u&&(u=u[t.subField]),p.D0J(32),d=p.S40(n,u,i),p.H6P(0),l[t.type+" Top "+t.name]=p.S40(c,d),p.D0J(7),l[t.type+" Bottom "+t.name]=p.S40(d,c),l[t.type+" Median "+t.name]=c,l["Bandwidth "+t.name]=c?200*d/c:0,p.D0J(131),l["%b "+t.name]=p.S40(50,1,h,c,d))},t.Studies.displayChannel=function(e,i,a){var r,n,s;if(N.D0H(),"C","h","an","nel Fill",i.inputs["Channel Fill"]){for(var o in r={panelName:i.panel},i.outputs)"Bo","tt","om","Top"==(n=o.split(" ").pop())||"High"==n?r.topBand=o+" "+i.name:"Bottom"==n||"Low"==n?r.bottomBand=o+" "+i.name:"Median"!=n&&"Channel"!=n||(r.color=t.Studies.determineColor(i.outputs[o]));i.parameters&&i.parameters.opacity?r.opacity=i.parameters.opacity:r.opacity=.2,s=e.panels[i.panel],r.skipTransform=s.name!=i.chart.name,r.yAxis=i.getYAxis(e),!i.highlight&&e.highlightedDraggable&&(r.opacity*=.3),t.prepareChannelFill(e,r)}t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.initAnchorHandle=function(e,t){var{handle:i}=t;N.D0H(),i||(e.controls.anchorHandles||(e.controls.anchorHandles={}),e.controls.anchorHandles[t.uniqueId]?({handle:i}=e.controls.anchorHandles[t.uniqueId]):((i=document.createElement("div")).classList.add("stx_anchor_handle"),i.setAttribute(t.uniqueId,""),e.controls.anchorHandles[t.uniqueId]={handle:i,sd:t},e.controls.chartControls.parentElement.appendChild(i)),t.anchorHandle=i)},t.Studies.removeAnchorHandle=function(e,t){var{handle:i}=(e.controls.anchorHandles||{})[t.uniqueId]||{};i&&(delete e.controls.anchorHandles[t.uniqueId],i.remove())},t.Studies.repositionAnchor=function(e,a){var r,n,s,o,l,h,{currentAnchorTime:c,uniqueId:u}=a,{hoverTick:d}=e.repositioningAnchorSelector||{},{dataSet:p,market:m}=e.chart,{anchorHandles:g}=e.controls;if(r={},N.a9S(),d||0===d){if("HH",":m","m:s","s","Anchor ","Date",d>=p.length)return;if(n=!a.inputs["Anchor Date"],s=p[d].DT,o=t.Studies.getMarketOffset({stx:e,localQuoteDate:s,shiftToDateBoundary:!0}),n&&new Date(s.getTime()+o).getDate()!==new Date(c.getTime()+o).getDate())return;m.market_def&&(s=new i.Date(s,m.market_def.market_tz)),l=!n&&t.dateToStr(s,"YYYY-MM-dd"),r={"Anchor Time":t.dateToStr(s,"HH:mm:ss")},l&&(r["Anchor Date"]=l)}h=t.Studies.replaceStudy(e,a.inputs.id,a.type,Object.assign(a.inputs,r),a.outputs,a.parameters,a.panel),g[u].sd=h,e.draw()},t.Studies.displayAnchorHandleAndLine=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C=N;n=(e.repositioningAnchorSelector||{}).sd===a;var{hoverTick:S}=n&&e.repositioningAnchorSelector,{chart:w,panels:D,xaxisHeight:k}=e,{market:M={},symbol:T}=w;s=D[a.panel];var{top:A,bottom:_,right:P,left:F,height:L}=s,{inputs:E,anchorHandle:H,currentAnchorTime:I}=a,{backgroundColor:j,borderLeftColor:O}=e.canvasStyle("stx_anchor_handle"),[Y,R,$=0]=(E["Anchor Time"]||"").split(":");o=!E["Anchor Date"],l=t.getFn("Market.Symbology.isForexSymbol")(T),h=(S||0===S)&&(e.chart.dataSet[S]||{}).DT,c=t.Studies.getMarketOffset({stx:e,localQuoteDate:r[r.length-1].DT,shiftToDateBoundary:!0}),u=h&&o&&new Date(h.getTime()+c).getDate()!==new Date(I.getTime()+c).getDate();var{highlighted:z}=e.controls.anchorHandles[a.uniqueId],[q,J]=M.getNormalOpen().split(":").map(e=>(C.D0H(),parseInt(e)));d=t=>{var i;return i=t?e.tickFromDate(t,null,null,!0):S,C.a9S(),[e.pixelFromTick(i,w),i]},p=o?new Date(r[r.length-1].DT):t.strToDate(E["Anchor Date"]),M.market_def&&(p=new i.Date(p,M.market_def.market_tz)),p.setHours(Y,R,$),(m=l&&(p.getHours()>q||p.getHours()===q&&p.getMinutes()>=J))&&p.setDate(p.getDate()-1);var[V]=d(),[B,W]=d(p);(g=new Date(p)).setHours(...M.getNormalClose().split(":")),m&&g.setDate(g.getDate()+1);var[U]=g&&d(g)||[];if(o&&(B>P||U>P)){f=new Date(p);do{f.setDate(f.getDate()-1)}while(M&&!M.isMarketDate(f));var[Q,X]=d(f);Q>F&&(p=f,B=Q,W=X)}y={y0:A,y1:_,type:"line",confineToPanel:s},e.plotLine(Object.assign(y,{x0:B,x1:B,color:j,pattern:"solid",lineWidth:z?3:2,opacity:1})),e.plotLine(Object.assign(y,{x0:V,x1:V,color:u?O:j,pattern:[6,6],lineWidth:2,opacity:u?.5:1})),C.D0J(132);var Z=C.S40(100,12,17,7,1);H.style.height=[8,L/4,50].sort((e,t)=>(C.D0J(7),C.D0H(),C.q7n(t,e)))[Z]+"px";var{height:G,width:K}=H.getBoundingClientRect();v=Math.round(_)===e.height?k:0,x="chart"===s.name?35:0,C.H6P(48),b=C.q7n(G,x,v,10),C.D0J(36),H.style.top=C.q7n("px",_,b),H.style.left=S||0===S?V:B-K/2+"px",a.currentAnchorTime=p,a.currentAnchorTick=W},t.Studies.studyScriptLibrary={},t.Studies.studyLibrary=t.Studies.studyLibrary||{},t.extend(t.Studies.studyLibrary,{ma:{name:"Moving Average",overlay:!0,calculateFN:t.Studies.calculateMovingAverage,inputs:{Period:50,Field:"field",Type:"ma",Offset:0},outputs:{MA:"#FF0000"}},"STD Dev":{name:"Standard Deviation",calculateFN:t.Studies.calculateStandardDeviation,inputs:{Period:14,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"True Range":{name:"True Range",calculateFN:t.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},volume:{name:"Volume Chart",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"}}})},S=e=>{var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,N.D0H(),t.ChartEngine.Driver?(t.ChartEngine.Driver.Lookup=function(e){},t.ChartEngine.Driver.Lookup.prototype.acceptText=function(e,t,i,a){N.a9S(),this.cb}):console.error("symbolLookupBase feature requires first activating quoteFeed feature.")},w=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ThemeHelper=t.ThemeHelper||function(e){var i,a;N.D0H(),this.params=e,a="#FFFFFF",(i=e.stx).chart.container&&(a=getComputedStyle(i.chart.container).backgroundColor,t.isTransparent(a)&&(a=i.containerColor)),this.settings.chart.Background.color=t.hexToRgba(a),this.settings.chart["Grid Lines"].color=t.hexToRgba(i.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=t.hexToRgba(i.canvasStyle("stx_grid_dark").color),this.settings.chart["Axis Text"].color=t.hexToRgba(i.canvasStyle("stx_xaxis").color),this.settings.chartTypes["Candle/Bar"].up.color=t.hexToRgba(i.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.color=t.hexToRgba(i.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes["Candle/Bar"].even.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_even").color),this.settings.chartTypes["Candle/Bar"].up.border=t.hexToRgba(i.canvasStyle("stx_candle_up").borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=t.hexToRgba(i.canvasStyle("stx_candle_down").borderLeftColor),t.isTransparent(i.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].up.border=null),t.isTransparent(i.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=t.hexToRgba(i.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=t.hexToRgba(i.canvasStyle("stx_mountain_chart").backgroundColor),this.settings.chartTypes.Mountain.basecolor=t.hexToRgba(i.canvasStyle("stx_mountain_chart").color)},t.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},t.ThemeHelper.prototype.update=function(e){var i,a;function r(t,a,r){for(var n in i[t])e.setStyle(n,a,r)}e||(e=this.params.stx),i={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_even:{stx_hollow_candle_even:!0,stx_bar_even:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},e.chart.container.style.backgroundColor=this.settings.chart.Background.color,e.defaultColor="",r("stx_grid","color",this.settings.chart["Grid Lines"].color),r("stx_grid_dark","color",this.settings.chart["Grid Dividers"].color),r("stx_xaxis","color",this.settings.chart["Axis Text"].color),(a=this.settings.chartTypes["Candle/Bar"]).even||("stx_candle_","shadow_even",a.even={color:null,wick:t.hexToRgba(e.canvasStyle("stx_candle_shadow_even").color),border:null}),r("stx_candle_up","color",a.up.color),r("stx_candle_down","color",a.down.color),r("stx_candle_even","color",a.even.color),r("stx_shadow_up","color",a.up.wick),r("stx_shadow_down","color",a.down.wick),r("stx_shadow_even","color",a.even.wick),e.setStyle("stx_candle_up","borderLeftColor",a.up.border),N.a9S(),e.setStyle("stx_candle_down","borderLeftColor",a.down.border),r("stx_line_chart","color",this.settings.chartTypes.Line.color),e.setStyle("stx_mountain_chart","borderTopColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,1)),e.setStyle("stx_mountain_chart","backgroundColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),e.setStyle("stx_mountain_chart","color",t.hexToRgba(this.settings.chartTypes.Mountain.basecolor,.01)),e.draw()},t.ChartEngine.prototype.setThemeSettings=function(e){var i;this.styles={},this.chart.container.style.backgroundColor="",this.defaultColor="",N.D0H(),e&&((i=new t.ThemeHelper({stx:this})).settings=e,i.update()),this.updateListeners("theme"),this.changeOccurred("theme"),this.displayInitialized&&(this.headsUpHR(),this.clearPixelCache(),this.updateListeners("theme"),this.draw())}},D=t=>{var i,a;i="undefined"!=typeof _CIQ?_CIQ:t.CIQ,a="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,i.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-09:00) Alaska":"America/Juneau","(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Chihuahua, Mazatlan":"America/Chihuahua","(UTC-07:00) Mountain Time (US and Canada)":"America/Denver","(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Guadalajara, Mexico City, Monterrey":"America/Mexico_City","(UTC-06:00) Saskatchewan":"America/Regina","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC-05:00) Havana":"America/Havana","(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Cancun, Jamaica, Panama":"America/Panama","(UTC-03:00) Buenos Aires":"America/Argentina/Buenos_Aires","(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Montevideo":"America/Montevideo","(UTC-03:00) Sao Paulo":"America/Sao_Paulo","(UTC-02:00) Mid-Atlantic":"Atlantic/South_Georgia","(UTC-01:00) Azores":"Atlantic/Azores","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":"Europe/London","(UTC+01:00) Algiers, Tunis":"Africa/Tunis","(UTC+01:00) Casablanca":"Africa/Casablanca","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Amsterdam","(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"Europe/Brussels","(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":"Europe/Sarajevo","(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":"Europe/Bucharest","(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Beirut":"Asia/Beirut","(UTC+02:00) Damascus":"Asia/Damascus","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+02:00) Amman":"Asia/Amman","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Simferopol":"Europe/Moscow","(UTC+03:00) Volgograd":"Europe/Volgograd","(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":"Asia/Karachi","(UTC+05:00) Yekaterinburg":"Asia/Yekaterinburg","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Kuala_Lumpur","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Pyongyang":"Asia/Pyongyang","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":"Asia/Yakutsk","(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":"Pacific/Fiji","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"},function(){var t,r,n,s,o,l,h,c,u,d,p=N;t=("undefined"!=typeof window?window:null)||(void 0!==e?e:{}),a.VERSION="0.4.11",r=t.$||t.jQuery||t.Zepto,n=t.fleegix,s=a.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=a.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],l={},h={},c={};for(var m=0;m<o.length;m++)l[o[m].substr(p.S40(1,"0",p.D0J(1)),3)]=m;for(m=0;m<s.length;m++)h[s[m].substr(0,p.q7n(1,"3",p.D0J(1)))]=m;Array.prototype.indexOf,u=function(e,t){var i,a,r;if("nu","mber","number"!=typeof e)throw p.H6P(0),p.S40("not a number: ",e);if(p.H6P(70),i=p.q7n(e,1e3),r=(a=e.toString()).length,i&&r>t)return p.H6P(7),a.substr(p.S40(t,r),r);for(a=[a];r<t;)a.unshift("0"),r++;return a.join("")},d=function(e){if("u","nd","efi","ned","un","defined","URL m","ust be specified",e){if(!e.url)throw new Error("URL must be specified");if("async"in e||(e.async=!0),!(n&&void 0!==n.xhr||r&&void 0!==r.ajax))throw new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return e.async?n&&n.xhr?n.xhr.send({url:e.url,method:"get",handleSuccess:e.success,handleErr:e.error}):r.ajax({url:e.url,dataType:"text",method:"GET",error:e.error,success:e.success}):n&&n.xhr?n.xhr.doReq({url:e.url,async:!1}):r.ajax({url:e.url,async:!1,dataType:"text"}).responseText}},a.ruleCache={},a.Date=function(){var e,t,i,r,n,s,o;if(e="s",e+="t",e+="ri",e+="ng",this===a)throw"timezoneJS.Date object must be constructed with 'new'";switch(t=Array.prototype.slice.apply(arguments),i=null,r=null,n=[],s=!1,"[object Array]"===Object.prototype.toString.call(t[0])&&(t=t[0]),typeof t[t.length-1]===e&&(s=Date.parse(t[t.length-1].replace(/GMT[+-]\d+/,"")),(isNaN(s)||null===s)&&(r=t.pop())),o=!1,t.length){case 0:i=new Date;break;case 1:i=new Date(t[0]),"string"==typeof t[0]&&-1==t[0].search(/[+-][0-9]{4}/)&&-1==t[0].search(/Z/)&&-1==t[0].search(/T/)&&(o=!0);break;case 2:i=new Date(t[0],t[1]),o=!0;break;default:for(var l=0;l<7;l++)n[l]=t[l]||0;p.D0J(10),i=new Date(n[0],n[1],n[2],n[3],n[4],n[5],n[p.S40("6",4)]),o=!0}if(isNaN(i.getTime()))throw new Error("Invalid date");this._useCache=!1,this._tzInfo={},this._day=0,p.D0J(40),this.year=p.S40(0,"0"),this.month=0,this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,this.timezone=r||null,o?this.setFromDateObjProxy(i):this.setFromTimeProxy(i.getTime(),r)},i.extend(a.Date.prototype,{getDate:function(){return this.date},getDay:function(){return p.D0H(),this._day},getFullYear:function(){return this.year},getMonth:function(){return this.month},getYear:function(){p.H6P(121);var e=p.S40(10,1689,17,238);return this.year-e},getHours:function(){return this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return p.D0H(),this.seconds},getUTCDate:function(){return p.D0H(),this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return p.a9S(),this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return p.a9S(),this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return p.D0H(),this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return p.a9S(),this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return p.D0H(),this.getUTCDateProxy().getUTCSeconds()},getTime:function(){p.H6P(52),p.a9S();var e=p.S40(16740,1200,14);p.D0J(134);var t=p.q7n(20011,995,2e4,11,5);return this._timeProxy+this.getTimezoneOffset()*e*t},getTimezone:function(){return this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return p.a9S(),this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var e;return this._useCache?this._tzInfo:(this.timezone?("U","T","C","Etc","/U","T","C",e="Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:a.timezone.getTzInfo(this._timeProxy,this.timezone)):e={tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=e,p.a9S(),this._useCache=!0,e)},getUTCDateProxy:function(){var e;return e=new Date(this._timeProxy),p.a9S(),e.setUTCMinutes(e.getUTCMinutes()+this.getTimezoneOffset()),e},setDate:function(e){return this.setAttribute("date",e),p.a9S(),this.getTime()},setFullYear:function(e,t,i){return p.a9S(),void 0!==i&&this.setAttribute("date",1),this.setAttribute("year",e),void 0!==t&&("mo","nt","h",this.setAttribute("month",t)),void 0!==i&&this.setAttribute("date",i),this.getTime()},setMonth:function(e,t){return this.setAttribute("month",e),void 0!==t&&this.setAttribute("date",t),p.D0H(),this.getTime()},setYear:function(e){return 0<=(e=Number(e))&&e<=99&&(e+=1900),this.setUTCAttribute("year",e),this.getTime()},setHours:function(e,t,i,a){return p.D0H(),this.setAttribute("hours",e),void 0!==t&&this.setAttribute("minutes",t),void 0!==i&&this.setAttribute("seconds",i),void 0!==a&&this.setAttribute("milliseconds",a),this.getTime()},setMinutes:function(e,t,i){return this.setAttribute("minutes",e),void 0!==t&&("s","ec","on","ds",this.setAttribute("seconds",t)),void 0!==i&&this.setAttribute("milliseconds",i),this.getTime()},setSeconds:function(e,t){return this.setAttribute("seconds",e),void 0!==t&&this.setAttribute("milliseconds",t),this.getTime()},setMilliseconds:function(e){return"millise","conds",this.setAttribute("milliseconds",e),this.getTime()},setTime:function(e){if(isNaN(e))throw new Error("Units must be a number.");return this.setFromTimeProxy(e,this.timezone),this.getTime()},setUTCFullYear:function(e,t,i){var a;if(p.a9S(),void 0!==i){-107761421,1862984064,a=2;for(var r=1;-107761421!==p.U6$(r.toString(),r.toString().length,49801);r++)this.setUTCAttribute("",3),a+=2;1862984064!==p.U6$(a.toString(),a.toString().length,25666)&&this.setUTCAttribute("",3),this.setUTCAttribute("date",1)}return this.setUTCAttribute("year",e),void 0!==t&&this.setUTCAttribute("month",t),void 0!==i&&this.setUTCAttribute("date",i),this.getTime()},setUTCMonth:function(e,t){return this.setUTCAttribute("month",e),void 0!==t&&this.setUTCAttribute("date",t),p.D0H(),this.getTime()},setUTCDate:function(e){return"da","te",this.setUTCAttribute("date",e),this.getTime()},setUTCHours:function(e,t,i,a){return"h","o","ur","s",this.setUTCAttribute("hours",e),void 0!==t&&this.setUTCAttribute("minutes",t),void 0!==i&&this.setUTCAttribute("seconds",i),void 0!==a&&this.setUTCAttribute("milliseconds",a),this.getTime()},setUTCMinutes:function(e,t,i){return this.setUTCAttribute("minutes",e),void 0!==t&&this.setUTCAttribute("seconds",t),void 0!==i&&this.setUTCAttribute("milliseconds",i),this.getTime()},setUTCSeconds:function(e,t){return this.setUTCAttribute("seconds",e),void 0!==t&&("millise","con","ds",this.setUTCAttribute("milliseconds",t)),this.getTime()},setUTCMilliseconds:function(e){return this.setUTCAttribute("milliseconds",e),this.getTime()},setFromDateObjProxy:function(e){this.year=e.getFullYear(),this.month=e.getMonth(),this.date=e.getDate(),this.hours=e.getHours(),this.minutes=e.getMinutes(),this.seconds=e.getSeconds(),this.milliseconds=e.getMilliseconds(),this._day=e.getDay(),this._dateProxy=e,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(e,t){var i,r;i=new Date(e),p.D0H(),r=t?a.timezone.getTzInfo(e,t,!0).tzOffset:i.getTimezoneOffset(),i.setTime(e+6e4*(i.getTimezoneOffset()-r)),this.setFromDateObjProxy(i)},setAttribute:function(e,t){var i;if(isNaN(t))throw"Uni","ts must be a number.",new Error("Units must be a number.");(i=this._dateProxy)["set"+("year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1))](t),this.setFromDateObjProxy(i)},setUTCAttribute:function(e,t){var i,a;if(isNaN(t))throw new Error("Units must be a number.");p.a9S(),i="year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1),(a=this.getUTCDateProxy())["setUTC"+i](t),a.setUTCMinutes(a.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(a.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(e){var t;t=this.getTimezoneInfo().tzOffset,this.timezone=e,this._useCache=!1,p.D0H(),this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+t)},removeTimezone:function(){this.timezone=null,this._useCache=!1},valueOf:function(){return this.getTime()},clone:function(){return this.timezone?new a.Date(this.getTime(),this.timezone):new a.Date(this.getTime())},toGMTString:function(){return"Etc","/GMT",this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){p.a9S(),p.H6P(36);var e=p.S40(12,7033,15);p.D0J(135);var t=p.S40(19490,1642,18,12);return this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+(e<t?"Z":"a")},toJSON:function(){return p.a9S(),this.toISOString()},toDateString:function(){return"E",p.a9S(),"EE M","MM dd yyy","y",this.toString("EEE MMM dd yyyy")},toTimeString:function(){return p.a9S(),this.toString("H:mm k")},toString:function(e,t){var i,r,n,o;return"yyyy-MM-ddTHH:","mm",":ss.SSS",e||(e="yyyy-MM-ddTHH:mm:ss.SSS"),i=e,p.D0H(),r=t?a.timezone.getTzInfo(this.getTime(),t):this.getTimezoneInfo(),n=this,t&&(n=this.clone()).setTimezone(t),o=n.getHours(),i.replace(/a+/g,(function(){return"k"})).replace(/y+/g,(function(e){return u(n.getFullYear(),e.length)})).replace(/d+/g,(function(e){return u(n.getDate(),e.length)})).replace(/m+/g,(function(e){return p.D0H(),u(n.getMinutes(),e.length)})).replace(/s+/g,(function(e){return u(n.getSeconds(),e.length)})).replace(/S+/g,(function(e){return u(n.getMilliseconds(),e.length)})).replace(/h+/g,(function(e){return u(o%12==0?12:o%12,e.length)})).replace(/M+/g,(function(e){var t,i;return p.D0H(),t=n.getMonth(),(i=e.length)>3?a.Months[t]:i>2?a.Months[t].substring(0,i):(p.D0J(0),u(p.q7n(t,1),i))})).replace(/k+/g,(function(){return o>=12?(o>12&&(o-=12),"PM"):(p.a9S(),"AM")})).replace(/H+/g,(function(e){return p.a9S(),u(o,e.length)})).replace(/E+/g,(function(e){return p.D0J(28),p.D0H(),s[n.getDay()].substring(p.q7n("0",96),e.length)})).replace(/Z+/gi,(function(){return r.tzAbbr}))},toUTCString:function(){return p.D0H(),this.toGMTString()},civilToJulianDayNumber:function(e,t,i){var a,r;++t>12&&(p.D0J(14),a=parseInt(p.S40(12,t),10),p.D0J(75),t=p.q7n(t,12),e+=a),t<=2&&(e-=1,t+=12),p.D0J(8),a=Math.floor(p.S40(e,"100")),p.D0J(39);var n=p.S40(9,4,3);p.H6P(12);var s=p.S40(7,3,7);r=n-a+Math.floor(a/s),p.H6P(52);var o=p.q7n(44,15,3);p.D0J(106);var l=p.S40(15,152,1496,19,17);return p.a9S(),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+o))+i+r-l},getLocalOffset:function(){return p.D0H(),this._dateProxy.getTimezoneOffset()}},!0),a.timezone=new function(){var e,t,i;function r(e){var t,i;return t=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,(i=e.match(t))[1]=parseInt(i[1],10),p.H6P(21),i[p.q7n("2",0)]=i[2]?parseInt(i[2],10):0,i[3]=i[3]?parseInt(i[3],10):0,i.slice(1,5)}function n(a){var r,s,o,l;return(r=i[a])?r:(s=a.split("/")[p.S40("0",0,p.D0J(21))],o=t[s],p.D0H(),o||("string"==typeof(l=e.zones[a])?n(l):e.loadedZones.backward?void u(a):("bac","kwa","rd",e.loadZoneFile("backward"),n(a))))}function s(e,t){return p.D0J(7),p.D0H(),-Math.ceil(p.S40(e,t))}function o(e){var t,i,a,n;if(p.a9S(),e[3])return t=parseInt(e[3],10),i=11,a=31,e[4]&&(i=l[e[4].substr(p.S40("0",0,p.H6P(10)),3)],a=parseInt(e[5],10)||1),n=e[6]?r(e[6]):[0,0,0],p.H6P(28),[t,i,a,n[p.S40("0",0)],n[1],n[2]]}function u(e){throw p.a9S(),"' is either incorrect, or not l","oaded in the timezone registry.",p.H6P(37),new Error(p.S40("' is either incorrect, or not loaded in the timezone registry.","Timezone '",e))}function m(e){var t,i;t=r(e),i="-"===e.charAt(0)?-1:1,p.D0J(0);var a=p.S40(46,14);p.D0J(139);var n=p.q7n(7,6,14,6,8);p.H6P(0);var s=p.q7n(4,56);p.H6P(39);var o=p.q7n(20,16,2);p.D0J(39);var l=p.S40(2e4,8,18992);return t=i*(((t[0]*a+t[n])*s+t[o])*l),p.D0J(140),p.S40(60,1e3,t)}e=this,t={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},i={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"},this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=n,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(e){var t,i;for(var a in"northam","erica",t={async:!0},i=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica",e)t[a]=e[a];return this.loadZoneFiles(i,t)},this.loadZoneFiles=function(e,t){var i,a;if(a=0,"string"==typeof e)return this.loadZoneFile(e,t);t=t||{},p.a9S(),i=t.callback,t.callback=function(){p.D0H(),++a===e.length&&"function"==typeof i&&i()};for(var r=0;r<e.length;r++)this.loadZoneFile(e[r],t)},this.loadZoneFile=function(t,i){if("undef","ined",p.D0H(),void 0===this.zoneFileBasePath)throw"Plea","se define a b","ase path ","to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.",new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[t])return this.loadedZones[t]=!0,function(t,i){var a;p.D0J(7);var r=p.q7n(5330,10660);p.D0H(),p.H6P(138);var n=p.q7n(63960,4,3,2,2665);p.D0J(12);var s=p.S40(17,135,17);p.H6P(36);var o=p.S40(20,6190,14);return a=e.zoneFileBasePath+(48.02!=r?"/":23.26>=n?s:o)+t,i&&i.async?e.transport({async:!0,url:a,success:function(t){return e.parseZones(t)&&"function"==typeof i.callback&&i.callback()},error:function(){throw p.D0H(),p.D0J(37),new Error(p.S40("' zoneinfo files","Error retrieving '",a))}}):e.parseZones(e.transport({url:a,async:!1}))}(t,i)},this.loadZoneJSONData=function(t,i){var a;return a=function(t){for(var i in(t=JSON.parse(t)).zones)e.zones[i]=t.zones[i];for(var a in t.rules)e.rules[a]=t.rules[a]},i?a(e.transport({url:t,async:!1})):e.transport({url:t,success:a})},this.loadZoneDataFromObject=function(t){if(t){for(var i in p.D0H(),t.zones)e.zones[i]=t.zones[i];for(var a in t.rules)e.rules[a]=t.rules[a]}},this.getAllZones=function(){var e;for(var t in p.D0H(),e=[],this.zones)e.push(t);return e.sort()},this.parseZones=function(t){var i,a,n,s,l;if(p.D0H(),!t)return!1;i=t.split("\n"),a=[],s=null,l=null;for(var h=0;h<i.length;h++)if((n=i[h]).match(/^\s/)&&(p.H6P(37),n=p.q7n(n,"Zone ",s)),(n=n.split("#")[0]).length>3)switch("R","ule","Zo","n","e",(a=n.split(/\s+/)).shift()){case"Zone":if(s=a.shift(),e.zones[s]||(e.zones[s]=[]),a.length<3)break;a.splice(3,a.length,o(a)),a[3]&&(a[3]=Date.UTC.apply(null,a[3])),p.H6P(10),a[p.q7n("0",0)]=-m(a[0]),e.zones[s].push(a);break;case"Rule":l=a.shift(),e.rules[l]||(e.rules[l]=[]),a[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)||a[1],a[5]=r(a[5]),a[6]=m(a[6]),e.rules[l].push(a);break;case"Link":if(e.zones[a[1]]){". Cannot create link o","f a preexis","ted zone",".",p.D0J(15);var c=p.S40(2,12,13);throw new Error("Error with Link "+a[c]+". Cannot create link of a preexisted zone.")}isNaN(a[0])?e.zones[a[1]]=a[0]:e.zones[a[1]]=parseInt(a[0],10)}return!0},this.transport=d,this.getTzInfo=function(t,i,r){var n,o,d;return this.lazyLoadZoneFiles(i),p.D0H(),o=+(n=function t(i,a){var r,n,s,o;for("stri","n","g",r="number"==typeof i?i:new Date(+i).getTime(),n=a,s=e.zones[n];"string"==typeof s;)n=s,s=e.zones[n];if(!s){if(!e.loadedZones.backward)return e.loadZoneFile("backward"),t(i,a);if(n&&n!==a)return e.lazyLoadZoneFiles(n),t(i,n);u(n)}if(0===s.length)throw"' on"," ","No Zone ","f","ound f","or '",p.H6P(48),new Error(p.S40(i,"' on ",a,"No Zone found for '"));for(var l=s.length-1;l>=0&&!((o=s[l])[3]&&r>o[3]);l--);return p.H6P(0),s[p.q7n(l,1)]}(t,i))[0],(d=function(t,i,r,n){var o,u,d,m,g,f,y,v,x,b,C,S,w;if("nu","mber",o="number"==typeof t?new Date(t):t,u=i[1],d=i[0],m=u.match(/^([0-9]):([0-9][0-9])$/)){"m","a","x",p.D0J(123);var D=p.q7n(20,14,271,18);p.H6P(7);var k=p.q7n(19,29);p.D0J(19);var M=p.S40(120,9,20,89);p.D0J(52);var T=p.q7n(36,19,2);return p.D0J(1),[-1e6,"max","-","Jan",p.S40(1,"1"),[0,0,0],parseInt(m[D],k)*M+parseInt(m[T],10),"-"]}if(g=function(e,t,i){var a;if(a=0,"u"===t||"g"===t||"z"===t)a=0;else if("s"===t)a=d;else{if("w"!==t&&t)throw p.H6P(0),new Error(p.S40("unknown type ",t));a=s(d,i[6])}return p.H6P(136),a*=p.S40("1000",60),new Date(e.getTime()+a)},f=function(e,t){var i,a,r,n,s,o,u;return p.a9S(),i=e[0],r=(a=e[1])[5],c[i]||(c[i]={}),c[i][a]?n=c[i][a]:(isNaN(a[4])?("last"===a[4].substr(0,4)?(n=new Date(Date.UTC(i,l[a[3]]+1,1,r[0]-24,r[1],r[2],0)),s=h[a[4].substr(p.S40(1,"4",p.H6P(1)),3)],o="<="):(n=new Date(Date.UTC(i,l[a[3]],a[4].substr(5),r[0],r[1],r[2],0)),s=h[a[4].substr(0,p.q7n(1,"3",p.H6P(1)))],o=a[4].substr(3,2)),u=n.getUTCDay(),">="===o?n.setUTCDate(n.getUTCDate()+(s-u+(s<u?7:0))):n.setUTCDate(n.getUTCDate()+(s-u-(s>u?7:0)))):n=new Date(Date.UTC(i,l[a[3]],a[4],r[0],r[1],r[2],0)),c[i][a]=n),t&&(n=g(n,r[3],t)),n},y=function(e,t){var i;i=[];for(var a=0;t&&a<t.length;a++)t[a][0]<=e&&(t[a][1]>=e||t[a][0]===e&&"only"===t[a][1]||"max"===t[a][1])&&i.push([e,t[a]]);return i},v=function(e,t,i){var a,n;return e instanceof Date?i&&(e=g(e,r?"u":"w",i)):(a=e[0],n=e[1],e=!i&&c[a]&&c[a][n]?c[a][n]:f(e,i)),t instanceof Date?i&&(t=g(t,r?"u":"w",i)):(a=t[0],n=t[1],t=!i&&c[a]&&c[a][n]?c[a][n]:f(t,i)),e=Number(e),p.a9S(),t=Number(t),p.H6P(7),p.q7n(t,e)},x=o.getUTCFullYear(),(C=a.ruleCache[n])||(C=a.ruleCache[n]={}),(b=C[x])||(p.H6P(7),(b=(b=y(p.S40(1,x),e.rules[u])).concat(y(x,e.rules[u]))).sort(v),C[x]=b),!b||!b.length)return null;for(var A=b.length-1;A>=0;A--)if(A>0?(p.D0J(137),S=b[p.q7n(1,"1",A)][p.q7n(1,"1",p.D0J(1))]):S=null,(w=b[A])[2]||(w[2]=f(w,S)),v(o,w,S)>=0)return p.D0J(40),w[p.S40(32,"1")];return null}(t,n,r,i))&&(o=s(o,d[6])),{tzOffset:o,tzAbbr:function(e,t){var i,a;if(p.a9S(),(i=e[2]).indexOf("%s")>-1)return a=t?"-"===t[7]?"":t[7]:"S",i.replace("%s",a);if(i.indexOf("/")>-1)return i.split("/",2)[t&&t[6]?1:0];return i}(n,d)}},this.lazyLoadZoneFiles=function(e){var t;if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(!(t=n(e)))throw new Error("Not a valid timezone ID.");this.loadZoneFiles(t)}}}}.call("undefined"!=typeof window?window:void 0),a.timezone.loadingScheme=a.timezone.loadingSchemes.MANUAL_LOAD,a.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-","-01",null]],"Africa/Cairo":[[-120,"Egypt","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[0,"Morocco","+00/+01",15406956e5],[-60,"Morocco","+01/+00",null]],"Africa/Windhoek":[[-120,"Namibia","%s",null]],"Africa/Johannesburg":[[-120,"SA","SAST",null]],"Africa/Tunis":[[-60,"Tunisia","CE%sT",null]],"Antarctica/Troll":[[0,"Troll","%s",null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"Azer","+04/+05",null]],"Asia/Dhaka":[[-360,"Dhaka","+06/+07",null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Shanghai":[[-480,"PRC","C%sT",null]],"Asia/Hong_Kong":[[-480,"HK","HK%sT",null]],"Asia/Taipei":[[-480,"Taiwan","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,"Zion","I%sT",null]],"Asia/Tokyo":[[-540,"Japan","J%sT",null]],"Asia/Amman":[[-120,"Jordan","EE%sT",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"ROK","K%sT",null]],"Asia/Pyongyang":[[-510,"-","KST",15254766e5],[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon","EE%sT",null]],"Asia/Kuala_Lumpur":[[-480,"-","+08",null]],"Asia/Hovd":[[-420,"Mongol","+07/+08",null]],"Asia/Ulaanbaatar":[[-480,"Mongol","+08/+09",null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"Pakistan","PK%sT",null]],"Asia/Hebron":[[-120,"Palestine","EE%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Damascus":[[-120,"Syria","EE%sT",null]],"Asia/Bangkok":[[-420,"-","+07",null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"Aus","AC%sT",null]],"Australia/Perth":[[-480,"AW","AW%sT",null]],"Australia/Eucla":[[-525,"AW","+0845/+0945",null]],"Australia/Brisbane":[[-600,"AQ","AE%sT",null]],"Australia/Adelaide":[[-570,"AS","AC%sT",null]],"Australia/Hobart":[[-600,"AT","AE%sT",null]],"Australia/Melbourne":[[-600,"AV","AE%sT",null]],"Australia/Sydney":[[-600,"AN","AE%sT",null]],"Australia/Lord_Howe":[[-630,"LH","+1030/+11",null]],"Pacific/Fiji":[[-720,"Fiji","+12/+13",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-","+14",null]],"Pacific/Noumea":[[-660,"NC","+11/+12",null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham","+1245/+1345",null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"Tonga","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],UTC:"Etc/UTC","Europe/London":[[0,"EU","GMT/BST",null]],"Europe/Dublin":[[0,"Eire","IST/GMT",null]],WET:[[0,"EU","WE%sT",null]],CET:[[-60,"C-Eur","CE%sT",null]],MET:[[-60,"C-Eur","ME%sT",null]],EET:[[-120,"EU","EE%sT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"America/Thule":[[240,"Thule","A%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Paris":[[-60,"EU","CE%sT",null]],"Europe/Berlin":[[-60,"EU","CE%sT",null]],"Europe/Amsterdam":[[-60,"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,"EU","EE%sT",null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-","MSK",null]],"Europe/Volgograd":[[-180,"-","+03",1540692e6],[-240,"-","+04",16090344e5],[-180,"-","+03",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-300,"-","+05",null]],"Asia/Omsk":[[-360,"-","+06",null]],"Asia/Novosibirsk":[[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-","+10",null]],"Asia/Magadan":[[-660,"-","+11",null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,"EU","CE%sT",null]],"Europe/Sarajevo":"Europe/Belgrade","Europe/Istanbul":[[-180,"-","+03",null]],"America/New_York":[[300,"US","E%sT",null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,"US","M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[[420,"-","MST",null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada","A%sT",null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,"Mexico","C%sT",null]],"America/Chihuahua":[[420,"Mexico","M%sT",null]],"America/Costa_Rica":[[360,"CR","C%sT",null]],"America/Havana":[[300,"Cuba","C%sT",null]],"America/Port-au-Prince":[[300,"Haiti","E%sT",null]],"America/Panama":[[300,"-","EST",null]],"America/Puerto_Rico":[[240,"-","AST",null]],"America/Argentina/Buenos_Aires":[[180,"Arg","-03/-02",null]],"America/Sao_Paulo":[[180,"Brazil","-03/-02",null]],"America/Santiago":[[240,"Chile","-04/-03",null]],"America/Punta_Arenas":[[240,"Chile","-04/-03",14808096e5],[180,"-","-03",null]],"America/Bogota":[[300,"CO","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Montevideo":[[180,"Uruguay","-03/-02",null]],"America/Caracas":[[240,"-","-04",null]],"Europe/Athens":"Europe/Bucharest","Europe/Simferopol":"Europe/Moscow","Asia/Rangoon":"Asia/Yangon","Atlantic/Reykjavik":"UTC","Asia/Kuwait":"Asia/Riyadh","Asia/Muscat":"Asia/Riyadh","Asia/Istanbul":"Europe/Istanbul"},rules:{Egypt:[],Morocco:[[2013,2018,"-","Oct","lastSun",[3,0,0,null],0,"-"],[2014,2018,"-","Mar","lastSun",[2,0,0,null],60,"-"],[2017,"only","-","May","21",[3,0,0,null],0,"-"],[2017,"only","-","Jul","2",[2,0,0,null],60,"-"],[2018,"only","-","May","13",[3,0,0,null],0,"-"],[2018,"only","-","Jun","17",[2,0,0,null],60,"-"],[2019,"only","-","May","5",[3,0,0,null],-60,"-"],[2019,"only","-","Jun","9",[2,0,0,null],0,"-"],[2020,"only","-","Apr","19",[3,0,0,null],-60,"-"],[2020,"only","-","May","31",[2,0,0,null],0,"-"],[2021,"only","-","Apr","11",[3,0,0,null],-60,"-"],[2021,"only","-","May","16",[2,0,0,null],0,"-"],[2022,"only","-","Mar","27",[3,0,0,null],-60,"-"],[2022,"only","-","May","8",[2,0,0,null],0,"-"],[2023,"only","-","Mar","19",[3,0,0,null],-60,"-"],[2023,"only","-","Apr","30",[2,0,0,null],0,"-"],[2024,"only","-","Mar","10",[3,0,0,null],-60,"-"],[2024,"only","-","Apr","14",[2,0,0,null],0,"-"],[2025,"only","-","Feb","23",[3,0,0,null],-60,"-"],[2025,"only","-","Apr","6",[2,0,0,null],0,"-"]],Namibia:[[1994,2017,"-","Sep","Sun>=1",[2,0,0,null],0,"CAT"],[1995,2017,"-","Apr","Sun>=1",[2,0,0,null],-60,"WAT"]],SA:[],Tunisia:[],Troll:[[2005,"max","-","Mar","lastSun",[1,0,0,"u"],120,"+02"],[2004,"max","-","Oct","lastSun",[1,0,0,"u"],0,"+00"]],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Azer:[],Dhaka:[],PRC:[],HK:[],Taiwan:[],Iran:[[2017,2019,"-","Mar","21",[24,0,0,null],60,"-"],[2017,2019,"-","Sep","21",[24,0,0,null],0,"-"],[2020,"only","-","Mar","20",[24,0,0,null],60,"-"],[2020,"only","-","Sep","20",[24,0,0,null],0,"-"],[2021,2023,"-","Mar","21",[24,0,0,null],60,"-"],[2021,2023,"-","Sep","21",[24,0,0,null],0,"-"],[2024,"only","-","Mar","20",[24,0,0,null],60,"-"],[2024,"only","-","Sep","20",[24,0,0,null],0,"-"],[2025,2027,"-","Mar","21",[24,0,0,null],60,"-"],[2025,2027,"-","Sep","21",[24,0,0,null],0,"-"]],Zion:[[2013,"max","-","Mar","Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Japan:[],Jordan:[[2014,"max","-","Mar","lastThu",[24,0,0,null],60,"S"],[2014,"max","-","Oct","lastFri",[0,0,0,"s"],0,"-"]],ROK:[],Lebanon:[[1993,"max","-","Mar","lastSun",[0,0,0,null],60,"S"],[1999,"max","-","Oct","lastSun",[0,0,0,null],0,"-"]],Mongol:[],Pakistan:[],Palestine:[[2016,2018,"-","Mar","Sat>=24",[1,0,0,null],60,"S"],[2016,2018,"-","Oct","Sat>=24",[1,0,0,null],0,"-"],[2019,"only","-","Mar","29",[0,0,0,null],60,"S"],[2019,"only","-","Oct","Sat>=24",[0,0,0,null],60,"-"],[2020,"max","-","Mar","Sat>=24",[0,0,0,null],60,"S"],[2020,"max","-","Oct","Sat>=24",[1,0,0,null],60,"-"]],Syria:[[2012,"max","-","Mar","lastFri",[0,0,0,null],60,"S"],[2009,"max","-","Oct","lastFri",[0,0,0,null],0,"-"]],Aus:[],AW:[],AQ:[],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AT:[[2001,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],AV:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AN:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],LH:[[2008,"max","-","Apr","Sun>=1",[2,0,0,null],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,null],30,"-"]],Fiji:[[2014,2018,"-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2015,"max","-","Jan","Sun>=12",[3,0,0,null],0,"-"],[2019,"only","-","Nov","Sun>=8",[2,0,0,null],60,"-"],[2020,"only","-","Dec","20",[2,0,0,null],60,"-"],[2021,"max","-","Nov","Sun>=8",[2,0,0,null],60,"-"]],NC:[],NZ:[[2007,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[2,45,0,"s"],60,"-"],[2008,"max","-","Apr","Sun>=1",[2,45,0,"s"],0,"-"]],WS:[[2012,"max","-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,"max","-","Sep","lastSun",[3,0,0,null],60,"-"]],Tonga:[[2016,"only","-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2017,"only","-","Jan","Sun>=15",[3,0,0,null],0,"-"]],Eire:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],0,"-"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],-60,"-"]],EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],"C-Eur":[[1981,"max","-","Mar","lastSun",[2,0,0,"s"],60,"S"],[1996,"max","-","Oct","lastSun",[2,0,0,"s"],0,"-"]],Thule:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],US:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Canada:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,"max","-","Apr","Sun>=1",[2,0,0,null],60,"D"],[2002,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],CR:[],Cuba:[[2012,"max","-","Nov","Sun>=1",[0,0,0,"s"],0,"S"],[2013,"max","-","Mar","Sun>=8",[0,0,0,"s"],60,"D"]],Haiti:[[2017,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2017,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Arg:[],Brazil:[[2008,2017,"-","Oct","Sun>=15",[0,0,0,null],60,"-"],[2016,2019,"-","Feb","Sun>=15",[0,0,0,null],0,"-"],[2018,"only","-","Nov","Sun>=1",[0,0,0,null],60,"-"]],Chile:[[2016,2018,"-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-","Apr","Sun>=2",[3,0,0,"u"],0,"-"],[2019,"max","-","Sep","Sun>=2",[4,0,0,"u"],60,"-"]],CO:[],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"-"],[2013,"max","-","Mar","Sun>=22",[0,0,0,null],0,"-"]],Uruguay:[]}})},k=e=>{var t,i;function a(e,i,a){var r;e.layout.crosshair||(t.ChartEngine.crosshairY=0,t.ChartEngine.crosshairX=0,e.cx=e.backOutX(0),e.cy=e.backOutY(0),e.findHighlights(null,!0),t.ChartEngine.crosshairY=a,t.ChartEngine.crosshairX=i,r=e.container.getBoundingClientRect(),e.top=r.top,e.left=r.left,e.right=e.left+e.width,e.bottom=e.top+e.height,e.cx=e.backOutX(i),e.cy=e.backOutY(a),e.currentPanel&&e.currentPanel.chart.dataSet&&(e.crosshairTick=e.tickFromPixel(e.cx,e.currentPanel.chart),e.crosshairValue=e.adjustIfNecessary(e.currentPanel,e.crosshairTick,e.valueFromPixel(e.cy,e.currentPanel))),e.headsUpHR()),e.findHighlights(!0),e.draw()}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.touchSingleClick=function(e,i,r){var n,s;return N.a9S(),n=this,s=arguments,function(){(function(){var e,n,o;if("touc","hSingl","eC","lick",!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",s))return;if(this.editingAnnotation)return;if(this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},!this.displayCrosshairs)return;if(!this.displayInitialized)return;if(""!==this.openDialog)return;if(i<this.left||i>this.right||r<this.top||r>this.bottom)return;e=this.backOutY(t.ChartEngine.crosshairY),n=this.backOutX(t.ChartEngine.crosshairX),this.currentPanel=this.whichPanel(e),o=this.currentVectorParameters.vectorType,t.Drawing&&o&&t.Drawing[o]&&(new t.Drawing[o]).dragToDraw||(this.drawingClick(this.currentPanel,n,e)||a(this,i,r),this.currentVectorParameters.vectorType||this.activeMarker&&this.activeMarker.click({cx:n,cy:e,panel:this.currentPanel})||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:n,y:e}))}this.runAppend("touchSingleClick",s)}).apply(n,s)}},t.ChartEngine.prototype.touchDoubleClick=function(e,i,r){var n,s,o,l,h,c;n="d",n+="ou",n+="bl",n+="eTap",s="touchDoubleCl",s+="ic",s+="k",o=654591386,l=-1914874400,h=2;for(var u=1;N.Z2Z(u.toString(),u.toString().length,20973)!==o;u++){if(this.runPrepend("",arguments))return;if(this.editingAnnotation)return;h+=2}if(N.U6$(h.toString(),h.toString().length,82311)!==l){if(this.runPrepend("",arguments))return;if(this.editingAnnotation)return}if(!this.runPrepend(s,arguments)&&!this.editingAnnotation)return t.ChartEngine.drawingLine?this.undo():void(this.activeDrawing||(a(this,i,r),c=this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:r,panel:this.currentPanel}),N.D0H(),c||this.dispatch(n,{stx:this,finger:e,x:i,y:r}),this.runAppend("touchDoubleClick",arguments)))},t.ChartEngine.prototype.startProxy=function(e){this.touchPointerType=e.pointerType,"touch"==this.touchPointerType?(this.mouseMode=!1,this.touches[this.touches.length]={pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY},this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],1==this.touches.length&&(this.gesturePointerId=e.pointerId),this.touchstart(e)):this.mouseMode=!0},t.ChartEngine.prototype.moveProxy=function(e){e.pointerType&&"touch"!=e.pointerType?this.mouseMode=!0:(N.a9S(),this.mouseMode=!1,this.touchmove(e))},t.ChartEngine.prototype.endProxy=function(e){var t,i,a,r=N;if("touch"==this.touchPointerType){this.mouseMode=!1,t=this.touches.length;for(var n=0;n<this.touches.length;n++)if(this.touches[n].pointerId==e.pointerId){this.touches.splice(n,1);break}if(n==t)return this.touches=[],this.grabbingScreen=!1,void(this.touching=!1);this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],r.D0J(28),i=-r.q7n("802980364",64),-1900874754,a=2;for(var s=1;r.U6$(s.toString(),s.toString().length,23292)!==i;s++)this.touchend(e),a+=2;-1900874754!==r.Z2Z(a.toString(),a.toString().length,1617)&&this.touchend(e)}else this.mouseMode=!0},t.ChartEngine.prototype.msMouseMoveProxy=function(e){!this.touches.length&&this.mouseMode&&this.mousemove(e)},t.ChartEngine.prototype.msMouseDownProxy=function(e){N.a9S(),this.mouseMode&&this.mousedown(e)},t.ChartEngine.prototype.msMouseUpProxy=function(e){N.D0H(),this.mouseMode&&this.mouseup(e)},t.ChartEngine.prototype.iosMouseMoveProxy=function(e){this.touching||(N.a9S(),this.mousemove(e))},t.ChartEngine.prototype.iosMouseDownProxy=function(e){this.touching?this.mouseMode=!1:(this.mouseMode=!0,N.a9S(),this.mousedown(e))},t.ChartEngine.prototype.iosMouseUpProxy=function(e){this.touching||this.mouseup(e)},t.ChartEngine.prototype.touchmove=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,H,I,j,O,Y,R,$=N;if(this.displayInitialized&&""===this.openDialog&&!0!==t.ChartEngine.ignoreTouch){if(i=[],(!this.overYAxis||this.controls&&this.controls.crossX&&"none"!=this.controls.crossX.style.display)&&(e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),e&&e.stopPropagation()),a=(new Date).getTime(),-1==this.clicks.s2MS){if(this.clicks.e1MS=a,this.clicks.e1MS-this.clicks.s1MS<25)return}else if(this.clicks.e2MS=a,this.clicks.e2MS-this.clicks.s2MS<25)return;if(e.pointerType||(e.pointerType=this.touchPointerType),t.isSurface){if(this.mouseMode)return;e.pointerId||(e.pointerId=this.gesturePointerId);for(var z=0;z<this.touches.length;z++)if(this.touches[z].pointerId==e.pointerId){if(r=Math.abs(this.touches[z].pageX-e.clientX),n=Math.abs(this.touches[z].pageY-e.clientY),$.H6P(42),!Math.sqrt($.q7n(r,n,r,n)))return;if(this.clicks.e1MS=(new Date).getTime(),this.clicks.e1MS-this.clicks.s1MS<50)return;if(this.touches[z].pageX==e.clientX&&this.touches[z].pageY==e.clientY)return;this.touches[z].pageX=this.touches[z].clientX=e.clientX,this.touches[z].pageY=this.touches[z].clientY=e.clientY;break}if(0===z?this.movedPrimary=!0:this.movedSecondary=!0,z==this.touches.length)return;this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],i=this.touches.length?this.touches:this.changedTouches}else i=e.touches,this.changedTouches=e.changedTouches;if(!(1==i.length&&Math.pow(this.clicks.x-i[0].clientX,2)+Math.pow(this.clicks.y-i[0].clientY,2)<=16||(s=this.crosshairXOffset,o=this.crosshairYOffset,l=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,h=!this.layout.crosshair&&!l&&!this.touchNoPan,("pen"==e.pointerType||h||this.activeDrawing&&"freeform"==this.activeDrawing.name)&&($.D0J(7),s=o=$.q7n(0,"0")),this.runPrepend("touchmove",arguments)))){if(t.ChartEngine.resizingPanel)return c=(d=i[0]).clientX,u=d.clientY,$.D0J(0),void this.mousemoveinner($.q7n(c,s),$.q7n(u,o));if($.D0H(),-1!=this.moveB&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=i[0].pageX,1!=i.length||this.twoFingerStart){if(2==i.length&&this.allowZoom){if(!this.displayCrosshairs)return;v=(y=i[0]).clientX,x=y.clientY,C=(b=i[1]).clientX,S=b.clientY,$.D0J(141),p=Math.sqrt($.q7n(x,C,x,S,S,C,v,v)),$.D0J(0);var q=$.q7n(0,2);if(this.pinchingCenter=(Math.min(v,C)-Math.max(v,C))/q,w=Math.round(this.gestureStartDistance-p),h&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(t.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(v<this.pt.x1&&C<this.pt.x2||v>this.pt.x1&&C>this.pt.x2||x<this.pt.y1&&S<this.pt.y2||x>this.pt.y1&&S>this.pt.y2)this.pinchingScreen=0;else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:v,x2:C,y1:x,y2:S},0===this.pinchingScreen)this.grabMode="pan",$.H6P(0),this.mousemoveinner($.S40(v,s),$.q7n(x,o)),this.gestureStartDistance=p;else{if(D=Math.asin((Math.max(S,x)-Math.min(S,x))/p),Math.abs(w)<12&&!h){if(this.moveCount++,4==this.moveCount)return this.pinchingScreen=0,void(this.moveCount=0)}else this.moveCount=0;if(D<1||!this.goneVertical&&D<1.37){if(!this.currentPanel)return;if(k=this.currentPanel.chart,this.goneVertical=!1,p=this.pt.x2-this.pt.x1,M=this.grabStartValues.t2-this.grabStartValues.t1,T=this.grabStartValues.t1+M/2,$.D0J(14),A=$.q7n(M,p),!1===k.allowScrollFuture&&!1===k.allowScrollPast&&(A=Math.max(A,k.width/k.dataSet.length)),_=this.layout.candleWidth,this.setCandleWidth(A,k),k.maxTicks<this.minimumZoomTicks)return void this.setCandleWidth(_,k);this.micropixels=0,P=this.pixelFromTick(Math.round(T),k),F=this.pt.x1-this.left+Math.round(p/2),$.H6P(7),L=$.q7n(F,P),$.H6P(14),E=$.q7n(A,L),H=Math.round(E),k.scroll-=H,$.H6P(7),this.microscroll=$.q7n(E,H),this.micropixels=A*this.microscroll,this.draw()}else if(I=this.grabStartYAxis,this.goneVertical=!0,I){j=-396170675,O=1039071863,Y=2;for(var J=1;$.U6$(J.toString(),J.toString().length,47121)!==j;J++)I.zoom=this.grabStartZoom+(this.gestureStartDistance-p),Y+=2;if($.U6$(Y.toString(),Y.toString().length,25025)!==O&&(I.zoom=this.grabStartZoom%(this.gestureStartDistance+p)),this.grabStartZoom<I.height){if(I.zoom>=I.height){$.H6P(41);var V=$.q7n(6,17,103);I.zoom=I.height-V}}else if(I.zoom<=I.height){$.D0J(142);var B=$.S40(14,6,12,447,6);I.zoom=I.height+B}this.draw()}this.updateChartAccessories()}}else if(3==i.length&&t.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;R=i[0].clientX,p=this.grabStartX-R,$.D0J(143);var W=$.S40(1,6,4,190,190);this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(p/W),this.grabEndPeriodicity<1&&($.D0J(21),this.grabEndPeriodicity=$.S40("1",0))}}else c=(m=i[0]).clientX,u=m.clientY,this.pinchingScreen=0,$.D0J(0),this.mousemoveinner($.S40(c,s),$.S40(u,o)),g=this.whichPanel(u),f=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=u<=this.top+f&&u>=f-this.xaxisHeight+this.top&&this.insideChart,this.overYAxis=!!g&&((c>=g.right||c<=g.left)&&this.insideChart);this.runAppend("touchmove",arguments)}}},t.ChartEngine.prototype.touchstart=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,L,E,H,I,j=N;if(i="touchst",i+="ar",i+="t",!t.ChartEngine.ignoreTouch&&(t.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=e.touches,this.changedTouches=e.changedTouches),!t.ChartEngine.resizingPanel&&(a=this.crosshairXOffset,r=this.crosshairYOffset,"pen"==this.touchPointerType&&(a=r=0),!this.runPrepend("touchstart",arguments)))){if(this.manageTouchAndMouse&&e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),this.hasDragged=!1,this.doubleFingerMoves=0,this.moveCount=0,this.twoFingerStart=!1,1==this.touches.length||2==this.touches.length){if(this.touchMoveTime=Date.now(),o=(c=this.touches[0]).clientX,l=c.clientY,this.moveA=o,this.moveB=-1,""===this.openDialog&&(u="do",u+="wn",this.registerPointerEvent({x:o,y:l,time:this.touchMoveTime},u),1!=this.changedTouches.length||this.isDoubleClick(!0)||t.extend(this.clicks,{s1MS:this.touchMoveTime,e1MS:-1,s2MS:-1,e2MS:-1,x:this.changedTouches[0].pageX,y:this.changedTouches[0].pageY})),d=this.container.getBoundingClientRect(),this.top=d.top,this.left=d.left,this.right=this.left+this.width,this.bottom=this.top+this.height,1==this.touches.length&&(p=this.backOutY(l),this.currentPanel=this.whichPanel(p)),this.currentPanel||(this.currentPanel=this.chart.panel),h=this.currentPanel,o>=this.left&&o<=this.right&&l>=this.top&&l<=this.bottom){this.insideChart=!0,m=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=l<=this.top+m&&l>=this.top+m-this.xaxisHeight,this.overYAxis=o>=this.left+h.right||o<=this.left+h.left,g=-1,this.cy=this.backOutY(l),this.cx=this.backOutX(o),this.crosshairTick=this.tickFromPixel(this.cx,h.chart),this.crosshairValue=this.adjustIfNecessary(h,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var O=0;O<this.drawingObjects.length;O++)if((f=this.drawingObjects[O]).highlighted){if(g<0&&(g=O),y=f.highlighted,this.findHighlights(!0),O==g&&f.highlighted&&!f.permanent)return void(-1==this.clicks.s2MS?this.activateRepositioning(f):this.findHighlights(!1,!0));this.anyHighlighted=!0,f.highlighted=y}}else{v=398187641,j.H6P(1),x=-j.S40(1,"403517388"),b=2;for(var Y=1;j.U6$(Y.toString(),Y.toString().length,29189)!==v;Y++)this.insideChart=!0,b+=2;j.U6$(b.toString(),b.toString().length,83258)!==x&&(this.insideChart=!0),this.insideChart=!1}if(C=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,this.layout.crosshair||this.layout.headsUp&&this.layout.headsUp.floating||C||!this.insideChart||this.touchNoPan){if(this.grabbingScreen=!1,this.insideChart&&h.subholder===e.target&&(F=this.currentVectorParameters.vectorType,t.Drawing&&F&&t.Drawing[F]&&(new t.Drawing[F]).dragToDraw))return this.userPointerDown=!0,t.ChartEngine.crosshairX=o,t.ChartEngine.crosshairY=l,h&&h.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(t.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(h,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(h,this.backOutX(o),this.backOutY(l)),void this.headsUpHR()}else{a=r=0;var{baselineHelper:R}=this;if(R.size&&this.findBaselineHandle(e,!0))return;if(this.controls.anchorHandles){S=Object.values(this.controls.anchorHandles),w=-896458940,j.H6P(10),D=-j.S40("412015577",9),k=2;for(var $=1;j.U6$($.toString(),$.toString().length,59047)!==w;$++)M=!0,j.H6P(21),k+=j.q7n("2",0);j.Z2Z(k.toString(),k.toString().length,94686)!==D&&(M=!1),M=!1;for(var z=0;z<S.length;z++){T=S[z];var{handle:q,sd:J}=T;A=this.resolveX(this.cx),_=this.resolveY(this.cy);var{left:V,top:B,right:W,bottom:U}=q.getBoundingClientRect();V-=10,W+=10,t.boxIntersects(V,B,W,U,A,_,A,_)&&(P="st",P+="x-g",P+="rab",T.highlighted=!0,this.repositioningAnchorSelector={sd:J},q.classList.add(P),M=!0),!0===T.highlighted&&(T.highlighted=!1)}if(M)return}for(n in this.panels)if((s=this.panels[n]).highlighted)return void this.grabHandle(s);this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),h.chart.spanLock=!1,this.yToleranceBroken=!1,j.H6P(0),this.grabStartX=j.q7n(o,a),j.D0J(0),this.grabStartY=j.q7n(l,r),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=h.chart.scroll,this.grabStartScrollY=h.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(h.chart),this.grabStartYAxis=this.whichYAxis(h,this.backOutX(o)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout((Q=this,function(){j.D0H(),Q.grabbingHand()}),100)}1===this.touches.length&&this.layout.crosshair&&!C&&h.subholder===e.target&&(j.H6P(0),this.mousemoveinner(j.S40(o,a),j.q7n(l,r)))}var Q,X;if(2==this.touches.length){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;for(n in E=(L=this.touches[1]).clientX,H=L.clientY,this.panels)if((s=this.panels[n]).highlighted)return void this.grabHandle(s);h=this.currentPanel,j.D0J(141),this.gestureStartDistance=Math.sqrt(j.q7n(l,E,l,H,H,E,o,o)),this.pt={x1:o,x2:E,y1:l,y2:H},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),h.chart.spanLock=!1,j.H6P(0),this.grabStartX=j.S40(o,a),j.H6P(0),this.grabStartY=j.q7n(l,r),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=h.chart.scroll,this.grabStartScrollY=h.yAxis.scroll,this.grabStartPanel=h,this.swipeStart&&this.swipeStart(h.chart),this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(h,this.backOutX((o+E)/2))||h.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,h),y2:this.valueFromPixel(this.pt.y2-this.top,h),t1:this.tickFromPixel(this.pt.x1-this.left,h.chart),t2:this.tickFromPixel(this.pt.x2-this.left,h.chart)},this.twoFingerStart=!0,setTimeout((X=this,j.D0H(),function(){X.grabbingHand()}),100)}else if(3==this.touches.length){if(!this.displayCrosshairs)return;I=this.touches[0].clientX,this.grabStartX=I,this.grabStartPeriodicity=this.layout.periodicity}1!=this.touches.length||this.layout.crosshair||(this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer()),this.runAppend(i,arguments)}},t.ChartEngine.prototype.touchend=function(e){var i,a,r,n,s,o,l,h,c,u,d,p;if(!t.ChartEngine.ignoreTouch&&(this.swipe.end=!0,t.isSurface||(this.touches=e.touches,this.changedTouches=e.changedTouches),!this.runPrepend("touchend",arguments))){if(this.cancelLongHold=!0,this.touches.length<=1&&(this.layout.crosshair||this.currentVectorParameters.vectorType)&&(this.touches.length&&this.twoFingerStart||(this.grabbingScreen=!1)),this.touches.length&&(this.grabStartX=-1,this.grabStartY=-1),i=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),this.touches.length){if(t.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout((m=this,N.D0H(),function(){N.a9S(),m.touching=!1}),500),t.ChartEngine.resizingPanel)return void this.releaseHandle();this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=!1,this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}var m;if(a=this.touches.length+1,1==this.changedTouches.length){if(this.repositioningDrawing)return r="v",r+="ec",r+="t",r+="or",this.changeOccurred(r),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),void(this.layout.crosshair||this.currentVectorParameters.vectorType||this.findHighlights(!1,!0));if(this.repositioningBaseline)return n="st",n+="x-gra",n+="b",this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove(n),(s=this.mainSeriesRenderer||{}).params&&s.params.baseline&&s.params.type,void this.draw();if(this.repositioningAnchorSelector)return t.Studies.repositionAnchor(this,this.repositioningAnchorSelector.sd),this.repositioningAnchorSelector=null,void Object.values(this.controls.anchorHandles).forEach(e=>{let{handle:t}=e;return N.D0H(),t.classList.remove("stx-grab")});if(o=Date.now(),""===this.openDialog&&e.changedTouches.length&&(l=e.changedTouches[0],this.registerPointerEvent({x:l.clientX,y:l.clientY,time:o},"up")),-1==this.clicks.s2MS){if(this.clicks.e1MS=o,h=this.currentVectorParameters.vectorType,t.Drawing&&h&&t.Drawing[h]&&(new t.Drawing[h]).dragToDraw||(this.clicks.e1MS-this.clicks.s1MS<750&&!this.longHoldTookEffect&&(!this.hasDragged||this.layout.crosshair)?setTimeout(this.touchSingleClick(a,this.clicks.x,this.clicks.y),this.doubleClickTime+1):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}),this.userPointerDown=!1,c=this.backOutY(this.changedTouches[0].pageY)+this.crosshairYOffset,u=this.backOutX(this.changedTouches[0].pageX)+this.crosshairXOffset,p=(d=this.currentPanel)&&d.subholder===e.target,t.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&p)return void this.drawingClick(d,u,c);this.isDoubleClick(!0)&&(p||this.overYAxis||this.overXAxis)&&this.touchDoubleClick(a,this.clicks.x,this.clicks.y)}else this.clicks.e2MS=o,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}else this.displayCrosshairs&&(-1==this.grabEndPeriodicity||isNaN(this.grabEndPeriodicity)||((t.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),this.grabEndPeriodicity=-1));this.changedTouches.length&&((!this.layout.crosshair&&!this.currentVectorParameters.vectorType&&1==a||this.twoFingerStart&&!i&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(!1,!0)),i&&this.continuousZoom&&(this.continuousZoom.execute(),this.continuousZoom.execute(!0))),this.touches.length||(this.twoFingerStart=!1),this.runAppend("touchend",arguments)}},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){var a;a=2,N.a9S();for(var r=1;1014480928!==N.U6$(r.toString(),r.toString().length,93281);r++)~i&&console.error(""),a+=2;1052536454!==N.U6$(a.toString(),a.toString().length,32804)&&+i&&console.error(""),i||console.error("touch feature requires activating movement feature."),i=!0}},M=e=>{var t,i=N;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.D0H(),t.Visualization=t.Visualization||function(e){if(!e)return"C","IQ.Visualization() missing attribu","t","es argument.",void console.log("CIQ.Visualization() missing attributes argument.");"function"==typeof e.renderFunction?(this.container=null,i.D0H(),this.attributes=e,this.data=null,this.object=null):console.log("CIQ.Visualization() missing renderFunction property in attributes.")},t.extend(t.Visualization.prototype,{destroy:function(e){var a;a=this.container,t.resizeObserver(a,null,a.resizeHandle),a.autoGenerated?(a.remove(),delete this.container):a.innerHTML="",e||(i.a9S(),this.attributes=null,this.container=null,this.data=null,this.object=null,this.destroy=this.draw=this.setAttributes=function(){},this.updateData=function(){i.a9S()})},draw:function(e){var a,r,n,s,o,l;if(i.D0H(),"str","ing","o","b","jec","t",this.data&&"object"==typeof this.data){if("string"==typeof(r=(a=this.attributes).container||this.container)&&(r=document.querySelector(r)),r||((r=document.createElement("div")).style.height=r.style.width="300px",document.body.appendChild(r),r.autoGenerated=!0),a.stx&&(n=a.stx.chart.canvasShim,a.useCanvasShim&&n&&n!==r&&n!==r.parentNode&&(r.autoGenerated||((r=r.cloneNode()).id="",r.autoGenerated=!0),n.appendChild(r))),this.container&&this.container!==r&&this.destroy(!0),r.resizeHandle||(s=function(e){return i.a9S(),function(){e.data&&e.container&&document.body.contains(e.container)&&e.draw.call(e,!0)}},r.resizeHandle=t.resizeObserver(r,s(this),null,100)),this.container=r,this.attributes=a,o=(a=t.ensureDefaults({container:this.container},this.attributes)).renderFunction(Object.values(this.data).sort((function(e,t){return i.D0H(),e.index<t.index?-1:e.index>t.index?1:0})),a)){698908642,530697098,l=2;for(var h=1;698908642!==i.U6$(h.toString(),h.toString().length,82003);h++)a.id&&(o.id=a.id),l+=2;530697098!==i.U6$(l.toString(),l.toString().length,61980)&&a.id&&(o.id=a.id),(e||a.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(o))}this.attributes=a,this.object=o}else console.log("CIQ.Visualization.draw() missing data.")},setAttributes:function(e,t){var a,r,n;if("contain","er",a=["renderFunction","container","stx","useCanvasShim","id","forceReplace"],r=!1,i.a9S(),n=e,"string"==typeof e&&((n={})[e]=t),"object"==typeof n)for(var s in n)this.attributes[s]!==n[s]&&-1!==a.indexOf(s)&&(r=!0),this.attributes[s]=n[s];this.draw(r)},updateData:function(e,a){var r,n,s;for(r in"up","d","at","e","r","epl","a","ce",s=Array.isArray(e)?e.reduce((function(e,t){return i.D0H(),e[t.name]=t,e}),{}):t.shallowClone(e))n=s[r],"[object Object]"!==Object.prototype.toString.call(n)&&(s[r]={value:n}),s[r].name||(s[r].name=r),s[r].value||(s[r].value=0);switch(a||(a="replace"),a.toLowerCase()){case"delete":for(r in s)delete this.data[r];break;case"replace":this.data={};case"update":case"add":for(r in s)for(var o in"[ob","j","ect Nu","mber]",this.data[r]||(this.data[r]={name:r}),n=s[r].value,"[object Number]"==Object.prototype.toString.call(n)?("u","p","d","ate",this.data[r].value&&"update"!=a||(this.data[r].value=0),this.data[r].value+=n):this.data[r].value=n,s[r])"value"!==o&&(this.data[r][o]=s[r][o]);break;default:console.log("Invalid or missing action.  Valid values are 'add', 'delete', 'replace', or 'update'.")}return this.draw(this.attributes.forceReplace),this}}),t.ChartEngine.prototype.embedVisualization=function(e){return e||(e={}),e.stx=this,e.useCanvasShim=!0,i.a9S(),e.translator=function(t){return i.a9S(),e.stx.translateIf(t)},new t.Visualization(e)}},T=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Median P","rice",t.Studies.calculateTypicalPrice=function(e,t){var i,a,r,n,s,o=N;if(i=t.chart.scrubbed,a=t.days,i.length<a+1)t.overlay||(t.error=!0);else{for(var l in r=t.name,t.outputs)o.H6P(37),r=o.S40(r,l," ");n="h",n+="l",n+="c/3","Med Price"==t.type?n="hl/2":"Weighted Close"==t.type&&(n="hlcc/4"),s=0,t.startFrom<=a&&(o.D0J(28),t.startFrom=o.q7n("0",32));for(var h=t.startFrom;h<i.length;h++){if(h&&i[h-1][r])o.H6P(7),s=i[h-o.S40(2,3)][r]*a;s+=i[h][n],h>=a&&(o.H6P(7),s-=i[o.q7n(a,h)][n],o.H6P(14),i[h][r]=o.q7n(a,s))}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Med Price":{name:"Median Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):("medianPrice feature requires first activating studies fea","ture.",console.error("medianPrice feature requires first activating studies feature."))},A=e=>{var t,i=N;i.D0H(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Price Rat","e of Change",t.Studies.calculateRateOfChange=function(e,t){var a,r,n,s,o,l,h;if("V","olu","me","C","lo","s","e","f","ie","l","d",(a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{for(var c in(r=t.inputs.Field)&&"field"!=r||(r="Close"),t.parameters.isVolume&&(r="Volume"),n=t.name,t.outputs)i.H6P(37),n=i.S40(n,c," ");(s=t.inputs["Center Line"])?s=parseInt(s,10):(i.D0J(10),s=i.S40("0",0));for(var u=Math.max(t.startFrom,t.days);u<a.length;u++)"M","oment","um","ob","j","ect",(o=a[u][r])&&"object"==typeof o&&(o=o[t.subField]),(l=a[u-t.days][r])&&"object"==typeof l&&(l=l[t.subField]),"Momentum"==t.type?(i.D0J(36),a[u][n]=i.S40(s,o,l)):(h=l)&&(i.H6P(144),a[u][n]=i.q7n(o,1,h,s,100))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price ROC":{name:"Price Rate of Change",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14,Field:"field"}},Momentum:{name:"Momentum Indicator",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0}})):console.error("momentum feature requires first activating studies feature.")},_=e=>{var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Pric","e Relative",t.Studies.initPriceRelative=function(e,i,a,r,n,s){var o,l;return l=[(o=t.Studies.initializeFN(e,i,a,r,n,s)).inputs["Comparison Symbol"].toUpperCase()],t.Studies.fetchAdditionalInstruments(e,o,l),o},t.Studies.calculatePriceRelative=function(e,i){var a,r,n,s,o,l;if(a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),N.a9S(),(n={})[s=(s=e.chart.symbol||"").replace(/[=+\-*\\%]/g,"")]=a.slice(i.startFrom),n[s].length){s!=r&&(n[r]=null),N.D0J(73),o=t.computeEquationChart(N.S40("[","]",r,"]/[",s),n),l=0;for(var h=i.startFrom;h<a.length&&l<o.length;h++){for(;l<o.length&&a[h].DT.getTime()>o[l].DT.getTime();)l++;a[h].DT.getTime()<o[l].DT.getTime()||(a[h]["Result "+i.name]=o[l].Close,l++)}}},t.Studies.displayVsComparisonSymbol=function(e,i,a){var r,n,s,o;if(r=i.inputs["Comparison Symbol"].toUpperCase(),e.getSeries({symbol:r,chart:i.chart}).length){n={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:i.study.centerline,yAxis:i.getYAxis(e),gapDisplayStyle:!0},N.D0H(),s=n.yAxis?n.yAxis.flipped:e.panels[i.panel].yAxis.flipped,o=.3,!i.highlight&&e.highlightedDraggable&&(o*=.3);for(var l=a.length-1;l>=0;l--)if(a[l]&&a[l][r])return t.Studies.displaySeriesAsLine(e,i,a),void((i.study.centerline||0===i.study.centerline)&&(i.outputs.Gain&&t.preparePeakValleyFill(e,t.extend(n,{direction:s?-1:1,color:t.Studies.determineColor(i.outputs.Gain),opacity:o})),i.outputs.Loss&&t.preparePeakValleyFill(e,t.extend(n,{direction:s?1:-1,color:t.Studies.determineColor(i.outputs.Loss),opacity:o}))))}else e.displayErrorAsWatermark(i.panel,e.translateIf(i.study.name)+": "+e.translateIf("Not Available"))},t.Studies.fetchAdditionalInstruments=function(e,i,a,r){var n,s,o,l,h,c;if(e.quoteDriver)for(n=e.panels[i.panel].chart,i.symbols=a,s=0;s<a.length;s++)o=l=a[s],"object"==typeof l?o=l.symbol:l={symbol:o},h={symbol:o,symbolObject:l,bucket:"study",studyName:i.name,chartName:n.name,action:"add-study"},t.extend(h,r),c=h.loadData,e.currentlyImporting&&(h.loadData=!1),i.series||(i.series={}),i.series[o]=e.addSeries(null,h,u),i.series[o].parameters.loadData=c;else console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");function u(){e.createDataSet(),e.draw()}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"P Rel":{name:"Price Relative",initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePriceRelative,centerline:0,inputs:{"Comparison Symbol":"SPY"},deferUpdate:!0}})):console.error("priceRelative feature requires first activating studies feature.")},P=e=>{var t,i=N;i.a9S(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#8","5c","99e","#","FF","0000","V","W","A","P","h","h:","mm:","ss","#fff","69e","#e1e1e","1",t.Studies.calculateVWAP=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if("AVWA","P",r="AVWAP"==a.type,n=a.chart.scrubbed,i.D0H(),r||!t.ChartEngine.isDailyInterval(e.layout.interval)){if(s="hl",s+="c/",s+="3",r&&((s=a.inputs.Field)&&"field"!=s||(s=a.inputs.Field="hlc/3",e.changeOccurred("layout"))),o=null,l=0,h=0,c=0,u=!1,a.startFrom>1&&("_","VxP ","_V"," ",l=n[a.startFrom-1]["_V "+a.name]||0,h=n[a.startFrom-1]["_VxP "+a.name]||0,c=n[a.startFrom-1]["_VxP2 "+a.name]||0),r){if("Anc","hor ","D","ate",(d=a.inputs["Anchor Date"].replace(/-/g,"")).search(/^\d{8}$/))return void(a.error="Invalid Anchor Date");(p=a.inputs["Anchor Time"].replace(/:/g,"")).search(/^\d{4,6}$/)||(d+=p),d=t.strToDateTime(d.replace(/\D/g,"")),!a.startFrom&&d>=n[0].DT&&(a.startFrom=e.tickFromDate(d,e.chart,null,!0)),a.inputs["Anchor Selector"]?t.Studies.initAnchorHandle(e,a):t.Studies.removeAnchorHandle(e,a)}for(var x=a.startFrom;x<n.length;x++)if("_","SDVWAP ",r||(null===o&&(o=t.Studies.getMarketOffset({stx:e,localQuoteDate:n[x].DT,shiftToDateBoundary:!0})),n[x-1]&&n[x-1].DT&&(m=new Date(new Date(+n[x].DT).setMilliseconds(n[x].DT.getMilliseconds()+o)),new Date(new Date(+n[x-1].DT).setMilliseconds(n[x-1].DT.getMilliseconds()+o)).getDate()!=m.getDate()&&e.chart.market.isMarketDate(m)&&(o=null,l=h=c=0))),g=n[x][s],f=n[x].Volume,r&&!f&&(f=1),l+=f,i.D0J(1),h+=i.q7n(g,f),i.H6P(145),c+=i.q7n(f,g,g),r||l){n[x]["_V "+a.name]=l,n[x]["_VxP "+a.name]=h,n[x]["_VxP2 "+a.name]=c,y=n[x]["_SDVWAP "+a.name]=Math.sqrt(Math.max(0,c/l-Math.pow(h/l,2))),i.D0J(14),v=n[x]["VWAP "+a.name]=i.S40(l,h);for(var b=1;b<=3;b++)"-"," ",i.H6P(45),n[x]["SDVWAP"+b+"+ "+a.name]=i.S40(b,y,v),i.H6P(146),n[x]["SDVWAP"+b+"- "+a.name]=i.S40(b,y,v);u=!0}for(var C=1;C<=3;C++)"",")",a.inputs["Display "+C+" Standard Deviation ("+C+")"]&&(" Sta","ndard ","Deviati","on (",i.D0J(48),a.outputMap["SDVWAP"+C+"+ "+a.name]=i.S40(")",C," Standard Deviation (",C),i.H6P(48),a.outputMap["SDVWAP"+C+"- "+a.name]=i.S40(")",C," Standard Deviation (",C));r||u||(a.error="VWAP Requires Volume")}else a.error="VWAP is Intraday Only"},t.Studies.initAnchoredVWAP=function(e,a,r,n,s,o){var l;if("Anc","hor Ti","me",!r["Anchor Date"]&&!r["Anchor Time"])for(var{dataSegment:h}=e.chart,c=0;h&&c<h.length;c++)if(h[c]){"YYYY","-MM-dd","Anch","or Date";var{DT:u}=h[c];r["Anchor Date"]=t.dateToStr(u,"YYYY-MM-dd"),r["Anchor Time"]=t.dateToStr(u,"HH:mm:ss");break}return l=t.Studies.initializeFN(e,a,r,n,s,o),i.a9S(),l},t.Studies.displayVWAP=function(e,i,a){var r,n,s,o,l,h,c;t.Studies.displaySeriesAsLine(e,i,a),r=i.inputs["Display 1 Standard Deviation (1)"],n=i.inputs["Display 2 Standard Deviation (2)"],s=i.inputs["Display 3 Standard Deviation (3)"],(r||n||s)&&i.inputs.Shading&&("V","W","AP"," ",o=e.panels[i.panel],l={opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:o.name!=i.chart.name,yAxis:i.getYAxis(e)},!i.highlight&&e.highlightedDraggable&&(l.opacity*=.3),h="VWAP "+i.name,c="VWAP "+i.name,r&&("S","D","VWAP1+ ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1+ "+i.name,bottomBand:h,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1+ "+i.name]])},l)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1- "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1- "+i.name]])},l)),h="SDVWAP1+ "+i.name,c="SDVWAP1- "+i.name),n&&(t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2+ "+i.name,bottomBand:h,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2+ "+i.name]])},l)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2- "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2- "+i.name]])},l)),h="SDVWAP2+ "+i.name,c="SDVWAP2- "+i.name),s&&(t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3+ "+i.name,bottomBand:h,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3+ "+i.name]])},l)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3- "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3- "+i.name]])},l)))),i.anchorHandle&&t.Studies.displayAnchorHandleAndLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{AVWAP:{name:"Anchored VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,initializeFN:t.Studies.initAnchoredVWAP,removeFN:t.Studies.removeAnchorHandle,inputs:{Field:"field","Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1,"Anchor Selector":!0},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"},parameters:{init:{opacity:.2}},attributes:{"Anchor Date":{placeholder:"yyyy-mm-dd"},"Anchor Time":{placeholder:"hh:mm:ss",step:1}}},VWAP:{name:"VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"},parameters:{init:{opacity:.2}}}})):console.error("vwap feature requires first activating studies feature.")},F=e=>{var t,i=N;i.D0H(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateZigZag=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y;function v(e,i){for(var r=e+1;r<i;r++)"R","es","ul","t ",a[r]["ShadowResult "+t.name]=(a[i]["Result "+t.name]-a[e]["Result "+t.name])*(r-e)/(i-e)+a[e]["Result "+t.name],delete a[r]["Result "+t.name]}if("H","i","g","h","L","o","w",(a=t.chart.scrubbed)&&a.length){r=t.highLowChart,n=null,s=null,o=t.inputs["Distance(%)"],l=0,h=0,c=0,u=null,d=null,p=0;for(var x=Math.min(a.length-1,t.startFrom);x>=0;x--)if("_sta","t","e ",p=x,a[x]["_state "+t.name]){n=(m=a[x]["_state "+t.name])[0],s=m[1],l=m[2],h=m[3],c=m[4],u=m[5],d=m[6];break}for(var b=p;b<a.length;b++){if(g=a[b][r?"High":"Close"],f=a[b][r?"Low":"Close"],null===s||s<g)if(s=g,l<0&&(n=f),i.D0J(147),u=i.q7n(100,o,s,1),l>-1){if(null!==d&&s>d){"L","o","w","Resu","lt ",a[h]["Result "+t.name]=a[h][r?"Low":"Close"],v(c,h),l=-1,n=f,c=h,h=b;continue}}else h=b;if(null===n||n>f)if(n=f,l>0&&(s=g),i.D0J(148),d=i.S40(o,1,n,100),l<1){if(null!==u&&n<u){a[h]["Result "+t.name]=a[h][r?"High":"Close"],v(c,h),l=1,s=g,c=h,h=b;continue}}else h=b}a[h]["Result "+t.name]=a[h][r?1==l?"Low":"High":"Close"],a[h]["_state "+t.name]=[n,s,l,h,c,u,d],v(c,h),i.H6P(52);var C=i.q7n(59,3,20);for(y=a.length-C;y>h;){if(a[y].Close||0===a[y].Close){"Hi","g","h","Resul","t"," ",a[y]["Result "+t.name]=a[y][r?1==l?"High":"Low":"Close"];break}y--}i.a9S(),v(h,y)}},t.Studies.displayZigZag=function(e,a,r){var n,s,o,l,h;n=e.chart.highLowBars,a.highLowChart!=n&&(a.highLowChart=n,a.startFrom=0,a.study.calculateFN(e,a)),s=e.chart;for(var c=0;c<r.length;c++)(o=r[c])&&("R","esult ",o["_shadowCopy "+a.name]&&(delete o["Result "+a.name],delete o["_shadowCopy "+a.name]),o["Result "+a.name]||("R","esul","t"," ",o.transform&&delete o.transform["Result "+a.name]));l=r[0],i.H6P(149);var u=i.S40(19,18,7,34,9);h=r[r.length-u],l&&l["ShadowResult "+a.name]&&("ShadowRe","su","l","t ",l["Result "+a.name]=l["ShadowResult "+a.name],l.transform&&(l.transform["Result "+a.name]=s.transformFunc(e,s,l["ShadowResult "+a.name])),i.H6P(1),l["_shadowCopy "+a.name]=i.q7n(1,"1")),h&&h["ShadowResult "+a.name]&&("Re","sul","t ",h["Result "+a.name]=h["ShadowResult "+a.name],h.transform&&(h.transform["Result "+a.name]=s.transformFunc(e,s,h["ShadowResult "+a.name])),h["_shadowCopy "+a.name]=1),t.Studies.displaySeriesAsLine(e,a,r)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ZigZag:{name:"ZigZag",overlay:!0,seriesFN:t.Studies.displayZigZag,calculateFN:t.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:.1,step:.1}}}})):console.error("zigzag feature requires first activating studies feature.")},L={CIQ:E.c,SplinePlotter:E.d,timezoneJS:E.e,$$:E.a,$$$:E.b},"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||L.CIQ.activateImports(n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,C,S,w,D,k,M,T,A,_,P,F,null)}).call(this,i(52))}}]);
//# sourceMappingURL=chartiq-352e29.smartcharts.js.map