"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3973],{22643:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var a=n(32735),r=n(68461),i=n(44850),l=n(68722),o=n(42671),c=n(59472);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,l,o=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(e){u=!0,r=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw r}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const m=(0,c.observer)((function(){var e=(0,c.useStore)(),t=e.ui,n=e.client,s=n.logout,m=n.is_logged_in,d=t.is_update_email_modal_visible,f=t.toggleUpdateEmailModal,g=n.new_email.system_email_change,h=n.verification_code.system_email_change,_=u(a.useState(!1),2),p=_[0],y=_[1],b=u(a.useState(null),2),E=b[0],v=b[1],w={change_email:"update",new_email:g,verification_code:h},S=function(){o.WS.changeEmail(w).then((function(e){y(!0),e.error&&(v(e.error.message),s())}))};return a.useEffect((function(){m?o.WS.wait("authorize").then((function(){S()})):S()}),[]),a.createElement(r.Modal,{is_open:d,has_close_icon:!1,toggleModal:f,width:"440px",minHeight:"400px"},p?a.createElement("div",{className:"change-email-update"},!E&&a.createElement(r.Icon,{className:"change-email-update__modal-icon",icon:"IcEmailVerified",size:128}),a.createElement(r.Text,{className:"change-email-update__modal-title",weight:"bold",size:"s"},a.createElement(i.Localize,{i18n_default_text:E?"Failed":"Success!"})),a.createElement(r.Text,{className:"change-email-update__modal-description",size:"xs"},a.createElement(i.Localize,{i18n_default_text:E||"Your email address has changed.<0 />Now, log in with your new email address.",components:[a.createElement("br",{key:0})]})),a.createElement(r.Modal.Footer,{className:"change-email-update__footer"},a.createElement(r.Button,{onClick:function(){f(!1),m?s().then((function(){(0,l.redirectToLogin)(!1,(0,i.getLanguage)(),!1)})):(0,l.redirectToLogin)(!1,(0,i.getLanguage)(),!1)},has_effect:!0,text:(0,i.localize)("Log in"),primary:!0,large:!0}))):a.createElement(r.Loading,{is_fullscreen:!1}))}))}}]);
//# sourceMappingURL=core.update-email-modal.122f3fee23db2621b46f.js.map