"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1301],{95302:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var r=n(32735),i=n(61055),a=n(60216),s=n.n(a),o=n(47108),c=n(64259),l=n(44850),u=n(42671),d=n(15736),p=n(77178);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}var f=function(e){var t=e.class_prefix,n=e.errors,a=e.touched,s=e.setFieldValue,c=e.citizenship_list;return r.createElement("div",{className:"".concat(t,"__residence-selection")},r.createElement(i.Field,{name:"citizenship"},(function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(o.Autocomplete,_({},t,{autoComplete:"off",input_id:"dt_core_set-citizenship-form_signup-citizenship-select",type:"text",label:(0,l.localize)("Citizenship"),error:a.citizenship&&n.citizenship,required:!0,list_items:c,onItemSelection:function(e){var t=e.value,n=e.text;return s("citizenship",t?n:"",!0)}})))})),r.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",color:"less-prominent"},r.createElement(l.Localize,{i18n_default_text:"Select your citizenship/nationality as it appears on your passport or other government-issued ID."})))};f.propTypes={class_prefix:s().string,citizenship_list:s().arrayOf(s().object),errors:s().object,setFieldTouched:s().func,setFieldValue:s().func,touched:s().object};const m=f;var b=n(40841),g=n.n(b),v=n(94500),y=function(e){var t=e.children;return r.createElement("div",{className:"signup-separator-container"},t)};y.Line=function(e){var t=e.is_invisible;return r.createElement("div",{className:g()("signup-separator-container__line",{"signup-separator-container__line--invisible":t})})};const h=y;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}const E=(0,v.observer)((function(e){var t=e.api_error,n=e.errors,a=e.handleBlur,s=e.handleChange,u=e.isModalVisible,d=e.isSubmitting,_=e.touched,f=e.pw_input,m=e.setFieldTouched,b=e.updatePassword,y=e.values,E=(0,v.useStore)().ui.is_mobile;return r.useEffect((function(){p.Analytics.trackEvent("ce_virtual_signup_form",{action:"password_screen_opened",form_name:E?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"})}),[]),r.createElement("div",{className:"account-signup__password-selection"},r.createElement(o.Text,{as:"p",size:E?"xs":"s",weight:"bold",className:"account-signup__heading",align:"center"},r.createElement(l.Localize,{i18n_default_text:"Keep your account secure with a password"})),r.createElement(i.Field,{name:"password"},(function(e){var t=e.field;return r.createElement(o.PasswordMeter,{input:f,has_error:!(!_.password||!n.password),custom_feedback_messages:(0,c.getErrorMessages)().password_warnings},r.createElement(o.PasswordInput,w({},t,{autoComplete:"new-password",className:"account-signup__password-field",label:(0,l.localize)("Create a password"),error:_.password&&n.password,required:!0,value:y.password,onBlur:a,onChange:function(e){var t=e.target;m("password",!0),t&&b(t.value),s(e)},input_id:"dt_core_account-signup-modal_account-signup-password-field"})))})),r.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",align:"center"},r.createElement(l.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),r.createElement(h,null),t?r.createElement(r.Fragment,null,r.createElement(o.Text,{as:"p",size:"xxs",color:"loss-danger",className:"account-signup__subtext account-signup__subtext--error",align:"center"},t),r.createElement("div",{className:"account-signup__error-wrapper"},r.createElement(o.Button,{large:!0,secondary:!0,text:(0,l.localize)("Cancel"),type:"button",onClick:function(){return u(!1)}}),r.createElement(o.Button,{large:!0,primary:!0,text:(0,l.localize)("Create new account"),type:"button",onClick:function(){return(0,c.redirectToSignUp)()}}))):r.createElement("div",{className:"account-signup__footer"},r.createElement(o.Button,{className:g()("account-signup__btn",{"account-signup__btn--disabled":!y.password||n.password||d}),id:"dt_core_account-signup-modal_submit-btn",type:"submit",is_disabled:!y.password||!!n.password||d,text:(0,l.localize)("Start trading"),large:!0,primary:!0})))}));var x=n(99727);const S=function(e,t){var n={};if((0,c.validLength)(e.password,{min:8,max:25})?(0,c.validPassword)(e.password)||(n.password=(0,c.getErrorMessages)().password()):n.password=(0,l.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.residence){var r=t.findIndex((function(t){return t.text.toLowerCase()===e.residence.toLowerCase()}));-1!==r&&"DISABLED"!==t[r].disabled||(n.residence=(0,l.localize)("Unfortunately, {{website_name}} is not available in your country.",{website_name:c.website_name}))}else n.residence=!0;e.citizenship?-1===t.findIndex((function(t){return t.text.toLowerCase()===e.citizenship.toLowerCase()}))&&(n.citizenship=!0):n.citizenship=!0;return n};function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===z(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.enableApp,n=e.is_mobile,a=e.isModalVisible,s=e.clients_country,d=e.onSignup,_=e.residence_list,f=A(r.useState(!1),2),b=f[0],g=f[1],v=A(r.useState(!0),2),y=v[0],h=v[1],w=A(r.useState(""),2),z=w[0],O=w[1],C=r.useRef(),N=A(r.useState(""),2),k=N[0],F=N[1],T=A(r.useState(!1),2),P=T[0],L=T[1],V=A(r.useState(!1),2),I=V[0],M=V[1],D=function(e){var t,n;return e&&"br"===(null===(t=_[R(e)])||void 0===t||null===(n=t.value)||void 0===n?void 0:n.toLowerCase())},B=function(e,t){return!((!D(e.residence)||I)&&e.residence&&!t.residence&&e.citizenship&&!t.citizenship)},q=function(e){F(e)};r.useEffect((function(){u.WS.wait("website_status","residence_list").then((function(){s&&_&&O((0,c.getLocation)(_,s,"text")),h(!1)})),p.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_confirmed",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"}),p.Analytics.trackEvent("ce_virtual_signup_form",{action:"country_selection_screen_opened",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"})}),[]);var R=function(e){return _.findIndex((function(t){return t.text.toLowerCase()===(null==e?void 0:e.toLowerCase())}))},U=function(e){e?(g(e),p.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_flow_error",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default",error_message:e})):(a(!1),c.SessionStore.remove("signup_query_param"),t(),p.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_done",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"}))};return r.createElement("div",{className:"account-signup"},y?r.createElement(o.Loading,{is_fullscreen:!1}):r.createElement(i.Formik,{initialValues:{citizenship:"",password:"",residence:""},validate:function(e){return S(e,_)},onSubmit:function(e){var t=R(e.residence),n=R(e.citizenship),r=j(j({},e),{},{residence:_[t].value,citizenship:_[n].value});d(r,U)},residence_list:_},(function(e){var t=e.isSubmitting,s=e.handleBlur,c=e.errors,u=e.handleChange,d=e.values,p=e.setFieldValue,f=e.setFieldTouched,g=e.touched;return r.createElement(i.Form,null,P?r.createElement(E,{api_error:b,errors:c,handleBlur:s,handleChange:u,isModalVisible:a,isSubmitting:t,touched:g,pw_input:k,setFieldTouched:f,updatePassword:q,values:d}):r.createElement("div",{className:"account-signup__location-selection"},r.createElement(o.Text,{as:"h1",size:n?"xs":"s",weight:"bold",className:"account-signup__heading"},(0,l.localize)("Select your country and citizenship:")),r.createElement(x.Z,{class_prefix:"account-signup",errors:c,touched:g,onResidenceSelectionChanged:function(){return M(!1)},setFieldTouched:f,setFieldValue:p,residence_list:_,default_value:z,history_value:C.current}),r.createElement(m,{class_prefix:"account-signup",errors:c,touched:g,setFieldTouched:f,setFieldValue:p,citizenship_list:_}),D(d.residence)&&r.createElement(o.Checkbox,{checked:I,onChange:function(){return M(!I)},className:"account-signup__checkbox",classNameLabel:"account-signup__label",label:(0,l.localize)("I hereby confirm that my request for opening an account with Deriv to trade OTC products issued and offered exclusively outside Brazil was initiated by me. I fully understand that Deriv is not regulated by CVM and by approaching Deriv I intend to set up a relation with a foreign company.")}),r.createElement("div",{className:"account-signup__footer"},r.createElement(o.Button,{className:"account-signup__btn",is_disabled:B(d,c),type:"button",onClick:function(){C.current=d,L(!0)},primary:!0,large:!0,text:(0,l.localize)("Next")}))))})))};k.propTypes={clients_country:s().string,enableApp:s().func,onSignup:s().func,residence_list:s().array,is_mobile:s().bool,isModalVisible:s().func};var F=function(e){var t=e.enableApp,n=e.disableApp,i=e.clients_country,a=e.is_loading,s=e.is_mobile,c=e.is_visible,l=e.is_logged_in,u=e.logout,d=e.onSignup,p=e.residence_list,_=e.toggleAccountSignupModal;return r.useEffect((function(){c&&l&&u()}),[c,l,u]),r.createElement(o.Dialog,{className:"account-signup__dialog",is_visible:c,disableApp:n,enableApp:t,is_loading:a||!p.length,is_mobile_full_width:!1},r.createElement(k,{clients_country:i,onSignup:d,residence_list:p,is_mobile:s,isModalVisible:_,enableApp:t}))};F.propTypes={clients_country:s().string,disableApp:s().func,enableApp:s().func,is_loading:s().bool,is_logged_in:s().bool,is_mobile:s().bool,is_visible:s().bool,logout:s().func,onSignup:s().func,residence_list:s().arrayOf(s().object),toggleAccountSignupModal:s().func};const T=(0,d.$j)((function(e){var t=e.ui,n=e.client;return{is_visible:t.is_account_signup_modal_visible,toggleAccountSignupModal:t.toggleAccountSignupModal,enableApp:t.enableApp,disableApp:t.disableApp,is_loading:t.is_loading,is_mobile:t.is_mobile,onSignup:n.onSignup,is_logged_in:n.is_logged_in,residence_list:n.residence_list,clients_country:n.clients_country,logout:n.logout}}))(F)},99727:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(32735),i=n(61055),a=n(60216),s=n.n(a),o=n(47108),c=n(44850);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var u=function(e){var t,n=e.children,a=e.class_prefix,s=void 0===a?"set-residence":a,u=e.default_value,d=e.history_value,p=e.errors,_=e.onResidenceSelectionChanged,f=e.touched,m=e.setFieldTouched,b=e.setFieldValue,g=e.residence_list;return r.useEffect((function(){u&&(m("residence",!0),b("residence",u,!0))}),[]),r.createElement("div",{className:"".concat(s,"__residence-selection")},r.createElement(i.Field,{name:"residence"},(function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(o.Autocomplete,l({},t,{autoComplete:"off",input_id:"dt_core_set-residence-form_signup-residence-select",type:"text",label:(0,c.localize)("Country of residence"),historyValue:d,error:f.residence&&p.residence,required:!0,list_items:g,onItemSelection:function(e){var t=e.value,n=e.text;b("residence",t?n:"",!0),null==_||_()}})))})),!(null!=p&&null!==(t=p.residence)&&void 0!==t&&t.length)&&r.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",color:"less-prominent"},r.createElement(c.Localize,{i18n_default_text:"Country of residence is where you currently live."})),r.createElement("div",{className:"".concat(s,"__button_wrapper")},n))};u.propTypes={children:s().object,class_prefix:s().string,default_value:s().string,history_value:s().string,errors:s().object,onResidenceSelectionChanged:s().func,residence_list:s().arrayOf(s().object),setFieldTouched:s().func,setFieldValue:s().func,touched:s().object};const d=u}}]);
//# sourceMappingURL=core.account-signup-modal.f552693fba3bb981bc25.js.map