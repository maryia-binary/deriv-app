(self.webpackChunk=self.webpackChunk||[]).push([[9418],{60946:(e,t,a)=>{var n,l,r,i;self,e.exports=(n=a(68461),l=a(68722),r=a(44850),i=a(32735),(()=>{"use strict";var e={"@deriv/components":e=>{e.exports=n},"@deriv/shared":e=>{e.exports=l},"@deriv/translations":e=>{e.exports=r},react:e=>{e.exports=i}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{a.d(o,{default:()=>i});var e=a("react"),t=a.n(e),n=a("@deriv/translations"),l=a("@deriv/components"),r=a("@deriv/shared");const i=function(e){var a=e.identifier_title,i=e.is_modal_when_mobile,o=void 0!==i&&i,c=e.is_open,s=e.has_live_chat,m=void 0!==s&&s,u=e.onClickSendEmail,d=e.onClose,_=m?t().createElement(n.Localize,{i18n_default_text:"Still didn't get the email? Please contact us via <0>live chat.</0>",components:[t().createElement("span",{className:"send-email-template__footer-live-chat",key:0,onClick:function(){var e;d(),null===(e=window.LiveChatWidget)||void 0===e||e.call("maximize")}},t().createElement(l.Popover,{className:"send-email-template__footer-live-chat__link",classNameBubble:"help-centre__tooltip",alignment:"top",message:(0,n.localize)("Live chat"),zIndex:"9999"}))]}):null,f=t().createElement(l.SendEmailTemplate,{className:"sent-email",subtitle:function(){var e="";switch(a){case r.CFD_PLATFORMS.DXTRADE:e=t().createElement(n.Localize,{i18n_default_text:"Please click on the link in the email to change your <0>{{platform_name_dxtrade}}</0> password.",components:[t().createElement("span",{className:"send-email-template__subtitle-platform",key:0})],values:{platform_name_dxtrade:(0,r.getPlatformSettings)("dxtrade").name}});break;case r.CFD_PLATFORMS.MT5:e=(0,n.localize)("Please click on the link in the email to change your Deriv MT5 password.");break;case"Google":case"Facebook":e=(0,n.localize)("Check your {{ identifier_title }} account email and click the link in the email to proceed.",{identifier_title:a});break;case"Change_Email":e=(0,n.localize)("Check your email and click the link in the email to proceed.");break;default:e=(0,n.localize)("Please click on the link in the email to reset your password.")}return e}(),title:(0,n.localize)("We’ve sent you an email"),lbl_no_receive:(0,n.localize)("Didn't receive the email?"),txt_resend:(0,n.localize)("Resend email"),txt_resend_in:(0,n.localize)("Resend email in"),onClickSendEmail:u,live_chat:_},[{key:"email_spam",icon:"IcEmailSpam",content:(0,n.localize)("The email is in your spam folder (Sometimes things get lost there).")},{key:"wrong_email",icon:"IcEmail",content:(0,n.localize)("You accidentally gave us another email address (Usually a work or a personal one instead of the one you meant).")},{key:"wrong_typo",icon:"IcEmailTypo",content:(0,n.localize)("The email address you entered had a mistake or typo (happens to the best of us).")},{key:"email_firewall",icon:"IcEmailFirewall",content:(0,n.localize)("We can’t deliver the email to this address (Usually because of firewalls or filtering).")}].map((function(e){return t().createElement("div",{className:"sent-email__content",key:e.key},t().createElement(l.Icon,{icon:e.icon,size:32}),t().createElement(l.Text,{size:"xxs",as:"p"},e.content))})));return(0,r.isMobile)()&&!o?t().createElement(l.MobileDialog,{portal_element_id:"modal_root",title:(0,n.localize)("We’ve sent you an email"),wrapper_classname:"mt5-email-sent",visible:c,onClose:d,has_content_scroll:!0},f):t().createElement(l.Modal,{className:"sent-email__modal",is_open:c,has_close_icon:!0,should_header_stick_body:!0,title:"",toggleModal:d,width:"440px"},t().createElement(l.Div100vhContainer,{className:"account__scrollbars_container-wrapper",is_disabled:(0,r.isDesktop)(),height_offset:"80px"},t().createElement(l.Modal.Body,null,t().createElement("div",{onClick:d,className:"send-email-template__close","data-testid":"dt_send_email_template_close"},t().createElement(l.Icon,{icon:"IcCross"})),f)))}})(),o.default})())},91991:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var n=a(32735),l=a(40841),r=a.n(l),i=a(61055),o=a(68461),c=a(68722),s=a(44850),m=a(60946),u=a.n(m),d=a(42671),_=a(60216),f=a.n(_);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return(t=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,l,r,i,o=[],c=!0,s=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=r.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,l=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw l}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var E=function(e){var t=e.changed_email,a=e.is_open,l=e.onClose,r=e.prev_email,i=e.setErrorMessage,c=e.verification_code,m=e.is_social_signup,_=b(n.useState(null),2),f=_[0],p=_[1],h=b(n.useState(!1),2),v=h[0],g=h[1],E=b(n.useState(a),2),w=E[0],k=E[1];return v?n.createElement(u(),{is_open:v,onClose:function(){return g(!1)},identifier_title:"Change_Email",onClickSendEmail:function(){d.WS.changeEmail(f)},has_live_chat:!0,is_modal_when_mobile:!0}):n.createElement(o.Modal,{is_open:w,should_header_stick_body:!0,title:n.createElement(s.Localize,{i18n_default_text:"Are you sure?"}),toggleModal:l,width:"440px",is_closed_on_cancel:!1,has_close_icon:!1},n.createElement(n.Fragment,null,n.createElement("div",{className:"email-confirmation"},n.createElement(o.Text,{as:"p",color:"prominent",size:"xs",align:"left"},n.createElement(s.Localize,{i18n_default_text:"Are you sure you want to update email <0>{{prev_email}}</0> to <1>{{changed_email}}</1>?",values:{prev_email:r,changed_email:t},components:[n.createElement("strong",{key:0}),n.createElement("strong",{key:1,className:"email-confirmation__currentEmail"})]}))),n.createElement(o.Modal.Footer,null,n.createElement(o.Button,{onClick:l,has_effect:!0,text:(0,s.localize)("Cancel"),secondary:!0,large:!0}),n.createElement(o.Button,{className:"email-change_button",has_effect:!0,onClick:function(){var e;e=y({change_email:"verify",new_email:t,verification_code:c},m&&{social_signup:!0}),p((function(t){return y(y({},t),e)})),d.WS.changeEmail(e).then((function(e){e.error?(l(),i(e.error.message)):g(!0),k(!1)}))},primary:!0,large:!0},n.createElement(s.Localize,{i18n_default_text:"Confirm"})))))};E.propTypes={changed_email:f().string,is_open:f().bool,onClose:f().func,prev_email:f().string,setErrorMessage:f().func,verification_code:f().string};var w=a(59472);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,l,r,i,o=[],c=!0,s=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=r.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,l=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw l}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const S=(0,w.observer)((function(){var e=(0,w.useStore)(),t=e.ui,a=e.client,l=t.disableApp,m=t.enableApp,u=t.is_loading,d=t.is_reset_email_modal_visible,_=t.toggleResetEmailModal,f=a.is_social_signup,p=a.email,h=a.verification_code.request_email,y=k(n.useState(!1),2),v=y[0],b=y[1],g=k(n.useState(null),2),x=g[0],S=g[1],z=k(n.useState(null),2),C=z[0],O=z[1];return v?n.createElement(E,{changed_email:C,is_open:v,onClose:function(){return b(!1)},prev_email:p,setErrorMessage:S,verification_code:h,is_social_signup:f}):n.createElement(i.Formik,{initialValues:{email:""},initialStatus:{reset_complete:!1,error_msg:""},validate:function(e){var t={};return e.email?(0,c.validEmail)(e.email)||(t.email=(0,c.getErrorMessages)().email()):t.email=(0,s.localize)("The email input should not be empty."),t},onSubmit:function(e){O(e.email),b(!0)}},(function(e){var t=e.errors,a=e.values,c=e.touched,f=e.isSubmitting,p=e.handleChange,h=e.setFieldTouched,y=e.status;return n.createElement(o.Dialog,{is_visible:d,disableApp:l,enableApp:m,is_loading:u,dismissable:y.error_msg,onConfirm:function(){return _(!1)},is_closed_on_cancel:!1},n.createElement("div",{className:"reset-email"},n.createElement(i.Form,null,n.createElement(n.Fragment,null,y.reset_complete?n.createElement("div",{className:"reset-email__email-selection"},n.createElement(o.Text,{as:"p",weight:"bold",className:"reset-email__heading"},n.createElement(s.Localize,{i18n_default_text:"Your password has been changed"})),n.createElement(o.Text,{align:"center",as:"p",size:"xxs",className:"reset-email__subtext"},n.createElement(s.Localize,{i18n_default_text:"We will now redirect you to the login page."}))):n.createElement("div",{className:"reset-email__email-selection"},n.createElement(o.Text,{as:"p",align:"left",weight:"bold",className:"reset-email__heading"},n.createElement(s.Localize,{i18n_default_text:"Enter a new email address"})),n.createElement(o.Text,{as:"p",color:"prominent",size:"xs",align:"left",className:"reset-email__descripton"},n.createElement(s.Localize,{i18n_default_text:"You'll log in to your Deriv account with this email address."})),n.createElement("fieldset",{className:"reset-email__fieldset"},n.createElement(o.Input,{"data-lpignore":"true",type:"text",name:"email",id:"email",placeholder:(0,s.localize)("Email address"),value:a.email,required:!0,disabled:!1,error:c.email&&t.email||x,onChange:function(e){S(""),h("email",!0),p(e)}})),n.createElement(o.Button,{className:r()("reset-email__btn",{"reset-email__btn--disabled":!a.email||t.email||f}),type:"submit",is_disabled:!a.email||!!t.email||f,primary:!0,large:!0},n.createElement(s.Localize,{i18n_default_text:"Confirm"})))))))}))}))}}]);
//# sourceMappingURL=core.reset-email-modal.31651ba5424c1a755a6e.js.map