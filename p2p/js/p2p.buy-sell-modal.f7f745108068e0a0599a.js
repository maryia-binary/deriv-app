(self.webpackChunk_deriv_p2p=self.webpackChunk_deriv_p2p||[]).push([[633],{9978:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(2609),n=a.n(r)()((function(e){return e[1]}));n.push([e.id,".buy-sell__modal{opacity:1 !important}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal .dc-mobile-full-page-modal__header--border-bottom{border-bottom:2px solid var(--general-section-1)}}.buy-sell__modal-body{position:relative;display:block;padding-top:2.4rem}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal-body>form{height:-moz-fit-content !important;height:fit-content !important}}.buy-sell__modal-danger{margin-bottom:1.6rem;width:-moz-fit-content;width:fit-content;align-items:flex-start}.buy-sell__modal-field{margin-bottom:0 !important}.buy-sell__modal-field{margin-right:0.7rem;flex:1}.buy-sell__modal-field--disable{opacity:0.32}.buy-sell__modal-field--textarea{border-top:1px solid var(--general-section-5);padding:1.8rem 2.4rem 0}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal-field{margin:0.8rem 0}}.buy-sell__modal-field-wrapper{display:flex;margin:-2.4rem 0 1.6rem -2.4rem;padding:0 2.4rem;word-break:break-word}.buy-sell__modal-field-wrapper>*{margin:2.4rem 0 0 2.4rem}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal-field-wrapper{flex-direction:column}.buy-sell__modal-field-wrapper .dc-input__wrapper{margin-top:2.5rem;width:90vw}}.buy-sell__modal-field-wrapper>.dc-input{margin-top:1rem}.buy-sell__modal-form{height:-moz-fit-content !important;height:fit-content !important}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal-footer{border-top:2px solid var(--general-section-1);display:flex;flex-direction:row;justify-content:flex-end;margin-top:auto;padding:1.6rem}}.buy-sell__modal--input{display:flex;gap:2rem;flex-direction:column;padding:0 2.4rem 2rem}.buy-sell__modal--input .dc-input__wrapper{margin-bottom:0;margin-bottom:initial}@media (min-width: 1024px){.buy-sell__modal--input-field{display:flex;gap:2rem}}.buy-sell__modal-hintbox{margin:-0.5rem 0 2.4rem;padding:0 2.4rem}.buy-sell__modal-hintbox .dc-hint-box__icon{align-self:flex-start}.buy-sell__modal-icon{margin-right:0.8rem}.buy-sell__modal-line{border-top:1px solid var(--general-section-5);margin:1.6rem 0;width:100%}.buy-sell__modal-payment-method{padding:0 2.4rem}.buy-sell__modal-payment-method--container{align-self:center;display:flex;flex-direction:column;margin-bottom:1.6rem;padding:0 2.4rem}.buy-sell__modal-payment-method--icon{border-radius:2px;margin-right:0.8rem}.buy-sell__modal-payment-method--row{align-items:center;display:flex;flex-direction:row;margin-bottom:0.8rem}.buy-sell__modal-payment-method--title{margin-bottom:0.8rem}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal-receive-amount{border-top:1px solid var(--general-section-2);padding:0.8rem 1.6rem;background-color:var(--general-main-1)}}.buy-sell__modal--sell-payment-methods{display:flex;flex-wrap:wrap;gap:0.8rem;margin:1.6rem 0 2.4rem}.buy-sell__modal--sell-payment-methods .payment-method-card{margin:0;margin:initial}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal--sell-payment-methods .payment-method-card{min-height:8.8rem;min-width:0;min-width:initial;width:13.6rem}}.buy-sell__modal--sell-payment-methods .payment-method-card--add{margin:0;margin:initial}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal--sell-payment-methods .payment-method-card--add{min-height:8.8rem;width:13.6rem}}.buy-sell__modal--sell-payment-methods .payment-method-card__body{margin-top:0.8rem}@media (min-width: 320px) and (max-width: 767px){.buy-sell__modal--sell-payment-methods .payment-method-card__body{margin-top:0}}.buy-sell__modal--sell-payment-methods--disable{opacity:0.32}.buy-sell__modal--layout{padding:0;padding:initial}.buy-sell__modal--error-message{padding:0 2.4rem}.buy-sell__modal-content .dc-input{margin-bottom:0;margin-bottom:initial}.dc-modal__container_buy-sell__modal .dc-modal-header--buy-sell__modal{border-bottom:2px solid var(--general-section-5)}.dc-modal__container_buy-sell__modal .dc-modal-footer--separator{margin-top:1rem;border-top:2px solid var(--general-section-5)}\n",""]);const l=n},477:(e,t,a)=>{var r=a(6062),n=a(9978);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);r(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},4889:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var r=a(2779),n=a.n(r),l=a(5099),o=a.n(l),i=a(8156),m=a(1336),s=a(5770),d=a(4309),c=a(75),_=a(2925),u=a(7674),p=a(2322),y=a(7661),f=a(3440),h=a(3183);const b=function(){var e,t=(0,p.m)().buy_sell_store;return i.createElement("div",{className:"buy-sell__modal-receive-amount"},i.createElement(m.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},null!=t&&t.is_sell_advert?i.createElement(u.Xx,{i18n_default_text:"You'll receive"}):i.createElement(u.Xx,{i18n_default_text:"You'll send"})),i.createElement(m.Text,{as:"p",color:"general",line_height:"m",size:"xs",weight:"bold"},(0,s.getFormattedText)((0,h.WK)(null==t?void 0:t.receive_amount),null==t||null===(e=t.advert)||void 0===e?void 0:e.local_currency)))};var g=a(6378),v=a(9565),x=a(821),E=a(4047);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},w.apply(this,arguments)}function A(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,i=[],m=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;m=!1}else for(;!(m=(r=l.call(a)).done)&&(i.push(r.value),i.length!==t);m=!0);}catch(e){s=!0,n=e}finally{try{if(!m&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw n}}return i}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var M=function(e){var t=(0,s.useIsMounted)(),a=(0,p.m)(),r=a.advertiser_page_store,l=a.buy_sell_store,o=a.floating_rate_store,_=a.general_store,S=a.my_profile_store,C=N(i.useState([]),2),M=C[0],I=C[1];l.setFormProps(e);var k=(0,E.M)().showModal,T=e.setPageFooterParent,F=(null==l?void 0:l.advert)||{},R=F.advertiser_details,D=F.description,P=F.effective_rate,O=F.local_currency,z=F.max_order_amount_limit_display,B=F.min_order_amount_limit,j=F.min_order_amount_limit_display,L=F.payment_method_names,X=F.price,U=F.rate,V=F.rate_type,Y=N(i.useState(B),2),H=Y[0],W=Y[1],q=_.advertiser_buy_limit,K=_.advertiser_sell_limit,Z=_.balance,G=!l.is_buy_advert&&(0===parseFloat(Z)||parseFloat(Z)<B),$={borderColor:"var(--brand-secondary)",borderWidth:"2px",cursor:G?"not-allowed":"pointer"},Q=(0,h.VH)({price:X,rate_type:V,rate:U,local_currency:O,exchange_rate:o.exchange_rate,market_rate:P}),J=Q.effective_rate,ee=Q.display_effective_rate,te=(0,h.BP)((0,h.WK)(J,(0,h.v3)(J,6)));i.useEffect((function(){S.setShouldShowAddPaymentMethodForm(!1),S.setSelectedPaymentMethod(""),S.setSelectedPaymentMethodDisplayName(""),l.setHasPaymentMethods(!!L);var e=(0,c.U5)((function(){return l.receive_amount}),(function(){(0,s.isMobile)()&&"function"==typeof T&&T(i.createElement(b,null))}));S.advertiser_has_payment_methods||S.getPaymentMethodsList(),r.setFormErrorMessage("");var t=(0,c.U5)((function(){return o.is_market_rate_changed}),(function(e){e&&V===f.i.FLOAT&&k({key:"RateChangeModal",props:{currency:l.local_currency}})}));return l.setInitialReceiveAmount(te),function(){l.payment_method_ids=[],e(),t()}}),[]),i.useEffect((function(){var e=H*te;l.setReceiveAmount(e)}),[H,J]);var ae=function(){if(l.is_buy_advert){if(q<z)return(0,h.WK)(q)}else if(K<z)return(0,h.WK)(K);return z};return i.createElement(i.Fragment,null,V===f.i.FLOAT&&!G&&i.createElement("div",{className:"buy-sell__modal-hintbox"},i.createElement(m.HintBox,{icon:"IcAlertInfo",message:i.createElement(m.Text,{as:"p",size:"xxxs",color:"prominent",line_height:"xs"},i.createElement(u.Xx,{i18n_default_text:"If the market rate changes from the rate shown here, we won't be able to process your order."})),is_info:!0})),i.createElement(y.Formik,{enableReinitialize:!0,validate:l.validatePopup,validateOnMount:!G,initialValues:{amount:B,contact_info:_.contact_info,payment_info:_.payment_info,rate:V===f.i.FLOAT?J:null},initialErrors:l.is_sell_advert?{contact_info:!0}:{},onSubmit:function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return l.handleSubmit.apply(l,[function(){return t()}].concat(a))}},(function(e){var t=e.errors,a=e.isSubmitting,r=e.isValid,o=e.setFieldValue,c=e.submitForm,p=e.touched;return l.form_props.setIsSubmitDisabled(!r||a||l.is_sell_advert&&L&&M.length<1),l.form_props.setSubmitForm(c),i.createElement(y.Form,{noValidate:!0},i.createElement("div",{className:"buy-sell__modal-content"},i.createElement("div",{className:"buy-sell__modal-field-wrapper"},i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(m.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},l.is_buy_advert?i.createElement(u.Xx,{i18n_default_text:"Seller"}):i.createElement(u.Xx,{i18n_default_text:"Buyer"})),i.createElement(m.Text,{as:"p",color:"general",line_height:"m",size:"xs"},R.name)),i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(m.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(u.Xx,{i18n_default_text:"Rate (1 {{ currency }})",values:{currency:l.account_currency}})),i.createElement(m.Text,{as:"p",color:"general",line_height:"m",size:"xs"},ee," ",O))),i.createElement("div",{className:"buy-sell__modal-payment-method--container"},L&&i.createElement(m.Text,{as:"p",className:"buy-sell__modal-payment-method--title",color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(u.Xx,{i18n_default_text:"Payment methods"})),L&&L.map((function(e,t){var a=e.replace(/\s|-/gm,"");return"BankTransfer"===a||"Other"===a?i.createElement("div",{className:"buy-sell__modal-payment-method--row",key:t},i.createElement(m.Icon,{className:"buy-sell__modal-payment-method--icon",icon:"IcCashier".concat(a),size:16}),i.createElement(m.Text,{as:"p",color:"general",line_height:"m",size:"xs"},e)):i.createElement("div",{className:"buy-sell__modal-payment-method--row",key:t},i.createElement(m.Icon,{className:"buy-sell__modal-payment-method--icon",icon:"IcCashierEwallet",size:16}),i.createElement(m.Text,{as:"p",color:"general",line_height:"m",size:"xs"},e))}))),i.createElement("div",{className:"buy-sell__modal-field-wrapper"},i.createElement("div",{className:"buy-sell__modal-field"},i.createElement(m.Text,{as:"p",color:"less-prominent",line_height:"m",size:"xxs"},l.is_buy_advert?i.createElement(u.Xx,{i18n_default_text:"Seller's instructions"}):i.createElement(u.Xx,{i18n_default_text:"Buyer's instructions"})),D.trim().replace(/([\r\n]){2,}/g,"\n\n").split("\n").map((function(e,t){return i.createElement(m.Text,{key:t,as:"p",color:"general",line_height:"m",size:"xs"},e||"-")})))),i.createElement("div",{className:"buy-sell__modal-line"}),l.is_sell_advert&&L&&i.createElement(i.Fragment,null,i.createElement("div",{className:"buy-sell__modal-payment-method"},i.createElement(m.Text,{as:"p",className:"buy-sell__modal-payment-method--title",color:"less-prominent",line_height:"m",size:"xxs"},i.createElement(u.Xx,{i18n_default_text:"Receive payment to"})),i.createElement(m.Text,{as:"p",color:"prominent",line_height:"m",size:"xxs"},S.advertiser_has_payment_methods?i.createElement(u.Xx,{i18n_default_text:"You may choose up to 3."}):i.createElement(u.Xx,{i18n_default_text:"To place an order, add one of the advertiser’s preferred payment methods:"})),i.createElement(d.Qj,null,(function(){return i.createElement("div",{className:n()("buy-sell__modal--sell-payment-methods",{"buy-sell__modal--sell-payment-methods--disable":G})},null==L?void 0:L.map((function(e,t){var a=S.advertiser_payment_methods_list,r=S.setSelectedPaymentMethodDisplayName,n=S.setShouldShowAddPaymentMethodForm,o=a.filter((function(t){return t.display_name===e}));return o.length>0?o.map((function(e){return i.createElement(g.Z,{is_vertical_ellipsis_visible:!1,key:t,medium:!0,onClick:function(){return function(e){G||(l.payment_method_ids.includes(e.ID)?(l.payment_method_ids=l.payment_method_ids.filter((function(t){return t!==e.ID})),I(M.filter((function(t){return t!==e.ID})))):l.payment_method_ids.length<3&&(l.payment_method_ids.push(e.ID),I([].concat(A(M),[e.ID]))))}(e)},payment_method:e,style:M.includes(e.ID)?$:{},disabled:G})})):i.createElement(g.Z,{add_payment_method:e,is_add:!0,key:t,medium:!0,onClickAdd:function(){G||(r(e),n(!0))},disabled:G,style:{cursor:G?"not-allowed":"pointer"}})})).sort((function(e){var t;return!Array.isArray(e)||null!==(t=e[0].props)&&void 0!==t&&t.is_add?1:-1})))}))),i.createElement("div",{className:"buy-sell__modal-line"})),i.createElement("div",{className:"buy-sell__modal--input"},i.createElement(m.Text,{color:"less-prominent",size:"xxs"},(0,u.NC)("Enter {{transaction_type}} amount",{transaction_type:l.is_buy_advert?"buy":"sell"})),i.createElement("section",{className:"buy-sell__modal--input-field"},i.createElement(y.Field,{name:"amount"},(function(e){var a=e.field;return i.createElement(m.Input,w({},a,{"data-lpignore":"true",type:"number",error:t.amount,label:(0,u.NC)("{{ad_type}}",{ad_type:l.is_buy_advert?"Buy amount":"Sell amount"}),hint:i.createElement(u.Xx,{i18n_default_text:"Limit: {{min}}–{{max}} {{currency}}",values:{min:j,max:ae(),currency:l.account_currency}}),is_relative_hint:!0,className:"buy-sell__modal-field",trailing_icon:i.createElement(m.Text,{color:"less-prominent","line-height":"m",size:"xs"},l.account_currency),onKeyDown:function(e){(0,v.oB)(e.key)||e.preventDefault()},onChange:function(e){var t=e.target.value;(0,x.vk)(t)>(0,s.getDecimalPlaces)(l.account_currency)?o("amount",parseFloat(H)):(o("amount",parseFloat(t)),W(t))},required:!0,value:H,disabled:G}))})),(0,s.isDesktop)()&&i.createElement("div",{className:n()("buy-sell__modal-field",{"buy-sell__modal-field--disable":G})},i.createElement(b,null)))),l.is_sell_advert&&i.createElement(i.Fragment,null,!L&&i.createElement("div",{className:"buy-sell__modal-field--textarea"},i.createElement(y.Field,{name:"payment_info"},(function(e){var a=e.field;return i.createElement(m.Input,w({},a,{"data-lpignore":"true",type:"textarea",error:p.payment_info&&t.payment_info,hint:(0,u.NC)("Bank name, account number, beneficiary name"),is_relative_hint:!0,label:(0,u.NC)("Your bank details"),required:!0,has_character_counter:!0,initial_character_count:_.payment_info.length,max_characters:300,disabled:G}))}))),i.createElement("div",{className:"buy-sell__modal-field--textarea"},i.createElement(y.Field,{name:"contact_info"},(function(e){var a=e.field;return i.createElement(m.Input,w({},a,{"data-lpignore":"true",type:"textarea",error:p.contact_info&&t.contact_info,label:(0,u.NC)("Your contact details"),required:!0,has_character_counter:!0,initial_character_count:_.contact_info.length,max_characters:300,disabled:G}))}))))))})))};M.propTypes={advert:o().object,contact_info:o().string,form_props:o().object,setIsSubmitDisabled:o().func,setSubmitForm:o().func,setPageFooterParent:o().func,has_payment_info:o().bool,is_buy_advert:o().bool,is_sell_advert:o().bool,payment_info:o().string,receive_amount:o().number,setFormProps:o().func,setInitialReceiveAmount:o().func,setReceiveAmount:o().func,validatePopup:o().func};const I=(0,d.Pi)(M);var k=a(268),T=a(9569),F=a(6441);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,i=[],m=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;m=!1}else for(;!(m=(r=l.call(a)).done)&&(i.push(r.value),i.length!==t);m=!0);}catch(e){s=!0,n=e}finally{try{if(!m&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var P=function(){return i.createElement("div",{className:"buy-sell__modal--error-message"},i.createElement(m.HintBox,{className:"buy-sell__modal-danger",icon:"IcAlertDanger",message:i.createElement(m.Text,{as:"p",size:"xxxs",color:"prominent",line_height:"s"},i.createElement(u.Xx,{i18n_default_text:"Your Deriv P2P balance isn't enough. Please increase your balance before trying again."})),is_danger:!0}))},O=function(e){var t=e.onCancel,a=e.is_submit_disabled,r=e.onSubmit,n=(0,p.m)().my_profile_store;return i.createElement("div",{className:n.should_show_add_payment_method_form?"add-payment-method__footer":"buy-sell__modal-footer"},i.createElement(m.Button.Group,null,i.createElement(m.Button,{secondary:!0,onClick:t,large:!0},(0,u.NC)("Cancel")),i.createElement(m.Button,{is_disabled:a,primary:!0,large:!0,onClick:r},(0,u.NC)("Confirm"))))};O.propTypes={onCancel:o().func.isRequired,is_submit_disabled:o().bool,onSubmit:o().func.isRequired};var z=function(){var e=(0,p.m)(),t=e.general_store,a=e.buy_sell_store,r=e.advertiser_page_store,n=e.my_profile_store,l=(0,E.M)().showModal,o=a.selected_ad_state.account_currency,d=a.show_advertiser_page?r.counterparty_type:a.table_type;return n.should_show_add_payment_method_form?(0,s.isDesktop)()?i.createElement(i.Fragment,null,i.createElement(m.Icon,{icon:"IcArrowLeftBold",onClick:function(){t.is_form_modified?l({key:"CancelAddPaymentMethodModal"}):n.setShouldShowAddPaymentMethodForm(!1)},className:"buy-sell__modal-icon"}),(0,u.NC)("Add payment method")):(0,u.NC)("Add payment method"):d===_.V.BUY?(0,u.NC)("Buy {{ currency }}",{currency:o}):(0,u.NC)("Sell {{ currency }}",{currency:o})};const B=(0,d.Pi)((function(){var e=(0,p.m)(),t=e.buy_sell_store,a=e.floating_rate_store,r=e.general_store,l=e.my_profile_store,o=e.order_store,d=i.useRef((function(){})),y=R((0,m.useSafeState)(null),2),f=y[0],h=y[1],g=R((0,m.useSafeState)(!0),2),v=g[0],x=g[1],w=R(i.useState(!1),2),A=w[0],N=w[1],S=R(i.useState(!1),2),C=S[0],M=S[1],D=(0,E.M)(),B=D.hideModal,j=D.is_modal_open,L=D.showModal;i.useEffect((function(){var e=(0,c.U5)((function(){return t.advert}),(function(e,t){var a=(null==t?void 0:t.rate)&&t.rate!==e.rate,r=(null==t?void 0:t.id)===e.id;a&&r&&(M(!0),setTimeout((function(){M(!1)}),2e3))})),a=(0,c.U5)((function(){return t.form_error_code}),(function(){t.form_error_code===F.N.ORDER_CREATE_FAIL_RATE_CHANGED&&((0,s.isDesktop)()?setTimeout((function(){return L({key:"MarketRateChangeErrorModal"})}),280):L({key:"MarketRateChangeErrorModal"}),t.setFormErrorCode(""),h(null))}));return function(){e(),a()}}),[]);var X=function(){return f&&t.form_error_code!==F.N.ORDER_CREATE_FAIL_RATE_CHANGED?i.createElement("div",{className:"buy-sell__modal--error-message"},i.createElement(m.HintBox,{className:"buy-sell__modal-danger",icon:"IcAlertDanger",message:i.createElement(m.Text,{as:"p",size:"xxxs",color:"prominent",line_height:"s"},t.form_error_code===F.N.ORDER_CREATE_FAIL_CLIENT_BALANCE?i.createElement(u.Xx,{i18n_default_text:"Your Deriv P2P balance isn't enough. Please increase your balance before trying again."}):f),is_danger:!0})):null},U=function(){l.should_show_add_payment_method_form?r.is_form_modified?L({key:"CancelAddPaymentMethodModal"}):l.hideAddPaymentMethodForm():(B(),t.fetchAdvertiserAdverts()),a.setIsMarketRateChanged(!1)},V=function(e){r.redirectTo("orders",{nav:{location:"buy_sell"}}),o.setOrderId(e.id),B(),t.fetchAdvertiserAdverts(),t.setShowAdvertiserPage(!1)},Y=function(e){return d.current=e},H=f&&t.form_error_code===F.N.ORDER_CREATE_FAIL_RATE_CHANGED||C?function(){(0,s.isDesktop)()?setTimeout((function(){return L({key:"MarketRateChangeErrorModal"})}),l.MODAL_TRANSITION_DURATION):L({key:"MarketRateChangeErrorModal"})}:d.current;i.useEffect((function(){var e,a=0===parseFloat(r.balance)||parseFloat(r.balance)<(null===(e=t.advert)||void 0===e?void 0:e.min_order_amount_limit);N(a),j||h(null)}),[j]);var W=r.nickname?I:k.Z;return i.createElement(i.Fragment,null,i.createElement(m.MobileWrapper,null,i.createElement(m.MobileFullPageModal,{body_className:"buy-sell__modal-body",className:"buy-sell__modal",height_offset:"80px",is_flex:!0,is_modal_open:j,page_header_className:"buy-sell__modal-header",page_header_text:i.createElement(z,null),pageHeaderReturnFn:U},t.table_type===_.V.SELL&&A&&i.createElement(P,null),!!f&&i.createElement(X,null),l.should_show_add_payment_method_form?i.createElement(T.Z,{should_show_separated_footer:!0}):i.createElement(i.Fragment,null,i.createElement(W,{advert:t.selected_ad_state,handleClose:U,handleConfirm:V,setIsSubmitDisabled:x,setErrorMessage:h,setSubmitForm:Y}),i.createElement(b,{is_sell_advert:t.is_sell_advert,local_currency:(null==t?void 0:t.advert)&&t.advert.local_currency,receive_amount:t.receive_amount}),i.createElement(O,{is_submit_disabled:v,onCancel:U,onSubmit:d.current})))),i.createElement(m.DesktopWrapper,null,i.createElement(m.Modal,{className:n()("buy-sell__modal",{"buy-sell__modal-form":l.should_show_add_payment_method_form}),height:t.table_type===_.V.BUY?"auto":"649px",width:"456px",is_open:j,title:i.createElement(z,null),portalId:"modal_root",toggleModal:U},i.createElement(m.ThemedScrollbars,{height:t.table_type===_.V.BUY?"100%":"calc(100% - 5.8rem - 7.4rem)"},i.createElement(m.Modal.Body,{className:"buy-sell__modal--layout"},t.table_type===_.V.SELL&&A&&i.createElement(P,null),i.createElement(X,null),l.should_show_add_payment_method_form?i.createElement(T.Z,{should_show_separated_footer:!0}):i.createElement(W,{advert:t.selected_ad_state,handleClose:U,handleConfirm:V,setIsSubmitDisabled:x,setErrorMessage:h,setSubmitForm:Y}))),!l.should_show_add_payment_method_form&&i.createElement(m.Modal.Footer,{has_separator:!0},l.should_show_add_payment_method_form?null:i.createElement(O,{is_submit_disabled:v,onCancel:U,onSubmit:H})))))}));a(477);const j=B}}]);