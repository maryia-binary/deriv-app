"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6530],{3216:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(32735),i=n(40841),s=n.n(i),l=n(61055),c=n(60216),o=n.n(c),a=n(47108),u=n(64259),d=n(44850),f=n(15736),p=n(99727);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e,t){return e.text.toLowerCase()===t.residence.toLowerCase()},g=function(e){var t=e.enableApp,n=e.onSetResidence,i=e.residence_list,c=e.toggleModalVisibility,o=function(e){if(e)throw Error(e);c(!1),t()};return r.createElement("div",{className:"set-residence"},r.createElement(l.Formik,{initialValues:{residence:""},validate:function(e){return function(e,t){var n={};if(e.residence){var r=t.findIndex((function(t){return v(t,e)}));-1!==r&&"DISABLED"!==t[r].disabled||(n.residence=(0,d.localize)("Unfortunately, {{website_name}} is not available in your country.",{website_name:u.website_name}))}else n.residence=!0;return n}(e,i)},onSubmit:function(e){var t=i.findIndex((function(t){return v(t,e)})),r=_(_({},e),{},{residence:i[t].value});n(r,o)}},(function(e){var t=e.isSubmitting,n=e.errors,c=e.values,o=e.setFieldValue,u=e.touched;return r.createElement(l.Form,null,r.createElement(r.Fragment,null,r.createElement(p.Z,{errors:n,touched:u,setFieldValue:o,residence_list:i},r.createElement(a.Text,{as:"p",size:"xxs",weight:"bold",className:"set-residence__subtext"},r.createElement(d.Localize,{i18n_default_text:"We need this to make sure our service complies with laws and regulations in your country."})),r.createElement(a.Button,{className:s()("set-residence__btn",{"set-residence__btn--disabled":!c.residence||n.residence||t}),type:"submit",is_disabled:!c.residence||!!n.residence||t,primary:!0,large:!0},r.createElement(d.Localize,{i18n_default_text:"Set residence"})))))})))};g.propTypes={enableApp:o().func,onSetResidence:o().func,residence_list:o().array,toggleModalVisibility:o().func};var h=function(e){var t=e.enableApp,n=e.disableApp,i=e.is_loading,s=e.is_visible,l=e.onSetResidence,c=e.residence_list,o=e.toggleSetResidenceModal;return c.length<1?null:r.createElement(a.Dialog,{is_visible:s,disableApp:n,enableApp:t,is_loading:i||!c.length,is_content_centered:!0},r.createElement(g,{onSetResidence:l,residence_list:c,toggleModalVisibility:o,enableApp:t}))};h.propTypes={disableApp:o().func,enableApp:o().func,is_loading:o().bool,is_visible:o().bool,onSetResidence:o().func,residence_list:o().arrayOf(o().object),toggleSetResidenceModal:o().func};const S=(0,f.$j)((function(e){var t=e.ui,n=e.client;return{is_visible:t.is_set_residence_modal_visible,toggleSetResidenceModal:t.toggleSetResidenceModal,enableApp:t.enableApp,disableApp:t.disableApp,is_loading:t.is_loading,onSetResidence:n.onSetResidence,residence_list:n.residence_list}}))(h)},99727:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(32735),i=n(61055),s=n(60216),l=n.n(s),c=n(47108),o=n(44850);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}var u=function(e){var t,n=e.children,s=e.class_prefix,l=void 0===s?"set-residence":s,u=e.default_value,d=e.history_value,f=e.errors,p=e.onResidenceSelectionChanged,b=e.touched,m=e.setFieldTouched,_=e.setFieldValue,y=e.residence_list;return r.useEffect((function(){u&&(m("residence",!0),_("residence",u,!0))}),[]),r.createElement("div",{className:"".concat(l,"__residence-selection")},r.createElement(i.Field,{name:"residence"},(function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(c.Autocomplete,a({},t,{autoComplete:"off",input_id:"dt_core_set-residence-form_signup-residence-select",type:"text",label:(0,o.localize)("Country of residence"),historyValue:d,error:b.residence&&f.residence,required:!0,list_items:y,onItemSelection:function(e){var t=e.value,n=e.text;_("residence",t?n:"",!0),null==p||p()}})))})),!(null!=f&&null!==(t=f.residence)&&void 0!==t&&t.length)&&r.createElement(c.Text,{as:"p",size:"xxs",className:"account-signup__subtext",color:"less-prominent"},r.createElement(o.Localize,{i18n_default_text:"Country of residence is where you currently live."})),r.createElement("div",{className:"".concat(l,"__button_wrapper")},n))};u.propTypes={children:l().object,class_prefix:l().string,default_value:l().string,history_value:l().string,errors:l().object,onResidenceSelectionChanged:l().func,residence_list:l().arrayOf(l().object),setFieldTouched:l().func,setFieldValue:l().func,touched:l().object};const d=u}}]);
//# sourceMappingURL=core.set-residence-modal.702f3ad75cfe9b469d48.js.map