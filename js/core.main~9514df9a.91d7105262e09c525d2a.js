/*! For license information please see core.main~9514df9a.91d7105262e09c525d2a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2308],{46417:(e,t,n)=>{n.d(t,{Ah:()=>k,Ef:()=>E,F_:()=>P,Gu:()=>A,N0:()=>j,Ol:()=>b,Oy:()=>h,P0:()=>w,Qf:()=>g,SJ:()=>x,Sf:()=>S,Ww:()=>L,YT:()=>v,cf:()=>y,fI:()=>C,ht:()=>f,i3:()=>_,o7:()=>O,wA:()=>m});var r=n(32735),o=n(54582),i=n(68722),a=n(44850),s=n(47446),u=n(53100);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var l=[{regex_string:"^(?i)G[a-zA-Z0-9]{7,9}$",value:"^G[a-zA-Z0-9]{7,9}$",flags:"i"}],d=(0,i.getIDVNotApplicableOption)(),f=function(e){var t,n,r,o,a,s=e.account_status,u=e.citizen,c=e.residence_list,l=e.real_account_signup_target,d=c.find((function(e){return e.value===u})),f="maltainvest"===l,m=null==s||null===(t=s.authentication)||void 0===t?void 0:t.identity,_=(null==m?void 0:m.status)===i.AUTH_STATUS_CODES.VERIFIED||(null==s||null===(n=s.status)||void 0===n?void 0:n.some((function(e){return"skip_idv"===e})));return Boolean(!f&&u&&(null==d||null===(r=d.identity)||void 0===r||null===(o=r.services)||void 0===o||null===(a=o.idv)||void 0===a?void 0:a.is_country_supported)&&!_)},m=function(e,t){var n;return null!==(n=(0,s.n)(e)[t])&&void 0!==n?n:{new_display_name:"",example_format:""}},_=function(e){var t;0===(null!==(t=e.clipboardData)&&void 0!==t?t:window.clipboardData).getData("text").length&&e.preventDefault()},p=function(e){var t=l.find((function(t){return t.regex_string===e}));return t?new RegExp(t.value,t.flags):new RegExp(e)},h=function(e){switch(e){case"drivers_license":return(0,a.localize)("Enter Driver License Reference number");case"ssnit":return(0,a.localize)("Enter your SSNIT number");case"national_id_no_photo":return(0,a.localize)("Enter your National Identification Number (NIN)");default:return(0,a.localize)("Enter your document number")}},v=function(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).includes(e)},y=function(e,t){var n=(0,i.filterObjProperties)(e,t);return n.first_name&&(n.first_name=n.first_name.trim()),n.last_name&&(n.last_name=n.last_name.trim()),n.date_of_birth&&(n.date_of_birth=(0,i.toMoment)(n.date_of_birth).format("YYYY-MM-DD")),n},b=function(e){if(e){if(!(0,i.validLength)(e.trim(),{min:2,max:50}))return(0,a.localize)("You should enter 2-50 characters.");if(!(0,i.validName)(e))return(0,a.localize)("Letters, spaces, periods, hyphens, apostrophes only.")}return""},g=function(e){return e?(0,a.localize)("Example: ")+e:""},w=function(e){if(null==e||!e.text)return(0,a.localize)("Please select a document type.")},E=function(e,t){var n,r=function(e,t){var n,r,o=null;return e?p(null==t?void 0:t.format).test(e)||(o=(0,a.localize)("Please enter the correct format. ")):o=(0,a.localize)("Please enter your {{document_name}}. ",{document_name:null!==(n=null==t||null===(r=t.display_name)||void 0===r?void 0:r.toLowerCase())&&void 0!==n?n:(0,a.localize)("document number")}),o}(t,null==e?void 0:e.additional);if(r)return(0,a.localize)(r)+g(null===(n=e.additional)||void 0===n?void 0:n.example_format)},S=function(e,t){var n=e===t.example_format;if(!e&&t.text){var o="",i=g(t.example_format);switch(t.id){case"drivers_license":o="Driver License Reference number";break;case"ssnit":o="SSNIT number";break;case"national_id_no_photo":o="NIN";break;default:o="document number"}return r.createElement(a.Localize,{i18n_default_text:"Please enter your {{document_name}}. {{example_format}}",values:{document_name:o,example_format:i}})}return n?(0,a.localize)("Please enter a valid ID number."):p(t.value).test(e)?void 0:(0,a.localize)("Please enter the correct format. ")+g(t.example_format)},x=function(e){return e===d.id},O=function(e){return"object"===c(e)&&null!==e&&"code"in e},j=function(e){return 3!==e.length?o.alpha2ToAlpha3(e.toUpperCase()):e},L=function(e){return 2!==e.length?o.alpha3ToAlpha2(e.toUpperCase()):e},C=function(e){try{var t=e.toLowerCase().split("_");return"id"===t[0]?u.P.ID:t.length>1?"".concat(t[0],"_").concat(t[1].toUpperCase()):t[0]}catch(e){return u.P.EN}},k=function(e,t){if(!e||!Object.keys(t).length)return(0,a.localize)("identity document");var n=e.document_type;return n?t.identity.services.idv.documents_supported[n].display_name:(0,a.localize)("identity document")},A=function(e,t){return function(n,r,o){r.forEach((function(r){var i=t[r];n(i)||e[r]||(e[r]=o)}))}},P=function(e){switch(e){case i.IDV_ERROR_STATUS.DobMismatch.code:return["date_of_birth"];case i.IDV_ERROR_STATUS.NameMismatch.code:return["first_name","last_name"];default:return["first_name","last_name","date_of_birth"]}}},15854:(e,t,n)=>{n.d(t,{M5:()=>o});var r=n(44850);var o=function(){return[{text:(0,r.localize)("Employed"),value:"Employed"},{text:(0,r.localize)("Pensioner"),value:"Pensioner"},{text:(0,r.localize)("Self-Employed"),value:"Self-Employed"},{text:(0,r.localize)("Student"),value:"Student"},{text:(0,r.localize)("Unemployed"),value:"Unemployed"}]}},6073:(e,t,n)=>{n.d(t,{C:()=>r});var r=function(e){var t=e.authentication,n=t.attempts,r=t.document,o=t.identity,i=t.income,a=t.needs_verification,s=o.status,u=r.status,c=i.status,l=e.status.some((function(e){return"allow_document_upload"===e})),d=e.status.some((function(e){return"allow_poi_resubmission"===e})),f=e.status.some((function(e){return"allow_poa_resubmission"===e})),m=e.status.some((function(e){return"allow_poinc_resubmission"===e})),_=e.status.some((function(e){return"age_verification"===e})),p=e.status.some((function(e){return"authenticated"===e})),h=e.status.some((function(e){return"idv_disallowed"===e})),v=e.status.some((function(e){return"poa_address_mismatch"===e})),y=!(r&&"none"===r.status),b=!(o&&"none"===o.status),g=!(i&&"none"===i.status),w="pending"===u&&!f,E=Boolean(a.length)&&a.includes("document"),S=Boolean(a.length)&&a.includes("identity"),x=a.length&&a.includes("income"),O=o.services,j=O.idv,L=O.onfido,C=O.manual,k=n.latest;return{allow_document_upload:l,allow_poa_resubmission:f,allow_poi_resubmission:d,allow_poinc_resubmission:m,has_attempted_idv:Boolean(n.history.length&&n.history.find((function(e){return"idv"===e.service}))),has_poa:y,has_poi:b,has_poinc:g,has_submitted_poa:w,identity_last_attempt:k,identity_status:s,document_status:u,income_status:c,idv:j,is_age_verified:_,is_fully_authenticated:p,is_idv_disallowed:h,manual:C,needs_poa:E,needs_poi:S,needs_poinc:x,needs_verification:a,onfido:L,poa_address_mismatch:v}}},50296:(e,t,n)=>{n.d(t,{Z:()=>G});var r=n(32735),o=n(68461),i=n(68722),a=n(59472),s=n(44850),u=n(10257),c=n(6383),l=n(55903),d=n(61055),f=n(11490),m=n(34537),_=n(95562),p=n(17522),h=n(43268),v=n(57164),y=n(52190),b=n(5164),g=n(14936),w=n(6364),E=n(65980),S=n(46417),x=n(18410);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function j(){j=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:w(e,n,s)}),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function f(){}function m(){}function _(){}var p={};u(p,i,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(C([])));v&&v!==t&&n.call(v,i)&&(p=v);var y=_.prototype=f.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function o(r,i,a,s){var u=l(e[r],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==O(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=l(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=_,r(y,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(g.prototype),u(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new g(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),u(y,s,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function L(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const T=(0,a.observer)((function(e){var t=e.is_resubmit,n=e.is_for_cfd_modal,u=e.onSubmit,c=e.onSubmitForCFDModal,l=e.step_index,O=e.className,C=(0,a.useStore)(),A=C.client,N=C.notifications,T=C.ui,I=A.account_settings,D=A.fetchResidenceList,z=A.fetchStatesList,R=A.getChangeableFields,Z=A.states_list,Y=N.addNotificationMessageByKey,F=N.removeNotificationMessage,U=N.removeNotificationByKey,V=T.is_mobile,M=P(r.useState([]),2),G=M[0],B=M[1],q=P(r.useState(null),2),H=q[0],W=q[1],$=P(r.useState(!0),2),J=$[0],K=$[1],Q=P(r.useState({address_line_1:"",address_line_2:"",address_city:"",address_state:"",address_postcode:""}),2),X=Q[0],ee=Q[1],te=P(r.useState(null),2),ne=te[0],re=te[1],oe=P(r.useState({is_btn_loading:!1,is_submit_success:!1,should_allow_submit:!0,should_show_form:!0}),2),ie=oe[0],ae=oe[1],se=r.useMemo((function(){return(0,x.Z)("poa")}),[]),ue=(0,f.useFileUploader)().upload;r.useEffect((function(){null==D||D().then((function(){Promise.all([z(),i.WS.wait("get_settings")]).then((function(){var e,t,n,r,o;ee({address_line_1:null!==(e=I.address_line_1)&&void 0!==e?e:"",address_line_2:null!==(t=I.address_line_2)&&void 0!==t?t:"",address_city:null!==(n=I.address_city)&&void 0!==n?n:"",address_state:null!==(r=I.address_state)&&void 0!==r?r:"",address_postcode:null!==(o=I.address_postcode)&&void 0!==o?o:""}),K(!1)}))}))}),[I,D,z]);var ce=R(),le=function(e){ae(k(k({},ie),{should_show_form:e}))},de=function(){var e,t=(e=j().mark((function e(t,r){var o,a,s,d,f,m,_,p,h,v,y,b,g,w,E,x;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.setStatus,a=r.setSubmitting,o({msg:""}),ae(k(k({},ie),{is_btn_loading:!0})),s=k({},t),t.address_state&&Z.length&&(s.address_state=(0,i.getLocation)(Z,t.address_state,"value")||""),e.next=7,i.WS.setSettings(s);case 7:if(!(d=e.sent).error){e.next=13;break}return o({msg:d.error.message}),ae(k(k({},ie),{is_btn_loading:!1})),a(!1),e.abrupt("return");case 13:return e.next=15,i.WS.authorized.storage.getSettings();case 15:if(!(f=e.sent).error){e.next=20;break}return re(f.error.message),a(!1),e.abrupt("return");case 20:return m=f.get_settings,_=m.address_line_1,p=m.address_line_2,h=m.address_city,v=m.address_state,y=m.address_postcode,ee({address_line_1:_,address_line_2:p,address_city:h,address_state:v,address_postcode:y}),e.prev=23,e.next=26,ue(G);case 26:if(null==(b=e.sent)||!b.warning){e.next=31;break}return o({msg:null==b?void 0:b.message}),ae(k(k({},ie),{is_btn_loading:!1})),e.abrupt("return");case 31:return e.next=33,i.WS.authorized.getAccountStatus();case 33:if(!(g=e.sent).error){e.next=38;break}return re(g.error.message),a(!1),e.abrupt("return");case 38:w=g.get_account_status,ae(k(k({},ie),{is_submit_success:!0,is_btn_loading:!1})),E=w.authentication.needs_verification,x=Boolean(E.length)&&E.includes("identity"),null==u||u(x),["authenticate","needs_poa","poa_expired"].forEach((function(e){F({key:e}),U({key:e})})),x&&Y("needs_poi"),e.next=50;break;case 47:e.prev=47,e.t0=e.catch(23),(0,S.o7)(e.t0)&&(o({msg:e.t0.message}),ae(k(k({},ie),{is_btn_loading:!1})));case 50:return e.prev=50,a(!1),ae(k(k({},ie),{is_btn_loading:!1})),e.finish(50);case 54:n&&void 0!==l&&(null==c||c(l,t));case 55:case"end":return e.stop()}}),e,null,[[23,47,50,54]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){L(i,r,o,a,s,"next",e)}function s(e){L(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),fe={address_line_1:X.address_line_1,address_line_2:X.address_line_2,address_city:X.address_city,address_state:X.address_state,address_postcode:X.address_postcode};if(ne)return r.createElement(y.Z,{error_message:ne});if(J)return r.createElement(o.Loading,{is_fullscreen:!1,className:"account__initial-loader"});if(fe.address_state){var me=(0,i.getLocation)(Z,fe.address_state,"text");fe.address_state=Z.length&&me?me:fe.address_state}else fe.address_state="";var _e=function(e){var t=null!=e&&e.msg?"200px":"154px";return V&&!n?t:"80px"};return r.createElement(d.Formik,{initialValues:fe,onSubmit:de,validate:function(e){Object.entries(e).forEach((function(t){var n=P(t,2),r=n[0],o=n[1];return e[r]=o.trim()})),ae(k(k({},ie),{should_allow_submit:!1}));var t={};(0,S.Gu)(t,e)((function(e){return e}),["address_line_1","address_city"],(0,s.localize)("This field is required"));var n=(0,i.validAddress)(e.address_line_1,{is_required:!0});n.is_ok||(t.address_line_1=n.message);var r=(0,i.validAddress)(e.address_line_2);r.is_ok||(t.address_line_2=r.message);var o=(0,s.localize)("Only letters, space, hyphen, period, and apostrophe are allowed.");return e.address_city&&!(0,i.validLetterSymbol)(e.address_city)&&(t.address_city=o),e.address_state&&!(0,i.validLetterSymbol)(e.address_state)&&(null==Z?void 0:Z.length)<1&&(t.address_state=o),e.address_postcode&&((0,i.validLength)(e.address_postcode,{min:0,max:20})?(0,i.validPostCode)(e.address_postcode)||(t.address_postcode=(0,s.localize)("Only letters, numbers, space, and hyphen are allowed.")):t.address_postcode=(0,s.localize)("Please enter a {{field_name}} under {{max_number}} characters.",{field_name:(0,s.localize)("Postal/ZIP code"),max_number:20,interpolation:{escapeValue:!1}})),t},enableReinitialize:!0},(function(e){var i=e.status,a=e.handleSubmit,u=e.isSubmitting,c=e.isValid;return r.createElement(r.Fragment,null,r.createElement(b.Z,{onDirty:V?le:void 0}),ie.should_show_form&&r.createElement("form",{noValidate:!0,className:"account-form account-form_poa",onSubmit:a},r.createElement(o.ThemedScrollbars,{height:"572px",is_bypassed:!n||V,className:O},r.createElement(p.Z,{scroll_offset:_e(i)},(null==i?void 0:i.msg)&&r.createElement(o.HintBox,{className:"account-form_poa-submit-error",icon:"IcAlertDanger",message:r.createElement(o.Text,{as:"p",size:V?"xxxs":"xs"},i.msg),is_danger:!0}),t&&r.createElement(o.Text,{size:V?"xxs":"xs",align:"left",color:"loss-danger"},r.createElement(s.Localize,{i18n_default_text:"We were unable to verify your address with the details you provided. Please check and resubmit or choose a different document type."})),r.createElement(v.Z,{title:(0,s.localize)("Address"),title_text_size:"s"}),r.createElement(E.Z,{is_qualified_for_poa:!0,editable_fields:ce,states_list:Z}),r.createElement(v.Z,{title:(0,s.localize)("Document submission"),title_text_size:"s"}),r.createElement(h.Z,null,r.createElement(g.Z,{onFileDrop:function(e){B(e)},onError:W,files_description:r.createElement(m.Z,{title:se.title,descriptions:se.descriptions}),examples:r.createElement(w.Z,null)})))),n?r.createElement(o.Modal.Footer,{has_separator:!0},r.createElement(o.FormSubmitButton,{is_disabled:u||!c||G&&G.length<1||!!H,label:(0,s.localize)("Continue"),is_absolute:V,is_loading:u,form_error:null==i?void 0:i.msg})):r.createElement(_.Z,{className:"account-form__footer-poa"},r.createElement(o.Button,{className:"account-form__footer-btn",type:"submit",is_disabled:u||!c||G&&G.length<1||!!H,has_effect:!0,is_loading:ie.is_btn_loading,is_submit_success:ie.is_submit_success,text:(0,s.localize)("Save and submit"),primary:!0}))))}))}));var I=n(17344),D=n(97873),z=n(21143),R=n(6073);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const G=(0,a.observer)((function(e){var t,n=e.onSubmit,d=V(r.useState(!0),2),f=d[0],m=d[1],_=V(r.useState({allow_document_upload:!1,allow_poi_resubmission:!1,allow_poa_resubmission:!1,needs_poi:!1,needs_poa:!1,has_poi:!1,resubmit_poa:!1,has_submitted_poa:!1,document_status:void 0,is_age_verified:!1,poa_address_mismatch:!1}),2),p=_[0],h=_[1],v=(0,a.useStore)(),y=v.client,b=v.notifications,g=v.common,w=v.ui,E=g.app_routing_history,S=y.landing_company_shortcode,x=y.has_restricted_mt5_account,O=y.is_switching,j=w.is_verification_modal_visible,L=b.refreshNotifications,C="iom"===S||"malta"===S;r.useEffect((function(){O||i.WS.authorized.getAccountStatus().then((function(e){var t=e.get_account_status;if(t){var n=(0,R.C)(t),r=n.allow_document_upload,o=n.allow_poa_resubmission,i=n.document_status,a=n.has_submitted_poa,s=n.is_age_verified,u=n.needs_poa,c=n.needs_poi,l=n.poa_address_mismatch;h((function(e){return F(F({},e),{},{allow_document_upload:r,allow_poa_resubmission:o,document_status:i,has_submitted_poa:a,is_age_verified:s,needs_poa:u,needs_poi:c,poa_address_mismatch:l})})),m(!1),L()}}))}),[O,L]);var k=function(){h((function(e){return F(F({},e),{resubmit_poa:!0})}))},A=function(e){h((function(t){return F(F({},t),{has_submitted_poa:!0,needs_poi:e})})),j&&n()},P=p.allow_document_upload,N=p.allow_poa_resubmission,Z=p.document_status,Y=p.needs_poi,U=p.resubmit_poa,M=p.has_submitted_poa,G=p.is_age_verified,B=p.poa_address_mismatch,q=(0,i.getPlatformRedirect)(E),H=Object.keys(i.platforms).includes(null!==(t=null==q?void 0:q.ref)&&void 0!==t?t:"")&&r.createElement(o.Button,{primary:!0,className:"proof-of-identity__redirect",onClick:function(){var e,t=null===(e=i.platforms[q.ref])||void 0===e?void 0:e.url;t&&(window.location.href=t,window.sessionStorage.removeItem("config.platform"))}},r.createElement(s.Localize,{i18n_default_text:"Back to {{platform_name}}",values:{platform_name:q.name}}));if(f)return r.createElement(o.Loading,{is_fullscreen:!1,className:"account__initial-loader"});if(!P||!G&&!N&&"none"===Z&&C)return r.createElement(l.Z,null);if(M&&!B)return r.createElement(I.Z,{needs_poi:Y,redirect_button:H});if(U||N||x&&Z&&["expired","rejected","suspected"].includes(Z)||B)return r.createElement(T,{is_resubmit:!0,onSubmit:A});switch(Z){case i.AUTH_STATUS_CODES.NONE:return r.createElement(T,{onSubmit:A});case i.AUTH_STATUS_CODES.PENDING:return r.createElement(c.Z,{needs_poi:Y,redirect_button:H});case i.AUTH_STATUS_CODES.VERIFIED:return r.createElement(z.Z,{needs_poi:Y,redirect_button:H});case i.AUTH_STATUS_CODES.EXPIRED:return r.createElement(u.Z,{onClick:k});case i.AUTH_STATUS_CODES.REJECTED:case i.AUTH_STATUS_CODES.SUSPECTED:return r.createElement(D.Z,{onClick:k});default:return null}}))},93905:(e,t,n)=>{n.d(t,{Z:()=>O});var r=n(32735),o=n(4390),i=n(22568),a=n(68461),s=n(11490),u=n(59472),c=n(20568),l=n(58727),d=n(93345),f=n(40841),m=n.n(f),_=n(44850);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const v=function(e){var t=e.is_onfido_disabled,n=e.is_onfido_container_hidden,i=e.onfido_element_id,s=void 0===i?"onfido":i,u=e.is_confirmed,c=e.data_testid,l=e.is_onfido_initialized,d=p(r.useState(!1),2),f=d[0],h=d[1],v=r.useRef(),y=r.useRef();return r.useEffect((function(){u&&(v.current=setTimeout((function(){h(!0)}),800),y.current=setTimeout((function(){h(!1)}),4650))}),[u]),r.useEffect((function(){return function(){clearTimeout(v.current),clearTimeout(y.current)}}),[]),r.createElement("div",{className:"onfido-container-view_wrapper"},r.createElement("div",{className:m()({"onfido-container__status-message_container":!t})},r.createElement(o.Z,{appear:f,in:f,timeout:{exit:350},classNames:{exit:"onfido-container__status-message--exit"},unmountOnExit:!0},r.createElement(a.HintBox,{className:"onfido-container__status-message",icon:"IcAlertAnnounce",message:r.createElement(a.Text,{as:"p",size:"xxxs"},r.createElement(_.Localize,{i18n_default_text:"Your personal details have been saved successfully."})),is_info:!0}))),r.createElement("section",null,t&&l&&r.createElement("div",{className:"onfido-container__info-message"},r.createElement(a.HintBox,{icon:"IcInfoBlue",message:r.createElement(a.Text,{as:"p",size:"xxxs"},r.createElement(_.Localize,{i18n_default_text:"Hit the checkbox above to choose your document."})),is_info:!0})),r.createElement("div",{"data-testid":c,id:s,className:m()({"onfido-container__disabled":t,"onfido-container__hidden":n})})))};var y=n(46417);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(){g=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),s=new L(o||[]);return r(a,"_invoke",{value:S(e,n,s)}),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function f(){}function m(){}function _(){}var p={};u(p,i,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(C([])));v&&v!==t&&n.call(v,i)&&(p=v);var y=_.prototype=f.prototype=Object.create(p);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(r,i,a,s){var u=l(e[r],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==b(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,s)}),(function(e){o("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return o("throw",e,a,s)}))}s(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function S(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=l(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function C(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=_,r(y,"constructor",{value:_,configurable:!0}),r(_,"constructor",{value:m,configurable:!0}),m.displayName=u(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},w(E.prototype),u(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(y),u(y,s,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function w(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x=(0,u.observer)((function(e){var t,n,f=e.country_code,m=e.documents_supported,_=e.getChangeableFields,p=e.handleViewComplete,h=e.height,b=e.is_default_enabled,S=E(r.useState(),2),x=S[0],O=S[1],j=E(r.useState(""),2),L=j[0],C=j[1],k=E(r.useState(!0),2),A=k[0],P=k[1],N=E(r.useState(!1),2),T=N[0],I=N[1],D=E(r.useState(!1),2),z=D[0],R=D[1],Z=(0,i.useSettings)().data,Y=(0,s.useNotificationEvent)(),F=Y.send,U=Y.isSuccess,V=(0,u.useStore)(),M=V.common,G=V.ui,B=M.current_language,q=G.is_mobile,H=(0,y.N0)(f),W=(0,y.Ww)(f),$=(0,s.useServiceToken)({service:"onfido",country:W}),J=$.service_token,K=$.isSuccess,Q=$.isError,X=$.error,ee=$.isLoading,te=r.useRef(),ne=Array.isArray(m)?m:Object.keys(m).map((function(e){return m[e].display_name})),re=r.useCallback((function(e){var t;null==te||null===(t=te.current)||void 0===t||t.tearDown();var n=Object.keys(e).map((function(t){var n;return null===(n=e[t])||void 0===n?void 0:n.id}));null!=n&&n.length&&F({category:"authentication",event:"poi_documents_uploaded",args:{documents:n}})}),[F]),oe=r.useCallback(function(){var e,t=(e=g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.Onfido.init({containerId:"onfido",language:(0,y.fI)(B),token:t,useModal:!1,useMemoryHistory:!0,onComplete:re,steps:[{type:"document",options:{documentTypes:{passport:ne.some((function(e){return/Passport/g.test(e)})),driving_licence:!!ne.some((function(e){return/Driving Licence/g.test(e)}))&&{country:H},national_identity_card:!!ne.some((function(e){return/National Identity Card/g.test(e)}))&&{country:H}},hideCountrySelection:!0}},"face"]});case 5:te.current=e.sent,R(!0),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),O(null!==(n=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==n?n:e.t0),P(!0),te.current=void 0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){w(i,r,o,a,s,"next",e)}function s(e){w(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[re,ne,H,B]),ie=(0,r.useCallback)((function(){I(!0),P(!1)}),[]);return r.useEffect((function(){var e,t;K&&null!=J&&null!==(e=J.onfido)&&void 0!==e&&e.token?oe(null==J||null===(t=J.onfido)||void 0===t?void 0:t.token):Q&&function(e){switch(e.code){case"MissingPersonalDetails":C("all");break;case"InvalidPostalCode":C("postal_code");break;default:O(e.message)}}(X)}),[X,oe,Q,K,null==J||null===(t=J.onfido)||void 0===t?void 0:t.token]),r.useEffect((function(){b&&P(!1)}),[b]),r.useEffect((function(){U&&p()}),[p,U]),ee?n=r.createElement(a.Loading,{is_fullscreen:!1}):L?n=r.createElement(l.Z,{has_invalid_postal_code:"postal_code"===L,from:"proof_of_identity"}):x&&(n=r.createElement(c.Z,{message:x})),r.createElement(a.ThemedScrollbars,{is_bypassed:q,height:h},r.createElement("div",{className:"onfido-container"},n||r.createElement(o.Z,{appear:A,in:A,timeout:{exit:350},classNames:{exit:"account-form__poi-confirm-example_wrapper--exit"},unmountOnExit:!0},r.createElement("div",{className:"account-form__poi-confirm-example_wrapper account-form__poi-confirm-example_container"},r.createElement(d.Z,{account_settings:Z,getChangeableFields:_,onFormConfirm:ie}))),r.createElement(v,{is_onfido_disabled:A,is_confirmed:T,is_onfido_container_hidden:!!n,is_onfido_initialized:z})))}));x.displayName="OnfidoSdkViewContainer";const O=x},88706:(e,t,n)=>{n.d(t,{Z:()=>N});var r=n(32735),o=n(39796),i=n(68461),a=n(68722),s=n(59472),u=n(60758),c=n(38375),l=n(20568),d=n(7575),f=n(84195),m=n(47063),_=n(60938);const p=function(e){var t=e.handleRequireSubmission,n=e.idv,o=e.is_from_external,i=e.needs_poa,s=e.redirect_button,c=n.status,l=n.submissions_left,d=n.last_rejected;switch(c){case u.Yy.pending:return r.createElement(m.Z,{is_from_external:o,mismatch_status:(0,a.formatIDVError)(d,c),needs_poa:i,redirect_button:s});case u.Yy.rejected:case u.Yy.suspected:case u.Yy.expired:return Number(l)<1?r.createElement(f.Z,{handleRequireSubmission:t}):null;case u.Yy.verified:return r.createElement(_.Z,{is_from_external:o,needs_poa:i,redirect_button:s});default:return null}};var h=n(69559),v=n(44850),y=n(52184),b=n(4592),g=n(45587),w=n(84179),E=n(1690);const S=function(e){var t=e.handleRequireSubmission,n=e.is_from_external,o=e.needs_poa,i=e.onfido,s=e.redirect_button,c=e.manual,l=e.setIsCfdPoiCompleted,d=e.country_code,f=e.handleViewComplete,m=i.status,_=i.submissions_left,p=i.last_rejected;switch(m){case u.Yy.pending:return r.createElement(b.Z,{is_from_external:n,needs_poa:o,redirect_button:s});case u.Yy.rejected:case u.Yy.suspected:case u.Yy.expired:var h=(0,a.formatOnfidoError)(m,p);return Number(_)<1?r.createElement(E.Z,{manual:c,is_from_external:n,setIsCfdPoiCompleted:l,country_code:d,handleViewComplete:f,onfido:i}):r.createElement(w.Z,{rejected_reasons:h,handleRequireSubmission:t});case u.Yy.verified:return r.createElement(g.Z,{is_from_external:n,needs_poa:o,redirect_button:s});default:return null}};var x=n(83735),O=n(28890),j=n(22844),L=n(93905);const C=(0,s.observer)((function(e){var t=e.allow_poi_resubmission,n=e.has_require_submission,o=e.height,i=e.identity_last_attempt,c=e.idv,l=e.is_from_external,d=e.is_idv_disallowed,f=e.needs_poa,_=e.onfido,p=e.onStateChange,h=e.redirect_button,v=e.residence_list,y=e.setIsCfdPoiCompleted,g=e.should_show_mismatch_form,w=r.useContext(a.POIContext),S=w.submission_service,C=w.setSubmissionService,k=w.submission_status,A=w.setSubmissionStatus,P=w.selected_country,N=w.setSelectedCountry,T=(0,s.useStore)(),I=T.client,D=T.notifications,z=I.account_settings,R=I.getChangeableFields,Z=I.account_status,Y=D.refreshNotifications,F="high"===Z.risk_classification,U=function(){p&&"function"==typeof p&&p(u.Yy.pending),A(u.DR.complete),a.WS.authorized.getAccountStatus().then((function(){Y()}))},V=r.useCallback((function(e){return v.find((function(t){return t.value===e}))}),[v]),M=n||t,G=(0,a.formatIDVError)(c.last_rejected,c.status,F),B=r.useCallback((function(e){var t=e.service,n=e.country_code;switch(N(V(n)),t){case u.vL.idv:case u.vL.onfido:Number(c.submissions_left)>0||Number(_.submissions_left)>0?A(u.DR.selecting):(C(u.vL.manual),A(u.DR.submitting));break;case u.vL.manual:C(u.vL.manual),A(u.DR.submitting)}}),[V,c.submissions_left,_.submissions_left,N,C,A,d]);switch(r.useEffect((function(){k==u.DR.selecting&&(M&&i?B(i):G&&[a.IDV_ERROR_STATUS.DobMismatch.code,a.IDV_ERROR_STATUS.NameMismatch.code,a.IDV_ERROR_STATUS.NameDobMismatch.code].includes(G)&&c.submissions_left>0?(C(u.vL.idv),A(u.DR.submitting)):A(u.DR.selecting))}),[t,i,M,B,k,c,G,C,A]),k){case u.DR.selecting:return r.createElement(x.Z,{handleSelectionNext:function(){if(Object.keys(P).length){var e=c.submissions_left,t=_.submissions_left,n=P.identity.services.idv.is_country_supported,r=P.identity.services.onfido.is_country_supported&&"ng"!==P.value;n&&Number(e)>0&&!d?C(u.vL.idv):Number(t)>0&&r?C(u.vL.onfido):C(u.vL.manual),A(u.DR.submitting)}},is_from_external:l,mismatch_status:G});case u.DR.submitting:switch(S){case u.vL.idv:return g?r.createElement(j.Z,{account_settings:z,getChangeableFields:R,mismatch_status:G,residence_list:v,handleSubmit:U,latest_status:i,selected_country:P}):r.createElement(O.Z,{handleViewComplete:U,handleBack:function(){return A(u.DR.selecting)},selected_country:P});case u.vL.onfido:var q=P.value,H=P.identity.services.onfido.documents_supported,W=Object.keys(H).map((function(e){return H[e].display_name}));return r.createElement(L.Z,{country_code:q,documents_supported:W,getChangeableFields:R,handleViewComplete:U,height:o});case u.vL.manual:return r.createElement(E.Z,{country_code:P.value,is_from_external:l,setIsCfdPoiCompleted:y,allow_poi_resubmission:t,handleViewComplete:U,onfido:_});default:return null}case u.DR.complete:switch(S){case u.vL.idv:return r.createElement(m.Z,{is_from_external:l,mismatch_status:G,needs_poa:f,redirect_button:h});case u.vL.manual:return r.createElement(b.Z,{is_from_external:l,needs_poa:f,redirect_button:h,is_manual_upload:!0});case u.vL.onfido:return r.createElement(b.Z,{is_from_external:l,needs_poa:f,redirect_button:h});default:return null}default:return null}}));var k=n(6073);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const N=(0,s.observer)((function(e){var t=e.height,n=e.is_from_external,f=e.onStateChange,m=e.setIsCfdPoiCompleted,_=e.getChangeableFields,w=e.updateAccountStatus,x=(0,o.useHistory)(),O=A(r.useState(),2),j=O[0],L=O[1],P=A(r.useState(!1),2),N=P[0],T=P[1],I=A(r.useState([]),2),D=I[0],z=I[1],R=A(r.useState(!0),2),Z=R[0],Y=R[1],F=(0,s.useStore)(),U=F.client,V=F.common,M=F.notifications,G=U.account_settings,B=U.account_status,q=U.fetchResidenceList,H=U.is_switching,W=U.is_high_risk,$=U.is_withdrawal_lock,J=U.should_allow_authentication,K=U.is_virtual,Q=V.app_routing_history,X=V.routeBackInApp,ee=V.is_language_changing,te=M.refreshNotifications,ne=(0,a.getPlatformRedirect)(Q),re=Object.keys(a.platforms).includes(null==ne?void 0:ne.ref),oe=function(){return T(!0)},ie=(null==G?void 0:G.citizen)||(null==G?void 0:G.country_code),ae=function(){a.WS.authorized.getAccountStatus().then((function(){te()}))},se=r.useCallback((function(){q().then((function(e){e.error?L(e.error):z(e.residence_list)}))}),[q]);if(r.useEffect((function(){ee&&se()}),[ee,se]),r.useEffect((function(){H||(L(null),a.WS.authorized.getAccountStatus().then((function(e){if(e.error)return L(e.error),void Y(!1);se(),Y(!1)})))}),[se,H]),j)return r.createElement(l.Z,{error_message:(null==j?void 0:j.message)||j});if(Z||H||(0,a.isEmptyObject)(B)||0===D.length)return r.createElement(i.Loading,{is_fullscreen:!1});if(K)return r.createElement(c.Z,null);var ue=(0,k.C)(B),ce=ue.idv,le=ue.allow_poi_resubmission,de=ue.identity_last_attempt,fe=ue.identity_status,me=ue.is_age_verified,_e=ue.is_idv_disallowed,pe=ue.manual,he=ue.needs_poa,ve=ue.onfido,ye=W&&$;if(!J&&!me)return r.createElement(y.Z,null);var be=re&&r.createElement(i.Button,{primary:!0,className:"proof-of-identity__redirect",onClick:function(){var e,t=a.platforms[ne.ref],n=null!=t?t:{},r=n.is_hard_redirect,o=void 0!==r&&r,i=n.url,s=void 0===i?"":i;o?(window.location.href=s,window.sessionStorage.removeItem("config.platform")):(e=ne.route,X(x,[e]))}},r.createElement(v.Localize,{i18n_default_text:"Back to {{platform_name}}",values:{platform_name:ne.name}})),ge=ce.submissions_left>0&&[u.Yy.rejected,u.Yy.suspected,u.Yy.expired].includes(ce.status);if(fe===u.Yy.none||N||le||ge)return r.createElement(C,{account_settings:G,allow_poi_resubmission:le,has_require_submission:N,height:null!=t?t:null,getChangeableFields:_,identity_last_attempt:de,idv:ce,is_from_external:!!n,is_idv_disallowed:_e||ye,manual:pe,needs_poa:he,onfido:ve,onStateChange:f,redirect_button:be,refreshNotifications:te,residence_list:D,setIsCfdPoiCompleted:m,updateAccountStatus:w,should_show_mismatch_form:ge});if(!de||fe===u.Yy.verified&&fe!==de.status)switch(fe){case u.Yy.pending:return r.createElement(b.Z,{is_from_external:!!n,needs_poa:he,redirect_button:be,is_manual_upload:"pending"===(null==pe?void 0:pe.status)});case u.Yy.verified:return r.createElement(g.Z,{is_from_external:!!n,needs_poa:he,redirect_button:be});case u.Yy.expired:return r.createElement(d.Z,{is_from_external:!!n,redirect_button:be,handleRequireSubmission:oe});case u.Yy.rejected:case u.Yy.suspected:return r.createElement(h.Z,{handleRequireSubmission:oe})}switch(de.service){case u.vL.idv:return r.createElement(p,{account_settings:G,handleRequireSubmission:oe,getChangeableFields:_,idv:ce,is_from_external:!!n,needs_poa:he,redirect_button:be,residence_list:D});case u.vL.onfido:return r.createElement(S,{handleRequireSubmission:oe,is_from_external:!!n,needs_poa:he,onfido:ve,manual:pe,setIsCfdPoiCompleted:m,redirect_button:be,country_code:ie,handleViewComplete:ae});case u.vL.manual:return r.createElement(E.Z,{manual:pe,country_code:ie,is_from_external:n,setIsCfdPoiCompleted:m,needs_poa:he,redirect_button:be,handleRequireSubmission:oe,handleViewComplete:ae,onfido:ve});default:return null}}))},60758:(e,t,n)=>{n.d(t,{DR:()=>o,Yy:()=>r,vL:()=>i});var r={none:"none",pending:"pending",rejected:"rejected",verified:"verified",expired:"expired",suspected:"suspected"},o={selecting:"selecting",submitting:"submitting",complete:"complete"},i={idv:"idv",onfido:"onfido",manual:"manual"}}}]);
//# sourceMappingURL=core.main~9514df9a.91d7105262e09c525d2a.js.map