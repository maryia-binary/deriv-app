"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1301],{95302:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(32735),i=n(61055),a=n(60216),s=n.n(a),o=n(68461),c=n(68722),l=n(44850),u=n(77178),d=n(42671),p=n(59472);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}var f=function(e){var t=e.class_prefix,n=e.errors,a=e.touched,s=e.setFieldValue,c=e.citizenship_list;return r.createElement("div",{className:"".concat(t,"__residence-selection")},r.createElement(i.Field,{name:"citizenship"},(function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(o.Autocomplete,_({},t,{autoComplete:"off",input_id:"dt_core_set-citizenship-form_signup-citizenship-select",type:"text",label:(0,l.localize)("Citizenship"),error:a.citizenship&&n.citizenship,required:!0,list_items:c,onItemSelection:function(e){var t=e.value,n=e.text;return s("citizenship",t?n:"",!0)}})))})),r.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",color:"less-prominent"},r.createElement(l.Localize,{i18n_default_text:"Select your citizenship/nationality as it appears on your passport or other government-issued ID."})))};f.propTypes={class_prefix:s().string,citizenship_list:s().arrayOf(s().object),errors:s().object,setFieldTouched:s().func,setFieldValue:s().func,touched:s().object};const m=f;var b=n(40841),g=n.n(b),v=function(e){var t=e.children;return r.createElement("div",{className:"signup-separator-container"},t)};v.Line=function(e){var t=e.is_invisible;return r.createElement("div",{className:g()("signup-separator-container__line",{"signup-separator-container__line--invisible":t})})};const h=v;function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const w=(0,p.observer)((function(e){var t=e.api_error,n=e.errors,a=e.handleBlur,s=e.handleChange,d=e.isModalVisible,_=e.isSubmitting,f=e.touched,m=e.pw_input,b=e.setFieldTouched,v=e.updatePassword,w=e.values,E=(0,p.useStore)().ui.is_mobile;return r.useEffect((function(){u.Analytics.trackEvent("ce_virtual_signup_form",{action:"password_screen_opened",form_name:E?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"})}),[]),r.createElement("div",{className:"account-signup__password-selection"},r.createElement(o.Text,{as:"p",size:E?"xs":"s",weight:"bold",className:"account-signup__heading",align:"center"},r.createElement(l.Localize,{i18n_default_text:"Keep your account secure with a password"})),r.createElement(i.Field,{name:"password"},(function(e){var t=e.field;return r.createElement(o.PasswordMeter,{input:m,has_error:!(!f.password||!n.password),custom_feedback_messages:(0,c.getErrorMessages)().password_warnings},r.createElement(o.PasswordInput,y({},t,{autoComplete:"new-password",className:"account-signup__password-field",label:(0,l.localize)("Create a password"),error:f.password&&n.password,required:!0,value:w.password,onBlur:a,onChange:function(e){var t=e.target;b("password",!0),t&&v(t.value),s(e)},input_id:"dt_core_account-signup-modal_account-signup-password-field"})))})),r.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",align:"center"},r.createElement(l.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),r.createElement(h,null),t?r.createElement(r.Fragment,null,r.createElement(o.Text,{as:"p",size:"xxs",color:"loss-danger",className:"account-signup__subtext account-signup__subtext--error",align:"center"},t),r.createElement("div",{className:"account-signup__error-wrapper"},r.createElement(o.Button,{large:!0,secondary:!0,text:(0,l.localize)("Cancel"),type:"button",onClick:function(){return d(!1)}}),r.createElement(o.Button,{large:!0,primary:!0,text:(0,l.localize)("Create new account"),type:"button",onClick:function(){return(0,c.redirectToSignUp)()}}))):r.createElement("div",{className:"account-signup__footer"},r.createElement(o.Button,{className:g()("account-signup__btn",{"account-signup__btn--disabled":!w.password||n.password||_}),id:"dt_core_account-signup-modal_submit-btn",type:"submit",is_disabled:!w.password||!!n.password||_,text:(0,l.localize)("Start trading"),large:!0,primary:!0})))}));var E=n(99727);const x=function(e,t){var n={};if((0,c.validLength)(e.password,{min:8,max:25})?(0,c.validPassword)(e.password)||(n.password=(0,c.getErrorMessages)().password()):n.password=(0,l.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.residence){var r=t.findIndex((function(t){return t.text.toLowerCase()===e.residence.toLowerCase()}));-1!==r&&"DISABLED"!==t[r].disabled||(n.residence=(0,l.localize)("Unfortunately, {{website_name}} is not available in your country.",{website_name:c.website_name}))}else n.residence=!0;e.citizenship?-1===t.findIndex((function(t){return t.text.toLowerCase()===e.citizenship.toLowerCase()}))&&(n.citizenship=!0):n.citizenship=!0;return n};function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t=e.enableApp,n=e.is_mobile,a=e.isModalVisible,s=e.clients_country,p=e.onSignup,_=e.residence_list,f=e.setIsFromSignupAccount,b=C(r.useState(!1),2),g=b[0],v=b[1],h=C(r.useState(!0),2),y=h[0],S=h[1],z=C(r.useState(""),2),j=z[0],F=z[1],A=r.useRef(),N=C(r.useState(""),2),k=N[0],T=N[1],P=C(r.useState(!1),2),I=P[0],L=P[1],V=C(r.useState(!1),2),D=V[0],M=V[1],B=function(e){var t,n;return e&&"br"===(null===(t=_[U(e)])||void 0===t||null===(n=t.value)||void 0===n?void 0:n.toLowerCase())},q=function(e,t){return!((!B(e.residence)||D)&&e.residence&&!t.residence&&e.citizenship&&!t.citizenship)},R=function(e){T(e)};r.useEffect((function(){d.WS.wait("website_status","residence_list").then((function(){s&&_&&F((0,c.getLocation)(_,s,"text")),S(!1)})),u.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_confirmed",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"}),u.Analytics.trackEvent("ce_virtual_signup_form",{action:"country_selection_screen_opened",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"})}),[]);var U=function(e){return _.findIndex((function(t){return t.text.toLowerCase()===(null==e?void 0:e.toLowerCase())}))},Z=function(e){e?(v(e),u.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_flow_error",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default",error_message:e})):(a(!1),f(!0),c.SessionStore.remove("signup_query_param"),t(),u.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_done",form_name:n?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"}))};return r.createElement("div",{className:"account-signup"},y?r.createElement(o.Loading,{is_fullscreen:!1}):r.createElement(i.Formik,{initialValues:{citizenship:"",password:"",residence:""},validate:function(e){return x(e,_)},onSubmit:function(e){var t=U(e.residence),n=U(e.citizenship),r=O(O({},e),{},{residence:_[t].value,citizenship:_[n].value});p(r,Z)},residence_list:_},(function(e){var t=e.isSubmitting,s=e.handleBlur,c=e.errors,u=e.handleChange,d=e.values,p=e.setFieldValue,f=e.setFieldTouched,b=e.touched;return r.createElement(i.Form,null,I?r.createElement(w,{api_error:g,errors:c,handleBlur:s,handleChange:u,isModalVisible:a,isSubmitting:t,touched:b,pw_input:k,setFieldTouched:f,updatePassword:R,values:d}):r.createElement("div",{className:"account-signup__location-selection"},r.createElement(o.Text,{as:"h1",size:n?"xs":"s",weight:"bold",className:"account-signup__heading"},(0,l.localize)("Select your country and citizenship:")),r.createElement(E.Z,{class_prefix:"account-signup",errors:c,touched:b,onResidenceSelectionChanged:function(){return M(!1)},setFieldTouched:f,setFieldValue:p,residence_list:_,default_value:j,history_value:A.current}),r.createElement(m,{class_prefix:"account-signup",errors:c,touched:b,setFieldTouched:f,setFieldValue:p,citizenship_list:_}),B(d.residence)&&r.createElement(o.Checkbox,{checked:D,onChange:function(){return M(!D)},className:"account-signup__checkbox",classNameLabel:"account-signup__label",label:(0,l.localize)("I hereby confirm that my request for opening an account with Deriv to trade OTC products issued and offered exclusively outside Brazil was initiated by me. I fully understand that Deriv is not regulated by CVM and by approaching Deriv I intend to set up a relation with a foreign company.")}),r.createElement("div",{className:"account-signup__footer"},r.createElement(o.Button,{className:"account-signup__btn",is_disabled:q(d,c),type:"button",onClick:function(){A.current=d,L(!0)},primary:!0,large:!0,text:(0,l.localize)("Next")}))))})))};A.propTypes={clients_country:s().string,enableApp:s().func,onSignup:s().func,residence_list:s().array,is_mobile:s().bool,isModalVisible:s().func,setIsFromSignupAccount:s().func};const N=(0,p.observer)((function(){var e=(0,p.useStore)(),t=e.ui,n=e.client,i=n.onSignup,a=n.is_logged_in,s=n.residence_list,c=n.clients_country,l=n.logout,u=t.is_account_signup_modal_visible,d=t.toggleAccountSignupModal,_=t.enableApp,f=t.disableApp,m=t.is_loading,b=t.is_mobile,g=t.setIsFromSignupAccount;return r.useEffect((function(){u&&a&&l()}),[u,a,l]),r.createElement(o.Dialog,{className:"account-signup__dialog",is_visible:u,disableApp:f,enableApp:_,is_loading:m||!s.length,is_mobile_full_width:!1},r.createElement(A,{clients_country:c,onSignup:i,residence_list:s,is_mobile:b,isModalVisible:d,enableApp:_,setIsFromSignupAccount:g}))}))},99727:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(32735),i=n(61055),a=n(60216),s=n.n(a),o=n(68461),c=n(44850);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var u=function(e){var t,n=e.children,a=e.class_prefix,s=void 0===a?"set-residence":a,u=e.default_value,d=e.history_value,p=e.errors,_=e.onResidenceSelectionChanged,f=e.touched,m=e.setFieldTouched,b=e.setFieldValue,g=e.residence_list;return r.useEffect((function(){u&&(m("residence",!0),b("residence",u,!0))}),[]),r.createElement("div",{className:"".concat(s,"__residence-selection")},r.createElement(i.Field,{name:"residence"},(function(e){var t=e.field;return r.createElement(r.Fragment,null,r.createElement(o.Autocomplete,l({},t,{autoComplete:"off",input_id:"dt_core_set-residence-form_signup-residence-select",type:"text",label:(0,c.localize)("Country of residence"),historyValue:d,error:f.residence&&p.residence,required:!0,list_items:g,onItemSelection:function(e){var t=e.value,n=e.text;b("residence",t?n:"",!0),null==_||_()}})))})),!(null!=p&&null!==(t=p.residence)&&void 0!==t&&t.length)&&r.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",color:"less-prominent"},r.createElement(c.Localize,{i18n_default_text:"Select the country where you currently live."})),r.createElement("div",{className:"".concat(s,"__button_wrapper")},n))};u.propTypes={children:s().object,class_prefix:s().string,default_value:s().string,history_value:s().string,errors:s().object,onResidenceSelectionChanged:s().func,residence_list:s().arrayOf(s().object),setFieldTouched:s().func,setFieldValue:s().func,touched:s().object};const d=u}}]);
//# sourceMappingURL=core.account-signup-modal.7f52de7092fb07edf5d6.js.map