(self.webpackChunk=self.webpackChunk||[]).push([[9418],{60946:(e,t,a)=>{var n,l,i,r;self,e.exports=(n=a(47108),l=a(64259),i=a(44850),r=a(32735),(()=>{"use strict";var e={"@deriv/components":e=>{e.exports=n},"@deriv/shared":e=>{e.exports=l},"@deriv/translations":e=>{e.exports=i},react:e=>{e.exports=r}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{a.d(o,{default:()=>r});var e=a("react"),t=a.n(e),n=a("@deriv/translations"),l=a("@deriv/components"),i=a("@deriv/shared");const r=function(e){var a=e.identifier_title,r=e.is_modal_when_mobile,o=void 0!==r&&r,s=e.is_open,c=e.has_live_chat,m=void 0!==c&&c,u=e.onClickSendEmail,d=e.onClose,_=m?t().createElement(n.Localize,{i18n_default_text:"Still didn't get the email? Please contact us via <0>live chat.</0>",components:[t().createElement("span",{className:"send-email-template__footer-live-chat",key:0,onClick:function(){var e;d(),null===(e=window.LiveChatWidget)||void 0===e||e.call("maximize")}},t().createElement(l.Popover,{className:"send-email-template__footer-live-chat__link",classNameBubble:"help-centre__tooltip",alignment:"top",message:(0,n.localize)("Live chat"),zIndex:"9999"}))]}):null,p=t().createElement(l.SendEmailTemplate,{className:"sent-email",subtitle:function(){var e="";switch(a){case i.CFD_PLATFORMS.DXTRADE:e=t().createElement(n.Localize,{i18n_default_text:"Please click on the link in the email to change your <0>{{platform_name_dxtrade}}</0> password.",components:[t().createElement("span",{className:"send-email-template__subtitle-platform",key:0})],values:{platform_name_dxtrade:(0,i.getPlatformSettings)("dxtrade").name}});break;case i.CFD_PLATFORMS.MT5:e=(0,n.localize)("Please click on the link in the email to change your Deriv MT5 password.");break;case"Google":case"Facebook":e=(0,n.localize)("Check your {{ identifier_title }} account email and click the link in the email to proceed.",{identifier_title:a});break;case"Change_Email":e=(0,n.localize)("Check your email and click the link in the email to proceed.");break;default:e=(0,n.localize)("Please click on the link in the email to reset your password.")}return e}(),title:(0,n.localize)("We’ve sent you an email"),lbl_no_receive:(0,n.localize)("Didn't receive the email?"),txt_resend:(0,n.localize)("Resend email"),txt_resend_in:(0,n.localize)("Resend email in"),onClickSendEmail:u,live_chat:_},[{key:"email_spam",icon:"IcEmailSpam",content:(0,n.localize)("The email is in your spam folder (Sometimes things get lost there).")},{key:"wrong_email",icon:"IcEmail",content:(0,n.localize)("You accidentally gave us another email address (Usually a work or a personal one instead of the one you meant).")},{key:"wrong_typo",icon:"IcEmailTypo",content:(0,n.localize)("The email address you entered had a mistake or typo (happens to the best of us).")},{key:"email_firewall",icon:"IcEmailFirewall",content:(0,n.localize)("We can’t deliver the email to this address (Usually because of firewalls or filtering).")}].map((function(e){return t().createElement("div",{className:"sent-email__content",key:e.key},t().createElement(l.Icon,{icon:e.icon,size:32}),t().createElement(l.Text,{size:"xxs",as:"p"},e.content))})));return(0,i.isMobile)()&&!o?t().createElement(l.MobileDialog,{portal_element_id:"modal_root",title:(0,n.localize)("We’ve sent you an email"),wrapper_classname:"mt5-email-sent",visible:s,onClose:d,has_content_scroll:!0},p):t().createElement(l.Modal,{className:"sent-email__modal",is_open:s,has_close_icon:!0,should_header_stick_body:!0,title:"",toggleModal:d,width:"440px"},t().createElement(l.Div100vhContainer,{className:"account__scrollbars_container-wrapper",is_disabled:(0,i.isDesktop)(),height_offset:"80px"},t().createElement(l.Modal.Body,null,t().createElement("div",{onClick:d,className:"send-email-template__close","data-testid":"dt_send_email_template_close"},t().createElement(l.Icon,{icon:"IcCross"})),p)))}})(),o.default})())},91991:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var n=a(32735),l=a(60216),i=a.n(l),r=a(40841),o=a.n(r),s=a(61055),c=a(47108),m=a(64259),u=a(44850),d=a(15736),_=a(60946),p=a.n(_),f=a(42671);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){v(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t,a){return(t=function(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,l,i,r,o=[],s=!0,c=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);s=!0);}catch(e){c=!0,l=e}finally{try{if(!s&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(c)throw l}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var w=function(e){var t=e.changed_email,a=e.is_open,l=e.onClose,i=e.prev_email,r=e.setErrorMessage,o=e.verification_code,s=e.is_social_signup,m=y(n.useState(null),2),d=m[0],_=m[1],g=y(n.useState(!1),2),h=g[0],v=g[1],E=y(n.useState(a),2),w=E[0],k=E[1];return h?n.createElement(p(),{is_open:h,onClose:function(){return v(!1)},identifier_title:"Change_Email",onClickSendEmail:function(){f.WS.changeEmail(d)},has_live_chat:!0,is_modal_when_mobile:!0}):n.createElement(c.Modal,{is_open:w,should_header_stick_body:!0,title:n.createElement(u.Localize,{i18n_default_text:"Are you sure?"}),toggleModal:l,width:"440px",is_closed_on_cancel:!1,has_close_icon:!1},n.createElement(n.Fragment,null,n.createElement("div",{className:"email-confirmation"},n.createElement(c.Text,{as:"p",color:"prominent",size:"xs",align:"left"},n.createElement(u.Localize,{i18n_default_text:"Are you sure you want to update email <0>{{prev_email}}</0> to <1>{{changed_email}}</1>?",values:{prev_email:i,changed_email:t},components:[n.createElement("strong",{key:0}),n.createElement("strong",{key:1,className:"email-confirmation__currentEmail"})]}))),n.createElement(c.Modal.Footer,null,n.createElement(c.Button,{onClick:l,has_effect:!0,text:(0,u.localize)("Cancel"),secondary:!0,large:!0}),n.createElement(c.Button,{className:"email-change_button",has_effect:!0,onClick:function(){var e;e=b({change_email:"verify",new_email:t,verification_code:o},s&&{social_signup:!0}),_((function(t){return b(b({},t),e)})),f.WS.changeEmail(e).then((function(e){e.error?(l(),r(e.error.message)):v(!0),k(!1)}))},primary:!0,large:!0},n.createElement(u.Localize,{i18n_default_text:"Confirm"})))))};function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,l,i,r,o=[],s=!0,c=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=i.call(a)).done)&&(o.push(n.value),o.length!==t);s=!0);}catch(e){c=!0,l=e}finally{try{if(!s&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(c)throw l}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}w.propTypes={changed_email:i().string,is_open:i().bool,onClose:i().func,prev_email:i().string,setErrorMessage:i().func,verification_code:i().string};var S=function(e){var t=e.disableApp,a=e.email,l=e.enableApp,i=e.is_loading,r=e.is_visible,d=e.toggleResetEmailModal,_=e.verification_code,p=e.is_social_signup,f=k(n.useState(!1),2),g=f[0],h=f[1],b=k(n.useState(null),2),v=b[0],y=b[1],E=k(n.useState(null),2),x=E[0],S=E[1];return g?n.createElement(w,{changed_email:x,is_open:g,onClose:function(){return h(!1)},prev_email:a,setErrorMessage:y,verification_code:_,is_social_signup:p}):n.createElement(s.Formik,{initialValues:{email:""},initialStatus:{reset_complete:!1,error_msg:""},validate:function(e){var t={};return e.email?(0,m.validEmail)(e.email)||(t.email=(0,m.getErrorMessages)().email()):t.email=(0,u.localize)("The email input should not be empty."),t},onSubmit:function(e){S(e.email),h(!0)}},(function(e){var a=e.errors,m=e.values,_=e.touched,p=e.isSubmitting,f=e.handleChange,g=e.setFieldTouched,h=e.status;return n.createElement(c.Dialog,{is_visible:r,disableApp:t,enableApp:l,is_loading:i,dismissable:h.error_msg,onConfirm:function(){return d(!1)},is_closed_on_cancel:!1},n.createElement("div",{className:"reset-email"},n.createElement(s.Form,null,n.createElement(n.Fragment,null,h.reset_complete?n.createElement("div",{className:"reset-email__email-selection"},n.createElement(c.Text,{as:"p",weight:"bold",className:"reset-email__heading"},n.createElement(u.Localize,{i18n_default_text:"Your password has been changed"})),n.createElement(c.Text,{align:"center",as:"p",size:"xxs",className:"reset-email__subtext"},n.createElement(u.Localize,{i18n_default_text:"We will now redirect you to the login page."}))):n.createElement("div",{className:"reset-email__email-selection"},n.createElement(c.Text,{as:"p",align:"left",weight:"bold",className:"reset-email__heading"},n.createElement(u.Localize,{i18n_default_text:"Enter a new email address"})),n.createElement(c.Text,{as:"p",color:"prominent",size:"xs",align:"left",className:"reset-email__descripton"},n.createElement(u.Localize,{i18n_default_text:"You'll log in to your Deriv account with this email address."})),n.createElement("fieldset",{className:"reset-email__fieldset"},n.createElement(c.Input,{"data-lpignore":"true",type:"text",name:"email",id:"email",placeholder:(0,u.localize)("Email address"),value:m.email,required:!0,disabled:!1,error:_.email&&a.email||v,onChange:function(e){y(""),g("email",!0),f(e)}})),n.createElement(c.Button,{className:o()("reset-email__btn",{"reset-email__btn--disabled":!m.email||a.email||p}),type:"submit",is_disabled:!m.email||!!a.email||p,primary:!0,large:!0},n.createElement(u.Localize,{i18n_default_text:"Confirm"})))))))}))};S.propTypes={disableApp:i().func,email:i().string,enableApp:i().func,is_loading:i().bool,is_visible:i().bool,verification_code:i().string,toggleResetEmailModal:i().func,is_social_signup:i().bool};const z=(0,d.$j)((function(e){var t=e.ui,a=e.client;return{disableApp:t.disableApp,email:a.email,enableApp:t.enableApp,is_loading:t.is_loading,is_visible:t.is_reset_email_modal_visible,toggleResetEmailModal:t.toggleResetEmailModal,verification_code:a.verification_code.request_email,is_social_signup:a.is_social_signup}}))(S)}}]);
//# sourceMappingURL=core.reset-email-modal.492e50454807cce3a9e4.js.map