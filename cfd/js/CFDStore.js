/*! For license information please see CFDStore.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@deriv/shared"),require("@deriv/translations"),require("mobx")):"function"==typeof define&&define.amd?define(["@deriv/shared","@deriv/translations","mobx"],e):"object"==typeof exports?exports["@deriv/cfd"]=e(require("@deriv/shared"),require("@deriv/translations"),require("mobx")):t["@deriv/cfd"]=e(t["@deriv/shared"],t["@deriv/translations"],t.mobx)}(self,((__WEBPACK_EXTERNAL_MODULE__deriv_shared__,__WEBPACK_EXTERNAL_MODULE__deriv_translations__,__WEBPACK_EXTERNAL_MODULE_mobx__)=>(()=>{"use strict";var __webpack_modules__={"./src/Stores/Modules/CFD/Helpers/cfd-config.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getCTraderCompanies\": () => (/* binding */ getCTraderCompanies),\n/* harmony export */   \"getDxCompanies\": () => (/* binding */ getDxCompanies),\n/* harmony export */   \"getFormattedJurisdictionCode\": () => (/* binding */ getFormattedJurisdictionCode),\n/* harmony export */   \"getMtCompanies\": () => (/* binding */ getMtCompanies)\n/* harmony export */ });\n/* harmony import */ var _deriv_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @deriv/shared */ \"@deriv/shared\");\n/* harmony import */ var _deriv_shared__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_deriv_shared__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _deriv_translations__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @deriv/translations */ \"@deriv/translations\");\n/* harmony import */ var _deriv_translations__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_deriv_translations__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar getDxCompanies = function getDxCompanies() {\n  var all_config = {\n    account_type: '',\n    leverage: 500,\n    short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('CFDs')\n  };\n  var synthetic_config = {\n    account_type: '',\n    leverage: 500,\n    short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Derived')\n  };\n  var financial_config = {\n    account_type: 'financial',\n    leverage: 1000,\n    short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial')\n  };\n  return {\n    demo: {\n      all: {\n        dxtrade_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo'),\n        short_title: all_config.short_title\n      },\n      synthetic: {\n        dxtrade_account_type: synthetic_config.account_type,\n        leverage: synthetic_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Derived'),\n        short_title: synthetic_config.short_title\n      },\n      financial: {\n        dxtrade_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Financial'),\n        short_title: financial_config.short_title\n      }\n    },\n    real: {\n      all: {\n        dxtrade_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Real'),\n        short_title: all_config.short_title\n      },\n      dxtrade: {\n        mt5_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Real'),\n        short_title: all_config.short_title\n      },\n      synthetic: {\n        dxtrade_account_type: synthetic_config.account_type,\n        leverage: synthetic_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Derived'),\n        short_title: synthetic_config.short_title\n      },\n      financial: {\n        dxtrade_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial'),\n        short_title: financial_config.short_title\n      }\n    }\n  };\n};\nvar getCTraderCompanies = function getCTraderCompanies() {\n  var all_config = {\n    account_type: '',\n    leverage: 500,\n    short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('All')\n  };\n  return {\n    demo: {\n      all: {\n        ctrader_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo'),\n        short_title: all_config.short_title\n      }\n    },\n    real: {\n      all: {\n        dxtrade_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('All'),\n        short_title: all_config.short_title\n      }\n    }\n  };\n};\nvar getMtCompanies = function getMtCompanies(is_eu) {\n  var all_config = {\n    account_type: '',\n    leverage: 100,\n    short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Swap-Free')\n  };\n  var synthetic_config = {\n    account_type: '',\n    leverage: 500,\n    short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Derived')\n  };\n  var financial_config = {\n    account_type: 'financial',\n    leverage: 1000,\n    short_title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial')\n  };\n  var financial_stp_config = {\n    account_type: 'financial_stp',\n    leverage: 100,\n    short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial STP')\n  };\n  return {\n    demo: {\n      all: {\n        mt5_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Swap-Free'),\n        short_title: all_config.short_title\n      },\n      all_svg: {\n        mt5_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Swap-Free SVG'),\n        short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Swap-Free SVG')\n      },\n      ctrader: {\n        mt5_account_type: all_config.account_type,\n        leverage: '500',\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo'),\n        short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('cTrader')\n      },\n      synthetic: {\n        mt5_account_type: synthetic_config.account_type,\n        leverage: synthetic_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Derived'),\n        short_title: synthetic_config.short_title\n      },\n      financial: {\n        mt5_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Financial'),\n        short_title: financial_config.short_title\n      },\n      financial_demo: {\n        mt5_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Financial'),\n        short_title: financial_config.short_title\n      },\n      synthetic_svg: {\n        mt5_account_type: synthetic_config.account_type,\n        leverage: synthetic_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Derived SVG'),\n        short_title: synthetic_config.short_title\n      },\n      financial_svg: {\n        mt5_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Financial SVG'),\n        short_title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial SVG')\n      },\n      financial_stp: {\n        mt5_account_type: financial_stp_config.account_type,\n        leverage: financial_stp_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Demo Financial STP'),\n        short_title: financial_stp_config.short_title\n      }\n    },\n    real: {\n      all: {\n        mt5_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Swap-Free'),\n        short_title: all_config.short_title\n      },\n      all_svg: {\n        mt5_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Swap-Free SVG'),\n        short_title: all_config.short_title\n      },\n      ctrader: {\n        mt5_account_type: all_config.account_type,\n        leverage: '500',\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Real'),\n        short_title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('cTrader')\n      },\n      dxtrade: {\n        mt5_account_type: all_config.account_type,\n        leverage: all_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Real'),\n        short_title: all_config.short_title\n      },\n      synthetic: {\n        mt5_account_type: synthetic_config.account_type,\n        leverage: synthetic_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Derived'),\n        short_title: synthetic_config.short_title\n      },\n      synthetic_svg: {\n        mt5_account_type: synthetic_config.account_type,\n        leverage: synthetic_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Derived SVG'),\n        short_title: synthetic_config.short_title\n      },\n      synthetic_bvi: {\n        mt5_account_type: synthetic_config.account_type,\n        leverage: synthetic_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Derived BVI'),\n        short_title: synthetic_config.short_title\n      },\n      synthetic_v: {\n        mt5_account_type: synthetic_config.account_type,\n        leverage: synthetic_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Derived Vanuatu'),\n        short_title: synthetic_config.short_title\n      },\n      financial: {\n        mt5_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial'),\n        short_title: financial_config.short_title\n      },\n      financial_svg: {\n        mt5_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial SVG'),\n        short_title: financial_config.short_title\n      },\n      financial_bvi: {\n        mt5_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial BVI'),\n        short_title: financial_config.short_title\n      },\n      financial_fx: {\n        mt5_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial Labuan'),\n        short_title: financial_config.short_title\n      },\n      financial_v: {\n        mt5_account_type: financial_config.account_type,\n        leverage: financial_config.leverage,\n        title: is_eu ? (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('CFDs') : (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial Vanuatu'),\n        short_title: financial_config.short_title\n      },\n      financial_stp: {\n        mt5_account_type: financial_stp_config.account_type,\n        leverage: financial_stp_config.leverage,\n        title: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Financial STP'),\n        short_title: financial_stp_config.short_title\n      }\n    }\n  };\n};\nvar getFormattedJurisdictionCode = function getFormattedJurisdictionCode(jurisdiction_code) {\n  var formatted_label = '';\n  switch (jurisdiction_code) {\n    case _deriv_shared__WEBPACK_IMPORTED_MODULE_0__.Jurisdiction.SVG:\n      formatted_label = (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('SVG');\n      break;\n    case _deriv_shared__WEBPACK_IMPORTED_MODULE_0__.Jurisdiction.BVI:\n      formatted_label = (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('BVI');\n      break;\n    case _deriv_shared__WEBPACK_IMPORTED_MODULE_0__.Jurisdiction.LABUAN:\n      formatted_label = (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Labuan');\n      break;\n    case _deriv_shared__WEBPACK_IMPORTED_MODULE_0__.Jurisdiction.VANUATU:\n      formatted_label = (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_1__.localize)('Vanuatu');\n      break;\n    default:\n      formatted_label = jurisdiction_code === null || jurisdiction_code === void 0 ? void 0 : jurisdiction_code.toUpperCase();\n      break;\n  }\n  return formatted_label;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3RvcmVzL01vZHVsZXMvQ0ZEL0hlbHBlcnMvY2ZkLWNvbmZpZy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BkZXJpdi9jZmQvLi9zcmMvU3RvcmVzL01vZHVsZXMvQ0ZEL0hlbHBlcnMvY2ZkLWNvbmZpZy50cz8zZDBiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEp1cmlzZGljdGlvbiB9IGZyb20gJ0BkZXJpdi9zaGFyZWQnO1xuaW1wb3J0IHsgbG9jYWxpemUgfSBmcm9tICdAZGVyaXYvdHJhbnNsYXRpb25zJztcblxuZXhwb3J0IHR5cGUgVER4Q29tcGFuaWVzID0gUmV0dXJuVHlwZTx0eXBlb2YgZ2V0RHhDb21wYW5pZXM+O1xuZXhwb3J0IHR5cGUgVE10Q29tcGFuaWVzID0gUmV0dXJuVHlwZTx0eXBlb2YgZ2V0TXRDb21wYW5pZXM+O1xuZXhwb3J0IHR5cGUgVENUcmFkZXJDb21wYW5pZXMgPSBSZXR1cm5UeXBlPHR5cGVvZiBnZXRDVHJhZGVyQ29tcGFuaWVzPjtcblxuZXhwb3J0IGNvbnN0IGdldER4Q29tcGFuaWVzID0gKCkgPT4ge1xuICAgIGNvbnN0IGFsbF9jb25maWcgPSB7XG4gICAgICAgIGFjY291bnRfdHlwZTogJycsXG4gICAgICAgIGxldmVyYWdlOiA1MDAsXG4gICAgICAgIHNob3J0X3RpdGxlOiBsb2NhbGl6ZSgnQ0ZEcycpLFxuICAgIH07XG4gICAgY29uc3Qgc3ludGhldGljX2NvbmZpZyA9IHtcbiAgICAgICAgYWNjb3VudF90eXBlOiAnJyxcbiAgICAgICAgbGV2ZXJhZ2U6IDUwMCxcbiAgICAgICAgc2hvcnRfdGl0bGU6IGxvY2FsaXplKCdEZXJpdmVkJyksXG4gICAgfTtcbiAgICBjb25zdCBmaW5hbmNpYWxfY29uZmlnID0ge1xuICAgICAgICBhY2NvdW50X3R5cGU6ICdmaW5hbmNpYWwnLFxuICAgICAgICBsZXZlcmFnZTogMTAwMCxcbiAgICAgICAgc2hvcnRfdGl0bGU6IGxvY2FsaXplKCdGaW5hbmNpYWwnKSxcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlbW86IHtcbiAgICAgICAgICAgIGFsbDoge1xuICAgICAgICAgICAgICAgIGR4dHJhZGVfYWNjb3VudF90eXBlOiBhbGxfY29uZmlnLmFjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICBsZXZlcmFnZTogYWxsX2NvbmZpZy5sZXZlcmFnZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogbG9jYWxpemUoJ0RlbW8nKSxcbiAgICAgICAgICAgICAgICBzaG9ydF90aXRsZTogYWxsX2NvbmZpZy5zaG9ydF90aXRsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzeW50aGV0aWM6IHtcbiAgICAgICAgICAgICAgICBkeHRyYWRlX2FjY291bnRfdHlwZTogc3ludGhldGljX2NvbmZpZy5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgbGV2ZXJhZ2U6IHN5bnRoZXRpY19jb25maWcubGV2ZXJhZ2UsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGxvY2FsaXplKCdEZW1vIERlcml2ZWQnKSxcbiAgICAgICAgICAgICAgICBzaG9ydF90aXRsZTogc3ludGhldGljX2NvbmZpZy5zaG9ydF90aXRsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmaW5hbmNpYWw6IHtcbiAgICAgICAgICAgICAgICBkeHRyYWRlX2FjY291bnRfdHlwZTogZmluYW5jaWFsX2NvbmZpZy5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgbGV2ZXJhZ2U6IGZpbmFuY2lhbF9jb25maWcubGV2ZXJhZ2UsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGxvY2FsaXplKCdEZW1vIEZpbmFuY2lhbCcpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBmaW5hbmNpYWxfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVhbDoge1xuICAgICAgICAgICAgYWxsOiB7XG4gICAgICAgICAgICAgICAgZHh0cmFkZV9hY2NvdW50X3R5cGU6IGFsbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBhbGxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnUmVhbCcpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBhbGxfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGR4dHJhZGU6IHtcbiAgICAgICAgICAgICAgICBtdDVfYWNjb3VudF90eXBlOiBhbGxfY29uZmlnLmFjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICBsZXZlcmFnZTogYWxsX2NvbmZpZy5sZXZlcmFnZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogbG9jYWxpemUoJ1JlYWwnKSxcbiAgICAgICAgICAgICAgICBzaG9ydF90aXRsZTogYWxsX2NvbmZpZy5zaG9ydF90aXRsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzeW50aGV0aWM6IHtcbiAgICAgICAgICAgICAgICBkeHRyYWRlX2FjY291bnRfdHlwZTogc3ludGhldGljX2NvbmZpZy5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgbGV2ZXJhZ2U6IHN5bnRoZXRpY19jb25maWcubGV2ZXJhZ2UsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGxvY2FsaXplKCdEZXJpdmVkJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IHN5bnRoZXRpY19jb25maWcuc2hvcnRfdGl0bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmluYW5jaWFsOiB7XG4gICAgICAgICAgICAgICAgZHh0cmFkZV9hY2NvdW50X3R5cGU6IGZpbmFuY2lhbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBmaW5hbmNpYWxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnRmluYW5jaWFsJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IGZpbmFuY2lhbF9jb25maWcuc2hvcnRfdGl0bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q1RyYWRlckNvbXBhbmllcyA9ICgpID0+IHtcbiAgICBjb25zdCBhbGxfY29uZmlnID0ge1xuICAgICAgICBhY2NvdW50X3R5cGU6ICcnLFxuICAgICAgICBsZXZlcmFnZTogNTAwLFxuICAgICAgICBzaG9ydF90aXRsZTogbG9jYWxpemUoJ0FsbCcpLFxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZGVtbzoge1xuICAgICAgICAgICAgYWxsOiB7XG4gICAgICAgICAgICAgICAgY3RyYWRlcl9hY2NvdW50X3R5cGU6IGFsbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBhbGxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnRGVtbycpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBhbGxfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVhbDoge1xuICAgICAgICAgICAgYWxsOiB7XG4gICAgICAgICAgICAgICAgZHh0cmFkZV9hY2NvdW50X3R5cGU6IGFsbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBhbGxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnQWxsJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IGFsbF9jb25maWcuc2hvcnRfdGl0bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0TXRDb21wYW5pZXMgPSAoaXNfZXU6IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCBhbGxfY29uZmlnID0ge1xuICAgICAgICBhY2NvdW50X3R5cGU6ICcnLFxuICAgICAgICBsZXZlcmFnZTogMTAwLFxuICAgICAgICBzaG9ydF90aXRsZTogbG9jYWxpemUoJ1N3YXAtRnJlZScpLFxuICAgIH07XG4gICAgY29uc3Qgc3ludGhldGljX2NvbmZpZyA9IHtcbiAgICAgICAgYWNjb3VudF90eXBlOiAnJyxcbiAgICAgICAgbGV2ZXJhZ2U6IDUwMCxcbiAgICAgICAgc2hvcnRfdGl0bGU6IGxvY2FsaXplKCdEZXJpdmVkJyksXG4gICAgfTtcbiAgICBjb25zdCBmaW5hbmNpYWxfY29uZmlnID0ge1xuICAgICAgICBhY2NvdW50X3R5cGU6ICdmaW5hbmNpYWwnLFxuICAgICAgICBsZXZlcmFnZTogMTAwMCxcbiAgICAgICAgc2hvcnRfdGl0bGU6IGlzX2V1ID8gbG9jYWxpemUoJ0NGRHMnKSA6IGxvY2FsaXplKCdGaW5hbmNpYWwnKSxcbiAgICB9O1xuICAgIGNvbnN0IGZpbmFuY2lhbF9zdHBfY29uZmlnID0ge1xuICAgICAgICBhY2NvdW50X3R5cGU6ICdmaW5hbmNpYWxfc3RwJyxcbiAgICAgICAgbGV2ZXJhZ2U6IDEwMCxcbiAgICAgICAgc2hvcnRfdGl0bGU6IGxvY2FsaXplKCdGaW5hbmNpYWwgU1RQJyksXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBkZW1vOiB7XG4gICAgICAgICAgICBhbGw6IHtcbiAgICAgICAgICAgICAgICBtdDVfYWNjb3VudF90eXBlOiBhbGxfY29uZmlnLmFjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICBsZXZlcmFnZTogYWxsX2NvbmZpZy5sZXZlcmFnZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogbG9jYWxpemUoJ0RlbW8gU3dhcC1GcmVlJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IGFsbF9jb25maWcuc2hvcnRfdGl0bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsX3N2Zzoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IGFsbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBhbGxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnRGVtbyBTd2FwLUZyZWUgU1ZHJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IGxvY2FsaXplKCdTd2FwLUZyZWUgU1ZHJyksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3RyYWRlcjoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IGFsbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiAnNTAwJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogbG9jYWxpemUoJ0RlbW8nKSxcbiAgICAgICAgICAgICAgICBzaG9ydF90aXRsZTogbG9jYWxpemUoJ2NUcmFkZXInKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzeW50aGV0aWM6IHtcbiAgICAgICAgICAgICAgICBtdDVfYWNjb3VudF90eXBlOiBzeW50aGV0aWNfY29uZmlnLmFjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICBsZXZlcmFnZTogc3ludGhldGljX2NvbmZpZy5sZXZlcmFnZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogbG9jYWxpemUoJ0RlbW8gRGVyaXZlZCcpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBzeW50aGV0aWNfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbmFuY2lhbDoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IGZpbmFuY2lhbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBmaW5hbmNpYWxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBpc19ldSA/IGxvY2FsaXplKCdEZW1vIENGRHMnKSA6IGxvY2FsaXplKCdEZW1vIEZpbmFuY2lhbCcpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBmaW5hbmNpYWxfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbmFuY2lhbF9kZW1vOiB7XG4gICAgICAgICAgICAgICAgbXQ1X2FjY291bnRfdHlwZTogZmluYW5jaWFsX2NvbmZpZy5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgbGV2ZXJhZ2U6IGZpbmFuY2lhbF9jb25maWcubGV2ZXJhZ2UsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGlzX2V1ID8gbG9jYWxpemUoJ0RlbW8gQ0ZEcycpIDogbG9jYWxpemUoJ0RlbW8gRmluYW5jaWFsJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IGZpbmFuY2lhbF9jb25maWcuc2hvcnRfdGl0bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3ludGhldGljX3N2Zzoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IHN5bnRoZXRpY19jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBzeW50aGV0aWNfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnRGVtbyBEZXJpdmVkIFNWRycpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBzeW50aGV0aWNfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZmluYW5jaWFsX3N2Zzoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IGZpbmFuY2lhbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBmaW5hbmNpYWxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBpc19ldSA/IGxvY2FsaXplKCdEZW1vIENGRHMnKSA6IGxvY2FsaXplKCdEZW1vIEZpbmFuY2lhbCBTVkcnKSxcbiAgICAgICAgICAgICAgICBzaG9ydF90aXRsZTogaXNfZXUgPyBsb2NhbGl6ZSgnQ0ZEcycpIDogbG9jYWxpemUoJ0ZpbmFuY2lhbCBTVkcnKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmaW5hbmNpYWxfc3RwOiB7XG4gICAgICAgICAgICAgICAgbXQ1X2FjY291bnRfdHlwZTogZmluYW5jaWFsX3N0cF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBmaW5hbmNpYWxfc3RwX2NvbmZpZy5sZXZlcmFnZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogbG9jYWxpemUoJ0RlbW8gRmluYW5jaWFsIFNUUCcpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBmaW5hbmNpYWxfc3RwX2NvbmZpZy5zaG9ydF90aXRsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJlYWw6IHtcbiAgICAgICAgICAgIGFsbDoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IGFsbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBhbGxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnU3dhcC1GcmVlJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IGFsbF9jb25maWcuc2hvcnRfdGl0bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsX3N2Zzoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IGFsbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBhbGxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnU3dhcC1GcmVlIFNWRycpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBhbGxfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN0cmFkZXI6IHtcbiAgICAgICAgICAgICAgICBtdDVfYWNjb3VudF90eXBlOiBhbGxfY29uZmlnLmFjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICBsZXZlcmFnZTogJzUwMCcsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGxvY2FsaXplKCdSZWFsJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IGxvY2FsaXplKCdjVHJhZGVyJyksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZHh0cmFkZToge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IGFsbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBhbGxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnUmVhbCcpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBhbGxfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN5bnRoZXRpYzoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IHN5bnRoZXRpY19jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBzeW50aGV0aWNfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnRGVyaXZlZCcpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBzeW50aGV0aWNfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN5bnRoZXRpY19zdmc6IHtcbiAgICAgICAgICAgICAgICBtdDVfYWNjb3VudF90eXBlOiBzeW50aGV0aWNfY29uZmlnLmFjY291bnRfdHlwZSxcbiAgICAgICAgICAgICAgICBsZXZlcmFnZTogc3ludGhldGljX2NvbmZpZy5sZXZlcmFnZSxcbiAgICAgICAgICAgICAgICB0aXRsZTogbG9jYWxpemUoJ0Rlcml2ZWQgU1ZHJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IHN5bnRoZXRpY19jb25maWcuc2hvcnRfdGl0bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3ludGhldGljX2J2aToge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IHN5bnRoZXRpY19jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBzeW50aGV0aWNfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnRGVyaXZlZCBCVkknKSxcbiAgICAgICAgICAgICAgICBzaG9ydF90aXRsZTogc3ludGhldGljX2NvbmZpZy5zaG9ydF90aXRsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzeW50aGV0aWNfdjoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IHN5bnRoZXRpY19jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBzeW50aGV0aWNfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnRGVyaXZlZCBWYW51YXR1JyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IHN5bnRoZXRpY19jb25maWcuc2hvcnRfdGl0bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmluYW5jaWFsOiB7XG4gICAgICAgICAgICAgICAgbXQ1X2FjY291bnRfdHlwZTogZmluYW5jaWFsX2NvbmZpZy5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgbGV2ZXJhZ2U6IGZpbmFuY2lhbF9jb25maWcubGV2ZXJhZ2UsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGlzX2V1ID8gbG9jYWxpemUoJ0NGRHMnKSA6IGxvY2FsaXplKCdGaW5hbmNpYWwnKSxcbiAgICAgICAgICAgICAgICBzaG9ydF90aXRsZTogZmluYW5jaWFsX2NvbmZpZy5zaG9ydF90aXRsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmaW5hbmNpYWxfc3ZnOiB7XG4gICAgICAgICAgICAgICAgbXQ1X2FjY291bnRfdHlwZTogZmluYW5jaWFsX2NvbmZpZy5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgbGV2ZXJhZ2U6IGZpbmFuY2lhbF9jb25maWcubGV2ZXJhZ2UsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGlzX2V1ID8gbG9jYWxpemUoJ0NGRHMnKSA6IGxvY2FsaXplKCdGaW5hbmNpYWwgU1ZHJyksXG4gICAgICAgICAgICAgICAgc2hvcnRfdGl0bGU6IGZpbmFuY2lhbF9jb25maWcuc2hvcnRfdGl0bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmluYW5jaWFsX2J2aToge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IGZpbmFuY2lhbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBmaW5hbmNpYWxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBpc19ldSA/IGxvY2FsaXplKCdDRkRzJykgOiBsb2NhbGl6ZSgnRmluYW5jaWFsIEJWSScpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBmaW5hbmNpYWxfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbmFuY2lhbF9meDoge1xuICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6IGZpbmFuY2lhbF9jb25maWcuYWNjb3VudF90eXBlLFxuICAgICAgICAgICAgICAgIGxldmVyYWdlOiBmaW5hbmNpYWxfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBpc19ldSA/IGxvY2FsaXplKCdDRkRzJykgOiBsb2NhbGl6ZSgnRmluYW5jaWFsIExhYnVhbicpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBmaW5hbmNpYWxfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbmFuY2lhbF92OiB7XG4gICAgICAgICAgICAgICAgbXQ1X2FjY291bnRfdHlwZTogZmluYW5jaWFsX2NvbmZpZy5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgbGV2ZXJhZ2U6IGZpbmFuY2lhbF9jb25maWcubGV2ZXJhZ2UsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGlzX2V1ID8gbG9jYWxpemUoJ0NGRHMnKSA6IGxvY2FsaXplKCdGaW5hbmNpYWwgVmFudWF0dScpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBmaW5hbmNpYWxfY29uZmlnLnNob3J0X3RpdGxlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpbmFuY2lhbF9zdHA6IHtcbiAgICAgICAgICAgICAgICBtdDVfYWNjb3VudF90eXBlOiBmaW5hbmNpYWxfc3RwX2NvbmZpZy5hY2NvdW50X3R5cGUsXG4gICAgICAgICAgICAgICAgbGV2ZXJhZ2U6IGZpbmFuY2lhbF9zdHBfY29uZmlnLmxldmVyYWdlLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBsb2NhbGl6ZSgnRmluYW5jaWFsIFNUUCcpLFxuICAgICAgICAgICAgICAgIHNob3J0X3RpdGxlOiBmaW5hbmNpYWxfc3RwX2NvbmZpZy5zaG9ydF90aXRsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRGb3JtYXR0ZWRKdXJpc2RpY3Rpb25Db2RlID0gKGp1cmlzZGljdGlvbl9jb2RlOiBzdHJpbmcpID0+IHtcbiAgICBsZXQgZm9ybWF0dGVkX2xhYmVsID0gJyc7XG5cbiAgICBzd2l0Y2ggKGp1cmlzZGljdGlvbl9jb2RlKSB7XG4gICAgICAgIGNhc2UgSnVyaXNkaWN0aW9uLlNWRzpcbiAgICAgICAgICAgIGZvcm1hdHRlZF9sYWJlbCA9IGxvY2FsaXplKCdTVkcnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEp1cmlzZGljdGlvbi5CVkk6XG4gICAgICAgICAgICBmb3JtYXR0ZWRfbGFiZWwgPSBsb2NhbGl6ZSgnQlZJJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBKdXJpc2RpY3Rpb24uTEFCVUFOOlxuICAgICAgICAgICAgZm9ybWF0dGVkX2xhYmVsID0gbG9jYWxpemUoJ0xhYnVhbicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgSnVyaXNkaWN0aW9uLlZBTlVBVFU6XG4gICAgICAgICAgICBmb3JtYXR0ZWRfbGFiZWwgPSBsb2NhbGl6ZSgnVmFudWF0dScpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBmb3JtYXR0ZWRfbGFiZWwgPSBqdXJpc2RpY3Rpb25fY29kZT8udG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBmb3JtYXR0ZWRfbGFiZWw7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Stores/Modules/CFD/Helpers/cfd-config.ts\n")},"./src/Stores/Modules/CFD/cfd-store.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ CFDStore)\n/* harmony export */ });\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mobx */ "mobx");\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mobx__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _deriv_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @deriv/shared */ "@deriv/shared");\n/* harmony import */ var _deriv_shared__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _base_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../base-store */ "./src/Stores/base-store.js");\n/* harmony import */ var _Helpers_cfd_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Helpers/cfd-config */ "./src/Stores/Modules/CFD/Helpers/cfd-config.ts");\nfunction _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = "function" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || "@@iterator", asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator", toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, ""); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: "normal", arg: fn.call(obj, arg) }; } catch (err) { return { type: "throw", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { ["next", "throw", "return"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if ("throw" !== record.type) { var result = record.arg, value = result.value; return value && "object" == _typeof(value) && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke("next", value, resolve, reject); }, function (err) { invoke("throw", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke("throw", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, "_invoke", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = "suspendedStart"; return function (method, arg) { if ("executing" === state) throw new Error("Generator is already running"); if ("completed" === state) { if ("throw" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) { if ("suspendedStart" === state) throw state = "completed", context.arg; context.dispatchException(context.arg); } else "return" === context.method && context.abrupt("return", context.arg); state = "executing"; var record = tryCatch(innerFn, self, context); if ("normal" === record.type) { if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, "throw" === methodName && delegate.iterator["return"] && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method) || "return" !== methodName && (context.method = "throw", context.arg = new TypeError("The iterator does not provide a \'" + methodName + "\' method")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = "normal", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: "root" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if ("function" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) { var ctor = "function" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, "toString", function () { return "[object Generator]"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if ("throw" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if ("root" === entry.tryLoc) return handle("end"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, "catchLoc"), hasFinally = hasOwn.call(entry, "finallyLoc"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error("try statement without catch or finally"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if ("throw" === record.type) throw record.arg; return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, "catch": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if ("throw" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, "next" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0) { ; } } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i["return"] && (_r = _i["return"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\nvar CFDStore = /*#__PURE__*/function (_BaseStore) {\n  _inherits(CFDStore, _BaseStore);\n  var _super = _createSuper(CFDStore);\n  // this is a tmp value, don\'t rely on it, unless you set it first.\n\n  function CFDStore(_ref) {\n    var _this;\n    var root_store = _ref.root_store;\n    _classCallCheck(this, CFDStore);\n    _this = _super.call(this, {\n      root_store: root_store\n    });\n    _this.is_compare_accounts_visible = false;\n    _this.is_cfd_personal_details_modal_visible = false;\n    _this.is_jurisdiction_modal_visible = false;\n    _this.is_mt5_trade_modal_visible = false;\n    _this.jurisdiction_selected_shortcode = \'\';\n    _this.account_type = {\n      category: \'\',\n      type: \'\'\n    };\n    _this.mt5_trade_account = {};\n    _this.new_account_response = {};\n    _this.map_type = {};\n    _this.has_cfd_error = false;\n    _this.error_message = \'\';\n    _this.is_account_being_created = false;\n    _this.is_cfd_success_dialog_enabled = false;\n    _this.is_mt5_financial_stp_modal_open = false;\n    _this.is_cfd_password_modal_enabled = false;\n    _this.mt5_migration_error = \'\';\n    _this.current_account = undefined;\n    _this.error_type = undefined;\n    _this.is_cfd_verification_modal_visible = false;\n    _this.dxtrade_tokens = {\n      demo: \'\',\n      real: \'\'\n    };\n    _this.ctrader_tokens = {\n      demo: \'\',\n      real: \'\'\n    };\n    _this.real_synthetic_accounts_existing_data = [];\n    _this.real_financial_accounts_existing_data = [];\n    _this.real_swapfree_accounts_existing_data = [];\n    _this.migrated_mt5_accounts = [];\n    (0,mobx__WEBPACK_IMPORTED_MODULE_0__.makeObservable)(_assertThisInitialized(_this), {\n      is_compare_accounts_visible: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      is_cfd_personal_details_modal_visible: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      is_jurisdiction_modal_visible: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      is_mt5_trade_modal_visible: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      jurisdiction_selected_shortcode: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      account_type: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      mt5_trade_account: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      mt5_migration_error: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      new_account_response: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      map_type: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      has_cfd_error: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      error_message: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      is_account_being_created: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      is_cfd_success_dialog_enabled: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      is_mt5_financial_stp_modal_open: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      is_cfd_password_modal_enabled: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      current_account: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      is_cfd_verification_modal_visible: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      error_type: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      dxtrade_tokens: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      ctrader_tokens: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      migrated_mt5_accounts: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      account_title: mobx__WEBPACK_IMPORTED_MODULE_0__.computed,\n      current_list: mobx__WEBPACK_IMPORTED_MODULE_0__.computed,\n      has_created_account_for_selected_jurisdiction: mobx__WEBPACK_IMPORTED_MODULE_0__.computed,\n      has_submitted_cfd_personal_details: mobx__WEBPACK_IMPORTED_MODULE_0__.computed,\n      onMount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      onUnmount: mobx__WEBPACK_IMPORTED_MODULE_0__.override,\n      checkShouldOpenAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      realAccountSignupEndListener: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      resetFormErrors: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      clearCFDError: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      createCFDAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      disableCFDPasswordModal: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      enableCFDPasswordModal: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      getName: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      migrateMT5Accounts: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      openMT5Account: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      openCFDAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      beginRealSignupForMt5: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      enableMt5FinancialStpModal: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setAccountType: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setCurrentAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setMT5TradeAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setIsAccountBeingCreated: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setError: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setCFDNewAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setCFDSuccessDialog: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setMT5MigrationError: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setMigratedMT5Accounts: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      getAccountStatus: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      creatMT5Password: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      submitMt5Password: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      createCFDPassword: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      submitCFDPassword: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      toggleCompareAccountsModal: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      getRealSyntheticAccountsExistingData: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      getRealFinancialAccountsExistingData: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      getRealSwapfreeAccountsExistingData: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      toggleJurisdictionModal: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      toggleMT5TradeModal: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      disableMt5FinancialStpModal: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      topUpVirtual: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      sendVerifyEmail: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setJurisdictionSelectedShortcode: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      toggleCFDVerificationModal: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setDxtradeToken: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      setCTraderToken: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      loadDxtradeTokens: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      loadCTraderTokens: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound\n    });\n\n    // reaction(\n    //     () => [this.root_store.client.dxtrade_accounts_list],\n    //     () => {\n    //         if (this.root_store.client.dxtrade_accounts_list.length > 0) {\n    //             this.loadDxtradeTokens();\n    //         }\n    //     }\n    // );\n\n    (0,mobx__WEBPACK_IMPORTED_MODULE_0__.reaction)(function () {\n      return [_this.root_store.client.ctrader_accounts_list];\n    }, function () {\n      if (_this.root_store.client.ctrader_accounts_list.length > 0) {\n        _this.loadCTraderTokens();\n      }\n    });\n    return _this;\n  }\n  _createClass(CFDStore, [{\n    key: "account_title",\n    get: function get() {\n      return this.account_type.category ? (0,_Helpers_cfd_config__WEBPACK_IMPORTED_MODULE_3__.getMtCompanies)(this.root_store.traders_hub.show_eu_related_content)[this.account_type.category][this.account_type.type].title : \'\';\n    }\n  }, {\n    key: "has_submitted_cfd_personal_details",\n    get: function get() {\n      var _this$root_store$clie = this.root_store.client.account_settings,\n        citizen = _this$root_store$clie.citizen,\n        place_of_birth = _this$root_store$clie.place_of_birth,\n        tax_residence = _this$root_store$clie.tax_residence,\n        tax_identification_number = _this$root_store$clie.tax_identification_number,\n        account_opening_reason = _this$root_store$clie.account_opening_reason;\n      return !!(citizen && place_of_birth && tax_residence && tax_identification_number && account_opening_reason);\n    }\n  }, {\n    key: "current_list",\n    get: function get() {\n      var list = {};\n      var show_eu_related_content = this.root_store.traders_hub.show_eu_related_content;\n      this.root_store.client.mt5_login_list.filter(function (acc) {\n        return show_eu_related_content ? acc.landing_company_short === \'maltainvest\' : acc.landing_company_short !== \'maltainvest\';\n      }).forEach(function (account) {\n        // e.g. mt5.real.financial_stp\n        list[(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.getAccountListKey)(account, _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5, account.landing_company_short)] = _objectSpread({}, account);\n      });\n      this.root_store.client.dxtrade_accounts_list.forEach(function (account) {\n        // e.g. dxtrade.real.financial_stp\n        list[(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.getAccountListKey)(account, _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE)] = _objectSpread({}, account);\n      });\n      this.root_store.client.ctrader_accounts_list.forEach(function (account) {\n        list[(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.getAccountListKey)(account, _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.CTRADER)] = _objectSpread({}, account);\n      });\n      return list;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n  }, {\n    key: "mt5_companies",\n    get: function get() {\n      return (0,_Helpers_cfd_config__WEBPACK_IMPORTED_MODULE_3__.getMtCompanies)(this.root_store.client.is_eu);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n  }, {\n    key: "dxtrade_companies",\n    get: function get() {\n      return (0,_Helpers_cfd_config__WEBPACK_IMPORTED_MODULE_3__.getDxCompanies)();\n    }\n  }, {\n    key: "has_created_account_for_selected_jurisdiction",\n    get: function get() {\n      var _this$real_synthetic_,\n        _this2 = this,\n        _this$real_swapfree_a,\n        _this$real_financial_;\n      switch (this.account_type.type) {\n        case \'synthetic\':\n          return (_this$real_synthetic_ = this.real_synthetic_accounts_existing_data) === null || _this$real_synthetic_ === void 0 ? void 0 : _this$real_synthetic_.some(function (account) {\n            return account.landing_company_short === _this2.jurisdiction_selected_shortcode;\n          });\n        case \'all\':\n          return (_this$real_swapfree_a = this.real_swapfree_accounts_existing_data) === null || _this$real_swapfree_a === void 0 ? void 0 : _this$real_swapfree_a.some(function (account) {\n            return account.landing_company_short === _this2.jurisdiction_selected_shortcode;\n          });\n        default:\n          return (_this$real_financial_ = this.real_financial_accounts_existing_data) === null || _this$real_financial_ === void 0 ? void 0 : _this$real_financial_.some(function (account) {\n            return account.landing_company_short === _this2.jurisdiction_selected_shortcode;\n          });\n      }\n    }\n  }, {\n    key: "onMount",\n    value: function onMount() {\n      this.checkShouldOpenAccount();\n      this.onRealAccountSignupEnd(this.realAccountSignupEndListener);\n      this.root_store.ui.is_cfd_page = true;\n    }\n  }, {\n    key: "onUnmount",\n    value: function onUnmount() {\n      this.disposeRealAccountSignupEnd();\n      this.root_store.ui.is_cfd_page = false;\n    }\n\n    // other platforms can redirect to here using account switcher\'s `Add` account button\n    // so in that case we should open the corresponding account opening modal on load/component update\n  }, {\n    key: "checkShouldOpenAccount",\n    value: function checkShouldOpenAccount() {\n      var account_type = sessionStorage.getItem(\'open_cfd_account_type\');\n      if (account_type) {\n        var _account_type$split = account_type.split(\'.\'),\n          _account_type$split2 = _slicedToArray(_account_type$split, 4),\n          category = _account_type$split2[0],\n          platform = _account_type$split2[1],\n          type = _account_type$split2[2],\n          set_password = _account_type$split2[3];\n        this.createCFDAccount({\n          category: category,\n          platform: platform,\n          type: type,\n          set_password: set_password\n        });\n        sessionStorage.removeItem(\'open_cfd_account_type\');\n      }\n    }\n  }, {\n    key: "setIsAccountBeingCreated",\n    value: function setIsAccountBeingCreated(is_account_being_created) {\n      this.is_account_being_created = is_account_being_created;\n    }\n  }, {\n    key: "realAccountSignupEndListener",\n    value: function realAccountSignupEndListener() {\n      var post_signup = JSON.parse(sessionStorage.getItem(\'post_real_account_signup\'));\n      if (post_signup && post_signup.category && post_signup.type) {\n        sessionStorage.removeItem(\'post_real_account_signup\');\n        this.enableCFDPasswordModal();\n      }\n      return Promise.resolve();\n    }\n  }, {\n    key: "resetFormErrors",\n    value: function resetFormErrors() {\n      this.error_message = \'\';\n      this.error_type = undefined;\n      this.has_cfd_error = false;\n    }\n  }, {\n    key: "clearCFDError",\n    value: function clearCFDError() {\n      this.resetFormErrors();\n      this.is_cfd_password_modal_enabled = false;\n    }\n  }, {\n    key: "createCFDAccount",\n    value: function () {\n      var _createCFDAccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref2) {\n        var category, platform, type, set_password, account_creation_values, response, trading_platform_accounts_list_response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                category = _ref2.category, platform = _ref2.platform, type = _ref2.type, set_password = _ref2.set_password;\n                this.clearCFDError();\n                this.setAccountType({\n                  category: category,\n                  type: type\n                });\n                if (!(platform === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE)) {\n                  _context.next = 7;\n                  break;\n                }\n                if (category === \'real\') {\n                  this.realCFDSignup(set_password);\n                } else {\n                  this.demoCFDSignup();\n                }\n                _context.next = 31;\n                break;\n              case 7:\n                if (!(platform === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.CTRADER)) {\n                  _context.next = 30;\n                  break;\n                }\n                this.setJurisdictionSelectedShortcode(\'svg\');\n                if (this.account_type.category === \'demo\') {\n                  this.setIsAccountBeingCreated(true);\n                }\n                account_creation_values = {\n                  platform: platform,\n                  account_type: this.account_type.category,\n                  market_type: this.account_type.type,\n                  company: this.jurisdiction_selected_shortcode\n                };\n                _context.next = 13;\n                return this.openCFDAccount(account_creation_values);\n              case 13:\n                response = _context.sent;\n                if (response.error) {\n                  _context.next = 26;\n                  break;\n                }\n                this.setError(false);\n                this.enableCFDPasswordModal();\n                this.setCFDSuccessDialog(true);\n                _context.next = 20;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.tradingPlatformAccountsList(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.CTRADER);\n              case 20:\n                trading_platform_accounts_list_response = _context.sent;\n                this.root_store.client.responseTradingPlatformAccountsList(trading_platform_accounts_list_response);\n                _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.transferBetweenAccounts();\n                this.setIsAccountBeingCreated(false);\n                _context.next = 28;\n                break;\n              case 26:\n                this.setError(true, response.error);\n                this.setIsAccountBeingCreated(false);\n              case 28:\n                _context.next = 31;\n                break;\n              case 30:\n                if (platform === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5) {\n                  if (category === \'real\') {\n                    this.toggleJurisdictionModal();\n                  } else {\n                    if (this.root_store.traders_hub.show_eu_related_content) {\n                      this.setJurisdictionSelectedShortcode(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.Jurisdiction.MALTA_INVEST);\n                    } else this.setJurisdictionSelectedShortcode(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.Jurisdiction.SVG);\n                    this.demoCFDSignup();\n                  }\n                }\n              case 31:\n              case "end":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function createCFDAccount(_x2) {\n        return _createCFDAccount.apply(this, arguments);\n      }\n      return createCFDAccount;\n    }()\n  }, {\n    key: "demoCFDSignup",\n    value: function demoCFDSignup() {\n      this.enableCFDPasswordModal();\n    }\n  }, {\n    key: "disableCFDPasswordModal",\n    value: function disableCFDPasswordModal() {\n      this.is_cfd_password_modal_enabled = false;\n    }\n  }, {\n    key: "enableCFDPasswordModal",\n    value: function enableCFDPasswordModal() {\n      this.is_cfd_password_modal_enabled = true;\n    }\n  }, {\n    key: "getName",\n    value: function getName() {\n      var account_type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.account_type;\n      var _ref3 = this.root_store.client.account_settings && this.root_store.client.account_settings,\n        first_name = _ref3.first_name;\n      var title = this.mt5_companies[account_type === null || account_type === void 0 ? void 0 : account_type.category][account_type === null || account_type === void 0 ? void 0 : account_type.type].title;\n\n      // First name is not set when user has no real account\n      return first_name ? [first_name, title].join(\' \') : title;\n    }\n  }, {\n    key: "migrateMT5Accounts",\n    value: function () {\n      var _migrateMT5Accounts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(values, actions) {\n        var _this3 = this;\n        var account_to_migrate, promises, results, has_error, mt5_login_list_response, _has_error$error;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                account_to_migrate = this.root_store.client.mt5_login_list.filter(function (acc) {\n                  return acc.landing_company_short === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.Jurisdiction.SVG && !!acc.eligible_to_migrate;\n                });\n                promises = account_to_migrate.map(function (account) {\n                  var eligible_to_migrate = account.eligible_to_migrate;\n                  var _Object$entries$ = _slicedToArray(Object.entries(eligible_to_migrate)[0], 2),\n                    type = _Object$entries$[0],\n                    shortcode = _Object$entries$[1];\n                  var account_type = {\n                    category: \'real\',\n                    type: type\n                  };\n                  _this3.setMigratedMT5Accounts([].concat(_toConsumableArray(_this3.migrated_mt5_accounts), [{\n                    login_id: account.login,\n                    to_account: _objectSpread({}, eligible_to_migrate !== null && eligible_to_migrate !== void 0 ? eligible_to_migrate : {})\n                  }]));\n                  return _this3.requestMigrateAccount(values, shortcode, account_type);\n                });\n                _context2.prev = 2;\n                _context2.next = 5;\n                return Promise.all(promises);\n              case 5:\n                results = _context2.sent;\n                has_error = results.find(function (result) {\n                  return result.error;\n                });\n                if (has_error) {\n                  _context2.next = 26;\n                  break;\n                }\n                actions.setStatus({\n                  success: true\n                });\n                actions.setSubmitting(false);\n                this.setError(false);\n                this.setCFDSuccessDialog(true);\n                _context2.next = 14;\n                return this.getAccountStatus(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5);\n              case 14:\n                _context2.next = 16;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.mt5LoginList();\n              case 16:\n                mt5_login_list_response = _context2.sent;\n                this.root_store.client.responseMt5LoginList(mt5_login_list_response);\n                _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.transferBetweenAccounts();\n                _context2.t0 = this.root_store.client;\n                _context2.next = 22;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.tradingServers(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5);\n              case 22:\n                _context2.t1 = _context2.sent;\n                _context2.t0.responseMT5TradingServers.call(_context2.t0, _context2.t1);\n                _context2.next = 32;\n                break;\n              case 26:\n                _context2.next = 28;\n                return this.getAccountStatus(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5);\n              case 28:\n                this.clearCFDError();\n                this.setMT5MigrationError(has_error === null || has_error === void 0 ? void 0 : (_has_error$error = has_error.error) === null || _has_error$error === void 0 ? void 0 : _has_error$error.message);\n                this.setMigratedMT5Accounts([]);\n                this.root_store.ui.toggleMT5MigrationModal();\n              case 32:\n                _context2.next = 37;\n                break;\n              case 34:\n                _context2.prev = 34;\n                _context2.t2 = _context2["catch"](2);\n                // At least one request has failed\n                // eslint-disable-next-line no-console\n                console.warn(\'One or more MT5 migration requests failed:\', _context2.t2);\n              case 37:\n              case "end":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 34]]);\n      }));\n      function migrateMT5Accounts(_x3, _x4) {\n        return _migrateMT5Accounts.apply(this, arguments);\n      }\n      return migrateMT5Accounts;\n    }()\n  }, {\n    key: "requestMigrateAccount",\n    value: function requestMigrateAccount(values, shortcode, account_type) {\n      var name = this.getName(account_type);\n      var leverage = this.mt5_companies[account_type.category][account_type.type].leverage;\n      var type_request = (0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.getAccountTypeFields)(account_type);\n      var _this$root_store$clie2 = this.root_store.client.account_settings,\n        address_line_1 = _this$root_store$clie2.address_line_1,\n        address_line_2 = _this$root_store$clie2.address_line_2,\n        address_postcode = _this$root_store$clie2.address_postcode,\n        address_city = _this$root_store$clie2.address_city,\n        address_state = _this$root_store$clie2.address_state,\n        country_code = _this$root_store$clie2.country_code,\n        phone = _this$root_store$clie2.phone;\n      return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.mt5NewAccount(_objectSpread(_objectSpread(_objectSpread({\n        mainPassword: values.password,\n        email: this.root_store.client.email_address,\n        leverage: leverage,\n        name: name,\n        address: address_line_1 || address_line_2,\n        city: address_city,\n        country: country_code,\n        phone: phone,\n        state: address_state,\n        zipCode: address_postcode,\n        migrate: 1\n      }, values.server ? {\n        server: values.server\n      } : {}), shortcode ? {\n        company: shortcode\n      } : {}), shortcode !== _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.Jurisdiction.LABUAN ? type_request : {\n        account_type: _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.JURISDICTION_MARKET_TYPES.FINANCIAL,\n        mt5_account_type: \'financial_stp\'\n      }));\n    }\n  }, {\n    key: "openMT5Account",\n    value: function openMT5Account(values) {\n      var name = this.getName();\n      var leverage = this.mt5_companies[this.account_type.category][this.account_type.type].leverage;\n      var type_request = (0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.getAccountTypeFields)(this.account_type);\n      var _this$root_store$clie3 = this.root_store.client.account_settings,\n        address_line_1 = _this$root_store$clie3.address_line_1,\n        address_line_2 = _this$root_store$clie3.address_line_2,\n        address_postcode = _this$root_store$clie3.address_postcode,\n        address_city = _this$root_store$clie3.address_city,\n        address_state = _this$root_store$clie3.address_state,\n        country_code = _this$root_store$clie3.country_code,\n        phone = _this$root_store$clie3.phone;\n      return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.mt5NewAccount(_objectSpread(_objectSpread(_objectSpread(_objectSpread({\n        mainPassword: values.password,\n        email: this.root_store.client.email_address,\n        leverage: leverage,\n        name: name,\n        address: address_line_1 || address_line_2,\n        city: address_city,\n        country: country_code,\n        phone: phone,\n        state: address_state,\n        zipCode: address_postcode\n      }, this.account_type.type === \'all\' ? {\n        sub_account_category: \'swap_free\'\n      } : {}), values.server ? {\n        server: values.server\n      } : {}), this.jurisdiction_selected_shortcode ? {\n        company: this.jurisdiction_selected_shortcode\n      } : {}), this.jurisdiction_selected_shortcode !== _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.Jurisdiction.LABUAN ? type_request : {\n        account_type: \'financial\',\n        mt5_account_type: \'financial_stp\'\n      }));\n    }\n  }, {\n    key: "openCFDAccount",\n    value: function openCFDAccount(values) {\n      return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.tradingPlatformNewAccount({\n        password: _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE ? values.password : \'\',\n        platform: values.platform,\n        account_type: this.account_type.category,\n        market_type: this.account_type.type === \'dxtrade\' || this.account_type.type === \'cTrader\' ? \'all\' : this.account_type.type,\n        company: values.company\n      });\n    }\n  }, {\n    key: "beginRealSignupForMt5",\n    value: function beginRealSignupForMt5() {\n      sessionStorage.setItem(\'post_real_account_signup\', JSON.stringify(this.account_type));\n      this.root_store.ui.openRealAccountSignup(\'svg\');\n    }\n  }, {\n    key: "realCFDSignup",\n    value: function realCFDSignup(set_password) {\n      switch (this.account_type.type) {\n        case \'financial\':\n          this.enableCFDPasswordModal();\n          break;\n        case \'financial_stp\':\n          this.root_store.client.fetchResidenceList();\n          this.root_store.client.fetchStatesList();\n          this.root_store.client.fetchAccountSettings();\n          if (set_password) this.enableCFDPasswordModal();else this.enableMt5FinancialStpModal();\n          break;\n        case \'synthetic\':\n        case \'dxtrade\':\n        case \'all\':\n          this.enableCFDPasswordModal();\n          break;\n        default:\n          throw new Error(\'Cannot determine mt5 account signup.\');\n      }\n    }\n  }, {\n    key: "enableMt5FinancialStpModal",\n    value: function enableMt5FinancialStpModal() {\n      this.is_mt5_financial_stp_modal_open = true;\n    }\n  }, {\n    key: "setAccountType",\n    value: function setAccountType(account_type) {\n      this.account_type = account_type;\n    }\n  }, {\n    key: "setCurrentAccount",\n    value: function setCurrentAccount(data, meta) {\n      this.current_account = _objectSpread(_objectSpread({}, meta), data);\n    }\n  }, {\n    key: "setMT5TradeAccount",\n    value: function setMT5TradeAccount(mt5_trade_account) {\n      this.mt5_trade_account = mt5_trade_account;\n    }\n  }, {\n    key: "setError",\n    value: function setError(state, obj) {\n      var _obj$code;\n      this.has_cfd_error = state;\n      this.error_message = obj ? obj.message : \'\';\n      this.error_type = (_obj$code = obj === null || obj === void 0 ? void 0 : obj.code) !== null && _obj$code !== void 0 ? _obj$code : undefined;\n    }\n  }, {\n    key: "setCFDNewAccount",\n    value: function setCFDNewAccount(cfd_new_account) {\n      this.new_account_response = cfd_new_account;\n    }\n  }, {\n    key: "setCFDSuccessDialog",\n    value: function setCFDSuccessDialog(value) {\n      this.is_cfd_success_dialog_enabled = !!value;\n    }\n  }, {\n    key: "setMT5MigrationError",\n    value: function setMT5MigrationError(error) {\n      this.mt5_migration_error = error;\n    }\n  }, {\n    key: "getAccountStatus",\n    value: function () {\n      var _getAccountStatus = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(platform) {\n        var should_load_account_status;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                should_load_account_status = platform === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5 && this.root_store.client.is_mt5_password_not_set || platform === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE && this.root_store.client.is_dxtrade_password_not_set;\n                if (!should_load_account_status) {\n                  _context3.next = 4;\n                  break;\n                }\n                _context3.next = 4;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.getAccountStatus();\n              case 4:\n              case "end":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n      function getAccountStatus(_x5) {\n        return _getAccountStatus.apply(this, arguments);\n      }\n      return getAccountStatus;\n    }()\n  }, {\n    key: "creatMT5Password",\n    value: function () {\n      var _creatMT5Password = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(values, actions) {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.tradingPlatformPasswordChange({\n                  new_password: values.password,\n                  platform: _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5\n                });\n              case 2:\n                response = _context4.sent;\n                if (!response.error) {\n                  _context4.next = 9;\n                  break;\n                }\n                this.setError(true, response.error);\n                actions.resetForm({});\n                actions.setSubmitting(false);\n                actions.setStatus({\n                  success: false\n                });\n                return _context4.abrupt("return", true);\n              case 9:\n                return _context4.abrupt("return", false);\n              case 10:\n              case "end":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n      function creatMT5Password(_x6, _x7) {\n        return _creatMT5Password.apply(this, arguments);\n      }\n      return creatMT5Password;\n    }()\n  }, {\n    key: "submitMt5Password",\n    value: function () {\n      var _submitMt5Password = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(values, actions) {\n        var has_error, response, mt5_login_list_response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!this.root_store.client.is_mt5_password_not_set) {\n                  _context5.next = 6;\n                  break;\n                }\n                _context5.next = 3;\n                return this.creatMT5Password(values, actions);\n              case 3:\n                has_error = _context5.sent;\n                if (!has_error) {\n                  _context5.next = 6;\n                  break;\n                }\n                return _context5.abrupt("return");\n              case 6:\n                this.resetFormErrors();\n                if (!this.root_store.ui.is_mt5_migration_modal_enabled) {\n                  _context5.next = 12;\n                  break;\n                }\n                _context5.next = 10;\n                return this.migrateMT5Accounts(values, actions);\n              case 10:\n                _context5.next = 41;\n                break;\n              case 12:\n                _context5.next = 14;\n                return this.openMT5Account(values);\n              case 14:\n                response = _context5.sent;\n                if (response.error) {\n                  _context5.next = 35;\n                  break;\n                }\n                actions.setStatus({\n                  success: true\n                });\n                actions.setSubmitting(false);\n                this.setError(false);\n                this.setCFDSuccessDialog(true);\n                _context5.next = 22;\n                return this.getAccountStatus(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5);\n              case 22:\n                _context5.next = 24;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.mt5LoginList();\n              case 24:\n                mt5_login_list_response = _context5.sent;\n                this.root_store.client.responseMt5LoginList(mt5_login_list_response);\n                _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.transferBetweenAccounts(); // get the list of updated accounts for transfer in cashier\n                _context5.t0 = this.root_store.client;\n                _context5.next = 30;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.tradingServers(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5);\n              case 30:\n                _context5.t1 = _context5.sent;\n                _context5.t0.responseMT5TradingServers.call(_context5.t0, _context5.t1);\n                this.setCFDNewAccount(response.mt5_new_account);\n                _context5.next = 41;\n                break;\n              case 35:\n                _context5.next = 37;\n                return this.getAccountStatus(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5);\n              case 37:\n                this.setError(true, response.error);\n                actions.resetForm({});\n                actions.setSubmitting(false);\n                actions.setStatus({\n                  success: false\n                });\n              case 41:\n              case "end":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n      function submitMt5Password(_x8, _x9) {\n        return _submitMt5Password.apply(this, arguments);\n      }\n      return submitMt5Password;\n    }()\n  }, {\n    key: "createCFDPassword",\n    value: function () {\n      var _createCFDPassword = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(values, actions) {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.tradingPlatformPasswordChange({\n                  new_password: values.password,\n                  platform: _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE\n                });\n              case 2:\n                response = _context6.sent;\n                if (!response.error) {\n                  _context6.next = 9;\n                  break;\n                }\n                this.setError(true, response.error);\n                actions.resetForm({});\n                actions.setSubmitting(false);\n                actions.setStatus({\n                  success: false\n                });\n                return _context6.abrupt("return", true);\n              case 9:\n                return _context6.abrupt("return", false);\n              case 10:\n              case "end":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n      function createCFDPassword(_x10, _x11) {\n        return _createCFDPassword.apply(this, arguments);\n      }\n      return createCFDPassword;\n    }()\n  }, {\n    key: "submitCFDPassword",\n    value: function () {\n      var _submitCFDPassword = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(values, actions) {\n        var has_error, response, trading_platform_accounts_list_response;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                if (!(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE && this.root_store.client.is_dxtrade_password_not_set)) {\n                  _context7.next = 6;\n                  break;\n                }\n                _context7.next = 3;\n                return this.createCFDPassword(values, actions);\n              case 3:\n                has_error = _context7.sent;\n                if (!has_error) {\n                  _context7.next = 6;\n                  break;\n                }\n                return _context7.abrupt("return");\n              case 6:\n                _context7.next = 8;\n                return this.openCFDAccount(values);\n              case 8:\n                response = _context7.sent;\n                if (!response.error) {\n                  _context7.next = 17;\n                  break;\n                }\n                _context7.next = 12;\n                return this.getAccountStatus(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE);\n              case 12:\n                this.setError(true, response.error);\n                actions.resetForm({});\n                actions.setSubmitting(false);\n                actions.setStatus({\n                  success: false\n                });\n                return _context7.abrupt("return");\n              case 17:\n                actions.setStatus({\n                  success: true\n                });\n                actions.setSubmitting(false);\n                this.setError(false);\n                this.setCFDSuccessDialog(true);\n                _context7.next = 23;\n                return this.getAccountStatus(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE);\n              case 23:\n                _context7.next = 25;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.tradingPlatformAccountsList(values.platform);\n              case 25:\n                trading_platform_accounts_list_response = _context7.sent;\n                this.root_store.client.responseTradingPlatformAccountsList(trading_platform_accounts_list_response);\n                _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.transferBetweenAccounts(); // get the list of updated accounts for transfer in cashier\n                this.setCFDNewAccount(response.trading_platform_new_account);\n              case 29:\n              case "end":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n      function submitCFDPassword(_x12, _x13) {\n        return _submitCFDPassword.apply(this, arguments);\n      }\n      return submitCFDPassword;\n    }()\n  }, {\n    key: "toggleCompareAccountsModal",\n    value: function toggleCompareAccountsModal() {\n      this.is_compare_accounts_visible = !this.is_compare_accounts_visible;\n    }\n  }, {\n    key: "getRealSyntheticAccountsExistingData",\n    value: function getRealSyntheticAccountsExistingData(real_synthetic_accounts_existing_data) {\n      this.real_synthetic_accounts_existing_data = real_synthetic_accounts_existing_data;\n    }\n  }, {\n    key: "getRealFinancialAccountsExistingData",\n    value: function getRealFinancialAccountsExistingData(real_financial_accounts_existing_data) {\n      this.real_financial_accounts_existing_data = real_financial_accounts_existing_data;\n    }\n  }, {\n    key: "getRealSwapfreeAccountsExistingData",\n    value: function getRealSwapfreeAccountsExistingData(real_swapfree_accounts_existing_data) {\n      this.real_swapfree_accounts_existing_data = real_swapfree_accounts_existing_data;\n    }\n  }, {\n    key: "toggleJurisdictionModal",\n    value: function toggleJurisdictionModal() {\n      this.is_jurisdiction_modal_visible = !this.is_jurisdiction_modal_visible;\n    }\n  }, {\n    key: "toggleMT5TradeModal",\n    value: function toggleMT5TradeModal() {\n      this.is_mt5_trade_modal_visible = !this.is_mt5_trade_modal_visible;\n    }\n  }, {\n    key: "disableMt5FinancialStpModal",\n    value: function disableMt5FinancialStpModal() {\n      this.is_mt5_financial_stp_modal_open = false;\n    }\n  }, {\n    key: "topUpVirtual",\n    value: function () {\n      var _topUpVirtual = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(platform) {\n        var _this4 = this;\n        var response, new_balance, _this$root_store$clie4, _this$root_store$clie5, _this$root_store$clie6;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                this.root_store.ui.setTopUpInProgress(true);\n                _context8.t0 = platform;\n                _context8.next = _context8.t0 === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE ? 4 : _context8.t0 === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.CTRADER ? 8 : _context8.t0 === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5 ? 12 : 16;\n                break;\n              case 4:\n                _context8.next = 6;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.send({\n                  trading_platform_deposit: 1,\n                  platform: platform,\n                  to_account: this.current_account.account_id\n                });\n              case 6:\n                response = _context8.sent;\n                return _context8.abrupt("break", 18);\n              case 8:\n                _context8.next = 10;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.send({\n                  trading_platform_deposit: 1,\n                  platform: _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.CTRADER,\n                  to_account: this.current_account.account_id\n                });\n              case 10:\n                response = _context8.sent;\n                return _context8.abrupt("break", 18);\n              case 12:\n                _context8.next = 14;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.mt5Deposit({\n                  to_mt5: this.current_account.login\n                });\n              case 14:\n                response = _context8.sent;\n                return _context8.abrupt("break", 18);\n              case 16:\n                response.error = \'Invalid platform\';\n                return _context8.abrupt("break", 18);\n              case 18:\n                if (response.error) {\n                  _context8.next = 39;\n                  break;\n                }\n                _context8.t1 = platform;\n                _context8.next = _context8.t1 === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE ? 22 : _context8.t1 === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.CTRADER ? 26 : _context8.t1 === _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5 ? 30 : 34;\n                break;\n              case 22:\n                _context8.next = 24;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.tradingPlatformAccountsList(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE).then(this.root_store.client.responseTradingPlatformAccountsList);\n              case 24:\n                new_balance = (_this$root_store$clie4 = this.root_store.client.dxtrade_accounts_list.find(function (item) {\n                  return item.account_id === _this4.current_account.account_id;\n                })) === null || _this$root_store$clie4 === void 0 ? void 0 : _this$root_store$clie4.balance;\n                return _context8.abrupt("break", 35);\n              case 26:\n                _context8.next = 28;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.tradingPlatformAccountsList(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.CTRADER).then(this.root_store.client.responseTradingPlatformAccountsList);\n              case 28:\n                new_balance = (_this$root_store$clie5 = this.root_store.client.ctrader_accounts_list.find(function (item) {\n                  return item.account_id === _this4.current_account.account_id;\n                })) === null || _this$root_store$clie5 === void 0 ? void 0 : _this$root_store$clie5.balance;\n                return _context8.abrupt("break", 35);\n              case 30:\n                _context8.next = 32;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.mt5LoginList().then(this.root_store.client.responseMt5LoginList);\n              case 32:\n                new_balance = (_this$root_store$clie6 = this.root_store.client.mt5_login_list.find(function (item) {\n                  return item.login === _this4.current_account.login;\n                })) === null || _this$root_store$clie6 === void 0 ? void 0 : _this$root_store$clie6.balance;\n                return _context8.abrupt("break", 35);\n              case 34:\n                return _context8.abrupt("break", 35);\n              case 35:\n                (0,mobx__WEBPACK_IMPORTED_MODULE_0__.runInAction)(function () {\n                  // Get new current account\n                  _this4.root_store.ui.is_top_up_virtual_open = false;\n                  _this4.current_account.balance = new_balance;\n                });\n                setTimeout(function () {\n                  (0,mobx__WEBPACK_IMPORTED_MODULE_0__.runInAction)(function () {\n                    _this4.root_store.ui.is_top_up_virtual_success = true;\n                  });\n                }, 250);\n                _context8.next = 40;\n                break;\n              case 39:\n                // eslint-disable-next-line no-console\n                console.error(response);\n              case 40:\n                this.root_store.ui.setTopUpInProgress(false);\n              case 41:\n              case "end":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n      function topUpVirtual(_x14) {\n        return _topUpVirtual.apply(this, arguments);\n      }\n      return topUpVirtual;\n    }()\n  }, {\n    key: "sendVerifyEmail",\n    value: function sendVerifyEmail() {\n      return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.verifyEmail(this.root_store.client.email, \'trading_platform_investor_password_reset\');\n    }\n  }, {\n    key: "setDxtradeToken",\n    value: function setDxtradeToken(response, server) {\n      if (!response.error) {\n        var dxtrade = response.service_token.dxtrade;\n        this.dxtrade_tokens[server] = dxtrade.token;\n      }\n    }\n  }, {\n    key: "setCTraderToken",\n    value: function setCTraderToken(response, server) {\n      if (!response.error) {\n        var ctrader = response.service_token.ctrader;\n        this.ctrader_tokens[server] = ctrader.token;\n      }\n    }\n  }, {\n    key: "loadDxtradeTokens",\n    value: function loadDxtradeTokens() {\n      var _this5 = this;\n      [\'demo\', \'real\'].forEach(function (account_type) {\n        var has_existing_account = _this5.root_store.client.dxtrade_accounts_list.some(function (account) {\n          return account.account_type === account_type;\n        });\n        if (!_this5.dxtrade_tokens[account_type] && has_existing_account) {\n          _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.getServiceToken(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.DXTRADE, account_type).then(function (response) {\n            return _this5.setDxtradeToken(response, account_type);\n          });\n        }\n      });\n    }\n  }, {\n    key: "loadCTraderTokens",\n    value: function loadCTraderTokens() {\n      var _this6 = this;\n      [\'demo\', \'real\'].forEach(function (account_type) {\n        var has_existing_account = _this6.root_store.client.ctrader_accounts_list.some(function (account) {\n          return account.account_type === account_type;\n        });\n        if (!_this6.ctrader_tokens[account_type] && has_existing_account) {\n          _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.getServiceToken(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.CTRADER, account_type).then(function (response) {\n            return _this6.setCTraderToken(response, account_type);\n          });\n        }\n      });\n    }\n  }, {\n    key: "setJurisdictionSelectedShortcode",\n    value: function setJurisdictionSelectedShortcode(shortcode) {\n      this.jurisdiction_selected_shortcode = shortcode;\n    }\n  }, {\n    key: "toggleCFDVerificationModal",\n    value: function toggleCFDVerificationModal() {\n      this.is_cfd_verification_modal_visible = !this.is_cfd_verification_modal_visible;\n    }\n  }, {\n    key: "setMigratedMT5Accounts",\n    value: function setMigratedMT5Accounts(accounts) {\n      this.migrated_mt5_accounts = accounts;\n    }\n  }], [{\n    key: "changePassword",\n    value: function () {\n      var _changePassword = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(_ref4) {\n        var _response, _response$error;\n        var login, old_password, new_password, password_type, response;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                login = _ref4.login, old_password = _ref4.old_password, new_password = _ref4.new_password, password_type = _ref4.password_type;\n                if (!(password_type === \'investor\')) {\n                  _context9.next = 7;\n                  break;\n                }\n                _context9.next = 4;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.tradingPlatformInvestorPasswordChange({\n                  account_id: login,\n                  old_password: old_password,\n                  new_password: new_password,\n                  platform: _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5\n                });\n              case 4:\n                response = _context9.sent;\n                _context9.next = 10;\n                break;\n              case 7:\n                _context9.next = 9;\n                return _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.WS.authorized.tradingPlatformPasswordChange({\n                  account_id: login,\n                  old_password: old_password,\n                  new_password: new_password,\n                  platform: _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.CFD_PLATFORMS.MT5\n                });\n              case 9:\n                response = _context9.sent;\n              case 10:\n                return _context9.abrupt("return", (_response = response) === null || _response === void 0 ? void 0 : (_response$error = _response.error) === null || _response$error === void 0 ? void 0 : _response$error.message);\n              case 11:\n              case "end":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n      function changePassword(_x15) {\n        return _changePassword.apply(this, arguments);\n      }\n      return changePassword;\n    }()\n  }]);\n  return CFDStore;\n}(_base_store__WEBPACK_IMPORTED_MODULE_2__["default"]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3RvcmVzL01vZHVsZXMvQ0ZEL2NmZC1zdG9yZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBUUE7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQXVCQTs7QUFvQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQTNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUlBO0FBRkE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUhBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUhBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQWlCQTtBQUFBO0FBQUE7QUFBQTtBQWRBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFTQTtBQUNBO0FBQUE7QUFGQTtBQUFBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFtQkE7QUFBQTtBQUFBO0FBQUE7QUFmQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBeUJBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBaENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBTEE7QUFBQTtBQUFBO0FBUUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGRlcml2L2NmZC8uL3NyYy9TdG9yZXMvTW9kdWxlcy9DRkQvY2ZkLXN0b3JlLmpzP2E0ZDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWN0aW9uLCBjb21wdXRlZCwgb2JzZXJ2YWJsZSwgcmVhY3Rpb24sIHJ1bkluQWN0aW9uLCBtYWtlT2JzZXJ2YWJsZSwgb3ZlcnJpZGUgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7XG4gICAgZ2V0QWNjb3VudExpc3RLZXksXG4gICAgZ2V0QWNjb3VudFR5cGVGaWVsZHMsXG4gICAgQ0ZEX1BMQVRGT1JNUyxcbiAgICBXUyxcbiAgICBKdXJpc2RpY3Rpb24sXG4gICAgSlVSSVNESUNUSU9OX01BUktFVF9UWVBFUyxcbn0gZnJvbSAnQGRlcml2L3NoYXJlZCc7XG5pbXBvcnQgQmFzZVN0b3JlIGZyb20gJy4uLy4uL2Jhc2Utc3RvcmUnO1xuXG5pbXBvcnQgeyBnZXREeENvbXBhbmllcywgZ2V0TXRDb21wYW5pZXMgfSBmcm9tICcuL0hlbHBlcnMvY2ZkLWNvbmZpZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENGRFN0b3JlIGV4dGVuZHMgQmFzZVN0b3JlIHtcbiAgICBpc19jb21wYXJlX2FjY291bnRzX3Zpc2libGUgPSBmYWxzZTtcbiAgICBpc19jZmRfcGVyc29uYWxfZGV0YWlsc19tb2RhbF92aXNpYmxlID0gZmFsc2U7XG4gICAgaXNfanVyaXNkaWN0aW9uX21vZGFsX3Zpc2libGUgPSBmYWxzZTtcbiAgICBpc19tdDVfdHJhZGVfbW9kYWxfdmlzaWJsZSA9IGZhbHNlO1xuICAgIGp1cmlzZGljdGlvbl9zZWxlY3RlZF9zaG9ydGNvZGUgPSAnJztcblxuICAgIGFjY291bnRfdHlwZSA9IHtcbiAgICAgICAgY2F0ZWdvcnk6ICcnLFxuICAgICAgICB0eXBlOiAnJyxcbiAgICB9O1xuXG4gICAgbXQ1X3RyYWRlX2FjY291bnQgPSB7fTtcbiAgICBuZXdfYWNjb3VudF9yZXNwb25zZSA9IHt9O1xuICAgIG1hcF90eXBlID0ge307XG4gICAgaGFzX2NmZF9lcnJvciA9IGZhbHNlO1xuICAgIGVycm9yX21lc3NhZ2UgPSAnJztcblxuICAgIGlzX2FjY291bnRfYmVpbmdfY3JlYXRlZCA9IGZhbHNlO1xuICAgIGlzX2NmZF9zdWNjZXNzX2RpYWxvZ19lbmFibGVkID0gZmFsc2U7XG4gICAgaXNfbXQ1X2ZpbmFuY2lhbF9zdHBfbW9kYWxfb3BlbiA9IGZhbHNlO1xuICAgIGlzX2NmZF9wYXNzd29yZF9tb2RhbF9lbmFibGVkID0gZmFsc2U7XG4gICAgbXQ1X21pZ3JhdGlvbl9lcnJvciA9ICcnO1xuICAgIGN1cnJlbnRfYWNjb3VudCA9IHVuZGVmaW5lZDsgLy8gdGhpcyBpcyBhIHRtcCB2YWx1ZSwgZG9uJ3QgcmVseSBvbiBpdCwgdW5sZXNzIHlvdSBzZXQgaXQgZmlyc3QuXG5cbiAgICBlcnJvcl90eXBlID0gdW5kZWZpbmVkO1xuXG4gICAgaXNfY2ZkX3ZlcmlmaWNhdGlvbl9tb2RhbF92aXNpYmxlID0gZmFsc2U7XG4gICAgZHh0cmFkZV90b2tlbnMgPSB7XG4gICAgICAgIGRlbW86ICcnLFxuICAgICAgICByZWFsOiAnJyxcbiAgICB9O1xuICAgIGN0cmFkZXJfdG9rZW5zID0ge1xuICAgICAgICBkZW1vOiAnJyxcbiAgICAgICAgcmVhbDogJycsXG4gICAgfTtcblxuICAgIHJlYWxfc3ludGhldGljX2FjY291bnRzX2V4aXN0aW5nX2RhdGEgPSBbXTtcbiAgICByZWFsX2ZpbmFuY2lhbF9hY2NvdW50c19leGlzdGluZ19kYXRhID0gW107XG4gICAgcmVhbF9zd2FwZnJlZV9hY2NvdW50c19leGlzdGluZ19kYXRhID0gW107XG5cbiAgICBtaWdyYXRlZF9tdDVfYWNjb3VudHMgPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKHsgcm9vdF9zdG9yZSB9KSB7XG4gICAgICAgIHN1cGVyKHsgcm9vdF9zdG9yZSB9KTtcblxuICAgICAgICBtYWtlT2JzZXJ2YWJsZSh0aGlzLCB7XG4gICAgICAgICAgICBpc19jb21wYXJlX2FjY291bnRzX3Zpc2libGU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19jZmRfcGVyc29uYWxfZGV0YWlsc19tb2RhbF92aXNpYmxlOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaXNfanVyaXNkaWN0aW9uX21vZGFsX3Zpc2libGU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19tdDVfdHJhZGVfbW9kYWxfdmlzaWJsZTogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGp1cmlzZGljdGlvbl9zZWxlY3RlZF9zaG9ydGNvZGU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBhY2NvdW50X3R5cGU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBtdDVfdHJhZGVfYWNjb3VudDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIG10NV9taWdyYXRpb25fZXJyb3I6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBuZXdfYWNjb3VudF9yZXNwb25zZTogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIG1hcF90eXBlOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgaGFzX2NmZF9lcnJvcjogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGVycm9yX21lc3NhZ2U6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19hY2NvdW50X2JlaW5nX2NyZWF0ZWQ6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19jZmRfc3VjY2Vzc19kaWFsb2dfZW5hYmxlZDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX210NV9maW5hbmNpYWxfc3RwX21vZGFsX29wZW46IG9ic2VydmFibGUsXG4gICAgICAgICAgICBpc19jZmRfcGFzc3dvcmRfbW9kYWxfZW5hYmxlZDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGN1cnJlbnRfYWNjb3VudDogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGlzX2NmZF92ZXJpZmljYXRpb25fbW9kYWxfdmlzaWJsZTogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGVycm9yX3R5cGU6IG9ic2VydmFibGUsXG4gICAgICAgICAgICBkeHRyYWRlX3Rva2Vuczogb2JzZXJ2YWJsZSxcbiAgICAgICAgICAgIGN0cmFkZXJfdG9rZW5zOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgbWlncmF0ZWRfbXQ1X2FjY291bnRzOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgYWNjb3VudF90aXRsZTogY29tcHV0ZWQsXG4gICAgICAgICAgICBjdXJyZW50X2xpc3Q6IGNvbXB1dGVkLFxuICAgICAgICAgICAgaGFzX2NyZWF0ZWRfYWNjb3VudF9mb3Jfc2VsZWN0ZWRfanVyaXNkaWN0aW9uOiBjb21wdXRlZCxcbiAgICAgICAgICAgIGhhc19zdWJtaXR0ZWRfY2ZkX3BlcnNvbmFsX2RldGFpbHM6IGNvbXB1dGVkLFxuICAgICAgICAgICAgb25Nb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25Vbm1vdW50OiBvdmVycmlkZSxcbiAgICAgICAgICAgIGNoZWNrU2hvdWxkT3BlbkFjY291bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHJlYWxBY2NvdW50U2lnbnVwRW5kTGlzdGVuZXI6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHJlc2V0Rm9ybUVycm9yczogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgY2xlYXJDRkRFcnJvcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgY3JlYXRlQ0ZEQWNjb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgZGlzYWJsZUNGRFBhc3N3b3JkTW9kYWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGVuYWJsZUNGRFBhc3N3b3JkTW9kYWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGdldE5hbWU6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG1pZ3JhdGVNVDVBY2NvdW50czogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb3Blbk1UNUFjY291bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9wZW5DRkRBY2NvdW50OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBiZWdpblJlYWxTaWdudXBGb3JNdDU6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGVuYWJsZU10NUZpbmFuY2lhbFN0cE1vZGFsOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRBY2NvdW50VHlwZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0Q3VycmVudEFjY291bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldE1UNVRyYWRlQWNjb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0SXNBY2NvdW50QmVpbmdDcmVhdGVkOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRFcnJvcjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0Q0ZETmV3QWNjb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0Q0ZEU3VjY2Vzc0RpYWxvZzogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0TVQ1TWlncmF0aW9uRXJyb3I6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldE1pZ3JhdGVkTVQ1QWNjb3VudHM6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGdldEFjY291bnRTdGF0dXM6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGNyZWF0TVQ1UGFzc3dvcmQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHN1Ym1pdE10NVBhc3N3b3JkOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBjcmVhdGVDRkRQYXNzd29yZDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc3VibWl0Q0ZEUGFzc3dvcmQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHRvZ2dsZUNvbXBhcmVBY2NvdW50c01vZGFsOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBnZXRSZWFsU3ludGhldGljQWNjb3VudHNFeGlzdGluZ0RhdGE6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGdldFJlYWxGaW5hbmNpYWxBY2NvdW50c0V4aXN0aW5nRGF0YTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgZ2V0UmVhbFN3YXBmcmVlQWNjb3VudHNFeGlzdGluZ0RhdGE6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHRvZ2dsZUp1cmlzZGljdGlvbk1vZGFsOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICB0b2dnbGVNVDVUcmFkZU1vZGFsOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBkaXNhYmxlTXQ1RmluYW5jaWFsU3RwTW9kYWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHRvcFVwVmlydHVhbDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2VuZFZlcmlmeUVtYWlsOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBzZXRKdXJpc2RpY3Rpb25TZWxlY3RlZFNob3J0Y29kZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgdG9nZ2xlQ0ZEVmVyaWZpY2F0aW9uTW9kYWw6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIHNldER4dHJhZGVUb2tlbjogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgc2V0Q1RyYWRlclRva2VuOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBsb2FkRHh0cmFkZVRva2VuczogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgbG9hZENUcmFkZXJUb2tlbnM6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmVhY3Rpb24oXG4gICAgICAgIC8vICAgICAoKSA9PiBbdGhpcy5yb290X3N0b3JlLmNsaWVudC5keHRyYWRlX2FjY291bnRzX2xpc3RdLFxuICAgICAgICAvLyAgICAgKCkgPT4ge1xuICAgICAgICAvLyAgICAgICAgIGlmICh0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmR4dHJhZGVfYWNjb3VudHNfbGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMubG9hZER4dHJhZGVUb2tlbnMoKTtcbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICk7XG5cbiAgICAgICAgcmVhY3Rpb24oXG4gICAgICAgICAgICAoKSA9PiBbdGhpcy5yb290X3N0b3JlLmNsaWVudC5jdHJhZGVyX2FjY291bnRzX2xpc3RdLFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmN0cmFkZXJfYWNjb3VudHNfbGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZENUcmFkZXJUb2tlbnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZ2V0IGFjY291bnRfdGl0bGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRfdHlwZS5jYXRlZ29yeVxuICAgICAgICAgICAgPyBnZXRNdENvbXBhbmllcyh0aGlzLnJvb3Rfc3RvcmUudHJhZGVyc19odWIuc2hvd19ldV9yZWxhdGVkX2NvbnRlbnQpW3RoaXMuYWNjb3VudF90eXBlLmNhdGVnb3J5XVtcbiAgICAgICAgICAgICAgICAgIHRoaXMuYWNjb3VudF90eXBlLnR5cGVcbiAgICAgICAgICAgICAgXS50aXRsZVxuICAgICAgICAgICAgOiAnJztcbiAgICB9XG5cbiAgICBnZXQgaGFzX3N1Ym1pdHRlZF9jZmRfcGVyc29uYWxfZGV0YWlscygpIHtcbiAgICAgICAgY29uc3QgeyBjaXRpemVuLCBwbGFjZV9vZl9iaXJ0aCwgdGF4X3Jlc2lkZW5jZSwgdGF4X2lkZW50aWZpY2F0aW9uX251bWJlciwgYWNjb3VudF9vcGVuaW5nX3JlYXNvbiB9ID1cbiAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuYWNjb3VudF9zZXR0aW5ncztcbiAgICAgICAgcmV0dXJuICEhKGNpdGl6ZW4gJiYgcGxhY2Vfb2ZfYmlydGggJiYgdGF4X3Jlc2lkZW5jZSAmJiB0YXhfaWRlbnRpZmljYXRpb25fbnVtYmVyICYmIGFjY291bnRfb3BlbmluZ19yZWFzb24pO1xuICAgIH1cblxuICAgIGdldCBjdXJyZW50X2xpc3QoKSB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSB7fTtcbiAgICAgICAgY29uc3Qgc2hvd19ldV9yZWxhdGVkX2NvbnRlbnQgPSB0aGlzLnJvb3Rfc3RvcmUudHJhZGVyc19odWIuc2hvd19ldV9yZWxhdGVkX2NvbnRlbnQ7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQubXQ1X2xvZ2luX2xpc3RcbiAgICAgICAgICAgIC5maWx0ZXIoYWNjID0+XG4gICAgICAgICAgICAgICAgc2hvd19ldV9yZWxhdGVkX2NvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgPyBhY2MubGFuZGluZ19jb21wYW55X3Nob3J0ID09PSAnbWFsdGFpbnZlc3QnXG4gICAgICAgICAgICAgICAgICAgIDogYWNjLmxhbmRpbmdfY29tcGFueV9zaG9ydCAhPT0gJ21hbHRhaW52ZXN0J1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmZvckVhY2goYWNjb3VudCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZS5nLiBtdDUucmVhbC5maW5hbmNpYWxfc3RwXG4gICAgICAgICAgICAgICAgbGlzdFtnZXRBY2NvdW50TGlzdEtleShhY2NvdW50LCBDRkRfUExBVEZPUk1TLk1UNSwgYWNjb3VudC5sYW5kaW5nX2NvbXBhbnlfc2hvcnQpXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYWNjb3VudCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5keHRyYWRlX2FjY291bnRzX2xpc3QuZm9yRWFjaChhY2NvdW50ID0+IHtcbiAgICAgICAgICAgIC8vIGUuZy4gZHh0cmFkZS5yZWFsLmZpbmFuY2lhbF9zdHBcbiAgICAgICAgICAgIGxpc3RbZ2V0QWNjb3VudExpc3RLZXkoYWNjb3VudCwgQ0ZEX1BMQVRGT1JNUy5EWFRSQURFKV0gPSB7XG4gICAgICAgICAgICAgICAgLi4uYWNjb3VudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmN0cmFkZXJfYWNjb3VudHNfbGlzdC5mb3JFYWNoKGFjY291bnQgPT4ge1xuICAgICAgICAgICAgbGlzdFtnZXRBY2NvdW50TGlzdEtleShhY2NvdW50LCBDRkRfUExBVEZPUk1TLkNUUkFERVIpXSA9IHtcbiAgICAgICAgICAgICAgICAuLi5hY2NvdW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgICBnZXQgbXQ1X2NvbXBhbmllcygpIHtcbiAgICAgICAgcmV0dXJuIGdldE10Q29tcGFuaWVzKHRoaXMucm9vdF9zdG9yZS5jbGllbnQuaXNfZXUpO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gICAgZ2V0IGR4dHJhZGVfY29tcGFuaWVzKCkge1xuICAgICAgICByZXR1cm4gZ2V0RHhDb21wYW5pZXMoKTtcbiAgICB9XG5cbiAgICBnZXQgaGFzX2NyZWF0ZWRfYWNjb3VudF9mb3Jfc2VsZWN0ZWRfanVyaXNkaWN0aW9uKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuYWNjb3VudF90eXBlLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3N5bnRoZXRpYyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhbF9zeW50aGV0aWNfYWNjb3VudHNfZXhpc3RpbmdfZGF0YT8uc29tZShcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudCA9PiBhY2NvdW50LmxhbmRpbmdfY29tcGFueV9zaG9ydCA9PT0gdGhpcy5qdXJpc2RpY3Rpb25fc2VsZWN0ZWRfc2hvcnRjb2RlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNhc2UgJ2FsbCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhbF9zd2FwZnJlZV9hY2NvdW50c19leGlzdGluZ19kYXRhPy5zb21lKFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ID0+IGFjY291bnQubGFuZGluZ19jb21wYW55X3Nob3J0ID09PSB0aGlzLmp1cmlzZGljdGlvbl9zZWxlY3RlZF9zaG9ydGNvZGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWFsX2ZpbmFuY2lhbF9hY2NvdW50c19leGlzdGluZ19kYXRhPy5zb21lKFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50ID0+IGFjY291bnQubGFuZGluZ19jb21wYW55X3Nob3J0ID09PSB0aGlzLmp1cmlzZGljdGlvbl9zZWxlY3RlZF9zaG9ydGNvZGVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb3VudCgpIHtcbiAgICAgICAgdGhpcy5jaGVja1Nob3VsZE9wZW5BY2NvdW50KCk7XG4gICAgICAgIHRoaXMub25SZWFsQWNjb3VudFNpZ251cEVuZCh0aGlzLnJlYWxBY2NvdW50U2lnbnVwRW5kTGlzdGVuZXIpO1xuICAgICAgICB0aGlzLnJvb3Rfc3RvcmUudWkuaXNfY2ZkX3BhZ2UgPSB0cnVlO1xuICAgIH1cblxuICAgIG9uVW5tb3VudCgpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlUmVhbEFjY291bnRTaWdudXBFbmQoKTtcbiAgICAgICAgdGhpcy5yb290X3N0b3JlLnVpLmlzX2NmZF9wYWdlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gb3RoZXIgcGxhdGZvcm1zIGNhbiByZWRpcmVjdCB0byBoZXJlIHVzaW5nIGFjY291bnQgc3dpdGNoZXIncyBgQWRkYCBhY2NvdW50IGJ1dHRvblxuICAgIC8vIHNvIGluIHRoYXQgY2FzZSB3ZSBzaG91bGQgb3BlbiB0aGUgY29ycmVzcG9uZGluZyBhY2NvdW50IG9wZW5pbmcgbW9kYWwgb24gbG9hZC9jb21wb25lbnQgdXBkYXRlXG4gICAgY2hlY2tTaG91bGRPcGVuQWNjb3VudCgpIHtcbiAgICAgICAgY29uc3QgYWNjb3VudF90eXBlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnb3Blbl9jZmRfYWNjb3VudF90eXBlJyk7XG4gICAgICAgIGlmIChhY2NvdW50X3R5cGUpIHtcbiAgICAgICAgICAgIGNvbnN0IFtjYXRlZ29yeSwgcGxhdGZvcm0sIHR5cGUsIHNldF9wYXNzd29yZF0gPSBhY2NvdW50X3R5cGUuc3BsaXQoJy4nKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQ0ZEQWNjb3VudCh7IGNhdGVnb3J5LCBwbGF0Zm9ybSwgdHlwZSwgc2V0X3Bhc3N3b3JkIH0pO1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnb3Blbl9jZmRfYWNjb3VudF90eXBlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRJc0FjY291bnRCZWluZ0NyZWF0ZWQoaXNfYWNjb3VudF9iZWluZ19jcmVhdGVkKSB7XG4gICAgICAgIHRoaXMuaXNfYWNjb3VudF9iZWluZ19jcmVhdGVkID0gaXNfYWNjb3VudF9iZWluZ19jcmVhdGVkO1xuICAgIH1cblxuICAgIHJlYWxBY2NvdW50U2lnbnVwRW5kTGlzdGVuZXIoKSB7XG4gICAgICAgIGNvbnN0IHBvc3Rfc2lnbnVwID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdwb3N0X3JlYWxfYWNjb3VudF9zaWdudXAnKSk7XG4gICAgICAgIGlmIChwb3N0X3NpZ251cCAmJiBwb3N0X3NpZ251cC5jYXRlZ29yeSAmJiBwb3N0X3NpZ251cC50eXBlKSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdwb3N0X3JlYWxfYWNjb3VudF9zaWdudXAnKTtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlQ0ZEUGFzc3dvcmRNb2RhbCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICByZXNldEZvcm1FcnJvcnMoKSB7XG4gICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZSA9ICcnO1xuICAgICAgICB0aGlzLmVycm9yX3R5cGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGFzX2NmZF9lcnJvciA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNsZWFyQ0ZERXJyb3IoKSB7XG4gICAgICAgIHRoaXMucmVzZXRGb3JtRXJyb3JzKCk7XG4gICAgICAgIHRoaXMuaXNfY2ZkX3Bhc3N3b3JkX21vZGFsX2VuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVDRkRBY2NvdW50KHsgY2F0ZWdvcnksIHBsYXRmb3JtLCB0eXBlLCBzZXRfcGFzc3dvcmQgfSkge1xuICAgICAgICB0aGlzLmNsZWFyQ0ZERXJyb3IoKTtcbiAgICAgICAgdGhpcy5zZXRBY2NvdW50VHlwZSh7XG4gICAgICAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocGxhdGZvcm0gPT09IENGRF9QTEFURk9STVMuRFhUUkFERSkge1xuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ID09PSAncmVhbCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWxDRkRTaWdudXAoc2V0X3Bhc3N3b3JkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZW1vQ0ZEU2lnbnVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocGxhdGZvcm0gPT09IENGRF9QTEFURk9STVMuQ1RSQURFUikge1xuICAgICAgICAgICAgdGhpcy5zZXRKdXJpc2RpY3Rpb25TZWxlY3RlZFNob3J0Y29kZSgnc3ZnJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5hY2NvdW50X3R5cGUuY2F0ZWdvcnkgPT09ICdkZW1vJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNBY2NvdW50QmVpbmdDcmVhdGVkKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWNjb3VudF9jcmVhdGlvbl92YWx1ZXMgPSB7XG4gICAgICAgICAgICAgICAgcGxhdGZvcm0sXG4gICAgICAgICAgICAgICAgYWNjb3VudF90eXBlOiB0aGlzLmFjY291bnRfdHlwZS5jYXRlZ29yeSxcbiAgICAgICAgICAgICAgICBtYXJrZXRfdHlwZTogdGhpcy5hY2NvdW50X3R5cGUudHlwZSxcbiAgICAgICAgICAgICAgICBjb21wYW55OiB0aGlzLmp1cmlzZGljdGlvbl9zZWxlY3RlZF9zaG9ydGNvZGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLm9wZW5DRkRBY2NvdW50KGFjY291bnRfY3JlYXRpb25fdmFsdWVzKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVycm9yKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUNGRFBhc3N3b3JkTW9kYWwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENGRFN1Y2Nlc3NEaWFsb2codHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0cmFkaW5nX3BsYXRmb3JtX2FjY291bnRzX2xpc3RfcmVzcG9uc2UgPSBhd2FpdCBXUy50cmFkaW5nUGxhdGZvcm1BY2NvdW50c0xpc3QoXG4gICAgICAgICAgICAgICAgICAgIENGRF9QTEFURk9STVMuQ1RSQURFUlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5yZXNwb25zZVRyYWRpbmdQbGF0Zm9ybUFjY291bnRzTGlzdCh0cmFkaW5nX3BsYXRmb3JtX2FjY291bnRzX2xpc3RfcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIFdTLnRyYW5zZmVyQmV0d2VlbkFjY291bnRzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJc0FjY291bnRCZWluZ0NyZWF0ZWQoZmFsc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVycm9yKHRydWUsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElzQWNjb3VudEJlaW5nQ3JlYXRlZChmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocGxhdGZvcm0gPT09IENGRF9QTEFURk9STVMuTVQ1KSB7XG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgPT09ICdyZWFsJykge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlSnVyaXNkaWN0aW9uTW9kYWwoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucm9vdF9zdG9yZS50cmFkZXJzX2h1Yi5zaG93X2V1X3JlbGF0ZWRfY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEp1cmlzZGljdGlvblNlbGVjdGVkU2hvcnRjb2RlKEp1cmlzZGljdGlvbi5NQUxUQV9JTlZFU1QpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLnNldEp1cmlzZGljdGlvblNlbGVjdGVkU2hvcnRjb2RlKEp1cmlzZGljdGlvbi5TVkcpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVtb0NGRFNpZ251cCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVtb0NGRFNpZ251cCgpIHtcbiAgICAgICAgdGhpcy5lbmFibGVDRkRQYXNzd29yZE1vZGFsKCk7XG4gICAgfVxuXG4gICAgZGlzYWJsZUNGRFBhc3N3b3JkTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuaXNfY2ZkX3Bhc3N3b3JkX21vZGFsX2VuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBlbmFibGVDRkRQYXNzd29yZE1vZGFsKCkge1xuICAgICAgICB0aGlzLmlzX2NmZF9wYXNzd29yZF9tb2RhbF9lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXROYW1lKGFjY291bnRfdHlwZSA9IHRoaXMuYWNjb3VudF90eXBlKSB7XG4gICAgICAgIGNvbnN0IHsgZmlyc3RfbmFtZSB9ID0gdGhpcy5yb290X3N0b3JlLmNsaWVudC5hY2NvdW50X3NldHRpbmdzICYmIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuYWNjb3VudF9zZXR0aW5ncztcbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLm10NV9jb21wYW5pZXNbYWNjb3VudF90eXBlPy5jYXRlZ29yeV1bYWNjb3VudF90eXBlPy50eXBlXS50aXRsZTtcblxuICAgICAgICAvLyBGaXJzdCBuYW1lIGlzIG5vdCBzZXQgd2hlbiB1c2VyIGhhcyBubyByZWFsIGFjY291bnRcbiAgICAgICAgcmV0dXJuIGZpcnN0X25hbWUgPyBbZmlyc3RfbmFtZSwgdGl0bGVdLmpvaW4oJyAnKSA6IHRpdGxlO1xuICAgIH1cblxuICAgIGFzeW5jIG1pZ3JhdGVNVDVBY2NvdW50cyh2YWx1ZXMsIGFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYWNjb3VudF90b19taWdyYXRlID0gdGhpcy5yb290X3N0b3JlLmNsaWVudC5tdDVfbG9naW5fbGlzdC5maWx0ZXIoXG4gICAgICAgICAgICBhY2MgPT4gYWNjLmxhbmRpbmdfY29tcGFueV9zaG9ydCA9PT0gSnVyaXNkaWN0aW9uLlNWRyAmJiAhIWFjYy5lbGlnaWJsZV90b19taWdyYXRlXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gYWNjb3VudF90b19taWdyYXRlLm1hcChhY2NvdW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZWxpZ2libGVfdG9fbWlncmF0ZSB9ID0gYWNjb3VudDtcbiAgICAgICAgICAgIGNvbnN0IFt0eXBlLCBzaG9ydGNvZGVdID0gT2JqZWN0LmVudHJpZXMoZWxpZ2libGVfdG9fbWlncmF0ZSlbMF07XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50X3R5cGUgPSB7XG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICdyZWFsJyxcbiAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0TWlncmF0ZWRNVDVBY2NvdW50cyhbXG4gICAgICAgICAgICAgICAgLi4udGhpcy5taWdyYXRlZF9tdDVfYWNjb3VudHMsXG4gICAgICAgICAgICAgICAgeyBsb2dpbl9pZDogYWNjb3VudC5sb2dpbiwgdG9fYWNjb3VudDogeyAuLi4oZWxpZ2libGVfdG9fbWlncmF0ZSA/PyB7fSkgfSB9LFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0TWlncmF0ZUFjY291bnQodmFsdWVzLCBzaG9ydGNvZGUsIGFjY291bnRfdHlwZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgICAgICAgY29uc3QgaGFzX2Vycm9yID0gcmVzdWx0cy5maW5kKHJlc3VsdCA9PiByZXN1bHQuZXJyb3IpO1xuXG4gICAgICAgICAgICBpZiAoIWhhc19lcnJvcikge1xuICAgICAgICAgICAgICAgIGFjdGlvbnMuc2V0U3RhdHVzKHsgc3VjY2VzczogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBhY3Rpb25zLnNldFN1Ym1pdHRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RXJyb3IoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q0ZEU3VjY2Vzc0RpYWxvZyh0cnVlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdldEFjY291bnRTdGF0dXMoQ0ZEX1BMQVRGT1JNUy5NVDUpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbXQ1X2xvZ2luX2xpc3RfcmVzcG9uc2UgPSBhd2FpdCBXUy5hdXRob3JpemVkLm10NUxvZ2luTGlzdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQucmVzcG9uc2VNdDVMb2dpbkxpc3QobXQ1X2xvZ2luX2xpc3RfcmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgICAgV1MudHJhbnNmZXJCZXR3ZWVuQWNjb3VudHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnJlc3BvbnNlTVQ1VHJhZGluZ1NlcnZlcnMoYXdhaXQgV1MudHJhZGluZ1NlcnZlcnMoQ0ZEX1BMQVRGT1JNUy5NVDUpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRBY2NvdW50U3RhdHVzKENGRF9QTEFURk9STVMuTVQ1KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ0ZERXJyb3IoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE1UNU1pZ3JhdGlvbkVycm9yKGhhc19lcnJvcj8uZXJyb3I/Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0TWlncmF0ZWRNVDVBY2NvdW50cyhbXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLnVpLnRvZ2dsZU1UNU1pZ3JhdGlvbk1vZGFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBBdCBsZWFzdCBvbmUgcmVxdWVzdCBoYXMgZmFpbGVkXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdPbmUgb3IgbW9yZSBNVDUgbWlncmF0aW9uIHJlcXVlc3RzIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXF1ZXN0TWlncmF0ZUFjY291bnQodmFsdWVzLCBzaG9ydGNvZGUsIGFjY291bnRfdHlwZSkge1xuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5nZXROYW1lKGFjY291bnRfdHlwZSk7XG4gICAgICAgIGNvbnN0IGxldmVyYWdlID0gdGhpcy5tdDVfY29tcGFuaWVzW2FjY291bnRfdHlwZS5jYXRlZ29yeV1bYWNjb3VudF90eXBlLnR5cGVdLmxldmVyYWdlO1xuICAgICAgICBjb25zdCB0eXBlX3JlcXVlc3QgPSBnZXRBY2NvdW50VHlwZUZpZWxkcyhhY2NvdW50X3R5cGUpO1xuICAgICAgICBjb25zdCB7IGFkZHJlc3NfbGluZV8xLCBhZGRyZXNzX2xpbmVfMiwgYWRkcmVzc19wb3N0Y29kZSwgYWRkcmVzc19jaXR5LCBhZGRyZXNzX3N0YXRlLCBjb3VudHJ5X2NvZGUsIHBob25lIH0gPVxuICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5hY2NvdW50X3NldHRpbmdzO1xuXG4gICAgICAgIHJldHVybiBXUy5tdDVOZXdBY2NvdW50KHtcbiAgICAgICAgICAgIG1haW5QYXNzd29yZDogdmFsdWVzLnBhc3N3b3JkLFxuICAgICAgICAgICAgZW1haWw6IHRoaXMucm9vdF9zdG9yZS5jbGllbnQuZW1haWxfYWRkcmVzcyxcbiAgICAgICAgICAgIGxldmVyYWdlLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGFkZHJlc3M6IGFkZHJlc3NfbGluZV8xIHx8IGFkZHJlc3NfbGluZV8yLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzc19jaXR5LFxuICAgICAgICAgICAgY291bnRyeTogY291bnRyeV9jb2RlLFxuICAgICAgICAgICAgcGhvbmUsXG4gICAgICAgICAgICBzdGF0ZTogYWRkcmVzc19zdGF0ZSxcbiAgICAgICAgICAgIHppcENvZGU6IGFkZHJlc3NfcG9zdGNvZGUsXG4gICAgICAgICAgICBtaWdyYXRlOiAxLFxuICAgICAgICAgICAgLi4uKHZhbHVlcy5zZXJ2ZXIgPyB7IHNlcnZlcjogdmFsdWVzLnNlcnZlciB9IDoge30pLFxuICAgICAgICAgICAgLi4uKHNob3J0Y29kZSA/IHsgY29tcGFueTogc2hvcnRjb2RlIH0gOiB7fSksXG4gICAgICAgICAgICAuLi4oc2hvcnRjb2RlICE9PSBKdXJpc2RpY3Rpb24uTEFCVUFOXG4gICAgICAgICAgICAgICAgPyB0eXBlX3JlcXVlc3RcbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50X3R5cGU6IEpVUklTRElDVElPTl9NQVJLRVRfVFlQRVMuRklOQU5DSUFMLFxuICAgICAgICAgICAgICAgICAgICAgIG10NV9hY2NvdW50X3R5cGU6ICdmaW5hbmNpYWxfc3RwJyxcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuTVQ1QWNjb3VudCh2YWx1ZXMpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZ2V0TmFtZSgpO1xuICAgICAgICBjb25zdCBsZXZlcmFnZSA9IHRoaXMubXQ1X2NvbXBhbmllc1t0aGlzLmFjY291bnRfdHlwZS5jYXRlZ29yeV1bdGhpcy5hY2NvdW50X3R5cGUudHlwZV0ubGV2ZXJhZ2U7XG4gICAgICAgIGNvbnN0IHR5cGVfcmVxdWVzdCA9IGdldEFjY291bnRUeXBlRmllbGRzKHRoaXMuYWNjb3VudF90eXBlKTtcbiAgICAgICAgY29uc3QgeyBhZGRyZXNzX2xpbmVfMSwgYWRkcmVzc19saW5lXzIsIGFkZHJlc3NfcG9zdGNvZGUsIGFkZHJlc3NfY2l0eSwgYWRkcmVzc19zdGF0ZSwgY291bnRyeV9jb2RlLCBwaG9uZSB9ID1cbiAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuYWNjb3VudF9zZXR0aW5ncztcblxuICAgICAgICByZXR1cm4gV1MubXQ1TmV3QWNjb3VudCh7XG4gICAgICAgICAgICBtYWluUGFzc3dvcmQ6IHZhbHVlcy5wYXNzd29yZCxcbiAgICAgICAgICAgIGVtYWlsOiB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgICBsZXZlcmFnZSxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzX2xpbmVfMSB8fCBhZGRyZXNzX2xpbmVfMixcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3NfY2l0eSxcbiAgICAgICAgICAgIGNvdW50cnk6IGNvdW50cnlfY29kZSxcbiAgICAgICAgICAgIHBob25lLFxuICAgICAgICAgICAgc3RhdGU6IGFkZHJlc3Nfc3RhdGUsXG4gICAgICAgICAgICB6aXBDb2RlOiBhZGRyZXNzX3Bvc3Rjb2RlLFxuICAgICAgICAgICAgLi4uKHRoaXMuYWNjb3VudF90eXBlLnR5cGUgPT09ICdhbGwnID8geyBzdWJfYWNjb3VudF9jYXRlZ29yeTogJ3N3YXBfZnJlZScgfSA6IHt9KSxcbiAgICAgICAgICAgIC4uLih2YWx1ZXMuc2VydmVyID8geyBzZXJ2ZXI6IHZhbHVlcy5zZXJ2ZXIgfSA6IHt9KSxcbiAgICAgICAgICAgIC4uLih0aGlzLmp1cmlzZGljdGlvbl9zZWxlY3RlZF9zaG9ydGNvZGUgPyB7IGNvbXBhbnk6IHRoaXMuanVyaXNkaWN0aW9uX3NlbGVjdGVkX3Nob3J0Y29kZSB9IDoge30pLFxuICAgICAgICAgICAgLi4uKHRoaXMuanVyaXNkaWN0aW9uX3NlbGVjdGVkX3Nob3J0Y29kZSAhPT0gSnVyaXNkaWN0aW9uLkxBQlVBTlxuICAgICAgICAgICAgICAgID8gdHlwZV9yZXF1ZXN0XG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgYWNjb3VudF90eXBlOiAnZmluYW5jaWFsJyxcbiAgICAgICAgICAgICAgICAgICAgICBtdDVfYWNjb3VudF90eXBlOiAnZmluYW5jaWFsX3N0cCcsXG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3BlbkNGREFjY291bnQodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBXUy50cmFkaW5nUGxhdGZvcm1OZXdBY2NvdW50KHtcbiAgICAgICAgICAgIHBhc3N3b3JkOiBDRkRfUExBVEZPUk1TLkRYVFJBREUgPyB2YWx1ZXMucGFzc3dvcmQgOiAnJyxcbiAgICAgICAgICAgIHBsYXRmb3JtOiB2YWx1ZXMucGxhdGZvcm0sXG4gICAgICAgICAgICBhY2NvdW50X3R5cGU6IHRoaXMuYWNjb3VudF90eXBlLmNhdGVnb3J5LFxuICAgICAgICAgICAgbWFya2V0X3R5cGU6XG4gICAgICAgICAgICAgICAgdGhpcy5hY2NvdW50X3R5cGUudHlwZSA9PT0gJ2R4dHJhZGUnIHx8IHRoaXMuYWNjb3VudF90eXBlLnR5cGUgPT09ICdjVHJhZGVyJ1xuICAgICAgICAgICAgICAgICAgICA/ICdhbGwnXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5hY2NvdW50X3R5cGUudHlwZSxcbiAgICAgICAgICAgIGNvbXBhbnk6IHZhbHVlcy5jb21wYW55LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBiZWdpblJlYWxTaWdudXBGb3JNdDUoKSB7XG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3Bvc3RfcmVhbF9hY2NvdW50X3NpZ251cCcsIEpTT04uc3RyaW5naWZ5KHRoaXMuYWNjb3VudF90eXBlKSk7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZS51aS5vcGVuUmVhbEFjY291bnRTaWdudXAoJ3N2ZycpO1xuICAgIH1cblxuICAgIHJlYWxDRkRTaWdudXAoc2V0X3Bhc3N3b3JkKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5hY2NvdW50X3R5cGUudHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnZmluYW5jaWFsJzpcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUNGRFBhc3N3b3JkTW9kYWwoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2ZpbmFuY2lhbF9zdHAnOlxuICAgICAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuZmV0Y2hSZXNpZGVuY2VMaXN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5mZXRjaFN0YXRlc0xpc3QoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmZldGNoQWNjb3VudFNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNldF9wYXNzd29yZCkgdGhpcy5lbmFibGVDRkRQYXNzd29yZE1vZGFsKCk7XG4gICAgICAgICAgICAgICAgZWxzZSB0aGlzLmVuYWJsZU10NUZpbmFuY2lhbFN0cE1vZGFsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzeW50aGV0aWMnOlxuICAgICAgICAgICAgY2FzZSAnZHh0cmFkZSc6XG4gICAgICAgICAgICBjYXNlICdhbGwnOlxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlQ0ZEUGFzc3dvcmRNb2RhbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBkZXRlcm1pbmUgbXQ1IGFjY291bnQgc2lnbnVwLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZW5hYmxlTXQ1RmluYW5jaWFsU3RwTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuaXNfbXQ1X2ZpbmFuY2lhbF9zdHBfbW9kYWxfb3BlbiA9IHRydWU7XG4gICAgfVxuXG4gICAgc2V0QWNjb3VudFR5cGUoYWNjb3VudF90eXBlKSB7XG4gICAgICAgIHRoaXMuYWNjb3VudF90eXBlID0gYWNjb3VudF90eXBlO1xuICAgIH1cblxuICAgIHNldEN1cnJlbnRBY2NvdW50KGRhdGEsIG1ldGEpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50X2FjY291bnQgPSB7XG4gICAgICAgICAgICAuLi5tZXRhLFxuICAgICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzZXRNVDVUcmFkZUFjY291bnQobXQ1X3RyYWRlX2FjY291bnQpIHtcbiAgICAgICAgdGhpcy5tdDVfdHJhZGVfYWNjb3VudCA9IG10NV90cmFkZV9hY2NvdW50O1xuICAgIH1cblxuICAgIHNldEVycm9yKHN0YXRlLCBvYmopIHtcbiAgICAgICAgdGhpcy5oYXNfY2ZkX2Vycm9yID0gc3RhdGU7XG4gICAgICAgIHRoaXMuZXJyb3JfbWVzc2FnZSA9IG9iaiA/IG9iai5tZXNzYWdlIDogJyc7XG4gICAgICAgIHRoaXMuZXJyb3JfdHlwZSA9IG9iaj8uY29kZSA/PyB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgc2V0Q0ZETmV3QWNjb3VudChjZmRfbmV3X2FjY291bnQpIHtcbiAgICAgICAgdGhpcy5uZXdfYWNjb3VudF9yZXNwb25zZSA9IGNmZF9uZXdfYWNjb3VudDtcbiAgICB9XG5cbiAgICBzZXRDRkRTdWNjZXNzRGlhbG9nKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaXNfY2ZkX3N1Y2Nlc3NfZGlhbG9nX2VuYWJsZWQgPSAhIXZhbHVlO1xuICAgIH1cblxuICAgIHNldE1UNU1pZ3JhdGlvbkVycm9yKGVycm9yKSB7XG4gICAgICAgIHRoaXMubXQ1X21pZ3JhdGlvbl9lcnJvciA9IGVycm9yO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFjY291bnRTdGF0dXMocGxhdGZvcm0pIHtcbiAgICAgICAgY29uc3Qgc2hvdWxkX2xvYWRfYWNjb3VudF9zdGF0dXMgPVxuICAgICAgICAgICAgKHBsYXRmb3JtID09PSBDRkRfUExBVEZPUk1TLk1UNSAmJiB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmlzX210NV9wYXNzd29yZF9ub3Rfc2V0KSB8fFxuICAgICAgICAgICAgKHBsYXRmb3JtID09PSBDRkRfUExBVEZPUk1TLkRYVFJBREUgJiYgdGhpcy5yb290X3N0b3JlLmNsaWVudC5pc19keHRyYWRlX3Bhc3N3b3JkX25vdF9zZXQpO1xuXG4gICAgICAgIGlmIChzaG91bGRfbG9hZF9hY2NvdW50X3N0YXR1cykge1xuICAgICAgICAgICAgYXdhaXQgV1MuZ2V0QWNjb3VudFN0YXR1cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRNVDVQYXNzd29yZCh2YWx1ZXMsIGFjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBXUy50cmFkaW5nUGxhdGZvcm1QYXNzd29yZENoYW5nZSh7XG4gICAgICAgICAgICBuZXdfcGFzc3dvcmQ6IHZhbHVlcy5wYXNzd29yZCxcbiAgICAgICAgICAgIHBsYXRmb3JtOiBDRkRfUExBVEZPUk1TLk1UNSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zZXRFcnJvcih0cnVlLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICBhY3Rpb25zLnJlc2V0Rm9ybSh7fSk7XG4gICAgICAgICAgICBhY3Rpb25zLnNldFN1Ym1pdHRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgYWN0aW9ucy5zZXRTdGF0dXMoeyBzdWNjZXNzOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBhc3luYyBzdWJtaXRNdDVQYXNzd29yZCh2YWx1ZXMsIGFjdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdF9zdG9yZS5jbGllbnQuaXNfbXQ1X3Bhc3N3b3JkX25vdF9zZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhc19lcnJvciA9IGF3YWl0IHRoaXMuY3JlYXRNVDVQYXNzd29yZCh2YWx1ZXMsIGFjdGlvbnMpO1xuICAgICAgICAgICAgaWYgKGhhc19lcnJvcikgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZXNldEZvcm1FcnJvcnMoKTtcbiAgICAgICAgaWYgKHRoaXMucm9vdF9zdG9yZS51aS5pc19tdDVfbWlncmF0aW9uX21vZGFsX2VuYWJsZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWlncmF0ZU1UNUFjY291bnRzKHZhbHVlcywgYWN0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMub3Blbk1UNUFjY291bnQodmFsdWVzKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zLnNldFN0YXR1cyh7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgYWN0aW9ucy5zZXRTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVycm9yKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENGRFN1Y2Nlc3NEaWFsb2codHJ1ZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRBY2NvdW50U3RhdHVzKENGRF9QTEFURk9STVMuTVQ1KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG10NV9sb2dpbl9saXN0X3Jlc3BvbnNlID0gYXdhaXQgV1MuYXV0aG9yaXplZC5tdDVMb2dpbkxpc3QoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnJlc3BvbnNlTXQ1TG9naW5MaXN0KG10NV9sb2dpbl9saXN0X3Jlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgIFdTLnRyYW5zZmVyQmV0d2VlbkFjY291bnRzKCk7IC8vIGdldCB0aGUgbGlzdCBvZiB1cGRhdGVkIGFjY291bnRzIGZvciB0cmFuc2ZlciBpbiBjYXNoaWVyXG4gICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5yZXNwb25zZU1UNVRyYWRpbmdTZXJ2ZXJzKGF3YWl0IFdTLnRyYWRpbmdTZXJ2ZXJzKENGRF9QTEFURk9STVMuTVQ1KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDRkROZXdBY2NvdW50KHJlc3BvbnNlLm10NV9uZXdfYWNjb3VudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0QWNjb3VudFN0YXR1cyhDRkRfUExBVEZPUk1TLk1UNSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFcnJvcih0cnVlLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgYWN0aW9ucy5yZXNldEZvcm0oe30pO1xuICAgICAgICAgICAgICAgIGFjdGlvbnMuc2V0U3VibWl0dGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgYWN0aW9ucy5zZXRTdGF0dXMoeyBzdWNjZXNzOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGNyZWF0ZUNGRFBhc3N3b3JkKHZhbHVlcywgYWN0aW9ucykge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFdTLnRyYWRpbmdQbGF0Zm9ybVBhc3N3b3JkQ2hhbmdlKHtcbiAgICAgICAgICAgIG5ld19wYXNzd29yZDogdmFsdWVzLnBhc3N3b3JkLFxuICAgICAgICAgICAgcGxhdGZvcm06IENGRF9QTEFURk9STVMuRFhUUkFERSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zZXRFcnJvcih0cnVlLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICBhY3Rpb25zLnJlc2V0Rm9ybSh7fSk7XG4gICAgICAgICAgICBhY3Rpb25zLnNldFN1Ym1pdHRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgYWN0aW9ucy5zZXRTdGF0dXMoeyBzdWNjZXNzOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGFzeW5jIHN1Ym1pdENGRFBhc3N3b3JkKHZhbHVlcywgYWN0aW9ucykge1xuICAgICAgICBpZiAoQ0ZEX1BMQVRGT1JNUy5EWFRSQURFICYmIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuaXNfZHh0cmFkZV9wYXNzd29yZF9ub3Rfc2V0KSB7XG4gICAgICAgICAgICBjb25zdCBoYXNfZXJyb3IgPSBhd2FpdCB0aGlzLmNyZWF0ZUNGRFBhc3N3b3JkKHZhbHVlcywgYWN0aW9ucyk7XG4gICAgICAgICAgICBpZiAoaGFzX2Vycm9yKSByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMub3BlbkNGREFjY291bnQodmFsdWVzKTtcblxuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0QWNjb3VudFN0YXR1cyhDRkRfUExBVEZPUk1TLkRYVFJBREUpO1xuICAgICAgICAgICAgdGhpcy5zZXRFcnJvcih0cnVlLCByZXNwb25zZS5lcnJvcik7XG4gICAgICAgICAgICBhY3Rpb25zLnJlc2V0Rm9ybSh7fSk7XG4gICAgICAgICAgICBhY3Rpb25zLnNldFN1Ym1pdHRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgYWN0aW9ucy5zZXRTdGF0dXMoeyBzdWNjZXNzOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFjdGlvbnMuc2V0U3RhdHVzKHsgc3VjY2VzczogdHJ1ZSB9KTtcbiAgICAgICAgYWN0aW9ucy5zZXRTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXRFcnJvcihmYWxzZSk7XG4gICAgICAgIHRoaXMuc2V0Q0ZEU3VjY2Vzc0RpYWxvZyh0cnVlKTtcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRBY2NvdW50U3RhdHVzKENGRF9QTEFURk9STVMuRFhUUkFERSk7XG5cbiAgICAgICAgY29uc3QgdHJhZGluZ19wbGF0Zm9ybV9hY2NvdW50c19saXN0X3Jlc3BvbnNlID0gYXdhaXQgV1MudHJhZGluZ1BsYXRmb3JtQWNjb3VudHNMaXN0KHZhbHVlcy5wbGF0Zm9ybSk7XG4gICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQucmVzcG9uc2VUcmFkaW5nUGxhdGZvcm1BY2NvdW50c0xpc3QodHJhZGluZ19wbGF0Zm9ybV9hY2NvdW50c19saXN0X3Jlc3BvbnNlKTtcblxuICAgICAgICBXUy50cmFuc2ZlckJldHdlZW5BY2NvdW50cygpOyAvLyBnZXQgdGhlIGxpc3Qgb2YgdXBkYXRlZCBhY2NvdW50cyBmb3IgdHJhbnNmZXIgaW4gY2FzaGllclxuICAgICAgICB0aGlzLnNldENGRE5ld0FjY291bnQocmVzcG9uc2UudHJhZGluZ19wbGF0Zm9ybV9uZXdfYWNjb3VudCk7XG4gICAgfVxuXG4gICAgdG9nZ2xlQ29tcGFyZUFjY291bnRzTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuaXNfY29tcGFyZV9hY2NvdW50c192aXNpYmxlID0gIXRoaXMuaXNfY29tcGFyZV9hY2NvdW50c192aXNpYmxlO1xuICAgIH1cblxuICAgIGdldFJlYWxTeW50aGV0aWNBY2NvdW50c0V4aXN0aW5nRGF0YShyZWFsX3N5bnRoZXRpY19hY2NvdW50c19leGlzdGluZ19kYXRhKSB7XG4gICAgICAgIHRoaXMucmVhbF9zeW50aGV0aWNfYWNjb3VudHNfZXhpc3RpbmdfZGF0YSA9IHJlYWxfc3ludGhldGljX2FjY291bnRzX2V4aXN0aW5nX2RhdGE7XG4gICAgfVxuXG4gICAgZ2V0UmVhbEZpbmFuY2lhbEFjY291bnRzRXhpc3RpbmdEYXRhKHJlYWxfZmluYW5jaWFsX2FjY291bnRzX2V4aXN0aW5nX2RhdGEpIHtcbiAgICAgICAgdGhpcy5yZWFsX2ZpbmFuY2lhbF9hY2NvdW50c19leGlzdGluZ19kYXRhID0gcmVhbF9maW5hbmNpYWxfYWNjb3VudHNfZXhpc3RpbmdfZGF0YTtcbiAgICB9XG5cbiAgICBnZXRSZWFsU3dhcGZyZWVBY2NvdW50c0V4aXN0aW5nRGF0YShyZWFsX3N3YXBmcmVlX2FjY291bnRzX2V4aXN0aW5nX2RhdGEpIHtcbiAgICAgICAgdGhpcy5yZWFsX3N3YXBmcmVlX2FjY291bnRzX2V4aXN0aW5nX2RhdGEgPSByZWFsX3N3YXBmcmVlX2FjY291bnRzX2V4aXN0aW5nX2RhdGE7XG4gICAgfVxuXG4gICAgdG9nZ2xlSnVyaXNkaWN0aW9uTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuaXNfanVyaXNkaWN0aW9uX21vZGFsX3Zpc2libGUgPSAhdGhpcy5pc19qdXJpc2RpY3Rpb25fbW9kYWxfdmlzaWJsZTtcbiAgICB9XG5cbiAgICB0b2dnbGVNVDVUcmFkZU1vZGFsKCkge1xuICAgICAgICB0aGlzLmlzX210NV90cmFkZV9tb2RhbF92aXNpYmxlID0gIXRoaXMuaXNfbXQ1X3RyYWRlX21vZGFsX3Zpc2libGU7XG4gICAgfVxuXG4gICAgZGlzYWJsZU10NUZpbmFuY2lhbFN0cE1vZGFsKCkge1xuICAgICAgICB0aGlzLmlzX210NV9maW5hbmNpYWxfc3RwX21vZGFsX29wZW4gPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhc3luYyB0b3BVcFZpcnR1YWwocGxhdGZvcm0pIHtcbiAgICAgICAgdGhpcy5yb290X3N0b3JlLnVpLnNldFRvcFVwSW5Qcm9ncmVzcyh0cnVlKTtcbiAgICAgICAgbGV0IHJlc3BvbnNlO1xuXG4gICAgICAgIHN3aXRjaCAocGxhdGZvcm0pIHtcbiAgICAgICAgICAgIGNhc2UgQ0ZEX1BMQVRGT1JNUy5EWFRSQURFOiB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBXUy5hdXRob3JpemVkLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICB0cmFkaW5nX3BsYXRmb3JtX2RlcG9zaXQ6IDEsXG4gICAgICAgICAgICAgICAgICAgIHBsYXRmb3JtLFxuICAgICAgICAgICAgICAgICAgICB0b19hY2NvdW50OiB0aGlzLmN1cnJlbnRfYWNjb3VudC5hY2NvdW50X2lkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBDRkRfUExBVEZPUk1TLkNUUkFERVI6IHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IFdTLmF1dGhvcml6ZWQuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIHRyYWRpbmdfcGxhdGZvcm1fZGVwb3NpdDogMSxcbiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm06IENGRF9QTEFURk9STVMuQ1RSQURFUixcbiAgICAgICAgICAgICAgICAgICAgdG9fYWNjb3VudDogdGhpcy5jdXJyZW50X2FjY291bnQuYWNjb3VudF9pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgQ0ZEX1BMQVRGT1JNUy5NVDU6IHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IFdTLmF1dGhvcml6ZWQubXQ1RGVwb3NpdCh7XG4gICAgICAgICAgICAgICAgICAgIHRvX210NTogdGhpcy5jdXJyZW50X2FjY291bnQubG9naW4sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZXJyb3IgPSAnSW52YWxpZCBwbGF0Zm9ybSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICBsZXQgbmV3X2JhbGFuY2U7XG4gICAgICAgICAgICBzd2l0Y2ggKHBsYXRmb3JtKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDRkRfUExBVEZPUk1TLkRYVFJBREU6IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgV1MuYXV0aG9yaXplZFxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyYWRpbmdQbGF0Zm9ybUFjY291bnRzTGlzdChDRkRfUExBVEZPUk1TLkRYVFJBREUpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbih0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnJlc3BvbnNlVHJhZGluZ1BsYXRmb3JtQWNjb3VudHNMaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgbmV3X2JhbGFuY2UgPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmR4dHJhZGVfYWNjb3VudHNfbGlzdC5maW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbSA9PiBpdGVtLmFjY291bnRfaWQgPT09IHRoaXMuY3VycmVudF9hY2NvdW50LmFjY291bnRfaWRcbiAgICAgICAgICAgICAgICAgICAgKT8uYmFsYW5jZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgQ0ZEX1BMQVRGT1JNUy5DVFJBREVSOiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFdTLmF1dGhvcml6ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmFkaW5nUGxhdGZvcm1BY2NvdW50c0xpc3QoQ0ZEX1BMQVRGT1JNUy5DVFJBREVSKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4odGhpcy5yb290X3N0b3JlLmNsaWVudC5yZXNwb25zZVRyYWRpbmdQbGF0Zm9ybUFjY291bnRzTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld19iYWxhbmNlID0gdGhpcy5yb290X3N0b3JlLmNsaWVudC5jdHJhZGVyX2FjY291bnRzX2xpc3QuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS5hY2NvdW50X2lkID09PSB0aGlzLmN1cnJlbnRfYWNjb3VudC5hY2NvdW50X2lkXG4gICAgICAgICAgICAgICAgICAgICk/LmJhbGFuY2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlIENGRF9QTEFURk9STVMuTVQ1OiB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFdTLmF1dGhvcml6ZWQubXQ1TG9naW5MaXN0KCkudGhlbih0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnJlc3BvbnNlTXQ1TG9naW5MaXN0KTtcblxuICAgICAgICAgICAgICAgICAgICBuZXdfYmFsYW5jZSA9IHRoaXMucm9vdF9zdG9yZS5jbGllbnQubXQ1X2xvZ2luX2xpc3QuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS5sb2dpbiA9PT0gdGhpcy5jdXJyZW50X2FjY291bnQubG9naW5cbiAgICAgICAgICAgICAgICAgICAgKT8uYmFsYW5jZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuSW5BY3Rpb24oKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEdldCBuZXcgY3VycmVudCBhY2NvdW50XG4gICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLnVpLmlzX3RvcF91cF92aXJ0dWFsX29wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfYWNjb3VudC5iYWxhbmNlID0gbmV3X2JhbGFuY2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLnVpLmlzX3RvcF91cF92aXJ0dWFsX3N1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMjUwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvb3Rfc3RvcmUudWkuc2V0VG9wVXBJblByb2dyZXNzKGZhbHNlKTtcbiAgICB9XG5cbiAgICBzZW5kVmVyaWZ5RW1haWwoKSB7XG4gICAgICAgIHJldHVybiBXUy52ZXJpZnlFbWFpbCh0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmVtYWlsLCAndHJhZGluZ19wbGF0Zm9ybV9pbnZlc3Rvcl9wYXNzd29yZF9yZXNldCcpO1xuICAgIH1cblxuICAgIHNldER4dHJhZGVUb2tlbihyZXNwb25zZSwgc2VydmVyKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2UuZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZHh0cmFkZSB9ID0gcmVzcG9uc2Uuc2VydmljZV90b2tlbjtcbiAgICAgICAgICAgIHRoaXMuZHh0cmFkZV90b2tlbnNbc2VydmVyXSA9IGR4dHJhZGUudG9rZW47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRDVHJhZGVyVG9rZW4ocmVzcG9uc2UsIHNlcnZlcikge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCB7IGN0cmFkZXIgfSA9IHJlc3BvbnNlLnNlcnZpY2VfdG9rZW47XG4gICAgICAgICAgICB0aGlzLmN0cmFkZXJfdG9rZW5zW3NlcnZlcl0gPSBjdHJhZGVyLnRva2VuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZER4dHJhZGVUb2tlbnMoKSB7XG4gICAgICAgIFsnZGVtbycsICdyZWFsJ10uZm9yRWFjaChhY2NvdW50X3R5cGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFzX2V4aXN0aW5nX2FjY291bnQgPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmR4dHJhZGVfYWNjb3VudHNfbGlzdC5zb21lKFxuICAgICAgICAgICAgICAgIGFjY291bnQgPT4gYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IGFjY291bnRfdHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5keHRyYWRlX3Rva2Vuc1thY2NvdW50X3R5cGVdICYmIGhhc19leGlzdGluZ19hY2NvdW50KSB7XG4gICAgICAgICAgICAgICAgV1MuZ2V0U2VydmljZVRva2VuKENGRF9QTEFURk9STVMuRFhUUkFERSwgYWNjb3VudF90eXBlKS50aGVuKHJlc3BvbnNlID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RHh0cmFkZVRva2VuKHJlc3BvbnNlLCBhY2NvdW50X3R5cGUpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbG9hZENUcmFkZXJUb2tlbnMoKSB7XG4gICAgICAgIFsnZGVtbycsICdyZWFsJ10uZm9yRWFjaChhY2NvdW50X3R5cGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFzX2V4aXN0aW5nX2FjY291bnQgPSB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LmN0cmFkZXJfYWNjb3VudHNfbGlzdC5zb21lKFxuICAgICAgICAgICAgICAgIGFjY291bnQgPT4gYWNjb3VudC5hY2NvdW50X3R5cGUgPT09IGFjY291bnRfdHlwZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdHJhZGVyX3Rva2Vuc1thY2NvdW50X3R5cGVdICYmIGhhc19leGlzdGluZ19hY2NvdW50KSB7XG4gICAgICAgICAgICAgICAgV1MuZ2V0U2VydmljZVRva2VuKENGRF9QTEFURk9STVMuQ1RSQURFUiwgYWNjb3VudF90eXBlKS50aGVuKHJlc3BvbnNlID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q1RyYWRlclRva2VuKHJlc3BvbnNlLCBhY2NvdW50X3R5cGUpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFzeW5jIGNoYW5nZVBhc3N3b3JkKHsgbG9naW4sIG9sZF9wYXNzd29yZCwgbmV3X3Bhc3N3b3JkLCBwYXNzd29yZF90eXBlIH0pIHtcbiAgICAgICAgbGV0IHJlc3BvbnNlO1xuXG4gICAgICAgIGlmIChwYXNzd29yZF90eXBlID09PSAnaW52ZXN0b3InKSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IFdTLmF1dGhvcml6ZWQudHJhZGluZ1BsYXRmb3JtSW52ZXN0b3JQYXNzd29yZENoYW5nZSh7XG4gICAgICAgICAgICAgICAgYWNjb3VudF9pZDogbG9naW4sXG4gICAgICAgICAgICAgICAgb2xkX3Bhc3N3b3JkLFxuICAgICAgICAgICAgICAgIG5ld19wYXNzd29yZCxcbiAgICAgICAgICAgICAgICBwbGF0Zm9ybTogQ0ZEX1BMQVRGT1JNUy5NVDUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgV1MuYXV0aG9yaXplZC50cmFkaW5nUGxhdGZvcm1QYXNzd29yZENoYW5nZSh7XG4gICAgICAgICAgICAgICAgYWNjb3VudF9pZDogbG9naW4sXG4gICAgICAgICAgICAgICAgb2xkX3Bhc3N3b3JkLFxuICAgICAgICAgICAgICAgIG5ld19wYXNzd29yZCxcbiAgICAgICAgICAgICAgICBwbGF0Zm9ybTogQ0ZEX1BMQVRGT1JNUy5NVDUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZT8uZXJyb3I/Lm1lc3NhZ2U7XG4gICAgfVxuXG4gICAgc2V0SnVyaXNkaWN0aW9uU2VsZWN0ZWRTaG9ydGNvZGUoc2hvcnRjb2RlKSB7XG4gICAgICAgIHRoaXMuanVyaXNkaWN0aW9uX3NlbGVjdGVkX3Nob3J0Y29kZSA9IHNob3J0Y29kZTtcbiAgICB9XG5cbiAgICB0b2dnbGVDRkRWZXJpZmljYXRpb25Nb2RhbCgpIHtcbiAgICAgICAgdGhpcy5pc19jZmRfdmVyaWZpY2F0aW9uX21vZGFsX3Zpc2libGUgPSAhdGhpcy5pc19jZmRfdmVyaWZpY2F0aW9uX21vZGFsX3Zpc2libGU7XG4gICAgfVxuXG4gICAgc2V0TWlncmF0ZWRNVDVBY2NvdW50cyhhY2NvdW50cykge1xuICAgICAgICB0aGlzLm1pZ3JhdGVkX210NV9hY2NvdW50cyA9IGFjY291bnRzO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/Stores/Modules/CFD/cfd-store.js\n')},"./src/Stores/base-store.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ BaseStore)\n/* harmony export */ });\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mobx */ "mobx");\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mobx__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _deriv_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @deriv/shared */ "@deriv/shared");\n/* harmony import */ var _deriv_shared__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_deriv_shared__WEBPACK_IMPORTED_MODULE_1__);\nfunction _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = "function" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || "@@iterator", asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator", toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, ""); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, "_invoke", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: "normal", arg: fn.call(obj, arg) }; } catch (err) { return { type: "throw", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { ["next", "throw", "return"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if ("throw" !== record.type) { var result = record.arg, value = result.value; return value && "object" == _typeof(value) && hasOwn.call(value, "__await") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke("next", value, resolve, reject); }, function (err) { invoke("throw", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke("throw", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, "_invoke", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = "suspendedStart"; return function (method, arg) { if ("executing" === state) throw new Error("Generator is already running"); if ("completed" === state) { if ("throw" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if ("next" === context.method) context.sent = context._sent = context.arg;else if ("throw" === context.method) { if ("suspendedStart" === state) throw state = "completed", context.arg; context.dispatchException(context.arg); } else "return" === context.method && context.abrupt("return", context.arg); state = "executing"; var record = tryCatch(innerFn, self, context); if ("normal" === record.type) { if (state = context.done ? "completed" : "suspendedYield", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } "throw" === record.type && (state = "completed", context.method = "throw", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, "throw" === methodName && delegate.iterator["return"] && (context.method = "return", context.arg = undefined, maybeInvokeDelegate(delegate, context), "throw" === context.method) || "return" !== methodName && (context.method = "throw", context.arg = new TypeError("The iterator does not provide a \'" + methodName + "\' method")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if ("throw" === record.type) return context.method = "throw", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, "return" !== context.method && (context.method = "next", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = "throw", context.arg = new TypeError("iterator result is not an object"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = "normal", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: "root" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if ("function" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, "GeneratorFunction"), exports.isGeneratorFunction = function (genFun) { var ctor = "function" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || "GeneratorFunction" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, "GeneratorFunction")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, "Generator"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, "toString", function () { return "[object Generator]"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = "next", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { "t" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if ("throw" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = "throw", record.arg = exception, context.next = loc, caught && (context.method = "next", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if ("root" === entry.tryLoc) return handle("end"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, "catchLoc"), hasFinally = hasOwn.call(entry, "finallyLoc"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error("try statement without catch or finally"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && ("break" === type || "continue" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = "next", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if ("throw" === record.type) throw record.arg; return "break" === record.type || "continue" === record.type ? this.next = record.arg : "return" === record.type ? (this.rval = this.arg = record.arg, this.method = "return", this.next = "end") : "normal" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, "catch": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if ("throw" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error("illegal catch attempt"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, "next" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }\n\n\n\n/**\n * BaseStore class is the base class for all defined stores in the application. It handles some stuff such as:\n *  1. Creating snapshot object from the store.\n *  2. Saving the store\'s snapshot in local/session storage and keeping them in sync.\n */\nvar BaseStore = /*#__PURE__*/function () {\n  /**\n   * An enum object to define LOCAL_STORAGE and SESSION_STORAGE\n   */\n\n  /**\n   * Constructor of the base class that gets properties\' name of child which should be saved in storages\n   *\n   * @param {Object} options - An object that contains the following properties:\n   *     @property {Object}   root_store - An object that contains the root store of the app.\n   *     @property {String[]} local_storage_properties - A list of properties\' names that should be kept in localStorage.\n   *     @property {String[]} session_storage_properties - A list of properties\' names that should be kept in sessionStorage.\n   *     @property {Object}   validation_rules - An object that contains the validation rules for each property of the store.\n   *     @property {String}   store_name - Explicit store name for browser application storage (to bypass minification)\n   */\n  function BaseStore() {\n    var _this = this;\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, BaseStore);\n    this.validation_errors = {};\n    this.validation_rules = {};\n    this.preSwitchAccountDisposer = null;\n    this.pre_switch_account_listener = null;\n    this.switchAccountDisposer = null;\n    this.switch_account_listener = null;\n    this.logoutDisposer = null;\n    this.logout_listener = null;\n    this.clientInitDisposer = null;\n    this.client_init_listener = null;\n    this.networkStatusChangeDisposer = null;\n    this.network_status_change_listener = null;\n    this.themeChangeDisposer = null;\n    this.theme_change_listener = null;\n    this.realAccountSignupEndedDisposer = null;\n    this.real_account_signup_ended_listener = null;\n    this.partial_fetch_time = 0;\n    (0,mobx__WEBPACK_IMPORTED_MODULE_0__.makeObservable)(this, {\n      validation_errors: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      validation_rules: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      partial_fetch_time: mobx__WEBPACK_IMPORTED_MODULE_0__.observable,\n      retrieveFromStorage: mobx__WEBPACK_IMPORTED_MODULE_0__.action,\n      setValidationErrorMessages: mobx__WEBPACK_IMPORTED_MODULE_0__.action,\n      setValidationRules: mobx__WEBPACK_IMPORTED_MODULE_0__.action,\n      addRule: mobx__WEBPACK_IMPORTED_MODULE_0__.action,\n      validateProperty: mobx__WEBPACK_IMPORTED_MODULE_0__.action,\n      validateAllProperties: mobx__WEBPACK_IMPORTED_MODULE_0__.action,\n      onSwitchAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      onPreSwitchAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      onLogout: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      onClientInit: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      onNetworkStatusChange: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      onThemeChange: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      onRealAccountSignupEnd: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      disposePreSwitchAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      disposeSwitchAccount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      disposeLogout: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      disposeClientInit: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      disposeNetworkStatusChange: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      disposeThemeChange: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      disposeRealAccountSignupEnd: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      onUnmount: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound,\n      assertHasValidCache: mobx__WEBPACK_IMPORTED_MODULE_0__.action.bound\n    });\n    var root_store = options.root_store,\n      local_storage_properties = options.local_storage_properties,\n      session_storage_properties = options.session_storage_properties,\n      validation_rules = options.validation_rules,\n      store_name = options.store_name;\n    Object.defineProperty(this, \'root_store\', {\n      enumerable: false,\n      writable: true\n    });\n    Object.defineProperty(this, \'local_storage_properties\', {\n      enumerable: false,\n      writable: true\n    });\n    Object.defineProperty(this, \'session_storage_properties\', {\n      enumerable: false,\n      writable: true\n    });\n    var has_local_or_session_storage = local_storage_properties && local_storage_properties.length || session_storage_properties && session_storage_properties.length;\n    if (has_local_or_session_storage) {\n      if (!store_name) {\n        throw new Error(\'store_name is required for local/session storage\');\n      }\n      Object.defineProperty(this, \'store_name\', {\n        value: store_name,\n        enumerable: false,\n        writable: false\n      });\n    }\n    this.root_store = root_store;\n    this.local_storage_properties = local_storage_properties || [];\n    this.session_storage_properties = session_storage_properties || [];\n    setTimeout(function () {\n      _this.setValidationRules(validation_rules);\n      _this.setupReactionForLocalStorage();\n      _this.setupReactionForSessionStorage();\n      _this.retrieveFromStorage();\n    }, 0);\n  }\n\n  /**\n   * Returns an snapshot of the current store\n   *\n   * @param {String[]} properties - A list of properties\' names that should be in the snapshot.\n   *\n   * @return {Object} Returns a cloned object of the store.\n   */\n  _createClass(BaseStore, [{\n    key: "getSnapshot",\n    value: function getSnapshot(properties) {\n      var snapshot = (0,mobx__WEBPACK_IMPORTED_MODULE_0__.toJS)(this);\n      if (!(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.isEmptyObject)(this.root_store)) {\n        snapshot.root_store = this.root_store;\n      }\n      if (properties && properties.length) {\n        snapshot = properties.reduce(function (result, p) {\n          return Object.assign(result, _defineProperty({}, p, snapshot[p]));\n        }, {});\n      }\n      return snapshot;\n    }\n\n    /**\n     * Sets up a reaction on properties which are mentioned in `local_storage_properties`\n     *  and invokes `saveToStorage` when there are any changes on them.\n     *\n     */\n  }, {\n    key: "setupReactionForLocalStorage",\n    value: function setupReactionForLocalStorage() {\n      var _this2 = this;\n      if (this.local_storage_properties.length) {\n        (0,mobx__WEBPACK_IMPORTED_MODULE_0__.reaction)(function () {\n          return _this2.local_storage_properties.map(function (i) {\n            return _this2[i];\n          });\n        }, function () {\n          return _this2.saveToStorage(_this2.local_storage_properties, BaseStore.STORAGES.LOCAL_STORAGE);\n        });\n      }\n    }\n\n    /**\n     * Sets up a reaction on properties which are mentioned in `session_storage_properties`\n     *  and invokes `saveToStorage` when there are any changes on them.\n     *\n     */\n  }, {\n    key: "setupReactionForSessionStorage",\n    value: function setupReactionForSessionStorage() {\n      var _this3 = this;\n      if (this.session_storage_properties.length) {\n        (0,mobx__WEBPACK_IMPORTED_MODULE_0__.reaction)(function () {\n          return _this3.session_storage_properties.map(function (i) {\n            return _this3[i];\n          });\n        }, function () {\n          return _this3.saveToStorage(_this3.session_storage_properties, BaseStore.STORAGES.SESSION_STORAGE);\n        });\n      }\n    }\n\n    /**\n     * Removes properties that are not passed from the snapshot of the store and saves it to the passed storage\n     *\n     * @param {String[]} properties - A list of the store\'s properties\' names which should be saved in the storage.\n     * @param {Symbol}   storage    - A symbol object that defines the storage which the snapshot should be stored in it.\n     *\n     */\n  }, {\n    key: "saveToStorage",\n    value: function saveToStorage(properties, storage) {\n      var snapshot = JSON.stringify(this.getSnapshot(properties), function (key, value) {\n        if (value !== null) return value;\n        return undefined;\n      });\n      if (storage === BaseStore.STORAGES.LOCAL_STORAGE) {\n        localStorage.setItem(this.store_name, snapshot);\n      } else if (storage === BaseStore.STORAGES.SESSION_STORAGE) {\n        sessionStorage.setItem(this.store_name, snapshot);\n      }\n    }\n\n    /**\n     * Retrieves saved snapshot of the store and assigns to the current instance.\n     *\n     */\n  }, {\n    key: "retrieveFromStorage",\n    value: function retrieveFromStorage() {\n      var _this4 = this;\n      var local_storage_snapshot = JSON.parse(localStorage.getItem(this.store_name, {}));\n      var session_storage_snapshot = JSON.parse(sessionStorage.getItem(this.store_name, {}));\n      var snapshot = _objectSpread(_objectSpread({}, local_storage_snapshot), session_storage_snapshot);\n      Object.keys(snapshot).forEach(function (k) {\n        return _this4[k] = snapshot[k];\n      });\n    }\n\n    /**\n     * Sets validation error messages for an observable property of the store\n     *\n     * @param {String} propertyName - The observable property\'s name\n     * @param [{String}] messages - An array of strings that contains validation error messages for the particular property.\n     *\n     */\n  }, {\n    key: "setValidationErrorMessages",\n    value: function setValidationErrorMessages(propertyName, messages) {\n      var _this5 = this;\n      var is_different = function is_different() {\n        return !!_this5.validation_errors[propertyName].filter(function (x) {\n          return !messages.includes(x);\n        }).concat(messages.filter(function (x) {\n          return !_this5.validation_errors[propertyName].includes(x);\n        })).length;\n      };\n      if (!this.validation_errors[propertyName] || is_different()) {\n        this.validation_errors[propertyName] = messages;\n      }\n    }\n\n    /**\n     * Sets validation rules\n     *\n     * @param {object} rules\n     *\n     */\n  }, {\n    key: "setValidationRules",\n    value: function setValidationRules() {\n      var _this6 = this;\n      var rules = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      Object.keys(rules).forEach(function (key) {\n        _this6.addRule(key, rules[key]);\n      });\n    }\n\n    /**\n     * Adds rules to the particular property\n     *\n     * @param {String} property\n     * @param {String} rules\n     *\n     */\n  }, {\n    key: "addRule",\n    value: function addRule(property, rules) {\n      var _this7 = this;\n      this.validation_rules[property] = rules;\n      (0,mobx__WEBPACK_IMPORTED_MODULE_0__.intercept)(this, property, function (change) {\n        _this7.validateProperty(property, change.newValue);\n        return change;\n      });\n    }\n\n    /**\n     * Validates a particular property of the store\n     *\n     * @param {String} property - The name of the property in the store\n     * @param {object} value    - The value of the property, it can be undefined.\n     *\n     */\n  }, {\n    key: "validateProperty",\n    value: function validateProperty(property, value) {\n      var _this8 = this;\n      var trigger = this.validation_rules[property].trigger;\n      var inputs = _defineProperty({}, property, value !== undefined ? value : this[property]);\n      var validation_rules = _defineProperty({}, property, this.validation_rules[property].rules || []);\n      if (!!trigger && Object.hasOwnProperty.call(this, trigger)) {\n        inputs[trigger] = this[trigger];\n        validation_rules[trigger] = this.validation_rules[trigger].rules || [];\n      }\n      var validator = new _deriv_shared__WEBPACK_IMPORTED_MODULE_1__.Validator(inputs, validation_rules, this);\n      validator.isPassed();\n      Object.keys(inputs).forEach(function (key) {\n        _this8.setValidationErrorMessages(key, validator.errors.get(key));\n      });\n    }\n\n    /**\n     * Validates all properties which validation rule has been set for.\n     *\n     */\n  }, {\n    key: "validateAllProperties",\n    value: function validateAllProperties() {\n      var _this9 = this;\n      var validation_rules = Object.keys(this.validation_rules);\n      var validation_errors = Object.keys(this.validation_errors);\n      validation_rules.forEach(function (p) {\n        _this9.validateProperty(p, _this9[p]);\n      });\n\n      // Remove keys that are present in error, but not in rules:\n      validation_errors.forEach(function (error) {\n        if (!validation_rules.includes(error)) {\n          delete _this9.validation_errors[error];\n        }\n      });\n    }\n  }, {\n    key: "onSwitchAccount",\n    value: function onSwitchAccount(listener) {\n      var _this10 = this;\n      if (listener) {\n        this.switch_account_listener = listener;\n        this.switchAccountDisposer = (0,mobx__WEBPACK_IMPORTED_MODULE_0__.when)(function () {\n          return _this10.root_store.client.switch_broadcast;\n        }, function () {\n          try {\n            var result = _this10.switch_account_listener();\n            if (result && result.then && typeof result.then === \'function\') {\n              result.then(function () {\n                _this10.root_store.client.switchEndSignal();\n                _this10.onSwitchAccount(_this10.switch_account_listener);\n              });\n            } else {\n              throw new Error(\'Switching account listeners are required to return a promise.\');\n            }\n          } catch (error) {\n            // there is no listener currently active. so we can just ignore the error raised from treating\n            // a null object as a function. Although, in development mode, we throw a console error.\n            if (!(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.isProduction)()) {\n              console.error(error); // eslint-disable-line\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: "onPreSwitchAccount",\n    value: function onPreSwitchAccount(listener) {\n      var _this11 = this;\n      if (listener) {\n        this.pre_switch_account_listener = listener;\n        this.preSwitchAccountDisposer = (0,mobx__WEBPACK_IMPORTED_MODULE_0__.when)(function () {\n          return _this11.root_store.client.pre_switch_broadcast;\n        }, function () {\n          try {\n            var _this11$pre_switch_ac;\n            var result = (_this11$pre_switch_ac = _this11.pre_switch_account_listener) === null || _this11$pre_switch_ac === void 0 ? void 0 : _this11$pre_switch_ac.call(_this11);\n            if (result && result.then && typeof result.then === \'function\') {\n              result.then(function () {\n                _this11.root_store.client.setPreSwitchAccount(false);\n                _this11.onPreSwitchAccount(_this11.pre_switch_account_listener);\n              });\n            } else {\n              throw new Error(\'Pre-switch account listeners are required to return a promise.\');\n            }\n          } catch (error) {\n            // there is no listener currently active. so we can just ignore the error raised from treating\n            // a null object as a function. Although, in development mode, we throw a console error.\n            if (!(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.isProduction)()) {\n              console.error(error); // eslint-disable-line\n            }\n          }\n        });\n      }\n    }\n  }, {\n    key: "onLogout",\n    value: function onLogout(listener) {\n      var _this12 = this;\n      this.logoutDisposer = (0,mobx__WEBPACK_IMPORTED_MODULE_0__.when)(function () {\n        return _this12.root_store.client.has_logged_out;\n      }, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                result = _this12.logout_listener();\n                if (!(result && result.then && typeof result.then === \'function\')) {\n                  _context.next = 6;\n                  break;\n                }\n                result.then(function () {\n                  _this12.root_store.client.setLogout(false);\n                  _this12.onLogout(_this12.logout_listener);\n                });\n                _context.next = 7;\n                break;\n              case 6:\n                throw new Error(\'Logout listeners are required to return a promise.\');\n              case 7:\n                _context.next = 12;\n                break;\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context["catch"](0);\n                // there is no listener currently active. so we can just ignore the error raised from treating\n                // a null object as a function. Although, in development mode, we throw a console error.\n                if (!(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.isProduction)()) {\n                  console.error(_context.t0); // eslint-disable-line\n                }\n              case 12:\n              case "end":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 9]]);\n      })));\n      this.logout_listener = listener;\n    }\n  }, {\n    key: "onClientInit",\n    value: function onClientInit(listener) {\n      var _this13 = this;\n      this.clientInitDisposer = (0,mobx__WEBPACK_IMPORTED_MODULE_0__.when)(function () {\n        return _this13.root_store.client.initialized_broadcast;\n      }, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                result = _this13.client_init_listener();\n                if (!(result && result.then && typeof result.then === \'function\')) {\n                  _context2.next = 6;\n                  break;\n                }\n                result.then(function () {\n                  _this13.root_store.client.setInitialized(false);\n                  _this13.onClientInit(_this13.client_init_listener);\n                });\n                _context2.next = 7;\n                break;\n              case 6:\n                throw new Error(\'Client init listeners are required to return a promise.\');\n              case 7:\n                _context2.next = 12;\n                break;\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2["catch"](0);\n                // there is no listener currently active. so we can just ignore the error raised from treating\n                // a null object as a function. Although, in development mode, we throw a console error.\n                if (!(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.isProduction)()) {\n                  console.error(_context2.t0); // eslint-disable-line\n                }\n              case 12:\n              case "end":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 9]]);\n      })));\n      this.client_init_listener = listener;\n    }\n  }, {\n    key: "onNetworkStatusChange",\n    value: function onNetworkStatusChange(listener) {\n      var _this14 = this;\n      this.networkStatusChangeDisposer = (0,mobx__WEBPACK_IMPORTED_MODULE_0__.reaction)(function () {\n        return _this14.root_store.common.is_network_online;\n      }, function (is_online) {\n        try {\n          _this14.network_status_change_listener(is_online);\n        } catch (error) {\n          // there is no listener currently active. so we can just ignore the error raised from treating\n          // a null object as a function. Although, in development mode, we throw a console error.\n          if (!(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.isProduction)()) {\n            console.error(error); // eslint-disable-line\n          }\n        }\n      });\n\n      this.network_status_change_listener = listener;\n    }\n  }, {\n    key: "onThemeChange",\n    value: function onThemeChange(listener) {\n      var _this15 = this;\n      this.themeChangeDisposer = (0,mobx__WEBPACK_IMPORTED_MODULE_0__.reaction)(function () {\n        return _this15.root_store.ui.is_dark_mode_on;\n      }, function (is_dark_mode_on) {\n        try {\n          _this15.theme_change_listener(is_dark_mode_on);\n        } catch (error) {\n          // there is no listener currently active. so we can just ignore the error raised from treating\n          // a null object as a function. Although, in development mode, we throw a console error.\n          if (!(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.isProduction)()) {\n            console.error(error); // eslint-disable-line\n          }\n        }\n      });\n\n      this.theme_change_listener = listener;\n    }\n  }, {\n    key: "onRealAccountSignupEnd",\n    value: function onRealAccountSignupEnd(listener) {\n      var _this16 = this;\n      this.realAccountSignupEndedDisposer = (0,mobx__WEBPACK_IMPORTED_MODULE_0__.when)(function () {\n        return _this16.root_store.ui.has_real_account_signup_ended;\n      }, function () {\n        try {\n          var result = _this16.real_account_signup_ended_listener();\n          if (result && result.then && typeof result.then === \'function\') {\n            result.then(function () {\n              _this16.root_store.ui.setRealAccountSignupEnd(false);\n              _this16.onRealAccountSignupEnd(_this16.real_account_signup_ended_listener);\n            });\n          } else {\n            throw new Error(\'Real account signup listeners are required to return a promise.\');\n          }\n        } catch (error) {\n          // there is no listener currently active. so we can just ignore the error raised from treating\n          // a null object as a function. Although, in development mode, we throw a console error.\n          if (!(0,_deriv_shared__WEBPACK_IMPORTED_MODULE_1__.isProduction)()) {\n            console.error(error); // eslint-disable-line\n          }\n        }\n      });\n\n      this.real_account_signup_ended_listener = listener;\n    }\n  }, {\n    key: "disposePreSwitchAccount",\n    value: function disposePreSwitchAccount() {\n      if (typeof this.preSwitchAccountDisposer === \'function\') {\n        this.preSwitchAccountDisposer();\n      }\n      this.pre_switch_account_listener = null;\n    }\n  }, {\n    key: "disposeSwitchAccount",\n    value: function disposeSwitchAccount() {\n      if (typeof this.switchAccountDisposer === \'function\') {\n        this.switchAccountDisposer();\n      }\n      this.switch_account_listener = null;\n    }\n  }, {\n    key: "disposeLogout",\n    value: function disposeLogout() {\n      if (typeof this.logoutDisposer === \'function\') {\n        this.logoutDisposer();\n      }\n      this.logout_listener = null;\n    }\n  }, {\n    key: "disposeClientInit",\n    value: function disposeClientInit() {\n      if (typeof this.clientInitDisposer === \'function\') {\n        this.clientInitDisposer();\n      }\n      this.client_init_listener = null;\n    }\n  }, {\n    key: "disposeNetworkStatusChange",\n    value: function disposeNetworkStatusChange() {\n      if (typeof this.networkStatusChangeDisposer === \'function\') {\n        this.networkStatusChangeDisposer();\n      }\n      this.network_status_change_listener = null;\n    }\n  }, {\n    key: "disposeThemeChange",\n    value: function disposeThemeChange() {\n      if (typeof this.themeChangeDisposer === \'function\') {\n        this.themeChangeDisposer();\n      }\n      this.theme_change_listener = null;\n    }\n  }, {\n    key: "disposeRealAccountSignupEnd",\n    value: function disposeRealAccountSignupEnd() {\n      if (typeof this.realAccountSignupEndedDisposer === \'function\') {\n        this.realAccountSignupEndedDisposer();\n      }\n      this.real_account_signup_ended_listener = null;\n    }\n  }, {\n    key: "onUnmount",\n    value: function onUnmount() {\n      this.disposePreSwitchAccount();\n      this.disposeSwitchAccount();\n      this.disposeLogout();\n      this.disposeClientInit();\n      this.disposeNetworkStatusChange();\n      this.disposeThemeChange();\n      this.disposeRealAccountSignupEnd();\n    }\n  }, {\n    key: "assertHasValidCache",\n    value: function assertHasValidCache(loginid) {\n      // account was changed when this was unmounted.\n      if (this.root_store.client.loginid !== loginid) {\n        for (var _len = arguments.length, reactions = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          reactions[_key - 1] = arguments[_key];\n        }\n        reactions.forEach(function (act) {\n          return act();\n        });\n        this.partial_fetch_time = false;\n      }\n    }\n  }]);\n  return BaseStore;\n}();\nBaseStore.STORAGES = Object.freeze({\n  LOCAL_STORAGE: Symbol(\'LOCAL_STORAGE\'),\n  SESSION_STORAGE: Symbol(\'SESSION_STORAGE\')\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3RvcmVzL2Jhc2Utc3RvcmUuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBOztBQWlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFyQ0E7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQU9BO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUFBO0FBQUE7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUZBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFwaEJBO0FBS0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGRlcml2L2NmZC8uL3NyYy9TdG9yZXMvYmFzZS1zdG9yZS5qcz84NmYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFjdGlvbiwgaW50ZXJjZXB0LCBtYWtlT2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSwgcmVhY3Rpb24sIHRvSlMsIHdoZW4gfSBmcm9tICdtb2J4JztcblxuaW1wb3J0IHsgaXNFbXB0eU9iamVjdCwgaXNQcm9kdWN0aW9uLCBWYWxpZGF0b3IgfSBmcm9tICdAZGVyaXYvc2hhcmVkJztcblxuLyoqXG4gKiBCYXNlU3RvcmUgY2xhc3MgaXMgdGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBkZWZpbmVkIHN0b3JlcyBpbiB0aGUgYXBwbGljYXRpb24uIEl0IGhhbmRsZXMgc29tZSBzdHVmZiBzdWNoIGFzOlxuICogIDEuIENyZWF0aW5nIHNuYXBzaG90IG9iamVjdCBmcm9tIHRoZSBzdG9yZS5cbiAqICAyLiBTYXZpbmcgdGhlIHN0b3JlJ3Mgc25hcHNob3QgaW4gbG9jYWwvc2Vzc2lvbiBzdG9yYWdlIGFuZCBrZWVwaW5nIHRoZW0gaW4gc3luYy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZVN0b3JlIHtcbiAgICAvKipcbiAgICAgKiBBbiBlbnVtIG9iamVjdCB0byBkZWZpbmUgTE9DQUxfU1RPUkFHRSBhbmQgU0VTU0lPTl9TVE9SQUdFXG4gICAgICovXG4gICAgc3RhdGljIFNUT1JBR0VTID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgIExPQ0FMX1NUT1JBR0U6IFN5bWJvbCgnTE9DQUxfU1RPUkFHRScpLFxuICAgICAgICBTRVNTSU9OX1NUT1JBR0U6IFN5bWJvbCgnU0VTU0lPTl9TVE9SQUdFJyksXG4gICAgfSk7XG5cbiAgICB2YWxpZGF0aW9uX2Vycm9ycyA9IHt9O1xuXG4gICAgdmFsaWRhdGlvbl9ydWxlcyA9IHt9O1xuXG4gICAgcHJlU3dpdGNoQWNjb3VudERpc3Bvc2VyID0gbnVsbDtcbiAgICBwcmVfc3dpdGNoX2FjY291bnRfbGlzdGVuZXIgPSBudWxsO1xuXG4gICAgc3dpdGNoQWNjb3VudERpc3Bvc2VyID0gbnVsbDtcbiAgICBzd2l0Y2hfYWNjb3VudF9saXN0ZW5lciA9IG51bGw7XG5cbiAgICBsb2dvdXREaXNwb3NlciA9IG51bGw7XG4gICAgbG9nb3V0X2xpc3RlbmVyID0gbnVsbDtcblxuICAgIGNsaWVudEluaXREaXNwb3NlciA9IG51bGw7XG4gICAgY2xpZW50X2luaXRfbGlzdGVuZXIgPSBudWxsO1xuXG4gICAgbmV0d29ya1N0YXR1c0NoYW5nZURpc3Bvc2VyID0gbnVsbDtcbiAgICBuZXR3b3JrX3N0YXR1c19jaGFuZ2VfbGlzdGVuZXIgPSBudWxsO1xuXG4gICAgdGhlbWVDaGFuZ2VEaXNwb3NlciA9IG51bGw7XG4gICAgdGhlbWVfY2hhbmdlX2xpc3RlbmVyID0gbnVsbDtcblxuICAgIHJlYWxBY2NvdW50U2lnbnVwRW5kZWREaXNwb3NlciA9IG51bGw7XG4gICAgcmVhbF9hY2NvdW50X3NpZ251cF9lbmRlZF9saXN0ZW5lciA9IG51bGw7XG5cbiAgICBwYXJ0aWFsX2ZldGNoX3RpbWUgPSAwO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3Igb2YgdGhlIGJhc2UgY2xhc3MgdGhhdCBnZXRzIHByb3BlcnRpZXMnIG5hbWUgb2YgY2hpbGQgd2hpY2ggc2hvdWxkIGJlIHNhdmVkIGluIHN0b3JhZ2VzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgKiAgICAgQHByb3BlcnR5IHtPYmplY3R9ICAgcm9vdF9zdG9yZSAtIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSByb290IHN0b3JlIG9mIHRoZSBhcHAuXG4gICAgICogICAgIEBwcm9wZXJ0eSB7U3RyaW5nW119IGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcyAtIEEgbGlzdCBvZiBwcm9wZXJ0aWVzJyBuYW1lcyB0aGF0IHNob3VsZCBiZSBrZXB0IGluIGxvY2FsU3RvcmFnZS5cbiAgICAgKiAgICAgQHByb3BlcnR5IHtTdHJpbmdbXX0gc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMgLSBBIGxpc3Qgb2YgcHJvcGVydGllcycgbmFtZXMgdGhhdCBzaG91bGQgYmUga2VwdCBpbiBzZXNzaW9uU3RvcmFnZS5cbiAgICAgKiAgICAgQHByb3BlcnR5IHtPYmplY3R9ICAgdmFsaWRhdGlvbl9ydWxlcyAtIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSB2YWxpZGF0aW9uIHJ1bGVzIGZvciBlYWNoIHByb3BlcnR5IG9mIHRoZSBzdG9yZS5cbiAgICAgKiAgICAgQHByb3BlcnR5IHtTdHJpbmd9ICAgc3RvcmVfbmFtZSAtIEV4cGxpY2l0IHN0b3JlIG5hbWUgZm9yIGJyb3dzZXIgYXBwbGljYXRpb24gc3RvcmFnZSAodG8gYnlwYXNzIG1pbmlmaWNhdGlvbilcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgbWFrZU9ic2VydmFibGUodGhpcywge1xuICAgICAgICAgICAgdmFsaWRhdGlvbl9lcnJvcnM6IG9ic2VydmFibGUsXG4gICAgICAgICAgICB2YWxpZGF0aW9uX3J1bGVzOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgcGFydGlhbF9mZXRjaF90aW1lOiBvYnNlcnZhYmxlLFxuICAgICAgICAgICAgcmV0cmlldmVGcm9tU3RvcmFnZTogYWN0aW9uLFxuICAgICAgICAgICAgc2V0VmFsaWRhdGlvbkVycm9yTWVzc2FnZXM6IGFjdGlvbixcbiAgICAgICAgICAgIHNldFZhbGlkYXRpb25SdWxlczogYWN0aW9uLFxuICAgICAgICAgICAgYWRkUnVsZTogYWN0aW9uLFxuICAgICAgICAgICAgdmFsaWRhdGVQcm9wZXJ0eTogYWN0aW9uLFxuICAgICAgICAgICAgdmFsaWRhdGVBbGxQcm9wZXJ0aWVzOiBhY3Rpb24sXG4gICAgICAgICAgICBvblN3aXRjaEFjY291bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uUHJlU3dpdGNoQWNjb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25Mb2dvdXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uQ2xpZW50SW5pdDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgb25OZXR3b3JrU3RhdHVzQ2hhbmdlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBvblRoZW1lQ2hhbmdlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBvblJlYWxBY2NvdW50U2lnbnVwRW5kOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBkaXNwb3NlUHJlU3dpdGNoQWNjb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgZGlzcG9zZVN3aXRjaEFjY291bnQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGRpc3Bvc2VMb2dvdXQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIGRpc3Bvc2VDbGllbnRJbml0OiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBkaXNwb3NlTmV0d29ya1N0YXR1c0NoYW5nZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgZGlzcG9zZVRoZW1lQ2hhbmdlOiBhY3Rpb24uYm91bmQsXG4gICAgICAgICAgICBkaXNwb3NlUmVhbEFjY291bnRTaWdudXBFbmQ6IGFjdGlvbi5ib3VuZCxcbiAgICAgICAgICAgIG9uVW5tb3VudDogYWN0aW9uLmJvdW5kLFxuICAgICAgICAgICAgYXNzZXJ0SGFzVmFsaWRDYWNoZTogYWN0aW9uLmJvdW5kLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB7IHJvb3Rfc3RvcmUsIGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcywgc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMsIHZhbGlkYXRpb25fcnVsZXMsIHN0b3JlX25hbWUgfSA9XG4gICAgICAgICAgICBvcHRpb25zO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncm9vdF9zdG9yZScsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2xvY2FsX3N0b3JhZ2VfcHJvcGVydGllcycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3Nlc3Npb25fc3RvcmFnZV9wcm9wZXJ0aWVzJywge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGFzX2xvY2FsX29yX3Nlc3Npb25fc3RvcmFnZSA9XG4gICAgICAgICAgICAobG9jYWxfc3RvcmFnZV9wcm9wZXJ0aWVzICYmIGxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcy5sZW5ndGgpIHx8XG4gICAgICAgICAgICAoc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMgJiYgc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMubGVuZ3RoKTtcblxuICAgICAgICBpZiAoaGFzX2xvY2FsX29yX3Nlc3Npb25fc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKCFzdG9yZV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdG9yZV9uYW1lIGlzIHJlcXVpcmVkIGZvciBsb2NhbC9zZXNzaW9uIHN0b3JhZ2UnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdzdG9yZV9uYW1lJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZV9uYW1lLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yb290X3N0b3JlID0gcm9vdF9zdG9yZTtcbiAgICAgICAgdGhpcy5sb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMgPSBsb2NhbF9zdG9yYWdlX3Byb3BlcnRpZXMgfHwgW107XG4gICAgICAgIHRoaXMuc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMgPSBzZXNzaW9uX3N0b3JhZ2VfcHJvcGVydGllcyB8fCBbXTtcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsaWRhdGlvblJ1bGVzKHZhbGlkYXRpb25fcnVsZXMpO1xuXG4gICAgICAgICAgICB0aGlzLnNldHVwUmVhY3Rpb25Gb3JMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBSZWFjdGlvbkZvclNlc3Npb25TdG9yYWdlKCk7XG4gICAgICAgICAgICB0aGlzLnJldHJpZXZlRnJvbVN0b3JhZ2UoKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBzbmFwc2hvdCBvZiB0aGUgY3VycmVudCBzdG9yZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmdbXX0gcHJvcGVydGllcyAtIEEgbGlzdCBvZiBwcm9wZXJ0aWVzJyBuYW1lcyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgc25hcHNob3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFJldHVybnMgYSBjbG9uZWQgb2JqZWN0IG9mIHRoZSBzdG9yZS5cbiAgICAgKi9cbiAgICBnZXRTbmFwc2hvdChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGxldCBzbmFwc2hvdCA9IHRvSlModGhpcyk7XG5cbiAgICAgICAgaWYgKCFpc0VtcHR5T2JqZWN0KHRoaXMucm9vdF9zdG9yZSkpIHtcbiAgICAgICAgICAgIHNuYXBzaG90LnJvb3Rfc3RvcmUgPSB0aGlzLnJvb3Rfc3RvcmU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvcGVydGllcyAmJiBwcm9wZXJ0aWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc25hcHNob3QgPSBwcm9wZXJ0aWVzLnJlZHVjZSgocmVzdWx0LCBwKSA9PiBPYmplY3QuYXNzaWduKHJlc3VsdCwgeyBbcF06IHNuYXBzaG90W3BdIH0pLCB7fSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCBhIHJlYWN0aW9uIG9uIHByb3BlcnRpZXMgd2hpY2ggYXJlIG1lbnRpb25lZCBpbiBgbG9jYWxfc3RvcmFnZV9wcm9wZXJ0aWVzYFxuICAgICAqICBhbmQgaW52b2tlcyBgc2F2ZVRvU3RvcmFnZWAgd2hlbiB0aGVyZSBhcmUgYW55IGNoYW5nZXMgb24gdGhlbS5cbiAgICAgKlxuICAgICAqL1xuICAgIHNldHVwUmVhY3Rpb25Gb3JMb2NhbFN0b3JhZ2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlYWN0aW9uKFxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMubG9jYWxfc3RvcmFnZV9wcm9wZXJ0aWVzLm1hcChpID0+IHRoaXNbaV0pLFxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMuc2F2ZVRvU3RvcmFnZSh0aGlzLmxvY2FsX3N0b3JhZ2VfcHJvcGVydGllcywgQmFzZVN0b3JlLlNUT1JBR0VTLkxPQ0FMX1NUT1JBR0UpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCBhIHJlYWN0aW9uIG9uIHByb3BlcnRpZXMgd2hpY2ggYXJlIG1lbnRpb25lZCBpbiBgc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXNgXG4gICAgICogIGFuZCBpbnZva2VzIGBzYXZlVG9TdG9yYWdlYCB3aGVuIHRoZXJlIGFyZSBhbnkgY2hhbmdlcyBvbiB0aGVtLlxuICAgICAqXG4gICAgICovXG4gICAgc2V0dXBSZWFjdGlvbkZvclNlc3Npb25TdG9yYWdlKCkge1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uX3N0b3JhZ2VfcHJvcGVydGllcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlYWN0aW9uKFxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMuc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMubWFwKGkgPT4gdGhpc1tpXSksXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5zYXZlVG9TdG9yYWdlKHRoaXMuc2Vzc2lvbl9zdG9yYWdlX3Byb3BlcnRpZXMsIEJhc2VTdG9yZS5TVE9SQUdFUy5TRVNTSU9OX1NUT1JBR0UpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBwcm9wZXJ0aWVzIHRoYXQgYXJlIG5vdCBwYXNzZWQgZnJvbSB0aGUgc25hcHNob3Qgb2YgdGhlIHN0b3JlIGFuZCBzYXZlcyBpdCB0byB0aGUgcGFzc2VkIHN0b3JhZ2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IHByb3BlcnRpZXMgLSBBIGxpc3Qgb2YgdGhlIHN0b3JlJ3MgcHJvcGVydGllcycgbmFtZXMgd2hpY2ggc2hvdWxkIGJlIHNhdmVkIGluIHRoZSBzdG9yYWdlLlxuICAgICAqIEBwYXJhbSB7U3ltYm9sfSAgIHN0b3JhZ2UgICAgLSBBIHN5bWJvbCBvYmplY3QgdGhhdCBkZWZpbmVzIHRoZSBzdG9yYWdlIHdoaWNoIHRoZSBzbmFwc2hvdCBzaG91bGQgYmUgc3RvcmVkIGluIGl0LlxuICAgICAqXG4gICAgICovXG4gICAgc2F2ZVRvU3RvcmFnZShwcm9wZXJ0aWVzLCBzdG9yYWdlKSB7XG4gICAgICAgIGNvbnN0IHNuYXBzaG90ID0gSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRTbmFwc2hvdChwcm9wZXJ0aWVzKSwgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHN0b3JhZ2UgPT09IEJhc2VTdG9yZS5TVE9SQUdFUy5MT0NBTF9TVE9SQUdFKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JlX25hbWUsIHNuYXBzaG90KTtcbiAgICAgICAgfSBlbHNlIGlmIChzdG9yYWdlID09PSBCYXNlU3RvcmUuU1RPUkFHRVMuU0VTU0lPTl9TVE9SQUdFKSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHRoaXMuc3RvcmVfbmFtZSwgc25hcHNob3QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHNhdmVkIHNuYXBzaG90IG9mIHRoZSBzdG9yZSBhbmQgYXNzaWducyB0byB0aGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqL1xuICAgIHJldHJpZXZlRnJvbVN0b3JhZ2UoKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsX3N0b3JhZ2Vfc25hcHNob3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuc3RvcmVfbmFtZSwge30pKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbl9zdG9yYWdlX3NuYXBzaG90ID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHRoaXMuc3RvcmVfbmFtZSwge30pKTtcblxuICAgICAgICBjb25zdCBzbmFwc2hvdCA9IHsgLi4ubG9jYWxfc3RvcmFnZV9zbmFwc2hvdCwgLi4uc2Vzc2lvbl9zdG9yYWdlX3NuYXBzaG90IH07XG5cbiAgICAgICAgT2JqZWN0LmtleXMoc25hcHNob3QpLmZvckVhY2goayA9PiAodGhpc1trXSA9IHNuYXBzaG90W2tdKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB2YWxpZGF0aW9uIGVycm9yIG1lc3NhZ2VzIGZvciBhbiBvYnNlcnZhYmxlIHByb3BlcnR5IG9mIHRoZSBzdG9yZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5TmFtZSAtIFRoZSBvYnNlcnZhYmxlIHByb3BlcnR5J3MgbmFtZVxuICAgICAqIEBwYXJhbSBbe1N0cmluZ31dIG1lc3NhZ2VzIC0gQW4gYXJyYXkgb2Ygc3RyaW5ncyB0aGF0IGNvbnRhaW5zIHZhbGlkYXRpb24gZXJyb3IgbWVzc2FnZXMgZm9yIHRoZSBwYXJ0aWN1bGFyIHByb3BlcnR5LlxuICAgICAqXG4gICAgICovXG4gICAgc2V0VmFsaWRhdGlvbkVycm9yTWVzc2FnZXMocHJvcGVydHlOYW1lLCBtZXNzYWdlcykge1xuICAgICAgICBjb25zdCBpc19kaWZmZXJlbnQgPSAoKSA9PlxuICAgICAgICAgICAgISF0aGlzLnZhbGlkYXRpb25fZXJyb3JzW3Byb3BlcnR5TmFtZV1cbiAgICAgICAgICAgICAgICAuZmlsdGVyKHggPT4gIW1lc3NhZ2VzLmluY2x1ZGVzKHgpKVxuICAgICAgICAgICAgICAgIC5jb25jYXQobWVzc2FnZXMuZmlsdGVyKHggPT4gIXRoaXMudmFsaWRhdGlvbl9lcnJvcnNbcHJvcGVydHlOYW1lXS5pbmNsdWRlcyh4KSkpLmxlbmd0aDtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRpb25fZXJyb3JzW3Byb3BlcnR5TmFtZV0gfHwgaXNfZGlmZmVyZW50KCkpIHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGlvbl9lcnJvcnNbcHJvcGVydHlOYW1lXSA9IG1lc3NhZ2VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB2YWxpZGF0aW9uIHJ1bGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gcnVsZXNcbiAgICAgKlxuICAgICAqL1xuICAgIHNldFZhbGlkYXRpb25SdWxlcyhydWxlcyA9IHt9KSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHJ1bGVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFJ1bGUoa2V5LCBydWxlc1trZXldKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBydWxlcyB0byB0aGUgcGFydGljdWxhciBwcm9wZXJ0eVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJ1bGVzXG4gICAgICpcbiAgICAgKi9cbiAgICBhZGRSdWxlKHByb3BlcnR5LCBydWxlcykge1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25fcnVsZXNbcHJvcGVydHldID0gcnVsZXM7XG5cbiAgICAgICAgaW50ZXJjZXB0KHRoaXMsIHByb3BlcnR5LCBjaGFuZ2UgPT4ge1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb3BlcnR5KHByb3BlcnR5LCBjaGFuZ2UubmV3VmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIGNoYW5nZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIGEgcGFydGljdWxhciBwcm9wZXJ0eSBvZiB0aGUgc3RvcmVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSBpbiB0aGUgc3RvcmVcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWUgICAgLSBUaGUgdmFsdWUgb2YgdGhlIHByb3BlcnR5LCBpdCBjYW4gYmUgdW5kZWZpbmVkLlxuICAgICAqXG4gICAgICovXG4gICAgdmFsaWRhdGVQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgdHJpZ2dlciA9IHRoaXMudmFsaWRhdGlvbl9ydWxlc1twcm9wZXJ0eV0udHJpZ2dlcjtcbiAgICAgICAgY29uc3QgaW5wdXRzID0geyBbcHJvcGVydHldOiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiB0aGlzW3Byb3BlcnR5XSB9O1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uX3J1bGVzID0geyBbcHJvcGVydHldOiB0aGlzLnZhbGlkYXRpb25fcnVsZXNbcHJvcGVydHldLnJ1bGVzIHx8IFtdIH07XG5cbiAgICAgICAgaWYgKCEhdHJpZ2dlciAmJiBPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLCB0cmlnZ2VyKSkge1xuICAgICAgICAgICAgaW5wdXRzW3RyaWdnZXJdID0gdGhpc1t0cmlnZ2VyXTtcbiAgICAgICAgICAgIHZhbGlkYXRpb25fcnVsZXNbdHJpZ2dlcl0gPSB0aGlzLnZhbGlkYXRpb25fcnVsZXNbdHJpZ2dlcl0ucnVsZXMgfHwgW107XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgVmFsaWRhdG9yKGlucHV0cywgdmFsaWRhdGlvbl9ydWxlcywgdGhpcyk7XG5cbiAgICAgICAgdmFsaWRhdG9yLmlzUGFzc2VkKCk7XG5cbiAgICAgICAgT2JqZWN0LmtleXMoaW5wdXRzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbGlkYXRpb25FcnJvck1lc3NhZ2VzKGtleSwgdmFsaWRhdG9yLmVycm9ycy5nZXQoa2V5KSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBhbGwgcHJvcGVydGllcyB3aGljaCB2YWxpZGF0aW9uIHJ1bGUgaGFzIGJlZW4gc2V0IGZvci5cbiAgICAgKlxuICAgICAqL1xuICAgIHZhbGlkYXRlQWxsUHJvcGVydGllcygpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbl9ydWxlcyA9IE9iamVjdC5rZXlzKHRoaXMudmFsaWRhdGlvbl9ydWxlcyk7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25fZXJyb3JzID0gT2JqZWN0LmtleXModGhpcy52YWxpZGF0aW9uX2Vycm9ycyk7XG5cbiAgICAgICAgdmFsaWRhdGlvbl9ydWxlcy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb3BlcnR5KHAsIHRoaXNbcF0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZW1vdmUga2V5cyB0aGF0IGFyZSBwcmVzZW50IGluIGVycm9yLCBidXQgbm90IGluIHJ1bGVzOlxuICAgICAgICB2YWxpZGF0aW9uX2Vycm9ycy5mb3JFYWNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGlmICghdmFsaWRhdGlvbl9ydWxlcy5pbmNsdWRlcyhlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy52YWxpZGF0aW9uX2Vycm9yc1tlcnJvcl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uU3dpdGNoQWNjb3VudChsaXN0ZW5lcikge1xuICAgICAgICBpZiAobGlzdGVuZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3dpdGNoX2FjY291bnRfbGlzdGVuZXIgPSBsaXN0ZW5lcjtcblxuICAgICAgICAgICAgdGhpcy5zd2l0Y2hBY2NvdW50RGlzcG9zZXIgPSB3aGVuKFxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMucm9vdF9zdG9yZS5jbGllbnQuc3dpdGNoX2Jyb2FkY2FzdCxcbiAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnN3aXRjaF9hY2NvdW50X2xpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC50aGVuICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLmNsaWVudC5zd2l0Y2hFbmRTaWduYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblN3aXRjaEFjY291bnQodGhpcy5zd2l0Y2hfYWNjb3VudF9saXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3dpdGNoaW5nIGFjY291bnQgbGlzdGVuZXJzIGFyZSByZXF1aXJlZCB0byByZXR1cm4gYSBwcm9taXNlLicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gbGlzdGVuZXIgY3VycmVudGx5IGFjdGl2ZS4gc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBlcnJvciByYWlzZWQgZnJvbSB0cmVhdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBudWxsIG9iamVjdCBhcyBhIGZ1bmN0aW9uLiBBbHRob3VnaCwgaW4gZGV2ZWxvcG1lbnQgbW9kZSwgd2UgdGhyb3cgYSBjb25zb2xlIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Byb2R1Y3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25QcmVTd2l0Y2hBY2NvdW50KGxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5wcmVfc3dpdGNoX2FjY291bnRfbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICAgICAgICAgIHRoaXMucHJlU3dpdGNoQWNjb3VudERpc3Bvc2VyID0gd2hlbihcbiAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnByZV9zd2l0Y2hfYnJvYWRjYXN0LFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucHJlX3N3aXRjaF9hY2NvdW50X2xpc3RlbmVyPy4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnRoZW4gJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnNldFByZVN3aXRjaEFjY291bnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUHJlU3dpdGNoQWNjb3VudCh0aGlzLnByZV9zd2l0Y2hfYWNjb3VudF9saXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUHJlLXN3aXRjaCBhY2NvdW50IGxpc3RlbmVycyBhcmUgcmVxdWlyZWQgdG8gcmV0dXJuIGEgcHJvbWlzZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGN1cnJlbnRseSBhY3RpdmUuIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgZXJyb3IgcmFpc2VkIGZyb20gdHJlYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgbnVsbCBvYmplY3QgYXMgYSBmdW5jdGlvbi4gQWx0aG91Z2gsIGluIGRldmVsb3BtZW50IG1vZGUsIHdlIHRocm93IGEgY29uc29sZSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNQcm9kdWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTG9nb3V0KGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMubG9nb3V0RGlzcG9zZXIgPSB3aGVuKFxuICAgICAgICAgICAgKCkgPT4gdGhpcy5yb290X3N0b3JlLmNsaWVudC5oYXNfbG9nZ2VkX291dCxcbiAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmxvZ291dF9saXN0ZW5lcigpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC50aGVuICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vdF9zdG9yZS5jbGllbnQuc2V0TG9nb3V0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uTG9nb3V0KHRoaXMubG9nb3V0X2xpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMb2dvdXQgbGlzdGVuZXJzIGFyZSByZXF1aXJlZCB0byByZXR1cm4gYSBwcm9taXNlLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gbGlzdGVuZXIgY3VycmVudGx5IGFjdGl2ZS4gc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBlcnJvciByYWlzZWQgZnJvbSB0cmVhdGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBhIG51bGwgb2JqZWN0IGFzIGEgZnVuY3Rpb24uIEFsdGhvdWdoLCBpbiBkZXZlbG9wbWVudCBtb2RlLCB3ZSB0aHJvdyBhIGNvbnNvbGUgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQcm9kdWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubG9nb3V0X2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgfVxuXG4gICAgb25DbGllbnRJbml0KGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SW5pdERpc3Bvc2VyID0gd2hlbihcbiAgICAgICAgICAgICgpID0+IHRoaXMucm9vdF9zdG9yZS5jbGllbnQuaW5pdGlhbGl6ZWRfYnJvYWRjYXN0LFxuICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY2xpZW50X2luaXRfbGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbiAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb3Rfc3RvcmUuY2xpZW50LnNldEluaXRpYWxpemVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2xpZW50SW5pdCh0aGlzLmNsaWVudF9pbml0X2xpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGllbnQgaW5pdCBsaXN0ZW5lcnMgYXJlIHJlcXVpcmVkIHRvIHJldHVybiBhIHByb21pc2UuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBubyBsaXN0ZW5lciBjdXJyZW50bHkgYWN0aXZlLiBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGVycm9yIHJhaXNlZCBmcm9tIHRyZWF0aW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgbnVsbCBvYmplY3QgYXMgYSBmdW5jdGlvbi4gQWx0aG91Z2gsIGluIGRldmVsb3BtZW50IG1vZGUsIHdlIHRocm93IGEgY29uc29sZSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Byb2R1Y3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5jbGllbnRfaW5pdF9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIH1cblxuICAgIG9uTmV0d29ya1N0YXR1c0NoYW5nZShsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLm5ldHdvcmtTdGF0dXNDaGFuZ2VEaXNwb3NlciA9IHJlYWN0aW9uKFxuICAgICAgICAgICAgKCkgPT4gdGhpcy5yb290X3N0b3JlLmNvbW1vbi5pc19uZXR3b3JrX29ubGluZSxcbiAgICAgICAgICAgIGlzX29ubGluZSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXR3b3JrX3N0YXR1c19jaGFuZ2VfbGlzdGVuZXIoaXNfb25saW5lKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGVyZSBpcyBubyBsaXN0ZW5lciBjdXJyZW50bHkgYWN0aXZlLiBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGVycm9yIHJhaXNlZCBmcm9tIHRyZWF0aW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgbnVsbCBvYmplY3QgYXMgYSBmdW5jdGlvbi4gQWx0aG91Z2gsIGluIGRldmVsb3BtZW50IG1vZGUsIHdlIHRocm93IGEgY29uc29sZSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1Byb2R1Y3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5ldHdvcmtfc3RhdHVzX2NoYW5nZV9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIH1cblxuICAgIG9uVGhlbWVDaGFuZ2UobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy50aGVtZUNoYW5nZURpc3Bvc2VyID0gcmVhY3Rpb24oXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnJvb3Rfc3RvcmUudWkuaXNfZGFya19tb2RlX29uLFxuICAgICAgICAgICAgaXNfZGFya19tb2RlX29uID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRoZW1lX2NoYW5nZV9saXN0ZW5lcihpc19kYXJrX21vZGVfb24pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGN1cnJlbnRseSBhY3RpdmUuIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgZXJyb3IgcmFpc2VkIGZyb20gdHJlYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBudWxsIG9iamVjdCBhcyBhIGZ1bmN0aW9uLiBBbHRob3VnaCwgaW4gZGV2ZWxvcG1lbnQgbW9kZSwgd2UgdGhyb3cgYSBjb25zb2xlIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUHJvZHVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMudGhlbWVfY2hhbmdlX2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgfVxuXG4gICAgb25SZWFsQWNjb3VudFNpZ251cEVuZChsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnJlYWxBY2NvdW50U2lnbnVwRW5kZWREaXNwb3NlciA9IHdoZW4oXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnJvb3Rfc3RvcmUudWkuaGFzX3JlYWxfYWNjb3VudF9zaWdudXBfZW5kZWQsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZWFsX2FjY291bnRfc2lnbnVwX2VuZGVkX2xpc3RlbmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnRoZW4gJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb290X3N0b3JlLnVpLnNldFJlYWxBY2NvdW50U2lnbnVwRW5kKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUmVhbEFjY291bnRTaWdudXBFbmQodGhpcy5yZWFsX2FjY291bnRfc2lnbnVwX2VuZGVkX2xpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWFsIGFjY291bnQgc2lnbnVwIGxpc3RlbmVycyBhcmUgcmVxdWlyZWQgdG8gcmV0dXJuIGEgcHJvbWlzZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGN1cnJlbnRseSBhY3RpdmUuIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgZXJyb3IgcmFpc2VkIGZyb20gdHJlYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBudWxsIG9iamVjdCBhcyBhIGZ1bmN0aW9uLiBBbHRob3VnaCwgaW4gZGV2ZWxvcG1lbnQgbW9kZSwgd2UgdGhyb3cgYSBjb25zb2xlIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzUHJvZHVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMucmVhbF9hY2NvdW50X3NpZ251cF9lbmRlZF9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgIH1cblxuICAgIGRpc3Bvc2VQcmVTd2l0Y2hBY2NvdW50KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJlU3dpdGNoQWNjb3VudERpc3Bvc2VyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnByZVN3aXRjaEFjY291bnREaXNwb3NlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJlX3N3aXRjaF9hY2NvdW50X2xpc3RlbmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBkaXNwb3NlU3dpdGNoQWNjb3VudCgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnN3aXRjaEFjY291bnREaXNwb3NlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5zd2l0Y2hBY2NvdW50RGlzcG9zZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN3aXRjaF9hY2NvdW50X2xpc3RlbmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBkaXNwb3NlTG9nb3V0KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMubG9nb3V0RGlzcG9zZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMubG9nb3V0RGlzcG9zZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ291dF9saXN0ZW5lciA9IG51bGw7XG4gICAgfVxuXG4gICAgZGlzcG9zZUNsaWVudEluaXQoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5jbGllbnRJbml0RGlzcG9zZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50SW5pdERpc3Bvc2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnRfaW5pdF9saXN0ZW5lciA9IG51bGw7XG4gICAgfVxuXG4gICAgZGlzcG9zZU5ldHdvcmtTdGF0dXNDaGFuZ2UoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5uZXR3b3JrU3RhdHVzQ2hhbmdlRGlzcG9zZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMubmV0d29ya1N0YXR1c0NoYW5nZURpc3Bvc2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXR3b3JrX3N0YXR1c19jaGFuZ2VfbGlzdGVuZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGRpc3Bvc2VUaGVtZUNoYW5nZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnRoZW1lQ2hhbmdlRGlzcG9zZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMudGhlbWVDaGFuZ2VEaXNwb3NlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGhlbWVfY2hhbmdlX2xpc3RlbmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBkaXNwb3NlUmVhbEFjY291bnRTaWdudXBFbmQoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5yZWFsQWNjb3VudFNpZ251cEVuZGVkRGlzcG9zZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMucmVhbEFjY291bnRTaWdudXBFbmRlZERpc3Bvc2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWFsX2FjY291bnRfc2lnbnVwX2VuZGVkX2xpc3RlbmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBvblVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZVByZVN3aXRjaEFjY291bnQoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlU3dpdGNoQWNjb3VudCgpO1xuICAgICAgICB0aGlzLmRpc3Bvc2VMb2dvdXQoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlQ2xpZW50SW5pdCgpO1xuICAgICAgICB0aGlzLmRpc3Bvc2VOZXR3b3JrU3RhdHVzQ2hhbmdlKCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZVRoZW1lQ2hhbmdlKCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZVJlYWxBY2NvdW50U2lnbnVwRW5kKCk7XG4gICAgfVxuXG4gICAgYXNzZXJ0SGFzVmFsaWRDYWNoZShsb2dpbmlkLCAuLi5yZWFjdGlvbnMpIHtcbiAgICAgICAgLy8gYWNjb3VudCB3YXMgY2hhbmdlZCB3aGVuIHRoaXMgd2FzIHVubW91bnRlZC5cbiAgICAgICAgaWYgKHRoaXMucm9vdF9zdG9yZS5jbGllbnQubG9naW5pZCAhPT0gbG9naW5pZCkge1xuICAgICAgICAgICAgcmVhY3Rpb25zLmZvckVhY2goYWN0ID0+IGFjdCgpKTtcbiAgICAgICAgICAgIHRoaXMucGFydGlhbF9mZXRjaF90aW1lID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Stores/base-store.js\n')},"@deriv/shared":t=>{t.exports=__WEBPACK_EXTERNAL_MODULE__deriv_shared__},"@deriv/translations":t=>{t.exports=__WEBPACK_EXTERNAL_MODULE__deriv_translations__},mobx:t=>{t.exports=__WEBPACK_EXTERNAL_MODULE_mobx__}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/Stores/Modules/CFD/cfd-store.js");return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));