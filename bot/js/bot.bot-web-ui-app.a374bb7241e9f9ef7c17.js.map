{"version":3,"file":"bot/js/bot.bot-web-ui-app.a374bb7241e9f9ef7c17.js","mappings":"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EA,6CACA,gCACA,qBACA,IAEA,2BACA,MACA,qBACA,IACA,OACA,qBACA,qBACA,IACA,QACA,qBACA,KAEA,iDACA,mBACA,8BACA,IAEA,iCACA,sCACA,IAEA,gBACA,iBACA,oBACA,sBACA,kBACA,IAGA,4BACA,sBACA,eACA,gBACA,IAEA,sBACA,iBACA,sBACA,kBACA,IAEA,kBACA,+BACA,sBACA,oBACA,sBACA,IAEA,0BACA,qBACA,0BACA,6BACA,yBACA,IAEA,qCACA,oBACA,qBACA,0BACA,yBACA,6BACA,8BACA,iCACA,IAEA,wDACA,qBACA,IAEA,8BACA,sBACA,IAEA,2BACA,sBACA,eACA,gBACA,cACA,aACA,sBACA,mBACA,IAEA,0BACA,qBACA,0BACA,6BACA,yBACA,IAEA,0BACA,iBACA,sBACA,UACA,WACA,IAIA,iDACA,qBACA,IAEA,6BACA,iBACA,sBACA,UACA,WACA,YACA,aACA,gCACA,eACA,IAEA,uBACA,oBACA,6BACA,sBACA,kBACA,gBACA,mBACA,gCACA,oBACA,0BACA,sBACA,mBACA,IAEA,wBACA,mBACA,WACA,UACA,iBACA,iBACA,qBACA,sBAAqB,sCACU3kD,QAAQkC,QAAQ0iD,eAAc,KAC7D,gBACA,6BACA,mBACA,IAEA,4BACA,qBACA,kBACA,IAEA,0BACA,sBACA,WACA,UACA,eACA,gBACA,eACA,6BACA,yBACA,IAEA,2BACA,yBACA,eACA,cACA,eACA,sBACA,iBACA,qBACA,8BACA,mBACA,IAEA,gCAA+B,sCACA5kD,QAAQkC,QAAQ2iD,YAAW,KAC1D,IAEA,kCAAiC,sCACF7kD,QAAQkC,QAAQ2iD,YAAW,KAC1D,IAEA,iCACA,cACA,eACA,iBACA,IAEA,gCACA,yBACA,eACA,cACA,eACA,IAEA,yBACA,yBACA,eACA,cACA,eACA,gBACA,eACA,sBACA,wCACA,kBACA,iBACA,0CACA,mBACA,oBACA,mBACA,8CACA,IAEA,+BACA,mBACA,cACA,eACA,qBACA,IAEA,gCACA,8CACA,8CACA,IAEA,cACA,yBACA,0BACA,+BACA,yBACA,IAEA,iBACA,4BACA,2BACA,mCACA,yBACA,IAEA,oBACA,mBACA,oBACA,qBACA,kBACA,yBACA,sBACA,mBACA,IAEA,qBACA,qBACA,cACA,IAEA,qBACA,qBACA,cACA,IAEA,uBACA,gBACA,mBACA,IAEA,sCACA,cACA,gBACA,qBACA,IAEA,iBACA,uBAEA,IAEA,kCACA,mBACA,qBACA,IAEA,uCACA,iBACA,IAEA,sBAEA,gDACA,gBACA,wBACA,qBACA,IAEA,qBAEA,kDACA,oBACA,4BACA,yBACA,IAGA,6BAEA,kDACA,oBACA,4BACA,yBACA,IAIA,+CAEA,kDACA,oBACA,4BACA,yBACA,IAEA,2CACA,kDACA,IAEA,iDACA,wBACA,IAEA,0BACA,kDACA,IAEA,wBACA,kDACA,oBACA,4BACA,IAEA,iCACA,uCACA,qBACA,uBACA,IAEA,kCACA,IAEA,kCACA,oBACA,sBACA,IAEA,yCACA,gBACA,IAEA,iBACA,iBACA,wBACA,iCACA,uBACA,wBACA,sBACA,oBACA,0BACA,IAEA,0BACA,mBACA,IAEA,iCACA,wBACA,IAEA,gCACA,8BACA,+BAEA,IAEA,+CACA,+BACA,IAEA,yBACA,yCACA,IAEA,uBACA,sBACA,IACA,mBACA,sBACA,eACA,IACA,yBACA,cACA,uBACA,IAEA,mCACA,mBACA,IAEA,sCACA,sBACA,IAEA,+BACA,qBACA,IAEA,+BACA,eACA,mBACA,IAEA,wBACA,mBACA,IAEA,kCACA,cACA,IAEA,4BACA,mBACA,iBACA,qBACA,IAMA,kGACA,qBACA,0BACA,6BACA,mBACA,IAEA,mBACA,iBACA,IAEA,8CACA,kBACA,IAEA,sBACA,mBACA,IAEA,iCACA,8BACA,eACA,IAEA,sBACA,cACA,gBACA,qBACA,IAEA,uBACA,cACA,IAEA,wBACA,aACA,cACA,IAEA,iCACA,sBACA,cACA,IAEA,wBACA,iBACA,mBACA,oBACA,IAEA,0BACA,qBACA,mBACA,IAEA,iCACA,cACA,IAEA,gCACA,cACA,IAEA,uCACA,qBACA,IAEA,wCACA,iBACA,mBACA,IAEA,2CACA,gBACA,qBACA,IAEA,4BACA,6BACA,aACA,cACA,aACA,gBACA,gBACA,kBACA,oBACA,IAEA,8BACA,mBACA,cACA,gBACA,IAEA,iDACA,iBACA,IAEA,4BACA,cACA,gBACA,qBACA,IAEA,yDACA,gBACA,IAIA,iCACA,sBACA,IAEA,wBACA,6BACA,sBACA,IAEA,wBACA,iBACA,IAEA,0BACA,qBACA,IAEA,mCACA,mBACA,qBACA,IAEA,iCACA,cACA,IAEA,0BACA,iBACA,oBACA,IAEA,wBAEA,mBACA,oBACA,IAEA,4BACA,6BACA,aACA,cACA,cACA,gBACA,oBACA,IAEA,4BACA,qBACA,qBACA,IAEA,4BACA,qBACA,qBACA,IAEA,sBACA,gBAEA,mBACA,gBACA,aACA,iBACA,0BACA,eACA,sBACA,uBACA,oBACA,IAEA,2BACA,mBAEA,IAEA,8BACA,cACA,gBACA,mBACA,IAEA,6BACA,wBACA,oBACA,IAEA,mCACA,eACA,IAEA,4BACA,eACA,IAEA,2DACA,sBACA,iBACA,IAEA,gCACA,cACA,IAEA,4BACA,2BACA,IAEA,6DACA,kCACA,gCACA,IAEA,uBACA,cACA,IAIA,2CACA,cACA,IAEA,4EACA,iDACA,cACA,IAEA,yBACA,oBACA,IAEA,wBAAuB,kBACZ7kD,QAAQkC,QAAQ4iD,OAAOC,SAAQ,KAC1C,mBAAkB,gBACT/kD,QAAQkC,QAAQ4iD,OAAOE,UAAS,KACzC,IAEA,6BACA,gBACA,mBACA,cACA,IAEA,4BACA,gBACA,mBACA,wBACA,cACA,mBACA,IAEA,2BACA,uBACA,IAEA,uBACA,gBACA,mBACA,uBACA,IAEA,uBACA,cACA,sBACA,IAEA,sBACA,gBACA,mBACA,yBACA,wBACA,IAEA,wBACA,sBACA,oBACA,IAEA,yBACA,yBACA,IAEA,2BACA,8CACA,IAGA,mEACA,gEACA,4EACA,IAGA,uBACA,qCACA,8BACA,uBACA,oBACA,sBAEA,eACA,4CACA,IAEA,qBACA,kBACA,IAEA,2BACA,iBACA,IAEA,oBACA,gBACA,qBACA,sBACA,sBACA,uBACA,IAEA,2BACA,eACA,yBACA,IAEA,8BACA,gBACA,yBACA,IAEA,kDACA,oBACA,IAEA,oDACA,6BACA,IAEA,0BACA,oCACA,aACA,iBACA,IAEA,oCACA,mCACA,YACA,kBACA,iBACA,IAEA,qBACA,iDACA,gBACA,0BACA,eACA,IAEA,8BACA,mCACA,IAEA,8BACA,iCACA,IAEA,yBACA,mCACA,IAEA,mDACA,oCACA,IAEA,mDACA,kCACA,IAEA,8CACA,oCACA,IAEA,wBACA,8CACA,mCACA,IAEA,sBACA,mBAEA,mBACA,kBACA,0BACA,IAEA,4CACA,kDACA,IAEA,2CACA,eACA,IAEA,gDACA,eACA,gBACA,gBACA,sBACA,iBACA,uBACA,uBACA,IAEA,mEACA,eACA,gBACA,aACA,sBACA,2BACA,uBACA,qDACA,kDACA,6CACA,IAEA,uBACA,oBACA,iBACA,gBACA,eACA,sBACA,8BACA,oBACA,mBACA,IAEA,8BAEA,sBACA,8BACA,eACA,IAEA,kCACA,qBACA,IAEA,gCACA,qBACA,IAEA,4BACA,cACA,sBACA,eACA,IAEA,+BAEA,sBACA,sBACA,wBACA,IAgBA,iCACA,oBACA,qCACA,uBACA,qBACA,mBACA,6DACA,aACA,iBACA,kBACA,sBACA,oBACA,sBACA,kBACA,IAEA,mCACA,mBACA,6DACA,iBACA,kBACA,IA+BA,qCACA,eACA,6DACA,oBACA,aAEA,6BACA,uBACA,IAEA,uCACA,kBACA,6DACA,qBACA,oBACA,aACA,oBAEA,6BACA,uBACA,IAIA,uDACA,yDAEA,qBACA,uBACA,IAGA,0DACA,uDACA,4DACA,0DACA,sBACA,IAMA,wDACA,0DACA,uBACA,IAEA,4CACA,+CACA,eACA,6DACA,IAGA,kEACA,qEACA,oEACA,uEACA,0BACA,IAEA,kEACA,oEACA,gBACA,qBACA,6BACA,IAGA,8CACA,2CACA,6BAGA,yBACA,wBACA,uBACA,uBACA,oBACA,IAEA,gDACA,6CACA,wCACA,IAGA,6CACA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","sources":["webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/server_time.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/network_monitor.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/constants/config.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/constants/messages.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/constants/save-type.ts","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blockly.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/images.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_defnoreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_defreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_callnoreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_callreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_ifreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_create_with.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_repeat.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_length.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_isEmpty.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_indexOf.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_getIndex.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_setIndex.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_getSublist.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_split.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_sort.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_repeat_ext.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_repeat.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_whileUntil.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_for.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_forEach.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_flow_statements.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Variable/variables_get.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Variable/variables_set.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/after_purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/check_result.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/read_details.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/trade_again.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/before_purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/ask_price.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/payout.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/during_purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/sell_at_market.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/check_sell.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/sell_price.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/bb_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/bba_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/ema_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/emaa_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/rsi_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/rsia_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/sma_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/smaa_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/macda_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/input_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/std_dev_multiplier_up.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/std_dev_multiplier_down.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/fast_ema_period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/slow_ema_period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/signal_ema_period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/tick.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/ticks.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/ohlc.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/ohlc_values.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/readOhlc.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/get_ohlc.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/check_direction.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/tick_analysis.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/last_digit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/lastDigitList.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Candle/is_candle_black.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Candle/ohlc_values_in_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Candle/read_ohlc_obj.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/balance.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/barrier_offset.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/block_holder.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/loader.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/notify.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/notify_telegram.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/total_profit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/total_runs.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/useless_block.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/console.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/epoch.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/timeout.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/todatetime.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/totimestamp.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_market.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_tradetype.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_contracttype.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_candleinterval.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_restartbuysell.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_restartonerror.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_tradeoptions.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_multiplier.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/multiplier_stop_loss.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/multiplier_take_profit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_compare.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/controls_if.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_boolean.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_operation.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_null.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_ternary.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_negate.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_change.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_constant.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_constrain.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_modulo.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_number.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_number_positive.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_number_property.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_on_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_random_float.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_random_int.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_round.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_arithmetic.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_single.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_trig.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_join.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_append.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_length.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_isEmpty.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_indexOf.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_charAt.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_getSubstring.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_changeCase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_trim.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_print.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_prompt_ext.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/dbot-store.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/ticks_service.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/cliTools.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/sanitize.js","webpack://@deriv/bot-web-ui/../indicators/src/utils/math.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/simple-moving-average.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/bollinger-bands.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/exponential-moving-average.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/macd.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/relative-strength-index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/IndicatorsInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/ToolsInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/CandleInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/MiscInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/TicksInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/BotInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Balance.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/state/constants.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/state/actions/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/state/reducers/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Ticks.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Total.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Sell.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/OpenContract.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Proposal.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/interpreter.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/xml/main.xml","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/dbot.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/block_render_svg_vertical.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/connection.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/constant.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/css.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/field_image.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/field_textinput.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/gesture.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/icon.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/block.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/block_svg.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/contextmenu.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/data_category.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/field_dropdown.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/field.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/flyout_base.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/procedures.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/workspace.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/workspace_svg.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/tooltip.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/inject.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/scratch_block_comment.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/utils.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/variable_map.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/variables.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/workspace_audio.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/xml.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/shared.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/backward-compatibility.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/utils/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/active-symbols.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/api-middleware.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/appId.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/api-base.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/account-limits.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/api-helpers.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/contracts-for.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/trading-times.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/broadcast.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/helpers.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/error-config.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/error.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/contract.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/html-helper.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/date-time-helper.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/colours.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/strategy-helper.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/error-handling.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/local-storage.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/observer.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/pending-promise.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/workspace.js","webpack://@deriv/bot-web-ui/../stores/src/storeContext.ts","webpack://@deriv/bot-web-ui/../api/src/APIProvider.tsx","webpack://@deriv/bot-web-ui/../api/src/useAPI.ts","webpack://@deriv/bot-web-ui/../api/src/useSubscription.ts","webpack://@deriv/bot-web-ui/../stores/src/useStore.ts","webpack://@deriv/bot-web-ui/../stores/src/providers/ExchangeRatesProvider.tsx","webpack://@deriv/bot-web-ui/../stores/src/stores/BaseStore.ts","webpack://@deriv/bot-web-ui/../stores/src/stores/ExchangeRatesStore.ts","webpack://@deriv/bot-web-ui/../stores/src/stores/FeatureFlagsStore.ts","webpack://@deriv/bot-web-ui/../stores/src/storeProvider.tsx","webpack://@deriv/bot-web-ui/./src/components/bot-snackbar/bot-snackbar.tsx","webpack://@deriv/bot-web-ui/./src/components/bot-snackbar/index.tsx","webpack://@deriv/bot-web-ui/./src/stores/app-store.js","webpack://@deriv/bot-web-ui/./src/constants/bot-contents.ts","webpack://@deriv/bot-web-ui/./src/utils/settings.js","webpack://@deriv/bot-web-ui/./src/stores/blockly-store.ts","webpack://@deriv/bot-web-ui/./src/stores/chart-store.js","webpack://@deriv/bot-web-ui/./src/public-path.ts","webpack://@deriv/bot-web-ui/./src/constants/load-modal.js","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/utils/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/config/index.ts","webpack://@deriv/bot-web-ui/./src/stores/dashboard-store.ts","webpack://@deriv/bot-web-ui/./src/stores/data-collection-store.js","webpack://@deriv/bot-web-ui/./src/stores/download-store.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-content.config.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/after_purchase.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/balance.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/before_purchase.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/check_direction.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/console.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/contract_check_result.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_flow_statements.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_for.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_forEach.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_if.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_whileUntil.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/during_purchase.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/epoch.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/get_ohlc.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/is_candle_black.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/last_digit.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/logic_operation.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/math_arithmetic.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/math_constrain.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/math_single.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/notify_telegram.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/ohlc.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/ohlc_values.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/ohlc_values_in_list.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/procedures_ifreturn.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/read_details.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/read_ohlc.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/read_ohlc_obj.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/sell_at_market.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/sell_price.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/sma_statement.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/text_print.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/text_prompt_ext.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/tick_analysis.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/todatetime.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/totimestamp.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/trade_again.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/trade_definition.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/trade_definition_multiplier.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/trade_definition_tradeoptions.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/variables_set.js","webpack://@deriv/bot-web-ui/./src/stores/flyout-help-store.js","webpack://@deriv/bot-web-ui/./src/utils/gtm.js","webpack://@deriv/bot-web-ui/./src/stores/flyout-store.js","webpack://@deriv/bot-web-ui/./src/constants/button-status.js","webpack://@deriv/bot-web-ui/./src/stores/google-drive-store.js","webpack://@deriv/bot-web-ui/./src/components/notify-item/notify-item.jsx","webpack://@deriv/bot-web-ui/./src/utils/journal-notifications.js","webpack://@deriv/bot-web-ui/./src/utils/session-storage.js","webpack://@deriv/bot-web-ui/./src/stores/journal-store.js","webpack://@deriv/bot-web-ui/./src/stores/load-modal-store.ts","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/config.ts","webpack://@deriv/bot-web-ui/./src/stores/quick-strategy-store.ts","webpack://@deriv/bot-web-ui/./src/stores/route-prompt-dialog-store.js","webpack://@deriv/bot-web-ui/./src/constants/contract-stage.js","webpack://@deriv/bot-web-ui/./src/constants/run-panel.js","webpack://@deriv/bot-web-ui/./src/utils/bot-notifications.js","webpack://@deriv/bot-web-ui/./src/stores/run-panel-store.js","webpack://@deriv/bot-web-ui/./src/stores/save-modal-store.ts","webpack://@deriv/bot-web-ui/./src/stores/self-exclusion-store.js","webpack://@deriv/bot-web-ui/./src/utils/multiplier.js","webpack://@deriv/bot-web-ui/./src/constants/contract.js","webpack://@deriv/bot-web-ui/./src/stores/summary-card-store.js","webpack://@deriv/bot-web-ui/./src/stores/summary-store.js","webpack://@deriv/bot-web-ui/./src/stores/toolbar-store.ts","webpack://@deriv/bot-web-ui/./src/stores/toolbox-store.js","webpack://@deriv/bot-web-ui/./src/constants/transactions.js","webpack://@deriv/bot-web-ui/./src/stores/transactions-store.js","webpack://@deriv/bot-web-ui/./src/stores/root-store.ts","webpack://@deriv/bot-web-ui/./src/stores/useDBotStore.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/google-drive.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/local-footer.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/workspace-control.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/local.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/recent-workspace.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/recent.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/recent-footer.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/load-modal.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/index.ts","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/form-wrappers/desktop-form-wrapper.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/form-wrappers/mobile-form-wrapper.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/selects/symbol.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/selects/trade-type.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/selects/contract-type.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/selects/duration-type.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/inputs/qs-input.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/inputs/qs-checkbox.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/inputs/qs-input-label.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/form.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/quick-strategy.tsx","webpack://@deriv/bot-web-ui/./src/components/quick-strategy/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/icon-radio.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/save-modal.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/react-joyride-wrapper.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/tour-end-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/tour-steps.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/config/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/tour-start-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/hooks/useTourHandler.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/bot-builder-tour/bot-builder-tour-desktop.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/accordion.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/tour-button.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/bot-builder-tour/bot-builder-tour-mobile.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/bot-builder-tour/index.tsx","webpack://@deriv/bot-web-ui/./src/components/flyout/flyout-block.tsx","webpack://@deriv/bot-web-ui/./src/components/flyout/flyout-block-group.jsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/flyout-img.tsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/flyout-text.tsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/flyout-video.tsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/flyout-help-base.jsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/index.js","webpack://@deriv/bot-web-ui/./src/components/flyout/flyout.jsx","webpack://@deriv/bot-web-ui/./src/components/flyout/index.js","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/stop-bot-modal-content.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/stop-bot-modal.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/toolbar-button.tsx","webpack://@deriv/bot-web-ui/./src/constants/z-indexes.js","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/toolbar-icon.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/workspace-group.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/toolbar.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/search-box/search-icon.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/search-box/search-box.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/search-box/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/toolbox-items.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/toolbox.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/workspace-wrapper.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/bot-builder.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-stopped.tsx","webpack://@deriv/bot-web-ui/./src/components/draggable/draggable.tsx","webpack://@deriv/bot-web-ui/./src/components/draggable/index.ts","webpack://@deriv/bot-web-ui/./src/components/transaction-details/desktop-transaction-table.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/transaction-details-desktop.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/filters.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/filter-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/format-message.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/journal-item.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/date-item.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/journal-loader.tsx","webpack://@deriv/bot-web-ui/./src/components/download/download.tsx","webpack://@deriv/bot-web-ui/./src/components/download/index.ts","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/journal-tools.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/index.ts","webpack://@deriv/bot-web-ui/./src/components/self-exclusion/self-exclusion.jsx","webpack://@deriv/bot-web-ui/./src/components/self-exclusion/index.js","webpack://@deriv/bot-web-ui/./src/components/contract-card-loading/index.ts","webpack://@deriv/bot-web-ui/./src/components/contract-card-loading/contract-card-loading.tsx","webpack://@deriv/bot-web-ui/./src/components/summary/summary-card.tsx","webpack://@deriv/bot-web-ui/./src/components/summary/summary.tsx","webpack://@deriv/bot-web-ui/./src/components/summary/index.ts","webpack://@deriv/bot-web-ui/./src/components/contract-result-overlay/index.ts","webpack://@deriv/bot-web-ui/./src/components/contract-result-overlay/contract-result-overlay.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-stop-notification.tsx","webpack://@deriv/bot-web-ui/./src/components/trade-animation/trade-animation.jsx","webpack://@deriv/bot-web-ui/./src/components/trade-animation/index.js","webpack://@deriv/bot-web-ui/./src/components/transactions/transaction.jsx","webpack://@deriv/bot-web-ui/./src/components/transactions/transactions.jsx","webpack://@deriv/bot-web-ui/./src/components/transactions/index.js","webpack://@deriv/bot-web-ui/./src/components/run-panel/run-panel.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/mobile-transaction-card.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/transaction-details-mobile.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/transaction-details.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/index.tsx","webpack://@deriv/bot-web-ui/./src/components/audio/index.ts","webpack://@deriv/bot-web-ui/./src/components/audio/audio.tsx","webpack://@deriv/bot-web-ui/./src/components/bot-notification-messages/bot-notification-messages.tsx","webpack://@deriv/bot-web-ui/./src/components/bot-notification-messages/index.ts","webpack://@deriv/bot-web-ui/./src/components/chart/v1.ts","webpack://@deriv/bot-web-ui/./src/components/chart/v2.ts","webpack://@deriv/bot-web-ui/./src/components/chart/toolbar-widgets.tsx","webpack://@deriv/bot-web-ui/./src/components/chart/chart.tsx","webpack://@deriv/bot-web-ui/./src/components/chart/index.ts","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/trashcan.js","webpack://@deriv/bot-web-ui/./src/components/run-panel/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/run-strategy.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/onboarding-tour/onboarding-tour-desktop.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/onboarding-tour/onboarding-tour-mobile.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/onboarding-tour/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/bot-preview.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/local.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/delete-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/hooks/useComponentVisibility.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/constants.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/recent-workspace.tsx","webpack://@deriv/bot-web-ui/./src/utils/dom-observer.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/recent.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/cards.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/constants.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/info-panel.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/user-guide.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/dashboard-component.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/strategy-notification.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/common/search-input/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/tutorials-tab-mobile.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/tutorials-tab-desktop.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/faq-content/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/guide-content/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/common/no-search-result-found/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/common/no-search-result-found/no-search-result.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/common/common-tabs/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/tutorial-tab.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/index.ts","webpack://@deriv/bot-web-ui/./src/components/network-toast-popup/network-toast-popup.tsx","webpack://@deriv/bot-web-ui/./src/components/network-toast-popup/index.ts","webpack://@deriv/bot-web-ui/./src/components/route-prompt-dialog/route-prompt-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/route-prompt-dialog/index.ts","webpack://@deriv/bot-web-ui/./src/components/blockly-loading/index.ts","webpack://@deriv/bot-web-ui/./src/components/blockly-loading/blockly-loading.tsx","webpack://@deriv/bot-web-ui/./src/app/app-content.jsx","webpack://@deriv/bot-web-ui/./src/app/dbot-providers.tsx","webpack://@deriv/bot-web-ui/./src/app/app-main.tsx","webpack://@deriv/bot-web-ui/./src/utils/window-size.js","webpack://@deriv/bot-web-ui/../../node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://@deriv/bot-web-ui/./src/xml/ lazy ^\\.\\/.*\\.xml$ chunkName: [request] namespace object"],"sourcesContent":["import PendingPromise from '../../utils/pending-promise';\n\nconst ServerTime = (() => {\n    let clock_started = false;\n    const pending = new PendingPromise();\n    let common_store;\n\n    const init = store => {\n        if (!clock_started) {\n            common_store = store;\n            pending.resolve(common_store.server_time);\n            clock_started = true;\n        }\n    };\n\n    const get = () => (clock_started && common_store.server_time ? common_store.server_time.clone() : undefined);\n\n    return {\n        init,\n        get,\n        timePromise: () => (clock_started ? Promise.resolve(common_store.server_time) : pending.promise),\n    };\n})();\n\nexport default ServerTime;\n","export default class NetworkMonitor {\n    constructor(apiInstance, parentElement) {\n        this.api = apiInstance;\n        this.parentElement = parentElement;\n        this.addEvents();\n    }\n\n    addEvents() {\n        if ('onLine' in navigator) {\n            window.addEventListener('online', () => this.setStatus());\n            window.addEventListener('offline', () => this.setStatus());\n        } else {\n            navigator.onLine = true;\n            setInterval(() => this.setStatus(), 10000);\n        }\n        this.setStatus();\n    }\n\n    setStatus() {\n        if (navigator.onLine) {\n            this.parentElement.html(\"<span class='connecting'></span>\");\n            this.api.send({ ping: '1' }).then(() => {\n                this.parentElement.html(\"<span class='online'></span>\");\n            });\n        } else {\n            this.parentElement.html(\"<span class='offline'></span>\");\n        }\n    }\n}\n","import { localize } from '@deriv/translations';\n\nconst CRYPTO_CURRENCIES = ['BTC', 'ETH', 'LTC', 'BCH', 'UST'];\n\nexport const config = {\n    lists: {\n        PAYOUTTYPE: [\n            // [localize('Payout'), 'payout'],\n            [localize('Stake'), 'stake'],\n        ],\n        CRYPTO_CURRENCIES,\n        DETAILS: [\n            [localize('deal reference id'), '1'],\n            [localize('purchase price'), '2'],\n            [localize('payout'), '3'],\n            [localize('profit'), '4'],\n            [localize('contract type'), '5'],\n            [localize('entry spot time'), '6'],\n            [localize('entry spot price'), '7'],\n            [localize('exit spot time'), '8'],\n            [localize('exit spot price'), '9'],\n            [localize('barrier'), '10'],\n            [localize('result'), '11'],\n        ],\n        CHECK_RESULT: [\n            [localize('Win'), 'win'],\n            [localize('Loss'), 'loss'],\n        ],\n        CHECK_DIRECTION: [\n            [localize('Rise'), 'rise'],\n            [localize('Fall'), 'fall'],\n            [localize('No Change'), ''],\n        ],\n        BALANCE_TYPE: [\n            [localize('string'), 'STR'],\n            [localize('number'), 'NUM'],\n        ],\n        NOTIFICATION_TYPE: [\n            [localize('green'), 'success'],\n            [localize('blue'), 'info'],\n            [localize('yellow'), 'warn'],\n            [localize('red'), 'error'],\n        ],\n        NOTIFICATION_SOUND: [\n            [localize('Silent'), 'silent'],\n            [localize('Announcement'), 'announcement'],\n            [localize('Earned money'), 'earned-money'],\n            [localize('Job done'), 'job-done'],\n            [localize('Error'), 'error'],\n            [localize('Severe error'), 'severe-error'],\n        ],\n        CURRENCY: ['USD', 'EUR', 'GBP', 'AUD', ...CRYPTO_CURRENCIES],\n    },\n    opposites: {\n        MULTIPLIER: [\n            {\n                MULTUP: localize('Up'),\n            },\n            {\n                MULTDOWN: localize('Down'),\n            },\n        ],\n        CALLPUT: [\n            {\n                CALL: localize('Rise'),\n            },\n            {\n                PUT: localize('Fall'),\n            },\n        ],\n        CALLPUTEQUAL: [\n            {\n                CALLE: localize('Rise Equals'),\n            },\n            {\n                PUTE: localize('Fall Equals'),\n            },\n        ],\n        HIGHERLOWER: [\n            {\n                CALL: localize('Higher'),\n            },\n            {\n                PUT: localize('Lower'),\n            },\n        ],\n        TOUCHNOTOUCH: [\n            {\n                ONETOUCH: localize('Touch'),\n            },\n            {\n                NOTOUCH: localize('No Touch'),\n            },\n        ],\n        ENDSINOUT: [\n            {\n                EXPIRYRANGE: localize('Ends Between'),\n            },\n            {\n                EXPIRYMISS: localize('Ends Outside'),\n            },\n        ],\n        STAYSINOUT: [\n            {\n                RANGE: localize('Stays Between'),\n            },\n            {\n                UPORDOWN: localize('Goes Outside'),\n            },\n        ],\n        ASIANS: [\n            {\n                ASIANU: localize('Asian Up'),\n            },\n            {\n                ASIAND: localize('Asian Down'),\n            },\n        ],\n        MATCHESDIFFERS: [\n            {\n                DIGITMATCH: localize('Matches'),\n            },\n            {\n                DIGITDIFF: localize('Differs'),\n            },\n        ],\n        EVENODD: [\n            {\n                DIGITEVEN: localize('Even'),\n            },\n            {\n                DIGITODD: localize('Odd'),\n            },\n        ],\n        OVERUNDER: [\n            {\n                DIGITOVER: localize('Over'),\n            },\n            {\n                DIGITUNDER: localize('Under'),\n            },\n        ],\n        HIGHLOWTICKS: [\n            {\n                TICKHIGH: localize('High Tick'),\n            },\n            {\n                TICKLOW: localize('Low Tick'),\n            },\n        ],\n        RESET: [\n            {\n                RESETCALL: localize('Reset Call'),\n            },\n            {\n                RESETPUT: localize('Reset Put'),\n            },\n        ],\n        RUNS: [\n            {\n                RUNHIGH: localize('Only Ups'),\n            },\n            {\n                RUNLOW: localize('Only Downs'),\n            },\n        ],\n        CALLPUTSPREAD: [\n            {\n                CALLSPREAD: localize('Call Spread'),\n            },\n            {\n                PUTSPREAD: localize('Put Spread'),\n            },\n        ],\n    },\n    BARRIER_TYPES: [\n        ['Offset +', '+'],\n        ['Offset -', '-'],\n    ],\n    ohlcFields: [\n        [localize('Open'), 'open'],\n        [localize('High'), 'high'],\n        [localize('Low'), 'low'],\n        [localize('Close'), 'close'],\n        [localize('Open Time'), 'epoch'],\n    ],\n    candleIntervals: [\n        [localize('Default'), 'default'],\n        [localize('1 minute'), '60'],\n        [localize('2 minutes'), '120'],\n        [localize('3 minutes'), '180'],\n        [localize('5 minutes'), '300'],\n        [localize('10 minutes'), '600'],\n        [localize('15 minutes'), '900'],\n        [localize('30 minutes'), '1800'],\n        [localize('1 hour'), '3600'],\n        [localize('2 hours'), '7200'],\n        [localize('4 hours'), '14400'],\n        [localize('8 hours'), '28800'],\n        [localize('1 day'), '86400'],\n    ],\n    mainBlocks: ['trade_definition', 'before_purchase', 'during_purchase', 'after_purchase'],\n    mandatoryMainBlocks: ['trade_definition', 'purchase', 'before_purchase'],\n    procedureDefinitionBlocks: ['procedures_defnoreturn', 'procedures_defreturn'],\n    single_instance_blocks: ['trade_definition', 'before_purchase', 'during_purchase', 'after_purchase'],\n    TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING: {\n        callput: ['callput', 'higherlower'],\n        asian: ['asians'],\n        digits: ['matchesdiffers', 'evenodd', 'overunder'],\n    },\n    TRADE_TYPE_CATEGORIES: {\n        multiplier: ['multiplier'],\n        callput: ['callput', 'callputequal', 'higherlower'],\n        touchnotouch: ['touchnotouch'],\n        inout: ['endsinout', 'staysinout'],\n        asian: ['asians'],\n        digits: ['matchesdiffers', 'evenodd', 'overunder'],\n        reset: ['reset'],\n        callputspread: ['callputspread'],\n        highlowticks: ['highlowticks'],\n        runs: ['runs'],\n    },\n    TRADE_TYPE_CATEGORY_NAMES: {\n        callput: localize('Up/Down'),\n        touchnotouch: localize('Touch/No Touch'),\n        inout: localize('In/Out'),\n        asian: localize('Asians'),\n        digits: localize('Digits'),\n        reset: localize('Reset Call/Reset Put'),\n        callputspread: localize('Call Spread/Put Spread'),\n        highlowticks: localize('High/Low Ticks'),\n        runs: localize('Only Ups/Only Downs'),\n        multiplier: localize('Multipliers'),\n    },\n    BARRIER_CATEGORIES: {\n        euro_atm: ['callput', 'callputequal'],\n        euro_non_atm: ['endsinout', 'higherlower', 'callputspread'],\n        american: ['staysinout', 'touchnotouch', 'highlowticks', 'runs', 'multiplier'],\n        non_financial: ['digits', 'overunder', 'evenodd', 'matchesdiffers'],\n        asian: ['asians'],\n        reset: ['reset'],\n        lookback: ['lookback'],\n    },\n    DEFAULT_DURATION_DROPDOWN_OPTIONS: [\n        [localize('Ticks'), 't'],\n        [localize('Seconds'), 's'],\n        [localize('Minutes'), 'm'],\n        [localize('Hours'), 'h'],\n        [localize('Days'), 'd'],\n    ],\n    BARRIER_LABELS: [localize('High barrier'), localize('Low barrier')],\n    ABSOLUTE_BARRIER_DROPDOWN_OPTION: [[localize('Absolute'), 'absolute']],\n    NOT_AVAILABLE_DROPDOWN_OPTIONS: [[localize('Not available'), 'na']],\n    NOT_AVAILABLE_DURATIONS: [{ display: localize('Not available'), unit: 'na', min: 0 }],\n    BARRIER_TRADE_TYPES: ['higherlower', 'touchnotouch', 'endsinout', 'staysinout', 'callputspread'],\n    PREDICTION_TRADE_TYPES: ['matchesdiffers', 'overunder', 'highlowticks'],\n    DIGIT_CATEGORIES: ['digits', 'highlowticks'],\n    INDEPEDENT_BLOCKS: ['block_holder', 'tick_analysis', 'loader', 'procedures_defreturn', 'procedures_defnoreturn'],\n    bbResult: [\n        [localize('upper'), '1'],\n        [localize('middle'), '0'],\n        [localize('lower'), '2'],\n    ],\n    macdFields: [\n        [localize('Histogram'), '0'],\n        [localize('MACD'), '1'],\n        [localize('Signal'), '2'],\n    ],\n    gd: {\n        scope: 'https://www.googleapis.com/auth/drive.file',\n        discovery_docs: 'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest',\n    },\n    workspaces: {\n        flyoutWorkspacesStartScale: 0.7,\n        mainWorkspaceStartScale: 0.9,\n        previewWorkspaceStartScale: 0.6,\n    },\n    strategies: {\n        martingale: {\n            index: 0,\n            label: localize('Martingale'),\n            description: localize(\n                'The Martingale Strategy is a classic trading technique that has been used for more than a hundred years, popularised by the French mathematician Paul Pierre Levy in the 18th century.'\n            ),\n        },\n        dalembert: {\n            index: 1,\n            label: localize(\"D'Alembert\"),\n            description: localize(\n                'The concept of the D’Alembert Strategy is said to be similar to the Martingale Strategy where you will increase your contract size after a loss. With the D’Alembert Strategy, you will also decrease your contract size after a successful trade.'\n            ),\n        },\n        oscars_grind: {\n            index: 2,\n            label: localize(\"Oscar's Grind\"),\n            description: localize(\n                \"The Oscar's Grind Strategy is a low-risk positive progression strategy that first appeared in 1965. By using this strategy, the size of your contract will increase after successful trades, but remains unchanged after unsuccessful trades.\"\n            ),\n        },\n    },\n    default_file_name: localize('Untitled Bot'),\n    DISABLED_SYMBOLS: ['frxGBPNOK', 'frxUSDNOK', 'frxUSDNEK', 'frxUSDSEK'],\n    DISABLED_SUBMARKETS: ['energy'],\n    QUICK_STRATEGY: {\n        DISABLED: {\n            SYMBOLS: ['1HZ150V', '1HZ250V'],\n            SUBMARKETS: ['crash_index', 'non_stable_coin', 'step_index'],\n        },\n        DEFAULT: {\n            symbol: '1HZ100V',\n            tradetype: 'callput',\n            durationtype: 't',\n            size: 1,\n            unit: 1,\n        },\n    },\n};\n","export const unrecoverable_errors = [\n    'InsufficientBalance',\n    'CustomLimitsReached',\n    'OfferingsValidationError',\n    'InvalidCurrency',\n    'ContractBuyValidationError',\n    'NotDefaultCurrency',\n    'PleaseAuthenticate',\n    'FinancialAssessmentRequired',\n    'PositiveIntegerExpected',\n    'OptionError',\n    'IncorrectPayoutDecimals',\n    'IncorrectStakeDecimals',\n    'NoMFProfessionalClient',\n    'AuthorizationRequired',\n    'InvalidToken',\n    'DailyLossLimitExceeded',\n    'InputValidationFailed',\n    'ClientUnwelcome',\n    'PriceMoved',\n];\n\nexport const message_types = Object.freeze({\n    ERROR: 'error',\n    NOTIFY: 'notify',\n    SUCCESS: 'success',\n});\n\nexport const error_types = Object.freeze({\n    RECOVERABLE_ERRORS: 'recoverable_errors',\n    UNRECOVERABLE_ERRORS: 'unrecoverable_errors',\n});\n\nexport const log_types = Object.freeze({\n    LOAD_BLOCK: 'load_block',\n    PURCHASE: 'purchase',\n    SELL: 'sell',\n    NOT_OFFERED: 'not_offered',\n    PROFIT: 'profit',\n    LOST: 'lost',\n    WELCOME_BACK: 'welcome_back',\n    WELCOME: 'welcome',\n});\n","export const save_types = Object.freeze({\n    UNSAVED: 'unsaved',\n    LOCAL: 'local',\n    GOOGLE_DRIVE: 'google drive',\n});\n","/* eslint import/no-webpack-loader-syntax: 0 */\nconst {\n    goog,\n    Blockly,\n} = require('imports-loader?this=>window!exports-loader?goog&Blockly!scratch-blocks/blockly_compressed_vertical');\n\nBlockly.JavaScript = require('blockly/javascript');\n\nwindow.goog = goog;\nwindow.Blockly = Blockly;\n\nrequire('imports-loader!scratch-blocks/msg/messages');\nrequire('./blocks');\nrequire('./hooks');\n","export const defineContract =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAlQTFRFAAAAMzMzMzMzaARWNQAAAAN0Uk5TAID/7PezGAAAACFJREFUeJxjYEAFUqtWLQFSCgwMHDipplXUF0ShoI5ABgDTPwulgF1l+wAAAABJRU5ErkJggg==';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAAGXcA1uAAAAAXNSR0IArs4c6QAAAK9JREFUSA3tVUkOgCAMROP/f4PfU4iOaWQKLYmBg71AOksXTAyhGkeKKuECjTSDUwcFxVdNawNgQ10omJNKROqiJbMJsKJZgKgEouuESRYVFVxO35JTnxGDvk9aWQ5GCXfSPbRbsLHysr0lBeMESaKE3hkmbKk230SY9Ulky5rG/SVJU8udPrMU5s7w9bEugUlN886MWiJN86/o2dywFQ17g10b+dlJefH9X0t9X+YETM6gfmoeI+MAAAAASUVORK5CYII=';\n\nexport const blueInfo =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAABOUlEQVQ4EaVTu07DQBDcOVuUpEaEUEETiY9IYYnHLyAaGlq+IF9AF9HQIEV8AQjJBR+BlAYqQhA1lCj2smPrEMFrIsQVPt3uzO6sbw7yY/WOXvs6L45FNFNFj2lAp/bNkSYX08u1yXcK4qE/1JX3x9mZCk5ENcT4wg6UED1f3eqeTob4YK4qQPLbw8utdR0sEFoPuOtsr++ySNWJnT1yksh+EnDQrKODmmMKOHM5L+492SwgChSlXjeK2DghTXbS6oe1zFwUcmPKGtwqYBxybQTNPAS7z6424I8QGZqFeFUxFPe6u8jTuGsq/EWuf10+3o2G2iRubmmQXFOAfCmyFYA80J7m1bIV05agK40b6G3a08NtHj7vMe7dBDk11wD/tjI9TW8DMvp1HMo2THwHVPf1Gnng+utz/gS/LY1YxBZd7wAAAABJRU5ErkJggg==';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAWBJREFUOI2dk81KQmEQhp/5zgHRjhtz0apMXBUSdAcVLWrnxhswsHARSLcRhYm00CvIRbugrCtIaJHtIqlFQUsPBeY50yINM7WfZzV8M+/MOzCfMED8wE2q0Q0VVgSJASjaNEJNoHy7Fb7ur5dekChooGO7ewJZwAw27uIBh6Gok2+kpf3ZIFHQgG+7JwpLI4RfULiYiDprjbS0DYBvu/u/FXenLr88u7sAEj9wk2rp1TDb1VQQXyF9/Dp0HctnwajRjWFiAF9BRxuxOpZmJF5qNRTmfmt/gGujMD0qW00FOUoFxzWYsRnjcnHK+smBGoGHn6rGcG8Qzv6v11MjUObjwr5Rf/K4fByaAvA8IxUBmC21ikDub8Mp3OXC2wYgFHXyCOd/kNcitrMD3QNqpKUdmnTWUYqMWKdnG6UQsZz1elbeoO839kgUW/MdSzOisgrEus9N0FPPSOV+M3zTX/8O8E9xAaZDaSsAAAAASUVORK5CYII=';\n\nexport const purchase =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAIRQTFRFAAAAMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzxeXsBQAAACx0Uk5TAAG7tbYCR//Y2a15rhj7+hmse95G391Iehd4tNIy0bJSsZJykXFRMRLxEbk1pp94AAAA7UlEQVR4nO2R2RaCMAxEi1VHQXBfAUXcQP7//xSOgC2J1Vd1Htq0J7dJOkL89auyWrIM263OG0AXvTLso/sGYMMpQwcDc77reW4VD72REXBg14cxJqZ8a/rc9wxz09j3FOsJX2BpAMZYqQ0axl5rY+rnhjb6i/zYEi8lPwV8okaAkC4eYkve7xDRQIQ9eR/jQAMHHJn7mAZinJjKu2KXUlnyXs8kECIodkBZ8t+4kECClAZSXOleUyQUUD7U1MMIHeBsqIyQvrKwNrBGcDawRnA21EY0OqVtqI3QxNmQ/x8jxgYhMjo/4/L/+mbdAKHBEAKASOAzAAAAAElFTkSuQmCC';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAvlJREFUaAXtmU1u00AUxxPEGoluKMcgJ8gCARsW9CZ0ReEU5BwFiYpWqtgYiQuQFSygJ2CRLV2E39+ZZ42dGc84XxIwT3p9X//34VfbsZPRaGNaQkpGPNu4yGESGfHUOtnYte0b6G8NdABJu7NoG4KXmi1GwUTACwtYomzp5r9ripP3/KB8zj7q4P4t0z9o9PfJowM0NhD6D9NN+sFm1xb05Rjybe171nKkDBLqfw6yt1Oqjjo3F4XArbli1dfmT7YpgOQGWPanLgjfFXyn6x9sU+QMfhdKxL/1OfSAGreh4vIR643H8pQ4hydRQCAAPv9owJ7AF1YH/bKr+z7FsPMbdBP8ZNNNOuwE+6v0bPILpJLAXsAvUrgSLxsoG4hsgAtoDDe3CoPhW7uFW8yXOffzcxK++ElOfxzwDXcxafAmhvscfjO8opdBgSfwjedqVPxaXbB5A0op5P+GH8ZwqXgwj6RtaO1kiDYJBiJOJop+HuScRZGyLfcUq2p5nJHVgAnrQzepXF/HnMIVnEckt84Os02qSkdfYN/Pq75KnpPQPFVYMZOBBq2B/EaxFVWApga0x2WT8vu64UIyq0EoMdfXeuC3JFZxhP7L7ByZe0Q5tQqmbKBsoGygbOCv2wAfHU/1SQp9Sw0P5nuNJCeFPUicYY7hW8fHqaYOr4dR5UQfSFN1dhJnAD1a/4RF2RsFq8d10Q0ce+LYyYy9RWiulw/R615gIEiOvuASpb/IDeRv7aLxq7r9FgOQbwvY7g2s72ho0vurgjuIfYmPfbMNijGhvsoSnQxKHABW7brDcvkhN23IBVS5otPc4hvgrHa1QW5/CpvR26loHkKuQuuvc/L7+BDO4sT0tiZ6ZL6dSgrr/VGkd54WrdzpYUM4FVJNF1u0CieM7g90CfjoM4Dn8BTu3v6u8LW2jZ3rA1rXlKz0Zy/Ehk7dlma7bkDdmav9cte1m3o0mLgmweugAW6gUHfuau/n/LeZaHLtGu1DXFufIssGygb+kw38ARimnBqQbBHiAAAAAElFTkSuQmCC';\n\nexport const sellContract =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAMZQTFRFAAAAMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzsMQO9wAAAEJ0Uk5TAEnj/xnzWcgSZVrxvQFt9AlD34If9dBpcPij0X7mSLyziAyl7H1k3dYbAu2qn6eA1LGN6G66uPucBP23ERPXJIPGaDxgqAAAAQdJREFUeJztlFlvwjAQhBeP4yQlKVfvg7acvQ+g90H5/3+qViWSjQ2RLfGYebC0q/k2sTw2UaVKG1RNwEGilgFOfk1kAKAXiWDdHwSQSxcDFMJ1QAhlA5FAzDxbdVbEEJEBSCWQpMyz3WjmRZpAKFkAtBKZO1ptoNHJB8jk38KAIIzZ/J1d1PeAffaNOAzMTTMd4DCiIxwXuyXACU5T6p6dOwNd4KJHpkoA6gODoYmUATQaA5dXHgBdqxvcOgN39zqYDxg4A494IppgWgIUD24GPL+84i3vWAdXjMb75EM3Pr+yhh0NM3zf/Z85m2+Hz4r374IVK+JN/hfI64p6PwLez0ylShvQHzxCDnS9VqsZAAAAAElFTkSuQmCC';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAA45JREFUaAXtWDFrFUEQzoU0QhpjFVRs/Cc2Sf6AxD4BQSF/QBFtbPwDYici2ImFIqaVlBEEK7FICBaxCFEQRM/v29vZzO7O3dv3uGCEXdg3M998M7O7d7e37+bmZmpt2y4xEPLITABHazpOC0wLwt5wtVKHDGBeFJEg7og+okTaVY5hUgslSQwGFJhb2tZ6mARI3XQ77x/YbzQR9mlMTpc4u3rDoWEFomXtGe5+0zSXg28oCL69IT8r/kwJYocLF0p1yi2ITwl2YiL6+MTq5iQZiUNvtO24GaAywLc+5FfUqp7tFdCXUeulo0bMMfoy+WY8QdUcMU0O/xfPuZ/6fOJtyZH56chABcC94oMXFWyqOlffs2YFXge4hi3gu05gEU3Mj24ZklvDtkUCfgHdfMiBu+cXMnos3QbGZHDsQVyyEs+CYaYh9yzxNaauQF2BWVaATzL6WG01GwMzE4TgfhSdGzKyAUi8z5HvzEKA5Ez08TOkA34jGInCeDT5H2EX6Di9O+k17+d2nW1kwDjz0JL6Pa85xfKRS5BP0T8oV6aSWwYqFoPQHiqoVyUxc5pgwgLnM3loFxNXZJIQATRMULHgf+5596AfKlemmrkIou2gZxfQJ6b/Lfov9CdZVgDAN9B5fLFnANy9TyH7ijyD72pPch5ZeIu7uynjwOGqQrDI1H+zJJ6Jtb6gK2mH1jVnSFcx+0O86qsrUFegrkBdgboC/9MKZK91vPBG/ac88mLEnxmt5Hxjs2kfTDnHTH3M0HlKdNTioYxtXfM7KB6X9gddiJA8OHHgPESx8UCVXbEQaCjg30bnMf+c4TYh1kCX702szTFwLK6ZQRoUIiSPllwNHjOLBw7uFfQf6GxH6LtO635u6lpDOuicCGtzDO6YCxndGWY8SWymswBE6F2XoG0PIN3EIVfQ36G/KkhhUhDrmunUYDFRByU6cvBsL+0Qyh30iV8QkzSRKcki0DKKiVZwgiHXPDrv4W8+74uEUmz6+Ml3RjGxpzTiP/ocL4UC+5HHvgo2rfTx5ROQAC+5K5hfsNOBgLeAzgH/RtftNYzzKd+yweOuIzuRzlE+AUmMaH6QkK3U/Owi3FQi7gH6+xQfssHnzsPGmu5zDfkOwc9QrPNZRGCyD0/9YWpiwYSAWrJlRlfcGhdDo//dPtca5GMGeFuLxR5cc8bSuQ3rXPwvv6mBqtcVqCtQV+Dfr8BfZ6VurZP8obgAAAAASUVORK5CYII=';\n\nexport const finishSign =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABJQTFRFAAAAMzMzMzMzMzMzMzMzMzMzbxxq5QAAAAZ0Uk5TALX/40m0LpdrJAAAADpJREFUeJxjYBi0QBCXhBJOCTRggktCGVkCQiE4g0ACWRTZwwMrMTjDCl/UYk8MDDjAyJUQxSUx6AAAWjIi1ZSdqFYAAAAASUVORK5CYII=';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAa5JREFUaAXtV1tywzAIdDq5Rg/Ui/SGzYl8j1brzqYYidHDYWw60g/iIWABKc6yGOsG+XdaSr/uFLe0dkZkNC25Wt6U7zq7C05zJMH9FofBd0IymZIKR4qYWAyh95LfbCgAxYLwd/e3h+yJm0YQWiurk2V4cXkzaALO5owKAJV7E7gsr9zzQBaBiirVXaV3KYeTbtDVyNOgUIFU9q+CeFj0bBs9sL/k5fhJnSXHOakbnzxmUKH3kl5m0JK1ZQ/fxQBHncqk3Uskg217mX2mHBC4I3APMAB6HglfgXQPXvqaZgXBRTu4PqTT+M+1+00uPtfW+94rRy/cEbgHKJYIY8pRGykLz/7jEkmIslwt8mSzSrtsbznMDBsF7lM0A1Q74V6iagbTYFZgVsC7Ani7sbzjjPrPPhu1o4skv6YPj3edG/jDAOQXjQxgAe+1p0/rXPhfgvAAih+9bJukVgtfNSq9/plb+A6EB9A8QmePCkdG0/AdCA+geYR068hbo0W9pr326Tz+p35qP+SbAVjPHB2dRcOP0ARw1ugwbvgOtFziR0J72T807MSkswKDFfgBlTxsE+QpCHoAAAAASUVORK5CYII=';\n\nexport const caution = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABsklEQV\nRoQ+1YS07DMBB9VlG2tJuWZVDYU04CN6BHKCfAnACOADcoJyHsiZRtu0m7rYiMItIFldqZ2ONaEc7Wo5d5n7ETK/T8UT3vH5FAaA\ndZDlQ6TbcYPBtgqqBSn00bmFIBeYL6YaTLknoXSaBt/gNQQwpMdt2sE9Q3FAmSwPIxW0CpW9nmmGjGvE+eirtj1TQBnVWnV/+35S\nZOF7q4dCRwZZh6eSmb6K+jIjMc+KcE9pVbajshgjkQCbQTFR2Qyq4Uzv5W520XijMQZ6BVQCq7UjhxBrgfPHGIQw8x1ymqLthJTD\nXGXY8EbLc/rsJUXTAH4i4UeheKDoR2gBpO7rr7EPf9Yqu9WswBdc5VTabObBLUU+erxaaZlU6nBmevAK5lmiNRPhW+Z2Nd5lQl+U\nu5A6h0Otxi8AKoewrUbd28JajnI12uOThsAjuwlc5mBmiICEfKbBQwH+uicZr9dCbgKVLsyHT+IzskhVykukVGjIB7pOwiI07AMl\nLWkfFCoAHlR8otMt4I0JGSiYx3AgciJRaZkxD4Gymgy8HEPgDaQqtzoOtLfNZHAj7V5WD33oEfb0MpQATTN7IAAAAASUVORK5CYI\nI=`;\n\nexport const plusIconDark =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==';\n\nexport const plusIconLight =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==';\n\nexport const minusIconDark =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC6ElEQVR4Ae2bA6weURCFp7bd4NnaOyeo3Qa1zaiKXpzUbazajJ3UjVXbtm1rGqO6u/sv5uXf74t91nfvHEpISEhISAgO5PAwU4nlvANHcBmP8Z0/8xNcwRHegeWmkochhzRS0hDjsBF3IHb5Nm8yYwoakRZMBVbjA8Sb/I7XooziBbXMGD4I8S8fNGNRi+KgrBnm8hNIAD7EvLJmFCnVeCpeQAL0mZlG1SgauAhHICF4hIsofHgYPkJC8iMPoFCpjsWQcOUloV1KmXV5JyR8eWdmXQqekuZ8DBKNfKykOQVLWTauQyL0elk2BQfa4S4kYu+a9sFdPFchMXilsEUgty5OQmLyVEltShVeAYnR5ZQapg8kZvuRfwpb4FncAfgpWpJfsA2iwG3kD9MRokOnE/mgJi5DlHjZx6IHMyCKnOH5+PNtTQH4FtUkL/AUiDInkxdwWV2AK+Qe0w2iT9NN//M/mPdBeQP+rDLAp/IG5AYzHKJTM1z796dFXkFuwDmIUs+5Wn9B9OpisW96aw5gepMNzIQodqY9wDLVAZaRDd6nOQDvIxs4C3EjBYzLCGfJBt/WHIBv2wO8VB3gpT3AT9UBftgDfFEd4AvZwHPNAfCcbPAtzQH4Vho8RnW/yPaSDSyv6p8SszUH4FlkA/00B3D6ko2CRqoXNA3JDp+B6JTPkAXtt/Hy9PitUt4AnyD65M/lDcgd2KoywBZyC3dVGaBrGvxeV7zBwVO8bjE9UBXgIdUkb/Bs7d9AFlBL0zYr1STvOJ20BDAd03PUgAgt+SkkZp9Zhj20rw5Mnyo98MQrghg5OxFbgBOBTJAWtsAV7UN/Fkx7/WOXFpzMqAdfncxk9Pgvw987IOHLOzLrhtfcWKJ//N6CMxgftBcgLHARHwjl2B/gouhKQFOCLwFFX8Oap7+GZV/0jONDqRXheDxqxV5F5LX8XnkV0f5P24xVXAZ1j5P3Rx33Cz/BFT4aRh03ISEhISHhF9FSCRjypNzcAAAAAElFTkSuQmCC';\n\nexport const lockIconDark =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACxklEQVR4Ae2aA4wdURSGT223Udf7Gizn/ieo2zg1Yqe23aC2jag2Yie7QW3bto2pMfehO53duTPJ+f54+A0vDgmCUPzkJamuWMM32P6Z61iruuYlUfBRqbyQz7EdJ+d4gUqloJJWEVPwlu3EwVuelFaRgge34etsFzHXrdZBu/Zr2HYXrAnMfcithQNsuw8O5NYi82SXxx62/y/YHalApon38OAT9mAjz/6a9diDT3EkVpNZVLeYJ3+V+3Bdxytel/vgVKx1VTcyh1WTn7Ot5QOmxHswrA58l20tzw2+CVjMtpaHVuOEL3wGburbYDGZgevinXYyd6y0f26Vwnc0gXeqHpkAU7TTf428Im2Xx6+192AqGaA0P9Su5EgqIjxIU39ApclvVCP96XfxZy2DC86tVSPyGx6jXf/xrrYeqOmPIb/BNucp5OWQC6wGmsBW8hs+6TiBG+QSre16gvxGe4ULyCUodL5B5Df47DiBDa633+hsOZHfaK/wCtcCK517CLaACIiACIiACOQkYwQK+SnbJZynKMSInGQqTrKr8k58Ztu/4DPvzK5KxUOkAo6x7X9wzMOokf60mglWkncQwSdjAp8QIa/wNLYNZhp5BUdNCuAYeYXfmBTgV94FbLMJpYAIiIAIiIAIiIAIiMB1zFItrJpf0xKz+HqoBPACnamUYzel0BkvQiKAtyqfYmBZeBsKAdWb4oBeYRC4lmDKtDSuBl4AYykBGBt4AQYlIF8FXiBSnRIQqV7SAiKQrygBlhV4gcRFAzwmDJ/RshSPsnwt1D8y1TskTQlGzD0Bb0PTmOOOemOOO+JFyJrTPFs157pc11xzWnpkIiACIiACIiACIiACz40KPJdSA8wwKjCDvKJSTZbbcAp5BytCWPCklZwdDV/JmVb0hx1+F/1hh9eiPw1O4eH+lF1yAQ8v2rMvCIIgCF8Av9j925HZ5hYAAAAASUVORK5CYII=';\n","import { localize } from '@deriv/translations';\nimport { plusIconLight } from '../../images';\n\nBlockly.Blocks.procedures_defnoreturn = {\n    init() {\n        this.arguments = [];\n        this.argument_var_models = [];\n\n        this.jsonInit(this.definition());\n\n        // Enforce unique procedure names\n        const nameField = this.getField('NAME');\n        nameField.setValidator(Blockly.Procedures.rename);\n\n        // Render a ➕-icon for adding parameters\n        const fieldImage = new Blockly.FieldImage(plusIconLight, 24, 24, '+', () => this.onAddClick());\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n\n        this.setStatements(true);\n    },\n    definition() {\n        return {\n            message0: localize('function {{ function_name }} {{ function_params }}', {\n                function_name: '%1',\n                function_params: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'NAME',\n                    text: '',\n                },\n                {\n                    type: 'field_label',\n                    name: 'PARAMS',\n                    text: '',\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Function with no return value'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Function'),\n            description: localize(\n                'This block creates a function, which is a group of instructions that can be executed at any time. Place other blocks in here to perform any kind of action that you need in your strategy. When all the instructions in a function have been carried out, your bot will continue with the remaining blocks in your strategy. Click the “do something” field to give it a name of your choice. Click the plus icon to send a value (as a named variable) to your function.'\n            ),\n        };\n    },\n    /**\n     * Sets the block colour and updates this procedure's caller blocks\n     * to reflect the same name on a change.\n     * @param {!Blockly.Events.Abstract} event Change event.\n     * @this Blockly.Block\n     */\n    onchange(event) {\n        const allowedEvents = [Blockly.Events.BLOCK_DELETE, Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE];\n        if (!this.workspace || this.workspace.isFlyout || !allowedEvents.includes(event.type)) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            // Sync names between definition- and execution-block\n            if (event.blockId === this.id && event.name === 'NAME') {\n                this.getProcedureCallers().forEach(block => {\n                    block.setFieldValue(event.newValue, 'NAME');\n                });\n            }\n        }\n    },\n    /**\n     * Prompt the user for parameter name\n     * @this Blockly.Block\n     */\n    onAddClick() {\n        if (this.workspace.options.readOnly || this.isInFlyout) {\n            return;\n        }\n\n        // Wrap in setTimeout so block doesn't stick to mouse (Blockly.Events.END_DRAG event isn't blocked).\n        setTimeout(() => {\n            const promptMessage = localize('Specify a parameter name:');\n            Blockly.prompt(promptMessage, '', paramName => {\n                if (paramName) {\n                    const variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, paramName, '');\n                    if (variable) {\n                        this.arguments.push(paramName);\n                        this.argument_var_models.push(variable);\n\n                        const paramField = this.getField('PARAMS');\n                        paramField.setText(`${localize('with: ')} ${this.arguments.join(', ')}`);\n\n                        this.getProcedureCallers().forEach(block => {\n                            block.setProcedureParameters(this.arguments);\n                            block.initSvg();\n                            block.render(false);\n                        });\n                    }\n                }\n            });\n        }, 200);\n    },\n    /**\n     * Add or remove the statement block from this function definition.\n     * @param {boolean} hasStatements True if a statement block is needed.\n     * @this Blockly.Block\n     */\n    setStatements(hasStatements) {\n        if (this.hasStatements === hasStatements) {\n            return;\n        }\n\n        if (hasStatements) {\n            this.appendStatementInput('STACK').appendField('');\n            if (this.getInput('RETURN')) {\n                this.moveInputBefore('STACK', 'RETURN');\n            }\n        } else {\n            this.removeInput('STACK', true);\n        }\n\n        this.hasStatements = hasStatements;\n    },\n    /**\n     * Update the display of parameters for this procedure definition block.\n     * @private\n     * @this Blockly.Block\n     */\n    updateParams() {\n        let paramString = '';\n\n        if (this.arguments.length) {\n            paramString = `${localize('with:')} ${this.arguments.join(', ')}`;\n        }\n\n        // The params field is deterministic based on the mutation,\n        // no need to fire a change event.\n        Blockly.Events.disable();\n        try {\n            this.setFieldValue(paramString, 'PARAMS');\n        } finally {\n            Blockly.Events.enable();\n        }\n    },\n    /**\n     * Create XML to represent the argument inputs.\n     * @param {boolean=} optParamIds If true include the IDs of the parameter\n     *     quarks.  Used by Blockly.Procedures.mutateCallers for reconnection.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom(optParamIds) {\n        const container = document.createElement('mutation');\n\n        if (optParamIds) {\n            container.setAttribute('name', this.getFieldValue('NAME'));\n        }\n\n        this.argument_var_models.forEach((arg, i) => {\n            const parameter = document.createElement('arg');\n\n            parameter.setAttribute('name', arg.name);\n            parameter.setAttribute('varid', arg.getId());\n\n            if (optParamIds && this.paramIds) {\n                parameter.setAttribute('paramId', this.paramIds[i]);\n            }\n            container.appendChild(parameter);\n        });\n\n        // Save whether the statement input is visible.\n        if (!this.hasStatements) {\n            container.setAttribute('statements', 'false');\n        }\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the argument inputs.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        this.arguments = [];\n        this.argument_var_models = [];\n\n        xmlElement.childNodes.forEach(childNode => {\n            if (childNode.nodeName.toLowerCase() === 'arg') {\n                const var_name = childNode.getAttribute('name');\n                const var_id = childNode.getAttribute('varid') || childNode.getAttribute('varId');\n                const variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, var_id, var_name, '');\n\n                this.arguments.push(var_name);\n\n                if (variable !== null) {\n                    this.argument_var_models.push(variable);\n                } else {\n                    // eslint-disable-next-line no-console\n                    console.log(`Failed to create a variable with name ${var_name}, ignoring.`);\n                }\n            }\n        });\n\n        this.updateParams();\n\n        // Show or hide the statement input.\n        this.setStatements(xmlElement.getAttribute('statements') !== 'false');\n    },\n    /**\n     * Return the signature of this procedure definition.\n     * @return {!Array} Tuple containing three elements:\n     *     - the name of the defined procedure,\n     *     - a list of all its arguments,\n     *     - that it DOES NOT have a return value.\n     * @this Blockly.Block\n     */\n    getProcedureDef() {\n        return [this.getFieldValue('NAME'), this.arguments, false];\n    },\n    /**\n     * Return all procedure callers related to this block.\n     * @return {!Array.<Blockly.Block>} List of procedure caller blocks\n     * @this Blockly.Block\n     */\n    getProcedureCallers() {\n        return this.workspace\n            .getAllBlocks(false)\n            .filter(block => block.type === this.callType && block.data === this.id);\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<string>} List of variable names.\n     * @this Blockly.Block\n     */\n    getVars() {\n        return this.arguments;\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n     * @this Blockly.Block\n     */\n    getVarModels() {\n        return this.argument_var_models;\n    },\n    /**\n     * Add custom menu options to this block's context menu.\n     * @param {!Array} options List of menu options to add to.\n     * @this Blockly.Block\n     */\n    customContextMenu(options) {\n        if (this.isInFlyout) {\n            return;\n        }\n        // Add option to create caller.\n        const option = { enabled: true };\n        const name = this.getFieldValue('NAME');\n        option.text = localize('Create \"%1\"').replace('%1', name);\n\n        const xmlMutation = document.createElement('mutation');\n        xmlMutation.setAttribute('name', name);\n\n        this.arguments.forEach(argumentName => {\n            const xmlArg = document.createElement('arg');\n            xmlArg.setAttribute('name', argumentName);\n            xmlMutation.appendChild(xmlArg);\n        });\n\n        const xmlBlock = document.createElement('block');\n        xmlBlock.setAttribute('type', this.callType);\n        xmlBlock.appendChild(xmlMutation);\n        option.callback = Blockly.ContextMenu.callbackFactory(this, xmlBlock);\n        options.push(option);\n\n        // Add options to create getters for each parameter.\n        if (!this.isCollapsed()) {\n            this.argument_var_models.forEach(argumentVarModel => {\n                const getOption = { enabled: true };\n\n                getOption.text = localize('Create \"get %1\"').replace('%1', argumentVarModel.name);\n\n                const xmlField = Blockly.Variables.generateVariableFieldDom(argumentVarModel);\n                const xmlOptionBlock = document.createElement('block');\n\n                xmlOptionBlock.setAttribute('type', 'variables_get');\n                xmlOptionBlock.appendChild(xmlField);\n\n                getOption.callback = Blockly.ContextMenu.callbackFactory(this, xmlOptionBlock);\n                options.push(getOption);\n            });\n        }\n    },\n    callType: 'procedures_callnoreturn',\n};\n\nBlockly.JavaScript.procedures_defnoreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.NAME_TYPE\n    );\n\n    let branch = Blockly.JavaScript.statementToCode(block, 'STACK');\n\n    if (Blockly.JavaScript.STATEMENT_PREFIX) {\n        const id = block.id.replace(/\\$/g, '$$$$'); // Issue 251.\n\n        branch =\n            Blockly.JavaScript.prefixLines(\n                Blockly.JavaScript.STATEMENT_PREFIX.replace(/%1/g, `'${id}'`),\n                Blockly.JavaScript.INDENT\n            ) + branch;\n    }\n\n    if (Blockly.JavaScript.INFINITE_LOOP_TRAP) {\n        branch = Blockly.JavaScript.INFINITE_LOOP_TRAP.replace(/%1/g, `'${block.id}'`) + branch;\n    }\n\n    let returnValue = Blockly.JavaScript.valueToCode(block, 'RETURN', Blockly.JavaScript.ORDER_NONE) || '';\n    if (returnValue) {\n        returnValue = `${Blockly.JavaScript.INDENT}return ${returnValue};\\n`;\n    }\n\n    const args = block.arguments.map(\n        argumentName => Blockly.JavaScript.variableDB_.getName(argumentName, Blockly.Variables.NAME_TYPE) // eslint-disable-line no-underscore-dangle\n    );\n\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.scrub_(\n        block,\n        `\n    function ${functionName}(${args.join(', ')}) {\n        ${branch}\n        ${returnValue}\n    }\\n`\n    );\n\n    // Add % so as not to collide with helper functions in definitions list.\n    // eslint-disable-next-line no-underscore-dangle\n    Blockly.JavaScript.definitions_[`%${functionName}`] = code;\n    return null;\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark } from '../../images';\n\nBlockly.Blocks.procedures_defreturn = {\n    init() {\n        this.arguments = [];\n        this.argument_var_models = [];\n\n        this.jsonInit(this.definition());\n\n        // Enforce unique procedure names\n        const nameField = this.getField('NAME');\n        nameField.setValidator(Blockly.Procedures.rename);\n\n        // Render a ➕-icon for adding parameters\n        const fieldImage = new Blockly.FieldImage(plusIconDark, 24, 24, '+', () => this.onAddClick());\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n        this.moveInputBefore('ADD_ICON', 'RETURN');\n\n        this.setStatements(true);\n    },\n    definition() {\n        return {\n            message0: localize('function {{ function_name }} {{ function_params }} {{ dummy }}', {\n                function_name: '%1',\n                function_params: '%2',\n                dummy: '%3',\n            }),\n            message1: 'return %1',\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'NAME',\n                    text: '',\n                },\n                {\n                    type: 'field_label',\n                    name: 'PARAMS',\n                    text: '',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_value',\n                    name: 'RETURN',\n                    check: null,\n                    align: Blockly.ALIGN_RIGHT,\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Function that returns a value'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Function that returns a value'),\n            description: localize(\n                'This block is similar to the one above, except that this returns a value. The returned value can be assigned to a variable of your choice.'\n            ),\n        };\n    },\n    onAddClick: Blockly.Blocks.procedures_defnoreturn.onAddClick,\n    onchange: Blockly.Blocks.procedures_defnoreturn.onchange,\n    setStatements: Blockly.Blocks.procedures_defnoreturn.setStatements,\n    updateParams: Blockly.Blocks.procedures_defnoreturn.updateParams,\n    mutationToDom: Blockly.Blocks.procedures_defnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_defnoreturn.domToMutation,\n    /**\n     * Return the signature of this procedure definition.\n     * @return {!Array} Tuple containing three elements:\n     *     - the name of the defined procedure,\n     *     - a list of all its arguments,\n     *     - that it DOES have a return value.\n     * @this Blockly.Block\n     */\n    getProcedureDef() {\n        return [this.getFieldValue('NAME'), this.arguments, true];\n    },\n    getProcedureCallers: Blockly.Blocks.procedures_defnoreturn.getProcedureCallers,\n    getVars: Blockly.Blocks.procedures_defnoreturn.getVars,\n    getVarModels: Blockly.Blocks.procedures_defnoreturn.getVarModels,\n    renameVarById: Blockly.Blocks.procedures_defnoreturn.renameVarById,\n    displayRenamedVar: Blockly.Blocks.procedures_defnoreturn.displayRenamedVar,\n    customContextMenu: Blockly.Blocks.procedures_defnoreturn.customContextMenu,\n    callType: 'procedures_callreturn',\n    registerWorkspaceListener: Blockly.Blocks.procedures_defnoreturn.registerWorkspaceListener,\n};\n\nBlockly.JavaScript.procedures_defreturn = Blockly.JavaScript.procedures_defnoreturn;\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.procedures_callnoreturn = {\n    init() {\n        this.arguments = [];\n        this.argument_var_models = [];\n        this.previousDisabledState = false;\n\n        this.jsonInit(this.definition());\n    },\n    /**\n     * Block definitions describe how a block looks and behaves, including the text,\n     * the colour, the shape, and what other blocks it can connect to. We've separated\n     * the block definition from the init function so we can search through it.\n     * https://developers.google.com/blockly/guides/create-custom-blocks/define-blocks\n     */\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'NAME',\n                    text: this.id,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'TOPROW',\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Custom function'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    /**\n     * Meta returns an object with with properties that contain human readable strings,\n     * these strings are used in the flyout help content, as well as used for searching\n     * for specific blocks.\n     */\n    meta() {\n        return {\n            display_name: localize('Custom function'),\n            description: '',\n        };\n    },\n    /**\n     * Procedure calls cannot exist without the corresponding procedure\n     * definition.  Enforce this link whenever an event is fired.\n     * @param {!Blockly.Events.Abstract} event Change event.\n     * @this Blockly.Block\n     */\n    onchange(event) {\n        if (!this.workspace || this.workspace.isFlyout) {\n            // Block is deleted or is in a flyout.\n            return;\n        }\n\n        if (!event.recordUndo) {\n            // Events not generated by user. Skip handling.\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.indexOf(this.id) !== -1) {\n            // Look for the case where a procedure call was created (usually through\n            // paste) and there is no matching definition.  In this case, create\n            // an empty definition block with the correct signature.\n            const name = this.getProcedureCall();\n            let def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (\n                def &&\n                (def.type !== this.defType || JSON.stringify(def.arguments) !== JSON.stringify(this.arguments))\n            ) {\n                // The signatures don't match.\n                def = null;\n            }\n\n            if (def) {\n                this.data = def.id;\n                return;\n            }\n\n            Blockly.Events.setGroup(event.group);\n            /**\n             * Create matching definition block.\n             * <xml>\n             *   <block type=\"procedures_defreturn\" x=\"10\" y=\"20\">\n             *     <mutation name=\"test\">\n             *       <arg name=\"x\"></arg>\n             *     </mutation>\n             *     <field name=\"NAME\">test</field>\n             *   </block>\n             * </xml>\n             */\n            const xml = document.createElement('xml');\n            const block = document.createElement('block');\n            block.setAttribute('type', this.defType);\n\n            const xy = this.getRelativeToSurfaceXY();\n            const x = xy.x + Blockly.SNAP_RADIUS * (this.RTL ? -1 : 1);\n            const y = xy.y + Blockly.SNAP_RADIUS * 2;\n\n            block.setAttribute('x', x);\n            block.setAttribute('y', y);\n\n            const mutation = this.mutationToDom();\n\n            block.appendChild(mutation);\n\n            const field = document.createElement('field');\n            field.setAttribute('name', 'NAME');\n            field.appendChild(document.createTextNode(this.getProcedureCall()));\n\n            block.appendChild(field);\n            xml.appendChild(block);\n\n            Blockly.Xml.domToWorkspace(xml, this.workspace);\n            Blockly.Events.setGroup(false);\n\n            const procedure_definition = Blockly.Procedures.getDefinition(name, this.workspace);\n            this.data = procedure_definition.id;\n        } else if (event.type === Blockly.Events.BLOCK_DELETE) {\n            // Look for the case where a procedure definition has been deleted,\n            // leaving this block (a procedure call) orphaned.  In this case, delete\n            // the orphan.\n            const name = this.getProcedureCall();\n            const def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (!def) {\n                Blockly.Events.setGroup(event.group);\n                this.dispose(true, false);\n                Blockly.Events.setGroup(false);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.element === 'disabled') {\n            const name = this.getProcedureCall();\n            const def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (def && def.id === event.blockId) {\n                // in most cases the old group should be ''\n                const oldGroup = Blockly.Events.getGroup();\n\n                if (oldGroup) {\n                    // This should only be possible programatically and may indicate a problem\n                    // with event grouping. If you see this message please investigate. If the\n                    // use ends up being valid we may need to reorder events in the undo stack.\n                    // eslint-disable-next-line no-console\n                    console.log('Saw an existing group while responding to a definition change');\n                }\n\n                Blockly.Events.setGroup(event.group);\n\n                if (event.newValue) {\n                    this.previousDisabledState = this.disabled;\n                    this.setDisabled(true);\n                } else {\n                    this.setDisabled(this.previousDisabledState);\n                }\n\n                Blockly.Events.setGroup(oldGroup);\n            }\n        }\n    },\n    /**\n     * Returns the related procedure definition block.\n     * @return {Blockly.Block} Procedure definition block.\n     * @this Blockly.Block\n     */\n    getProcedureDefinition(name) {\n        // Assume that a procedure definition is a top block.\n        return this.workspace.getTopBlocks(false).find(block => {\n            if (block.getProcedureDef) {\n                const tuple = block.getProcedureDef();\n                return tuple && Blockly.Names.equals(tuple[0], name);\n            }\n            return false;\n        });\n    },\n    /**\n     * Returns the name of the procedure this block calls.\n     * @return {string} Procedure name.\n     * @this Blockly.Block\n     */\n    getProcedureCall() {\n        // The NAME field is guaranteed to exist, null will never be returned.\n        return /** @type {string} */ (this.getFieldValue('NAME'));\n    },\n    /**\n     * Notification that a procedure is renaming.\n     * If the name matches this block's procedure, rename it.\n     * @param {string} oldName Previous name of procedure.\n     * @param {string} newName Renamed procedure.\n     * @this Blockly.Block\n     */\n    renameProcedure(oldName, newName) {\n        if (Blockly.Names.equals(oldName, this.getProcedureCall())) {\n            this.setFieldValue(newName, 'NAME');\n        }\n    },\n    /**\n     * Notification that the procedure's parameters have changed.\n     * @param {!Array.<string>} paramNames New param names, e.g. ['x', 'y', 'z'].\n     * @private\n     * @this Blockly.Block\n     */\n    setProcedureParameters(paramNames) {\n        // Rebuild the block's arguments.\n        this.arguments = [].concat(paramNames);\n\n        // And rebuild the argument model list.\n        this.argument_var_models = this.arguments.map(argumentName =>\n            Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, argumentName, '')\n        );\n\n        this.updateShape();\n    },\n    /**\n     * Modify this block to have the correct number of arguments.\n     * @private\n     * @this Blockly.Block\n     */\n    updateShape() {\n        this.arguments.forEach((argumentName, i) => {\n            let field = this.getField(`ARGNAME${i}`);\n            if (field) {\n                // Ensure argument name is up to date.\n                // The argument name field is deterministic based on the mutation,\n                // no need to fire a change event.\n                Blockly.Events.disable();\n                try {\n                    field.setValue(argumentName);\n                } finally {\n                    Blockly.Events.enable();\n                }\n            } else {\n                // Add new input.\n                field = new Blockly.FieldLabel(argumentName);\n                const input = this.appendValueInput(`ARG${i}`).appendField(field, `ARGNAME${i}`);\n                input.init();\n            }\n        });\n\n        // Remove deleted inputs.\n        let i = this.arguments.length;\n        while (this.getInput(`ARG${i}`)) {\n            this.removeInput(`ARG${i}`);\n            i++;\n        }\n\n        // Add 'with:' if there are parameters, remove otherwise.\n        const topRow = this.getInput('TOPROW');\n\n        if (topRow) {\n            if (this.arguments.length) {\n                if (!this.getField('WITH')) {\n                    topRow.appendField(localize('with:'), 'WITH');\n                    topRow.init();\n                }\n            } else if (this.getField('WITH')) {\n                topRow.removeField('WITH');\n            }\n        }\n    },\n    /**\n     * Create XML to represent the (non-editable) name and arguments.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('name', this.getProcedureCall());\n\n        this.arguments.forEach(argumentName => {\n            const parameter = document.createElement('arg');\n            parameter.setAttribute('name', argumentName);\n            container.appendChild(parameter);\n        });\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the (non-editable) name and parameters.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        const name = xmlElement.getAttribute('name');\n        this.renameProcedure(this.getProcedureCall(), name);\n\n        const args = [];\n        const paramIds = [];\n\n        xmlElement.childNodes.forEach(childNode => {\n            if (childNode.nodeName.toLowerCase() === 'arg') {\n                args.push(childNode.getAttribute('name'));\n                paramIds.push(childNode.getAttribute('paramId'));\n            }\n        });\n\n        this.setProcedureParameters(args, paramIds);\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n     * @this Blockly.Block\n     */\n    getVarModels() {\n        return this.argument_var_models;\n    },\n    /**\n     * Add menu option to find the definition block for this call.\n     * @param {!Array} options List of menu options to add to.\n     * @this Blockly.Block\n     */\n    customContextMenu(options) {\n        const name = this.getProcedureCall();\n        const { workspace } = this;\n\n        const option = { enabled: true };\n        option.text = localize('Highlight function definition');\n        option.callback = () => {\n            const def = this.getProcedureDefinition(name);\n            if (def) {\n                workspace.centerOnBlock(def.id);\n                def.select();\n            }\n        };\n\n        options.push(option);\n    },\n    defType: 'procedures_defnoreturn',\n};\n\nBlockly.JavaScript.procedures_callnoreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.NAME_TYPE\n    );\n    const args = block.arguments.map(\n        (arg, i) => Blockly.JavaScript.valueToCode(block, `ARG${i}`, Blockly.JavaScript.ORDER_COMMA) || 'null'\n    );\n\n    const code = `${functionName}(${args.join(', ')});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.procedures_callreturn = {\n    init() {\n        this.arguments = [];\n        this.previousDisabledState = false;\n\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'NAME',\n                    text: this.id,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'TOPROW',\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Custom function'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Custom function'),\n            description: '',\n        };\n    },\n    onchange: Blockly.Blocks.procedures_callnoreturn.onchange,\n    getProcedureDefinition: Blockly.Blocks.procedures_callnoreturn.getProcedureDefinition,\n    getProcedureCall: Blockly.Blocks.procedures_callnoreturn.getProcedureCall,\n    renameProcedure: Blockly.Blocks.procedures_callnoreturn.renameProcedure,\n    setProcedureParameters: Blockly.Blocks.procedures_callnoreturn.setProcedureParameters,\n    updateShape: Blockly.Blocks.procedures_callnoreturn.updateShape,\n    mutationToDom: Blockly.Blocks.procedures_callnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_callnoreturn.domToMutation,\n    getVarModels: Blockly.Blocks.procedures_callnoreturn.getVarModels,\n    customContextMenu: Blockly.Blocks.procedures_callnoreturn.customContextMenu,\n    defType: 'procedures_defreturn',\n};\n\nBlockly.JavaScript.procedures_callreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.NAME_TYPE\n    );\n    const args = block.arguments.map(\n        (arg, i) => Blockly.JavaScript.valueToCode(block, `ARG${i}`, Blockly.JavaScript.ORDER_COMMA) || 'null'\n    );\n\n    const code = `${functionName}(${args.join(', ')})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\n/**\n * Block for conditionally returning a value from a procedure.\n * @this Blockly.Block\n */\nBlockly.Blocks.procedures_ifreturn = {\n    init() {\n        this.hasReturnValue = true;\n\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('if {{ condition }} return {{ value }}', { condition: '%1', value: '%2' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'CONDITION',\n                },\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Prematurely returns a value within a function'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Conditional return'),\n            description: localize(\n                'This block returns a value when a condition is true. Use this block within either of the function blocks above.'\n            ),\n        };\n    },\n    /**\n     * Create XML to represent whether this block has a return value.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('value', Number(this.hasReturnValue));\n        return container;\n    },\n    /**\n     * Parse XML to restore whether this block has a return value.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        const value = xmlElement.getAttribute('value');\n        this.hasReturnValue = value === '1';\n\n        if (!this.hasReturnValue) {\n            this.removeInput('VALUE');\n            this.appendDummyInput('VALUE').appendField(localize('return'));\n            this.initSvg();\n            this.render();\n        }\n    },\n    /**\n     * Called whenever anything on the workspace changes.\n     * Add warning if this flow block is not nested inside a loop.\n     * @param {!Blockly.Events.Abstract} e Change event.\n     * @this Blockly.Block\n     */\n    onchange(/* e */) {\n        if (!this.workspace.isDragging || this.workspace.isDragging()) {\n            return; // Don't change state at the start of a drag.\n        }\n\n        let legal = false;\n\n        // Is the block nested in a procedure?\n        let block = this;\n        do {\n            if (this.FUNCTION_TYPES.indexOf(block.type) !== -1) {\n                legal = true;\n                break;\n            }\n            block = block.getSurroundParent();\n        } while (block);\n\n        if (legal) {\n            const rerender = () => {\n                this.initSvg();\n                this.render();\n            };\n\n            // If needed, toggle whether this block has a return value.\n            if (block.type === 'procedures_defnoreturn' && this.hasReturnValue) {\n                this.removeInput('VALUE');\n                this.appendDummyInput('VALUE').appendField(localize('return'));\n                rerender();\n                this.hasReturnValue = false;\n            } else if (block.type === 'procedures_defreturn' && !this.hasReturnValue) {\n                this.removeInput('VALUE');\n                this.appendValueInput('VALUE').appendField(localize('return'));\n                rerender();\n                this.hasReturnValue = true;\n            }\n\n            if (!this.isInFlyout) {\n                this.setDisabled(false);\n            }\n        } else if (!this.isInFlyout && !this.getInheritedDisabled()) {\n            this.setDisabled(true);\n        }\n    },\n    /**\n     * List of block types that are functions and thus do not need warnings.\n     * To add a new function type add this to your code:\n     * Blockly.Blocks['procedures_ifreturn'].FUNCTION_TYPES.push('custom_func');\n     */\n    FUNCTION_TYPES: ['procedures_defnoreturn', 'procedures_defreturn'],\n};\n\nBlockly.JavaScript.procedures_ifreturn = block => {\n    const condition = Blockly.JavaScript.valueToCode(block, 'CONDITION', Blockly.JavaScript.ORDER_NONE) || 'false';\n\n    let branch;\n    if (block.hasReturnValue) {\n        const value = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_NONE) || 'null';\n        branch = `return ${value};\\n`;\n    } else {\n        branch = 'return;\\n';\n    }\n\n    const code = `\n    if (${condition}) {\n        ${branch}\n    }\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark } from '../../images';\nimport { runIrreversibleEvents, runGroupedEvents } from '../../../utils';\n\nBlockly.Blocks.lists_create_with = {\n    protected_statements: ['STACK'],\n    allowed_children: ['lists_statement'],\n    init() {\n        const field_image = new Blockly.FieldImage(plusIconDark, 25, 25, '', this.onIconClick.bind(this));\n        this.jsonInit(this.definition());\n        this.appendDummyInput('ADD_ICON').appendField(field_image);\n        this.moveInputBefore('ADD_ICON', 'STACK');\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to create list with', { variable: '%1' }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: localize('list'),\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STACK',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('This block creates a list with strings and numbers.'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Create list'),\n            description: localize('This block creates a list with strings and numbers.'),\n        };\n    },\n    onIconClick() {\n        if (this.workspace.options.readOnly || this.isInFlyout) {\n            return;\n        }\n\n        runGroupedEvents(false, () => {\n            const statement_block = this.workspace.newBlock('lists_statement');\n            statement_block.required_parent_id = this.id;\n            statement_block.setMovable(false);\n            statement_block.initSvg();\n            statement_block.render();\n\n            const connection = this.getLastConnectionInStatement('STACK');\n            connection.connect(statement_block.previousConnection);\n        });\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            // Only allow \"text_statement\" type blocks\n            const blocks_in_stack = this.getBlocksInStatement('STACK');\n            blocks_in_stack.forEach(block => {\n                if (!this.allowed_children.includes(block.type)) {\n                    runIrreversibleEvents(() => {\n                        block.unplug(/* healStack */ false);\n                    });\n                }\n            });\n        }\n    },\n};\n\n// Head's up! This is also the code generation for the \"text_join\" block.\nBlockly.JavaScript.lists_create_with = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const blocks_in_stack = block.getBlocksInStatement('STACK');\n    const elements = blocks_in_stack.map(b => {\n        const value = Blockly.JavaScript[b.type](b);\n        return Array.isArray(value) ? value[0] : value;\n    });\n\n    const code = `${var_name} = [${elements.join(', ')}];\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../utils';\n\nBlockly.Blocks.lists_repeat = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('create list with item {{ input_item }} repeated {{ number }} times', {\n                input_item: '%1',\n                number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'ITEM',\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Creates a list by repeating a given item'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat an item'),\n            description: localize('Creates a list with a given item repeated for a specific number of times.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            ITEM: emptyTextValidator,\n            NUM: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_repeat = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const function_name = Blockly.JavaScript.provideFunction_('listsRepeat', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(value, n) {\n            var array = [];\n            for (var i = 0; i < n; i++) {\n                array[i] = value;\n            }\n            return array;\n        }`,\n    ]);\n\n    const element = Blockly.JavaScript.valueToCode(block, 'ITEM', Blockly.JavaScript.ORDER_COMMA) || 'null';\n    const repeat_count = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const code = `${function_name}(${element}, ${repeat_count})`;\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_length = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('length of {{ input_list }}', { input_list: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the total number of items in a given list.'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('List Length'),\n            description: localize('This block gives you the total number of items in a given list.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_length = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n\n    const code = `${list}.length`;\n    return [code, Blockly.JavaScript.ORDER_MEMBER];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_isEmpty = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('list {{ input_list }} is empty', { input_list: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    check: ['Array'],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Checks if a given list is empty'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Is list empty?'),\n            description: localize(\n                'This block checks if a given list is empty. It returns “True” if the list is empty, “False” if otherwise.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_isEmpty = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n    const isVariable = block.workspace.getAllVariables().findIndex(variable => variable.name === list) !== -1;\n\n    const code = isVariable ? `!${list} || !${list}.length` : `!${list}.length`;\n    return [code, Blockly.JavaScript.ORDER_LOGICAL_NOT];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_indexOf = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'in list {{ input_list }} find {{ first_or_last }} occurence of item {{ input_value }}',\n                {\n                    input_list: '%1',\n                    first_or_last: '%2',\n                    input_value: '%3',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'END',\n                    options: [\n                        [localize('first'), 'FIRST'],\n                        [localize('last'), 'LAST'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'FIND',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the position of an item in a given list.'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('List item position'),\n            description: localize('This block gives you the position of an item in a given list.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n            FIND: null,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_indexOf = block => {\n    const operator = block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';\n    const item = Blockly.JavaScript.valueToCode(block, 'FIND', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n\n    const code = `${list}.${operator}(${item})`;\n\n    if (block.workspace.options.oneBasedIndex) {\n        return [`${code} + 1`, Blockly.JavaScript.ORDER_ADDITION];\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_getIndex = {\n    init() {\n        this.MODE_OPTIONS = [\n            [localize('get'), 'GET'],\n            [localize('get and remove'), 'GET_REMOVE'],\n            [localize('remove'), 'REMOVE'],\n        ];\n        this.WHERE_OPTIONS = [\n            ['#', 'FROM_START'],\n            [localize('# from end'), 'FROM_END'],\n            [localize('first'), 'FIRST'],\n            [localize('last'), 'LAST'],\n            [localize('random'), 'RANDOM'],\n        ];\n        const modeMenu = new Blockly.FieldDropdown(this.MODE_OPTIONS, value => {\n            const isStatement = value === 'REMOVE';\n            this.updateStatement(isStatement);\n        });\n\n        this.appendValueInput('VALUE').setCheck('Array').appendField(localize('in list'));\n        this.appendDummyInput().appendField(modeMenu, 'MODE');\n        this.appendDummyInput('AT');\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Base.colour,\n            Blockly.Colours.Base.colourSecondary,\n            Blockly.Colours.Base.colourTertiary\n        );\n        this.setTooltip(\n            'This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list.'\n        );\n        this.setOutput(true, null);\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n        this.updateAt(true);\n    },\n    meta() {\n        return {\n            display_name: localize('Get list item'),\n            description: localize(\n                'This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isStatement = !this.outputConnection;\n        const isAt = this.getInput('AT').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('statement', isStatement);\n        container.setAttribute('at', isAt);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isStatement = xmlElement.getAttribute('statement') === 'true';\n        this.updateStatement(isStatement);\n\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateStatement(newStatement) {\n        const oldStatement = !this.outputConnection;\n\n        if (newStatement !== oldStatement) {\n            this.unplug(true, true);\n\n            this.setOutput(!newStatement);\n            this.setPreviousStatement(newStatement);\n            this.setNextStatement(newStatement);\n\n            this.initSvg();\n            this.render(false);\n        }\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        } else {\n            this.appendDummyInput('AT');\n        }\n\n        const menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.getInput('AT').appendField(menu, 'WHERE');\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_getIndex = block => {\n    const mode = block.getFieldValue('MODE') || 'GET';\n    const where = block.getFieldValue('WHERE') || 'FIRST';\n    const listOrder = where === 'RANDOM' ? Blockly.JavaScript.ORDER_COMMA : Blockly.JavaScript.ORDER_MEMBER;\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', listOrder) || '[]';\n\n    let code, order;\n\n    if (where === 'FIRST') {\n        if (mode === 'GET') {\n            code = `${list}[0]`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.shift()`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'REMOVE') {\n            return `${list}.shift();\\n`;\n        }\n    } else if (where === 'LAST') {\n        if (mode === 'GET') {\n            code = `${list}.slice(-1)[0]`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.pop()`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'REMOVE') {\n            return `${list}.pop();\\n`;\n        }\n    } else if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT');\n        if (mode === 'GET') {\n            code = `${list}[${at}]`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.splice(${at}, 1)[0]`;\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${list}.splice(${at}, 1);\\n`;\n        }\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, true);\n        if (mode === 'GET') {\n            code = `${list}.slice(${at})[0]`;\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.splice(${at}, 1)[0]`;\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${list}.splice(${at}, 1);\\n`;\n        }\n    } else if (where === 'RANDOM') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('listsGetRandomItem', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {\n                var x = Math.floor(Math.random() * list.length);\n                if (remove) {\n                    return list.splice(x, 1)[0];\n                } else {\n                    return list[x];\n                }\n            }`,\n        ]);\n\n        code = `${functionName}(${list}, ${mode !== 'GET'})`;\n\n        if (mode === 'GET' || mode === 'GET_REMOVE') {\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${code};\\n`;\n        }\n    }\n\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_setIndex = {\n    init() {\n        this.MODE_OPTIONS = [\n            [localize('set'), 'SET'],\n            [localize('insert at'), 'INSERT'],\n        ];\n        this.WHERE_OPTIONS = [\n            [localize('#'), 'FROM_START'],\n            [localize('# from end'), 'FROM_END'],\n            [localize('first'), 'FIRST'],\n            [localize('last'), 'LAST'],\n            [localize('random'), 'RANDOM'],\n        ];\n\n        this.appendValueInput('LIST').setCheck('Array').appendField(localize('in list'));\n        this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.MODE_OPTIONS), 'MODE');\n        this.appendDummyInput('AT');\n        this.appendValueInput('TO').appendField(localize('as'));\n\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Base.colour,\n            Blockly.Colours.Base.colourSecondary,\n            Blockly.Colours.Base.colourTertiary\n        );\n        this.setPreviousStatement(true, null);\n        this.setNextStatement(true, null);\n        this.setTooltip(\n            localize(\n                'This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position.'\n            )\n        );\n        this.updateAt(true);\n    },\n    meta() {\n        return {\n            display_name: localize('Set list item'),\n            description: localize(\n                'This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt = this.getInput('AT').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at', isAt);\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        } else {\n            this.appendDummyInput('AT');\n        }\n\n        const menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.moveInputBefore('AT', 'TO');\n        this.getInput('AT').appendField(menu, 'WHERE');\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_setIndex = block => {\n    const mode = block.getFieldValue('MODE') || 'SET';\n    const where = block.getFieldValue('WHERE') || 'FIRST';\n    const value = Blockly.JavaScript.valueToCode(block, 'TO', Blockly.JavaScript.ORDER_ASSIGNMENT) || 'null';\n\n    let list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n\n    const cacheList = () => {\n        if (list.match(/^\\w+$/)) {\n            return '';\n        }\n\n        // eslint-disable-next-line no-underscore-dangle\n        const listVar = Blockly.JavaScript.variableDB_.getDistinctName('tmpList', Blockly.Variables.NAME_TYPE);\n        const code = `var ${listVar} = ${list};\\n`;\n\n        list = listVar;\n        return code;\n    };\n\n    let code;\n\n    if (where === 'FIRST') {\n        if (mode === 'SET') {\n            code = `${list}[0] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.unshift(${value});\\n`;\n        }\n    } else if (where === 'LAST') {\n        if (mode === 'SET') {\n            code = cacheList();\n            code += `${list}[${list}.length - 1] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.push(${value});\\n`;\n        }\n    } else if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT');\n        if (mode === 'SET') {\n            code = `${list}[${at}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.splice(${at}, 0, ${value});\\n`;\n        }\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n        code = cacheList();\n        if (mode === 'SET') {\n            code = `${list}[${list}.length - ${at}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.splice(${list}.length - ${at}, 0, ${value});\\n`;\n        }\n    } else if (where === 'RANDOM') {\n        code = cacheList();\n\n        // eslint-disable-next-line no-underscore-dangle\n        const xVar = Blockly.JavaScript.variableDB_.getDistinctName('tmpX', Blockly.Variables.NAME_TYPE);\n\n        code += `var ${xVar} = Math.floor(Math.random() * ${list}.length);\\n`;\n\n        if (mode === 'SET') {\n            code += `${list}[${xVar}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code += `${list}.splice(${xVar}, 0, ${value});\\n`;\n        }\n    }\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_getSublist = {\n    init() {\n        this.WHERE_OPTIONS_1 = [\n            [localize('get sub-list from #'), 'FROM_START'],\n            [localize('get sub-list from # from end'), 'FROM_END'],\n            [localize('get sub-list from first'), 'FIRST'],\n        ];\n        this.WHERE_OPTIONS_2 = [\n            [localize('#'), 'FROM_START'],\n            [localize('# from end'), 'FROM_END'],\n            [localize('last'), 'LAST'],\n        ];\n\n        this.appendValueInput('LIST').appendField(localize('in list'));\n        this.appendDummyInput('AT1');\n        this.appendDummyInput('AT2');\n\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Base.colour,\n            Blockly.Colours.Base.colourSecondary,\n            Blockly.Colours.Base.colourTertiary\n        );\n        this.setOutput(true, null);\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n        this.setTooltip(\n            localize('This block creates a list of items from an existing list, using specific item positions.')\n        );\n        this.updateAt(1, true);\n        this.updateAt(2, true);\n    },\n    meta() {\n        return {\n            display_name: localize('Get sub-list'),\n            description: localize(\n                'This block creates a list of items from an existing list, using specific item positions.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt1 = this.getInput('AT1').type === Blockly.INPUT_VALUE;\n        const isAt2 = this.getInput('AT2').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at1', isAt1);\n        container.setAttribute('at2', isAt2);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt1 = xmlElement.getAttribute('at1') === 'true';\n        const isAt2 = xmlElement.getAttribute('at2') === 'true';\n        this.updateAt(1, isAt1);\n        this.updateAt(2, isAt2);\n    },\n    updateAt(n, isAt) {\n        this.removeInput(`AT${n}`);\n\n        if (isAt) {\n            this.appendValueInput(`AT${n}`).setCheck('Number');\n        } else {\n            this.appendDummyInput(`AT${n}`);\n        }\n\n        const menu = new Blockly.FieldDropdown(this[`WHERE_OPTIONS_${n}`], value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(n, newAt);\n                this.setFieldValue(value, `WHERE${n}`);\n                return null;\n            }\n            return undefined;\n        });\n\n        this.getInput(`AT${n}`).appendField(menu, `WHERE${n}`);\n\n        if (n === 1) {\n            this.moveInputBefore('AT1', 'AT2');\n        }\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_getSublist = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n    const where1 = block.getFieldValue('WHERE1');\n    const where2 = block.getFieldValue('WHERE2');\n\n    let at1, at2, code;\n\n    if (where1 === 'FIRST' && where2 === 'LAST') {\n        code = `${list}.slice(0)`;\n    } else if (list.match(/^\\w+$/) || (where1 !== 'FROM_END' && where2 === 'FROM_START')) {\n        if (where1 === 'FROM_START') {\n            at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        } else if (where1 === 'FROM_END') {\n            at1 = Blockly.JavaScript.getAdjusted(block, 'AT1', 1, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n            at1 = `${list}.length - ${at1}`;\n        } else if (where1 === 'FIRST') {\n            at1 = '0';\n        }\n\n        if (where2 === 'FROM_START') {\n            at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 1);\n        } else if (where2 === 'FROM_END') {\n            at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 0, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n            at2 = `${list}.length - ${at2}`;\n        } else if (where2 === 'LAST') {\n            at2 = `${list}.length`;\n        }\n\n        code = `${list}.slice(${at1}, ${at2})`;\n    } else {\n        at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        at2 = Blockly.JavaScript.getAdjusted(block, 'AT2');\n        const where_pascal_case = {\n            FROM_START: 'FromStart',\n            FROM_END: 'FromEnd',\n            FIRST: 'First',\n            LAST: 'Last',\n        };\n\n        const getIndex = (list_name, where, opt_at) => {\n            if (where === 'FIRST') {\n                return '0';\n            } else if (where === 'FROM_END') {\n                return `${list_name}.length - 1 - ${opt_at}`;\n            } else if (where === 'LAST') {\n                return `${list_name}.length - 1`;\n            }\n            return `${opt_at}`;\n        };\n\n        const has_at1 = where1 === 'FROM_END' || where1 === 'FROM_START';\n        const has_at2 = where2 === 'FROM_END' || where2 === 'FROM_START';\n\n        // eslint-disable-next-line no-underscore-dangle\n        const function_name = Blockly.JavaScript.provideFunction_(\n            `subsequence${where_pascal_case[where1]}${where_pascal_case[where2]}`,\n            [\n                // eslint-disable-next-line no-underscore-dangle\n                `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(\n                    sequence${has_at1 ? ', at1' : ''}${has_at2 ? ', at2' : ''}\n                ) {\n                    var start = ${getIndex('sequence', where1, 'at1')};\n                    var end = ${getIndex('sequence', where2, 'at2')} + 1;\n\n                    return sequence.slice(start, end);\n                }`,\n            ]\n        );\n\n        code = `${function_name}(${list}${has_at1 ? `, ${at1}` : ''}${has_at2 ? `, ${at2}` : ''})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_split = {\n    init() {\n        const dropdown = new Blockly.FieldDropdown(\n            [\n                [localize('make list from text'), 'SPLIT'],\n                [localize('make text from list'), 'JOIN'],\n            ],\n            newMode => this.updateType(newMode)\n        );\n\n        this.appendValueInput('INPUT').setCheck('String').appendField(dropdown, 'MODE');\n        this.appendValueInput('DELIM')\n            .setCheck('String')\n            .appendField('', 'SPACE1')\n            .appendField(localize('with delimiter'), 'DELIM_LABEL');\n        this.appendDummyInput().appendField('', 'SPACE2');\n\n        this.setOutput(true, 'Array');\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Base.colour,\n            Blockly.Colours.Base.colourSecondary,\n            Blockly.Colours.Base.colourTertiary\n        );\n        this.setTooltip(\n            localize(\n                'This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text.'\n            )\n        );\n    },\n    meta() {\n        return {\n            display_name: localize('Create list from text'),\n            description: localize(\n                'This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('mode', this.getFieldValue('MODE'));\n        return container;\n    },\n    domToMutation(xmlElement) {\n        this.updateType(xmlElement.getAttribute('mode'));\n    },\n    updateType(newMode) {\n        const delimInput = this.getInput('DELIM');\n        const spaceField = this.getField('SPACE1');\n\n        if (newMode === 'SPLIT') {\n            this.outputConnection.setCheck('Array');\n            this.getInput('INPUT').setCheck('String');\n\n            // Create extra spacing for OUTPUT_SHAPE_SQUARE (i.e. string shapes)\n            if (!spaceField) {\n                delimInput.insertFieldAt(0, '', 'SPACE1');\n            }\n        } else {\n            this.outputConnection.setCheck('String');\n            this.getInput('INPUT').setCheck(null);\n\n            if (spaceField) {\n                delimInput.removeField('SPACE1');\n            }\n        }\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_split = block => {\n    const input = Blockly.JavaScript.valueToCode(block, 'INPUT', Blockly.JavaScript.ORDER_MEMBER);\n    const delimiter = Blockly.JavaScript.valueToCode(block, 'DELIM', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    const mode = block.getFieldValue('MODE');\n\n    let code;\n\n    if (mode === 'SPLIT') {\n        code = `${input || \"''\"}.split(${delimiter})`;\n    } else if (mode === 'JOIN') {\n        code = `${input || '[]'}.join(${delimiter})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_sort = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('sort {{ sort_type }} {{ sort_direction }} {{ input_list }}', {\n                sort_type: '%1',\n                sort_direction: '%2',\n                input_list: '%3',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TYPE',\n                    options: [\n                        [localize('numeric'), 'NUMERIC'],\n                        [localize('alphabetic'), 'TEXT'],\n                    ],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'DIRECTION',\n                    options: [\n                        [localize('ascending'), '1'],\n                        [localize('descending'), '-1'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Sorts the items in a given list'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Sort list'),\n            description: localize(\n                'Sorts the items in a given list, by their numeric or alphabetical value, in either ascending or descending order.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            LIST: null,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_sort = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_FUNCTION_CALL) || '[]';\n    const direction = block.getFieldValue('DIRECTION') === '1' ? 1 : -1;\n    const type = block.getFieldValue('TYPE');\n    // eslint-disable-next-line no-underscore-dangle\n    const getCompareFunctionName = Blockly.JavaScript.provideFunction_('listsGetSortCompare', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {\n            var compareFuncs = {\n                NUMERIC: function(a, b) {\n                    return parseFloat(a) - parseFloat(b);\n                },\n                TEXT: function(a, b) {\n                    return a.toString() > b.toString() ? 1 : -1;\n                }\n            };\n\n            return function(a, b) {\n                return compareFuncs[type](a, b) * direction; \n            }\n        }`,\n    ]);\n\n    const code = `${list}.sort().slice(0).sort(${getCompareFunctionName}(\"${type}\", ${direction}))`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { minusIconDark } from '../../images';\nimport { runIrreversibleEvents, runGroupedEvents } from '../../../utils';\n\nBlockly.Blocks.lists_statement = {\n    required_parent_type: 'lists_create_with',\n    init() {\n        this.required_parent_id = '';\n        const field_image = new Blockly.FieldImage(minusIconDark, 25, 25, '', () => this.onIconClick());\n        this.jsonInit(this.definition());\n        this.appendDummyInput('REMOVE_ICON').appendField(field_image);\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('List Statement'),\n            description: '',\n        };\n    },\n    onIconClick() {\n        if (this.workspace.options.readOnly || this.isInFlyout) {\n            return;\n        }\n\n        runGroupedEvents(false, () => {\n            this.unplug(true);\n            this.dispose();\n        });\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            const surround_parent = this.getSurroundParent();\n\n            if (!surround_parent) {\n                runIrreversibleEvents(() => {\n                    this.dispose();\n                });\n            } else if (!this.required_parent_id && surround_parent.type === this.required_parent_type) {\n                // Create connection between parent and orphaned child.\n                this.required_parent_id = surround_parent.id;\n            } else if (surround_parent.id !== this.required_parent_id) {\n                // Someone pretending to be this child's parent. Find original parent and reconnect.\n                // Happens when someone tries to connect a statement block and Blockly automagically\n                // reconnects the children to this foreign statement block.\n                const all_blocks = this.workspace.getAllBlocks();\n                const original_parent = all_blocks.find(block => block.id === this.required_parent_id);\n\n                if (original_parent) {\n                    const last_connection = original_parent.getLastConnectionInStatement('STACK');\n\n                    runIrreversibleEvents(() => {\n                        last_connection.connect(this.previousConnection);\n                    });\n                } else {\n                    // Dispose child if it became a child of an illegal parent and original parent\n                    // is nowhere to be found.\n                    runIrreversibleEvents(() => {\n                        this.dispose(/* healStack */ true);\n                    });\n                }\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.lists_statement = block => {\n    const code = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_ATOMIC) || 'null';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_repeat_ext = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('repeat {{ number }} times', { number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TIMES',\n                    check: 'Number',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Repeats inside instructions specified number of times'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat (2)'),\n            description: localize(\n                'This block is similar to the block above, except that the number of times it repeats is determined by a given variable.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TIMES: null,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_repeat_ext = block => {\n    let repeats;\n    if (block.getField('TIMES')) {\n        repeats = String(Number(block.getFieldValue('TIMES')));\n    } else {\n        repeats = Blockly.JavaScript.valueToCode(block, 'TIMES', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n    }\n\n    const branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    let code = '';\n\n    // eslint-disable-next-line no-underscore-dangle\n    const loopVar = Blockly.JavaScript.variableDB_.getDistinctName('count', Blockly.Variables.NAME_TYPE);\n    let endVar = repeats;\n\n    if (!repeats.match(/^\\w+$/) && !Blockly.isNumber(repeats)) {\n        // eslint-disable-next-line no-underscore-dangle\n        endVar = Blockly.JavaScript.variableDB_.getDistinctName('repeat_end', Blockly.Variables.NAME_TYPE);\n        code += `var ${endVar} = ${repeats};\\n`;\n    }\n\n    code += `\n    for (var ${loopVar} = 0; ${loopVar} < ${endVar}; ${loopVar}++) {\n        ${branch}\n    }\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_repeat = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            type: 'controls_repeat',\n            message0: localize('repeat {{ number }} times', { number: '%1' }),\n            args0: [\n                {\n                    type: 'field_number',\n                    name: 'TIMES',\n                    value: 10,\n                    min: 0,\n                    precision: 1,\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Repeats inside instructions specified number of times'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat (1)'),\n            description: localize(\n                'This block repeats the instructions contained within for a specific number of times.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_repeat = Blockly.JavaScript.controls_repeat_ext;\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_whileUntil = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('repeat {{ while_or_until }} {{ boolean }}', { while_or_until: '%1', boolean: '%2' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MODE',\n                    options: [\n                        [localize('while'), 'WHILE'],\n                        [localize('until'), 'UNTIL'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'BOOL',\n                    check: 'Boolean',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('This block repeats instructions as long as a given condition is true'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat While/Until'),\n            description: localize('This block repeats instructions as long as a given condition is true.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            BOOL: null,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_whileUntil = block => {\n    const branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    const until = block.getFieldValue('MODE') === 'UNTIL';\n    const order = until ? Blockly.JavaScript.ORDER_LOGICAL_NOT : Blockly.JavaScript.ORDER_NONE;\n    let argument0 = Blockly.JavaScript.valueToCode(block, 'BOOL', order) || 'false';\n\n    if (until) {\n        argument0 = `!${argument0}`;\n    }\n\n    // eslint-disable-next-line no-underscore-dangle\n    const maxLoopVar = Blockly.JavaScript.variableDB_.getDistinctName('maxLoops', Blockly.Variables.NAME_TYPE);\n    // eslint-disable-next-line no-underscore-dangle\n    const currentLoopVar = Blockly.JavaScript.variableDB_.getDistinctName('currentLoop', Blockly.Variables.NAME_TYPE);\n\n    return `\n        var ${maxLoopVar} = 10000;\n        var ${currentLoopVar} = 0;\n\n        while (${argument0}) {\n            if (${currentLoopVar} > ${maxLoopVar}) {\n                throw new Error(\"${localize('Infinite loop detected')}\");\n            } else {\n                ${currentLoopVar}++;\n            }\n            \n            ${branch}\n        }\\n`;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_for = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'count with {{ variable }} from {{ start_number }} to {{ end_number }} by {{ step_size }}',\n                {\n                    variable: '%1',\n                    start_number: '%2',\n                    end_number: '%3',\n                    step_size: '%4',\n                }\n            ),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: null,\n                },\n                {\n                    type: 'input_value',\n                    name: 'FROM',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TO',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'BY',\n                    check: 'Number',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list.'\n            ),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Iterate (1)'),\n            description: localize(\n                'This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            FROM: null,\n            TO: null,\n            BY: null,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_for = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const variable0 = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'FROM', Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'TO', Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n    const increment = Blockly.JavaScript.valueToCode(block, 'BY', Blockly.JavaScript.ORDER_ASSIGNMENT) || '1';\n\n    let branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    branch = Blockly.JavaScript.addLoopTrap(branch, block.id);\n\n    let code = '';\n\n    if (Blockly.isNumber(argument0) && Blockly.isNumber(argument1) && Blockly.isNumber(increment)) {\n        const up = parseFloat(argument0) <= parseFloat(argument1);\n        const operator = up ? '<=' : '>=';\n        const step = Math.abs(parseFloat(increment));\n\n        const assignment = `${variable0} = ${argument0}`;\n        const condition = `${variable0} ${operator} ${argument1}`;\n        const statement = `${variable0} ${up ? '+=' : '-='} ${step}`;\n\n        code = `\n        for (${assignment}; ${condition}; ${statement}) {\n            ${branch}\n        }\\n`;\n    } else {\n        // Cache non-trivial values to variables to prevent repeated look-ups.\n        let startVar = argument0;\n        if (!argument0.match(/^\\w+$/) && !Blockly.isNumber(argument0)) {\n            // eslint-disable-next-line no-underscore-dangle\n            startVar = Blockly.JavaScript.variableDB_.getDistinctName(\n                `${variable0}_start`,\n                Blockly.Variables.NAME_TYPE\n            );\n            code = `var ${startVar} = ${argument0};\\n`;\n        }\n\n        let endVar = argument1;\n        if (!argument1.match(/^\\w+$/) && !Blockly.isNumber(argument1)) {\n            // eslint-disable-next-line no-underscore-dangle\n            endVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_end`, Blockly.Variables.NAME_TYPE);\n            code += `var ${endVar} = ${argument1};\\n`;\n        }\n\n        // Determine loop direction at start, in case one of the bounds changes during loop execution.\n        // eslint-disable-next-line no-underscore-dangle\n        const incVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_inc`, Blockly.Variables.NAME_TYPE);\n        const incVal = Blockly.isNumber(increment) ? Math.abs(increment) : `Math.abs(${increment})`;\n\n        code += `\n        var ${incVar} = ${incVal};\n        if (${startVar} > ${endVar}) {\n            ${incVar} = -${incVar};\n        }\n        for (\n           ${variable0} = ${startVar}; \n           ${incVar} >= 0 ? ${variable0} <= ${endVar} : ${variable0} >= ${endVar};\n           ${variable0} += ${incVar}\n        ) {\n            ${branch};\n        }\\n`;\n    }\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_forEach = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('for each item {{ variable }} in list {{ input_list }}', {\n                variable: '%1',\n                input_list: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: null,\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                    check: 'Array',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Iterates through a given list'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Iterate (2)'),\n            description: localize(\n                'This block uses the variable \"i\" to control the iterations. With each iteration, the value of \"i\" is determined by the items in a given list.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            LIST: null,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_forEach = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const variable0 = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_ASSIGNMENT) || '[]';\n\n    let branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    branch = Blockly.JavaScript.addLoopTrap(branch, block.id);\n\n    let code = '';\n\n    // Cache non-trivial values to variables to prevent repeated look-ups.\n    let listVar = argument0;\n    if (!argument0.match(/^\\w+$/)) {\n        // eslint-disable-next-line no-underscore-dangle\n        listVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_list`, Blockly.Variables.NAME_TYPE);\n        code = `var ${listVar} = ${argument0};\\n`;\n    }\n\n    // eslint-disable-next-line no-underscore-dangle\n    const indexVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_list`, Blockly.Variables.NAME_TYPE);\n\n    code += `\n    for (var ${indexVar} in ${listVar}) {\n        ${variable0} = ${listVar}[${indexVar}];\n        ${branch}\n    }\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_flow_statements = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('{{ break_or_continue }} of loop', { break_or_continue: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'FLOW',\n                    options: [\n                        [localize('break out'), 'BREAK'],\n                        [localize('continue with next iteration'), 'CONTINUE'],\n                    ],\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.'\n            ),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Break out/continue'),\n            description: localize(\n                'This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_flow_statements = block => {\n    const keyword = block.getFieldValue('FLOW') === 'BREAK' ? 'break' : 'continue';\n    return `${keyword};\\n`;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.variables_get = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            type: 'variables_get',\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('item'),\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Gets variable value'),\n            category: Blockly.Categories.Variables,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('User-defined variable'),\n            description: '',\n        };\n    },\n    onchange(event) {\n        if (event.type === Blockly.Events.VAR_RENAME) {\n            const all_blocks = this.workspace.getAllBlocks();\n            const function_blocks = all_blocks.filter(block => block.category_ === 'custom_functions');\n            const old_param = event.oldName;\n            const new_param = event.newName;\n            function_blocks.forEach(block => {\n                if (block.arguments?.length) {\n                    const param_index = block.arguments.findIndex(item => item === old_param);\n                    if (param_index !== -1) {\n                        block.arguments[param_index] = new_param;\n                        const param_field = block.getField('PARAMS');\n                        if (param_field) {\n                            block.setFieldValue(`${localize('with: ')} ${block.arguments.join(', ')}`, 'PARAMS');\n                        }\n                        const with_field = block.getField('WITH');\n                        if (with_field) {\n                            block.updateShape();\n                        }\n                    }\n                }\n            });\n        }\n    },\n};\n\nBlockly.JavaScript.variables_get = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.variables_set = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            type: 'field_variable',\n            message0: localize('set {{ variable }} to {{ value }}', {\n                variable: '%1',\n                value: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('item'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Sets variable value'),\n            category: Blockly.Categories.Variables,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Set variable'),\n            description: localize('Assigns a given value to a variable'),\n        };\n    },\n};\n\nBlockly.JavaScript.variables_set = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n\n    const code = `${varName} = ${argument0};\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { finishSign } from '../../images';\n\nBlockly.Blocks.after_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: finishSign,\n                    width: 25,\n                    height: 25,\n                    alt: 'F',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('4. Restart trading conditions'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'AFTERPURCHASE_STACK',\n                    check: 'TradeAgain',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Get the last trade information and result, then trade again.'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Restart trading conditions'),\n            description: localize('Here is where you can decide if your bot should continue trading.'),\n        };\n    },\n};\n\nBlockly.JavaScript.after_purchase = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'AFTERPURCHASE_STACK');\n    const code = `\n    BinaryBotPrivateAfterPurchase = function BinaryBotPrivateAfterPurchase() {\n        Bot.highlightBlock('${block.id}');\n        ${stack}\n        Bot.isTradeAgain(false);\n        return false;\n    };`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.contract_check_result = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Result is {{ win_or_loss }}', { win_or_loss: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CHECK_RESULT',\n                    options: config.lists.CHECK_RESULT,\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('True if the result of the last trade matches the selection'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last trade result'),\n            description: localize('You can check the result of the last trade with this block.'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            const top_parent = this.getTopParent();\n\n            if (top_parent) {\n                const is_illegal_root_block = top_parent.isMainBlock() && top_parent.type !== 'after_purchase';\n\n                if (is_illegal_root_block) {\n                    this.setDisabled(true);\n                }\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.contract_check_result = block => {\n    const checkWith = block.getFieldValue('CHECK_RESULT');\n\n    const code = `Bot.isResult('${checkWith}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.read_details = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Contract Details: {{ contract_detail }}', { contract_detail: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'DETAIL_INDEX',\n                    options: config.lists.DETAILS,\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND, // TODO: Investigate why block glitches in square shape.\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Reads a selected property from contract details list'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Contract details'),\n            description: localize('This block gives you information about your last contract.'),\n        };\n    },\n    restricted_parents: ['after_purchase'],\n};\n\nBlockly.JavaScript.read_details = block => {\n    const detailIndex = block.getFieldValue('DETAIL_INDEX');\n\n    const code = `Bot.readDetails(${detailIndex})`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.trade_again = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Trade again'),\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            tooltip: localize('These blocks transfer control to the Purchase conditions block.'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trade again'),\n            description: localize(\n                'This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract.'\n            ),\n            key_words: localize('restart'),\n        };\n    },\n    restricted_parents: ['after_purchase'],\n};\n\nBlockly.JavaScript.trade_again = () => {\n    const code = `\n        Bot.isTradeAgain(true);\\n\n        return true;\\n\n    `;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { purchase } from '../../images';\n\nBlockly.Blocks.before_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n        this.setDeletable(false);\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: purchase,\n                    width: 25,\n                    height: 25,\n                    alt: 'P',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('2. Purchase conditions'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'BEFOREPURCHASE_STACK',\n                    check: 'Purchase',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Specify contract type and purchase conditions.'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Purchase conditions'),\n            description: localize(\n                'This block is mandatory. Only one copy of this block is allowed. You can place the Purchase block (see below) here as well as conditional blocks to define your purchase conditions.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.before_purchase = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'BEFOREPURCHASE_STACK');\n\n    const code = `BinaryBotPrivateBeforePurchase = function BinaryBotPrivateBeforePurchase() {\n        Bot.highlightBlock('${block.id}');\n        ${stack}\n    };\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { getContractTypeOptions } from '../../../shared';\n\nBlockly.Blocks.purchase = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Purchase {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'PURCHASE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            previousStatement: null,\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            tooltip: localize('This block purchases contract of a specified type.'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Purchase'),\n            description: localize(\n                'Use this block to purchase the specific contract you want. You may add multiple Purchase blocks together with conditional blocks to define your purchase conditions. This block can only be used within the Purchase conditions block.'\n            ),\n            key_words: localize('buy'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            this.populatePurchaseList(event);\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (event.name === 'TYPE_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.populatePurchaseList(event);\n            }\n        } else if (event.type === Blockly.Events.END_DRAG && event.blockId === this.id) {\n            const purchase_type_list = this.getField('PURCHASE_LIST');\n            const purchase_options = purchase_type_list.menuGenerator_; // eslint-disable-line\n\n            if (purchase_options[0][0] === '') {\n                this.populatePurchaseList(event);\n            }\n        }\n    },\n    populatePurchaseList(event) {\n        const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n\n        if (trade_definition_block) {\n            const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n            const trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n            const contract_type_block = trade_definition_block.getChildByType('trade_definition_contracttype');\n            const contract_type = contract_type_block.getFieldValue('TYPE_LIST');\n            const purchase_type_list = this.getField('PURCHASE_LIST');\n            const purchase_type = purchase_type_list.getValue();\n            const contract_type_options = getContractTypeOptions(contract_type, trade_type);\n\n            purchase_type_list.updateOptions(contract_type_options, {\n                default_value: purchase_type,\n                event_group: event.group,\n                should_pretend_empty: true,\n            });\n        }\n    },\n    restricted_parents: ['before_purchase'],\n};\n\nBlockly.JavaScript.purchase = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.purchase('${purchaseList}');\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.ask_price = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Ask Price {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'PURCHASE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block returns the purchase price for the selected trade type.'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Purchase price'),\n            description: localize(\n                'This block returns the purchase price for the selected trade type. This block can be used only in the \"Purchase conditions\" root block.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.purchase.onchange,\n    populatePurchaseList: Blockly.Blocks.purchase.populatePurchaseList,\n    enforceLimitations: Blockly.Blocks.purchase.enforceLimitations,\n};\n\nBlockly.JavaScript.ask_price = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.getAskPrice('${purchaseList}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.payout = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Payout {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'PURCHASE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block returns the potential payout for the selected trade type'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Potential payout'),\n            description: localize(\n                'This block returns the potential payout for the selected trade type. This block can be used only in the \"Purchase conditions\" root block.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.purchase.onchange,\n    populatePurchaseList: Blockly.Blocks.purchase.populatePurchaseList,\n    enforceLimitations: Blockly.Blocks.purchase.enforceLimitations,\n};\n\nBlockly.JavaScript.payout = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.getPayout('${purchaseList}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { sellContract } from '../../images';\n\nBlockly.Blocks.during_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: sellContract,\n                    width: 25,\n                    height: 25,\n                    alt: 'S',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('3. Sell conditions'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DURING_PURCHASE_STACK',\n                    check: 'SellAtMarket',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Sell your active contract if needed (optional)'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Sell conditions'),\n            description: localize(\n                'Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.during_purchase = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'DURING_PURCHASE_STACK');\n\n    const code = `BinaryBotPrivateDuringPurchase = function BinaryBotPrivateDuringPurchase() {\n        Bot.highlightBlock('${block.id}');\n        ${stack}\n    };\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.sell_at_market = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Sell at market price'),\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Use this block to sell your contract at the market price.'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Sell at market price'),\n            description: localize('Use this block to sell your contract at the market price.'),\n        };\n    },\n    restricted_parents: ['during_purchase'],\n};\n\nBlockly.JavaScript.sell_at_market = () => 'Bot.sellAtMarket();\\n';\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.check_sell = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Sell is available'),\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('True if active contract can be sold before expiration at current market price'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Can contract be sold?'),\n            description: localize(\n                'This block helps you check if your contract can be sold. If your contract can be sold, it returns “True”. Otherwise, it returns an empty string.'\n            ),\n        };\n    },\n    restricted_parents: ['during_purchase'],\n};\n\nBlockly.JavaScript.check_sell = () => {\n    const code = 'Bot.isSellAvailable()';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.sell_price = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Sell profit/loss'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the profit/loss from selling at market price'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Profit/loss from selling'),\n            description: localize(\n                'This block gives you the potential profit or loss if you decide to sell your contract.'\n            ),\n        };\n    },\n    restricted_parents: ['during_purchase'],\n};\n\nBlockly.JavaScript.sell_price = () => {\n    const code = 'Bot.getSellPrice()';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.bb_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period', 'std_dev_multiplier_up', 'std_dev_multiplier_down'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Bollinger Bands {{ band_type }} {{ dummy }}', {\n                variable: '%1',\n                band_type: '%2',\n                dummy: '%3',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'bb',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'BBRESULT_LIST',\n                    options: config.bbResult,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Bollinger Bands (BB) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Bollinger Bands (BB)'),\n            description: localize(\n                'BB is a technical analysis indicator that’s commonly used by traders. The idea behind BB is that the market price stays within the upper and lower bands for 95% of the time. The bands are the standard deviations of the market price, while the line in the middle is a simple moving average line. If the price reaches either the upper or lower band, there’s a possibility of a trend reversal.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            const blocksInStatement = this.getBlocksInStatement('STATEMENT');\n            blocksInStatement.forEach(block => {\n                if (!this.required_child_blocks.includes(block.type)) {\n                    Blockly.Events.disable();\n                    block.unplug(false);\n                    Blockly.Events.enable();\n                }\n            });\n        }\n    },\n};\n\nBlockly.JavaScript.bb_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const bb_result = block.getFieldValue('BBRESULT_LIST');\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const std_dev_up = block.childValueToCode('std_dev_multiplier_up', 'UPMULTIPLIER');\n    const std_dev_down = block.childValueToCode('std_dev_multiplier_down', 'DOWNMULTIPLIER');\n    const code = `${var_name} = Bot.bb(${input}, { \n        periods: ${period}, \n        stdDevUp: ${std_dev_up}, \n        stdDevDown: ${std_dev_down} \n    }, ${bb_result});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.bba_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period', 'std_dev_multiplier_up', 'std_dev_multiplier_down'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Bollinger Bands Array {{ band_type }} {{ dummy }}', {\n                variable: '%1',\n                band_type: '%2',\n                dummy: '%3',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'bba',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'BBRESULT_LIST',\n                    options: config.bbResult,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Bollinger Bands (BB) list from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Bollinger Bands Array (BBA)'),\n            description: localize(\n                'Similar to BB. This block gives you a choice of returning the values of either the lower band, higher band, or the SMA line in the middle.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.bba_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const bb_result = block.getFieldValue('BBRESULT_LIST');\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const std_dev_up = block.childValueToCode('std_dev_multiplier_up', 'UPMULTIPLIER');\n    const std_dev_down = block.childValueToCode('std_dev_multiplier_down', 'DOWNMULTIPLIER');\n    const code = `${var_name} = Bot.bba(${input}, { \n        periods: ${period}, \n        stdDevUp: ${std_dev_up}, \n        stdDevDown: ${std_dev_down} \n    }, ${bb_result});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.ema_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Exponential Moving Average {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'ema',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Exponential Moving Average (EMA) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Exponential Moving Average (EMA)'),\n            description: localize(\n                'EMA is a type of moving average that places more significance on the most recent data points. It’s also known as the exponentially weighted moving average. EMA is different from SMA in that it reacts more significantly to recent price changes.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.ema_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.ema(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.emaa_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Exponential Moving Average Array {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'emaa',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Exponential Moving Average (EMA) list from a list of values with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Exponential Moving Average Array (EMAA)'),\n            description: localize(\n                'This block is similar to EMA, except that it gives you the entire EMA line based on the input list and the given period.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.emaa_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.emaa(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.rsi_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Relative Strength Index {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'rsi',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Relative Strength Index (RSI) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Relative Strength Index (RSI)'),\n            description: localize(\n                'RSI is a technical analysis tool that helps you identify the market trend. It will give you a value from 0 to 100. An RSI value of 70 and above means that the asset is overbought and the current trend may reverse, while a value of 30 and below means that the asset is oversold.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.rsi_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.rsi(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.rsia_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Relative Strength Index Array {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'rsia',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Relative Strength Index (RSI) list from a list of values with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Relative Strength Index Array (RSIA)'),\n            description: localize(\n                'Similar to RSI, this block gives you a list of values for each entry in the input list.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.rsia_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.rsia(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.sma_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Simple Moving Average {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'sma',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Simple Moving Average (SMA) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Simple Moving Average (SMA)'),\n            description: localize(\n                'SMA is a frequently used indicator in technical analysis. It calculates the average market price over a specified period, and is usually used to identify market trend direction: up or down. For example, if the SMA is moving upwards, it means the market trend is up. '\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.sma_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.sma(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.smaa_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Simple Moving Average Array {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'smaa',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Simple Moving Average line from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Simple Moving Average Array (SMAA)'),\n            description: localize(\n                'Similar to SMA, this block gives you the entire SMA line containing a list of all values for a given period.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.smaa_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.smaa(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.macda_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'fast_ema_period', 'slow_ema_period', 'signal_ema_period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to MACD Array {{ dropdown }} {{ dummy }}', {\n                variable: '%1',\n                dropdown: '%2',\n                dummy: '%3',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'macda',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'MACDFIELDS_LIST',\n                    options: config.macdFields,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Moving Average Convergence Divergence (MACD) from a list'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Moving Average Convergence Divergence'),\n            description: localize(\n                'MACD is calculated by subtracting the long-term EMA (26 periods) from the short-term EMA (12 periods). If the short-term EMA is greater or lower than the long-term EMA than there’s a possibility of a trend reversal.'\n            ),\n        };\n    },\n\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.macda_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const macd_field = block.getFieldValue('MACDFIELDS_LIST');\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const fast_ema_period = block.childValueToCode('fast_ema_period', 'FAST_EMA_PERIOD');\n    const slow_ema_period = block.childValueToCode('slow_ema_period', 'SLOW_EMA_PERIOD');\n    const signal_ema_period = block.childValueToCode('signal_ema_period', 'SIGNAL_EMA_PERIOD');\n    const code = `${var_name} = Bot.macda(${input}, { \n        fastEmaPeriod: ${fast_ema_period},\n        slowEmaPeriod: ${slow_ema_period},\n        signalEmaPeriod: ${signal_ema_period},\n    }, ${macd_field});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { runIrreversibleEvents } from '../../../../utils';\n\nBlockly.Blocks.input_list = {\n    init() {\n        this.jsonInit({\n            message0: localize('Input List {{ input_list }}', { input_list: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'INPUT_LIST',\n                    check: 'Array',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        const setParentId = () => {\n            const surround_parent = this.getSurroundParent();\n            if (surround_parent && !this.required_parent_id && this.allowed_parents.includes(surround_parent.type)) {\n                this.required_parent_id = surround_parent.id;\n            }\n        };\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            setParentId();\n        } else if (event.type === Blockly.Events.END_DRAG) {\n            setParentId();\n\n            const surround_parent = this.getSurroundParent();\n            const has_parent = !!surround_parent;\n            const is_illegal_parent = !has_parent || surround_parent.id !== this.required_parent_id;\n\n            if (!has_parent || is_illegal_parent) {\n                runIrreversibleEvents(() => {\n                    this.unplug(true);\n\n                    // Attempt to re-connect this child to its original parent.\n                    const all_blocks = this.workspace.getAllBlocks();\n                    const parent_block = all_blocks.find(block => block.id === this.required_parent_id);\n\n                    if (parent_block) {\n                        const parent_connection = parent_block.getLastConnectionInStatement('STATEMENT');\n                        parent_connection.connect(this.previousConnection);\n                    } else {\n                        this.dispose();\n                    }\n                });\n            }\n        }\n    },\n    allowed_parents: [\n        'bb_statement',\n        'bba_statement',\n        'ema_statement',\n        'emaa_statement',\n        'macda_statement',\n        'rsi_statement',\n        'rsia_statement',\n        'sma_statement',\n        'smaa_statement',\n    ],\n    getRequiredValueInputs() {\n        return {\n            INPUT_LIST: null,\n        };\n    },\n};\n\nBlockly.JavaScript.input_list = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Period {{ input_period }}', { input_period: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: [\n        'bb_statement',\n        'bba_statement',\n        'ema_statement',\n        'emaa_statement',\n        'macda_statement',\n        'rsi_statement',\n        'rsia_statement',\n        'sma_statement',\n        'smaa_statement',\n    ],\n    getRequiredValueInputs() {\n        return {\n            PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.period = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.std_dev_multiplier_up = {\n    init() {\n        this.jsonInit({\n            message0: localize('Standard Deviation Up Multiplier {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'UPMULTIPLIER',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['bb_statement', 'bba_statement'],\n    getRequiredValueInputs() {\n        return {\n            UPMULTIPLIER: null,\n        };\n    },\n};\n\nBlockly.JavaScript.std_dev_multiplier_up = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.std_dev_multiplier_down = {\n    init() {\n        this.jsonInit({\n            message0: localize('Standard Deviation Down Multiplier {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'DOWNMULTIPLIER',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['bb_statement', 'bba_statement'],\n    getRequiredValueInputs() {\n        return {\n            DOWNMULTIPLIER: null,\n        };\n    },\n};\n\nBlockly.JavaScript.std_dev_multiplier_down = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.fast_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Fast EMA Period {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'FAST_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['macda_statement'],\n    getRequiredValueInputs() {\n        return {\n            FAST_EMA_PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.fast_ema_period = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.slow_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Slow EMA Period {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'SLOW_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['macda_statement'],\n    getRequiredValueInputs() {\n        return {\n            SLOW_EMA_PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.slow_ema_period = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.signal_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Signal EMA Period {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'SIGNAL_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['macda_statement'],\n    getRequiredValueInputs() {\n        return {\n            SIGNAL_EMA_PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.signal_ema_period = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.tick = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last Tick'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the value of the last tick'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last tick'),\n            description: localize('This block gives you the value of the last tick.'),\n        };\n    },\n};\n\nBlockly.Blocks.tick_string = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last Tick String'),\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the value of the latest tick in string format'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick value'),\n            description: localize('Tick value Description'),\n        };\n    },\n    onchange: Blockly.Blocks.tick.onchange,\n};\n\nBlockly.JavaScript.tick = block => {\n    const parent = block.getParent();\n    const type_list = ['notify', 'text_print'];\n    return [`Bot.getLastTick(false, ${type_list.includes(parent?.type)})`, Blockly.JavaScript.ORDER_ATOMIC];\n};\nBlockly.JavaScript.tick_string = () => ['Bot.getLastTick(false, true)', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.ticks = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Ticks list'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a list of the last 1000 tick values.'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick list'),\n            description: localize('This block gives you a list of the last 1000 tick values.'),\n        };\n    },\n};\n\nBlockly.Blocks.ticks_string = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Ticks String List'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the list of tick values in string format'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick List String'),\n            description: localize('Tick List String Description'),\n        };\n    },\n    onchange: Blockly.Blocks.ticks.onchange,\n};\n\nBlockly.JavaScript.ticks = block => {\n    const parent = block.getParent();\n    const type_list = ['notify', 'text_print'];\n    return [`Bot.getTicks(${type_list.includes(parent?.type)})`, Blockly.JavaScript.ORDER_ATOMIC];\n};\nBlockly.JavaScript.ticks_string = () => ['Bot.getTicks(true)', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Candles List'),\n            message1: localize('with interval: {{ candle_interval_type }}', { candle_interval_type: '%1' }),\n            args1: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a list of candles within a selected time interval.'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get candle list'),\n            description: localize('This block gives you a list of candles within a selected time interval.'),\n        };\n    },\n};\n\nBlockly.JavaScript.ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n\n    const code = `Bot.getOhlc({ granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.ohlc_values = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'Make a List of {{ candle_property }} values in candles list with interval: {{ candle_interval_type }}',\n                {\n                    candle_property: '%1',\n                    candle_interval_type: '%2',\n                }\n            ),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'Returns a list of specific values from a candle list according to selected time interval'\n            ),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Create a list of candle values (1)'),\n            description: localize(\n                'This block gives you the selected candle value from a list of candles within the selected time interval.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.ohlc_values = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n\n    const code = `Bot.getOhlc({ field: '${ohlcField}', granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.read_ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('In candles list read {{ candle_property }} # from end {{ input_number }}', {\n                candle_property: '%1',\n                input_number: '%2',\n            }),\n            message1: localize('with interval: %1'),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'CANDLEINDEX',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Read the selected candle value'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Read candle value (1)'),\n            description: localize('This block gives you the specified candle value for a selected time interval.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            CANDLEINDEX: null,\n        };\n    },\n};\n\nBlockly.JavaScript.read_ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n    const index = Blockly.JavaScript.valueToCode(block, 'CANDLEINDEX', Blockly.JavaScript.ORDER_ATOMIC) || '1';\n\n    const code = `Bot.getOhlcFromEnd({ field: '${ohlcField}', index: ${index}, granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.get_ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('in candle list get # from end {{ input_number }}', { input_number: '%1' }),\n            message1: localize('with interval: {{ candle_interval_type }}', { candle_interval_type: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'CANDLEINDEX',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Candle',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a specific candle from within the selected time interval.'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get candle'),\n            description: localize('This block gives you a specific candle from within the selected time interval.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            CANDLEINDEX: null,\n        };\n    },\n};\n\nBlockly.JavaScript.get_ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const index = Blockly.JavaScript.valueToCode(block, 'CANDLEINDEX', Blockly.JavaScript.ORDER_ATOMIC) || '1';\n\n    const code = `Bot.getOhlcFromEnd({ index: ${index}, granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.check_direction = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Direction is {{ direction_type }}', { direction_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CHECK_DIRECTION',\n                    options: config.lists.CHECK_DIRECTION,\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('True if the market direction matches the selection'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Market direction'),\n            description: localize(\n                'This block is used to determine if the market price moves in the selected direction or not. It gives you a value of “True” or “False”.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.check_direction = block => {\n    const checkWith = block.getFieldValue('CHECK_DIRECTION');\n\n    const code = `Bot.checkDirection('${checkWith}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.tick_analysis = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'field_label',\n                    text: localize('The content of this block is called on every tick'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'TICKANALYSIS_STACK',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('You can use this block to analyze the ticks, regardless of your trades'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Run on every tick'),\n            description: localize(\n                'The content of this block is called on every tick. Place this block outside of any root block.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.tick_analysis = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'TICKANALYSIS_STACK') || '';\n    const code = `\n    BinaryBotPrivateTickAnalysisList.push(function BinaryBotPrivateTickAnalysis() {\n        ${stack}\n    });\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.last_digit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last Digit'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the last digit of the latest tick'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last Digit'),\n            description: localize('This block gives you the last digit of the latest tick value.'),\n        };\n    },\n};\n\nBlockly.JavaScript.last_digit = () => ['Bot.getLastDigit()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lastDigitList = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last digits list'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the list of last digits of 1000 recent tick values'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last Digits List'),\n            description: localize('This block gives you a list of the last digits of the last 1000 tick values.'),\n        };\n    },\n};\n\nBlockly.JavaScript.lastDigitList = () => ['Bot.getLastDigitList()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.is_candle_black = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Is candle {{ input_candle }} black?', { input_candle: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'OHLCOBJ',\n                    check: 'Candle',\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns \"True\" if the given candle is black'),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Is candle black?'),\n            description: localize(\n                'This block returns “True” if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            OHLCOBJ: null,\n        };\n    },\n};\n\nBlockly.JavaScript.is_candle_black = block => {\n    const ohlcObj = Blockly.JavaScript.valueToCode(block, 'OHLCOBJ', Blockly.JavaScript.ORDER_ATOMIC) || '{}';\n\n    const code = `Bot.isCandleBlack(${ohlcObj})`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\n\nBlockly.Blocks.ohlc_values_in_list = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Make a list of {{ candle_property }} values from candles list {{ candle_list }}', {\n                candle_property: '%1',\n                candle_list: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'OHLCLIST',\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns a list of specific values from a given candle list'),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Create a list of candle values (2)'),\n            description: localize('This block gives you the selected candle value from a list of candles.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            OHLCLIST: null,\n        };\n    },\n};\n\nBlockly.JavaScript.ohlc_values_in_list = block => {\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST') || 'open';\n    const ohlcList = Blockly.JavaScript.valueToCode(block, 'OHLCLIST', Blockly.JavaScript.ORDER_ATOMIC) || '[]';\n\n    const code = `Bot.candleValues(${ohlcList}, '${ohlcField}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\n\nBlockly.Blocks.read_ohlc_obj = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Read {{ candle_property }} value in candle {{ input_candle }}', {\n                candle_property: '%1',\n                input_candle: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'OHLCOBJ',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the selected candle value.'),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Read candle value (2)'),\n            description: localize('This block gives you the selected candle value.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            OHLCOBJ: null,\n        };\n    },\n};\n\nBlockly.JavaScript.read_ohlc_obj = block => {\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n    const ohlcObj = Blockly.JavaScript.valueToCode(block, 'OHLCOBJ', Blockly.JavaScript.ORDER_ATOMIC) || '{}';\n\n    const code = `Bot.candleField(${ohlcObj}, '${ohlcField}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\n\nBlockly.Blocks.balance = {\n    init() {\n        this.jsonInit(this.definition());\n        const balanceTypeField = this.getField('BALANCE_TYPE');\n        balanceTypeField.setValidator(value => {\n            if (value === 'STR') {\n                this.setOutput(true, 'String');\n            } else if (value === 'NUM') {\n                this.setOutput(true, 'Number');\n            }\n            this.initSvg();\n            this.render(false);\n            return undefined;\n        });\n    },\n    definition() {\n        return {\n            message0: localize('Balance: %1'),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'BALANCE_TYPE',\n                    options: config.lists.BALANCE_TYPE,\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block returns account balance'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Account balance'),\n            description: localize(\n                'This block gives you the balance of your account either as a number or a string of text.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.balance = block => {\n    const balanceType = block.getFieldValue('BALANCE_TYPE');\n\n    const code = `Bot.getBalance('${balanceType}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\n\n// This block is a remnant of a very old Binary Bot version.\n// needs to be here for backward compatibility.\nBlockly.Blocks.barrier_offset = {\n    init() {\n        this.jsonInit({\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'BARRIEROFFSET_IN',\n                    options: config.BARRIER_TYPES,\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Adds a sign to a number to create a barrier offset. (deprecated)'),\n            category: Blockly.Categories.Miscellaneous,\n        });\n    },\n};\n\nBlockly.JavaScript.barrier_offset = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.block_holder = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'field_label',\n                    text: 'Ignore',\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'USELESS_STACK',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Put your blocks in here to prevent them from being removed'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Ignore'),\n            description: localize(\n                'Use this block if you want some instructions to be ignored when your bot runs. Instructions within this block won’t be executed.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.block_holder = () => '';\n","import { localize } from '@deriv/translations';\nimport { loadBlocksFromRemote, runIrreversibleEvents } from '../../../../utils';\nimport { observer as globalObserver } from '../../../../../utils/observer';\nimport { log_types } from '../../../../../constants/messages';\n\nBlockly.Blocks.loader = {\n    init() {\n        this.blocks_added_by_me = [];\n        this.current_url = '';\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Load block from URL: {{ input_url }}', { input_url: '%1' }),\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'URL',\n                    text: 'http://www.example.com/block.xml',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Loads blocks from URL'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Loads from URL'),\n            description: localize(\n                'This block allows you to load blocks from a URL if you have them stored on a remote server, and they will be loaded only when your bot runs.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            this.current_url = this.getFieldValue('URL');\n            const loader_blocks = this.workspace.getAllBlocks().filter(block => block.type === 'loader');\n\n            loader_blocks.forEach(loader_block => {\n                if (loader_block.id !== this.id && loader_block.current_url === this.current_url) {\n                    this.setDisabled(true);\n                }\n            });\n\n            if (!this.disabled) {\n                this.loadBlocksFromCurrentUrl();\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.blockId === this.id) {\n            if (event.newValue && event.oldValue !== event.newValue) {\n                if (event.newValue === this.current_url) {\n                    this.setDisabled(false);\n                } else if (this.isValidUrl(event.newValue) && !this.isKnownUrl(event.newValue)) {\n                    this.setDisabled(false);\n                    this.loadBlocksFromCurrentUrl();\n                } else {\n                    this.setDisabled(true);\n                }\n            }\n        }\n    },\n    loadBlocksFromCurrentUrl() {\n        this.current_url = this.getFieldValue('URL');\n\n        runIrreversibleEvents(() => {\n            // Remove blocks previously loaded by this block.\n            this.blocks_added_by_me.forEach(block => block.dispose());\n        });\n\n        loadBlocksFromRemote(this)\n            .then(() => {\n                globalObserver.emit('ui.log.success', { log_type: log_types.LOAD_BLOCK });\n            })\n            .catch(error_msg => {\n                globalObserver.emit('ui.log.error', error_msg);\n                this.setDisabled(true);\n            });\n    },\n    isKnownUrl(url) {\n        const loader_blocks = this.workspace.getAllBlocks().filter(block => block.type === 'loader');\n        return loader_blocks.some(block => block.id !== this.id && block.current_url === url);\n    },\n    isValidUrl(url) {\n        const url_pattern = /[^/]*\\.[a-zA-Z]{3}$/;\n        return String(url).match(url_pattern);\n    },\n};\n\nBlockly.JavaScript.loader = () => {};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../../utils';\nimport { config } from '../../../../../constants/config';\n\nBlockly.Blocks.notify = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'Notify {{ notification_type }} with sound: {{ notification_sound }} {{ input_message }}',\n                {\n                    notification_type: '%1',\n                    notification_sound: '%2',\n                    input_message: '%3',\n                }\n            ),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'NOTIFICATION_TYPE',\n                    options: config.lists.NOTIFICATION_TYPE,\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'NOTIFICATION_SOUND',\n                    options: config.lists.NOTIFICATION_SOUND,\n                },\n                {\n                    type: 'input_value',\n                    name: 'MESSAGE',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Displays a notification and optionally play selected sound'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Notify'),\n            description: localize(\n                'This block displays a message. You can specify the color of the message and choose from 6 different sound options.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            MESSAGE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.notify = block => {\n    const notificationType = block.getFieldValue('NOTIFICATION_TYPE');\n    const sound = block.getFieldValue('NOTIFICATION_SOUND');\n    const message_block = block.getInputTargetBlock('MESSAGE');\n    let variable_name = null;\n\n    if (message_block.type === 'variables_get') {\n        const variable_id = message_block.getFieldValue('VAR');\n        variable_name = Blockly.derivWorkspace.getVariableById(variable_id).name;\n    }\n\n    const message =\n        Blockly.JavaScript.valueToCode(block, 'MESSAGE', Blockly.JavaScript.ORDER_ATOMIC) ||\n        `\"${localize('<empty message>')}\"`;\n\n    const code = `Bot.notify({ className: 'journal__text--${notificationType}', message: ${message}, sound: '${sound}', block_id: '${block.id}', variable_name: '${variable_name}' });\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../../utils';\n\nBlockly.Blocks.notify_telegram = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'Notify Telegram {{ dummy }} Access Token: {{ input_access_token }} Chat ID: {{ input_chat_id }} Message: {{ input_message }}',\n                {\n                    dummy: '%1',\n                    input_access_token: '%2',\n                    input_chat_id: '%3',\n                    input_message: '%4',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TELEGRAM_ACCESS_TOKEN',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TELEGRAM_CHAT_ID',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TELEGRAM_MESSAGE',\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Sends a message to Telegram'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Notify Telegram'),\n            description: localize('This block sends a message to a Telegram channel.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TELEGRAM_ACCESS_TOKEN: emptyTextValidator,\n            TELEGRAM_CHAT_ID: emptyTextValidator,\n            TELEGRAM_MESSAGE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.notify_telegram = block => {\n    const access_token =\n        Blockly.JavaScript.valueToCode(block, 'TELEGRAM_ACCESS_TOKEN', Blockly.JavaScript.ORDER_ATOMIC) || '';\n    const chat_id = Blockly.JavaScript.valueToCode(block, 'TELEGRAM_CHAT_ID', Blockly.JavaScript.ORDER_ATOMIC) || '';\n    const message = Blockly.JavaScript.valueToCode(block, 'TELEGRAM_MESSAGE', Blockly.JavaScript.ORDER_ATOMIC) || '';\n\n    if (!access_token || !chat_id || !message) {\n        return '';\n    }\n\n    const code = `Bot.notifyTelegram(${access_token}, ${chat_id}, ${message});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.total_profit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Total profit/loss'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the total profit/loss'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Total profit/loss'),\n            description: localize(\n                'This block gives you the total profit/loss of your trading strategy since your bot started running. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (\n            event.type === Blockly.Events.END_DRAG ||\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id))\n        ) {\n            const input_statement = this.getRootInputTargetBlock();\n\n            if (input_statement === 'INITIALIZATION') {\n                this.unplug(true);\n            }\n        }\n    },\n};\n\nBlockly.Blocks.total_profit_string = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Total Profit String'),\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the total profit in string format'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Total Profit String'),\n            description: localize('Total Profit String Description'),\n        };\n    },\n    onchange: Blockly.Blocks.total_profit.onchange,\n};\n\nBlockly.JavaScript.total_profit = () => ['Bot.getTotalProfit(false)', Blockly.JavaScript.ORDER_ATOMIC];\nBlockly.JavaScript.total_profit_string = () => ['Bot.getTotalProfit(true)', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.total_runs = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Number of runs'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the number of runs'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Number of runs'),\n            description: localize(\n                'This block gives you the total number of times your bot has run. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.total_profit.onchange,\n};\n\nBlockly.JavaScript.total_runs = () => ['Bot.getTotalRuns()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.useless_block = {\n    init() {\n        this.jsonInit({\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_label',\n                    text: localize('Conversion Helper Block'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('This block was required to correctly convert your old strategy.'),\n            category: Blockly.Categories.Miscellaneous,\n            nextStatement: null,\n            previousStatement: null,\n        });\n    },\n};\n\nBlockly.JavaScript.useless_block = () => {};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../../utils';\n\nBlockly.Blocks.console = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Console {{ message_type }} value: {{ input_message }}', {\n                message_type: '%1',\n                input_message: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CONSOLE_TYPE',\n                    options: [\n                        [localize('Log'), 'log'],\n                        [localize('Warn'), 'warn'],\n                        [localize('Error'), 'error'],\n                        [localize('Table'), 'table'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'MESSAGE',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Display messages in the developer’s console.'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Console'),\n            description: localize(\n                \"This block displays messages in the developer's console with an input that can be either a string of text, a number, boolean, or an array of data.\"\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            MESSAGE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.console = block => {\n    const console_type = block.getFieldValue('CONSOLE_TYPE') || 'log';\n    const message =\n        Blockly.JavaScript.valueToCode(block, 'MESSAGE', Blockly.JavaScript.ORDER_ATOMIC) ||\n        `\"${localize('<empty message>')}\"`;\n\n    const code = `Bot.console({ type: '${console_type}', message: ${message}});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.epoch = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Seconds Since Epoch'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the number of seconds since January 1st, 1970'),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Second Since Epoch'),\n            description: localize('This block returns the number of seconds since January 1st, 1970.'),\n        };\n    },\n};\n\nBlockly.JavaScript.epoch = () => ['Bot.getTime()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.timeout = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('{{ dummy }} {{ stack_input }} Run after {{ number }} second(s)', {\n                dummy: '%1',\n                stack_input: '%2',\n                number: '%3',\n            }),\n            args0: [\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'TIMEOUTSTACK',\n                },\n                {\n                    type: 'input_value',\n                    name: 'SECONDS',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Run the blocks inside after a given number of seconds'),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Delayed run'),\n            description: localize(\n                'This block delays execution for a given number of seconds. You can place any blocks within this block. The execution of other blocks in your strategy will be paused until the instructions in this block are carried out.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            SECONDS: null,\n        };\n    },\n};\n\nBlockly.JavaScript.timeout = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'TIMEOUTSTACK');\n    const seconds = Blockly.JavaScript.valueToCode(block, 'SECONDS', Blockly.JavaScript.ORDER_ATOMIC) || '1';\n\n    const code = `sleep(${seconds});\\n${stack}\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.todatetime = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('To date/time {{ input_timestamp }} {{ dummy }}', {\n                input_timestamp: '%1',\n                dummy: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TIMESTAMP',\n                    check: 'Number',\n                },\n                {\n                    // Extra dummy for spacing.\n                    type: 'input_dummy',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time.'\n            ),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Convert to date/time'),\n            description: localize(\n                'This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TIMESTAMP: null,\n        };\n    },\n};\n\nBlockly.JavaScript.todatetime = block => {\n    const timestamp = Blockly.JavaScript.valueToCode(block, 'TIMESTAMP', Blockly.JavaScript.ORDER_ATOMIC);\n    const invalid_timestamp = `${localize('Invalid timestamp')}:`;\n\n    // eslint-disable-next-line no-underscore-dangle\n    const function_name = Blockly.JavaScript.provideFunction_('timestampToDateString', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(timestamp) {\n            var datetime = new Date(timestamp * 1000);\n\n            if (!datetime.getTime()) {\n                return \"${invalid_timestamp} \" + timestamp;\n            }\n\n            var getTwoDigitValue = function(input) {\n                return input < 10 ? '0' + input : input;\n            }\n\n            var year    = datetime.getFullYear();\n            var month   = getTwoDigitValue(datetime.getMonth() + 1);\n            var day     = getTwoDigitValue(datetime.getDate());\n            var hours   = getTwoDigitValue(datetime.getHours());\n            var minutes = getTwoDigitValue(datetime.getMinutes());\n            var seconds = getTwoDigitValue(datetime.getSeconds());\n\n            var formatGmtOffset = function() {\n                var gmt_offset_raw = datetime.getTimezoneOffset();\n                var sign           = gmt_offset_raw > 0 ? '-' : '+';\n                var gmt_offset     = Math.abs(gmt_offset_raw);\n                var hour           = Math.floor(gmt_offset / 60);\n                var minute         = gmt_offset - hour * 60;\n\n                return 'GMT' + sign + getTwoDigitValue(hour) + getTwoDigitValue(minute);\n            }\n\n            var date_string = year + '-' + month + '-' + day;\n            var time_string = hours + ':' + minutes + ':' + seconds;\n\n            return date_string + ' ' + time_string + ' ' + formatGmtOffset();\n        }`,\n    ]);\n\n    const code = `${function_name}(${timestamp})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../../utils';\n\nBlockly.Blocks.totimestamp = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('To timestamp {{ input_datetime }} {{ dummy }}', { input_datetime: '%1', dummy: '%2' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'DATETIME',\n                },\n                {\n                    // Extra dummy for spacing.\n                    type: 'input_dummy',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'Converts a string representing a date/time string into seconds since Epoch. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825. Time and time zone offset are optional.'\n            ),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Convert to timestamp'),\n            description: localize(\n                'This block converts a string of text that represents the date and time into seconds since the Unix Epoch (1 January 1970). The time and time zone offset are optional. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            DATETIME: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.totimestamp = block => {\n    const datetime_string = Blockly.JavaScript.valueToCode(block, 'DATETIME', Blockly.JavaScript.ORDER_ATOMIC);\n    const code = `Bot.dateTimeStringToTimestamp(${datetime_string})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { defineContract } from '../../images';\nimport DBotStore from '../../../dbot-store';\nimport { runIrreversibleEvents } from '../../../utils';\nimport { removeErrorHandlingEventListener, initErrorHandlingListener } from '../../../../utils';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.trade_definition = {\n    init() {\n        this.jsonInit(this.definition());\n        this.setDeletable(false);\n        this.isInit = false;\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            message2: '%1 %2 %3',\n            message3: '%1',\n            message4: '%1 %2 %3',\n            message5: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: defineContract,\n                    width: 25,\n                    height: 25,\n                    alt: 'T',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('1. Trade parameters'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'TRADE_OPTIONS',\n                },\n            ],\n            args2: [\n                {\n                    type: 'field_image',\n                    src: '', // this is here to add extra padding\n                    width: 4,\n                    height: 25,\n                },\n                {\n                    type: 'field_label',\n                    text: localize('Run once at start:'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args3: [\n                {\n                    type: 'input_statement',\n                    name: 'INITIALIZATION',\n                    check: null,\n                },\n            ],\n            args4: [\n                {\n                    type: 'field_image',\n                    src: '', // this is here to add extra padding\n                    width: 4,\n                    height: 25,\n                },\n                {\n                    type: 'field_label',\n                    text: localize('Trade options:'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args5: [\n                {\n                    type: 'input_statement',\n                    name: 'SUBMARKET',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Here is where you define the parameters of your contract.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trade parameters'),\n            description: localize('Here is where you define the parameters of your contract.'),\n            key_words: localize('market, trade type, contract type'),\n        };\n    },\n    onchange(event) {\n        if (event.type === 'ui' && !this.isInit) {\n            this.isInit = true;\n            initErrorHandlingListener('keydown');\n        } else if (Blockly.selected === null && this.isInit) {\n            this.isInit = false;\n            removeErrorHandlingEventListener('keydown');\n        }\n        if (!this.workspace || this.workspace.isDragging() || this.isInFlyout) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE || event.type === Blockly.Events.END_DRAG) {\n            // Enforce only trade_definition_<type> blocks in TRADE_OPTIONS statement.\n            const blocks_in_trade_options = this.getBlocksInStatement('TRADE_OPTIONS');\n\n            if (blocks_in_trade_options.length > 0) {\n                blocks_in_trade_options.forEach(block => {\n                    if (!/^trade_definition_.+$/.test(block.type)) {\n                        runIrreversibleEvents(() => {\n                            block.unplug(true);\n                        });\n                    }\n                });\n            } else {\n                runIrreversibleEvents(() => {\n                    this.dispose();\n                });\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.trade_definition = block => {\n    const { client } = DBotStore.instance;\n\n    if (!client || !client.is_logged_in) {\n        throw new Error('Please login');\n    }\n\n    const { loginid } = client;\n    const account = client.getToken(loginid);\n    const market_block = block.getChildByType('trade_definition_market');\n    const trade_type_block = block.getChildByType('trade_definition_tradetype');\n    const contract_type_block = block.getChildByType('trade_definition_contracttype');\n    const candle_interval_block = block.getChildByType('trade_definition_candleinterval');\n    const restart_on_error_block = block.getChildByType('trade_definition_restartonerror');\n    const restart_on_buy_sell_block = block.getChildByType('trade_definition_restartbuysell');\n\n    const symbol = market_block.getFieldValue('SYMBOL_LIST');\n    const trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n    const contract_type = contract_type_block.getFieldValue('TYPE_LIST');\n    const candle_interval = candle_interval_block.getFieldValue('CANDLEINTERVAL_LIST');\n    const should_restart_on_error = restart_on_error_block.getFieldValue('RESTARTONERROR') !== 'FALSE';\n    const should_restart_on_buy_sell = restart_on_buy_sell_block.getFieldValue('TIME_MACHINE_ENABLED') !== 'FALSE';\n\n    const { opposites } = config;\n    const contract_type_list =\n        contract_type === 'both'\n            ? opposites[trade_type.toUpperCase()].map(opposite => Object.keys(opposite)[0])\n            : [contract_type];\n\n    const initialization = Blockly.JavaScript.statementToCode(block, 'INITIALIZATION');\n    const trade_options_statement = Blockly.JavaScript.statementToCode(block, 'SUBMARKET');\n\n    const code = `  \n    BinaryBotPrivateInit = function BinaryBotPrivateInit() {\n        Bot.init('${account}', {\n          symbol              : '${symbol}',\n          contractTypes       : ${JSON.stringify(contract_type_list)},\n          candleInterval      : '${candle_interval || 'FALSE'}',\n          shouldRestartOnError: ${should_restart_on_error},\n          timeMachineEnabled  : ${should_restart_on_buy_sell},\n        });\n        ${initialization.trim()}\n    };\n      BinaryBotPrivateStart = function BinaryBotPrivateStart() {\n        BinaryBotPrivateHasCalledTradeOptions = false;\n        Bot.highlightBlock('${block.id}');\n        ${trade_options_statement.trim()}\n      };\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { runIrreversibleEvents } from '../../../utils';\nimport ApiHelpers from '../../../../services/api/api-helpers';\n\n/* eslint-disable */\nBlockly.Blocks.trade_definition_market = {\n    init() {\n        this.jsonInit({\n            message0: localize('Market: {{ input_market }} > {{ input_submarket }} > {{ input_symbol }}', {\n                input_market: '%1',\n                input_submarket: '%2',\n                input_symbol: '%3',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MARKET_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'SUBMARKET_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'SYMBOL_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        const allowed_events = ['BLOCK_CREATE', 'BLOCK_CHANGE', 'END_DRAG'];\n        const is_allowed_event =\n            allowed_events.findIndex(event_name => event.type === Blockly.Events[event_name]) !== -1;\n\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging() || !is_allowed_event) {\n            return;\n        }\n\n        this.enforceLimitations();\n\n        const { active_symbols } = ApiHelpers.instance;\n        const market_dropdown = this.getField('MARKET_LIST');\n        const submarket_dropdown = this.getField('SUBMARKET_LIST');\n        const symbol_dropdown = this.getField('SYMBOL_LIST');\n        const market = market_dropdown.getValue();\n        const submarket = submarket_dropdown.getValue();\n        const symbol = symbol_dropdown.getValue();\n\n        // Temporary solution to remove Crytocurrencies from\n        // market options until multipliers are available for DBot\n        const market_options = active_symbols\n            .getMarketDropdownOptions()\n            .filter(option => option[1] !== 'cryptocurrency');\n\n        const populateMarketDropdown = () => {\n            market_dropdown.updateOptions(market_options, {\n                default_value: market,\n                should_pretend_empty: true,\n                event_group: event.group,\n            });\n        };\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            populateMarketDropdown();\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.blockId === this.id) {\n            if (event.name === 'MARKET_LIST') {\n                submarket_dropdown.updateOptions(active_symbols.getSubmarketDropdownOptions(market), {\n                    default_value: submarket,\n                    should_pretend_empty: true,\n                    event_group: event.group,\n                });\n            } else if (event.name === 'SUBMARKET_LIST') {\n                symbol_dropdown.updateOptions(active_symbols.getSymbolDropdownOptions(submarket), {\n                    default_value: symbol,\n                    should_pretend_empty: true,\n                    event_group: event.group,\n                });\n            }\n        } else if (event.type === Blockly.Events.END_DRAG && event.blockId === this.getRootBlock().id) {\n            if (market_dropdown.isEmpty() || submarket_dropdown.isEmpty() || symbol_dropdown.isEmpty()) {\n                populateMarketDropdown();\n            }\n        }\n    },\n    enforceLimitations() {\n        runIrreversibleEvents(() => {\n            if (!this.isDescendantOf('trade_definition')) {\n                this.unplug(false); // Unplug without reconnecting siblings\n\n                const top_blocks = this.workspace.getTopBlocks();\n                const trade_definition_block = top_blocks.find(block => block.type === 'trade_definition');\n\n                // Reconnect self to trade definition block.\n                if (trade_definition_block) {\n                    const connection = trade_definition_block.getLastConnectionInStatement('TRADE_OPTIONS');\n                    connection.connect(this.previousConnection);\n                } else {\n                    this.dispose();\n                }\n            }\n            // These blocks cannot be disabled.\n            else if (this.disabled) {\n                this.setDisabled(false);\n            }\n        });\n    },\n};\n\nBlockly.JavaScript.trade_definition_market = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.trade_definition_tradetype = {\n    init() {\n        this.jsonInit({\n            message0: localize('Trade Type: {{ trade_type_category }} > {{ trade_type }}', {\n                trade_type_category: '%1',\n                trade_type: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TRADETYPECAT_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'TRADETYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n};\n\nBlockly.JavaScript.trade_definition_tradetype = () => {};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { getContractTypeOptions } from '../../../shared';\n\nBlockly.Blocks.trade_definition_contracttype = {\n    init() {\n        this.jsonInit({\n            message0: localize('Contract Type: {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            tooltip: localize(\n                'If the contract type is “Both”, then the Purchase Conditions should include both Rise and Fall using the “Conditional Block\"'\n            ),\n            previousStatement: null,\n            nextStatement: null,\n        });\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (Blockly.Events.BLOCK_CHANGE) {\n            if (event.name === 'TRADETYPE_LIST') {\n                const trade_type = event.newValue;\n                const contract_type_list = this.getField('TYPE_LIST');\n                const contract_type_options = [];\n\n                const trade_types = getContractTypeOptions('both', trade_type);\n\n                if (trade_types.length > 1) {\n                    contract_type_options.push([localize('Both'), 'both']);\n                }\n\n                contract_type_options.push(...trade_types);\n\n                if (contract_type_options.length === 0) {\n                    contract_type_options.push(...config.NOT_AVAILABLE_DROPDOWN_OPTIONS);\n                }\n\n                contract_type_list.updateOptions(contract_type_options, {\n                    event_group: event.group,\n                    default_value: is_load_event ? contract_type_list.getValue() : undefined,\n                });\n            }\n        }\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n};\nBlockly.JavaScript.trade_definition_contracttype = () => '';\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.trade_definition_candleinterval = {\n    init() {\n        this.jsonInit({\n            message0: localize('Default Candle Interval: {{ candle_interval_type }}', { candle_interval_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals.slice(1),\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(/* event */) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n};\nBlockly.JavaScript.trade_definition_candleinterval = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.trade_definition_restartbuysell = {\n    init() {\n        this.jsonInit({\n            message0: localize('Restart buy/sell on error (disable for better performance): {{ checkbox }}', {\n                checkbox: '%1',\n            }),\n            args0: [\n                {\n                    type: 'field_image_checkbox',\n                    name: 'TIME_MACHINE_ENABLED',\n                    checked: false,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(/* event */) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n    required_inputs: ['TIME_MACHINE_ENABLED'],\n};\nBlockly.JavaScript.trade_definition_restartbuysell = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.trade_definition_restartonerror = {\n    init() {\n        this.jsonInit({\n            message0: localize('Restart last trade on error (bot ignores the unsuccessful trade): {{ checkbox }}', {\n                checkbox: '%1',\n            }),\n            args0: [\n                {\n                    type: 'field_image_checkbox',\n                    name: 'RESTARTONERROR',\n                    checked: true,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setNextStatement(false);\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(/* event */) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n    required_inputs: ['RESTARTONERROR'],\n};\nBlockly.JavaScript.trade_definition_restartonerror = () => {};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode, getDecimalPlaces } from '@deriv/shared';\nimport DBotStore from '../../../dbot-store';\nimport { runIrreversibleEvents, runGroupedEvents } from '../../../utils';\nimport { config } from '../../../../constants/config';\nimport ApiHelpers from '../../../../services/api/api-helpers';\n\nBlockly.Blocks.trade_definition_tradeoptions = {\n    durations: [],\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        const is_stake = this.type === 'trade_definition_tradeoptions';\n\n        return {\n            message0: localize('Duration: {{ duration_unit }} {{ duration_value }}', {\n                duration_unit: '%1',\n                duration_value: '%2',\n            }),\n            message1: `${is_stake ? localize('Stake') : localize('Payout')}: %1 %2 %3`,\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'DURATIONTYPE_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'DURATION',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n                {\n                    type: 'field_label',\n                    name: 'AMOUNT_LIMITS',\n                    text: '',\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Define your trade options such as duration and stake.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trade options'),\n            description: localize(\n                'Define your trade options such as duration and stake. Some options are only applicable for certain trade types.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (event.type === 'change') {\n            const selected_block = this.workspace.getBlockById(event.blockId);\n            selected_block?.parentBlock_?.inputList\n                .filter(item => ['DURATION', 'AMOUNT'].includes(item.name))\n                .forEach(input => {\n                    const input_target = input.connection.targetBlock();\n                    const value = input_target.getFieldValue('NUM');\n                    if (value?.startsWith('0')) {\n                        const new_value = value.includes('.') ? parseFloat(`${value}`) : parseInt(`${value}`);\n                        input_target.setFieldValue(new_value.toString(), 'NUM');\n                    }\n                });\n        }\n\n        if (!this.workspace || this.workspace.isDragging() || this.isInFlyout) {\n            return;\n        }\n\n        const trade_definition_block = this.workspace\n            .getAllBlocks(true)\n            .find(block => block.type === 'trade_definition');\n        if (!trade_definition_block) {\n            return;\n        }\n\n        const market_block = trade_definition_block.getChildByType('trade_definition_market');\n        const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n\n        if (!market_block || !trade_type_block) {\n            return;\n        }\n\n        this.selected_symbol = market_block.getFieldValue('SYMBOL_LIST');\n        this.selected_market = market_block.getFieldValue('MARKET_LIST');\n        this.selected_trade_type_category = trade_type_block.getFieldValue('TRADETYPECAT_LIST');\n        this.selected_trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n        this.selected_duration = this.getFieldValue('DURATIONTYPE_LIST');\n        this.selected_barrier_types = [\n            this.getFieldValue('BARRIEROFFSETTYPE_LIST') || config.BARRIER_TYPES[0][1],\n            this.getFieldValue('SECONDBARRIEROFFSETTYPE_LIST') || config.BARRIER_TYPES[1][1],\n        ];\n\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            event.type === Blockly.Events.END_DRAG\n        ) {\n            this.setCurrency();\n            this.updateAmountLimits();\n        }\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            if (is_load_event) {\n                // Do NOT touch any values when a strategy is being loaded.\n                this.updateBarrierInputs(false, false);\n                this.updateDurationInput(false, false);\n                this.updatePredictionInput(false);\n                this.updateAmountLimits();\n            } else {\n                this.updateBarrierInputs(true, true);\n                this.enforceSingleBarrierType('BARRIEROFFSETTYPE_LIST', true);\n                this.updateDurationInput(true, true);\n                this.updatePredictionInput(true);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (is_load_event) {\n                if (event.name === 'TRADETYPE_LIST') {\n                    this.updateBarrierInputs(false, false);\n                    this.enforceSingleBarrierType(false);\n                    this.updateDurationInput(false, false);\n                    this.updatePredictionInput(false);\n                }\n            } else if (event.blockId === this.id) {\n                switch (event.name) {\n                    case 'DURATIONTYPE_LIST': {\n                        this.updateBarrierInputs(true, true);\n                        this.enforceSingleBarrierType('BARRIEROFFSETTYPE_LIST', true);\n                        this.updateDurationInput(false, true);\n                        break;\n                    }\n                    case 'BARRIEROFFSETTYPE_LIST':\n                    case 'SECONDBARRIEROFFSETTYPE_LIST': {\n                        this.updateBarrierInputs(false, true);\n                        this.enforceSingleBarrierType(event.name, false);\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            } else if (event.name === 'SYMBOL_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.updateBarrierInputs(true, true);\n                this.enforceSingleBarrierType(true);\n                this.updateDurationInput(true, true);\n                this.updatePredictionInput(true);\n                this.updateAmountLimits();\n            }\n        } else if (event.type === Blockly.Events.END_DRAG && event.blockId === this.id) {\n            // Ensure this block is populated after initial drag from flyout.\n            if (!this.selected_duration) {\n                const fake_creation_event = new Blockly.Events.Create(this);\n                fake_creation_event.recordUndo = false;\n                Blockly.Events.fire(fake_creation_event);\n            } else if (this.selected_trade_type === 'multiplier') {\n                this.updateDurationInput(false, false);\n            }\n        }\n    },\n    createPredictionInput(prediction_range) {\n        runIrreversibleEvents(() => {\n            if (prediction_range.length === 0) {\n                this.removeInput('PREDICTION_LABEL', true);\n                this.removeInput('PREDICTION', true);\n            } else if (!this.getInput('PREDICTION')) {\n                this.appendDummyInput('PREDICTION_LABEL').appendField(localize('Prediction:'));\n\n                const prediction_input = this.appendValueInput('PREDICTION');\n                const shadow_block = this.workspace.newBlock('math_number_positive');\n\n                shadow_block.setShadow(true);\n                shadow_block.setFieldValue(prediction_range[0], 'NUM');\n                shadow_block.outputConnection.connect(prediction_input.connection);\n                shadow_block.initSvg();\n                shadow_block.render(true);\n            }\n        });\n    },\n    createBarrierInputs(barriers) {\n        runIrreversibleEvents(() => {\n            const input_names = ['BARRIEROFFSET', 'SECONDBARRIEROFFSET'];\n\n            for (let i = 0; i < barriers.values.length; i++) {\n                const label = barriers.values.length === 1 ? localize('Barrier') : config.BARRIER_LABELS[i];\n                let input = this.getInput(input_names[i]);\n\n                if (input) {\n                    input.fieldRow[0].setText(label);\n                } else {\n                    input = this.appendValueInput(input_names[i])\n                        .appendField(label, `${input_names[i]}_LABEL`)\n                        .appendField(new Blockly.FieldDropdown(config.BARRIER_TYPES), `${input_names[i]}TYPE_LIST`);\n\n                    const shadow_block = this.workspace.newBlock('math_number_positive');\n\n                    shadow_block.setShadow(true);\n                    shadow_block.setFieldValue(barriers.values[i], 'NUM');\n                    shadow_block.outputConnection.connect(input.connection);\n                    shadow_block.initSvg();\n                    shadow_block.render(true);\n                }\n            }\n\n            // Remove any extra inputs (quietly) if not required\n            for (let i = input_names.length; i > barriers.values.length; i--) {\n                this.removeInput(input_names[i - 1], true);\n            }\n        });\n    },\n    updateAmountLimits() {\n        const { account_limits } = ApiHelpers.instance;\n        const { currency, landing_company_shortcode } = DBotStore.instance.client;\n        account_limits.getStakePayoutLimits(currency, landing_company_shortcode, this.selected_market).then(limits => {\n            if (!this.getField('AMOUNT_LIMITS')) {\n                return;\n            }\n            this.amount_limits = limits;\n            const { max_payout, min_stake } = limits;\n            if (max_payout && min_stake) {\n                runIrreversibleEvents(() => {\n                    this.setFieldValue(\n                        localize('(min: {{min_stake}} - max: {{max_payout}})', {\n                            min_stake,\n                            max_payout,\n                        }),\n                        'AMOUNT_LIMITS'\n                    );\n                });\n            }\n        });\n    },\n    updateDurationInput(should_use_default_unit, should_update_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        if (this.selected_trade_type === 'multiplier' && this.isDescendantOf('trade_definition')) {\n            runIrreversibleEvents(() => {\n                runGroupedEvents(false, () => {\n                    const multiplier_block = this.workspace.newBlock('trade_definition_multiplier');\n                    multiplier_block.initSvg();\n                    multiplier_block.render();\n\n                    const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n                    const parent_connection = trade_definition_block.getInput('SUBMARKET').connection;\n                    const child_connection = multiplier_block.previousConnection;\n                    parent_connection.connect(child_connection);\n\n                    const stake_input = multiplier_block.getInput('AMOUNT');\n\n                    const stake_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stake_shadow_block.setShadow(true);\n                    stake_shadow_block.setFieldValue(1, 'NUM');\n                    stake_shadow_block.outputConnection.connect(stake_input.connection);\n                    stake_shadow_block.initSvg();\n                    stake_shadow_block.render();\n\n                    const take_profit_block = this.workspace.newBlock('multiplier_take_profit');\n                    const take_profit_input = take_profit_block.getInput('AMOUNT');\n\n                    const take_profit_shadow_block = this.workspace.newBlock('math_number_positive');\n                    take_profit_shadow_block.setShadow(true);\n                    take_profit_shadow_block.setFieldValue(0, 'NUM');\n                    take_profit_shadow_block.outputConnection.connect(take_profit_input.connection);\n                    take_profit_shadow_block.initSvg();\n                    take_profit_shadow_block.render();\n\n                    multiplier_block\n                        .getLastConnectionInStatement('MULTIPLIER_PARAMS')\n                        .connect(take_profit_block.previousConnection);\n                    take_profit_block.initSvg();\n                    take_profit_block.render();\n\n                    const stop_loss_block = this.workspace.newBlock('multiplier_stop_loss');\n                    const stop_loss_input = stop_loss_block.getInput('AMOUNT');\n\n                    const stop_loss_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stop_loss_shadow_block.setShadow(true);\n                    stop_loss_shadow_block.setFieldValue(0, 'NUM');\n                    stop_loss_shadow_block.outputConnection.connect(stop_loss_input.connection);\n                    stop_loss_shadow_block.initSvg();\n                    stop_loss_shadow_block.render();\n\n                    multiplier_block\n                        .getLastConnectionInStatement('MULTIPLIER_PARAMS')\n                        .connect(stop_loss_block.previousConnection);\n                    stop_loss_block.initSvg();\n                    stop_loss_block.render();\n\n                    this.dispose();\n                    Blockly.derivWorkspace.cleanUp();\n                });\n            });\n        } else {\n            contracts_for.getDurations(this.selected_symbol, this.selected_trade_type).then(durations => {\n                // Keep duration in memory so we can later reference them for validation\n                this.durations = durations;\n\n                const duration_field_dropdown = this.getField('DURATIONTYPE_LIST');\n                const duration_input = this.getInput('DURATION');\n                const duration_options = durations.map(duration => [duration.display, duration.unit]);\n\n                duration_field_dropdown?.updateOptions(duration_options, {\n                    default_value: should_use_default_unit ? undefined : duration_field_dropdown.getValue(),\n                });\n\n                if (should_update_value && duration_input && duration_input.connection) {\n                    const target_block = duration_input.connection.targetBlock();\n\n                    if (target_block && target_block.isShadow()) {\n                        const min_duration = durations.find(duration => duration.unit === this.selected_duration);\n\n                        if (min_duration) {\n                            runIrreversibleEvents(() => {\n                                target_block.setFieldValue(min_duration.min, 'NUM');\n                            });\n                        }\n                    }\n                }\n            });\n        }\n    },\n    updateBarrierInputs(should_use_default_type, should_use_default_values) {\n        const { contracts_for } = ApiHelpers.instance;\n        const { BARRIER_TYPES } = config;\n\n        contracts_for\n            .getBarriers(\n                this.selected_symbol,\n                this.selected_trade_type,\n                this.selected_duration,\n                this.selected_barrier_types\n            )\n            .then(barriers => {\n                this.createBarrierInputs(barriers);\n\n                const input_names = ['BARRIEROFFSET', 'SECONDBARRIEROFFSET'];\n\n                for (let i = 0; i < barriers.values.length; i++) {\n                    const barrier_field_dropdown = this.getField(`${input_names[i]}TYPE_LIST`);\n                    const { ABSOLUTE_BARRIER_DROPDOWN_OPTION } = config;\n                    const barrier_field_value = should_use_default_type\n                        ? BARRIER_TYPES[i][1]\n                        : barrier_field_dropdown.getValue();\n\n                    if (this.selected_duration === 'd') {\n                        // Only absolute types are allowed.\n                        barrier_field_dropdown.updateOptions(ABSOLUTE_BARRIER_DROPDOWN_OPTION, {\n                            default_value: 'absolute',\n                        });\n                    } else if (barriers.allow_both_types || barriers.allow_absolute_type) {\n                        // Both offset + absolute types are allowed.\n                        const options = [].concat(BARRIER_TYPES, ABSOLUTE_BARRIER_DROPDOWN_OPTION);\n\n                        barrier_field_dropdown.updateOptions(options, {\n                            default_value: barrier_field_value,\n                        });\n                    } else {\n                        // Only offset types are allowed.\n                        barrier_field_dropdown.updateOptions(BARRIER_TYPES, {\n                            default_value: barrier_field_value,\n                        });\n                    }\n\n                    const { connection } = this.getInput(input_names[i]);\n\n                    if (should_use_default_values && connection) {\n                        const target_block = connection.targetBlock();\n\n                        if (target_block && target_block.isShadow()) {\n                            const barrier_value = barriers.values[i] !== false ? barriers.values[i] : '';\n\n                            runIrreversibleEvents(() => {\n                                target_block.setFieldValue(barrier_value, 'NUM');\n                            });\n                        }\n                    }\n                }\n            });\n    },\n    updatePredictionInput(should_use_default_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        contracts_for.getPredictionRange(this.selected_symbol, this.selected_trade_type).then(prediction_range => {\n            this.createPredictionInput(prediction_range);\n\n            if (prediction_range.length > 0) {\n                const prediction_input = this.getInput('PREDICTION');\n                const { connection } = prediction_input;\n\n                if (should_use_default_value && connection) {\n                    const target_block = connection.targetBlock();\n\n                    if (target_block && target_block.isShadow()) {\n                        const initial_prediction = Math.max(1, prediction_range[0]);\n\n                        runIrreversibleEvents(() => {\n                            target_block.setFieldValue(initial_prediction, 'NUM');\n                        });\n                    }\n                }\n            }\n        });\n    },\n    enforceSingleBarrierType(barrier_input_name, should_force_distinct) {\n        const new_value = this.getFieldValue(barrier_input_name);\n        const other_barrier_input_name =\n            barrier_input_name === 'BARRIEROFFSETTYPE_LIST' ? 'SECONDBARRIEROFFSETTYPE_LIST' : 'BARRIEROFFSETTYPE_LIST';\n        const other_barrier_field = this.getField(other_barrier_input_name);\n        const { BARRIER_TYPES } = config;\n\n        if (other_barrier_field) {\n            const has_other_barrier = BARRIER_TYPES.findIndex(type => type[1] === new_value) !== -1;\n            const other_barrier_type = other_barrier_field.getValue();\n\n            runIrreversibleEvents(() => {\n                if (has_other_barrier && (other_barrier_type === 'absolute' || should_force_distinct)) {\n                    const other_barrier_value = BARRIER_TYPES.find(type => type[1] !== new_value);\n                    other_barrier_field.setValue(other_barrier_value[1]);\n                } else if (new_value === 'absolute' && other_barrier_type !== 'absolute') {\n                    other_barrier_field.setValue('absolute');\n                }\n            });\n        }\n    },\n    domToMutation(xmlElement) {\n        const has_first_barrier = xmlElement.getAttribute('has_first_barrier') === 'true';\n        const has_second_barrier = xmlElement.getAttribute('has_second_barrier') === 'true';\n        const has_prediction = xmlElement.getAttribute('has_prediction') === 'true';\n\n        if (has_first_barrier && has_second_barrier) {\n            this.createBarrierInputs({ values: [1, -1] }); // These values are overwritten with XML values.\n        } else if (has_first_barrier) {\n            this.createBarrierInputs({ values: [1] });\n        } else if (has_prediction) {\n            this.createPredictionInput([1]);\n        }\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n\n        container.setAttribute('has_first_barrier', !!this.getInput('BARRIEROFFSET'));\n        container.setAttribute('has_second_barrier', !!this.getInput('SECONDBARRIEROFFSET'));\n        container.setAttribute('has_prediction', !!this.getInput('PREDICTION'));\n\n        return container;\n    },\n    setCurrency() {\n        const currency_field = this.getField('CURRENCY_LIST');\n        const { currency } = DBotStore.instance.client;\n        currency_field.setText(getCurrencyDisplayCode(currency));\n    },\n    restricted_parents: ['trade_definition'],\n    getRequiredValueInputs() {\n        return {\n            AMOUNT: input => {\n                const input_number = Number(input);\n                const max_payout = this.amount_limits?.max_payout;\n                const min_stake = this.amount_limits?.min_stake;\n                if (min_stake && input_number < min_stake) {\n                    this.error_message = localize(\"Please enter a stake amount that's at least {{min_stake}}.\", {\n                        min_stake,\n                    });\n                    return input_number < min_stake;\n                }\n                if (max_payout && input_number > max_payout) {\n                    this.error_message = localize(\"Please enter a payout amount that's lower than {{max_payout}}.\", {\n                        max_payout,\n                    });\n                    return input_number > max_payout;\n                }\n                this.error_message = localize('Amount must be a positive number.');\n                return !isNaN(input_number) && input_number <= 0;\n            },\n            DURATION: input => {\n                const input_number = Number(input);\n\n                if (isNaN(input_number) || !this.durations.length) {\n                    return false;\n                }\n\n                const duration = this.durations.find(d => d.unit === this.selected_duration);\n\n                if (duration) {\n                    const { min, max } = duration;\n                    const is_valid_duration = input_number >= min && input_number <= max;\n\n                    if (min === max) {\n                        this.error_message = localize(\n                            'Duration value is not allowed. To run the bot, please enter {{min}}.',\n                            { min }\n                        );\n                    } else {\n                        this.error_message = localize(\n                            'Duration value is not allowed. To run the bot, please enter a value between {{min}} to {{max}}.',\n                            { min, max }\n                        );\n                    }\n\n                    return !is_valid_duration;\n                }\n\n                return false;\n            },\n        };\n    },\n};\n\nBlockly.Blocks.trade_definition_tradeoptions_payout = Blockly.Blocks.trade_definition_tradeoptions;\n\nBlockly.JavaScript.trade_definition_tradeoptions = block => {\n    const amount = Blockly.JavaScript.valueToCode(block, 'AMOUNT', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n    const { currency } = DBotStore.instance.client;\n    const duration_type = block.getFieldValue('DURATIONTYPE_LIST') || '0';\n    const duration_value = Blockly.JavaScript.valueToCode(block, 'DURATION', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n\n    // Determine decimal places for rounding the stake, this is done so Martingale multipliers\n    // are not affected by fractional values e.g. USD 12.232323 will become 12.23.\n    const decimal_places = getDecimalPlaces(currency);\n    const stake_amount = `+(Number(${amount}).toFixed(${decimal_places}))`;\n\n    const getBarrierValue = (barrier_offset_type, value) => {\n        // Variables should not be encapsulated in quotes\n        if (/^(\\d+(\\.\\d+)?)$/.test(value)) {\n            return barrier_offset_type === 'absolute' ? `'${value}'` : `'${barrier_offset_type}${value}'`;\n        }\n        return barrier_offset_type === 'absolute' ? value : `'${barrier_offset_type}' + ${value}`;\n    };\n\n    let prediction_value, barrier_offset_value, second_barrier_offset_value;\n\n    if (block.getInput('PREDICTION')) {\n        prediction_value = Blockly.JavaScript.valueToCode(block, 'PREDICTION', Blockly.JavaScript.ORDER_ATOMIC) || '-1';\n    }\n\n    if (block.getInput('BARRIEROFFSET')) {\n        const barrier_offset_type = block.getFieldValue('BARRIEROFFSETTYPE_LIST');\n        const value = Blockly.JavaScript.valueToCode(block, 'BARRIEROFFSET', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n        barrier_offset_value = getBarrierValue(barrier_offset_type, value);\n    }\n\n    if (block.getInput('SECONDBARRIEROFFSET')) {\n        const barrier_offset_type = block.getFieldValue('SECONDBARRIEROFFSETTYPE_LIST');\n        const value =\n            Blockly.JavaScript.valueToCode(block, 'SECONDBARRIEROFFSET', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n        second_barrier_offset_value = getBarrierValue(barrier_offset_type, value);\n    }\n\n    const code = `\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            duration           : ${duration_value},\n            duration_unit      : '${duration_type}',\n            currency           : '${currency}',\n            amount             : ${stake_amount},\n            prediction         : ${prediction_value || 'undefined'},\n            barrierOffset      : ${barrier_offset_value || 'undefined'},\n            secondBarrierOffset: ${second_barrier_offset_value || 'undefined'},\n            basis              : '${block.type === 'trade_definition_tradeoptions' ? 'stake' : 'payout'}',\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    `;\n\n    return code;\n};\n\nBlockly.JavaScript.trade_definition_tradeoptions_payout = Blockly.JavaScript.trade_definition_tradeoptions;\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode, getDecimalPlaces } from '@deriv/shared';\nimport DBotStore from '../../../dbot-store';\nimport { runGroupedEvents, runIrreversibleEvents } from '../../../utils';\nimport { config } from '../../../../constants/config';\nimport ApiHelpers from '../../../../services/api/api-helpers';\n\nBlockly.Blocks.trade_definition_multiplier = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Multiplier: {{ multiplier }}', {\n                multiplier: '%1',\n            }),\n            message1: `${localize('Stake')}: %1 %2 %3`,\n            message2: '%1',\n            message3: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MULTIPLIERTYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n                {\n                    type: 'field_label',\n                    name: 'AMOUNT_LIMITS',\n                    text: '',\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args3: [\n                {\n                    type: 'input_statement',\n                    name: 'MULTIPLIER_PARAMS',\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Define your trade options such as multiplier and stake.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Multiplier trade options'),\n            description: localize(\n                'Define your trade options such as multiplier and stake. This block can only be used with the multipliers trade type. If you select another trade type, this block will be replaced with the Trade options block.'\n            ),\n        };\n    },\n    validateBlocksInStatement() {\n        // Enforce only multiplier_<type> blocks in MULTIPLIER_PARAMS statement.\n        const blocks_in_multiplier = this.getBlocksInStatement('MULTIPLIER_PARAMS');\n\n        if (blocks_in_multiplier.length > 0) {\n            const block_types_in_multiplier = [];\n            blocks_in_multiplier.forEach(block => {\n                block_types_in_multiplier.push(block.type);\n                const block_multiplier_take_profit = block.childValueToCode('multiplier_take_profit', 'AMOUNT');\n                const block_multiplier_stop_loss = block.childValueToCode('multiplier_stop_loss', 'AMOUNT');\n                if (block_multiplier_take_profit <= 0 || block_multiplier_stop_loss <= 0) {\n                    block.setDisabled(true);\n                }\n\n                if (block.type === 'multiplier_stop_loss' && block_multiplier_stop_loss > 0) {\n                    block.setDisabled(false);\n                }\n\n                if (block.type === 'multiplier_take_profit' && block_multiplier_take_profit > 0) {\n                    block.setDisabled(false);\n                }\n\n                if (\n                    !/^multiplier_.+$/.test(block.type) ||\n                    new Set(block_types_in_multiplier).size !== block_types_in_multiplier.length\n                ) {\n                    runIrreversibleEvents(() => {\n                        block.unplug(true);\n                    });\n                }\n            });\n        }\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        const trade_definition_block = this.workspace\n            .getAllBlocks(true)\n            .find(block => block.type === 'trade_definition');\n        if (!trade_definition_block) {\n            return;\n        }\n\n        const market_block = trade_definition_block.getChildByType('trade_definition_market');\n        const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n\n        if (!market_block || !trade_type_block) {\n            return;\n        }\n\n        this.selected_symbol = market_block.getFieldValue('SYMBOL_LIST');\n        this.selected_market = market_block.getFieldValue('MARKET_LIST');\n        this.selected_trade_type_category = trade_type_block.getFieldValue('TRADETYPECAT_LIST');\n        this.selected_trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n        this.selected_multiplier = this.getFieldValue('MULTIPLIERTYPE_LIST');\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            this.setCurrency();\n            this.updateAmountLimits();\n            if (is_load_event) {\n                // Do NOT touch any values when a strategy is being loaded.\n                this.updateMultiplierInput(false);\n            } else {\n                this.updateMultiplierInput(true);\n            }\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            this.validateBlocksInStatement();\n            if (is_load_event) {\n                if (event.name === 'TRADETYPE_LIST') {\n                    this.updateMultiplierInput(false);\n                }\n            } else if (event.blockId === this.id) {\n                switch (event.name) {\n                    case 'MULTIPLIERTYPE_LIST': {\n                        this.updateMultiplierInput(false);\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            } else if (event.name === 'SYMBOL_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.updateMultiplierInput(true);\n                this.updateAmountLimits();\n            }\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            this.setCurrency();\n            this.updateAmountLimits();\n            this.validateBlocksInStatement();\n            if (event.blockId === this.id) {\n                // Ensure this block is populated after initial drag from flyout.\n                if (!this.selected_multiplier) {\n                    const fake_creation_event = new Blockly.Events.Create(this);\n                    fake_creation_event.recordUndo = false;\n                    Blockly.Events.fire(fake_creation_event);\n                } else if (this.selected_trade_type !== 'multiplier') {\n                    this.updateMultiplierInput(true);\n                }\n            }\n        }\n    },\n    updateAmountLimits: Blockly.Blocks.trade_definition_tradeoptions.updateAmountLimits,\n    updateMultiplierInput(should_use_default_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        if (this.selected_trade_type === 'multiplier') {\n            contracts_for.getMultiplierRange(this.selected_symbol, this.selected_trade_type).then(multiplier_range => {\n                if (multiplier_range.length > 0) {\n                    const multiplier_list_dropdown = this.getField('MULTIPLIERTYPE_LIST');\n                    const multiplier_options = multiplier_range.map(value => {\n                        const option = value.toString();\n                        return [option, option];\n                    });\n\n                    multiplier_list_dropdown?.updateOptions(multiplier_options, {\n                        default_value: should_use_default_value ? undefined : multiplier_list_dropdown.getValue(),\n                    });\n                }\n            });\n            return;\n        }\n\n        if (this.isDescendantOf('trade_definition')) {\n            runIrreversibleEvents(() => {\n                runGroupedEvents(false, () => {\n                    const duration_block = this.workspace.newBlock('trade_definition_tradeoptions');\n                    duration_block.initSvg();\n                    duration_block.render();\n\n                    const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n                    const parent_connection = trade_definition_block.getInput('SUBMARKET').connection;\n                    const child_connection = duration_block.previousConnection;\n                    parent_connection.connect(child_connection);\n\n                    const duration_input = duration_block.getInput('DURATION');\n\n                    const duration_shadow_block = this.workspace.newBlock('math_number_positive');\n                    duration_shadow_block.setShadow(true);\n                    duration_shadow_block.outputConnection.connect(duration_input.connection);\n                    duration_shadow_block.initSvg();\n                    duration_shadow_block.render(true);\n\n                    const stake_input = duration_block.getInput('AMOUNT');\n\n                    const stake_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stake_shadow_block.setShadow(true);\n                    stake_shadow_block.setFieldValue(1, 'NUM');\n                    stake_shadow_block.outputConnection.connect(stake_input.connection);\n                    stake_shadow_block.initSvg();\n                    stake_shadow_block.render(true);\n\n                    this.dispose();\n                    Blockly.derivWorkspace.cleanUp();\n                });\n            });\n        }\n    },\n    setCurrency: Blockly.Blocks.trade_definition_tradeoptions.setCurrency,\n    restricted_parents: ['trade_definition'],\n    getRequiredValueInputs() {\n        return {\n            AMOUNT: input => {\n                const input_number = Number(input);\n                const max_payout = this.amount_limits?.max_payout;\n                const min_stake = this.amount_limits?.min_stake;\n                if (min_stake && input_number < min_stake) {\n                    this.error_message = localize(\"Please enter a stake amount that's at least {{min_stake}}.\", {\n                        min_stake,\n                    });\n                    return input_number < min_stake;\n                }\n                if (max_payout && input_number > max_payout) {\n                    this.error_message = localize(\"Please enter a payout amount that's lower than {{max_payout}}.\", {\n                        max_payout,\n                    });\n                    return input_number > max_payout;\n                }\n                this.error_message = localize('Amount must be a positive number.');\n                return !isNaN(input_number) && input_number <= 0;\n            },\n        };\n    },\n};\n\nBlockly.JavaScript.trade_definition_multiplier = block => {\n    const amount = Blockly.JavaScript.valueToCode(block, 'AMOUNT', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n    const { currency } = DBotStore.instance.client;\n    const { setContractUpdateConfig } = DBotStore.instance;\n    const multiplier_value = block.getFieldValue('MULTIPLIERTYPE_LIST') || '1';\n    const stop_loss =\n        !block.getChildByType('multiplier_stop_loss')?.disabled &&\n        block.childValueToCode('multiplier_stop_loss', 'AMOUNT');\n    const take_profit =\n        !block.getChildByType('multiplier_take_profit')?.disabled &&\n        block.childValueToCode('multiplier_take_profit', 'AMOUNT');\n    const limit_order = {\n        stop_loss: stop_loss ? `+(Number(${stop_loss}).toFixed(2))` : undefined,\n        take_profit: take_profit ? `+(Number(${take_profit}).toFixed(2))` : undefined,\n    };\n\n    setContractUpdateConfig(take_profit, stop_loss);\n    // Determine decimal places for rounding the stake, this is done so Martingale multipliers\n    // are not affected by fractional values e.g. USD 12.232323 will become 12.23.\n    const decimal_places = getDecimalPlaces(currency);\n    const stake_amount = `+(Number(${amount}).toFixed(${decimal_places}))`;\n\n    const code = `\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            multiplier         : ${multiplier_value},\n            currency           : '${currency}',\n            amount             : ${stake_amount},\n            limit_order        : ${JSON.stringify(limit_order)},\n            basis              : 'stake',\n            stop_loss          : ${limit_order.stop_loss},\n            take_profit        : ${limit_order.take_profit},\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    `;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode } from '@deriv/shared';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.multiplier_stop_loss = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Stop Loss: {{ currency }} {{ stop_loss }}', {\n                currency: '%1',\n                stop_loss: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'Your contract is closed automatically when your loss is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n            ),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Stop loss'),\n            description: localize(\n                'Your contract is closed automatically when your loss is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            event.type === Blockly.Events.END_DRAG\n        ) {\n            this.setCurrency();\n        }\n    },\n    restricted_parents: ['trade_definition_multiplier'],\n    setCurrency: Blockly.Blocks.trade_definition_tradeoptions.setCurrency,\n    getRequiredValueInputs() {\n        const field_input = this.getInput('AMOUNT');\n        if (field_input.connection.targetBlock()) {\n            return {\n                AMOUNT: input => {\n                    const input_number = Number(input);\n                    this.error_message = localize('Stop loss must be a positive number.');\n                    return !isNaN(input_number) && input_number <= 0;\n                },\n            };\n        }\n        return {};\n    },\n};\n\nBlockly.JavaScript.multiplier_stop_loss = () => {};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode } from '@deriv/shared';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.multiplier_take_profit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Take Profit: {{ currency }} {{ take_profit }}', {\n                currency: '%1',\n                take_profit: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n            ),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Take Profit'),\n            description: localize(\n                'Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            event.type === Blockly.Events.END_DRAG\n        ) {\n            this.setCurrency();\n        }\n    },\n    restricted_parents: ['trade_definition_multiplier'],\n    setCurrency: Blockly.Blocks.trade_definition_tradeoptions.setCurrency,\n    getRequiredValueInputs() {\n        const field_input = this.getInput('AMOUNT');\n        if (field_input.connection.targetBlock()) {\n            return {\n                AMOUNT: input => {\n                    const input_number = Number(input);\n                    this.error_message = localize('Take profit must be a positive number.');\n                    return !isNaN(input_number) && input_number <= 0;\n                },\n            };\n        }\n        return {};\n    },\n};\n\nBlockly.JavaScript.multiplier_take_profit = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_compare = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['=', 'EQ'],\n                        ['\\u2260', 'NEQ'],\n                        ['\\u200F<', 'LT'],\n                        ['\\u200F\\u2264', 'LTE'],\n                        ['\\u200F>', 'GT'],\n                        ['\\u200F\\u2265', 'GTE'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Compares two values'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Compare'),\n            description: localize('This block compares two values and is used to build a conditional structure.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            A: null,\n            B: null,\n        };\n    },\n};\n\nBlockly.JavaScript.logic_compare = block => {\n    const operatorMapping = {\n        EQ: '==',\n        NEQ: '!=',\n        LT: '<',\n        LTE: '<=',\n        GT: '>',\n        GTE: '>=',\n    };\n\n    const operator = operatorMapping[block.getFieldValue('OP') || 'EQ'];\n    const order = ['==', '!='].includes(operator)\n        ? Blockly.JavaScript.ORDER_EQUALITY\n        : Blockly.JavaScript.ORDER_RELATIONAL;\n\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'A', order) || 'false';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'B', order) || 'false';\n\n    const code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark, minusIconDark } from '../images';\n\nBlockly.Blocks.controls_if = {\n    init() {\n        this.value_connections = [null];\n        this.statement_connections = [null];\n        this.else_statement_connection = null;\n        this.else_if_count = 0;\n        this.else_count = 0;\n\n        this.jsonInit(this.definition());\n        this.updateShape();\n    },\n    definition() {\n        return {\n            message0: localize('if {{ condition }} then', { condition: '%1' }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'IF0',\n                    check: 'Boolean',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO0',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Conditional block'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Conditional block'),\n            description: localize(\n                'This block evaluates a statement and will perform an action only when the statement is true.'\n            ),\n        };\n    },\n    /**\n     * Create XML to represent the number of else-if and else inputs.\n     * @return {Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n\n        if (this.else_if_count) {\n            container.setAttribute('elseif', this.else_if_count);\n        }\n\n        if (this.else_count) {\n            container.setAttribute('else', 1);\n        }\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the else-if and else inputs.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        this.else_if_count = parseInt(xmlElement.getAttribute('elseif')) || 0;\n        this.else_count = parseInt(xmlElement.getAttribute('else')) || 0;\n        this.rebuildShape();\n    },\n    rebuildShape() {\n        const value_connections = [null];\n        const statement_connections = [null];\n        const else_statement_connection = this.getInput('ELSE')?.connection?.targetConnection || null;\n\n        let i = 1;\n\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const input_names = this.getIfInputNames(i);\n            const if_input = this.getInput(input_names.IF);\n\n            if (!if_input) {\n                break;\n            }\n\n            const do_input = this.getInput(input_names.DO);\n            value_connections.push(if_input.connection.targetConnection);\n            statement_connections.push(do_input.connection.targetConnection);\n            i++;\n        }\n\n        this.updateShape();\n        this.reconnectChildBlocks(value_connections, statement_connections, else_statement_connection);\n    },\n    update(updateFn) {\n        Blockly.Events.setGroup(true);\n\n        const old_mutation_dom = this.mutationToDom();\n        const old_mutation = old_mutation_dom && Blockly.Xml.domToText(old_mutation_dom);\n        const is_rendered = this.rendered;\n\n        this.rendered = false;\n\n        if (updateFn) {\n            updateFn.call(this);\n        }\n\n        this.updateShape();\n        this.rendered = is_rendered;\n        this.initSvg();\n\n        const group = Blockly.Events.getGroup();\n        const new_mutation_dom = this.mutationToDom();\n        const new_mutation = new_mutation_dom && Blockly.Xml.domToText(new_mutation_dom);\n\n        if (old_mutation !== new_mutation) {\n            const change_event = new Blockly.Events.BlockChange(this, 'mutation', null, old_mutation, new_mutation);\n            Blockly.Events.fire(change_event);\n\n            setTimeout(() => {\n                Blockly.Events.setGroup(group);\n                this.bumpNeighbours_();\n                Blockly.Events.setGroup(false);\n            }, Blockly.BUMP_DELAY);\n        }\n\n        if (this.rendered) {\n            this.render();\n        }\n\n        Blockly.Events.setGroup(false);\n    },\n    updateShape() {\n        if (this.getInput('ELSE')) {\n            this.removeInput('ELSE');\n            this.removeInput('ELSE_LABEL');\n            this.removeInput('DELETE_ELSE');\n        }\n\n        let i = 1;\n\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const input_names = this.getIfInputNames(i);\n\n            if (!this.getInput(input_names.IF)) {\n                break;\n            }\n\n            this.removeInput(input_names.IF_LABEL);\n            this.removeInput(input_names.IF);\n            this.removeInput(input_names.THEN_LABEL);\n            this.removeInput(input_names.DELETE_ICON);\n            this.removeInput(input_names.DO);\n\n            i++;\n        }\n\n        if (this.getInput('MUTATOR')) {\n            this.removeInput('MUTATOR'); // \"+\" icon.\n        }\n\n        // Rebuild else if statements\n        for (let j = 1; j <= this.else_if_count; j++) {\n            const input_names = this.getIfInputNames(j);\n            const removeElseIf = () => this.modifyElseIf(false, j);\n\n            this.appendDummyInput(input_names.IF_LABEL).appendField(localize('else if'));\n            this.appendValueInput(input_names.IF).setCheck('Boolean');\n            this.appendDummyInput(input_names.THEN_LABEL).appendField(localize('then'));\n            this.appendDummyInput(input_names.DELETE_ICON).appendField(\n                new Blockly.FieldImage(minusIconDark, 24, 24, '-', removeElseIf)\n            );\n            this.appendStatementInput(input_names.DO);\n        }\n\n        // Rebuild else statement\n        if (this.else_count > 0) {\n            const removeElse = () => this.modifyElse(false);\n            this.appendDummyInput('ELSE_LABEL').appendField(localize('else'));\n            this.appendDummyInput('DELETE_ELSE').appendField(\n                new Blockly.FieldImage(minusIconDark, 24, 24, '-', removeElse, false)\n            );\n            this.appendStatementInput('ELSE');\n        }\n\n        const addElseIf = () => {\n            if (this.else_count === 0) {\n                this.modifyElse(true);\n            } else {\n                if (!this.else_if_count) {\n                    this.else_if_count = 0;\n                }\n\n                this.modifyElseIf(true);\n            }\n        };\n\n        // Re-add the \"+\" icon\n        this.appendDummyInput('MUTATOR').appendField(\n            new Blockly.FieldImage(plusIconDark, 24, 24, '+', addElseIf, false)\n        );\n\n        this.initSvg();\n        this.render();\n    },\n    storeConnections(arg = 0) {\n        this.value_connections = [null];\n        this.statement_connections = [null];\n        this.else_statement_connection = null;\n\n        for (let i = 1; i <= this.else_if_count; i++) {\n            if (arg !== i) {\n                const input_names = this.getIfInputNames(i);\n\n                this.value_connections.push(this.getInput(input_names.IF).connection.targetConnection);\n                this.statement_connections.push(this.getInput(input_names.DO).connection.targetConnection);\n            }\n        }\n\n        const else_input = this.getInput('ELSE');\n\n        if (else_input) {\n            this.else_statement_connection = else_input.connection.targetConnection;\n        }\n    },\n    reconnectChildBlocks(opt_value_conns, opt_statement_conns, opt_else_statement_conns) {\n        const value_connections = opt_value_conns ?? this.value_connections;\n        const statement_connections = opt_statement_conns ?? this.statement_connections;\n        const else_statement_connection = opt_else_statement_conns ?? this.else_statement_connection;\n\n        for (let i = 1; i <= this.else_if_count; i++) {\n            const input_names = this.getIfInputNames(i);\n            const value_connection = value_connections[i];\n            const statement_connection = statement_connections[i];\n\n            if (value_connection && this.getInput(input_names.IF)) {\n                Blockly.Mutator.reconnect(value_connection, this, input_names.IF);\n            }\n            if (statement_connection && this.getInput(input_names.DO)) {\n                Blockly.Mutator.reconnect(statement_connection, this, input_names.DO);\n            }\n        }\n\n        if (else_statement_connection && this.getInput('ELSE')) {\n            Blockly.Mutator.reconnect(else_statement_connection, this, 'ELSE');\n        }\n    },\n    modifyElse(is_add) {\n        const update = () => {\n            this.else_count += is_add ? 1 : -1;\n        };\n\n        this.storeConnections();\n        this.update(update);\n        this.reconnectChildBlocks();\n    },\n    modifyElseIf(is_add, opt_idx) {\n        this.storeConnections(opt_idx);\n\n        const update = () => {\n            this.else_if_count += is_add ? 1 : -1;\n        };\n\n        this.update(update);\n        this.reconnectChildBlocks();\n    },\n    getRequiredValueInputs() {\n        const required_inputs = {};\n        this.inputList\n            .filter(input => /^IF[0-9]*?$/.test(input.name))\n            .forEach(input => (required_inputs[input.name] = null));\n\n        return required_inputs;\n    },\n    getIfInputNames: idx => {\n        return {\n            IF_LABEL: `IF_LABEL${idx}`,\n            IF: `IF${idx}`,\n            THEN_LABEL: `THEN_LABEL${idx}`,\n            DELETE_ICON: `DELETE_ICON${idx}`,\n            DO: `DO${idx}`,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_if = block => {\n    // If/elseif/else condition.\n    let n = 0;\n    let code = '';\n\n    do {\n        const condition = Blockly.JavaScript.valueToCode(block, `IF${n}`, Blockly.JavaScript.ORDER_NONE) || 'false';\n\n        // i.e. (else)? if { // code }\n        const keyword = n > 0 ? 'else if' : 'if';\n        code += `\n        ${keyword} (${condition}) {\n            ${Blockly.JavaScript.statementToCode(block, `DO${n}`)}\n        }`;\n        n++;\n    } while (block.getInput(`IF${n}`));\n\n    if (block.getInput('ELSE')) {\n        code += `\n        else {\n            ${Blockly.JavaScript.statementToCode(block, 'ELSE')}\n        }`;\n    }\n\n    return `${code}\\n`;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_boolean = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'BOOL',\n                    options: [\n                        [localize('true'), 'TRUE'],\n                        [localize('false'), 'FALSE'],\n                    ],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns either True or False'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('True-False'),\n            description: localize('This is a single block that returns a boolean value, either true or false.'),\n        };\n    },\n};\n\nBlockly.JavaScript.logic_boolean = block => {\n    const code = block.getFieldValue('BOOL') === 'TRUE' ? 'true' : 'false';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_operation = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        [localize('and'), 'AND'],\n                        [localize('or'), 'OR'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Performs selected logic operation'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Logic operation'),\n            description: localize('This block performs the \"AND\" or the \"OR\" logic operation.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            A: null,\n            B: null,\n        };\n    },\n};\n\nBlockly.JavaScript.logic_operation = block => {\n    const selectedOperator = block.getFieldValue('OP');\n\n    let operator, order;\n\n    if (selectedOperator === 'AND') {\n        operator = '&&';\n        order = Blockly.JavaScript.ORDER_LOGICAL_AND;\n    } else if (selectedOperator === 'OR') {\n        operator = '||';\n        order = Blockly.JavaScript.ORDER_LOGICAL_OR;\n    }\n\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'A', Blockly.JavaScript.ORDER_ATOMIC) || 'false';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'B', Blockly.JavaScript.ORDER_ATOMIC) || 'false';\n\n    const code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_null = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: 'null',\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block assigns a null value to an item or statement.'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Null'),\n            description: localize('This block assigns a null value to an item or statement.'),\n        };\n    },\n};\nBlockly.JavaScript.logic_null = () => ['null', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_ternary = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('test {{ condition }}', { condition: '%1' }),\n            message1: localize('if true {{ return_value }}', { return_value: '%1' }),\n            message2: localize('if false {{ return_value }}', { return_value: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'IF',\n                    check: 'Boolean',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_value',\n                    name: 'THEN',\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_value',\n                    name: 'ELSE',\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'This block tests if a given value is true or false and returns “True” or “False” accordingly.'\n            ),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Test value'),\n            description: localize(\n                'This block tests if a given value is true or false and returns “True” or “False” accordingly.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            IF: null,\n            THEN: null,\n            ELSE: null,\n        };\n    },\n};\n\nBlockly.JavaScript.logic_ternary = block => {\n    const valueIf = Blockly.JavaScript.valueToCode(block, 'IF', Blockly.JavaScript.ORDER_CONDITIONAL) || 'false';\n    const valueThen = Blockly.JavaScript.valueToCode(block, 'THEN', Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n    const valueElse = Blockly.JavaScript.valueToCode(block, 'ELSE', Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n\n    const code = `(${valueIf} ? ${valueThen} : ${valueElse})`;\n    return [code, Blockly.JavaScript.ORDER_CONDITIONAL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_negate = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('not {{ boolean }}', { boolean: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'BOOL',\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Converts a given True or False to the opposite value'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Logic negation'),\n            description: localize('This block converts the boolean value (true or false) to its opposite.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            BOOL: null,\n        };\n    },\n};\n\nBlockly.JavaScript.logic_negate = block => {\n    const order = Blockly.JavaScript.ORDER_LOGICAL_NOT;\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'BOOL', order) || 'true';\n\n    const code = `!${argument0}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_change = {\n    /**\n     * Initializes the block, in most cases this calls the jsonInit function, in some\n     * cases it may add extra properties to the block object.\n     * https://developers.google.com/blockly/reference/js/Blockly.Block#jsonInit\n     */\n    init() {\n        this.jsonInit(this.definition());\n    },\n    /**\n     * Block definitions describe how a block looks and behaves, including the text,\n     * the colour, the shape, and what other blocks it can connect to. We've separated\n     * the block definition from the init function so we can search through it.\n     * https://developers.google.com/blockly/guides/create-custom-blocks/define-blocks\n     */\n    definition() {\n        return {\n            message0: localize('change {{ variable }} by {{ number }}', {\n                variable: '%1',\n                number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('item'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'DELTA',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('This block adds the given number to the selected variable'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    /**\n     * Meta returns an object with with properties that contain human readable strings,\n     * these strings are used in the flyout help content, as well as used for searching\n     * for specific blocks.\n     */\n    meta() {\n        return {\n            display_name: localize('Change variable'),\n            description: localize('This block adds the given number to the selected variable.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            DELTA: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_change = block => {\n    const variable = block.getFieldValue('VAR');\n    // eslint-disable-next-line no-underscore-dangle\n    const argument0 = Blockly.JavaScript.variableDB_.getName(variable, Blockly.Variables.NAME_TYPE);\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'DELTA', Blockly.JavaScript.ORDER_ADDITION) || '0';\n    const code = `${argument0} = (typeof ${argument0} === 'number' ? ${argument0} : 0) + ${argument1};`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_constant = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CONSTANT',\n                    options: [\n                        ['\\u03C0', 'PI'],\n                        ['\\u2107', 'E'],\n                        ['\\u03d5', 'GOLDEN_RATIO'],\n                        ['sqrt(2)', 'SQRT2'],\n                        ['sqrt(\\u00bd)', 'SQRT1_2'],\n                        ['\\u221e', 'INFINITY'],\n                    ],\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the selected constant values.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Mathematical constants'),\n            description: localize('This block gives you the selected constant values.'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_constant = block => {\n    const constant = block.getFieldValue('CONSTANT');\n\n    let code, order;\n\n    if (constant === 'PI') {\n        code = 'Math.PI';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'E') {\n        code = 'Math.E';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'GOLDEN_RATIO') {\n        code = '(1 + Math.sqrt(5)) / 2';\n        order = Blockly.JavaScript.ORDER_DIVISION;\n    } else if (constant === 'SQRT2') {\n        code = 'Math.SQRT2';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'SQRT1_2') {\n        code = 'Math.SQRT1_2';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'INFINITY') {\n        code = 'Infinity';\n        order = Blockly.JavaScript.ORDER_ATOMIC;\n    }\n\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_constrain = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('constrain {{ number }} low {{ low_number }} high {{ high_number }}', {\n                number: '%1',\n                low_number: '%2',\n                high_number: '%3',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'LOW',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'HIGH',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block constrains a given number so that it is within a set range.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Constrain within a range'),\n            description: localize('This block constrains a given number so that it is within a set range.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n            LOW: null,\n            HIGH: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_constrain = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'LOW', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const argument2 = Blockly.JavaScript.valueToCode(block, 'HIGH', Blockly.JavaScript.ORDER_COMMA) || '0';\n\n    const code = `Math.min(Math.max(${argument0}, ${argument1}), ${argument2})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_modulo = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('remainder of {{ number1 }} ÷ {{ number2 }}', {\n                number1: '%1',\n                number2: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'DIVIDEND',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'DIVISOR',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the remainder after a division'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Remainder after division'),\n            description: localize('Returns the remainder after the division of the given numbers.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            DIVIDEND: null,\n            DIVISOR: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_modulo = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'DIVIDEND', Blockly.JavaScript.ORDER_MODULUS) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'DIVISOR', Blockly.JavaScript.ORDER_MODULUS) || '0';\n\n    const code = `${argument0} % ${argument1}`;\n    return [code, Blockly.JavaScript.ORDER_MODULUS];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_number = {\n    init() {\n        this.jsonInit(this.definition());\n\n        const fieldInput = this.getField('NUM');\n        fieldInput.setValidator(input => this.numberValidator(input));\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_number',\n                    name: 'NUM',\n                    value: 0,\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Please use `.` as a decimal separator for fractional numbers.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Number'),\n            description: localize(\n                'Enter an integer or fractional number into this block. Please use `.` as a decimal separator for fractional numbers.'\n            ),\n        };\n    },\n    numberValidator(input) {\n        if (/^-?([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(input) && input < Number.MAX_SAFE_INTEGER) {\n            return undefined;\n        }\n        return null;\n    },\n};\n\nBlockly.JavaScript.math_number = block => {\n    const code = block.getFieldValue('NUM');\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_number_positive = {\n    init: Blockly.Blocks.math_number.init,\n    definition: Blockly.Blocks.math_number.definition,\n    meta() {\n        return {\n            display_name: localize('Math Number Positive'),\n            description: localize('Math Number Description'),\n        };\n    },\n    numberValidator(input) {\n        if (/^([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(input) && input < Number.MAX_SAFE_INTEGER) {\n            return undefined;\n        }\n        return null;\n    },\n};\n\nBlockly.JavaScript.math_number_positive = Blockly.JavaScript.math_number;\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_number_property = {\n    init() {\n        this.jsonInit(this.definition());\n\n        this.setOnChange(event => {\n            if (event.name === 'PROPERTY') {\n                const hasDivisorInput = this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY';\n                this.updateShape(hasDivisorInput);\n            }\n        });\n    },\n    definition() {\n        return {\n            message0: localize('{{ number }} is {{ type }}', {\n                number: '%1',\n                type: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'NUMBER_TO_CHECK',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'PROPERTY',\n                    options: [\n                        [localize('even'), 'EVEN'],\n                        [localize('odd'), 'ODD'],\n                        [localize('prime'), 'PRIME'],\n                        [localize('whole'), 'WHOLE'],\n                        [localize('positive'), 'POSITIVE'],\n                        [localize('negative'), 'NEGATIVE'],\n                        [localize('divisible by'), 'DIVISIBLE_BY'],\n                    ],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            toolip: localize('This block tests a given number according to the selection'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Test a number'),\n            description: localize(\n                'This block tests a given number according to the selection and it returns a value of “True” or “False”. Available options: Even, Odd, Prime, Whole, Positive, Negative, Divisible'\n            ),\n        };\n    },\n    domToMutation(xmlElement) {\n        const hasDivisorInput = xmlElement.getAttribute('divisor_input') === 'true';\n        this.updateShape(hasDivisorInput);\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const divisorInput = this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY';\n        container.setAttribute('divisor_input', divisorInput);\n        return container;\n    },\n    updateShape(hasDivisorInput) {\n        const inputExists = this.getInput('DIVISOR');\n\n        if (hasDivisorInput) {\n            if (!inputExists) {\n                this.appendValueInput('DIVISOR').setCheck('Number');\n                this.initSvg();\n                this.render(false);\n            }\n        } else {\n            this.removeInput('DIVISOR');\n        }\n    },\n    getRequiredValueInputs() {\n        return {\n            NUMBER_TO_CHECK: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_number_property = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'NUMBER_TO_CHECK', Blockly.JavaScript.ORDER_MODULUS) || '0';\n    const property = block.getFieldValue('PROPERTY');\n\n    let code;\n\n    if (property === 'PRIME') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('mathIsPrime', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(n) {\n                // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n                if (n == 2 || n == 3) {\n                    return true;\n                }\n\n                // False if n is NaN, negative, is 1, or not whole.\n                // And false if n is divisible by 2 or 3.\n                if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\n                    return false;\n                }\n\n                // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n                for (var x  = 6; x <= Math.sqrt(n) + 1; x += 6) {\n                    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }`,\n        ]);\n        code = `${functionName}(${argument0})`;\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    } else if (property === 'EVEN') {\n        code = `${argument0} % 2 === 0`;\n    } else if (property === 'ODD') {\n        code = `${argument0} % 2 === 1`;\n    } else if (property === 'WHOLE') {\n        code = `${argument0} % 1 === 0`;\n    } else if (property === 'POSITIVE') {\n        code = `${argument0} > 0`;\n    } else if (property === 'NEGATIVE') {\n        code = `${argument0} < 0`;\n    } else if (property === 'DIVISIBLE_BY') {\n        const divisor = Blockly.JavaScript.valueToCode(block, 'DIVISOR', Blockly.JavaScript.ORDER_MODULUS) || '0';\n        code = `${argument0} % ${divisor} == 0`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_EQUALITY];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_on_list = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('{{ calculation }} of list {{ input_list }}', {\n                calculation: '%1',\n                input_list: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        [localize('sum'), 'SUM'],\n                        [localize('min'), 'MIN'],\n                        [localize('max'), 'MAX'],\n                        [localize('average'), 'AVERAGE'],\n                        [localize('median'), 'MEDIAN'],\n                        [localize('mode'), 'MODE'],\n                        [localize('antimode'), 'ANTIMODE'],\n                        [localize('standard deviation'), 'STD_DEV'],\n                        [localize('random item'), 'RANDOM'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Aggregate operations'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Aggregate operations'),\n            description: localize(\n                'This block performs the following operations on a given list: sum, minimum, maximum, average, median, mode, antimode, standard deviation, random item.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        const type_list = [\n            'variables_get',\n            'lists_getSublist',\n            'ohlc_values',\n            'lists_split',\n            'ohlc',\n            'ticks',\n            'lists_repeat',\n            'lastDigitList',\n            'ohlc_values_in_list',\n            'procedures_callreturn',\n        ];\n        return {\n            LIST: () => {\n                return !type_list.includes(this.childBlocks_[0]?.type);\n            },\n        };\n    },\n};\n\n/* eslint-disable no-underscore-dangle */\nBlockly.JavaScript.math_on_list = block => {\n    const operation = block.getFieldValue('OP');\n\n    let code, list;\n\n    if (operation === 'SUM') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                },0);\n            }`,\n        ]);\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MIN') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return Math.min.apply(null, (recursiveList(myList, final_list) || [0]));\n            }`,\n        ]);\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_COMMA) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MAX') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return Math.max.apply(null, (recursiveList(myList, final_list) || [0]));\n            }`,\n        ]);\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_COMMA) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'AVERAGE') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                }, 0) / myList.length;\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MEDIAN') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMedian', [\n            `\n            Array.prototype.swap = function (x,y) {\n                var b = this[x];\n                this[x] = this[y];\n                this[y] = b;\n                return this;\n            }\n\n            function partition(arr, start, end){\n                var pivotValue = arr[end];\n                var pivotIndex = start;\n                for (var i = start; i < end; i++) {\n                    if (arr[i] < pivotValue) {\n                    arr.swap(pivotIndex, i);\n                    pivotIndex++;\n                    }\n                }\n                arr.swap(end, pivotIndex);\n                return pivotIndex;\n            };\n\n            function quickSort(arr) {\n                var stack = [];\n                stack.push(0);\n                stack.push(arr.length - 1);\n\n                while(stack[stack.length - 1] >= 0){\n                    end = stack.pop();\n                    start = stack.pop();\n                    pivotIndex = partition(arr, start, end);\n                    if (pivotIndex - 1 > start){\n                        stack.push(start);\n                        stack.push(pivotIndex - 1);\n                    }\n                    if (pivotIndex + 1 < end){\n                        stack.push(pivotIndex + 1);\n                        stack.push(end);\n                    }\n                }\n\n            }\n\n            function calculateMedian(final_list){\n                quickSort(final_list);\n\n                if (final_list.length % 2 == 0) {\n                    return (final_list[final_list.length / 2 - 1] + final_list[final_list.length / 2]) / 2;\n                }\n                return final_list[(final_list.length - 1) / 2];\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return calculateMedian(recursiveList(myList, final_list));\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MODE') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathModes', [\n            `\n            function calculateMathMode(values){\n                var modes = [];\n                var counts = [];\n                var maxCount = 0;\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                    maxCount = Math.max(thisCount, maxCount);\n                }\n\n                for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == maxCount) {\n                        modes.push(counts[j][0]);\n                    }\n                }\n\n                return modes;\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                return calculateMathMode(recursiveList(list, final_list));\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'ANTIMODE') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathAntiMode', [\n            `\n            function calculateMathAntiMode(values){\n                var antiMode = [];\n                var counts = [];\n                var minCount = 1;\n                var countArray = [];\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                }\n\n                 minCount = Math.min.apply(null, counts.map(function(element) {\n                     return element[1];\n                 }));\n\n                 for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == minCount) {\n                        antiMode.push(counts[j][0]);\n                    }\n                }\n\n                return antiMode;\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                return calculateMathAntiMode(recursiveList(list, final_list));\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'STD_DEV') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathStandardDeviation', [\n            `\n            function calculateMathStandardDeviation(numbers){\n                var n = numbers.length;\n                if (!n) {\n                    return null;\n                }\n\n                var mean = numbers.reduce(function(x, y) {\n                    return x + y;\n                }, 0) / n;\n\n                var variance = 0;\n                for (var j = 0; j < n; j++) {\n                    variance += Math.pow(numbers[j] - mean, 2);\n                }\n                variance = variance / n;\n                return Math.sqrt(variance);\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                return calculateMathStandardDeviation(recursiveList(list, final_list));\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'RANDOM') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathRandomList', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                var final_list = recursiveList(list, final_list);\n                var x = Math.floor(Math.random() * final_list.length);\n                return final_list[x];\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_random_float = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('random fraction'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a random fraction between 0.0 to 1.0'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Random fraction number'),\n            description: localize('This block gives you a random fraction between 0.0 to 1.0.'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_random_float = () => ['Math.random()', Blockly.JavaScript.ORDER_FUNCTION_CALL];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_random_int = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('random integer from {{ start_number }} to {{ end_number }}', {\n                start_number: '%1',\n                end_number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'FROM',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TO',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a random number from within a set range'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Random integer'),\n            description: localize('This block gives you a random number from within a set range.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            FROM: null,\n            TO: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_random_int = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'FROM', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'TO', Blockly.JavaScript.ORDER_COMMA) || '0';\n\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.provideFunction_('mathRandomInt', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(a, b) {\n            if (a > b) {\n                // Swap a and b to ensure a is smaller.\n                var c = a;\n                a = b;\n                b = c;\n            }\n            return Math.floor(Math.random() * (b - a + 1) + a);\n        }`,\n    ]);\n\n    const code = `${functionName}(${argument0}, ${argument1})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\n// https://github.com/google/blockly/blob/master/generators/javascript/math.js\nBlockly.Blocks.math_round = {\n    /**\n     * Check if a number is even, odd, prime, whole, positive, or negative\n     * or if it is divisible by certain number. Returns true or false.\n     * @this Blockly.Block\n     */\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['round', 'ROUND'],\n                        ['round up', 'ROUNDUP'],\n                        ['round down', 'ROUNDDOWN'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Rounds a given number to an integer'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Rounding operation'),\n            description: localize(\n                'This block rounds a given number according to the selection: round, round up, round down.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            NUM: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_round = block => {\n    const operation = block.getFieldValue('OP');\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n\n    let code;\n\n    if (operation === 'ROUND') {\n        code = `Math.round(${argument0})`;\n    } else if (operation === 'ROUNDUP') {\n        code = `Math.ceil(${argument0})`;\n    } else if (operation === 'ROUNDDOWN') {\n        code = `Math.floor(${argument0})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_arithmetic = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                    check: 'Number',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['+', 'ADD'],\n                        ['-', 'MINUS'],\n                        ['*', 'MULTIPLY'],\n                        ['/', 'DIVIDE'],\n                        ['^', 'POWER'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block performs arithmetic operations between two numbers.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Arithmetical operations'),\n            description: localize('This block performs arithmetic operations between two numbers.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            A: null,\n            B: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_arithmetic = block => {\n    const operators = {\n        ADD: ['+', Blockly.JavaScript.ORDER_ADDITION],\n        MINUS: ['-', Blockly.JavaScript.ORDER_SUBTRACTION],\n        MULTIPLY: ['*', Blockly.JavaScript.ORDER_MULTIPLICATION],\n        DIVIDE: ['/', Blockly.JavaScript.ORDER_DIVISION],\n        POWER: [null, Blockly.JavaScript.ORDER_COMMA], // Handle power separately.\n    };\n\n    const tuple = operators[block.getFieldValue('OP')];\n    const operator = tuple[0];\n    const order = tuple[1];\n\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'A', order) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'B', order) || '0';\n\n    let code;\n\n    // Power in JavaScript requires a special case since it has no operator.\n    if (!operator) {\n        code = `Math.pow(${argument0}, ${argument1})`;\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n\n    code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_single = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        [localize('square root'), 'ROOT'],\n                        [localize('absolute'), 'ABS'],\n                        ['-', 'NEG'],\n                        ['ln', 'LN'],\n                        ['log10', 'LOG10'],\n                        ['e^', 'EXP'],\n                        ['10^', 'POW10'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Operations on a given number'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Operations on a given number'),\n            description: localize('This block performs the selected operations to a given number.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            NUM: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_single = block => {\n    const operator = block.getFieldValue('OP');\n\n    let code, arg;\n\n    if (operator === 'NEG') {\n        // Negation is a special case given its different operator precedence.\n        arg = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_UNARY_NEGATION) || '0';\n        if (arg[0] === '-') {\n            // --3 is not legal in JS\n            arg = ` ${arg}`;\n        }\n        code = `-${arg}`;\n        return [code, Blockly.JavaScript.ORDER_UNARY_NEGATION];\n    }\n\n    if (['SIN', 'COS', 'TAN'].includes(operator)) {\n        arg = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_DIVISION) || '0';\n    } else {\n        arg = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_NONE) || '0';\n    }\n\n    // First, handle cases which generate values that don't need parentheses\n    // wrapping the code.\n    if (operator === 'ABS') {\n        code = `Math.abs(${arg})`;\n    } else if (operator === 'ROOT') {\n        code = `Math.sqrt(${arg})`;\n    } else if (operator === 'LN') {\n        code = `Math.log(${arg})`;\n    } else if (operator === 'EXP') {\n        code = `Math.pow(Math.E, ${arg})`;\n    } else if (operator === 'POW10') {\n        code = `Math.pow(10, ${arg})`;\n    } else if (operator === 'ROUND') {\n        code = `Math.round(${arg})`;\n    } else if (operator === 'ROUNDUP') {\n        code = `Math.ceil(${arg})`;\n    } else if (operator === 'ROUNDDOWN') {\n        code = `Math.floor(${arg})`;\n    } else if (operator === 'SIN') {\n        code = `Math.sin(${arg} / 180 * Math.PI)`;\n    } else if (operator === 'COS') {\n        code = `Math.cos(${arg} / 180 * Math.PI)`;\n    } else if (operator === 'TAN') {\n        code = `Math.tan(${arg} / 180 * Math.PI)`;\n    }\n\n    if (code) {\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n\n    // Second, handle cases which generate values that may need parentheses\n    // wrapping the code.\n    if (operator === 'LOG10') {\n        code = `Math.log(${arg}) / Math.log(10)`;\n    } else if (operator === 'ASIN') {\n        code = `Math.asin(${arg}) / Math.PI * 180`;\n    } else if (operator === 'ACOS') {\n        code = `Math.acos(${arg}) / Math.PI * 180`;\n    } else if (operator === 'ATAN') {\n        code = `Math.atan(${arg}) / Math.PI * 180`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_DIVISION];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_trig = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['sin', 'SIN'],\n                        ['cos', 'COS'],\n                        ['tan', 'TAN'],\n                        ['asin', 'ASIN'],\n                        ['acos', 'ACOS'],\n                        ['atan', 'ATAN'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Trigonometric functions'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trigonometric functions'),\n            description: localize('This block performs trigonometric functions.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            NUM: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_trig = Blockly.JavaScript.math_single;\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.text = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'TEXT',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Enter some text here'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text'),\n            description: localize('A  block that can contain text.'),\n        };\n    },\n};\n\nBlockly.JavaScript.text = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.quote_(block.getFieldValue('TEXT'));\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark } from '../images';\nimport { runGroupedEvents } from '../../utils';\n\nBlockly.Blocks.text_join = {\n    protected_statements: ['STACK'],\n    allowed_children: ['text_statement'],\n    init() {\n        const field_image = new Blockly.FieldImage(plusIconDark, 25, 25, '', this.onIconClick.bind(this));\n        this.jsonInit(this.definition());\n        this.appendDummyInput('ADD_ICON').appendField(field_image);\n        this.moveInputBefore('ADD_ICON', 'STACK');\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to create text with', { variable: '%1' }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: localize('text'),\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STACK',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Text join'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text join'),\n            description: localize(\n                'Creates a single text string from combining the text value of each attached item, without spaces in between. The number of items can be added accordingly.'\n            ),\n        };\n    },\n    onIconClick() {\n        if (this.workspace.options.readOnly || this.isInFlyout) {\n            return;\n        }\n\n        runGroupedEvents(false, () => {\n            const text_block = this.workspace.newBlock('text_statement');\n            text_block.required_parent_id = this.id;\n            text_block.setMovable(true);\n            text_block.initSvg();\n            text_block.render();\n\n            const shadow_block = this.workspace.newBlock('text');\n            shadow_block.setShadow(true);\n            shadow_block.setFieldValue('', 'TEXT');\n            shadow_block.initSvg();\n            shadow_block.render();\n\n            const text_input = text_block.getInput('TEXT');\n            text_input.connection.connect(shadow_block.outputConnection);\n\n            const connection = this.getLastConnectionInStatement('STACK');\n            connection.connect(text_block.previousConnection);\n        });\n\n        // TODO: Open editor and focus so user can add string right away?\n        // const inputField = shadow_block.getField('TEXT');\n        // inputField.showEditor_();\n    },\n    onchange: Blockly.Blocks.lists_create_with.onchange,\n};\n\n// Blockly.JavaScript.text_join = Blockly.JavaScript.lists_create_with;\nBlockly.JavaScript.text_join = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const blocks_in_stack = block.getBlocksInStatement('STACK');\n    const elements = blocks_in_stack.map(b => {\n        const value = Blockly.JavaScript[b.type](b);\n        return Array.isArray(value) ? value[0] : value;\n    });\n\n    const code = `${var_name} = [${elements}].join(\" \");\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { minusIconDark } from '../images';\nimport { runIrreversibleEvents } from '../../utils';\n\nBlockly.Blocks.text_statement = {\n    required_parent_type: 'text_join',\n    init() {\n        this.required_parent_id = '';\n        const field_image = new Blockly.FieldImage(minusIconDark, 25, 25, '', this.onIconClick.bind(this));\n        this.jsonInit(this.definition());\n        this.appendDummyInput('REMOVE_ICON').appendField(field_image);\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text Statement'),\n            description: '',\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        const surround_parent = this.getSurroundParent();\n\n        if (event.type === Blockly.Events.BLOCK_CREATE) {\n            this.setMovable(true);\n            if (!this.required_parent_id && surround_parent?.type === this.required_parent_type) {\n                this.required_parent_id = surround_parent.id;\n            }\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            const stack_blocks = Blockly.getMainWorkspace().getBlockById(event.blockId);\n\n            if (this.required_parent_id && (!surround_parent || surround_parent.id !== this.required_parent_id)) {\n                const original_parent = Blockly.getMainWorkspace().getBlockById(this.required_parent_id);\n\n                if (original_parent) {\n                    const first_block_in_stack = original_parent.getInputTargetBlock('STACK');\n\n                    if (first_block_in_stack) {\n                        const last_connection = original_parent.getLastConnectionInStatement('STACK');\n                        runIrreversibleEvents(() => {\n                            last_connection.connect(this.previousConnection);\n                        });\n                    } else {\n                        runIrreversibleEvents(() => {\n                            original_parent.getInput('STACK').connection.connect(stack_blocks.previousConnection);\n                        });\n                    }\n                }\n            }\n        }\n    },\n    onIconClick: Blockly.Blocks.lists_statement.onIconClick,\n};\n\nBlockly.JavaScript.text_statement = block => {\n    const code = `String(${Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_ATOMIC)})`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_append = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('to {{ variable }} append text {{ input_text }}', {\n                variable: '%1',\n                input_text: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('text'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Appends a given text to a variable'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text Append'),\n            description: localize('Appends a given text to a variable.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_append = block => {\n    const forceString = value => {\n        const strRegExp = /^\\s*'([^']|\\\\')*'\\s*$/;\n        if (strRegExp.test(value)) {\n            return value;\n        }\n        return `String(${value})`;\n    };\n\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    const value = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_NONE) || \"''\";\n\n    const code = `${varName} += ${forceString(value)};\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_length = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('length of {{ input_text }}', { input_text: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Text String Length'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text String Length'),\n            description: localize(\n                'Returns the number of characters of a given string of text, including numbers, spaces, punctuation marks, and symbols.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_length = block => {\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"''\";\n\n    const code = `${text}.length`;\n    return [code, Blockly.JavaScript.ORDER_MEMBER];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_isEmpty = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('text {{ input_text }} is empty', { input_text: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    check: ['String'],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Tests if a given text string is empty'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text Is empty'),\n            description: localize('Tests whether a string of text is empty. Returns a boolean value (true or false).'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_isEmpty = block => {\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n    const isVariable = block.workspace.getAllVariables().findIndex(variable => variable.name === text) !== -1;\n\n    const code = isVariable ? `!${text} || !${text}.length` : `!${text}.length`;\n    return [code, Blockly.JavaScript.ORDER_LOGICAL_NOT];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_indexOf = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'in text {{ input_text1 }} find {{ first_or_last }} occurence of text {{ input_text2 }}',\n                {\n                    input_text1: '%1',\n                    first_or_last: '%2',\n                    input_text2: '%3',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'END',\n                    options: [\n                        [localize('first'), 'FIRST'],\n                        [localize('last'), 'LAST'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'FIND',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Search for a given string'),\n            cateogry: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Search for string'),\n            description: localize(\n                'Searches through a string of text for a specific occurrence of a given character or word, and returns the position.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n            FIND: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_indexOf = block => {\n    const functionName = block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';\n    const substring = Blockly.JavaScript.valueToCode(block, 'FIND', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n\n    const code = `${text}.${functionName}(${substring})`;\n    if (block.workspace.options.oneBasedIndex) {\n        return [`${code} + 1`, Blockly.JavaScript.ORDER_ADDITION];\n    }\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_charAt = {\n    init() {\n        this.jsonInit(this.definition());\n\n        const dropdown = this.getField('WHERE');\n        dropdown.setValidator(value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== this.isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.updateAt(true);\n    },\n    definition() {\n        return {\n            message0: localize('in text %1 get %2'),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'WHERE',\n                    options: [\n                        [localize('letter #'), 'FROM_START'],\n                        [localize('letter # from end'), 'FROM_END'],\n                        [localize('first letter'), 'FIRST'],\n                        [localize('last letter'), 'LAST'],\n                        [localize('random letter'), 'RANDOM'],\n                    ],\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns a specific character from a given string'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get character'),\n            description: localize(\n                'Returns the specific character from a given string of text according to the selected option. '\n            ),\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('at', !!this.isAt);\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        }\n\n        this.isAt = isAt;\n        this.initSvg();\n        this.render(false);\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n            AT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_charAt = block => {\n    const where = block.getFieldValue('WHERE') || 'FROM_START';\n    const textOrder = where === 'RANDOM' ? Blockly.JavaScript.ORDER_NONE : Blockly.JavaScript.ORDER_MEMBER;\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', textOrder) || \"''\";\n\n    let code;\n\n    if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT');\n        // Adjust index if using one-based indices\n        code = `${text}.charAt(${at})`;\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, true);\n        code = `${text}.slice(${at}).charAt(0)`;\n    } else if (where === 'FIRST') {\n        code = `${text}.charAt(0)`;\n    } else if (where === 'LAST') {\n        code = `${text}.slice(-1)`;\n    } else if (where === 'RANDOM') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('textRandomLetter', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(text) {\n                var x = Math.floor(Math.random() * text.length);\n                return text[x];\n            }`,\n        ]);\n        code = `${functionName}(${text})`;\n    }\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_getSubstring = {\n    init() {\n        this.WHERE_OPTIONS_1 = [\n            [localize('letter #'), 'FROM_START'],\n            [localize('letter # from end'), 'FROM_END'],\n            [localize('first'), 'FIRST'],\n        ];\n        this.WHERE_OPTIONS_2 = [\n            [localize('letter #'), 'FROM_START'],\n            [localize('letter # from end'), 'FROM_END'],\n            [localize('last'), 'LAST'],\n        ];\n\n        this.jsonInit(this.definition());\n        this.updateAt(1, true);\n        this.updateAt(2, true);\n    },\n    definition() {\n        return {\n            message0: localize(\n                'in text {{ input_text }} get substring from {{ position1 }} {{ index1 }} to {{ position2 }} {{ index2 }}',\n                {\n                    input_text: '%1',\n                    position1: '%2',\n                    index1: '%3',\n                    position2: '%4',\n                    index2: '%5',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'STRING',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'WHERE1',\n                    options: this.WHERE_OPTIONS_1,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'AT1',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'WHERE2',\n                    options: this.WHERE_OPTIONS_2,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'AT2',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns a specific portion of a given string of text.'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get substring'),\n            description: localize('Returns a specific portion of a given string of text.'),\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt1 = this.getInput('AT1').type === Blockly.INPUT_VALUE;\n        const isAt2 = this.getInput('AT2').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at1', isAt1);\n        container.setAttribute('at2', isAt2);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt1 = xmlElement.getAttribute('at1') === 'true';\n        const isAt2 = xmlElement.getAttribute('at2') === 'true';\n\n        this.updateAt(1, isAt1);\n        this.updateAt(2, isAt2);\n    },\n    updateAt(n, is_at) {\n        const input = this.getInput(`AT${n}`);\n        let old_label_text;\n\n        // Keep track of initial FieldLabel, we'll restore this when\n        // input types were changed.\n        if (input) {\n            input.fieldRow.some(field => {\n                if (field instanceof Blockly.FieldLabel) {\n                    old_label_text = field.text_; // eslint-disable-line no-underscore-dangle\n                }\n            });\n            this.removeInput(`AT${n}`);\n        }\n\n        const new_input = is_at ? this.appendValueInput(`AT${n}`).setCheck('Number') : this.appendDummyInput(`AT${n}`);\n\n        if (old_label_text) {\n            new_input.insertFieldAt(0, new Blockly.FieldLabel(old_label_text));\n        }\n\n        const menu = new Blockly.FieldDropdown(this[`WHERE_OPTIONS_${n}`], value => {\n            const new_at = ['FROM_START', 'FROM_END'].includes(value);\n\n            if (new_at !== is_at) {\n                this.updateAt(n, new_at);\n                this.setFieldValue(value, `WHERE${n}`);\n\n                return null;\n            }\n\n            return undefined;\n        });\n\n        this.getInput(`AT${n}`).appendField(menu, `WHERE${n}`);\n\n        if (n === 1) {\n            this.moveInputBefore('AT1', 'AT2');\n        }\n\n        this.initSvg();\n        this.render(false);\n    },\n    getRequiredValueInputs() {\n        const hasInput = input_name => this.getInput(input_name)?.type === Blockly.INPUT_VALUE;\n        return {\n            STRING: emptyTextValidator,\n            ...(hasInput('AT1') ? { AT1: emptyTextValidator } : {}),\n            ...(hasInput('AT2') ? { AT2: emptyTextValidator } : {}),\n        };\n    },\n};\n\nBlockly.JavaScript.text_getSubstring = block => {\n    const text = Blockly.JavaScript.valueToCode(block, 'STRING', Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"''\";\n    const where1 = block.getFieldValue('WHERE1');\n    const where2 = block.getFieldValue('WHERE2');\n\n    let at1, at2, code;\n\n    if (where1 === 'FIRST' && where2 === 'LAST') {\n        code = text;\n    } else if (\n        text.match(/^'?\\w+'?$/) ||\n        (where1 !== 'FROM_END' && where1 !== 'LAST' && where2 !== 'FROM_END' && where2 !== 'LAST')\n    ) {\n        switch (where1) {\n            case 'FROM_START': {\n                at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n                break;\n            }\n            case 'FROM_END': {\n                at1 = Blockly.JavaScript.getAdjusted(block, 'AT1', 1, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n                at1 = `${text}.length - ${at1}`;\n                break;\n            }\n            case 'FIRST': {\n                at1 = '0';\n                break;\n            }\n            default:\n                break;\n        }\n\n        switch (where2) {\n            case 'FROM_START': {\n                at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 1);\n                break;\n            }\n            case 'FROM_END': {\n                at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 0, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n                at2 = `${text}.length - ${at2}`;\n                break;\n            }\n            case 'LAST': {\n                at2 = `${text}.length`;\n                break;\n            }\n            default:\n                break;\n        }\n\n        code = `${text}.slice(${at1}, ${at2})`;\n    } else {\n        at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        at2 = Blockly.JavaScript.getAdjusted(block, 'AT2');\n\n        const getIndex = (string_name, where, opt_at) => {\n            if (where === 'FIRST') {\n                return '0';\n            } else if (where === 'FROM_END') {\n                return `${string_name}.length - 1 - ${opt_at}`;\n            } else if (where === 'LAST') {\n                return `${string_name}.length - 1`;\n            }\n            return opt_at;\n        };\n        const where_pascal_case = {\n            FIRST: 'First',\n            LAST: 'Last',\n            FROM_START: 'FromStart',\n            FROM_END: 'FromEnd',\n        };\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_(\n            `subsequence${where_pascal_case[where1]}${where_pascal_case[where2]}`,\n            [\n                // eslint-disable-next-line no-underscore-dangle\n                `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(\n                    sequence\n                    ${where1 === 'FROM_END' || where1 === 'FROM_START' ? ', at1' : ''}\n                    ${where2 === 'FROM_END' || where2 === 'FROM_START' ? ', at2' : ''}\n                ) {\n                    var start = ${getIndex('sequence', where1, 'at1')};\n                    var end   = ${getIndex('sequence', where2, 'at2')} + 1;\n                    \n                    return sequence.slice(start, end);\n                }`,\n            ]\n        );\n\n        code = `${functionName}(\n            ${text}\n            ${where1 === 'FROM_END' || where1 === 'FROM_START' ? `, ${at1}` : ''}\n            ${where2 === 'FROM_END' || where2 === 'FROM_START' ? `, ${at2}` : ''}\n        )`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_changeCase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Transform {{ input_text }} to {{ transform_type }}', {\n                input_text: '%1',\n                transform_type: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'CASE',\n                    options: [\n                        [localize('UPPER CASE'), 'UPPERCASE'],\n                        [localize('lower case'), 'LOWERCASE'],\n                        [localize('Title Case'), 'TITLECASE'],\n                    ],\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Changes text case accordingly'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Change text case'),\n            description: localize(\n                'Changes the capitalisation of a string of text to Upper case, Lower case, Title case.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_changeCase = block => {\n    const operators = {\n        UPPERCASE: '.toUpperCase()',\n        LOWERCASE: '.toLowerCase()',\n        TITLECASE: null,\n    };\n    const operator = operators[block.getFieldValue('CASE')];\n    const textOrder = operator ? Blockly.JavaScript.ORDER_MEMBER : Blockly.JavaScript.ORDER_NONE;\n    const text = Blockly.JavaScript.valueToCode(block, 'TEXT', textOrder) || \"''\";\n\n    let code;\n\n    if (operator) {\n        code = `${text}${operator}`;\n    } else {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('textToTitleCase', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(str) {\n                return str.toLowerCase().split(' ').map(function(word) {\n                    return word.replace(word[0], word[0].toUpperCase());\n                }).join(' ');\n            }`,\n        ]);\n        code = `${functionName}(${text})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_trim = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('trim spaces from {{ side }} of {{ input_text }}', { side: '%1', input_text: '%2' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MODE',\n                    options: [\n                        [localize('both sides'), 'BOTH'],\n                        [localize('left side'), 'LEFT'],\n                        [localize('right side'), 'RIGHT'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Trims spaces'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trim spaces'),\n            description: localize('Trims the spaces within a given string or text.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_trim = block => {\n    const operators = {\n        LEFT: \".replace(/^[\\\\s\\\\xa0]+/, '')\",\n        RIGHT: \".replace(/[\\\\s\\\\xa0]+$/, '')\",\n        BOTH: '.trim()',\n    };\n\n    const operator = operators[block.getFieldValue('MODE')];\n    const text = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n\n    const code = `${text}${operator}`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_print = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('print {{ input_text }}', { input_text: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Displays a dialog window with a message'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Print'),\n            description: localize(\n                'This block displays a dialog box with a customised message. When the dialog box is displayed, your strategy is paused and will only resume after you click \"OK\".'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_print = block => {\n    const msg = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    const code = `window.alert(${msg});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_prompt_ext = {\n    init() {\n        this.jsonInit(this.definition());\n        const typeField = this.getField('TYPE');\n        typeField.setValidator(value => {\n            if (value === 'TEXT') {\n                this.setOutput(true, 'String');\n            } else if (value === 'NUMBER') {\n                this.setOutput(true, 'Number');\n            }\n            this.initSvg();\n            this.render(false);\n            return undefined;\n        });\n    },\n    definition() {\n        return {\n            message0: localize('prompt for {{ string_or_number }} with message {{ input_text }}', {\n                string_or_number: '%1',\n                input_text: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TYPE',\n                    options: [\n                        [localize('string'), 'TEXT'],\n                        [localize('number'), 'NUMBER'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            output:\n                typeof this.getFieldValue === 'function' && this.getFieldValue('TYPE') === 'TEXT' ? 'String' : 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            tooltip: localize('Request an input'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Request an input'),\n            description: localize(\n                'This block displays a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number and can be assigned to a variable. When the dialog box is displayed, your strategy is paused and will only resume after you enter a response and click \"OK\".'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_prompt_ext = block => {\n    let msg, code;\n\n    if (block.getField('TEXT')) {\n        // Internal message\n        // eslint-disable-next-line no-underscore-dangle\n        msg = Blockly.JavaScript.quote_(block.getFieldValue('TEXT'));\n    } else {\n        // External message\n        msg = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    }\n\n    if (block.getFieldValue('TYPE') === 'NUMBER') {\n        code = `parseFloat(window.prompt(${msg}))`;\n    } else {\n        code = `window.prompt(${msg})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { reaction } from 'mobx';\nimport { api_base } from '../services/api/api-base';\n\nclass DBotStoreInterface {\n    // TODO here we are suppose to define an interface and implement fields of DBotStore.\n    handleFileChange = () => {\n        throw Error('handleFileChange has not been implemented.');\n    };\n\n    toggleStrategyModal = () => {\n        throw Error('handleFileChange has not been implemented.');\n    };\n}\n\nclass DBotStore extends DBotStoreInterface {\n    static singleton = null;\n\n    constructor(store) {\n        super();\n        this.is_mobile = store.is_mobile || false;\n        this.is_dark_mode_on = store.is_dark_mode_on || false;\n        this.client = store.client;\n        this.dashboard = store.dashboard;\n        this.flyout = store.flyout;\n        this.toolbar = store.toolbar;\n        this.toolbox = store.toolbox;\n        this.save_modal = store.save_modal;\n        this.load_modal = store.load_modal;\n        this.setContractUpdateConfig = store.setContractUpdateConfig;\n        this.toggleStrategyModal = store.toggleStrategyModal;\n        this.handleFileChange = store.handleFileChange;\n        this.setLoading = store.setLoading;\n\n        reaction(\n            () => this.client.loginid,\n            () => api_base.createNewInstance(this.client.loginid)\n        );\n    }\n\n    static setInstance(store) {\n        this.singleton = new DBotStore(store);\n        return this.instance;\n    }\n\n    static get instance() {\n        return this.singleton;\n    }\n}\n\nexport default DBotStore;\n","import { Map } from 'immutable';\nimport { historyToTicks, getLast } from 'binary-utils';\nimport { doUntilDone, getUUID } from '../tradeEngine/utils/helpers';\nimport { observer as globalObserver } from '../../utils/observer';\nimport { api_base } from './api-base';\n\nconst parseTick = tick => ({\n    epoch: +tick.epoch,\n    quote: +tick.quote,\n});\n\nconst parseOhlc = ohlc => ({\n    open: +ohlc.open,\n    high: +ohlc.high,\n    low: +ohlc.low,\n    close: +ohlc.close,\n    epoch: +(ohlc.open_time || ohlc.epoch),\n});\n\nconst parseCandles = candles => candles.map(t => parseOhlc(t));\n\nconst updateTicks = (ticks, newTick) => (getLast(ticks).epoch >= newTick.epoch ? ticks : [...ticks.slice(1), newTick]);\n\nconst updateCandles = (candles, ohlc) => {\n    const lastCandle = getLast(candles);\n    if (\n        (lastCandle.open === ohlc.open &&\n            lastCandle.high === ohlc.high &&\n            lastCandle.low === ohlc.low &&\n            lastCandle.close === ohlc.close &&\n            lastCandle.epoch === ohlc.epoch) ||\n        lastCandle.epoch > ohlc.epoch\n    ) {\n        return candles;\n    }\n    const prevCandles = lastCandle.epoch === ohlc.epoch ? candles.slice(0, -1) : candles.slice(1);\n    return [...prevCandles, ohlc];\n};\n\nconst getType = isCandle => (isCandle ? 'candles' : 'ticks');\n\nexport default class TicksService {\n    constructor() {\n        this.ticks = new Map();\n        this.candles = new Map();\n        this.tickListeners = new Map();\n        this.ohlcListeners = new Map();\n        this.subscriptions = new Map();\n        this.ticks_history_promise = null;\n        this.active_symbols_promise = null;\n        this.candles_promise = null;\n\n        this.observe();\n    }\n\n    requestPipSizes() {\n        if (this.pipSizes) {\n            return Promise.resolve(this.pipSizes);\n        }\n\n        if (!this.active_symbols_promise) {\n            this.active_symbols_promise = new Promise(resolve => {\n                this.pipSizes = api_base.pip_sizes;\n                resolve(this.pipSizes);\n            });\n        }\n        return this.active_symbols_promise;\n    }\n\n    async request(options) {\n        return new Promise((resolve, reject) => {\n            const { symbol, granularity } = options;\n\n            const style = getType(granularity);\n\n            if (style === 'ticks' && this.ticks.has(symbol)) {\n                resolve(this.ticks.get(symbol));\n            }\n\n            if (style === 'candles' && this.candles.hasIn([symbol, Number(granularity)])) {\n                resolve(this.candles.getIn([symbol, Number(granularity)]));\n            }\n            this.requestStream({ ...options, style })\n                .then(res => {\n                    resolve(res);\n                })\n                .catch(e => {\n                    reject(e);\n                });\n        });\n    }\n\n    monitor(options) {\n        return new Promise((resolve, reject) => {\n            const { symbol, granularity, callback } = options;\n\n            const type = getType(granularity);\n\n            const key = getUUID();\n            this.request(options)\n                .then(() => {\n                    if (type === 'ticks') {\n                        this.tickListeners = this.tickListeners.setIn([symbol, key], callback);\n                        globalObserver.emit('bot.bot_ready');\n                        api_base.toggleRunButton(false);\n                    } else {\n                        this.ohlcListeners = this.ohlcListeners.setIn([symbol, Number(granularity), key], callback);\n                    }\n                    resolve(key);\n                })\n                .catch(e => {\n                    globalObserver.emit('Error', e);\n                    this.ticks_history_promise = null;\n                    api_base.toggleRunButton(false);\n                    reject(e);\n                });\n        });\n    }\n\n    async stopMonitor(options) {\n        const { symbol, granularity, key } = options;\n        const type = getType(granularity);\n\n        if (type === 'ticks' && this.tickListeners.hasIn([symbol, key])) {\n            this.tickListeners = this.tickListeners.deleteIn([symbol, key]);\n        }\n\n        if (type === 'candles' && this.ohlcListeners.hasIn([symbol, Number(granularity), key])) {\n            this.ohlcListeners = this.ohlcListeners.deleteIn([symbol, Number(granularity), key]);\n        }\n\n        await this.unsubscribeIfEmptyListeners(options);\n    }\n\n    async unsubscribeIfEmptyListeners(options) {\n        const { symbol, granularity } = options;\n\n        let needToUnsubscribe = false;\n\n        const tickListener = this.tickListeners.get(symbol);\n\n        if (tickListener && !tickListener.size) {\n            this.tickListeners = this.tickListeners.delete(symbol);\n            this.ticks = this.ticks.delete(symbol);\n            needToUnsubscribe = true;\n        }\n\n        const ohlcListener = this.ohlcListeners.getIn([symbol, Number(granularity)]);\n\n        if (ohlcListener && !ohlcListener.size) {\n            this.ohlcListeners = this.ohlcListeners.deleteIn([symbol, Number(granularity)]);\n            this.candles = this.candles.deleteIn([symbol, Number(granularity)]);\n            needToUnsubscribe = true;\n        }\n\n        if (needToUnsubscribe) {\n            await this.unsubscribeAllAndSubscribeListeners(symbol);\n        }\n    }\n\n    unsubscribeAllAndSubscribeListeners(symbol) {\n        const ohlcSubscriptions = this.subscriptions.getIn(['ohlc', symbol]);\n\n        const subscription = [...(ohlcSubscriptions ? Array.from(ohlcSubscriptions.values()) : [])];\n\n        Promise.all(subscription.map(id => doUntilDone(() => api_base.api.forget(id))));\n\n        this.subscriptions = new Map();\n    }\n\n    updateTicksAndCallListeners(symbol, ticks) {\n        if (this.ticks.get(symbol) === ticks) {\n            return;\n        }\n        this.ticks = this.ticks.set(symbol, ticks);\n\n        const listeners = this.tickListeners.get(symbol);\n\n        if (listeners) {\n            listeners.forEach(callback => callback(this.ticks.get(symbol)));\n        }\n    }\n\n    updateCandlesAndCallListeners(address, candles) {\n        if (this.ticks.getIn(address) === candles) {\n            return;\n        }\n        this.candles = this.candles.setIn(address, candles);\n\n        const listeners = this.ohlcListeners.getIn(address);\n\n        if (listeners) {\n            listeners.forEach(callback => callback(this.candles.getIn(address)));\n        }\n    }\n\n    observe() {\n        if (api_base.api) {\n            const subscription = api_base.api.onMessage().subscribe(({ data }) => {\n                if (data.msg_type === 'tick') {\n                    const { tick } = data;\n                    const { symbol, id } = tick;\n                    if (this.ticks.has(symbol)) {\n                        this.subscriptions = this.subscriptions.setIn(['tick', symbol], id);\n                        this.updateTicksAndCallListeners(symbol, updateTicks(this.ticks.get(symbol), parseTick(tick)));\n                    }\n                }\n\n                if (data.msg_type === 'ohlc') {\n                    const { ohlc } = data;\n                    const { symbol, granularity, id } = ohlc;\n                    if (this.candles.hasIn([symbol, Number(granularity)])) {\n                        this.subscriptions = this.subscriptions.setIn(['ohlc', symbol, Number(granularity)], id);\n                        const address = [symbol, Number(granularity)];\n                        this.updateCandlesAndCallListeners(\n                            address,\n                            updateCandles(this.candles.getIn(address), parseOhlc(ohlc))\n                        );\n                    }\n                }\n            });\n            api_base.pushSubscription(subscription);\n        }\n    }\n\n    requestStream(options) {\n        const { style } = options;\n        const stringified_options = JSON.stringify(options);\n\n        if (style === 'ticks') {\n            if (this.ticks_history_promise?.stringified_options !== stringified_options) {\n                this.ticks_history_promise = {\n                    promise: this.requestPipSizes().then(() => this.requestTicks(options)),\n                    stringified_options,\n                };\n            }\n\n            return this.ticks_history_promise.promise;\n        }\n\n        if (style === 'candles') {\n            if (!this.candles_promise || this.candles_promise.stringified_options !== stringified_options) {\n                this.candles_promise = {\n                    promise: this.requestPipSizes().then(() => this.requestTicks(options)),\n                    stringified_options,\n                };\n            }\n\n            return this.candles_promise.promise;\n        }\n\n        return [];\n    }\n\n    requestTicks(options) {\n        const { symbol, granularity, style } = options;\n        const request_object = {\n            ticks_history: symbol,\n            subscribe: 1,\n            end: 'latest',\n            count: 1000,\n            granularity: granularity ? Number(granularity) : undefined,\n            style,\n        };\n        return new Promise((resolve, reject) => {\n            if (!api_base.api) resolve([]);\n            doUntilDone(() => api_base.api.send(request_object), [], api_base)\n                .then(r => {\n                    if (style === 'ticks') {\n                        const ticks = historyToTicks(r.history);\n\n                        this.updateTicksAndCallListeners(symbol, ticks);\n                        resolve(ticks);\n                    } else {\n                        const candles = parseCandles(r.candles);\n\n                        this.updateCandlesAndCallListeners([symbol, Number(granularity)], candles);\n\n                        resolve(candles);\n                    }\n                })\n                .catch(reject);\n        });\n    }\n\n    forget = subscription_id => {\n        return new Promise((resolve, reject) => {\n            if (subscription_id) {\n                api_base.api\n                    .forget(subscription_id)\n                    .then(() => {\n                        resolve();\n                    })\n                    .catch(reject);\n            } else {\n                resolve();\n            }\n        });\n    };\n\n    unsubscribeFromTicksService() {\n        return new Promise((resolve, reject) => {\n            if (this.ticks_history_promise) {\n                const { stringified_options } = this.ticks_history_promise;\n                const { symbol = '' } = JSON.parse(stringified_options);\n                if (symbol) {\n                    this.forget(this.subscriptions.getIn(['tick', symbol]))\n                        .then(res => {\n                            resolve(res);\n                        })\n                        .catch(reject);\n                } else {\n                    resolve();\n                }\n            }\n            this.ticks_history_promise = null;\n            if (this.candles_promise) {\n                const { stringified_options } = this.candles_promise;\n                const { symbol = '' } = JSON.parse(stringified_options);\n                if (symbol) {\n                    this.forget(this.subscriptions.getIn(['candle', symbol]))\n                        .then(res => {\n                            resolve(res);\n                        })\n                        .catch(reject);\n                } else {\n                    resolve();\n                }\n            }\n\n            if (!this.ticks_history_promise && !this.candles_promise) {\n                resolve();\n            }\n        });\n    }\n}\n","import TicksService from '../../api/ticks_service';\nimport Observer from '../../../utils/observer';\n\nexport const createScope = () => {\n    const observer = new Observer();\n    const ticksService = new TicksService();\n    const stopped = false;\n    return { observer, ticksService, stopped };\n};\n","import { localize } from '@deriv/translations';\nimport { createError } from '../../../utils/error';\n\nconst isPositiveNumber = num => Number.isFinite(num) && num > 0;\n\nconst isPositiveInteger = num => isPositiveNumber(num) && Number.isInteger(num);\n\nexport const expectPositiveInteger = (num, msg) => {\n    if (!isPositiveInteger(num)) {\n        throw createError('PositiveIntegerExpected', msg);\n    }\n    return num;\n};\n\nconst expectOptions = options => {\n    const { symbol, contractTypes } = options;\n\n    if (!symbol) {\n        throw createError('OptionError', localize('Underlying market is not selected'));\n    }\n\n    if (!contractTypes[0]) {\n        throw createError('OptionError', localize('Contract type is not selected'));\n    }\n};\n\nexport const expectInitArg = args => {\n    const [token, options] = args;\n\n    if (!token) {\n        throw createError('LoginError', localize('Please login'));\n    }\n\n    expectOptions(options);\n\n    return args;\n};\n\nconst isCandle = candle =>\n    candle instanceof Object &&\n    ['open', 'high', 'low', 'close'].every(key => isPositiveNumber(candle[key])) &&\n    isPositiveInteger(candle.epoch);\n\nexport const expectCandle = candle => {\n    if (!isCandle(candle)) {\n        throw createError('CandleExpected', localize('Given candle is not valid'));\n    }\n    return candle;\n};\n\nexport const expectCandles = candles => {\n    if (!(candles instanceof Array) || !candles.every(c => isCandle(c))) {\n        throw createError('CandleListExpected', localize('Given candle list is not valid'));\n    }\n    return candles;\n};\n","export const takeField = (arr, field) => arr.map(x => (field ? x[field] : x));\n\nexport const takeLast = (arr, n, field) => takeField(arr.slice(n > arr.length ? 0 : arr.length - n, arr.length), field);\n\nexport const sum = data => data.reduce((acc, x) => acc + x, 0);\n\nexport const mean = data => data.reduce((a, b) => a + b, 0) / data.length;\n\nexport const stddev = data => {\n    const data_mean = mean(data);\n    const sq_diff = data.map(n => Math.pow(n - data_mean, 2));\n    const avg_sq_diff = mean(sq_diff);\n    return Math.sqrt(avg_sq_diff);\n};\n","import { sequence } from '@deriv/shared';\nimport { sum, takeLast } from '../utils/math';\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const simpleMovingAverage = (data, config) => {\n    const { periods, field } = config;\n\n    if (data.length < periods) {\n        throw new Error('Periods longer than data length');\n    }\n\n    const vals = takeLast(data, periods, field);\n\n    return sum(vals) / periods;\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const simpleMovingAverageArray = (data, config) => {\n    const { periods, pipSize = 2 } = config;\n    return sequence(data.length - periods + 1).map(\n        (x, i) => +simpleMovingAverage(data.slice(i, i + periods), config).toFixed(pipSize)\n    );\n};\n","import { sequence } from '@deriv/shared';\nimport { simpleMovingAverage } from './simple-moving-average';\nimport { stddev, takeLast } from '../utils/math';\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  type: 'SMA' | 'WMA' | 'EMA' | 'TEMA' | 'TRIMA',\n *  stdDevUp: number,\n *  stdDevDown: number,\n *  pipSize: number,\n * }\n */\nexport const bollingerBands = (data, config) => {\n    const { periods = 20, field, stdDevUp = 2, stdDevDown = 2, pipSize = 2 } = config;\n    const vals = takeLast(data, periods, field);\n    const middle = simpleMovingAverage(vals, { periods });\n    const std_dev = stddev(vals);\n    const upper = middle + std_dev * stdDevUp;\n    const lower = middle - std_dev * stdDevDown;\n\n    return [+middle.toFixed(pipSize), +upper.toFixed(pipSize), +lower.toFixed(pipSize)];\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  type: 'SMA' | 'WMA' | 'EMA' | 'TEMA' | 'TRIMA',\n *  stdDevUp: number,\n *  stdDevDown: number,\n *  pipSize: number,\n * }\n */\nexport const bollingerBandsArray = (data, config) => {\n    const { periods } = config;\n    return sequence(data.length - periods + 1).map((x, i) => bollingerBands(data.slice(i, i + periods), config));\n};\n","import { takeField, mean } from '../utils/math';\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n * @param {Number} init_val\n */\nexport const exponentialMovingAverage = (data, config, init_val) => {\n    const { periods, field, pipSize = 2 } = config;\n\n    const weighting_multiplier = 2 / (periods + 1);\n\n    const vals = takeField(data, field);\n\n    if (init_val) {\n        return (vals[0] - init_val) * weighting_multiplier + init_val;\n    }\n\n    if (data.length < periods) {\n        throw new Error('Periods longer than data length');\n    }\n\n    const mean_val = mean(takeField(data.slice(0, periods), field));\n\n    return +vals\n        .slice(periods)\n        .reduce((prev, e) => (e - prev) * weighting_multiplier + prev, mean_val)\n        .toFixed(pipSize);\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const exponentialMovingAverageArray = (data, config) => {\n    const { periods } = config;\n\n    let init_val = exponentialMovingAverage(data.slice(0, periods), config);\n\n    return data\n        .slice(periods - 1)\n        .map((x, i) => (!i ? init_val : (init_val = exponentialMovingAverage([x], config, init_val))));\n};\n","import { exponentialMovingAverageArray } from './exponential-moving-average';\nimport { takeField } from '../utils/math';\n\nconst paddingLeft = (data, length) => {\n    const arr = [];\n    arr.length = length - data.length;\n    arr.fill(0);\n    return [...arr, ...data];\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  fastEmaPeriod: number,\n *  slowEmaPeriod: number,\n *  signalEmaPeriod: number\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const macdArray = (data, config) => {\n    const { field, fastEmaPeriod = 12, slowEmaPeriod = 26, signalEmaPeriod = 9, pipSize = 2 } = config;\n\n    const vals = takeField(data, field);\n\n    const length = vals.length;\n\n    const fast_ema_array = paddingLeft(\n        exponentialMovingAverageArray(\n            vals,\n            { periods: fastEmaPeriod, pipSize: 20, field }\n            // -------------------------- ^ set pipSize to 20 to prevent rounding\n        ),\n        length\n    );\n    const slow_ema_array = paddingLeft(\n        exponentialMovingAverageArray(vals, { periods: slowEmaPeriod, pipSize: 20, field }),\n        length\n    );\n\n    const macd_calc_array = paddingLeft(\n        slow_ema_array.map((x, i) => +(fast_ema_array[i] - x).toFixed(pipSize)),\n        length\n    );\n\n    const signal_ema_array = paddingLeft(\n        exponentialMovingAverageArray(macd_calc_array.slice(slowEmaPeriod - 1), {\n            periods: signalEmaPeriod,\n            pipSize: 20,\n            field,\n        }),\n        length\n    );\n\n    return macd_calc_array\n        .map((x, i) => [+(x - signal_ema_array[i]).toFixed(pipSize), x, +signal_ema_array[i].toFixed(pipSize)])\n        .slice(slowEmaPeriod + signalEmaPeriod - 2);\n};\n","import { sequence } from '@deriv/shared';\nimport { takeField } from '../utils/math';\n\nconst calcGain = (q1, q2) => (q2 > q1 ? q2 - q1 : 0);\nconst calcLoss = (q1, q2) => (q2 < q1 ? q1 - q2 : 0);\n\nconst calcFirstAvgDiff = (vals, comp, periods) => {\n    let prev;\n    return (\n        vals.reduce((r, q, i) => {\n            if (i === 1) {\n                prev = r;\n            }\n            const diff = comp(prev, q);\n            prev = q;\n            return diff + (i === 1 ? 0 : r);\n        }) / periods\n    );\n};\n\nconst calcSecondAvgDiff = (vals, comp, periods, init_avg) => {\n    let prev;\n    if (vals.length === 1) {\n        // There is no data to calc avg\n        return init_avg;\n    }\n    return vals.reduce((r, q, i) => {\n        if (i === 1) {\n            prev = r;\n        }\n        const diff = comp(prev, q);\n        prev = q;\n        const prev_avg = i === 1 ? init_avg : r;\n        return (prev_avg * (periods - 1) + diff) / periods;\n    });\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n * @param {any} memoized_diff\n */\nexport const relativeStrengthIndex = (data, config, memoized_diff) => {\n    const { periods, field } = config;\n\n    if (data.length < periods) {\n        throw new Error('Periods longer than data length');\n    }\n\n    if (data.length === periods) {\n        return 0;\n    }\n\n    const vals = takeField(data.slice(0, periods + 1), field);\n\n    let rest_seq, init_avg_gain, init_avg_loss;\n\n    if (memoized_diff && 'gain' in memoized_diff) {\n        rest_seq = takeField(data.slice(-2), field);\n\n        init_avg_gain = memoized_diff.gain;\n        init_avg_loss = memoized_diff.loss;\n    } else {\n        // include last element from above to calc diff\n        rest_seq = takeField(data.slice(periods, data.length), field);\n\n        init_avg_gain = calcFirstAvgDiff(vals, calcGain, periods);\n        init_avg_loss = calcFirstAvgDiff(vals, calcLoss, periods);\n    }\n\n    const avg_gain = calcSecondAvgDiff(rest_seq, calcGain, periods, init_avg_gain);\n    const avg_loss = calcSecondAvgDiff(rest_seq, calcLoss, periods, init_avg_loss);\n\n    if (memoized_diff) {\n        memoized_diff.gain = avg_gain;\n        memoized_diff.loss = avg_loss;\n    }\n\n    if (avg_gain === 0) {\n        return 0;\n    } else if (avg_loss === 0) {\n        return 100;\n    }\n\n    const RS = avg_gain / avg_loss;\n\n    return 100 - 100 / (1 + RS);\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const relativeStrengthIndexArray = (data, config) => {\n    const { periods, pipSize = 2 } = config;\n    const memoized_diff = {};\n    return sequence(data.length - periods).map(\n        (x, i) => +relativeStrengthIndex(data.slice(0, i + periods + 1), config, memoized_diff).toFixed(pipSize)\n    );\n};\n","import {\n    simpleMovingAverage as sma,\n    simpleMovingAverageArray as smaa,\n    bollingerBands as bb,\n    bollingerBandsArray as bba,\n    exponentialMovingAverage as ema,\n    exponentialMovingAverageArray as emaa,\n    relativeStrengthIndex as rsi,\n    relativeStrengthIndexArray as rsia,\n    macdArray as macda,\n} from '@deriv/indicators';\n\nconst decorate = (f, input, tradeEngine, config, ...args) => {\n    const pipSize = tradeEngine.getPipSize();\n    return f(input, { pipSize, ...config }, ...args);\n};\n\nconst getIndicatorsInterface = tradeEngine => {\n    return {\n        sma: (input, periods) => decorate(sma, input, tradeEngine, { periods }),\n        smaa: (input, periods) => decorate(smaa, input, tradeEngine, { periods }),\n        ema: (input, periods) => decorate(ema, input, tradeEngine, { periods }),\n        emaa: (input, periods) => decorate(emaa, input, tradeEngine, { periods }),\n        rsi: (input, periods) => decorate(rsi, input, tradeEngine, { periods }),\n        rsia: (input, periods) => decorate(rsia, input, tradeEngine, { periods }),\n        bb: (input, config, field) => decorate(bb, input, tradeEngine, config)[field],\n        bba: (input, config, field) => decorate(bba, input, tradeEngine, config).map(r => r[field]),\n        macda: (input, config, field) => decorate(macda, input, tradeEngine, config).map(r => r[field]),\n    };\n};\n\nexport default getIndicatorsInterface;\n","import { localize } from '@deriv/translations';\nimport getCandleInterface from './CandleInterface';\nimport getIndicatorsInterface from './IndicatorsInterface';\nimport getMiscInterface from './MiscInterface';\n\nconst getToolsInterface = tradeEngine => {\n    return {\n        dateTimeStringToTimestamp: datetime_string => {\n            const invalid_msg = localize('Invalid date/time: {{ datetime_string }}', { datetime_string });\n\n            if (typeof datetime_string !== 'string') {\n                return invalid_msg;\n            }\n\n            const date_time = datetime_string\n                .replace(/[^0-9.:-\\s]/g, '')\n                .replace(/\\s+/g, ' ')\n                .trim()\n                .split(' ');\n\n            const d = /^[12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/;\n            const t = /^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])(:([0-5][0-9])?)?$/;\n\n            let validated_datetime;\n\n            if (date_time.length >= 2) {\n                validated_datetime =\n                    d.test(date_time[0]) && t.test(date_time[1]) ? `${date_time[0]}T${date_time[1]}` : null;\n            } else if (date_time.length === 1) {\n                validated_datetime = d.test(date_time[0]) ? date_time[0] : null;\n            } else {\n                validated_datetime = null;\n            }\n\n            if (validated_datetime) {\n                const date_obj = new Date(validated_datetime);\n                // eslint-disable-next-line no-restricted-globals\n                if (date_obj instanceof Date && !isNaN(date_obj)) {\n                    return date_obj.getTime() / 1000;\n                }\n            }\n\n            return invalid_msg;\n        },\n        getTime: () => parseInt(new Date().getTime() / 1000),\n        ...getCandleInterface(),\n        ...getMiscInterface(tradeEngine),\n        ...getIndicatorsInterface(tradeEngine),\n\n        // Highlight the block that is being executed\n        highlightBlock: block_id => {\n            const block = Blockly.derivWorkspace.getBlockById(block_id);\n\n            if (block) {\n                block.highlightExecutedBlock(block);\n            }\n        },\n    };\n};\n\nexport default getToolsInterface;\n","import { expectCandle, expectCandles } from '../utils/sanitize';\n\nconst getCandleInterface = () => {\n    return {\n        isCandleBlack: candle => expectCandle(candle) && candle.close < candle.open,\n        candleValues: (ohlc, field) => expectCandles(ohlc).map(o => o[field]),\n        candleField: (candle, field) => expectCandle(candle)[field],\n    };\n};\n\nexport default getCandleInterface;\n","import { localize } from '@deriv/translations';\nimport { notify } from '../utils/broadcast';\nimport { observer as globalObserver } from '../../../utils/observer';\n\nconst getMiscInterface = tradeEngine => {\n    return {\n        notify: args => globalObserver.emit('ui.log.notify', args),\n        console: ({ type, message }) => console[type](message), // eslint-disable-line no-console\n        notifyTelegram: (access_token, chat_id, text) => {\n            const url = `https://api.telegram.org/bot${access_token}/sendMessage`;\n            const onError = () => notify('warn', localize('The Telegram notification could not be sent'));\n\n            fetch(url, {\n                method: 'POST',\n                mode: 'cors',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ chat_id, text }),\n            })\n                .then(response => {\n                    if (!response.ok) {\n                        onError();\n                    }\n                })\n                .catch(onError);\n        },\n        getTotalRuns: () => tradeEngine.getTotalRuns(),\n        getBalance: type => tradeEngine.getBalance(type),\n        getTotalProfit: toString => tradeEngine.getTotalProfit(toString, tradeEngine.tradeOptions.currency),\n    };\n};\n\nexport default getMiscInterface;\n","const getTicksInterface = tradeEngine => {\n    return {\n        getLastTick: (...args) => tradeEngine.getLastTick(...args),\n        getLastDigit: (...args) => tradeEngine.getLastDigit(...args),\n        getTicks: (...args) => tradeEngine.getTicks(...args),\n        checkDirection: (...args) => tradeEngine.checkDirection(...args),\n        getOhlcFromEnd: (...args) => tradeEngine.getOhlcFromEnd(...args),\n        getOhlc: (...args) => tradeEngine.getOhlc(...args),\n        getLastDigitList: (...args) => tradeEngine.getLastDigitList(...args),\n    };\n};\n\nexport default getTicksInterface;\n","import { observer as globalObserver } from '../../../utils/observer';\nimport { createDetails } from '../utils/helpers';\n\nconst getBotInterface = tradeEngine => {\n    const getDetail = i => createDetails(tradeEngine.data.contract)[i];\n\n    return {\n        init: (...args) => tradeEngine.init(...args),\n        start: (...args) => tradeEngine.start(...args),\n        stop: (...args) => tradeEngine.stop(...args),\n        purchase: contract_type => tradeEngine.purchase(contract_type),\n        getAskPrice: contract_type => Number(getProposal(contract_type, tradeEngine).ask_price),\n        getPayout: contract_type => Number(getProposal(contract_type, tradeEngine).payout),\n        getPurchaseReference: () => tradeEngine.getPurchaseReference(),\n        isSellAvailable: () => tradeEngine.isSellAtMarketAvailable(),\n        sellAtMarket: () => tradeEngine.sellAtMarket(),\n        getSellPrice: () => getSellPrice(tradeEngine),\n        isResult: result => getDetail(10) === result,\n        isTradeAgain: result => globalObserver.emit('bot.trade_again', result),\n        readDetails: i => getDetail(i - 1),\n    };\n};\n\nconst getProposal = (contract_type, tradeEngine) => {\n    return tradeEngine.data.proposals.find(\n        proposal =>\n            proposal.contract_type === contract_type &&\n            proposal.purchase_reference === tradeEngine.getPurchaseReference()\n    );\n};\n\nconst getSellPrice = tradeEngine => {\n    return tradeEngine.getSellPrice();\n};\n\nexport default getBotInterface;\n","import { getFormattedText } from '@deriv/shared';\nimport { info } from '../utils/broadcast';\nimport DBotStore from '../../../scratch/dbot-store';\nimport { api_base } from '../../api/api-base';\n\nlet balance_string = '';\n\nexport default Engine =>\n    class Balance extends Engine {\n        observeBalance() {\n            if (!api_base.api) return;\n            const subscription = api_base.api.onMessage().subscribe(({ data }) => {\n                if (data.msg_type === 'balance') {\n                    const {\n                        balance: { balance: b, currency },\n                    } = data;\n\n                    balance_string = getFormattedText(b, currency);\n\n                    if (this.accountInfo) info({ accountID: this.accountInfo.loginid, balance: balance_string });\n                }\n            });\n            api_base.pushSubscription(subscription);\n        }\n\n        // eslint-disable-next-line class-methods-use-this\n        getBalance(type) {\n            const { client } = DBotStore.instance;\n            const balance = (client && client.balance) || 0;\n\n            balance_string = getFormattedText(balance, client.currency, false);\n            return type === 'STR' ? balance_string : balance;\n        }\n    };\n","export const BEFORE_PURCHASE = 'BEFORE_PURCHASE';\nexport const DURING_PURCHASE = 'DURING_PURCHASE';\nexport const PROPOSALS_READY = 'PROPOSALS_READY';\nexport const CLEAR_PROPOSALS = 'CLEAR_PROPOSALS';\nexport const PURCHASE_SUCCESSFUL = 'PURCHASE_SUCCESSFUL';\nexport const OPEN_CONTRACT = 'OPEN_CONTRACT';\nexport const INVALID_ACTION = 'INVALID_ACTION';\nexport const SELL = 'SELL';\nexport const START = 'START';\nexport const STOP = 'STOP';\nexport const NEW_TICK = 'NEW_TICK';\n","import * as constants from '../constants';\n\nconst dispatchIfScopeIs = ({ dispatch, getState, data, scope }) => {\n    const { scope: currentScope } = getState();\n    if (currentScope === scope) {\n        dispatch(data);\n    }\n};\n\nexport const start = () => (dispatch, getState) =>\n    dispatchIfScopeIs({ dispatch, getState, data: { type: constants.START }, scope: constants.STOP });\n\nexport const proposalsReady = () => ({ type: constants.PROPOSALS_READY });\n\nexport const clearProposals = () => ({ type: constants.CLEAR_PROPOSALS });\n\nconst dispatchIfScopeIsBeforePurchase = args => dispatchIfScopeIs({ ...args, scope: constants.BEFORE_PURCHASE });\n\nconst dispatchIfBeforePurchaseReady = args => {\n    const { getState } = args;\n    const { proposalsReady: beforePurchaseReady } = getState();\n\n    if (beforePurchaseReady) {\n        dispatchIfScopeIsBeforePurchase(args);\n    }\n\n    dispatchIfScopeIs({ ...args, scope: constants.BEFORE_PURCHASE });\n};\n\nexport const purchaseSuccessful = () => (dispatch, getState) =>\n    dispatchIfBeforePurchaseReady({ dispatch, getState, data: { type: constants.PURCHASE_SUCCESSFUL } });\n\nexport const openContractReceived = () => (dispatch, getState) => {\n    const { scope: currentScope } = getState();\n    if (currentScope === constants.DURING_PURCHASE) {\n        dispatch({ type: constants.OPEN_CONTRACT });\n    }\n    dispatchIfBeforePurchaseReady({ dispatch, getState, data: { type: constants.OPEN_CONTRACT } });\n};\n\nexport const sell = () => (dispatch, getState) =>\n    dispatchIfScopeIs({ dispatch, getState, data: { type: constants.SELL }, scope: constants.DURING_PURCHASE });\n","import { purchaseSuccessful } from './state/actions';\nimport { BEFORE_PURCHASE } from './state/constants';\nimport { contractStatus, info, log } from '../utils/broadcast';\nimport { getUUID, recoverFromError, doUntilDone, tradeOptionToBuy } from '../utils/helpers';\nimport { log_types } from '../../../constants/messages';\nimport { api_base } from '../../api/api-base';\n\nlet delayIndex = 0;\nlet purchase_reference;\n\nexport default Engine =>\n    class Purchase extends Engine {\n        purchase(contract_type) {\n            // Prevent calling purchase twice\n            if (this.store.getState().scope !== BEFORE_PURCHASE) {\n                return Promise.resolve();\n            }\n\n            const onSuccess = response => {\n                // Don't unnecessarily send a forget request for a purchased contract.\n                const { buy } = response;\n\n                contractStatus({\n                    id: 'contract.purchase_received',\n                    data: buy.transaction_id,\n                    buy,\n                });\n\n                this.contractId = buy.contract_id;\n                this.store.dispatch(purchaseSuccessful());\n\n                if (this.is_proposal_subscription_required) {\n                    this.renewProposalsOnPurchase();\n                }\n\n                delayIndex = 0;\n                log(log_types.PURCHASE, { longcode: buy.longcode, transaction_id: buy.transaction_id });\n                info({\n                    accountID: this.accountInfo.loginid,\n                    totalRuns: this.updateAndReturnTotalRuns(),\n                    transaction_ids: { buy: buy.transaction_id },\n                    contract_type,\n                    buy_price: buy.buy_price,\n                });\n            };\n\n            if (this.is_proposal_subscription_required) {\n                const { id, askPrice } = this.selectProposal(contract_type);\n\n                const action = () => api_base.api.send({ buy: id, price: askPrice });\n\n                this.isSold = false;\n\n                contractStatus({\n                    id: 'contract.purchase_sent',\n                    data: askPrice,\n                });\n\n                if (!this.options.timeMachineEnabled) {\n                    return doUntilDone(action).then(onSuccess);\n                }\n\n                return recoverFromError(\n                    action,\n                    (errorCode, makeDelay) => {\n                        // if disconnected no need to resubscription (handled by live-api)\n                        if (errorCode !== 'DisconnectError') {\n                            this.renewProposalsOnPurchase();\n                        } else {\n                            this.clearProposals();\n                        }\n\n                        const unsubscribe = this.store.subscribe(() => {\n                            const { scope, proposalsReady } = this.store.getState();\n                            if (scope === BEFORE_PURCHASE && proposalsReady) {\n                                makeDelay().then(() => this.observer.emit('REVERT', 'before'));\n                                unsubscribe();\n                            }\n                        });\n                    },\n                    ['PriceMoved', 'InvalidContractProposal'],\n                    delayIndex++\n                ).then(onSuccess);\n            }\n            const trade_option = tradeOptionToBuy(contract_type, this.tradeOptions);\n            const action = () => api_base.api.send(trade_option);\n\n            this.isSold = false;\n\n            contractStatus({\n                id: 'contract.purchase_sent',\n                data: this.tradeOptions.amount,\n            });\n\n            if (!this.options.timeMachineEnabled) {\n                return doUntilDone(action).then(onSuccess);\n            }\n\n            return recoverFromError(\n                action,\n                (errorCode, makeDelay) => {\n                    if (errorCode === 'DisconnectError') {\n                        this.clearProposals();\n                    }\n                    const unsubscribe = this.store.subscribe(() => {\n                        const { scope } = this.store.getState();\n                        if (scope === BEFORE_PURCHASE) {\n                            makeDelay().then(() => this.observer.emit('REVERT', 'before'));\n                            unsubscribe();\n                        }\n                    });\n                },\n                ['PriceMoved', 'InvalidContractProposal'],\n                delayIndex++\n            ).then(onSuccess);\n        }\n        getPurchaseReference = () => purchase_reference;\n        regeneratePurchaseReference = () => {\n            purchase_reference = getUUID();\n        };\n    };\n","import * as constants from '../constants';\n\nconst initialState = {\n    scope: constants.STOP,\n    proposalsReady: false,\n};\n\nconst signal = (state = initialState, action) => {\n    switch (action.type) {\n        case constants.START:\n            return {\n                scope: constants.BEFORE_PURCHASE,\n                proposalsReady: state.proposalsReady,\n            };\n        case constants.PROPOSALS_READY:\n            return {\n                ...state,\n                proposalsReady: true,\n            };\n        case constants.CLEAR_PROPOSALS:\n            return {\n                ...state,\n                proposalsReady: false,\n            };\n        case constants.PURCHASE_SUCCESSFUL:\n            return {\n                scope: constants.DURING_PURCHASE,\n                openContract: false,\n                proposalsReady: state.proposalsReady,\n            };\n        case constants.OPEN_CONTRACT:\n            return {\n                scope: constants.DURING_PURCHASE,\n                openContract: true,\n                proposalsReady: state.proposalsReady,\n            };\n        case constants.SELL:\n            return {\n                scope: constants.STOP,\n                proposalsReady: state.proposalsReady,\n            };\n        case constants.NEW_TICK:\n            return {\n                ...state,\n                newTick: action.payload,\n            };\n        default:\n            return state;\n    }\n};\n\nexport default signal;\n","import { getLast } from 'binary-utils';\nimport { localize } from '@deriv/translations';\nimport * as constants from './state/constants';\nimport { getDirection, getLastDigit } from '../utils/helpers';\nimport { expectPositiveInteger } from '../utils/sanitize';\nimport { observer as globalObserver } from '../../../utils/observer';\n\nlet tickListenerKey;\n\nexport default Engine =>\n    class Ticks extends Engine {\n        async watchTicks(symbol) {\n            if (symbol && this.symbol !== symbol) {\n                this.symbol = symbol;\n                const { ticksService } = this.$scope;\n\n                await ticksService.stopMonitor({\n                    symbol,\n                    key: tickListenerKey,\n                });\n                const callback = ticks => {\n                    if (this.is_proposal_subscription_required) {\n                        this.checkProposalReady();\n                    }\n                    const lastTick = ticks.slice(-1)[0];\n                    const { epoch } = lastTick;\n                    this.store.dispatch({ type: constants.NEW_TICK, payload: epoch });\n                };\n\n                const key = await ticksService.monitor({ symbol, callback });\n                tickListenerKey = key;\n            }\n        }\n\n        checkTicksPromiseExists() {\n            return this.$scope.ticksService.ticks_history_promise;\n        }\n\n        getTicks(toString = false) {\n            return new Promise(resolve => {\n                this.$scope.ticksService.request({ symbol: this.symbol }).then(ticks => {\n                    const ticks_list = ticks.map(tick => {\n                        if (toString) {\n                            return tick.quote.toFixed(this.getPipSize());\n                        }\n                        return tick.quote;\n                    });\n\n                    resolve(ticks_list);\n                });\n            });\n        }\n\n        getLastTick(raw, toString = false) {\n            return new Promise(resolve =>\n                this.$scope.ticksService\n                    .request({ symbol: this.symbol })\n                    .then(ticks => {\n                        let last_tick = raw ? getLast(ticks) : getLast(ticks).quote;\n                        if (!raw && toString) {\n                            last_tick = last_tick.toFixed(this.getPipSize());\n                        }\n                        resolve(last_tick);\n                    })\n                    .catch(e => {\n                        if (e.code === 'MarketIsClosed') {\n                            globalObserver.emit('Error', e);\n                            resolve(e.code);\n                        }\n                    })\n            );\n        }\n\n        getLastDigit() {\n            return new Promise(resolve => this.getLastTick(false, true).then(tick => resolve(getLastDigit(tick))));\n        }\n\n        getLastDigitList() {\n            return new Promise(resolve => this.getTicks().then(ticks => resolve(this.getLastDigitsFromList(ticks))));\n        }\n        getLastDigitsFromList(ticks) {\n            const digits = ticks.map(tick => {\n                return getLastDigit(tick.toFixed(this.getPipSize()));\n            });\n            return digits;\n        }\n\n        checkDirection(dir) {\n            return new Promise(resolve =>\n                this.$scope.ticksService\n                    .request({ symbol: this.symbol })\n                    .then(ticks => resolve(getDirection(ticks) === dir))\n            );\n        }\n\n        getOhlc(args) {\n            const { granularity = this.options.candleInterval || 60, field } = args || {};\n\n            return new Promise(resolve =>\n                this.$scope.ticksService\n                    .request({ symbol: this.symbol, granularity })\n                    .then(ohlc => resolve(field ? ohlc.map(o => o[field]) : ohlc))\n            );\n        }\n\n        getOhlcFromEnd(args) {\n            const { index: i = 1 } = args || {};\n\n            const index = expectPositiveInteger(Number(i), localize('Index must be a positive integer'));\n\n            return new Promise(resolve => this.getOhlc(args).then(ohlc => resolve(ohlc.slice(-index)[0])));\n        }\n\n        getPipSize() {\n            return this.$scope.ticksService.pipSizes[this.symbol];\n        }\n    };\n","import { getRoundedNumber } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { info, log } from '../utils/broadcast';\nimport { createError } from '../../../utils/error';\nimport { observer as globalObserver } from '../../../utils/observer';\nimport { log_types } from '../../../constants/messages';\n\nconst skeleton = {\n    totalProfit: 0,\n    totalWins: 0,\n    totalLosses: 0,\n    totalStake: 0,\n    totalPayout: 0,\n    totalRuns: 0,\n};\n\nconst globalStat = {};\n\nexport default Engine =>\n    class Total extends Engine {\n        constructor() {\n            super();\n            this.sessionRuns = 0;\n            this.sessionProfit = 0;\n\n            globalObserver.register('statistics.clear', this.clearStatistics.bind(this));\n        }\n\n        clearStatistics() {\n            this.sessionRuns = 0;\n            this.sessionProfit = 0;\n            if (!this.accountInfo) return;\n            const { loginid: accountID } = this.accountInfo;\n            globalStat[accountID] = { ...skeleton };\n        }\n\n        updateTotals(contract) {\n            const { sell_price: sellPrice, buy_price: buyPrice, currency } = contract;\n\n            const profit = getRoundedNumber(Number(sellPrice) - Number(buyPrice), currency);\n\n            const win = profit > 0;\n\n            const accountStat = this.getAccountStat();\n\n            accountStat.totalWins += win ? 1 : 0;\n\n            accountStat.totalLosses += !win ? 1 : 0;\n\n            this.sessionProfit = getRoundedNumber(Number(this.sessionProfit) + Number(profit), currency);\n\n            accountStat.totalProfit = getRoundedNumber(Number(accountStat.totalProfit) + Number(profit), currency);\n\n            accountStat.totalStake = getRoundedNumber(Number(accountStat.totalStake) + Number(buyPrice), currency);\n\n            accountStat.totalPayout = getRoundedNumber(Number(accountStat.totalPayout) + Number(sellPrice), currency);\n\n            info({\n                profit,\n                contract,\n                accountID: this.accountInfo.loginid,\n                totalProfit: accountStat.totalProfit,\n                totalWins: accountStat.totalWins,\n                totalLosses: accountStat.totalLosses,\n                totalStake: accountStat.totalStake,\n                totalPayout: accountStat.totalPayout,\n            });\n\n            log(win ? log_types.PROFIT : log_types.LOST, { currency, profit });\n        }\n\n        updateAndReturnTotalRuns() {\n            this.sessionRuns++;\n            const accountStat = this.getAccountStat();\n\n            return ++accountStat.totalRuns;\n        }\n\n        /* eslint-disable class-methods-use-this */\n        getTotalRuns() {\n            const accountStat = this.getAccountStat();\n            return accountStat.totalRuns;\n        }\n\n        getTotalProfit(toString, currency) {\n            const accountStat = this.getAccountStat();\n\n            return toString && accountStat.totalProfit !== 0\n                ? getRoundedNumber(+accountStat.totalProfit, currency)\n                : +accountStat.totalProfit;\n        }\n\n        /* eslint-enable */\n        checkLimits(tradeOption) {\n            if (!tradeOption.limitations) {\n                return;\n            }\n\n            const {\n                limitations: { maxLoss, maxTrades },\n            } = tradeOption;\n\n            if (maxLoss && maxTrades) {\n                if (this.sessionRuns >= maxTrades) {\n                    throw createError('CustomLimitsReached', localize('Maximum number of trades reached'));\n                }\n                if (this.sessionProfit <= -maxLoss) {\n                    throw createError('CustomLimitsReached', localize('Maximum loss amount reached'));\n                }\n            }\n        }\n\n        /* eslint-disable class-methods-use-this */\n        validateTradeOptions(tradeOptions) {\n            const take_profit = tradeOptions.take_profit;\n            const stop_loss = tradeOptions.stop_loss;\n\n            if (take_profit) {\n                tradeOptions.limit_order.take_profit = take_profit;\n            }\n            if (stop_loss) {\n                tradeOptions.limit_order.stop_loss = stop_loss;\n            }\n\n            return tradeOptions;\n        }\n\n        getAccountStat() {\n            const { loginid: accountID } = this.accountInfo;\n\n            if (!(accountID in globalStat)) {\n                globalStat[accountID] = { ...skeleton };\n            }\n\n            return globalStat[accountID];\n        }\n    };\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { localize } from '@deriv/translations';\nimport Balance from './Balance';\nimport OpenContract from './OpenContract';\nimport Proposal from './Proposal';\nimport Purchase from './Purchase';\nimport Sell from './Sell';\nimport { start, proposalsReady } from './state/actions';\nimport * as constants from './state/constants';\nimport rootReducer from './state/reducers';\nimport Ticks from './Ticks';\nimport Total from './Total';\nimport { doUntilDone, checkBlocksForProposalRequest } from '../utils/helpers';\nimport { expectInitArg } from '../utils/sanitize';\nimport { createError } from '../../../utils/error';\nimport { observer as globalObserver } from '../../../utils/observer';\nimport { api_base } from '../../api/api-base';\n\nconst watchBefore = store =>\n    watchScope({\n        store,\n        stopScope: constants.DURING_PURCHASE,\n        passScope: constants.BEFORE_PURCHASE,\n        passFlag: 'proposalsReady',\n    });\n\nconst watchDuring = store =>\n    watchScope({\n        store,\n        stopScope: constants.STOP,\n        passScope: constants.DURING_PURCHASE,\n        passFlag: 'openContract',\n    });\n\n/* The watchScope function is called randomly and resets the prevTick\n * which leads to the same problem we try to solve. So prevTick is isolated\n */\nlet prevTick;\nconst watchScope = ({ store, stopScope, passScope, passFlag }) => {\n    // in case watch is called after stop is fired\n    if (store.getState().scope === stopScope) {\n        return Promise.resolve(false);\n    }\n    return new Promise(resolve => {\n        const unsubscribe = store.subscribe(() => {\n            const newState = store.getState();\n\n            if (newState.newTick === prevTick) return;\n            prevTick = newState.newTick;\n\n            if (newState.scope === passScope && newState[passFlag]) {\n                unsubscribe();\n                resolve(true);\n            }\n\n            if (newState.scope === stopScope) {\n                unsubscribe();\n                resolve(false);\n            }\n        });\n    });\n};\n\nexport default class TradeEngine extends Balance(Purchase(Sell(OpenContract(Proposal(Ticks(Total(class {}))))))) {\n    constructor($scope) {\n        super();\n        this.observer = $scope.observer;\n        this.$scope = $scope;\n        this.observe();\n        this.data = {\n            contract: {},\n            proposals: [],\n        };\n        this.store = createStore(rootReducer, applyMiddleware(thunk));\n    }\n\n    init(...args) {\n        const [token, options] = expectInitArg(args);\n        const { symbol } = options;\n\n        this.initArgs = args;\n        this.options = options;\n        this.startPromise = this.loginAndGetBalance(token);\n\n        if (!this.checkTicksPromiseExists()) this.watchTicks(symbol);\n    }\n\n    start(tradeOptions) {\n        if (!this.options) {\n            throw createError('NotInitialized', localize('Bot.init is not called'));\n        }\n\n        globalObserver.emit('bot.running');\n\n        const validated_trade_options = this.validateTradeOptions(tradeOptions);\n\n        this.tradeOptions = { ...validated_trade_options, symbol: this.options.symbol };\n        this.store.dispatch(start());\n        this.checkLimits(validated_trade_options);\n\n        this.makeDirectPurchaseDecision();\n    }\n\n    loginAndGetBalance(token) {\n        if (this.token === token) {\n            return Promise.resolve();\n        }\n        // for strategies using total runs, GetTotalRuns function is trying to get loginid and it gets called before Proposals calls.\n        // the below required loginid to be set in Proposal calls where loginAndGetBalance gets resolved.\n        // Earlier this used to happen as soon as we get ticks_history response and by the time GetTotalRuns gets called we have required info.\n        this.accountInfo = api_base.account_info;\n        this.token = api_base.token;\n        return new Promise(resolve => {\n            // Try to recover from a situation where API doesn't give us a correct response on\n            // \"proposal_open_contract\" which would make the bot run forever. When there's a \"sell\"\n            // event, wait a couple seconds for the API to give us the correct \"proposal_open_contract\"\n            // response, if there's none after x seconds. Send an explicit request, which _should_\n            // solve the issue. This is a backup!\n            const subscription = api_base.api.onMessage().subscribe(({ data }) => {\n                if (data.msg_type === 'transaction' && data.transaction.action === 'sell') {\n                    this.transaction_recovery_timeout = setTimeout(() => {\n                        const { contract } = this.data;\n                        const is_same_contract = contract.contract_id === data.transaction.contract_id;\n                        const is_open_contract = contract.status === 'open';\n                        if (is_same_contract && is_open_contract) {\n                            doUntilDone(() => {\n                                api_base.api.send({ proposal_open_contract: 1, contract_id: contract.contract_id });\n                            }, ['PriceMoved']);\n                        }\n                    }, 1500);\n                }\n                resolve();\n            });\n            api_base.pushSubscription(subscription);\n        });\n    }\n\n    observe() {\n        this.observeOpenContract();\n        this.observeBalance();\n        this.observeProposals();\n    }\n\n    watch(watchName) {\n        if (watchName === 'before') {\n            return watchBefore(this.store);\n        }\n        return watchDuring(this.store);\n    }\n\n    makeDirectPurchaseDecision() {\n        const { has_payout_block, is_basis_payout } = checkBlocksForProposalRequest();\n        this.is_proposal_subscription_required = has_payout_block || is_basis_payout;\n\n        if (this.is_proposal_subscription_required) {\n            this.makeProposals({ ...this.options, ...this.tradeOptions });\n            this.checkProposalReady();\n        } else {\n            this.store.dispatch(proposalsReady());\n        }\n    }\n}\n","import { DURING_PURCHASE } from './state/constants';\nimport { contractStatus, log } from '../utils/broadcast';\nimport { recoverFromError, doUntilDone } from '../utils/helpers';\nimport { log_types } from '../../../constants/messages';\nimport { observer as globalObserver } from '../../../utils/observer';\nimport { api_base } from '../../api/api-base';\n\nexport default Engine =>\n    class Sell extends Engine {\n        isSellAtMarketAvailable() {\n            return this.contractId && !this.isSold && this.isSellAvailable && !this.isExpired;\n        }\n\n        sellAtMarket() {\n            globalObserver.emit('bot.sell');\n\n            // Prevent calling sell twice\n            if (this.store.getState().scope !== DURING_PURCHASE) {\n                return Promise.resolve();\n            }\n\n            if (!this.isSellAtMarketAvailable()) {\n                log(log_types.NOT_OFFERED);\n                return Promise.resolve();\n            }\n\n            let delay_index = 1;\n\n            return new Promise(resolve => {\n                const onContractSold = sell_response => {\n                    delay_index = 1;\n\n                    if (sell_response) {\n                        const { sold_for } = sell_response.sell;\n                        log(log_types.SELL, { sold_for });\n                    }\n\n                    contractStatus('purchase.sold');\n                    this.waitForAfter();\n                    resolve();\n                };\n\n                const contract_id = this.contractId;\n\n                const sellContractAndGetContractInfo = () => {\n                    return doUntilDone(() => api_base.api.send({ sell: contract_id, price: 0 }))\n                        .then(sell_response => {\n                            doUntilDone(() => api_base.api.send({ proposal_open_contract: 1, contract_id })).then(\n                                () => sell_response\n                            );\n                        })\n                        .catch(e => {\n                            const error = e.error;\n                            if (error.code === 'InvalidOfferings') {\n                                // \"InvalidOfferings\" may occur when user tries to sell the contract too close\n                                // to the expiry time. We shouldn't interrupt the bot but instead let the contract\n                                // finish.\n                                return Promise.resolve();\n                            }\n\n                            const sell_error = {\n                                name: error.code,\n                                message: error.message,\n                                msg_type: e.msg_type,\n                                error: { ...error.error },\n                            };\n\n                            if (error.code === 'RateLimit') {\n                                return Promise.reject(sell_error);\n                            }\n\n                            // For every other error, check whether the contract is not actually already sold.\n                            return doUntilDone(() =>\n                                api_base.api.send({\n                                    proposal_open_contract: 1,\n                                    contract_id,\n                                })\n                            ).then(proposal_open_contract_response => {\n                                const { proposal_open_contract } = proposal_open_contract_response;\n\n                                if (proposal_open_contract.status !== 'sold') {\n                                    return Promise.reject(sell_error);\n                                }\n\n                                // If the contract is sold at this point it means there was a race condition.\n                                // Pretend this sell request was successful and mislead the trade engine into\n                                // moving onto the next scope.\n                                return Promise.resolve({\n                                    sell: {\n                                        sold_for: proposal_open_contract.sell_price,\n                                    },\n                                });\n                            });\n                        });\n                };\n\n                const errors_to_ignore = ['NoOpenPosition', 'InvalidSellContractProposal', 'UnrecognisedRequest'];\n\n                // Restart buy/sell on error is enabled, don't recover from sell error.\n                if (!this.options.timeMachineEnabled) {\n                    return doUntilDone(sellContractAndGetContractInfo, errors_to_ignore).then(sell_response =>\n                        onContractSold(sell_response)\n                    );\n                }\n\n                // If above checkbox not checked, try to recover from sell error.\n                const recoverFn = (error_code, makeDelay) => {\n                    return makeDelay().then(() => this.observer.emit('REVERT', 'during'));\n                };\n                return recoverFromError(\n                    sellContractAndGetContractInfo,\n                    recoverFn,\n                    errors_to_ignore,\n                    delay_index++\n                ).then(sell_response => onContractSold(sell_response));\n            });\n        }\n    };\n","import { getRoundedNumber } from '@deriv/shared';\nimport { sell, openContractReceived } from './state/actions';\nimport { contractStatus, contract as broadcastContract } from '../utils/broadcast';\nimport { api_base } from '../../api/api-base';\n\nexport default Engine =>\n    class OpenContract extends Engine {\n        observeOpenContract() {\n            if (!api_base.api) return;\n            const subscription = api_base.api.onMessage().subscribe(({ data }) => {\n                if (data.msg_type === 'proposal_open_contract') {\n                    const contract = data.proposal_open_contract;\n\n                    if (!contract || !this.expectedContractId(contract?.contract_id)) {\n                        return;\n                    }\n\n                    this.setContractFlags(contract);\n\n                    this.data.contract = contract;\n\n                    broadcastContract({ accountID: api_base.account_info.loginid, ...contract });\n\n                    if (this.isSold) {\n                        this.contractId = '';\n                        clearTimeout(this.transaction_recovery_timeout);\n                        this.updateTotals(contract);\n                        contractStatus({\n                            id: 'contract.sold',\n                            data: contract.transaction_ids.sell,\n                            contract,\n                        });\n\n                        if (this.afterPromise) {\n                            this.afterPromise();\n                        }\n\n                        this.store.dispatch(sell());\n                    } else {\n                        this.store.dispatch(openContractReceived());\n                    }\n                }\n            });\n            api_base.pushSubscription(subscription);\n        }\n\n        waitForAfter() {\n            return new Promise(resolve => {\n                this.afterPromise = resolve;\n            });\n        }\n\n        setContractFlags(contract) {\n            const { is_expired, is_valid_to_sell, is_sold, entry_tick } = contract;\n\n            this.isSold = Boolean(is_sold);\n            this.isSellAvailable = !this.isSold && Boolean(is_valid_to_sell);\n            this.isExpired = Boolean(is_expired);\n            this.hasEntryTick = Boolean(entry_tick);\n        }\n\n        expectedContractId(contractId) {\n            return this.contractId && contractId === this.contractId;\n        }\n\n        getSellPrice() {\n            const { bid_price: bidPrice, buy_price: buyPrice, currency } = this.data.contract;\n            return getRoundedNumber(Number(bidPrice) - Number(buyPrice), currency);\n        }\n    };\n","import { localize } from '@deriv/translations';\nimport { proposalsReady, clearProposals } from './state/actions';\nimport { tradeOptionToProposal, doUntilDone } from '../utils/helpers';\nimport { api_base } from '../../api/api-base';\n\nexport default Engine =>\n    class Proposal extends Engine {\n        makeProposals(trade_option) {\n            if (!this.isNewTradeOption(trade_option)) {\n                return;\n            }\n\n            // Generate a purchase reference when trade options are different from previous trade options.\n            // This will ensure the bot doesn't mistakenly purchase the wrong proposal.\n            this.regeneratePurchaseReference();\n            this.trade_option = trade_option;\n            this.proposal_templates = tradeOptionToProposal(trade_option, this.getPurchaseReference());\n            this.renewProposalsOnPurchase();\n        }\n\n        selectProposal(contract_type) {\n            const { proposals } = this.data;\n\n            if (proposals.length === 0) {\n                throw Error(localize('Proposals are not ready'));\n            }\n\n            const to_buy = proposals.find(proposal => {\n                if (\n                    proposal.contract_type === contract_type &&\n                    proposal.purchase_reference === this.getPurchaseReference()\n                ) {\n                    // Below happens when a user has had one of the proposals return\n                    // with a ContractBuyValidationError. We allow the logic to continue\n                    // to here cause the opposite proposal may still be valid. Only once\n                    // they attempt to purchase the errored proposal we will intervene.\n                    if (proposal.error) {\n                        throw proposal.error;\n                    }\n\n                    return proposal;\n                }\n\n                return false;\n            });\n\n            if (!to_buy) {\n                throw new Error(localize('Selected proposal does not exist'));\n            }\n\n            return {\n                id: to_buy.id,\n                askPrice: to_buy.ask_price,\n            };\n        }\n\n        renewProposalsOnPurchase() {\n            this.data.proposals = [];\n            this.store.dispatch(clearProposals());\n            this.requestProposals();\n        }\n\n        requestProposals() {\n            // Since there are two proposals (in most cases), an error may be logged twice, to avoid this\n            // flip this boolean on error.\n            let has_informed_error = false;\n\n            Promise.all(\n                this.proposal_templates.map(proposal => {\n                    doUntilDone(() => api_base.api.send(proposal)).catch(error => {\n                        // We intercept ContractBuyValidationError as user may have specified\n                        // e.g. a DIGITUNDER 0 or DIGITOVER 9, while one proposal may be invalid\n                        // the other is valid. We will error on Purchase rather than here.\n\n                        if (error.error.code === 'ContractBuyValidationError') {\n                            this.data.proposals.push({\n                                ...error.error.echo_req,\n                                ...error.echo_req.passthrough,\n                                error,\n                            });\n\n                            return null;\n                        }\n                        if (!has_informed_error) {\n                            has_informed_error = true;\n                            this.$scope.observer.emit('Error', error.error);\n                        }\n                        return null;\n                    });\n                })\n            );\n        }\n\n        observeProposals() {\n            if (!api_base.api) return;\n            const subscription = api_base.api.onMessage().subscribe(response => {\n                if (response.data.msg_type === 'proposal') {\n                    const { passthrough, proposal } = response.data;\n                    if (proposal && this.data.proposals.findIndex(p => p.id === proposal.id) === -1) {\n                        // Add proposals based on the ID returned by the API.\n                        this.data.proposals.push({ ...proposal, ...passthrough });\n                        this.checkProposalReady();\n                    }\n                }\n            });\n            api_base.pushSubscription(subscription);\n        }\n\n        checkProposalReady() {\n            // Proposals are considered ready when the proposals in our memory match the ones\n            // we've requested from the API, we determine this by checking the passthrough of the response.\n            const { proposals } = this.data;\n\n            if (proposals.length > 0 && this.proposal_templates) {\n                const has_equal_proposals = this.proposal_templates.every(template => {\n                    return (\n                        proposals.findIndex(proposal => {\n                            return (\n                                proposal.purchase_reference === template.passthrough.purchase_reference &&\n                                proposal.contract_type === template.contract_type\n                            );\n                        }) !== -1\n                    );\n                });\n\n                if (has_equal_proposals) {\n                    this.startPromise.then(() => this.store.dispatch(proposalsReady()));\n                }\n            }\n        }\n\n        isNewTradeOption(trade_option) {\n            if (!this.trade_option) {\n                this.trade_option = trade_option;\n                return true;\n            }\n\n            // Compare incoming \"trade_option\" argument with \"this.trade_option\", if any\n            // of the values is different, this is a new tradeOption and new proposals\n            // should be generated.\n            return [\n                'amount',\n                'barrierOffset',\n                'basis',\n                'duration',\n                'duration_unit',\n                'prediction',\n                'secondBarrierOffset',\n                'symbol',\n            ].some(value => this.trade_option[value] !== trade_option[value]);\n        }\n    };\n","import getToolsInterface from './ToolsInterface';\nimport getTicksInterface from './TicksInterface';\nimport getBotInterface from './BotInterface';\nimport TradeEngine from '../trade';\n\nconst sleep = (observer, arg = 1) => {\n    return new Promise(\n        r =>\n            setTimeout(() => {\n                r();\n                setTimeout(() => observer.emit('CONTINUE'), 0);\n            }, arg * 1000),\n        () => {}\n    );\n};\n\nconst Interface = $scope => {\n    const tradeEngine = new TradeEngine($scope);\n    const { observer } = $scope;\n    const getInterface = () => {\n        return {\n            ...getBotInterface(tradeEngine),\n            ...getToolsInterface(tradeEngine),\n            getTicksInterface: getTicksInterface(tradeEngine),\n            watch: (...args) => tradeEngine.watch(...args),\n            sleep: (...args) => sleep(observer, ...args),\n            alert: (...args) => alert(...args), // eslint-disable-line no-alert\n            prompt: (...args) => prompt(...args), // eslint-disable-line no-alert\n            console: {\n                log(...args) {\n                    // eslint-disable-next-line no-console\n                    console.log(new Date().toLocaleTimeString(), ...args);\n                },\n            },\n        };\n    };\n    return { tradeEngine, observer, getInterface };\n};\n\nexport default Interface;\n","import { cloneThorough, isMultiplierContract } from '@deriv/shared';\nimport JSInterpreter from '@deriv/js-interpreter';\nimport { createScope } from './cliTools';\nimport Interface from '../Interface';\nimport { unrecoverable_errors } from '../../../constants/messages';\nimport { observer as globalObserver } from '../../../utils/observer';\nimport { api_base } from '../../api/api-base';\n\nJSInterpreter.prototype.takeStateSnapshot = function () {\n    const newStateStack = cloneThorough(this.stateStack, undefined, undefined, undefined, true);\n    return newStateStack;\n};\n\nJSInterpreter.prototype.restoreStateSnapshot = function (snapshot) {\n    this.stateStack = cloneThorough(snapshot, undefined, undefined, undefined, true);\n    this.global = this.stateStack[0].scope.object || this.stateStack[0].scope;\n    this.initFunc_(this, this.global);\n};\n\nconst botInitialized = bot => bot && bot.tradeEngine.options;\nconst botStarted = bot => botInitialized(bot) && bot.tradeEngine.tradeOptions;\nconst shouldRestartOnError = (bot, errorName = '') =>\n    !unrecoverable_errors.includes(errorName) && botInitialized(bot) && bot.tradeEngine.options.shouldRestartOnError;\n\nconst shouldStopOnError = (bot, errorName = '') => {\n    const stopErrors = ['SellNotAvailableCustom', 'ContractCreationFailure', 'InvalidtoBuy'];\n    if (stopErrors.includes(errorName) && botInitialized(bot)) {\n        return true;\n    }\n    return false;\n};\n\nconst timeMachineEnabled = bot => botInitialized(bot) && bot.tradeEngine.options.timeMachineEnabled;\n\n// TODO chek beforState & duringState & startState\nconst Interpreter = () => {\n    let $scope = createScope();\n    let bot = Interface($scope);\n    let interpreter = {};\n    let onFinish;\n\n    $scope.observer.register('REVERT', watchName =>\n        revert(watchName === 'before' ? $scope.beforeState : $scope.duringState)\n    );\n\n    function init() {\n        $scope = createScope();\n        bot = Interface($scope);\n        interpreter = {};\n        onFinish = () => {};\n    }\n\n    function revert(state) {\n        interpreter.restoreStateSnapshot(state);\n        interpreter.paused_ = false;\n        loop();\n    }\n\n    function loop() {\n        if ($scope.stopped || !interpreter.run()) {\n            onFinish(interpreter.pseudoToNative(interpreter.value));\n        }\n    }\n\n    function createAsync(js_interpreter, func) {\n        const asyncFunc = (...args) => {\n            const callback = args.pop();\n\n            // Workaround for unknown number of args\n            const reversed_args = args.slice().reverse();\n            const first_defined_arg_idx = reversed_args.findIndex(arg => arg !== undefined);\n\n            // Remove extra undefined args from end of the args\n            const function_args = first_defined_arg_idx < 0 ? [] : reversed_args.slice(first_defined_arg_idx).reverse();\n            // End of workaround\n\n            func(...function_args.map(arg => js_interpreter.pseudoToNative(arg)))\n                .then(rv => {\n                    callback(js_interpreter.nativeToPseudo(rv));\n                    loop();\n                })\n                .catch(e => {\n                    // e.error for errors get from API, e for code errors\n                    $scope.observer.emit('Error', e.error || e);\n                });\n        };\n\n        // TODO: This is a workaround, create issue on original repo, once fixed\n        // remove this. We don't know how many args are going to be passed, so we\n        // assume a max of 100.\n        const MAX_ACCEPTABLE_FUNC_ARGS = 100;\n        Object.defineProperty(asyncFunc, 'length', { value: MAX_ACCEPTABLE_FUNC_ARGS + 1 });\n        return js_interpreter.createAsyncFunction(asyncFunc);\n    }\n\n    function initFunc(js_interpreter, scope) {\n        const bot_interface = bot.getInterface();\n        const { getTicksInterface, alert, prompt, sleep, console: custom_console } = bot_interface;\n        const ticks_interface = getTicksInterface;\n\n        js_interpreter.setProperty(scope, 'console', js_interpreter.nativeToPseudo(custom_console));\n        js_interpreter.setProperty(scope, 'alert', js_interpreter.nativeToPseudo(alert));\n        js_interpreter.setProperty(scope, 'prompt', js_interpreter.nativeToPseudo(prompt));\n        js_interpreter.setProperty(\n            scope,\n            'getPurchaseReference',\n            js_interpreter.nativeToPseudo(bot_interface.getPurchaseReference)\n        );\n\n        const pseudo_bot_interface = js_interpreter.nativeToPseudo(bot_interface);\n\n        Object.entries(ticks_interface).forEach(([name, f]) =>\n            js_interpreter.setProperty(pseudo_bot_interface, name, createAsync(js_interpreter, f))\n        );\n\n        js_interpreter.setProperty(\n            pseudo_bot_interface,\n            'start',\n            js_interpreter.nativeToPseudo((...args) => {\n                const { start } = bot_interface;\n                if (shouldRestartOnError(bot)) {\n                    $scope.startState = js_interpreter.takeStateSnapshot();\n                }\n                start(...args);\n            })\n        );\n\n        js_interpreter.setProperty(\n            pseudo_bot_interface,\n            'purchase',\n            createAsync(js_interpreter, bot_interface.purchase)\n        );\n        js_interpreter.setProperty(\n            pseudo_bot_interface,\n            'sellAtMarket',\n            createAsync(js_interpreter, bot_interface.sellAtMarket)\n        );\n        js_interpreter.setProperty(scope, 'Bot', pseudo_bot_interface);\n        js_interpreter.setProperty(\n            scope,\n            'watch',\n            createAsync(js_interpreter, watchName => {\n                const { watch } = bot.getInterface();\n\n                if (timeMachineEnabled(bot)) {\n                    const snapshot = interpreter.takeStateSnapshot();\n                    if (watchName === 'before') {\n                        $scope.beforeState = snapshot;\n                    } else {\n                        $scope.duringState = snapshot;\n                    }\n                }\n\n                return watch(watchName);\n            })\n        );\n\n        js_interpreter.setProperty(scope, 'sleep', createAsync(js_interpreter, sleep));\n    }\n\n    async function stop() {\n        return new Promise((resolve, reject) => {\n            try {\n                const global_timeouts = globalObserver.getState('global_timeouts') ?? [];\n                const is_timeouts_cancellable = Object.keys(global_timeouts).every(\n                    timeout => global_timeouts[timeout].is_cancellable\n                );\n\n                if (!bot.tradeEngine.contractId && is_timeouts_cancellable) {\n                    // When user is rate limited, allow them to stop the bot immediately\n                    // granted there is no active contract.\n                    global_timeouts.forEach(timeout => clearTimeout(global_timeouts[timeout]));\n                    terminateSession().then(() => resolve());\n                } else if (\n                    bot.tradeEngine.isSold === false &&\n                    !$scope.is_error_triggered &&\n                    isMultiplierContract(bot?.tradeEngine?.data?.contract?.contract_type ?? '')\n                ) {\n                    globalObserver.register('contract.status', async contractStatus => {\n                        if (contractStatus.id === 'contract.sold') {\n                            terminateSession().then(() => resolve());\n                        }\n                    });\n                } else {\n                    terminateSession().then(() => resolve());\n                }\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n    async function terminateSession() {\n        return new Promise((resolve, reject) => {\n            try {\n                $scope.stopped = true;\n                $scope.is_error_triggered = false;\n                globalObserver.emit('bot.stop');\n                const { ticksService } = $scope;\n                // Unsubscribe previous ticks_history subscription\n                // Unsubscribe the subscriptions from Proposal, Balance and OpenContract\n                api_base.clearSubscriptions();\n\n                ticksService.unsubscribeFromTicksService().then(() => {\n                    resolve();\n                });\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    async function unsubscribeFromTicksService() {\n        const { ticksService } = $scope;\n        return new Promise((resolve, reject) => {\n            try {\n                ticksService.unsubscribeFromTicksService().then(() => {\n                    resolve();\n                });\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n    function run(code) {\n        return new Promise((resolve, reject) => {\n            const onError = e => {\n                if ($scope.stopped) {\n                    return;\n                }\n                // DBot handles 'InvalidToken' internally\n                if (e.code === 'InvalidToken') {\n                    globalObserver.emit('client.invalid_token');\n                    return;\n                }\n                if (shouldStopOnError(bot, e?.code)) {\n                    globalObserver.emit('ui.log.error', e.message);\n                    globalObserver.emit('bot.click_stop');\n                    return;\n                }\n\n                $scope.is_error_triggered = true;\n                if (!shouldRestartOnError(bot, e.code) || !botStarted(bot)) {\n                    reject(e);\n                    return;\n                }\n\n                globalObserver.emit('Error', e);\n                const { initArgs, tradeOptions } = bot.tradeEngine;\n                terminateSession();\n                init();\n                $scope.observer.register('Error', onError);\n                bot.tradeEngine.init(...initArgs);\n                bot.tradeEngine.start(tradeOptions);\n                revert($scope.startState);\n            };\n\n            $scope.observer.register('Error', onError);\n\n            interpreter = new JSInterpreter(code, initFunc);\n            onFinish = resolve;\n\n            loop();\n        });\n    }\n\n    return { stop, run, terminateSession, bot, unsubscribeFromTicksService };\n};\nexport default Interpreter;\n\nexport const createInterpreter = () => new Interpreter();\n","export default \"<xml xmlns=\\\"http://www.w3.org/1999/xhtml\\\" collection=\\\"false\\\" is_dbot=\\\"true\\\">\\n  <variables></variables>\\n  <block type=\\\"trade_definition\\\" x=\\\"0\\\" y=\\\"0\\\">\\n    <statement name=\\\"TRADE_OPTIONS\\\">\\n      <block type=\\\"trade_definition_market\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n        <field name=\\\"MARKET_LIST\\\"></field>\\n        <field name=\\\"SUBMARKET_LIST\\\"></field>\\n        <field name=\\\"SYMBOL_LIST\\\"></field>\\n        <next>\\n          <block type=\\\"trade_definition_tradetype\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n            <field name=\\\"TRADETYPECAT_LIST\\\"></field>\\n            <field name=\\\"TRADETYPE_LIST\\\"></field>\\n            <next>\\n              <block type=\\\"trade_definition_contracttype\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n                <field name=\\\"TYPE_LIST\\\"></field>\\n                <next>\\n                  <block type=\\\"trade_definition_candleinterval\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n                    <field name=\\\"CANDLEINTERVAL_LIST\\\">60</field>\\n                    <next>\\n                      <block type=\\\"trade_definition_restartbuysell\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n                        <field name=\\\"TIME_MACHINE_ENABLED\\\">FALSE</field>\\n                        <next>\\n                          <block type=\\\"trade_definition_restartonerror\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n                            <field name=\\\"RESTARTONERROR\\\">TRUE</field>\\n                          </block>\\n                        </next>\\n                      </block>\\n                    </next>\\n                  </block>\\n                </next>\\n              </block>\\n            </next>\\n          </block>\\n        </next>\\n      </block>\\n    </statement>\\n    <statement name=\\\"SUBMARKET\\\">\\n      <block type=\\\"trade_definition_tradeoptions\\\">\\n        <mutation has_first_barrier=\\\"false\\\" has_second_barrier=\\\"false\\\" has_prediction=\\\"false\\\"></mutation>\\n        <field name=\\\"DURATIONTYPE_LIST\\\"></field>\\n        <field name=\\\"CURRENCY_LIST\\\">USD</field>\\n        <value name=\\\"DURATION\\\">\\n          <shadow type=\\\"math_number_positive\\\">\\n            <field name=\\\"NUM\\\">5</field>\\n          </shadow>\\n        </value>\\n        <value name=\\\"AMOUNT\\\">\\n          <shadow type=\\\"math_number_positive\\\">\\n            <field name=\\\"NUM\\\">1</field>\\n          </shadow>\\n        </value>\\n        <field name=\\\"AMOUNT_LIMITS\\\"></field>\\n      </block>\\n    </statement>\\n  </block>\\n  <block type=\\\"during_purchase\\\" x=\\\"720\\\" y=\\\"0\\\">\\n    <statement name=\\\"DURING_PURCHASE_STACK\\\">\\n      <block type=\\\"controls_if\\\">\\n        <value name=\\\"IF0\\\">\\n          <block type=\\\"check_sell\\\"></block>\\n        </value>\\n      </block>\\n    </statement>\\n  </block>\\n  <block type=\\\"after_purchase\\\" x=\\\"720\\\" y=\\\"248\\\">\\n    <statement name=\\\"AFTERPURCHASE_STACK\\\">\\n      <block type=\\\"trade_again\\\"></block>\\n    </statement>\\n  </block>\\n  <block type=\\\"before_purchase\\\" x=\\\"0\\\" y=\\\"576\\\">\\n    <statement name=\\\"BEFOREPURCHASE_STACK\\\">\\n      <block type=\\\"purchase\\\">\\n        <field name=\\\"PURCHASE_LIST\\\"></field>\\n      </block>\\n    </statement>\\n  </block>\\n</xml>\";","import { save_types } from '../constants';\nimport { config } from '../constants/config';\nimport { api_base } from '../services/api/api-base';\nimport ApiHelpers from '../services/api/api-helpers';\nimport Interpreter from '../services/tradeEngine/utils/interpreter';\nimport { compareXml, observer as globalObserver } from '../utils';\nimport { getSavedWorkspaces, saveWorkspaceToRecent } from '../utils/local-storage';\n\nimport main_xml from './xml/main.xml';\nimport DBotStore from './dbot-store';\nimport { isAllRequiredBlocksEnabled, updateDisabledBlocks, validateErrorOnBlockDelete } from './utils';\n\nimport './blockly';\n\nclass DBot {\n    constructor() {\n        this.interpreter = null;\n        this.workspace = null;\n        this.before_run_funcs = [];\n        this.symbol = null;\n        this.is_bot_running = false;\n    }\n\n    /**\n     * Initialises the workspace and mounts it to a container element (app_contents).\n     */\n    async initWorkspace(public_path, store, api_helpers_store, is_mobile) {\n        const recent_files = await getSavedWorkspaces();\n\n        api_base.init();\n        this.interpreter = Interpreter();\n        const that = this;\n        Blockly.Blocks.trade_definition_tradetype.onchange = function (event) {\n            if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n                return;\n            }\n\n            this.enforceLimitations();\n\n            const { name, type } = event;\n\n            if (type === Blockly.Events.BLOCK_CHANGE) {\n                if (name === 'SYMBOL_LIST' || name === 'TRADETYPECAT_LIST') {\n                    const { contracts_for } = ApiHelpers.instance;\n                    const top_parent_block = this.getTopParent();\n                    const market_block = top_parent_block.getChildByType('trade_definition_market');\n                    const market = market_block.getFieldValue('MARKET_LIST');\n                    const submarket = market_block.getFieldValue('SUBMARKET_LIST');\n                    const symbol = market_block.getFieldValue('SYMBOL_LIST');\n                    const category = this.getFieldValue('TRADETYPECAT_LIST');\n                    const trade_type = this.getFieldValue('TRADETYPE_LIST');\n\n                    if (name === 'SYMBOL_LIST') {\n                        contracts_for.getTradeTypeCategories(market, submarket, symbol).then(categories => {\n                            const category_field = this.getField('TRADETYPECAT_LIST');\n                            if (category_field) {\n                                category_field.updateOptions(categories, {\n                                    default_value: category,\n                                    should_pretend_empty: true,\n                                    event_group: event.group,\n                                });\n                            }\n                        });\n                        that.symbol = symbol;\n                        if (\n                            !that.is_bot_running &&\n                            that.interpreter &&\n                            !this.workspace.options.readOnly &&\n                            symbol !== that.interpreter.bot.tradeEngine.symbol\n                        ) {\n                            const run_button = document.querySelector('#db-animation__run-button');\n                            if (run_button) run_button.disabled = true;\n\n                            that.interpreter.unsubscribeFromTicksService().then(async () => {\n                                await that.interpreter.bot.tradeEngine.watchTicks(symbol);\n                            });\n                        }\n                    } else if (name === 'TRADETYPECAT_LIST' && event.blockId === this.id) {\n                        contracts_for.getTradeTypes(market, submarket, symbol, category).then(trade_types => {\n                            const trade_type_field = this.getField('TRADETYPE_LIST');\n\n                            trade_type_field.updateOptions(trade_types, {\n                                default_value: trade_type,\n                                should_pretend_empty: true,\n                                event_group: event.group,\n                            });\n                        });\n                    }\n                }\n            }\n        };\n\n        return new Promise((resolve, reject) => {\n            __webpack_public_path__ = public_path; // eslint-disable-line no-global-assign\n            ApiHelpers.setInstance(api_helpers_store);\n            DBotStore.setInstance(store);\n            const window_width = window.innerWidth;\n            try {\n                let workspaceScale = 0.8;\n\n                const { handleFileChange } = DBotStore.instance;\n                if (window_width < 1640) {\n                    if (is_mobile) {\n                        workspaceScale = 0.7;\n                    } else {\n                        const scratch_div_width = document.getElementById('scratch_div')?.offsetWidth;\n                        const zoom_scale = scratch_div_width / window_width / 1.5;\n                        workspaceScale = zoom_scale;\n                    }\n                }\n                const el_scratch_div = document.getElementById('scratch_div');\n                if (!el_scratch_div) {\n                    return;\n                }\n                this.workspace = Blockly.inject(el_scratch_div, {\n                    media: `${__webpack_public_path__}media/`,\n                    trashcan: !is_mobile,\n                    zoom: { wheel: true, startScale: workspaceScale },\n                    scrollbars: true,\n                });\n\n                this.workspace.cached_xml = { main: main_xml };\n\n                this.workspace.addChangeListener(this.valueInputLimitationsListener.bind(this));\n                this.workspace.addChangeListener(event => updateDisabledBlocks(this.workspace, event));\n                this.workspace.addChangeListener(event => this.workspace.dispatchBlockEventEffects(event));\n                this.workspace.addChangeListener(event => {\n                    if (event.type === 'endDrag' && !is_mobile) validateErrorOnBlockDelete();\n                });\n\n                Blockly.derivWorkspace = this.workspace;\n\n                this.addBeforeRunFunction(this.unselectBlocks.bind(this));\n                this.addBeforeRunFunction(this.disableStrayBlocks.bind(this));\n                this.addBeforeRunFunction(this.checkForErroredBlocks.bind(this));\n                this.addBeforeRunFunction(this.checkForRequiredBlocks.bind(this));\n\n                // Push main.xml to workspace and reset the undo stack.\n                this.workspace.current_strategy_id = Blockly.utils.genUid();\n                Blockly.derivWorkspace.strategy_to_load = main_xml;\n                Blockly.mainWorkspace.strategy_to_load = main_xml;\n                let file_name = config.default_file_name;\n                if (recent_files && recent_files.length) {\n                    const latest_file = recent_files[0];\n                    Blockly.derivWorkspace.strategy_to_load = latest_file.xml;\n                    Blockly.mainWorkspace.strategy_to_load = latest_file.xml;\n                    file_name = latest_file.name;\n                    Blockly.derivWorkspace.current_strategy_id = latest_file.id;\n                    Blockly.mainWorkspace.current_strategy_id = latest_file.id;\n                }\n\n                const event_group = `dbot-load${Date.now()}`;\n                Blockly.Events.setGroup(event_group);\n                Blockly.Xml.domToWorkspace(\n                    Blockly.Xml.textToDom(Blockly.derivWorkspace.strategy_to_load),\n                    this.workspace\n                );\n                const { save_modal } = DBotStore.instance;\n\n                save_modal.updateBotName(file_name);\n                this.workspace.cleanUp();\n                this.workspace.clearUndo();\n\n                window.dispatchEvent(new Event('resize'));\n                window.addEventListener('dragover', DBot.handleDragOver);\n                window.addEventListener('drop', e => DBot.handleDropOver(e, handleFileChange));\n                // disable overflow\n                el_scratch_div.parentNode.style.overflow = 'hidden';\n                resolve();\n            } catch (error) {\n                // TODO: Handle error.\n                reject(error);\n                throw error;\n            }\n        });\n    }\n\n    /** Compare stored strategy xml with currently running xml */\n    isStrategyUpdated(current_xml_dom, recent_files) {\n        if (recent_files && recent_files.length) {\n            const stored_strategy = recent_files.filter(\n                strategy => strategy?.id === this.workspace?.current_strategy_id\n            )?.[0];\n            if (stored_strategy?.xml) {\n                const stored_strategy_xml = stored_strategy?.xml;\n                const current_xml = Blockly.Xml.domToText(current_xml_dom);\n                const is_same_strategy = compareXml(stored_strategy_xml, current_xml);\n                if (is_same_strategy) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    /** Saves the current workspace to local storage\n     * and update saved status if strategy changes  */\n    async saveRecentWorkspace() {\n        const current_xml_dom = this?.workspace ? Blockly?.Xml?.workspaceToDom(this.workspace) : null;\n        try {\n            const recent_files = await getSavedWorkspaces();\n            if (current_xml_dom && this.isStrategyUpdated(current_xml_dom, recent_files)) {\n                await saveWorkspaceToRecent(current_xml_dom, save_types.UNSAVED);\n            }\n        } catch (error) {\n            globalObserver.emit('Error', error);\n            await saveWorkspaceToRecent(current_xml_dom, save_types.UNSAVED);\n        }\n    }\n\n    /**\n     * Allows you to add a function that needs to be executed before running the bot. Each\n     * function needs to return true in order for the bot to run.\n     * @param {Function} func Function to execute which returns true/false.\n     */\n    addBeforeRunFunction(func) {\n        this.before_run_funcs.push(func);\n    }\n\n    shouldRunBot() {\n        return this.before_run_funcs.every(func => !!func());\n    }\n\n    /**\n     * Runs the bot. Does a sanity check before attempting to generate the\n     * JavaScript code that's fed to the interpreter.\n     */\n    runBot() {\n        try {\n            const code = this.generateCode();\n\n            if (!this.interpreter.bot.tradeEngine.checkTicksPromiseExists()) this.interpreter = Interpreter();\n\n            this.is_bot_running = true;\n\n            api_base.setIsRunning(true);\n            this.interpreter.run(code).catch(error => {\n                globalObserver.emit('Error', error);\n                this.stopBot();\n            });\n        } catch (error) {\n            globalObserver.emit('Error', error);\n\n            if (this.interpreter) {\n                this.stopBot();\n            }\n        }\n    }\n\n    /**\n     * Generates the code that is passed to the interpreter.\n     * @param {Object} limitations Optional limitations (legacy argument)\n     */\n    generateCode(limitations = {}) {\n        return `\n            var BinaryBotPrivateInit;\n            var BinaryBotPrivateStart;\n            var BinaryBotPrivateBeforePurchase; \n            var BinaryBotPrivateDuringPurchase;\n            var BinaryBotPrivateAfterPurchase;\n            var BinaryBotPrivateLastTickTime;\n            var BinaryBotPrivateTickAnalysisList = [];\n            var BinaryBotPrivateHasCalledTradeOptions = false;\n\n           \n            function recursiveList(list, final_list){\n                for(var i=0; i < list.length; i++){\n                    if(typeof(list[i]) === 'object'){\n                        recursiveList(list[i], final_list);\n                    }\n                    if(typeof(list[i]) == 'number'){\n                        final_list.push(list[i]);   \n                                  \t\n                    }\n                }\n                return final_list;\n            }\n\n            function BinaryBotPrivateRun(f, arg) {\n                if (f) return f(arg);\n                return false;\n            }\n            function BinaryBotPrivateTickAnalysis() {\n                var currentTickTime = Bot.getLastTick(true);\n                while (currentTickTime === 'MarketIsClosed') {\n                    sleep(5);\n                    currentTickTime = Bot.getLastTick(true);\n                }\n                currentTickTime = currentTickTime.epoch;\n                if (currentTickTime === BinaryBotPrivateLastTickTime) {\n                    return;\n                }\n                BinaryBotPrivateLastTickTime = currentTickTime;\n                for (var BinaryBotPrivateI = 0; BinaryBotPrivateI < BinaryBotPrivateTickAnalysisList.length; BinaryBotPrivateI++) {\n                    BinaryBotPrivateRun(BinaryBotPrivateTickAnalysisList[BinaryBotPrivateI]);\n                }\n            }\n            var BinaryBotPrivateLimitations = ${JSON.stringify(limitations)};\n            ${Blockly.JavaScript.workspaceToCode(this.workspace)}\n            BinaryBotPrivateRun(BinaryBotPrivateInit);\n            while (true) {\n                BinaryBotPrivateTickAnalysis();\n                BinaryBotPrivateRun(BinaryBotPrivateStart);\n                if (!BinaryBotPrivateHasCalledTradeOptions) {\n                    sleep(1);\n                    continue;\n                }\n                while (watch('before')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateBeforePurchase);\n                }\n                while (watch('during')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateDuringPurchase);\n                }\n                BinaryBotPrivateTickAnalysis();\n                if (!BinaryBotPrivateRun(BinaryBotPrivateAfterPurchase)) {\n                    break;\n                }\n            }`;\n    }\n\n    /**\n     * Instructs the interpreter to stop the bot. If there is an active trade\n     * that trade will be completed first to reflect correct contract status in UI.\n     */\n    async stopBot() {\n        api_base.setIsRunning(false);\n\n        await this.interpreter.stop();\n        this.is_bot_running = false;\n        this.interpreter = null;\n        this.interpreter = Interpreter();\n        await this.interpreter.bot.tradeEngine.watchTicks(this.symbol);\n    }\n\n    /**\n     * Immediately instructs the interpreter to terminate the WS connection and bot.\n     */\n    async terminateBot() {\n        if (this.interpreter) {\n            await this.interpreter.terminateSession();\n            this.interpreter = null;\n            this.interpreter = Interpreter();\n            await this.interpreter.bot.tradeEngine.watchTicks(this.symbol);\n        }\n    }\n\n    terminateConnection = () => {\n        api_base.terminate();\n    };\n\n    /**\n     * Unselects any selected block before running the bot.\n     */\n    // eslint-disable-next-line class-methods-use-this\n    unselectBlocks() {\n        if (Blockly.selected) {\n            Blockly.selected.unselect();\n        }\n        return true;\n    }\n\n    /**\n     * Disable blocks outside of any main or independent blocks.\n     */\n    disableStrayBlocks() {\n        const top_blocks = this.workspace.getTopBlocks();\n\n        top_blocks.forEach(block => {\n            if (!block.isMainBlock() && !block.isIndependentBlock()) {\n                this.disableBlocksRecursively(block);\n            }\n        });\n\n        return true;\n    }\n\n    /**\n     * Disable blocks and their optional children.\n     */\n    disableBlocksRecursively(block) {\n        block.setDisabled(true);\n        if (block.nextConnection?.targetConnection) {\n            this.disableBlocksRecursively(block.nextConnection.targetConnection.sourceBlock_);\n        }\n    }\n\n    /**\n     * Check if there are any blocks highlighted for errors.\n     */\n    checkForErroredBlocks() {\n        // Force a check on value inputs.\n        this.valueInputLimitationsListener({}, true);\n\n        const all_blocks = this.workspace.getAllBlocks(true);\n        const error_blocks = all_blocks\n            .filter(block => block.is_error_highlighted && !block.disabled)\n            // filter out duplicated error message\n            .filter((block, index, self) => index === self.findIndex(b => b.error_message === block.error_message));\n\n        if (!error_blocks.length) {\n            return true;\n        }\n\n        this.workspace.centerOnBlock(error_blocks[0].id);\n        error_blocks.forEach(block => {\n            globalObserver.emit('ui.log.error', block.error_message);\n        });\n\n        return false;\n    }\n\n    centerAndHighlightBlock(block_id, should_animate = false) {\n        const block_to_highlight = this.workspace.getBlockById(block_id);\n\n        if (!block_to_highlight) {\n            return;\n        }\n\n        const all_blocks = this.workspace.getAllBlocks();\n\n        all_blocks.forEach(block => block.setErrorHighlighted(false));\n        if (should_animate) {\n            block_to_highlight.blink();\n        }\n        block_to_highlight.setErrorHighlighted(true);\n\n        this.workspace.centerOnBlock(block_to_highlight.id);\n    }\n\n    unHighlightAllBlocks() {\n        this.workspace?.getAllBlocks().forEach(block => block.setErrorHighlighted(false));\n    }\n\n    /**\n     * Checks whether the workspace contains all required blocks before running the strategy.\n     */\n    checkForRequiredBlocks() {\n        return isAllRequiredBlocksEnabled(this.workspace);\n    }\n\n    /**\n     * Checks all blocks in the workspace to see if they need to be highlighted\n     * in case one of their inputs is not populated, returns an empty value, or doesn't\n     * pass the custom validator.\n     * Note: The value passed to the custom validator is always a string value\n     * @param {Blockly.Event} event Workspace event\n     */\n    valueInputLimitationsListener(event, force_check = false) {\n        if (!force_check && (!this.workspace || this.workspace.isDragging())) {\n            return;\n        }\n\n        Blockly.JavaScript.init(this.workspace);\n\n        if (force_check) {\n            Blockly.hideChaff(false);\n        }\n\n        const isGlobalEndDragEvent = () => event.type === Blockly.Events.END_DRAG;\n        const isGlobalDeleteEvent = () => event.type === Blockly.Events.BLOCK_DELETE;\n        const isGlobalCreateEvent = () => event.type === Blockly.Events.BLOCK_CREATE;\n        const isClickEvent = () =>\n            event.type === Blockly.Events.UI && (event.element === 'click' || event.element === 'selected');\n        const isChangeEvent = b => event.type === Blockly.Events.BLOCK_CHANGE && event.blockId === b.id;\n        const isChangeInMyInputs = b => {\n            if (event.type === Blockly.Events.BLOCK_CHANGE) {\n                return b.inputList.some(input => {\n                    if (input.connection) {\n                        const target_block = input.connection.targetBlock();\n                        return target_block && event.blockId === target_block.id;\n                    }\n                    return false;\n                });\n            }\n            return false;\n        };\n        const isParentEnabledEvent = b => {\n            if (event.type === Blockly.Events.BLOCK_CHANGE && event.element === 'disabled') {\n                let parent_block = b.getParent();\n\n                while (parent_block !== null) {\n                    if (parent_block.id === event.blockId) {\n                        return true;\n                    }\n\n                    parent_block = parent_block.getParent();\n                }\n            }\n            return false;\n        };\n\n        this.workspace.getAllBlocks(true).forEach(block => {\n            if (\n                force_check ||\n                isGlobalEndDragEvent() ||\n                isGlobalDeleteEvent() ||\n                isGlobalCreateEvent() ||\n                isClickEvent() ||\n                isChangeEvent(block) ||\n                isChangeInMyInputs(block) ||\n                isParentEnabledEvent(block)\n            ) {\n                // Unhighlight disabled blocks and their optional children.\n                if (block.disabled) {\n                    const unhighlightRecursively = child_blocks => {\n                        child_blocks.forEach(child_block => {\n                            child_block.setErrorHighlighted(false);\n                            unhighlightRecursively(child_block.getChildren());\n                        });\n                    };\n\n                    unhighlightRecursively([block]);\n                    return;\n                }\n\n                // No required inputs, ignore this block.\n                if (!block.getRequiredValueInputs) {\n                    return;\n                }\n\n                const required_inputs_object = block.getRequiredValueInputs();\n                const required_input_names = Object.keys(required_inputs_object);\n                const should_highlight = required_input_names.some(input_name => {\n                    const is_selected = Blockly.selected === block; // Don't highlight selected blocks.\n                    const is_disabled = block.disabled || block.getInheritedDisabled(); // Don't highlight disabled blocks.\n\n                    if (is_selected || is_disabled) {\n                        return false;\n                    }\n\n                    // Don't unhighlight collapsed blocks with highlighted descendants.\n                    if (block.isCollapsed() && block.hasErrorHighlightedDescendant()) {\n                        return true;\n                    }\n\n                    const input = block.getInput(input_name);\n\n                    if (!input && !block.domToMutation) {\n                        // eslint-disable-next-line no-console\n                        console.warn('Detected a non-existent required input.', {\n                            input_name,\n                            type: block.type,\n                        });\n                    } else if (input.connection) {\n                        const order = Blockly.JavaScript.ORDER_ATOMIC;\n                        const value = Blockly.JavaScript.valueToCode(block, input_name, order);\n                        const inputValidatorFn = required_inputs_object[input_name];\n\n                        // If a custom validator was supplied, use this to determine whether\n                        // the block should be highlighted.\n                        if (typeof inputValidatorFn === 'function') {\n                            return !!inputValidatorFn(value);\n                        }\n\n                        // If there's no custom validator, only check if input was populated and\n                        // doesn't return an empty value.\n                        return !value;\n                    }\n\n                    return true;\n                });\n\n                if (should_highlight) {\n                    // Remove select highlight in favour of error highlight.\n                    block.removeSelect();\n                }\n\n                block.setErrorHighlighted(should_highlight, block.error_message || undefined);\n\n                // Automatically expand blocks that have been highlighted.\n                if (force_check && (block.is_error_highlighted || block.hasErrorHighlightedDescendant())) {\n                    let current_collapsed_block = block;\n                    while (current_collapsed_block) {\n                        current_collapsed_block.setCollapsed(false);\n                        current_collapsed_block = current_collapsed_block.getParent();\n                    }\n                }\n            }\n        });\n    }\n\n    /**\n     * Checks whether the workspace contains non-silent notification blocks. Returns array of names for audio files to be played.\n     */\n    getStrategySounds() {\n        const all_blocks = this.workspace.getAllBlocks();\n        const notify_blocks = all_blocks.filter(block => block.type === 'notify');\n        const strategy_sounds = [];\n\n        notify_blocks.forEach(block => {\n            const selected_sound = block.inputList[0].fieldRow[3].value_;\n\n            if (selected_sound !== 'silent') {\n                strategy_sounds.push(selected_sound);\n            }\n        });\n\n        return strategy_sounds;\n    }\n\n    static handleDragOver(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.dataTransfer.dropEffect = 'copy'; // eslint-disable-line no-param-reassign\n    }\n\n    static handleDropOver(event, handleFileChange) {\n        const main_workspace_dom = document.getElementById('scratch_div');\n        const local_drag_zone = document.getElementById('load-strategy__local-dropzone-area');\n\n        if (main_workspace_dom.contains(event.target)) {\n            handleFileChange(event);\n        } else if (local_drag_zone && local_drag_zone.contains(event.target)) {\n            handleFileChange(event, false);\n        } else {\n            event.stopPropagation();\n            event.preventDefault();\n            event.dataTransfer.effectAllowed = 'none';\n            event.dataTransfer.dropEffect = 'none';\n        }\n    }\n}\n\nexport default new DBot();\n","// @deriv/bot: Set the minimum width of a statement block to be wider than default.\nBlockly.BlockSvg.MIN_BLOCK_X_WITH_STATEMENT = 100 * Blockly.BlockSvg.GRID_UNIT;\n\n// @deriv/bot: Root block hat replaces with standard rounded corner\nBlockly.BlockSvg.START_HAT_PATH = `m 0,${Blockly.BlockSvg.CORNER_RADIUS} A ${Blockly.BlockSvg.CORNER_RADIUS}, ${Blockly.BlockSvg.CORNER_RADIUS} 0 0,1 ${Blockly.BlockSvg.CORNER_RADIUS},0`;\n\n// @deriv/bot: Changed the height of a row in a statement block to be 10.\nBlockly.BlockSvg.EXTRA_STATEMENT_ROW_Y = 10 * Blockly.BlockSvg.GRID_UNIT;\n\n// @deriv/bot: visual improvement: changed editable field padding from 8 to 16\nBlockly.BlockSvg.EDITABLE_FIELD_PADDING = 16;\n\n/**\n * Change the colour of a block.\n */\nBlockly.BlockSvg.prototype.updateColour = function () {\n    let strokeColour = this.getColourTertiary();\n    const renderShadowed = this.isShadow() && !Blockly.scratchBlocksUtils.isShadowArgumentReporter(this);\n\n    if (renderShadowed && this.parentBlock_) {\n        // Pull shadow block stroke colour from parent block's tertiary if possible.\n        strokeColour = this.parentBlock_.getColourTertiary();\n        // Special case: if we contain a colour field, set to a special stroke colour.\n        if (\n            this.inputList[0] &&\n            this.inputList[0].fieldRow[0] &&\n            (this.inputList[0].fieldRow[0] instanceof Blockly.FieldColour ||\n                this.inputList[0].fieldRow[0] instanceof Blockly.FieldColourSlider)\n        ) {\n            strokeColour = Blockly.Colours.colourPickerStroke;\n        }\n    }\n\n    // Render block stroke\n    this.svgPath_.setAttribute('stroke', strokeColour);\n    let fillColour = this.getColour();\n\n    // Render block fill\n    if (this.isGlowingBlock_ || renderShadowed) {\n        // Use the block's shadow colour if possible.\n        if (this.getShadowColour()) {\n            fillColour = this.getShadowColour();\n        } else {\n            fillColour = this.getColourSecondary();\n        }\n    }\n    this.svgPath_.setAttribute('fill', fillColour);\n\n    // Render opacity\n    this.svgPath_.setAttribute('fill-opacity', this.getOpacity());\n\n    // Update colours of input shapes.\n    // eslint-disable-next-line no-cond-assign\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n        if (input.outlinePath) {\n            input.outlinePath.setAttribute('fill', this.getColourTertiary());\n        }\n    }\n\n    // Render icon(s) if applicable\n    const icons = this.getIcons();\n    for (let i = 0; i < icons.length; i++) {\n        icons[i].updateColour();\n    }\n\n    // Bump every dropdown to change its colour.\n    // eslint-disable-next-line no-cond-assign\n    for (let x = 0, input; (input = this.inputList[x]); x++) {\n        // eslint-disable-next-line no-cond-assign\n        for (let y = 0, field; (field = input.fieldRow[y]); y++) {\n            field.setText(null);\n        }\n    }\n    // deriv-bot: Update colours of input shapes to a fixed value of #FFF.\n    this.inputList.forEach(input => {\n        if (input.outlinePath) {\n            input.outlinePath.setAttribute('fill', 'var(--state-normal)');\n            input.outlinePath.setAttribute('stroke', '#6d7278');\n            input.outlinePath.setAttribute('stroke-width', '0.3px');\n        }\n    });\n};\n\n/**\n * For a block with output,\n * determine start and end padding, based on connected inputs.\n * Padding will depend on the shape of the output, the shape of the input,\n * and possibly the size of the input.\n * @param {!Array.<!Array.<!Object>>} input_rows Partially calculated rows.\n */\nBlockly.BlockSvg.prototype.computeOutputPadding_ = function (input_rows) {\n    // Only apply to blocks with outputs and not single fields (shadows).\n    if (\n        !this.getOutputShape() ||\n        !this.outputConnection ||\n        (this.isShadow() && !Blockly.scratchBlocksUtils.isShadowArgumentReporter(this))\n    ) {\n        return;\n    }\n\n    // Blocks with outputs must have single row to be padded.\n    if (input_rows.length > 1) {\n        return;\n    }\n\n    const row = input_rows[0];\n    const shape = this.getOutputShape();\n\n    // Reset any padding: it's about to be set.\n    row.paddingStart = 0;\n    row.paddingEnd = 0;\n\n    // Start row padding: based on first input or first field.\n    const firstInput = row[0];\n    const firstField = firstInput.fieldRow[0];\n    let otherShape;\n\n    // In checking the left/start side, a field takes precedence over any input.\n    // That's because a field will be rendered before any value input.\n    if (firstField) {\n        otherShape = 0; // Field comes first in the row.\n    } else {\n        // Value input comes first in the row.\n        const inputConnection = firstInput.connection;\n\n        if (!inputConnection) {\n            // @deriv/bot: Don't collapse if there's no connection.\n            return;\n        } else if (!inputConnection.targetConnection) {\n            // Not connected: use the drawn shape.\n            otherShape = inputConnection.getOutputShape();\n        } else {\n            // Connected: use the connected block's output shape.\n            otherShape = inputConnection.targetConnection.getSourceBlock().getOutputShape();\n        }\n\n        // Special case for hexagonal output: if the connection is larger height\n        // than a standard reporter, add some start padding.\n        // https://github.com/LLK/scratch-blocks/issues/376\n        if (shape === Blockly.OUTPUT_SHAPE_HEXAGONAL && otherShape !== Blockly.OUTPUT_SHAPE_HEXAGONAL) {\n            const deltaHeight = firstInput.renderHeight - Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER;\n\n            // One grid unit per level of nesting.\n            row.paddingStart += deltaHeight / 2;\n        }\n    }\n\n    row.paddingStart += Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[shape][otherShape];\n\n    // End row padding: based on last input or last field.\n    const lastInput = row[row.length - 1];\n\n    // In checking the right/end side, any value input takes precedence over any field.\n    // That's because fields are rendered before inputs...the last item\n    // in the row will be an input, if one exists.\n    if (lastInput.connection) {\n        // Value input last in the row.\n        const inputConnection = lastInput.connection;\n\n        if (!inputConnection.targetConnection) {\n            // Not connected: use the drawn shape.\n            otherShape = inputConnection.getOutputShape();\n        } else {\n            // Connected: use the connected block's output shape.\n            otherShape = inputConnection.targetConnection.getSourceBlock().getOutputShape();\n        }\n        // Special case for hexagonal output: if the connection is larger height\n        // than a standard reporter, add some end padding.\n        // https://github.com/LLK/scratch-blocks/issues/376\n        if (shape === Blockly.OUTPUT_SHAPE_HEXAGONAL && otherShape !== Blockly.OUTPUT_SHAPE_HEXAGONAL) {\n            const deltaHeight = lastInput.renderHeight - Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER;\n\n            // One grid unit per level of nesting.\n            row.paddingEnd += deltaHeight / 2;\n        }\n    } else {\n        // No input in this row - mark as field.\n        otherShape = 0;\n    }\n\n    row.paddingEnd += Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[shape][otherShape];\n};\n","// @deriv/bot: make all input shapes rounded\nBlockly.Connection.prototype.getOutputShape = function () {\n    return Blockly.OUTPUT_SHAPE_ROUND;\n};\n","/**\n * ENUM for categories.\n * @const\n */\nBlockly.Categories = {\n    Trade_Definition: 'trade_parameters',\n    Before_Purchase: 'purchase_conditions',\n    During_Purchase: 'sell_conditions',\n    After_Purchase: 'trade_results',\n    Mathematical: 'math',\n    Logic: 'logic',\n    Text: 'text',\n    Variables: 'variables',\n    Functions: 'custom_functions',\n    List: 'lists',\n    Indicators: 'indicators',\n    Time: 'time',\n    Tick_Analysis: 'technical_analysis',\n    Candle: 'candle',\n    Miscellaneous: 'miscellaneous',\n    Loop: 'loops',\n};\n/**\n * Number of pixels the mouse must move before a drag starts.\n */\nBlockly.DRAG_RADIUS = 3;\n\n/**\n * Number of pixels the mouse must move before a drag/scroll starts from the\n * flyout.  Because the drag-intention is determined when this is reached, it is\n * larger than Blockly.DRAG_RADIUS so that the drag-direction is clearer.\n */\nBlockly.FLYOUT_DRAG_RADIUS = 1;\n","/**\n * Array making up the CSS content for Blockly.\n */\nBlockly.Css.CONTENT = [\n    '@keyframes blinkEffect {',\n    '0% {',\n    'stroke: var(--status-danger);',\n    'stroke-width: 5px;',\n    '}',\n    '50% {',\n    'stroke: var(--status-warning);',\n    'stroke-width: 8px;',\n    '}',\n    '100% {',\n    'stroke: var(--status-danger);',\n    'stroke-width: 5px;',\n    '}',\n    '}',\n\n    '.block--error-highlighted > .blocklyPath {',\n    'stroke: var(--status-danger);',\n    'stroke-width: 5px;',\n    '}',\n\n    '@keyframes fade-in-out {',\n    '0%{',\n    'stroke-opacity: 0;',\n    '}',\n    '50%{',\n    'stroke-opacity: 1;',\n    'stroke-width: 6px;',\n    '}',\n    '100%{',\n    'stroke-opacity: 0;',\n    '}}',\n\n    '.block--execution-highlighted > .blocklyPath {',\n    'stroke: #89B2AF;',\n    'animation: fade-in-out 1.5s',\n    '}',\n\n    '.block--blink > .blocklyPath {',\n    'animation: blinkEffect 1s infinite;',\n    '}',\n\n    '.blocklySvg {',\n    'outline: none;',\n    'overflow: hidden;' /* IE overflows by default. */,\n    'position: absolute;',\n    'display: block;',\n    '}',\n\n    /* Necessary to position the drag surface */\n    '.blocklyRelativeWrapper {',\n    'position: relative;',\n    'width: 100%;',\n    'height: 100%;',\n    '}',\n\n    '.blocklyWidgetDiv {',\n    'display: none;',\n    'position: absolute;',\n    'z-index: 99999;' /* big value for bootstrap3 compatibility */,\n    '}',\n\n    '.injectionDiv {',\n    'height: calc(100vh - 11rem);',\n    'position: relative;',\n    'overflow: hidden;' /* So blocks in drag surface disappear at edges */,\n    'touch-action: none;',\n    '}',\n\n    '.blocklyNonSelectable {',\n    'user-select: none;',\n    '-moz-user-select: none;',\n    '-webkit-user-select: none;',\n    '-ms-user-select: none;',\n    '}',\n\n    '.blocklyWidgetDiv.fieldTextInput {',\n    'overflow: hidden;',\n    'border: 1px solid;',\n    'box-sizing: border-box;',\n    'transform-origin: 0 0;',\n    '-ms-transform-origin: 0 0;',\n    '-moz-transform-origin: 0 0;',\n    '-webkit-transform-origin: 0 0;',\n    '}',\n\n    '.blocklyWidgetDiv.fieldTextInput.removableTextInput {',\n    'overflow: visible;',\n    '}',\n\n    '.blocklyTextDropDownArrow {',\n    'position: absolute;',\n    '}',\n\n    '.blocklyTextRemoveIcon {',\n    'position: absolute;',\n    'width: 24px;',\n    'height: 24px;',\n    'top: -40px;',\n    'left: 50%;',\n    'margin-left: -12px;',\n    'cursor: pointer;',\n    '}',\n\n    '.blocklyNonSelectable {',\n    'user-select: none;',\n    '-moz-user-select: none;',\n    '-webkit-user-select: none;',\n    '-ms-user-select: none;',\n    '}',\n\n    '.blocklyWsDragSurface {',\n    'display: none;',\n    'position: absolute;',\n    'top: 0;',\n    'left: 0;',\n    '}',\n    /* Added as a separate rule with multiple classes to make it more specific\n     than a bootstrap rule that selects svg:root. See issue #1275 for context.\n  */\n    '.blocklyWsDragSurface.blocklyOverflowVisible {',\n    'overflow: visible;',\n    '}',\n\n    '.blocklyBlockDragSurface {',\n    'display: none;',\n    'position: absolute;',\n    'top: 0;',\n    'left: 0;',\n    'right: 0;',\n    'bottom: 0;',\n    'overflow: visible !important;',\n    'z-index: 50;' /* Display above the toolbox */,\n    '}',\n\n    '.blocklyTooltipDiv {',\n    'min-height: 34px;',\n    'background-color: #d6dadb;',\n    'border-radius: 4px;',\n    'color: #333333;',\n    'padding: 8px;',\n    'font-size: 12px;',\n    'font-family: \"IBM Plex Sans\";',\n    'line-height: 1.5;',\n    'letter-spacing: normal;',\n    'position: absolute;',\n    'z-index: 100000;' /* big value for bootstrap3 compatibility */,\n    '}',\n\n    '.blocklyDropDownDiv {',\n    'position: fixed;',\n    'left: 0;',\n    'top: 0;',\n    'z-index: 1000;',\n    'display: none;',\n    'border: 1px solid;',\n    'border-radius: 4px;',\n    `box-shadow: 0px 0px 8px 1px ${Blockly.Colours.dropDownShadow};`,\n    'padding: 4px;',\n    '-webkit-user-select: none;',\n    'min-height: 15px',\n    '}',\n\n    '.blocklyDropDownContent {',\n    'max-height: 300px;', // @todo: spec for maximum height.\n    'overflow: auto;',\n    '}',\n\n    '.blocklyDropDownArrow {',\n    'position: absolute;',\n    'left: 0;',\n    'top: 0;',\n    'width: 16px;',\n    'height: 16px;',\n    'z-index: -1;',\n    'background-color: inherit;',\n    'border-color: inherit;',\n    '}',\n\n    '.blocklyDropDownButton {',\n    'display: inline-block;',\n    'float: left;',\n    'padding: 0;',\n    'margin: 4px;',\n    'border-radius: 4px;',\n    'outline: none;',\n    'border: 1px solid;',\n    'transition: box-shadow .1s;',\n    'cursor: pointer;',\n    '}',\n\n    '.blocklyDropDownButtonHover {',\n    `box-shadow: 0px 0px 0px 4px ${Blockly.Colours.fieldShadow};`,\n    '}',\n\n    '.blocklyDropDownButton:active {',\n    `box-shadow: 0px 0px 0px 6px ${Blockly.Colours.fieldShadow};`,\n    '}',\n\n    '.blocklyDropDownButton > img {',\n    'width: 80%;',\n    'height: 80%;',\n    'margin-top: 5%',\n    '}',\n\n    '.blocklyDropDownPlaceholder {',\n    'display: inline-block;',\n    'float: left;',\n    'padding: 0;',\n    'margin: 4px;',\n    '}',\n\n    '.blocklyNumPadButton {',\n    'display: inline-block;',\n    'float: left;',\n    'padding: 0;',\n    'width: 48px;',\n    'height: 48px;',\n    'margin: 4px;',\n    'border-radius: 4px;',\n    'background: $colour_numPadBackground;',\n    'color: #333333;',\n    'outline: none;',\n    'border: 1px solid $colour_numPadBorder;',\n    'cursor: pointer;',\n    'font-weight: 600;',\n    'font-size: 12pt;',\n    '-webkit-tap-highlight-color: rgba(0,0,0,0);',\n    '}',\n\n    '.blocklyNumPadButton > img {',\n    'margin-top: 10%;',\n    'width: 80%;',\n    'height: 80%;',\n    'filter: invert(1);',\n    '}',\n\n    '.blocklyNumPadButton:active {',\n    'background: $colour_numPadActiveBackground;',\n    '-webkit-tap-highlight-color: rgba(0,0,0,0);',\n    '}',\n\n    '.arrowTop {',\n    'border-top: 1px solid;',\n    'border-left: 1px solid;',\n    'border-top-left-radius: 4px;',\n    'border-color: inherit;',\n    '}',\n\n    '.arrowBottom {',\n    'border-bottom: 1px solid;',\n    'border-right: 1px solid;',\n    'border-bottom-right-radius: 4px;',\n    'border-color: inherit;',\n    '}',\n\n    '.valueReportBox {',\n    'min-width: 50px;',\n    'max-width: 300px;',\n    'max-height: 200px;',\n    'overflow: auto;',\n    'word-wrap: break-word;',\n    'text-align: center;',\n    'font-size: .8em;',\n    '}',\n\n    '.blocklyResizeSE {',\n    'cursor: se-resize;',\n    'fill: #aaa;',\n    '}',\n\n    '.blocklyResizeSW {',\n    'cursor: sw-resize;',\n    'fill: #aaa;',\n    '}',\n\n    '.blocklyResizeLine {',\n    'stroke: #888;',\n    'stroke-width: 1;',\n    '}',\n\n    '.blocklyHighlightedConnectionPath {',\n    'fill: none;',\n    'stroke: #fc3;',\n    'stroke-width: 4px;',\n    '}',\n\n    '.blocklyPath {',\n    'stroke-width: 0.3px;',\n\n    '}',\n\n    '.blocklySelected>.blocklyPath {',\n    'stroke: #ffc358;',\n    'stroke-width: 3px;',\n    '}',\n\n    '.blocklySelected>.blocklyPathLight {',\n    'display: none;',\n    '}',\n\n    '.blocklyDraggable {',\n    /* backup for browsers (e.g. IE11) that don't support grab */\n    'cursor: url(\"<<<PATH>>>/handopen.cur\"), auto;',\n    'cursor: grab;',\n    'cursor: -webkit-grab;',\n    'cursor: -moz-grab;',\n    '}',\n\n    '.blocklyDragging {',\n    /* backup for browsers (e.g. IE11) that don't support grabbing */\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n    'cursor: -moz-grabbing;',\n    '}',\n    /* Changes cursor on mouse down. Not effective in Firefox because of\n    https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n    '.blocklyDraggable:active {',\n    /* backup for browsers (e.g. IE11) that don't support grabbing */\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n    'cursor: -moz-grabbing;',\n    '}',\n    /* Change the cursor on the whole drag surface in case the mouse gets\n     ahead of block during a drag. This way the cursor is still a closed hand.\n   */\n    '.blocklyBlockDragSurface .blocklyDraggable {',\n    /* backup for browsers (e.g. IE11) that don't support grabbing */\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n    'cursor: -moz-grabbing;',\n    '}',\n\n    '.blocklyDragging.blocklyDraggingDelete {',\n    'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\n    '}',\n\n    '.blocklyDragging.blocklyDraggingMouseThrough {',\n    'pointer-events: none;',\n    '}',\n\n    '.blocklyToolboxDelete {',\n    'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\n    '}',\n\n    '.blocklyToolboxGrab {',\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n    '}',\n\n    '.blocklyDragging>.blocklyPath,',\n    '.blocklyDragging>.blocklyPathLight {',\n    'fill-opacity: 1.0;',\n    'stroke-opacity: 1.0;',\n    '}',\n\n    '.blocklyDragging>.blocklyPath {',\n    '}',\n\n    '.blocklyDisabled>.blocklyPath {',\n    'fill-opacity: .5;',\n    'stroke-opacity: .5;',\n    '}',\n\n    '.blocklyInsertionMarker>.blocklyPath {',\n    'stroke: none;',\n    '}',\n\n    '.blocklyText {',\n    'fill: #333333;',\n    'font-family: inherit;',\n    'font-size: var(--text-size-s);',\n    'font-weight: normal;',\n    'font-stretch: normal;',\n    'font-style: normal;',\n    'line-height: 1.5;',\n    'letter-spacing: normal;',\n    '}',\n\n    '.blocklyTextTruncated {',\n    'font-size: 11pt;',\n    '}',\n\n    '.blocklyNonEditableText>text {',\n    'pointer-events: none;',\n    '}',\n\n    '.blocklyNonEditableText>text,',\n    '.blocklyEditableText>text {',\n    'fill: var(--text-prominent);',\n    // 'fill: #575E75 !important;',\n    '}',\n\n    '.blocklyEditableText>.blocklyEditableLabel {',\n    'fill: var(--text-prominent);',\n    '}',\n\n    '.blocklyDropdownText {',\n    'fill: var(--text-prominent)!important;',\n    '}',\n\n    '.blocklyBubbleText {',\n    'fill: $colour_text;',\n    '}',\n    '.blocklyFlyout {',\n    'position: absolute;',\n    'z-index: 20;',\n    '}',\n    '.blocklyFlyoutButton {',\n    'fill: none;',\n    'pointer-events: all;',\n    '}',\n\n    '.blocklyFlyoutButtonBackground {',\n    'stroke: #c6c6c6;',\n    '}',\n\n    '.blocklyFlyoutButton .blocklyText {',\n    'fill: $colour_text;',\n    '}',\n\n    '.blocklyFlyoutButtonShadow {',\n    'fill: transparent;',\n    '}',\n\n    '.blocklyFlyoutButton:hover {',\n    'fill: white;',\n    'cursor: pointer;',\n    '}',\n\n    '.blocklyFlyoutLabel {',\n    'cursor: default;',\n    '}',\n\n    '.blocklyFlyoutLabelBackground {',\n    'opacity: 0;',\n    '}',\n\n    '.blocklyFlyoutLabelText {',\n    'font-size: 14pt;',\n    'fill: #575E75;',\n    'font-weight: bold;',\n    '}',\n\n    /*\n    Don't allow users to select text.  It gets annoying when trying to\n    drag a block and selected text moves instead.\n  */\n    '.blocklySvg text, .blocklyBlockDragSurface text, .blocklyFlyout text, .blocklyToolboxDiv text {',\n    'user-select: none;',\n    '-moz-user-select: none;',\n    '-webkit-user-select: none;',\n    'cursor: inherit;',\n    '}',\n\n    '.blocklyHidden {',\n    'display: none;',\n    '}',\n\n    '.blocklyFieldDropdown:not(.blocklyHidden) {',\n    'display: block;',\n    '}',\n\n    '.blocklyIconGroup {',\n    'cursor: default;',\n    '}',\n\n    '.blocklyIconGroup:not(:hover),',\n    '.blocklyIconGroupReadonly {',\n    'opacity: .6;',\n    '}',\n\n    '.blocklyIconShape {',\n    'fill: #00f;',\n    'stroke: #fff;',\n    'stroke-width: 1px;',\n    '}',\n\n    '.blocklyIconSymbol {',\n    'fill: #fff;',\n    '}',\n\n    '.blocklyMinimalBody {',\n    'margin: 0;',\n    'padding: 0;',\n    '}',\n\n    '.blocklyCommentForeignObject {',\n    'position: relative;',\n    'z-index: 0;',\n    '}',\n\n    '.blocklyCommentRect {',\n    'fill: #E7DE8E;',\n    'stroke: #bcA903;',\n    'stroke-width: 1px',\n    '}',\n\n    '.blocklyCommentTarget {',\n    'fill: transparent;',\n    'stroke: #bcA903;',\n    '}',\n\n    '.blocklyCommentTargetFocused {',\n    'fill: none;',\n    '}',\n\n    '.blocklyCommentHandleTarget {',\n    'fill: none;',\n    '}',\n\n    '.blocklyCommentHandleTargetFocused {',\n    'fill: transparent;',\n    '}',\n\n    '.blocklyFocused>.blocklyCommentRect {',\n    'fill: #B9B272;',\n    'stroke: #B9B272;',\n    '}',\n\n    '.blocklySelected>.blocklyCommentTarget {',\n    'stroke: #fc3;',\n    'stroke-width: 3px;',\n    '}',\n\n    '.blocklyCommentTextarea {',\n    'background-color: #fef49c;',\n    'border: 0;',\n    'outline: 0;',\n    'margin: 0;',\n    'padding: 3px;',\n    'resize: none;',\n    'display: block;',\n    'overflow: hidden;',\n    '}',\n\n    '.blocklyCommentDeleteIcon {',\n    'cursor: pointer;',\n    'fill: #000;',\n    'display: none',\n    '}',\n\n    '.blocklySelected > .blocklyCommentDeleteIcon {',\n    'display: block',\n    '}',\n\n    '.blocklyDeleteIconShape {',\n    'fill: #000;',\n    'stroke: #000;',\n    'stroke-width: 1px;',\n    '}',\n\n    '.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {',\n    'stroke: #fc3;',\n    '}',\n\n    // Scratch Comments\n\n    '.scratchCommentForeignObject {',\n    'position: relative;',\n    '}',\n\n    '.scratchCommentBody {',\n    'background-color: #fef49c;',\n    'border-radius: 4px;',\n    '}',\n\n    '.scratchCommentRect {',\n    'fill: #fef49c;',\n    '}',\n\n    '.scratchCommentTarget {',\n    'fill: transparent;',\n    '}',\n\n    '.scratchWorkspaceCommentBorder {',\n    'stroke: #bcA903;',\n    'stroke-width: 1px;',\n    '}',\n\n    '.scratchCommentTargetFocused {',\n    'fill: none;',\n    '}',\n\n    '.scratchCommentTopBar {',\n    'fill: #000000;',\n    'fill-opacity: 0.1',\n    '}',\n\n    '.scratchCommentText {',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 12pt;',\n    'font-weight: 400;',\n    '}',\n\n    '.scratchCommentTextarea {',\n    'background-color: #fef49c;',\n    'border: 0;',\n    'outline: 0;',\n    'padding: 0;',\n    'resize: none;',\n    'overflow: hidden;',\n    '}',\n\n    '.scratchCommentResizeSE {',\n    'cursor: se-resize;',\n    'fill: transparent;',\n    '}',\n\n    '.scratchCommentResizeSW {',\n    'cursor: sw-resize;',\n    'fill: transparent;',\n    '}',\n\n    '.blocklyHtmlInput {',\n    'border: none;',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 12pt;',\n    'height: 100%;',\n    'margin: 0;',\n    'outline: none;',\n    'box-sizing: border-box;',\n    'width: 100%;',\n    'text-align: center;',\n    'color: $colour_text;',\n    'font-weight: 500;',\n    '}',\n\n    '.blocklyMainBackground {',\n    'stroke-width: 0;',\n    // 'stroke: #c6c6c6;',  /* Equates to #ddd due to border being off-pixel. */\n    '}',\n\n    '.blocklyMutatorBackground {',\n    'fill: #fff;',\n    'stroke: #fff;',\n    'stroke-width: 1;',\n    '}',\n\n    '.blocklyFlyoutBackground {',\n    'fill: $colour_flyout;',\n    'fill-opacity: .8;',\n    '}',\n\n    '.blocklyMainWorkspaceScrollbar {',\n    'z-index: 20;',\n    '}',\n\n    '.blocklyFlyoutScrollbar {',\n    'z-index: 30;',\n    '}',\n\n    '.blocklyScrollbarHorizontal, .blocklyScrollbarVertical {',\n    'position: absolute;',\n    'outline: none;',\n    '}',\n\n    '.blocklyScrollbarBackground {',\n    'opacity: 0;',\n    '}',\n\n    '.blocklyScrollbarHandle {',\n    'fill: $colour_scrollbar;',\n    '}',\n\n    '.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,',\n    '.blocklyScrollbarHandle:hover {',\n    'fill: $colour_scrollbarHover;',\n    '}',\n\n    '.blocklyZoom>image {',\n    'opacity: 1;',\n    '}',\n\n    /* Darken flyout scrollbars due to being on a grey background. */\n    /* By contrast, workspace scrollbars are on a white background. */\n    '.blocklyFlyout .blocklyScrollbarHandle {',\n    'fill: #bbb;',\n    '}',\n\n    '.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,',\n    '.blocklyFlyout .blocklyScrollbarHandle:hover {',\n    'fill: #aaa;',\n    '}',\n\n    '.blocklyInvalidInput {',\n    'background: #faa;',\n    '}',\n\n    '.blocklyAngleCircle {',\n    `stroke: ${Blockly.Colours.motion.tertiary};`,\n    'stroke-width: 1;',\n    `fill: ${Blockly.Colours.motion.secondary};`,\n    '}',\n\n    '.blocklyAngleCenterPoint {',\n    'stroke: #fff;',\n    'stroke-width: 1;',\n    'fill: #fff;',\n    '}',\n\n    '.blocklyAngleDragHandle {',\n    'stroke: #fff;',\n    'stroke-width: 5;',\n    'stroke-opacity: 0.25;',\n    'fill: #fff;',\n    'cursor: pointer;',\n    '}',\n\n    '.blocklyAngleDragArrow {',\n    'pointer-events: none',\n    '}',\n\n    '.blocklyAngleMarks {',\n    'stroke: #fff;',\n    'stroke-width: 1;',\n    'stroke-opacity: 0.5;',\n    '}',\n\n    '.blocklyAngleGauge {',\n    'fill: #fff;',\n    'fill-opacity: 0.20;',\n    '}',\n\n    '.blocklyAngleLine {',\n    'stroke: #fff;',\n    'stroke-width: 1;',\n    'stroke-linecap: round;',\n    'pointer-events: none;',\n    '}',\n\n    '.blocklyContextMenu {',\n    'border-radius: 4px;',\n    'max-height: 100%;',\n    '}',\n\n    '.blocklyDropdownMenu {',\n    'padding: 0 !important;',\n    '}',\n\n    '.blocklyDropDownNumPad {',\n    'background-color: $colour_numPadBackground;',\n    '}',\n\n    /* Override the default Closure URL. */\n    '.blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,',\n    '.blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon {',\n    'background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;',\n    '}',\n\n    /* Category tree in Toolbox. */\n    '.blocklyToolboxDiv {',\n    'background-color: $colour_toolbox;',\n    'color: $colour_toolboxText;',\n    'overflow-x: visible;',\n    'overflow-y: auto;',\n    'position: absolute;',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'z-index: 40;' /* so blocks go over toolbox when dragging */,\n    '-webkit-tap-highlight-color: transparent;' /* issue #1345 */,\n    '}',\n\n    '.blocklyTreeRoot {',\n    'padding: 4px 0;',\n    '}',\n\n    '.blocklyTreeRoot:focus {',\n    'outline: none;',\n    '}',\n\n    '.blocklyTreeRow {',\n    'height: 22px;',\n    'line-height: 22px;',\n    'margin-bottom: 3px;',\n    'padding-right: 8px;',\n    'white-space: nowrap;',\n    '}',\n\n    '.blocklyHorizontalTree {',\n    'float: left;',\n    'margin: 1px 5px 8px 0;',\n    '}',\n\n    '.blocklyHorizontalTreeRtl {',\n    'float: right;',\n    'margin: 1px 0 8px 5px;',\n    '}',\n\n    '.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeRow {',\n    'margin-left: 8px;',\n    '}',\n\n    '.blocklyTreeRow:not(.blocklyTreeSelected):hover {',\n    'background-color: #e4e4e4;',\n    '}',\n\n    '.blocklyTreeSeparator {',\n    'border-bottom: solid #e5e5e5 1px;',\n    'height: 0;',\n    'margin: 5px 0;',\n    '}',\n\n    '.blocklyTreeSeparatorHorizontal {',\n    'border-right: solid #e5e5e5 1px;',\n    'width: 0;',\n    'padding: 5px 0;',\n    'margin: 0 5px;',\n    '}',\n\n    '.blocklyTreeIcon {',\n    'background-image: url(<<<PATH>>>/sprites.png);',\n    'height: 16px;',\n    'vertical-align: middle;',\n    'width: 16px;',\n    '}',\n\n    '.blocklyTreeIconClosedLtr {',\n    'background-position: -32px -1px;',\n    '}',\n\n    '.blocklyTreeIconClosedRtl {',\n    'background-position: 0px -1px;',\n    '}',\n\n    '.blocklyTreeIconOpen {',\n    'background-position: -16px -1px;',\n    '}',\n\n    '.blocklyTreeSelected>.blocklyTreeIconClosedLtr {',\n    'background-position: -32px -17px;',\n    '}',\n\n    '.blocklyTreeSelected>.blocklyTreeIconClosedRtl {',\n    'background-position: 0px -17px;',\n    '}',\n\n    '.blocklyTreeSelected>.blocklyTreeIconOpen {',\n    'background-position: -16px -17px;',\n    '}',\n\n    '.blocklyTreeIconNone,',\n    '.blocklyTreeSelected>.blocklyTreeIconNone {',\n    'background-position: -48px -1px;',\n    '}',\n\n    '.blocklyTreeLabel {',\n    'cursor: default;',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 16px;',\n    'padding: 0 3px;',\n    'vertical-align: middle;',\n    '}',\n\n    '.blocklyToolboxDelete .blocklyTreeLabel {',\n    'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\n    '}',\n\n    '.blocklyTreeSelected .blocklyTreeLabel {',\n    'color: #fff;',\n    '}',\n\n    '.blocklyDropDownDiv .goog-slider-horizontal {',\n    'margin: 8px;',\n    'height: 22px;',\n    'width: 150px;',\n    'position: relative;',\n    'outline: none;',\n    'border-radius: 11px;',\n    'margin-bottom: 20px;',\n    '}',\n\n    '.blocklyDropDownDiv .goog-slider-horizontal .goog-slider-thumb {',\n    'width: 26px;',\n    'height: 26px;',\n    'top: -1px;',\n    'position: absolute;',\n    'background-color: white;',\n    'border-radius: 100%;',\n    '-webkit-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);',\n    '-moz-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);',\n    'box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);',\n    '}',\n\n    '.scratchEyedropper {',\n    'background: none;',\n    'outline: none;',\n    'border: none;',\n    'width: 100%;',\n    'text-align: center;',\n    'border-top: 1px solid #ddd;',\n    'padding-top: 5px;',\n    'cursor: pointer;',\n    '}',\n\n    '.scratchColourPickerLabel {',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 0.65rem;',\n    'color: $colour_toolboxText;',\n    'margin: 8px;',\n    '}',\n\n    '.scratchColourPickerLabelText {',\n    'font-weight: bold;',\n    '}',\n\n    '.scratchColourPickerReadout {',\n    'margin-left: 10px;',\n    '}',\n\n    '.scratchMatrixButtonDiv {',\n    'width: 50%;',\n    'text-align: center;',\n    'float: left;',\n    '}',\n\n    '.scratchNotePickerKeyLabel {',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 0.75rem;',\n    'fill: $colour_text;',\n    'pointer-events: none;',\n    '}',\n\n    /* Copied from: goog/css/menu.css */\n    /*\n     * Copyright 2009 The Closure Library Authors. All Rights Reserved.\n     *\n     * Use of this source code is governed by the Apache License, Version 2.0.\n     * See the COPYING file for details.\n     */\n\n    /**\n     * Standard styling for menus created by goog.ui.MenuRenderer.\n     *\n     * @author attila@google.com (Attila Bodis)\n     */\n\n    '.blocklyWidgetDiv .goog-menu {',\n    'background: #fff;',\n    'border-color: #ccc #666 #666 #ccc;',\n    'border-style: solid;',\n    'border-width: 1px;',\n    'cursor: default;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    'margin: 0;',\n    'outline: none;',\n    'padding: 4px 0;',\n    'position: absolute;',\n    'overflow-y: auto;',\n    'overflow-x: hidden;',\n    'z-index: 20000;' /* Arbitrary, but some apps depend on it... */,\n    '}',\n\n    '.blocklyDropDownDiv .goog-menu {',\n    'cursor: default;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    'outline: none;',\n    'z-index: 20000;' /* Arbitrary, but some apps depend on it... */,\n    '}',\n\n    /* Copied from: goog/css/menuitem.css */\n    /*\n     * Copyright 2009 The Closure Library Authors. All Rights Reserved.\n     *\n     * Use of this source code is governed by the Apache License, Version 2.0.\n     * See the COPYING file for details.\n     */\n\n    /**\n     * Standard styling for menus created by goog.ui.MenuItemRenderer.\n     *\n     * @author attila@google.com (Attila Bodis)\n     */\n\n    /**\n     * State: resting.\n     *\n     * NOTE(mleibman,chrishenry):\n     * The RTL support in Closure is provided via two mechanisms -- \"rtl\" CSS\n     * classes and BiDi flipping done by the CSS compiler.  Closure supports RTL\n     * with or without the use of the CSS compiler.  In order for them not\n     * to conflict with each other, the \"rtl\" CSS classes need to have the #noflip\n     * annotation.  The non-rtl counterparts should ideally have them as well, but,\n     * since .goog-menuitem existed without .goog-menuitem-rtl for so long before\n     * being added, there is a risk of people having templates where they are not\n     * rendering the .goog-menuitem-rtl class when in RTL and instead rely solely\n     * on the BiDi flipping by the CSS compiler.  That's why we're not adding the\n     * #noflip to .goog-menuitem.\n     */\n    '.blocklyWidgetDiv .goog-menuitem {',\n    'color: #000;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    'list-style: none;',\n    'margin: 0;',\n    /* 28px on the left for icon or checkbox; 7em on the right for shortcut. */\n    'padding: 4px 7em 4px 28px;',\n    'white-space: nowrap;',\n    '}',\n\n    '.blocklyDropDownDiv .goog-menuitem {',\n    'color: #333333;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-weight: bold;',\n    'list-style: none;',\n    'margin: 0;',\n    'min-height: 24px;',\n    /* 28px on the left for icon or checkbox; 7em on the right for shortcut. */\n    'padding: 4px 7em 4px 28px;',\n    'white-space: nowrap;',\n    '}',\n\n    /* BiDi override for the resting state. */\n    /* #noflip */\n    '.blocklyWidgetDiv .goog-menuitem.goog-menuitem-rtl, ',\n    '.blocklyDropDownDiv .goog-menuitem.goog-menuitem-rtl {',\n    /* Flip left/right padding for BiDi. */\n    'padding-left: 7em;',\n    'padding-right: 28px;',\n    '}',\n\n    /* If a menu doesn't have checkable items or items with icons, remove padding. */\n    '.blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,',\n    '.blocklyWidgetDiv .goog-menu-noicon .goog-menuitem, ',\n    '.blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,',\n    '.blocklyDropDownDiv .goog-menu-noicon .goog-menuitem { ',\n    'padding-left: 12px;',\n    '}',\n\n    /*\n     * If a menu doesn't have items with shortcuts, leave just enough room for\n     * submenu arrows, if they are rendered.\n     */\n    '.blocklyWidgetDiv .goog-menu-noaccel .goog-menuitem, ',\n    '.blocklyDropDownDiv .goog-menu-noaccel .goog-menuitem {',\n    'padding-right: 20px;',\n    '}',\n\n    '.blocklyWidgetDiv .goog-menuitem-content ',\n    '.blocklyDropDownDiv .goog-menuitem-content {',\n    'color: #000;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    '}',\n\n    /* State: disabled. */\n    '.blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-accel,',\n    '.blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content, ',\n    '.blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-accel,',\n    '.blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {',\n    'color: #ccc !important;',\n    '}',\n\n    '.blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon, ',\n    '.blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {',\n    'opacity: 0.3;',\n    '-moz-opacity: 0.3;',\n    'filter: alpha(opacity=30);',\n    '}',\n\n    /* State: hover. */\n    '.blocklyWidgetDiv .goog-menuitem-highlight,',\n    '.blocklyWidgetDiv .goog-menuitem-hover {',\n    'background-color: #d6e9f8;',\n    /* Use an explicit top and bottom border so that the selection is visible',\n     * in high contrast mode. */\n    'border-color: #d6e9f8;',\n    'border-style: dotted;',\n    'border-width: 1px 0;',\n    'padding-bottom: 3px;',\n    'padding-top: 3px;',\n    '}',\n\n    '.blocklyDropDownDiv .goog-menuitem-highlight,',\n    '.blocklyDropDownDiv .goog-menuitem-hover {',\n    'background-color: rgba(0, 0, 0, 0.2);',\n    '}',\n\n    /* State: selected/checked. */\n    '.blocklyWidgetDiv .goog-menuitem-checkbox,',\n    '.blocklyWidgetDiv .goog-menuitem-icon, ',\n    '.blocklyDropDownDiv .goog-menuitem-checkbox,',\n    '.blocklyDropDownDiv .goog-menuitem-icon {',\n    'background-repeat: no-repeat;',\n    'height: 16px;',\n    'left: 6px;',\n    'position: absolute;',\n    'right: auto;',\n    'vertical-align: middle;',\n    'width: 16px;',\n    '}',\n\n    '.blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,',\n    '.blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,',\n    '.blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,',\n    '.blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {',\n    /* Client apps may override the URL at which they serve the sprite. */\n    'background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;',\n    'position: static;' /* Scroll with the menu. */,\n    'float: left;',\n    'margin-left: -24px;',\n    '}',\n\n    /* BiDi override for the selected/checked state. */\n    /* #noflip */\n    '.blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,',\n    '.blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,',\n    '.blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,',\n    '.blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {',\n    /* Flip left/right positioning. */\n    'float: right;',\n    'margin-right: -24px;',\n    '}',\n\n    /* Keyboard shortcut (\"accelerator\") style. */\n    '.blocklyWidgetDiv .goog-menuitem-accel, ',\n    '.blocklyDropDownDiv .goog-menuitem-accel {',\n    'color: #999;',\n    /* Keyboard shortcuts are untranslated; always left-to-right. */\n    /* #noflip */\n    'direction: ltr;',\n    'left: auto;',\n    'padding: 0 6px;',\n    'position: absolute;',\n    'right: 0;',\n    'text-align: right;',\n    '}',\n\n    /* BiDi override for shortcut style. */\n    /* #noflip */\n    '.blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-accel, ',\n    '.blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-accel {',\n    /* Flip left/right positioning and text alignment. */\n    'left: 0;',\n    'right: auto;',\n    'text-align: left;',\n    '}',\n\n    /* Mnemonic styles. */\n    '.blocklyWidgetDiv .goog-menuitem-mnemonic-hint, ',\n    '.blocklyDropDownDiv .goog-menuitem-mnemonic-hint {',\n    'text-decoration: underline;',\n    '}',\n\n    '.blocklyWidgetDiv .goog-menuitem-mnemonic-separator, ',\n    '.blocklyDropDownDiv .goog-menuitem-mnemonic-separator {',\n    'color: #999;',\n    'font-size: 12px;',\n    'padding-left: 4px;',\n    '}',\n\n    /* Copied from: goog/css/menuseparator.css */\n    /*\n     * Copyright 2009 The Closure Library Authors. All Rights Reserved.\n     *\n     * Use of this source code is governed by the Apache License, Version 2.0.\n     * See the COPYING file for details.\n     */\n\n    /**\n     * Standard styling for menus created by goog.ui.MenuSeparatorRenderer.\n     *\n     * @author attila@google.com (Attila Bodis)\n     */\n\n    '.blocklyWidgetDiv .goog-menuseparator, ',\n    '.blocklyDropDownDiv .goog-menuseparator {',\n    'border-top: 1px solid #ccc;',\n    'margin: 4px 0;',\n    'padding: 0;',\n    '}',\n\n    '.blocklyFlyoutCheckbox {',\n    'fill: white;',\n    'stroke: #c8c8c8;',\n    '}',\n\n    '.blocklyFlyoutCheckbox.checked {',\n    `fill: ${Blockly.Colours.motion.primary};`,\n    `stroke: ${Blockly.Colours.motion.tertiary};`,\n    '}',\n\n    '.blocklyFlyoutCheckboxPath {',\n    'stroke: white;',\n    'stroke-width: 3;',\n    'stroke-linecap: round;',\n    'stroke-linejoin: round;',\n    '}',\n\n    '.scratchCategoryMenu {',\n    'width: 60px;',\n    'background: $colour_toolbox;',\n    'color: $colour_toolboxText;',\n    'font-size: .7rem;',\n    'user-select: none;',\n    '-webkit-user-select: none;',\n    '-moz-user-select: none;',\n    '-ms-user-select: none;',\n    '}',\n\n    '.scratchCategoryMenuHorizontal {',\n    'width: 100%;',\n    'height: 50px;',\n    'background: $colour_toolbox;',\n    'color: $colour_toolboxText;',\n    'font-size: .7em;',\n    'user-select: none;',\n    '-webkit-user-select: none;',\n    '-moz-user-select: none;',\n    '-ms-user-select: none;',\n    '}',\n\n    '.scratchCategoryMenuHorizontal .scratchCategoryMenuRow {',\n    'float: left;',\n    'margin: 3px;',\n    '}',\n\n    '.scratchCategoryMenuRow {',\n    '}',\n\n    '.scratchCategoryMenuItem {',\n    'padding: 0.375rem 0px;',\n    'cursor: pointer;',\n    'text-align: center;',\n    '}',\n\n    '.scratchCategoryMenuHorizontal .scratchCategoryMenuItem {',\n    'padding: 6px 5px;',\n    '}',\n\n    '.scratchCategoryMenuItem.categorySelected {',\n    'background: $colour_toolboxSelected;',\n    '}',\n\n    '.scratchCategoryItemBubble {',\n    'width: 1.25rem;',\n    'height: 1.25rem;',\n    'border: 1px solid;',\n    'border-radius: 100%;',\n    'margin: 0 auto 0.125rem;',\n    '}',\n\n    '.scratchCategoryItemIcon {',\n    'width: 1.25rem;',\n    'height: 1.25rem;',\n    'margin: 0 auto 0.125rem;',\n    'background-size: 100%;',\n    '}',\n\n    '.scratchCategoryMenuItem:hover {',\n    'color: $colour_toolboxHover !important;',\n    '}',\n    '',\n];\n","/**\n * Class for an image on a block.\n * @deriv/bot: Blockly implementation vs. Scratch for click handlers\n * @param {string} src The URL of the image.\n * @param {number} width Width of the image.\n * @param {number} height Height of the image.\n * @param {string=} optAlt Optional alt text for when block is collapsed.\n * @param {Function=} optOnClick Optional function to be called when the image\n *     is clicked.  If optOnClick is defined, optAlt must also be defined.\n * @param {boolean=} optFlipRtl Whether to flip the icon in RTL.\n * @extends {Blockly.Field}\n * @constructor\n */\nBlockly.FieldImage = function (src, width, height, optAlt, optOnClick, optFlipRtl) {\n    this.sourceBlock_ = null;\n\n    // Ensure height and width are numbers.  Strings are bad at math.\n    this.height_ = Number(height);\n    this.width_ = Number(width);\n    this.size_ = new goog.math.Size(this.width_, this.height_);\n    this.flipRtl_ = optFlipRtl;\n    this.tooltip_ = '';\n    this.setValue(src);\n    this.setText(optAlt);\n\n    if (typeof optOnClick === 'function') {\n        this.clickHandler_ = optOnClick;\n    }\n};\ngoog.inherits(Blockly.FieldImage, Blockly.Field);\n\n/**\n * Construct a FieldImage from a JSON arg object,\n * dereferencing any string table references.\n * @param {!Object} options A JSON object with options (src, width, height,\n *    alt, and flipRtl).\n * @return {!Blockly.FieldImage} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldImage.fromJson = function (options) {\n    const src = Blockly.utils.replaceMessageReferences(options.src);\n    const width = Number(Blockly.utils.replaceMessageReferences(options.width));\n    const height = Number(Blockly.utils.replaceMessageReferences(options.height));\n    const alt = Blockly.utils.replaceMessageReferences(options.alt);\n    const flipRtl = !!options.flipRtl;\n    return new Blockly.FieldImage(src, width, height, alt, null, flipRtl);\n};\n\n/**\n * Editable fields are saved by the XML renderer, non-editable fields are not.\n */\nBlockly.FieldImage.prototype.EDITABLE = false;\n\n/**\n * Install this image on a block.\n */\nBlockly.FieldImage.prototype.init = function () {\n    if (this.fieldGroup_) {\n        // Image has already been initialized once.\n        return;\n    }\n    // Build the DOM.\n    /** @type {SVGElement} */\n    this.fieldGroup_ = Blockly.utils.createSvgElement('g', {}, null);\n    if (!this.visible_) {\n        this.fieldGroup_.style.display = 'none';\n    }\n    /** @type {SVGElement} */\n    this.imageElement_ = Blockly.utils.createSvgElement(\n        'image',\n        {\n            height: `${this.height_}px`,\n            width: `${this.width_}px`,\n        },\n        this.fieldGroup_\n    );\n    this.setValue(this.src_);\n    this.setText(this.text_);\n    this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_);\n\n    if (this.tooltip_) {\n        this.imageElement_.tooltip = this.tooltip_;\n    } else {\n        // Configure the field to be transparent with respect to tooltips.\n        this.setTooltip(this.sourceBlock_);\n    }\n    Blockly.Tooltip.bindMouseEvents(this.imageElement_);\n\n    this.maybeAddClickHandler_();\n};\n\n/**\n * Dispose of all DOM objects belonging to this text.\n */\nBlockly.FieldImage.prototype.dispose = function () {\n    goog.dom.removeNode(this.fieldGroup_);\n    this.fieldGroup_ = null;\n    this.imageElement_ = null;\n};\n\n/**\n * Bind events for a mouse down on the image, but only if a click handler has\n * been defined. If a click handler is attached to the image, change the cursor to a pointer.\n * @private\n */\nBlockly.FieldImage.prototype.maybeAddClickHandler_ = function () {\n    if (this.clickHandler_ && !this.sourceBlock_.workspace.options.readOnly && !this.sourceBlock_.isInFlyout) {\n        this.mouseDownWrapper_ = Blockly.bindEventWithChecks_(this.fieldGroup_, 'mousedown', this, this.clickHandler_);\n        this.fieldGroup_.style.cursor = 'pointer';\n    }\n};\n\n/**\n * Change the tooltip text for this field.\n * @param {string|!Element} newTip Text for tooltip or a parent element to\n *     link to for its tooltip.\n */\nBlockly.FieldImage.prototype.setTooltip = function (newTip) {\n    this.tooltip_ = newTip;\n    if (this.imageElement_) {\n        this.imageElement_.tooltip = newTip;\n    }\n};\n\n/**\n * Get the source URL of this image.\n * @return {string} Current text.\n * @override\n */\nBlockly.FieldImage.prototype.getValue = function () {\n    return this.src_;\n};\n\n/**\n * Set the source URL of this image.\n * @param {?string} src New source.\n * @override\n */\nBlockly.FieldImage.prototype.setValue = function (src) {\n    if (src === null) {\n        // No change if null.\n        return;\n    }\n    this.src_ = src;\n    if (this.imageElement_) {\n        this.imageElement_.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', src || '');\n    }\n};\n\n/**\n * Get whether to flip this image in RTL\n * @return {boolean} True if we should flip in RTL.\n */\nBlockly.FieldImage.prototype.getFlipRtl = function () {\n    return this.flipRtl_;\n};\n\n/**\n * Set the alt text of this image.\n * @param {?string} alt New alt text.\n * @override\n */\nBlockly.FieldImage.prototype.setText = function (alt) {\n    if (alt === null) {\n        // No change if null.\n        return;\n    }\n    this.text_ = alt;\n    if (this.imageElement_) {\n        this.imageElement_.setAttribute('alt', alt || '');\n    }\n};\n\n/**\n * Images are fixed width, no need to render.\n * @private\n */\nBlockly.FieldImage.prototype.render_ = function () {\n    // NOP\n};\n\n/**\n * Images are fixed width, no need to render even if forced.\n */\nBlockly.FieldImage.prototype.forceRerender = function () {\n    // NOP\n};\n\n/**\n * Images are fixed width, no need to update.\n * @private\n */\nBlockly.FieldImage.prototype.updateWidth = function () {\n    // NOP\n};\n\n/**\n * If field click is called, and click handler defined,\n * call the handler.\n */\nBlockly.FieldImage.prototype.showEditor_ = function () {\n    if (this.clickHandler_) {\n        this.clickHandler_(this);\n    }\n};\n\nBlockly.Field.register('field_image', Blockly.FieldImage);\n","/**\n * Install this text field on a block.\n */\nBlockly.FieldTextInput.prototype.init = function () {\n    if (this.fieldGroup_) {\n        // Field has already been initialized once.\n        return;\n    }\n\n    const notInShadow = !this.sourceBlock_.isShadow();\n\n    if (notInShadow) {\n        this.className_ += ' blocklyEditableLabel';\n    }\n\n    this.maxDisplayLength = 17;\n\n    Blockly.FieldTextInput.superClass_.init.call(this);\n\n    // If not in a shadow block, draw a box.\n    if (notInShadow) {\n        this.box_ = Blockly.utils.createSvgElement('rect', {\n            rx: Blockly.BlockSvg.CORNER_RADIUS * 4,\n            ry: Blockly.BlockSvg.CORNER_RADIUS * 4,\n            x: 0,\n            y: 0,\n            width: this.size_.width,\n            height: this.size_.height,\n            fill: this.sourceBlock_.getColourSecondary(),\n            stroke: this.sourceBlock_.getColourTertiary(),\n            'stroke-width': '0.3px',\n        });\n        this.fieldGroup_.insertBefore(this.box_, this.textElement_);\n    }\n};\n","/**\n * Update this gesture to record whether a block is being dragged from the\n * flyout. This function should be called on a mouse/touch move event the first time the\n * drag radius is exceeded.  It should be called no more than once per gesture.\n * If a block should be dragged from the flyout this function creates the new\n * block on the main workspace and updates targetBlock_ and startWorkspace_.\n * @return {boolean} True if a block is being dragged from the flyout.\n * @private\n */\nBlockly.Gesture.prototype.updateIsDraggingFromFlyout_ = function () {\n    // Disabled blocks may not be dragged from the flyout.\n    if (this.targetBlock_.disabled) {\n        return false;\n    }\n\n    if (!this.flyout_.isScrollable() || this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)) {\n        this.startWorkspace_ = this.flyout_.targetWorkspace_;\n        this.startWorkspace_.updateScreenCalculationsIfScrolled();\n\n        // Start the event group now, so that the same event group is used for block\n        // creation and block dragging.\n        if (!Blockly.Events.getGroup()) {\n            Blockly.Events.setGroup(true);\n        }\n\n        // The start block is no longer relevant, because this is a drag.\n        this.startBlock_ = null;\n        this.targetBlock_ = this.flyout_.createBlock(this.mostRecentEvent_, this.targetBlock_);\n        this.targetBlock_.select();\n        return true;\n    }\n    return false;\n};\n","/**\n * Render the icon.\n * @param {number} cursorX Horizontal offset at which to position the icon.\n * @return {number} Horizontal offset for next item to draw.\n */\nBlockly.Icon.prototype.renderIcon = function (cursorX) {\n    if (this.collapseHidden && this.block_.isCollapsed()) {\n        this.iconGroup_.setAttribute('display', 'none');\n        return cursorX;\n    }\n\n    this.iconGroup_.setAttribute('display', 'block');\n\n    let newCursorX = cursorX;\n\n    const TOP_MARGIN = 9;\n    const width = this.SIZE;\n\n    if (this.block_.RTL) {\n        newCursorX -= width;\n    }\n\n    this.iconGroup_.setAttribute('transform', `localize(${newCursorX},${TOP_MARGIN})`);\n    this.computeIconLocation();\n\n    if (this.block_.RTL) {\n        newCursorX -= Blockly.BlockSvg.SEP_SPACE_X;\n    } else {\n        newCursorX += width + Blockly.BlockSvg.SEP_SPACE_X;\n    }\n\n    return newCursorX;\n};\n","import { config } from '../../constants/config';\n\n// Structure is { '<outerHtml />': { height: 1, width: 1 } }\nBlockly.Block.Dimensions = {};\n\nBlockly.Block.prototype.getDisplayName = function () {\n    if (this.meta) {\n        const block_meta = this.meta();\n        return block_meta && block_meta.display_name;\n    }\n    return this.type;\n};\n\nBlockly.Block.prototype.getSiblings = function () {\n    const siblings = [this];\n    ['getPreviousBlock', 'getNextBlock'].forEach(functionName => {\n        let block = this[functionName]();\n        while (block !== null) {\n            const parent = this.getParent();\n            if (parent && parent.id === block.id) {\n                break;\n            }\n\n            siblings.push(block);\n            block = block[functionName]();\n        }\n    });\n    return siblings;\n};\n\nBlockly.Block.prototype.getChildByType = function (type) {\n    return this.getDescendants().find(child => child.type === type);\n};\n\nBlockly.Block.prototype.getChildFieldValue = function (childType, childField) {\n    const childBlock = this.getChildByType(childType);\n    if (childBlock) {\n        const value = childBlock.getFieldValue(childField);\n        return value;\n    }\n    return null;\n};\n\nBlockly.Block.prototype.childValueToCode = function (childType, childField) {\n    const childBlock = this.getChildByType(childType);\n    return childBlock && Blockly.JavaScript.valueToCode(childBlock, childField, Blockly.JavaScript.ORDER_ATOMIC);\n};\n\nBlockly.Block.prototype.getBlocksInStatement = function (statementInputName) {\n    const blocksInStatement = [];\n    const firstBlock = this.getInputTargetBlock(statementInputName);\n\n    if (firstBlock) {\n        return firstBlock.getSiblings();\n    }\n    return blocksInStatement;\n};\n\nBlockly.Block.prototype.getLastConnectionInStatement = function (statement_input_name) {\n    const first_block_in_stack = this.getInputTargetBlock(statement_input_name);\n\n    if (first_block_in_stack) {\n        return first_block_in_stack.lastConnectionInStack();\n    }\n\n    const statement_input = this.getInput(statement_input_name);\n    return statement_input.connection;\n};\n\n/**\n * Get whether this block is enabled or not.\n * @return {boolean} True if enabled.\n */\nBlockly.Block.prototype.isEnabled = function () {\n    return !this.disabled;\n};\n\nBlockly.Block.prototype.isDescendantOf = function (type) {\n    let parentBlock = this.getParent();\n    while (parentBlock !== null) {\n        if (parentBlock.type === type) {\n            return true;\n        }\n        parentBlock = parentBlock.getParent();\n    }\n    return false;\n};\n\nBlockly.Block.prototype.getTopParent = function () {\n    let parent = this.getParent();\n    while (parent !== null) {\n        const nextParent = parent.getParent();\n        if (!nextParent) {\n            return parent;\n        }\n        parent = nextParent;\n    }\n    return null;\n};\n\nBlockly.Block.getDimensions = function (block_node) {\n    // Attempt to retrieve dimensions from memory rather than recalculating.\n    const existing_dimensions_key = Object.keys(Blockly.Block.Dimensions).find(\n        outer_html => block_node.outerHTML === outer_html\n    );\n\n    if (existing_dimensions_key) {\n        return Blockly.Block.Dimensions[existing_dimensions_key];\n    }\n\n    const options = new Blockly.Options({ media: `${__webpack_public_path__}media/` });\n    const el_injection_div = document.createElement('div');\n\n    // Create a headless workspace to calculate xmlList block dimensions\n    const svg = Blockly.createDom_(el_injection_div, options);\n    const workspace = Blockly.createMainWorkspace_(svg, options, false, false);\n    const block = Blockly.Xml.domToBlock(block_node, workspace);\n    const block_hw = block.getHeightWidth();\n\n    workspace.dispose();\n    Blockly.Block.Dimensions[block_node.outerHTML] = block_hw;\n    return block_hw;\n};\n\nBlockly.Block.prototype.isMainBlock = function () {\n    return config.mainBlocks.includes(this.type);\n};\n\nBlockly.Block.prototype.isIndependentBlock = function () {\n    return config.INDEPEDENT_BLOCKS.includes(this.type);\n};\n\n/**\n * Return the parent block or null if this block is at the top level.\n * @return {Blockly.Block} The block that holds the current block.\n */\nBlockly.Block.prototype.getRootInputTargetBlock = function () {\n    let input_name;\n    let current_block = this.getParent();\n\n    while (current_block) {\n        const root_block = this.getRootBlock();\n        const current_input = root_block.getInputWithBlock(current_block);\n\n        if (current_input && current_input.name) {\n            input_name = current_input.name;\n        }\n\n        current_block = current_block.getParent();\n    }\n\n    return input_name;\n};\n\n/**\n * Returns whether the block has an error highlighted descendant.\n */\nBlockly.Block.prototype.hasErrorHighlightedDescendant = function () {\n    const hasHighlightedDescendant = child_blocks =>\n        child_blocks.some(child_block => {\n            const is_self_highlighted = child_block.is_error_highlighted;\n            const is_descendant_highlighted = hasHighlightedDescendant(child_block.getChildren());\n\n            return is_self_highlighted || is_descendant_highlighted;\n        });\n\n    return hasHighlightedDescendant(this.getChildren());\n};\n\nBlockly.Block.isDynamic = function (block_type) {\n    return /^((procedures_)|(variables_)|(math_change$))/.test(block_type);\n};\n","import { localize } from '@deriv/translations';\nimport DBotStore from '../dbot-store';\nimport { save, isDarkRgbColour } from '../utils';\n\n/**\n * Select this block.  Highlight it visually.\n */\nBlockly.BlockSvg.prototype.addSelect = function () {\n    if (!this.isInFlyout) {\n        const { flyout } = DBotStore.instance;\n        if (flyout) {\n            flyout.setVisibility(false);\n        }\n        Blockly.utils.addClass(/** @type {!Element} */ (this.svgGroup_), 'blocklySelected');\n    }\n};\n\n/**\n * Set whether the block is disabled or not.\n * @param {boolean} disabled True if disabled.\n * @deriv/bot: Call updateDisabled() when setDisabled is called.\n */\nBlockly.BlockSvg.prototype.setDisabled = function (disabled) {\n    if (this.disabled !== disabled) {\n        Blockly.BlockSvg.superClass_.setDisabled.call(this, disabled);\n\n        if (this.rendered) {\n            this.updateDisabled();\n        }\n    }\n};\n\n/**\n * Enable or disable a block.\n * @deriv/bot: Update fill path if it doesn't match the disabledPatternId.\n */\nBlockly.BlockSvg.prototype.updateDisabled = function () {\n    if (this.disabled || this.getInheritedDisabled()) {\n        Blockly.utils.addClass(this.svgGroup_, 'blocklyDisabled');\n\n        const fill = `url(#${this.workspace.options.disabledPatternId})`;\n        if (this.svgPath_.getAttribute('fill') !== fill) {\n            this.svgPath_.setAttribute('fill', fill);\n        }\n    } else {\n        const removed = Blockly.utils.removeClass(this.svgGroup_, 'blocklyDisabled');\n        if (removed) {\n            this.updateColour();\n        }\n    }\n\n    const children = this.getChildren(false);\n    children.forEach(child => child.updateDisabled());\n};\n\n/**\n * Show the context menu for this block.\n * @param {!Event} e Mouse event.\n * @private\n * @deriv/bot: Restore contextMenu options from Blockly unavailable in Scratch\n */\nBlockly.BlockSvg.prototype.showContextMenu_ = function (e) {\n    if (this.workspace.options.readOnly || !this.contextMenu) {\n        return;\n    }\n\n    // Save the current block in a variable for use in closures.\n    const block = this;\n    const menu_options = [];\n\n    if (this.isDeletable() && this.isMovable() && !block.isInFlyout) {\n        menu_options.push(Blockly.ContextMenu.blockDuplicateOption(block, e));\n        menu_options.push(Blockly.ContextMenu.blockDetachOption(block, e));\n        if (this.isEditable() && this.workspace.options.comments) {\n            menu_options.push(Blockly.ContextMenu.blockCommentOption(block));\n        }\n\n        menu_options.push(Blockly.ContextMenu.blockDeleteOption(block));\n    } else if (this.parentBlock_ && this.isShadow_) {\n        this.parentBlock_.showContextMenu_(e);\n        return;\n    }\n\n    // Option to collapse/expand block.\n    if (this.workspace.options.collapse) {\n        if (this.collapsed_) {\n            const expand_option = { enabled: true };\n            expand_option.text = localize('Expand Block');\n            expand_option.callback = () => block.setCollapsed(false);\n            menu_options.push(expand_option);\n        } else {\n            const collapse_option = { enabled: true };\n            collapse_option.text = localize('Collapse Block');\n            collapse_option.callback = () => block.setCollapsed(true);\n            menu_options.push(collapse_option);\n        }\n    }\n\n    // Option to disable/enable block.\n    if (this.workspace.options.disable) {\n        const restricted_parents = block.restricted_parents || [];\n        const is_trade_parameter = this.type.includes('trade_definition_') && !this.isMovable();\n\n        const disable_option = {\n            text: this.disabled ? localize('Enable Block') : localize('Disable Block'),\n            enabled:\n                !is_trade_parameter &&\n                (!this.disabled ||\n                    restricted_parents.length === 0 ||\n                    restricted_parents.some(restricted_parent => block.isDescendantOf(restricted_parent))),\n            callback: () => {\n                const group = Blockly.Events.getGroup();\n                if (!group) {\n                    Blockly.Events.setGroup(true);\n                }\n\n                block.setDisabled(!block.disabled);\n\n                if (!group) {\n                    Blockly.Events.setGroup(false);\n                }\n            },\n        };\n        menu_options.push(disable_option);\n    }\n\n    // Option to download block.\n    if (this.isMovable()) {\n        const has_next_block = block.nextConnection && block.nextConnection.isConnected();\n        const downloadBlock = should_delete_next => {\n            const xml = Blockly.Xml.textToDom('<xml/>');\n            const block_xml = Blockly.Xml.blockToDom(block);\n            const file_name = should_delete_next ? block.type : `${block.type}_${localize('stack')}`;\n\n            if (should_delete_next) {\n                Blockly.Xml.deleteNext(block_xml);\n            }\n\n            xml.appendChild(block_xml);\n            save(file_name, /* collection */ true, xml);\n        };\n\n        menu_options.push({\n            text: localize('Download block'),\n            enabled: true,\n            callback: () => downloadBlock(true),\n        });\n\n        if (has_next_block) {\n            menu_options.push({\n                text: localize('Download stack'),\n                enabled: true,\n                callback: () => downloadBlock(false),\n            });\n        }\n    }\n\n    // Disable/Enable stack buttons. If target - last block in stack buttons will be hidden.\n    if (block.nextConnection?.targetConnection) {\n        menu_options.push(Blockly.ContextMenu.blockEnableOption(block, e));\n        menu_options.push(Blockly.ContextMenu.blockDisableOption(block, e));\n    }\n\n    // Allow the block to add or modify menu_options.\n    if (this.customContextMenu) {\n        this.customContextMenu(menu_options);\n    }\n\n    Blockly.ContextMenu.show(e, menu_options, this.RTL);\n    Blockly.ContextMenu.currentBlock = this;\n};\n\n/**\n * Set whether the block is error highlighted or not.\n * @param {boolean} highlighted True if highlighted for error.\n */\nBlockly.BlockSvg.prototype.setErrorHighlighted = function (\n    should_be_error_highlighted,\n    error_message = localize(\n        'The block(s) highlighted in red are missing input values. Please update them and click \"Run bot\".'\n    )\n) {\n    if (this.is_error_highlighted === should_be_error_highlighted) {\n        return;\n    }\n\n    const highlight_class = 'block--error-highlighted';\n\n    if (should_be_error_highlighted) {\n        // Below function does its own checks to check if class already exists.\n        Blockly.utils.addClass(this.svgGroup_, highlight_class);\n    } else {\n        Blockly.utils.removeClass(this.svgGroup_, highlight_class);\n    }\n\n    this.is_error_highlighted = should_be_error_highlighted;\n    this.error_message = error_message;\n};\n\n// Highlight the block that is being executed\nBlockly.BlockSvg.prototype.highlightExecutedBlock = function () {\n    const highlight_block_class = 'block--execution-highlighted';\n\n    if (!Blockly.utils.hasClass(this.svgGroup_, highlight_block_class)) {\n        Blockly.utils.addClass(this.svgGroup_, highlight_block_class);\n        setTimeout(() => {\n            if (this.svgGroup_) {\n                Blockly.utils.removeClass(this.svgGroup_, highlight_block_class);\n            }\n        }, 1505);\n    }\n};\n\n/**\n * Set block animation (Blink)\n */\n\nBlockly.BlockSvg.prototype.blink = function () {\n    const blink_class = 'block--blink';\n    Blockly.utils.addClass(this.svgGroup_, blink_class);\n\n    setTimeout(() => {\n        Blockly.utils.removeClass(this.svgGroup_, blink_class);\n    }, 2000);\n};\n\n/**\n * Set whether the block is collapsed or not.\n * @param {boolean} collapsed True if collapsed.\n */\nBlockly.BlockSvg.prototype.setCollapsed = function (collapsed) {\n    if (this.collapsed_ === collapsed) {\n        return;\n    }\n\n    // Firefox fix for Blockly widthcache bug\n    if (navigator.userAgent.search('Firefox') > 0) {\n        setTimeout(() => {\n            this.workspace.getAllFields().forEach(field => field.forceRerender());\n        }, 0); /* Time duration must be 0. We need this function\n        asynchronous for proper rerender after block resizing. */\n    }\n\n    const render_list = [];\n    const COLLAPSED_INPUT_NAME = '_TEMP_COLLAPSED_INPUT';\n\n    // Show/hide the inputs.\n    this.inputList.forEach(input => {\n        render_list.push(...input.setVisible(!collapsed));\n\n        // Hide empty rounded inputs\n        if (collapsed && input.type === 1 && !input.connection.targetConnection && input.outlinePath)\n            input.outlinePath.style.visibility = 'hidden';\n    });\n\n    if (collapsed) {\n        this.getIcons()\n            // Never hide ScratchBlockComments!\n            .filter(icon => !(icon instanceof Blockly.ScratchBlockComment))\n            .forEach(icon => icon.setVisible(false));\n\n        // Ensure class persists through collapse. Falls back to first\n        // field that has a class. Doesn't work when multiple\n        // field_labels on a block have different classes. So far we\n        // don't have a situation like that, so it works. 👍\n        let field_class = null;\n\n        this.inputList.some(input =>\n            input.fieldRow.some(field => {\n                if (field.class_) {\n                    field_class = field.class_;\n                    return true;\n                }\n                return false;\n            })\n        );\n\n        const dropdown_path =\n            this.workspace.options.pathToMedia +\n            (isDarkRgbColour(this.getColour()) ? 'dropdown-arrow.svg' : 'dropdown-arrow-dark.svg');\n        const field_expand_icon = new Blockly.FieldImage(dropdown_path, 16, 16, localize('Expand'), () =>\n            this.setCollapsed(false)\n        );\n\n        if (this.type === 'procedures_defreturn' || this.type === 'procedures_defnoreturn') {\n            const function_name = this.getFieldValue('NAME');\n            const args = ` (${this.arguments.join(', ')})`;\n\n            this.appendDummyInput(COLLAPSED_INPUT_NAME)\n                .appendField(new Blockly.FieldLabel(localize('function'), field_class))\n                .appendField(new Blockly.FieldLabel(function_name + args, 'header__title'))\n                .appendField(field_expand_icon)\n                .init();\n        } else {\n            const text = this.toString(Blockly.COLLAPSE_CHARS);\n            const field_label = new Blockly.FieldLabel(text, field_class);\n\n            this.appendDummyInput(COLLAPSED_INPUT_NAME).appendField(field_label).appendField(field_expand_icon).init();\n        }\n    } else {\n        this.removeInput(COLLAPSED_INPUT_NAME);\n        this.setWarningText(null); // Clear any warnings inherited from enclosed blocks.\n    }\n\n    Blockly.BlockSvg.superClass_.setCollapsed.call(this, collapsed);\n\n    if (!render_list.length) {\n        render_list.push(this); // No child blocks, just render this block.\n    }\n\n    if (this.rendered) {\n        render_list.forEach(block => block.render());\n        // Don't bump neighbours.\n        // Although bumping neighbours would make sense, users often collapse\n        // all their functions and store them next to each other.  Expanding and\n        // bumping causes all their definitions to go out of alignment.\n    }\n\n    // Check whether the collapsed block needs to be highlighted.\n    this.setErrorHighlighted(collapsed && this.hasErrorHighlightedDescendant());\n};\n\n/**\n * @deriv/bot: Add check for workspace.getCanvas() before appendChild() is called.\n */\nBlockly.BlockSvg.prototype.initSvg = function () {\n    goog.asserts.assert(this.workspace.rendered, 'Workspace is headless.');\n    if (!this.isInsertionMarker()) {\n        // Insertion markers not allowed to have inputs or icons\n        // Input shapes are empty holes drawn when a value input is not connected.\n        // eslint-disable-next-line no-cond-assign\n        for (let i = 0, input; (input = this.inputList[i]); i++) {\n            input.init();\n            input.initOutlinePath(this.svgGroup_);\n        }\n        const icons = this.getIcons();\n        for (let i = 0; i < icons.length; i++) {\n            icons[i].createIcon();\n        }\n    }\n    this.updateColour();\n    this.updateMovable();\n    if (!this.workspace.options.readOnly && !this.eventsInit_) {\n        Blockly.bindEventWithChecks_(this.getSvgRoot(), 'mousedown', this, this.onMouseDown_);\n    }\n    this.eventsInit_ = true;\n\n    if (!this.getSvgRoot().parentNode && this.workspace.getCanvas()) {\n        this.workspace.getCanvas().appendChild(this.getSvgRoot());\n    }\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../constants/config';\n\n/**\n * Make a context menu option for duplicating the current block.\n * deriv-bot: Use Blockly's implementation.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockDuplicateOption = function (block) {\n    const enabled = !config.single_instance_blocks.includes(block.type);\n    const duplicate_option = {\n        callback() {\n            Blockly.duplicate_(block);\n        },\n        enabled,\n        text: localize('Duplicate'),\n    };\n    return duplicate_option;\n};\n\n/**\n * Make a context menu option for cleaning up blocks on the workspace, by\n * aligning them vertically.\n * @param {!Blockly.WorkspaceSvg} ws The workspace where the right-click originated.\n * @param {number} numTopBlocks The number of top blocks on the workspace.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.wsCleanupOption = function (ws, numTopBlocks) {\n    return {\n        text: localize('Rearrange Vertically'),\n        enabled: numTopBlocks > 1,\n        callback: ws.cleanUp.bind(ws),\n    };\n};\n\n/**\n * Make a context menu option for collapsing all block stacks on the workspace.\n * @param {boolean} hasExpandedBlocks Whether there are any non-collapsed blocks\n *     on the workspace.\n * @param {!Array.<!Blockly.BlockSvg>} topBlocks The list of top blocks on the\n *     the workspace.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.wsCollapseOption = function (hasExpandedBlocks, topBlocks) {\n    return {\n        enabled: hasExpandedBlocks,\n        text: localize('Collapse All Blocks'),\n        callback() {\n            Blockly.ContextMenu.toggleCollapseFn_(topBlocks, true);\n        },\n    };\n};\n\n/**\n * Make a context menu option for expanding all block stacks on the workspace.\n * @param {boolean} hasCollapsedBlocks Whether there are any collapsed blocks\n *     on the workspace.\n * @param {!Array.<!Blockly.BlockSvg>} topBlocks The list of top blocks on the\n *     the workspace.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.wsExpandOption = function (hasCollapsedBlocks, topBlocks) {\n    return {\n        enabled: hasCollapsedBlocks,\n        text: localize('Expand All Blocks'),\n        callback() {\n            Blockly.ContextMenu.toggleCollapseFn_(topBlocks, false);\n        },\n    };\n};\n\n/**\n * Helper function for toggling delete state on blocks on the workspace, to be\n * called from a right-click menu.\n * deriv-bot: Remove \"animation\".\n * @param {!Array.<!Blockly.BlockSvg>} topBlocks The list of top blocks on the the workspace.\n * @param {boolean} shouldCollapse True if the blocks should be collapsed, false if they should be expanded.\n * @private\n */\nBlockly.ContextMenu.toggleCollapseFn_ = function (blocks, shouldCollapse) {\n    blocks.forEach(block => block.setCollapsed(shouldCollapse));\n};\n\nBlockly.ContextMenu.wsDeleteOption = function (ws, blocks) {\n    // Option to delete all blocks.\n    // Count the number of blocks that are deletable.\n    const delete_list = Blockly.WorkspaceSvg.buildDeleteList_(blocks);\n\n    // Scratch-specific: don't count shadow blocks in delete count\n    const delete_count = delete_list.filter(block => !block.isShadow()).length;\n\n    const event_group = Blockly.utils.genUid();\n    const DELAY = 10;\n\n    const deleteNext = () => {\n        Blockly.Events.setGroup(event_group);\n        const block = delete_list.shift();\n\n        if (block) {\n            if (block.workspace) {\n                block.dispose(false, true);\n                setTimeout(deleteNext, DELAY);\n            } else {\n                deleteNext();\n            }\n        }\n        Blockly.Events.setGroup(false);\n    };\n\n    return {\n        text:\n            delete_count === 1\n                ? localize('Delete Block')\n                : localize('Delete {{ delete_count }} Blocks', { delete_count }),\n        enabled: delete_count > 0,\n        callback() {\n            if (ws.currentGesture_) {\n                ws.currentGesture_.cancel();\n            }\n            if (delete_count < 2) {\n                deleteNext();\n            } else {\n                const msg = localize('Delete all {{ delete_count }} blocks?', { delete_count });\n                Blockly.confirm(msg, ok => {\n                    if (ok) {\n                        deleteNext();\n                    }\n                });\n            }\n        },\n    };\n};\n\n/**\n * Make a context menu option for adding or removing comments on the current block.\n * deriv-bot: Expand block before adding comment.\n * Hacky way to get comments working on collapsed blocks.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockCommentOption = function (block) {\n    const comment_option = { enabled: !goog.userAgent.IE };\n\n    // If there's already a comment, add an option to delete it.\n    if (block.comment) {\n        comment_option.text = localize('Remove comment');\n        comment_option.callback = () => {\n            block.setCommentText(null);\n        };\n    } else {\n        // If there's no comment, add an option to create a comment.\n        comment_option.text = localize('Add comment');\n        comment_option.callback = () => {\n            // deriv-bot: Expand/uncollapse for bubble to position correctly.\n            const is_collapsed = block.collapsed_;\n\n            if (is_collapsed) {\n                block.setCollapsed(false);\n            }\n\n            block.setCommentText('');\n\n            if (block.collapsed_ !== is_collapsed) {\n                block.setCollapsed(is_collapsed);\n            }\n\n            // deriv-bot: Don't focus to prevent workspace glitching.\n            // block.comment.focus();\n        };\n    }\n\n    return comment_option;\n};\n\n/**\n * Make a context menu option for detaching the current block.\n * deriv-bot: Use Blockly's implementation.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockDetachOption = function (block) {\n    const canDisconnect = block\n        .getConnections_()\n        .some(connection => connection.isConnected() && !connection.targetConnection?.sourceBlock_.isShadow_);\n\n    const enabled = block.parentBlock_ && canDisconnect;\n\n    const detach_option = {\n        callback() {\n            block.unplug(true);\n            block.moveBy(250, 100);\n        },\n        enabled,\n        text: localize('Detach Block'),\n    };\n    return detach_option;\n};\n\n/**\n * Make a context menu option for disabling stack of blocks.\n * deriv-bot: Use Blockly’s implementation.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockDisableOption = function (block) {\n    const checkAreSomeEnabled = (block_, enabledArr = []) => {\n        enabledArr.push(!block_.disabled);\n        return block_.nextConnection?.targetConnection\n            ? checkAreSomeEnabled(block_.nextConnection?.targetConnection.sourceBlock_, enabledArr)\n            : enabledArr.includes(true);\n    };\n    const enabled = checkAreSomeEnabled(block);\n\n    const disableBlocksRecursively = block_ => {\n        block_.setDisabled(true);\n        if (block_.nextConnection?.targetConnection) {\n            disableBlocksRecursively(block_.nextConnection?.targetConnection.sourceBlock_);\n        }\n    };\n\n    const disableStack_option = {\n        callback() {\n            disableBlocksRecursively(block);\n        },\n        enabled,\n        text: localize('Disable stack'),\n    };\n    return disableStack_option;\n};\n\n/**\n * Make a context menu option for enabling stack of blocks.\n * deriv-bot: Use Blockly’s implementation.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockEnableOption = function (block) {\n    const checkAreSomeDisabled = (block_, disabledArr = []) => {\n        if (block_.restricted_parents && !block_.restricted_parents?.includes(block_.getTopParent()?.type)) {\n            return false;\n        }\n        disabledArr.push(block_.disabled);\n        return block_.nextConnection?.targetConnection\n            ? checkAreSomeDisabled(block_.nextConnection?.targetConnection.sourceBlock_, disabledArr)\n            : disabledArr.includes(true);\n    };\n    const enabled = checkAreSomeDisabled(block);\n\n    const enableBlocksRecursively = block_ => {\n        if (!block_.restricted_parents || block_.restricted_parents.includes(block_.getTopParent()?.type)) {\n            block_.setDisabled(false);\n        }\n        if (block_.nextConnection?.targetConnection) {\n            enableBlocksRecursively(block_.nextConnection?.targetConnection.sourceBlock_);\n        }\n    };\n\n    const enableStack_option = {\n        callback() {\n            enableBlocksRecursively(block);\n        },\n        enabled,\n        text: localize('Enable stack'),\n    };\n    return enableStack_option;\n};\n","import { localize } from '@deriv/translations';\nimport DBotStore from '../dbot-store';\n\n/**\n * Construct the blocks required by the flyout for the variable category.\n * @param {!Blockly.Workspace} workspace The workspace containing variables.\n * @return {!Array.<!Element>} Array of XML block elements.\n */\nBlockly.DataCategory = function (workspace) {\n    const variableModelList = workspace.getVariablesOfType('');\n    let xmlList = [];\n\n    // `Create Variable`-Section\n    Blockly.DataCategory.addCreateVariable(xmlList, workspace);\n\n    const block_types = ['variables_set', 'variables_get', 'math_change'];\n    xmlList = xmlList.concat(Blockly.DataCategory.search(variableModelList, block_types));\n\n    return xmlList;\n};\n\nBlockly.DataCategory.search = function (variableModelList) {\n    const xmlList = [];\n    if (variableModelList.length > 0) {\n        const generateVariableFieldXmlString = variableModel => {\n            // The variable name may be user input, so it may contain characters that\n            // need to be escaped to create valid XML.\n            const escapedText = `<field name=\"VAR\" id=\"${variableModel.getId()}\" variabletype=\"${goog.string.htmlEscape(\n                variableModel.type\n            )}\">${goog.string.htmlEscape(variableModel.name)}</field>`;\n            return escapedText;\n        };\n\n        const firstVariable = variableModelList[0];\n\n        // Create 'Set `var` to'-block\n        if (Blockly.Blocks.variables_set) {\n            const gap = Blockly.Blocks.math_change ? 8 : 24;\n            const setBlockText = `<xml><block type=\"variables_set\" gap=\"${gap}\">${generateVariableFieldXmlString(\n                firstVariable\n            )}</block></xml>`;\n            const setBlock = Blockly.Xml.textToDom(setBlockText).firstChild;\n            xmlList.push(setBlock);\n        }\n\n        // Create 'Change `var` by `1`'-block\n        // if (Blockly.Blocks.math_change) {\n        //     const gap = Blockly.Blocks.variables_get ? 20 : 8;\n        //     const changeBlockText = `<xml><block type=\"math_change\" gap=\"${gap}\">${generateVariableFieldXmlString(\n        //         firstVariable\n        //     )}<value name=\"DELTA\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></xml>`;\n        //     const changeBlock = Blockly.Xml.textToDom(changeBlockText).firstChild;\n        //     xmlList.push(changeBlock);\n        // }\n\n        // Create `variable_get` block for each variable\n        if (Blockly.Blocks.variables_get) {\n            // For adding sort base on the creation date\n            variableModelList.sort(\n                (first_variable, second_variable) =>\n                    variableModelList.indexOf(second_variable) - variableModelList.indexOf(first_variable)\n            );\n\n            variableModelList.forEach(variable => {\n                const getBlockText = `<xml><block type=\"variables_get\">${generateVariableFieldXmlString(\n                    variable\n                )}</block></xml>`;\n                const getBlock = Blockly.Xml.textToDom(getBlockText).firstChild;\n                xmlList.push(getBlock);\n            });\n        }\n    }\n\n    return xmlList;\n};\n\n/**\n * Construct a create variable section and push it to the xmlList.\n * @param {!Array.<!Element>} xmlList Array of XML block elements.\n * @param {Blockly.Workspace} workspace Workspace to register callback to.\n * @deriv/bot: We only use a single type of variable, so `type` arg was removed.\n */\nBlockly.DataCategory.addCreateVariable = function (xmlList, workspace) {\n    const el_button_xml = goog.dom.createDom('button');\n    const el_input_xml = goog.dom.createDom('input');\n\n    // Set default msg, callbackKey, and callback values for type 'VARIABLE'\n    const button_text = localize('Create');\n    const callback_key = 'CREATE_VARIABLE';\n    const input_placeholder = localize('New variable name');\n\n    // Set attributes for the button\n    el_button_xml.setAttribute('text', button_text);\n    el_button_xml.setAttribute('className', 'flyout__button-new');\n    el_button_xml.setAttribute('callbackKey', callback_key);\n\n    // Set attributes for the input field\n    el_input_xml.setAttribute('className', 'flyout__input');\n    el_input_xml.setAttribute('name', 'variable');\n    el_input_xml.setAttribute('type', 'text');\n    el_input_xml.setAttribute('placeholder', input_placeholder);\n\n    const callback = function (button) {\n        const el_input_container = document.querySelector('.flyout__input > .dc-input__container');\n        const el_input = el_input_container.firstChild;\n\n        const buttonWorkspace = button.getTargetWorkspace();\n        buttonWorkspace.createVariable(el_input.value, '');\n        el_input.value = '';\n\n        const { flyout } = DBotStore.instance;\n        flyout.refreshCategory();\n    };\n\n    workspace.registerButtonCallback(callback_key, callback);\n\n    xmlList.push(el_input_xml);\n    xmlList.push(el_button_xml);\n};\n","import { runInvisibleEvents } from '../utils';\n\n/** *\n * Updates a Blockly.FieldDropdown with the passed dropdown_options. Available options:\n * - default_value       : After updating, attempt to set this value as the selected option\n * - should_trigger_event: Should an Blockly.Events.Change event be triggered?\n * - event_group         : Coincides with should_trigger_event, passes event_group along the event chain.\n * - should_pretend_empty: Trigger event, pretend oldValue was empty to force triggering event. Blockly\n *                         filters out and stops events from firing where the oldValue and newValue are the same.\n */\nBlockly.FieldDropdown.prototype.updateOptions = function (dropdown_options, options = {}) {\n    if (Blockly.DropDownDiv.isVisible()) {\n        Blockly.DropDownDiv.hideWithoutAnimation();\n    }\n\n    this.menuGenerator_ = dropdown_options;\n\n    // Blockly won't actually fire an event if the oldValue and newValue are the same. This prop\n    // sets the event's oldValue to an empty string so it's always executed.\n    let previous_value = this.getValue();\n\n    if (options.should_pretend_empty) {\n        previous_value = '';\n    }\n\n    // Set a flag indicating whether the default value passed to this function is available in the newly\n    // set dropdown options, if false the default option will be the first available one.\n    const has_default_value = dropdown_options.findIndex(item => item[1] === options.default_value) !== -1;\n\n    runInvisibleEvents(() => {\n        this.setValue('');\n\n        if (has_default_value) {\n            this.setValue(options.default_value);\n        } else if (dropdown_options.length > 0) {\n            // Default to first if option isn't available.\n            this.setValue(this.menuGenerator_[0][1]);\n        } else {\n            this.setValue(previous_value);\n        }\n    });\n\n    // If \"should_trigger_event\" prop is omitted or set to true, fire an event.\n    if (!options.should_trigger_event || options.should_trigger_event === true) {\n        const event = new Blockly.Events.BlockChange(\n            this.sourceBlock_,\n            'field',\n            this.name,\n            previous_value,\n            this.getValue()\n        );\n        event.recordUndo = false;\n        event.group = options.event_group;\n        Blockly.Events.fire(event);\n    }\n};\n\n/**\n * This function is hooked to change backgound color and change dropdown lists shape from rounded corner box to oval shape,\n * e.g. for market list, trade type, etc.\n *      'rx': Blockly.BlockSvg.CORNER_RADIUS * 4,\n *      'ry': Blockly.BlockSvg.CORNER_RADIUS * 4,\n */\nBlockly.FieldDropdown.prototype.init = function () {\n    if (this.fieldGroup_) {\n        // Dropdown has already been initialized once.\n        return;\n    }\n    // Add dropdown arrow: \"option ▾\" (LTR) or \"▾ אופציה\" (RTL)\n    // Positioned on render, after text size is calculated.\n    /** @type {Number} */\n    this.arrowSize_ = 12;\n    /** @type {Number} */\n    this.arrowX_ = 0;\n    /** @type {Number} */\n    this.arrowY_ = 11;\n    this.arrow_ = Blockly.utils.createSvgElement('image', {\n        height: `${this.arrowSize_}px`,\n        width: `${this.arrowSize_}px`,\n    });\n    this.arrow_.setAttributeNS(\n        'http://www.w3.org/1999/xlink',\n        'xlink:href',\n        `${Blockly.mainWorkspace.options.pathToMedia}dropdown-arrow-dark.svg`\n    );\n    this.className_ += ' blocklyDropdownText';\n    // @deriv/bot: stop the drop-down from changing its fill colour to colourTertiary on click\n    this.disableColourChange_ = true;\n\n    Blockly.FieldDropdown.superClass_.init.call(this);\n    // If not in a shadow block, draw a box.\n    if (!this.sourceBlock_.isShadow()) {\n        this.box_ = Blockly.utils.createSvgElement(\n            'rect',\n            {\n                rx: Blockly.BlockSvg.CORNER_RADIUS * 4,\n                ry: Blockly.BlockSvg.CORNER_RADIUS * 4,\n                x: 0,\n                y: 0,\n                width: this.size_.width,\n                height: this.size_.height,\n                stroke: this.sourceBlock_.getColourTertiary(),\n                'stroke-width': '0.3px',\n                fill: this.sourceBlock_.getColourSecondary(),\n                'fill-opacity': 1,\n            },\n            null\n        );\n        this.fieldGroup_.insertBefore(this.box_, this.textElement_);\n    }\n    // Force a reset of the text to add the arrow.\n    const text = this.text_;\n    this.text_ = null;\n    this.setText(text);\n};\n\n/**\n * Returns whether a dropdown is empty or not.\n */\nBlockly.FieldDropdown.prototype.isEmpty = function () {\n    return this.menuGenerator_.length === 0 || !this.menuGenerator_[0][1];\n};\n","import { localize } from '@deriv/translations';\n\n/**\n * Custom checkbox implementation.\n * @returns {Blockly.FieldImage} A Blockly.FieldImage pretending to be a checkbox.\n */\nconst FieldCheckbox = () => {\n    const getAltText = is_checked => (is_checked ? localize('Y') : localize('N'));\n    const onCheckboxClick = function () {\n        if (this.sourceBlock_.workspace.options.readOnly || this.sourceBlock_.isInFlyout) {\n            return;\n        }\n        this.is_checked = !this.is_checked;\n        this.setValue(this.is_checked);\n        this.setText(getAltText(this.is_checked));\n    };\n\n    const icon = new Blockly.FieldImage(true, 16, 16, getAltText(true), onCheckboxClick);\n\n    // Required function on Blockly.Field instances.\n    icon.fromJson = (/* options */) => {\n        return FieldCheckbox();\n    };\n\n    // Custom setValue to support imported values, this allows us to bypass\n    // adding domToMutation and mutationToDom logic to each block consuming this checkbox.\n    icon.setValue = function (value) {\n        const is_checked = value === true || value === 'TRUE';\n        const old_value = this.getValue();\n        this.src_ = is_checked ? 'TRUE' : 'FALSE';\n        const el_field_group = this.fieldGroup_; // eslint-disable-line no-underscore-dangle\n\n        if (el_field_group) {\n            Array.from(el_field_group.children).forEach(child_node => el_field_group.removeChild(child_node));\n\n            // Draw a rectangle which is coloured based on the host-block's colour.\n            Blockly.utils.createSvgElement(\n                'rect',\n                {\n                    fill: this.sourceBlock_.getColourSecondary(), // eslint-disable-line\n                    'fill-rule': 'nonzero',\n                    height: this.height_, // eslint-disable-line\n                    width: this.width_, // eslint-disable-line\n                    rx: 2,\n                    stroke: this.sourceBlock_.getColourTertiary(),\n                },\n                el_field_group\n            );\n\n            if (is_checked) {\n                // Draw checkmark.\n                Blockly.utils.createSvgElement(\n                    'path',\n                    {\n                        fill: 'var(--text-general)',\n                        d: 'M6 10.086L3.707 7.793a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l7-7a1 1 0 10-1.414-1.414L6 10.086z',\n                    },\n                    el_field_group\n                );\n            }\n        }\n\n        // Emit an event that can be redone/undone.\n        if (this.sourceBlock_ && Blockly.Events.isEnabled()) {\n            Blockly.Events.fire(\n                new Blockly.Events.BlockChange(this.sourceBlock_, 'field', this.name, old_value, this.getValue())\n            );\n        }\n    };\n\n    return icon;\n};\n\nBlockly.Field.register('field_image_checkbox', FieldCheckbox());\n","import { config } from '../../constants/config';\nimport DBotStore from '../dbot-store';\n\n/**\n * Create a copy of this block on the workspace.\n * @param {!Blockly.BlockSvg} original_block The block to copy from the flyout.\n * @return {Blockly.BlockSvg} The newly created block, or null if something\n *     went wrong with deserialization.\n * @package\n */\nBlockly.Flyout.prototype.createBlock = function (event, original_block) {\n    Blockly.Events.disable();\n\n    const main_workspace = this.targetWorkspace_;\n    const variables_before_creation = main_workspace.getAllVariables();\n\n    main_workspace.setResizesEnabled(false);\n\n    let new_block = null;\n\n    try {\n        new_block = this.placeNewBlock_(event, original_block);\n        // Close the flyout.\n        Blockly.hideChaff();\n    } finally {\n        Blockly.Events.enable();\n    }\n\n    const new_variables = Blockly.Variables.getAddedVariables(main_workspace, variables_before_creation);\n\n    if (Blockly.Events.isEnabled()) {\n        Blockly.Events.setGroup(true);\n\n        // Delete blocks of which we can only have a single instance. Dispose emits a BlockDelete\n        // event that respects the current Blockly.Events group, this is required to maintain\n        // a working undo/redo stack.\n        if (config.single_instance_blocks.includes(new_block.type)) {\n            main_workspace.getAllBlocks().forEach(ws_block => {\n                if (ws_block.type === new_block.type && ws_block.id !== new_block.id) {\n                    ws_block.dispose();\n                }\n            });\n        }\n\n        // Fire a VarCreate event for each (if any) new variable created.\n        new_variables.forEach(new_variable => {\n            Blockly.Events.fire(new Blockly.Events.VarCreate(new_variable));\n        });\n\n        Blockly.Events.fire(new Blockly.Events.Create(new_block));\n    }\n\n    if (this.autoClose) {\n        this.hide();\n    }\n\n    const { flyout } = DBotStore.instance;\n    flyout.setIsSearchFlyout(false);\n    flyout.setVisibility(false);\n\n    new_block.isInFlyout = false;\n\n    return new_block;\n};\n\n/**\n * Copy a block from the flyout to the workspace and position it correctly.\n * @param {MouseEvent} event MouseEvent with coordinates to position block. DBot only.\n * @param {!Blockly.Block} old_block The flyout block to copy.\n * @return {!Blockly.Block} The new block in the main workspace.\n * @private\n */\nBlockly.Flyout.prototype.placeNewBlock_ = function (event, old_block) {\n    const main_workspace = this.targetWorkspace_;\n    const svg_root_old = old_block.getSvgRoot();\n\n    if (!svg_root_old) {\n        throw new Error('old_block is not rendered.');\n    }\n\n    // Create the new block by cloning the block in the flyout (via XML).\n    const xml = Blockly.Xml.blockToDom(old_block, true);\n\n    // The target workspace would normally resize during domToBlock, which will\n    // lead to weird jumps.  Save it for terminateDrag.\n    main_workspace.setResizesEnabled(false);\n\n    // Using domToBlock instead of domToWorkspace means that the new block will be\n    // placed at position (0, 0) in main workspace units.\n    const block = Blockly.Xml.domToBlock(xml, main_workspace);\n    const svg_root_new = block.getSvgRoot();\n\n    if (!svg_root_new) {\n        throw new Error('block is not rendered.');\n    }\n\n    // event may be null i.e. when originating from flyout add button.\n    if (event) {\n        // The offset in pixels between the main workspace's origin and the upper left corner of the injection div.\n        const main_offset_pixels = main_workspace.getOriginOffsetInPixels();\n\n        // The position of the old block in pixels relative to the flyout workspace's origin.\n        const x_offset = 25;\n        const y_offset = 160;\n        const old_block_pos_pixels = new goog.math.Coordinate(\n            event.clientX ? event.clientX - x_offset : 0,\n            event.clientY ? event.clientY - y_offset : 0\n        );\n\n        // The position of the old block in pixels relative to the origin of the main workspace.\n        const final_offset_pixels = goog.math.Coordinate.difference(old_block_pos_pixels, main_offset_pixels);\n\n        // The position of the old block in main workspace coordinates.\n        const final_offset_main_ws = final_offset_pixels.scale(1 / main_workspace.scale);\n\n        block.moveBy(final_offset_main_ws.x, final_offset_main_ws.y);\n    }\n\n    return block;\n};\n","import { localize } from '@deriv/translations';\n\n/**\n * Construct the blocks required by the flyout for the procedure category.\n * @param {!Blockly.Workspace} workspace The workspace containing procedures.\n * @return {!Array.<!Element>} Array of XML block elements.\n */\nBlockly.Procedures.flyoutCategory = function (workspace) {\n    let xmlList = [];\n\n    if (Blockly.Blocks.procedures_defnoreturn) {\n        // <block type=\"procedures_defnoreturn\" gap=\"16\">\n        //     <field name=\"NAME\">do something</field>\n        // </block>\n        const block = document.createElement('block');\n        block.setAttribute('type', 'procedures_defnoreturn');\n        block.setAttribute('gap', 16);\n\n        // TEMP\n        const nameField = document.createElement('field');\n        nameField.setAttribute('name', 'NAME');\n        nameField.appendChild(document.createTextNode(localize('do something')));\n\n        block.appendChild(nameField);\n        xmlList.push(block);\n    }\n\n    if (Blockly.Blocks.procedures_defreturn) {\n        // <block type=\"procedures_defreturn\" gap=\"16\">\n        //     <field name=\"NAME\">do something</field>\n        // </block>\n        const block = document.createElement('block');\n        block.setAttribute('type', 'procedures_defreturn');\n        block.setAttribute('gap', 16);\n\n        const nameField = document.createElement('field');\n        nameField.setAttribute('name', 'NAME');\n        nameField.appendChild(document.createTextNode(localize('do something')));\n\n        block.appendChild(nameField);\n        xmlList.push(block);\n    }\n\n    if (Blockly.Blocks.procedures_ifreturn) {\n        // <block type=\"procedures_ifreturn\" gap=\"16\"></block>\n        const block = document.createElement('block');\n        block.setAttribute('type', 'procedures_ifreturn');\n        block.setAttribute('gap', 16);\n        xmlList.push(block);\n    }\n\n    if (xmlList.length) {\n        // Add slightly larger gap between system blocks and user calls.\n        xmlList[xmlList.length - 1].setAttribute('gap', 24);\n    }\n\n    const tuple = Blockly.Procedures.allProcedures(workspace);\n    xmlList = xmlList.concat(Blockly.Procedures.populateDynamicProcedures(tuple));\n    return xmlList;\n};\n\nBlockly.Procedures.populateDynamicProcedures = function (tuple) {\n    let xmlList = [];\n\n    const populateProcedures = (procedureList, templateName) => {\n        const xml = [];\n\n        if (!procedureList) {\n            return xml;\n        }\n\n        for (let i = 0; i < procedureList.length; i++) {\n            const name = procedureList[i][0];\n            const args = procedureList[i][1];\n\n            // <block type=\"procedures_callnoreturn\" gap=\"16\">\n            //   <mutation name=\"do something\">\n            //     <arg name=\"x\"></arg>\n            //   </mutation>\n            // </block>\n            const block = document.createElement('block');\n            block.setAttribute('type', templateName);\n            block.setAttribute('gap', 16);\n\n            const mutation = document.createElement('mutation');\n            mutation.setAttribute('name', name);\n            block.appendChild(mutation);\n\n            args.forEach(argumentName => {\n                const arg = document.createElement('arg');\n                arg.setAttribute('name', argumentName);\n                mutation.appendChild(arg);\n            });\n\n            xml.push(block);\n        }\n\n        return xml;\n    };\n\n    xmlList = xmlList.concat(populateProcedures(tuple[0], 'procedures_callnoreturn'));\n    xmlList = xmlList.concat(populateProcedures(tuple[1], 'procedures_callreturn'));\n\n    return xmlList;\n};\n\n/**\n * Find the definition block for the named procedure.\n * @param {string} name Name of procedure.\n * @param {!Blockly.Workspace} workspace The workspace to search.\n * @return {Blockly.Block} The procedure definition block, or null not found.\n */\nBlockly.Procedures.getDefinition = function (name, workspace) {\n    // Assume that a procedure definition is a top block.\n    const blocks = workspace.getTopBlocks(false);\n    for (let i = 0; i < blocks.length; i++) {\n        if (blocks[i].getProcedureDef) {\n            const tuple = blocks[i].getProcedureDef();\n            if (tuple && Blockly.Names.equals(tuple[0], name)) {\n                return blocks[i];\n            }\n        }\n    }\n    return null;\n};\n\n// Scratch has a broken version where they return `false` if Blockly.Names.equals(procName[0], name).\n// https://github.com/LLK/scratch-blocks/pull/1930\nBlockly.Procedures.isNameUsed = function (name, workspace, optExclude) {\n    const blocks = workspace.getAllBlocks(false);\n    // Iterate through every block and check the name.\n    return blocks.some(block => {\n        if (block !== optExclude && block.getProcedureDef) {\n            const procName = block.getProcedureDef();\n            return Blockly.Names.equals(procName[0], name);\n        }\n        return false;\n    });\n};\n\n/**\n * Move the workspace based on the most recent mouse movements.\n * @param {!goog.math.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel coordinates.\n * @package\n */\nBlockly.WorkspaceDragger.prototype.drag = function (currentDragDeltaXY) {\n    if (this.workspace_.isFlyout) {\n        return;\n    }\n\n    const metrics = this.startDragMetrics_;\n    const newXY = goog.math.Coordinate.sum(this.startScrollXY_, currentDragDeltaXY);\n\n    // Bound the new XY based on workspace bounds.\n    let x = Math.min(newXY.x, -metrics.contentLeft);\n    let y = Math.min(newXY.y, -metrics.contentTop);\n\n    x = Math.max(x, metrics.viewWidth - metrics.contentLeft - metrics.contentWidth);\n    y = Math.max(y, metrics.viewHeight - metrics.contentTop - metrics.contentHeight);\n\n    x = -x - metrics.contentLeft;\n    y = -y - metrics.contentTop;\n\n    this.updateScroll_(x, y);\n};\n","import DBotStore from '../dbot-store';\nimport PendingPromise from '../../utils/pending-promise';\n\nBlockly.Workspace.prototype.wait_events = [];\n\n/**\n * Clear the undo/redo stacks.\n * deriv-bot: Sync undo/redo stack with our toolbar store.\n */\nBlockly.Workspace.prototype.clearUndo = function () {\n    this.undoStack_.length = 0;\n    this.redoStack_.length = 0;\n\n    const { toolbar } = DBotStore.instance;\n\n    toolbar.setHasRedoStack();\n    toolbar.setHasUndoStack();\n\n    // Stop any events already in the firing queue from being undoable.\n    Blockly.Events.clearPendingUndo();\n};\n\n/**\n * Fire a change event.\n * deriv-bot: Sync undo/redo stack with our toolbar store.\n * @param {!Blockly.Events.Abstract} event Event to fire.\n */\nBlockly.Workspace.prototype.fireChangeListener = function (event) {\n    if (event.recordUndo) {\n        this.undoStack_.push(event);\n        this.redoStack_.length = 0;\n\n        if (this.undoStack_.length > this.MAX_UNDO) {\n            this.undoStack_.unshift();\n        }\n\n        const { toolbar } = DBotStore.instance;\n\n        toolbar.setHasRedoStack();\n        toolbar.setHasUndoStack();\n    }\n\n    // Copy listeners in case a listener attaches/detaches itself.\n    const current_listeners = this.listeners_.slice();\n\n    current_listeners.forEach(listener => {\n        listener(event);\n    });\n    /**\n     * Gets a trade definition block instance and returns it.\n     * @returns {Blockly.Block|null} The trade definition or null.\n     */\n};\n\nBlockly.Workspace.prototype.getTradeDefinitionBlock = function () {\n    return this.getAllBlocks(true).find(b => b.type === 'trade_definition');\n};\n\nBlockly.Workspace.prototype.waitForBlockEvent = function (block_id, opt_event_type = null) {\n    const event_promise = new PendingPromise();\n\n    if (!this.wait_events.some(event => event.blockId === block_id && event.type === opt_event_type)) {\n        this.wait_events.push({\n            blockId: block_id,\n            promise: event_promise,\n            type: opt_event_type,\n        });\n    }\n\n    return event_promise;\n};\n\nBlockly.Workspace.prototype.waitForBlockEvent = function (options) {\n    const { block_type, event_type, timeout } = options;\n    const promise = new PendingPromise();\n\n    this.wait_events.push({ block_type, event_type, promise });\n\n    if (timeout) {\n        setTimeout(() => {\n            if (promise.isPending) {\n                promise.reject();\n            }\n        }, timeout);\n    }\n\n    return promise;\n};\n\nBlockly.Workspace.prototype.dispatchBlockEventEffects = function (event) {\n    this.wait_events.forEach((wait_event, idx) => {\n        if (!event.blockId) {\n            return;\n        }\n\n        const block = this.getBlockById(event.blockId);\n\n        if (block) {\n            const is_same_block_type = wait_event.block_type === block.type;\n            const is_same_event_type = wait_event.event_type === null || wait_event.event_type === event.type;\n\n            if (is_same_block_type && is_same_event_type) {\n                setTimeout(() => {\n                    wait_event.promise.resolve();\n                    this.wait_events.splice(idx, 1);\n                }, 500);\n            }\n        }\n    });\n};\n\nBlockly.Workspace.prototype.getAllFields = function (is_ordered) {\n    return this.getAllBlocks(is_ordered).reduce((fields, block) => {\n        block.inputList.forEach(input => fields.push(...input.fieldRow));\n        return fields;\n    }, []);\n};\n","import { config } from '../../constants/config';\nimport { removeLimitedBlocks } from '../../utils/workspace';\nimport DBotStore from '../dbot-store';\n\n/**\n * Handle a mouse-down on SVG drawing surface.\n * deriv-bot: We bubble the mousedown event for Core to be reactive.\n * @param {!Event} e Mouse down event.\n * @private\n */\nBlockly.WorkspaceSvg.prototype.onMouseDown_ = function (e) {\n    // Bubble mousedown event up for some Core elements to react correctly.\n    if (e instanceof MouseEvent) {\n        Blockly.derivWorkspace.cachedParentSvg_.dispatchEvent(new e.constructor(e.type, e));\n    }\n    const gesture = this.getGesture(e);\n    if (gesture) {\n        gesture.handleWsStart(e, this);\n    }\n};\n\n/**\n * Scroll the workspace to center on the given block.\n * @param {?string} id ID of block center on.\n * @public\n */\nBlockly.WorkspaceSvg.prototype.centerOnBlock = function (id, hideChaff = true) {\n    if (!this.scrollbar) {\n        // eslint-disable-next-line no-console\n        console.warn('Tried to scroll a non-scrollable workspace.');\n        return;\n    }\n\n    const block = this.getBlockById(id);\n    if (!block) {\n        return;\n    }\n\n    // XY is in workspace coordinates.\n    const xy = block.getRelativeToSurfaceXY();\n\n    // Height/width is in workspace units.\n    const heightWidth = block.getHeightWidth();\n\n    // Find the enter of the block in workspace units.\n    const blockCenterY = xy.y + heightWidth.height / 2;\n\n    // In RTL the block's position is the top right of the block, not top left.\n    const multiplier = this.RTL ? -1 : 1;\n    const blockCenterX = xy.x + (multiplier * heightWidth.width) / 2;\n\n    // Workspace scale, used to convert from workspace coordinates to pixels.\n    const scale = this.scale;\n\n    // Center in pixels.  0, 0 is at the workspace origin.  These numbers may\n    // be negative.\n    const pixelX = blockCenterX * scale;\n    const pixelY = blockCenterY * scale;\n\n    const metrics = this.getMetrics();\n\n    // Scrolling to here would put the block in the top-left corner of the\n    // visible workspace.\n    const scrollToBlockX = pixelX - metrics.contentLeft;\n    const scrollToBlockY = pixelY - metrics.contentTop;\n\n    // viewHeight and viewWidth are in pixels.\n    const halfViewWidth = metrics.viewWidth / 2;\n    const halfViewHeight = metrics.viewHeight / 2;\n\n    // Put the block in the center of the visible workspace instead.\n    const scrollToCenterX = scrollToBlockX - halfViewWidth;\n    const scrollToCenterY = scrollToBlockY - halfViewHeight;\n\n    if (hideChaff) {\n        Blockly.hideChaff();\n    }\n\n    this.scrollbar.set(scrollToCenterX, scrollToCenterY);\n};\n\n/**\n * Creates a copy of passed block_node on main workspace and positions it\n * below the lowest block on the canvas.\n * @static\n * @param {Element} block_node\n * @public\n */\nBlockly.WorkspaceSvg.prototype.addBlockNode = function (block_node) {\n    const { flyout } = DBotStore.instance;\n    const block = Blockly.Xml.domToBlock(block_node, flyout.getFlyout().workspace_);\n    const top_blocks = this.getTopBlocks(true);\n    const new_block = flyout.getFlyout().createBlock(false, block);\n\n    if (top_blocks.length) {\n        const last_block = top_blocks[top_blocks.length - 1];\n        const last_block_xy = last_block.getRelativeToSurfaceXY();\n        const extra_spacing = last_block.startHat_ ? Blockly.BlockSvg.START_HAT_HEIGHT : 0;\n        const y = last_block_xy.y + last_block.getHeightWidth().height + extra_spacing + 30;\n        new_block.moveBy(last_block_xy.x, y);\n    }\n\n    // Call svgResize to avoid glitching workspace.\n    Blockly.svgResize(new_block.workspace);\n    this.centerOnBlock(new_block.id, false);\n};\n\n/**\n * Clean up the workspace by ordering all the blocks in a column. For deriv-bot\n * root-blocks are sorted in columns first, then all other blocks are positioned below\n * the lowest hanging root-block.\n */\nBlockly.WorkspaceSvg.prototype.cleanUp = function (x = 0, y = 0, blocks_to_clean = []) {\n    this.setResizesEnabled(false);\n    Blockly.Events.setGroup(Blockly.Events.getGroup() || true);\n\n    const is_import = blocks_to_clean.length !== 0;\n    const top_blocks = is_import ? blocks_to_clean : this.getTopBlocks(true);\n    const root_blocks = top_blocks\n        .filter(block => block.isMainBlock())\n        .sort((a, b) => {\n            const blockIndex = block => config.mainBlocks.findIndex(main_block_type => main_block_type === block.type);\n            return blockIndex(a) - blockIndex(b);\n        });\n    const column_count = 2;\n    const blocks_per_column = Math.ceil(root_blocks.length / column_count);\n\n    let original_cursor_y = y;\n\n    if (root_blocks.length) {\n        let column_index = 0;\n\n        root_blocks.forEach((block, index) => {\n            if (index === (column_index + 1) * blocks_per_column) {\n                original_cursor_y = y;\n                column_index++;\n            }\n\n            const xy = block.getRelativeToSurfaceXY();\n            const cursor_x = is_import ? x : -xy.x;\n            const cursor_y = original_cursor_y - (is_import ? 0 : xy.y);\n\n            if (column_index === 0) {\n                block.moveBy(cursor_x, cursor_y);\n            } else {\n                const start = (column_index - 1) * blocks_per_column;\n                const initialValue = {\n                    getHeightWidth: () => ({\n                        width: 0,\n                    }),\n                };\n\n                const fat_neighbour_block = root_blocks\n                    .slice(start, start + blocks_per_column)\n                    ?.reduce((a, b) => (a.getHeightWidth().width > b.getHeightWidth().width ? a : b), initialValue);\n\n                let position_x = cursor_x + fat_neighbour_block.getHeightWidth().width + Blockly.BlockSvg.MIN_BLOCK_X;\n                if (!is_import) {\n                    position_x += fat_neighbour_block.getRelativeToSurfaceXY().x;\n                }\n\n                block.moveBy(position_x, cursor_y);\n            }\n\n            block.snapToGrid();\n\n            original_cursor_y =\n                block.getRelativeToSurfaceXY().y + block.getHeightWidth().height + Blockly.BlockSvg.MIN_BLOCK_Y;\n        });\n\n        const initialValue = {\n            getRelativeToSurfaceXY: () => ({\n                y: 0,\n            }),\n            getHeightWidth: () => ({\n                height: 0,\n            }),\n        };\n\n        const lowest_root_block = root_blocks.reduce((a, b) => {\n            const a_metrics = a.getRelativeToSurfaceXY().y + a.getHeightWidth().height;\n            const b_metrics = b.getRelativeToSurfaceXY().y + b.getHeightWidth().height;\n            return a_metrics > b_metrics ? a : b;\n        }, initialValue);\n\n        original_cursor_y =\n            lowest_root_block.getRelativeToSurfaceXY().y +\n            lowest_root_block.getHeightWidth().height +\n            Blockly.BlockSvg.MIN_BLOCK_Y;\n    }\n\n    const filtered_top_blocks = top_blocks.filter(block => !block.isMainBlock());\n\n    filtered_top_blocks.forEach(block => {\n        const xy = block.getRelativeToSurfaceXY();\n        const cursor_x = is_import ? x : -xy.x;\n        const cursor_y = original_cursor_y - (is_import ? 0 : xy.y);\n\n        block.moveBy(cursor_x, cursor_y);\n        block.snapToGrid();\n\n        original_cursor_y =\n            block.getRelativeToSurfaceXY().y + block.getHeightWidth().height + Blockly.BlockSvg.MIN_BLOCK_Y;\n    });\n\n    Blockly.Events.setGroup(false);\n    this.setResizesEnabled(true);\n};\n\n/**\n * Return an object with all the metrics required to size scrollbars for a\n * top level workspace.  The following properties are computed:\n * Coordinate system: pixel coordinates.\n * .viewHeight: Height of the visible rectangle,\n * .viewWidth: Width of the visible rectangle,\n * .contentHeight: Height of the contents,\n * .contentWidth: Width of the content,\n * .viewTop: Offset of top edge of visible rectangle from parent,\n * .viewLeft: Offset of left edge of visible rectangle from parent,\n * .contentTop: Offset of the top-most content from the y=0 coordinate,\n * .contentLeft: Offset of the left-most content from the x=0 coordinate.\n * .absolute_top: Top-edge of view.\n * .absolute_left: Left-edge of view.\n * .toolboxWidth: Width of toolbox, if it exists.  Otherwise zero.\n * .toolboxHeight: Height of toolbox, if it exists.  Otherwise zero.\n * .flyoutWidth: Width of the flyout if it is always open.  Otherwise zero.\n * .flyoutHeight: Height of flyout if it is always open.  Otherwise zero.\n * .toolboxPosition: Top, bottom, left or right.\n * @return {!Object} Contains size and position metrics of a top level\n *   workspace.\n * @private\n * @this Blockly.WorkspaceSvg\n */\nBlockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_ = function () {\n    const toolbox_dimensions = Blockly.WorkspaceSvg.getDimensionsPx_(this.toolbox_);\n    const flyout_dimensions = Blockly.WorkspaceSvg.getDimensionsPx_(this.flyout_);\n\n    // Contains height and width in CSS pixels.\n    // svg_size is equivalent to the size of the injectionDiv at this point.\n    const svg_size = Blockly.svgSize(this.getParentSvg());\n\n    if (this.toolbox_) {\n        if (this.toolboxPosition === Blockly.TOOLBOX_AT_TOP || this.toolboxPosition === Blockly.TOOLBOX_AT_BOTTOM) {\n            svg_size.height -= toolbox_dimensions.height;\n        } else if (\n            this.toolboxPosition === Blockly.TOOLBOX_AT_LEFT ||\n            this.toolboxPosition === Blockly.TOOLBOX_AT_RIGHT\n        ) {\n            svg_size.width -= toolbox_dimensions.width;\n        }\n    }\n\n    // svg_size is now the space taken up by the Blockly workspace, not including the toolbox.\n    const content_dimensions = Blockly.WorkspaceSvg.getContentDimensions_(this, svg_size);\n\n    let absolute_left = 0;\n    let absolute_top = 0;\n\n    if (this.toolbox_ && this.toolboxPosition === Blockly.TOOLBOX_AT_LEFT) {\n        absolute_top = 50; // deriv-bot: Add some spacing for Core header.\n        absolute_left = toolbox_dimensions.width;\n    }\n\n    if (this.toolbox_ && this.toolboxPosition === Blockly.TOOLBOX_AT_TOP) {\n        absolute_top = toolbox_dimensions.height + 50;\n    }\n\n    const metrics = {\n        contentHeight: content_dimensions.height,\n        contentWidth: content_dimensions.width,\n        contentTop: content_dimensions.top,\n        contentLeft: content_dimensions.left,\n        viewHeight: svg_size.height,\n        viewWidth: svg_size.width,\n        viewTop: -this.scrollY, // Must be in pixels, somehow.\n        viewLeft: -this.scrollX, // Must be in pixels, somehow.\n        absoluteTop: absolute_top,\n        absoluteLeft: absolute_left,\n        toolboxWidth: toolbox_dimensions.width,\n        toolboxHeight: toolbox_dimensions.height,\n        flyoutWidth: flyout_dimensions.width,\n        flyoutHeight: flyout_dimensions.height,\n        toolboxPosition: this.toolboxPosition,\n    };\n\n    return metrics;\n};\n\n/**\n * Paste the provided block onto the workspace.\n * @param {!Element} xml_block XML block element.\n */\nBlockly.WorkspaceSvg.prototype.paste = function (xml_block) {\n    if (!this.rendered) {\n        return;\n    }\n\n    if (this.currentGesture_) {\n        this.currentGesture_.cancel(); // Dragging while pasting?  No.\n    }\n\n    if (xml_block.tagName.toLowerCase() === 'comment') {\n        this.pasteWorkspaceComment_(xml_block);\n    } else {\n        removeLimitedBlocks(this, xml_block.getAttribute('type'));\n        this.pasteBlock_(xml_block);\n    }\n};\n\n/**\n * Show the context menu for the workspace.\n * @param {!Event} e Mouse event.\n * @private\n */\nBlockly.WorkspaceSvg.prototype.showContextMenu_ = function (e) {\n    if (this.options.readOnly || this.isFlyout) {\n        return;\n    }\n    const menu_options = [];\n    const top_blocks = this.getTopBlocks(true);\n    const all_blocks = this.getAllBlocks(true);\n\n    // Options to undo/redo previous action.\n    menu_options.push(Blockly.ContextMenu.wsUndoOption(this));\n    menu_options.push(Blockly.ContextMenu.wsRedoOption(this));\n\n    // Option to clean up blocks.\n    if (this.scrollbar) {\n        menu_options.push(Blockly.ContextMenu.wsCleanupOption(this, top_blocks.length));\n    }\n\n    if (this.options.collapse) {\n        const has_collapsed_blocks = all_blocks.some(block => block.isCollapsed());\n        const has_expanded_blocks = all_blocks.some(block => !block.isCollapsed());\n\n        menu_options.push(Blockly.ContextMenu.wsExpandOption(has_collapsed_blocks, all_blocks));\n        menu_options.push(Blockly.ContextMenu.wsCollapseOption(has_expanded_blocks, all_blocks));\n    }\n\n    // Option to add a workspace comment.\n    if (this.options.comments) {\n        menu_options.push(Blockly.ContextMenu.workspaceCommentOption(this, e));\n    }\n\n    menu_options.push(Blockly.ContextMenu.wsDeleteOption(this, top_blocks));\n\n    Blockly.ContextMenu.show(e, menu_options, this.RTL);\n};\n\n/**\n * Dispose of this workspace.\n * Unlink from all DOM elements to prevent memory leaks.\n */\nBlockly.WorkspaceSvg.prototype.dispose = function (should_show_loading = false) {\n    const disposeFn = () => {\n        // Stop rerendering.\n        this.rendered = false;\n        if (this.currentGesture_) {\n            this.currentGesture_.cancel();\n        }\n        Blockly.WorkspaceSvg.superClass_.dispose.call(this);\n        if (this.svgGroup_) {\n            goog.dom.removeNode(this.svgGroup_);\n            this.svgGroup_ = null;\n        }\n        this.svgBlockCanvas_ = null;\n        this.svgBubbleCanvas_ = null;\n        if (this.toolbox_) {\n            this.toolbox_.dispose();\n            this.toolbox_ = null;\n        }\n        if (this.flyout_) {\n            this.flyout_.dispose();\n            this.flyout_ = null;\n        }\n        if (this.trashcan) {\n            this.trashcan.dispose();\n            this.trashcan = null;\n        }\n        if (this.scrollbar) {\n            this.scrollbar.dispose();\n            this.scrollbar = null;\n        }\n        if (this.zoomControls_) {\n            this.zoomControls_.dispose();\n            this.zoomControls_ = null;\n        }\n\n        if (this.audioManager_) {\n            this.audioManager_.dispose();\n            this.audioManager_ = null;\n        }\n\n        if (this.grid_) {\n            this.grid_.dispose();\n            this.grid_ = null;\n        }\n\n        if (this.toolboxCategoryCallbacks_) {\n            this.toolboxCategoryCallbacks_ = null;\n        }\n        if (this.flyoutButtonCallbacks_) {\n            this.flyoutButtonCallbacks_ = null;\n        }\n        if (!this.options.parentWorkspace) {\n            // Top-most workspace.  Dispose of the div that the\n            // SVG is injected into (i.e. injectionDiv).\n            goog.dom.removeNode(this.getParentSvg().parentNode);\n        }\n        if (this.resizeHandlerWrapper_) {\n            Blockly.unbindEvent_(this.resizeHandlerWrapper_);\n            this.resizeHandlerWrapper_ = null;\n        }\n    };\n\n    if (should_show_loading) {\n        const { setLoading } = DBotStore.instance;\n        setLoading(true);\n\n        setTimeout(() => {\n            disposeFn();\n            setLoading(false);\n        }, 50);\n    } else {\n        disposeFn();\n    }\n};\n\n/**\n * Dispose of all blocks in workspace, with an optimization to prevent resizes.\n */\nBlockly.WorkspaceSvg.prototype.asyncClear = function () {\n    const { setLoading } = DBotStore.instance;\n    setLoading(true);\n\n    return new Promise(resolve => {\n        this.clear();\n        setLoading(false);\n        resolve();\n    });\n};\n","import { blueInfo } from '../blocks/images';\n\nBlockly.Tooltip.HOVER_MS = 50;\n\nBlockly.Tooltip.show_ = () => {\n    let params;\n    Blockly.Tooltip.DIV = ((Blockly.Tooltip.poisonedElement_ = Blockly.Tooltip.element_), Blockly.Tooltip.DIV);\n    if (!Blockly.Tooltip.blocked_) {\n        Blockly.Tooltip.DIV.innerHTML = '';\n        for (params = Blockly.Tooltip.element_.tooltip; typeof params === 'function'; ) params = params();\n        params = Blockly.utils.string.wrap(params, Blockly.Tooltip.LIMIT);\n        params = params.split('\\n');\n\n        params.forEach((param, index) => {\n            const div = document.createElement('div');\n            const text_span = document.createElement('span');\n\n            text_span.appendChild(document.createTextNode(param));\n            text_span.style.verticalAlign = 'middle';\n            Blockly.Tooltip.DIV.appendChild(div);\n\n            if (!index) {\n                const img = document.createElement('img');\n                const img_span = document.createElement('span');\n                img.src = blueInfo;\n                img.style.paddingRight = '8px';\n                img.style.verticalAlign = 'middle';\n                div.appendChild(img_span);\n                img_span.appendChild(img);\n            } else {\n                text_span.style.paddingLeft = '24px';\n            }\n\n            div.appendChild(text_span);\n        });\n\n        const direction = Blockly.Tooltip.element_.RTL;\n        const client_width = document.documentElement.clientWidth;\n        const client_height = document.documentElement.clientHeight;\n        if (Blockly.Tooltip.DIV) {\n            Blockly.Tooltip.DIV.style.direction = direction ? 'rtl' : 'ltr';\n        }\n        Blockly.Tooltip.DIV.style.display = 'block';\n        Blockly.Tooltip.visible = true;\n        let last_x = Blockly.Tooltip.lastX_;\n        last_x = direction\n            ? last_x - (Blockly.Tooltip.OFFSET_X + Blockly.Tooltip.DIV.offsetWidth)\n            : last_x + Blockly.Tooltip.OFFSET_X;\n        let last_y = Blockly.Tooltip.lastY_ + Blockly.Tooltip.OFFSET_Y;\n        if (last_y + Blockly.Tooltip.DIV.offsetHeight > client_height + window.scrollY) {\n            last_y -= Blockly.Tooltip.DIV.offsetHeight + 2 * Blockly.Tooltip.OFFSET_Y;\n        }\n        if (direction) {\n            last_x = Math.max(Blockly.Tooltip.MARGINS - window.scrollX, last_x);\n        }\n        if (last_x + Blockly.Tooltip.DIV.offsetWidth > client_width + window.scrollX - 2 * Blockly.Tooltip.MARGINS) {\n            last_x = client_width - Blockly.Tooltip.DIV.offsetWidth - 2 * Blockly.Tooltip.MARGINS;\n        }\n        Blockly.Tooltip.DIV.style.top = `${last_y}px`;\n        Blockly.Tooltip.DIV.style.left = `${last_x}px`;\n    }\n};\n\nBlockly.Tooltip.hide = () => {\n    if (Blockly.Tooltip.visible && Blockly.Tooltip.DIV) {\n        Blockly.Tooltip.visible = false;\n        setTimeout(() => (Blockly.Tooltip.DIV.style.display = 'none'), Blockly.Tooltip.HOVER_MS);\n    }\n    if (Blockly.Tooltip.showPid_) {\n        clearTimeout(Blockly.Tooltip.showPid_);\n    }\n\n    /// For hiding tooltip next to the platform name.\n    if (!Blockly.Tooltip.DIV?.style.direction) {\n        Blockly.Tooltip.visible = false;\n        Blockly.Tooltip.DIV.style.display = 'none';\n    }\n};\n","/* eslint-disble */\n/**\n * Create a main workspace and add it to the SVG.\n * @param {!Element} svg SVG element with pattern defined.\n * @param {!Blockly.Options} options Dictionary of options.\n * @param {!Blockly.BlockDragSurfaceSvg} blockDragSurface Drag surface SVG\n *     for the blocks.\n * @param {!Blockly.WorkspaceDragSurfaceSvg} workspaceDragSurface Drag surface\n *     SVG for the workspace.\n * @return {!Blockly.Workspace} Newly created main workspace.\n * @private\n */\nBlockly.createVirtualWorkspace_ = function (fragment, options, blockDragSurface, workspaceDragSurface) {\n    options.parentWorkspace = null;\n    const mainWorkspace = new Blockly.WorkspaceSvg(options, blockDragSurface, workspaceDragSurface);\n    mainWorkspace.scale = options.zoomOptions.startScale;\n    fragment.appendChild(mainWorkspace.createDom('blocklyMainBackground'));\n\n    return mainWorkspace;\n};\n","/**\n * Change the colour of the associated bubble to match its block.\n * deriv-bot: Use primary colour instead of tertiary. At time of writing\n * we use colour too similar to workspace background colour for tertiary (borders).\n * @package\n */\nBlockly.ScratchBlockComment.prototype.updateColour = function () {\n    if (this.isVisible()) {\n        this.bubble_.setColour(this.block_.getColour());\n    }\n};\n","// deriv-bot: Reference the correct function of wrap. This is due to\n// Scratch using different structure vs Blockly.\nBlockly.utils.string = {\n    wrap: Blockly.utils.wrap,\n};\n","Blockly.VariableMap.prototype.createVariable = function (name, opt_type, opt_id, opt_is_local, opt_is_cloud) {\n    let variable = this.getVariable(name, opt_type);\n\n    if (variable) {\n        return variable;\n    }\n\n    if (opt_id) {\n        variable = this.getVariableById(opt_id);\n\n        if (variable) {\n            return variable;\n        }\n    }\n\n    const optional_id = opt_id || Blockly.utils.genUid();\n    const optional_type = opt_type || '';\n\n    variable = new Blockly.VariableModel(this.workspace, name, optional_type, optional_id, opt_is_local, opt_is_cloud);\n\n    // If opt_type is not a key, create a new list.\n    if (!this.variableMap_[optional_type]) {\n        this.variableMap_[optional_type] = [variable];\n    } else {\n        // Else append the variable to the preexisting list.\n        this.variableMap_[optional_type].push(variable);\n    }\n\n    return variable;\n};\n","/**\n * Find all user-created variables that are in use in the workspace.\n * For use by generators.\n * To get a list of all variables on a workspace, including unused variables,\n * call Workspace.getAllVariables.\n * @deriv/bot: Required for JS generator to work.\n * @param {!Blockly.Workspace} ws The workspace to search for variables.\n * @return {!Array.<!Blockly.VariableModel>} Array of variable models.\n */\nBlockly.Variables.allUsedVarModels = function (ws) {\n    const blocks = ws.getAllBlocks(false);\n    const variableHash = Object.create(null);\n\n    // Iterate through every block and add each variable to the hash.\n    blocks.forEach(block => {\n        const blockVariables = block.getVarModels();\n        if (blockVariables) {\n            blockVariables.forEach(blockVariable => {\n                const id = blockVariable.getId();\n                if (id) {\n                    variableHash[id] = blockVariable;\n                }\n            });\n        }\n    });\n\n    // Flatten the hash into a list.\n    const variableList = [];\n    Object.keys(variableHash).forEach(id => {\n        variableList.push(variableHash[id]);\n    });\n\n    return variableList;\n};\n\n/**\n * Generate DOM objects representing a variable field.\n * @param {!Blockly.VariableModel} variableModel The variable model to\n *     represent.\n * @return {Element} The generated DOM.\n * @public\n */\nBlockly.Variables.generateVariableFieldDom = function (variableModel) {\n    /* Generates the following XML:\n     * <field name=\"VAR\" id=\"goKTKmYJ8DhVHpruv\" variabletype=\"int\">foo</field>\n     */\n    const field = document.createElement('field');\n\n    field.setAttribute('name', 'VAR');\n    field.setAttribute('id', variableModel.getId());\n    field.setAttribute('variabletype', variableModel.type);\n\n    const name = document.createTextNode(variableModel.name);\n    field.appendChild(name);\n    return field;\n};\n","Blockly.WorkspaceAudio.prototype.preload = function () {};\n","Blockly.Xml.NODE_BLOCK = 'BLOCK';\nBlockly.Xml.NODE_BUTTON = 'BUTTON';\nBlockly.Xml.NODE_LABEL = 'LABEL';\nBlockly.Xml.NODE_SHADOW = 'SHADOW';\nBlockly.Xml.NODE_INPUT = 'INPUT';\n","import filesaver from 'file-saver';\nimport { config } from '../constants/config';\n\nexport const saveAs = ({ data, filename, type }) => {\n    const blob = new Blob([data], { type });\n    filesaver.saveAs(blob, filename);\n};\n\nexport const getContractTypeOptions = (contract_type, trade_type) => {\n    const trade_types = config.opposites[trade_type.toUpperCase()];\n\n    if (!trade_types) {\n        return config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n    }\n\n    const contract_options = trade_types.map(type => Object.entries(type)[0].reverse());\n\n    // When user selected a specific contract, only return the contract type they selected.\n    if (contract_type !== 'both') {\n        return contract_options.filter(option => option[1] === contract_type);\n    }\n\n    return contract_options;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../constants/config';\nimport ApiHelpers from '../services/api/api-helpers';\n\n/* eslint-disable no-underscore-dangle */\nexport default class BlockConversion {\n    constructor() {\n        this.blocks_pending_reconnect = {};\n        this.workspace = this.createWorkspace();\n        this.workspace_variables = {};\n        this.has_market_block = false;\n        this.exception_blocks = ['r_100'];\n    }\n\n    getConversions() {\n        const generateGrowingListBlock = (block_node, block_type, variable_name, child_value_input_name) => {\n            const block = this.workspace.newBlock(block_type);\n            const block_child_nodes = Array.from(block_node.children);\n            const mutation_dom = block_child_nodes.find(child_node => child_node.tagName.toLowerCase() === 'mutation');\n\n            if (mutation_dom) {\n                const items_amount = parseInt(mutation_dom.getAttribute('items')) || 0;\n\n                if (items_amount > 0) {\n                    // In DBot we have a statement block for each value part of the list, so we need to\n                    // generate blocks for these and connect them to the parent's statement.\n                    for (let i = 0; i < items_amount; i++) {\n                        block.onIconClick();\n                    }\n\n                    // Note that value_input_nodes.length can be different than the items_amount\n                    // user can have empty entries in their list!\n                    block_child_nodes\n                        .filter(child_node => child_node.tagName.toLowerCase() === 'value')\n                        .forEach(child_node => {\n                            const value_input_name = child_node.getAttribute('name');\n                            const value_input_index = parseInt(value_input_name.replace(/[^0-9]+/g, ''));\n\n                            Array.from(child_node.children).forEach(value_block_node => {\n                                const value_block = this.convertBlockNode(value_block_node, block);\n\n                                // Now connect this converted block to the new text_statement.\n                                const statement_block = block\n                                    .getBlocksInStatement('STACK')\n                                    .find((b, i) => value_input_index === i);\n                                const value_input = statement_block.getInput(child_value_input_name);\n\n                                value_input.connection.connect(value_block.outputConnection);\n                            });\n\n                            child_node.parentNode.removeChild(child_node);\n                        });\n                }\n            }\n\n            // Return variable block instead of statement.\n            const variable = this.generateUniqueVariable(variable_name);\n            const variable_block = this.workspace.newBlock('variables_get');\n\n            variable_block.setFieldValue(variable.getId(), 'VAR');\n            block.setFieldValue(variable.getId(), 'VARIABLE');\n\n            return {\n                block_to_attach: variable_block,\n                statement_blocks: [block],\n            };\n        };\n        const generateIndicatorBlock = (block_node, block_type, variable_name) => {\n            const block = this.workspace.newBlock(block_type);\n            const value_input_name_mappings = {\n                input_list: [{ old: 'INPUT', new: 'INPUT_LIST' }],\n                period: [{ old: 'PERIOD', new: 'PERIOD' }],\n                fast_ema_period: [{ old: 'FAST_EMA_PERIOD', new: 'FAST_EMA_PERIOD' }],\n                signal_ema_period: [\n                    // https://github.com/binary-com/binary-bot/pull/1123\n                    { old: 'SMA_PERIOD', new: 'SIGNAL_EMA_PERIOD' },\n                    { old: 'SIGNAL_EMA_PERIOD', new: 'SIGNAL_EMA_PERIOD' },\n                ],\n                slow_ema_period: [{ old: 'SLOW_EMA_PERIOD', new: 'SLOW_EMA_PERIOD' }],\n                std_dev_multiplier_up: [{ old: 'UPMULTIPLIER', new: 'UPMULTIPLIER' }],\n                std_dev_multiplier_down: [{ old: 'DOWNMULTIPLIER', new: 'DOWNMULTIPLIER' }],\n            };\n\n            // Bollinger Bands + MACDA have some fields we need to carry over.\n            switch (block_type) {\n                case 'bb_statement':\n                case 'bba_statement': {\n                    const bb_result_list = block.getField('BBRESULT_LIST');\n                    if (bb_result_list) {\n                        bb_result_list.setValue(this.getFieldValue(block_node, 'BBRESULT_LIST'));\n                    }\n                    break;\n                }\n                case 'macda_statement': {\n                    const macd_fields_list = block.getField('MACDFIELDS_LIST');\n                    if (macd_fields_list) {\n                        macd_fields_list.setValue(this.getFieldValue(block_node, 'MACDFIELDS_LIST'));\n                    }\n                    break;\n                }\n                default:\n                    break;\n            }\n\n            // Attach required child blocks (these are defined on each indicator block).\n            const required_child_blocks = block.required_child_blocks || [];\n\n            required_child_blocks.forEach(required_child_block_name => {\n                const child_block = this.workspace.newBlock(required_child_block_name);\n                const last_connection = block.getLastConnectionInStatement('STATEMENT');\n\n                last_connection.connect(child_block.previousConnection);\n            });\n\n            const blocks_in_statement = block.getBlocksInStatement('STATEMENT');\n\n            blocks_in_statement.forEach(block_in_statement => {\n                const value_name_mappings = value_input_name_mappings[block_in_statement.type];\n\n                if (value_name_mappings) {\n                    value_name_mappings.forEach(value_name_mapping => {\n                        const el_value = block_node.querySelector(`value[name=\"${value_name_mapping.old}\"]`);\n\n                        if (el_value) {\n                            const value_input = block_in_statement.getInput(value_name_mapping.new);\n\n                            Array.from(el_value.children).forEach(el_value_child => {\n                                const converted_block = this.convertBlockNode(el_value_child, block);\n                                const input_child_type = el_value_child.tagName.toLowerCase();\n\n                                if (input_child_type === 'shadow') {\n                                    converted_block.setShadow(true);\n                                }\n\n                                value_input.connection.connect(converted_block.outputConnection);\n                            });\n\n                            el_value.parentNode.removeChild(el_value);\n                        }\n                    });\n                }\n            });\n\n            // Return variable block instead of statement.\n            const variable = this.generateUniqueVariable(variable_name);\n            const variable_block = this.workspace.newBlock('variables_get');\n\n            variable_block.setFieldValue(variable.getId(), 'VAR');\n            block.setFieldValue(variable.getId(), 'VARIABLE');\n\n            return {\n                block_to_attach: variable_block,\n                statement_blocks: [block],\n            };\n        };\n        const tradeOptions = (block_node, is_symbol_type = false) => {\n            const block = this.workspace.newBlock('trade_definition_tradeoptions');\n            const block_node_to_use = block_node;\n\n            // Legacy symbol blocks used a statement \"CONDITION\" populated with a trade type block.\n            // This trade type block has the same structure as tradeOptions, hence we can use it here.\n            if (is_symbol_type) {\n                return false;\n            }\n\n            const fields = [\n                'DURATIONTYPE_LIST',\n                'CURRENCY_LIST',\n                'BARRIEROFFSETTYPE_LIST',\n                'SECONDBARRIEROFFSETTYPE_LIST',\n            ];\n            const block_child_nodes = Array.from(block_node_to_use.children);\n\n            let barrier_inputs = 0;\n            let has_prediction = false;\n\n            block_child_nodes\n                .filter(block_child_node => block_child_node.tagName.toLowerCase() === 'value')\n                .forEach(block_child_node => {\n                    const value_input_name = block_child_node.getAttribute('name');\n\n                    if (value_input_name === 'BARRIEROFFSET' || value_input_name === 'SECONDBARRIEROFFSET') {\n                        barrier_inputs++;\n                    } else if (value_input_name === 'PREDICTION') {\n                        has_prediction = true;\n                    }\n                });\n\n            if (barrier_inputs > 0) {\n                block.createBarrierInputs({\n                    allow_both_types: true,\n                    values: [1, -1],\n                });\n            }\n\n            if (has_prediction) {\n                block.createPredictionInput([0]);\n            }\n\n            fields.forEach(field_name => {\n                const field = block.getField(field_name);\n                if (field) {\n                    field.setValue(this.getFieldValue(block_node_to_use, field_name));\n                }\n            });\n\n            return { block_to_attach: block };\n        };\n        const conversions = {\n            bb: block_node => generateIndicatorBlock(block_node, 'bb_statement', 'bb'),\n            bba: block_node => generateIndicatorBlock(block_node, 'bba_statement', 'bba'),\n            ema: block_node => generateIndicatorBlock(block_node, 'ema_statement', 'ema'),\n            emaa: block_node => generateIndicatorBlock(block_node, 'emaa_statement', 'emaa'),\n            lists_create_with: block_node =>\n                generateGrowingListBlock(block_node, 'lists_create_with', localize('list'), 'VALUE'),\n            macda: block_node => generateIndicatorBlock(block_node, 'macda_statement', 'macda'),\n            market: block_node => {\n                this.has_market_block = true;\n                return tradeOptions(block_node);\n            },\n            rsi: block_node => generateIndicatorBlock(block_node, 'rsi_statement', 'rsi'),\n            rsia: block_node => generateIndicatorBlock(block_node, 'rsia_statement', 'rsia'),\n            sma: block_node => generateIndicatorBlock(block_node, 'sma_statement', 'sma'),\n            smaa: block_node => generateIndicatorBlock(block_node, 'smaa_statement', 'smaa'),\n            text_join: block_node => generateGrowingListBlock(block_node, 'text_join', localize('text'), 'TEXT'),\n            trade: block_node => {\n                const block = this.workspace.newBlock('trade_definition');\n                const block_fields = {\n                    trade_definition_market: ['MARKET_LIST', 'SUBMARKET_LIST', 'SYMBOL_LIST'],\n                    trade_definition_tradetype: ['TRADETYPECAT_LIST', 'TRADETYPE_LIST'],\n                    trade_definition_contracttype: ['TYPE_LIST'],\n                    trade_definition_candleinterval: ['CANDLEINTERVAL_LIST'],\n                    trade_definition_restartbuysell: ['TIME_MACHINE_ENABLED'],\n                    trade_definition_restartonerror: ['RESTARTONERROR'],\n                };\n\n                const blocks_to_connect = {};\n\n                Object.keys(block_fields).forEach(child_block_name => {\n                    const child_block = this.workspace.newBlock(child_block_name);\n\n                    block_fields[child_block_name].forEach(field_name => {\n                        child_block.setFieldValue(this.getFieldValue(block_node, field_name), field_name);\n                    });\n\n                    blocks_to_connect[child_block_name] = child_block;\n                });\n\n                Object.values(blocks_to_connect).forEach(child_block => {\n                    const last_connection = block.getLastConnectionInStatement('TRADE_OPTIONS');\n                    last_connection.connect(child_block.previousConnection);\n                });\n\n                return { block_to_attach: block };\n            },\n            tradeOptions,\n        };\n\n        return conversions;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getIllegalBlocks() {\n        const illegal_blocks = [];\n\n        // Legacy symbol + trade_type blocks are special cases, they are turned into multiple blocks.\n        // We don't convert these atm, as a workaround users can import to BBot, then export and load\n        // into DBot.\n        const { active_symbols } = ApiHelpers.instance.active_symbols;\n        const { opposites } = config;\n\n        active_symbols.forEach(active_symbol => {\n            const symbol_name = active_symbol.symbol.toLowerCase();\n            if (!illegal_blocks.includes(symbol_name)) {\n                illegal_blocks.push(symbol_name);\n            }\n        });\n\n        // All trade types blocks cannot be converted at this time.\n        Object.keys(opposites).forEach(opposites_name => illegal_blocks.push(opposites_name));\n\n        return illegal_blocks;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    createWorkspace() {\n        const options = new Blockly.Options({ media: `${__webpack_public_path__}media/` });\n        const el_injection_div = new DocumentFragment();\n        const workspace = Blockly.createVirtualWorkspace_(el_injection_div, options, false, false);\n\n        return workspace;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getFieldValue(el_block, field_name) {\n        const el_field = el_block.querySelector(`field[name=\"${field_name}\"]`);\n        return el_field ? el_field.textContent : '';\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getFirstBlockInStack(block) {\n        let current_previous_connection = block.previousConnection;\n        let previous_block = block.getPreviousBlock();\n\n        if (!current_previous_connection) {\n            return block;\n        }\n\n        while (previous_block) {\n            if (previous_block === block.getSurroundParent()) {\n                break;\n            }\n\n            current_previous_connection = previous_block.previousConnection;\n            previous_block = previous_block.getPreviousBlock();\n        }\n\n        return current_previous_connection.sourceBlock_;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    updateRenamedFields(xml) {\n        const renamed_fields = {\n            MARKET_LIST: {\n                volidx: 'synthetic_index',\n            },\n            TRADETYPECAT_LIST: {\n                endsinout: 'inout',\n                staysinout: 'inout',\n                callputequal: 'callput',\n            },\n            TRADETYPE_LIST: {\n                risefall: 'callput',\n                risefallequals: 'callputequal',\n            },\n        };\n\n        Object.keys(renamed_fields).forEach(field_name => {\n            const el_field = xml.querySelector(`field[name=\"${field_name}\"]`);\n\n            if (el_field) {\n                const value = el_field.innerText;\n\n                Object.keys(renamed_fields[field_name]).forEach(old_name => {\n                    if (value === old_name) {\n                        el_field.innerText = renamed_fields[field_name][old_name];\n                    }\n                });\n            }\n        });\n\n        return xml;\n    }\n\n    naivelyFixLegacyStrategyAfterConversion() {\n        // For old \"market\" blocks, move everything in \"Trade options\" except \"DURATION\"\n        // to \"Run once at start\". Legacy \"market\" blocks had no such thing as \"Run once at start\"\n        // not moving everything would kill Martingale strategies as they'd be reinitialised each run.\n        const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n        const has_initialization_block = trade_definition_block.getBlocksInStatement('INITIALIZATION').length > 0;\n        if (trade_definition_block) {\n            trade_definition_block.getBlocksInStatement('SUBMARKET').forEach(block => {\n                if (\n                    block.type !== 'trade_definition_tradeoptions' &&\n                    this.has_market_block &&\n                    !has_initialization_block\n                ) {\n                    const last_connection = trade_definition_block.getLastConnectionInStatement('INITIALIZATION');\n                    block.unplug(true);\n                    last_connection.connect(block.previousConnection);\n                }\n            });\n        }\n    }\n\n    generateUniqueVariable(variable_name) {\n        let current_name = variable_name;\n        let counter = 0;\n\n        while (Object.values(this.workspace_variables).includes(current_name)) {\n            counter++;\n            current_name = variable_name + counter;\n        }\n\n        const ws_variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, '', current_name, '');\n        this.workspace_variables[ws_variable.id_] = current_name; // eslint-disable-line\n\n        return ws_variable;\n    }\n\n    convertStrategy(strategy_node, showIncompatibleStrategyDialog) {\n        // Disable events (globally) to suppress block onchange listeners from firing.\n        Blockly.Events.disable();\n\n        // We only want to update renamed fields for modern strategies.\n        const xml = this.updateRenamedFields(strategy_node);\n\n        // Don't convert already compatible strategies.\n        if (strategy_node.hasAttribute('is_dbot') && strategy_node.getAttribute('is_dbot') === 'true') {\n            Blockly.Events.enable();\n            return xml;\n        }\n\n        const has_illegal_block = this.getIllegalBlocks().some(illegal_block_type => {\n            if (!this.exception_blocks.includes(illegal_block_type)) {\n                return !!xml.querySelector(`block[type=\"${illegal_block_type}\"]`);\n            }\n        });\n\n        if (has_illegal_block) {\n            if (showIncompatibleStrategyDialog) {\n                showIncompatibleStrategyDialog();\n            }\n            Blockly.Events.enable();\n            return Blockly.Xml.textToDom('<xml />');\n        }\n\n        const variable_nodes = [];\n        const block_nodes = [];\n\n        Array.from(xml.children).forEach(strategy_child_node => {\n            const tag_name = strategy_child_node.nodeName.toLowerCase();\n\n            switch (tag_name) {\n                case 'block':\n                case 'shadow': {\n                    block_nodes.push(strategy_child_node);\n                    break;\n                }\n                case 'variables': {\n                    variable_nodes.push(...strategy_child_node.children);\n                    break;\n                }\n                default:\n                    break;\n            }\n        });\n\n        const registerVariables = el_variables => {\n            el_variables.forEach(el_variable => {\n                const variable_id = el_variable.getAttribute('id');\n                const variable_name = el_variable.textContent;\n\n                if (!this.workspace_variables[variable_id]) {\n                    const variable = Blockly.Variables.getOrCreateVariablePackage(\n                        this.workspace,\n                        variable_id,\n                        variable_name,\n                        ''\n                    );\n                    this.workspace_variables[variable.id_] = variable.name;\n                }\n            });\n        };\n\n        // Register pre-existing variables taken from XML file. Users may register variables\n        // but not use them, we should not delete them nor create only the ones used in the strategy.\n        registerVariables(variable_nodes);\n\n        // Collection strategies don't pre-register variables, find these and register\n        // variable instances for them if they don't exist yet.\n        registerVariables(xml.querySelectorAll('field[name=\"VAR\"]'));\n\n        block_nodes.forEach(block_node => this.convertBlockNode(block_node));\n\n        // Re-connect blocks that have been transformed into multiples. i.e. in the case\n        // of old multiline blocks converted to statement blocks.\n        Object.keys(this.blocks_pending_reconnect).forEach(previous_sibling_id => {\n            const previous_sibling_block = this.workspace.getBlockById(previous_sibling_id);\n            const child_blocks = this.blocks_pending_reconnect[previous_sibling_id];\n            const sibling_previous_connection = previous_sibling_block.previousConnection;\n\n            if (sibling_previous_connection) {\n                const sibling_previous_target_connection = sibling_previous_connection.targetConnection;\n                let highest_previous_connection = sibling_previous_connection;\n\n                // Connect all the blocks to be connected in reverse, we do this to maintain\n                // the original order of statement blocks, although the order mostly doesn't\n                // matter. (This may change, it may matter for other statement blocks.)\n                child_blocks.reverse().forEach(child_block => {\n                    highest_previous_connection.connect(child_block.nextConnection);\n                    highest_previous_connection = child_block.previousConnection;\n                });\n\n                if (sibling_previous_target_connection) {\n                    // Reconnect the first block in this statement to the original parent connection.\n                    let current_previous_connection = previous_sibling_block.previousConnection;\n                    let previous_block = previous_sibling_block.getPreviousBlock();\n\n                    while (previous_block) {\n                        if (previous_block === previous_block.getSurroundParent()) {\n                            break;\n                        }\n\n                        current_previous_connection = previous_block.previousConnection;\n                        previous_block = previous_block.getPreviousBlock();\n                    }\n\n                    sibling_previous_target_connection.connect(current_previous_connection);\n                }\n            }\n        });\n\n        this.naivelyFixLegacyStrategyAfterConversion();\n\n        this.workspace.getAllBlocks(true).forEach(block => {\n            block.initSvg();\n            block.render();\n        });\n\n        this.workspace.cleanUp();\n\n        const converted_xml = Blockly.Xml.workspaceToDom(this.workspace);\n\n        if (strategy_node.hasAttribute('collection') && strategy_node.getAttribute('collection') === 'true') {\n            converted_xml.setAttribute('collection', 'true');\n        }\n\n        converted_xml.setAttribute('is_dbot', 'true');\n\n        this.workspace = null;\n\n        Blockly.Events.enable();\n\n        return converted_xml;\n    }\n\n    convertBlockNode(el_block, parent_block = null) {\n        const conversions = this.getConversions();\n        const block_type = el_block.getAttribute('type');\n        const is_old_block = Object.keys(conversions).includes(block_type);\n        let block = null;\n\n        const is_collapsed = el_block.getAttribute('collapsed') && el_block.getAttribute('collapsed') === 'true';\n        const is_immovable = el_block.getAttribute('movable') && el_block.getAttribute('movable') === 'false';\n        const is_undeletable = el_block.getAttribute('deletable') && el_block.getAttribute('deletable') === 'false';\n        const is_disabled = el_block.getAttribute('disabled') && el_block.getAttribute('disabled') === 'true';\n\n        const setBlockAttributes = b => {\n            b.setCollapsed(is_collapsed);\n            b.setMovable(!is_immovable);\n            b.setDeletable(!is_undeletable);\n            b.setDisabled(is_disabled);\n        };\n\n        if (is_old_block) {\n            const conversion_obj = conversions[block_type](el_block);\n\n            // block is a value block that needs to be reattached. TODO?\n            if (conversion_obj.block_to_attach) {\n                block = conversion_obj.block_to_attach;\n                setBlockAttributes(block);\n            }\n\n            // Statement blocks coming from the conversion_obj need to be attached to the block's previousConnection.\n            if (parent_block && conversion_obj.statement_blocks) {\n                conversion_obj.statement_blocks.forEach(statement_block => {\n                    // Persist block attributes.\n                    setBlockAttributes(statement_block);\n\n                    const previous_connection = this.getClosestLegalPreviousConnection(parent_block);\n\n                    if (previous_connection) {\n                        const target_block = previous_connection.sourceBlock_;\n\n                        if (!this.blocks_pending_reconnect[target_block.id]) {\n                            this.blocks_pending_reconnect[target_block.id] = [];\n                        }\n\n                        this.blocks_pending_reconnect[target_block.id].push(statement_block);\n                    }\n                });\n            }\n        } else {\n            const is_legal_block = Object.keys(Blockly.Blocks).includes(block_type);\n\n            if (is_legal_block) {\n                block = this.workspace.newBlock(block_type);\n                setBlockAttributes(block);\n\n                // Ensure mutations are correctly rendered. This logic happens here because\n                // we should ignore mutations on blocks that are already converted i.e mutations\n                // will be taken care of in conversion, not here.\n                if (block) {\n                    const mutation_dom = Array.from(el_block.children).find(\n                        child_node => child_node.tagName.toLowerCase() === 'mutation'\n                    );\n\n                    if (mutation_dom && block.domToMutation) {\n                        block.domToMutation(mutation_dom);\n                    }\n                }\n            }\n        }\n\n        if (!block) {\n            console.warn('Unrecognised block found.', block_type); // eslint-disable-line no-console\n            return false;\n        }\n\n        // Keep track of parent_block, especially important for blocks\n        // nested in <next> statements. This property is only set during conversion.\n        if (parent_block) {\n            block.conversion_parent = parent_block;\n        }\n\n        Array.from(el_block.children).forEach(el_block_child => {\n            const tag_name = el_block_child.tagName.toLowerCase();\n\n            switch (tag_name) {\n                case 'field': {\n                    const field_name = el_block_child.getAttribute('name');\n                    const field = block.getField(field_name);\n\n                    if (field) {\n                        if (field instanceof Blockly.FieldVariable) {\n                            const variable_id = el_block_child.getAttribute('id');\n                            const variable_name = el_block_child.innerText.trim();\n                            const variable = Blockly.Variables.getOrCreateVariablePackage(\n                                this.workspace,\n                                variable_id,\n                                variable_name,\n                                ''\n                            );\n                            this.workspace_variables[variable.id_] = variable_name;\n                            field.setValue(variable.id_);\n                        } else {\n                            field.setValue(el_block_child.innerText);\n                        }\n                    }\n                    break;\n                }\n                case 'value': {\n                    this.processValueInputs(block, el_block_child);\n                    break;\n                }\n                case 'statement': {\n                    const statement_name = el_block_child.getAttribute('name');\n                    this.processStatementInputs(block, statement_name, el_block_child);\n                    break;\n                }\n                case 'next': {\n                    const closest_statement = el_block_child.closest('statement');\n\n                    if (closest_statement) {\n                        const statement_name = closest_statement.getAttribute('name');\n                        this.processStatementInputs(block, statement_name, el_block_child, block.conversion_parent);\n                    } else if (block.nextConnection) {\n                        Array.from(el_block_child.children).forEach(el_sibling_block => {\n                            const sibling_block = this.convertBlockNode(el_sibling_block);\n                            block.nextConnection.connect(sibling_block.previousConnection);\n                        });\n                    }\n                    break;\n                }\n                case 'comment': {\n                    const is_minimised = el_block_child.getAttribute('pinned') !== 'true';\n                    const comment_text = el_block_child.innerText;\n\n                    block.comment = new Blockly.ScratchBlockComment(block, comment_text, null, 0, 0, is_minimised);\n                    block.comment.iconXY_ = { x: 0, y: 0 };\n                    block.comment.setVisible(true); // Scratch comments are always visible.\n                    break;\n                }\n                default:\n                    break;\n            }\n        });\n\n        return block;\n    }\n\n    // eslint-disable-next-line consistent-return\n    processValueInputs(block, el_input) {\n        const input_name = el_input.getAttribute('name');\n        const input = block.getInput(input_name);\n\n        if (!input) {\n            console.warn('Unrecognised value input', input_name); // eslint-disable-line no-console\n            return false;\n        }\n\n        // Each of the children of a value node is a shadow or block node. Recursively\n        // convert these block nodes to their new counterpart and re-connect them.\n        // eslint-disable-next-line consistent-return\n        Array.from(el_input.children).forEach(el_input_child_block => {\n            const input_child_block = this.convertBlockNode(el_input_child_block, block);\n\n            if (!input_child_block) {\n                // eslint-disable-next-line no-console\n                console.warn('Illegal child.', el_input_child_block.getAttribute('type'));\n                return false;\n            }\n\n            // Set shadow property for shadow blocks.\n            const input_child_type = el_input_child_block.tagName.toLowerCase();\n            if (input_child_type === 'shadow') {\n                input_child_block.setShadow(true);\n            }\n\n            // Re-connect the child block to the value input.\n            input.connection.connect(input_child_block.outputConnection);\n        });\n    }\n\n    // eslint-disable-next-line consistent-return\n    processStatementInputs(block, statement_name, el_node_with_children, block_to_search = null) {\n        const block_to_use = block_to_search || block;\n        const input = block_to_use.getInput(statement_name);\n\n        if (!input) {\n            console.warn('Unrecognised statement input', statement_name); // eslint-disable-line no-console\n            return false;\n        }\n\n        // Each of the children of a statement node is a block node. Recursively\n        // convert these block nodes to their new counterpart and reconnect them.\n        // eslint-disable-next-line consistent-return\n        Array.from(el_node_with_children.children).forEach(el_input_child_block => {\n            const input_child_block = this.convertBlockNode(el_input_child_block, block_to_use);\n            if (!input_child_block) {\n                // eslint-disable-next-line no-console\n                console.warn('Unrecognised child in statement', el_input_child_block.getAttribute('type'));\n                return false;\n            }\n\n            // Note that blocks are connected recursively so more deeply nested blocks\n            // (i.e. nested in <next>) will be connected before less nested blocks.\n            // Luckily Blockly API works in our favour and helps maintain the correct order.\n            const statement_input = block_to_use.getInput(statement_name);\n\n            if (statement_input && input_child_block.previousConnection) {\n                statement_input.connection.connect(input_child_block.previousConnection);\n            }\n        });\n    }\n\n    getClosestLegalPreviousConnection(supposed_parent_block) {\n        // Procedures are a bit special, it's hard to find the correct connection for them so we\n        // generate a (completely useless) filler block and connect it to the procedure's statement\n        // so we can return that useless block's previousConnection.\n        if (config.procedureDefinitionBlocks.includes(supposed_parent_block.type)) {\n            const blocks_in_statement = supposed_parent_block.getBlocksInStatement('STACK');\n\n            if (blocks_in_statement.length === 0) {\n                const input = supposed_parent_block.getInput('STACK');\n                const useless_block = this.workspace.newBlock('useless_block');\n\n                input.connection.connect(useless_block.previousConnection);\n\n                return useless_block.previousConnection;\n            }\n\n            return supposed_parent_block.getInputTargetBlock('STACK').previousConnection;\n        }\n\n        let current_block = this.getFirstBlockInStack(supposed_parent_block);\n        let is_protected_statement = this.isConnectedToProtectedStatementInput(current_block);\n\n        while (is_protected_statement) {\n            const new_parent = current_block.getParent();\n\n            if (new_parent) {\n                current_block = new_parent;\n                is_protected_statement = this.isConnectedToProtectedStatementInput(current_block);\n            }\n        }\n\n        if (current_block.previousConnection) {\n            return current_block.previousConnection;\n        }\n\n        if (supposed_parent_block.conversion_parent) {\n            return this.getClosestLegalPreviousConnection(supposed_parent_block.conversion_parent);\n        }\n\n        return false;\n    }\n\n    isConnectedToProtectedStatementInput(block) {\n        const first_block = this.getFirstBlockInStack(block);\n        const previous_connection = first_block.previousConnection;\n\n        if (previous_connection) {\n            const target_connection = previous_connection.targetConnection;\n\n            if (target_connection) {\n                const target_block = target_connection.sourceBlock_; // eslint-disable-line\n                const input = target_block.getInputWithConnection(target_connection);\n                const protected_statements = target_block.protected_statements || [];\n\n                if (input && protected_statements.includes(input.name)) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n}\n","import { localize } from '@deriv/translations';\nimport { saveAs } from '../shared';\nimport BlockConversion from '../backward-compatibility';\nimport { config } from '../../constants/config';\nimport { observer as globalObserver } from '../../utils/observer';\nimport { removeLimitedBlocks } from '../../utils/workspace';\nimport { saveWorkspaceToRecent } from '../../utils/local-storage';\nimport DBotStore from '../dbot-store';\nimport { log_types } from '../../constants/messages';\nimport { error_message_map } from '../../utils/error-config';\n\nexport const getSelectedTradeType = (workspace = Blockly.derivWorkspace) => {\n    const trade_type_block = workspace.getAllBlocks(true).find(block => block.type === 'trade_definition_tradetype');\n    const selected_trade_type = trade_type_block?.getFieldValue('TRADETYPE_LIST');\n    const mandatory_tradeoptions_block =\n        selected_trade_type === 'multiplier' ? 'trade_definition_multiplier' : 'trade_definition_tradeoptions';\n    return mandatory_tradeoptions_block;\n};\n\nexport const matchTranslateAttribute = translateString => {\n    const match = translateString.match(/translate\\((-?\\d*\\.?\\d+),(-?\\d*\\.?\\d+)\\)/);\n    if (match && match.length > 2) {\n        const x = parseFloat(match[1]);\n        const y = parseFloat(match[2]);\n        return { x, y };\n    }\n    return null; // Invalid or no match\n};\n\nexport const extractTranslateValues = () => {\n    const transform_value = Blockly?.derivWorkspace?.trashcan?.svgGroup_.getAttribute('transform');\n    const translate_xy = matchTranslateAttribute(transform_value);\n\n    if (!translate_xy) {\n        globalObserver.emit('Error', 'Invalid String');\n    }\n\n    return {\n        translate_X: translate_xy.x,\n        translate_Y: translate_xy.y,\n    };\n};\n\nexport const validateErrorOnBlockDelete = () => {\n    // Get the bounding rectangle of the selected block\n    const { translate_X, translate_Y } = extractTranslateValues();\n    const blockRect = Blockly.selected?.getSvgRoot().getBoundingClientRect();\n    const translate_offset = 200;\n    // Extract coordinates from the bounding rectangles\n    const blockX = blockRect?.left || 0;\n    const blockY = blockRect?.top || 0;\n    const mandatory_trade_option_block = getSelectedTradeType();\n    const required_block_types = [mandatory_trade_option_block, 'trade_definition', 'purchase', 'before_purchase'];\n    if (required_block_types?.includes(Blockly?.selected?.type)) {\n        if (\n            blockY >= translate_Y - translate_offset &&\n            blockY <= translate_Y + translate_offset &&\n            blockX >= translate_X - translate_offset &&\n            blockX <= translate_X + translate_offset\n        ) {\n            globalObserver.emit('ui.log.error', error_message_map[Blockly.selected.category_]?.default);\n        }\n    }\n};\n\nexport const updateWorkspaceName = () => {\n    if (!DBotStore?.instance) return;\n    const { load_modal } = DBotStore.instance;\n    const file_name = load_modal?.dashboard_strategies?.[0]?.name ?? config.default_file_name;\n    if (document.title.indexOf('-') > -1) {\n        const string_to_replace = document.title.substr(document.title.indexOf('-'));\n        const new_document_title = document.title.replace(string_to_replace, `- ${file_name}`);\n\n        document.title = new_document_title;\n    } else {\n        document.title += ` - ${file_name}`;\n    }\n};\n\nexport const isMainBlock = block_type => config.mainBlocks.indexOf(block_type) >= 0;\n\nexport const oppositesToDropdownOptions = opposite_name => {\n    return opposite_name.map(contract_type => {\n        // i.e. [['CALL', localize('Rise')]] becomes [[localize('Rise'), 'CALL']];\n        return Object.entries(contract_type)[0].reverse();\n    });\n};\n\nexport const cleanUpOnLoad = (blocks_to_clean, drop_event, workspace) => {\n    const { clientX = 0, clientY = 0 } = drop_event || {};\n    const toolbar_height = 76;\n    const blockly_metrics = workspace.getMetrics();\n    const scale_cancellation = 1 / workspace.scale;\n    const blockly_left = blockly_metrics.absoluteLeft - blockly_metrics.viewLeft;\n    const blockly_top = document.body.offsetHeight - blockly_metrics.viewHeight - blockly_metrics.viewTop;\n    const cursor_x = clientX ? (clientX - blockly_left) * scale_cancellation : 0;\n    const cursor_y = clientY ? (clientY - blockly_top - toolbar_height) * scale_cancellation : 0;\n\n    workspace.cleanUp(cursor_x, cursor_y, blocks_to_clean);\n};\n\nexport const save = (filename = '@deriv/bot', collection = false, xmlDom) => {\n    xmlDom.setAttribute('is_dbot', 'true');\n    xmlDom.setAttribute('collection', collection ? 'true' : 'false');\n\n    const data = Blockly.Xml.domToPrettyText(xmlDom);\n    saveAs({ data, type: 'text/xml;charset=utf-8', filename: `${filename}.xml` });\n};\n\nconst delayExecution = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nexport const load = async ({\n    block_string,\n    drop_event,\n    file_name,\n    strategy_id,\n    from,\n    workspace,\n    showIncompatibleStrategyDialog,\n}) => {\n    if (!DBotStore?.instance || !workspace) return;\n    const { setLoading } = DBotStore.instance;\n    setLoading(true);\n    // Delay execution to allow fully previewing previous strategy if users quickly switch between strategies.\n    await delayExecution(100);\n    const showInvalidStrategyError = () => {\n        setLoading(false);\n        const error_message = localize('XML file contains unsupported elements. Please check or modify file.');\n        globalObserver.emit('ui.log.error', error_message);\n    };\n\n    // Check if XML can be parsed correctly.\n    try {\n        const xmlDoc = new DOMParser().parseFromString(block_string, 'application/xml');\n\n        if (xmlDoc.getElementsByTagName('parsererror').length) {\n            return showInvalidStrategyError();\n        }\n    } catch (e) {\n        return showInvalidStrategyError();\n    }\n\n    let xml;\n    // Check if XML can be parsed into a strategy.\n    try {\n        xml = Blockly.Xml.textToDom(block_string);\n    } catch (e) {\n        return showInvalidStrategyError();\n    }\n\n    const blockConversion = new BlockConversion();\n    xml = blockConversion.convertStrategy(xml, showIncompatibleStrategyDialog);\n    const blockly_xml = xml.querySelectorAll('block');\n\n    // Check if there are any blocks in this strategy.\n    if (!blockly_xml.length) {\n        return showInvalidStrategyError();\n    }\n\n    // Check if all block types in XML are allowed.\n    const has_invalid_blocks = Array.from(blockly_xml).some(block => {\n        const block_type = block.getAttribute('type');\n        return !Object.keys(Blockly.Blocks).includes(block_type);\n    });\n\n    if (has_invalid_blocks) {\n        return showInvalidStrategyError();\n    }\n\n    try {\n        const is_collection = xml.hasAttribute('collection') && xml.getAttribute('collection') === 'true';\n        const event_group = is_collection ? `load_collection${Date.now()}` : `dbot-load${Date.now()}`;\n\n        Blockly.Events.setGroup(event_group);\n        removeLimitedBlocks(\n            workspace,\n            Array.from(blockly_xml).map(xml_block => xml_block.getAttribute('type'))\n        );\n\n        if (is_collection) {\n            loadBlocks(xml, drop_event, event_group, workspace);\n        } else {\n            await loadWorkspace(xml, event_group, workspace);\n\n            const is_main_workspace = workspace === Blockly.derivWorkspace;\n            if (is_main_workspace) {\n                const { save_modal } = DBotStore.instance;\n\n                save_modal.updateBotName(file_name);\n                workspace.clearUndo();\n                workspace.current_strategy_id = strategy_id || Blockly.utils.genUid();\n                await saveWorkspaceToRecent(xml, from);\n            }\n        }\n\n        // Set user disabled state on all disabled blocks. This ensures we don't change the disabled\n        // state through code, which was implemented for user experience.\n        workspace.getAllBlocks().forEach(block => {\n            if (block.disabled) {\n                block.is_user_disabled_state = true;\n            }\n        });\n\n        if (workspace === Blockly.derivWorkspace) {\n            globalObserver.emit('ui.log.success', { log_type: log_types.LOAD_BLOCK });\n        }\n    } catch (e) {\n        console.error(e); // eslint-disable-line\n        return showInvalidStrategyError();\n    } finally {\n        setLoading(false);\n    }\n};\n\nexport const loadBlocks = (xml, drop_event, event_group, workspace) => {\n    Blockly.Events.setGroup(event_group);\n\n    const block_ids = Blockly.Xml.domToWorkspace(xml, workspace);\n    const added_blocks = block_ids.map(block_id => workspace.getBlockById(block_id));\n\n    if (drop_event && Object.keys(drop_event).length !== 0) {\n        cleanUpOnLoad(added_blocks, drop_event, workspace);\n    } else {\n        workspace.cleanUp();\n    }\n};\n\nexport const loadWorkspace = async (xml, event_group, workspace) => {\n    Blockly.Events.setGroup(event_group);\n    await workspace.asyncClear();\n    Blockly.Xml.domToWorkspace(xml, workspace);\n};\n\nconst loadBlocksFromHeader = (xml_string, block) => {\n    // eslint-disable-next-line consistent-return\n    return new Promise((resolve, reject) => {\n        let xml;\n\n        try {\n            xml = Blockly.Xml.textToDom(xml_string);\n        } catch (error) {\n            return reject(localize('Unrecognized file format'));\n        }\n\n        try {\n            const is_collection = xml.hasAttribute('collection') && xml.getAttribute('collection') === 'true';\n\n            if (!is_collection) {\n                reject(localize('Remote blocks to load must be a collection.'));\n            }\n\n            addLoaderBlocksFirst(xml)\n                .then(() => {\n                    Array.from(xml.children).forEach(el_block => addDomAsBlock(el_block, block));\n                    resolve();\n                })\n                .catch(() => {\n                    reject();\n                });\n        } catch (e) {\n            reject(localize('Unable to load the block file.'));\n        }\n    });\n};\n\nexport const loadBlocksFromRemote = block => {\n    // eslint-disable-next-line consistent-return\n    return new Promise((resolve, reject) => {\n        let url = block.getFieldValue('URL');\n\n        if (url.indexOf('http') === -1) {\n            url = `http://${url}`;\n        }\n\n        const url_pattern = /[^/]*\\.[a-zA-Z]{3}$/;\n        const has_possible_missing_index_xml = url.slice(-1)[0] === '/';\n\n        if (!url.match(url_pattern) && !has_possible_missing_index_xml) {\n            return reject(localize('Target must be an XML file'));\n        }\n\n        if (has_possible_missing_index_xml) {\n            url += 'index.xml';\n        }\n\n        if (block.isKnownUrl(url)) {\n            block.setDisabled(true);\n            return reject(localize('This URL is already loaded'));\n        }\n\n        const onFetchError = () => reject(localize('An error occured while trying to load the URL'));\n\n        fetch(url)\n            .then(response => {\n                if (response.ok) {\n                    response.text().then(xml_string => {\n                        loadBlocksFromHeader(xml_string, block)\n                            .then(() => resolve(block))\n                            .catch(onFetchError);\n                    });\n                } else {\n                    onFetchError();\n                }\n            })\n            .catch(onFetchError);\n    });\n};\n\nexport const addLoaderBlocksFirst = xml => {\n    return new Promise((resolve, reject) => {\n        const promises = [];\n\n        Array.from(xml.children).forEach(el_block => {\n            const block_type = el_block.getAttribute('type');\n\n            if (block_type === 'loader') {\n                el_block.remove();\n                const loader = Blockly.Xml.domToBlock(el_block, Blockly.derivWorkspace);\n                promises.push(loadBlocksFromRemote(loader)); // eslint-disable-line no-use-before-define\n            }\n        });\n\n        if (promises.length) {\n            Promise.all(promises).then(resolve, reject);\n        } else {\n            resolve([]);\n        }\n    });\n};\n\nexport const addDomAsBlock = (el_block, parent_block = null) => {\n    if (el_block.tagName.toLowerCase() === 'variables') {\n        return Blockly.Xml.domToVariables(el_block, Blockly.derivWorkspace);\n    }\n\n    const block_type = el_block.getAttribute('type');\n    const block_conversion = new BlockConversion();\n    const block_xml = Blockly.Xml.blockToDom(block_conversion.convertBlockNode(el_block));\n\n    // Fix legacy Blockly `varid` attribute.\n    Array.from(block_xml.getElementsByTagName('arg')).forEach(el => {\n        if (el.hasAttribute('varid')) {\n            el.setAttribute('varId', el.getAttribute('varid'));\n        }\n    });\n\n    removeLimitedBlocks(Blockly.derivWorkspace, block_type);\n\n    const block = Blockly.Xml.domToBlock(block_xml, Blockly.derivWorkspace);\n\n    if (parent_block) {\n        parent_block.blocks_added_by_me.push(block);\n    }\n\n    return block;\n};\n\nconst getAllRequiredBlocks = (workspace, required_block_types) => {\n    return workspace.getAllBlocks().filter(block => {\n        if (required_block_types.includes(block.type)) {\n            return (\n                (block.childBlocks_.length === 0 && required_block_types.includes(block.category_)) ||\n                block.parentBlock_ === null\n            );\n        }\n    });\n};\n\nconst getMissingBlocks = (workspace, required_block_types) => {\n    return required_block_types.filter(blockType => {\n        return !workspace.getAllBlocks().some(block => block.type === blockType);\n    });\n};\n\nconst getDisabledBlocks = required_blocks_check => {\n    return required_blocks_check.filter(block => {\n        const hasDisabledChild =\n            block.childBlocks_ && block.childBlocks_.some(childBlock => childBlock.disabled === true);\n        return block.disabled === true || hasDisabledChild;\n    });\n};\n\nconst throwNewErrorMessage = (error_blocks, key) => {\n    return error_blocks.forEach(block => {\n        if (key === 'misplaced' && block) globalObserver.emit('ui.log.error', error_message_map[block?.type]?.[key]);\n        else if (key === 'missing' && block) globalObserver.emit('ui.log.error', error_message_map[block]?.[key]);\n        else if (key === 'disabled' && block) {\n            let parent_block_error = false;\n            const parent_error_message = error_message_map[block.type]?.[key];\n            if (block.disabled && parent_error_message) {\n                globalObserver.emit('ui.log.error', parent_error_message);\n                parent_block_error = true;\n            } else if (!parent_block_error && block.childBlocks_) {\n                block.childBlocks_.forEach(childBlock => {\n                    const child_error_message = error_message_map[childBlock.type]?.[key];\n                    if (child_error_message) globalObserver.emit('ui.log.error', child_error_message);\n                });\n            }\n        }\n    });\n};\n\nexport const isAllRequiredBlocksEnabled = workspace => {\n    if (!workspace) return false;\n\n    const mandatory_trade_option_block = getSelectedTradeType(workspace);\n    const { mandatoryMainBlocks } = config;\n    const required_block_types = [mandatory_trade_option_block, ...mandatoryMainBlocks];\n\n    const required_blocks_check = getAllRequiredBlocks(workspace, required_block_types);\n\n    const missing_blocks = getMissingBlocks(workspace, required_block_types);\n    const disabled_blocks = getDisabledBlocks(required_blocks_check);\n\n    if (missing_blocks) throwNewErrorMessage(missing_blocks, 'missing');\n    if (disabled_blocks) throwNewErrorMessage(disabled_blocks, 'disabled');\n\n    const error_blocks = [...missing_blocks, ...disabled_blocks];\n    const blocks_required = error_blocks.length === 0;\n\n    return blocks_required;\n};\n\nexport const scrollWorkspace = (workspace, scroll_amount, is_horizontal, is_chronological) => {\n    const ws_metrics = workspace.getMetrics();\n\n    let scroll_x = ws_metrics.viewLeft - ws_metrics.contentLeft;\n    let scroll_y = ws_metrics.viewTop - ws_metrics.contentTop;\n\n    if (is_horizontal) {\n        scroll_x += is_chronological ? scroll_amount : -scroll_amount;\n        scroll_y += -20;\n    } else {\n        scroll_x += -20;\n        scroll_y += is_chronological ? scroll_amount : -scroll_amount;\n    }\n\n    workspace.scrollbar.set(scroll_x, scroll_y);\n};\n\n/**\n * Sets the Blockly.Events.group_ and executes the passed callBackFn. Mainly\n * used to ensure undo/redo actions are executed correctly.\n * @param {Boolean} use_existing_group Uses the existing event group if true.\n * @param {Function} callbackFn Logic to execute as part of this event group.\n */\nexport const runGroupedEvents = (use_existing_group, callbackFn, opt_group_name) => {\n    const group = (use_existing_group && Blockly.Events.getGroup()) || opt_group_name || true;\n\n    Blockly.Events.setGroup(group);\n    callbackFn();\n\n    if (!use_existing_group) {\n        Blockly.Events.setGroup(false);\n    }\n};\n\n/**\n * Sets the recordUndo flag to \"false\" globally, this will ensure any events\n * happening as part of the callbackFn logic cannot be undone.\n * @param {*} callbackFn Logic to execute as part of this event group.\n */\nexport const runIrreversibleEvents = callbackFn => {\n    const { recordUndo } = Blockly.Events;\n    Blockly.Events.recordUndo = false;\n\n    callbackFn();\n\n    Blockly.Events.recordUndo = recordUndo;\n};\n\n/**\n * Disables Blockly Events globally and runs the passed callbackFn.\n * (Preference should be given to runIrreversibleEvents).\n * @param {*} callbackFn Logic to completely hide from Blockly\n */\nexport const runInvisibleEvents = callbackFn => {\n    Blockly.Events.disable();\n    callbackFn();\n    Blockly.Events.enable();\n};\n\nexport const updateDisabledBlocks = (workspace, event) => {\n    if (event.type === Blockly.Events.END_DRAG) {\n        workspace.getAllBlocks().forEach(block => {\n            if (!block.getParent() || block.is_user_disabled_state) {\n                return;\n            }\n\n            const restricted_parents = block.restricted_parents || [];\n            if (restricted_parents.length === 0) {\n                return;\n            }\n\n            const should_disable = !restricted_parents.some(restricted_parent =>\n                block.isDescendantOf(restricted_parent)\n            );\n\n            runGroupedEvents(\n                true,\n                () => {\n                    block.setDisabled(should_disable);\n                },\n                event.group\n            );\n\n            Blockly.Events.setGroup(false);\n        });\n    }\n};\n\nexport const emptyTextValidator = input => {\n    return !input || input === \"''\";\n};\n\n/* eslint-disable no-bitwise */\nexport const isDarkRgbColour = string_rgb => {\n    const values = string_rgb.substring(1);\n    const rgb = parseInt(values, 16);\n    const red = (rgb >> 16) & 0xff;\n    const green = (rgb >> 8) & 0xff;\n    const blue = (rgb >> 0) & 0xff;\n    const luma = 0.2126 * red + 0.7152 * green + 0.0722 * blue;\n    return luma < 160;\n};\n/* eslint-enable */\n","import { localize } from '@deriv/translations';\nimport PendingPromise from '../../utils/pending-promise';\nimport { config } from '../../constants/config';\n\nexport default class ActiveSymbols {\n    constructor(ws, trading_times) {\n        this.active_symbols = [];\n        this.disabled_symbols = config.DISABLED_SYMBOLS;\n        this.disabled_submarkets = config.DISABLED_SUBMARKETS;\n        this.init_promise = new PendingPromise();\n        this.is_initialised = false;\n        this.processed_symbols = {};\n        this.trading_times = trading_times;\n        this.ws = ws;\n    }\n\n    async retrieveActiveSymbols(is_forced_update = false) {\n        await this.trading_times.initialise();\n\n        if (!is_forced_update && this.is_initialised) {\n            await this.init_promise;\n            return this.active_symbols;\n        }\n\n        this.is_initialised = true;\n\n        const { active_symbols } = await this.ws.authorized.activeSymbols();\n\n        this.active_symbols = active_symbols;\n        this.processed_symbols = this.processActiveSymbols();\n        this.trading_times.onMarketOpenCloseChanged = changes => {\n            Object.keys(changes).forEach(symbol_name => {\n                const symbol_obj = this.active_symbols[symbol_name];\n\n                if (symbol_obj) {\n                    symbol_obj.exchange_is_open = changes[symbol_name];\n                }\n            });\n\n            this.changes = changes;\n            this.processActiveSymbols();\n        };\n\n        this.init_promise.resolve();\n\n        return this.active_symbols;\n    }\n\n    processActiveSymbols() {\n        return this.active_symbols.reduce((processed_symbols, symbol) => {\n            if (\n                config.DISABLED_SYMBOLS.includes(symbol.symbol) ||\n                config.DISABLED_SUBMARKETS.includes(symbol.submarket)\n            ) {\n                return processed_symbols;\n            }\n\n            const isExistingValue = (object, prop) => Object.keys(object).findIndex(a => a === symbol[prop]) !== -1;\n\n            if (!isExistingValue(processed_symbols, 'market')) {\n                processed_symbols[symbol.market] = {\n                    display_name: symbol.market_display_name,\n                    submarkets: {},\n                };\n            }\n\n            const { submarkets } = processed_symbols[symbol.market];\n\n            if (!isExistingValue(submarkets, 'submarket')) {\n                submarkets[symbol.submarket] = {\n                    display_name: symbol.submarket_display_name,\n                    symbols: {},\n                };\n            }\n\n            const { symbols } = submarkets[symbol.submarket];\n\n            if (!isExistingValue(symbols, 'symbol')) {\n                symbols[symbol.symbol] = {\n                    display_name: symbol.display_name,\n                    pip_size: `${symbol.pip}`.length - 2,\n                    is_active: !symbol.is_trading_suspended && symbol.exchange_is_open,\n                };\n            }\n\n            return processed_symbols;\n        }, {});\n    }\n\n    /**\n     * Retrieves all symbols and returns an array of symbol objects consisting of symbol and their linked market + submarket.\n     * @returns {Array} Symbols and their submarkets + markets.\n     */\n    getAllSymbols(should_be_open = false) {\n        const all_symbols = [];\n\n        Object.keys(this.processed_symbols).forEach(market_name => {\n            if (should_be_open && this.isMarketClosed(market_name)) {\n                return;\n            }\n\n            const market = this.processed_symbols[market_name];\n            const { submarkets } = market;\n\n            Object.keys(submarkets).forEach(submarket_name => {\n                const submarket = submarkets[submarket_name];\n                const { symbols } = submarket;\n\n                Object.keys(symbols).forEach(symbol_name => {\n                    const symbol = symbols[symbol_name];\n\n                    all_symbols.push({\n                        market: market_name,\n                        market_display: market.display_name,\n                        submarket: submarket_name,\n                        submarket_display: submarket.display_name,\n                        symbol: symbol_name,\n                        symbol_display: symbol.display_name,\n                    });\n                });\n            });\n        });\n        this.getSymbolsForBot();\n        return all_symbols;\n    }\n\n    /**\n     *\n     * @returns {Array} Symbols and their submarkets + markets for deriv-bot\n     */\n    getSymbolsForBot() {\n        const { DISABLED } = config.QUICK_STRATEGY;\n        const symbols_for_bot = [];\n        Object.keys(this.processed_symbols).forEach(market_name => {\n            if (this.isMarketClosed(market_name)) return;\n\n            const market = this.processed_symbols[market_name];\n            const { submarkets } = market;\n\n            Object.keys(submarkets).forEach(submarket_name => {\n                if (DISABLED.SUBMARKETS.includes(submarket_name)) return;\n                const submarket = submarkets[submarket_name];\n                const { symbols } = submarket;\n\n                Object.keys(symbols).forEach(symbol_name => {\n                    if (DISABLED.SYMBOLS.includes(symbol_name)) return;\n                    const symbol = symbols[symbol_name];\n                    symbols_for_bot.push({\n                        group: submarket.display_name,\n                        text: symbol.display_name,\n                        value: symbol_name,\n                    });\n                });\n            });\n        });\n\n        return symbols_for_bot;\n    }\n\n    getMarketDropdownOptions() {\n        const market_options = [];\n\n        Object.keys(this.processed_symbols).forEach(market_name => {\n            const { display_name } = this.processed_symbols[market_name];\n            const market_display_name =\n                display_name + (this.isMarketClosed(market_name) ? ` ${localize('(Closed)')}` : '');\n            market_options.push([market_display_name, market_name]);\n        });\n\n        if (market_options.length === 0) {\n            return config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n        }\n        market_options.sort(a => (a[1] === 'synthetic_index' ? -1 : 1));\n\n        const has_closed_markets = market_options.some(market_option => this.isMarketClosed(market_option[1]));\n\n        if (has_closed_markets) {\n            const sorted_options = this.sortDropdownOptions(market_options, this.isMarketClosed);\n\n            if (this.isMarketClosed('forex')) {\n                return sorted_options.sort(a => (a[1] === 'synthetic_index' ? -1 : 1));\n            }\n\n            return sorted_options;\n        }\n\n        return market_options;\n    }\n\n    getSubmarketDropdownOptions(market) {\n        const submarket_options = [];\n        const market_obj = this.processed_symbols[market];\n\n        if (market_obj) {\n            const { submarkets } = market_obj;\n\n            Object.keys(submarkets).forEach(submarket_name => {\n                const { display_name } = submarkets[submarket_name];\n                const submarket_display_name =\n                    display_name + (this.isSubmarketClosed(submarket_name) ? ` ${localize('(Closed)')}` : '');\n                submarket_options.push([submarket_display_name, submarket_name]);\n            });\n        }\n\n        if (submarket_options.length === 0) {\n            return config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n        }\n        if (market === 'synthetic_index') {\n            submarket_options.sort(a => (a[1] === 'random_index' ? -1 : 1));\n        }\n\n        return this.sortDropdownOptions(submarket_options, this.isSubmarketClosed);\n    }\n\n    getSymbolDropdownOptions(submarket) {\n        const symbol_options = Object.keys(this.processed_symbols).reduce((accumulator, market_name) => {\n            const { submarkets } = this.processed_symbols[market_name];\n\n            Object.keys(submarkets).forEach(submarket_name => {\n                if (submarket_name === submarket) {\n                    const { symbols } = submarkets[submarket_name];\n                    Object.keys(symbols).forEach(symbol_name => {\n                        const { display_name } = symbols[symbol_name];\n                        const symbol_display_name =\n                            display_name + (this.isSymbolClosed(symbol_name) ? ` ${localize('(Closed)')}` : '');\n                        accumulator.push([symbol_display_name, symbol_name]);\n                    });\n                }\n            });\n\n            return accumulator;\n        }, []);\n\n        if (symbol_options.length === 0) {\n            return config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n        }\n\n        return this.sortDropdownOptions(symbol_options, this.isSymbolClosed);\n    }\n\n    isMarketClosed(market_name) {\n        const market = this.processed_symbols[market_name];\n\n        if (!market) {\n            return true;\n        }\n\n        return Object.keys(market.submarkets).every(submarket_name => this.isSubmarketClosed(submarket_name));\n    }\n\n    isSubmarketClosed(submarket_name) {\n        const market_name = Object.keys(this.processed_symbols).find(name => {\n            const market = this.processed_symbols[name];\n            return Object.keys(market.submarkets).includes(submarket_name);\n        });\n\n        if (!market_name) {\n            return true;\n        }\n\n        const market = this.processed_symbols[market_name];\n        const submarket = market.submarkets[submarket_name];\n\n        if (!submarket) {\n            return true;\n        }\n\n        const { symbols } = submarket;\n        return Object.keys(symbols).every(symbol_name => this.isSymbolClosed(symbol_name));\n    }\n\n    isSymbolClosed(symbol_name) {\n        return this.active_symbols.some(\n            active_symbol =>\n                active_symbol.symbol === symbol_name &&\n                (!active_symbol.exchange_is_open || active_symbol.is_trading_suspended)\n        );\n    }\n\n    sortDropdownOptions = (dropdown_options, closedFunc) => {\n        const options = [...dropdown_options];\n\n        options.sort((a, b) => {\n            const is_a_closed = closedFunc.call(this, a[1]);\n            const is_b_closed = closedFunc.call(this, b[1]);\n\n            if (is_a_closed && !is_b_closed) {\n                return 1;\n            } else if (is_a_closed === is_b_closed) {\n                return 0;\n            }\n            return -1;\n        });\n\n        return options;\n    };\n}\n","import { datadogLogs } from '@datadog/browser-logs';\nimport { formatDate, formatTime } from '@deriv/shared';\n\nconst DATADOG_CLIENT_TOKEN_LOGS = process.env.DATADOG_CLIENT_TOKEN_LOGS ?? '';\nconst isProduction = process.env.NODE_ENV === 'production';\nconst isStaging = process.env.NODE_ENV === 'staging';\nlet dataDogSessionSampleRate = 0;\n\ndataDogSessionSampleRate = +process.env.DATADOG_SESSION_SAMPLE_RATE_LOGS ?? 1;\nlet dataDogVersion = '';\nlet dataDogEnv = '';\n\nif (isProduction) {\n    dataDogVersion = `deriv-app-${process.env.REF_NAME}`;\n    dataDogEnv = 'production';\n} else if (isStaging) {\n    dataDogVersion = `deriv-app-staging-v${formatDate(new Date(), 'YYYYMMDD')}-${formatTime(Date.now(), 'HH:mm')}`;\n    dataDogEnv = 'staging';\n}\n\nif (DATADOG_CLIENT_TOKEN_LOGS) {\n    datadogLogs.init({\n        clientToken: DATADOG_CLIENT_TOKEN_LOGS,\n        site: 'datadoghq.com',\n        forwardErrorsToLogs: false,\n        service: 'Dbot',\n        sessionSampleRate: dataDogSessionSampleRate,\n        version: dataDogVersion,\n        env: dataDogEnv,\n    });\n}\n\nexport const REQUESTS = [\n    'active_symbols',\n    'authorize',\n    'balance',\n    'buy',\n    'proposal',\n    'proposal_open_contract',\n    'run_proposal_or_direct_buy',\n    'transaction',\n    'ticks_history',\n    'history',\n];\n\nclass APIMiddleware {\n    constructor(config) {\n        this.config = config;\n        this.debounced_calls = {};\n        this.addGlobalMethod();\n    }\n\n    getRequestType = request => {\n        let req_type;\n        REQUESTS.forEach(type => {\n            if (type in request && !req_type) req_type = type;\n        });\n\n        return req_type;\n    };\n\n    log = (measures = [], is_bot_running) => {\n        if (measures && measures.length) {\n            measures.forEach(measure => {\n                datadogLogs.logger.info(measure.name, {\n                    name: measure.name,\n                    startTime: measure.startTimeDate,\n                    duration: measure.duration,\n                    detail: measure.detail,\n                    isBotRunning: is_bot_running,\n                });\n            });\n        }\n    };\n\n    defineMeasure = res_type => {\n        if (res_type) {\n            let measure;\n            if (res_type === 'history') {\n                performance.mark('ticks_history_end');\n                measure = performance.measure('ticks_history', 'ticks_history_start', 'ticks_history_end');\n            } else {\n                performance.mark(`${res_type}_end`);\n                measure = performance.measure(`${res_type}`, `${res_type}_start`, `${res_type}_end`);\n            }\n            return (measure.startTimeDate = new Date(Date.now() - measure.startTime));\n        }\n        return false;\n    };\n\n    sendWillBeCalled({ args: [request] }) {\n        const req_type = this.getRequestType(request);\n        if (req_type === 'buy') {\n            performance.mark('first_proposal_or_run_end');\n            if (performance.getEntriesByName('bot-start', 'mark').length) {\n                performance.measure('run_proposal_or_direct_buy', 'bot-start', 'first_proposal_or_run_end');\n                performance.clearMarks('bot-start');\n            }\n        }\n    }\n\n    sendIsCalled = ({ response_promise, args: [request] }) => {\n        const req_type = this.getRequestType(request);\n        if (req_type) performance.mark(`${req_type}_start`);\n        response_promise\n            .then(res => {\n                const res_type = this.getRequestType(res);\n                if (res_type) {\n                    this.defineMeasure(res_type);\n                }\n            })\n            .catch(() => {});\n        return response_promise;\n    };\n\n    sendRequestsStatistic = is_bot_running => {\n        REQUESTS.forEach(req_type => {\n            const measure = performance.getEntriesByName(req_type);\n            if (measure && measure.length) {\n                if (process.env.DATADOG_CLIENT_TOKEN_LOGS) {\n                    this.log(measure, is_bot_running, req_type);\n                }\n            }\n        });\n        performance.clearMeasures();\n    };\n\n    addGlobalMethod() {\n        if (window) window.sendRequestsStatistic = this.sendRequestsStatistic;\n    }\n}\n\nexport default APIMiddleware;\n","import DerivAPIBasic from '@deriv/deriv-api/dist/DerivAPIBasic';\nimport { getAppId, getSocketURL, website_name } from '@deriv/shared';\nimport { getLanguage } from '@deriv/translations';\nimport APIMiddleware from './api-middleware';\n\nexport const generateDerivApiInstance = () => {\n    const socket_url = `wss://${getSocketURL()}/websockets/v3?app_id=${getAppId()}&l=${getLanguage()}&brand=${website_name.toLowerCase()}`;\n    const deriv_socket = new WebSocket(socket_url);\n    const deriv_api = new DerivAPIBasic({\n        connection: deriv_socket,\n        middleware: new APIMiddleware({}),\n    });\n    return deriv_api;\n};\n\nexport const getLoginId = () => {\n    const login_id = localStorage.getItem('active_loginid');\n    if (login_id && login_id !== 'null') return login_id;\n    return null;\n};\n\nexport const getToken = () => {\n    const active_loginid = getLoginId();\n    const client_accounts = JSON.parse(localStorage.getItem('client.accounts')) || undefined;\n    const active_account = (client_accounts && client_accounts[active_loginid]) || {};\n    return {\n        token: active_account?.token || undefined,\n        account_id: active_loginid || undefined,\n    };\n};\n","import { observer as globalObserver } from '../../utils/observer';\nimport { doUntilDone, socket_state } from '../tradeEngine/utils/helpers';\nimport { generateDerivApiInstance, getLoginId, getToken } from './appId';\n\nclass APIBase {\n    api;\n    token;\n    account_id;\n    pip_sizes = {};\n    account_info = {};\n    is_running = false;\n    subscriptions = [];\n    time_interval = null;\n    has_activeSymbols = false;\n\n    init(force_update = false) {\n        if (getLoginId()) {\n            this.toggleRunButton(true);\n            if (force_update) this.terminate();\n            this.api = generateDerivApiInstance();\n            this.initEventListeners();\n            this.authorizeAndSubscribe();\n            if (this.time_interval) clearInterval(this.time_interval);\n            this.time_interval = null;\n            this.getTime();\n        }\n    }\n\n    getConnectionStatus() {\n        if (this.api?.connection) {\n            const ready_state = this.api.connection.readyState;\n            return socket_state[ready_state] || 'Unknown';\n        }\n        return 'Socket not initialized';\n    }\n\n    terminate() {\n        // eslint-disable-next-line no-console\n        console.log('connection terminated');\n        if (this.api) this.api.disconnect();\n    }\n\n    initEventListeners() {\n        if (window) {\n            window.addEventListener('online', this.reconnectIfNotConnected);\n            window.addEventListener('focus', this.reconnectIfNotConnected);\n        }\n    }\n\n    createNewInstance(account_id) {\n        if (this.account_id !== account_id) {\n            this.init(true);\n        }\n    }\n\n    reconnectIfNotConnected = () => {\n        // eslint-disable-next-line no-console\n        console.log('connection state: ', this.api.connection.readyState);\n        if (this.api.connection.readyState !== 1) {\n            // eslint-disable-next-line no-console\n            console.log('Info: Connection to the server was closed, trying to reconnect.');\n            this.init();\n        }\n    };\n\n    authorizeAndSubscribe() {\n        const { token, account_id } = getToken();\n        if (token) {\n            this.token = token;\n            this.account_id = account_id;\n            this.api.authorize(this.token);\n            this.api\n                .expectResponse('authorize')\n                .then(({ authorize }) => {\n                    if (this.has_activeSymbols) {\n                        this.toggleRunButton(false);\n                    } else {\n                        this.getActiveSymbols();\n                    }\n                    this.subscribe();\n                    this.account_info = authorize;\n                })\n                .catch(e => {\n                    globalObserver.emit('Error', e);\n                });\n        }\n    }\n\n    subscribe() {\n        doUntilDone(() => this.api.send({ balance: 1, subscribe: 1 }));\n        doUntilDone(() => this.api.send({ transaction: 1, subscribe: 1 }));\n        doUntilDone(() => this.api.send({ proposal_open_contract: 1, subscribe: 1 }));\n    }\n\n    getActiveSymbols = async () => {\n        doUntilDone(() => this.api.send({ active_symbols: 'brief' })).then(({ active_symbols = [] }) => {\n            const pip_sizes = {};\n            if (active_symbols.length) this.has_activeSymbols = true;\n            active_symbols.forEach(({ symbol, pip }) => {\n                pip_sizes[symbol] = +(+pip).toExponential().substring(3);\n            });\n            this.pip_sizes = pip_sizes;\n            this.toggleRunButton(false);\n        });\n    };\n\n    toggleRunButton = toggle => {\n        const run_button = document.querySelector('#db-animation__run-button');\n        if (!run_button) return;\n        run_button.disabled = toggle;\n    };\n\n    setIsRunning(toggle = false) {\n        this.is_running = toggle;\n    }\n\n    pushSubscription(subscription) {\n        this.subscriptions.push(subscription);\n    }\n\n    clearSubscriptions() {\n        this.subscriptions.forEach(s => s.unsubscribe());\n        this.subscriptions = [];\n\n        // Resetting timeout resolvers\n        const global_timeouts = globalObserver.getState('global_timeouts') ?? [];\n\n        global_timeouts.forEach((_, i) => {\n            clearTimeout(i);\n        });\n    }\n\n    getTime() {\n        if (!this.time_interval) {\n            this.time_interval = setInterval(() => {\n                this.api.send({ time: 1 });\n            }, 30000);\n        }\n    }\n}\n\nexport const api_base = new APIBase();\n","export default class AccountLimits {\n    constructor(store) {\n        this.ws = store.ws;\n    }\n    getStakePayoutLimits(currency = 'AUD', landing_company_shortcode = 'svg', selected_market) {\n        return this.ws\n            .send({\n                landing_company_details: landing_company_shortcode,\n            })\n            .then(landing_company => {\n                const currency_config = landing_company?.landing_company_details?.currency_config[selected_market];\n                return currency_config ? currency_config[currency] : {};\n            });\n    }\n}\n","import TradingTimes from './trading-times';\nimport ContractsFor from './contracts-for';\nimport ActiveSymbols from './active-symbols';\nimport AccountLimits from './account-limits';\n\nclass ApiHelpers {\n    static singleton = null;\n\n    constructor(api_helpers_store) {\n        this.trading_times = new TradingTimes(api_helpers_store);\n        this.contracts_for = new ContractsFor(api_helpers_store);\n        this.active_symbols = new ActiveSymbols(api_helpers_store.ws, this.trading_times);\n        this.account_limits = new AccountLimits(api_helpers_store);\n    }\n\n    static setInstance(api_helpers_store) {\n        if (!this.singleton) {\n            this.singleton = new ApiHelpers(api_helpers_store);\n        }\n\n        return this.instance;\n    }\n\n    static get instance() {\n        return this.singleton;\n    }\n}\n\nexport default ApiHelpers;\n","import { config } from '../../constants/config';\nimport PendingPromise from '../../utils/pending-promise';\n\nexport default class ContractsFor {\n    constructor({ ws, server_time }) {\n        this.cache_age_in_min = 10;\n        this.contracts_for = {};\n        this.ws = ws;\n        this.server_time = server_time;\n        // Below you can disable specific trade types and trade type categories, you may specify\n        // market, submarket, symbol, trade_type, and trade_type_category. If one of\n        // the props is left omitted, the rule applies to each of the values of the omitted prop.\n        // e.g. if market omitted, rule will apply to all markets.\n        this.disabled_options = [\n            {\n                submarket: 'forex_basket',\n                trade_type: 'higherlower',\n            },\n            {\n                submarket: 'minor_pairs',\n                trade_type: 'higherlower',\n            },\n            {\n                submarket: 'metals',\n                trade_type: 'callputequal',\n            },\n            {\n                market: 'indices',\n                trade_type: 'callputequal',\n            },\n            {\n                symbol: 'OTC_AS51',\n                trade_type_category: 'inout',\n            },\n            { trade_type_category: 'lookback' },\n            { trade_type_category: 'callputspread' },\n        ];\n        this.retrieving_contracts_for = {};\n    }\n\n    async getBarriers(symbol, trade_type, duration, barrier_types) {\n        const barriers = { values: [] };\n\n        if (!config.BARRIER_TRADE_TYPES.includes(trade_type)) {\n            return barriers;\n        }\n\n        const barrier_props = ['high_barrier', 'low_barrier'];\n        const contracts_for_category = await this.getContractsByTradeType(symbol, trade_type);\n        const durations = await this.getDurations(symbol, trade_type, false);\n        const offset_regexp = new RegExp('^[-|+]([0-9]+.[0-9]+)$');\n        const isOffset = input => input && offset_regexp.test(input.toString());\n\n        let has_absolute_default_value = true;\n\n        if (contracts_for_category.length > 0) {\n            barrier_types.forEach((barrier_type, index) => {\n                const has_selected_offset_type = ['+', '-'].includes(barrier_type);\n                const real_trade_type = this.getContractCategoryByTradeType(trade_type);\n\n                let contract = contracts_for_category.find(c => {\n                    const { BARRIER_CATEGORIES } = config;\n                    const barrier_category = Object.keys(BARRIER_CATEGORIES).find(b =>\n                        BARRIER_CATEGORIES[b].includes(trade_type)\n                    );\n\n                    const has_matching_category = c.contract_category === real_trade_type;\n                    const has_matching_duration = durations.findIndex(d => d.unit === duration) !== -1;\n                    const has_matching_barrier_category = c.barrier_category === barrier_category;\n                    const has_matching_barrier_type =\n                        // Match offset type barriers.\n                        (has_selected_offset_type && isOffset(c.barrier || c[barrier_props[index]])) ||\n                        // Match absolute type barriers.\n                        (!has_selected_offset_type && !isOffset(c.barrier || c[barrier_props[index]]));\n\n                    return (\n                        has_matching_category &&\n                        has_matching_duration &&\n                        has_matching_barrier_category &&\n                        has_matching_barrier_type\n                    );\n                });\n\n                // Fallback to smallest available barriers if no contract could be found.\n                if (!contract) {\n                    contract = contracts_for_category\n                        // Retrieve contracts with barriers.\n                        .filter(c => c.barrier || c.high_barrier)\n                        // Get contract with smallest barriers.\n                        .sort((a, b) => {\n                            const c = a.barrier || a.high_barrier;\n                            const d = b.barrier || b.high_barrier;\n                            return parseFloat(c) - parseFloat(d);\n                        })\n                        .shift();\n\n                    if (contract && !has_selected_offset_type) {\n                        has_absolute_default_value = false;\n                    }\n                }\n\n                if (contract) {\n                    const barrier_prop_name = contract.barriers === 1 ? 'barrier' : barrier_props[index];\n\n                    if (contract[barrier_prop_name]) {\n                        const barrier_match = `${contract[barrier_prop_name]}`.match(offset_regexp);\n                        barriers.values[index] = barrier_match ? barrier_match[1] : contract[barrier_prop_name];\n                    }\n\n                    Object.assign(barriers, {\n                        allow_both_types:\n                            ['intraday', 'tick'].includes(contract.expiry_type) &&\n                            isOffset(contract[barrier_prop_name]),\n                        allow_absolute_type: barrier_type === 'absolute' && !isOffset(contract[barrier_prop_name]),\n                    });\n\n                    // Finish this loop prematurely if we only have a single barrier.\n                    if (contract.barriers === 1) {\n                        barrier_types.splice(index + 1, 1);\n                    }\n                }\n            });\n\n            if (!has_absolute_default_value) {\n                barriers.values = barriers.values.map(() => false);\n            } else if (\n                barriers.values.length === 2 &&\n                barrier_types.every(barrier_type => barrier_type === barrier_types[0]) &&\n                barriers.values.every(barrier => barrier === barriers.values[0])\n            ) {\n                barriers.values[1] = (barriers.values[0] * 0.95).toFixed(1);\n            }\n        }\n\n        return barriers;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getContractCategoryByTradeType(trade_type) {\n        const { TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING } = config;\n\n        return (\n            Object.keys(TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING).find(category =>\n                TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING[category].includes(trade_type)\n            ) || trade_type\n        );\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getTradeTypeCategoryByTradeType(trade_type) {\n        const { TRADE_TYPE_CATEGORIES } = config;\n        const trade_type_category = Object.keys(TRADE_TYPE_CATEGORIES).find(t =>\n            TRADE_TYPE_CATEGORIES[t].includes(trade_type)\n        );\n\n        return trade_type_category || trade_type;\n    }\n\n    getTradeTypeCategoryNameByTradeType(trade_type) {\n        const { TRADE_TYPE_CATEGORY_NAMES } = config;\n        const trade_type_category = this.getTradeTypeCategoryByTradeType(trade_type);\n\n        return TRADE_TYPE_CATEGORY_NAMES[trade_type_category];\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getBarrierCategoryByTradeType(trade_type) {\n        const { BARRIER_CATEGORIES } = config;\n        return Object.keys(BARRIER_CATEGORIES).find(barrier_category =>\n            BARRIER_CATEGORIES[barrier_category].includes(trade_type)\n        );\n    }\n\n    async getContractsByTradeType(symbol, trade_type) {\n        const contracts = await this.getContractsFor(symbol);\n        const contract_category = this.getContractCategoryByTradeType(trade_type);\n        const barrier_category = this.getBarrierCategoryByTradeType(trade_type);\n\n        return contracts.filter(contract => {\n            const has_matching_category = contract.contract_category === contract_category;\n            const has_matching_barrier = contract.barrier_category === barrier_category;\n\n            return has_matching_category && has_matching_barrier;\n        });\n    }\n\n    async getContractsFor(symbol) {\n        if (!symbol || symbol === 'na') {\n            return [];\n        }\n\n        const getContractsForFromApi = async () => {\n            if (this.retrieving_contracts_for[symbol]) {\n                await this.retrieving_contracts_for[symbol];\n                return this.contracts_for[symbol].contracts;\n            }\n\n            this.retrieving_contracts_for[symbol] = new PendingPromise();\n            const response = await this.ws.send({ contracts_for: symbol });\n\n            if (response.error) {\n                return [];\n            }\n\n            const {\n                contracts_for: { available: contracts },\n            } = response;\n\n            // We don't offer forward-starting contracts in bot.\n            const filtered_contracts = contracts.filter(c => c.start_type !== 'forward');\n\n            this.contracts_for[symbol] = {\n                contracts: filtered_contracts,\n                timestamp: this.server_time.unix(),\n            };\n\n            this.retrieving_contracts_for[symbol].resolve();\n            delete this.retrieving_contracts_for[symbol];\n\n            return filtered_contracts;\n        };\n\n        if (this.contracts_for[symbol]) {\n            const { contracts, timestamp } = this.contracts_for[symbol];\n            const is_expired = this.server_time.unix() - timestamp > this.cache_age_in_min * 60;\n\n            if (is_expired) {\n                getContractsForFromApi();\n            }\n\n            return contracts;\n        }\n\n        return getContractsForFromApi();\n    }\n\n    async getDurations(symbol, trade_type, convert_day_to_hours = true) {\n        if (trade_type === 'multiplier') {\n            return [];\n        }\n\n        const contracts = await this.getContractsFor(symbol);\n        const { NOT_AVAILABLE_DURATIONS, DEFAULT_DURATION_DROPDOWN_OPTIONS } = config;\n\n        if (contracts.length === 0) {\n            return NOT_AVAILABLE_DURATIONS;\n        }\n\n        const contracts_for_category = await this.getContractsByTradeType(symbol, trade_type);\n        const durations = [];\n        const getDurationIndex = input =>\n            DEFAULT_DURATION_DROPDOWN_OPTIONS.findIndex(d => d[1] === input.replace(/\\d+/g, ''));\n        // convert 'duration' to 'unit_to_convert' e.g : convertDuration('10h', 's') will return 10*60*60s\n        const convertDuration = (duration, unit_to_convert) => {\n            const duration_value = duration.replace(/\\D/g, '');\n            const duration_index = getDurationIndex(duration);\n            const target_index = DEFAULT_DURATION_DROPDOWN_OPTIONS.findIndex(\n                default_duration => default_duration[1] === unit_to_convert\n            );\n\n            let converted_duration = parseInt(duration_value);\n\n            DEFAULT_DURATION_DROPDOWN_OPTIONS.slice(target_index + 1, duration_index + 1)\n                .reverse()\n                .forEach(default_duration => {\n                    switch (default_duration[1]) {\n                        case 'm':\n                        case 'h':\n                            converted_duration *= 60;\n                            break;\n                        case 'd':\n                            converted_duration *= 24;\n                            break;\n                        default:\n                            break;\n                    }\n                });\n\n            return converted_duration;\n        };\n\n        contracts_for_category.forEach(contract => {\n            if (!contract.min_contract_duration || !contract.max_contract_duration) {\n                return;\n            }\n\n            const start_index = getDurationIndex(contract.min_contract_duration);\n            const end_index = getDurationIndex(\n                contract.max_contract_duration === '1d' && convert_day_to_hours ? '24h' : contract.max_contract_duration\n            );\n\n            DEFAULT_DURATION_DROPDOWN_OPTIONS.slice(start_index, end_index + 1).forEach((default_duration, index) => {\n                const is_existing_duration = durations.findIndex(d => d.unit === default_duration[1]) !== -1;\n\n                if (!is_existing_duration) {\n                    durations.push({\n                        display: default_duration[0],\n                        unit: default_duration[1],\n                        min: index === 0 ? parseInt(contract.min_contract_duration.replace(/\\D/g, '')) : 1,\n                        max: convertDuration(contract.max_contract_duration, default_duration[1]),\n                    });\n                }\n            });\n        });\n\n        // If only intraday contracts available, remove day durations\n        if (contracts_for_category.every(contract => contract.expiry_type === 'intraday')) {\n            const day_duration_index = durations.findIndex(d => d[1] === 'd');\n\n            if (day_duration_index !== -1) {\n                durations.splice(day_duration_index, 1);\n            }\n        }\n\n        if (durations.length === 0) {\n            return NOT_AVAILABLE_DURATIONS;\n        }\n\n        // Maintain order based on duration unit\n        return durations.sort((a, b) => getDurationIndex(a.unit) - getDurationIndex(b.unit));\n    }\n\n    async getPredictionRange(symbol, trade_type) {\n        const contracts = await this.getContractsByTradeType(symbol, trade_type);\n        const contract_category = this.getContractCategoryByTradeType(trade_type);\n        const prediction_range = [];\n        const { DIGIT_CATEGORIES, opposites } = config;\n\n        if (DIGIT_CATEGORIES.includes(contract_category) && trade_type !== 'evenodd') {\n            const contract = contracts.find(c => {\n                const categories = Object.keys(opposites);\n\n                return categories.some(category =>\n                    opposites[category].map(subcategory => Object.keys(subcategory)[0]).includes(c.contract_type)\n                );\n            });\n\n            if (contract && contract.last_digit_range) {\n                prediction_range.push(...contract.last_digit_range);\n            } else {\n                prediction_range.push(1, 2, 3, 4, 5, 6, 7, 8);\n            }\n        }\n\n        return prediction_range;\n    }\n\n    async getMultiplierRange(symbol, trade_type) {\n        const contracts = await this.getContractsByTradeType(symbol, trade_type);\n        const multiplier_range = [];\n        const { opposites } = config;\n\n        const contract = contracts.find(c => {\n            return Object.keys(opposites).some(category => {\n                return opposites[category].map(subcategory => Object.keys(subcategory)[0]).includes(c.contract_type);\n            });\n        });\n\n        if (contract?.multiplier_range) {\n            multiplier_range.push(...contract.multiplier_range);\n        }\n\n        return multiplier_range;\n    }\n\n    async getMarketBySymbol(symbol) {\n        const contracts = await this.getContractsFor(symbol);\n\n        if (!contracts.length) {\n            return 'na';\n        }\n\n        return contracts[0].market;\n    }\n\n    async getSubmarketBySymbol(symbol) {\n        const contracts = await this.getContractsFor(symbol);\n\n        if (!contracts.length) {\n            return 'na';\n        }\n\n        return contracts[0].submarket;\n    }\n\n    async getGroupedTradeTypes(symbol) {\n        const contracts = await this.getContractsFor(symbol);\n        const trade_type_options = {};\n\n        for (let i = 0; i < contracts.length; i++) {\n            const market = contracts[i].market;\n            const submarket = contracts[i].submarket;\n            const trade_type_category = this.getTradeTypeCategoryByTradeType(contracts[i].contract_category);\n            const trade_type_category_name = this.getTradeTypeCategoryNameByTradeType(contracts[i].contract_category);\n            // eslint-disable-next-line no-await-in-loop\n            const trade_types = await this.getTradeTypeByTradeCategory(market, submarket, symbol, trade_type_category);\n\n            if (trade_type_category_name) {\n                const is_disabled = this.isDisabledOption({\n                    market,\n                    submarket,\n                    symbol,\n                    trade_type_category,\n                });\n\n                if (!is_disabled) {\n                    trade_type_options[trade_type_category_name] = trade_types;\n                }\n            }\n        }\n\n        return trade_type_options;\n    }\n\n    async getTradeTypeByTradeCategory(market, submarket, symbol, trade_type_category) {\n        const { NOT_AVAILABLE_DURATIONS, TRADE_TYPE_CATEGORIES, opposites } = config;\n        const subcategories = TRADE_TYPE_CATEGORIES[trade_type_category];\n        const dropdown_options = [];\n\n        if (subcategories && subcategories.length) {\n            for (let i = 0; i < subcategories.length; i++) {\n                const trade_type = subcategories[i];\n                const durations = await this.getDurations(symbol, trade_type); // eslint-disable-line no-await-in-loop\n                const has_durations = JSON.stringify(durations) !== JSON.stringify(NOT_AVAILABLE_DURATIONS);\n                const is_disabled = this.isDisabledOption({\n                    market,\n                    submarket,\n                    symbol,\n                    trade_type_category,\n                    trade_type,\n                });\n\n                if (!is_disabled && has_durations) {\n                    const types = opposites[trade_type.toUpperCase()];\n                    dropdown_options.push({\n                        name: types.map(type => type[Object.keys(type)[0]]).join('/'),\n                        value: trade_type,\n                        icon: [Object.keys(types[0])[0], Object.keys(types[1])[0]],\n                    });\n                }\n            }\n        }\n\n        return dropdown_options;\n    }\n\n    getHiddenCategories = trade_types => {\n        // TODO: Temporary filtering of barrier + prediction types. Should later\n        // render more inputs for these types. We should only filter out trade type\n        // categories which only feature prediction/barrier trade types. e.g.\n        // in Digits category, users can still purchase Even/Odd types.\n        let hidden_categories = 0;\n\n        for (let j = 0; j < trade_types.length; j++) {\n            const trade_type = trade_types[j];\n            const has_barrier = config.BARRIER_TRADE_TYPES.includes(trade_type.value);\n            const has_prediction = config.PREDICTION_TRADE_TYPES.includes(trade_type.value);\n\n            if (has_barrier || has_prediction) {\n                hidden_categories++;\n            }\n        }\n\n        return hidden_categories;\n    };\n\n    getTradeTypeOptions = (trade_types, trade_type_category) => {\n        const trade_type_options = [];\n        trade_types.forEach(trade_type => {\n            const has_barrier = config.BARRIER_TRADE_TYPES.includes(trade_type.value);\n            const has_prediction = config.PREDICTION_TRADE_TYPES.includes(trade_type.value);\n            const is_muliplier = ['multiplier'].includes(trade_type.value);\n\n            // TODO: Render extra inputs for barrier + prediction and multiplier types.\n            if (!has_barrier && !has_prediction && !is_muliplier) {\n                trade_type_options.push({\n                    text: trade_type.name,\n                    value: trade_type.value,\n                    group: trade_type_category[0],\n                    icon: trade_type.icon,\n                });\n            }\n        });\n        return trade_type_options;\n    };\n\n    async getTradeTypesForQuickStrategy(symbol) {\n        const trade_type_options = [];\n        const filtered_trade_type_categories = [];\n        const market = await this.getMarketBySymbol(symbol);\n        const submarket = await this.getSubmarketBySymbol(symbol);\n        const trade_type_categories = await this.getTradeTypeCategories(market, submarket, symbol);\n\n        for (let i = 0; i < trade_type_categories.length; i++) {\n            const trade_type_category = trade_type_categories[i];\n            // eslint-disable-next-line no-await-in-loop\n            const trade_types = await this.getTradeTypeByTradeCategory(\n                market,\n                submarket,\n                symbol,\n                trade_type_category[1]\n            );\n\n            const hidden_categories = this.getHiddenCategories(trade_types);\n\n            if (hidden_categories < trade_types.length) {\n                filtered_trade_type_categories.push(trade_type_category);\n            }\n        }\n\n        for (let i = 0; i < filtered_trade_type_categories.length; i++) {\n            const trade_type_category = filtered_trade_type_categories[i]; // e.g. ['Up/Down', 'callput']\n            // eslint-disable-next-line no-await-in-loop\n            const trade_types = await this.getTradeTypeByTradeCategory(\n                market,\n                submarket,\n                symbol,\n                trade_type_category[1]\n            );\n\n            trade_type_options.push(...this.getTradeTypeOptions(trade_types, trade_type_category));\n        }\n        return trade_type_options;\n    }\n\n    async getTradeTypeCategories(market, submarket, symbol) {\n        const { TRADE_TYPE_CATEGORY_NAMES, NOT_AVAILABLE_DROPDOWN_OPTIONS } = config;\n        const contracts = await this.getContractsFor(symbol);\n        const trade_type_categories = [];\n\n        contracts.forEach(contract => {\n            const trade_type_category = this.getTradeTypeCategoryByTradeType(contract.contract_category);\n            const trade_type_category_name = this.getTradeTypeCategoryNameByTradeType(contract.contract_category);\n\n            if (trade_type_category_name) {\n                const is_disabled = this.isDisabledOption({\n                    market,\n                    submarket,\n                    symbol,\n                    trade_type_category,\n                });\n\n                if (!is_disabled) {\n                    const is_existing_category =\n                        trade_type_categories.findIndex(c => c[1] === trade_type_category) !== -1;\n\n                    if (!is_existing_category) {\n                        trade_type_categories.push([trade_type_category_name, trade_type_category]);\n                    }\n                }\n            }\n        });\n\n        if (trade_type_categories.length > 0) {\n            const category_names = Object.keys(TRADE_TYPE_CATEGORY_NAMES);\n\n            return trade_type_categories.sort((a, b) => {\n                const index_a = category_names.findIndex(c => c === a[1]);\n                const index_b = category_names.findIndex(c => c === b[1]);\n                return index_a - index_b;\n            });\n        }\n\n        return NOT_AVAILABLE_DROPDOWN_OPTIONS;\n    }\n\n    async getTradeTypes(market, submarket, symbol, trade_type_category) {\n        const { NOT_AVAILABLE_DURATIONS, TRADE_TYPE_CATEGORIES, opposites } = config;\n        const trade_types = [];\n        const subcategories = TRADE_TYPE_CATEGORIES[trade_type_category];\n\n        if (subcategories) {\n            for (let i = 0; i < subcategories.length; i++) {\n                const trade_type = subcategories[i];\n                const durations = await this.getDurations(symbol, trade_type); // eslint-disable-line no-await-in-loop\n                const has_durations = JSON.stringify(durations) !== JSON.stringify(NOT_AVAILABLE_DURATIONS);\n                const is_disabled = this.isDisabledOption({\n                    market,\n                    submarket,\n                    symbol,\n                    trade_type_category,\n                    trade_type,\n                });\n\n                if (!is_disabled && has_durations) {\n                    const types = opposites[trade_type.toUpperCase()];\n                    // e.g. [['Rise/Fall', 'callput']]\n                    trade_types.push([types.map(type => type[Object.keys(type)[0]]).join('/'), trade_type]);\n                }\n            }\n        }\n\n        return trade_types.length > 0 ? trade_types : config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n    }\n\n    isDisabledOption(compare_obj) {\n        return this.disabled_options.some(disabled_obj =>\n            Object.keys(disabled_obj).every(prop => compare_obj[prop] === disabled_obj[prop])\n        );\n    }\n\n    disposeCache() {\n        this.contracts_for = {};\n    }\n\n    getContractTypes = trade_type => {\n        const { opposites } = config;\n        const categories = opposites[trade_type.toUpperCase()].map(opposite => ({\n            value: Object.keys(opposite)[0],\n            text: Object.values(opposite)[0],\n        }));\n        return categories;\n    };\n}\n","import PendingPromise from '../../utils/pending-promise';\n\nexport default class TradingTimes {\n    constructor({ ws, server_time }) {\n        this.init_promise = new PendingPromise();\n        this.is_initialised = false;\n        this.trading_times = {};\n        this.ws = ws;\n        this.server_time = server_time.clone();\n    }\n\n    async initialise() {\n        if (this.is_initialised) {\n            return this.init_promise;\n        }\n\n        this.is_initialised = true;\n        this.last_update_moment = this.server_time.local();\n\n        if (!Object.keys(this.trading_times).length) {\n            await this.updateTradingTimes();\n            this.init_promise.resolve();\n\n            const periodicUpdate = async () => {\n                const changes = this.updateMarketOpenClosed();\n\n                if (Object.keys(changes).length > 0 && this.onMarketOpenCloseChanged) {\n                    this.onMarketOpenCloseChanged(changes);\n                }\n\n                let next_update_date = this.nextUpdateDate();\n\n                if (!next_update_date) {\n                    const now_moment = this.server_time.local();\n                    const next_update_moment = this.last_update_moment.clone().add(1, 'days');\n\n                    if (now_moment.isAfter(next_update_moment)) {\n                        this.last_update_moment = now_moment.clone();\n                    } else {\n                        this.last_update_moment = next_update_moment.clone();\n                    }\n\n                    // Retain the current market open close status, because the trade times\n                    // will now be the following day:\n                    const is_open_map = {};\n\n                    Object.keys(this.trading_times).forEach(symbol_name => {\n                        is_open_map[symbol_name] = this.trading_times[symbol_name].is_opened;\n                    });\n\n                    await this.updateTradingTimes();\n\n                    Object.keys(this.trading_times).forEach(symbol_name => {\n                        this.trading_times[symbol_name].is_opened = is_open_map[symbol_name];\n                    });\n\n                    // next update date will be 00:00 hours (UTC) of the following day:\n                    next_update_moment.set({ hour: 0, minute: 0, second: 0 });\n                    next_update_date = next_update_moment.toDate();\n                }\n\n                const wait_period = next_update_date - this.server_time.local().toDate();\n                this.update_timer = setTimeout(periodicUpdate, wait_period);\n            };\n\n            await periodicUpdate();\n        }\n\n        return this.init_promise;\n    }\n\n    async updateTradingTimes() {\n        const last_update_date = this.last_update_moment.format('YYYY-MM-DD');\n        const response = await this.ws.tradingTimes(last_update_date);\n\n        if (response.error) {\n            return;\n        }\n\n        this.trading_times = {};\n\n        const now = this.server_time.local().toDate();\n        const date_str = now.toISOString().substring(0, 11);\n        const getUTCDate = hour => new Date(`${date_str}${hour}Z`);\n        const {\n            trading_times: { markets },\n        } = response;\n\n        if (!markets) {\n            return;\n        }\n\n        markets.forEach(market => {\n            const { submarkets } = market;\n\n            submarkets.forEach(submarket => {\n                const { symbols } = submarket;\n\n                symbols.forEach(symbol_obj => {\n                    const { times, symbol } = symbol_obj;\n                    const { open, close } = times;\n                    const is_open_all_day = open.length === 1 && open[0] === '00:00:00' && close[0] === '23:59:59';\n                    const is_closed_all_day = open.length === 1 && open[0] === '--' && close[0] === '--';\n\n                    let processed_times;\n\n                    if (!is_open_all_day && !is_closed_all_day) {\n                        processed_times = open.map((open_time, index) => ({\n                            open: getUTCDate(open_time),\n                            close: getUTCDate(close[index]),\n                        }));\n                    }\n\n                    this.trading_times[symbol] = {\n                        is_open_all_day,\n                        is_closed_all_day,\n                        times: processed_times,\n                    };\n                });\n            });\n        });\n    }\n\n    updateMarketOpenClosed() {\n        const changes = {};\n\n        Object.keys(this.trading_times).forEach(symbol_name => {\n            const is_opened = this.calcIsMarketOpened(symbol_name);\n            const symbol_obj = this.trading_times[symbol_name];\n\n            if (symbol_obj.is_opened !== is_opened) {\n                symbol_obj.is_opened = is_opened;\n                changes[symbol_name] = is_opened;\n            }\n        });\n\n        return changes;\n    }\n\n    calcIsMarketOpened(symbol_name) {\n        const now = this.server_time.local().unix();\n        const { times, is_open_all_day, is_closed_all_day } = this.trading_times[symbol_name];\n\n        if (is_closed_all_day) {\n            return false;\n        }\n\n        if (is_open_all_day) {\n            return true;\n        }\n\n        return times.some(session => {\n            const { open, close } = session;\n            return now >= open && now < close;\n        });\n    }\n\n    nextUpdateDate() {\n        const now = this.server_time.local().toDate();\n\n        let nextDate;\n\n        Object.keys(this.trading_times).forEach(symbol_name => {\n            const { times, is_open_all_day, is_closed_all_day } = this.trading_times[symbol_name];\n\n            if (is_open_all_day || is_closed_all_day) {\n                return;\n            }\n\n            times.forEach(session => {\n                const { open, close } = session;\n\n                if (open > now && (!nextDate || open < nextDate)) {\n                    nextDate = open;\n                }\n                if (close > now && (!nextDate || close < nextDate)) {\n                    nextDate = close;\n                }\n            });\n        });\n\n        return nextDate;\n    }\n\n    isMarketOpened(symbol_name) {\n        const symbol_names = Object.keys(this.trading_times);\n\n        if (!symbol_names.length || !symbol_names.includes(symbol_name)) {\n            return false;\n        }\n\n        return this.trading_times[symbol_name].is_opened;\n    }\n}\n","import { observer as globalObserver } from '../../../utils/observer';\nimport { config } from '../../../constants/config';\n\nexport const contract = c => globalObserver.emit('bot.contract', c);\n\nexport const contractStatus = c => globalObserver.emit('contract.status', c);\n\nexport const info = i => globalObserver.emit('bot.info', i);\n\nexport const notify = (className, message) =>\n    globalObserver.emit('ui.log.notify', { className, message, sound: config.lists.NOTIFICATION_SOUND[0][1] });\n\nexport const log = (log_type, extra) => globalObserver.emit('ui.log.success', { log_type, extra });\n\nexport const error = message => globalObserver.emit('ui.log.error', message);\n","import { formatTime, findValueByKeyRecursively, getRoundedNumber, isEmptyObject } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { error as logError } from './broadcast';\nimport { observer as globalObserver } from '../../../utils/observer';\n\nexport const tradeOptionToProposal = (trade_option, purchase_reference) =>\n    trade_option.contractTypes.map(type => {\n        const proposal = {\n            amount: trade_option.amount,\n            basis: trade_option.basis,\n            contract_type: type,\n            currency: trade_option.currency,\n            duration: trade_option.duration,\n            duration_unit: trade_option.duration_unit,\n            multiplier: trade_option.multiplier,\n            passthrough: {\n                contract_type: type,\n                purchase_reference,\n            },\n            proposal: 1,\n            symbol: trade_option.symbol,\n        };\n        if (trade_option.prediction !== undefined) {\n            proposal.selected_tick = trade_option.prediction;\n        }\n        if (!['TICKLOW', 'TICKHIGH'].includes(type) && trade_option.prediction !== undefined) {\n            proposal.barrier = trade_option.prediction;\n        } else if (trade_option.barrierOffset !== undefined) {\n            proposal.barrier = trade_option.barrierOffset;\n        }\n        if (trade_option.secondBarrierOffset !== undefined) {\n            proposal.barrier2 = trade_option.secondBarrierOffset;\n        }\n        if (['MULTUP', 'MULTDOWN'].includes(type)) {\n            proposal.duration = undefined;\n            proposal.duration_unit = undefined;\n        }\n        if (!isEmptyObject(trade_option.limit_order)) {\n            proposal.limit_order = trade_option.limit_order;\n        }\n        return proposal;\n    });\n\nexport const tradeOptionToBuy = (contract_type, trade_option) => {\n    const buy = {\n        buy: '1',\n        price: trade_option.amount,\n        parameters: {\n            amount: trade_option.amount,\n            basis: trade_option.basis,\n            contract_type,\n            currency: trade_option.currency,\n            duration: trade_option.duration,\n            duration_unit: trade_option.duration_unit,\n            multiplier: trade_option.multiplier,\n            symbol: trade_option.symbol,\n        },\n    };\n    if (trade_option.prediction !== undefined) {\n        buy.parameters.selected_tick = trade_option.prediction;\n    }\n    if (!['TICKLOW', 'TICKHIGH'].includes(contract_type) && trade_option.prediction !== undefined) {\n        buy.parameters.barrier = trade_option.prediction;\n    } else if (trade_option.barrierOffset !== undefined) {\n        buy.parameters.barrier = trade_option.barrierOffset;\n    }\n    if (trade_option.secondBarrierOffset !== undefined) {\n        buy.parameters.barrier2 = trade_option.secondBarrierOffset;\n    }\n    if (!isEmptyObject(trade_option.app_markup_percentage)) {\n        buy.parameters.app_markup_percentage = trade_option.app_markup_percentage;\n    }\n    if (!isEmptyObject(trade_option.barrier_range)) {\n        buy.parameters.barrier_range = trade_option.barrier_range;\n    }\n    if (!isEmptyObject(trade_option.date_expiry)) {\n        buy.parameters.date_expiry = trade_option.date_expiry;\n    }\n    if (!isEmptyObject(trade_option.date_start)) {\n        buy.parameters.date_start = trade_option.date_start;\n    }\n    if (!isEmptyObject(trade_option.product_type)) {\n        buy.parameters.product_type = trade_option.product_type;\n    }\n    if (!isEmptyObject(trade_option.trading_period_start)) {\n        buy.parameters.trading_period_start = trade_option.trading_period_start;\n    }\n    // This will be required only in the case of multiplier & accumulator contracts\n    if (!isEmptyObject(trade_option.limit_order)) {\n        buy.parameters.limit_order = trade_option.limit_order;\n    }\n    // This will be required only in the case of multiplier contracts\n    if (['MULTUP', 'MULTDOWN'].includes(contract_type)) {\n        buy.parameters.duration = undefined;\n        buy.parameters.duration_unit = undefined;\n\n        buy.parameters.multiplier = trade_option.multiplier;\n    }\n    // This will be required only in the case of accumulator contracts\n    if (['ACCU'].includes(contract_type)) {\n        buy.parameters.growth_rate = trade_option.growth_rate;\n    }\n    return buy;\n};\n\nexport const getDirection = ticks => {\n    const { length } = ticks;\n    const [tickOld, tickNew] = ticks.slice(-2);\n\n    let direction = '';\n    if (length >= 2) {\n        direction = tickOld.quote < tickNew.quote ? 'rise' : direction;\n        direction = tickOld.quote > tickNew.quote ? 'fall' : direction;\n    }\n\n    return direction;\n};\n\nexport const getLastDigit = tick => {\n    let number_string = tick;\n    if (typeof number_string === 'number') {\n        number_string = String(number_string);\n    }\n    return Number(number_string[number_string.length - 1]);\n};\n\nexport const getLastDigitForList = (tick, pip_size = 0) => {\n    const value = Number(tick).toFixed(pip_size);\n    return value[value.length - 1];\n};\n\nconst getBackoffDelayInMs = (error, delay_index) => {\n    const base_delay = 2.5;\n    const max_delay = 15;\n    const next_delay_in_seconds = Math.min(base_delay * delay_index, max_delay);\n\n    if (error.error.code === 'RateLimit') {\n        logError(\n            localize('You are rate limited for: {{ message_type }}, retrying in {{ delay }}s (ID: {{ request }})', {\n                message_type: error.msg_type,\n                delay: next_delay_in_seconds,\n                request: error.echo_req.req_id,\n            })\n        );\n    } else if (error.error.code === 'DisconnectError') {\n        logError(\n            localize('You are disconnected, retrying in {{ delay }}s', {\n                delay: next_delay_in_seconds,\n            })\n        );\n    } else if (error.error.code === 'MarketIsClosed') {\n        logError(localize('This market is presently closed.'));\n    } else {\n        logError(\n            localize('Request failed for: {{ message_type }}, retrying in {{ delay }}s', {\n                message_type: error.msg_type || localize('unknown'),\n                delay: next_delay_in_seconds,\n            })\n        );\n    }\n\n    return next_delay_in_seconds * 1000;\n};\n\nexport const updateErrorMessage = error => {\n    if (error.error?.code === 'InputValidationFailed') {\n        if (error.error.details?.duration) {\n            error.error.message = localize('Duration must be a positive integer');\n        }\n        if (error.error.details?.amount) {\n            error.error.message = localize('Amount must be a positive number.');\n        }\n    }\n};\n\nexport const shouldThrowError = (error, errors_to_ignore = []) => {\n    if (!error.error) {\n        return false;\n    }\n\n    const default_errors_to_ignore = [\n        'CallError',\n        'WrongResponse',\n        'GetProposalFailure',\n        'RateLimit',\n        'DisconnectError',\n        'MarketIsClosed',\n    ];\n    updateErrorMessage(error);\n    const is_ignorable_error = errors_to_ignore.concat(default_errors_to_ignore).includes(error.error.code);\n\n    return !is_ignorable_error;\n};\n\nexport const recoverFromError = (promiseFn, recoverFn, errors_to_ignore, delay_index, api_base) => {\n    return new Promise((resolve, reject) => {\n        const promise = promiseFn();\n\n        if (promise) {\n            promise.then(resolve).catch(error => {\n                /**\n                 * if bot is not running there is no point of recovering from error\n                 * `!api_base.is_running` will check the bot status if it is not running it will kick out the control from loop\n                 */\n                if (shouldThrowError(error, errors_to_ignore) || (api_base && !api_base.is_running)) {\n                    reject(error);\n                    return;\n                }\n                recoverFn(\n                    error.error.code,\n                    () =>\n                        new Promise(recoverResolve => {\n                            const getGlobalTimeouts = () => globalObserver.getState('global_timeouts') ?? [];\n\n                            const timeout = setTimeout(() => {\n                                const global_timeouts = getGlobalTimeouts();\n                                delete global_timeouts[timeout];\n                                globalObserver.setState(global_timeouts);\n                                recoverResolve();\n                            }, getBackoffDelayInMs(error, delay_index));\n\n                            const global_timeouts = getGlobalTimeouts();\n                            const cancellable_timeouts = ['buy'];\n                            const msg_type = findValueByKeyRecursively(error, 'msg_type');\n\n                            global_timeouts[timeout] = {\n                                is_cancellable: cancellable_timeouts.includes(msg_type),\n                                msg_type,\n                            };\n\n                            globalObserver.setState({ global_timeouts });\n                        })\n                );\n            });\n        } else {\n            resolve();\n        }\n    });\n};\n\n/**\n * @param {*} promiseFn api call - it could be api call or subscription\n * @param {*} errors_to_ignore list of errors to ignore\n * @param {*} api_base instance of APIBase class to check if the bot is running or not\n * @returns a new promise\n */\nexport const doUntilDone = (promiseFn, errors_to_ignore, api_base) => {\n    let delay_index = 1;\n\n    return new Promise((resolve, reject) => {\n        const recoverFn = (error_code, makeDelay) => {\n            delay_index++;\n            makeDelay().then(repeatFn);\n        };\n\n        const repeatFn = () => {\n            recoverFromError(promiseFn, recoverFn, errors_to_ignore, delay_index, api_base).then(resolve).catch(reject);\n        };\n\n        repeatFn();\n    });\n};\n\nexport const createDetails = contract => {\n    const { sell_price: sellPrice, buy_price: buyPrice, currency } = contract;\n    const profit = getRoundedNumber(sellPrice - buyPrice, currency);\n    const result = profit < 0 ? 'loss' : 'win';\n\n    return [\n        contract.transaction_ids.buy,\n        +contract.buy_price,\n        +contract.sell_price,\n        profit,\n        contract.contract_type,\n        formatTime(parseInt(`${contract.entry_tick_time}000`), 'HH:mm:ss'),\n        +contract.entry_tick,\n        formatTime(parseInt(`${contract.exit_tick_time}000`), 'HH:mm:ss'),\n        +contract.exit_tick,\n        +(contract.barrier ? contract.barrier : 0),\n        result,\n    ];\n};\n\nexport const getUUID = () => `${new Date().getTime() * Math.random()}`;\n\nconst hasBlockOfType = (targetType, workspace) => {\n    const allBlocks = workspace.getAllBlocks();\n    return allBlocks.some(block => block.type === targetType && !!block.parentBlock_);\n};\n\nexport const checkBlocksForProposalRequest = () => {\n    const workspace = Blockly.derivWorkspace;\n    const has_payout_block = hasBlockOfType('payout', workspace);\n\n    // Code for the future for case when basis: 'payout':\n    // * Since basis : '${block.type === 'trade_definition_tradeoptions' ? 'stake' : 'payout'}'\n    // * basis: 'payout' when contract_type: \"MULTUP\"\n    // Uncomment next line later:\n    // const is_basis_payout = !hasBlockOfType('trade_definition_tradeoptions', workspace);\n\n    return {\n        has_payout_block,\n        is_basis_payout: false,\n    };\n};\n\nexport const socket_state = {\n    [WebSocket.CONNECTING]: 'Connecting',\n    [WebSocket.OPEN]: 'Connected',\n    [WebSocket.CLOSING]: 'Closing',\n    [WebSocket.CLOSED]: 'Closed',\n};\n","import { localize } from '@deriv/translations';\n\nconst generateErrorMessage = (block_type, missing_space = localize('workspace')) => {\n    return {\n        missing: localize('The {{block_type}} block is mandatory and cannot be deleted/disabled.', {\n            block_type,\n        }),\n        misplaced: localize('The {{block_type}} block is misplaced from {{missing_space}}.', {\n            block_type,\n            missing_space,\n        }),\n        disabled: localize('The {{block_type}} block is mandatory and cannot be deleted/disabled.', {\n            block_type,\n        }),\n        default: localize('The {{block_type}} block is mandatory and cannot be deleted/disabled.', {\n            block_type,\n        }),\n    };\n};\n\nexport const error_message_map = {\n    trade_definition: generateErrorMessage(localize('Trade parameters')),\n    trade_parameters: generateErrorMessage(localize('Trade parameters')),\n    before_purchase: generateErrorMessage(localize('Purchase conditions')),\n    purchase_conditions: generateErrorMessage(localize('Purchase conditions')),\n    purchase: generateErrorMessage(localize('Purchase'), localize('purchase conditions')),\n    trade_definition_tradeoptions: generateErrorMessage(localize('Trade options'), localize('trade parameters')),\n    trade_definition_multiplier: generateErrorMessage(\n        localize('Trade options multipliers'),\n        localize('trade parameters')\n    ),\n};\n","import { observer as globalObserver } from './observer';\n\nexport const createError = (name, message) => {\n    const e = new Error(message);\n    e.name = name;\n    e.code = name;\n    return e;\n};\n\nexport const trackAndEmitError = (message, object = {}) => {\n    globalObserver.emit('ui.log.error', message);\n    if (window.trackJs) {\n        trackJs.track(`${message} - Error: ${JSON.stringify(object)}`);\n    }\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../constants/config';\n\n// TODO: use-shared-functions - These functions are duplicates of trader ones, export and use these instead.\nexport const getContractTypeName = contract => {\n    const { opposites } = config;\n    let name = localize('Unknown');\n\n    Object.keys(opposites).forEach(opposites_name => {\n        const contract_type_objs = opposites[opposites_name];\n\n        contract_type_objs.forEach(contract_type_obj => {\n            const contract_type_names = Object.entries(contract_type_obj)[0]; // ['CALL', 'Rise']\n\n            if (contract_type_names[0] === contract.contract_type) {\n                // Extra check for CALL & PUT types to distinguish Rise/Fall & Higher/Lower.\n                if (['CALL', 'PUT'].includes(contract_type_names[0])) {\n                    const shortcode_suffix = contract.shortcode.split('_').slice(-2)[0];\n                    const is_risefall = /^S0P$/.test(shortcode_suffix);\n                    const req_opposite_name = is_risefall ? 'CALLPUT' : 'HIGHERLOWER';\n\n                    if (opposites_name !== req_opposite_name) {\n                        return;\n                    }\n                }\n\n                name = contract_type_names[1];\n            }\n        });\n    });\n\n    return name;\n};\n","export const importExternal = url => {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = url;\n        script.async = true;\n        script.onload = () => resolve(window.external_global_component);\n        script.onerror = reject;\n\n        document.body.appendChild(script);\n    });\n};\n","import { localize } from '@deriv/translations';\n\nexport const timeSince = timestamp => {\n    const now = new Date();\n    const secondPast = (now.getTime() - timestamp) / 1000;\n\n    if (secondPast < 60) {\n        return localize('{{secondPast}}s ago', { secondPast: parseInt(secondPast) });\n    }\n    if (secondPast < 3600) {\n        return localize('{{minutePast}}m ago', { minutePast: parseInt(secondPast / 60) });\n    }\n    if (secondPast <= 86400) {\n        return localize('{{hourPast}}h ago', { hourPast: parseInt(secondPast / 3600) });\n    }\n\n    const timestampDate = new Date(timestamp);\n    const day = timestampDate.getDate();\n    const month = timestampDate\n        .toDateString()\n        .match(/ [a-zA-Z]*/)[0]\n        .replace(' ', '');\n    const year = `${timestampDate.getFullYear() === now.getFullYear() ? '' : ' '}${timestampDate.getFullYear()}`;\n    return `${day} ${month}${year}`;\n};\n","const darkMode = () => {\n    const workspace = Blockly;\n    workspace.Colours.RootBlock = {\n        colour: '#183046',\n        colourSecondary: '#F2F3F5',\n        colourTertiary: '#151717',\n    };\n    workspace.Colours.Base = {\n        colour: '#C2C2C2',\n        colourSecondary: '#0e0e0e',\n        colourTertiary: '#0e0e0e',\n    };\n\n    workspace.Colours.Special1 = {\n        colour: '#C2C2C2',\n        colourSecondary: '#0e0e0e',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Special2 = {\n        colour: '#C2C2C2',\n        colourSecondary: '#0e0e0e',\n        colourTertiary: '#D27954',\n    };\n\n    workspace.Colours.Special3 = {\n        colour: '#C2C2C2',\n        colourSecondary: '#0e0e0e',\n        colourTertiary: '#D27954',\n    };\n};\n\nconst lightMode = () => {\n    const workspace = Blockly;\n    workspace.Colours.RootBlock = {\n        colour: '#064e72',\n        colourSecondary: '#064e72',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Base = {\n        colour: '#e5e5e5',\n        colourSecondary: '#ffffff',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Special1 = {\n        colour: '#e5e5e5',\n        colourSecondary: '#ffffff',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Special2 = {\n        colour: '#e5e5e5',\n        colourSecondary: '#ffffff',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Special3 = {\n        colour: '#e5e5e5',\n        colourSecondary: '#ffffff',\n        colourTertiary: '#6d7278',\n    };\n};\nexport const setColors = is_dark_mode => (is_dark_mode ? darkMode() : lightMode());\n","/** Helper function to perform sequential execution of functions */\nexport const pipe = (...fns) => {\n    return initialValue => {\n        return fns.reduce((nextParam, fn) => fn(nextParam), initialValue);\n    };\n};\n\n/** Helper function to parse block information from XML */\nexport const extractBlocksFromXml = xml => {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(xml, 'text/xml');\n    const blocks = xmlDoc.getElementsByTagName('block');\n\n    const blocksTypeAndFields = Array.from(blocks).map(block => {\n        const type = block.getAttribute('type');\n        const fields = Array.from(block.getElementsByTagName('field')).map(field => {\n            return {\n                name: field.getAttribute('name'),\n                value: field.textContent.trim(),\n            };\n        });\n        return { type, fields };\n    });\n\n    return blocksTypeAndFields;\n};\n\n/** Helper function to sort block childs based on type or field name */\nexport const sortBlockChild = blocksArray =>\n    blocksArray.sort((a, b) => {\n        if (a.type < b.type) {\n            return -1;\n        }\n        if (a.type > b.type) {\n            return 1;\n        }\n        return JSON.stringify(a.fields) < JSON.stringify(b.fields) ? -1 : 1;\n    });\n\n/** Compare two blocks by field name and value */\nconst areFieldsEqual = (fields1, fields2) => {\n    if (fields1?.length !== fields2?.length) {\n        return false;\n    }\n    for (let i = 0; i < fields1.length; i++) {\n        if (fields1[i]?.name !== fields2[i]?.name || fields1[i]?.value !== fields2[i]?.value) {\n            return false;\n        }\n    }\n    return true;\n};\n\n/** Sanitize XMLs and compare them */\nexport const compareXml = (xml1, xml2) => {\n    // Extract block information from the XMLs and sort the blocks\n    const sortedBlocks1 = pipe(extractBlocksFromXml, sortBlockChild);\n    const sortedBlocks2 = pipe(extractBlocksFromXml, sortBlockChild);\n    const blocks1 = sortedBlocks1(xml1);\n    const blocks2 = sortedBlocks2(xml2);\n\n    // Compare the sorted blocks\n    if (blocks1?.length !== blocks2?.length) {\n        return false;\n    }\n    for (let i = 0; i < blocks1.length; i++) {\n        if (blocks1[i]?.type !== blocks2[i]?.type || !areFieldsEqual(blocks1[i]?.fields, blocks2[i]?.fields)) {\n            return false;\n        }\n    }\n\n    return true;\n};\n","import { error_message_map } from './error-config';\nimport { observer } from './observer';\n\nconst onKeyDownHandleError = event => {\n    if (Blockly.selected !== null && Blockly.selected.parentBlock_ === null) {\n        if (event.key === 'Delete' || event.key === 'Backspace') {\n            handleError('BLOCK_DELETION', observer);\n        }\n    }\n};\n\nexport const removeErrorHandlingEventListener = (type = 'keydown') => {\n    window.removeEventListener(type, onKeyDownHandleError);\n};\n\nexport const initErrorHandlingListener = (type = 'keydown') => {\n    window.addEventListener(type, onKeyDownHandleError);\n};\n\nexport const handleError = (errorCode, observer) => {\n    switch (errorCode) {\n        case 'BLOCK_DELETION':\n            if (error_message_map[Blockly.selected.type]) {\n                observer.emit('ui.log.error', error_message_map[Blockly.selected.type]?.default);\n            }\n            break;\n        default:\n            break;\n    }\n};\n","import LZString from 'lz-string';\nimport localForage from 'localforage';\nimport DBotStore from '../scratch/dbot-store';\nimport { save_types } from '../constants/save-type';\n/**\n * Save workspace to localStorage\n * @param {String} save_type // constants/save_types.js (unsaved, local, googledrive)\n * @param {Blockly.Events} event // Blockly event object\n */\nexport const saveWorkspaceToRecent = async (xml, save_type = save_types.UNSAVED) => {\n    // Ensure strategies don't go through expensive conversion.\n    xml.setAttribute('is_dbot', true);\n    const {\n        load_modal: { updateListStrategies },\n        save_modal,\n    } = DBotStore.instance;\n\n    const workspace_id = Blockly.derivWorkspace.current_strategy_id || Blockly.utils.genUid();\n    const workspaces = await getSavedWorkspaces();\n    const current_xml = Blockly.Xml.domToText(xml);\n    const current_timestamp = Date.now();\n    const current_workspace_index = workspaces.findIndex(workspace => workspace.id === workspace_id);\n\n    if (current_workspace_index >= 0) {\n        const current_workspace = workspaces[current_workspace_index];\n        current_workspace.xml = current_xml;\n        current_workspace.name = save_modal.bot_name;\n        current_workspace.timestamp = current_timestamp;\n        current_workspace.save_type = save_type;\n    } else {\n        workspaces.push({\n            id: workspace_id,\n            timestamp: current_timestamp,\n            name: save_modal.bot_name,\n            xml: current_xml,\n            save_type,\n        });\n    }\n\n    workspaces\n        .sort((a, b) => {\n            return new Date(a.timestamp) - new Date(b.timestamp);\n        })\n        .reverse();\n\n    if (workspaces.length > 10) {\n        workspaces.pop();\n    }\n    updateListStrategies(workspaces);\n    localForage.setItem('saved_workspaces', LZString.compress(JSON.stringify(workspaces)));\n};\n\nexport const getSavedWorkspaces = async () => {\n    try {\n        return JSON.parse(LZString.decompress(await localForage.getItem('saved_workspaces'))) || [];\n    } catch (e) {\n        return [];\n    }\n};\n\nexport const removeExistingWorkspace = async workspace_id => {\n    const workspaces = await getSavedWorkspaces();\n    const current_workspace_index = workspaces.findIndex(workspace => workspace.id === workspace_id);\n\n    if (current_workspace_index >= 0) {\n        workspaces.splice(current_workspace_index, 1);\n    }\n\n    await localForage.setItem('saved_workspaces', LZString.compress(JSON.stringify(workspaces)));\n};\n","import { Map, List } from 'immutable';\n/**\nBelow are the list of events we can register to listen to :\n \n-bot.running : Emitted in trade/index.js, in old Binary Bot this is only used\nto set the label to is running.\n\n-bot.stop: Bot was stopped by the user\n\n-bot.contract: Called in OpenContract.js, object consisting of\naccountID and a proposal_open_contract response, this will\nbe emitted on each POC message from the server.\n\n-bot.info: Emitted in trade/Balance.js, it announces account ID and balance,\nwe don't need this in DerivBot. Can also be emitted during running\ncontract, it then announces an object consisting of accountID,\ntotal_runs, transaction_ids, contract_type, and buy_price.\n\n-contract.status:  First emitted in trade/Purchase.js with an idea that's more\nof a flag e.g. contract_purchase_sent (when buy was sent to\nAPI, or contract_purchase_recieved (when buy was acknowledged\nby API), or contract.sold (when a contract was sold/expired).\n\n-contract.settled: this event was emitted to initiate a\nsettlement of a contract, i.e. it would call proposal_open_contract to retrieve\nlatest values for contract, not required atm by DerivBot\n\n-googledrive.authorise : event to start auturize google flow\n\n-ui.log.success: UI Notifications\n\n-ui.log.error: UI errors\n\n-ui.log.warn: UI warning\n\n-Notify: Server Notifications\n\n-Error : Server errors\n\n */\n\nexport default class Observer {\n    constructor() {\n        this.eam = new Map(); // event action map\n    }\n\n    register(event, _action, once, unregisterIfError, unregisterAllBefore) {\n        if (unregisterAllBefore) {\n            this.unregisterAll(event);\n        }\n        const apiError = error => {\n            if (error.type === unregisterIfError.type) {\n                this.unregister('api.error', apiError);\n                unregisterIfError.unregister.forEach(unreg => {\n                    if (unreg instanceof Array) {\n                        this.unregister(...unreg);\n                    } else {\n                        this.unregisterAll(unreg);\n                    }\n                });\n            }\n        };\n        if (unregisterIfError) {\n            this.register('api.error', apiError);\n        }\n        const action = (...args) => {\n            if (once) {\n                this.unregister(event, _action);\n            }\n            if (unregisterIfError) {\n                this.unregister('api.error', apiError);\n            }\n            _action(...args);\n        };\n\n        const actionList = this.eam.get(event);\n\n        this.eam = actionList\n            ? this.eam.set(event, actionList.push({ action, searchBy: _action }))\n            : this.eam.set(event, new List().push({ action, searchBy: _action }));\n    }\n\n    unregister(event, f) {\n        this.eam = this.eam.set(\n            event,\n            this.eam.get(event).filter(r => r.searchBy !== f)\n        );\n    }\n\n    isRegistered(event) {\n        return this.eam.has(event);\n    }\n\n    unregisterAll(event) {\n        this.eam = this.eam.delete(event);\n    }\n\n    emit(event, data) {\n        if (this.eam.has(event)) {\n            this.eam.get(event).forEach(action => action.action(data));\n        }\n    }\n    setState(state = {}) {\n        this.state = { ...this.state, ...state };\n    }\n    getState(key) {\n        return this.state?.[key];\n    }\n}\n\nexport const observer = new Observer();\n","export default function PendingPromise() {\n    let resolve, reject;\n\n    const promise = new Promise((_resolve, _reject) => {\n        resolve = _resolve;\n        reject = _reject;\n    });\n\n    promise.isPending = true;\n\n    promise.resolve = res => {\n        promise.isPending = false;\n        resolve(res);\n    };\n\n    promise.reject = error => {\n        promise.isPending = false;\n        reject(error);\n    };\n\n    return promise;\n}\n","import { config } from '../constants/config';\n\nexport const hasAllRequiredBlocks = () => {\n    const blocks_in_workspace = Blockly.derivWorkspace.getAllBlocks();\n    const { mandatoryMainBlocks } = config;\n    const required_block_types = ['trade_definition_tradeoptions', ...mandatoryMainBlocks];\n    const all_block_types = blocks_in_workspace.map(block => block.type);\n    const has_all_required_blocks = required_block_types.every(required_block_type =>\n        all_block_types.includes(required_block_type)\n    );\n\n    return has_all_required_blocks;\n};\n\nexport const onWorkspaceResize = () => {\n    const workspace = Blockly.derivWorkspace;\n    if (workspace) {\n        workspace.getAllFields().forEach(field => field.forceRerender());\n\n        const el_scratch_div = document.getElementById('scratch_div');\n        if (el_scratch_div) {\n            el_scratch_div.style.width = 'calc(100vw - 3.2rem)';\n            el_scratch_div.style.height = 'var(--bot-content-height)';\n            Blockly.svgResize(workspace);\n        }\n    }\n};\n\nexport const removeLimitedBlocks = (workspace, block_types) => {\n    const types = Array.isArray(block_types) ? block_types : [block_types];\n\n    types.forEach(block_type => {\n        if (config.single_instance_blocks.includes(block_type)) {\n            workspace.getAllBlocks().forEach(ws_block => {\n                if (ws_block.type === block_type) {\n                    ws_block.dispose();\n                }\n            });\n        }\n    });\n};\n","import { createContext } from 'react';\nimport type { TStores } from '../types';\n\nconst StoreContext = createContext<TStores | null>(null);\n\nexport default StoreContext;\n","import React, { PropsWithChildren, createContext, useContext, useEffect, useRef } from 'react';\n// @ts-expect-error `@deriv/deriv-api` is not in TypeScript, Hence we ignore the TS error.\nimport DerivAPIBasic from '@deriv/deriv-api/dist/DerivAPIBasic';\nimport { getAppId, getSocketURL, useWS } from '@deriv/shared';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n\ntype APIContextData = {\n    derivAPI: DerivAPIBasic | null;\n};\n\nconst APIContext = createContext<APIContextData | null>(null);\n\ndeclare global {\n    interface Window {\n        ReactQueryClient?: QueryClient;\n        DerivAPI?: Record<string, DerivAPIBasic>;\n        WSConnections?: Record<string, WebSocket>;\n    }\n}\n\n// This is a temporary workaround to share a single `QueryClient` instance between all the packages.\nconst getSharedQueryClientContext = (): QueryClient => {\n    if (!window.ReactQueryClient) {\n        window.ReactQueryClient = new QueryClient();\n    }\n\n    return window.ReactQueryClient;\n};\n\nlet timer_id: NodeJS.Timer;\n/**\n * Handles reconnection logic by reinitializing the WebSocket instance if it is in\n * closing or closed state.\n * @param wss_url WebSocket URL\n * @returns\n */\nconst handleReconnection = (wss_url: string) => {\n    if (!window.WSConnections) return;\n    const existingWebsocketInstance = window.WSConnections[wss_url];\n    if (\n        !existingWebsocketInstance ||\n        !(existingWebsocketInstance instanceof WebSocket) ||\n        [2, 3].includes(existingWebsocketInstance.readyState)\n    ) {\n        clearTimeout(timer_id);\n        timer_id = setTimeout(() => {\n            initializeDerivAPI();\n        }, 1000);\n    }\n};\n\n/**\n * Retrieves the WebSocket URL based on the current environment.\n * @returns {string} The WebSocket URL.\n */\nconst getWebSocketURL = () => {\n    const endpoint = getSocketURL();\n    const app_id = getAppId();\n    const language = localStorage.getItem('i18n_language');\n    const brand = 'deriv';\n    const wss_url = `wss://${endpoint}/websockets/v3?app_id=${app_id}&l=${language}&brand=${brand}`;\n\n    return wss_url;\n};\n\n/**\n * Retrieves or initializes a WebSocket instance based on the provided URL.\n * @param {string} wss_url - The WebSocket URL.\n * @returns {WebSocket} The WebSocket instance associated with the provided URL.\n */\nconst getWebsocketInstance = (wss_url: string) => {\n    if (!window.WSConnections) {\n        window.WSConnections = {};\n    }\n\n    const existingWebsocketInstance = window.WSConnections[wss_url];\n    if (\n        !existingWebsocketInstance ||\n        !(existingWebsocketInstance instanceof WebSocket) ||\n        [2, 3].includes(existingWebsocketInstance.readyState)\n    ) {\n        window.WSConnections[wss_url] = new WebSocket(wss_url);\n        window.WSConnections[wss_url].addEventListener('close', () => handleReconnection(wss_url));\n    }\n\n    return window.WSConnections[wss_url];\n};\n\n/**\n * Retrieves the active WebSocket instance.\n * @returns {WebSocket} The WebSocket instance associated with the provided URL.\n */\nexport const getActiveWebsocket = () => {\n    const wss_url = getWebSocketURL();\n\n    return window?.WSConnections?.[wss_url];\n};\n\n/**\n * Initializes a DerivAPI instance for the global window. This enables a standalone connection\n * without causing race conditions with deriv-app core stores.\n * @returns {DerivAPIBasic} The initialized DerivAPI instance.\n */\nconst initializeDerivAPI = (): DerivAPIBasic => {\n    if (!window.DerivAPI) {\n        window.DerivAPI = {};\n    }\n\n    const wss_url = getWebSocketURL();\n    const websocketConnection = getWebsocketInstance(wss_url);\n\n    if (!window.DerivAPI?.[wss_url]) {\n        window.DerivAPI[wss_url] = new DerivAPIBasic({ connection: websocketConnection });\n    }\n\n    return window.DerivAPI?.[wss_url];\n};\n\nconst queryClient = getSharedQueryClientContext();\n\ntype TAPIProviderProps = {\n    /** If set to true, the APIProvider will instantiate it's own socket connection. */\n    standalone?: boolean;\n};\n\nconst APIProvider = ({ children, standalone = false }: PropsWithChildren<TAPIProviderProps>) => {\n    const WS = useWS();\n    const standaloneDerivAPI = useRef(standalone ? initializeDerivAPI() : null);\n\n    useEffect(() => {\n        let interval_id: NodeJS.Timer;\n\n        if (standalone) {\n            interval_id = setInterval(() => standaloneDerivAPI.current?.send({ ping: 1 }), 10000);\n        }\n\n        return () => clearInterval(interval_id);\n    }, [standalone]);\n\n    return (\n        <APIContext.Provider value={{ derivAPI: standalone ? standaloneDerivAPI.current : WS }}>\n            <QueryClientProvider client={queryClient}>\n                {children}\n                {/* <ReactQueryDevtools /> */}\n            </QueryClientProvider>\n        </APIContext.Provider>\n    );\n};\n\nexport const useAPIContext = () => {\n    const context = useContext(APIContext);\n    if (!context) {\n        throw new Error('useAPIContext must be used within APIProvider');\n    }\n    return context;\n};\n\nexport default APIProvider;\n","import { useCallback } from 'react';\n\nimport type {\n    TSocketEndpointNames,\n    TSocketPaginateableEndpointNames,\n    TSocketRequestPayload,\n    TSocketResponseData,\n    TSocketSubscribableEndpointNames,\n} from '../types';\nimport { useAPIContext } from './APIProvider';\n\nconst useAPI = () => {\n    const { derivAPI } = useAPIContext();\n\n    const send = useCallback(\n        async <T extends TSocketEndpointNames | TSocketPaginateableEndpointNames = TSocketEndpointNames>(\n            name: T,\n            payload?: TSocketRequestPayload<T>\n        ): Promise<TSocketResponseData<T>> => {\n            const response = await derivAPI?.send({ [name]: 1, ...(payload || {}) });\n\n            if (response.error) {\n                throw response.error;\n            }\n\n            return response;\n        },\n        [derivAPI]\n    );\n\n    const subscribe = useCallback(\n        <T extends TSocketSubscribableEndpointNames>(\n            name: T,\n            payload?: TSocketRequestPayload<T>\n        ): {\n            subscribe: (\n                // The type will be handled by the `useSubscription` hook.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                onData: (response: any) => void,\n                // The type will be handled by the `useSubscription` hook.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                onError: (response: any) => void\n            ) => { unsubscribe?: VoidFunction };\n        } => derivAPI?.subscribe({ [name]: 1, subscribe: 1, ...(payload || {}) }),\n        [derivAPI]\n    );\n\n    return {\n        send,\n        subscribe,\n    };\n};\n\nexport default useAPI;\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport useAPI from './useAPI';\nimport type {\n    TSocketAcceptableProps,\n    TSocketError,\n    TSocketRequestPayload,\n    TSocketResponseData,\n    TSocketSubscribableEndpointNames,\n} from '../types';\n\nconst useSubscription = <T extends TSocketSubscribableEndpointNames>(name: T) => {\n    const [isLoading, setIsLoading] = useState(false);\n    const [isSubscribed, setSubscribed] = useState(false);\n    const [error, setError] = useState<TSocketError<T>>();\n    const [data, setData] = useState<TSocketResponseData<T>>();\n    const subscriber = useRef<{ unsubscribe?: VoidFunction }>();\n    const { subscribe: _subscribe } = useAPI();\n\n    const subscribe = useCallback(\n        (...props: TSocketAcceptableProps<T>) => {\n            const prop = props?.[0];\n            const payload = prop && 'payload' in prop ? (prop.payload as TSocketRequestPayload<T>) : undefined;\n\n            setIsLoading(true);\n            setSubscribed(true);\n\n            try {\n                subscriber.current = _subscribe(name, payload).subscribe(\n                    response => {\n                        setData(response);\n                        setIsLoading(false);\n                    },\n                    response => {\n                        setError(response.error);\n                        setIsLoading(false);\n                    }\n                );\n            } catch (e) {\n                setError(e as TSocketError<T>);\n            }\n        },\n        [_subscribe, name]\n    );\n\n    const unsubscribe = useCallback(() => {\n        subscriber.current?.unsubscribe?.();\n        setSubscribed(false);\n    }, []);\n\n    useEffect(() => {\n        return () => {\n            unsubscribe();\n        };\n    }, [unsubscribe]);\n\n    return {\n        subscribe,\n        unsubscribe,\n        isLoading,\n        isSubscribed,\n        error,\n        data,\n    };\n};\n\nexport default useSubscription;\n","import { useContext } from 'react';\nimport StoreContext from './storeContext';\n\nconst useStore = () => {\n    const store = useContext(StoreContext);\n\n    if (!store) {\n        throw new Error('useStore must be used within StoreProvider');\n    }\n\n    return store;\n};\n\nexport default useStore;\n","import React, { useEffect } from 'react';\nimport { useSubscription } from '@deriv/api';\nimport merge from 'lodash.merge';\nimport { observer } from 'mobx-react-lite';\nimport useStore from '../useStore';\n\nconst ExchangeRatesProvider = observer(({ children }: React.PropsWithChildren<unknown>) => {\n    const { data, subscribe } = useSubscription('exchange_rates');\n    const {\n        exchange_rates: { update },\n    } = useStore();\n\n    useEffect(() => {\n        subscribe({ payload: { base_currency: 'USD' } });\n    }, [subscribe]);\n\n    useEffect(() => {\n        if (data) {\n            const { exchange_rates } = data;\n\n            if (exchange_rates) update(prev => merge(prev, exchange_rates));\n        }\n    }, [update, data]);\n\n    return <>{children}</>;\n});\n\nexport default ExchangeRatesProvider;\n","import { action, makeObservable, observable } from 'mobx';\nimport { makePersistable, stopPersisting } from 'mobx-persist-store';\n\nexport default class BaseStore<T> {\n    data: T | undefined = undefined;\n\n    constructor(name: string, onHydrationDone?: VoidFunction) {\n        makeObservable(this, {\n            data: observable,\n            update: action.bound,\n            unmount: action.bound,\n        });\n\n        makePersistable(this, { name, properties: ['data'], storage: window.localStorage }).then(() =>\n            onHydrationDone?.()\n        );\n    }\n\n    update(data: NonNullable<T> | ((previous?: T) => NonNullable<T>)) {\n        this.data = data instanceof Function ? data(this.data) : data;\n    }\n\n    unmount() {\n        stopPersisting(this);\n    }\n}\n","import BaseStore from './BaseStore';\nimport type { ExchangeRatesResponse } from '@deriv/api-types';\n\nexport default class ExchangeRatesStore extends BaseStore<ExchangeRatesResponse['exchange_rates']> {\n    constructor() {\n        super('ExchangeRatesStore');\n    }\n}\n","import BaseStore from './BaseStore';\n\nconst FLAGS = {\n    wallet: false,\n    next_wallet: false,\n    sharkfin: false,\n} satisfies Record<string, boolean>;\n\nexport default class FeatureFlagsStore extends BaseStore<{ [k in keyof typeof FLAGS]: boolean }> {\n    constructor() {\n        super('FeatureFlagsStore', () => {\n            // Set the default values for the first time.\n            if (!this.data) this.update(FLAGS);\n\n            // Update the store data if a new flag was added or removed.\n            if (this.data && Object.keys(this.data).length !== Object.keys(FLAGS).length) {\n                this.update(old => {\n                    const data = FLAGS;\n\n                    Object.keys(FLAGS).forEach(flag => {\n                        // @ts-expect-error flag key is always present in the object, Hence can ignore the TS error.\n                        if (old[flag] !== undefined) data[flag] = old[flag];\n                    });\n\n                    return data;\n                });\n            }\n        });\n\n        this.data = FLAGS;\n    }\n}\n","import React, { useEffect, useMemo } from 'react';\nimport { APIProvider } from '@deriv/api';\nimport { ExchangeRatesProvider } from './providers';\nimport StoreContext from './storeContext';\nimport { ExchangeRatesStore, FeatureFlagsStore } from './stores';\nimport type { TCoreStores, TStores } from '../types';\n\nconst StoreProvider = ({ children, store }: React.PropsWithChildren<{ store: TCoreStores }>) => {\n    const memoizedValue: TStores = useMemo(() => {\n        // If the store is mocked for testing purposes, then return the mocked value.\n        if ('is_mock' in store && store.is_mock) return store as unknown as TStores;\n\n        // Otherwise, instantiate store and return it.\n        return {\n            ...store,\n            exchange_rates: new ExchangeRatesStore(),\n            feature_flags: new FeatureFlagsStore(),\n        };\n    }, [store]);\n\n    useEffect(() => {\n        return () => {\n            Object.values(memoizedValue).forEach(value => {\n                if (typeof value === 'object' && 'unmount' in value) value.unmount();\n            });\n        };\n    }, [memoizedValue]);\n\n    return (\n        <APIProvider>\n            <StoreContext.Provider value={memoizedValue}>\n                <ExchangeRatesProvider>{children}</ExchangeRatesProvider>\n            </StoreContext.Provider>\n        </APIProvider>\n    );\n};\n\nexport default StoreProvider;\n","import React, { useState } from 'react';\nimport { Icon, Toast } from '@deriv/components';\n\ntype TBotSnackbar = {\n    className?: string;\n    is_open: boolean;\n    onClick?: React.MouseEventHandler<HTMLDivElement>;\n    handleClose: () => void;\n    type?: 'error' | 'info' | 'notification';\n    timeout?: number;\n    message: JSX.Element;\n};\n\nconst BotSnackbar = ({ message, timeout = 6000, is_open, onClick, handleClose, type, className }: TBotSnackbar) => {\n    const [notification_timer, setNotificationTimer] = useState(timeout);\n\n    React.useEffect(() => {\n        if (is_open) {\n            setNotificationTimer(timeout);\n        }\n    }, [is_open, timeout]);\n\n    return (\n        <div\n            onMouseOver={() => {\n                setNotificationTimer(0);\n            }}\n            onMouseLeave={() => {\n                setNotificationTimer(timeout);\n            }}\n            className={className ?? 'bot-snackbar'}\n            data-testid='bot-snackbar-notification-container'\n        >\n            <Toast is_open={is_open} type={type} timeout={notification_timer} onClick={onClick} onClose={handleClose}>\n                <div>{message}</div>\n                <Icon\n                    icon='IcCross'\n                    className={'notification-close'}\n                    data_testid={'bot-snackbar-notification-close'}\n                    onClick={handleClose}\n                />\n            </Toast>\n        </div>\n    );\n};\nexport default BotSnackbar;\n","import BotSnackbar from './bot-snackbar';\nimport './bot-snackbar.scss';\n\nexport default BotSnackbar;\n","import { action, makeObservable, reaction, when } from 'mobx';\nimport { ApiHelpers, DBot, runIrreversibleEvents } from '@deriv/bot-skeleton';\nimport { ContentFlag, isEuResidenceWithOnlyVRTC, routes, showDigitalOptionsUnavailableError } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nexport default class AppStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            onMount: action.bound,\n            onUnmount: action.bound,\n            onBeforeUnload: action.bound,\n            registerReloadOnLanguageChange: action.bound,\n            registerCurrencyReaction: action.bound,\n            registerOnAccountSwitch: action.bound,\n            registerLandingCompanyChangeReaction: action.bound,\n            registerResidenceChangeReaction: action.bound,\n            setDBotEngineStores: action.bound,\n            onClickOutsideBlockly: action.bound,\n            showDigitalOptionsMaltainvestError: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n        this.dbot_store = null;\n        this.api_helpers_store = null;\n        this.timer = null;\n    }\n\n    getErrorForNonEuClients = () => ({\n        text: localize(\n            'Unfortunately, this trading platform is not available for EU Deriv account. Please switch to a non-EU account to continue trading.'\n        ),\n        title: localize('Deriv Bot is unavailable for this account'),\n        link: localize('Switch to another account'),\n    });\n\n    getErrorForEuClients = (is_logged_in = false) => {\n        return {\n            text: ' ',\n            title: is_logged_in\n                ? localize('Deriv Bot is not available for EU clients')\n                : localize('Deriv Bot is unavailable in the EU'),\n            link: is_logged_in && localize(\"Back to Trader's Hub\"),\n            route: routes.traders_hub,\n        };\n    };\n\n    handleErrorForEu = (show_default_error = false) => {\n        const { client, common, ui, traders_hub } = this.core;\n        const toggleAccountsDialog = ui?.toggleAccountsDialog;\n\n        if (!client?.is_logged_in && client?.is_eu_country) {\n            return showDigitalOptionsUnavailableError(common.showError, this.getErrorForEuClients());\n        }\n\n        if (!client.is_landing_company_loaded) {\n            return false;\n        }\n\n        if (window.location.pathname === routes.bot) {\n            if (client.should_show_eu_error) {\n                return showDigitalOptionsUnavailableError(\n                    common.showError,\n                    this.getErrorForEuClients(client.is_logged_in)\n                );\n            }\n\n            if (traders_hub.content_flag === ContentFlag.HIGH_RISK_CR) {\n                return false;\n            }\n\n            if (traders_hub.content_flag === ContentFlag.LOW_RISK_CR_EU && toggleAccountsDialog) {\n                return showDigitalOptionsUnavailableError(\n                    common.showError,\n                    this.getErrorForNonEuClients(),\n                    toggleAccountsDialog,\n                    false,\n                    false\n                );\n            }\n\n            if (\n                ((!client.is_bot_allowed && client.is_eu && client.should_show_eu_error) ||\n                    isEuResidenceWithOnlyVRTC(client.active_accounts) ||\n                    client.is_options_blocked) &&\n                toggleAccountsDialog\n            ) {\n                return showDigitalOptionsUnavailableError(\n                    common.showError,\n                    this.getErrorForNonEuClients(),\n                    toggleAccountsDialog,\n                    false,\n                    false\n                );\n            }\n        }\n\n        if (show_default_error && common.has_error) {\n            common.setError(false, null);\n        }\n        return false;\n    };\n\n    onMount() {\n        const { blockly_store, run_panel } = this.root_store;\n        const { client, ui, traders_hub } = this.core;\n        this.showDigitalOptionsMaltainvestError();\n\n        let timer_counter = 1;\n\n        this.timer = setInterval(() => {\n            if (window.sendRequestsStatistic) {\n                window.sendRequestsStatistic(false);\n                performance.clearMeasures();\n                if (timer_counter === 6 || run_panel?.is_running) {\n                    clearInterval(this.timer);\n                } else {\n                    timer_counter++;\n                }\n            }\n        }, 10000);\n\n        blockly_store.setLoading(true);\n        DBot.initWorkspace(__webpack_public_path__, this.dbot_store, this.api_helpers_store, ui.is_mobile).then(() => {\n            blockly_store.setContainerSize();\n            blockly_store.setLoading(false);\n        });\n        this.registerReloadOnLanguageChange(this);\n        this.registerCurrencyReaction.call(this);\n        this.registerOnAccountSwitch.call(this);\n        this.registerLandingCompanyChangeReaction.call(this);\n        this.registerResidenceChangeReaction.call(this);\n\n        window.addEventListener('click', this.onClickOutsideBlockly);\n        window.addEventListener('beforeunload', this.onBeforeUnload);\n\n        blockly_store.getCachedActiveTab();\n\n        when(\n            () => [client?.should_show_eu_error, client?.is_landing_company_loaded],\n            () => this.showDigitalOptionsMaltainvestError()\n        );\n\n        reaction(\n            () => traders_hub?.content_flag,\n            () => this.showDigitalOptionsMaltainvestError()\n        );\n    }\n\n    onUnmount() {\n        DBot.terminateBot();\n        DBot.terminateConnection();\n        if (Blockly.derivWorkspace) {\n            clearInterval(Blockly.derivWorkspace.save_workspace_interval);\n            Blockly.derivWorkspace.dispose();\n        }\n        if (typeof this.disposeReloadOnLanguageChangeReaction === 'function') {\n            this.disposeReloadOnLanguageChangeReaction();\n        }\n        if (typeof this.disposeCurrencyReaction === 'function') {\n            this.disposeCurrencyReaction();\n        }\n        if (typeof this.disposeSwitchAccountListener === 'function') {\n            this.disposeSwitchAccountListener();\n        }\n        if (typeof this.disposeLandingCompanyChangeReaction === 'function') {\n            this.disposeLandingCompanyChangeReaction();\n        }\n        if (typeof this.disposeResidenceChangeReaction === 'function') {\n            this.disposeResidenceChangeReaction();\n        }\n\n        window.removeEventListener('click', this.onClickOutsideBlockly);\n        window.removeEventListener('beforeunload', this.onBeforeUnload);\n\n        // Ensure account switch is re-enabled.\n        const { ui } = this.core;\n\n        ui.setAccountSwitcherDisabledMessage(false);\n        ui.setPromptHandler(false);\n\n        if (this.timer) clearInterval(this.timer);\n        performance.clearMeasures();\n    }\n\n    onBeforeUnload = event => {\n        const { is_stop_button_visible } = this.root_store.run_panel;\n\n        if (is_stop_button_visible) {\n            event.returnValue = true;\n        }\n    };\n    registerReloadOnLanguageChange() {\n        this.disposeReloadOnLanguageChangeReaction = reaction(\n            () => this.core.common.current_language,\n            () => {\n                // temporarily added this to refresh just dbot in case of changing language,\n                // otherwise it should change language without refresh.\n                const { pathname } = window.location;\n                const is_bot =\n                    /^\\/bot/.test(pathname) || (/^\\/(br_)/.test(pathname) && pathname.split('/')[2] === 'bot');\n                if (is_bot) window.location.reload();\n            }\n        );\n    }\n    registerCurrencyReaction() {\n        // Syncs all trade options blocks' currency with the client's active currency.\n        this.disposeCurrencyReaction = reaction(\n            () => this.core.client.currency,\n            currency => {\n                if (!Blockly.derivWorkspace) return;\n\n                const trade_options_blocks = Blockly.derivWorkspace\n                    .getAllBlocks()\n                    .filter(\n                        b =>\n                            b.type === 'trade_definition_tradeoptions' ||\n                            b.type === 'trade_definition_multiplier' ||\n                            (b.isDescendantOf('trade_definition_multiplier') && b.category_ === 'trade_parameters')\n                    );\n\n                trade_options_blocks.forEach(trade_options_block => trade_options_block.setCurrency(currency));\n            }\n        );\n    }\n\n    registerOnAccountSwitch() {\n        const { client } = this.core;\n\n        this.disposeSwitchAccountListener = reaction(\n            () => client.switch_broadcast,\n            switch_broadcast => {\n                if (!switch_broadcast) return;\n                this.showDigitalOptionsMaltainvestError();\n\n                const { active_symbols, contracts_for } = ApiHelpers.instance;\n\n                if (Blockly.derivWorkspace) {\n                    active_symbols.retrieveActiveSymbols(true).then(() => {\n                        contracts_for.disposeCache();\n                        Blockly.derivWorkspace\n                            .getAllBlocks()\n                            .filter(block => block.type === 'trade_definition_market')\n                            .forEach(block => {\n                                runIrreversibleEvents(() => {\n                                    const fake_create_event = new Blockly.Events.Create(block);\n                                    Blockly.Events.fire(fake_create_event);\n                                });\n                            });\n                    });\n                }\n            }\n        );\n    }\n\n    registerLandingCompanyChangeReaction() {\n        const { client } = this.core;\n\n        this.disposeLandingCompanyChangeReaction = reaction(\n            () => client.landing_company_shortcode,\n            () => this.handleErrorForEu()\n        );\n    }\n\n    registerResidenceChangeReaction() {\n        const { client } = this.core;\n\n        this.disposeResidenceChangeReaction = reaction(\n            () => client.account_settings.country_code,\n            () => this.handleErrorForEu()\n        );\n    }\n\n    setDBotEngineStores() {\n        // DO NOT pass the rootstore in, if you need a prop define it in dbot-skeleton-store ans pass it through.\n        const {\n            flyout,\n            toolbar,\n            save_modal,\n            dashboard,\n            quick_strategy,\n            load_modal,\n            run_panel,\n            blockly_store,\n            summary_card,\n        } = this.root_store;\n        const { client } = this.core;\n        const { handleFileChange } = load_modal;\n        const { loadDataStrategy } = quick_strategy;\n        const { setLoading } = blockly_store;\n        const { setContractUpdateConfig } = summary_card;\n\n        this.dbot_store = {\n            client,\n            flyout,\n            toolbar,\n            save_modal,\n            dashboard,\n            load_modal,\n            run_panel,\n            setLoading,\n            setContractUpdateConfig,\n            loadDataStrategy,\n            handleFileChange,\n        };\n\n        this.api_helpers_store = {\n            server_time: this.core.common.server_time,\n            ws: this.root_store.ws,\n        };\n    }\n\n    onClickOutsideBlockly = event => {\n        if (document.querySelector('.injectionDiv')) {\n            const path = event.path || (event.composedPath && event.composedPath());\n            const is_click_outside_blockly = !path.some(el => el.classList && el.classList.contains('injectionDiv'));\n\n            if (is_click_outside_blockly) {\n                Blockly?.hideChaff(/* allowToolbox */ false);\n            }\n        }\n    };\n\n    showDigitalOptionsMaltainvestError = () => {\n        this.handleErrorForEu(true);\n    };\n}\n","type TTabsTitleProps = {\n    [key: string]: string | number;\n};\n\ntype TDashboardTabsProps = {\n    [key: string]: number;\n};\n\nexport const tabs_title: TTabsTitleProps = Object.freeze({\n    WORKSPACE: 'Workspace',\n    CHART: 'Chart',\n});\n\nexport const DBOT_TABS: TDashboardTabsProps = Object.freeze({\n    DASHBOARD: 0,\n    BOT_BUILDER: 1,\n    CHART: 2,\n    TUTORIAL: 3,\n});\n\nexport const MAX_STRATEGIES = 10;\n\nexport const TAB_IDS = ['id-dbot-dashboard', 'id-bot-builder', 'id-charts', 'id-tutorials'];\n","const getSettingsFromLocal = () => {\n    return JSON.parse(localStorage.getItem('dbot_settings'));\n};\n\nexport const getSetting = key => {\n    const settings = getSettingsFromLocal();\n\n    if (!settings) {\n        return null;\n    }\n\n    return settings[key];\n};\n\nexport const storeSetting = (key, value) => {\n    const settings = getSettingsFromLocal() || {};\n\n    settings[key] = value;\n    localStorage.setItem('dbot_settings', JSON.stringify(settings));\n};\n\nexport const removeKeyValue = key => {\n    const settings = getSettingsFromLocal() || {};\n    delete settings[key];\n\n    localStorage.setItem('dbot_settings', JSON.stringify(settings));\n};\n","import { action, makeObservable, observable } from 'mobx';\nimport { onWorkspaceResize } from '@deriv/bot-skeleton';\nimport { tabs_title } from 'Constants/bot-contents';\nimport { getSetting, storeSetting } from 'Utils/settings';\n\nexport interface IBlocklyStore {\n    is_loading: boolean;\n    active_tab: string;\n    setActiveTab: (tab: string) => void;\n    setContainerSize: () => void;\n    onMount: () => void;\n    onUnmount: () => void;\n    setLoading: () => void;\n    getCachedActiveTab: () => void;\n}\n\nexport default class BlocklyStore implements IBlocklyStore {\n    root_store: any;\n\n    constructor(root_store: any) {\n        makeObservable(this, {\n            is_loading: observable,\n            active_tab: observable,\n            setActiveTab: action.bound,\n            setContainerSize: action.bound,\n            onMount: action.bound,\n            getCachedActiveTab: action.bound,\n            onUnmount: action.bound,\n            setLoading: action.bound,\n        });\n        this.root_store = root_store;\n    }\n\n    is_loading = false;\n\n    active_tab = tabs_title.WORKSPACE;\n\n    setActiveTab(tab: string): void {\n        this.active_tab = tab;\n        storeSetting('active_tab', this.active_tab);\n    }\n\n    setContainerSize(): void {\n        if (this.active_tab === tabs_title.WORKSPACE) {\n            onWorkspaceResize();\n        }\n    }\n\n    onMount(): void {\n        window.addEventListener('resize', this.setContainerSize);\n    }\n\n    getCachedActiveTab(): void {\n        if (getSetting('active_tab')) {\n            this.active_tab = getSetting('active_tab');\n        }\n    }\n\n    onUnmount(): void {\n        window.removeEventListener('resize', this.setContainerSize);\n    }\n\n    setLoading(is_loading: boolean): void {\n        this.is_loading = is_loading;\n    }\n}\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\n// import { tabs_title } from '../constants/bot-contents';\nimport { ServerTime } from '@deriv/bot-skeleton';\nimport { LocalStore } from '@deriv/shared';\n\nconst g_subscribers_map = {};\nlet WS;\n\nexport default class ChartStore {\n    constructor(root_store) {\n        makeObservable(this, {\n            symbol: observable,\n            is_chart_loading: observable,\n            chart_type: observable,\n            granularity: observable,\n            is_contract_ended: computed,\n            onStartBot: action.bound,\n            onStopBot: action.bound,\n            updateSymbol: action.bound,\n            onSymbolChange: action.bound,\n            updateGranularity: action.bound,\n            updateChartType: action.bound,\n            setChartStatus: action.bound,\n            wsSubscribe: action.bound,\n            wsForget: action.bound,\n            wsForgetStream: action.bound,\n            wsSendRequest: action.bound,\n            getMarketsOrder: action.bound,\n        });\n\n        this.root_store = root_store;\n        WS = root_store.ws;\n        const { run_panel } = root_store;\n\n        reaction(\n            () => run_panel.is_running,\n            () => (run_panel.is_running ? this.onStartBot() : this.onStopBot())\n        );\n\n        this.restoreFromStorage();\n    }\n\n    symbol;\n    is_chart_loading;\n    chart_type;\n    granularity;\n\n    get is_contract_ended() {\n        const { transactions } = this.root_store;\n\n        return transactions.contracts.length > 0 && transactions.contracts[0].is_ended;\n    }\n\n    onStartBot() {\n        this.updateSymbol();\n\n        // const { main_content } = this.root_store;\n        // main_content.setActiveTab(tabs_title.CHART);\n    }\n\n    // eslint-disable-next-line\n    onStopBot() {\n        // const { main_content } = this.root_store;\n        // main_content.setActiveTab(tabs_title.WORKSPACE);\n    }\n\n    updateSymbol() {\n        const workspace = Blockly.derivWorkspace;\n        const market_block = workspace.getAllBlocks().find(block => {\n            return block.type === 'trade_definition_market';\n        });\n\n        if (market_block && market_block !== 'na') {\n            const symbol = market_block.getFieldValue('SYMBOL_LIST');\n            this.symbol = symbol;\n        }\n    }\n\n    onSymbolChange(symbol) {\n        this.symbol = symbol;\n        this.saveToLocalStorage();\n    }\n\n    updateGranularity(granularity) {\n        this.granularity = granularity;\n        this.saveToLocalStorage();\n    }\n\n    updateChartType(chart_type) {\n        this.chart_type = chart_type;\n        this.saveToLocalStorage();\n    }\n\n    setChartStatus(status) {\n        this.is_chart_loading = status;\n    }\n\n    saveToLocalStorage() {\n        if (!this.root_store?.app?.core?.client?.is_beta_chart) return;\n        LocalStore.set(\n            'bot.chart_props',\n            JSON.stringify({\n                symbol: this.symbol,\n                granularity: this.granularity,\n                chart_type: this.chart_type,\n            })\n        );\n    }\n\n    restoreFromStorage() {\n        if (!this.root_store?.app?.core?.client?.is_beta_chart) return;\n\n        try {\n            const props = LocalStore.get('bot.chart_props');\n\n            if (props) {\n                const { symbol, granularity, chart_type } = JSON.parse(props);\n                this.symbol = symbol;\n                this.granularity = granularity;\n                this.chart_type = chart_type;\n            } else {\n                this.granularity = 0;\n                this.chart_type = 'line';\n            }\n        } catch {\n            LocalStore.remove('bot.chart_props');\n        }\n    }\n\n    // #region WS\n    wsSubscribe = (req, callback) => {\n        if (req.subscribe === 1) {\n            const key = JSON.stringify(req);\n            const subscriber = WS.subscribeTicksHistory(req, callback);\n            g_subscribers_map[key] = subscriber;\n        }\n    };\n\n    wsForget = req => {\n        const key = JSON.stringify(req);\n        if (g_subscribers_map[key]) {\n            g_subscribers_map[key].unsubscribe();\n            delete g_subscribers_map[key];\n        }\n    };\n\n    wsForgetStream = stream_id => {\n        WS.forgetStream(stream_id);\n    };\n\n    wsSendRequest = req => {\n        if (req.time) {\n            return ServerTime.timePromise().then(() => {\n                return {\n                    msg_type: 'time',\n                    time: ServerTime.get().unix(),\n                };\n            });\n        }\n        if (req.active_symbols) {\n            return WS.activeSymbols();\n        }\n        return WS.storage.send(req);\n    };\n\n    getMarketsOrder = active_symbols => {\n        const synthetic_index = 'synthetic_index';\n\n        const has_synthetic_index = !!active_symbols.find(s => s.market === synthetic_index);\n        return active_symbols\n            .slice()\n            .sort((a, b) => (a.display_name < b.display_name ? -1 : 1))\n            .map(s => s.market)\n            .reduce(\n                (arr, market) => {\n                    if (arr.indexOf(market) === -1) arr.push(market);\n                    return arr;\n                },\n                has_synthetic_index ? [synthetic_index] : []\n            );\n    };\n    // #endregion\n}\n","const getUrlBase = (path = '') => {\n    const l = window.location;\n\n    if (!/^\\/(br_)/.test(l.pathname)) return path;\n\n    const get_path = path.startsWith('/') ? path : `/${path}`;\n\n    return `/${l.pathname.split('/')[1]}${get_path}`;\n};\n\nexport function setBotPublicPath(path: string) {\n    __webpack_public_path__ = path; // eslint-disable-line no-global-assign\n}\n\nexport const getImageLocation = (image_name: string) => getUrlBase(`/public/images/common/${image_name}`);\n\nsetBotPublicPath(getUrlBase('/'));\n","export const tabs_title = Object.freeze({\n    TAB_LOCAL: 'local_tab',\n    TAB_GOOGLE: 'google_tab',\n    TAB_RECENT: 'recent_tab',\n});\n\nexport const clearInjectionDiv = (type, el_ref) => {\n    if (type === 'store') {\n        if (el_ref && el_ref.getElementsByClassName('injectionDiv').length > 1) {\n            el_ref.removeChild(el_ref.getElementsByClassName('injectionDiv')[0]);\n        }\n    } else {\n        el_ref?.current?.removeChild(el_ref?.current?.children[0]);\n    }\n};\n","import { storeSetting } from 'Utils/settings';\n\ntype TTourStatus = {\n    key: string;\n    toggle: string;\n    type: string;\n};\n\ntype TTourList = {\n    [key: number]: string;\n};\n\nexport const tour_type: TTourType = {\n    key: 'onboard_tour',\n};\n\nexport const tour_status_ended: TTourStatus = {\n    key: '',\n    toggle: '',\n    type: `${tour_type.key}_status`,\n};\n\nexport type TTourType = Pick<TTourStatus, 'key'>;\n\nexport const setTourType = (param: string) => {\n    tour_type.key = param;\n};\n\nexport const highlightLoadModalButton = (tour_active: string, step: number) => {\n    const el_ref = document.querySelector('.toolbar__group-btn svg:nth-child(2)');\n    if (tour_active && step === 1) {\n        el_ref?.classList.add('dbot-tour-blink');\n    } else {\n        el_ref?.classList.remove('dbot-tour-blink');\n    }\n};\n\nexport const setTourSettings = (param: number, type: string) => {\n    return storeSetting(type, param);\n};\n\nexport const tour_list: TTourList = Object.freeze({\n    0: 'onboarding',\n    1: 'bot_builder',\n});\n","import { getImageLocation } from '../../../../public-path';\nimport { localize } from '@deriv/translations';\n\nexport type TDescription = Pick<TContent, 'type' | 'content' | 'src' | 'imageclass'>;\n\nexport type TFaqContent = Pick<TContent, 'title' | 'description' | 'src' | 'tab_id'>;\n\nexport type TGuideContent = Omit<TContent, 'title' | 'description'>;\n\nexport type TUserGuideContent = Omit<TContent, 'title' | 'description'>;\n\nexport type TContent = {\n    content?: string;\n    description: TDescription[];\n    id: number;\n    src?: string;\n    subtype?: string;\n    title: string;\n    type: string;\n    url?: string;\n    imageclass?: string;\n    tab_id: number;\n};\n\nexport const user_guide_content: TUserGuideContent[] = [\n    {\n        id: 1,\n        type: 'Tour',\n        subtype: 'OnBoard',\n        content: localize('Get started on Deriv Bot'),\n        src: getImageLocation('dbot-onboard-tour.png'),\n        tab_id: 0,\n    },\n    {\n        id: 2,\n        type: 'Tour',\n        subtype: 'BotBuilder',\n        content: localize('Let’s build a bot!'),\n        src: getImageLocation('bot-builder-tour.png'),\n        tab_id: 0,\n    },\n];\n\nexport const guide_content: TGuideContent[] = [\n    {\n        id: 1,\n        type: 'DBotVideo',\n        content: localize('Deriv Bot - your automated trading partner'),\n        url: 'https://www.youtube.com/embed/QdI5zCkO4Gk',\n        src: getImageLocation('video_dbot.webp'),\n        tab_id: 0,\n    },\n];\n\nexport const faq_content: TFaqContent[] = [\n    {\n        title: localize('What is Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"Deriv Bot is a web-based strategy builder for trading digital options. It’s a platform where you can build your own automated trading bot using drag-and-drop 'blocks'.\"\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('Where do I find the blocks I need?'),\n        description: [\n            {\n                type: 'text',\n                content: localize('Follow these steps:'),\n            },\n            {\n                type: 'text',\n                content: localize('1. Go to <strong>Bot Builder</strong>.'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    \"2. Under the <strong>Blocks menu</strong>, you'll see a list of categories. Blocks are grouped within these categories. Choose the block you want and drag them to the workspace.\"\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('blocks_menu.png'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '3. You can also search for the blocks you want using the search bar above the categories.'\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('blocks_menu_search.png'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    'For more info, <a href=\"https://deriv.com/academy/blog/posts/how-to-build-a-basic-trading-bot-with-dbot/\" target=\"_blank\">check out this blog post</a> on the basics of building a trading bot.'\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('How do I remove blocks from the workspace?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'Click on the block you want to remove and press <strong>Delete</strong> on your keyboard.'\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('How do I create variables?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    '1. Under the <strong>Blocks</strong> menu, go to <strong>Utility > Variables</strong>.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '2. Enter a name for your variable, and hit <strong>Create</strong>. New blocks containing your new variable will appear below.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('3. Choose the block you want and drag it to the workspace.'),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('Do you offer pre-built trading bots on Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"Yes, you can get started with a pre-built bot using the <strong>Quick strategy</strong> feature. You’ll find some of the most popular trading strategies here: Martingale, D'Alembert, and Oscar's Grind. Just select the strategy, enter your trade parameters, and your bot will be created for you. You can always tweak the parameters later.\"\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('What is a quick strategy?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"A quick strategy is a ready-made strategy that you can use in Deriv Bot. There are 3 quick strategies you can choose from: Martingale, D'Alembert, and Oscar's Grind.\"\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('<strong>Using a quick strategy</strong>'),\n            },\n            {\n                type: 'text',\n                content: localize('1. Go to <strong>Quick strategy</strong> and select the strategy you want.'),\n            },\n            {\n                type: 'text',\n                content: localize('2. Select the asset and trade type.'),\n            },\n            {\n                type: 'text',\n                content: localize('3. Set your trade parameters and hit <strong>Run</strong>.'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '4. Once the blocks are loaded onto the workspace, tweak the parameters if you want, or hit <strong>Run</strong> to start trading.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '5. Hit <strong>Save</strong> to download your bot. You can choose to download your bot to your device or your Google Drive.'\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('How do I save my strategy?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'In <strong>Bot Builder</strong>, hit <strong>Save</strong> on the toolbar at the top to download your bot. Give your bot a name, and choose to download your bot to your device or Google Drive. Your bot will be downloaded as an XML file.'\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('How do I import my own trading bot into Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'Just drag the XML file from your computer onto the workspace, and your bot will be loaded accordingly. Alternatively, you can hit <strong>Import</strong> in <strong>Bot Builder</strong>, and choose to import your bot from your computer or from your Google Drive.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('<strong>Import from your computer</strong>'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '1. After hitting <strong>Import</strong>, select <strong>Local</strong> and click <strong>Continue</strong>.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('2. Select your XML file and hit <strong>Open</strong>.'),\n            },\n            {\n                type: 'text',\n                content: localize('3. Your bot will be loaded accordingly.'),\n            },\n            {\n                type: 'text',\n                content: localize('<strong>Import from your Google Drive</strong>'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '1. After hitting <strong>Import</strong>, select <strong>Google Drive</strong> and click <strong>Continue</strong>.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('2. Select your XML file and hit <strong>Select</strong>.'),\n            },\n            {\n                type: 'text',\n                content: localize('3. Your bot will be loaded accordingly.'),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('How do I reset the workspace?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'In <strong>Bot Builder</strong>, hit <strong>Reset</strong> on the toolbar at the top. This will clear the workspace. Please note that any unsaved changes will be lost.'\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('How do I clear my transaction log?'),\n        description: [\n            {\n                type: 'text',\n                content: localize('1. Hit <strong>Reset</strong> at the bottom of stats panel.'),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('reset_transaction_log.png'),\n            },\n            {\n                type: 'text',\n                content: localize('2. Hit <strong>Ok</strong> to confirm.'),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('reset_transaction_log_message.png'),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('How do I control my losses with Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'There are several ways to control your losses with Deriv Bot. Here’s a simple example of how you can implement loss control in your strategy:'\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control_all_block.png'),\n                imageclass: 'loss-control',\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '<strong>1.</strong> Create the following variables and place them under <strong>Run once at start</strong>:'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '• <strong>Stop loss threshold</strong>: Use this variable to store your loss limit. You can assign any amount you want. Your bot will stop when your losses hits or exceeds this amount.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('Example:'),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control_set_stop_loss.png'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '• <strong>Current stake</strong>: Use this variable to store the stake amount. You can assign any amount you want, but it must be a positive number.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('Example:'),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control_set_current_stake.png'),\n            },\n            {\n                type: 'text',\n                content: localize('This is how your trade parameters, variables, and trade options should look like:'),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control_trade_parameters.png'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '<strong>2.</strong> Set the <strong>Purchase conditions</strong>. In this example, your bot will purchase a <strong>Rise</strong> contract when it starts and after a contract closes.'\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control_purchase_conditions.png'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '<strong>3.</strong> Use a logic block to check if <strong>Total profit/loss</strong> is more than the <strong>Stop loss threshold</strong> amount. You can find the <strong>Total profit/loss</strong> variable under <strong>Analysis > Stats</strong> on the <strong>Blocks menu</strong> on the left. Your bot will continue to purchase new contracts until the <strong>Total profit/loss</strong> amount exceeds the <strong>Stop loss threshold</strong> amount.'\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control_restart_trade_conditions.png'),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('Can I run Deriv Bot on multiple tabs in my web browser?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'Yes, you can. However, there are limits on your account, such as maximum number of open positions and maximum aggregate payouts on open positions. So, just keep these limits in mind when opening multiple positions. You can find more info about these limits at <a href=\"https://app.deriv.com/account/account-limits\" target=\"_blank\">Settings > Account limits</a>.'\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('Can I trade cryptocurrencies on Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\"No, we don't offer cryptocurrencies on Deriv Bot.\"),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('Do you sell trading bots?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"No, we don't. However, you'll find quick strategies on Deriv Bot that'll help you build your own trading bot for free.\"\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('In which countries is Deriv Bot available?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'We offer our services in all countries, except for the ones <a href=\"https://deriv.com/tnc/general-terms.pdf\" target=\"_blank\">mentioned in our terms and conditions.</a>'\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('If I close my web browser, will Deriv Bot continue to run?'),\n        description: [\n            {\n                type: 'text',\n                content: localize('No, Deriv Bot will stop running when your web browser is closed.'),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('What are the most popular strategies for automated trading?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"Three of the most commonly used strategies in automated trading are Martingale, D'Alembert, and Oscar's Grind — you can find them all ready-made and waiting for you in Deriv Bot.\"\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n    {\n        title: localize('How do I build a trading bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    '<a href=\"https://www.youtube.com/watch?v=QdI5zCkO4Gk&t=203s\" target=\"_blank\">Watch this video</a> to learn how to build a trading bot on Deriv Bot. Also, <a href=\"https://deriv.com/academy/blog/posts/how-to-build-a-basic-trading-bot-with-dbot/\" target=\"_blank\">check out this blog post</a> on building a trading bot.'\n                ),\n            },\n        ],\n        tab_id: 2,\n    },\n];\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\n\nimport { setColors } from '@deriv/bot-skeleton';\nimport { isMobile } from '@deriv/shared';\n\nimport { clearInjectionDiv } from 'Constants/load-modal';\n\nimport { setTourSettings, tour_type, TTourType } from '../components/dashboard/dbot-tours/utils';\nimport {\n    faq_content,\n    guide_content,\n    user_guide_content,\n    TFaqContent,\n    TGuideContent,\n    TUserGuideContent,\n} from 'Components/dashboard/tutorial-tab/config';\n\nexport interface IDashboardStore {\n    active_tab: number;\n    dialog_options: { [key: string]: string };\n    faq_search_value: string | null;\n    has_mobile_preview_loaded: boolean;\n    is_web_socket_intialised: boolean;\n    initInfoPanel: () => void;\n    is_dialog_open: boolean;\n    is_file_supported: boolean;\n    is_info_panel_visible: boolean;\n    is_preview_on_popup: boolean;\n    onCloseDialog: () => void;\n    onCloseTour: (param: Partial<string>) => void;\n    onTourEnd: (step: number, is_tour_active: boolean) => void;\n    setActiveTab: (active_tab: number) => void;\n    setActiveTabTutorial: (active_tab_tutorials: number) => void;\n    setFAQSearchValue: (faq_search_value: string) => void;\n    setInfoPanelVisibility: (visibility: boolean) => void;\n    setIsFileSupported: (is_file_supported: boolean) => void;\n    setWebSocketState: (is_web_socket_intialised: boolean) => void;\n    setOpenSettings: (toast_message: string, show_toast: boolean) => void;\n    setPreviewOnDialog: (has_mobile_preview_loaded: boolean) => void;\n    setStrategySaveType: (param: string) => void;\n    show_toast: boolean;\n    show_mobile_tour_dialog: boolean;\n    showVideoDialog: (param: { [key: string]: string }) => void;\n    strategy_save_type: string;\n    toast_message: string;\n}\n\nexport default class DashboardStore implements IDashboardStore {\n    root_store: any;\n    tutorials_combined_content: (TFaqContent | TGuideContent | TUserGuideContent)[] = [];\n\n    constructor(root_store: any) {\n        makeObservable(this, {\n            active_tab_tutorials: observable,\n            active_tab: observable,\n            dialog_options: observable,\n            faq_search_value: observable,\n            getFileArray: observable,\n            has_file_loaded: observable,\n            has_mobile_preview_loaded: observable,\n            initInfoPanel: action.bound,\n            active_tour: observable,\n            is_dialog_open: observable,\n            is_file_supported: observable,\n            is_info_panel_visible: observable,\n            is_preview_on_popup: observable,\n            is_tour_dialog_visible: observable,\n            is_web_socket_intialised: observable,\n            is_dark_mode: computed,\n            tutorials_combined_content: observable,\n            onCloseDialog: action.bound,\n            onCloseTour: action.bound,\n            onTourEnd: action.bound,\n            setActiveTab: action.bound,\n            setActiveTabTutorial: action.bound,\n            setWebSocketState: action.bound,\n            setFAQSearchValue: action.bound,\n            setFileLoaded: action.bound,\n            setInfoPanelVisibility: action.bound,\n            setIsFileSupported: action.bound,\n            setPreviewOnDialog: action.bound,\n            setPreviewOnPopup: action.bound,\n            setActiveTour: action.bound,\n            setTourDialogVisibility: action.bound,\n            setOpenSettings: action.bound,\n            show_toast: observable,\n            show_mobile_tour_dialog: observable,\n            showVideoDialog: action.bound,\n            strategy_save_type: observable,\n            toast_message: observable,\n            setStrategySaveType: action.bound,\n            setShowMobileTourDialog: action.bound,\n        });\n        this.root_store = root_store;\n        this.tutorials_combined_content = [...user_guide_content, ...guide_content, ...faq_content];\n\n        const {\n            load_modal: { previewRecentStrategy, current_workspace_id },\n        } = this.root_store;\n\n        const refreshBotBuilderTheme = () => {\n            Blockly.derivWorkspace.asyncClear();\n            Blockly.Xml.domToWorkspace(\n                Blockly.Xml.textToDom(Blockly.derivWorkspace.strategy_to_load),\n                Blockly.derivWorkspace\n            );\n        };\n\n        const setCurrentXML = () => {\n            const xml = Blockly?.Xml.workspaceToDom(Blockly?.derivWorkspace);\n            const current_xml = Blockly?.Xml.domToText(xml);\n            if (Blockly) Blockly.derivWorkspace.strategy_to_load = current_xml;\n        };\n\n        reaction(\n            () => this.is_dark_mode,\n            () => {\n                if (Blockly) setCurrentXML();\n                setColors(this.is_dark_mode);\n                if (this.active_tab === 1) {\n                    refreshBotBuilderTheme();\n                } else {\n                    refreshBotBuilderTheme();\n                    previewRecentStrategy(current_workspace_id);\n                }\n            }\n        );\n        reaction(\n            () => this.is_preview_on_popup,\n            async is_preview_on_popup => {\n                if (is_preview_on_popup) {\n                    this.setPreviewOnPopup(false);\n                }\n            }\n        );\n        this.initInfoPanel();\n    }\n\n    active_tab = 0;\n    active_tab_tutorials = 0;\n    active_tour_step_number = 0;\n    dialog_options = {};\n    faq_search_value = '';\n    getFileArray = [];\n    has_file_loaded = false;\n    has_mobile_preview_loaded = false;\n    active_tour = '';\n    is_dialog_open = false;\n    is_file_supported = false;\n    is_info_panel_visible = false;\n    is_preview_on_popup = false;\n    is_tour_dialog_visible = false;\n    show_toast = false;\n    show_mobile_tour_dialog = false;\n    strategy_save_type = 'unsaved';\n    toast_message = '';\n    is_web_socket_intialised = true;\n\n    get is_dark_mode() {\n        const {\n            app: {\n                core: {\n                    ui: { is_dark_mode_on },\n                },\n            },\n        } = this.root_store;\n        return is_dark_mode_on;\n    }\n\n    setShowMobileTourDialog = (show_mobile_tour_dialog: boolean) => {\n        this.show_mobile_tour_dialog = show_mobile_tour_dialog;\n    };\n\n    setWebSocketState = (is_web_socket_intialised: boolean) => {\n        this.is_web_socket_intialised = is_web_socket_intialised;\n    };\n\n    setOpenSettings = (toast_message: string, show_toast = true) => {\n        this.toast_message = toast_message;\n        this.show_toast = show_toast;\n    };\n\n    setIsFileSupported = (is_file_supported: boolean) => {\n        this.is_file_supported = is_file_supported;\n    };\n\n    initInfoPanel() {\n        if (!localStorage.getItem('dbot_should_show_info')) this.is_info_panel_visible = true;\n    }\n\n    setTourActiveStep = (active_tour_step_number: number) => {\n        this.active_tour_step_number = active_tour_step_number;\n    };\n\n    setPreviewOnDialog = (has_mobile_preview_loaded: boolean) => {\n        this.has_mobile_preview_loaded = has_mobile_preview_loaded;\n        const {\n            load_modal: { onLoadModalClose },\n        } = this.root_store;\n        onLoadModalClose();\n    };\n\n    setStrategySaveType = (strategy_save_type: string) => {\n        this.strategy_save_type = strategy_save_type;\n    };\n\n    setPreviewOnPopup = (is_preview_on_popup: boolean): void => {\n        this.is_preview_on_popup = is_preview_on_popup;\n    };\n\n    setTourDialogVisibility = (is_tour_dialog_visible: boolean): void => {\n        this.is_tour_dialog_visible = is_tour_dialog_visible;\n    };\n\n    setActiveTour = (active_tour: string): void => {\n        this.active_tour = active_tour;\n    };\n\n    setFileLoaded = (has_file_loaded: boolean): void => {\n        this.has_file_loaded = has_file_loaded;\n        clearInjectionDiv('store', document.getElementById('load-strategy__blockly-container'));\n    };\n\n    onCloseDialog = (): void => {\n        this.is_dialog_open = false;\n    };\n\n    setActiveTab = (active_tab: number): void => {\n        this.active_tab = active_tab;\n    };\n\n    setActiveTabTutorial = (active_tab_tutorials: number): void => {\n        this.active_tab_tutorials = active_tab_tutorials;\n    };\n\n    setFAQSearchValue = (faq_search_value: string): void => {\n        this.faq_search_value = faq_search_value;\n    };\n\n    showVideoDialog = (param: { [key: string]: string }): void => {\n        const { url, type } = param;\n        const dialog_type = ['google', 'url'];\n        if (dialog_type.includes(type)) {\n            if (type === 'url') {\n                this.dialog_options = {\n                    url,\n                };\n            }\n            this.is_dialog_open = true;\n        } else {\n            this.is_dialog_open = false;\n        }\n    };\n\n    setInfoPanelVisibility = (is_info_panel_visible: boolean): void => {\n        this.is_info_panel_visible = is_info_panel_visible;\n    };\n\n    onZoomInOutClick = (is_zoom_in: boolean): void => {\n        const workspace = Blockly.mainWorkspace;\n        const metrics = workspace.getMetrics();\n        const addition = is_zoom_in ? 1 : -1;\n\n        workspace.zoom(metrics.viewWidth / 2, metrics.viewHeight / 2, addition);\n    };\n\n    onCloseTour = (): void => {\n        setTourSettings(new Date().getTime(), `${tour_type.key}_token`);\n        this.setActiveTour('');\n    };\n    setTourEnd = (param: TTourType): void => {\n        const { key } = param;\n        if (!isMobile()) this.setTourDialogVisibility(true);\n        setTourSettings(new Date().getTime(), `${key}_token`);\n    };\n\n    onTourEnd = (step: number, is_tour_active: boolean): void => {\n        if (step === 8) {\n            this.onCloseTour();\n            this.setTourEnd(tour_type);\n            this.setActiveTour('');\n        }\n        if (!is_tour_active && step === 3) {\n            this.onCloseTour();\n            this.setTourEnd(tour_type);\n            this.setActiveTour('');\n        }\n    };\n}\n","import crc32 from 'crc-32/crc32';\nimport { action, makeObservable, observable, reaction } from 'mobx';\nimport { DBot } from '@deriv/bot-skeleton';\nimport { cloneObject, isProduction } from '@deriv/shared';\n\nexport default class DataCollectionStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            IS_PENDING: observable,\n            IS_PROCESSED: observable,\n            endpoint: observable,\n            run_id: observable,\n            run_start: observable,\n            should_post_xml: observable,\n            strategy_content: observable,\n            transaction_ids: observable,\n            trackRun: action.bound,\n            trackTransaction: action.bound,\n            setRunId: action.bound,\n            setRunStart: action.bound,\n            setStrategyContent: action.bound,\n            cleanXmlDom: action.bound,\n            getHash: action.bound,\n        });\n        this.root_store = root_store;\n        this.core = core;\n        if (isProduction() || /(.*?)\\.binary.sx$/.test(window.location.hostname)) {\n            this.root_store = root_store;\n\n            reaction(\n                () => this.root_store.run_panel.is_running,\n                () => (this.root_store.run_panel.is_running ? this.trackRun() : undefined)\n            );\n            reaction(\n                () => this.root_store.transactions.transactions,\n                transactions => {\n                    if (this.run_id) this.trackTransaction(transactions);\n                }\n            );\n        }\n    }\n\n    // Constants\n    IS_PENDING = false;\n    IS_PROCESSED = true;\n\n    endpoint = 'https://dbot-conf-dot-deriv-bi-reporting.as.r.appspot.com/dbotconf';\n    run_id = '';\n    run_start = 0;\n    should_post_xml = true;\n    strategy_content = '';\n    transaction_ids = {};\n\n    async trackRun() {\n        const xml_dom = this.cleanXmlDom(Blockly.Xml.workspaceToDom(DBot.workspace, /* opt_noId */ true));\n        const xml_string = Blockly.Xml.domToText(xml_dom);\n        const xml_hash = this.getHash(xml_string);\n\n        if (this.getHash(this.strategy_content) !== xml_hash) {\n            this.should_post_xml = true;\n            this.setStrategyContent(xml_string);\n        }\n\n        this.setRunId(this.getHash(xml_hash + this.core.client.loginid + Math.random()));\n        this.setRunStart(this.core.common.server_time.unix());\n    }\n\n    async trackTransaction(contracts) {\n        const pako = await import(/* webpackChunkName: \"dbot-collection\" */ 'pako');\n        const contract = contracts[0]; // Most recent contract.\n\n        if (!contract) {\n            return;\n        }\n\n        const { buy: transaction_id } = contract.data.transaction_ids;\n        const is_known_transaction = Object.keys(this.transaction_ids).includes(transaction_id.toString());\n\n        if (!is_known_transaction) {\n            this.transaction_ids[transaction_id] = this.IS_PENDING;\n\n            const getPayload = () => {\n                const content = pako.gzip(this.strategy_content);\n                return {\n                    body: content,\n                    headers: {\n                        'Content-Encoding': 'gzip',\n                        'Content-Type': 'application/xml',\n                        Referer: window.location.hostname,\n                    },\n                };\n            };\n\n            fetch(\n                `${this.endpoint}/${this.run_id}/${transaction_id}/${this.run_start}/${this.getHash(\n                    this.strategy_content\n                )}`,\n                {\n                    ...(this.should_post_xml ? getPayload() : {}),\n                    method: 'POST',\n                    mode: 'no-cors',\n                }\n            )\n                .then(() => {\n                    this.should_post_xml = false;\n                    this.transaction_ids[transaction_id] = this.IS_PROCESSED;\n                })\n                .catch(() => {\n                    delete this.transaction_ids[transaction_id];\n                });\n        }\n    }\n\n    setRunId(run_id) {\n        this.run_id = run_id;\n    }\n\n    setRunStart(timestamp) {\n        this.run_start = timestamp;\n    }\n\n    setStrategyContent(strategy_content) {\n        this.strategy_content = strategy_content;\n    }\n\n    cleanXmlDom = xml_dom => {\n        const useless_attributes = ['x', 'y', 'id'];\n        const updated_dom = cloneObject(xml_dom);\n        const removeAttributesRecursively = element => {\n            useless_attributes.forEach(useless_attribute => element.removeAttribute(useless_attribute));\n            Array.from(element.children).forEach(child => removeAttributesRecursively(child));\n        };\n\n        removeAttributesRecursively(updated_dom);\n        return updated_dom;\n    };\n\n    getHash = string => btoa(crc32.str(string));\n}\n","import { action, makeObservable } from 'mobx';\n\nimport { log_types } from '@deriv/bot-skeleton';\nimport { localize } from '@deriv/translations';\n\nexport default class DownloadStore {\n    constructor(root_store) {\n        makeObservable(this, {\n            onClickDownloadTransaction: action.bound,\n            onClickDownloadJournal: action.bound,\n            getSuccessJournalMessage: action.bound,\n        });\n\n        this.root_store = root_store;\n    }\n\n    getSuccessJournalMessage = (message, extra) => {\n        const { profit, sold_for, longcode, transaction_id, current_currency } = extra;\n        switch (message) {\n            case log_types.LOAD_BLOCK: {\n                return localize('Blocks are loaded successfully');\n            }\n            case log_types.NOT_OFFERED: {\n                return localize('Resale of this contract is not offered.');\n            }\n            case log_types.PURCHASE: {\n                return localize('Bought: {{longcode}} (ID: {{transaction_id}})', { longcode, transaction_id });\n            }\n            case log_types.SELL: {\n                return localize('Sold for: {{sold_for}}', { sold_for });\n            }\n            case log_types.PROFIT: {\n                return localize('Profit amount: {{profit}}', { profit });\n            }\n            case log_types.LOST: {\n                return localize('Loss amount: {{profit}}', { profit });\n            }\n            case log_types.WELCOME_BACK: {\n                if (current_currency)\n                    return localize(\n                        'Welcome back! Your messages have been restored. You are using your {{current_currency}} account.',\n                        { current_currency }\n                    );\n                return localize('Welcome back! Your messages have been restored.');\n            }\n            case log_types.WELCOME: {\n                if (current_currency)\n                    return localize('You are using your {{current_currency}} account.', { current_currency });\n                break;\n            }\n            default:\n                return null;\n        }\n    };\n\n    onClickDownloadTransaction = () => {\n        // Transaction Array\n        const transaction_csv_titles = [\n            [\n                localize('Market'),\n                localize('Reference ID (buy)'),\n                localize('Reference ID (sell)'),\n                localize('Barrier'),\n                localize('Start Time'),\n                localize('Entry Spot'),\n                localize('Entry Spot Time'),\n                localize('Exit Spot'),\n                localize('Exit Spot Time'),\n                localize('Buy Price'),\n                localize('Profit/Loss'),\n            ],\n        ];\n        this.root_store.transactions.transactions.forEach(item =>\n            transaction_csv_titles.push([\n                item.data.display_name,\n                item.data.transaction_ids.buy,\n                item.data.transaction_ids.sell,\n                item.data.barrier,\n                item.data.date_start,\n                item.data.entry_tick,\n                item.data.entry_tick_time,\n                item.data.exit_tick,\n                item.data.exit_tick_time,\n                item.data.buy_price,\n                item.data.profit,\n            ])\n        );\n\n        // Push Transaction array to CSV\n        const transaction_csv_content = `data:text/csv;charset=utf-8, ${transaction_csv_titles\n            .map(e => e.join(','))\n            .join('\\n')}`;\n        const transaction_encoded_uri = encodeURI(transaction_csv_content);\n        const transaction_link = document.createElement('a');\n        transaction_link.setAttribute('href', transaction_encoded_uri);\n        transaction_link.setAttribute('download', localize('Transactions.csv'));\n        document.body.appendChild(transaction_link);\n\n        transaction_link.click();\n\n        transaction_link.parentNode.removeChild(transaction_link);\n    };\n\n    onClickDownloadJournal = () => {\n        // Journal Array\n        const journal_csv_titles = [[localize('Date'), localize('Time'), localize('Message')]];\n\n        const journal_messages = this.root_store.journal.filtered_messages;\n\n        journal_messages.map(item => {\n            let array_message;\n            if (item.message_type !== 'success') {\n                array_message = JSON.stringify(item.message);\n            } else {\n                array_message = this.getSuccessJournalMessage(item.message.toString(), item.extra);\n            }\n            const arr = [item.date, item.time, array_message?.replace('&#x2F;', '/')];\n            journal_csv_titles.push(arr);\n        });\n\n        // Push Journal array to CSV\n        const journal_csv_content = `data:text/csv;charset=utf-8, ${journal_csv_titles\n            .map(e => e.join(','))\n            .join('\\n')}`;\n        const journal_encoded_uri = encodeURI(journal_csv_content);\n        const journal_link = document.createElement('a');\n        journal_link.setAttribute('href', journal_encoded_uri);\n        journal_link.setAttribute('download', localize('Journal.csv'));\n        document.body.appendChild(journal_link);\n\n        journal_link.click();\n\n        journal_link.parentNode.removeChild(journal_link);\n    };\n}\n","export const help_content_types = {\n    TEXT: 'text',\n    VIDEO: 'video',\n    IMAGE: 'image',\n    BLOCK: 'block',\n    EXAMPLE: 'example',\n};\n\nconst { TEXT, IMAGE, BLOCK, EXAMPLE } = help_content_types;\n\nexport const help_content_config = public_path => {\n    __webpack_public_path__ = public_path; // eslint-disable-line no-global-assign\n    return {\n        //= ================= Functions ==================\n        procedures_ifreturn: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'if-return' },\n        ],\n        //= ================= Math ==================\n        math_arithmetic: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        math_single: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        math_constrain: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'constrain' },\n        ],\n        // math_number: [\n        //     { type: VIDEO, url: 'https://www.youtube.com/embed/Bb0HnaYNUx4' },\n        //     { type: TEXT },\n        //     { type: IMAGE, url: 'https://d2.alternativeto.net/dist/s/scratch_830736_full.png?format=jpg&width=1600&height=1600&mode=min&upscale=false' },\n        //     { type: VIDEO, url: 'https://www.youtube.com/embed/mi18spqE7R4?controls=0' },\n        //     { type: BLOCK },\n        //     { type: TEXT },\n        //     { type: IMAGE, url: 'https://d2.alternativeto.net/dist/s/scratch_830736_full.png?format=jpg&width=1600&height=1600&mode=min&upscale=false' },\n        // ],\n        //= ================= Text ==================\n        text_print: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }],\n        text_prompt_ext: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }],\n        //= ================= Tick analysis ==================\n        tick_analysis: [{ type: TEXT }, { type: BLOCK }],\n        read_details: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        last_digit: [{ type: TEXT }, { type: BLOCK }],\n        read_ohlc: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'in_candle_list_read' },\n        ],\n        read_ohlc_obj: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'read_candle_value' },\n        ],\n        check_direction: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: TEXT }, { type: TEXT }],\n        get_ohlc: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'get_candle' },\n            { type: TEXT },\n        ],\n        ohlc: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: EXAMPLE, example_id: 'candle_list_1' }],\n        ohlc_values: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: EXAMPLE, example_id: 'candle_list' }],\n        is_candle_black: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/is_candle_black.jpeg` },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/is_candle_black_1.jpeg` },\n            { type: TEXT },\n        ],\n        ohlc_values_in_list: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'candle_list_1' },\n        ],\n        //= ================= Variables ==================\n        variables_gets: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        variables_set: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/create_variable.jpg` },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/set_variable.png` },\n        ],\n        // =============== Time blocks ============\n        epoch: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'epoch' },\n        ],\n        todatetime: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'todatetime' },\n            { type: TEXT },\n        ],\n        totimestamp: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'totimestamp' },\n            { type: TEXT },\n        ],\n        // =============== Notifications blocks ============\n        notify_telegram: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'notify_telegram' },\n        ],\n        // =============== Misc blocks ============\n        console: [{ type: TEXT }, { type: TEXT }, { type: TEXT }, { type: TEXT }, { type: TEXT }, { type: TEXT }],\n        balance: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        // =============== Indicators blocks ============\n        sma_statement: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: IMAGE, width: '60%', url: `${__webpack_public_path__}media/sma_formula.png` },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/sma_chart_1.png` },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/sma_chart_2.png` },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sma_block_example' },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sma_block_example_1' },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sma_array' },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/sma_array_explanation.jpeg` },\n        ],\n        // =============== Root blocks ============\n        trade_definition: [\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: BLOCK },\n        ],\n        trade_definition_tradeoptions: [{ type: TEXT }, { type: BLOCK }],\n        trade_definition_multiplier: [{ type: TEXT }, { type: TEXT }, { type: TEXT }, { type: TEXT }],\n        before_purchase: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }],\n        during_purchase: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sell_available' },\n        ],\n        sell_at_market: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sell_available' },\n        ],\n        after_purchase: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }],\n        trade_again: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: EXAMPLE, example_id: 'trade_again' }],\n        // =============== Contract ============\n        contract_check_result: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'check_result' },\n        ],\n        sell_price: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: EXAMPLE, example_id: 'sell_pl' }],\n        // =============== Logic ============\n        controls_if: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'controls_if' },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'compare_logic' },\n            { type: EXAMPLE, example_id: 'compare_logic_1' },\n        ],\n        logic_operation: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '40%', url: `${__webpack_public_path__}media/logic.png` },\n        ],\n        // =============== Loops ============\n        controls_whileUntil: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'repeat_while' },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'repeat_until' },\n        ],\n        controls_for: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'controls_for' },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        controls_forEach: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'controls_forEach' },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        controls_flow_statements: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'break_out' },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'continue' },\n        ],\n    };\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is mandatory. Here is where you can decide if your bot should continue trading. Only one copy of this block is allowed.'\n        ),\n        localize(\n            'This block is commonly used to adjust the parameters of your next trade and to implement stop loss/take profit logic.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block returns current account balance.'),\n        localize(\n            'The only input parameter determines how block output is going to be formatted. In case if the input parameter is \"string\" then the account currency will be added.'\n        ),\n        localize('Example output of the below example will be:'),\n        localize('1. for \"string\": 1325.68 USD'),\n        localize('2. for \"number\": 1325.68'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is mandatory. Only one copy of this block is allowed. It is added to the canvas by default when you open Deriv Bot.'\n        ),\n        localize(\n            'After defining trade parameters and trade options, you may want to instruct your bot to purchase contracts when specific conditions are met. To do that you can use conditional blocks and indicators blocks to help your bot to make decisions.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is used to determine if the market price moves in the selected direction or not. It gives you a value of \"True\" or \"False\".'\n        ),\n        localize('Examples:'),\n        localize(\n            '1. If the selected direction is \"Rise\", and the previous tick value is less than the current tick value, the output will be \"True\". Otherwise, the output will be an empty string.'\n        ),\n        localize(\n            '2. If the selected direction is \"Fall\", and the previous tick value is more than the current tick value, the output will be \"True\". Otherwise, the output will be an empty string.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block displays messages in the developer’s console with an input that can be either a string of text, a number, boolean, or an array of data.'\n        ),\n        localize('There are 4 message types:'),\n        localize(\"1. 'Log' displays a regular message.\"),\n        localize(\"2. 'Warn' displays a message in yellow to highlight something that needs attention.\"),\n        localize(\"3. 'Error' displays a message in red to highlight something that needs to be resolved immediately.\"),\n        localize(\"4. 'Table' takes an array of data, such as a list of candles, and displays it in a table format.\"),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'You can check the result of the last trade with this block. It can only be placed within the \"Restart trading conditions\" root block.'\n        ),\n        localize(\n            'If \"Win\" is selected, it will return \"True\" if your last trade was successful. Otherwise, it will return an empty string.'\n        ),\n        localize(\n            'If \"Loss\" is selected, it will return \"True\" if your last trade was unsuccessful. Otherwise, it will return an empty string.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.'\n        ),\n        localize('Examples:'),\n        localize(\n            '1. In the below example the loop is terminated in case \"x\" is \"False\" even though only one iteration is complete'\n        ),\n        localize(\n            '2. In the below example the loop jumps to the next iteration without executing below block in case if \"x\" is \"False\"'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block uses the variable \"i\" to control the iterations. With each iteration, the value of \"i\" is determined by the items in a given list.'\n        ),\n        localize('Example:'),\n        localize(\n            '\"i\" starts with the value of 1, and it will be increased by 2 at every iteration. The loop will repeat until \"i\" reaches the value of 12, and then the loop is terminated.'\n        ),\n        localize('You can use \"i\" inside the loop, for example to access list items'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block uses the variable \"i\" to control the iterations. With each iteration, the value of \"i\" is determined by the items in a given list.'\n        ),\n        localize('Example:'),\n        localize(\n            'In this example, the loop will repeat three times, as that is the number of items in the given list. During each iteration, the variable \"i\" will be assigned a value from the list. '\n        ),\n        localize('Please note that changing the value of \"i\" won\\'t change the value of the original item in the list'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block evaluates a statement and will perform an action only when the statement is true.'),\n        localize('Click the plus icon to extend the functionality of this block.'),\n        localize('You can also use \"Compare\" and \"Logic operation\" blocks to make test variables.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block repeats instructions as long as a given condition is true.'),\n        localize('Examples:'),\n        localize(\n            '1. In the example below, the instructions are repeated as long as the value of x is less than or equal to 10. Once the value of x exceeds 10, the loop is terminated.'\n        ),\n        localize(\n            '2. In this example, the instructions are repeated as long as the value of x is greater than or equal to 10. Once the value of x drops below 10, the loop is terminated.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('\"Seconds Since Epoch\" block returns the number of seconds since January 1st, 1970.'),\n        localize('Example:'),\n        localize('1551661986 seconds since Jan 01 1970 (UTC) translates to 03/04/2019 @ 1:13am (UTC).'),\n        localize('You might need it when you want to repeat an actions after certain amount of time.'),\n        localize('The example below restarts trading after 30 or more seconds after 1 minute candle was started.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block gives you a specific candle from within the selected time interval.'),\n        localize('In this example, the open price of a candle is assigned to the variable \"candle_open_price\".'),\n        localize(\n            'In the above example it is assumed that variable candle_open_price is processed somewhere within other blocks.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block returns \"True\" if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.'\n        ),\n        localize(\n            'The term \"candle\" refers to each bar on the candlestick chart. Each candle represents four market prices for the selected time interval:'\n        ),\n        localize('Each candlestick on the chart represents 4 market prices for the selected time interval:'),\n        localize('- Open price: the opening price'),\n        localize('- High price: the highest price'),\n        localize('- Low price: the lowest price'),\n        localize('- Close price: the closing price'),\n        localize(\n            'A black (or red) candle indicates that the open price is higher than the close price. This represents a downward movement of the market price.'\n        ),\n        localize(\n            'A white (or green) candle indicates that the open price is lower than the close price. This represents an upward movement of the market price.'\n        ),\n        localize('The time interval for each candle can be set from one minute to one day.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the last digit of the latest tick value of the selected market. If the latest tick value is 1410.90, this block will return 0. It’s useful for digit-based contracts such as Even/Odd, Matches/Differs, or Higher/Lower.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block performs the \"AND\" or the \"OR\" logic operation with the given values.'),\n        localize(\n            'In case if the \"AND\" operation is selected, the block returns \"True\" only if both given values are \"True\"'\n        ),\n        localize(\n            'In case if the \"OR\" operation is selected, the block returns \"True\" in case if one or both given values are \"True\"'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block performs arithmetic operations between two numbers.'),\n        localize('Available operations:'),\n        localize('- Addition'),\n        localize('- Subtraction'),\n        localize('- Multiplication'),\n        localize('- Division'),\n        localize('- Raise the first number to the power of the second number'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block constrains a given number within a set range.'),\n        localize(\n            'In case if the given number is less than the lower boundary of the range, the block returns the lower boundary value. Similarly, if the given number is greater than the higher boundary, the block will return the higher boundary value. In case if the given value is between boundaries, the block will return the given value unchanged.'\n        ),\n        localize(\n            'In the below example the block returns the value of 10 as the given value (5) is less than the lower boundary (10)'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block performs the following operations to a given number'),\n        localize('Available operations are:'),\n        localize('- Square root'),\n        localize('- Absolute'),\n        localize('- Negation'),\n        localize('- Natural log'),\n        localize('- Euler’s number (2.71) to the power of a given number'),\n        localize('- 10 to the power of a given number'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block sends a message to a Telegram channel. You will need to create your own Telegram bot to use this block.'\n        ),\n        localize('Here’s how:'),\n        localize(\n            '1. Create a Telegram bot and get your Telegram API token. Read more on how to create bots in Telegram here: https://core.telegram.org/bots#6-botfather'\n        ),\n        localize(\n            '2. Start a chat with your newly created Telegram bot and make sure to send it some messages before proceeding to the next step. (e.g. Hello Bot!)'\n        ),\n        localize(\n            '3. Get the chat ID using the Telegram REST API (read more: https://core.telegram.org/bots/api#getupdates)'\n        ),\n        localize(\n            '- Visit the following URL, make sure to replace <access_token> with the Telegram API token you created in Step 1: https://api.telegram.org/bot<access_token>/getUpdates'\n        ),\n        localize('- Find the chat ID property in the response, and copy the value of the id property'),\n        localize(\n            '4. Come back to Deriv Bot and add the Notify Telegram block to the workspace. Paste the Telegram API token and chat ID into the block fields accordingly.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block gives you a list of candles within a selected time interval.'),\n        localize(\n            'In this example, this block is used with another block to get the open prices from a list of candles. The open prices are then assigned to the variable called \"cl\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the selected candle value from a list of candles within the selected time interval. You can choose from open price, close price, high price, low price, and open time.'\n        ),\n        localize(\n            'In this example, the open prices from a list of candles are assigned to a variable called \"candle_list\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the selected candle value from a list of candles. You can choose from open price, close price, high price, low price, and open time.'\n        ),\n        localize('This block requires a list of candles as an input parameter.'),\n        localize('In this example, the open prices from a list of candles are assigned to a variable called \"cl\".'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('Used within a function block, this block returns a value when a specific condition is true.'),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block gives you information about your last contract.'),\n        localize('You can choose to see one of the following:'),\n        localize('- Deal reference ID: the reference ID of the contract'),\n        localize('- Purchase price: the purchase price (stake) of the contract'),\n        localize('- Payout: the payout of the contract'),\n        localize('- Profit: the profit you’ve earned'),\n        localize('- Contract type: the name of the contract type such as Rise, Fall, Touch, No Touch, etс.'),\n        localize('- Entry time: the starting time of the contract'),\n        localize('- Entry value: the value of the first tick of the contract'),\n        localize('- Exit time: the contract expiration time'),\n        localize('- Exit value: the value of the last tick of the contract'),\n        localize(\n            '- Barrier: the barrier value of the contract (applicable to barrier-based trade types such as stays in/out, touch/no touch, etc.)'\n        ),\n        localize('- Result: the result of the last contract: \"win\" or \"loss\"'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the specified candle value for a selected time interval. You can choose which value you want:'\n        ),\n        localize('- Open: the opening price'),\n        localize('- High: the highest price'),\n        localize('- Low: the lowest price'),\n        localize('- Close: the closing price'),\n        localize('- Open time: the opening time stamp'),\n        localize(\n            'In the example below, the opening price is selected, which is then assigned to a variable called \"op\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the selected candle value such as open price, close price, high price, low price, and open time. It requires a candle as an input parameter.'\n        ),\n        localize('In the example below, the open price is assigned to the variable \"op\".'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'Use this block to sell your contract at the market price. Selling your contract is optional. You may choose to sell if the market trend is unfavourable.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the potential profit or loss if you decide to sell your contract. It can only be used within the \"Sell conditions\" root block.'\n        ),\n        localize(\n            'In the example below, the contract will only be sold if the potential profit or loss is more than the stake.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'SMA adds the market price in a list of ticks or candles for a number of time periods, and divides the sum by that number of time periods.'\n        ),\n        localize('The formula for SMA is:'),\n        localize('where n is the number of periods.'),\n        '',\n        localize('What SMA tells you'),\n        localize(\n            'SMA serves as an indicator of the trend. If the SMA points up then the market price is increasing and vice versa. The larger the period number, the smoother SMA line is.'\n        ),\n        localize(\n            'In this example, each point of the SMA line is an arithmetic average of close prices for the last 10 days.'\n        ),\n        localize(\n            'In this example, each point of the SMA line is an arithmetic average of close prices for the last 50 days.'\n        ),\n        '',\n        localize('How to use the SMA block'),\n        localize('Input list accepts a list of ticks or candles, while period is the specified time period.'),\n        localize('Example:'),\n        localize('This will display the SMA for the specified period, using a candle list.'),\n        localize('SMA places equal weight to the entire distribution of values.'),\n        localize('This is the same as the above example, using a tick list.'),\n        localize(\n            'You may compare SMA values calculated on every bot run to identify the market trend direction. Alternatively, you may also use a variation of the SMA block, the Simple Moving Average Array block. '\n        ),\n        localize('This block returns the entire SMA line, containing a list of all values for a given period.'),\n        localize(\n            'If a period of 10 is entered, the Simple Moving Average Array block will return a list of SMA values calculated based on period of 10.'\n        ),\n        localize('The below image illustrates how Simple Moving Average Array block works:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block displays a dialog box with a customised message. When the dialog box is displayed, your strategy is paused and will only resume after you click \"OK\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block displays a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number and can be assigned to a variable. When the dialog box is displayed, your strategy is paused and will only resume after you enter a response and click \"OK\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'Any blocks placed within this block will be executed at every tick. If the default candle interval is set to 1 minute in the Trade Parameters root block, the instructions in this block will be executed once every minute. Place this block outside of any root block.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block converts the number of seconds since the Unix Epoch to a date and time format such as 2019-08-01 00:00:00.'\n        ),\n        localize('Example:'),\n        localize('In this example, the date and time will be displayed in a green notification box.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block converts the date and time to the number of seconds since the Unix Epoch (1970-01-01 00:00:00).'\n        ),\n        localize('Example:'),\n        localize('In this example, a Rise contract will be purchased at midnight on 1 August 2019.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract without manually stopping and restarting your bot.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            \"This block is mandatory. It's added to your strategy by default when you create new strategy. You can not add more than one copy of this block to the canvas.\"\n        ),\n        localize('1. Market'),\n        localize('Select your desired market and asset type. For example, Forex > Major pairs > AUD/JPY'),\n        localize('2. Trade Type'),\n        localize('Select your desired trade type. For example, Up/Down > Rise/Fall'),\n        localize('3. Contract Type'),\n        localize(\n            'Choose what type of contract you want to trade. For example, for the Rise/Fall trade type you can choose one of three options: Rise, Fall, or Both. Selected option will determine available options for the Purchase block.'\n        ),\n        localize('4. Default Candle Interval'),\n        localize('Sets the default time interval for blocks that read list of candles.'),\n        localize('5. Restart buy/sell on error'),\n        localize('Restarts the bot when an error is encountered.'),\n        localize('6. Restart last trade on error'),\n        localize('Repeats the previous trade when an error is encountered.'),\n        localize('7. Run Once at Start'),\n        localize('Place blocks here to perform tasks once when your bot starts running.'),\n        localize('8. Trade Options'),\n        localize('The desired duration, stake, prediction, and/or barrier(s) for the contract is defined here.'),\n    ],\n};\n","import React from 'react';\nimport { StaticUrl } from '@deriv/components';\nimport { Localize, localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('Use this block when you want to use multipliers as your trade type.'),\n        localize('Click the multiplier drop-down menu and choose the multiplier value you want to trade with.'),\n        localize('Your potential profit will be multiplied by the multiplier value you’ve chosen.'),\n        <Localize\n            key={0}\n            i18n_default_text='To learn more about multipliers, please go to the <0>Multipliers</0> page.'\n            components={[<StaticUrl key={0} className='link' href='trade-types/multiplier' />]}\n        />,\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is used to define trade options within the Trade parameters root block. Some options are only applicable for certain trade types. Parameters such as duration and stake are common among most trade types. Prediction is used for trade types such as Digits, while barrier offsets are for trade types that involve barriers such as Touch/No Touch, Ends In/Out, etc.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\"This block assigns a given value to a variable, creating the variable if it doesn't already exist.\"),\n        localize(\n            'A variable is among the most important and powerful components in creating a bot. It is a way to store information, either as text or numbers. The information stored as a variable can be used and changed according to the given instructions. Variables can be given any name, but usually they are given useful, symbolic names so that it is easier to call them during the execution of instructions.'\n        ),\n        localize('Creating a variable'),\n        localize('1. From the block library, enter a name for the new variable and click Create.'),\n        localize('2. The new variable will appear as a block under Set variable.'),\n    ],\n};\n","import { action, makeObservable, observable, runInAction } from 'mobx';\nimport { config } from '@deriv/bot-skeleton';\nimport { help_content_config } from 'Utils/help-content/help-content.config';\nimport * as help_strings from 'Utils/help-content/help-strings';\n\nexport default class FlyoutHelpStore {\n    constructor(root_store) {\n        makeObservable(this, {\n            block_node: observable,\n            block_type: observable,\n            examples: observable,\n            help_string: observable,\n            title: observable,\n            should_next_disable: observable,\n            should_previous_disable: observable,\n            active_helper: observable,\n            setHelpContent: action.bound,\n            setActiveHelper: action.bound,\n            onBackClick: action.bound,\n            onSequenceClick: action.bound,\n            initFlyoutHelp: action.bound,\n            updateSequenceButtons: action.bound,\n            setExamples: action.bound,\n            getHelpContent: action.bound,\n            getFilledBlocksIndex: action.bound,\n            getNextHelpContentIndex: action.bound,\n        });\n\n        this.root_store = root_store;\n    }\n\n    options = {\n        css: false,\n        media: `${__webpack_public_path__}media/`,\n        move: { scrollbars: false, drag: true, wheel: false },\n        zoom: { startScale: config.workspaces.flyoutWorkspacesStartScale },\n        sounds: false,\n    };\n\n    block_node = null;\n    block_type = '';\n    examples = [];\n    help_string = {};\n    title = '';\n    should_next_disable = false;\n    should_previous_disable = false;\n    active_helper = '';\n\n    setHelpContent = async block_node => {\n        const block_type = block_node.getAttribute('type');\n        const title = Blockly.Blocks[block_type].meta().display_name;\n        if (block_type !== '') {\n            this.active_helper = block_type;\n        }\n\n        const { flyout } = this.root_store;\n        this.setExamples(block_type);\n        const example_blocks = this.examples.map(example => example.childNodes[0]);\n        setTimeout(() => flyout.setFlyoutWidth([block_node, ...example_blocks]), 50);\n\n        runInAction(() => {\n            flyout.is_help_content = true;\n            this.block_node = block_node;\n            this.block_type = block_type;\n            this.title = title;\n            this.help_string = help_strings[block_type];\n        });\n\n        if (!flyout.is_search_flyout) {\n            this.updateSequenceButtons();\n        }\n    };\n\n    getHelpContent = async block_node => {\n        let block_content;\n\n        if (block_node) {\n            const target_blocks = this.xml_list_group[block_node];\n            const block_type = target_blocks[0].getAttribute('type');\n            block_content = help_strings[block_type];\n        }\n        return block_content;\n    };\n\n    getFilledBlocksIndex = async blocks_type => {\n        const blocks_content = await Promise.all(blocks_type.map(block => this.getHelpContent(block)));\n        return blocks_content.map((key, index) => (key ? index : null)).filter(value => value !== null);\n    };\n\n    getNextHelpContentIndex = async is_last => {\n        const filled_blocks_index = await this.getFilledBlocksIndex(Object.keys(this.xml_list_group));\n        return is_last ? filled_blocks_index[filled_blocks_index.length - 1] : filled_blocks_index[0];\n    };\n\n    setActiveHelper(active_helper) {\n        this.active_helper = active_helper;\n    }\n\n    onBackClick() {\n        const { toolbox, flyout } = this.root_store;\n\n        if (flyout.is_search_flyout) {\n            const search = document.getElementsByName('search')[0].value;\n            toolbox.onSearch({ search });\n        } else {\n            flyout.refreshCategory();\n        }\n    }\n\n    async onSequenceClick(should_go_next) {\n        const current_block = Array.from(this.xml_list).find(xml => xml.getAttribute('type') === this.block_type);\n\n        let current_block_index;\n\n        Object.keys(this.xml_list_group).forEach((key, index) => {\n            if (current_block.getAttribute('type') === key) {\n                current_block_index = index;\n            }\n        });\n\n        const getNextBlock = async (xml, current_index, is_next) => {\n            const next_index = current_index + (is_next ? 1 : -1);\n            const next_blocks_type = Object.keys(xml).filter((key, index) =>\n                is_next ? next_index <= index : next_index >= index\n            );\n            const next_filled_block = await this.getFilledBlocksIndex(next_blocks_type);\n\n            const next_filled_block_index = is_next\n                ? next_filled_block[0]\n                : next_filled_block[next_filled_block.length - 1];\n            const next_block_type = next_blocks_type[next_filled_block_index];\n\n            if (!next_block_type) {\n                return false;\n            }\n\n            try {\n                await import(/* webpackChunkName: `[request]` */ '@deriv/bot-skeleton');\n                return next_block_type;\n            } catch (e) {\n                return getNextBlock(xml, next_index, is_next);\n            }\n        };\n\n        const block_type = await getNextBlock(this.xml_list_group, current_block_index, should_go_next);\n        if (block_type) {\n            const target_blocks = this.xml_list_group[block_type];\n            this.setHelpContent(target_blocks[0]);\n        }\n    }\n\n    initFlyoutHelp(block_node) {\n        const { flyout, toolbox } = this.root_store;\n        this.xml_list = toolbox.getCategoryContents(flyout.selected_category);\n        this.xml_list_group = this.groupBy(this.xml_list, true);\n\n        this.setHelpContent(block_node);\n    }\n\n    async updateSequenceButtons() {\n        const current_block = Array.from(this.xml_list).find(xml => xml.getAttribute('type') === this.block_type);\n        const current_index = Object.keys(this.xml_list_group).findIndex(\n            key => current_block.getAttribute('type') === key\n        );\n\n        const last_filled_content_index = await this.getNextHelpContentIndex(true);\n        const first_filled_content_index = await this.getNextHelpContentIndex(false);\n\n        runInAction(() => {\n            this.should_previous_disable = current_index === 0 || current_index === first_filled_content_index;\n            this.should_next_disable =\n                current_index === Object.keys(this.xml_list_group).length - 1 ||\n                current_index === last_filled_content_index;\n        });\n    }\n\n    // eslint-disable-next-line\n    groupBy(nodes, should_include_block_only = false) {\n        return Array.from(nodes).reduce((block_group, node) => {\n            const type = node.getAttribute('type');\n\n            if (should_include_block_only && type === null) {\n                return block_group;\n            }\n\n            if (!block_group[type]) {\n                block_group[type] = [];\n            }\n\n            if (!should_include_block_only || (should_include_block_only && type !== null)) {\n                block_group[type].push(node);\n            }\n\n            return block_group;\n        }, {});\n    }\n\n    setExamples(block_type) {\n        const { toolbox } = this.root_store;\n        const all_examples = [...toolbox.toolbox_examples.childNodes];\n        const help_content = help_content_config(__webpack_public_path__)[block_type];\n        const examples_ids = help_content.filter(el => el.type === 'example').map(example => example.example_id);\n        const examples = examples_ids.map(id => all_examples.find(example => example.id === id));\n\n        this.examples = examples;\n    }\n}\n","import { reaction } from 'mobx';\n\nconst GTM = (() => {\n    let root_store;\n\n    const getLoginId = () => {\n        return root_store.core.client.loginid;\n    };\n\n    const getServerTime = () => {\n        return root_store?.core?.server_time?.unix() || Date.now();\n    };\n\n    const pushDataLayer = data => {\n        return root_store?.core?.gtm?.pushDataLayer(data);\n    };\n\n    const init = _root_store => {\n        try {\n            root_store = _root_store;\n\n            const { run_panel, transactions } = root_store;\n            const run_statistics = run_panel.statistics;\n\n            reaction(\n                () => run_panel.is_running,\n                () => run_panel.is_running && onRunBot(run_statistics)\n            );\n\n            reaction(\n                () => transactions.contracts,\n                () => onTransactionClosed(transactions.contracts)\n            );\n        } catch (error) {\n            console.warn('Error initializing GTM reactions ', error); // eslint-disable-line no-console\n        }\n    };\n\n    const onRunBot = statistics => {\n        try {\n            const run_id = `${getLoginId()}-${getServerTime()}`;\n            const counters = `tr:${statistics.number_of_runs},\\\n                ts:${statistics.total_stake},\\\n                py:${statistics.total_payout},\\\n                lc:${statistics.lost_contracts},\\\n                wc:${statistics.won_contracts},\\\n                pr:${statistics.total_profit}`;\n\n            const data = {\n                counters: counters.replace(/\\s/g, ''),\n                event: 'dbot_run',\n                run_id,\n            };\n            pushDataLayer(data);\n        } catch (error) {\n            console.warn('Error pushing run data to datalayer', error); // eslint-disable-line no-console\n        }\n    };\n\n    const onTransactionClosed = contracts => {\n        try {\n            const contract = contracts.length > 0 && contracts[0];\n            if (contract && contract.is_completed) {\n                const data = {\n                    event: 'dbot_run_transaction',\n                    reference_id: contract.refrence_id,\n                };\n                pushDataLayer(data);\n            }\n        } catch (error) {\n            console.warn('Error pushing transaction to datalayer', error); // eslint-disable-line no-console\n        }\n    };\n\n    return {\n        init,\n        pushDataLayer,\n    };\n})();\n\nexport default GTM;\n","/* eslint-disable no-underscore-dangle */\nimport { action, computed, makeObservable, observable } from 'mobx';\nimport { config } from '@deriv/bot-skeleton';\nimport GTM from 'Utils/gtm';\n\nexport default class FlyoutStore {\n    block_listeners = [];\n    block_workspaces = [];\n    flyout_min_width = 440;\n    options = {\n        css: false,\n        media: `${__webpack_public_path__}media/`,\n        move: { scrollbars: false, drag: true, wheel: false },\n        zoom: { startScale: config.workspaces.flyoutWorkspacesStartScale },\n        sounds: false,\n    };\n\n    is_help_content = false;\n    flyout_content = [];\n    flyout_width = this.flyout_min_width;\n    is_visible = false;\n    is_search_flyout = false;\n    is_loading = false;\n    search_term = '';\n    selected_category = null;\n\n    constructor(root_store) {\n        makeObservable(this, {\n            is_help_content: observable,\n            flyout_content: observable,\n            flyout_width: observable,\n            is_visible: observable,\n            is_search_flyout: observable,\n            is_loading: observable,\n            search_term: observable,\n            selected_category: observable,\n            onMount: action.bound,\n            onUnmount: action.bound,\n            initFlyout: action.bound,\n            initBlockWorkspace: action.bound,\n            getFlyout: action.bound,\n            setContents: action.bound,\n            setFlyoutWidth: action.bound,\n            setVisibility: action.bound,\n            setIsSearchFlyout: action.bound,\n            setSelectedCategory: action.bound,\n            getSelectedCategory: action.bound,\n            onClickOutsideFlyout: action.bound,\n            refreshCategory: action.bound,\n            variables_blocks_count: computed,\n            first_get_variable_block_index: computed,\n        });\n\n        this.root_store = root_store;\n    }\n\n    onMount() {\n        this.initFlyout();\n        window.addEventListener('click', this.onClickOutsideFlyout);\n    }\n\n    onUnmount() {\n        window.removeEventListener('click', this.onClickOutsideFlyout);\n    }\n\n    initFlyout() {\n        const workspace = Blockly.derivWorkspace;\n        const options = {\n            parentWorkspace: workspace,\n            RTL: workspace.RTL,\n            horizontalLayout: workspace.horizontalLayout,\n        };\n\n        if (workspace.horizontalLayout) {\n            this.flyout = new Blockly.HorizontalFlyout(options);\n        } else {\n            this.flyout = new Blockly.VerticalFlyout(options);\n        }\n\n        this.flyout.targetWorkspace_ = workspace;\n        this.flyout.workspace_.targetWorkspace = workspace;\n\n        // A flyout connected to a workspace doesn't have its own current gesture.\n        this.flyout.workspace_.getGesture = this.flyout.targetWorkspace_.getGesture.bind(this.flyout.targetWorkspace_);\n\n        // Get variables from the main workspace rather than the target workspace.\n        workspace.variableMap_ = this.flyout.targetWorkspace_.getVariableMap();\n\n        this.flyout.workspace_.createPotentialVariableMap();\n\n        workspace.flyout_ = this.flyout;\n    }\n\n    /**\n     * Intialises a workspace unique to the passed block_node\n     * @param {Element} el_block_workspace Element where Blockly.Workspace will be mounted on\n     * @param {Element} block_node DOM of a Blockly.Block\n     * @memberof FlyoutStore\n     */\n    initBlockWorkspace(el_block_workspace, block_node) {\n        const workspace = Blockly.inject(el_block_workspace, this.options);\n\n        workspace.isFlyout = true;\n        workspace.targetWorkspace = Blockly.derivWorkspace;\n\n        const block = Blockly.Xml.domToBlock(block_node, workspace);\n        // Using block.getHeightWidth() here because getDimentions() also calls Blockly.Xml.domToBlock\n        const block_hw = block.getHeightWidth();\n\n        block.isInFlyout = true;\n\n        // Update block workspace widths to accommodate block widths.\n        // addind 1px to highet and then moving the block 1px down to make block top border visible\n        el_block_workspace.style.height = `${Math.ceil(block_hw.height * this.options.zoom.startScale) + 1}px`;\n        el_block_workspace.style.width = `${Math.ceil(block_hw.width * this.options.zoom.startScale) + 1}px`;\n        block.moveBy(1, 1);\n\n        // Use original Blockly flyout functionality to create block on drag.\n        const block_svg_root = block.getSvgRoot();\n\n        this.block_listeners.push(\n            Blockly.bindEventWithChecks_(block_svg_root, 'mousedown', null, event => {\n                GTM.pushDataLayer({\n                    event: 'dbot_drag_block',\n                    block_type: block.type,\n                });\n                this.flyout.blockMouseDown_(block)(event);\n            }),\n            Blockly.bindEvent_(block_svg_root, 'mouseout', block, block.removeSelect),\n            Blockly.bindEvent_(block_svg_root, 'mouseover', block, block.addSelect)\n        );\n\n        this.block_workspaces.push(workspace);\n        Blockly.svgResize(workspace);\n    }\n\n    getFlyout() {\n        return this.flyout;\n    }\n\n    /**\n     * Parses XML contents passed by Blockly.Toolbox. Supports all default\n     * Blockly.Flyout elements i.e. <block>, <label>, <button> in their\n     * original format, e.g. <label text=\"Hello World\" />\n     * @param {Element[]} xml_list list of XML nodes\n     * @memberof FlyoutStore\n     */\n    setContents(xml_list, search_term = '') {\n        const text_limit = 20;\n        const processed_xml = xml_list;\n\n        this.block_listeners.forEach(listener => Blockly.unbindEvent_(listener));\n        this.block_workspaces.forEach(workspace => workspace.dispose());\n        this.block_listeners = [];\n        this.block_workspaces = [];\n\n        this.is_help_content = false;\n        this.search_term = search_term.length > text_limit ? `${search_term.substring(0, text_limit)}...` : search_term;\n        this.flyout_content = xml_list;\n\n        this.setFlyoutWidth(processed_xml);\n        this.setVisibility(true);\n\n        // apparently setFlyoutWidth doesn't calculate blocks dimentions until they're visible\n        // using setTimeout is a workaround to solve this issue\n        setTimeout(() => this.setFlyoutWidth(processed_xml), 50);\n    }\n\n    /**\n     * Walks through xmlList and finds width of the longest block while setting\n     * height and width (in workspace pixels) attributes on each of the block nodes.\n     * @param {Element[]} xmlList\n     * @memberof FlyoutStore\n     */\n    setFlyoutWidth(xmlList) {\n        let longest_block_width = 0;\n\n        xmlList.forEach(node => {\n            const tag_name = node.tagName.toUpperCase();\n\n            if (tag_name === Blockly.Xml.NODE_BLOCK) {\n                const block_hw = Blockly.Block.getDimensions(node);\n\n                node.setAttribute('width', Math.ceil(block_hw.width * this.options.zoom.startScale));\n                node.setAttribute('height', Math.ceil(block_hw.height * this.options.zoom.startScale));\n                longest_block_width = Math.max(\n                    longest_block_width,\n                    Math.ceil(block_hw.width * this.options.zoom.startScale)\n                );\n            }\n        });\n\n        this.flyout_width = Math.max(this.flyout_min_width, longest_block_width + 65);\n    }\n\n    /**\n     * Sets whether the flyout is visible or not.\n     * @param {boolean} is_visible\n     * @memberof FlyoutStore\n     */\n    setVisibility(is_visible) {\n        this.is_visible = is_visible;\n\n        if (!is_visible) {\n            this.setSelectedCategory(null);\n            this.flyout_content = [];\n        }\n    }\n\n    /**\n     * Sets whether the flyout is search or not.\n     * @param {boolean} is_search\n     * @memberof FlyoutStore\n     */\n    setIsSearchFlyout(is_search) {\n        this.is_search_flyout = is_search;\n    }\n\n    setSelectedCategory(selected_category) {\n        this.selected_category = selected_category;\n    }\n\n    getSelectedCategory() {\n        return this.selected_category;\n    }\n\n    /**\n     * Close the flyout on click outside itself or parent toolbox.\n     */\n    onClickOutsideFlyout(event) {\n        if (!this.is_visible || !Blockly.derivWorkspace) {\n            return;\n        }\n\n        const toolbox = document.getElementById('gtm-toolbox');\n        const path = event.path || (event.composedPath && event.composedPath());\n        const is_flyout_click = path.some(el => el.classList && el.classList.contains('flyout'));\n        const is_search_focus = this.root_store.toolbox.is_search_focus;\n        const isToolboxClick = () => toolbox.contains(event.target);\n\n        if (!is_flyout_click && !isToolboxClick() && !is_search_focus) {\n            this.setVisibility(false);\n            this.setSelectedCategory(null);\n        }\n    }\n\n    refreshCategory() {\n        const category = this.getSelectedCategory();\n        const { toolbox } = this.root_store;\n        const flyout_content = toolbox.getCategoryContents(category);\n        this.setContents(flyout_content);\n    }\n\n    get variables_blocks_count() {\n        return this.flyout_content.filter(block => block.getAttribute('type') === 'variables_get').length;\n    }\n\n    get first_get_variable_block_index() {\n        return this.flyout_content.length - this.variables_blocks_count;\n    }\n}\n","export const button_status = Object.freeze({\n    NORMAL: 0,\n    LOADING: 1,\n    COMPLETED: 2,\n});\n","import { action, makeObservable, observable } from 'mobx';\nimport { config, importExternal } from '@deriv/bot-skeleton';\nimport { getLanguage, localize } from '@deriv/translations';\nimport { button_status } from 'Constants/button-status';\n\nexport default class GoogleDriveStore {\n    constructor(root_store) {\n        makeObservable(this, {\n            is_authorised: observable,\n            updateSigninStatus: action.bound,\n            saveFile: action.bound,\n            loadFile: action.bound,\n            setKey: action.bound,\n            initialise: action.bound,\n            signIn: action.bound,\n            signOut: action.bound,\n            getPickerLanguage: action.bound,\n            checkFolderExists: action.bound,\n            createSaveFilePicker: action.bound,\n            createLoadFilePicker: action.bound,\n            showGoogleDriveFilePicker: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.bot_folder_name = `Binary Bot - ${localize('Strategies')}`;\n        this.google_auth = null;\n        this.setKey();\n        this.client = null;\n        this.access_token = localStorage.getItem('google_access_token') || '';\n        importExternal('https://accounts.google.com/gsi/client').then(() => this.initialiseClient());\n        importExternal('https://apis.google.com/js/api.js').then(() => this.initialise());\n    }\n\n    is_authorised = !!localStorage.getItem('google_access_token');\n\n    setKey = () => {\n        const { scope, discovery_docs } = config.gd;\n        this.client_id = process.env.GD_CLIENT_ID;\n        this.app_id = process.env.GD_APP_ID;\n        this.api_key = process.env.GD_API_KEY;\n        this.scope = scope;\n        this.discovery_docs = discovery_docs;\n    };\n\n    initialise = () => {\n        gapi.load('client:picker', () => gapi.client.load(this.discovery_docs));\n    };\n\n    initialiseClient = () => {\n        this.client = google.accounts.oauth2.initTokenClient({\n            client_id: this.client_id,\n            scope: this.scope,\n            callback: response => {\n                this.access_token = response.access_token;\n                this.updateSigninStatus(true);\n                localStorage.setItem('google_access_token', response.access_token);\n            },\n        });\n    };\n\n    updateSigninStatus(is_signed_in) {\n        this.is_authorised = is_signed_in;\n    }\n\n    signIn() {\n        if (!this.is_authorised) {\n            this.client.requestAccessToken();\n        }\n    }\n\n    signOut() {\n        if (this.access_token) {\n            gapi.client.setToken('');\n            google.accounts.oauth2.revoke(this.access_token);\n            localStorage.removeItem('google_access_token');\n            this.access_token = '';\n        }\n        this.updateSigninStatus(false);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getPickerLanguage() {\n        const language = getLanguage();\n\n        if (language === 'zhTw') {\n            return 'zh-TW';\n        } else if (language === 'zhCn') {\n            return 'zh-CN';\n        }\n        return language;\n    }\n\n    async saveFile(options) {\n        try {\n            await this.signIn();\n            if (this.access_token) gapi.client.setToken({ access_token: this.access_token });\n            await this.checkFolderExists();\n            await this.createSaveFilePicker('application/vnd.google-apps.folder', localize('Select a folder'), options);\n        } catch (err) {\n            if (err.status === 401) {\n                this.signOut();\n            }\n        }\n    }\n\n    async loadFile() {\n        await this.signIn();\n\n        if (this.access_token) gapi.client.setToken({ access_token: this.access_token });\n        try {\n            await gapi.client.drive.files.list({\n                pageSize: 10,\n                fields: 'files(id, name)',\n            });\n        } catch (err) {\n            if (err?.status === 401) {\n                await this.signOut();\n                setTimeout(() => {\n                    const picker = document.getElementsByClassName('picker-dialog-content')[0];\n                    picker.parentNode.removeChild(picker);\n                    const pickerBackground = document.getElementsByClassName('picker-dialog-bg');\n                    if (pickerBackground.length) {\n                        for (let i = 0; i < pickerBackground.length; i++) {\n                            pickerBackground[i].style.display = 'none';\n                        }\n                    }\n                }, 500);\n            }\n        }\n\n        const xml_doc = await this.createLoadFilePicker(\n            'text/xml,application/xml',\n            localize('Select a Deriv Bot Strategy')\n        );\n\n        return xml_doc;\n    }\n\n    async checkFolderExists() {\n        const { files } = gapi.client.drive;\n        const response = await files.list({ q: 'trashed=false' });\n        const mime_type = 'application/vnd.google-apps.folder';\n        const folder = response.result.files.find(file => file.mimeType === mime_type);\n\n        if (folder) {\n            return;\n        }\n\n        await files.create({\n            resource: {\n                name: this.bot_folder_name,\n                mimeType: mime_type,\n                fields: 'id',\n            },\n        });\n    }\n\n    createSaveFilePicker(mime_type, title, options) {\n        const { setButtonStatus } = this.root_store.save_modal;\n        return new Promise(resolve => {\n            const savePickerCallback = data => {\n                if (data.action === google.picker.Action.PICKED) {\n                    const folder_id = data.docs[0].id;\n                    const strategy_file = new Blob([options.content], { type: options.mimeType });\n                    const strategy_file_metadata = JSON.stringify({\n                        name: options.name,\n                        mimeType: options.mimeType,\n                        parents: [folder_id],\n                    });\n\n                    const form_data = new FormData();\n                    form_data.append('metadata', new Blob([strategy_file_metadata], { type: 'application/json' }));\n                    form_data.append('file', strategy_file);\n\n                    const xhr = new XMLHttpRequest();\n                    xhr.responseType = 'json';\n                    xhr.open('POST', 'https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart');\n                    xhr.setRequestHeader('Authorization', `Bearer ${this.access_token}`);\n                    xhr.onload = () => {\n                        if (xhr.status === 401) {\n                            this.signOut();\n                        }\n\n                        setButtonStatus(button_status.NORMAL);\n                        resolve();\n                    };\n                    xhr.send(form_data);\n                } else if (data.action === google.picker.Action.CANCEL) {\n                    setButtonStatus(button_status.NORMAL);\n                }\n            };\n\n            this.showGoogleDriveFilePicker(true, mime_type, title, savePickerCallback);\n        });\n    }\n\n    createLoadFilePicker(mime_type, title) {\n        return new Promise(resolve => {\n            const loadPickerCallback = async data => {\n                if (data.action === google.picker.Action.PICKED) {\n                    const file = data.docs[0];\n                    const file_name = file.name;\n                    const fileId = file.id;\n                    const { files } = gapi.client.drive;\n                    const { setOpenSettings } = this.root_store.dashboard;\n\n                    const response = await files.get({\n                        alt: 'media',\n                        fileId,\n                        mimeType: 'text/plain',\n                    });\n\n                    resolve({ xml_doc: response.body, file_name });\n                    setOpenSettings('import');\n                }\n            };\n\n            this.showGoogleDriveFilePicker(false, mime_type, title, loadPickerCallback);\n        });\n    }\n\n    showGoogleDriveFilePicker(is_save, mime_type, title, callback) {\n        const docs_view = new google.picker.DocsView();\n        docs_view.setIncludeFolders(true);\n        docs_view.setMimeTypes(mime_type);\n\n        if (is_save) {\n            docs_view.setSelectFolderEnabled(true);\n        }\n        const picker = new google.picker.PickerBuilder();\n        picker\n            .setOrigin(`${window.location.protocol}//${window.location.host}`)\n            .setTitle(localize(title))\n            .setLocale(this.getPickerLanguage())\n            .setAppId(this.app_id)\n            .setOAuthToken(this.access_token)\n            .addView(docs_view)\n            .setDeveloperKey(this.api_key)\n            .setSize(1051, 650)\n            .setCallback(callback)\n            .build()\n            .setVisible(true);\n    }\n}\n","import React from 'react';\nimport { Button, ExpansionPanel, Icon } from '@deriv/components';\n\nexport const getIcon = type => {\n    switch (type) {\n        case 'error':\n            return 'IcAlertDanger';\n        case 'warn':\n            return 'IcAlertWarning';\n        case 'info':\n            return 'IcAlertInfo';\n        default:\n            return 'IcAlertWarning';\n    }\n};\n\nexport const messageWithButton = ({ unique_id, type, message, btn_text, onClick }) => (\n    <>\n        <div key={`${unique_id}_message`} className='notify__item-container'>\n            <Icon key={`${unique_id}_icon`} icon={getIcon(type)} size='22' />\n            <div key={`${unique_id}_text`} className='notify__item-message'>\n                {message}\n            </div>\n        </div>\n        <Button\n            key={`${unique_id}_btn`}\n            className='notify__item-button'\n            text={btn_text}\n            onClick={onClick}\n            has_effect\n            secondary\n        />\n    </>\n);\n\nexport const messageWithImage = (message, image) => (\n    <>\n        <div className='notify__item-message'>{message}</div>\n        <img src={image} style={{ width: '100%' }} />\n    </>\n);\n\n// eslint-disable-next-line react/display-name\nexport const arrayAsMessage = parsedArray => measure => <ExpansionPanel message={parsedArray} onResize={measure} />;\n","import { localize } from '@deriv/translations';\nimport { arrayAsMessage, messageWithButton } from '../components/notify-item';\n\nconst showErrorMessageWithButton = (message, block_id, showErrorMessage, centerAndHighlightBlock) => {\n    showErrorMessage(\n        messageWithButton({\n            unique_id: block_id,\n            type: 'error',\n            message,\n            btn_text: localize('Go to block'),\n            onClick: () => {\n                centerAndHighlightBlock();\n            },\n        })\n    );\n};\n\nexport const isCustomJournalMessage = (\n    { message, block_id, variable_name },\n    showErrorMessage,\n    centerAndHighlightBlock,\n    pushMessage\n) => {\n    // notify undefined variable block\n    if (message === undefined && variable_name != null) {\n        showErrorMessageWithButton(\n            localize(\n                \"Variable '{{variable_name}}' has no value. Please set a value for variable '{{variable_name}}' to notify.\",\n                { variable_name }\n            ),\n            block_id,\n            showErrorMessage,\n            centerAndHighlightBlock\n        );\n        return true;\n    }\n    // notify null variable block\n    if (message === null) {\n        pushMessage('NULL');\n        return true;\n    }\n    // notify NaN variable block\n    if (Object.is(message, NaN)) {\n        showErrorMessageWithButton(\n            localize('Tried to perform an invalid operation.'),\n            block_id,\n            showErrorMessage,\n            centerAndHighlightBlock\n        );\n        return true;\n    }\n    // notify list block\n    if (Array.isArray(message)) {\n        const message_length = message.length;\n        const parsedArray = {\n            header:\n                variable_name !== 'null'\n                    ? `${variable_name}: (${message_length})`\n                    : localize('List: ({{message_length}})', { message_length }),\n            content: parseArray(message),\n        };\n        pushMessage(arrayAsMessage(parsedArray));\n        return true;\n    }\n    // notify boolean results\n    if (typeof message === 'boolean') {\n        pushMessage(message.toString());\n        return true;\n    }\n\n    return false;\n};\n\nconst parseArray = message => {\n    return message.map(item => {\n        return {\n            id: new Date().getTime() * Math.random(),\n            value: item && Array.isArray(item) ? parseArray(item) : item,\n        };\n    });\n};\n","import LZString from 'lz-string';\n\nexport const getStoredItemsByUser = (storage_key, loginid, default_value) => {\n    if (!loginid) {\n        return default_value;\n    }\n\n    const storage = getStoredItemsByKey(storage_key, default_value);\n    return storage[loginid] || default_value;\n};\n\nexport const getStoredItemsByKey = (storage_key, default_value) => {\n    try {\n        const session_storage_item = sessionStorage.getItem(storage_key);\n        const decompressed_item = LZString.decompress(session_storage_item);\n        const stored_items = JSON.parse(decompressed_item);\n\n        if (stored_items) {\n            return stored_items;\n        }\n    } catch (e) {\n        // Do nothing.\n    }\n\n    return default_value;\n};\n\nexport const setStoredItemsByKey = (storage_key, value) => {\n    try {\n        const compressed_value = LZString.compress(JSON.stringify(value));\n        sessionStorage.setItem(storage_key, compressed_value);\n    } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn('Could not write to storage.');\n    }\n};\n","import { action, computed, makeObservable, observable, reaction, when } from 'mobx';\n\nimport { log_types, message_types } from '@deriv/bot-skeleton';\nimport { config } from '@deriv/bot-skeleton/src/constants/config';\nimport { formatDate } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nimport { isCustomJournalMessage } from '../utils/journal-notifications';\nimport { getStoredItemsByKey, getStoredItemsByUser, setStoredItemsByKey } from '../utils/session-storage';\nimport { getSetting, storeSetting } from '../utils/settings';\n\nexport default class JournalStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            is_filter_dialog_visible: observable,\n            journal_filters: observable.shallow,\n            filters: observable.shallow,\n            unfiltered_messages: observable.shallow,\n            toggleFilterDialog: action.bound,\n            onLogSuccess: action.bound,\n            onError: action.bound,\n            onNotify: action.bound,\n            pushMessage: action.bound,\n            filtered_messages: computed,\n            getServerTime: action.bound,\n            playAudio: action.bound,\n            checked_filters: computed,\n            filterMessage: action.bound,\n            clear: action.bound,\n            welcomeBackUser: action.bound,\n            welcomeUser: action.bound,\n            registerReactions: action.bound,\n            restoreStoredJournals: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n        this.disposeReactionsFn = this.registerReactions();\n        this.restoreStoredJournals();\n    }\n\n    JOURNAL_CACHE = 'journal_cache';\n\n    is_filter_dialog_visible = false;\n\n    filters = [\n        { id: message_types.ERROR, label: localize('Errors') },\n        { id: message_types.NOTIFY, label: localize('Notifications') },\n        { id: message_types.SUCCESS, label: localize('System') },\n    ];\n    journal_filters = [];\n    unfiltered_messages = [];\n\n    restoreStoredJournals() {\n        const { loginid } = this.core?.client;\n        this.journal_filters = getSetting('journal_filter') || this.filters.map(filter => filter.id);\n        this.unfiltered_messages = getStoredItemsByUser(this.JOURNAL_CACHE, loginid, []);\n    }\n\n    getServerTime() {\n        return this.core?.common.server_time.get();\n    }\n\n    playAudio = sound => {\n        if (sound !== config.lists.NOTIFICATION_SOUND[0][1]) {\n            const audio = document.getElementById(sound);\n            audio.play();\n        }\n    };\n\n    toggleFilterDialog() {\n        this.is_filter_dialog_visible = !this.is_filter_dialog_visible;\n    }\n\n    onLogSuccess(message) {\n        const { log_type, extra } = message;\n        this.pushMessage(log_type, message_types.SUCCESS, '', extra);\n    }\n\n    onError(message) {\n        this.pushMessage(message, message_types.ERROR);\n    }\n\n    onNotify(data) {\n        const { run_panel, dbot } = this.root_store;\n        const { message, className, message_type, sound, block_id, variable_name } = data;\n\n        if (\n            isCustomJournalMessage(\n                { message, block_id, variable_name },\n                run_panel.showErrorMessage,\n                () => dbot.centerAndHighlightBlock(block_id, true),\n                parsed_message => this.pushMessage(parsed_message, message_type || message_types.NOTIFY, className)\n            )\n        ) {\n            this.playAudio(sound);\n            return;\n        }\n        this.pushMessage(message, message_type || message_types.NOTIFY, className);\n        this.playAudio(sound);\n    }\n\n    pushMessage(message, message_type, className, extra = {}) {\n        const { client } = this.core;\n        const { loginid, account_list } = client;\n\n        if (loginid) {\n            const current_account = account_list?.find(account => account?.loginid === loginid);\n            extra.current_currency = current_account?.is_virtual ? 'Demo' : current_account?.title;\n        } else if (message === log_types.WELCOME) {\n            return;\n        }\n\n        const date = formatDate(this.getServerTime());\n        const time = formatDate(this.getServerTime(), 'HH:mm:ss [GMT]');\n        const unique_id = Blockly.utils.genUid();\n\n        this.unfiltered_messages.unshift({ date, time, message, message_type, className, unique_id, extra });\n        this.unfiltered_messages = this.unfiltered_messages.slice(); // force array update\n    }\n\n    get filtered_messages() {\n        return (\n            this.unfiltered_messages\n                // filter messages based on filtered-checkbox\n                .filter(\n                    message =>\n                        this.journal_filters.length &&\n                        this.journal_filters.some(filter => message.message_type === filter)\n                )\n        );\n    }\n\n    get checked_filters() {\n        return this.journal_filters.filter(filter => filter != null);\n    }\n\n    filterMessage(checked, item_id) {\n        if (checked) {\n            this.journal_filters.push(item_id);\n        } else {\n            this.journal_filters.splice(this.journal_filters.indexOf(item_id), 1);\n        }\n\n        storeSetting('journal_filter', this.journal_filters);\n    }\n\n    clear() {\n        this.unfiltered_messages = this.unfiltered_messages.slice(0, 0);\n    }\n\n    welcomeBackUser() {\n        this.pushMessage(log_types.WELCOME_BACK, message_types.SUCCESS, 'journal__text');\n    }\n\n    welcomeUser() {\n        this.pushMessage(log_types.WELCOME, message_types.SUCCESS, 'journal__text');\n    }\n\n    registerReactions() {\n        const { client } = this.core;\n\n        // Write journal messages to session storage on each change in unfiltered messages.\n        const disposeWriteJournalMessageListener = reaction(\n            () => this.unfiltered_messages,\n            unfiltered_messages => {\n                const stored_journals = getStoredItemsByKey(this.JOURNAL_CACHE, {});\n                stored_journals[client.loginid] = unfiltered_messages.slice(0, 5000);\n\n                setStoredItemsByKey(this.JOURNAL_CACHE, stored_journals);\n            }\n        );\n\n        // Attempt to load cached journal messages on client loginid change.\n        const disposeJournalMessageListener = reaction(\n            () => client?.loginid,\n            async loginid => {\n                await when(() => client.account_list?.find(account => account.loginid === loginid)?.title ?? false);\n                this.unfiltered_messages = getStoredItemsByUser(this.JOURNAL_CACHE, loginid, []);\n                if (this.unfiltered_messages.length === 0) {\n                    this.welcomeUser();\n                } else if (this.unfiltered_messages.length > 0) {\n                    this.welcomeBackUser();\n                }\n            },\n            { fireImmediately: true } // For initial welcome message\n        );\n\n        return () => {\n            disposeWriteJournalMessageListener();\n            disposeJournalMessageListener();\n        };\n    }\n}\n","import React from 'react';\nimport { action, computed, makeObservable, observable, reaction } from 'mobx';\nimport { config, getSavedWorkspaces, load, removeExistingWorkspace, save_types, setColors } from '@deriv/bot-skeleton';\nimport { isMobile } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { clearInjectionDiv, tabs_title } from 'Constants/load-modal';\nimport { TStrategy } from 'Types';\n\ninterface ILoadModalStore {\n    active_index: number;\n    is_load_modal_open: boolean;\n    is_explanation_expand: boolean;\n    is_open_button_loading: boolean;\n    is_strategy_loaded: boolean;\n    loaded_local_file: File | null;\n    recent_strategies: string[];\n    dashboard_strategies: Array<TStrategy>;\n    selected_strategy_id: string | undefined;\n    is_strategy_removed: boolean;\n    is_delete_modal_open: boolean;\n    current_workspace_id: string;\n    getSelectedStrategyID: (current_workspace_id: string) => void;\n    refreshStrategies: () => void;\n    loadStrategyToBuilder: (param: TStrategy) => void;\n    refreshStrategiesTheme: () => void;\n    handleFileChange: (\n        event: React.MouseEvent | React.FormEvent<HTMLFormElement> | DragEvent,\n        is_body: boolean\n    ) => boolean;\n    loadFileFromLocal: () => void;\n    onActiveIndexChange: () => void;\n    onDriveConnect: () => void;\n    onDriveOpen: () => void;\n    onEntered: () => void;\n    onLoadModalClose: () => void;\n    onToggleDeleteDialog: (is_delete_modal_open: boolean) => void;\n    onZoomInOutClick: (is_zoom_in: string) => void;\n    previewRecentStrategy: (workspace_id: string) => void;\n    setActiveTabIndex: (index: number) => void;\n    setLoadedLocalFile: (loaded_local_file: File | null) => void;\n    setDashboardStrategies: (strategies: Array<TStrategy>) => void;\n    setRecentStrategies: (recent_strategies: string[]) => void;\n    setSelectedStrategyId: (selected_strategy_id: string) => void;\n    toggleExplanationExpand: () => void;\n    toggleLoadModal: () => void;\n    toggleTourLoadModal: (toggle: boolean) => void;\n    readFile: (is_preview: boolean, drop_event: DragEvent, file: File) => void;\n    updateListStrategies: (workspaces: Array<TStrategy>) => void;\n    getRecentFileIcon: (save_type: { [key: string]: string } | string) => string;\n    getSaveType: (save_type: { [key: string]: string } | string) => string;\n}\n\nexport default class LoadModalStore implements ILoadModalStore {\n    root_store: any;\n    previewed_strategy_id = '';\n\n    constructor(root_store: any) {\n        makeObservable(this, {\n            active_index: observable,\n            previewed_strategy_id: observable,\n            is_load_modal_open: observable,\n            is_explanation_expand: observable,\n            is_open_button_loading: observable,\n            is_strategy_loaded: observable,\n            is_delete_modal_open: observable,\n            is_strategy_removed: observable,\n            loaded_local_file: observable,\n            recent_strategies: observable,\n            dashboard_strategies: observable,\n            selected_strategy_id: observable,\n            current_workspace_id: observable,\n            preview_workspace: computed,\n            selected_strategy: computed,\n            tab_name: computed,\n            setPreviewedStrategyId: action.bound,\n            getSelectedStrategyID: action.bound,\n            refreshStrategies: action.bound,\n            loadStrategyToBuilder: action.bound,\n            refreshStrategiesTheme: action.bound,\n            handleFileChange: action.bound,\n            loadFileFromRecent: action.bound,\n            loadFileFromLocal: action.bound,\n            onActiveIndexChange: action.bound,\n            onDriveConnect: action.bound,\n            onDriveOpen: action.bound,\n            onEntered: action.bound,\n            onLoadModalClose: action.bound,\n            onZoomInOutClick: action.bound,\n            previewRecentStrategy: action.bound,\n            setActiveTabIndex: action.bound,\n            setLoadedLocalFile: action.bound,\n            setRecentStrategies: action.bound,\n            setSelectedStrategyId: action.bound,\n            toggleExplanationExpand: action.bound,\n            toggleLoadModal: action.bound,\n            toggleTourLoadModal: action.bound,\n            readFile: action.bound,\n            resetBotBuilderStrategy: action.bound,\n            setDashboardStrategies: action.bound,\n            updateListStrategies: action.bound,\n        });\n\n        this.root_store = root_store;\n\n        reaction(\n            () => this.active_index,\n            () => this.onActiveIndexChange()\n        );\n        reaction(\n            () => this.is_load_modal_open,\n            async is_load_modal_open => {\n                if (is_load_modal_open) {\n                    this.setRecentStrategies((await getSavedWorkspaces()) || []);\n                } else {\n                    this.onLoadModalClose();\n                }\n            }\n        );\n    }\n\n    recent_workspace: Blockly.WorkspaceSvg | null = null;\n    local_workspace: Blockly.WorkspaceSvg | null = null;\n    drop_zone: unknown;\n\n    active_index = 0;\n    is_load_modal_open = false;\n    is_explanation_expand = false;\n    is_open_button_loading = false;\n    loaded_local_file: File | null = null;\n    recent_strategies: Array<string> = [];\n    dashboard_strategies: Array<TStrategy> | [] = [];\n    selected_strategy_id = '';\n    is_strategy_loaded = false;\n    is_delete_modal_open = false;\n    is_strategy_removed = false;\n    current_workspace_id = '';\n\n    get preview_workspace(): Blockly.WorkspaceSvg | null {\n        if (this.tab_name === tabs_title.TAB_LOCAL) return this.local_workspace;\n        if (this.tab_name === tabs_title.TAB_RECENT) return this.recent_workspace;\n        return null;\n    }\n\n    get selected_strategy(): TStrategy {\n        return (\n            this.dashboard_strategies.find((ws: { id: string }) => ws.id === this.selected_strategy_id) ??\n            this.dashboard_strategies[0]\n        );\n    }\n\n    get tab_name() {\n        if (isMobile()) {\n            if (this.active_index === 0) return tabs_title.TAB_LOCAL;\n            if (this.active_index === 1) return tabs_title.TAB_GOOGLE;\n        }\n        if (this.active_index === 0) return tabs_title.TAB_RECENT;\n        if (this.active_index === 1) return tabs_title.TAB_LOCAL;\n        if (this.active_index === 2) return tabs_title.TAB_GOOGLE;\n        return '';\n    }\n\n    setPreviewedStrategyId = (clicked_id: string) => {\n        this.previewed_strategy_id = clicked_id;\n    };\n\n    getSelectedStrategyID = (current_workspace_id: string) => {\n        this.current_workspace_id = current_workspace_id;\n    };\n\n    setDashboardStrategies(strategies: Array<TStrategy>) {\n        this.dashboard_strategies = strategies;\n        if (!strategies.length) {\n            this.selected_strategy_id = '';\n        }\n    }\n\n    async getDashboardStrategies() {\n        const recent_strategies = await getSavedWorkspaces();\n        this.dashboard_strategies = recent_strategies;\n    }\n\n    handleFileChange = (\n        event: React.MouseEvent | React.FormEvent<HTMLFormElement> | DragEvent,\n        is_body = true\n    ): boolean => {\n        let files;\n        if (event.type === 'drop') {\n            event.stopPropagation();\n            event.preventDefault();\n\n            ({ files } = event.dataTransfer);\n        } else {\n            ({ files } = event.target);\n        }\n\n        const [file] = files;\n\n        if (!is_body) {\n            if (file.name.includes('xml')) {\n                this.setLoadedLocalFile(file);\n                this.getDashboardStrategies();\n            } else {\n                return false;\n            }\n        }\n        this.readFile(!is_body, event, file);\n        event.target.value = '';\n        return true;\n    };\n\n    resetBotBuilderStrategy = () => {\n        const workspace = Blockly.derivWorkspace;\n        if (workspace) {\n            Blockly.derivWorkspace.asyncClear();\n            Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(workspace.cached_xml.main), workspace);\n            Blockly.derivWorkspace.strategy_to_load = workspace.cached_xml.main;\n        }\n    };\n\n    loadStrategyToBuilder = async (strategy: TStrategy) => {\n        if (strategy?.id) {\n            await load({\n                block_string: strategy.xml,\n                strategy_id: strategy.id,\n                file_name: strategy.name,\n                workspace: Blockly?.derivWorkspace,\n                from: strategy.save_type,\n                drop_event: {},\n                showIncompatibleStrategyDialog: false,\n            });\n            Blockly.derivWorkspace.strategy_to_load = strategy.xml;\n        }\n    };\n\n    refreshStrategiesTheme = async () => {\n        await load({\n            block_string: this.selected_strategy?.xml,\n            drop_event: {},\n            workspace: this.recent_workspace,\n            file_name: this.selected_strategy?.name,\n            strategy_id: this.selected_strategy?.id,\n            from: this.selected_strategy?.save_type,\n            showIncompatibleStrategyDialog: false,\n        });\n    };\n\n    loadFileFromRecent = async () => {\n        this.is_open_button_loading = true;\n        if (!this.selected_strategy) {\n            Blockly.derivWorkspace.asyncClear();\n            Blockly.Xml.domToWorkspace(\n                Blockly.Xml.textToDom(Blockly.derivWorkspace.strategy_to_load),\n                Blockly.derivWorkspace\n            );\n            this.is_open_button_loading = false;\n            return;\n        }\n\n        removeExistingWorkspace(this.selected_strategy.id);\n        await load({\n            block_string: this.selected_strategy.xml,\n            strategy_id: this.selected_strategy.id,\n            file_name: this.selected_strategy.name,\n            workspace: Blockly.derivWorkspace,\n            from: this.selected_strategy.save_type,\n            drop_event: {},\n            showIncompatibleStrategyDialog: false,\n        });\n        const recent_files = await getSavedWorkspaces();\n        recent_files.map((strategy: TStrategy) => {\n            const { xml, id } = strategy;\n            if (this.selected_strategy.id === id) {\n                Blockly.derivWorkspace.strategy_to_load = xml;\n            }\n        });\n        this.is_open_button_loading = false;\n    };\n\n    loadFileFromLocal = (): void => {\n        this.is_open_button_loading = true;\n        if (this.loaded_local_file) {\n            this.readFile(false, {} as DragEvent, this.loaded_local_file);\n        }\n        this.is_open_button_loading = false;\n    };\n\n    onActiveIndexChange = (): void => {\n        if (this.tab_name === tabs_title.TAB_RECENT) {\n            this.previewRecentStrategy(this.selected_strategy_id);\n        } else if (this.recent_workspace) {\n            setTimeout(() => {\n                // Dispose of recent workspace when switching away from Recent tab.\n                // Process in next cycle so user doesn't have to wait.\n                this.recent_workspace?.dispose();\n                this.recent_workspace = null;\n            });\n        }\n\n        if (this.tab_name === tabs_title.TAB_LOCAL) {\n            if (!this.drop_zone) {\n                this.drop_zone = document.querySelector('load-strategy__local-dropzone-area');\n\n                if (this.drop_zone) {\n                    this.drop_zone.addEventListener('drop', event => this.handleFileChange(event, false));\n                }\n            }\n        }\n\n        // Dispose of local workspace when switching away from Local tab.\n        else if (this.local_workspace) {\n            setTimeout(() => {\n                this.local_workspace?.dispose();\n                this.local_workspace = null;\n                this.setLoadedLocalFile(null);\n            }, 0);\n        }\n\n        // Forget about drop zone when not on Local tab.\n        if (this.tab_name !== tabs_title.TAB_LOCAL && this.drop_zone) {\n            this.drop_zone.removeEventListener('drop', event => this.handleFileChange(event, false));\n        }\n    };\n\n    onDriveConnect = (): void => {\n        const { google_drive } = this.root_store;\n\n        if (google_drive.is_authorised) {\n            google_drive.signOut();\n        } else {\n            google_drive.signIn();\n        }\n    };\n\n    async onDriveOpen() {\n        const { loadFile } = this.root_store.google_drive;\n        const { xml_doc, file_name } = await loadFile();\n        await load({\n            block_string: xml_doc,\n            file_name,\n            workspace: Blockly.derivWorkspace,\n            from: save_types.GOOGLE_DRIVE,\n            drop_event: null,\n            strategy_id: null,\n            showIncompatibleStrategyDialog: null,\n        });\n\n        const { active_tab } = this.root_store.dashboard;\n        if (active_tab === 1) this.toggleLoadModal();\n\n        this.root_store.dashboard.is_dialog_open = false;\n    }\n\n    onEntered = (): void => {\n        this.previewRecentStrategy(this.selected_strategy_id);\n    };\n\n    onLoadModalClose = (): void => {\n        if (this.recent_workspace) {\n            this.recent_workspace = null;\n        }\n        if (this.local_workspace) {\n            this.local_workspace = null;\n        }\n\n        this.setActiveTabIndex(0); // Reset to first tab.\n        this.setLoadedLocalFile(null);\n    };\n\n    onZoomInOutClick = (is_zoom_in: string): void => {\n        if (this.preview_workspace) {\n            this.preview_workspace.zoomCenter(is_zoom_in ? 1 : -1);\n        }\n    };\n\n    previewRecentStrategy = (workspace_id: string): void => {\n        if (!workspace_id) this.setSelectedStrategyId(this.current_workspace_id);\n        else this.setSelectedStrategyId(workspace_id);\n        if (!this.selected_strategy) {\n            return;\n        }\n        const {\n            dashboard: { active_tab },\n        } = this.root_store;\n        //removed the dispose here so on switch of tab it does not\n        //throw xml error\n        if (active_tab === 1 && !this.is_load_modal_open) {\n            this.recent_workspace = null;\n            this.setLoadedLocalFile(null);\n        }\n\n        const dark_mode = document.body.classList.contains('theme--dark');\n        setColors(dark_mode);\n\n        //to load the bot on first load\n        const ref = document.getElementById('load-strategy__blockly-container');\n        if (!ref) {\n            // eslint-disable-next-line no-console\n            console.warn('Could not find preview workspace element.');\n            return;\n        }\n        if (this.tab_name !== tabs_title.TAB_LOCAL && this.recent_workspace) {\n            clearInjectionDiv('store', ref);\n            this.recent_workspace.dispose();\n            this.recent_workspace = null;\n        }\n        if (!this.recent_workspace?.rendered) {\n            this.recent_workspace = Blockly.inject(ref, {\n                media: `${__webpack_public_path__}media/`,\n                zoom: {\n                    wheel: true,\n                    startScale: config.workspaces.previewWorkspaceStartScale,\n                },\n                readOnly: true,\n                scrollbars: true,\n            });\n        }\n        this.refreshStrategiesTheme();\n    };\n\n    setActiveTabIndex = (index: number): void => {\n        this.active_index = index;\n    };\n\n    setLoadedLocalFile = (loaded_local_file: File | null): void => {\n        this.loaded_local_file = loaded_local_file;\n    };\n\n    setRecentStrategies = (recent_strategies: string[]): void => {\n        this.recent_strategies = recent_strategies;\n    };\n\n    refreshStrategies = (): void => {\n        this.setRecentStrategies(this.recent_strategies);\n    };\n\n    setSelectedStrategyId = (selected_strategy_id: string): void => {\n        this.selected_strategy_id = selected_strategy_id;\n    };\n\n    toggleExplanationExpand = (): void => {\n        this.is_explanation_expand = !this.is_explanation_expand;\n    };\n\n    toggleLoadModal = (): void => {\n        this.is_load_modal_open = !this.is_load_modal_open;\n        if (this.selected_strategy_id) this.previewRecentStrategy(this.selected_strategy_id);\n    };\n\n    toggleTourLoadModal = (toggle = !this.is_load_modal_open) => {\n        this.is_load_modal_open = toggle;\n    };\n\n    updateListStrategies = (workspaces: Array<TStrategy>): void => {\n        if (workspaces) {\n            (this.dashboard_strategies as Array<TStrategy>) = workspaces;\n        }\n    };\n\n    getRecentFileIcon = (save_type: { [key: string]: string } | string): string => {\n        switch (save_type) {\n            case save_types.UNSAVED:\n                return 'IcReports';\n            case save_types.LOCAL:\n                return 'IcMyComputer';\n            case save_types.GOOGLE_DRIVE:\n                return 'IcGoogleDrive';\n            default:\n                return 'IcReports';\n        }\n    };\n\n    getSaveType = (save_type: { [key: string]: string } | string): string => {\n        switch (save_type) {\n            case save_types.UNSAVED:\n                return localize('Unsaved');\n            case save_types.LOCAL:\n                return localize('Local');\n            case save_types.GOOGLE_DRIVE:\n                return localize('Google Drive');\n            default:\n                return localize('Unsaved');\n        }\n    };\n\n    onToggleDeleteDialog = (is_delete_modal_open: boolean): void => {\n        this.is_delete_modal_open = is_delete_modal_open;\n    };\n\n    readFile = (is_preview: boolean, drop_event: DragEvent, file: File): void => {\n        const file_name = file?.name.replace(/\\.[^/.]+$/, '');\n        const reader = new FileReader();\n        reader.onload = action(e => {\n            const load_options = {\n                block_string: e?.target?.result,\n                drop_event,\n                from: save_types.LOCAL,\n                workspace: null as Blockly.WorkspaceSvg | null,\n                file_name: '',\n                strategy_id: '',\n                showIncompatibleStrategyDialog: false,\n            };\n            const ref = document.getElementById('load-strategy__blockly-container');\n            if (is_preview && ref) {\n                this.local_workspace = Blockly.inject(ref, {\n                    media: `${__webpack_public_path__}media/`, // eslint-disable-line\n                    zoom: {\n                        wheel: false,\n                        startScale: config.workspaces.previewWorkspaceStartScale,\n                    },\n                    readOnly: true,\n                    scrollbars: true,\n                });\n                load_options.workspace = this.local_workspace;\n            } else {\n                load_options.workspace = Blockly.derivWorkspace;\n                load_options.file_name = file_name;\n            }\n            load(load_options);\n        });\n        reader.readAsText(file);\n    };\n}\n","import { config as qs_config } from '@deriv/bot-skeleton';\nimport { localize } from '@deriv/translations';\nimport { TConfigItem, TStrategies, TValidationItem } from './types';\n\nexport const FORM_TABS = [\n    {\n        label: localize('Trade Parameters'),\n        value: 'TRADE_PARAMETERS',\n    },\n    {\n        label: localize('Description'),\n        value: 'DESCRIPTION',\n        disabled: true,\n    },\n];\n\nconst NUMBER_DEFAULT_VALIDATION: TValidationItem = {\n    type: 'min',\n    value: 1,\n    getMessage: (min: string | number) => localize('Must be a number higher than {{ min }}', { min: Number(min) - 1 }),\n};\n\nconst SYMBOL: TConfigItem = {\n    type: 'symbol',\n    fullWidth: true,\n    name: 'symbol',\n};\n\nconst TRADETYPE: TConfigItem = {\n    type: 'tradetype',\n    name: 'tradetype',\n    dependencies: ['symbol'],\n};\n\nconst TRADETYPE_FULL_WIDTH: TConfigItem = {\n    type: 'tradetype',\n    name: 'tradetype',\n    dependencies: ['symbol'],\n    fullWidth: true,\n};\n\nconst CONTRACT_TYPE: TConfigItem = {\n    type: 'contract_type',\n    name: 'type',\n    dependencies: ['symbol', 'tradetype'],\n};\n\nconst LABEL_STAKE: TConfigItem = {\n    type: 'label',\n    label: localize('Initial Stake'),\n    description: localize('The amount that you pay to enter a trade.'),\n};\n\nconst STAKE: TConfigItem = {\n    type: 'number',\n    name: 'stake',\n    validation: ['number', 'required', 'ceil', NUMBER_DEFAULT_VALIDATION],\n};\n\nconst LABEL_DURATION: TConfigItem = {\n    type: 'label',\n    label: localize('Duration'),\n    description: localize('The trade length of your purchased contract.'),\n    hide: ['desktop'],\n};\n\nconst DURATION_TYPE: TConfigItem = {\n    type: 'durationtype',\n    name: 'durationtype',\n    dependencies: ['symbol', 'tradetype'],\n    attached: true,\n};\n\nconst DURATION: TConfigItem = {\n    type: 'number',\n    name: 'duration',\n    attached: true,\n    validation: ['number', 'required', 'min', 'max'],\n};\n\nconst LABEL_PROFIT: TConfigItem = {\n    type: 'label',\n    label: localize('Profit Threshold'),\n    description: localize('The bot will stop trading if your total profit exceeds this amount.'),\n};\n\nconst PROFIT: TConfigItem = {\n    type: 'number',\n    name: 'profit',\n    validation: ['number', 'required', 'ceil', NUMBER_DEFAULT_VALIDATION],\n};\n\nconst LABEL_LOSS: TConfigItem = {\n    type: 'label',\n    label: localize('Loss Threshold'),\n    description: localize('The bot will stop trading if your total loss exceeds this amount.'),\n};\n\nconst LOSS: TConfigItem = {\n    type: 'number',\n    name: 'loss',\n    validation: ['number', 'required', 'ceil', NUMBER_DEFAULT_VALIDATION],\n};\n\nconst LABEL_SIZE: TConfigItem = {\n    type: 'label',\n    label: localize('Size'),\n    description: localize(\n        'The multiplier amount used to increase your stake if you’re losing a trade. Value must be higher than 1.'\n    ),\n};\n\nconst SIZE: TConfigItem = {\n    type: 'number',\n    name: 'size',\n    validation: [\n        'number',\n        'required',\n        'floor',\n        {\n            type: 'min',\n            value: String(qs_config.QUICK_STRATEGY.DEFAULT.size),\n            getMessage: (min: string | number) =>\n                localize('The value must be equal or greater than {{ min }}', { min }),\n        },\n    ],\n};\n\nconst LABEL_DALEMBERT_UNIT: TConfigItem = {\n    type: 'label',\n    label: localize('Unit'),\n    description: localize(\"The amount that you may add to your stake if you're losing a trade.\"),\n};\n\nconst UNIT: TConfigItem = {\n    type: 'number',\n    name: 'unit',\n    validation: ['number', 'required', 'ceil', NUMBER_DEFAULT_VALIDATION],\n};\n\nconst CHECKBOX_MAX_STAKE: TConfigItem = {\n    type: 'checkbox',\n    name: 'boolean_max_stake',\n    label: localize('Max stake'),\n    description: localize('The stake for your next trade will reset to the initial stake if it exceeds this value.'),\n    attached: true,\n};\n\nconst MAX_STAKE: TConfigItem = {\n    type: 'number',\n    name: 'max_stake',\n    validation: ['number', 'required', 'ceil', 'min'],\n    should_have: [{ key: 'boolean_max_stake', value: true }],\n    attached: true,\n};\n\nexport const STRATEGIES: TStrategies = {\n    MARTINGALE: {\n        name: 'martingale_max-stake',\n        label: localize('Martingale'),\n        description: localize(\n            'The Martingale strategy multiplies the stake by the chosen multiplier after every losing trade. The stake for the next trade resets to the initial stake after a successful trade. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake.'\n        ),\n        fields: [\n            [SYMBOL, TRADETYPE, CONTRACT_TYPE, LABEL_STAKE, STAKE, LABEL_DURATION, DURATION_TYPE, DURATION],\n            [LABEL_PROFIT, PROFIT, LABEL_LOSS, LOSS, LABEL_SIZE, SIZE, CHECKBOX_MAX_STAKE, MAX_STAKE],\n        ],\n    },\n    D_ALEMBERT: {\n        name: 'dalembert_max-stake',\n        label: localize('D’Alembert'),\n        description: localize(\n            \"The D'Alembert strategy increases the stake after a losing trade and reduces the stake after a successful trade by the number of units that traders decide. One unit is equal to the amount of the initial stake. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake.\"\n        ),\n        fields: [\n            [SYMBOL, TRADETYPE, CONTRACT_TYPE, LABEL_STAKE, STAKE, DURATION_TYPE, DURATION],\n            [LABEL_PROFIT, PROFIT, LABEL_LOSS, LOSS, LABEL_DALEMBERT_UNIT, UNIT, CHECKBOX_MAX_STAKE, MAX_STAKE],\n        ],\n    },\n    OSCARS_GRIND: {\n        name: 'oscars_grind_max-stake',\n        label: localize('Oscar’s Grind'),\n        description: localize(\n            \"The Oscar's Grind strategy aims to potentially make one unit of profit per session. A new session starts when the target profit is reached. If a losing trade is followed by a successful one, the stake increases by one unit. In every other scenario, the stake for the next trade will be the same as the previous one. If the stake for the next trade exceeds the gap between the target profit and current loss of the session, it adjusts to the gap size. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake.\"\n        ),\n        fields: [\n            [SYMBOL, TRADETYPE, CONTRACT_TYPE, LABEL_STAKE, STAKE, DURATION_TYPE, DURATION],\n            [LABEL_PROFIT, PROFIT, LABEL_LOSS, LOSS, CHECKBOX_MAX_STAKE, MAX_STAKE],\n        ],\n    },\n    REVERSE_MARINGALE: {\n        name: 'reverse_martingale',\n        label: localize('Reverse Martingale'),\n        description: localize(\n            'The Reverse Martingale strategy multiplies the stake by the chosen multiplier after every successful trade. The stake for the next trade will reset to the initial stake after a losing trade. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake.'\n        ),\n        fields: [\n            [SYMBOL, TRADETYPE, CONTRACT_TYPE, LABEL_STAKE, STAKE, LABEL_DURATION, DURATION_TYPE, DURATION],\n            [LABEL_PROFIT, PROFIT, LABEL_LOSS, LOSS, LABEL_SIZE, SIZE, CHECKBOX_MAX_STAKE, MAX_STAKE],\n        ],\n    },\n    REVERSE_D_ALEMBERT: {\n        name: 'reverse_dalembert',\n        label: localize('Reverse D’Alembert'),\n        description: localize(\n            \"The Reverse D'Alembert strategy increases the stake after a successful trade and reduces the stake after a losing trade by the number of units that traders decide. One unit is equal to the amount of the initial stake. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake.\"\n        ),\n        fields: [\n            [SYMBOL, TRADETYPE, CONTRACT_TYPE, LABEL_STAKE, STAKE, LABEL_DURATION, DURATION_TYPE, DURATION],\n            [LABEL_PROFIT, PROFIT, LABEL_LOSS, LOSS, LABEL_DALEMBERT_UNIT, UNIT, CHECKBOX_MAX_STAKE, MAX_STAKE],\n        ],\n    },\n    '1_3_2_6': {\n        name: '1_3_2_6',\n        label: localize('1-3-2-6'),\n        description: localize(\n            'The 1-3-2-6 strategy aims to maximise profits with four consecutive wins. One unit is equal to the amount of the initial stake. The stake will adjust from 1 unit to 3 units after the first successful trade, then to 2 units after your second successful trade, and to 6 units after the third successful trade. The stake for the next trade will reset to the initial stake if there is a losing trade or a completion of the trade cycle.'\n        ),\n        fields: [\n            [SYMBOL, TRADETYPE, CONTRACT_TYPE, LABEL_STAKE, STAKE, DURATION_TYPE, DURATION],\n            [LABEL_PROFIT, PROFIT, LABEL_LOSS, LOSS],\n        ],\n    },\n};\n","import { action, makeObservable, observable, reaction } from 'mobx';\nimport { ApiHelpers, config as qs_config, load } from '@deriv/bot-skeleton';\nimport { save_types } from '@deriv/bot-skeleton/src/constants/save-type';\nimport { STRATEGIES } from 'Components/quick-strategy/config';\nimport { TFormData } from 'Components/quick-strategy/types';\nimport RootStore from './root-store';\n\nexport type TActiveSymbol = {\n    group: string;\n    text: string;\n    value: string;\n};\n\ninterface IQuickStrategyStore {\n    current_duration_min_max: {\n        min: number;\n        max: number;\n    };\n    root_store: RootStore;\n    is_open: boolean;\n    selected_strategy: string;\n    form_data: TFormData;\n    is_contract_dialog_open: boolean;\n    is_stop_bot_dialog_open: boolean;\n    setFormVisibility: (is_open: boolean) => void;\n    setSelectedStrategy: (strategy: string) => void;\n    setValue: (name: string, value: string) => void;\n    onSubmit: (data: TFormData) => void;\n    toggleStopBotDialog: () => void;\n    setCurrentDurationMinMax: (min: number, max: number) => void;\n}\n\nexport default class QuickStrategyStore implements IQuickStrategyStore {\n    root_store: RootStore;\n    is_open = false;\n    selected_strategy = 'MARTINGALE';\n    form_data: TFormData = {\n        symbol: qs_config.QUICK_STRATEGY.DEFAULT.symbol,\n        tradetype: qs_config.QUICK_STRATEGY.DEFAULT.tradetype,\n        durationtype: qs_config.QUICK_STRATEGY.DEFAULT.durationtype,\n        action: 'RUN',\n    };\n    is_contract_dialog_open = false;\n    is_stop_bot_dialog_open = false;\n    current_duration_min_max = {\n        min: 0,\n        max: 10,\n    };\n\n    constructor(root_store: RootStore) {\n        makeObservable(this, {\n            current_duration_min_max: observable,\n            form_data: observable,\n            is_contract_dialog_open: observable,\n            is_open: observable,\n            is_stop_bot_dialog_open: observable,\n            selected_strategy: observable,\n            onSubmit: action,\n            setCurrentDurationMinMax: action,\n            setFormVisibility: action,\n            setSelectedStrategy: action,\n            setValue: action,\n            toggleStopBotDialog: action,\n        });\n        this.root_store = root_store;\n        reaction(\n            () => this.is_open,\n            () => {\n                if (!this.is_open) {\n                    this.selected_strategy = 'MARTINGALE';\n                }\n            }\n        );\n    }\n\n    setFormVisibility = (is_open: boolean) => {\n        this.is_open = is_open;\n    };\n\n    setSelectedStrategy = (strategy: string) => {\n        this.selected_strategy = strategy;\n    };\n\n    setValue = (name: string, value: string | number | boolean) => {\n        this.form_data[name as keyof TFormData] = value;\n    };\n\n    setCurrentDurationMinMax = (min = 0, max = 10) => {\n        this.current_duration_min_max = {\n            min,\n            max,\n        };\n    };\n\n    onSubmit = async (data: TFormData) => {\n        const { contracts_for } = ApiHelpers.instance;\n        const market = await contracts_for.getMarketBySymbol(data.symbol);\n        const submarket = await contracts_for.getSubmarketBySymbol(data.symbol);\n        const trade_type_cat = await contracts_for.getTradeTypeCategoryByTradeType(data.tradetype);\n        const selected_strategy = STRATEGIES[this.selected_strategy];\n        const strategy_xml = await import(/* webpackChunkName: `[request]` */ `../xml/${selected_strategy.name}.xml`);\n        const strategy_dom = Blockly.Xml.textToDom(strategy_xml.default);\n\n        const modifyValueInputs = (key: string, value: number) => {\n            const el_value_inputs = strategy_dom?.querySelectorAll(`value[strategy_value=\"${key}\"]`);\n            el_value_inputs?.forEach((el_value_input: HTMLElement) => {\n                if (key.includes('boolean'))\n                    if (value)\n                        el_value_input.innerHTML = `<block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block>`;\n                    else\n                        el_value_input.innerHTML = `<block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block>`;\n                else\n                    el_value_input.innerHTML = `<shadow type=\"math_number\"><field name=\"NUM\">${value}</field></shadow>`;\n            });\n        };\n\n        const modifyFieldDropdownValues = (name: string, value: string) => {\n            const name_list = `${name.toUpperCase()}_LIST`;\n            const el_blocks = strategy_dom?.querySelectorAll(`field[name=\"${name_list}\"]`);\n\n            el_blocks?.forEach((el_block: HTMLElement) => {\n                el_block.innerHTML = value;\n            });\n        };\n        const { unit, action, ...rest_data } = data;\n        const fields_to_update = {\n            market,\n            submarket,\n            tradetypecat: trade_type_cat,\n            dalembert_unit: unit,\n            oscar_unit: unit,\n            ...rest_data,\n        };\n\n        Object.keys(fields_to_update).forEach(key => {\n            const value = fields_to_update[key as keyof typeof fields_to_update];\n\n            if (!isNaN(value as number)) {\n                modifyValueInputs(key, value as number);\n            } else if (typeof value === 'string') {\n                modifyFieldDropdownValues(key, value);\n            }\n        });\n\n        const { derivWorkspace: workspace } = Blockly;\n\n        if (action === 'RUN') {\n            workspace\n                ?.waitForBlockEvent({\n                    block_type: 'trade_definition',\n                    event_type: Blockly.Events.BLOCK_CREATE,\n                    timeout: 5000,\n                })\n                .then(() => {\n                    this.root_store.run_panel.onRunButtonClick();\n                });\n        }\n\n        this.setFormVisibility(false);\n\n        await load({\n            block_string: Blockly.Xml.domToText(strategy_dom),\n            file_name: selected_strategy.label,\n            workspace,\n            from: save_types.UNSAVED,\n            drop_event: null,\n            strategy_id: null,\n            showIncompatibleStrategyDialog: null,\n        });\n    };\n\n    toggleStopBotDialog = (): void => {\n        this.is_contract_dialog_open = !this.is_contract_dialog_open;\n        this.is_stop_bot_dialog_open = !this.is_stop_bot_dialog_open;\n    };\n}\n","import { action, makeObservable, observable } from 'mobx';\n\nexport default class RoutePromptDialogStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            should_show: observable,\n            is_confirmed: observable,\n            last_location: observable,\n            shouldNavigateAfterPrompt: action.bound,\n            onConfirm: action.bound,\n            onCancel: action.bound,\n            continueRoute: action.bound,\n            setShoudShow: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n    }\n\n    should_show = false;\n    is_confirmed = false;\n    last_location = null;\n\n    shouldNavigateAfterPrompt(next_location) {\n        if (!this.is_confirmed) {\n            this.last_location = next_location;\n            if (next_location.pathname !== '/bot') this.should_show = true;\n            return false;\n        }\n\n        return true;\n    }\n\n    setShoudShow(should_show) {\n        this.should_show = should_show;\n    }\n\n    onConfirm() {\n        this.should_show = false;\n        this.is_confirmed = true;\n    }\n\n    onCancel() {\n        this.should_show = false;\n    }\n\n    continueRoute() {\n        const { common } = this.core;\n        if (this.is_confirmed && this.last_location) common.routeTo(this.last_location.pathname);\n    }\n}\n","export const contract_stages = Object.freeze({\n    NOT_RUNNING: 0,\n    STARTING: 1,\n    PURCHASE_SENT: 2,\n    PURCHASE_RECEIVED: 3,\n    IS_STOPPING: 4,\n    CONTRACT_CLOSED: 5,\n});\n","export const run_panel = Object.freeze({\n    SUMMARY: 0,\n    TRANSACTIONS: 1,\n    JOURNAL: 2,\n});\n","import { platform_name } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nexport const switch_account_notification = {\n    key: 'bot_switch_account',\n    header: localize('You have switched accounts.'),\n    message: localize(\n        'Our system will finish any Deriv Bot trades that are running, and Deriv Bot will not place any new trades.'\n    ),\n    type: 'warning',\n    is_persistent: true,\n};\n\nexport const journalError = onClick => {\n    return {\n        key: 'bot_error',\n        header: localize('The bot encountered an error while running.'),\n        action: {\n            text: localize('View in Journal'),\n            onClick,\n        },\n        type: 'danger',\n        platform: [platform_name.DBot],\n        is_disposable: true,\n    };\n};\n","import React from 'react';\nimport { action, computed, makeObservable, observable, reaction, runInAction } from 'mobx';\nimport { error_types, message_types, observer, unrecoverable_errors } from '@deriv/bot-skeleton';\nimport { isSafari, mobileOSDetect } from '@deriv/shared';\nimport { Localize, localize } from '@deriv/translations';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { run_panel } from 'Constants/run-panel';\nimport { journalError, switch_account_notification } from 'Utils/bot-notifications';\n\nexport default class RunPanelStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            active_index: observable,\n            contract_stage: observable,\n            dialog_options: observable,\n            has_open_contract: observable,\n            is_running: observable,\n            is_statistics_info_modal_open: observable,\n            is_drawer_open: observable,\n            is_dialog_open: observable,\n            is_sell_requested: observable,\n            run_id: observable,\n            error_type: observable,\n            show_bot_stop_message: observable,\n            statistics: computed,\n            is_stop_button_visible: computed,\n            is_stop_button_disabled: computed,\n            is_clear_stat_disabled: computed,\n            onStopButtonClick: action.bound,\n            onStopBotClick: action.bound,\n            stopBot: action.bound,\n            onClearStatClick: action.bound,\n            clearStat: action.bound,\n            toggleStatisticsInfoModal: action.bound,\n            toggleDrawer: action.bound,\n            setActiveTabIndex: action.bound,\n            onCloseDialog: action.bound,\n            performSelfExclusionCheck: action.bound,\n            showStopMultiplierContractDialog: action.bound,\n            showLoginDialog: action.bound,\n            showRealAccountDialog: action.bound,\n            showClearStatDialog: action.bound,\n            showIncompatibleStrategyDialog: action.bound,\n            showContractUpdateErrorDialog: action.bound,\n            onBotSellEvent: action.bound,\n            onBotStopEvent: action.bound,\n            onBotReadyEvent: action.bound,\n            onBotTradeAgain: action.bound,\n            onContractStatusEvent: action.bound,\n            onClickSell: action.bound,\n            onBotContractEvent: action.bound,\n            onError: action.bound,\n            showErrorMessage: action.bound,\n            switchToJournal: action.bound,\n            setContractStage: action.bound,\n            setHasOpenContract: action.bound,\n            setIsRunning: action.bound,\n            setShowBotStopMessage: action.bound,\n            onMount: action.bound,\n            onUnmount: action.bound,\n            handleInvalidToken: action.bound,\n            onRunButtonClick: action.bound,\n            registerBotListeners: action.bound,\n            registerReactions: action.bound,\n            onBotRunningEvent: action.bound,\n            unregisterBotListeners: action.bound,\n            clear: action.bound,\n            preloadAudio: action.bound,\n            stopMyBot: action.bound,\n            closeMultiplierContract: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.dbot = this.root_store.dbot;\n        this.core = core;\n        this.disposeReactionsFn = this.registerReactions();\n        this.timer = null;\n    }\n\n    active_index = 0;\n    contract_stage = contract_stages.NOT_RUNNING;\n    dialog_options = {};\n    has_open_contract = false;\n    is_running = false;\n    is_statistics_info_modal_open = false;\n    is_drawer_open = true;\n    is_dialog_open = false;\n    is_sell_requested = false;\n    show_bot_stop_message = false;\n\n    run_id = '';\n\n    // when error happens, if it is unrecoverable_errors we reset run-panel\n    // we activate run-button and clear trade info and set the ContractStage to NOT_RUNNING\n    // otherwise we keep opening new contracts and set the ContractStage to PURCHASE_SENT\n    error_type = undefined;\n\n    get statistics() {\n        let total_runs = 0;\n        const { transactions } = this.root_store.transactions;\n        const statistics = transactions.reduce(\n            (stats, { data: trx }) => {\n                if (trx.is_completed) {\n                    if (trx.profit > 0) {\n                        stats.won_contracts += 1;\n                        stats.total_payout += trx.payout;\n                    } else {\n                        stats.lost_contracts += 1;\n                    }\n\n                    stats.total_profit += trx.profit;\n                    stats.total_stake += trx.buy_price;\n                    total_runs += 1;\n                }\n\n                return stats;\n            },\n            {\n                lost_contracts: 0,\n                number_of_runs: 0,\n                total_profit: 0,\n                total_payout: 0,\n                total_stake: 0,\n                won_contracts: 0,\n            }\n        );\n        statistics.number_of_runs = total_runs;\n        return statistics;\n    }\n\n    get is_stop_button_visible() {\n        return this.is_running || this.has_open_contract;\n    }\n\n    get is_stop_button_disabled() {\n        return [contract_stages.PURCHASE_SENT, contract_stages.IS_STOPPING].includes(this.contract_stage);\n    }\n\n    get is_clear_stat_disabled() {\n        const { journal, transactions } = this.root_store;\n\n        return (\n            this.is_running ||\n            this.has_open_contract ||\n            (journal.unfiltered_messages.length === 0 && transactions?.transactions?.length === 0)\n        );\n    }\n\n    setShowBotStopMessage(value) {\n        this.show_bot_stop_message = value;\n    }\n\n    async performSelfExclusionCheck() {\n        const { self_exclusion } = this.root_store;\n        await self_exclusion.checkRestriction();\n    }\n\n    async onRunButtonClick() {\n        let timer_counter = 1;\n        if (window.sendRequestsStatistic) {\n            performance.clearMeasures();\n            performance.mark('bot-start');\n            // Log is sent every 10 seconds for 5 minutes\n            this.timer = setInterval(() => {\n                window.sendRequestsStatistic(true);\n                performance.clearMeasures();\n                if (timer_counter === 12) {\n                    clearInterval(this.timer);\n                } else {\n                    timer_counter++;\n                }\n            }, 10000);\n        }\n        const { summary_card, route_prompt_dialog, self_exclusion } = this.root_store;\n        const { client, ui } = this.core;\n        const is_ios = mobileOSDetect() === 'iOS';\n        this.dbot.saveRecentWorkspace();\n        this.dbot.unHighlightAllBlocks();\n        if (!client.is_logged_in) {\n            this.showLoginDialog();\n            return;\n        }\n\n        /**\n         * Due to Apple's policy on cellular data usage in ios audioElement.play() should be initially called on\n         * user action(e.g click/touch) to be downloaded, otherwise throws an error. Also it should be called\n         * syncronously, so keep above await.\n         */\n        if (is_ios || isSafari()) this.preloadAudio();\n\n        if (!self_exclusion.should_bot_run) {\n            self_exclusion.setIsRestricted(true);\n            return;\n        }\n        self_exclusion.setIsRestricted(false);\n\n        this.registerBotListeners();\n\n        if (!this.dbot.shouldRunBot()) {\n            this.unregisterBotListeners();\n            return;\n        }\n\n        ui.setAccountSwitcherDisabledMessage(\n            localize(\n                'Account switching is disabled while your bot is running. Please stop your bot before switching accounts.'\n            )\n        );\n        runInAction(() => {\n            this.setIsRunning(true);\n            ui.setPromptHandler(true, route_prompt_dialog.shouldNavigateAfterPrompt);\n            this.toggleDrawer(true);\n            this.run_id = `run-${Date.now()}`;\n\n            summary_card.clear();\n            this.setContractStage(contract_stages.STARTING);\n            this.dbot.runBot();\n        });\n        this.setShowBotStopMessage(false);\n    }\n\n    onStopButtonClick() {\n        const { is_multiplier } = this.root_store.summary_card;\n\n        if (is_multiplier) {\n            this.showStopMultiplierContractDialog();\n        } else {\n            this.stopBot();\n        }\n    }\n\n    onStopBotClick() {\n        const { is_multiplier } = this.root_store.summary_card;\n        const { summary_card } = this.root_store;\n\n        if (is_multiplier) {\n            this.showStopMultiplierContractDialog();\n        } else {\n            this.stopBot();\n            summary_card.clear();\n            this.setShowBotStopMessage(true);\n        }\n    }\n\n    stopBot() {\n        const { ui } = this.core;\n\n        this.dbot.stopBot();\n\n        ui.setPromptHandler(false);\n\n        if (this.error_type) {\n            // when user click stop button when there is a error but bot is retrying\n            this.setContractStage(contract_stages.NOT_RUNNING);\n            ui.setAccountSwitcherDisabledMessage(false);\n            this.setIsRunning(false);\n        } else if (this.has_open_contract) {\n            // when user click stop button when bot is running\n            this.setContractStage(contract_stages.IS_STOPPING);\n        } else {\n            // when user click stop button before bot start running\n            this.setContractStage(contract_stages.NOT_RUNNING);\n            this.unregisterBotListeners();\n            ui.setAccountSwitcherDisabledMessage(false);\n            this.setIsRunning(false);\n        }\n\n        if (this.error_type) {\n            this.error_type = undefined;\n        }\n\n        if (this.timer) {\n            clearInterval(this.timer);\n        }\n        if (window.sendRequestsStatistic) {\n            window.sendRequestsStatistic(true);\n            performance.clearMeasures();\n        }\n    }\n\n    onClearStatClick() {\n        this.showClearStatDialog();\n    }\n\n    clearStat() {\n        const { summary_card, journal, transactions } = this.root_store;\n\n        this.setIsRunning(false);\n        this.setHasOpenContract(false);\n        this.clear();\n        journal.clear();\n        summary_card.clear();\n        transactions.clear();\n        this.setContractStage(contract_stages.NOT_RUNNING);\n    }\n\n    toggleStatisticsInfoModal() {\n        this.is_statistics_info_modal_open = !this.is_statistics_info_modal_open;\n    }\n\n    toggleDrawer(is_open) {\n        this.is_drawer_open = is_open;\n    }\n\n    setActiveTabIndex(index) {\n        this.active_index = index;\n\n        if (this.active_index !== 1) {\n            this.root_store.transactions.setActiveTransactionId(null);\n        }\n    }\n\n    onCloseDialog() {\n        this.is_dialog_open = false;\n    }\n\n    stopMyBot() {\n        const { summary_card, quick_strategy } = this.root_store;\n        const { ui } = this.core;\n        const { toggleStopBotDialog } = quick_strategy;\n\n        ui.setPromptHandler(false);\n        this.dbot.terminateBot();\n        this.onCloseDialog();\n        summary_card.clear();\n        toggleStopBotDialog();\n        if (this.timer) {\n            clearInterval(this.timer);\n        }\n        if (window.sendRequestsStatistic) {\n            window.sendRequestsStatistic(true);\n            performance.clearMeasures();\n        }\n    }\n\n    closeMultiplierContract() {\n        const { quick_strategy } = this.root_store;\n        const { toggleStopBotDialog } = quick_strategy;\n\n        this.onClickSell();\n        this.stopBot();\n        this.onCloseDialog();\n        toggleStopBotDialog();\n    }\n\n    showStopMultiplierContractDialog() {\n        const { summary_card } = this.root_store;\n        const { ui } = this.core;\n\n        this.onOkButtonClick = () => {\n            ui.setPromptHandler(false);\n            this.dbot.terminateBot();\n            if (this.timer) {\n                clearInterval(this.timer);\n            }\n            if (window.sendRequestsStatistic) {\n                window.sendRequestsStatistic(true);\n                performance.clearMeasures();\n            }\n            this.onCloseDialog();\n            summary_card.clear();\n        };\n        this.onCancelButtonClick = () => {\n            this.onClickSell();\n            this.stopBot();\n            this.onCloseDialog();\n        };\n        this.dialog_options = {\n            title: localize('Keep your current contract?'),\n            message: (\n                <Localize\n                    i18n_default_text='Would you like to keep your current contract or close it? If you decide to keep it running, you can check and close it later on the <0>Reports</0> page.'\n                    components={[\n                        <a\n                            key={0}\n                            className='link'\n                            rel='noopener noreferrer'\n                            target='_blank'\n                            href='/reports/positions'\n                        />,\n                    ]}\n                />\n            ),\n            ok_button_text: localize('Keep my contract'),\n            cancel_button_text: localize('Close my contract'),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showLoginDialog() {\n        this.onOkButtonClick = this.onCloseDialog;\n        this.onCancelButtonClick = undefined;\n        this.dialog_options = {\n            title: localize('Please log in'),\n            message: localize('You need to log in to run the bot.'),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showRealAccountDialog() {\n        this.onOkButtonClick = this.onCloseDialog;\n        this.onCancelButtonClick = undefined;\n        this.dialog_options = {\n            title: localize(\"Deriv Bot isn't quite ready for real accounts\"),\n            message: localize('Please switch to your demo account to run your Deriv Bot.'),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showClearStatDialog() {\n        this.onOkButtonClick = () => {\n            this.clearStat();\n            this.onCloseDialog();\n        };\n        this.onCancelButtonClick = this.onCloseDialog;\n        this.dialog_options = {\n            title: localize('Are you sure?'),\n            message: localize(\n                'This will clear all data in the summary, transactions, and journal panels. All counters will be reset to zero.'\n            ),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showIncompatibleStrategyDialog() {\n        this.onOkButtonClick = this.onCloseDialog;\n        this.onCancelButtonClick = undefined;\n        this.dialog_options = {\n            title: localize('Import error'),\n            message: localize('This strategy is currently not compatible with Deriv Bot.'),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showContractUpdateErrorDialog(message) {\n        this.onOkButtonClick = this.onCloseDialog;\n        this.onCancelButtonClick = undefined;\n        this.dialog_options = {\n            title: localize('Contract Update Error'),\n            message: localize(message),\n        };\n        this.is_dialog_open = true;\n    }\n\n    registerBotListeners() {\n        const { summary_card, transactions } = this.root_store;\n\n        observer.register('bot.running', this.onBotRunningEvent);\n        observer.register('bot.sell', this.onBotSellEvent);\n        observer.register('bot.stop', this.onBotStopEvent);\n        observer.register('bot.bot_ready', this.onBotReadyEvent);\n        observer.register('bot.click_stop', this.onStopButtonClick);\n        observer.register('bot.trade_again', this.onBotTradeAgain);\n        observer.register('contract.status', this.onContractStatusEvent);\n        observer.register('bot.contract', this.onBotContractEvent);\n        observer.register('bot.contract', summary_card.onBotContractEvent);\n        observer.register('bot.contract', transactions.onBotContractEvent);\n        observer.register('Error', this.onError);\n    }\n\n    registerReactions() {\n        const { client, common, notifications } = this.core;\n\n        const registerIsSocketOpenedListener = () => {\n            if (common.is_socket_opened) {\n                this.disposeIsSocketOpenedListener = reaction(\n                    () => client.loginid,\n                    loginid => {\n                        if (loginid && this.is_running) {\n                            notifications.addNotificationMessage(switch_account_notification);\n                        }\n                        this.dbot.terminateBot();\n                        this.unregisterBotListeners();\n                    }\n                );\n            } else if (typeof this.disposeLogoutListener === 'function') {\n                this.disposeLogoutListener();\n            }\n        };\n\n        registerIsSocketOpenedListener();\n\n        this.disposeLogoutListener = reaction(\n            () => common.is_socket_opened,\n            () => registerIsSocketOpenedListener()\n        );\n\n        this.disposeStopBotListener = reaction(\n            () => !this.is_running,\n            () => {\n                if (!this.is_running) this.setContractStage(contract_stages.NOT_RUNNING);\n            }\n        );\n\n        return () => {\n            if (typeof this.disposeIsSocketOpenedListener === 'function') {\n                this.disposeIsSocketOpenedListener();\n            }\n\n            if (typeof this.disposeLogoutListener === 'function') {\n                this.disposeLogoutListener();\n            }\n\n            if (typeof this.disposeStopBotListener === 'function') {\n                this.disposeStopBotListener();\n            }\n        };\n    }\n\n    onBotRunningEvent() {\n        this.setHasOpenContract(true);\n\n        // prevent new version update\n        const ignore_new_version = new Event('IgnorePWAUpdate');\n        document.dispatchEvent(ignore_new_version);\n        const { self_exclusion } = this.root_store;\n\n        if (self_exclusion.should_bot_run && self_exclusion.run_limit !== -1) {\n            self_exclusion.run_limit -= 1;\n            if (self_exclusion.run_limit < 0) {\n                this.onStopButtonClick();\n            }\n        }\n    }\n\n    onBotSellEvent() {\n        this.is_sell_requested = true;\n    }\n\n    onBotStopEvent() {\n        const { self_exclusion, summary_card } = this.root_store;\n        const { ui } = this.core;\n        const indicateBotStopped = () => {\n            this.error_type = undefined;\n            this.setContractStage(contract_stages.NOT_RUNNING);\n            ui.setAccountSwitcherDisabledMessage(false);\n            this.unregisterBotListeners();\n            self_exclusion.resetSelfExclusion();\n        };\n        if (this.error_type === error_types.RECOVERABLE_ERRORS) {\n            // Bot should indicate it started in below cases:\n            // - When error happens it's a recoverable error\n            const { shouldRestartOnError, timeMachineEnabled } = this.dbot.interpreter.bot.tradeEngine.options;\n            const is_bot_recoverable = shouldRestartOnError || timeMachineEnabled;\n\n            if (is_bot_recoverable) {\n                this.error_type = undefined;\n                this.setContractStage(contract_stages.PURCHASE_SENT);\n            } else {\n                this.setIsRunning(false);\n                indicateBotStopped();\n            }\n        } else if (this.error_type === error_types.UNRECOVERABLE_ERRORS) {\n            // Bot should indicate it stopped in below cases:\n            // - When error happens and it's an unrecoverable error\n            this.setIsRunning(false);\n            indicateBotStopped();\n        } else if (this.has_open_contract) {\n            // Bot should indicate the contract is closed in below cases:\n            // - When bot was running and an error happens\n            this.error_type = undefined;\n            this.is_sell_requested = false;\n            this.setContractStage(contract_stages.CONTRACT_CLOSED);\n            ui.setAccountSwitcherDisabledMessage(false);\n            this.unregisterBotListeners();\n            self_exclusion.resetSelfExclusion();\n        }\n\n        this.setHasOpenContract(false);\n\n        summary_card.clearContractUpdateConfigValues();\n\n        // listen for new version update\n        const listen_new_version = new Event('ListenPWAUpdate');\n        document.dispatchEvent(listen_new_version);\n    }\n\n    onBotReadyEvent() {\n        this.setIsRunning(false);\n        observer.unregisterAll('bot.bot_ready');\n    }\n\n    onBotTradeAgain(is_trade_again) {\n        if (!is_trade_again) {\n            this.stopBot();\n        }\n    }\n\n    onContractStatusEvent(contract_status) {\n        switch (contract_status.id) {\n            case 'contract.purchase_sent': {\n                this.setContractStage(contract_stages.PURCHASE_SENT);\n                break;\n            }\n            case 'contract.purchase_received': {\n                this.setContractStage(contract_stages.PURCHASE_RECEIVED);\n\n                // Close transaction-specific popover, if any.\n                this.root_store.transactions.setActiveTransactionId(null);\n\n                const { buy } = contract_status;\n                const { is_virtual } = this.core.client;\n\n                if (!is_virtual) {\n                    this.core.gtm.pushDataLayer({ event: 'dbot_purchase', buy_price: buy.buy_price });\n                }\n\n                break;\n            }\n            case 'contract.sold': {\n                this.is_sell_requested = false;\n                this.setContractStage(contract_stages.CONTRACT_CLOSED);\n                break;\n            }\n            default:\n                break;\n        }\n    }\n\n    onClickSell() {\n        const { is_multiplier } = this.root_store.summary_card;\n\n        if (is_multiplier) {\n            this.setContractStage(contract_stages.IS_STOPPING);\n        }\n\n        this.dbot.interpreter.bot.getInterface().sellAtMarket();\n    }\n\n    clear = () => {\n        observer.emit('statistics.clear');\n    };\n\n    onBotContractEvent(data) {\n        if (data?.is_sold) {\n            this.is_sell_requested = false;\n            this.setContractStage(contract_stages.CONTRACT_CLOSED);\n        }\n    }\n\n    onError(data) {\n        // data.error for API errors, data for code errors\n        const error = data.error || data;\n        if (unrecoverable_errors.includes(error.code)) {\n            this.root_store.summary_card.clear();\n            this.error_type = error_types.UNRECOVERABLE_ERRORS;\n        } else {\n            this.error_type = error_types.RECOVERABLE_ERRORS;\n        }\n\n        const error_message = error?.message;\n        this.showErrorMessage(error_message);\n    }\n\n    showErrorMessage(data) {\n        const { journal } = this.root_store;\n        const { notifications } = this.core;\n        journal.onError(data);\n        if (journal.journal_filters.some(filter => filter === message_types.ERROR)) {\n            this.toggleDrawer(true);\n            this.setActiveTabIndex(run_panel.JOURNAL);\n        } else {\n            notifications.addNotificationMessage(journalError(this.switchToJournal));\n            notifications.removeNotificationMessage({ key: 'bot_error' });\n        }\n    }\n\n    switchToJournal() {\n        const { journal } = this.root_store;\n        const { notifications } = this.core;\n        journal.journal_filters.push(message_types.ERROR);\n        this.setActiveTabIndex(run_panel.JOURNAL);\n        this.toggleDrawer(true);\n        notifications.toggleNotificationsModal();\n        notifications.removeNotificationByKey({ key: 'bot_error' });\n    }\n\n    unregisterBotListeners = () => {\n        observer.unregisterAll('bot.running');\n        observer.unregisterAll('bot.stop');\n        observer.unregisterAll('bot.trade_again');\n        observer.unregisterAll('contract.status');\n        observer.unregisterAll('bot.contract');\n        observer.unregisterAll('Error');\n    };\n\n    setContractStage(contract_stage) {\n        this.contract_stage = contract_stage;\n    }\n\n    setHasOpenContract(has_open_contract) {\n        this.has_open_contract = has_open_contract;\n    }\n\n    setIsRunning(is_running) {\n        this.is_running = is_running;\n    }\n\n    onMount() {\n        const { journal } = this.root_store;\n        observer.register('ui.log.error', this.showErrorMessage);\n        observer.register('ui.log.notify', journal.onNotify);\n        observer.register('ui.log.success', journal.onLogSuccess);\n        observer.register('client.invalid_token', this.handleInvalidToken);\n    }\n\n    onUnmount() {\n        const { journal, summary_card, transactions } = this.root_store;\n\n        if (!this.is_running) {\n            this.unregisterBotListeners();\n            this.disposeReactionsFn();\n            journal.disposeReactionsFn();\n            summary_card.disposeReactionsFn();\n            transactions.disposeReactionsFn();\n        }\n\n        observer.unregisterAll('ui.log.error');\n        observer.unregisterAll('ui.log.notify');\n        observer.unregisterAll('ui.log.success');\n        observer.unregisterAll('client.invalid_token');\n    }\n\n    async handleInvalidToken() {\n        const { client } = this.core;\n        await client.logout();\n        this.setActiveTabIndex(run_panel.SUMMARY);\n    }\n\n    preloadAudio() {\n        const strategy_sounds = this.dbot.getStrategySounds();\n\n        strategy_sounds.forEach(sound => {\n            const audioElement = document.getElementById(sound);\n\n            audioElement.muted = true;\n            audioElement.play().catch(() => {\n                // suppressing abort error, thrown on immediate .pause()\n            });\n            audioElement.pause();\n            audioElement.muted = false;\n        });\n    }\n}\n","import localForage from 'localforage';\nimport LZString from 'lz-string';\nimport { action, makeObservable, observable } from 'mobx';\nimport {\n    getSavedWorkspaces,\n    observer as globalObserver,\n    save,\n    save_types,\n    saveWorkspaceToRecent,\n} from '@deriv/bot-skeleton';\nimport { localize } from '@deriv/translations';\nimport { MAX_STRATEGIES } from 'Constants/bot-contents';\nimport { button_status } from 'Constants/button-status';\nimport { TStrategy } from 'Types';\n\ntype IOnConfirmProps = {\n    is_local: boolean;\n    save_as_collection: boolean;\n    bot_name: string;\n};\ninterface ISaveModalStore {\n    is_save_modal_open: boolean;\n    button_status: { [key: string]: string } | number;\n    bot_name: { [key: string]: string } | string;\n    toggleSaveModal: () => void;\n    validateBotName: (values: string) => { [key: string]: string };\n    onConfirmSave: ({ is_local, save_as_collection, bot_name }: IOnConfirmProps) => void;\n    updateBotName: (bot_name: string) => void;\n    setButtonStatus: (status: { [key: string]: string } | string | number) => void;\n}\n\nconst Blockly = window.Blockly;\n\nexport default class SaveModalStore implements ISaveModalStore {\n    root_store: any;\n\n    constructor(root_store: any) {\n        makeObservable(this, {\n            is_save_modal_open: observable,\n            button_status: observable,\n            bot_name: observable,\n            toggleSaveModal: action.bound,\n            validateBotName: action.bound,\n            onConfirmSave: action.bound,\n            updateBotName: action.bound,\n            onDriveConnect: action.bound,\n            setButtonStatus: action.bound,\n        });\n\n        this.root_store = root_store;\n    }\n    is_save_modal_open = false;\n    button_status = button_status.NORMAL;\n    bot_name = '';\n\n    toggleSaveModal = (): void => {\n        if (!this.is_save_modal_open) {\n            this.setButtonStatus(button_status.NORMAL);\n        }\n\n        this.is_save_modal_open = !this.is_save_modal_open;\n    };\n\n    validateBotName = (values: string): { [key: string]: string } => {\n        const errors = {};\n\n        if (values.bot_name.trim() === '') {\n            errors.bot_name = localize('Strategy name cannot be empty');\n        }\n\n        return errors;\n    };\n\n    addStrategyToWorkspace = async (\n        workspace_id: string,\n        is_local: boolean,\n        save_as_collection: boolean,\n        bot_name: string,\n        xml: string\n    ) => {\n        try {\n            const workspace = await getSavedWorkspaces();\n            const current_workspace_index = workspace.findIndex((strategy: TStrategy) => strategy.id === workspace_id);\n            const {\n                load_modal: { getSaveType },\n            } = this.root_store;\n            const local_type = is_local ? save_types.LOCAL : save_types.GOOGLE_DRIVE;\n            const save_collection = save_as_collection ? save_types.UNSAVED : local_type;\n            const type = save_collection;\n\n            const save_type = getSaveType(type)?.toLowerCase();\n\n            const workspace_structure = {\n                id: workspace_id,\n                xml: Blockly.Xml.domToText(xml),\n                name: bot_name,\n                timestamp: Date.now(),\n                save_type,\n            };\n\n            if (current_workspace_index >= 0) {\n                const current_workspace = workspace_structure;\n                workspace[current_workspace_index] = current_workspace;\n            } else {\n                workspace.push(workspace_structure);\n            }\n\n            workspace\n                .sort((a: TStrategy, b: TStrategy) => {\n                    return new Date(a.timestamp) - new Date(b.timestamp);\n                })\n                .reverse();\n\n            if (workspace.length > MAX_STRATEGIES) {\n                workspace.pop();\n            }\n            const { load_modal } = this.root_store;\n            const { setRecentStrategies } = load_modal;\n            localForage.setItem('saved_workspaces', LZString.compress(JSON.stringify(workspace)));\n            const updated_strategies = await getSavedWorkspaces();\n            setRecentStrategies(updated_strategies);\n            const {\n                dashboard: { setStrategySaveType },\n            } = this.root_store;\n            setStrategySaveType(save_type);\n        } catch (error) {\n            globalObserver.emit('Error', error);\n        }\n    };\n\n    async onConfirmSave({ is_local, save_as_collection, bot_name }: IOnConfirmProps) {\n        const { load_modal, dashboard, google_drive } = this.root_store;\n        const { loadStrategyToBuilder, selected_strategy } = load_modal;\n        const { active_tab } = dashboard;\n        this.setButtonStatus(button_status.LOADING);\n        const { saveFile } = google_drive;\n        let xml;\n        let main_strategy = null;\n        if (active_tab === 1) {\n            xml = Blockly?.Xml?.workspaceToDom(Blockly?.derivWorkspace);\n        } else {\n            const recent_files = await getSavedWorkspaces();\n            main_strategy = recent_files.filter((strategy: TStrategy) => strategy.id === selected_strategy.id)?.[0];\n            main_strategy.name = bot_name;\n            main_strategy.save_type = is_local ? save_types.LOCAL : save_types.GOOGLE_DRIVE;\n            xml = Blockly?.Xml?.textToDom(main_strategy.xml);\n        }\n        xml?.setAttribute('is_dbot', 'true');\n        xml?.setAttribute('collection', save_as_collection ? 'true' : 'false');\n\n        if (is_local) {\n            save(bot_name, save_as_collection, xml);\n        } else {\n            await saveFile({\n                name: bot_name,\n                content: Blockly?.Xml?.domToPrettyText(xml),\n                mimeType: 'application/xml',\n            });\n            this.setButtonStatus(button_status.COMPLETED);\n        }\n\n        this.updateBotName(bot_name);\n\n        if (active_tab === 0) {\n            const workspace_id = selected_strategy.id ?? Blockly?.utils?.genUid();\n            await this.addStrategyToWorkspace(workspace_id, is_local, save_as_collection, bot_name, xml);\n            if (main_strategy) await loadStrategyToBuilder(main_strategy);\n        } else {\n            await saveWorkspaceToRecent(xml, is_local ? save_types.LOCAL : save_types.GOOGLE_DRIVE);\n        }\n        this.toggleSaveModal();\n    }\n\n    updateBotName = (bot_name: string): void => {\n        this.bot_name = bot_name;\n    };\n\n    async onDriveConnect() {\n        const { google_drive } = this.root_store;\n\n        if (google_drive.is_authorised) {\n            google_drive.signOut();\n        } else {\n            google_drive.signIn();\n        }\n    }\n\n    setButtonStatus = (status: { [key: string]: string } | string | number): void => {\n        this.button_status = status;\n    };\n}\n","import { action, computed, makeObservable, observable } from 'mobx';\n\nexport default class SelfExclusionStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            api_max_losses: observable,\n            run_limit: observable,\n            is_restricted: observable,\n            initial_values: computed,\n            should_bot_run: computed,\n            setIsRestricted: action.bound,\n            setApiMaxLosses: action.bound,\n            setRunLimit: action.bound,\n            resetSelfExclusion: action.bound,\n            checkRestriction: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n    }\n\n    api_max_losses = 0;\n    run_limit = -1;\n    is_restricted = false;\n    get initial_values() {\n        return {\n            form_max_losses: this.api_max_losses || '',\n            run_limit: this.run_limit !== -1 ? this.run_limit : '',\n        };\n    }\n\n    get should_bot_run() {\n        const { client } = this.core;\n        if (client.is_eu && !client.is_virtual && (this.api_max_losses === 0 || this.run_limit === -1)) {\n            return false;\n        }\n        return true;\n    }\n\n    setIsRestricted(is_restricted) {\n        this.is_restricted = is_restricted;\n    }\n\n    setApiMaxLosses(api_max_losses) {\n        this.api_max_losses = api_max_losses;\n    }\n\n    setRunLimit(run_limit) {\n        this.run_limit = run_limit;\n    }\n\n    resetSelfExclusion() {\n        this.is_restricted = false;\n        this.api_max_losses = 0;\n        this.form_max_losses = 0;\n        this.run_limit = -1;\n    }\n\n    async checkRestriction() {\n        const { client } = this.core;\n        await client.getSelfExclusion();\n        if (client.self_exclusion.max_losses) {\n            this.setApiMaxLosses(client.self_exclusion.max_losses);\n        }\n    }\n}\n","import { getLimitOrderAmount } from '@deriv/shared';\n\nexport const getBuyPrice = contract_store => {\n    return contract_store.contract_info.buy_price;\n};\n\n/**\n * Set contract update form initial values\n * @param {object} contract_update - contract_update response\n * @param {object} limit_order - proposal_open_contract.limit_order response\n */\nexport const getContractUpdateConfig = ({ contract_update, limit_order }) => {\n    const { stop_loss, take_profit } = getLimitOrderAmount(limit_order || contract_update);\n\n    return {\n        // convert stop_loss, take_profit value to string for validation to work\n        contract_update_stop_loss: stop_loss ? Math.abs(stop_loss).toString() : '',\n        contract_update_take_profit: take_profit ? take_profit.toString() : '',\n        has_contract_update_stop_loss: !!stop_loss,\n        has_contract_update_take_profit: !!take_profit,\n    };\n};\n","import { getTotalProfit } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nimport { getBuyPrice } from 'Utils/multiplier';\n\nexport const getSupportedContracts = is_high_low => ({\n    ASIANU: {\n        name: localize('Asian Up'),\n        position: 'top',\n    },\n    ASIAND: {\n        name: localize('Asian Down'),\n        position: 'bottom',\n    },\n    CALL: {\n        name: is_high_low ? localize('Higher') : localize('Rise'),\n        position: 'top',\n    },\n    PUT: {\n        name: is_high_low ? localize('Lower') : localize('Fall'),\n        position: 'bottom',\n    },\n    CALLE: {\n        name: localize('Rise'),\n        position: 'top',\n    },\n    PUTE: {\n        name: localize('Fall'),\n        position: 'bottom',\n    },\n    CALLSPREAD: {\n        name: localize('Spread Up'),\n        position: 'top',\n    },\n    PUTSPREAD: {\n        name: localize('Spread Down'),\n        position: 'bottom',\n    },\n    DIGITMATCH: {\n        name: localize('Matches'),\n        position: 'top',\n    },\n    DIGITDIFF: {\n        name: localize('Differs'),\n        position: 'bottom',\n    },\n    DIGITEVEN: {\n        name: localize('Even'),\n        position: 'top',\n    },\n    DIGITODD: {\n        name: localize('Odd'),\n        position: 'bottom',\n    },\n    DIGITOVER: {\n        name: localize('Over'),\n        position: 'top',\n    },\n    DIGITUNDER: {\n        name: localize('Under'),\n        position: 'bottom',\n    },\n    EXPIRYMISS: {\n        name: localize('Ends Outside'),\n        position: 'top',\n    },\n    EXPIRYRANGE: {\n        name: localize('Ends Between'),\n        position: 'bottom',\n    },\n    LBFLOATCALL: {\n        name: localize('Close-to-Low'),\n        position: 'top',\n    },\n    LBFLOATPUT: {\n        name: localize('High-to-Close'),\n        position: 'top',\n    },\n    LBHIGHLOW: {\n        name: localize('High-to-Low'),\n        position: 'top',\n    },\n    MULTUP: {\n        name: localize('Up'),\n        position: 'top',\n    },\n    MULTDOWN: {\n        name: localize('Down'),\n        position: 'bottom',\n    },\n    ONETOUCH: {\n        name: localize('Touch'),\n        position: 'top',\n    },\n    NOTOUCH: {\n        name: localize('No Touch'),\n        position: 'bottom',\n    },\n    RANGE: {\n        name: localize('Stays Between'),\n        position: 'top',\n    },\n    UPORDOWN: {\n        name: localize('Goes Outside'),\n        position: 'bottom',\n    },\n    RESETCALL: {\n        name: localize('Reset Call'),\n        position: 'top',\n    },\n    RESETPUT: {\n        name: localize('Reset Put'),\n        position: 'bottom',\n    },\n    RUNHIGH: {\n        name: localize('Only Ups'),\n        position: 'top',\n    },\n    RUNLOW: {\n        name: localize('Only Downs'),\n        position: 'bottom',\n    },\n    TICKHIGH: {\n        name: localize('High Tick'),\n        position: 'top',\n    },\n    TICKLOW: {\n        name: localize('Low Tick'),\n        position: 'bottom',\n    },\n});\n\nexport const getContractConfig = is_high_low => ({\n    ...getSupportedContracts(is_high_low),\n});\n\nexport const getContractTypeDisplay = (type, is_high_low = false) =>\n    getContractConfig(is_high_low)[type] ? getContractConfig(is_high_low)[type.toUpperCase()].name : '';\n\nexport const getValidationRules = () => ({\n    has_contract_update_stop_loss: {\n        trigger: 'contract_update_stop_loss',\n    },\n    contract_update_stop_loss: {\n        rules: [\n            [\n                'req',\n                {\n                    condition: contract_store => !contract_store.contract_update_stop_loss,\n                    message: localize('Please enter a stop loss amount.'),\n                },\n            ],\n            [\n                'custom',\n                {\n                    func: (value, options, contract_store) => {\n                        const profit = getTotalProfit(contract_store.contract_info);\n                        return !(profit < 0 && -value > profit);\n                    },\n                    message: localize(\"Please enter a stop loss amount that's higher than the current potential loss.\"),\n                },\n            ],\n            [\n                'custom',\n                {\n                    func: (value, options, contract_store) => {\n                        const stake = getBuyPrice(contract_store);\n                        return value < stake + 1;\n                    },\n                    message: localize('Invalid stop loss. Stop loss cannot be more than stake.'),\n                },\n            ],\n        ],\n    },\n    has_contract_update_take_profit: {\n        trigger: 'contract_update_take_profit',\n    },\n    contract_update_take_profit: {\n        rules: [\n            [\n                'req',\n                {\n                    condition: contract_store => !contract_store.contract_update_take_profit,\n                    message: localize('Please enter a take profit amount.'),\n                },\n            ],\n            [\n                'custom',\n                {\n                    func: (value, options, contract_store) => {\n                        const profit = getTotalProfit(contract_store.contract_info);\n                        return !(profit > 0 && +value < profit);\n                    },\n                    message: localize(\n                        \"Please enter a take profit amount that's higher than the current potential profit.\"\n                    ),\n                },\n            ],\n        ],\n    },\n});\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\n\nimport { getIndicativePrice, isEqualObject, isMultiplierContract, Validator } from '@deriv/shared';\n\nimport { getValidationRules } from 'Constants/contract';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { getContractUpdateConfig } from 'Utils/multiplier';\n\nexport default class SummaryCardStore {\n    contract_info = null;\n    indicative_movement = '';\n    profit_movement = '';\n\n    validation_errors = {};\n    validation_rules = getValidationRules();\n\n    // Multiplier contract update config\n    contract_update_take_profit = '';\n    contract_update_stop_loss = '';\n    has_contract_update_take_profit = false;\n    has_contract_update_stop_loss = false;\n    contract_update_config = {};\n\n    contract_id = null;\n    profit = 0;\n    indicative = 0;\n\n    constructor(root_store, core) {\n        makeObservable(this, {\n            contract_info: observable,\n            indicative_movement: observable,\n            profit_movement: observable,\n            validation_errors: observable,\n            validation_rules: observable,\n            contract_update_take_profit: observable,\n            contract_update_stop_loss: observable,\n            has_contract_update_take_profit: observable,\n            has_contract_update_stop_loss: observable,\n            contract_update_config: observable,\n            contract_id: observable,\n            profit: observable,\n            indicative: observable,\n            is_contract_completed: computed,\n            is_contract_loading: computed,\n            is_contract_inactive: computed,\n            is_multiplier: computed,\n            clear: action.bound,\n            clearContractUpdateConfigValues: action.bound,\n            getLimitOrder: action.bound,\n            onBotContractEvent: action.bound,\n            onChange: action.bound,\n            populateContractUpdateConfig: action.bound,\n            setContractUpdateConfig: action.bound,\n            updateLimitOrder: action.bound,\n            setValidationErrorMessages: action,\n            validateProperty: action,\n            registerReactions: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n        this.disposeReactionsFn = this.registerReactions();\n    }\n\n    get is_contract_completed() {\n        return (\n            !!this.contract_info?.is_sold &&\n            this.root_store.run_panel.contract_stage !== contract_stages.PURCHASE_RECEIVED\n        );\n    }\n\n    get is_contract_loading() {\n        return (\n            (this.root_store.run_panel.is_running && this.contract_info === null) ||\n            this.root_store.run_panel.contract_stage === contract_stages.PURCHASE_SENT ||\n            this.root_store.run_panel.contract_stage === contract_stages.STARTING\n        );\n    }\n\n    get is_contract_inactive() {\n        return !this.contract_info && !this.is_loading;\n    }\n\n    get is_multiplier() {\n        return isMultiplierContract(this.contract_info?.contract_type);\n    }\n\n    clear(should_unset_contract = true) {\n        if (should_unset_contract) {\n            this.contract_info = null;\n        }\n\n        this.profit = 0;\n        this.profit_loss = 0;\n        this.indicative = 0;\n        this.indicative_movement = '';\n        this.profit_movement = '';\n    }\n\n    clearContractUpdateConfigValues() {\n        if (this.contract_info) {\n            Object.assign(this, getContractUpdateConfig(this.contract_info));\n        }\n    }\n\n    getLimitOrder() {\n        const limit_order = {};\n\n        // send positive take_profit to update or null to cancel\n        limit_order.take_profit = this.has_contract_update_take_profit ? +this.contract_update_take_profit : null;\n\n        // send positive stop_loss to update or null to cancel\n        limit_order.stop_loss = this.has_contract_update_stop_loss ? +this.contract_update_stop_loss : null;\n\n        return limit_order;\n    }\n\n    onBotContractEvent(contract) {\n        const { profit } = contract;\n        const indicative = getIndicativePrice(contract);\n\n        if (this.contract_id !== contract.id) {\n            this.clear(false);\n            this.contract_id = contract.id;\n            this.profit = profit;\n            this.indicative = indicative;\n        }\n\n        const movements = { profit, indicative };\n\n        Object.keys(movements).forEach(name => {\n            if (movements[name] !== this[name]) {\n                this[`${name}_movement`] = movements[name] > this[name] ? 'profit' : 'loss';\n            } else if (this[`${name}_movement`] !== '') {\n                this.indicative_movement = '';\n            }\n\n            this[name] = movements[name];\n        });\n\n        // TODO only add props that is being used\n        this.contract_info = contract;\n    }\n\n    onChange({ name, value }) {\n        this[name] = value;\n        this.validateProperty(name, this[name]);\n    }\n\n    populateContractUpdateConfig(response) {\n        const contract_update_config = getContractUpdateConfig(response);\n\n        if (!isEqualObject(this.contract_update_config, contract_update_config)) {\n            Object.assign(this, contract_update_config);\n            this.contract_update_config = contract_update_config;\n\n            const { contract_update, error } = response;\n            if (contract_update && !error) {\n                this.contract_info.limit_order = Object.assign(this.contract_info.limit_order || {}, contract_update);\n            }\n        }\n    }\n\n    setContractUpdateConfig(contract_update_take_profit, contract_update_stop_loss) {\n        this.has_contract_update_take_profit = !!contract_update_take_profit;\n        this.has_contract_update_stop_loss = !!contract_update_stop_loss;\n        this.contract_update_take_profit = this.has_contract_update_take_profit ? +contract_update_take_profit : null;\n        this.contract_update_stop_loss = this.has_contract_update_stop_loss ? +contract_update_stop_loss : null;\n    }\n\n    updateLimitOrder() {\n        const limit_order = this.getLimitOrder();\n\n        this.root_store.ws.contractUpdate(this.contract_info.contract_id, limit_order).then(response => {\n            if (response.error) {\n                this.root_store.run_panel.showContractUpdateErrorDialog(response.error.message);\n                return;\n            }\n\n            // Update contract store\n            this.populateContractUpdateConfig(response);\n        });\n    }\n\n    /**\n     * Sets validation error messages for an observable property of the store\n     *\n     * @param {String} propertyName - The observable property's name\n     * @param [{String}] messages - An array of strings that contains validation error messages for the particular property.\n     *\n     */\n    setValidationErrorMessages(propertyName, messages) {\n        const is_different = () =>\n            !!this.validation_errors[propertyName]\n                .filter(x => !messages.includes(x))\n                .concat(messages.filter(x => !this.validation_errors[propertyName].includes(x))).length;\n        if (!this.validation_errors[propertyName] || is_different()) {\n            this.validation_errors[propertyName] = messages;\n        }\n    }\n\n    /**\n     * Validates a particular property of the store\n     *\n     * @param {String} property - The name of the property in the store\n     * @param {object} value    - The value of the property, it can be undefined.\n     *\n     */\n    validateProperty(property, value) {\n        const trigger = this.validation_rules[property].trigger;\n        const inputs = { [property]: value !== undefined ? value : this[property] };\n        const validation_rules = { [property]: this.validation_rules[property].rules || [] };\n\n        if (!!trigger && Object.hasOwnProperty.call(this, trigger)) {\n            inputs[trigger] = this[trigger];\n            validation_rules[trigger] = this.validation_rules[trigger].rules || [];\n        }\n\n        const validator = new Validator(inputs, validation_rules, this);\n\n        validator.isPassed();\n\n        Object.keys(inputs).forEach(key => {\n            this.setValidationErrorMessages(key, validator.errors.get(key));\n        });\n    }\n\n    registerReactions() {\n        const { client } = this.core;\n        this.disposeSwitchAcountListener = reaction(\n            () => client.loginid,\n            () => this.clear()\n        );\n\n        return () => {\n            if (typeof this.disposeSwitchAcountListener === 'function') {\n                this.disposeSwitchAcountListener();\n            }\n        };\n    }\n}\n","export default class SummaryStore {\n    constructor(root_store) {\n        this.root_store = root_store;\n    }\n}\n","import { action, makeObservable, observable } from 'mobx';\nimport { config, load, runGroupedEvents } from '@deriv/bot-skeleton';\n\ninterface IToolbarStore {\n    is_animation_info_modal_open: boolean;\n    is_dialog_open: boolean;\n    file_name: string;\n    has_undo_stack: boolean;\n    has_redo_stack: boolean;\n    is_reset_button_clicked: boolean;\n    onResetClick: () => void;\n    closeResetDialog: () => void;\n    onResetOkButtonClick: () => void;\n    onSortClick: () => void;\n    onUndoClick: (is_redo: boolean) => void;\n    onZoomInOutClick: (is_zoom_in: boolean) => void;\n    resetDefaultStrategy: () => void;\n    setHasUndoStack: () => void;\n    setHasRedoStack: () => void;\n}\n\nconst Blockly = window.Blockly;\nexport default class ToolbarStore implements IToolbarStore {\n    root_store: any;\n\n    constructor(root_store: any) {\n        makeObservable(this, {\n            is_animation_info_modal_open: observable,\n            is_dialog_open: observable,\n            file_name: observable,\n            has_undo_stack: observable,\n            has_redo_stack: observable,\n            is_reset_button_clicked: observable,\n            onResetClick: action.bound,\n            closeResetDialog: action.bound,\n            onResetOkButtonClick: action.bound,\n            onUndoClick: action.bound,\n            resetDefaultStrategy: action.bound,\n            setHasUndoStack: action.bound,\n            setHasRedoStack: action.bound,\n        });\n\n        this.root_store = root_store;\n    }\n\n    is_animation_info_modal_open = false;\n    is_dialog_open = false;\n    file_name = config.default_file_name;\n    has_undo_stack = false;\n    has_redo_stack = false;\n    is_reset_button_clicked = false;\n\n    setResetButtonState = (is_reset_button_clicked: boolean): void => {\n        this.is_reset_button_clicked = is_reset_button_clicked;\n    };\n\n    onResetClick = (): void => {\n        this.is_dialog_open = true;\n    };\n\n    closeResetDialog = (): void => {\n        this.is_dialog_open = false;\n    };\n\n    onResetOkButtonClick = (): void => {\n        runGroupedEvents(\n            false,\n            () => {\n                this.resetDefaultStrategy();\n            },\n            'reset'\n        );\n        this.is_dialog_open = false;\n        const { run_panel } = this.root_store;\n        const { is_running } = run_panel;\n        if (is_running) {\n            this.is_reset_button_clicked = true;\n        }\n    };\n\n    resetDefaultStrategy = async () => {\n        const workspace = Blockly.derivWorkspace;\n        workspace.current_strategy_id = Blockly.utils.genUid();\n        await load({\n            block_string: workspace.cached_xml.main,\n            file_name: config.default_file_name,\n            workspace,\n            drop_event: null,\n            strategy_id: null,\n            from: null,\n            showIncompatibleStrategyDialog: null,\n        });\n        workspace.strategy_to_load = workspace.cached_xml.main;\n    };\n\n    onSortClick = () => {\n        Blockly.derivWorkspace.cleanUp();\n    };\n\n    onUndoClick = (is_redo: boolean): void => {\n        Blockly.Events.setGroup('undo_clicked');\n        Blockly.derivWorkspace.undo(is_redo);\n        Blockly.svgResize(Blockly.derivWorkspace); // Called for CommentDelete event.\n        this.setHasRedoStack();\n        this.setHasUndoStack();\n        Blockly.Events.setGroup(false);\n    };\n\n    onZoomInOutClick = (is_zoom_in: boolean): void => {\n        const workspace = Blockly.derivWorkspace;\n        const metrics = workspace.getMetrics();\n        const addition = is_zoom_in ? 1 : -1;\n\n        workspace.zoom(metrics.viewWidth / 2, metrics.viewHeight / 2, addition);\n    };\n\n    setHasUndoStack = (): void => {\n        this.has_undo_stack = Blockly.derivWorkspace?.hasUndoStack();\n    };\n\n    setHasRedoStack = (): void => {\n        this.has_redo_stack = Blockly.derivWorkspace?.hasRedoStack();\n    };\n}\n","import { action, makeObservable, observable, reaction } from 'mobx';\nimport { scrollWorkspace } from '@deriv/bot-skeleton';\nimport { isMobile } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nexport default class ToolboxStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            is_toolbox_open: observable,\n            is_search_loading: observable,\n            is_search_focus: observable,\n            sub_category_index: observable,\n            toolbox_dom: observable,\n            toolbox_examples: observable,\n            onMount: action.bound,\n            onUnmount: action.bound,\n            setWorkspaceOptions: action.bound,\n            adjustWorkspace: action.bound,\n            toggleDrawer: action.bound,\n            onToolboxItemClick: action.bound,\n            onToolboxItemExpand: action.bound,\n            getCategoryContents: action.bound,\n            getAllCategories: action.bound,\n            hasSubCategory: action.bound,\n            onSearch: action.bound,\n            onSearchBlur: action.bound,\n            onSearchClear: action.bound,\n            onSearchKeyUp: action.bound,\n            showSearch: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n    }\n\n    is_toolbox_open = true;\n    is_search_loading = false;\n    is_search_focus = false;\n    sub_category_index = [];\n    toolbox_dom = null;\n    toolbox_examples = null;\n\n    onMount(toolbox_ref) {\n        this.adjustWorkspace();\n\n        this.toolbox_dom = Blockly.Xml.textToDom(toolbox_ref?.current);\n        this.toolbox_examples = [...this.toolbox_dom.childNodes].find(el => el.tagName === 'examples');\n        this.setWorkspaceOptions();\n        this.disposeToolboxToggleReaction = reaction(\n            () => this.is_toolbox_open,\n            is_toolbox_open => {\n                if (is_toolbox_open) {\n                    this.adjustWorkspace();\n                    // Emit event to GTM\n                    const { gtm } = this.core;\n                    gtm.pushDataLayer({ event: 'dbot_toolbox_visible', value: true });\n                }\n            }\n        );\n    }\n\n    onUnmount() {\n        if (typeof this.disposeToolboxToggleReaction === 'function') {\n            this.disposeToolboxToggleReaction();\n        }\n    }\n\n    setWorkspaceOptions() {\n        const workspace = Blockly.derivWorkspace;\n        const readOnly = !!workspace.options.readOnly;\n        let languageTree, hasCategories, hasCollapse, hasComments, hasDisable;\n\n        if (readOnly) {\n            languageTree = null;\n            hasCategories = false;\n            hasCollapse = false;\n            hasComments = false;\n            hasDisable = false;\n        } else {\n            languageTree = this.toolbox_dom;\n            hasCategories = Boolean(languageTree && languageTree.getElementsByTagName('category').length);\n            hasCollapse = hasCategories;\n            hasComments = hasCategories;\n            hasDisable = hasCategories;\n        }\n\n        workspace.options.collapse = hasCollapse;\n        workspace.options.comments = hasComments;\n        workspace.options.disable = hasDisable;\n        workspace.options.hasCategories = hasCategories;\n        workspace.options.languageTree = languageTree;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    adjustWorkspace() {\n        const workspace = Blockly.derivWorkspace;\n        const toolbox_width = document.getElementById('gtm-toolbox')?.getBoundingClientRect().width || 0;\n        const block_canvas_rect = workspace.svgBlockCanvas_?.getBoundingClientRect(); // eslint-disable-line\n\n        if (Math.round(block_canvas_rect?.left) <= toolbox_width) {\n            const scroll_distance = isMobile()\n                ? toolbox_width - block_canvas_rect.left + 20\n                : toolbox_width - block_canvas_rect.left + 36;\n            scrollWorkspace(workspace, scroll_distance, true, false);\n        }\n    }\n\n    toggleDrawer() {\n        this.is_toolbox_open = !this.is_toolbox_open;\n    }\n\n    onToolboxItemClick(category) {\n        const { flyout } = this.root_store;\n        const category_id = category.getAttribute('id');\n        const flyout_content = this.getCategoryContents(category);\n\n        flyout.setIsSearchFlyout(false);\n\n        if (flyout.selected_category?.getAttribute('id') === category_id) {\n            flyout.setVisibility(false);\n        } else {\n            flyout.setSelectedCategory(category);\n            flyout.setContents(flyout_content);\n        }\n    }\n\n    onToolboxItemExpand(index) {\n        if (this.sub_category_index.includes(index)) {\n            const open_ids = this.sub_category_index.filter(open_id => open_id !== index);\n            this.sub_category_index = open_ids;\n        } else {\n            this.sub_category_index = [...this.sub_category_index, index];\n        }\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getCategoryContents(category) {\n        const workspace = Blockly.derivWorkspace;\n        const dynamic = category.getAttribute('dynamic');\n        let xml_list = Array.from(category.childNodes);\n\n        // Dynamic categories\n        if (typeof dynamic === 'string') {\n            const fnToApply = workspace.getToolboxCategoryCallback(dynamic);\n            xml_list = fnToApply(workspace);\n        }\n\n        return xml_list;\n    }\n\n    getAllCategories() {\n        const categories = [];\n        Array.from(this.toolbox_dom.childNodes).forEach(category => {\n            categories.push(category);\n            if (this.hasSubCategory(category.children)) {\n                Array.from(category.children).forEach(subCategory => {\n                    categories.push(subCategory);\n                });\n            }\n        });\n        return categories;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    hasSubCategory(category) {\n        // eslint-disable-next-line consistent-return\n        const subCategory = Object.keys(category).filter(key => {\n            if (category[key].tagName.toUpperCase() === 'CATEGORY') {\n                return category[key];\n            }\n        });\n        if (subCategory.length) {\n            return true;\n        }\n        return false;\n    }\n\n    onSearch({ search }) {\n        this.is_search_focus = true;\n        this.showSearch(search);\n    }\n\n    onSearchBlur() {\n        this.is_search_focus = false;\n    }\n\n    onSearchClear(setFieldValue) {\n        setFieldValue('search', '');\n        this.showSearch('');\n    }\n\n    onSearchKeyUp(submitForm) {\n        this.is_search_loading = true;\n\n        clearTimeout(this.typing_timer);\n        this.typing_timer = setTimeout(\n            action(() => {\n                submitForm();\n                this.is_search_loading = false;\n            }),\n            1000\n        );\n    }\n\n    showSearch(search) {\n        const workspace = Blockly.derivWorkspace;\n        const flyout_content = [];\n        const search_term = search.replace(/\\s+/g, ' ').trim().toUpperCase();\n        const search_words = search_term.split(' ');\n        const all_variables = workspace.getVariablesOfType('');\n        const all_procedures = Blockly.Procedures.allProcedures(workspace);\n        const { flyout } = this.root_store;\n\n        flyout.setVisibility(false);\n\n        // avoid general term which the result will return most of the blocks\n        const general_term = [\n            localize('THE'),\n            localize('OF'),\n            localize('YOU'),\n            localize('IS'),\n            localize('THIS'),\n            localize('THEN'),\n            localize('A'),\n            localize('AN'),\n        ];\n\n        if (search_term.length === 0) {\n            return;\n        } else if (search_term.length <= 1 || search_words.every(term => general_term.includes(term))) {\n            flyout.setIsSearchFlyout(true);\n            flyout.setContents(flyout_content, search);\n            return;\n        }\n\n        const all_categories = this.getAllCategories();\n\n        const block_contents = all_categories\n            .filter(category => !this.hasSubCategory(category.children))\n            .map(category => {\n                const contents = this.getCategoryContents(category);\n\n                const only_block_contents = Array.from(contents).filter(\n                    content => content.tagName.toUpperCase() === 'BLOCK'\n                );\n                return only_block_contents;\n            })\n            .flat();\n\n        const pushIfNotExists = (array, element_to_push) => {\n            if (!array.some(element => element === element_to_push)) {\n                array.push(element_to_push);\n            }\n        };\n\n        const pushBlockWithPriority = priority => {\n            block_contents.forEach(block_content => {\n                const block_type = block_content.getAttribute('type');\n                const block = Blockly.Blocks[block_type];\n                const block_meta = block.meta instanceof Function && block.meta();\n                const block_definitions = block.definition instanceof Function && block.definition();\n                const block_name = block_meta.display_name;\n                const block_type_terms = block_type.toUpperCase().split('_');\n                const block_name_terms = block_name.toUpperCase().split(' ');\n                const definition_key_to_search = /^((message)|(tooltip)|(category))/;\n\n                switch (priority) {\n                    // when the search text match exactly the block's name\n                    case 'exact_block_name': {\n                        if (search_term === block_name.toUpperCase() || search_term === block_type.toUpperCase()) {\n                            pushIfNotExists(flyout_content, block_content);\n                        }\n                        break;\n                    }\n                    // when there's multiple search text and all the search text match block's name or block type\n                    case 'match_words': {\n                        if (\n                            search_words.every(word => block_name_terms.some(term => term.includes(word))) ||\n                            search_words.every(word => block_type_terms.some(term => term.includes(word)))\n                        ) {\n                            pushIfNotExists(flyout_content, block_content);\n                        }\n                        break;\n                    }\n                    // when some of search word match block's name or block's type\n                    case 'block_term': {\n                        if (\n                            block_type_terms.some(term => search_words.some(word => term.includes(word))) ||\n                            block_name_terms.some(term => search_words.some(word => term.includes(word)))\n                        ) {\n                            pushIfNotExists(flyout_content, block_content);\n                        }\n                        break;\n                    }\n                    case 'block_definitions': {\n                        // eslint-disable-next-line consistent-return\n                        Object.keys(block_definitions).forEach(key => {\n                            const definition = block_definitions[key];\n\n                            if (\n                                definition_key_to_search.test(key) &&\n                                search_words.some(word => definition.includes(word))\n                            ) {\n                                pushIfNotExists(flyout_content, block_content);\n                            }\n\n                            if (definition instanceof Array) {\n                                definition.forEach(def => {\n                                    const definition_strings = JSON.stringify(def).toUpperCase();\n\n                                    if (\n                                        def.type === 'field_dropdown' &&\n                                        search_term.length > 2 &&\n                                        search_words.some(word => definition_strings.includes(word))\n                                    ) {\n                                        pushIfNotExists(flyout_content, block_content);\n                                    }\n                                });\n                            }\n                        });\n                        break;\n                    }\n                    case 'block_meta': {\n                        // block_meta matched\n                        const matched_meta = Object.keys(block_meta)\n                            .filter(key => key !== 'display_name')\n                            .find(key => {\n                                const block_meta_strings = block_meta[key]\n                                    .toUpperCase()\n                                    .replace(/[^\\w\\s]/gi, '')\n                                    .split(' ');\n\n                                return search_words.some(word => block_meta_strings.some(meta => meta.includes(word)));\n                            });\n\n                        if (matched_meta && matched_meta.length) {\n                            pushIfNotExists(flyout_content, block_content);\n                        }\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            });\n        };\n\n        const priority_order = ['exact_block_name', 'match_words', 'block_term', 'block_definitions', 'block_meta'];\n\n        priority_order.forEach(priority => pushBlockWithPriority(priority));\n\n        // block_variable_name matched\n        const matched_variables = all_variables.filter(variable => variable.name.toUpperCase().includes(search_term));\n        const variables_blocks = Blockly.DataCategory.search(matched_variables);\n        // eslint-disable-next-line consistent-return\n        const unique_var_blocks = variables_blocks.filter(variable_block => {\n            return flyout_content.indexOf(variable_block) === -1;\n        });\n        if (unique_var_blocks && unique_var_blocks.length) {\n            flyout_content.unshift(...unique_var_blocks);\n        }\n\n        // block_procedure_name matched\n        const searched_procedures = { 0: [], 1: [] };\n        const procedures_callnoreturn = all_procedures[0];\n        const procedures_callreturn = all_procedures[1];\n        Object.keys(procedures_callnoreturn).forEach(key => {\n            const procedure = procedures_callnoreturn[key];\n\n            if (procedure[0].toUpperCase().includes(search_term)) {\n                searched_procedures['0'].unshift(procedure);\n            }\n        });\n\n        Object.keys(procedures_callreturn).forEach(key => {\n            const procedure = procedures_callreturn[key];\n\n            if (procedure[0].toUpperCase().includes(search_term)) {\n                searched_procedures['1'].unshift(procedure);\n            }\n        });\n\n        const procedures_blocks = Blockly.Procedures.populateDynamicProcedures(searched_procedures);\n        // eslint-disable-next-line consistent-return\n        const unique_proce_blocks = procedures_blocks.filter(procedure_block => {\n            return flyout_content.indexOf(procedure_block) === -1;\n        });\n        if (unique_proce_blocks.length) {\n            flyout_content.unshift(...unique_proce_blocks);\n        }\n\n        flyout.setIsSearchFlyout(true);\n        flyout.setContents(flyout_content, search);\n    }\n}\n","export const transaction_elements = Object.freeze({\n    CONTRACT: 'contract',\n    DIVIDER: 'divider',\n});\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\nimport { log_types } from '@deriv/bot-skeleton';\nimport { formatDate, isEnded } from '@deriv/shared';\nimport { transaction_elements } from '../constants/transactions';\nimport { getStoredItemsByKey, getStoredItemsByUser, setStoredItemsByKey } from '../utils/session-storage';\n\nexport default class TransactionsStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            elements: observable,\n            active_transaction_id: observable,\n            recovered_completed_transactions: observable,\n            recovered_transactions: observable,\n            is_called_proposal_open_contract: observable,\n            is_transaction_details_modal_open: observable,\n            transactions: computed,\n            onBotContractEvent: action.bound,\n            pushTransaction: action.bound,\n            onClickOutsideTransaction: action.bound,\n            onMount: action.bound,\n            onUnmount: action.bound,\n            clear: action.bound,\n            setActiveTransactionId: action.bound,\n            registerReactions: action.bound,\n            recoverPendingContracts: action.bound,\n            updateResultsCompletedContract: action.bound,\n            sortOutPositionsBeforeAction: action.bound,\n            recoverPendingContractsById: action.bound,\n            toggleTransactionDetailsModal: action.bound,\n        });\n\n        this.is_transaction_details_modal_open = false;\n        this.root_store = root_store;\n        this.core = core;\n        this.disposeReactionsFn = this.registerReactions();\n    }\n    TRANSACTION_CACHE = 'transaction_cache';\n\n    elements = getStoredItemsByUser(this.TRANSACTION_CACHE, this.core?.client?.loginid, []);\n    active_transaction_id = null;\n    recovered_completed_transactions = [];\n    recovered_transactions = [];\n    is_called_proposal_open_contract = false;\n    is_transaction_details_modal_open = false;\n\n    get transactions() {\n        return (\n            this.elements[this.core?.client?.loginid]?.filter(\n                element => element.type === transaction_elements.CONTRACT\n            ) ?? []\n        );\n    }\n\n    toggleTransactionDetailsModal(is_open) {\n        this.is_transaction_details_modal_open = is_open;\n    }\n\n    onBotContractEvent(data) {\n        this.pushTransaction(data);\n    }\n\n    pushTransaction(data) {\n        const is_completed = isEnded(data);\n        const { run_id } = this.root_store.run_panel;\n        const current_account = this.core?.client?.loginid;\n        const contract = {\n            barrier: data.barrier,\n            buy_price: data.buy_price,\n            contract_id: data.contract_id,\n            contract_type: data.contract_type,\n            currency: data.currency,\n            date_start: formatDate(data.date_start, 'YYYY-M-D HH:mm:ss [GMT]'),\n            display_name: data.display_name,\n            entry_tick: data.entry_tick_display_value,\n            entry_tick_time: data.entry_tick_time && formatDate(data.entry_tick_time, 'YYYY-M-D HH:mm:ss [GMT]'),\n            exit_tick: data.exit_tick_display_value,\n            exit_tick_time: data.exit_tick_time && formatDate(data.exit_tick_time, 'YYYY-M-D HH:mm:ss [GMT]'),\n            high_barrier: data.high_barrier,\n            is_completed,\n            low_barrier: data.low_barrier,\n            payout: data.payout,\n            profit: is_completed && data.profit,\n            run_id,\n            shortcode: data.shortcode,\n            tick_count: data.tick_count,\n            transaction_ids: data.transaction_ids,\n            underlying: data.underlying,\n        };\n\n        if (!this.elements[current_account]) {\n            this.elements = {\n                ...this.elements,\n                [current_account]: [],\n            };\n        }\n\n        const same_contract_index = this.elements[current_account]?.findIndex(\n            c =>\n                c.type === transaction_elements.CONTRACT &&\n                c.data.transaction_ids &&\n                c.data.transaction_ids.buy === data.transaction_ids.buy\n        );\n\n        if (same_contract_index === -1) {\n            // Render a divider if the \"run_id\" for this contract is different.\n            if (this.elements[current_account]?.length > 0) {\n                const is_new_run =\n                    this.elements[current_account]?.[0].type === transaction_elements.CONTRACT &&\n                    contract.run_id !== this.elements[current_account]?.[0].data.run_id;\n\n                if (is_new_run) {\n                    this.elements[current_account]?.unshift({\n                        type: transaction_elements.DIVIDER,\n                        data: contract.run_id,\n                    });\n                }\n            }\n\n            this.elements[current_account]?.unshift({\n                type: transaction_elements.CONTRACT,\n                data: contract,\n            });\n        } else {\n            // If data belongs to existing contract in memory, update it.\n            this.elements[current_account]?.splice(same_contract_index, 1, {\n                type: transaction_elements.CONTRACT,\n                data: contract,\n            });\n        }\n\n        this.elements = { ...this.elements }; // force update\n    }\n\n    setActiveTransactionId(transaction_id) {\n        // Toggle transaction popover if passed transaction_id is the same.\n        if (transaction_id && this.active_transaction_id === transaction_id) {\n            this.active_transaction_id = null;\n        } else {\n            this.active_transaction_id = transaction_id;\n        }\n    }\n\n    onClickOutsideTransaction(event) {\n        const path = event.path || (event.composedPath && event.composedPath());\n        const is_transaction_click = path.some(\n            el => el.classList && el.classList.contains('transactions__item-wrapper')\n        );\n        if (!is_transaction_click) {\n            this.setActiveTransactionId(null);\n        }\n    }\n\n    onMount() {\n        window.addEventListener('click', this.onClickOutsideTransaction);\n        this.recoverPendingContracts();\n    }\n\n    onUnmount() {\n        window.removeEventListener('click', this.onClickOutsideTransaction);\n    }\n\n    clear() {\n        this.elements[this.core?.client?.loginid] = [];\n        this.recovered_completed_transactions = this.recovered_completed_transactions?.slice(0, 0);\n        this.recovered_transactions = this.recovered_transactions?.slice(0, 0);\n        this.is_transaction_details_modal_open = false;\n    }\n\n    registerReactions() {\n        const { client } = this.core;\n\n        // Write transactions to session storage on each change in transaction elements.\n        const disposeTransactionElementsListener = reaction(\n            () => this.elements[client?.loginid],\n            elements => {\n                const stored_transactions = getStoredItemsByKey(this.TRANSACTION_CACHE, {});\n                stored_transactions[client.loginid] = elements?.slice(0, 5000) ?? [];\n                setStoredItemsByKey(this.TRANSACTION_CACHE, stored_transactions);\n            }\n        );\n\n        // User could've left the page mid-contract. On initial load, try\n        // to recover any pending contracts so we can reflect accurate stats\n        // and transactions.\n        const disposeRecoverContracts = reaction(\n            () => this.transactions.length,\n            () => this.recoverPendingContracts()\n        );\n\n        return () => {\n            disposeTransactionElementsListener();\n            disposeRecoverContracts();\n        };\n    }\n\n    recoverPendingContracts(contract = null) {\n        this.transactions.forEach(({ data: trx }) => {\n            if (trx.is_completed || this.recovered_transactions.includes(trx.contract_id)) return;\n            this.recoverPendingContractsById(trx.contract_id, contract);\n        });\n    }\n\n    updateResultsCompletedContract(contract) {\n        const { journal, summary_card } = this.root_store;\n        const { contract_info } = summary_card;\n        const { currency, profit } = contract;\n\n        if (contract.contract_id !== contract_info?.contract_id) {\n            this.onBotContractEvent(contract);\n\n            if (!this.recovered_transactions.includes(contract.contract_id)) {\n                this.recovered_transactions.push(contract.contract_id);\n            }\n            if (!this.recovered_completed_transactions.includes(contract.contract_id) && isEnded(contract)) {\n                this.recovered_completed_transactions.push(contract.contract_id);\n\n                journal.onLogSuccess({\n                    log_type: profit > 0 ? log_types.PROFIT : log_types.LOST,\n                    extra: { currency, profit },\n                });\n            }\n        }\n    }\n\n    sortOutPositionsBeforeAction(positions, element_id = false) {\n        positions?.forEach(position => {\n            if (!element_id || (element_id && position.id === element_id)) {\n                const contract_details = position.contract_info;\n                this.updateResultsCompletedContract(contract_details);\n            }\n        });\n    }\n\n    recoverPendingContractsById(contract_id, contract = null) {\n        const positions = this.core.portfolio.positions;\n\n        if (contract) {\n            this.is_called_proposal_open_contract = true;\n            if (contract.contract_id === contract_id) {\n                this.updateResultsCompletedContract(contract);\n            }\n        }\n\n        if (!this.is_called_proposal_open_contract) {\n            const current_account = this.core?.client?.loginid;\n            if (!this.elements[current_account]?.length) {\n                this.sortOutPositionsBeforeAction(positions);\n            }\n            if (this.elements[current_account]?.length && !this.elements[current_account]?.[0]?.data?.profit) {\n                const element_id = this.elements[current_account]?.[0].data.contract_id;\n                this.sortOutPositionsBeforeAction(positions, element_id);\n            }\n        }\n    }\n}\n","import { TStores } from '@deriv/stores/types';\nimport type { TDbot, TWebSocket } from 'Types';\nimport AppStore from './app-store';\nimport BlocklyStore from './blockly-store';\nimport ChartStore from './chart-store';\nimport DashboardStore from './dashboard-store';\nimport DataCollectionStore from './data-collection-store';\nimport DownloadStore from './download-store';\nimport FlyoutHelpStore from './flyout-help-store';\nimport FlyoutStore from './flyout-store';\nimport GoogleDriveStore from './google-drive-store';\nimport JournalStore from './journal-store';\nimport LoadModalStore from './load-modal-store';\nimport QuickStrategyStore from './quick-strategy-store';\nimport RoutePromptDialogStore from './route-prompt-dialog-store';\nimport RunPanelStore from './run-panel-store';\nimport SaveModalStore from './save-modal-store';\nimport SelfExclusionStore from './self-exclusion-store';\nimport SummaryCardStore from './summary-card-store';\nimport SummaryStore from './summary-store';\nimport ToolbarStore from './toolbar-store';\nimport ToolboxStore from './toolbox-store';\nimport TransactionsStore from './transactions-store';\n\n// TODO: need to write types for the individual classes and convert them to ts\nexport default class RootStore {\n    public ws: TWebSocket;\n    public dbot: TDbot;\n    public app: AppStore;\n    public summary_card: SummaryCardStore;\n    public download: DownloadStore;\n    public flyout: FlyoutStore;\n    public flyout_help: FlyoutHelpStore;\n    public google_drive: GoogleDriveStore;\n    public journal: JournalStore;\n    public load_modal: LoadModalStore;\n    public run_panel: RunPanelStore;\n    public save_modal: SaveModalStore;\n    public summary: SummaryStore;\n    public transactions: TransactionsStore;\n    public toolbar: ToolbarStore;\n    public toolbox: ToolboxStore;\n    public quick_strategy: QuickStrategyStore;\n    public route_prompt_dialog: RoutePromptDialogStore;\n    public self_exclusion: SelfExclusionStore;\n    public dashboard: DashboardStore;\n\n    public chart_store: ChartStore;\n    public blockly_store: BlocklyStore;\n    public data_collection_store: DataCollectionStore;\n\n    constructor(core: TStores, ws: TWebSocket, dbot: TDbot) {\n        this.ws = ws;\n        this.dbot = dbot;\n        this.app = new AppStore(this, core);\n        this.summary_card = new SummaryCardStore(this, core);\n        this.download = new DownloadStore(this);\n        this.flyout = new FlyoutStore(this);\n        this.flyout_help = new FlyoutHelpStore(this);\n        this.google_drive = new GoogleDriveStore(this);\n        this.journal = new JournalStore(this, core);\n        this.load_modal = new LoadModalStore(this);\n        this.run_panel = new RunPanelStore(this, core);\n        this.save_modal = new SaveModalStore(this);\n        this.summary = new SummaryStore(this);\n        this.transactions = new TransactionsStore(this, core);\n        this.toolbar = new ToolbarStore(this);\n        this.toolbox = new ToolboxStore(this, core);\n        this.quick_strategy = new QuickStrategyStore(this);\n        this.route_prompt_dialog = new RoutePromptDialogStore(this, core);\n        this.self_exclusion = new SelfExclusionStore(this, core);\n        this.dashboard = new DashboardStore(this);\n\n        // need to be at last for dependency\n        this.chart_store = new ChartStore(this);\n        this.blockly_store = new BlocklyStore(this);\n        this.data_collection_store = new DataCollectionStore(this, core);\n    }\n}\n","import React, { createContext, PropsWithChildren, useContext, useMemo } from 'react';\nimport { DBot } from '@deriv/bot-skeleton';\nimport { useStore } from '@deriv/stores';\nimport type { TWebSocket } from 'Types';\nimport RootStore from './root-store';\n\nconst DBotStoreContext = createContext<RootStore | null>(null);\n\nconst DBotStoreProvider = ({ children, ws, mock }: PropsWithChildren<{ ws: TWebSocket; mock?: RootStore }>) => {\n    const stores = useStore();\n    const memoizedValue = useMemo(() => mock || new RootStore(stores, ws, DBot), [mock, stores, ws]);\n\n    return <DBotStoreContext.Provider value={memoizedValue}>{children}</DBotStoreContext.Provider>;\n};\n\nconst useDBotStore = () => {\n    const store = useContext(DBotStoreContext);\n\n    if (!store) {\n        throw new Error('useDBotStore must be used within DBotStoreProvider');\n    }\n\n    return store;\n};\n\nexport { DBotStoreProvider, useDBotStore };\n\nexport const mockDBotStore = (root_store: ReturnType<typeof useStore>, ws: TWebSocket) =>\n    new RootStore(root_store, ws, DBot);\n","import React from 'react';\nimport classnames from 'classnames';\nimport { Button, Icon, StaticUrl } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst GoogleDrive = observer(() => {\n    const { google_drive, load_modal } = useDBotStore();\n    const { is_authorised } = google_drive;\n    const { is_open_button_loading, onDriveConnect, onDriveOpen } = load_modal;\n\n    return (\n        <div className='load-strategy__container'>\n            <div className='load-strategy__google-drive'>\n                <Icon\n                    icon={'IcGoogleDrive'}\n                    className={classnames('load-strategy__google-drive-icon', {\n                        'load-strategy__google-drive-icon--disabled': !is_authorised,\n                    })}\n                    size={isMobile() ? 96 : 128}\n                />\n                <div className='load-strategy__google-drive-connected-text'>\n                    {is_authorised ? (\n                        <Localize i18n_default_text='You are connected to Google Drive' />\n                    ) : (\n                        'Google Drive'\n                    )}\n                </div>\n                {is_authorised ? (\n                    <Button.Group>\n                        <Button text={localize('Disconnect')} onClick={onDriveConnect} has_effect secondary large />\n                        <Button\n                            text={localize('Open')}\n                            onClick={() => {\n                                onDriveOpen();\n                            }}\n                            is_loading={is_open_button_loading}\n                            has_effect\n                            primary\n                            large\n                        />\n                    </Button.Group>\n                ) : (\n                    <React.Fragment>\n                        <div className='load-strategy__google-drive-terms'>\n                            <div className='load-strategy__google-drive-text'>\n                                <Localize i18n_default_text=\"To import your bot from your Google Drive, you'll need to sign in to your Google account.\" />\n                            </div>\n                            <div className='load-strategy__google-drive-text'>\n                                <Localize\n                                    i18n_default_text='To know how Google Drive handles your data, please review Deriv’s <0>Privacy policy.</0>'\n                                    components={[\n                                        <StaticUrl\n                                            key={0}\n                                            className='link'\n                                            href='tnc/security-and-privacy.pdf'\n                                            is_document\n                                        />,\n                                    ]}\n                                />\n                            </div>\n                        </div>\n                        <Button text={localize('Sign in')} onClick={onDriveConnect} has_effect primary large />\n                    </React.Fragment>\n                )}\n            </div>\n        </div>\n    );\n});\n\nexport default GoogleDrive;\n","import React from 'react';\nimport { Button } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst LocalFooter = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const { is_open_button_loading, loadFileFromLocal, setLoadedLocalFile, toggleLoadModal } = load_modal;\n    const { setOpenSettings, setPreviewOnPopup } = dashboard;\n\n    const is_mobile = isMobile();\n    const Wrapper = is_mobile ? Button.Group : React.Fragment;\n\n    return (\n        <Wrapper>\n            {is_mobile && (\n                <Button text={localize('Cancel')} onClick={() => setLoadedLocalFile(null)} has_effect secondary large />\n            )}\n            <Button\n                text={localize('Open')}\n                onClick={() => {\n                    loadFileFromLocal();\n                    toggleLoadModal();\n                    setPreviewOnPopup(false);\n                    setOpenSettings('import');\n                }}\n                is_loading={is_open_button_loading}\n                has_effect\n                primary\n                large\n            />\n        </Wrapper>\n    );\n});\n\nexport default LocalFooter;\n","import React from 'react';\nimport { Icon } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TWorkspaceControlProps = {\n    mockZoomInOut?: (is_zoom_in: boolean) => void;\n};\n\nconst WorkspaceControl = observer(({ mockZoomInOut }: TWorkspaceControlProps) => {\n    const { dashboard } = useDBotStore();\n    const { onZoomInOutClick } = dashboard;\n\n    return (\n        <div className='load-strategy__preview-workspace-controls'>\n            <Icon\n                icon={'IcAddRounded'}\n                className='load-strategy__preview-workspace-icon'\n                onClick={() => {\n                    mockZoomInOut ? mockZoomInOut(true) : onZoomInOutClick(true);\n                }}\n                data_testid='zoom-in'\n            />\n            <Icon\n                icon={'IcMinusRounded'}\n                className='load-strategy__preview-workspace-icon'\n                onClick={() => {\n                    mockZoomInOut ? mockZoomInOut(false) : onZoomInOutClick(false);\n                }}\n                data_testid='zoom-out'\n            />\n        </div>\n    );\n});\n\nexport default WorkspaceControl;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { Button, Icon } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport LocalFooter from './local-footer';\nimport WorkspaceControl from './workspace-control';\n\nconst LocalComponent = observer(() => {\n    const { dashboard, load_modal } = useDBotStore();\n    const { active_tab, active_tour } = dashboard;\n    const { handleFileChange, loaded_local_file, setLoadedLocalFile } = load_modal;\n\n    const file_input_ref = React.useRef(null);\n    const [is_file_supported, setIsFileSupported] = React.useState(true);\n    const is_mobile = isMobile();\n\n    if (loaded_local_file && is_file_supported) {\n        return (\n            <div className='load-strategy__container load-strategy__container--has-footer'>\n                <div\n                    className={classNames('load-strategy__local-preview', {\n                        'load-strategy__local-preview--active': active_tab === 1 && active_tour,\n                    })}\n                >\n                    <div className='load-strategy__title'>\n                        <Localize i18n_default_text='Preview' />\n                    </div>\n                    <div className='load-strategy__preview-workspace'>\n                        <div id='load-strategy__blockly-container' style={{ height: '100%' }}>\n                            <div className='load-strategy__local-preview-close'>\n                                <Icon icon='IcCross' onClick={() => setLoadedLocalFile(null)} />\n                            </div>\n                            <WorkspaceControl />\n                        </div>\n                    </div>\n                </div>\n                {is_mobile && (\n                    <div className='load-strategy__local-footer'>\n                        <LocalFooter />\n                    </div>\n                )}\n            </div>\n        );\n    }\n\n    return (\n        <div className='load-strategy__container'>\n            <div className='load-strategy__local-dropzone'>\n                <input\n                    type='file'\n                    ref={file_input_ref}\n                    accept='application/xml, text/xml'\n                    style={{ display: 'none' }}\n                    onChange={e => setIsFileSupported(handleFileChange(e, false))}\n                />\n                <div\n                    className='load-strategy__local-dropzone-area'\n                    onDrop={e => {\n                        handleFileChange(e, false);\n                    }}\n                >\n                    {is_mobile ? (\n                        <Icon icon='IcLocal' className='load-strategy__local-icon' size={is_mobile ? 96 : 128} />\n                    ) : (\n                        <React.Fragment>\n                            <Icon icon='IcPc' className='load-strategy__local-icon' size={is_mobile ? 96 : 128} />\n                            <div className='load-strategy__local-title'>\n                                <Localize i18n_default_text='Drag your XML file here' />\n                            </div>\n                            <div className='load-strategy__local-description'>\n                                <Localize i18n_default_text='or, if you prefer...' />\n                            </div>\n                        </React.Fragment>\n                    )}\n                    <Button\n                        text={\n                            is_file_supported\n                                ? localize('Select an XML file from your device')\n                                : localize('Please upload an XML file')\n                        }\n                        onClick={() => file_input_ref.current.click()}\n                        has_effect\n                        primary\n                        large\n                    />\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default LocalComponent;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { timeSince } from '@deriv/bot-skeleton';\nimport { save_types } from '@deriv/bot-skeleton/src/constants/save-type';\nimport { Icon } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TRecentWorkspaceProps = {\n    workspace: { [key: string]: any };\n};\n\nconst RecentWorkspace = observer(({ workspace }: TRecentWorkspaceProps) => {\n    const { load_modal } = useDBotStore();\n    const { getRecentFileIcon, getSaveType, previewRecentStrategy, selected_strategy_id } = load_modal;\n    return (\n        <div\n            className={classnames('load-strategy__recent-item load-dialog', {\n                'load-strategy__recent-item--selected': selected_strategy_id === workspace.id,\n            })}\n            key={workspace.id}\n            onClick={selected_strategy_id === workspace.id ? undefined : () => previewRecentStrategy(workspace.id)}\n            data-testid='dt_recent_workspace_item'\n        >\n            <div className='load-strategy__recent-item-text load-dialog'>\n                <div className='load-strategy__recent-item-title'>{workspace.name}</div>\n                <div className='load-strategy__recent-item-time'>{timeSince(workspace.timestamp)}</div>\n            </div>\n            <div className='load-strategy__recent-item-location load-dialog'>\n                <Icon\n                    icon={getRecentFileIcon(workspace.save_type)}\n                    className={classnames({\n                        'load-strategy__recent-icon--active': workspace.save_type === save_types.GOOGLE_DRIVE,\n                    })}\n                />\n                <div className='load-strategy__recent-item-saved'>{getSaveType(workspace.save_type)}</div>\n            </div>\n        </div>\n    );\n});\n\nexport default RecentWorkspace;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { Icon } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { Localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport RecentWorkspace from './recent-workspace';\nimport WorkspaceControl from './workspace-control';\n\nconst RecentComponent = observer(() => {\n    const { load_modal } = useDBotStore();\n    const { is_explanation_expand, recent_strategies, toggleExplanationExpand } = load_modal;\n    if (recent_strategies.length) {\n        return (\n            <div className='load-strategy__container load-strategy__container--has-footer'>\n                <div className='load-strategy__recent'>\n                    <div className='load-strategy__recent-files'>\n                        <div className='load-strategy__title'>\n                            <Localize i18n_default_text='Recent' />\n                        </div>\n                        <div className='load-strategy__recent-files-list'>\n                            {recent_strategies.map(workspace => (\n                                <RecentWorkspace key={workspace.id} workspace={workspace} />\n                            ))}\n                        </div>\n                    </div>\n                    <div className='load-strategy__recent-preview'>\n                        <div className='load-strategy__title load-strategy__recent-preview-title'>\n                            <Localize i18n_default_text='Preview' />\n                        </div>\n                        <div className='load-strategy__preview-workspace'>\n                            <div id='load-strategy__blockly-container' style={{ height: '100%' }}>\n                                <WorkspaceControl />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className='load-strategy__container'>\n            <div className='load-strategy__recent-empty'>\n                <Icon icon='IcEmptyFolder' className='load-strategy__recent-empty-icon' size={128} />\n                <div className='load-strategy__recent-empty-title'>\n                    <Localize i18n_default_text='You do not have any recent bots' />\n                </div>\n                <div className='load-strategy__recent-empty-description'>\n                    <Localize i18n_default_text='Create one or upload one from your local drive or Google Drive.' />\n                </div>\n                <div className='load-strategy__recent-empty-expand' onClick={toggleExplanationExpand}>\n                    <Localize i18n_default_text=\"Why can't I see my recent bots?\" />\n                </div>\n                <div\n                    className={classnames('load-strategy__recent-empty-explanation', {\n                        'load-strategy__recent-empty-explanation--show': is_explanation_expand,\n                    })}\n                >\n                    <div>\n                        <Localize i18n_default_text=\"If you've recently used bots but don't see them in this list, it may be because you:\" />\n                    </div>\n                    <ol className='load-strategy__recent-empty-explanation-list'>\n                        <li>\n                            <Localize i18n_default_text='1. Logged in from a different device' />\n                        </li>\n                        <li>\n                            <Localize i18n_default_text='2. Logged in from a different browser' />\n                        </li>\n                        <li>\n                            <Localize i18n_default_text='3. Cleared your browser cache' />\n                        </li>\n                    </ol>\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default RecentComponent;\n","import React from 'react';\nimport { Button } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst RecentFooter = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const { is_open_button_loading, loadFileFromRecent, toggleLoadModal } = load_modal;\n    const { setOpenSettings } = dashboard;\n\n    return (\n        <Button\n            text={localize('Open')}\n            onClick={() => {\n                loadFileFromRecent();\n                toggleLoadModal();\n                setOpenSettings('import');\n            }}\n            is_loading={is_open_button_loading}\n            has_effect\n            primary\n            large\n        />\n    );\n});\n\nexport default RecentFooter;\n","import React from 'react';\nimport { MobileFullPageModal, Modal, Tabs } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { tabs_title } from 'Constants/load-modal';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport GoogleDrive from '../dashboard/dashboard-component/load-bot-preview/google-drive';\nimport Local from './local';\nimport LocalFooter from './local-footer';\nimport Recent from './recent';\nimport RecentFooter from './recent-footer';\n\nconst LoadModal = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const {\n        active_index,\n        is_load_modal_open,\n        loaded_local_file,\n        onEntered,\n        recent_strategies,\n        setActiveTabIndex,\n        toggleLoadModal,\n        tab_name,\n    } = load_modal;\n    const { setPreviewOnPopup } = dashboard;\n    const header_text = localize('Load strategy');\n\n    if (isMobile()) {\n        return (\n            <MobileFullPageModal\n                is_modal_open={is_load_modal_open}\n                className='load-strategy__wrapper'\n                header={localize('Load strategy')}\n                onClickClose={() => {\n                    setPreviewOnPopup(false);\n                    toggleLoadModal();\n                }}\n                height_offset='80px'\n                page_overlay\n            >\n                <Tabs active_index={active_index} onTabItemClick={setActiveTabIndex} top>\n                    <div label={localize('Local')}>\n                        <Local />\n                    </div>\n                    <div label='Google Drive'>\n                        <GoogleDrive />\n                    </div>\n                </Tabs>\n            </MobileFullPageModal>\n        );\n    }\n\n    const has_loaded_file = loaded_local_file && tab_name === tabs_title.TAB_LOCAL;\n    const has_recent_strategies = recent_strategies.length > 0 && tab_name === tabs_title.TAB_RECENT;\n\n    return (\n        <Modal\n            title={header_text}\n            className='load-strategy'\n            width='1000px'\n            height='80vh'\n            is_open={is_load_modal_open}\n            toggleModal={toggleLoadModal}\n            onEntered={onEntered}\n            elements_to_ignore={[document.querySelector('.injectionDiv')]}\n        >\n            <Modal.Body>\n                <Tabs active_index={active_index} onTabItemClick={setActiveTabIndex} top header_fit_content>\n                    <div label={localize('Recent')}>\n                        <Recent />\n                    </div>\n                    <div label={localize('Local')}>\n                        <Local />\n                    </div>\n                    <div label='Google Drive'>\n                        <GoogleDrive />\n                    </div>\n                </Tabs>\n            </Modal.Body>\n            {has_recent_strategies && (\n                <Modal.Footer has_separator>\n                    <RecentFooter />\n                </Modal.Footer>\n            )}\n            {has_loaded_file && (\n                <Modal.Footer has_separator>\n                    <LocalFooter />\n                </Modal.Footer>\n            )}\n        </Modal>\n    );\n});\n\nexport default LoadModal;\n","import LoadModal from './load-modal';\nimport './load-modal.scss';\n\nexport default LoadModal;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { useFormikContext } from 'formik';\nimport { Button, Text, ThemedScrollbars } from '@deriv/components';\nimport Icon from '@deriv/components/src/components/icon/icon';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { STRATEGIES } from '../config';\nimport '../quick-strategy.scss';\n\ntype TDesktopFormWrapper = {\n    children: React.ReactNode;\n};\n\nconst FormWrapper: React.FC<TDesktopFormWrapper> = observer(({ children }) => {\n    // const [active_tab, setActiveTab] = React.useState('TRADE_PARAMETERS');\n    const { submitForm, isValid, setFieldValue, validateForm } = useFormikContext();\n    const { quick_strategy, run_panel } = useDBotStore();\n    const { selected_strategy, setSelectedStrategy, setFormVisibility, toggleStopBotDialog } = quick_strategy;\n    const strategy = STRATEGIES[selected_strategy as keyof typeof STRATEGIES];\n    const handleClose = () => {\n        setFormVisibility(false);\n    };\n\n    React.useEffect(() => {\n        validateForm();\n    }, [selected_strategy, validateForm]);\n\n    const onChangeStrategy = (strategy: string) => {\n        setSelectedStrategy(strategy);\n    };\n\n    const onEdit = async () => {\n        await setFieldValue('action', 'EDIT');\n        submitForm();\n    };\n\n    const handleSubmit = async () => {\n        if (run_panel.is_running) {\n            await setFieldValue('action', 'EDIT');\n            submitForm();\n            toggleStopBotDialog();\n        } else {\n            await setFieldValue('action', 'RUN');\n            submitForm();\n        }\n    };\n\n    return (\n        <div className='qs'>\n            <div className='qs__head'>\n                <div className='qs__head__title'>\n                    <Text weight='bold'>{localize('Quick Strategy')}</Text>\n                </div>\n                <div className='qs__head__action'>\n                    <span data-testid='qs-desktop-close-button' onClick={() => handleClose()}>\n                        <Icon icon='IcCross' />\n                    </span>\n                </div>\n            </div>\n            <div className='qs__body'>\n                <div className='qs__body__sidebar'>\n                    <div className='qs__body__sidebar__subtitle'>\n                        <Text size='xs'>{localize('Choose a template below and set your trade parameters.')}</Text>\n                    </div>\n                    <div className='qs__body__sidebar__items'>\n                        <ul>\n                            {(Object.keys(STRATEGIES) as (keyof typeof STRATEGIES)[]).map(key => {\n                                const str = STRATEGIES[key];\n                                const active = key === selected_strategy;\n                                return (\n                                    <li\n                                        className={classNames({ active })}\n                                        key={key}\n                                        onClick={() => onChangeStrategy(String(key))}\n                                    >\n                                        <Text size='xs' weight={active ? 'bold' : 'normal'}>\n                                            {str.label}\n                                        </Text>\n                                    </li>\n                                );\n                            })}\n                        </ul>\n                    </div>\n                </div>\n                <div className='qs__body__content'>\n                    <ThemedScrollbars className='qs__form__container' autohide={false}>\n                        {/* <div className='qs__body__content__head'>\n                            <div className='qs__body__content__head__tabs'>\n                                {FORM_TABS.map(tab => {\n                                    const active = tab.value === active_tab;\n                                    const cs = 'qs__body__content__head__tabs__tab';\n                                    return (\n                                        <span\n                                            className={classNames(cs, { active, disabled: tab?.disabled })}\n                                            key={tab.value}\n                                            onClick={() => setActiveTab(tab.value)}\n                                        >\n                                            <Text size='xs' weight={active ? 'bold' : 'normal'}>\n                                                {tab.label}\n                                            </Text>\n                                        </span>\n                                    );\n                                })}\n                            </div>\n                        </div> */}\n                        <div className='qs__body__content__description'>\n                            <div>\n                                <Text size='xs'>{strategy.description}</Text>\n                            </div>\n                        </div>\n                        <div className='qs__body__content__form'>{children}</div>\n                    </ThemedScrollbars>\n                    <div className='qs__body__content__footer'>\n                        <Button secondary disabled={!isValid} onClick={onEdit}>\n                            {localize('Edit')}\n                        </Button>\n                        <Button data-testid='qs-run-button' primary onClick={handleSubmit} disabled={!isValid}>\n                            {localize('Run')}\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default React.memo(FormWrapper);\n","import React from 'react';\nimport { useFormikContext } from 'formik';\nimport { Button, SelectNative, Text, ThemedScrollbars } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { STRATEGIES } from '../config';\nimport '../quick-strategy.scss';\n\ntype TMobileFormWrapper = {\n    children: React.ReactNode;\n};\n\nconst MobileFormWrapper: React.FC<TMobileFormWrapper> = observer(({ children }) => {\n    // const [active_tab, setActiveTab] = React.useState('TRADE_PARAMETERS');\n    const { submitForm, isValid, setFieldValue, validateForm } = useFormikContext();\n    const { quick_strategy, run_panel } = useDBotStore();\n    const { selected_strategy, setSelectedStrategy, toggleStopBotDialog } = quick_strategy;\n    const strategy = STRATEGIES[selected_strategy as keyof typeof STRATEGIES];\n\n    React.useEffect(() => {\n        validateForm();\n    }, [selected_strategy, validateForm]);\n\n    const onChangeStrategy = (strategy: string) => {\n        setSelectedStrategy(strategy);\n    };\n\n    const dropdown_list = Object.keys(STRATEGIES).map(key => ({\n        value: key,\n        text: STRATEGIES[key as keyof typeof STRATEGIES].label,\n        description: STRATEGIES[key as keyof typeof STRATEGIES].description,\n    }));\n\n    const handleSubmit = async () => {\n        if (run_panel.is_running) {\n            await setFieldValue('action', 'EDIT');\n            submitForm();\n            toggleStopBotDialog();\n        } else {\n            await setFieldValue('action', 'RUN');\n            submitForm();\n        }\n    };\n\n    return (\n        <div className='qs'>\n            <div className='qs__body'>\n                <div className='qs__body__content'>\n                    <ThemedScrollbars className='qs__form__container' autohide={false}>\n                        <div className='qs__body__content__title'>\n                            <div className='qs__body__content__description'>\n                                <Text size='xxs'>\n                                    {localize('Choose a template below and set your trade parameters.')}\n                                </Text>\n                            </div>\n                            <div className='qs__body__content__select'>\n                                <SelectNative\n                                    list_items={dropdown_list}\n                                    value={selected_strategy}\n                                    // label={localize(label)}\n                                    should_show_empty_option={false}\n                                    onChange={(e: React.ChangeEvent<HTMLSelectElement>) => {\n                                        onChangeStrategy(e.target.value);\n                                    }}\n                                />\n                            </div>\n                        </div>\n                        <div className='qs__body__content__description'>\n                            <div>\n                                <Text size='xxs'>{strategy.description}</Text>\n                            </div>\n                        </div>\n                        {/* <div className='qs__body__content__head'>\n                            <div className='qs__body__content__head__tabs'>\n                                {FORM_TABS.map(tab => {\n                                    const active = tab.value === active_tab;\n                                    const cs = 'qs__body__content__head__tabs__tab';\n                                    return (\n                                        <span\n                                            className={classNames(cs, { active, disabled: tab?.disabled })}\n                                            key={tab.value}\n                                            onClick={() => setActiveTab(tab.value)}\n                                        >\n                                            <Text size='xs' weight={active ? 'bold' : 'normal'}>\n                                                {tab.label}\n                                            </Text>\n                                        </span>\n                                    );\n                                })}\n                            </div>\n                        </div> */}\n                        <div className='qs__body__content__form'>{children}</div>\n                    </ThemedScrollbars>\n                    <div className='qs__body__content__footer'>\n                        <Button\n                            primary\n                            data-testid='qs-run-button'\n                            type='submit'\n                            onClick={handleSubmit}\n                            disabled={!isValid}\n                        >\n                            {localize('Run')}\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default MobileFormWrapper;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { Field, FieldProps, useFormikContext } from 'formik';\nimport { ApiHelpers } from '@deriv/bot-skeleton';\nimport { Autocomplete, Icon, Text } from '@deriv/components';\nimport { TItem } from '@deriv/components/src/components/dropdown-list';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { useStore } from '@deriv/stores';\nimport { TFormData } from '../types';\n\ntype TSymbol = {\n    component?: React.ReactNode;\n    text: string;\n    value: string;\n    group: string;\n};\n\ntype TMarketOption = {\n    symbol: TSymbol;\n};\n\nconst MarketOption: React.FC<TMarketOption> = ({ symbol }) => (\n    <div key={symbol.value} className='qs__select__option'>\n        <Icon data_testid='dt_symbol_icon' icon={`IcUnderlying${symbol.value}`} size={32} />\n        <Text className='qs__select__option__text' size='xs' color='prominent'>\n            {symbol.text}\n        </Text>\n    </div>\n);\n\ntype TSymbolSelect = {\n    fullWidth?: boolean;\n};\n\nconst SymbolSelect: React.FC<TSymbolSelect> = ({ fullWidth = false }) => {\n    const { quick_strategy } = useDBotStore();\n    const {\n        ui: { is_mobile, is_desktop },\n    } = useStore();\n    const { setValue } = quick_strategy;\n    const [active_symbols, setActiveSymbols] = React.useState([]);\n    const [is_input_started, setIsInputStarted] = useState(false);\n    const [input_value, setInputValue] = useState({ text: '', value: '' });\n    const { setFieldValue, values } = useFormikContext<TFormData>();\n\n    useEffect(() => {\n        const { active_symbols } = ApiHelpers.instance;\n        const symbols = active_symbols.getSymbolsForBot();\n\n        setActiveSymbols(symbols);\n\n        if (values?.symbol) {\n            const has_symbol = !!symbols.find((symbol: { [key: string]: string }) => symbol.value === values.symbol);\n            if (!has_symbol) {\n                setFieldValue('symbol', symbols?.[0]?.value);\n                setValue('symbol', symbols?.[0]?.value);\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const symbols = useMemo(\n        () =>\n            active_symbols.map((symbol: TSymbol) => ({\n                component: <MarketOption key={symbol.text} symbol={symbol} />,\n                ...symbol,\n            })),\n        [active_symbols]\n    );\n\n    useEffect(() => {\n        const selected_symbol = symbols.find(symbol => symbol.value === values.symbol);\n        if (selected_symbol) {\n            setInputValue({ text: selected_symbol.text, value: selected_symbol.value });\n        }\n    }, [symbols, values.symbol, setInputValue]);\n\n    const handleFocus = () => {\n        if (is_desktop && !is_input_started) {\n            setIsInputStarted(true);\n            setInputValue({ text: '', value: '' });\n        }\n    };\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setInputValue({ ...input_value, text: e.target.value });\n    };\n\n    const handleItemSelection = (item: TItem) => {\n        if (item) {\n            const { value } = item as TSymbol;\n            setFieldValue('symbol', value);\n            setValue('symbol', value);\n            setIsInputStarted(false);\n        }\n    };\n\n    const handleHideDropdownList = () => {\n        if (is_desktop) {\n            const selectedSymbol = symbols.find(symbol => symbol.value === values.symbol);\n            if (selectedSymbol && selectedSymbol.text !== input_value.text) {\n                setInputValue({ text: selectedSymbol.text, value: selectedSymbol.value });\n                setIsInputStarted(false);\n            }\n        }\n    };\n\n    return (\n        <div className={classNames('qs__form__field', { 'full-width': fullWidth })}>\n            <Field name='symbol' key='asset' id='asset'>\n                {({ field: { value, ...rest_field } }: FieldProps) => (\n                    <>\n                        <Autocomplete\n                            {...rest_field}\n                            readOnly={is_mobile}\n                            inputMode='none'\n                            data-testid='qs_autocomplete_symbol'\n                            autoComplete='off'\n                            className='qs__autocomplete'\n                            value={input_value.text}\n                            list_items={symbols}\n                            onItemSelection={handleItemSelection}\n                            onChange={handleInputChange}\n                            onFocus={handleFocus}\n                            onHideDropdownList={handleHideDropdownList}\n                            leading_icon={<Icon icon={`IcUnderlying${input_value.value}`} size={24} />}\n                        />\n                    </>\n                )}\n            </Field>\n        </div>\n    );\n};\n\nexport default SymbolSelect;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Field, FieldProps, useFormikContext } from 'formik';\nimport debounce from 'lodash.debounce';\nimport { ApiHelpers } from '@deriv/bot-skeleton';\nimport { Autocomplete, IconTradeTypes, Text } from '@deriv/components';\nimport { TItem } from '@deriv/components/src/components/dropdown-list';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { TFormData } from '../types';\n\ntype TTradeType = {\n    component?: React.ReactNode;\n    text: string;\n    value: string;\n    group: string;\n    icon: string[];\n};\n\ntype TTradeTypeOption = {\n    trade_type: TTradeType;\n};\n\nconst TradeTypeOption: React.FC<TTradeTypeOption> = ({ trade_type }) => (\n    <div key={trade_type.value} className='qs__select__option'>\n        <IconTradeTypes type={trade_type.icon[0]} className='qs__select__option__icon' />\n        <IconTradeTypes type={trade_type.icon[1]} className='qs__select__option__icon' />\n        <Text className='qs__select__option__text' size='xs' color='prominent'>\n            {trade_type.text}\n        </Text>\n    </div>\n);\n\ntype TTradeTypeSelect = {\n    fullWidth?: boolean;\n};\n\nconst TradeTypeSelect: React.FC<TTradeTypeSelect> = ({ fullWidth = false }) => {\n    const [trade_types, setTradeTypes] = React.useState([]);\n    const { setFieldValue, values, validateForm } = useFormikContext<TFormData>();\n    const { quick_strategy } = useDBotStore();\n    const { setValue } = quick_strategy;\n    const selected = values?.tradetype;\n\n    React.useEffect(() => {\n        if (values?.symbol) {\n            const { contracts_for } = ApiHelpers.instance;\n            const getTradeTypes = async () => {\n                const trade_types = await contracts_for.getTradeTypesForQuickStrategy(values?.symbol);\n                setTradeTypes(trade_types);\n                const has_selected = trade_types?.some((trade_type: TTradeType) => trade_type.value === selected);\n                if (!has_selected && trade_types?.[0]?.value !== selected) {\n                    await setFieldValue?.('tradetype', trade_types?.[0].value);\n                    await validateForm();\n                    setValue('tradetype', trade_types?.[0].value);\n                }\n            };\n            debounce(async () => {\n                getTradeTypes();\n            }, 100)();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [values?.symbol]);\n\n    const trade_type_dropdown_options = React.useMemo(\n        () =>\n            trade_types.map((trade_type: TTradeType) => ({\n                component: <TradeTypeOption key={trade_type.text} trade_type={trade_type} />,\n                ...trade_type,\n            })),\n        [trade_types]\n    );\n\n    return (\n        <div className={classNames('qs__form__field', { 'full-width': fullWidth })}>\n            <Field name='tradetype' key='tradetype' id='tradetype'>\n                {({ field }: FieldProps) => {\n                    const selected_trade_type = trade_type_dropdown_options?.find(\n                        trade_type => trade_type.value === field.value\n                    );\n                    return (\n                        <Autocomplete\n                            {...field}\n                            inputMode='none'\n                            data-testid='qs_autocomplete_tradetype'\n                            autoComplete='off'\n                            className='qs__autocomplete'\n                            value={selected_trade_type?.text || ''}\n                            list_items={trade_type_dropdown_options}\n                            onItemSelection={(item: TItem) => {\n                                if ((item as TTradeType)?.value) {\n                                    setFieldValue?.('tradetype', (item as TTradeType)?.value as string);\n                                    setValue('tradetype', (item as TTradeType)?.value as string);\n                                }\n                            }}\n                            leading_icon={\n                                <Text>\n                                    <IconTradeTypes type={selected_trade_type?.icon?.[0] || 'CALL'} />\n                                    <IconTradeTypes type={selected_trade_type?.icon?.[1] || 'PUT'} />\n                                </Text>\n                            }\n                        />\n                    );\n                }}\n            </Field>\n        </div>\n    );\n};\n\nexport default TradeTypeSelect;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Field, FieldProps, useFormikContext } from 'formik';\nimport { ApiHelpers } from '@deriv/bot-skeleton';\nimport { Autocomplete, Text } from '@deriv/components';\nimport { TItem } from '@deriv/components/src/components/dropdown-list';\nimport { observer, useStore } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { TFormData } from '../types';\n\ntype TContractTypesItem = {\n    text: string;\n    value: string;\n};\n\ntype TContractTypes = {\n    name: string;\n    fullWidth?: boolean;\n    attached?: boolean;\n};\n\nconst ContractTypes: React.FC<TContractTypes> = observer(({ fullWidth = false, name }) => {\n    const { ui } = useStore();\n    const { is_mobile } = ui;\n    const [list, setList] = React.useState<TContractTypesItem[]>([]);\n    const { quick_strategy } = useDBotStore();\n    const { setValue } = quick_strategy;\n    const { setFieldValue, validateForm, values } = useFormikContext<TFormData>();\n    const { symbol, tradetype } = values;\n    const selected = values?.type;\n\n    React.useEffect(() => {\n        if (tradetype && symbol) {\n            const getContractTypes = async () => {\n                const { contracts_for } = ApiHelpers.instance;\n                const categories = await contracts_for.getContractTypes(tradetype);\n                setList(categories);\n                const has_selected = categories?.some((contract: TContractTypesItem) => contract.value === selected);\n                if (!has_selected) {\n                    setFieldValue?.(name, categories?.[0]?.value);\n                    setValue(name, categories?.[0]?.value);\n                    validateForm();\n                }\n            };\n            getContractTypes();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [symbol, tradetype]);\n\n    const handleChange = (value: string) => {\n        setFieldValue?.(name, value);\n        setValue(name, value);\n    };\n\n    const key = `qs-contract-type-${name}`;\n\n    return (\n        <div\n            className={classNames('qs__form__field no-top-border-radius no-top-spacing', {\n                'full-width': fullWidth,\n            })}\n        >\n            <Field name={name} key={key} id={key}>\n                {({ field }: FieldProps) => {\n                    const selected_item = list?.find(item => item.value === field.value);\n                    if (is_mobile) {\n                        return (\n                            <ul className='qs__form__field__list' data-testid='dt-qs-contract-types'>\n                                {list.map(item => {\n                                    const is_active = selected_item?.value === item.value;\n                                    return (\n                                        <li\n                                            key={item.value}\n                                            className={classNames('qs__form__field__list__item', {\n                                                'qs__form__field__list__item--active': is_active,\n                                            })}\n                                            onClick={() => {\n                                                handleChange(item.value);\n                                            }}\n                                        >\n                                            <Text size='xs' color='prominent' weight={is_active ? 'bold ' : 'normal'}>\n                                                {item.text}\n                                            </Text>\n                                        </li>\n                                    );\n                                })}\n                            </ul>\n                        );\n                    }\n                    return (\n                        <Autocomplete\n                            {...field}\n                            inputMode='none'\n                            data-testid='qs_autocomplete_contract_type'\n                            autoComplete='off'\n                            className='qs__select contract-type'\n                            value={selected_item?.text || ''}\n                            list_items={list}\n                            onItemSelection={(item: TItem) => {\n                                if ((item as TContractTypesItem)?.value) {\n                                    handleChange((item as TContractTypesItem)?.value as string);\n                                }\n                            }}\n                        />\n                    );\n                }}\n            </Field>\n        </div>\n    );\n});\n\nexport default ContractTypes;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Field, FieldProps, useFormikContext } from 'formik';\nimport { ApiHelpers } from '@deriv/bot-skeleton';\nimport { Autocomplete } from '@deriv/components';\nimport { TItem } from '@deriv/components/src/components/dropdown-list';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { TDurationItemRaw, TFormData } from '../types';\n\ntype TDurationUnitItem = {\n    text: string;\n    value: string;\n    min: number;\n    max: number;\n};\n\ntype TDurationUnit = {\n    fullWidth?: boolean;\n    attached?: boolean;\n};\n\nconst DurationUnit: React.FC<TDurationUnit> = ({ fullWidth = false, attached }) => {\n    const [list, setList] = React.useState<TDurationUnitItem[]>([]);\n    const { quick_strategy } = useDBotStore();\n    const { setValue, setCurrentDurationMinMax } = quick_strategy;\n    const { setFieldValue, validateForm, values } = useFormikContext<TFormData>();\n    const { symbol, tradetype } = values;\n    const selected = values?.durationtype;\n\n    React.useEffect(() => {\n        if (tradetype && symbol) {\n            const getDurationUnits = async () => {\n                const { contracts_for } = ApiHelpers.instance;\n                const durations = await contracts_for.getDurations(symbol, tradetype);\n                const duration_units = durations?.map((duration: TDurationItemRaw) => ({\n                    text: duration.display,\n                    value: duration.unit,\n                    min: duration.min,\n                    max: duration.max,\n                }));\n                setList(duration_units);\n                const has_selected = duration_units?.some((duration: TDurationUnitItem) => duration.value === selected);\n                if (!has_selected) {\n                    setFieldValue?.('durationtype', durations?.[0]?.unit);\n                    setFieldValue?.('duration', durations?.[0]?.min).then(() => {\n                        validateForm();\n                    });\n                    setValue('durationtype', durations?.[0]?.unit);\n                    setCurrentDurationMinMax(durations?.[0]?.min, durations?.[0]?.max);\n                } else {\n                    const duration = duration_units?.find((duration: TDurationUnitItem) => duration.value === selected);\n                    setFieldValue?.('duration', duration?.min).then(() => {\n                        validateForm();\n                    });\n                    setValue('duration', duration?.min);\n                    setCurrentDurationMinMax(duration?.min, duration?.max);\n                }\n            };\n            getDurationUnits();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [symbol, tradetype]);\n\n    return (\n        <div\n            className={classNames('qs__form__field', {\n                'full-width': fullWidth,\n                'no-top-border-radius': attached,\n            })}\n        >\n            <Field name='durationtype' key='durationtype' id='durationtype'>\n                {({ field }: FieldProps) => {\n                    const selected_item = list?.find(item => item.value === field.value);\n                    return (\n                        <Autocomplete\n                            {...field}\n                            inputMode='none'\n                            data-testid='qs_autocomplete_durationtype'\n                            autoComplete='off'\n                            className='qs__select'\n                            value={selected_item?.text || ''}\n                            list_items={list}\n                            onItemSelection={(item: TItem) => {\n                                if ((item as TDurationUnitItem)?.value) {\n                                    setCurrentDurationMinMax(\n                                        (item as TDurationUnitItem)?.min,\n                                        (item as TDurationUnitItem)?.max\n                                    );\n                                    setFieldValue?.('durationtype', (item as TDurationUnitItem)?.value as string);\n                                    setValue('durationtype', (item as TDurationUnitItem)?.value as string);\n                                    setFieldValue?.('duration', (item as TDurationUnitItem)?.min).then(() => {\n                                        validateForm();\n                                    });\n                                    setValue('duration', (item as TDurationUnitItem)?.min);\n                                }\n                            }}\n                        />\n                    );\n                }}\n            </Field>\n        </div>\n    );\n};\n\nexport default DurationUnit;\n","import React, { MouseEvent } from 'react';\nimport classNames from 'classnames';\nimport { Field, FieldProps, useFormikContext } from 'formik';\nimport { Input, Popover } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\n\ntype TQSInput = {\n    name: string;\n    onChange: (key: string, value: string | number | boolean) => void;\n    type?: string;\n    fullwidth?: boolean;\n    attached?: boolean;\n    should_have?: { key: string; value: string | number | boolean }[];\n    disabled?: boolean;\n};\n\nconst QSInput: React.FC<TQSInput> = observer(\n    ({ name, onChange, type = 'text', fullwidth = false, attached = false, disabled = false }) => {\n        const {\n            ui: { is_mobile },\n        } = useStore();\n        const [has_focus, setFocus] = React.useState(false);\n        const { setFieldValue, setFieldTouched } = useFormikContext();\n        const is_number = type === 'number';\n\n        const handleChange = (e: MouseEvent<HTMLButtonElement>, value: string) => {\n            e?.preventDefault();\n            onChange(name, value);\n            setFieldTouched(name, true, true);\n            setFieldValue(name, value);\n        };\n\n        return (\n            <Field name={name} key={name} id={name}>\n                {({ field, meta }: FieldProps) => {\n                    const { error } = meta;\n                    const has_error = error;\n                    return (\n                        <div\n                            className={classNames('qs__form__field', {\n                                'full-width': fullwidth,\n                                'no-top-spacing': attached,\n                                'no-border-top': attached,\n                            })}\n                        >\n                            <div\n                                data-testid='qs-input-container'\n                                onMouseEnter={() => setFocus(true)}\n                                onMouseLeave={() => setFocus(false)}\n                            >\n                                <Popover\n                                    alignment='bottom'\n                                    message={error}\n                                    is_open={is_mobile ? !!error : !!error && has_focus}\n                                    zIndex='9999'\n                                    classNameBubble='qs__warning-bubble'\n                                    has_error\n                                    should_disable_pointer_events\n                                >\n                                    <Input\n                                        data_testId='qs-input'\n                                        className={classNames('qs__input', { error: has_error })}\n                                        type={type}\n                                        leading_icon={\n                                            is_number ? (\n                                                <button\n                                                    data-testid='qs-input-decrease'\n                                                    onClick={(e: MouseEvent<HTMLButtonElement>) => {\n                                                        const value = Number(field.value) - 1;\n                                                        handleChange(e, String(value % 1 ? value.toFixed(2) : value));\n                                                    }}\n                                                >\n                                                    -\n                                                </button>\n                                            ) : undefined\n                                        }\n                                        trailing_icon={\n                                            is_number ? (\n                                                <button\n                                                    data-testid='qs-input-increase'\n                                                    onClick={(e: MouseEvent<HTMLButtonElement>) => {\n                                                        const value = Number(field.value) + 1;\n                                                        handleChange(e, String(value % 1 ? value.toFixed(2) : value));\n                                                    }}\n                                                >\n                                                    +\n                                                </button>\n                                            ) : null\n                                        }\n                                        {...field}\n                                        disabled={disabled}\n                                        onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                                            const value = is_number ? Number(e.target.value) : e.target.value;\n                                            onChange(name, value);\n                                        }}\n                                    />\n                                </Popover>\n                            </div>\n                        </div>\n                    );\n                }}\n            </Field>\n        );\n    }\n);\n\nexport default QSInput;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Field, FieldProps, useFormikContext } from 'formik';\nimport { Checkbox, Popover } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { TFormData } from '../types';\n\ntype TQSCheckbox = {\n    name: string;\n    children?: React.ReactNode;\n    label: string;\n    description?: string;\n    fullwidth?: boolean;\n    attached?: boolean;\n};\n\nconst QSCheckbox: React.FC<TQSCheckbox> = observer(\n    ({ name, label, description, fullwidth = false, attached = false }) => {\n        const { ui } = useStore();\n        const { is_mobile } = ui;\n        const { values, setFieldValue, validateForm } = useFormikContext<TFormData>();\n\n        const handleChange = () => {\n            setFieldValue(name, !values?.[name]).finally(() => {\n                validateForm();\n            });\n        };\n\n        return (\n            <Field name={name}>\n                {({ field }: FieldProps) => {\n                    return (\n                        <div\n                            className={classNames('qs__form__field', {\n                                'full-width': fullwidth,\n                                'no-border-bottom-radius': attached,\n                            })}\n                        >\n                            <div className='qs__checkbox'>\n                                <div className='qs__checkbox__container'>\n                                    <Checkbox\n                                        {...field}\n                                        label={label}\n                                        onChange={handleChange}\n                                        data-testid='qs-checkbox'\n                                    />\n                                    <span>\n                                        <Popover\n                                            message={description}\n                                            zIndex='9999'\n                                            alignment={is_mobile ? 'top' : 'right'}\n                                            icon='info'\n                                        />\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    );\n                }}\n            </Field>\n        );\n    }\n);\n\nexport default QSCheckbox;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Popover, Text } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\n\ntype TQSInputLabel = {\n    children?: React.ReactNode;\n    label?: string;\n    description?: string;\n    fullwidth?: boolean;\n};\n\nconst QSInputLabel: React.FC<TQSInputLabel> = observer(({ label, description, fullwidth = false }) => {\n    const { ui } = useStore();\n    const { is_mobile } = ui;\n\n    return (\n        <div className={classNames('qs__form__field', { 'full-width': fullwidth })}>\n            <div className='qs__input-label'>\n                <Text weight='bold' className='qs__input-label__wrapper' size='xs'>\n                    {label}\n                </Text>\n                <span>\n                    <Popover message={description} zIndex='9999' alignment={is_mobile ? 'top' : 'right'} icon='info' />\n                </span>\n            </div>\n        </div>\n    );\n});\n\nexport default QSInputLabel;\n","/* eslint-disable simple-import-sort/imports */\nimport React from 'react';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { observer, useStore } from '@deriv/stores';\nimport './quick-strategy.scss';\nimport SymbolSelect from './selects/symbol';\nimport TradeTypeSelect from './selects/trade-type';\nimport ContractTypeSelect from './selects/contract-type';\nimport DurationTypeSelect from './selects/duration-type';\nimport QSInput from './inputs/qs-input';\nimport QSCheckbox from './inputs/qs-checkbox';\nimport QSInputLabel from './inputs/qs-input-label';\nimport { STRATEGIES } from './config';\nimport { TConfigItem, TFormData } from './types';\nimport { useFormikContext } from 'formik';\n\nconst QuickStrategyForm = observer(() => {\n    const { ui } = useStore();\n    const { quick_strategy } = useDBotStore();\n    const { selected_strategy, setValue } = quick_strategy;\n    const config: TConfigItem[][] = STRATEGIES[selected_strategy]?.fields;\n    const { is_mobile } = ui;\n    const { values, setFieldTouched, setFieldValue } = useFormikContext<TFormData>();\n\n    React.useEffect(() => {\n        window.addEventListener('keydown', handleEnter);\n        return () => {\n            window.removeEventListener('keydown', handleEnter);\n        };\n    }, []);\n\n    const onChange = async (key: string, value: string | number | boolean) => {\n        setValue(key, value);\n        await setFieldTouched(key, true, true);\n        await setFieldValue(key, value);\n    };\n\n    const handleEnter = (event: KeyboardEvent) => {\n        if (event?.key && event.key == 'Enter') {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n    };\n\n    const renderForm = () => {\n        return config.map((group, group_index) => {\n            if (!group?.length) return null;\n            return (\n                <div className='qs__body__content__form__group' key={group_index}>\n                    {group.map((field, field_index) => {\n                        const key = `${field.name || field.type} + ${field_index}`;\n\n                        if (\n                            (is_mobile && field.hide?.includes('mobile')) ||\n                            (!is_mobile && field.hide?.includes('desktop'))\n                        ) {\n                            return null;\n                        }\n                        switch (field.type) {\n                            // Generic or common fields\n                            case 'number': {\n                                if (!field.name) return null;\n                                const { should_have = [] } = field;\n                                if (should_have?.length) {\n                                    const should_enable = should_have.every((item: TFormData) => {\n                                        return values[item.key as keyof TFormData] === item.value;\n                                    });\n                                    if (!should_enable && is_mobile) {\n                                        return null;\n                                    }\n                                    return (\n                                        <QSInput\n                                            {...field}\n                                            key={key}\n                                            name={field.name as string}\n                                            disabled={!should_enable}\n                                            onChange={onChange}\n                                        />\n                                    );\n                                }\n                                return <QSInput {...field} onChange={onChange} key={key} name={field.name as string} />;\n                            }\n\n                            case 'label':\n                                if (!field.label) return null;\n                                return (\n                                    <QSInputLabel key={key} label={field.label} description={field.description || ''} />\n                                );\n                            case 'checkbox':\n                                return (\n                                    <QSCheckbox\n                                        {...field}\n                                        key={key}\n                                        name={field.name as string}\n                                        label={field.label as string}\n                                    />\n                                );\n                            // Dedicated components only for Quick-Strategy\n                            case 'symbol':\n                                return <SymbolSelect {...field} key={key} />;\n                            case 'tradetype':\n                                return <TradeTypeSelect {...field} key={key} />;\n                            case 'durationtype':\n                                return <DurationTypeSelect {...field} key={key} />;\n                            case 'contract_type':\n                                return <ContractTypeSelect {...field} key={key} name={field.name as string} />;\n                            default:\n                                return null;\n                        }\n                    })}\n                </div>\n            );\n        });\n    };\n\n    return <div>{renderForm()}</div>;\n});\n\nexport default QuickStrategyForm;\n","import React, { useState } from 'react';\nimport { Form as FormikForm, Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { config as qs_config } from '@deriv/bot-skeleton';\nimport { MobileFullPageModal, Modal } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport DesktopFormWrapper from './form-wrappers/desktop-form-wrapper';\nimport MobileFormWrapper from './form-wrappers/mobile-form-wrapper';\nimport { STRATEGIES } from './config';\nimport Form from './form';\nimport { TConfigItem, TFormData } from './types';\nimport './quick-strategy.scss';\n\ntype TFormikWrapper = {\n    children: React.ReactNode;\n};\n\nconst getErrorMessage = (dir: 'MIN' | 'MAX', value: number, type = 'DEFAULT') => {\n    const errors: { [key: string]: { MIN: string; MAX: string } } = {\n        DURATION: {\n            MIN: localize('Minimum duration: {{ value }}', { value }),\n            MAX: localize('Maximum duration: {{ value }}', { value }),\n        },\n        DEFAULT: {\n            MIN: localize('The value must be equal or greater than {{ value }}', { value }),\n            MAX: localize('The value must be equal or less than {{ value }}', { value }),\n        },\n    };\n    return errors[type][dir];\n};\n\nconst FormikWrapper: React.FC<TFormikWrapper> = observer(({ children }) => {\n    const { quick_strategy } = useDBotStore();\n    const { selected_strategy, form_data, onSubmit, setValue, current_duration_min_max } = quick_strategy;\n    const config: TConfigItem[][] = STRATEGIES[selected_strategy]?.fields;\n    const [dynamic_schema, setDynamicSchema] = useState(Yup.object().shape({}));\n\n    const initial_value: TFormData = {\n        symbol: qs_config.QUICK_STRATEGY.DEFAULT.symbol,\n        tradetype: '',\n        durationtype: qs_config.QUICK_STRATEGY.DEFAULT.durationtype,\n        stake: '1',\n        loss: '0',\n        profit: '0',\n        size: String(qs_config.QUICK_STRATEGY.DEFAULT.size),\n        duration: '1',\n        unit: String(qs_config.QUICK_STRATEGY.DEFAULT.unit),\n        action: 'RUN',\n        max_stake: 10,\n        boolean_max_stake: false,\n    };\n\n    React.useEffect(() => {\n        const data = JSON.parse(localStorage.getItem('qs-fields') || '{}');\n        Object.keys(data).forEach(key => {\n            initial_value[key as keyof TFormData] = data[key];\n            setValue(key, data[key]);\n        });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const getErrors = (formikData: TFormData) => {\n        const sub_schema: Record<string, any> = {};\n        config.forEach(group => {\n            if (!group?.length) return null;\n            group.forEach(field => {\n                if (field?.validation?.length && field?.name) {\n                    if (field.validation.includes('number')) {\n                        let schema: Record<string, any> = Yup.number().typeError(localize('Must be a number'));\n                        let min = 0;\n                        let max = 10;\n                        let min_error = getErrorMessage('MIN', min);\n                        let max_error = getErrorMessage('MAX', max);\n                        if (field.name === 'duration' && current_duration_min_max) {\n                            min = current_duration_min_max.min;\n                            max = current_duration_min_max.max;\n                            min_error = getErrorMessage('MIN', min, 'DURATION');\n                            max_error = getErrorMessage('MAX', max, 'DURATION');\n                        }\n                        const should_validate = field.should_have\n                            ? field.should_have?.every(item => {\n                                  return formikData?.[item.key] === item.value;\n                              })\n                            : true;\n                        if (should_validate && field.name === 'max_stake') {\n                            min = +form_data?.stake;\n                            if (isNaN(min)) {\n                                min = +initial_value.stake;\n                            }\n                            min_error = getErrorMessage('MIN', min);\n                        }\n                        if (should_validate) {\n                            field.validation.forEach(validation => {\n                                if (typeof validation === 'string') {\n                                    switch (validation) {\n                                        case 'required':\n                                            schema = schema.required(localize('Field cannot be empty'));\n                                            break;\n                                        case 'min':\n                                            schema = schema.min(min, min_error);\n                                            break;\n                                        case 'max':\n                                            schema = schema.max(max, max_error);\n                                            break;\n                                        case 'ceil':\n                                            schema = schema.round('ceil');\n                                            break;\n                                        case 'floor':\n                                            schema = schema.round('floor');\n                                            break;\n                                        default:\n                                            break;\n                                    }\n                                } else if (typeof validation === 'object') {\n                                    if (validation?.type) {\n                                        schema = schema[validation.type](\n                                            validation.value,\n                                            localize(validation.getMessage(validation.value))\n                                        );\n                                    }\n                                }\n                            });\n                        }\n                        sub_schema[field.name] = schema;\n                    }\n                }\n            });\n        });\n        setDynamicSchema(Yup.object().shape(sub_schema));\n    };\n\n    const handleSubmit = (form_data: TFormData) => {\n        onSubmit(form_data); // true to load and run the bot\n        localStorage?.setItem('qs-fields', JSON.stringify(form_data));\n    };\n\n    return (\n        <Formik\n            initialValues={initial_value}\n            validationSchema={dynamic_schema}\n            onSubmit={handleSubmit}\n            validate={values => getErrors(values)}\n            validateOnBlur\n            validateOnChange\n            validateOnMount\n        >\n            {children}\n        </Formik>\n    );\n});\n\nconst QuickStrategy = observer(() => {\n    const { quick_strategy } = useDBotStore();\n    const { ui } = useStore();\n    const { is_mobile } = ui;\n    const { is_open, setFormVisibility } = quick_strategy;\n\n    const handleClose = () => {\n        setFormVisibility(false);\n    };\n\n    return (\n        <FormikWrapper>\n            <FormikForm>\n                {is_mobile ? (\n                    <MobileFullPageModal\n                        is_modal_open={is_open}\n                        className='quick-strategy__wrapper'\n                        header={localize('Quick Strategy')}\n                        onClickClose={handleClose}\n                        height_offset='8rem'\n                    >\n                        <MobileFormWrapper>\n                            <Form />\n                        </MobileFormWrapper>\n                    </MobileFullPageModal>\n                ) : (\n                    <Modal className='modal--strategy' is_open={is_open} width={'99.6rem'}>\n                        <DesktopFormWrapper>\n                            <Form />\n                        </DesktopFormWrapper>\n                    </Modal>\n                )}\n            </FormikForm>\n        </FormikWrapper>\n    );\n});\n\nexport default QuickStrategy;\n","import QuickStrategy from './quick-strategy';\n\nexport default QuickStrategy;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\ntype TIconRadio = {\n    google_drive_connected?: boolean;\n    icon: React.ReactElement<{ className: string }, string>;\n    text: string;\n    onDriveConnect?: () => void;\n};\nconst IconRadio = ({ icon, text, google_drive_connected, onDriveConnect }: TIconRadio) => {\n    const is_drive_radio = text === 'Google Drive';\n\n    return (\n        <div className='save-type__container'>\n            <div className='save-type__radio'>\n                {icon &&\n                    React.cloneElement(icon, {\n                        className: classNames(\n                            'save-type__icon',\n                            {\n                                'save-type__icon--active': is_drive_radio && google_drive_connected,\n                                'save-type__icon--disabled': is_drive_radio && !google_drive_connected,\n                            },\n                            icon.props.className\n                        ),\n                    })}\n                <Text\n                    as='p'\n                    align='center'\n                    size='xxs'\n                    color={is_drive_radio && !google_drive_connected ? 'disabled' : 'prominent'}\n                    line_height='s'\n                    className='save-type__radio-text'\n                >\n                    {localize(text)}\n                </Text>\n            </div>\n            {is_drive_radio && (\n                <Text\n                    as='p'\n                    align='center'\n                    size='xs'\n                    weight='bold'\n                    styles={{ color: 'var(--brand-red-coral)' }}\n                    className='save-type__drive-status'\n                    onClick={onDriveConnect}\n                >\n                    {localize(google_drive_connected ? localize('Disconnect') : localize('Connect'))}\n                </Text>\n            )}\n        </div>\n    );\n};\n\nexport default IconRadio;\n","import React, { useEffect } from 'react';\nimport classNames from 'classnames';\nimport { Field, Form, Formik } from 'formik';\nimport { config, save_types } from '@deriv/bot-skeleton';\nimport { Button, Icon, Input, MobileFullPageModal, Modal, RadioGroup, Text, ThemedScrollbars } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from '../../../../stores/useDBotStore';\nimport IconRadio from './icon-radio';\n\ntype TSaveModalForm = {\n    bot_name: string;\n    button_status: number;\n    google_drive_connected?: boolean;\n    is_authorised: boolean;\n    is_mobile?: boolean;\n    is_onscreen_keyboard_active?: boolean;\n    is_save_modal_open?: boolean;\n    icon?: string;\n    text?: string;\n    onConfirmSave: () => void;\n    onDriveConnect: () => void;\n    toggleSaveModal: () => void;\n    setCurrentFocus: () => void;\n    validateBotName: () => void;\n};\n\nconst SaveModalForm = ({\n    bot_name,\n    button_status,\n    is_authorised,\n    onConfirmSave,\n    onDriveConnect,\n    validateBotName,\n    toggleSaveModal,\n    is_mobile,\n    is_onscreen_keyboard_active,\n    setCurrentFocus,\n}: TSaveModalForm) => (\n    <Formik\n        initialValues={{\n            is_local: true,\n            save_as_collection: false,\n            bot_name: bot_name === config.default_file_name ? '' : bot_name,\n        }}\n        validate={validateBotName}\n        onSubmit={onConfirmSave}\n    >\n        {({ values: { is_local }, setFieldValue, touched, errors }) => {\n            const content_height = !is_mobile ? '500px' : `calc(100%)`;\n            return (\n                <ThemedScrollbars height={content_height} autohide>\n                    <Form className={classNames({ 'form--active-keyboard': is_onscreen_keyboard_active })}>\n                        <div className='modal__content'>\n                            <Text size='xs' line_height='l'>\n                                {localize(\n                                    'Enter your bot name, choose to save on your computer or Google Drive, and hit '\n                                )}\n                                <strong>{localize('Save.')}</strong>\n                            </Text>\n                            <div className='modal__content-row'>\n                                <Field name='bot_name'>\n                                    {({ field }) => (\n                                        <Input\n                                            className='save-type__input'\n                                            type='text'\n                                            placeholder={localize('Untitled Strategy')}\n                                            error={touched[field.name] && errors[field.name]}\n                                            label={localize('Bot name')}\n                                            onFocus={e => setCurrentFocus(e.currentTarget.name)}\n                                            onBlur={() => setCurrentFocus(null)}\n                                            {...field}\n                                        />\n                                    )}\n                                </Field>\n                            </div>\n                            <div className='modal__content-row'>\n                                <RadioGroup\n                                    className='radio-group__save-type'\n                                    name='is_local'\n                                    selected={() => {\n                                        if (is_authorised && !is_local) return save_types.GOOGLE_DRIVE;\n                                        return save_types.LOCAL;\n                                    }}\n                                    onToggle={() => setFieldValue('is_local', !is_local)}\n                                >\n                                    <RadioGroup.Item\n                                        id='local'\n                                        label={\n                                            <IconRadio\n                                                text={localize('Local')}\n                                                icon={<Icon icon={is_mobile ? 'IcLocal' : 'IcMyComputer'} size={48} />}\n                                            />\n                                        }\n                                        value={save_types.LOCAL}\n                                    />\n                                    <RadioGroup.Item\n                                        id='drive'\n                                        label={\n                                            <IconRadio\n                                                text={'Google Drive'}\n                                                icon={<Icon icon={'IcGoogleDrive'} size={48} />}\n                                                google_drive_connected={is_authorised}\n                                                onDriveConnect={onDriveConnect}\n                                            />\n                                        }\n                                        value={save_types.GOOGLE_DRIVE}\n                                        disabled={!is_authorised}\n                                        className={classNames({\n                                            'dc-radio-group__item-disabled': !is_authorised,\n                                        })}\n                                    />\n                                </RadioGroup>\n                            </div>\n                            {/* removed this from the save modal popup because it is not there in the design */}\n                            {/* <>\n                                <Field name='save_as_collection'>\n                                    {({ field }) => (\n                                        <Checkbox\n                                            onChange={() => setFieldValue('save_as_collection', !save_as_collection)}\n                                            defaultChecked={save_as_collection}\n                                            label={\n                                                <Text size='xs' line_height='s' weight='bold'>\n                                                    <Localize i18n_default_text='Save as collection' />\n                                                </Text>\n                                            }\n                                            classNameLabel='save-type__checkbox-text'\n                                            {...field}\n                                        />\n                                    )}\n                                </Field>\n                                <div className='save-type__checkbox-description'>\n                                    {localize(\n                                        'Enabling this allows you to save your blocks as one collection which can be easily integrated into other bots.'\n                                    )}\n                                </div>\n                            </> */}\n                        </div>\n                        <div\n                            className={classNames('modal__footer', {\n                                'modal__footer--active-keyboard': is_onscreen_keyboard_active,\n                            })}\n                        >\n                            <Button\n                                type='button'\n                                className='modal__footer--button'\n                                text={localize('Cancel')}\n                                onClick={toggleSaveModal}\n                                secondary\n                            />\n                            <Button\n                                className='modal__footer--button'\n                                type='submit'\n                                is_loading={button_status === 1}\n                                is_submit_success={button_status === 2}\n                                text={localize('Continue')}\n                                primary\n                            />\n                        </div>\n                    </Form>\n                </ThemedScrollbars>\n            );\n        }}\n    </Formik>\n);\nconst SaveModal = observer(() => {\n    const { save_modal, google_drive, dashboard, load_modal } = useDBotStore();\n    const { ui } = useStore();\n    const { dashboard_strategies } = load_modal;\n    const {\n        button_status,\n        bot_name,\n        is_save_modal_open,\n        onConfirmSave,\n        onDriveConnect,\n        toggleSaveModal,\n        updateBotName,\n        validateBotName,\n    } = save_modal;\n    const { is_authorised } = google_drive;\n    const { is_onscreen_keyboard_active, setCurrentFocus } = ui;\n    const { active_tab } = dashboard;\n\n    const is_mobile = isMobile();\n\n    useEffect(() => {\n        if (active_tab === 1) {\n            updateBotName(dashboard_strategies?.[0]?.name ?? '');\n        }\n    }, [active_tab, dashboard_strategies, updateBotName]);\n\n    return is_mobile ? (\n        <MobileFullPageModal\n            is_modal_open={is_save_modal_open}\n            className='save-modal__wrapper'\n            header={localize('Save strategy')}\n            onClickClose={toggleSaveModal}\n            height_offset='80px'\n            page_overlay\n        >\n            <SaveModalForm\n                bot_name={bot_name}\n                button_status={button_status}\n                is_authorised={is_authorised}\n                onConfirmSave={onConfirmSave}\n                onDriveConnect={onDriveConnect}\n                validateBotName={validateBotName}\n                toggleSaveModal={toggleSaveModal}\n                is_mobile={is_mobile}\n                is_onscreen_keyboard_active={is_onscreen_keyboard_active}\n                setCurrentFocus={setCurrentFocus}\n            />\n        </MobileFullPageModal>\n    ) : (\n        <Modal\n            title={localize('Save Strategy')}\n            className='modal--save'\n            width='32.8rem'\n            height='50rem'\n            is_open={is_save_modal_open}\n            toggleModal={toggleSaveModal}\n        >\n            <SaveModalForm\n                bot_name={bot_name}\n                button_status={button_status}\n                is_authorised={is_authorised}\n                onConfirmSave={onConfirmSave}\n                onDriveConnect={onDriveConnect}\n                validateBotName={validateBotName}\n                toggleSaveModal={toggleSaveModal}\n                setCurrentFocus={setCurrentFocus}\n            />\n        </Modal>\n    );\n});\n\nexport default SaveModal;\n","import React from 'react';\nimport ReactJoyride, { CallBackProps, Step, Styles } from 'react-joyride';\n\nimport { localize } from '@deriv/translations';\n\nconst common_tour_button_properties = {\n    fontWeight: '700',\n    fontSize: '1.4rem',\n    height: '4rem',\n    padding: '1rem 1.6rem',\n};\n\ninterface IReactJoyrideWrapperProps {\n    steps: Step[];\n    styles: Styles;\n    handleCallback: (data: CallBackProps) => void;\n}\n\nconst ReactJoyrideWrapper: React.FC<IReactJoyrideWrapperProps> = ({ steps, styles, handleCallback, ...props }) => {\n    return (\n        <ReactJoyride\n            steps={steps}\n            continuous\n            callback={handleCallback}\n            locale={{ back: localize('Previous'), next: localize('Next') }}\n            {...props}\n            styles={{\n                options: {\n                    arrowColor: 'var(--general-main-2)',\n                    backgroundColor: 'var(--general-main-2)',\n                    primaryColor: 'var(--brand-red-coral)',\n                    textColor: 'var(--text-general)',\n                    spotlightShadow: '0 0 15px rgba(0, 0, 0, 0.5)',\n                    width: 440,\n                },\n                buttonBack: {\n                    border: '0.2rem solid var(--text-less-prominent)',\n                    marginRight: '1rem',\n                    borderRadius: '0.4rem',\n                    color: 'var(--text-general)',\n                    ...common_tour_button_properties,\n                },\n                buttonNext: {\n                    ...common_tour_button_properties,\n                },\n                overlay: {\n                    height: '100%',\n                },\n                ...styles,\n            }}\n        />\n    );\n};\n\nexport default ReactJoyrideWrapper;\n","import React from 'react';\n\nimport { Dialog, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\n\nimport { useDBotStore } from '../../../../stores/useDBotStore';\n\nconst TourEndDialog = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { is_tour_dialog_visible, setTourDialogVisibility } = dashboard;\n\n    const is_mobile = isMobile();\n\n    const getTourContent = () => {\n        return (\n            <>\n                <div className='dc-dialog__content__description__text' data-testid='tour-success-message'>\n                    <Localize\n                        key={0}\n                        i18n_default_text={'You have successfully created your bot using a simple strategy.'}\n                    />\n                </div>\n                <div className='dc-dialog__content__description__text'>\n                    <Localize\n                        key={0}\n                        i18n_default_text={'Now, <0>run the bot</0> to test out the strategy.'}\n                        components={[<strong key={0} />]}\n                    />\n                </div>\n                <div className='dc-dialog__content__description__text'>\n                    <Localize\n                        key={0}\n                        i18n_default_text={\n                            'Note: If you wish to learn more about the Bot Builder, you can proceed to the <0>Tutorials</0> tab.'\n                        }\n                        components={[<strong key={0} />]}\n                    />\n                </div>\n            </>\n        );\n    };\n\n    const onHandleConfirm = () => {\n        setTourDialogVisibility(false);\n    };\n\n    return (\n        <div>\n            <Dialog\n                is_visible={is_tour_dialog_visible}\n                confirm_button_text={localize('OK')}\n                onConfirm={onHandleConfirm}\n                is_mobile_full_width\n                className='dc-dialog tour-dialog'\n                has_close_icon={false}\n            >\n                <div className='dc-dialog__content__header'>\n                    <Text weight='bold' color='prominent' size={is_mobile ? 'xs' : 's'}>\n                        {localize('Congratulations')}\n                    </Text>\n                </div>\n                <div className='dc-dialog__content__description'>\n                    <Text size={is_mobile ? 'xxs' : 'xs'} color='prominent'>\n                        {getTourContent()}\n                    </Text>\n                </div>\n            </Dialog>\n        </div>\n    );\n});\n\nexport default TourEndDialog;\n","import React from 'react';\nimport { getUUID } from '@deriv/bot-skeleton/src/services/tradeEngine/utils/helpers';\nimport { Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\n\ntype TTourSteps = {\n    content: string[] | React.ReactElement[];\n    media?: string;\n    label: string | boolean;\n    step_index: number;\n    show_actions?: boolean;\n    has_localize_component?: boolean;\n};\n\nconst TourSteps = observer(\n    ({ content, media, label, step_index, has_localize_component = false, show_actions = true }: TTourSteps) => {\n        return (\n            <React.Fragment>\n                <div className='onboard'>\n                    {show_actions && (\n                        <div className='onboard__header'>\n                            <Text color='less-prominent' line_height='l'>\n                                {step_index}/6\n                            </Text>\n                        </div>\n                    )}\n                    <div className='onboard__steps'>\n                        <div className='onboard__label'>\n                            <Text as='p' line_height='l' weight='bold'>\n                                {label}\n                            </Text>\n                        </div>\n\n                        {media && (\n                            <video\n                                autoPlay={true}\n                                loop\n                                controls\n                                preload='auto'\n                                playsInline\n                                disablePictureInPicture\n                                controlsList='nodownload'\n                                style={{ width: '100%' }}\n                                src={media}\n                            />\n                        )}\n\n                        <div className='onboard__content'>\n                            <>\n                                {content.map((content_data, index) => {\n                                    return has_localize_component ? (\n                                        content_data\n                                    ) : (\n                                        <div className='onboard__content__block' key={`onboard--${getUUID()}`}>\n                                            <Text align='left' as='p' size='xs' line_height='l'>\n                                                {content_data}\n                                            </Text>\n                                        </div>\n                                    );\n                                })}\n                            </>\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n);\n\nexport default TourSteps;\n","import React from 'react';\n\nimport { Icon, Text } from '@deriv/components';\nimport { getUrlBase, isMobile } from '@deriv/shared';\nimport { Localize, localize } from '@deriv/translations';\n\nimport { getImageLocation } from '../../../../public-path';\nimport TourSteps from '../common/tour-steps';\n\nconst is_mobile = isMobile();\n\ntype TJoyrideConfig = Record<\n    'showProgress' | 'spotlightClicks' | 'disableBeacon' | 'disableOverlay' | 'disableCloseOnEsc',\n    boolean\n>;\n\nconst joyride_props: TJoyrideConfig = {\n    showProgress: false,\n    spotlightClicks: false,\n    disableBeacon: true,\n    disableOverlay: true,\n    disableCloseOnEsc: true,\n};\n\nexport const DBOT_ONBOARDING = [\n    {\n        target: '#id-bot-builder',\n        content: (\n            <TourSteps\n                label={localize('Build from scratch')}\n                content={[\n                    localize(\n                        'Create your bot using our drag-and-drop blocks or click Quick Strategy to choose from the ready-to-use bot templates.'\n                    ),\n                    localize(\n                        'We also provide a guide on the Tutorial tab to show you how you can build and execute a simple strategy.'\n                    ),\n                ]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-1.mp4')}\n                step_index={1}\n            />\n        ),\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '#id-charts',\n        content: (\n            <TourSteps\n                label={localize('Monitor the market')}\n                content={[localize('View the market price of your favourite assets.')]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-2.mp4')}\n                step_index={2}\n            />\n        ),\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '#id-tutorials',\n        content: (\n            <TourSteps\n                label={localize('Learn more with our tutorials')}\n                content={[localize('Explore the video guides and FAQs to build your bot in the tutorials tab.')]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-3.mp4')}\n                step_index={3}\n            />\n        ),\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '#tab__dashboard__table__tiles',\n        content: (\n            <TourSteps\n                label={localize('Use these shortcuts')}\n                content={[localize('You can also import or build your bot using any of these shortcuts.')]}\n                step_index={4}\n            />\n        ),\n        placement: 'right',\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '.dc-drawer__container',\n        content: (\n            <TourSteps\n                label={localize('Check your bot’s performance')}\n                content={[localize('See how your bot is doing in real-time.')]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-5.mp4')}\n                step_index={5}\n            />\n        ),\n        placement: 'left',\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '.animation__wrapper',\n        content: (\n            <TourSteps\n                label={localize('Run your bot')}\n                content={[\n                    <Localize\n                        key='run your bot'\n                        i18n_default_text='Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.'\n                        components={[<strong key={0} />]}\n                    />,\n                ]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-6.mp4')}\n                step_index={6}\n            />\n        ),\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '#id-tutorials',\n        content: (\n            <TourSteps\n                label={localize('Want to retake the tour?')}\n                content={[\n                    <Text key={`${0}-id-tutorials`} as='p'>\n                        <Localize i18n_default_text={`Head to the Tutorials tab to do so.`} />\n                    </Text>,\n                ]}\n                step_index={7}\n                show_actions={false}\n                has_localize_component\n            />\n        ),\n        locale: { last: localize('Got it, thanks!') },\n        ...joyride_props,\n        hideBackButton: true,\n        disableOverlay: false,\n    },\n];\n\nconst Step1 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 1 :' />\n            </div>\n        )}\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text={'First, set the <0>Trade parameters</0> block.'}\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left joyride-content__sub-title'>\n            <Localize i18n_default_text='<0>1. Trade parameters:<0>' components={[<strong key={0} />]} />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize\n                        i18n_default_text='First, set <0>Market</0> to Derived > Continuous Indices > Volatility 100 (1s) Index.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Then, set <0>Trade type</0> to Up/Down > Rise/Fall.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='For <0>Contract type,</0> set it to Both.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='For <0>Default candle interval,</0> set it to 1 minute'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n            </ul>\n        </div>\n    </div>\n);\n\nconst Step1A = () => (\n    <div className='joyride-content'>\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='For <0>Trade options</0>, set it as below:'\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize i18n_default_text='<0>Duration</0>: Ticks 1' components={[<strong key={0} />]} />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='<0>Stake: USD</0> 10 (min: 0.35 - max: 50000)'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n            </ul>\n        </div>\n    </div>\n);\n\nconst Step2 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 2 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='Then, set the <0>Purchase conditions</0> block.'\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left joyride-content__sub-title'>\n            <Localize i18n_default_text='<0>2. Purchase conditions</0>:' components={[<strong key={0} />]} />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize i18n_default_text='<0>Purchase</0>: Rise' components={[<strong key={0} />]} />\n                </li>\n            </ul>\n        </div>\n    </div>\n);\n\nconst Step3 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left joyride-content__left__step-three'>\n                <Localize i18n_default_text='Step 3 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='The third block is <0>optional</0>. You may use this block if you want to sell your contract before it expires. For now, leave the block as it is. '\n                components={[<strong key={0} />]}\n            />\n        </div>\n    </div>\n);\n\nconst Step4 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 4 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='Next, go to <0>Utility tab</0> under the Blocks menu. Tap the drop-down arrow and hit <0>Loops</0>.'\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize\n                        i18n_default_text='Look for the <0>Repeat While/Until</0>, and click the + icon to add the block to the workspace area.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Choose <0>until</0> as the repeat option.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n            </ul>\n            <div className='joyride-content__left joyride-content__with-icon'>\n                <div className='joyride-content__with-icon__left'>\n                    <Icon icon='IcCheckmarkCircle' className='db-contract-card__result-icon' color='green' />\n                </div>\n                <div className='joyride-content__with-icon__right'>\n                    <Localize\n                        i18n_default_text='Pro tip: You can also click and drag out the desired block'\n                        components={[<strong key={0} />]}\n                    />\n                </div>\n            </div>\n        </div>\n        <div>\n            <video autoPlay loop controls playsInline preload='auto' disablePictureInPicture controlsList='nodownload'>\n                <source src={getUrlBase('/public/videos/bot-builder-tour-step-4.mp4')} type='video/mp4' />\n            </video>\n        </div>\n    </div>\n);\n\nconst Step5 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 5 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='Now, tap the <0>Analysis</0> drop-down arrow and hit <0>Contract</0>.'\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize\n                        i18n_default_text='Go to the <0>Last trade result</0> block and click + icon to add the <0>Result is Win</0> block to the workspace.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Then, drag the <0>Result is win</0> into the empty slot next to <0>repeat until</0> block.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Now, go to the <0>Restart trading conditions</0> block.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Drag the <0>Trade again</0> block and add it into the <0>do</0> part of the <0>Repeat until</0> block.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n            </ul>\n        </div>\n        <div>\n            <video autoPlay loop controls playsInline preload='auto' disablePictureInPicture controlsList='nodownload'>\n                <source src={getUrlBase('/public/videos/bot-builder-tour-step-5.mp4')} type='video/mp4' />\n            </video>\n        </div>\n    </div>\n);\n\nconst Step6 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 6 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='Finally, drag and add the whole <0>Repeat</0> block to the <0>Restart trading conditions</0> block.'\n                components={[<strong key={0} />]}\n            />\n        </div>\n    </div>\n);\n\nexport const BOT_BUILDER_TOUR = [\n    {\n        target: '.animation__wrapper',\n        content: <Step1 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step1A />,\n        placement: 'bottom',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step2 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step3 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step4 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step5 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step6 show_label />,\n        locale: { last: localize('Next') },\n        ...joyride_props,\n    },\n];\n\nexport type TMobileTourConfig = {\n    header: string;\n    content: Array<React.ReactElement>;\n    tour_step_key: number;\n    img?: string;\n    media?: string;\n};\n\nexport const BOT_BUILDER_MOBILE: TMobileTourConfig[] = [\n    {\n        header: localize('Step 1'),\n        content: [<Localize key='step-1' i18n_default_text={`First, click the Import icon on the tool bar.`} />],\n        tour_step_key: 1,\n    },\n    {\n        header: localize('Step 2'),\n        content: [\n            <Localize\n                key='step-2'\n                i18n_default_text={`Next, import your bot directly from your mobile device or from Google Drive.`}\n            />,\n        ],\n        tour_step_key: 2,\n    },\n    {\n        header: localize('Step 3'),\n        content: [\n            <Localize\n                key='step-3'\n                i18n_default_text={`Once imported, you will see a preview of the bot on the workspace. Click run to start trading with this bot.`}\n            />,\n        ],\n        tour_step_key: 3,\n    },\n];\n\nexport const DBOT_ONBOARDING_MOBILE: TMobileTourConfig[] = [\n    {\n        header: localize('Get started on Deriv Bot'),\n        content: [\n            <Localize\n                key='get-started-on-deriv-bot'\n                i18n_default_text='Hi! Hit <0>Start</0> for a quick tour.'\n                components={[<strong key={0} />]}\n            />,\n        ],\n        tour_step_key: 1,\n    },\n    {\n        header: localize('Import or choose your bot'),\n        content: [\n            <Localize\n                key='import-or-choose-your-bot'\n                i18n_default_text='Import your bot or tap Quick Strategies to choose from the ready-to-use bot templates.'\n            />,\n        ],\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-1.mp4'),\n        tour_step_key: 2,\n    },\n    {\n        header: localize('Monitor the market'),\n        content: [\n            <Localize key='monitor-the-market' i18n_default_text='View the market price of your favourite assets.' />,\n        ],\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-2.mp4'),\n        tour_step_key: 3,\n    },\n    {\n        header: localize('Learn more with our tutorials'),\n        content: [\n            <Localize\n                key='learn-more-with-our-tutorials'\n                i18n_default_text='Explore the video guides and FAQs to build your bot in the tutorials tab.'\n            />,\n        ],\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-3.mp4'),\n        tour_step_key: 4,\n    },\n    {\n        header: localize('Use these shortcuts'),\n        img: getImageLocation('dbot-mobile-onboarding-step-4.png'),\n        content: [\n            <Localize\n                key='use-these-shortcuts'\n                i18n_default_text='You can also import or build your bot using any of these shortcuts.'\n            />,\n        ],\n        tour_step_key: 5,\n    },\n    {\n        header: localize('Check your bot’s performance'),\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-5.mp4'),\n        content: [\n            <Localize key='check-your-bots-performance' i18n_default_text='See how your bot is doing in real-time.' />,\n        ],\n        tour_step_key: 6,\n    },\n    {\n        header: localize('Run your bot'),\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-6.mp4'),\n        content: [\n            <Localize\n                key='run-your-bot'\n                i18n_default_text='Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.'\n                components={[<strong key={0} />]}\n            />,\n        ],\n        tour_step_key: 7,\n    },\n    {\n        header: localize('Want to retake the tour?'),\n        img: getImageLocation('dbot-mobile-onboarding-step-7.png'),\n        content: [<Localize key='want-to-retake-the-tour' i18n_default_text='Head to the Tutorials tab to do so.' />],\n        tour_step_key: 8,\n    },\n];\n\nexport const tourDialogInfo = is_mobile ? (\n    <Localize\n        key='tour-dialog-info-mobile'\n        i18n_default_text='Here’s a quick guide on how to use Deriv Bot on the go.'\n    />\n) : (\n    <Localize\n        key='tour-dialog-info-desktop'\n        i18n_default_text='Learn how to build your bot from scratch using a simple strategy.'\n    />\n);\n\nexport const tourDialogAction = is_mobile ? (\n    <Localize\n        key='tour-dialog-action-mobile'\n        i18n_default_text='You can import a bot from your mobile device or from Google drive, see a preview in the bot builder, and start trading by running the bot.'\n    />\n) : (\n    <Localize\n        key='tour-dialog-action-desktop'\n        i18n_default_text='Hit the <0>Start</0> button to begin and follow the tutorial.'\n    />\n);\n\nexport const onboarding_tour_header = (\n    <Localize key='onboarding-tour-header' i18n_default_text='Get started on Deriv Bot' />\n);\n\nexport const bot_builder_tour_header = is_mobile ? (\n    <Localize key='tour_header-mobile' i18n_default_text='Bot Builder guide' />\n) : (\n    <Localize key='tour_header-desktop' i18n_default_text=\"Let's build a Bot!\" />\n);\n","import React from 'react';\n\nimport { Dialog, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\n\nimport { DBOT_TABS } from 'Constants/bot-contents';\n\nimport { useDBotStore } from '../../../../stores/useDBotStore';\nimport { bot_builder_tour_header, onboarding_tour_header, tourDialogAction, tourDialogInfo } from '../config';\nimport { setTourSettings, tour_list } from '../utils';\n\nconst TourStartDialog = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { active_tab, is_tour_dialog_visible, setTourDialogVisibility, setActiveTour, setShowMobileTourDialog } =\n        dashboard;\n\n    const is_mobile = isMobile();\n    const tour_token = active_tab === 0 ? 'onboard_tour_token' : 'bot_builder_token';\n    const toggleTour = () => {\n        if (is_mobile) setShowMobileTourDialog(false);\n        setTourDialogVisibility(false);\n        setActiveTour('');\n        setTourSettings(new Date().getTime(), tour_token);\n    };\n\n    const onboard_tour = active_tab === DBOT_TABS.DASHBOARD;\n\n    const getTourContent = () => {\n        return (\n            <>\n                {onboard_tour ? (\n                    <Localize\n                        key={0}\n                        i18n_default_text='Hi! Hit <0>Start</0> for a quick tour.'\n                        components={[<strong key={0} />]}\n                    />\n                ) : (\n                    <>\n                        <div className='dc-dialog__content__description__text'>{tourDialogInfo}</div>\n                        <div className='dc-dialog__content__description__text'>{tourDialogAction}</div>\n                        <div className='dc-dialog__content__description__text'>\n                            <Localize\n                                key={0}\n                                i18n_default_text={'Note: You can also find this tutorial in the <0>Tutorials</0> tab.'}\n                                components={[<strong key={0} />]}\n                            />\n                        </div>\n                    </>\n                )}\n            </>\n        );\n    };\n\n    const onHandleConfirm = () => {\n        setActiveTour(tour_list[active_tab]);\n        if (is_mobile) setShowMobileTourDialog(false);\n        setTourDialogVisibility(false);\n        setTourSettings(new Date().getTime(), tour_token);\n    };\n    const header_text_size = is_mobile ? 'xs' : 's';\n    const content_text_size = is_mobile ? 'xxs' : 'xs';\n\n    const tour_headers = active_tab === 0 ? onboarding_tour_header : bot_builder_tour_header;\n    return (\n        <div>\n            <Dialog\n                is_visible={is_tour_dialog_visible}\n                cancel_button_text={localize('Skip')}\n                onCancel={() => toggleTour()}\n                confirm_button_text={localize('Start')}\n                onConfirm={onHandleConfirm}\n                is_mobile_full_width\n                className={'dc-dialog tour-dialog'}\n                has_close_icon={false}\n            >\n                <div className='dc-dialog__content__header'>\n                    <Text weight='bold' color='prominent' size={header_text_size}>\n                        {tour_headers}\n                    </Text>\n                </div>\n                <div className='dc-dialog__content__description'>\n                    <Text size={content_text_size} color='prominent'>\n                        {getTourContent()}\n                    </Text>\n                </div>\n            </Dialog>\n        </div>\n    );\n});\n\nexport default TourStartDialog;\n","import { useState } from 'react';\nimport { CallBackProps } from 'react-joyride';\n\nexport const useTourHandler = () => {\n    const [is_finished, setIsFinished] = useState(false);\n    const [is_close_tour, setIsCloseTour] = useState(false);\n\n    const handleJoyrideCallback = (data: CallBackProps) => {\n        const { action, status } = data;\n        if (status === 'finished') {\n            setIsFinished(true);\n        } else if (action === 'close' || action === 'skip') {\n            setIsCloseTour(true);\n        }\n    };\n\n    return {\n        is_finished,\n        handleJoyrideCallback,\n        setIsFinished,\n        is_close_tour,\n        setIsCloseTour,\n    };\n};\n","import React from 'react';\n\nimport { observer } from '@deriv/stores';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { getSetting } from 'Utils/settings';\n\nimport ReactJoyrideWrapper from '../common/react-joyride-wrapper';\nimport TourEndDialog from '../common/tour-end-dialog';\nimport TourStartDialog from '../common/tour-start-dialog';\nimport { BOT_BUILDER_TOUR } from '../config';\nimport { useTourHandler } from '../hooks/useTourHandler';\n\nconst BotBuilderTourDesktop = observer(() => {\n    const { is_close_tour, is_finished, handleJoyrideCallback, setIsCloseTour } = useTourHandler();\n    const { dashboard } = useDBotStore();\n    const { active_tab, active_tour, setActiveTour, setTourDialogVisibility } = dashboard;\n    const token = getSetting('bot_builder_token');\n    if (!token && active_tab === 1) setTourDialogVisibility(true);\n\n    React.useEffect(() => {\n        if (is_finished) {\n            setTourDialogVisibility(true);\n            setActiveTour('');\n        } else if (is_close_tour) {\n            setActiveTour('');\n            setIsCloseTour(false);\n        }\n    }, [is_close_tour, is_finished, setActiveTour, setIsCloseTour, setTourDialogVisibility]);\n\n    return (\n        <>\n            {!is_finished ? <TourStartDialog /> : <TourEndDialog />}\n            {active_tour && (\n                <ReactJoyrideWrapper\n                    handleCallback={handleJoyrideCallback}\n                    steps={BOT_BUILDER_TOUR}\n                    styles={{\n                        options: {\n                            arrowColor: 'transparent',\n                            backgroundColor: 'var(--general-main-2)',\n                            primaryColor: 'var(--brand-red-coral)',\n                            textColor: 'var(--text-general)',\n                        },\n                    }}\n                />\n            )}\n        </>\n    );\n});\n\nexport default BotBuilderTourDesktop;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { Icon, Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\nimport { TStepMobile } from '../config';\n\ntype TAccordion = {\n    content_data: TStepMobile | null;\n    expanded: boolean;\n    test_id?: string;\n};\n\nconst Accordion = ({ content_data, expanded = false, test_id = 'dbot-acc-id', ...props }: TAccordion) => {\n    const [is_open, setOpen] = React.useState(expanded);\n    if (!content_data) return null;\n    const { content, header } = content_data;\n    return (\n        <div className='dbot-accordion' {...props}>\n            <div>\n                <div className='dbot-accordion__navbar' data-testid={test_id} onClick={() => setOpen(!is_open)}>\n                    <div className='dbot-accordion__header'>\n                        <Text as='span' size='xs' weight='bold'>\n                            {localize(header)}\n                        </Text>\n                    </div>\n                    <div className='dbot-accordion__icon'>\n                        <Icon icon={is_open ? 'IcChevronDownBold' : 'IcChevronUpBold'} />\n                    </div>\n                </div>\n                <div\n                    className={classNames('dbot-accordion__content', {\n                        'dbot-accordion__content--open': is_open,\n                    })}\n                    data-testid='accordion-content'\n                >\n                    <Text as='span' line_height='s' size='xxs'>\n                        {content}\n                    </Text>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Accordion;\n","import React from 'react';\n\nimport { Text } from '@deriv/components';\n\ntype TTourButton = {\n    type?: string;\n    onClick: () => void;\n    label: string;\n};\n\nconst TourButton = ({ label, type = 'default', ...props }: TTourButton) => {\n    if (!label) return null;\n    return (\n        <button className={type} {...props}>\n            <Text color='prominent' align='center' weight='bold' as='span' line_height='s' size='xs'>\n                {label}\n            </Text>\n        </button>\n    );\n};\n\nexport default TourButton;\n","import React from 'react';\nimport { ProgressBarTracker } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { getSetting } from 'Utils/settings';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport Accordion from '../common/accordion';\nimport TourButton from '../common/tour-button';\nimport TourStartDialog from '../common/tour-start-dialog';\nimport { BOT_BUILDER_MOBILE } from '../config';\nimport { highlightLoadModalButton } from '../utils';\n\nconst BotBuilderTourMobile = observer(() => {\n    const { dashboard, load_modal, quick_strategy } = useDBotStore();\n    const { toggleTourLoadModal } = load_modal;\n    const {\n        onTourEnd,\n        setTourActiveStep,\n        active_tour,\n        show_mobile_tour_dialog,\n        active_tab,\n        setShowMobileTourDialog,\n        setTourDialogVisibility,\n    } = dashboard;\n    const { is_open } = quick_strategy;\n    const [tour_step, setTourStep] = React.useState<number>(1);\n    const content_data = BOT_BUILDER_MOBILE.find(({ tour_step_key }) => {\n        return tour_step_key === tour_step;\n    });\n    const test_id = tour_step === 3 ? 'finish-bot-builder-tour' : 'next-bot-builder-tour';\n\n    React.useEffect(() => {\n        setTourActiveStep(tour_step);\n        //component does not rerender so calling this to highlight\n        !show_mobile_tour_dialog && highlightLoadModalButton(active_tour, tour_step);\n        if (tour_step === 2) toggleTourLoadModal(true);\n        else toggleTourLoadModal(false);\n        const token = getSetting('bot_builder_token');\n        if (!token && active_tab === 1) {\n            if (is_open) {\n                setTourDialogVisibility(false);\n            } else {\n                setTourDialogVisibility(true);\n            }\n            setShowMobileTourDialog(true);\n        }\n    }, [tour_step, show_mobile_tour_dialog]);\n\n    const tour_button_text = tour_step === 3 ? localize('Finish') : localize('Next');\n    const is_tour_active = active_tour === 'onboarding';\n    return (\n        <>\n            {show_mobile_tour_dialog && <TourStartDialog />}\n            {active_tour && !show_mobile_tour_dialog && (\n                <div data-testid='botbuilder-tour-mobile' className='dbot-slider dbot-slider__bot-builder-tour'>\n                    {content_data && <Accordion data-testid='bot-builder-acc' content_data={content_data} expanded />}\n                    <div className='dbot-slider__status'>\n                        <div className='dbot-slider__progress-bar'>\n                            {\n                                <ProgressBarTracker\n                                    step={tour_step}\n                                    steps_list={BOT_BUILDER_MOBILE.map(v => v.tour_step_key.toString())}\n                                    onStepChange={setTourStep}\n                                />\n                            }\n                        </div>\n                        <div className='dbot-slider__button-group'>\n                            {tour_step !== 1 && (\n                                <TourButton\n                                    onClick={() => {\n                                        setTourStep(tour_step - 1);\n                                    }}\n                                    label={localize('Previous')}\n                                    data-testid='prev-bot-builder-tour'\n                                />\n                            )}\n                            <TourButton\n                                type='danger'\n                                onClick={() => {\n                                    setTourStep(tour_step + 1);\n                                    onTourEnd(tour_step, is_tour_active);\n                                }}\n                                label={tour_button_text}\n                                data-testid={test_id}\n                            />\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    );\n});\n\nexport default BotBuilderTourMobile;\n","import React from 'react';\nimport { observer } from 'mobx-react';\n\nimport { isMobile } from '@deriv/shared';\n\nimport BotBuilderTourDesktop from './bot-builder-tour-desktop';\nimport BotBuilderTourMobile from './bot-builder-tour-mobile';\n\nconst is_mobile = isMobile();\nconst BotBuilderTourHandler = observer(() => {\n    return <>{is_mobile ? <BotBuilderTourMobile /> : <BotBuilderTourDesktop />};</>;\n});\n\nexport default BotBuilderTourHandler;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype FlyoutBlockProps = {\n    block_node: React.ReactNode;\n    should_hide_display_name: boolean;\n};\n\nconst FlyoutBlock = observer(({ block_node, should_hide_display_name }: FlyoutBlockProps) => {\n    const { flyout } = useDBotStore();\n    const { initBlockWorkspace } = flyout;\n\n    let el_block_workspace = React.useRef();\n\n    React.useEffect(() => {\n        initBlockWorkspace(el_block_workspace, block_node);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n        <div\n            ref={el => (el_block_workspace = el)}\n            className={classNames({\n                'flyout__block-workspace--center': should_hide_display_name,\n                'flyout__block-workspace--top': !should_hide_display_name,\n            })}\n            data-testid='flyout-block-workspace'\n        />\n    );\n});\n\nexport default FlyoutBlock;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { PropTypes } from 'prop-types';\nimport { Button, Text } from '@deriv/components';\nimport { Localize } from '@deriv/translations';\nimport FlyoutBlock from './flyout-block';\n\nconst FlyoutBlockGroup = ({ onInfoClick, block_node, is_active, should_hide_display_name }) => {\n    const block_type = block_node.getAttribute('type');\n    const block_meta = Blockly.Blocks[block_type].meta();\n    const is_variables_get = block_type === 'variables_get';\n    const is_variables_set = block_type === 'variables_set';\n    const { display_name, description } = block_meta;\n\n    const AddButton = () => (\n        <div className='flyout__item-buttons'>\n            <Button\n                id={`db-flyout__add--${block_type}`}\n                className='flyout__button-add flyout__button-add--hide'\n                has_effect\n                is_plus\n                onClick={() => Blockly.derivWorkspace.addBlockNode(block_node)}\n                type='button'\n            />\n        </div>\n    );\n\n    return (\n        <>\n            {is_variables_set && <div className='flyout__hr' />}\n            <div className={classNames('flyout__item', { 'flyout__item--active': is_active })}>\n                {!should_hide_display_name && (\n                    <>\n                        <div className='flyout__item-header'>\n                            <Text\n                                size={is_variables_get ? 'xs' : 'xsm'}\n                                line_height={is_variables_get ? undefined : 'xl'}\n                                weight={is_variables_get ? undefined : 'bold'}\n                            >\n                                {display_name}\n                            </Text>\n                            {!is_variables_get && <AddButton />}\n                        </div>\n                        <div className='flyout__item-description'>\n                            {description}\n                            {onInfoClick && (\n                                <a\n                                    id={display_name.replace(/\\s/gi, '-')}\n                                    className='flyout__item-info'\n                                    onClick={onInfoClick}\n                                >\n                                    <Localize i18n_default_text='Learn more' />\n                                </a>\n                            )}\n                        </div>\n                    </>\n                )}\n                <div className='flyout__block-workspace__header'>\n                    <FlyoutBlock block_node={block_node} should_hide_display_name />\n                    {is_variables_get && <AddButton />}\n                </div>\n            </div>\n        </>\n    );\n};\n\nFlyoutBlockGroup.propTypes = {\n    block_nodes: PropTypes.array,\n    onInfoClick: PropTypes.func,\n};\n\nexport default FlyoutBlockGroup;\n","import React from 'react';\n\ntype TFlyoutImageProps = {\n    width: string;\n    url: string;\n};\n\nconst FlyoutImage = (props: TFlyoutImageProps) => {\n    const { width, url } = props;\n    const style = { width };\n\n    return (\n        <div className='flyout__item' data-testid='dt_flyout_image'>\n            <img src={url} className='flyout__image' style={style} />\n        </div>\n    );\n};\n\nexport default FlyoutImage;\n","import React from 'react';\nimport { Text } from '@deriv/components';\n\nconst FlyoutText = (props: { text: string }) => {\n    const { text } = props;\n\n    return (\n        <Text as='p' size='xs' styles={{ lineHeight: '1.3em' }}>\n            {text}\n        </Text>\n    );\n};\n\nexport default FlyoutText;\n","import React from 'react';\n\nconst FlyoutVideo = (props: { url: string }) => (\n    <div className='flyout__item' data-testid='dt_flyout_video_container'>\n        <iframe\n            data-testid='dt_flyout_video'\n            className='flyout__video'\n            src={props.url}\n            frameBorder='0'\n            allow='accelerometer; encrypted-media; gyroscope; picture-in-picture'\n            allowFullScreen\n            width='100%'\n        />\n    </div>\n);\n\nexport default FlyoutVideo;\n","import React from 'react';\nimport { Button, Icon, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { help_content_config, help_content_types } from 'Utils/help-content/help-content.config';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport FlyoutBlock from '../flyout-block';\nimport FlyoutImage from './flyout-img';\nimport FlyoutText from './flyout-text';\nimport FlyoutVideo from './flyout-video';\n\nconst HelpBase = observer(() => {\n    const { flyout, flyout_help } = useDBotStore();\n    const {\n        block_node,\n        block_type,\n        examples,\n        help_string,\n        onBackClick,\n        onSequenceClick,\n        should_next_disable,\n        should_previous_disable,\n        title,\n    } = flyout_help;\n    const { is_search_flyout } = flyout;\n\n    const block_help_component = help_string && help_content_config(__webpack_public_path__)[block_type];\n    let text_count = 0;\n\n    return (\n        <React.Fragment>\n            <div className='flyout__help-header'>\n                <button className='dc-btn flyout__button-back' onClick={onBackClick}>\n                    <Icon icon='IcArrowLeft' />\n                </button>\n                <Text weight='bold' className='flyout__help-title'>\n                    {title}\n                </Text>\n                <div className='flyout__item-buttons'>\n                    <Button\n                        className='flyout__button-add'\n                        has_effect\n                        id={`db-flyout-help__add--${block_type}`}\n                        onClick={() => Blockly.derivWorkspace.addBlockNode(block_node)}\n                        primary\n                        text={localize('Add')}\n                        type='button'\n                    />\n                </div>\n            </div>\n            <div className='flyout__help-content'>\n                {block_help_component &&\n                    block_help_component.map((component, index) => {\n                        const { type, width, url, example_id } = component;\n                        const { text } = help_string;\n                        const example_node = examples.find(example => example.id === example_id);\n                        switch (type) {\n                            case help_content_types.TEXT:\n                                if (text_count < text.length) {\n                                    return <FlyoutText key={`${block_type}_${index}`} text={text[text_count++]} />;\n                                }\n                                return null;\n                            case help_content_types.VIDEO:\n                                return <FlyoutVideo key={`${block_type}_${index}`} url={url} />;\n                            case help_content_types.IMAGE:\n                                return <FlyoutImage key={`${block_type}_${index}`} width={width} url={url} />;\n                            case help_content_types.BLOCK: {\n                                return <FlyoutBlock key={`${block_type}_${index}`} block_node={block_node} />;\n                            }\n                            case help_content_types.EXAMPLE:\n                                if (example_node) {\n                                    return (\n                                        <FlyoutBlock\n                                            key={`${block_type}_${index}`}\n                                            block_node={example_node.childNodes[0]}\n                                        />\n                                    );\n                                }\n                                return null;\n                            default:\n                                return null;\n                        }\n                    })}\n            </div>\n            {!is_search_flyout && !(should_previous_disable && should_next_disable) && (\n                <div className='flyout__help-footer'>\n                    <Button\n                        className='flyout__button-previous'\n                        secondary\n                        onClick={() => onSequenceClick(false)}\n                        text={localize('Previous')}\n                        type='button'\n                        is_disabled={should_previous_disable}\n                        renderText={text =>\n                            should_previous_disable && (\n                                <Text size='xs' weight='bold' align='center' color='disabled'>\n                                    {text}\n                                </Text>\n                            )\n                        }\n                    />\n                    <Button\n                        className='flyout__button-next'\n                        secondary\n                        onClick={() => onSequenceClick(true)}\n                        text={localize('Next')}\n                        type='button'\n                        is_disabled={should_next_disable}\n                        renderText={text =>\n                            should_next_disable && (\n                                <Text size='xs' weight='bold' align='center' color='disabled'>\n                                    {text}\n                                </Text>\n                            )\n                        }\n                    />\n                </div>\n            )}\n        </React.Fragment>\n    );\n});\n\nexport default HelpBase;\n","import HelpBase from './flyout-help-base.jsx';\n\nexport default HelpBase;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Icon, Input, Text, ThemedScrollbars } from '@deriv/components';\nimport { getPlatformSettings } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { help_content_config } from 'Utils/help-content/help-content.config';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport FlyoutBlockGroup from './flyout-block-group.jsx';\nimport HelpBase from './help-contents';\n\nconst SearchResult = ({ search_term, total_result }) => (\n    <div className='flyout__search-header'>\n        <Text weight='bold' className='flyout__search-header-text'>\n            {localize('Results for \"{{ search_term }}\"', {\n                search_term,\n                interpolation: { escapeValue: false },\n            })}\n        </Text>\n        <Text weight='bold' color='profit-success' className='flyout__search-header-text'>\n            {`${total_result} ${total_result > 1 ? localize('results') : localize('result')}`}\n        </Text>\n    </div>\n);\n\nconst FlyoutContent = props => {\n    const flyout_ref = React.useRef();\n    const {\n        flyout_content,\n        active_helper,\n        setHelpContent,\n        initFlyoutHelp,\n        is_empty,\n        is_search_flyout,\n        selected_category,\n        first_get_variable_block_index,\n    } = props;\n\n    return (\n        <div\n            ref={flyout_ref}\n            className={classNames('flyout__content', { 'flyout__normal-content': !is_search_flyout })}\n        >\n            <ThemedScrollbars className='flyout__content-scrollbar'>\n                {selected_category?.getAttribute('id') === 'indicators' && (\n                    <div className='flyout__content-disclaimer'>\n                        <span className='flyout__content-disclaimer-icon'>\n                            <Icon\n                                icon='IcBlackWarning'\n                                custom_color='#000000'\n                                className='flyout__content-disclaimer__warning-icon'\n                            />\n                        </span>\n                        <span className='flyout__content-disclaimer-text'>\n                            {localize(\n                                'Indicators on the chart tab are for indicative purposes only and may vary slightly from the ones on the {{platform_name_dbot}} workspace.',\n                                { platform_name_dbot: getPlatformSettings('dbot').name }\n                            )}\n                        </span>\n                    </div>\n                )}\n                {is_empty ? (\n                    <div className='flyout__search-empty'>\n                        <Text as='h2' weight='bold' line_height='xxs'>\n                            {localize('No results found')}\n                        </Text>\n                    </div>\n                ) : (\n                    flyout_content.map((node, index) => {\n                        const tag_name = node.tagName.toUpperCase();\n\n                        switch (tag_name) {\n                            case Blockly.Xml.NODE_BLOCK: {\n                                const block_type = node.getAttribute('type');\n\n                                return (\n                                    <FlyoutBlockGroup\n                                        key={`${node.getAttribute('type')}${Blockly.utils.genUid()}`}\n                                        id={`flyout__item-workspace--${index}`}\n                                        block_node={node}\n                                        should_hide_display_name={\n                                            block_type === 'variables_get'\n                                                ? index !== first_get_variable_block_index\n                                                : false\n                                        }\n                                        onInfoClick={\n                                            help_content_config(__webpack_public_path__)[block_type] &&\n                                            (is_search_flyout\n                                                ? () => setHelpContent(node)\n                                                : () => initFlyoutHelp(node, block_type))\n                                        }\n                                        is_active={active_helper === block_type}\n                                    />\n                                );\n                            }\n                            case Blockly.Xml.NODE_LABEL: {\n                                return (\n                                    <div\n                                        key={`${node.getAttribute('text')}${index}`}\n                                        className='flyout__item-label-bold'\n                                    >\n                                        {node.getAttribute('text')}\n                                    </div>\n                                );\n                            }\n                            case Blockly.Xml.NODE_INPUT: {\n                                return (\n                                    <Input\n                                        key={`${node.getAttribute('name')}${index}`}\n                                        className={`${node.getAttribute('className')}`}\n                                        type={`${node.getAttribute('type')}`}\n                                        name={`${node.getAttribute('name')}`}\n                                        placeholder={`${node.getAttribute('placeholder')}`}\n                                        autoComplete='off'\n                                    />\n                                );\n                            }\n                            case Blockly.Xml.NODE_BUTTON: {\n                                const callback_key = node.getAttribute('callbackKey');\n                                const callback_id = node.getAttribute('id');\n\n                                return (\n                                    <button\n                                        id={callback_id}\n                                        key={`${callback_key}${index}`}\n                                        className={classNames(\n                                            'dc-btn',\n                                            'dc-btn-effect',\n                                            'dc-btn--primary',\n                                            `${node.getAttribute('className')}`\n                                        )}\n                                        onClick={button => {\n                                            const workspace = Blockly.derivWorkspace;\n                                            const button_cb = workspace.getButtonCallback(callback_key);\n                                            const callback = button_cb || (() => {});\n\n                                            // Workaround for not having a flyout workspace.\n                                            // eslint-disable-next-line no-underscore-dangle\n                                            button.targetWorkspace_ = workspace;\n                                            button.getTargetWorkspace = () => {\n                                                // eslint-disable-next-line no-underscore-dangle\n                                                return button.targetWorkspace_;\n                                            };\n\n                                            callback(button);\n                                        }}\n                                    >\n                                        {node.getAttribute('text')}\n                                    </button>\n                                );\n                            }\n                            default:\n                                return null;\n                        }\n                    })\n                )}\n            </ThemedScrollbars>\n        </div>\n    );\n};\n\nconst Flyout = observer(() => {\n    const { flyout, flyout_help } = useDBotStore();\n    const { gtm } = useStore();\n    const { active_helper, initFlyoutHelp, setHelpContent } = flyout_help;\n    const {\n        flyout_content,\n        flyout_width,\n        is_help_content,\n        is_search_flyout,\n        is_visible,\n        onMount,\n        onUnmount,\n        search_term,\n        selected_category,\n        first_get_variable_block_index,\n    } = flyout;\n    const { pushDataLayer } = gtm;\n\n    React.useEffect(() => {\n        onMount();\n        return () => onUnmount();\n    }, [onMount, onUnmount]);\n\n    if (is_visible && is_search_flyout) {\n        pushDataLayer({ event: 'dbot_search_results', value: true });\n    }\n\n    const total_result = Object.keys(flyout_content).length;\n    const is_empty = total_result === 0;\n\n    return (\n        is_visible && (\n            <div\n                id='gtm-search-results'\n                className={classNames('flyout', {\n                    flyout__search: is_search_flyout,\n                    flyout__help: is_help_content,\n                    flyout__normal: !is_help_content && !is_search_flyout,\n                })}\n                style={{ width: `${flyout_width}px` }}\n            >\n                {is_search_flyout && !is_help_content && (\n                    <SearchResult search_term={search_term} total_result={total_result} />\n                )}\n                {is_help_content ? (\n                    <HelpBase />\n                ) : (\n                    <FlyoutContent\n                        is_empty={is_empty}\n                        flyout_content={flyout_content}\n                        active_helper={active_helper}\n                        setHelpContent={setHelpContent}\n                        initFlyoutHelp={initFlyoutHelp}\n                        is_search_flyout={is_search_flyout}\n                        selected_category={selected_category}\n                        first_get_variable_block_index={first_get_variable_block_index}\n                    />\n                )}\n            </div>\n        )\n    );\n});\n\nexport default Flyout;\n","import Flyout from './flyout.jsx';\nimport './flyout.scss';\n\nexport default Flyout;\n","import React from 'react';\nimport { Dialog, Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\nexport type TStopBotModalContent = {\n    is_running: boolean;\n    is_dialog_open: boolean;\n    is_contract_dialog_open: boolean;\n    is_stop_bot_dialog_open: boolean;\n    is_multiplier: boolean;\n    closeMultiplierContract: () => void;\n    onOkButtonClick: () => void;\n    toggleStopBotDialog: () => void;\n};\n\nconst StopBotModalContent = ({\n    is_running,\n    is_multiplier,\n    is_contract_dialog_open,\n    is_stop_bot_dialog_open,\n    closeMultiplierContract,\n    onOkButtonClick,\n    toggleStopBotDialog,\n}: TStopBotModalContent) => {\n    const confirm_button_text = is_running && is_multiplier ? localize('Keep my contract') : localize('Stop my bot');\n    const cancel_button_text = is_running && is_multiplier ? localize('Close my contract') : localize('Back');\n    const title_text =\n        is_running && is_multiplier ? localize('Keep your current contract?') : localize('Stop your current bot?');\n    const toggle_dialog_or_stop = is_running && is_multiplier ? closeMultiplierContract : toggleStopBotDialog;\n\n    return (\n        <React.Fragment>\n            <Dialog\n                portal_element_id='modal_root'\n                title={title_text}\n                is_visible={is_running ? is_stop_bot_dialog_open : is_contract_dialog_open}\n                confirm_button_text={confirm_button_text}\n                onConfirm={onOkButtonClick}\n                cancel_button_text={cancel_button_text}\n                onCancel={toggle_dialog_or_stop}\n                is_mobile_full_width={false}\n                className={'toolbar__dialog'}\n                has_close_icon\n            >\n                {is_running && is_multiplier ? (\n                    <>\n                        <Text as='p' line_height='s' size='xs' styles={{ paddingBottom: '2rem', paddingTop: '1rem' }}>\n                            {localize(\n                                'Close your contract now or keep it running. If you decide to keep it running, you can check and close it later on the '\n                            )}\n                            <Text as='span' line_height='s' size='xs'>\n                                <strong>{localize('Reports')}</strong>\n                            </Text>\n                            {localize(' page.')}\n                        </Text>\n                        <Text as='p' line_height='s' size='xs'>\n                            {localize('The Quick Strategy you just created will be loaded to the workspace.')}\n                        </Text>\n                    </>\n                ) : (\n                    <>\n                        <Text as='p' line_height='s' size='xs' styles={{ paddingBottom: '2rem', paddingTop: '1rem' }}>\n                            {localize(\n                                'Stopping the current bot will load the Quick Strategy you just created to the workspace.'\n                            )}\n                        </Text>\n                        <Text as='p' line_height='s' size='xs'>\n                            {localize(' Any open contracts can be viewed on the ')}\n                            <Text as='span' line_height='s' size='xs'>\n                                <strong>{localize('Reports')}</strong>\n                            </Text>\n                            {localize(' page.')}\n                        </Text>\n                    </>\n                )}\n            </Dialog>\n        </React.Fragment>\n    );\n};\n\nexport default StopBotModalContent;\n","import React from 'react';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from '../../../../stores/useDBotStore';\nimport StopBotModalContent from '../stop-bot-modal-content';\n\nconst StopBotModal = observer(() => {\n    const { run_panel, quick_strategy, summary_card } = useDBotStore();\n\n    const { is_contract_dialog_open, is_stop_bot_dialog_open, toggleStopBotDialog } = quick_strategy;\n    const { is_running, closeMultiplierContract, stopMyBot, is_dialog_open } = run_panel;\n    const { is_multiplier } = summary_card;\n\n    return (\n        <StopBotModalContent\n            is_running={is_running}\n            onOkButtonClick={stopMyBot}\n            is_contract_dialog_open={is_contract_dialog_open}\n            is_stop_bot_dialog_open={is_stop_bot_dialog_open}\n            is_multiplier={is_multiplier}\n            closeMultiplierContract={closeMultiplierContract}\n            is_dialog_open={is_dialog_open}\n            toggleStopBotDialog={toggleStopBotDialog}\n        />\n    );\n});\n\nexport default StopBotModal;\n","import React from 'react';\nimport { Button, Popover } from '@deriv/components';\n\ntype TToolbarButton = {\n    popover_message?: string;\n    button_id: string;\n    button_classname: string;\n    buttonOnClick: () => void;\n    icon?: React.ReactElement;\n    button_text: string;\n};\n\nconst ToolbarButton = ({\n    popover_message,\n    button_id,\n    button_classname,\n    buttonOnClick,\n    icon,\n    button_text,\n}: TToolbarButton) => (\n    <Popover alignment='bottom' message={popover_message} should_disable_pointer_events>\n        <Button id={button_id} className={button_classname} has_effect onClick={buttonOnClick} icon={icon} green>\n            {button_text}\n        </Button>\n    </Popover>\n);\n\nexport default ToolbarButton;\n","export const popover_zindex = Object.freeze({\n    QUICK_STRATEGY: 99999,\n    TOOLBAR: 100,\n    TRANSACTION: 10,\n    SUMMARY_TOOLTIPS: 5,\n    RUN_PANEL: 8,\n});\n","import React from 'react';\nimport { Icon, Popover } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { popover_zindex } from 'Constants/z-indexes';\n\ntype TToolbarIcon = {\n    popover_message: string;\n    icon: string;\n    icon_id: string;\n    action: () => void;\n    icon_color?: string;\n    data_testid?: string;\n};\n\nconst ToolbarIcon = ({ popover_message, icon, icon_id, icon_color, action, data_testid }: TToolbarIcon) => {\n    const renderIcon = () => (\n        <Icon\n            icon={icon}\n            id={icon_id}\n            className='toolbar__icon'\n            onClick={action}\n            {...(icon_color && { color: icon_color })}\n            data_testid={data_testid}\n        />\n    );\n\n    if (isMobile()) {\n        return renderIcon();\n    }\n\n    return (\n        <Popover\n            alignment='bottom'\n            message={popover_message}\n            zIndex={popover_zindex.TOOLBAR}\n            should_disable_pointer_events\n        >\n            {renderIcon()}\n        </Popover>\n    );\n};\n\nexport default ToolbarIcon;\n","import React from 'react';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport ToolbarIcon from './toolbar-icon';\n\ntype TWorkspaceGroup = {\n    has_redo_stack: boolean;\n    has_undo_stack: boolean;\n    onResetClick: () => void;\n    onSortClick: () => void;\n    onUndoClick: (param?: boolean) => void;\n    onZoomInOutClick: (param?: boolean) => void;\n    toggleLoadModal: () => void;\n    toggleSaveModal: () => void;\n};\n\nconst WorkspaceGroup = observer(\n    ({\n        has_redo_stack,\n        has_undo_stack,\n        onResetClick,\n        onSortClick,\n        onUndoClick,\n        onZoomInOutClick,\n        toggleLoadModal,\n        toggleSaveModal,\n    }: TWorkspaceGroup) => {\n        const { dashboard } = useDBotStore();\n        const { setPreviewOnPopup } = dashboard;\n\n        return (\n            <div className='toolbar__group toolbar__group-btn' data-testid='dt_toolbar_group_btn'>\n                <ToolbarIcon\n                    popover_message={localize('Reset')}\n                    icon='IcReset'\n                    icon_id='db-toolbar__reset-button'\n                    data_testid='dt_toolbar_reset_button'\n                    action={onResetClick}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Import')}\n                    icon='IcFolderOpen'\n                    icon_id='db-toolbar__import-button'\n                    data_testid='dt_toolbar_import_button'\n                    action={() => {\n                        setPreviewOnPopup(true);\n                        toggleLoadModal();\n                    }}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Save')}\n                    icon='IcSave'\n                    icon_id='db-toolbar__save-button'\n                    data_testid='dt_toolbar_save_button'\n                    action={toggleSaveModal}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Sort blocks')}\n                    icon='IcSort'\n                    icon_id='db-toolbar__sort-button'\n                    data_testid='dt_toolbar_sort_button'\n                    action={onSortClick}\n                />\n                <div className='vertical-divider' />\n                <ToolbarIcon\n                    popover_message={localize('Undo')}\n                    icon='IcUndo'\n                    icon_id='db-toolbar__undo-button'\n                    data_testid='dt_toolbar_undo_button'\n                    icon_color={has_undo_stack ? undefined : 'disabled'}\n                    action={() => onUndoClick(/* redo */ false)}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Redo')}\n                    icon='IcRedo'\n                    icon_id='db-toolbar__redo-button'\n                    data_testid='dt_toolbar_redo_button'\n                    icon_color={has_redo_stack ? undefined : 'disabled'}\n                    action={() => onUndoClick(/* redo */ true)}\n                />\n                <div className='vertical-divider' />\n                <ToolbarIcon\n                    popover_message={localize('Zoom in')}\n                    icon='IcZoomIn'\n                    icon_id='db-toolbar__zoom-in-button'\n                    data_testid='dt_toolbar_zoom_in_button'\n                    action={() => onZoomInOutClick(/* in */ true)}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Zoom out')}\n                    icon='IcZoomOut'\n                    icon_id='db-toolbar__zoom-out'\n                    data_testid='dt_toolbar_zoom_out_button'\n                    action={() => onZoomInOutClick(/* in */ false)}\n                />\n            </div>\n        );\n    }\n);\n\nexport default WorkspaceGroup;\n","import React from 'react';\nimport { Dialog } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport ToolbarButton from './toolbar-button';\nimport WorkspaceGroup from './workspace-group';\n\nconst Toolbar = observer(() => {\n    const { run_panel, save_modal, load_modal, toolbar, quick_strategy } = useDBotStore();\n    const {\n        ui: { is_mobile },\n    } = useStore();\n    const {\n        has_redo_stack,\n        has_undo_stack,\n        is_dialog_open,\n        closeResetDialog,\n        onResetOkButtonClick: onOkButtonClick,\n        onResetClick,\n        onSortClick,\n        onUndoClick,\n        onZoomInOutClick,\n    } = toolbar;\n    const { toggleSaveModal } = save_modal;\n    const { toggleLoadModal } = load_modal;\n    const { is_running } = run_panel;\n    const { setFormVisibility } = quick_strategy;\n    const confirm_button_text = is_running ? localize('Yes') : localize('OK');\n    const cancel_button_text = is_running ? localize('No') : localize('Cancel');\n    const handleQuickStrategyOpen = () => {\n        setFormVisibility(true);\n    };\n    return (\n        <React.Fragment>\n            <div className='toolbar dashboard__toolbar' data-testid='dashboard__toolbar'>\n                <div className='toolbar__section'>\n                    {is_mobile && (\n                        <ToolbarButton\n                            popover_message={localize('Click here to start building your Deriv Bot.')}\n                            button_id='db-toolbar__get-started-button'\n                            button_classname='toolbar__btn toolbar__btn--icon toolbar__btn--start'\n                            buttonOnClick={handleQuickStrategyOpen}\n                            button_text={localize('Quick strategy')}\n                        />\n                    )}\n                    <WorkspaceGroup\n                        has_redo_stack={has_redo_stack}\n                        has_undo_stack={has_undo_stack}\n                        onResetClick={onResetClick}\n                        onSortClick={onSortClick}\n                        onUndoClick={onUndoClick}\n                        onZoomInOutClick={onZoomInOutClick}\n                        toggleLoadModal={toggleLoadModal}\n                        toggleSaveModal={toggleSaveModal}\n                    />\n                </div>\n            </div>\n            <Dialog\n                portal_element_id='modal_root'\n                title={localize('Are you sure?')}\n                is_visible={is_dialog_open}\n                confirm_button_text={confirm_button_text}\n                onConfirm={onOkButtonClick}\n                cancel_button_text={cancel_button_text}\n                onCancel={closeResetDialog}\n                is_mobile_full_width={false}\n                className={'toolbar__dialog'}\n                has_close_icon\n            >\n                {is_running ? (\n                    <Localize\n                        i18n_default_text='The workspace will be reset to the default strategy and any unsaved changes will be lost. <0>Note: This will not affect your running bot.</0>'\n                        components={[\n                            <div\n                                key={0}\n                                className='toolbar__dialog-text--second'\n                                data-testid='toolbar__dialog-text--second'\n                            />,\n                        ]}\n                    />\n                ) : (\n                    <Localize i18n_default_text='Any unsaved changes will be lost.' />\n                )}\n            </Dialog>\n        </React.Fragment>\n    );\n});\n\nexport default Toolbar;\n","import Toolbar from './toolbar';\nimport './toolbar.scss';\n\nexport default Toolbar;\n","import React from 'react';\nimport { Icon } from '@deriv/components';\n\ntype TSearchIcon = {\n    search: string;\n    is_search_loading: boolean;\n    onClick: () => void;\n};\n\nconst SearchIcon = ({ search, is_search_loading, onClick }: TSearchIcon) => {\n    if (!search) return <Icon icon='IcSearch' />;\n    if (is_search_loading) return <div className='loader' data-testid='loader' />;\n    return <Icon icon='IcCloseCircle' onClick={onClick} color='secondary' />;\n};\n\nexport default SearchIcon;\n","import React from 'react';\nimport { Field as FormField, FieldProps, Form, Formik } from 'formik';\nimport { Input } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport SearchIcon from './search-icon';\n\ntype TSearchBox = {\n    is_search_loading: boolean;\n    onSearch: () => void;\n    onSearchBlur: () => void;\n    onSearchClear: (param: (field: string, value: number | string, shouldValidate?: boolean) => void) => void;\n    onSearchKeyUp: (param: () => void) => void;\n};\n\ntype TFormValues = { [key: string]: string };\n\nconst SearchBox = ({ is_search_loading, onSearch, onSearchBlur, onSearchClear, onSearchKeyUp }: TSearchBox) => (\n    <div className='db-toolbox__search'>\n        <Formik initialValues={{ search: '' }} onSubmit={onSearch}>\n            {({ submitForm, values: { search }, setFieldValue }) => (\n                <Form>\n                    <FormField name='search'>\n                        {({ field }: FieldProps<string, TFormValues>) => (\n                            <Input\n                                {...field}\n                                className='db-toolbox__search-field'\n                                type='text'\n                                name='search'\n                                placeholder={localize('Search')}\n                                onKeyUp={() => onSearchKeyUp(submitForm)}\n                                onFocus={submitForm}\n                                onBlur={onSearchBlur}\n                                leading_icon={\n                                    <SearchIcon\n                                        search={search}\n                                        is_search_loading={is_search_loading}\n                                        onClick={() => onSearchClear(setFieldValue)}\n                                    />\n                                }\n                            />\n                        )}\n                    </FormField>\n                </Form>\n            )}\n        </Formik>\n    </div>\n);\n\nexport default SearchBox;\n","import SearchBox from './search-box';\n\nexport default SearchBox;\n","import React from 'react';\nimport ReactDomServer from 'react-dom/server';\nimport { localize } from '@deriv/translations';\n\nconst Arg = ({ ...props }) => {\n    return React.createElement('arg', props);\n};\n\nconst Block = ({ ...props }) => {\n    return React.createElement('block', props);\n};\n\nconst Category = ({ ...props }) => {\n    return React.createElement('category', props);\n};\n\nconst Example = ({ ...props }) => {\n    return React.createElement('example', props);\n};\n\nconst Examples = ({ ...props }) => {\n    return React.createElement('examples', props);\n};\n\nconst Field = ({ ...props }) => {\n    return React.createElement('field', props);\n};\n\nconst Mutation = ({ ...props }) => {\n    return React.createElement('mutation', props);\n};\n\nconst Next = ({ ...props }) => {\n    return React.createElement('next', props);\n};\n\nconst Shadow = ({ ...props }) => {\n    return React.createElement('shadow', props);\n};\n\nconst Statement = ({ ...props }) => {\n    return React.createElement('statement', props);\n};\n\nconst Value = ({ ...props }) => {\n    return React.createElement('value', props);\n};\n\nconst Xml = ({ ...props }) => {\n    return React.createElement('xml', props);\n};\n\nexport const ToolboxItems = ReactDomServer.renderToStaticMarkup(\n    <Xml xmlns='http://www.w3.org/1999/xhtml' id='toolbox'>\n        <Category id='trade_parameters' name={localize('Trade parameters')}>\n            <Block type='trade_definition'>\n                <Statement name='TRADE_OPTIONS'>\n                    <Block type='trade_definition_market' deletable='false' movable='false'>\n                        <Field name='MARKET_LIST' />\n                        <Field name='SUBMARKET_LIST' />\n                        <Field name='SYMBOL_LIST' />\n                        <Next>\n                            <Block type='trade_definition_tradetype' deletable='false' movable='false'>\n                                <Field name='TRADETYPECAT_LIST' />\n                                <Field name='TRADETYPE_LIST' />\n                                <Next>\n                                    <Block type='trade_definition_contracttype' deletable='false' movable='false'>\n                                        <Field name='TYPE_LIST' />\n                                        <Next>\n                                            <Block\n                                                type='trade_definition_candleinterval'\n                                                deletable='false'\n                                                movable='false'\n                                            >\n                                                <Field name='CANDLEINTERVAL_LIST'>60</Field>\n                                                <Next>\n                                                    <Block\n                                                        type='trade_definition_restartbuysell'\n                                                        deletable='false'\n                                                        movable='false'\n                                                    >\n                                                        <Field name='TIME_MACHINE_ENABLED'>FALSE</Field>\n                                                        <Next>\n                                                            <Block\n                                                                type='trade_definition_restartonerror'\n                                                                deletable='false'\n                                                                movable='false'\n                                                            >\n                                                                <Field name='RESTARTONERROR'>TRUE</Field>\n                                                            </Block>\n                                                        </Next>\n                                                    </Block>\n                                                </Next>\n                                            </Block>\n                                        </Next>\n                                    </Block>\n                                </Next>\n                            </Block>\n                        </Next>\n                    </Block>\n                </Statement>\n            </Block>\n            <Block type='trade_definition_tradeoptions'>\n                <Mutation has_first_barrier='false' has_second_barrier='false' has_prediction='false' />\n                <Field name='DURATIONTYPE_LIST' />\n                <Field name='CURRENCY_LIST'>USD</Field>\n                <Value name='DURATION'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>1</Field>\n                    </Shadow>\n                </Value>\n                <Value name='AMOUNT'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>1</Field>\n                    </Shadow>\n                </Value>\n                <Field name='AMOUNT_LIMITS' />\n            </Block>\n            <Block type='trade_definition_multiplier'>\n                <Field name='MULTIPLIERTYPE_LIST' />\n                <Field name='CURRENCY_LIST'>USD</Field>\n                <Value name='AMOUNT'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>1</Field>\n                    </Shadow>\n                </Value>\n                <Field name='AMOUNT_LIMITS' />\n            </Block>\n            <Block type='multiplier_take_profit'>\n                <Value name='AMOUNT'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>0</Field>\n                    </Shadow>\n                </Value>\n            </Block>\n            <Block type='multiplier_stop_loss'>\n                <Value name='AMOUNT'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>0</Field>\n                    </Shadow>\n                </Value>\n            </Block>\n        </Category>\n        <Category id='purchase_conditions' name={localize('Purchase conditions')}>\n            <Block type='before_purchase' />\n            <Block type='purchase' />\n        </Category>\n        <Category id='sell_conditions' name={localize('Sell conditions (optional)')}>\n            <Block type='during_purchase' />\n            <Block type='sell_at_market' />\n        </Category>\n        <Category id='trade_results' name={localize('Restart trading conditions')}>\n            <Block type='after_purchase' />\n            <Block type='trade_again' />\n        </Category>\n\n        <Category id='analysis' name={localize('Analysis')}>\n            <Category id='indicators' name={localize('Indicators')}>\n                <Block type='sma_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='smaa_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='bb_statement'>\n                    <Field name='BBRESULT_LIST'>0</Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='std_dev_multiplier_up' deletable='false' movable='false'>\n                                            <Value name='UPMULTIPLIER'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>5</Field>\n                                                </Shadow>\n                                            </Value>\n                                            <Next>\n                                                <Block type='std_dev_multiplier_down'>\n                                                    <Value name='DOWNMULTIPLIER'>\n                                                        <Shadow type='math_number'>\n                                                            <Field name='NUM'>5</Field>\n                                                        </Shadow>\n                                                    </Value>\n                                                </Block>\n                                            </Next>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='bba_statement'>\n                    <Field name='BBRESULT_LIST'>0</Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='std_dev_multiplier_up' deletable='false' movable='false'>\n                                            <Value name='UPMULTIPLIER'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>5</Field>\n                                                </Shadow>\n                                            </Value>\n                                            <Next>\n                                                <Block type='std_dev_multiplier_down'>\n                                                    <Value name='DOWNMULTIPLIER'>\n                                                        <Shadow type='math_number'>\n                                                            <Field name='NUM'>5</Field>\n                                                        </Shadow>\n                                                    </Value>\n                                                </Block>\n                                            </Next>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='ema_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='emaa_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='rsi_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='rsia_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='macda_statement'>\n                    <Field name='MACDFIELDS_LIST'>1</Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='fast_ema_period' deletable='false' movable='false'>\n                                    <Value name='FAST_EMA_PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>12</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='slow_ema_period' deletable='false' movable='false'>\n                                            <Value name='SLOW_EMA_PERIOD'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>26</Field>\n                                                </Shadow>\n                                            </Value>\n                                            <Next>\n                                                <Block type='signal_ema_period' deletable='false' movable='false'>\n                                                    <Value name='SIGNAL_EMA_PERIOD'>\n                                                        <Shadow type='math_number'>\n                                                            <Field name='NUM'>9</Field>\n                                                        </Shadow>\n                                                    </Value>\n                                                </Block>\n                                            </Next>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Category>\n\n            <Category name={localize('Tick and candle analysis')} id='tick_analysis'>\n                <Block type='tick_analysis' />\n                <Block type='tick' />\n                <Block type='last_digit' />\n                <Block type='ticks' />\n                <Block type='lastDigitList' />\n                <Block type='check_direction' />\n                <Block type='is_candle_black' />\n                <Block type='read_ohlc'>\n                    <Field name='OHLCFIELD_LIST'>open</Field>\n                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                    <Value name='CANDLEINDEX'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='read_ohlc_obj' />\n                <Block type='ohlc_values' />\n                <Block type='ohlc_values_in_list' />\n                <Block type='get_ohlc'>\n                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                    <Value name='CANDLEINDEX'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='ohlc' />\n            </Category>\n\n            <Category name={localize('Contract')} id='contract_details'>\n                <Block type='contract_check_result' />\n                <Block type='read_details' />\n                <Block type='sell_price' />\n                <Block type='check_sell' />\n                <Block type='payout' />\n                <Block type='ask_price' />\n            </Category>\n\n            <Category name={localize('Stats')} id='stats'>\n                <Block type='balance' />\n                <Block type='total_profit' />\n                <Block type='total_runs' />\n            </Category>\n        </Category>\n\n        <Category id='utility' name={localize('Utility')}>\n            <Category name={localize('Custom functions')} id='custom_functions' dynamic='PROCEDURE' />\n\n            <Category name={localize('Variables')} id='variables' dynamic='VARIABLE' />\n\n            <Category name={localize('Notifications')} id='notifications'>\n                <Block type='text_print'>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_prompt_ext'>\n                    <Field name='TYPE'>TEXT</Field>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='notify'>\n                    <Field name='NOTIFICATION_TYPE'>success</Field>\n                    <Value name='MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='notify_telegram'>\n                    <Value name='TELEGRAM_ACCESS_TOKEN'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                    </Value>\n                    <Value name='TELEGRAM_CHAT_ID'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                    </Value>\n                    <Value name='TELEGRAM_MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Category>\n\n            <Category name={localize('Time')} id='time'>\n                <Block type='epoch' />\n                <Block type='timeout' />\n                <Block type='totimestamp'>\n                    <Value name='DATETIME'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>yyyy-mm-dd hh:mm:ss</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='todatetime'>\n                    <Value name='TIMESTAMP'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>0</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Category>\n\n            <Category name={localize('Math')} id='math'>\n                <Block type='math_number' />\n                <Block type='math_arithmetic'>\n                    <Field name='OP'>ADD</Field>\n                    <Value name='A'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='B'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_single'>\n                    <Field name='OP'>ROOT</Field>\n                    <Value name='NUM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>9</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_trig'>\n                    <Field name='OP'>SIN</Field>\n                    <Value name='NUM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>45</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_constant' />\n                <Block type='math_number_property'>\n                    <Mutation divisor_input='false' />\n                    <Field name='PROPERTY'>EVEN</Field>\n                    <Value name='NUMBER_TO_CHECK'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>0</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_change'>\n                    <Field name='VAR' variabletype=''>\n                        item\n                    </Field>\n                    <Value name='DELTA'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_on_list' />\n                <Block type='math_round'>\n                    <Field name='OP'>ROUND</Field>\n                    <Value name='NUM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>3.1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_modulo'>\n                    <Value name='DIVIDEND'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>64</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='DIVISOR'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>10</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_constrain'>\n                    <Value name='Value'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>50</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='LOW'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='HIGH'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>100</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_random_int'>\n                    <Value name='FROM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='TO'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>100</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_random_float' />\n            </Category>\n\n            <Category name={localize('Text')} id='text'>\n                <Block type='text'>\n                    <Field name='TEXT'>abc</Field>\n                </Block>\n                <Block type='text_join'>\n                    <Field name='VARIABLE' variabletype=''>\n                        text\n                    </Field>\n                    <Statement name='STACK'>\n                        <Block type='text_statement' movable='false'>\n                            <Value name='TEXT'>\n                                <Shadow type='text'>\n                                    <Field name='TEXT'>abc</Field>\n                                </Shadow>\n                            </Value>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='text_append'>\n                    <Field name='VAR' variabletype=''>\n                        text\n                    </Field>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_length'>\n                    <Value name='Value'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_isEmpty'>\n                    <Value name='Value'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_indexOf'>\n                    <Field name='END'>FIRST</Field>\n                    <Value name='Value'>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                text\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='FIND'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_charAt'>\n                    <Mutation at='true' />\n                    <Field name='WHERE'>FROM_START</Field>\n                    <Value name='Value'>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                item\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='AT'>\n                        <Shadow type='math_number_positive'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_getSubstring'>\n                    <Mutation at1='true' at2='true' />\n                    <Field name='WHERE1'>FROM_START</Field>\n                    <Field name='WHERE2'>FROM_START</Field>\n                    <Value name='STRING'>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                text\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='AT1'>\n                        <Shadow type='math_number_positive'>\n                            <Field name='NUM'>0</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='AT2'>\n                        <Shadow type='math_number_positive'>\n                            <Field name='NUM'>2</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_changeCase'>\n                    <Field name='CASE'>UPPERCASE</Field>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_trim'>\n                    <Field name='MODE'>BOTH</Field>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Category>\n\n            <Category name={localize('Logic')} id='logic'>\n                <Block type='controls_if' />\n                <Block type='logic_compare' />\n                <Block type='logic_operation' />\n                <Block type='logic_negate' />\n                <Block type='logic_boolean' />\n                <Block type='logic_null' />\n                <Block type='logic_ternary' />\n            </Category>\n\n            <Category name={localize('Lists')} id='lists'>\n                <Block type='lists_create_with'>\n                    <Field name='VARIABLE' variabletype=''>\n                        list\n                    </Field>\n                    <Statement name='STACK'>\n                        <Block type='lists_statement' movable='false'>\n                            <Next>\n                                <Block type='lists_statement' movable='false' />\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='lists_repeat'>\n                    <Value name='NUM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>5</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='lists_length' />\n                <Block type='lists_isEmpty' />\n                <Block type='lists_indexOf' />\n                <Block type='lists_getIndex' />\n                <Block type='lists_setIndex' />\n                <Block type='lists_getSublist' />\n                <Block type='lists_split'>\n                    <Mutation mode='SPLIT' />\n                    <Field name='MODE'>SPLIT</Field>\n                    <Value name='DELIM'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>,</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='lists_sort' />\n            </Category>\n\n            <Category name={localize('Loops')} id='loops'>\n                <Block type='controls_repeat' />\n                <Block type='controls_repeat_ext' />\n                <Block type='controls_whileUntil' />\n                <Block type='controls_for' />\n                <Block type='controls_forEach' />\n                <Block type='controls_flow_statements' />\n            </Category>\n\n            <Category name={localize('Miscellaneous')} id='misc'>\n                <Block type='loader' />\n                <Block type='block_holder' />\n                <Block type='console'>\n                    <Value name='MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Category>\n        </Category>\n\n        <Examples id='examples'>\n            <Example id='sell_available'>\n                <Block type='during_purchase'>\n                    <Statement name='DURING_PURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='check_sell' />\n                            </Value>\n                            <Statement name='DO0'>\n                                <Block type='sell_at_market' />\n                            </Statement>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='trade_again'>\n                <Block type='after_purchase'>\n                    <Statement name='AFTERPURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>EQ</Field>\n                                    <Value name='A'>\n                                        <Block type='total_profit' />\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                target_profit\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='sma_block_example'>\n                <Block type='sma_statement'>\n                    <Field name='VARIABLE' variabletype=''>\n                        sma\n                    </Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST'>\n                                <Block type='ohlc_values'>\n                                    <Field name='OHLCFIELD_LIST'>open</Field>\n                                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                                </Block>\n                            </Value>\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='sma_array'>\n                <Block type='smaa_statement'>\n                    <Field name='VARIABLE' variabletype=''>\n                        smaa\n                    </Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='sma_block_example_1'>\n                <Block type='sma_statement'>\n                    <Field name='VARIABLE' variabletype=''>\n                        sma\n                    </Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST'>\n                                <Block type='ticks' />\n                            </Value>\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='in_candle_list_read'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        op\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='read_ohlc'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                            <Value name='CANDLEINDEX'>\n                                <Shadow type='math_number'>\n                                    <Field name='NUM'>1</Field>\n                                </Shadow>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='read_candle_value'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        op\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='read_ohlc_obj'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Value name='OHLCOBJ'>\n                                <Block type='read_ohlc'>\n                                    <Field name='OHLCFIELD_LIST'>open</Field>\n                                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                                    <Value name='CANDLEINDEX'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>1</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='candle_list'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        candle_list\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='ohlc_values'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='candle_list_1'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        cl\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='ohlc_values_in_list'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Value name='OHLCLIST'>\n                                <Block type='ohlc'>\n                                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='get_candle'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        candle_open_price\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='read_ohlc_obj'>\n                            <Field name='OHLCFIELD_LIST'>epoch</Field>\n                            <Value name='OHLCOBJ'>\n                                <Block type='get_ohlc'>\n                                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                                    <Value name='CANDLEINDEX'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>2</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='check_result'>\n                <Block type='after_purchase'>\n                    <Statement name='AFTERPURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='contract_check_result'>\n                                    <Field name='CHECK_RESULT'>win</Field>\n                                </Block>\n                            </Value>\n                            <Statement name='DO0'>\n                                <Block type='trade_again' />\n                            </Statement>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='sell_pl'>\n                <Block type='during_purchase'>\n                    <Statement name='DURING_PURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='check_sell' />\n                            </Value>\n                            <Statement name='DO0'>\n                                <Block type='controls_if'>\n                                    <Value name='IF0'>\n                                        <Block type='logic_compare'>\n                                            <Field name='OP'>EQ</Field>\n                                            <Value name='A'>\n                                                <Block type='sell_price' />\n                                            </Value>\n                                            <Value name='B'>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        stake\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                    <Statement name='DO0'>\n                                        <Block type='sell_at_market' />\n                                    </Statement>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='if-return'>\n                <Block type='procedures_defreturn'>\n                    <Mutation>\n                        <Arg name='x' />\n                    </Mutation>\n                    <Field name='NAME'>do something</Field>\n                    <Statement name='STACK'>\n                        <Block type='procedures_ifreturn'>\n                            <Mutation value='1' />\n                            <Value name='CONDITION'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>EQ</Field>\n                                    <Value name='A'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Value name='VALUE'>\n                                <Block type='text'>\n                                    <Field name='TEXT'>x must be positive or zero</Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Statement>\n                    <Value name='RETURN'>\n                        <Block type='math_single'>\n                            <Field name='OP'>ROOT</Field>\n                            <Value name='NUM'>\n                                <Shadow type='math_number'>\n                                    <Field name='NUM'>9</Field>\n                                </Shadow>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        x\n                                    </Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='notify_telegram'>\n                <Block type='notify_telegram'>\n                    <Value name='TELEGRAM_ACCESS_TOKEN'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                access_token\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='TELEGRAM_CHAT_ID'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                chat_id\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='TELEGRAM_MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>Enjoy!</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='epoch'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        candle\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='read_ohlc'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                            <Value name='CANDLEINDEX'>\n                                <Shadow type='math_number'>\n                                    <Field name='NUM'>1</Field>\n                                </Shadow>\n                            </Value>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='variables_set'>\n                            <Field name='VAR' variabletype=''>\n                                Open Time\n                            </Field>\n                            <Value name='VALUE'>\n                                <Block type='read_ohlc_obj'>\n                                    <Field name='OHLCFIELD_LIST'>epoch</Field>\n                                    <Value name='OHLCOBJ'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                candle\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Next>\n                                <Block type='variables_set'>\n                                    <Field name='VAR' variabletype=''>\n                                        Open Time\n                                    </Field>\n                                    <Value name='VALUE'>\n                                        <Block type='math_arithmetic'>\n                                            <Field name='OP'>MINUS</Field>\n                                            <Value name='A'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>1</Field>\n                                                </Shadow>\n                                                <Block type='epoch' />\n                                            </Value>\n                                            <Value name='B'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>1</Field>\n                                                </Shadow>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        Open Time\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                    <Next>\n                                        <Block type='controls_if'>\n                                            <Value name='IF0'>\n                                                <Block type='logic_compare'>\n                                                    <Field name='OP'>GTE</Field>\n                                                    <Value name='A'>\n                                                        <Block type='variables_get'>\n                                                            <Field name='VAR' variabletype=''>\n                                                                Time Since Candle Opened\n                                                            </Field>\n                                                        </Block>\n                                                    </Value>\n                                                    <Value name='B'>\n                                                        <Block type='math_number'>\n                                                            <Field name='NUM'>30</Field>\n                                                        </Block>\n                                                    </Value>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='totimestamp'>\n                <Block type='before_purchase'>\n                    <Statement name='BEFOREPURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>EQ</Field>\n                                    <Value name='A'>\n                                        <Block type='epoch' />\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='totimestamp'>\n                                            <Value name='DATETIME'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>1957-08-31 00:00:00</Field>\n                                                </Shadow>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Statement name='DO0'>\n                                <Block type='purchase'>\n                                    <Field name='PURCHASE_LIST'>CALL</Field>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='todatetime'>\n                <Block type='notify'>\n                    <Field name='NOTIFICATION_TYPE'>success</Field>\n                    <Field name='NOTIFICATION_SOUND'>silent</Field>\n                    <Value name='MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                        <Block type='todatetime'>\n                            <Value name='TIMESTAMP'>\n                                <Shadow type='math_number'>\n                                    <Field name='NUM'>0</Field>\n                                </Shadow>\n                                <Block type='epoch' />\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='constrain'>\n                <Block type='math_constrain'>\n                    <Value name='VALUE'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>5</Field>\n                        </Block>\n                    </Value>\n                    <Value name='LOW'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>10</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='HIGH'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>20</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='controls_if'>\n                <Block type='controls_if'>\n                    <Mutation elseif='1' else='1' />\n                    <Value name='IF0'>\n                        <Block type='logic_compare'>\n                            <Field name='OP'>EQ</Field>\n                            <Value name='A'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        var1\n                                    </Field>\n                                </Block>\n                            </Value>\n                            <Value name='B'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        var2\n                                    </Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                    <Value name='IF1'>\n                        <Block type='logic_compare'>\n                            <Field name='OP'>EQ</Field>\n                            <Value name='A'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        var3\n                                    </Field>\n                                </Block>\n                            </Value>\n                            <Value name='B'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        var4\n                                    </Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='compare_logic'>\n                <Block type='logic_compare'>\n                    <Field name='OP'>EQ</Field>\n                </Block>\n            </Example>\n            <Example id='compare_logic_1'>\n                <Block type='logic_operation'>\n                    <Field name='OP'>AND</Field>\n                </Block>\n            </Example>\n            <Example id='repeat_while'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        x\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>0</Field>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='controls_whileUntil'>\n                            <Field name='MODE'>WHILE</Field>\n                            <Value name='BOOL'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>LTE</Field>\n                                    <Value name='A'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Statement name='DO'>\n                                <Block type='math_change'>\n                                    <Field name='VAR' variabletype=''>\n                                        x\n                                    </Field>\n                                    <Value name='DELTA'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>1</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='notify'>\n                                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                            <Value name='MESSAGE'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>abc</Field>\n                                                </Shadow>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        x\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='repeat_until'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        x\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>20</Field>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='controls_whileUntil'>\n                            <Field name='MODE'>UNTIL</Field>\n                            <Value name='BOOL'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>EQ</Field>\n                                    <Value name='A'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Statement name='DO'>\n                                <Block type='math_change'>\n                                    <Field name='VAR' variabletype=''>\n                                        x\n                                    </Field>\n                                    <Value name='DELTA'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>-1</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='notify'>\n                                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                            <Value name='MESSAGE'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>abc</Field>\n                                                </Shadow>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        x\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='controls_for'>\n                <Block type='controls_for'>\n                    <Field name='VAR' variabletype=''>\n                        i\n                    </Field>\n                    <Value name='FROM'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>0</Field>\n                        </Block>\n                    </Value>\n                    <Value name='TO'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>10</Field>\n                        </Block>\n                    </Value>\n                    <Value name='BY'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>2</Field>\n                        </Block>\n                    </Value>\n                    <Statement name='DO'>\n                        <Block type='notify'>\n                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                            <Value name='MESSAGE'>\n                                <Shadow type='text'>\n                                    <Field name='TEXT'>abc</Field>\n                                </Shadow>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        i\n                                    </Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='controls_forEach'>\n                <Block type='lists_create_with'>\n                    <Field name='VARIABLE'>list</Field>\n                    <Statement name='STACK'>\n                        <Block type='lists_statement'>\n                            <Value name='VALUE'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        item1\n                                    </Field>\n                                </Block>\n                            </Value>\n                            <Next>\n                                <Block type='lists_statement'>\n                                    <Value name='VALUE'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                item2\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                    <Next>\n                                        <Block type='lists_statement'>\n                                            <Value name='VALUE'>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        item3\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                    <Next>\n                        <Block type='controls_forEach'>\n                            <Field name='VAR' variabletype=''>\n                                i\n                            </Field>\n                            <Value name='LIST'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        list\n                                    </Field>\n                                </Block>\n                            </Value>\n                            <Statement name='DO'>\n                                <Block type='notify'>\n                                    <Field name='NOTIFICATION_TYPE'>success</Field>\n                                    <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                    <Value name='MESSAGE'>\n                                        <Shadow type='text'>\n                                            <Field name='TEXT'>abc</Field>\n                                        </Shadow>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                i\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='break_out'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        x\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='logic_boolean'>\n                            <Field name='BOOL'>TRUE</Field>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='controls_repeat'>\n                            <Field name='TIMES'>10</Field>\n                            <Statement name='DO'>\n                                <Block type='controls_if'>\n                                    <Value name='IF0'>\n                                        <Block type='logic_negate'>\n                                            <Value name='BOOL'>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        x\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                    <Statement name='DO0'>\n                                        <Block type='controls_flow_statements'>\n                                            <Field name='FLOW'>BREAK</Field>\n                                        </Block>\n                                    </Statement>\n                                    <Next>\n                                        <Block type='notify'>\n                                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                            <Value name='MESSAGE'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>abc</Field>\n                                                </Shadow>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='continue'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        x\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='logic_boolean'>\n                            <Field name='BOOL'>FALSE</Field>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='controls_repeat'>\n                            <Field name='TIMES'>10</Field>\n                            <Statement name='DO'>\n                                <Block type='controls_if'>\n                                    <Value name='IF0'>\n                                        <Block type='logic_negate'>\n                                            <Value name='BOOL'>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        x\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                    <Statement name='DO0'>\n                                        <Block type='variables_set'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                            <Value name='VALUE'>\n                                                <Block type='logic_boolean'>\n                                                    <Field name='BOOL'>TRUE</Field>\n                                                </Block>\n                                            </Value>\n                                            <Next>\n                                                <Block type='controls_flow_statements'>\n                                                    <Field name='FLOW'>CONTINUE</Field>\n                                                </Block>\n                                            </Next>\n                                        </Block>\n                                    </Statement>\n                                    <Next>\n                                        <Block type='notify'>\n                                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                            <Value name='MESSAGE'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>abc</Field>\n                                                </Shadow>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n        </Examples>\n    </Xml>\n);\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Icon, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from '../../../../stores/useDBotStore';\nimport ToolbarButton from '../toolbar/toolbar-button';\nimport SearchBox from './search-box';\nimport { ToolboxItems } from './toolbox-items';\n\nconst Toolbox = observer(() => {\n    const { toolbox, flyout, quick_strategy } = useDBotStore();\n    const {\n        hasSubCategory,\n        is_search_loading,\n        onMount,\n        onSearch,\n        onSearchBlur,\n        onSearchClear,\n        onSearchKeyUp,\n        onToolboxItemClick,\n        onToolboxItemExpand,\n        onUnmount,\n        sub_category_index,\n        toolbox_dom,\n    } = toolbox;\n\n    const { setFormVisibility } = quick_strategy;\n    const { setVisibility, selected_category } = flyout;\n\n    const toolbox_ref = React.useRef(ToolboxItems);\n    const [is_open, setOpen] = React.useState(true);\n\n    React.useEffect(() => {\n        onMount(toolbox_ref);\n        return () => onUnmount();\n    }, []);\n\n    const handleQuickStrategyOpen = () => {\n        setFormVisibility(true);\n    };\n\n    if (!isMobile()) {\n        return (\n            <div className='dashboard__toolbox' data-testid='dashboard__toolbox'>\n                <ToolbarButton\n                    popover_message={localize('Click here to start building your Deriv Bot.')}\n                    button_id='db-toolbar__get-started-button'\n                    button_classname='toolbar__btn toolbar__btn--icon toolbar__btn--start'\n                    buttonOnClick={handleQuickStrategyOpen}\n                    button_text={localize('Quick strategy')}\n                />\n                <div id='gtm-toolbox' className='db-toolbox__content'>\n                    <div className='db-toolbox__header'>\n                        <div\n                            className='db-toolbox__title'\n                            data-testid='db-toolbox__title'\n                            onClick={() => {\n                                setOpen(!is_open);\n                                setVisibility(false);\n                            }}\n                        >\n                            {localize('Blocks menu')}\n                            <span\n                                className={classNames('db-toolbox__title__chevron', {\n                                    'db-toolbox__title__chevron--active': is_open,\n                                })}\n                            >\n                                <Icon icon='IcChevronDownBold' />\n                            </span>\n                        </div>\n                    </div>\n                    <div\n                        className={classNames('db-toolbox__content-wrapper', { active: is_open })}\n                        data-testid='db-toolbox__content-wrapper'\n                    >\n                        <SearchBox\n                            is_search_loading={is_search_loading}\n                            onSearch={onSearch}\n                            onSearchBlur={onSearchBlur}\n                            onSearchClear={onSearchClear}\n                            onSearchKeyUp={onSearchKeyUp}\n                        />\n                        <div className='db-toolbox__category-menu'>\n                            {toolbox_dom &&\n                                Array.from(toolbox_dom.childNodes as HTMLElement[]).map((category, index) => {\n                                    if (category.tagName.toUpperCase() === 'CATEGORY') {\n                                        const has_sub_category = hasSubCategory(category.children);\n                                        const is_sub_category_open = sub_category_index.includes(index);\n                                        return (\n                                            <div\n                                                key={`db-toolbox__row--${category.getAttribute('id')}`}\n                                                className={classNames('db-toolbox__row', {\n                                                    'db-toolbox__row--active':\n                                                        selected_category?.getAttribute('id') === category?.id,\n                                                })}\n                                            >\n                                                <div\n                                                    className='db-toolbox__item'\n                                                    onClick={() => {\n                                                        // eslint-disable-next-line no-unused-expressions\n                                                        has_sub_category\n                                                            ? onToolboxItemExpand(index)\n                                                            : onToolboxItemClick(category);\n                                                    }}\n                                                >\n                                                    <div className='db-toolbox__category-text'>\n                                                        <div className='db-toolbox__label'>\n                                                            {localize(category.getAttribute('name') as string)}\n                                                        </div>\n                                                        {has_sub_category && (\n                                                            <div\n                                                                className={classNames('db-toolbox__category-arrow', {\n                                                                    'db-toolbox__category-arrow--active':\n                                                                        is_sub_category_open,\n                                                                })}\n                                                            >\n                                                                <Icon icon='IcChevronDownBold' />\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                </div>\n                                                {has_sub_category &&\n                                                    is_sub_category_open &&\n                                                    (Array.from(category.childNodes) as HTMLElement[]).map(\n                                                        subCategory => {\n                                                            return (\n                                                                <div\n                                                                    key={`db-toolbox__sub-category-row--${subCategory.getAttribute(\n                                                                        'id'\n                                                                    )}`}\n                                                                    className={classNames(\n                                                                        'db-toolbox__sub-category-row',\n                                                                        {\n                                                                            'db-toolbox__sub-category-row--active':\n                                                                                selected_category?.getAttribute(\n                                                                                    'id'\n                                                                                ) === subCategory?.id,\n                                                                        }\n                                                                    )}\n                                                                    onClick={() => {\n                                                                        onToolboxItemClick(subCategory);\n                                                                    }}\n                                                                >\n                                                                    <Text size='xxs'>\n                                                                        {localize(\n                                                                            subCategory.getAttribute('name') as string\n                                                                        )}\n                                                                    </Text>\n                                                                </div>\n                                                            );\n                                                        }\n                                                    )}\n                                            </div>\n                                        );\n                                    }\n                                    return null;\n                                })}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n    return null;\n});\n\nexport default Toolbox;\n","import Toolbox from './toolbox';\nimport './toolbox.scss';\n\nexport default Toolbox;\n","import React from 'react';\nimport { observer } from '@deriv/stores';\nimport Flyout from 'Components/flyout';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport StopBotModal from '../dashboard-component/load-bot-preview/stop-bot-modal';\nimport Toolbar from './toolbar';\nimport Toolbox from './toolbox';\nimport './workspace.scss';\n\nconst WorkspaceWrapper = observer(() => {\n    const { blockly_store } = useDBotStore();\n    const { onMount, onUnmount, is_loading } = blockly_store;\n\n    React.useEffect(() => {\n        onMount();\n        return () => {\n            onUnmount();\n        };\n    }, []);\n\n    if (is_loading) return null;\n\n    if (Blockly?.derivWorkspace)\n        return (\n            <React.Fragment>\n                <Toolbox />\n                <Toolbar />\n                <Flyout />\n                <StopBotModal />\n            </React.Fragment>\n        );\n\n    return null;\n});\n\nexport default WorkspaceWrapper;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@deriv/stores';\nimport { Localize } from '@deriv/translations';\nimport BotSnackbar from 'Components/bot-snackbar';\nimport { useDBotStore } from '../../../stores/useDBotStore';\nimport LoadModal from '../../load-modal';\nimport QuickStrategy1 from '../../quick-strategy';\nimport SaveModal from '../dashboard-component/load-bot-preview/save-modal';\nimport BotBuilderTourHandler from '../dbot-tours/bot-builder-tour';\nimport WorkspaceWrapper from './workspace-wrapper';\n\nconst BotBuilder = observer(() => {\n    const { dashboard, app, run_panel, toolbar, quick_strategy } = useDBotStore();\n    const { active_tab, active_tour, is_preview_on_popup } = dashboard;\n    const { is_open } = quick_strategy;\n    const { is_running } = run_panel;\n    const is_blockly_listener_registered = React.useRef(false);\n    const [show_snackbar, setShowSnackbar] = React.useState(false);\n\n    const { onMount, onUnmount } = app;\n    const el_ref = React.useRef<HTMLInputElement | null>(null);\n\n    React.useEffect(() => {\n        onMount();\n        return () => onUnmount();\n    }, [onMount, onUnmount]);\n\n    const handleBlockChangeOnBotRun = (e: Event) => {\n        const { is_reset_button_clicked, setResetButtonState } = toolbar;\n        if (e.type !== 'ui' && !is_reset_button_clicked) {\n            setShowSnackbar(true);\n            removeBlockChangeListener();\n        } else if (is_reset_button_clicked) {\n            setResetButtonState(false);\n            removeBlockChangeListener();\n        }\n    };\n\n    const removeBlockChangeListener = () => {\n        is_blockly_listener_registered.current = false;\n        window.Blockly?.derivWorkspace?.removeChangeListener(handleBlockChangeOnBotRun);\n    };\n\n    React.useEffect(() => {\n        const workspace = window.Blockly?.derivWorkspace;\n        if (workspace && is_running && !is_blockly_listener_registered.current) {\n            is_blockly_listener_registered.current = true;\n            workspace.addChangeListener(handleBlockChangeOnBotRun);\n        } else {\n            setShowSnackbar(false);\n            removeBlockChangeListener();\n        }\n\n        return () => {\n            if (workspace && is_blockly_listener_registered.current) {\n                removeBlockChangeListener();\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [is_running]);\n\n    return (\n        <>\n            <BotSnackbar\n                is_open={show_snackbar}\n                message={<Localize i18n_default_text='Changes you make will not affect your running bot.' />}\n                handleClose={() => setShowSnackbar(false)}\n            />\n            <div\n                className={classNames('bot-builder', {\n                    'bot-builder--active': active_tab === 1 && !is_preview_on_popup,\n                    'bot-builder--inactive': is_preview_on_popup,\n                    'bot-builder--tour-active': active_tour,\n                })}\n            >\n                {is_preview_on_popup ? null : (\n                    <div\n                        id='scratch_div'\n                        ref={el_ref}\n                        style={{\n                            width: 'calc(100vw - 3.2rem)',\n                            height: 'var(--bot-content-height)',\n                        }}\n                    >\n                        <WorkspaceWrapper />\n                    </div>\n                )}\n            </div>\n            {active_tab === 1 && <BotBuilderTourHandler />}\n            {/* removed this outside from toolbar becuase it needs to loaded seperately without dependency */}\n            <LoadModal />\n            <SaveModal />\n            {is_open && <QuickStrategy1 />}\n        </>\n    );\n});\n\nexport default BotBuilder;\n","import BotBuilder from './bot-builder';\nimport './workspace.scss';\n\nexport default BotBuilder;\n","import React from 'react';\nimport { Dialog, Icon, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst BotStopped = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { is_web_socket_intialised } = dashboard;\n    const onClickClose = () => {\n        location.reload();\n    };\n    return (\n        <>\n            <Dialog\n                is_visible={!is_web_socket_intialised}\n                is_mobile_full_width\n                className={'dc-dialog bot-stopped-dialog'}\n                cancel_button_text={localize('Go to Reports')}\n                confirm_button_text={localize('Back to Bot')}\n                onCancel={() => location.replace('reports/positions')}\n                onConfirm={() => location.reload()}\n            >\n                <div className='dc-dialog__content__header'>\n                    <Text data-testid='data-title' weight='bold' as='p' align='left' size='s' color='prominent'>\n                        {localize(\"You're back online\")}\n                    </Text>\n                    <div data-testid='data-close-button' onClick={onClickClose}>\n                        <Icon icon='IcCross' />\n                    </div>\n                </div>\n                <Text as='p' align='left' size='xs' color='prominent'>\n                    {localize(\n                        'The bot has stopped, but your trade may still be running. You can check it on the Reports page.'\n                    )}\n                </Text>\n            </Dialog>\n        </>\n    );\n});\n\nexport default BotStopped;\n","import React, { PropsWithChildren } from 'react';\nimport { Rnd } from 'react-rnd';\nimport { CSSTransition } from 'react-transition-group';\nimport { Icon } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\ntype DraggableProps = {\n    bounds?: string | Element;\n    dragHandleClassName?: string;\n    enableResizing?: boolean;\n    height?: number | string;\n    header_title: string;\n    is_visible: boolean;\n    minWidth?: number | string;\n    onCloseDraggable: () => void;\n    width?: number | string;\n    xaxis?: number;\n    yaxis?: number;\n};\nconst PARENT_CLASS = 'react-rnd-wrapper';\n\nexport default function Draggable({\n    bounds = 'window',\n    children,\n    dragHandleClassName,\n    enableResizing = false,\n    header_title,\n    height = 'fit-content',\n    is_visible,\n    minWidth,\n    onCloseDraggable,\n    width = 'fit-content',\n    xaxis = 0,\n    yaxis = 0,\n}: PropsWithChildren<DraggableProps>) {\n    return is_visible ? (\n        <Rnd\n            bounds={bounds}\n            className='react-rnd-wrapper'\n            data-testid='react-rnd-wrapper'\n            default={{\n                x: xaxis,\n                y: yaxis,\n                width,\n                height,\n            }}\n            dragHandleClassName={dragHandleClassName}\n            enableResizing={enableResizing}\n            minHeight={height}\n            minWidth={minWidth}\n            onDragStart={e => {\n                // on responsive devices touch event is not triggering the close button action\n                // need to handle it manually\n                const parentElement = (e?.target as HTMLDivElement)?.parentElement;\n                if (parentElement?.role === 'button' || parentElement?.tagName === 'svg') {\n                    onCloseDraggable();\n                }\n            }}\n        >\n            <CSSTransition\n                appear\n                in={is_visible}\n                timeout={50}\n                classNames={{\n                    appear: 'dc-dialog__wrapper--enter',\n                    enter: 'dc-dialog__wrapper--enter',\n                    enterDone: 'dc-dialog__wrapper--enter-done',\n                    exit: 'dc-dialog__wrapper--exit',\n                }}\n                unmountOnExit\n            >\n                <>\n                    <div className={`${PARENT_CLASS}-header`}>\n                        <div className={`${PARENT_CLASS}-header__title`}>{localize(header_title)}</div>\n                        <div\n                            role='button'\n                            className={`${PARENT_CLASS}-header__close`}\n                            data-testid='react-rnd-close-modal'\n                            onClick={onCloseDraggable}\n                        >\n                            <Icon icon='IcCross' />\n                        </div>\n                    </div>\n                    {children}\n                </>\n            </CSSTransition>\n        </Rnd>\n    ) : null;\n}\n","import Draggable from './draggable';\nimport './draggable.scss';\n\nexport default Draggable;\n","import React, { ReactElement } from 'react';\nimport classNames from 'classnames';\nimport ContentLoader from 'react-content-loader';\nimport { getContractTypeName } from '@deriv/bot-skeleton';\nimport { Icon, IconTradeTypes, Popover } from '@deriv/components';\nimport { convertDateFormat } from '@deriv/shared';\nimport { transaction_elements } from 'Constants/transactions';\nimport { TColumn, TDesktopTransactionTable, TTableCell } from './transaction-details.types';\n\nconst PARENT_CLASS = 'transaction-details-modal-desktop';\n\nconst TableCell = ({ label, extra_classes = [], loader = false }: TTableCell) => {\n    return (\n        <div className={classNames(`${PARENT_CLASS}__table-cell`, ...extra_classes)}>\n            {loader ? <CellLoader /> : label}\n        </div>\n    );\n};\n\nconst TableHeader = ({ columns }: { columns: TColumn[] }) => (\n    <div className={classNames(`${PARENT_CLASS}__table-row`, `${PARENT_CLASS}__table-header`)}>\n        {columns?.map(column => (\n            <TableCell\n                key={column.key}\n                extra_classes={[column.extra_class ? `${PARENT_CLASS}__table-cell${column.extra_class}` : '']}\n                label={column.label}\n                loader={false}\n            />\n        ))}\n    </div>\n);\n\nconst IconWrapper = ({ message, icon }: { message: string; icon: ReactElement }) => (\n    <div className={`${PARENT_CLASS}__icon-wrapper`}>\n        <Popover alignment='left' message={message} zIndex={'9999'}>\n            {icon}\n        </Popover>\n    </div>\n);\n\nconst CellLoader = () => (\n    <ContentLoader\n        className='transactions__loader-text'\n        data-testid='transaction_details_table_cell_loader'\n        height={10}\n        width={30}\n        speed={3}\n        backgroundColor={'var(--general-section-2)'}\n        foregroundColor={'var(--general-hover)'}\n    >\n        <rect x='0' y='0' rx='0' ry='0' width='60' height='12' />\n    </ContentLoader>\n);\n\nexport default function DesktopTransactionTable({\n    result,\n    result_columns,\n    transactions,\n    transaction_columns,\n    account,\n    balance,\n}: TDesktopTransactionTable) {\n    return (\n        <div data-testid='transaction_details_tables'>\n            <div\n                className={classNames(\n                    `${PARENT_CLASS}__table-container`,\n                    `${PARENT_CLASS}__table-container__top-table`\n                )}\n            >\n                <TableHeader columns={transaction_columns} />\n                {transactions?.map(transaction => {\n                    const { data, type } = transaction;\n                    if (type === transaction_elements.CONTRACT) {\n                        return (\n                            <div className={`${PARENT_CLASS}__table-row`} key={data?.transaction_ids?.buy}>\n                                <TableCell\n                                    label={\n                                        data?.date_start &&\n                                        convertDateFormat(\n                                            data?.date_start,\n                                            'YYYY-M-D HH:mm:ss [GMT]',\n                                            'YYYY-MM-DD HH:mm:ss [GMT]'\n                                        )\n                                    }\n                                    extra_classes={[`${PARENT_CLASS}__table-cell--grow-big`]}\n                                />\n                                <TableCell\n                                    label={data?.transaction_ids?.buy}\n                                    extra_classes={[`${PARENT_CLASS}__table-cell--grow-mid`]}\n                                />\n                                <TableCell\n                                    label={\n                                        <IconWrapper\n                                            message={data?.display_name}\n                                            icon={<Icon icon={`IcUnderlying${data?.underlying}`} size={24} />}\n                                        />\n                                    }\n                                />\n                                <TableCell\n                                    label={\n                                        <IconWrapper\n                                            message={getContractTypeName(data)}\n                                            icon={<IconTradeTypes type={data?.contract_type} size={24} />}\n                                        />\n                                    }\n                                />\n                                <TableCell label={data?.entry_tick} loader={!data?.entry_tick} />\n                                <TableCell label={data?.exit_tick} loader={!data.exit_tick} />\n                                <TableCell label={Math.abs(data?.buy_price ?? 0).toFixed(2)} />\n                                <TableCell\n                                    label={\n                                        <div\n                                            className={classNames({\n                                                [`${PARENT_CLASS}__profit--win`]: data?.profit > 0,\n                                                [`${PARENT_CLASS}__profit--loss`]: data?.profit < 0,\n                                            })}\n                                        >\n                                            {Math.abs(data?.profit ?? 0).toFixed(2)}\n                                        </div>\n                                    }\n                                    loader={!data.is_completed}\n                                />\n                            </div>\n                        );\n                    }\n\n                    return (\n                        <div className={`${PARENT_CLASS}__table-row`} key={`transaction-row-divider-${data}`}>\n                            <div className={`${PARENT_CLASS}__divider`}>\n                                <div className='transactions__divider-line' />\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n            <div className={classNames(`${PARENT_CLASS}__table-container`)}>\n                <TableHeader columns={result_columns} />\n                <div className={`${PARENT_CLASS}__table-row`}>\n                    <TableCell label={account} />\n                    <TableCell label={result?.number_of_runs} />\n                    <TableCell label={Math.abs(result?.total_stake ?? 0).toFixed(2)} />\n                    <TableCell label={Math.abs(result?.total_payout ?? 0).toFixed(2)} />\n                    <TableCell label={result?.won_contracts} />\n                    <TableCell label={result?.lost_contracts} extra_classes={[`${PARENT_CLASS}__loss`]} />\n                    <TableCell\n                        label={\n                            <div\n                                className={classNames(\n                                    result?.total_profit && {\n                                        [`${PARENT_CLASS}__profit--win`]: result?.total_profit > 0,\n                                        [`${PARENT_CLASS}__profit--loss`]: result?.total_profit < 0,\n                                    }\n                                )}\n                                data-testid='transaction_details_table_profit'\n                            >\n                                {Math.abs(result?.total_profit ?? 0).toFixed(2)}\n                            </div>\n                        }\n                    />\n                    <TableCell label={balance} />\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport Draggable from 'Components/draggable';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport DesktopTransactionTable from './desktop-transaction-table';\nimport { TColumn, TRunPanelStore, TTransactionStore } from './transaction-details.types';\nimport './transaction-details-desktop.scss';\n\nconst transaction_columns: TColumn[] = [\n    { key: 'timestamp', label: localize('Timestamp'), extra_class: '--grow-big' },\n    { key: 'reference', label: localize('Reference'), extra_class: '--grow-mid' },\n    { key: 'market', label: localize('Market') },\n    { key: 'contract_type', label: localize('Trade type') },\n    { key: 'entry_tick', label: localize('Entry spot') },\n    { key: 'exit_tick', label: localize('Exit spot') },\n    { key: 'buy_price', label: localize('Buy price') },\n    { key: 'profit', label: localize('Profit/Loss') },\n];\n\n/* TODO: Add back account & balance when we have support from transaction store */\nconst result_columns: TColumn[] = [\n    { key: 'account', label: localize('Account') },\n    { key: 'no_of_runs', label: localize('No. of runs') },\n    { key: 'total_stake', label: localize('Total stake') },\n    { key: 'total_payout', label: localize('Total payout') },\n    { key: 'win', label: localize('Win') },\n    { key: 'loss', label: localize('Loss') },\n    { key: 'total_profit', label: localize('Total profit/loss') },\n    { key: 'balance', label: localize('Balance') },\n];\n\nconst TransactionDetailsDesktop = observer(() => {\n    const { client } = useStore();\n    const { loginid, balance } = client;\n    const { transactions, run_panel } = useDBotStore();\n    const {\n        toggleTransactionDetailsModal,\n        is_transaction_details_modal_open,\n        transactions: transaction_list,\n    }: Partial<TTransactionStore> = transactions;\n    const { statistics }: Partial<TRunPanelStore> = run_panel;\n\n    const [screenDimensions, setScreenDimensions] = useState({ width: 0, height: 0 });\n\n    const handleResize = () => {\n        setScreenDimensions({ width: window.innerWidth, height: window.innerHeight });\n    };\n\n    useEffect(() => {\n        window.addEventListener('resize', handleResize);\n        setScreenDimensions({ width: window.innerWidth, height: window.innerHeight });\n\n        return () => {\n            window.removeEventListener('resize', handleResize);\n        };\n    }, []);\n\n    // Calculate xaxis and yaxis to center the modal on open\n    const modalWidth = 1034;\n    const modalHeight = 800;\n    const xaxis = (screenDimensions.width - modalWidth) / 2;\n    const yAxisValue = (screenDimensions.height - modalHeight) / 2;\n    const yaxis = yAxisValue >= 0 ? yAxisValue : 0;\n\n    return (\n        <Draggable\n            bounds='.dashboard__main'\n            dragHandleClassName='react-rnd-wrapper-header'\n            is_visible={is_transaction_details_modal_open}\n            minWidth={modalWidth}\n            onCloseDraggable={() => toggleTransactionDetailsModal(false)}\n            width={modalWidth}\n            xaxis={xaxis}\n            yaxis={yaxis}\n            header_title={'Transactions detailed summary'}\n        >\n            <DesktopTransactionTable\n                transaction_columns={transaction_columns}\n                transactions={transaction_list}\n                result_columns={result_columns}\n                result={statistics}\n                account={loginid ?? ''}\n                balance={balance ?? 0}\n            />\n        </Draggable>\n    );\n});\n\nexport default TransactionDetailsDesktop;\n","import React from 'react';\nimport { Checkbox } from '@deriv/components';\nimport { TFiltersProps } from '../journal.types';\n\nconst Filters = ({\n    wrapper_ref,\n    checked_filters,\n    filters,\n    filterMessage,\n    className,\n    classNameLabel,\n}: TFiltersProps) => (\n    <div ref={wrapper_ref} className={className}>\n        {filters.map(item => {\n            const hasFilter = Array.isArray(checked_filters) && checked_filters.includes(item.id);\n            return (\n                <Checkbox\n                    key={item.id}\n                    classNameLabel={classNameLabel}\n                    value={hasFilter}\n                    defaultChecked={hasFilter}\n                    label={item.label}\n                    onChange={() => filterMessage(!hasFilter, item.id)}\n                />\n            );\n        })}\n    </div>\n);\n\nexport default Filters;\n","import React from 'react';\nimport { useOnClickOutside } from '@deriv/components';\nimport { TFilterDialogProps } from '../journal.types';\nimport Filters from './filters';\n\nconst FilterDialog = ({\n    toggle_ref,\n    checked_filters,\n    filters,\n    filterMessage,\n    is_filter_dialog_visible,\n    toggleFilterDialog,\n}: TFilterDialogProps) => {\n    const wrapper_ref = React.useRef<HTMLDivElement>(null);\n    const validateClickOutside = (event: React.ChangeEvent<HTMLInputElement>) =>\n        is_filter_dialog_visible && !toggle_ref.current?.contains(event.target);\n\n    useOnClickOutside(wrapper_ref, toggleFilterDialog, validateClickOutside);\n\n    return (\n        <Filters\n            wrapper_ref={wrapper_ref}\n            checked_filters={checked_filters}\n            filters={filters}\n            filterMessage={filterMessage}\n            className='filter-dialog'\n        />\n    );\n};\n\nexport default FilterDialog;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { log_types } from '@deriv/bot-skeleton';\nimport { Text } from '@deriv/components';\nimport { formatMoney, getCurrencyDisplayCode } from '@deriv/shared';\nimport { Localize, localize } from '@deriv/translations';\nimport { TFormatMessageProps } from '../journal.types';\n\nconst FormatMessage = ({ logType, className, extra }: TFormatMessageProps) => {\n    const getLogMessage = () => {\n        switch (logType) {\n            case log_types.LOAD_BLOCK: {\n                return localize('Blocks are loaded successfully');\n            }\n            case log_types.NOT_OFFERED: {\n                return localize('Resale of this contract is not offered.');\n            }\n            case log_types.PURCHASE: {\n                const { longcode, transaction_id } = extra;\n                return (\n                    <Localize\n                        i18n_default_text='<0>Bought</0>: {{longcode}} (ID: {{transaction_id}})'\n                        values={{ longcode, transaction_id }}\n                        components={[<Text key={0} size='xxs' styles={{ color: 'var(--status-info)' }} />]}\n                        options={{ interpolation: { escapeValue: false } }}\n                    />\n                );\n            }\n            case log_types.SELL: {\n                const { sold_for } = extra;\n                return (\n                    <Localize\n                        i18n_default_text='<0>Sold for</0>: {{sold_for}}'\n                        values={{ sold_for }}\n                        components={[<Text key={0} size='xxs' styles={{ color: 'var(--status-warning)' }} />]}\n                    />\n                );\n            }\n            case log_types.PROFIT: {\n                const { currency, profit } = extra;\n                return (\n                    <Localize\n                        i18n_default_text='Profit amount: <0>{{profit}}</0>'\n                        values={{\n                            profit: `${formatMoney(currency, profit, true)} ${getCurrencyDisplayCode(currency)}`,\n                        }}\n                        components={[<Text key={0} size='xxs' styles={{ color: 'var(--status-success)' }} />]}\n                    />\n                );\n            }\n            case log_types.LOST: {\n                const { currency, profit } = extra;\n                return (\n                    <Localize\n                        i18n_default_text='Loss amount: <0>{{profit}}</0>'\n                        values={{\n                            profit: `${formatMoney(currency, profit, true)} ${getCurrencyDisplayCode(currency)}`,\n                        }}\n                        components={[<Text key={0} size='xxs' styles={{ color: 'var(--status-danger)' }} />]}\n                    />\n                );\n            }\n            case log_types.WELCOME_BACK: {\n                const { current_currency } = extra;\n                if (current_currency)\n                    return (\n                        <Localize\n                            i18n_default_text='Welcome back! Your messages have been restored. You are using your {{current_currency}} account.'\n                            values={{\n                                current_currency,\n                            }}\n                        />\n                    );\n                return <Localize i18n_default_text='Welcome back! Your messages have been restored.' />;\n            }\n\n            case log_types.WELCOME: {\n                const { current_currency } = extra;\n                if (current_currency)\n                    return (\n                        <Localize\n                            i18n_default_text='You are using your {{current_currency}} account.'\n                            values={{\n                                current_currency,\n                            }}\n                        />\n                    );\n                break;\n            }\n            default:\n                return null;\n        }\n    };\n\n    return <div className={classnames('journal__text', className)}>{getLogMessage()}</div>;\n};\n\nexport default FormatMessage;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { CSSTransition } from 'react-transition-group';\nimport { message_types } from '@deriv/bot-skeleton';\nimport { useNewRowTransition } from '@deriv/shared';\nimport { TJournalItemExtra, TJournalItemProps } from '../journal.types';\nimport FormatMessage from './format-message';\nimport DateItem from './date-item';\n\nconst getJournalItemContent = (\n    message: string | ((value: () => void) => string),\n    type: string,\n    className: string,\n    extra: TJournalItemExtra,\n    measure: () => void\n) => {\n    switch (type) {\n        case message_types.SUCCESS: {\n            return <FormatMessage logType={message as string} extra={extra} className={className} />;\n        }\n        case message_types.NOTIFY: {\n            if (typeof message === 'function') {\n                return <div className={classnames('journal__text', className)}>{message(measure)}</div>;\n            }\n            return <div className={classnames('journal__text', className)}>{message}</div>;\n        }\n        case message_types.ERROR: {\n            return <div className='journal__text--error journal__text'>{message as string}</div>;\n        }\n        default:\n            return null;\n    }\n};\n\nconst JournalItem = ({ row, is_new_row, measure }: TJournalItemProps) => {\n    const { in_prop } = useNewRowTransition(is_new_row);\n    const { date, time, message, message_type, className, extra } = row;\n    const date_el = DateItem({ date, time });\n\n    return (\n        <CSSTransition in={in_prop} timeout={500} classNames='list__animation' data-testid='mock-css-transition'>\n            <div className='journal__item'>\n                <div className='journal__item-content'>\n                    {getJournalItemContent(message, message_type, className, extra as TJournalItemExtra, measure)}\n                </div>\n                <div className='journal__text-datetime'>{date_el}</div>\n            </div>\n        </CSSTransition>\n    );\n};\n\nexport default JournalItem;\n","import React from 'react';\nimport { TDateItemProps } from '../journal.types';\n\nconst DateItem = ({ date, time }: TDateItemProps) => (\n    <>\n        <span className='journal__text-date'>{date}</span> | <span className='journal__text-time'>{time}</span>\n    </>\n);\n\nexport default DateItem;\n","import React from 'react';\nimport classnames from 'classnames';\nimport ContentLoader from 'react-content-loader';\n\nconst JournalLoader = ({ is_mobile }: { is_mobile: boolean }) => (\n    <ContentLoader\n        className={classnames('journal__loader', { 'journal__loader--mobile': is_mobile })}\n        speed={3}\n        width={350}\n        height={92}\n        backgroundColor={'var(--general-section-1)'}\n        foregroundColor={'var(--general-hover)'}\n    >\n        <rect x='15' y='15' rx='5' ry='5' width='320' height='40' />\n        <rect x='15' y='60' rx='5' ry='5' width='180' height='7' />\n    </ContentLoader>\n);\n\nexport default JournalLoader;\n","import React from 'react';\nimport { Button, Icon, Popover } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TDownloadProps = {\n    tab: string;\n};\n\nconst Download = observer(({ tab }: TDownloadProps) => {\n    const { download, run_panel, transactions } = useDBotStore();\n    const { is_clear_stat_disabled, is_running } = run_panel;\n    const { onClickDownloadTransaction, onClickDownloadJournal } = download;\n    const { transactions: transaction_list } = transactions;\n    let disabled = false;\n    let clickFunction, popover_message;\n    if (tab === 'transactions') {\n        clickFunction = onClickDownloadTransaction;\n        disabled = !transaction_list.length || is_running;\n        popover_message = localize('Download your transaction history.');\n        if (!transaction_list.length) popover_message = localize('No transaction or activity yet.');\n    } else if (tab === 'journal') {\n        clickFunction = onClickDownloadJournal;\n        popover_message = localize('Download your journal.');\n        disabled = is_clear_stat_disabled;\n        if (disabled) popover_message = localize('No transaction or activity yet.');\n    }\n    if (is_running) popover_message = localize('Download is unavailable while your bot is running.');\n\n    return (\n        <Popover\n            className='run-panel__info'\n            classNameBubble='run-panel__info--bubble'\n            alignment='bottom'\n            message={popover_message}\n            zIndex='5'\n        >\n            <Button\n                id='download-button'\n                is_disabled={disabled}\n                className='download__button'\n                icon={\n                    <Icon icon='IcDbotDownload' color={disabled ? 'disabled' : undefined} className='download__icon' />\n                }\n                text={localize('Download')}\n                onClick={clickFunction}\n                secondary\n            />\n        </Popover>\n    );\n});\n\nexport default Download;\n","import Download from './download';\nimport './download.scss';\n\nexport default Download;\n","import React from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport { Icon, Text } from '@deriv/components';\nimport { Localize } from '@deriv/translations';\nimport Download from 'Components/download';\nimport { TJournalToolsProps } from '../journal.types';\nimport FilterDialog from './filter-dialog';\n\nconst JournalTools = ({\n    checked_filters,\n    filters,\n    filterMessage,\n    is_filter_dialog_visible,\n    toggleFilterDialog,\n}: TJournalToolsProps) => {\n    const toggle_ref = React.useRef<HTMLDivElement>(null);\n\n    return (\n        <>\n            <div className='journal-tools__container'>\n                <Download tab='journal' />\n                <div ref={toggle_ref} className='journal-tools__container-filter' onClick={toggleFilterDialog}>\n                    <Text size='xs' className='journal-tools__container-filter--label'>\n                        <Localize i18n_default_text='Filters' />\n                    </Text>\n                    <Icon icon='IcFilter' size={16} />\n                </div>\n            </div>\n            <CSSTransition\n                in={is_filter_dialog_visible}\n                classNames={{\n                    enter: 'filter-dialog--enter',\n                    enterDone: 'filter-dialog--enter-done',\n                    exit: 'filter-dialog--exit',\n                }}\n                timeout={150}\n                unmountOnExit\n            >\n                <FilterDialog\n                    toggle_ref={toggle_ref}\n                    checked_filters={checked_filters}\n                    filters={filters}\n                    filterMessage={filterMessage}\n                    is_filter_dialog_visible={is_filter_dialog_visible}\n                    toggleFilterDialog={toggleFilterDialog}\n                />\n            </CSSTransition>\n        </>\n    );\n};\n\nexport default JournalTools;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { DataList, Icon, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { TCheckedFilters, TFilterMessageValues, TJournalDataListArgs } from './journal.types';\nimport { JournalItem, JournalLoader, JournalTools } from './journal-components';\n\nconst Journal = observer(() => {\n    const { journal, run_panel } = useDBotStore();\n    const {\n        checked_filters,\n        filterMessage,\n        filters,\n        filtered_messages,\n        is_filter_dialog_visible,\n        toggleFilterDialog,\n        unfiltered_messages,\n    } = journal;\n    const { is_stop_button_visible, contract_stage } = run_panel;\n\n    const filtered_messages_length = Array.isArray(filtered_messages) && filtered_messages.length;\n    const unfiltered_messages_length = Array.isArray(unfiltered_messages) && unfiltered_messages.length;\n    const is_mobile = isMobile();\n\n    return (\n        <div\n            className={classnames('journal run-panel-tab__content--no-stat', {\n                'run-panel-tab__content': !is_mobile,\n            })}\n        >\n            <JournalTools\n                checked_filters={checked_filters}\n                filters={filters}\n                filterMessage={filterMessage}\n                is_filter_dialog_visible={is_filter_dialog_visible}\n                toggleFilterDialog={toggleFilterDialog}\n            />\n            <div className='journal__item-list'>\n                {filtered_messages_length ? (\n                    <DataList\n                        className='journal'\n                        data_source={filtered_messages}\n                        rowRenderer={(args: TJournalDataListArgs) => <JournalItem {...args} />}\n                        keyMapper={(row: TFilterMessageValues) => row.unique_id}\n                    />\n                ) : (\n                    <>\n                        {contract_stage >= contract_stages.STARTING &&\n                        !!Object.keys(checked_filters as TCheckedFilters).length &&\n                        !unfiltered_messages_length &&\n                        is_stop_button_visible ? (\n                            <JournalLoader is_mobile={is_mobile} />\n                        ) : (\n                            <div className='journal-empty'>\n                                <Icon icon='IcBox' className='journal-empty__icon' size={64} color='secondary' />\n                                <Text\n                                    as='h4'\n                                    size='xs'\n                                    weight='bold'\n                                    align='center'\n                                    color='less-prominent'\n                                    line_height='xxs'\n                                    className='journal-empty__header'\n                                >\n                                    {localize('There are no messages to display')}\n                                </Text>\n                                <div className='journal-empty__message'>\n                                    <Text size='xxs' color='less-prominent'>\n                                        {localize('Here are the possible reasons:')}\n                                    </Text>\n                                    <ul className='journal-empty__list'>\n                                        <li>\n                                            <Text size='xxs' color='less-prominent'>\n                                                {localize('The bot is not running')}\n                                            </Text>\n                                        </li>\n                                        <li>\n                                            <Text size='xxs' color='less-prominent'>\n                                                {localize('The stats are cleared')}\n                                            </Text>\n                                        </li>\n                                        <li>\n                                            <Text size='xxs' color='less-prominent'>\n                                                {localize('All messages are filtered out')}\n                                            </Text>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        )}\n                    </>\n                )}\n            </div>\n        </div>\n    );\n});\n\nexport default Journal;\n","import Journal from './journal';\nimport './journal.scss';\n\nexport default Journal;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Field, Form, Formik } from 'formik';\nimport PropTypes from 'prop-types';\nimport { Button, Div100vhContainer, FadeWrapper, Input, MobileWrapper, Modal, PageOverlay } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst SelfExclusionForm = props => {\n    const [max_losses_error, setMaxLossesError] = React.useState('');\n    const {\n        is_onscreen_keyboard_active,\n        is_logged_in,\n        initial_values,\n        api_max_losses,\n        onRunButtonClick,\n        resetSelfExclusion,\n        updateSelfExclusion,\n        setRunLimit,\n        is_reality_check_visible,\n    } = props;\n\n    React.useEffect(() => {\n        if (is_reality_check_visible || !is_logged_in) {\n            resetSelfExclusion();\n        }\n    });\n\n    const onSubmitLimits = async values => {\n        if (values.form_max_losses !== api_max_losses) {\n            const set_losses = await updateSelfExclusion({ max_losses: values.form_max_losses });\n            if (set_losses?.error) {\n                setMaxLossesError(localize(set_losses.error.message));\n                return;\n            }\n        }\n        setRunLimit(values.run_limit);\n        onRunButtonClick();\n    };\n    const validateFields = values => {\n        const errors = {};\n        // Regex\n        const is_number = /^\\d+(\\.\\d+)?$/;\n        const is_integer = /^\\d+$/;\n        const max_number = 9999999999999;\n\n        // Messages\n        const requested_field_message = localize('This field is required.');\n        const valid_number_message = localize('Should be a valid number');\n        const max_number_message = localize('Reached maximum number of digits');\n        const max_decimal_message = localize('Reached maximum number of decimals');\n        const max_losses_limit_message = localize('Please enter a number between 0 and {{api_max_losses}}.', {\n            api_max_losses,\n        });\n        const requested_fields = ['run_limit', 'form_max_losses'];\n        const only_numbers = ['run_limit', 'form_max_losses'];\n        const decimal_limit = ['form_max_losses'];\n        const has_max_limit = ['form_max_losses'];\n\n        const only_integers = ['run_limit'];\n\n        requested_fields.forEach(item => {\n            if (!values[item]) {\n                errors[item] = requested_field_message;\n            }\n        });\n\n        only_numbers.forEach(item => {\n            if (values[item]) {\n                if (!is_number.test(values[item])) {\n                    errors[item] = valid_number_message;\n                } else if (+values[item] > max_number) {\n                    errors[item] = max_number_message;\n                }\n            }\n        });\n\n        only_integers.forEach(item => {\n            if (values[item]) {\n                if (!is_integer.test(values[item])) {\n                    errors[item] = valid_number_message;\n                }\n            }\n        });\n\n        decimal_limit.forEach(item => {\n            const amount_decimal_array = values[item].toString().split('.')[1];\n            const amount_decimal_places = amount_decimal_array ? amount_decimal_array.length || 0 : 0;\n            if (amount_decimal_places > 2) {\n                errors[item] = max_decimal_message;\n            }\n        });\n        has_max_limit.forEach(item => {\n            if (api_max_losses !== 0 && api_max_losses !== values[item] && api_max_losses < values[item]) {\n                errors[item] = max_losses_limit_message;\n            } else {\n                setMaxLossesError('');\n            }\n        });\n\n        return errors;\n    };\n\n    return (\n        <div className='db-self-exclusion'>\n            <div className='db-self-exclusion__content'>\n                <div className='db-self-exclusion__info'>\n                    {localize('Enter limits to stop your bot from trading when any of these conditions are met.')}\n                </div>\n                <Formik initialValues={initial_values} validate={validateFields} onSubmit={onSubmitLimits}>\n                    {({ values, touched, errors, isValid, handleChange }) => {\n                        return (\n                            <Form>\n                                <div className='db-self-exclusion__form-group'>\n                                    <Field name='form_max_losses'>\n                                        {({ field }) => (\n                                            <Input\n                                                {...field}\n                                                className='db-self-exclusion__input'\n                                                type='text'\n                                                label={localize('Daily loss limit')}\n                                                value={values.form_max_losses}\n                                                onChange={handleChange}\n                                                error={max_losses_error || (touched[field.name] && errors[field.name])}\n                                                hint={localize(\n                                                    'Limits your potential losses for the day across all Deriv platforms.'\n                                                )}\n                                            />\n                                        )}\n                                    </Field>\n                                </div>\n                                <div className='db-self-exclusion__form-group'>\n                                    <Field name='run_limit'>\n                                        {({ field }) => {\n                                            return (\n                                                <Input\n                                                    {...field}\n                                                    className='db-self-exclusion__input'\n                                                    type='text'\n                                                    label={localize('Maximum consecutive trades')}\n                                                    value={values.run_limit}\n                                                    onChange={handleChange}\n                                                    error={touched[field.name] && errors.run_limit}\n                                                    hint={localize(\n                                                        'Maximum number of trades your bot will execute for this run.'\n                                                    )}\n                                                />\n                                            );\n                                        }}\n                                    </Field>\n                                </div>\n                                <div\n                                    className={classNames('db-self-exclusion__footer', {\n                                        'db-self-exclusion__footer--relative':\n                                            isMobile() && is_onscreen_keyboard_active,\n                                    })}\n                                >\n                                    <div className='db-self-exclusion__footer-btn-group'>\n                                        <Button\n                                            large\n                                            text={localize('Cancel')}\n                                            onClick={resetSelfExclusion}\n                                            secondary\n                                            type='button'\n                                        />\n                                        <Button\n                                            type='submit'\n                                            large\n                                            text={localize('Apply and run')}\n                                            is_disabled={\n                                                !isValid ||\n                                                !values.run_limit ||\n                                                !values.form_max_losses ||\n                                                max_losses_error !== ''\n                                            }\n                                            primary\n                                        />\n                                    </div>\n                                </div>\n                            </Form>\n                        );\n                    }}\n                </Formik>\n            </div>\n        </div>\n    );\n};\n\nconst SelfExclusion = observer(({ onRunButtonClick }) => {\n    const { self_exclusion } = useDBotStore();\n    const { ui, client } = useStore();\n    const { is_restricted, resetSelfExclusion, initial_values, api_max_losses, run_limit, setRunLimit } =\n        self_exclusion;\n    const { is_onscreen_keyboard_active } = ui;\n    const { is_logged_in, is_reality_check_visible, updateSelfExclusion, virtual_account_loginid } = client;\n\n    const self_exclusion_form_props = {\n        is_onscreen_keyboard_active,\n        is_logged_in,\n        initial_values,\n        api_max_losses,\n        onRunButtonClick,\n        resetSelfExclusion,\n        updateSelfExclusion,\n        setRunLimit,\n        is_reality_check_visible,\n        virtual_account_loginid,\n        run_limit,\n    };\n\n    return (\n        <>\n            {isMobile() ? (\n                <FadeWrapper is_visible={is_restricted} className='limits__wrapper' keyname='limitis__wrapper'>\n                    <PageOverlay header={localize('Limits')} onClickClose={resetSelfExclusion}>\n                        <MobileWrapper>\n                            <Div100vhContainer className='limits__wrapper--is-mobile'>\n                                <SelfExclusionForm {...self_exclusion_form_props} />\n                            </Div100vhContainer>\n                        </MobileWrapper>\n                    </PageOverlay>\n                </FadeWrapper>\n            ) : (\n                <Modal\n                    is_open={is_restricted}\n                    has_close_icon\n                    width='440px'\n                    height='374px'\n                    toggleModal={resetSelfExclusion}\n                    className='db-self-exclusion__modal'\n                    title={localize('Limits')}\n                >\n                    <SelfExclusionForm {...self_exclusion_form_props} />\n                </Modal>\n            )}\n        </>\n    );\n});\n\nSelfExclusion.propTypes = {\n    onRunButtonClick: PropTypes.func,\n};\n\nexport default SelfExclusion;\n","import SelfExclusion from './self-exclusion';\n\nexport default SelfExclusion;\n","import ContractCardLoader from './contract-card-loading';\n\nexport default ContractCardLoader;\n","import React from 'react';\nimport ContentLoader from 'react-content-loader';\n\ntype TContractCardLoader = {\n    speed?: number;\n};\n\nconst ContractCardLoader = ({ speed = 3 }: TContractCardLoader) => (\n    <ContentLoader\n        height={153}\n        width={334}\n        speed={speed}\n        backgroundColor={'var(--general-section-2)'}\n        foregroundColor={'var(--general-hover)'}\n        data-testid='contract-card-loader'\n    >\n        <rect x='12' y='15' rx='0' ry='0' width='41' height='25' />\n        <rect x='61' y='24' rx='0' ry='0' width='91' height='8' />\n        <rect x='180' y='15' rx='0' ry='0' width='41' height='25' />\n        <rect x='229' y='24' rx='0' ry='0' width='91' height='8' />\n        <rect x='12' y='48' rx='0' ry='0' width='60' height='8' />\n        <rect x='12' y='64' rx='0' ry='0' width='308' height='8' />\n        <rect x='12' y='80' rx='0' ry='0' width='308' height='1' />\n        <rect x='12' y='89' rx='0' ry='0' width='140' height='8' />\n        <rect x='12' y='105' rx='0' ry='0' width='60' height='8' />\n        <rect x='12' y='121' rx='0' ry='0' width='140' height='8' />\n        <rect x='12' y='137' rx='0' ry='0' width='60' height='8' />\n        <rect x='180' y='89' rx='0' ry='0' width='140' height='8' />\n        <rect x='180' y='105' rx='0' ry='0' width='60' height='8' />\n        <rect x='180' y='121' rx='0' ry='0' width='140' height='8' />\n        <rect x='180' y='137' rx='0' ry='0' width='60' height='8' />\n    </ContentLoader>\n);\n\nexport default ContractCardLoader;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { ContractCard, Text } from '@deriv/components';\nimport { getCardLabels, isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport ContractCardLoader from 'Components/contract-card-loading';\nimport { getContractTypeDisplay } from 'Constants/contract';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport { TSummaryCardProps } from './summary-card.types';\n\nconst SummaryCard = observer(({ contract_info, is_contract_loading }: TSummaryCardProps) => {\n    const { summary_card, run_panel } = useDBotStore();\n    const { ui, common } = useStore();\n    const { is_contract_completed, is_contract_inactive, is_multiplier } = summary_card;\n    const { onClickSell, is_sell_requested } = run_panel;\n    const { addToast, current_focus, removeToast, setCurrentFocus } = ui;\n    const { server_time } = common;\n\n    const is_mobile = isMobile();\n\n    const card_header = (\n        <ContractCard.Header\n            contract_info={contract_info}\n            getCardLabels={getCardLabels}\n            getContractTypeDisplay={getContractTypeDisplay}\n            has_progress_slider={!is_multiplier}\n            is_sold={is_contract_completed}\n            server_time={server_time}\n        />\n    );\n\n    const card_body = (\n        <ContractCard.Body\n            addToast={addToast}\n            contract_info={contract_info}\n            currency={contract_info?.currency ?? ''}\n            current_focus={current_focus}\n            error_message_alignment='left'\n            getCardLabels={getCardLabels}\n            getContractById={() => summary_card}\n            is_mobile={is_mobile}\n            is_multiplier={is_multiplier}\n            is_sold={is_contract_completed}\n            removeToast={removeToast}\n            server_time={server_time}\n            setCurrentFocus={setCurrentFocus}\n        />\n    );\n\n    const card_footer = (\n        <ContractCard.Footer\n            contract_info={contract_info}\n            getCardLabels={getCardLabels}\n            is_multiplier={is_multiplier}\n            is_sell_requested={is_sell_requested}\n            onClickSell={onClickSell}\n        />\n    );\n\n    const contract_el = (\n        <React.Fragment>\n            {card_header}\n            {card_body}\n            {card_footer}\n        </React.Fragment>\n    );\n\n    return (\n        <div\n            className={classNames('db-summary-card', {\n                'db-summary-card--mobile': is_mobile,\n                'db-summary-card--inactive': is_contract_inactive && !is_contract_loading && !contract_info,\n                'db-summary-card--is-loading': is_contract_loading,\n                'db-summary-card--completed': is_contract_completed,\n                'db-summary-card--completed-mobile': is_contract_completed && is_mobile,\n            })}\n        >\n            {is_contract_loading && <ContractCardLoader speed={2} />}\n            {!is_contract_loading && contract_info && (\n                <ContractCard\n                    contract_info={contract_info}\n                    getCardLabels={getCardLabels}\n                    is_multiplier={is_multiplier}\n                    profit_loss={contract_info.profit}\n                    should_show_result_overlay={true}\n                >\n                    <div\n                        className={classNames('dc-contract-card', {\n                            'dc-contract-card--green': contract_info.profit > 0,\n                            'dc-contract-card--red': contract_info.profit < 0,\n                        })}\n                    >\n                        {contract_el}\n                    </div>\n                </ContractCard>\n            )}\n            {!is_contract_loading && !contract_info && (\n                <Text as='p' line_height='s' size='xs'>\n                    {localize('When you’re ready to trade, hit ')}\n                    <strong>{localize('Run')}</strong>\n                    {localize('. You’ll be able to track your bot’s performance here.')}\n                </Text>\n            )}\n        </div>\n    );\n});\n\nexport default SummaryCard;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { ThemedScrollbars } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport SummaryCard from './summary-card';\n\ntype TSummary = {\n    is_drawer_open: boolean;\n};\n\nconst Summary = observer(({ is_drawer_open }: TSummary) => {\n    const { dashboard, summary_card } = useDBotStore();\n    const { is_contract_loading, contract_info } = summary_card;\n    const { active_tour } = dashboard;\n\n    const is_mobile = isMobile();\n    return (\n        <div\n            className={classnames({\n                'run-panel-tab__content': !is_mobile,\n                'run-panel-tab__content--mobile': is_mobile && is_drawer_open,\n                'run-panel-tab__content--summary-tab': (!is_mobile && is_drawer_open) || active_tour,\n            })}\n            data-testid='mock-summary'\n        >\n            <ThemedScrollbars\n                className={classnames({\n                    summary: !is_contract_loading && !contract_info,\n                    'summary--loading':\n                        (is_mobile && is_contract_loading) || (is_mobile && !is_contract_loading && contract_info),\n                })}\n            >\n                <SummaryCard is_contract_loading={is_contract_loading} contract_info={contract_info} />\n            </ThemedScrollbars>\n        </div>\n    );\n});\n\nexport default Summary;\n","import Summary from './summary';\nimport './summary.scss';\nimport './summary-card.scss';\n\nexport default Summary;\n","import ContractResultOverlay from './contract-result-overlay';\nimport './contract-result-overlay.scss';\n\nexport default ContractResultOverlay;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Icon, Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\ntype TContractResultOverlayProps = {\n    profit: number;\n    className: string;\n};\n\nconst ContractResultOverlay = ({ profit, className }: TContractResultOverlayProps) => {\n    const has_won_contract = profit >= 0;\n\n    return (\n        <div\n            className={classNames('db-contract-card__result', className, {\n                'db-contract-card__result--won': has_won_contract,\n                'db-contract-card__result--lost': !has_won_contract,\n            })}\n        >\n            <Text weight='bold' className='db-contract-card__result-caption'>\n                {has_won_contract ? (\n                    <React.Fragment>\n                        {localize('Won')}\n                        <Icon icon='IcCheckmarkCircle' className='db-contract-card__result-icon' color='green' />\n                    </React.Fragment>\n                ) : (\n                    <React.Fragment>\n                        {localize('Lost')}\n                        <Icon icon='IcCrossCircle' className='db-contract-card__result-icon' color='red' />\n                    </React.Fragment>\n                )}\n            </Text>\n        </div>\n    );\n};\n\nexport default ContractResultOverlay;\n","import React, { useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport { Icon, Toast } from '@deriv/components';\nimport { Localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst BotStopNotification = observer(() => {\n    const { run_panel } = useDBotStore();\n    const { setShowBotStopMessage } = run_panel;\n    const notification_timer = useRef(6000);\n\n    const notificationTimer = setTimeout(() => {\n        if (notification_timer.current) {\n            setShowBotStopMessage(false);\n        }\n    }, notification_timer.current);\n\n    const resetTimer = () => {\n        setTimeout(() => {\n            setShowBotStopMessage(false);\n        }, 4000);\n    };\n\n    return (\n        <div\n            className='bot-stop-notification'\n            onMouseOver={e => {\n                clearTimeout(notificationTimer);\n            }}\n            onMouseLeave={e => {\n                resetTimer();\n            }}\n            data-testid='bot-stop-notification'\n        >\n            <Toast>\n                <div>\n                    <Localize\n                        i18n_default_text='You’ve just stopped the bot. Any open contracts can be viewed on the <0>Reports</0> page.'\n                        components={[\n                            <a\n                                key={0}\n                                style={{ color: 'var(--general-main-1)' }}\n                                rel='noopener noreferrer'\n                                target='_blank'\n                                href={'/reports'}\n                            />,\n                        ]}\n                    />\n                </div>\n                <Icon\n                    icon='IcCross'\n                    className={'notification-close'}\n                    data_testid={'notification-close'}\n                    onClick={() => setShowBotStopMessage(false)}\n                />\n            </Toast>\n        </div>\n    );\n});\n\nexport default BotStopNotification;\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { Button, Icon } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport ContractResultOverlay from 'Components/contract-result-overlay';\nimport BotStopNotification from 'Components/dashboard/bot-stop-notification';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst CircularWrapper = ({ className }) => (\n    <div className={classNames('circular-wrapper', className)}>\n        <span className='static-circle' />\n        <span className='dynamic-circle' />\n    </div>\n);\n\nconst ContractStageText = ({ contract_stage }) => {\n    switch (contract_stage) {\n        case contract_stages.NOT_RUNNING:\n        default:\n            return <Localize i18n_default_text='Bot is not running' />;\n        case contract_stages.STARTING:\n            return <Localize i18n_default_text='Bot is starting' />;\n        case contract_stages.PURCHASE_SENT:\n            return <Localize i18n_default_text='Buying contract' />;\n        case contract_stages.PURCHASE_RECEIVED:\n            return <Localize i18n_default_text='Contract bought' />;\n        case contract_stages.IS_STOPPING:\n            return <Localize i18n_default_text='Bot is stopping' />;\n        case contract_stages.CONTRACT_CLOSED:\n            return <Localize i18n_default_text='Contract closed' />;\n    }\n};\n\nconst TradeAnimation = observer(({ className }) => {\n    const { run_panel, summary_card } = useDBotStore();\n    const { client } = useStore();\n    const { is_contract_completed, profit } = summary_card;\n    const {\n        contract_stage,\n        is_stop_button_visible,\n        is_stop_button_disabled,\n        onRunButtonClick,\n        onStopBotClick,\n        performSelfExclusionCheck,\n        should_show_overlay,\n        show_bot_stop_message,\n    } = run_panel;\n    const { account_status } = client;\n    const cashier_validation = account_status?.cashier_validation;\n    const [is_button_disabled, updateIsButtonDisabled] = React.useState(false);\n    const is_unavailable_for_payment_agent = cashier_validation?.includes('WithdrawServiceUnavailableForPA');\n\n    // perform self-exclusion checks which will be stored under the self-exclusion-store\n    React.useEffect(() => {\n        performSelfExclusionCheck();\n    }, []);\n\n    React.useEffect(() => {\n        if (is_button_disabled) {\n            setTimeout(() => {\n                updateIsButtonDisabled(false);\n            }, 1000);\n        }\n    }, [is_button_disabled]);\n\n    const status_classes = ['', '', ''];\n    let progress_status =\n        contract_stage -\n        (contract_stage === contract_stages.PURCHASE_SENT || contract_stage === contract_stages.PURCHASE_RECEIVED\n            ? 2\n            : 3);\n\n    if (progress_status >= 0) {\n        if (progress_status < status_classes.length) {\n            status_classes[progress_status] = 'active';\n        }\n\n        if (is_contract_completed) {\n            progress_status += 1;\n        }\n\n        for (let i = 0; i < progress_status; i++) {\n            status_classes[i] = 'completed';\n        }\n    }\n\n    return (\n        <div className={classNames('animation__wrapper', className)}>\n            <Button\n                is_disabled={(is_stop_button_disabled || is_button_disabled) && !is_unavailable_for_payment_agent}\n                className='animation__button'\n                id={is_stop_button_visible ? 'db-animation__stop-button' : 'db-animation__run-button'}\n                text={is_stop_button_visible ? localize('Stop') : localize('Run')}\n                icon={<Icon icon={is_stop_button_visible ? 'IcBotStop' : 'IcPlay'} color='active' />}\n                onClick={() => {\n                    updateIsButtonDisabled(true);\n                    if (is_stop_button_visible) {\n                        onStopBotClick();\n                        return;\n                    }\n                    onRunButtonClick();\n                }}\n                has_effect\n                {...(is_stop_button_visible || !is_unavailable_for_payment_agent ? { primary: true } : { green: true })}\n            />\n            {show_bot_stop_message && <BotStopNotification />}\n            <div\n                className={classNames('animation__container', className, {\n                    'animation--running': contract_stage > 0,\n                    'animation--completed': should_show_overlay && is_contract_completed,\n                })}\n            >\n                {should_show_overlay && is_contract_completed && <ContractResultOverlay profit={profit} />}\n                <span className='animation__text'>\n                    <ContractStageText contract_stage={contract_stage} />\n                </span>\n                <div className='animation__progress'>\n                    <div className='animation__progress-line'>\n                        <div className={`animation__progress-bar animation__progress-${contract_stage}`} />\n                    </div>\n                    {status_classes.map((status_class, i) => (\n                        <CircularWrapper key={i} className={status_class} />\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n});\n\nTradeAnimation.propTypes = {\n    className: PropTypes.string,\n};\n\nexport default TradeAnimation;\n","import TradeAnimation from './trade-animation.jsx';\nimport './trade-animation.scss';\n\nexport default TradeAnimation;\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport ContentLoader from 'react-content-loader';\nimport { getContractTypeName } from '@deriv/bot-skeleton';\nimport { Icon, IconTradeTypes, Money, Popover } from '@deriv/components';\nimport { convertDateFormat } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { popover_zindex } from 'Constants/z-indexes';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst TransactionIconWithText = ({ icon, title, message, className }) => (\n    <React.Fragment>\n        <Popover\n            className={classNames(className, 'transactions__icon')}\n            alignment='left'\n            message={title}\n            zIndex={popover_zindex.TRANSACTION}\n        >\n            {icon}\n        </Popover>\n        {message}\n    </React.Fragment>\n);\n\nconst TransactionFieldLoader = () => (\n    <ContentLoader\n        className='transactions__loader-text'\n        height={10}\n        width={80}\n        speed={3}\n        backgroundColor={'var(--general-section-2)'}\n        foregroundColor={'var(--general-hover)'}\n    >\n        <rect x='0' y='0' rx='0' ry='0' width='100' height='12' />\n    </ContentLoader>\n);\n\nconst TransactionIconLoader = () => (\n    <ContentLoader\n        className='transactions__loader-icon'\n        speed={3}\n        width={24}\n        height={24}\n        backgroundColor={'var(--general-section-1)'}\n        foregroundColor={'var(--general-hover)'}\n    >\n        <rect x='0' y='0' rx='5' ry='5' width='24' height='24' />\n    </ContentLoader>\n);\n\nconst PopoverItem = ({ icon, title, children }) => (\n    <div className='transactions__popover-item'>\n        {icon && <div className='transaction__popover-icon'>{icon}</div>}\n        <div className='transactions__popover-details'>\n            <div className='transactions__popover-title'>{title}</div>\n            {children}\n        </div>\n    </div>\n);\n\nconst PopoverContent = ({ contract }) => (\n    <div className='transactions__popover-content'>\n        {contract.transaction_ids && (\n            <PopoverItem title={localize('Reference IDs')}>\n                {contract.transaction_ids.buy && (\n                    <div className='transactions__popover-value'>\n                        {`${contract.transaction_ids.buy} ${localize('(Buy)')}`}\n                    </div>\n                )}\n                {contract.transaction_ids.sell && (\n                    <div className='transactions__popover-value'>\n                        {`${contract.transaction_ids.sell} ${localize('(Sell)')}`}\n                    </div>\n                )}\n            </PopoverItem>\n        )}\n        {contract.tick_count && (\n            <PopoverItem title={localize('Duration')}>\n                <div className='transactions__popover-value'>{`${contract.tick_count} ${localize('ticks')}`}</div>\n            </PopoverItem>\n        )}\n        {(contract.barrier && (\n            <PopoverItem title={localize('Barrier')}>\n                <div className='transactions__popover-value'>{contract.barrier}</div>\n            </PopoverItem>\n        )) ||\n            (contract.high_barrier && contract.low_barrier && (\n                <PopoverItem title={localize('Barriers')}>\n                    <div className='transactions__popover-value'>{`${contract.high_barrier} ${localize(\n                        '(High)'\n                    )}`}</div>\n                    <div className='transactions__popover-value'>{`${contract.low_barrier} ${localize('(Low)')}`}</div>\n                </PopoverItem>\n            ))}\n        {contract.date_start && (\n            <PopoverItem title={localize('Start time')}>\n                <div className='transactions__popover-value'>\n                    {convertDateFormat(contract.date_start, 'YYYY-M-D HH:mm:ss [GMT]', 'YYYY-MM-DD HH:mm:ss [GMT]')}\n                </div>\n            </PopoverItem>\n        )}\n        {\n            contract.entry_tick && (\n                <PopoverItem title={localize('Entry spot')}>\n                    <div className='transactions__popover-value'>{contract.entry_tick}</div>\n                    {contract.entry_tick_time && (\n                        <div className='transactions__popover-value'>\n                            {convertDateFormat(\n                                contract.entry_tick_time,\n                                'YYYY-M-D HH:mm:ss [GMT]',\n                                'YYYY-MM-DD HH:mm:ss [GMT]'\n                            )}\n                        </div>\n                    )}\n                </PopoverItem>\n            )\n            // TODO: Durations for non-tick contracts, requires helpers from Trader.\n        }\n        {(contract.exit_tick && contract.exit_tick_time && (\n            <PopoverItem title={localize('Exit spot')}>\n                <div className='transactions__popover-value'>{contract.exit_tick}</div>\n                <div className='transactions__popover-value'>\n                    {convertDateFormat(contract.exit_tick_time, 'YYYY-M-D HH:mm:ss [GMT]', 'YYYY-MM-DD HH:mm:ss [GMT]')}\n                </div>\n            </PopoverItem>\n        )) ||\n            (contract.exit_tick && (\n                <PopoverItem title={localize('Exit time')}>\n                    <div className='transactions__popover-value'>{contract.exit_tick}</div>\n                </PopoverItem>\n            ))}\n    </div>\n);\n\nconst Transaction = observer(({ contract }) => {\n    const { transactions } = useDBotStore();\n    const { active_transaction_id, setActiveTransactionId } = transactions;\n\n    return (\n        <Popover\n            zIndex={popover_zindex.TRANSACTION}\n            alignment='left'\n            className='transactions__item-wrapper'\n            is_open={contract && active_transaction_id === contract.transaction_ids.buy}\n            message={contract && <PopoverContent contract={contract} />}\n        >\n            <div\n                className='transactions__item'\n                onClick={contract && (() => setActiveTransactionId(contract.transaction_ids.buy))}\n            >\n                <div className='transactions__cell transactions__trade-type'>\n                    <div className='transactions__loader-container'>\n                        {contract ? (\n                            <TransactionIconWithText\n                                icon={<Icon icon={`IcUnderlying${contract.underlying}`} size={16} />}\n                                title={contract.display_name}\n                            />\n                        ) : (\n                            <TransactionIconLoader />\n                        )}\n                    </div>\n                    <div className='transactions__loader-container'>\n                        {contract ? (\n                            <TransactionIconWithText\n                                icon={<IconTradeTypes type={contract.contract_type} size={16} />}\n                                title={getContractTypeName(contract)}\n                            />\n                        ) : (\n                            <TransactionIconLoader />\n                        )}\n                    </div>\n                </div>\n                <div className='transactions__cell transactions__entry-spot'>\n                    <TransactionIconWithText\n                        icon={<Icon icon='IcContractEntrySpot' />}\n                        title={localize('Entry spot')}\n                        message={(contract && contract.entry_tick) || <TransactionFieldLoader />}\n                    />\n                </div>\n                <div className='transactions__cell transactions__exit-spot'>\n                    <TransactionIconWithText\n                        icon={<Icon icon='IcContractExitSpot' />}\n                        title={localize('Exit spot')}\n                        message={(contract && contract.exit_tick) || <TransactionFieldLoader />}\n                    />\n                </div>\n                <div className='transactions__cell transactions__stake'>\n                    {contract ? (\n                        <Money amount={contract.buy_price} currency={contract.currency} show_currency />\n                    ) : (\n                        <TransactionFieldLoader />\n                    )}\n                </div>\n                <div className='transactions__cell transactions__profit'>\n                    {contract?.is_completed ? (\n                        <div\n                            className={classNames({\n                                'transactions__profit--win': contract.profit >= 0,\n                                'transactions__profit--loss': contract.profit < 0,\n                            })}\n                        >\n                            <Money amount={Math.abs(contract.profit)} currency={contract.currency} show_currency />\n                        </div>\n                    ) : (\n                        <TransactionFieldLoader />\n                    )}\n                </div>\n            </div>\n        </Popover>\n    );\n});\n\nTransaction.propTypes = {\n    contract: PropTypes.object,\n};\n\nexport default Transaction;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { PropTypes } from 'prop-types';\nimport { CSSTransition } from 'react-transition-group';\nimport { Button, DataList, Icon, Text, ThemedScrollbars } from '@deriv/components';\nimport { isMobile, useNewRowTransition } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport Download from 'Components/download';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { transaction_elements } from 'Constants/transactions';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport Transaction from './transaction.jsx';\n\nconst TransactionItem = ({ row, is_new_row }) => {\n    const { in_prop } = useNewRowTransition(is_new_row);\n\n    switch (row.type) {\n        case transaction_elements.CONTRACT: {\n            const { data: contract } = row;\n            return (\n                <CSSTransition in={in_prop} timeout={500} classNames='list__animation'>\n                    <Transaction contract={contract} />\n                </CSSTransition>\n            );\n        }\n        case transaction_elements.DIVIDER: {\n            return (\n                <div className='transactions__divider'>\n                    <div className='transactions__divider-line' />\n                </div>\n            );\n        }\n        default: {\n            return null;\n        }\n    }\n};\n\nconst Transactions = observer(({ is_drawer_open }) => {\n    const { run_panel, transactions } = useDBotStore();\n    const { contract_stage } = run_panel;\n    const { transactions: transaction_list, onMount, onUnmount, toggleTransactionDetailsModal } = transactions;\n\n    React.useEffect(() => {\n        onMount();\n        return () => onUnmount();\n    }, [onMount, onUnmount]);\n\n    const is_mobile = isMobile();\n\n    return (\n        <div\n            className={classnames('transactions', {\n                'run-panel-tab__content': !is_mobile,\n                'run-panel-tab__content--mobile': is_mobile && is_drawer_open,\n            })}\n        >\n            <div className='download__container transaction-details__button-container'>\n                <Download tab='transactions' />\n                <Button\n                    id='download__container__view-detail-button'\n                    className='download__container__view-detail-button'\n                    is_disabled={!transaction_list?.length}\n                    text={localize('View Detail')}\n                    onClick={() => {\n                        toggleTransactionDetailsModal(true);\n                    }}\n                    secondary\n                    icon={<Icon icon='IcDbotViewDetail' size={18} />}\n                />\n            </div>\n            <div className='transactions__header'>\n                <span className='transactions__header-column transactions__header-type'>{localize('Type')}</span>\n                <span className='transactions__header-column transactions__header-spot'>\n                    {localize('Entry/Exit spot')}\n                </span>\n                <span className='transactions__header-column transactions__header-profit'>\n                    {localize('Buy price and P/L')}\n                </span>\n            </div>\n            <div\n                className={classnames({\n                    transactions__content: !is_mobile,\n                    'transactions__content--mobile': is_mobile,\n                })}\n            >\n                <div className='transactions__scrollbar'>\n                    {transaction_list?.length ? (\n                        <DataList\n                            className='transactions'\n                            data_source={transaction_list}\n                            rowRenderer={props => <TransactionItem {...props} />}\n                            keyMapper={row => {\n                                switch (row.type) {\n                                    case transaction_elements.CONTRACT: {\n                                        return row.data.transaction_ids.buy;\n                                    }\n                                    case transaction_elements.DIVIDER: {\n                                        return row.data;\n                                    }\n                                    default: {\n                                        return null;\n                                    }\n                                }\n                            }}\n                            getRowSize={({ index }) => {\n                                const row = transaction_list?.[index];\n                                switch (row.type) {\n                                    case transaction_elements.CONTRACT: {\n                                        return 50;\n                                    }\n                                    case transaction_elements.DIVIDER: {\n                                        return 21;\n                                    }\n                                    default: {\n                                        return 0;\n                                    }\n                                }\n                            }}\n                        />\n                    ) : (\n                        <>\n                            {contract_stage >= contract_stages.STARTING ? (\n                                <Transaction contract={null} />\n                            ) : (\n                                <ThemedScrollbars>\n                                    <div className='transactions-empty-box'>\n                                        <div className='transactions-empty'>\n                                            <div className='transactions-empty__icon-box'>\n                                                <Icon\n                                                    icon='IcBox'\n                                                    className='transactions-empty__icon'\n                                                    size={64}\n                                                    color='secondary'\n                                                />\n                                            </div>\n                                            <Text\n                                                as='h4'\n                                                size='xs'\n                                                weight='bold'\n                                                align='center'\n                                                color='less-prominent'\n                                                line_height='xxs'\n                                                className='transactions-empty__header'\n                                            >\n                                                {localize('There are no transactions to display')}\n                                            </Text>\n                                            <div className='transactions-empty__message'>\n                                                <Text size='xxs' color='less-prominent'>\n                                                    {localize('Here are the possible reasons:')}\n                                                </Text>\n                                                <ul className='transactions-empty__list'>\n                                                    <li>{localize('The bot is not running')}</li>\n                                                    <li>{localize('The stats are cleared')}</li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </ThemedScrollbars>\n                            )}\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n});\n\nTransactions.propTypes = {\n    is_drawer_open: PropTypes.bool,\n};\n\nexport default Transactions;\n","import Transactions from './transactions.jsx';\nimport './transactions.scss';\n\nexport default Transactions;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { Button, Drawer, Modal, Money, Tabs, Text, ThemedScrollbars } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\n\nimport Journal from 'Components/journal';\nimport SelfExclusion from 'Components/self-exclusion';\nimport Summary from 'Components/summary';\nimport TradeAnimation from 'Components/trade-animation';\nimport Transactions from 'Components/transactions';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { popover_zindex } from 'Constants/z-indexes';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TStatisticsTile = {\n    content: React.ElementType | string;\n    contentClassName: string;\n    title: string;\n};\n\ntype TStatisticsSummary = {\n    currency: string;\n    is_mobile: boolean;\n    lost_contracts: number;\n    number_of_runs: number;\n    total_stake: number;\n    total_payout: number;\n    toggleStatisticsInfoModal: () => void;\n    total_profit: number;\n    won_contracts: number;\n};\ntype TDrawerHeader = {\n    is_clear_stat_disabled: boolean;\n    is_mobile: boolean;\n    is_drawer_open: boolean;\n    onClearStatClick: () => void;\n};\n\ntype TDrawerContent = {\n    active_index: number;\n    is_drawer_open: boolean;\n    active_tour: string;\n    setActiveTabIndex: () => void;\n};\n\ntype TDrawerFooter = {\n    is_clear_stat_disabled: boolean;\n    onClearStatClick: () => void;\n};\n\ntype TStatisticsInfoModal = {\n    is_mobile: boolean;\n    is_statistics_info_modal_open: boolean;\n    toggleStatisticsInfoModal: () => void;\n};\n\nconst StatisticsTile = ({ content, contentClassName, title }: TStatisticsTile) => (\n    <div className='run-panel__tile'>\n        <div className='run-panel__tile-title'>{title}</div>\n        <div className={classNames('run-panel__tile-content', contentClassName)}>{content}</div>\n    </div>\n);\n\nexport const StatisticsSummary = ({\n    currency,\n    is_mobile,\n    lost_contracts,\n    number_of_runs,\n    total_stake,\n    total_payout,\n    toggleStatisticsInfoModal,\n    total_profit,\n    won_contracts,\n}: TStatisticsSummary) => (\n    <div\n        className={classNames('run-panel__stat', {\n            'run-panel__stat--mobile': is_mobile,\n        })}\n    >\n        <div className='run-panel__stat--info' onClick={toggleStatisticsInfoModal}>\n            <div className='run-panel__stat--info-item'>\n                <Localize i18n_default_text=\"What's this?\" />\n            </div>\n        </div>\n        <div className='run-panel__stat--tiles'>\n            <StatisticsTile\n                title={localize('Total stake')}\n                alignment='top'\n                content={<Money amount={total_stake} currency={currency} show_currency />}\n            />\n            <StatisticsTile\n                title={localize('Total payout')}\n                alignment='top'\n                content={<Money amount={total_payout} currency={currency} show_currency />}\n            />\n            <StatisticsTile title={localize('No. of runs')} alignment='top' content={number_of_runs} />\n            <StatisticsTile title={localize('Contracts lost')} alignment='bottom' content={lost_contracts} />\n            <StatisticsTile title={localize('Contracts won')} alignment='bottom' content={won_contracts} />\n            <StatisticsTile\n                title={localize('Total profit/loss')}\n                content={<Money amount={total_profit} currency={currency} has_sign show_currency />}\n                alignment='bottom'\n                contentClassName={classNames('run-panel__stat-amount', {\n                    'run-panel__stat-amount--positive': total_profit > 0,\n                    'run-panel__stat-amount--negative': total_profit < 0,\n                })}\n            />\n        </div>\n    </div>\n);\n\nconst DrawerHeader = ({ is_clear_stat_disabled, is_mobile, is_drawer_open, onClearStatClick }: TDrawerHeader) =>\n    is_mobile &&\n    is_drawer_open && (\n        <Button\n            id='db-run-panel__clear-button'\n            className='run-panel__clear-button'\n            is_disabled={is_clear_stat_disabled}\n            text={localize('Reset')}\n            onClick={onClearStatClick}\n            secondary\n        />\n    );\n\nconst DrawerContent = ({ active_index, is_drawer_open, active_tour, setActiveTabIndex, ...props }: TDrawerContent) => {\n    return (\n        <>\n            <Tabs active_index={active_index} onTabItemClick={setActiveTabIndex} top>\n                <div id='db-run-panel-tab__summary' label={localize('Summary')}>\n                    <Summary is_drawer_open={is_drawer_open} />\n                </div>\n                <div id='db-run-panel-tab__transactions' label={localize('Transactions')}>\n                    <Transactions is_drawer_open={is_drawer_open} />\n                </div>\n                <div id='db-run-panel-tab__journal' label={localize('Journal')}>\n                    <Journal />\n                </div>\n            </Tabs>\n            {((is_drawer_open && active_index !== 2) || active_tour) && <StatisticsSummary {...props} />}\n        </>\n    );\n};\n\nconst DrawerFooter = ({ is_clear_stat_disabled, onClearStatClick }: TDrawerFooter) => (\n    <div className='run-panel__footer'>\n        <Button\n            id='db-run-panel__clear-button'\n            className='run-panel__footer-button'\n            is_disabled={is_clear_stat_disabled}\n            text={localize('Reset')}\n            onClick={onClearStatClick}\n            has_effect\n            secondary\n        />\n    </div>\n);\n\nconst MobileDrawerFooter = () => {\n    return (\n        <div className='controls__section'>\n            <div className='controls__buttons'>\n                <TradeAnimation className='controls__animation' should_show_overlay info_direction={'right'} />\n            </div>\n        </div>\n    );\n};\n\nconst StatisticsInfoModal = ({\n    is_mobile,\n    is_statistics_info_modal_open,\n    toggleStatisticsInfoModal,\n}: TStatisticsInfoModal) => {\n    return (\n        <Modal\n            className={classNames('statistics__modal', { 'statistics__modal--mobile': is_mobile })}\n            title={localize(\"What's this?\")}\n            is_open={is_statistics_info_modal_open}\n            toggleModal={toggleStatisticsInfoModal}\n            width={'440px'}\n        >\n            <Modal.Body>\n                <div className={classNames('statistics__modal-body', { 'statistics__modal-body--mobile': is_mobile })}>\n                    <ThemedScrollbars className='statistics__modal-scrollbar'>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content no-margin'>\n                            {localize('Total stake')}\n                        </Text>\n                        <Text as='p'>{localize('Total stake since you last cleared your stats.')}</Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('Total payout')}\n                        </Text>\n                        <Text as='p'>{localize('Total payout since you last cleared your stats.')}</Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('No. of runs')}\n                        </Text>\n                        <Text as='p'>\n                            {localize(\n                                'The number of times your bot has run since you last cleared your stats. Each run includes the execution of all the root blocks.'\n                            )}\n                        </Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('Contracts lost')}\n                        </Text>\n                        <Text as='p'>\n                            {localize('The number of contracts you have lost since you last cleared your stats.')}\n                        </Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('Contracts won')}\n                        </Text>\n                        <Text as='p'>\n                            {localize('The number of contracts you have won since you last cleared your stats.')}\n                        </Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('Total profit/loss')}\n                        </Text>\n                        <Text as='p'>\n                            {localize(\n                                'Your total profit/loss since you last cleared your stats. It is the difference between your total payout and your total stake.'\n                            )}\n                        </Text>\n                    </ThemedScrollbars>\n                </div>\n            </Modal.Body>\n        </Modal>\n    );\n};\n\nconst RunPanel = observer(() => {\n    const { run_panel, dashboard } = useDBotStore();\n    const {\n        client,\n        ui: { is_mobile },\n    } = useStore();\n    const { currency } = client;\n    const {\n        active_index,\n        is_drawer_open,\n        is_statistics_info_modal_open,\n        is_clear_stat_disabled,\n        onClearStatClick,\n        onMount,\n        onRunButtonClick,\n        onUnmount,\n        setActiveTabIndex,\n        toggleDrawer,\n        toggleStatisticsInfoModal,\n        statistics,\n    } = run_panel;\n    const { active_tour, active_tab } = dashboard;\n    const { total_payout, total_profit, total_stake, won_contracts, lost_contracts, number_of_runs } = statistics;\n    const { BOT_BUILDER, CHART } = DBOT_TABS;\n\n    React.useEffect(() => {\n        onMount();\n        return () => onUnmount();\n    }, [onMount, onUnmount]);\n\n    React.useEffect(() => {\n        if (is_mobile) {\n            toggleDrawer(false);\n        }\n    }, []);\n\n    const content = (\n        <DrawerContent\n            active_index={active_index}\n            currency={currency}\n            is_drawer_open={is_drawer_open}\n            is_mobile={is_mobile}\n            lost_contracts={lost_contracts}\n            number_of_runs={number_of_runs}\n            setActiveTabIndex={setActiveTabIndex}\n            toggleStatisticsInfoModal={toggleStatisticsInfoModal}\n            total_payout={total_payout}\n            total_profit={total_profit}\n            total_stake={total_stake}\n            won_contracts={won_contracts}\n            active_tour={active_tour}\n        />\n    );\n\n    const footer = <DrawerFooter is_clear_stat_disabled={is_clear_stat_disabled} onClearStatClick={onClearStatClick} />;\n\n    const header = (\n        <DrawerHeader\n            is_clear_stat_disabled={is_clear_stat_disabled}\n            is_mobile={is_mobile}\n            is_drawer_open={is_drawer_open}\n            onClearStatClick={onClearStatClick}\n        />\n    );\n\n    const show_run_panel = [BOT_BUILDER, CHART].includes(active_tab) || active_tour;\n    if ((!show_run_panel && !is_mobile) || active_tour === 'bot_builder') return null;\n\n    return (\n        <>\n            <div className={is_mobile && is_drawer_open ? 'run-panel__container--mobile' : 'run-panel'}>\n                <Drawer\n                    anchor='right'\n                    className={classNames('run-panel', {\n                        'run-panel__container': !is_mobile,\n                        'run-panel__container--tour-active': !is_mobile && active_tour,\n                    })}\n                    contentClassName='run-panel__content'\n                    header={header}\n                    footer={!is_mobile && footer}\n                    is_open={is_drawer_open}\n                    toggleDrawer={toggleDrawer}\n                    width={366}\n                    zIndex={popover_zindex.RUN_PANEL}\n                >\n                    {content}\n                </Drawer>\n                {is_mobile && <MobileDrawerFooter />}\n            </div>\n            <SelfExclusion onRunButtonClick={onRunButtonClick} />\n            <StatisticsInfoModal\n                is_mobile={is_mobile}\n                is_statistics_info_modal_open={is_statistics_info_modal_open}\n                toggleStatisticsInfoModal={toggleStatisticsInfoModal}\n            />\n        </>\n    );\n});\n\nexport default RunPanel;\n","import React, { ReactElement } from 'react';\nimport classNames from 'classnames';\nimport ContentLoader from 'react-content-loader';\nimport { getContractTypeName } from '@deriv/bot-skeleton';\nimport { Icon, IconTradeTypes, Popover } from '@deriv/components';\nimport { convertDateFormat } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { TTransaction } from './transaction-details.types';\n\nconst PARENT_CLASS = 'transaction-details-modal-mobile';\n\ntype TCardRow = {\n    title: string;\n    label: string | number | ReactElement;\n    right_aligned: boolean;\n    large_title: boolean;\n    loader: boolean;\n};\n\nconst CellLoader = () => (\n    <ContentLoader\n        className='transactions__loader-text'\n        data-testid='transaction_details_card_cell_loader'\n        height={10}\n        width={80}\n        speed={3}\n        foregroundColor={'var(--general-section-2)'}\n        backgroundColor={'var(--general-hover)'}\n    >\n        <rect x='0' y='0' rx='0' ry='0' width='100' height='12' />\n    </ContentLoader>\n);\n\nconst CardColumn = ({\n    label = '',\n    large_title = false,\n    right_aligned = false,\n    title = '',\n    loader = false,\n}: Partial<TCardRow>) => (\n    <div\n        className={classNames(`${PARENT_CLASS}__card__column`, {\n            [`${PARENT_CLASS}__right-align`]: right_aligned,\n        })}\n    >\n        {title && (\n            <div\n                className={classNames({\n                    [`${PARENT_CLASS}__small-title`]: !large_title,\n                    [`${PARENT_CLASS}__large-title`]: large_title,\n                })}\n            >\n                {localize(title)}\n            </div>\n        )}\n        <div className={`${PARENT_CLASS}__label`}>{loader ? <CellLoader /> : label}</div>\n    </div>\n);\n\nconst IconContainer = ({ message, icon }: { message: string; icon: ReactElement }) => (\n    <div className={classNames(`${PARENT_CLASS}__table-cell`, `${PARENT_CLASS}__table-cell__icon-wrapper`)}>\n        {message && (\n            <Popover alignment='right' message={message} zIndex={'7'}>\n                {icon}\n            </Popover>\n        )}\n    </div>\n);\n\nexport default function MobileTransactionCards({ transaction }: { transaction: TTransaction }) {\n    return (\n        <div className={`${PARENT_CLASS}__card`}>\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn\n                    label={\n                        <div className={`${PARENT_CLASS}__icon-wrapper`}>\n                            <IconContainer\n                                message={transaction?.display_name}\n                                icon={<Icon icon={`IcUnderlying${transaction?.underlying}`} size={32} />}\n                            />\n                            <IconContainer\n                                message={getContractTypeName(transaction)}\n                                icon={<IconTradeTypes type={transaction?.contract_type} size={24} />}\n                            />\n                        </div>\n                    }\n                />\n            </div>\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn title='Ref. ID' label={transaction?.transaction_ids?.buy} />\n            </div>\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn\n                    title='Timestamp'\n                    label={convertDateFormat(\n                        transaction?.date_start,\n                        'YYYY-M-D HH:mm:ss [GMT]',\n                        'YYYY-MM-DD HH:mm:ss [GMT]'\n                    )}\n                />\n                <CardColumn\n                    title='Entry Spot'\n                    label={transaction?.entry_tick}\n                    right_aligned\n                    loader={!transaction.entry_tick}\n                />\n            </div>\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn title='Buy Price' label={Math.abs(transaction?.buy_price ?? 0).toFixed(2)} />\n                <CardColumn\n                    title='Exit Spot'\n                    label={transaction?.exit_tick}\n                    right_aligned\n                    loader={!transaction.exit_tick}\n                />\n            </div>\n\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn title='Profit / Loss' large_title />\n                <CardColumn\n                    label={\n                        <div\n                            className={classNames({\n                                [`${PARENT_CLASS}__card__profit--win`]: transaction?.profit > 0,\n                                [`${PARENT_CLASS}__card__profit--loss`]: transaction?.profit < 0,\n                            })}\n                        >\n                            {Math.abs(transaction?.profit ?? 0).toFixed(2)}\n                        </div>\n                    }\n                    right_aligned\n                    loader={!transaction.is_completed}\n                />\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\n\nimport { MobileFullPageModal } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport { StatisticsSummary } from 'Components/run-panel/run-panel';\nimport { transaction_elements } from 'Constants/transactions';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport MobileTransactionCards from './mobile-transaction-card';\nimport { TRunPanelStore, TTransactionStore } from './transaction-details.types';\n\nimport './transaction-details-mobile.scss';\n\nconst TransactionDetailsMobile = observer(() => {\n    const { client } = useStore();\n    const { transactions, run_panel } = useDBotStore();\n    const {\n        toggleTransactionDetailsModal,\n        is_transaction_details_modal_open,\n        transactions: transaction_list,\n    }: Partial<TTransactionStore> = transactions;\n    const { statistics, toggleStatisticsInfoModal }: Partial<TRunPanelStore> = run_panel;\n\n    return (\n        <MobileFullPageModal\n            is_modal_open={is_transaction_details_modal_open}\n            className='transaction-details-modal-mobile'\n            header={localize('Transactions detailed summary')}\n            onClickClose={() => {\n                toggleTransactionDetailsModal(false);\n            }}\n            height_offset='80px'\n        >\n            <div className='transaction-details-modal-mobile__wrapper' data-testid='transaction_details_cards'>\n                {transaction_list?.map(({ data, type }) => {\n                    if (type === transaction_elements.CONTRACT)\n                        return <MobileTransactionCards transaction={data} key={data?.transaction_ids?.buy} />;\n                    return (\n                        <div\n                            className='transaction-details-modal-mobile__divider'\n                            key={`transaction-row-divider-${data}`}\n                        >\n                            <div className='transactions__divider-line' />\n                        </div>\n                    );\n                })}\n            </div>\n            <div className='transaction-details-modal-mobile__card__footer'>\n                <StatisticsSummary\n                    currency={client?.currency}\n                    is_mobile={true}\n                    lost_contracts={statistics?.lost_contracts ?? 0}\n                    number_of_runs={statistics?.number_of_runs ?? 0}\n                    toggleStatisticsInfoModal={toggleStatisticsInfoModal}\n                    total_payout={statistics?.total_payout ?? 0}\n                    total_profit={statistics?.total_profit ?? 0}\n                    total_stake={statistics?.total_stake ?? 0}\n                    won_contracts={statistics?.won_contracts ?? 0}\n                />\n            </div>\n        </MobileFullPageModal>\n    );\n});\n\nexport default TransactionDetailsMobile;\n","import React, { Suspense } from 'react';\nimport { Loading } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport TransactionDetailsDesktop from './transaction-details-desktop';\nimport TransactionDetailsMobile from './transaction-details-mobile';\n\nexport const TransactionDetails = observer(() => {\n    const {\n        ui: { is_mobile },\n    } = useStore();\n    return (\n        <Suspense fallback={<Loading />}>\n            {is_mobile ? <TransactionDetailsMobile /> : <TransactionDetailsDesktop />}\n        </Suspense>\n    );\n});\n\nexport default TransactionDetails;\n","import TransactionDetails from './transaction-details';\n\nexport default TransactionDetails;\n","import Audio from './audio';\n\nexport default Audio;\n","import React from 'react';\n\nconst Audio = () => (\n    <>\n        <audio id='announcement' aria-label='audio' src={`${__webpack_public_path__}media/announcement.mp3`} />\n        <audio id='earned-money' aria-label='audio' src={`${__webpack_public_path__}media/coins.mp3`} />\n        <audio id='job-done' aria-label='audio' src={`${__webpack_public_path__}media/job-done.mp3`} />\n        <audio id='error' aria-label='audio' src={`${__webpack_public_path__}media/out-of-bounds.mp3`} />\n        <audio id='severe-error' aria-label='audio' src={`${__webpack_public_path__}media/i-am-being-serious.mp3`} />\n    </>\n);\n\nexport default Audio;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { observer, useStore } from '@deriv/stores';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst { BOT_BUILDER, CHART } = DBOT_TABS;\n\nconst BotNotificationMessages = observer(() => {\n    const { ui } = useStore();\n    const { run_panel, dashboard } = useDBotStore();\n\n    const { is_drawer_open } = run_panel;\n    const Notifications = ui.notification_messages_ui;\n    const { active_tab, is_info_panel_visible } = dashboard;\n\n    return (\n        <div\n            className={classNames('notifications-container', {\n                'notifications-container__dashboard': active_tab === 0 && is_info_panel_visible,\n                'notifications-container--panel-open': [BOT_BUILDER, CHART].includes(active_tab) && is_drawer_open,\n            })}\n            data-testid='dt_notifications_container'\n        >\n            <Notifications />\n        </div>\n    );\n});\n\nexport default BotNotificationMessages;\n","import BotNotificationMessages from './bot-notification-messages';\nimport './bot-notification-messages.scss';\n\nexport default BotNotificationMessages;\n","import React from 'react';\nimport { getUrlBase, moduleLoader } from '@deriv/shared';\n\nlet module: Promise<any> | undefined;\n\nconst init = () => {\n    module = moduleLoader(() => {\n        // TODO: Proper fix for types in smartcharts\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        return import(/* webpackChunkName: \"smart_chart\" */ '@deriv/deriv-charts');\n    });\n\n    module.then(({ setSmartChartsPublicPath }: { setSmartChartsPublicPath: (path: string) => void }) => {\n        setSmartChartsPublicPath(getUrlBase('/js/smartcharts/'));\n    });\n};\n\n// React.Lazy expects a default export for the component\n// SmartChart library exports many components\nconst load = (component_name: string) => () => {\n    if (!module) {\n        init();\n    }\n    return module!.then(module => {\n        return { default: module[component_name] };\n    });\n};\n\nexport const SmartChart = React.lazy(load('SmartChart'));\nexport const ChartTitle = React.lazy(load('ChartTitle'));\n\nexport const ChartSize = React.lazy(load('ChartSize'));\nexport const ChartMode = React.lazy(load('ChartMode'));\nexport const DrawTools = React.lazy(load('DrawTools'));\nexport const Share = React.lazy(load('Share'));\nexport const StudyLegend = React.lazy(load('StudyLegend'));\nexport const Views = React.lazy(load('Views'));\nexport const ToolbarWidget = React.lazy(load('ToolbarWidget'));\n\nexport const FastMarker = React.lazy(load('FastMarker'));\nexport const RawMarker = React.lazy(load('RawMarker'));\n","import React from 'react';\nimport { getUrlBase, moduleLoader } from '@deriv/shared';\n\nlet module: Promise<any> | undefined;\n\nconst init = () => {\n    module = moduleLoader(() => {\n        // TODO: Proper fix for types in smartcharts\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        return import(/* webpackChunkName: \"smart_chart_beta\" */ '@deriv/deriv-charts-beta');\n    });\n\n    module.then(({ setSmartChartsPublicPath }: { setSmartChartsPublicPath: (path: string) => void }) => {\n        setSmartChartsPublicPath(getUrlBase('/js/smartchartsbeta/'));\n    });\n};\n\n// React.Lazy expects a default export for the component\n// SmartChart library exports many components\nconst load = (component_name: string) => () => {\n    if (!module) {\n        init();\n    }\n    return module!.then(module => {\n        return { default: module[component_name] };\n    });\n};\n\nexport const SmartChartBeta = React.lazy(load('SmartChart'));\nexport const ChartTitleBeta = React.lazy(load('ChartTitle'));\n\nexport const ChartSizeBeta = React.lazy(load('ChartSize'));\nexport const ChartModeBeta = React.lazy(load('ChartMode'));\nexport const DrawToolsBeta = React.lazy(load('DrawTools'));\nexport const ShareBeta = React.lazy(load('Share'));\nexport const StudyLegendBeta = React.lazy(load('StudyLegend'));\nexport const ViewsBeta = React.lazy(load('Views'));\nexport const ToolbarWidgetBeta = React.lazy(load('ToolbarWidget'));\n\nexport const FastMarkerBeta = React.lazy(load('FastMarker'));\nexport const RawMarkerBeta = React.lazy(load('RawMarker'));\n","import React from 'react';\nimport { isDesktop, isMobile } from '@deriv/shared';\nimport { ChartMode, DrawTools, Share, StudyLegend, ToolbarWidget, Views } from './v1';\nimport { ChartModeBeta, DrawToolsBeta, ShareBeta, StudyLegendBeta, ToolbarWidgetBeta, ViewsBeta } from './v2';\n\ntype TToolbarWidgetsProps = {\n    is_beta_chart?: boolean;\n    updateChartType: (chart_type: string) => void;\n    updateGranularity: (updateGranularity: number) => void;\n};\n\nconst ToolbarWidgets = ({ is_beta_chart, updateChartType, updateGranularity }: TToolbarWidgetsProps) => {\n    return (\n        <>\n            {is_beta_chart && (\n                <ToolbarWidgetBeta position={isMobile() ? 'bottom' : null}>\n                    <ChartModeBeta\n                        portalNodeId='modal_root'\n                        onChartType={updateChartType}\n                        onGranularity={updateGranularity}\n                    />\n                    {isDesktop() && (\n                        <>\n                            <StudyLegendBeta portalNodeId='modal_root' searchInputClassName='data-hj-whitelist' />\n                            <ViewsBeta portalNodeId='modal_root' searchInputClassName='data-hj-whitelist' />\n                            <DrawToolsBeta portalNodeId='modal_root' />\n                            <ShareBeta portalNodeId='modal_root' />\n                        </>\n                    )}\n                </ToolbarWidgetBeta>\n            )}\n            {!is_beta_chart && (\n                <ToolbarWidget position={isMobile() ? 'bottom' : null}>\n                    <ChartMode\n                        portalNodeId='modal_root'\n                        onChartType={updateChartType}\n                        onGranularity={updateGranularity}\n                    />\n                    {isDesktop() && (\n                        <>\n                            <StudyLegend portalNodeId='modal_root' searchInputClassName='data-hj-whitelist' />\n                            <Views portalNodeId='modal_root' searchInputClassName='data-hj-whitelist' />\n                            <DrawTools portalNodeId='modal_root' />\n                            <Share portalNodeId='modal_root' />\n                        </>\n                    )}\n                </ToolbarWidget>\n            )}\n        </>\n    );\n};\n\nexport default ToolbarWidgets;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { isDesktop, isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport ToolbarWidgets from './toolbar-widgets';\nimport { ChartTitle, SmartChart } from './v1';\nimport { ChartTitleBeta, SmartChartBeta } from './v2';\n\nconst Chart = observer(({ show_digits_stats }: { show_digits_stats: boolean }) => {\n    const barriers: [] = [];\n    const { common, ui, client } = useStore();\n    const { chart_store, run_panel } = useDBotStore();\n\n    const {\n        chart_type,\n        getMarketsOrder,\n        granularity,\n        onSymbolChange,\n        setChartStatus,\n        symbol,\n        updateChartType,\n        updateGranularity,\n        wsForget,\n        wsForgetStream,\n        wsSendRequest,\n        wsSubscribe,\n    } = chart_store;\n    const { is_drawer_open } = run_panel;\n    const is_socket_opened = common.is_socket_opened;\n    const settings = {\n        assetInformation: false, // ui.is_chart_asset_info_visible,\n        countdown: true,\n        isHighestLowestMarkerEnabled: false, // TODO: Pending UI,\n        language: common.current_language.toLowerCase(),\n        position: ui.is_chart_layout_default ? 'bottom' : 'left',\n        theme: ui.is_dark_mode_on ? 'dark' : 'light',\n    };\n\n    return (\n        <div\n            className={classNames('dashboard__chart-wrapper', {\n                'dashboard__chart-wrapper--expanded': is_drawer_open && !isMobile(),\n            })}\n        >\n            {client.is_beta_chart && (\n                <SmartChartBeta\n                    id='dbot'\n                    barriers={barriers}\n                    showLastDigitStats={show_digits_stats}\n                    chartControlsWidgets={null}\n                    enabledChartFooter={false}\n                    chartStatusListener={v => setChartStatus(!v)}\n                    toolbarWidget={() => (\n                        <ToolbarWidgets\n                            is_beta_chart={true}\n                            updateChartType={updateChartType}\n                            updateGranularity={updateGranularity}\n                        />\n                    )}\n                    chartType={chart_type}\n                    isMobile={isMobile()}\n                    enabledNavigationWidget={isDesktop()}\n                    granularity={granularity}\n                    requestAPI={wsSendRequest}\n                    requestForget={wsForget}\n                    requestForgetStream={wsForgetStream}\n                    requestSubscribe={wsSubscribe}\n                    settings={settings}\n                    symbol={symbol}\n                    topWidgets={() => <ChartTitleBeta onChange={onSymbolChange} />}\n                    isConnectionOpened={is_socket_opened}\n                    getMarketsOrder={getMarketsOrder}\n                    isLive={true}\n                    leftMargin={80}\n                />\n            )}\n            {!client.is_beta_chart && (\n                <SmartChart\n                    id='dbot'\n                    barriers={barriers}\n                    showLastDigitStats={show_digits_stats}\n                    chartControlsWidgets={null}\n                    enabledChartFooter={false}\n                    chartStatusListener={v => setChartStatus(!v)}\n                    toolbarWidget={() => (\n                        <ToolbarWidgets\n                            is_beta_chart={false}\n                            updateChartType={updateChartType}\n                            updateGranularity={updateGranularity}\n                        />\n                    )}\n                    chartType={chart_type}\n                    isMobile={isMobile()}\n                    enabledNavigationWidget={isDesktop()}\n                    granularity={granularity}\n                    requestAPI={wsSendRequest}\n                    requestForget={wsForget}\n                    requestForgetStream={wsForgetStream}\n                    requestSubscribe={wsSubscribe}\n                    settings={settings}\n                    symbol={symbol}\n                    topWidgets={() => <ChartTitle onChange={onSymbolChange} />}\n                    isConnectionOpened={is_socket_opened}\n                    getMarketsOrder={getMarketsOrder}\n                />\n            )}\n        </div>\n    );\n});\n\nexport default Chart;\n","import Chart from './chart';\nimport './chart.scss';\n\nexport default Chart;\n","export const initTrashCan = (margin = 16, height = 36) => {\n    /**\n     * Distance between trashcan and bottom edge of workspace.\n     * @type {number}\n     * @private\n     */\n    Blockly.Trashcan.prototype.MARGIN_BOTTOM_ = margin * 2 + height; // eslint-disable-line\n\n    /**\n     * Distance between trashcan and right edge of workspace.\n     * @type {number}\n     * @private\n     */\n    Blockly.Trashcan.prototype.MARGIN_SIDE_ = margin; // eslint-disable-line\n\n    /**\n     * Inspect the contents of the trash.\n     * @deriv/bot: Noop for us, restore original functionality when trashcan can be inspected.\n     */\n    Blockly.Trashcan.prototype.click = function () {};\n\n    window.dispatchEvent(new Event('resize')); // trigger UI update\n};\n","import RunPanel from './run-panel';\nimport './run-panel.scss';\n\nexport default RunPanel;\n","import React from 'react';\nimport TradeAnimation from 'Components/trade-animation';\n\nconst RunStrategy = () => (\n    <div className='toolbar__section' data-testid='dt_run_strategy'>\n        <TradeAnimation className='toolbar__animation' should_show_overlay info_direction='left' />\n    </div>\n);\n\nexport default RunStrategy;\n","import React from 'react';\n\nimport { observer } from '@deriv/stores';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { getSetting } from 'Utils/settings';\n\nimport ReactJoyrideWrapper from '../common/react-joyride-wrapper';\nimport TourStartDialog from '../common/tour-start-dialog';\nimport { DBOT_ONBOARDING } from '../config';\nimport { useTourHandler } from '../hooks/useTourHandler';\n\nconst OnboardingTourDesktop = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { active_tab, active_tour, setActiveTour, setTourDialogVisibility } = dashboard;\n    const { is_close_tour, is_finished, handleJoyrideCallback, setIsCloseTour } = useTourHandler();\n    React.useEffect(() => {\n        if (is_close_tour || is_finished) {\n            setIsCloseTour(false);\n            setActiveTour('');\n        }\n    }, [is_close_tour, is_finished, setActiveTour, setIsCloseTour]);\n\n    const token = getSetting('onboard_tour_token');\n    if (!token && active_tab === 0) setTourDialogVisibility(true);\n\n    return (\n        <>\n            <TourStartDialog />\n            {active_tour && (\n                <ReactJoyrideWrapper handleCallback={handleJoyrideCallback} steps={DBOT_ONBOARDING} spotlightClicks />\n            )}\n        </>\n    );\n});\n\nexport default OnboardingTourDesktop;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { Icon, ProgressBarTracker, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { getSetting } from 'Utils/settings';\n\nimport TourButton from '../common/tour-button';\nimport { DBOT_ONBOARDING_MOBILE, TMobileTourConfig } from '../config';\n\nconst default_tour_data = {\n    content: [],\n    header: '',\n    img: '',\n    tour_step_key: 1,\n};\n\ntype TTourData = TMobileTourConfig & {\n    img: string;\n    tour_step_key: number;\n};\n\nconst OnboardingTourMobile = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { onCloseTour, onTourEnd, setTourActiveStep, active_tour, active_tab, setActiveTour } = dashboard;\n    const [tour_step, setStep] = React.useState<number>(1);\n    const [tour_data, setTourData] = React.useState<TTourData>(default_tour_data);\n    const { content, header, img, media, tour_step_key } = tour_data;\n    const start_button = tour_step === 1 ? localize('Start') : localize('Next');\n    const tour_button_text = tour_step === 8 ? localize('Got it, thanks!') : start_button;\n    const test_id = tour_step_key === 8 ? 'finish-onboard-tour' : 'next-onboard-tour';\n    const hide_prev_button = [1, 2, 8];\n    const is_tour_active = active_tour === 'onboarding';\n\n    React.useEffect(() => {\n        DBOT_ONBOARDING_MOBILE.forEach(data => {\n            if (data.tour_step_key === tour_step) {\n                setTourData(data);\n            }\n            setTourActiveStep(tour_step);\n        });\n    }, [tour_step]);\n\n    const token = getSetting('onboard_tour_token');\n    if (!token && active_tab === 0) setActiveTour('onboarding');\n\n    if (!active_tour) {\n        return null;\n    }\n\n    return (\n        <div\n            className={classNames('dbot-slider', {\n                'dbot-slider--active': tour_step === 1,\n                'dbot-slider--tour-position': tour_step !== 1,\n            })}\n            data-testid='onboarding-tour-mobile'\n        >\n            {tour_step_key !== 1 && (\n                <div className='dbot-slider__navbar'>\n                    <Text\n                        color='less-prominent'\n                        weight='less-prominent'\n                        line_height='s'\n                        size='xxs'\n                        data-testid='dbot-onboard-slider__navbar'\n                    >{`${tour_step_key - 1}/7`}</Text>\n                    <span onClick={onCloseTour}>\n                        <Icon\n                            icon='IcCross'\n                            data_testid='exit-onboard-tour'\n                            className='db-contract-card__result-icon'\n                            color='secondary'\n                        />\n                    </span>\n                </div>\n            )}\n            {header && (\n                <Text\n                    color='prominent'\n                    weight='bold'\n                    align='center'\n                    className='dbot-slider__title'\n                    as='span'\n                    line_height='s'\n                    size='xs'\n                >\n                    {localize(header)}\n                </Text>\n            )}\n            {media && (\n                <div className='dbot-slider__media'>\n                    <video\n                        autoPlay={true}\n                        loop\n                        controls\n                        preload='auto'\n                        playsInline\n                        disablePictureInPicture\n                        controlsList='nodownload'\n                        src={media}\n                    />\n                </div>\n            )}\n            {img && (\n                <div className='dbot-slider__image'>\n                    <img src={img} />\n                </div>\n            )}\n\n            {content && (\n                <>\n                    {content.map(data => {\n                        return (\n                            <Text\n                                key={data}\n                                align='center'\n                                color='prominent'\n                                className='dbot-slider__content'\n                                as='div'\n                                line_height='s'\n                                size='xxs'\n                            >\n                                {data}\n                            </Text>\n                        );\n                    })}\n                </>\n            )}\n            <div className='dbot-slider__status'>\n                <div className='dbot-slider__progress-bar'>\n                    <ProgressBarTracker\n                        step={tour_step}\n                        steps_list={DBOT_ONBOARDING_MOBILE.map(v => v.tour_step_key.toString())}\n                        onStepChange={setStep}\n                    />\n                </div>\n                <div className='dbot-slider__button-group'>\n                    {tour_step === 1 && (\n                        <TourButton\n                            onClick={() => {\n                                onCloseTour();\n                            }}\n                            label={localize('Skip')}\n                            data-testid='skip-onboard-tour'\n                        />\n                    )}\n                    {!hide_prev_button.includes(tour_step) && (\n                        <TourButton\n                            onClick={() => {\n                                setStep(tour_step - 1);\n                            }}\n                            label={localize('Previous')}\n                            data-testid='prev-onboard-tour'\n                        />\n                    )}\n                    <TourButton\n                        type='danger'\n                        onClick={() => {\n                            setStep(tour_step + 1);\n                            onTourEnd(tour_step, is_tour_active);\n                        }}\n                        label={tour_button_text}\n                        data-testid={test_id}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default OnboardingTourMobile;\n","import React from 'react';\nimport { observer } from 'mobx-react';\n\nimport { isMobile } from '@deriv/shared';\n\nimport OnboardingTourDesktop from './onboarding-tour-desktop';\nimport OnboardingTourMobile from './onboarding-tour-mobile';\n\nconst is_mobile = isMobile();\nconst OnboardTourHandler = observer(() => {\n    return <>{is_mobile ? <OnboardingTourMobile /> : <OnboardingTourDesktop />}</>;\n});\n\nexport default OnboardTourHandler;\n","import React, { RefObject } from 'react';\nimport WorkspaceControl from '../../../load-modal/workspace-control';\n\ntype TBotPreview = {\n    id_ref: RefObject<HTMLDivElement>;\n};\n\nconst BotPreview = ({ id_ref }: TBotPreview) => {\n    return (\n        <div className='load-strategy__preview-workspace-container' id='load-strategy__blockly-container' ref={id_ref}>\n            <WorkspaceControl />\n        </div>\n    );\n};\n\nexport default BotPreview;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Dialog, Icon, MobileWrapper, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { clearInjectionDiv } from 'Constants/load-modal';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport BotPreview from './bot-preview';\nimport './index.scss';\n\nconst LocalComponent = observer(() => {\n    const { load_modal, save_modal, dashboard } = useDBotStore();\n    const { handleFileChange, loadFileFromRecent, dashboard_strategies } = load_modal;\n    const { onConfirmSave } = save_modal;\n    const { setActiveTab, setPreviewOnDialog, has_mobile_preview_loaded, setActiveTabTutorial } = dashboard;\n\n    const file_input_ref = React.useRef<HTMLInputElement | null>(null);\n    const [is_file_supported, setIsFileSupported] = React.useState<boolean>(true);\n    const el_ref = React.useRef<HTMLInputElement | null>(null);\n    const is_mobile = isMobile();\n    const has_dashboard_strategies = !!dashboard_strategies?.length;\n\n    React.useEffect(() => {\n        if (el_ref.current?.children.length === 3) {\n            el_ref?.current?.removeChild(el_ref?.current?.children[1]);\n        }\n    }, [el_ref.current?.children.length]);\n\n    const renderOpenButton = () => (\n        <button\n            className='load-strategy__button-group--open'\n            onClick={() => {\n                setPreviewOnDialog(false);\n                loadFileFromRecent();\n                setActiveTab(DBOT_TABS.BOT_BUILDER);\n            }}\n        >\n            {localize('Open')}\n        </button>\n    );\n    return (\n        <div className='load-strategy__container load-strategy__container--has-footer'>\n            {is_file_supported && (\n                <div\n                    className={classNames('load-strategy__local-preview', {\n                        'load-strategy__local-preview--listed': has_dashboard_strategies,\n                    })}\n                >\n                    <div className='load-strategy__recent-preview'>\n                        <div\n                            className={classNames('load-strategy__title', 'load-strategy__recent-preview-title', {\n                                'load-strategy__title--listed': has_dashboard_strategies && is_mobile,\n                            })}\n                        >\n                            {!is_mobile && <Localize i18n_default_text='Preview' />}\n                            <div className='tab__dashboard__preview__retrigger'>\n                                <button\n                                    onClick={() => {\n                                        setActiveTab(DBOT_TABS.TUTORIAL);\n                                        setActiveTabTutorial(0);\n                                    }}\n                                >\n                                    <Icon\n                                        className='tab__dashboard__preview__retrigger__icon'\n                                        icon={'IcDbotUserGuide'}\n                                    />\n                                    {!is_mobile && (\n                                        <Text\n                                            size='xs'\n                                            line_height='s'\n                                            className={'tab__dashboard__preview__retrigger__text'}\n                                        >\n                                            {localize('User Guide')}\n                                        </Text>\n                                    )}\n                                </button>\n                            </div>\n                        </div>\n\n                        {!is_mobile && (\n                            <>\n                                <div className='load-strategy__preview-workspace'>\n                                    <BotPreview id_ref={el_ref} type={'local'} />\n                                </div>\n                                <div className='load-strategy__button-group'>\n                                    <input\n                                        type='file'\n                                        ref={file_input_ref}\n                                        accept='.xml'\n                                        style={{ display: 'none' }}\n                                        onChange={e => {\n                                            clearInjectionDiv('component', el_ref);\n                                            onConfirmSave();\n                                            setIsFileSupported(handleFileChange(e, false));\n                                        }}\n                                    />\n                                    {renderOpenButton()}\n                                </div>\n                            </>\n                        )}\n                        <MobileWrapper>\n                            <Dialog\n                                is_visible={has_mobile_preview_loaded}\n                                onCancel={() => setPreviewOnDialog(false)}\n                                is_mobile_full_width\n                                className='dc-dialog__wrapper--preview'\n                                has_close_icon\n                                title={localize('Preview')}\n                            >\n                                <BotPreview id_ref={el_ref} type='local' />\n                                <div className='load-strategy__button-group'>{renderOpenButton()}</div>\n                            </Dialog>\n                        </MobileWrapper>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n});\n\nexport default LocalComponent;\n","import React from 'react';\nimport localForage from 'localforage';\nimport LZString from 'lz-string';\nimport { getSavedWorkspaces } from '@deriv/bot-skeleton';\nimport { Dialog, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { TStrategy } from 'Types';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst DeleteDialog = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const {\n        is_delete_modal_open,\n        onToggleDeleteDialog,\n        selected_strategy_id,\n        setDashboardStrategies,\n        setSelectedStrategyId,\n        loadStrategyToBuilder,\n        previewed_strategy_id,\n        setPreviewedStrategyId,\n        refreshStrategiesTheme,\n        resetBotBuilderStrategy,\n    } = load_modal;\n    const { setOpenSettings } = dashboard;\n\n    const resetStrategiesAfterDelete = async (deleted_strategy_id: string, updated_workspaces: Array<TStrategy>) => {\n        if (updated_workspaces.length) {\n            const current_previewed_strategy = updated_workspaces?.filter(\n                (strategy: TStrategy) => strategy.id === previewed_strategy_id\n            );\n            if (selected_strategy_id === deleted_strategy_id) {\n                setSelectedStrategyId(updated_workspaces?.[0]?.id);\n                // Change bot builder strategy to the first strategy in the list\n                await loadStrategyToBuilder(updated_workspaces?.[0]);\n            }\n            if (current_previewed_strategy.length) {\n                setPreviewedStrategyId(previewed_strategy_id);\n                setSelectedStrategyId(previewed_strategy_id);\n            } else {\n                setPreviewedStrategyId(updated_workspaces?.[0]?.id);\n            }\n            // Change preview strategy to the one that was previously previewed\n            await refreshStrategiesTheme();\n        } else {\n            resetBotBuilderStrategy();\n        }\n    };\n\n    const removeBotStrategy = async (strategy_id: string) => {\n        const workspaces = await getSavedWorkspaces();\n        const updated_workspaces = workspaces.filter(\n            (strategy_from_workspace: TStrategy) => strategy_from_workspace.id !== strategy_id\n        );\n        setDashboardStrategies(updated_workspaces);\n        localForage.setItem('saved_workspaces', LZString.compress(JSON.stringify(updated_workspaces)));\n        await resetStrategiesAfterDelete(strategy_id, updated_workspaces);\n        onToggleDeleteDialog(false);\n    };\n\n    const onHandleChange = (type: string, param: boolean) => {\n        if (type === 'confirm') {\n            removeBotStrategy(selected_strategy_id);\n            setOpenSettings('delete', true);\n        }\n        onToggleDeleteDialog(param);\n    };\n\n    return (\n        <div>\n            <Dialog\n                title={localize('Delete bot')}\n                is_visible={is_delete_modal_open}\n                confirm_button_text={localize('Yes, delete')}\n                onConfirm={() => {\n                    onHandleChange('confirm', false);\n                    setOpenSettings('delete', true);\n                }}\n                cancel_button_text={localize('No')}\n                onCancel={() => {\n                    onHandleChange('cancel', false);\n                }}\n                is_mobile_full_width={false}\n                className={'dc-dialog__delete-strategy--delete'}\n                has_close_icon\n            >\n                <div>\n                    <Text color='prominent' line_height='s' size='xs'>\n                        {localize('Your bot will be permanently deleted when you hit ')}\n                        <strong>{localize('Yes, delete.')}</strong>\n                    </Text>\n                </div>\n                <div>\n                    <Text color='prominent' line_height='xl' size='xs'>\n                        {localize('Are you sure you want to delete it?')}\n                    </Text>\n                </div>\n            </Dialog>\n        </div>\n    );\n});\n\nexport default DeleteDialog;\n","import React from 'react';\n\nexport const useComponentVisibility = (ref: React.RefObject<HTMLInputElement>) => {\n    const [is_dropdown_visible, setDropdownVisibility] = React.useState(false);\n\n    const handleHideDropdown = (event: KeyboardEvent) => {\n        if (event.key.toUpperCase() === 'ESCAPE') {\n            setDropdownVisibility(false);\n        }\n    };\n\n    const handleClickOutside = (event: Event) => {\n        if (!ref?.current?.contains(event.target as Node)) {\n            setDropdownVisibility(false);\n        }\n    };\n\n    React.useEffect(() => {\n        document.addEventListener('keydown', handleHideDropdown, true);\n        document.addEventListener('click', handleClickOutside, true);\n        return () => {\n            document.removeEventListener('keydown', handleHideDropdown, true);\n            document.removeEventListener('click', handleClickOutside, true);\n        };\n    }, []);\n\n    return {\n        is_dropdown_visible,\n        setDropdownVisibility,\n    };\n};\n","import { localize } from '@deriv/translations';\n\nexport const STRATEGY = {\n    EDIT: 'edit',\n    SAVE: 'save',\n    DELETE: 'delete',\n    PREVIEW: 'preview',\n    PREVIEW_LIST: 'list',\n    INIT: 'init',\n};\n\nexport const MENU_DESKTOP = [\n    {\n        type: STRATEGY.EDIT,\n        icon: 'IcEdit',\n    },\n    {\n        type: STRATEGY.SAVE,\n        icon: 'IcSave',\n    },\n    {\n        type: STRATEGY.DELETE,\n        icon: 'IcDelete',\n    },\n];\n\nexport const CONTEXT_MENU_MOBILE = [\n    {\n        type: STRATEGY.PREVIEW_LIST,\n        icon: 'IcPreview',\n        label: localize('Preview'),\n    },\n    {\n        type: STRATEGY.EDIT,\n        icon: 'IcEdit',\n        label: localize('Edit'),\n    },\n    {\n        type: STRATEGY.SAVE,\n        icon: 'IcSave',\n        label: localize('Save'),\n    },\n    {\n        type: STRATEGY.DELETE,\n        icon: 'IcDelete',\n        label: localize('Delete'),\n    },\n];\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { timeSince } from '@deriv/bot-skeleton';\nimport { save_types } from '@deriv/bot-skeleton/src/constants/save-type';\nimport { DesktopWrapper, Icon, MobileWrapper, Text } from '@deriv/components';\nimport { isDesktop, isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\n\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { waitForDomElement } from 'Utils/dom-observer';\n\nimport { useComponentVisibility } from '../../hooks/useComponentVisibility';\n\nimport { CONTEXT_MENU_MOBILE, MENU_DESKTOP, STRATEGY } from './constants';\n\nimport './index.scss';\n\ntype TRecentWorkspace = {\n    index: number;\n    workspace: { [key: string]: string };\n    updateBotName: (name: string) => void;\n};\n\nconst RecentWorkspace = observer(({ workspace, index }: TRecentWorkspace) => {\n    const { dashboard, load_modal, save_modal } = useDBotStore();\n    const { active_tab, setActiveTab, setPreviewOnDialog } = dashboard;\n    const { toggleSaveModal, updateBotName } = save_modal;\n    const {\n        dashboard_strategies = [],\n        getRecentFileIcon,\n        getSaveType,\n        getSelectedStrategyID,\n        loadFileFromRecent,\n        onToggleDeleteDialog,\n        previewRecentStrategy,\n        previewed_strategy_id,\n        selected_strategy_id,\n        setSelectedStrategyId,\n        setPreviewedStrategyId,\n    } = load_modal;\n\n    const trigger_div_ref = React.useRef<HTMLInputElement | null>(null);\n    const toggle_ref = React.useRef<HTMLInputElement>(null);\n    const is_div_triggered_once = React.useRef<boolean>(false);\n    const visible = useComponentVisibility(toggle_ref);\n    const { setDropdownVisibility, is_dropdown_visible } = visible;\n    const is_mobile = isMobile();\n    const is_desktop = isDesktop();\n\n    React.useEffect(() => {\n        let timer: ReturnType<typeof setTimeout>;\n\n        const select_first_strategy = dashboard_strategies?.length && index === 0 && !is_div_triggered_once.current;\n\n        if (select_first_strategy) {\n            timer = setTimeout(() => {\n                is_div_triggered_once.current = true;\n                trigger_div_ref?.current?.click();\n            }, 50);\n        }\n        return () => {\n            if (timer) clearTimeout(timer);\n        };\n    }, [dashboard_strategies, index]);\n\n    const onToggleDropdown = (e: React.MouseEvent<HTMLElement>) => {\n        e.stopPropagation();\n        setDropdownVisibility(!is_dropdown_visible);\n        setSelectedStrategyId(workspace.id);\n    };\n\n    const handleInit = () => {\n        setPreviewedStrategyId(workspace?.id);\n        // Fires for desktop\n        if (active_tab === 0) {\n            previewRecentStrategy(workspace.id);\n        }\n    };\n\n    const handlePreviewList = () => {\n        setPreviewedStrategyId(workspace.id);\n        // Fires for mobile on clicking preview button\n        if (is_mobile) {\n            setPreviewOnDialog(true);\n            const dashboard_tab_dom_element = document.getElementsByClassName('tab__dashboard')?.[0];\n            waitForDomElement('#load-strategy__blockly-container', dashboard_tab_dom_element).then(() => {\n                previewRecentStrategy(workspace.id);\n            });\n        }\n    };\n\n    const handleEdit = async () => {\n        await loadFileFromRecent();\n        setActiveTab(DBOT_TABS.BOT_BUILDER);\n    };\n\n    const handleSave = () => {\n        updateBotName(workspace?.name);\n        toggleSaveModal();\n    };\n\n    const viewRecentStrategy = async (type: string) => {\n        setSelectedStrategyId(workspace.id);\n\n        switch (type) {\n            case STRATEGY.INIT:\n                handleInit();\n                break;\n\n            case STRATEGY.PREVIEW_LIST:\n                handlePreviewList();\n                break;\n\n            case STRATEGY.EDIT:\n                await handleEdit();\n                break;\n\n            case STRATEGY.SAVE:\n                handleSave();\n                break;\n\n            case STRATEGY.DELETE:\n                onToggleDeleteDialog(true);\n                break;\n\n            default:\n                break;\n        }\n    };\n\n    const is_active_mobile = selected_strategy_id === workspace.id && is_dropdown_visible;\n    const text_size = is_desktop ? 'xs' : 'xxs';\n\n    return (\n        <div\n            className={classnames('load-strategy__recent-item', {\n                'load-strategy__recent-item--selected': previewed_strategy_id === workspace.id,\n                'load-strategy__recent-item__loaded': dashboard_strategies,\n                'load-strategy__recent-item--minimized': !!dashboard_strategies?.length && !is_desktop,\n            })}\n            key={workspace.id}\n            ref={trigger_div_ref}\n            onClick={e => {\n                e.stopPropagation(); //stop event bubbling for child element\n                if (is_dropdown_visible) setDropdownVisibility(false);\n                getSelectedStrategyID(workspace.id);\n                viewRecentStrategy(STRATEGY.INIT);\n            }}\n        >\n            <div className='load-strategy__recent-item-text'>\n                <div className='load-strategy__recent-item-title'>\n                    <Text align='left' as='p' size={text_size} line_height='l'>\n                        {workspace.name}\n                    </Text>\n                </div>\n            </div>\n            <div className='load-strategy__recent-item-time'>\n                <Text align='left' as='p' size={text_size} line_height='l'>\n                    {timeSince(workspace.timestamp)}\n                </Text>\n            </div>\n            <div className='load-strategy__recent-item-location'>\n                <Icon\n                    icon={getRecentFileIcon(workspace.save_type)}\n                    className={classnames({\n                        'load-strategy__recent-icon--active': workspace.save_type === save_types.GOOGLE_DRIVE,\n                    })}\n                />\n                <div className='load-strategy__recent-item-saved'>\n                    <Text align='left' as='p' size={text_size} line_height='l'>\n                        {getSaveType(workspace.save_type)}\n                    </Text>\n                </div>\n            </div>\n            <DesktopWrapper>\n                <div className='load-strategy__recent-item__button'>\n                    {MENU_DESKTOP.map(item => (\n                        <div\n                            key={item.type}\n                            className='load-strategy__recent-item__button'\n                            onClick={e => {\n                                e.stopPropagation();\n                                viewRecentStrategy(item.type);\n                            }}\n                        >\n                            <Icon icon={item.icon} />\n                        </div>\n                    ))}\n                </div>\n            </DesktopWrapper>\n            <MobileWrapper>\n                <div ref={toggle_ref} onClick={onToggleDropdown}>\n                    <Icon icon='IcMenuDots' />\n                </div>\n                <div\n                    className={classnames('load-strategy__recent-item__mobile', {\n                        'load-strategy__recent-item__mobile--active': is_active_mobile,\n                        'load-strategy__recent-item__mobile--min': dashboard_strategies.length <= 5,\n                    })}\n                >\n                    {CONTEXT_MENU_MOBILE.map(item => (\n                        <div\n                            key={item.type}\n                            className='load-strategy__recent-item__group'\n                            onClick={e => {\n                                e.stopPropagation();\n                                viewRecentStrategy(item.type);\n                            }}\n                        >\n                            <div>\n                                <Icon icon={item.icon} />\n                            </div>\n                            <Text\n                                color='prominent'\n                                className='load-strategy__recent-item__group__label'\n                                as='p'\n                                size='xxs'\n                            >\n                                {item.label}\n                            </Text>\n                        </div>\n                    ))}\n                </div>\n            </MobileWrapper>\n        </div>\n    );\n});\n\nexport default RecentWorkspace;\n","export const waitForDomElement = (selector: string, observingParent?: Element) => {\n    return new Promise(resolve => {\n        if (document.querySelector(selector)) {\n            return resolve(document.querySelector(selector));\n        }\n\n        const observer = new MutationObserver(() => {\n            if (document.querySelector(selector)) {\n                resolve(document.querySelector(selector));\n                observer.disconnect();\n            }\n        });\n\n        observer.observe(observingParent ?? document.body, {\n            childList: true,\n            subtree: true,\n        });\n    });\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { getSavedWorkspaces } from '@deriv/bot-skeleton';\nimport { MobileWrapper, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport DeleteDialog from './delete-dialog';\nimport RecentWorkspace from './recent-workspace';\nimport SaveModal from './save-modal';\nimport './index.scss';\n\nconst HEADERS = [localize('Bot name'), localize('Last modified'), localize('Status')];\n\nconst RecentComponent = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const { setDashboardStrategies, dashboard_strategies } = load_modal;\n    const { setStrategySaveType, strategy_save_type } = dashboard;\n\n    React.useEffect(() => {\n        setStrategySaveType('');\n        const getStrategies = async () => {\n            const recent_strategies = await getSavedWorkspaces();\n            setDashboardStrategies(recent_strategies);\n        };\n        getStrategies();\n        //this dependency is used when we use the save modal popup\n    }, [strategy_save_type]);\n\n    const is_mobile = isMobile();\n\n    if (!dashboard_strategies?.length) return null;\n    return (\n        <div className='load-strategy__container load-strategy__container--has-footer'>\n            <div className='load-strategy__recent'>\n                <div className='load-strategy__recent__files'>\n                    <div className='load-strategy__title'>\n                        <Text size={is_mobile ? 'xs' : 's'} weight='bold'>\n                            <Localize i18n_default_text='Your bots:' />\n                        </Text>\n                    </div>\n                    <div\n                        className={classNames('load-strategy__recent-item load-strategy__recent-item__loaded', {\n                            'load-strategy__recent-item__loaded--first-child': !is_mobile,\n                        })}\n                    >\n                        {HEADERS.map(tab_name => {\n                            return (\n                                <Text size='xs' weight='bold' key={tab_name}>\n                                    {tab_name}\n                                </Text>\n                            );\n                        })}\n                    </div>\n                    <div className='load-strategy__recent__files__list'>\n                        {dashboard_strategies.map((workspace, index) => {\n                            return <RecentWorkspace key={workspace.id} workspace={workspace} index={index} />;\n                        })}\n                    </div>\n                    <DeleteDialog setStrategies={setDashboardStrategies} />\n                    <MobileWrapper>\n                        <SaveModal />\n                    </MobileWrapper>\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default RecentComponent;\n","//kept sometihings commented beacuse of mobx to integrate popup functionality here\nimport React from 'react';\nimport classNames from 'classnames';\nimport { DesktopWrapper, Dialog, Icon, MobileFullPageModal, MobileWrapper, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport GoogleDrive from './load-bot-preview/google-drive';\nimport Recent from './load-bot-preview/recent';\n\ntype TCardProps = {\n    has_dashboard_strategies: boolean;\n    is_mobile: boolean;\n};\n\ntype TCardArray = {\n    icon: string;\n    content: string;\n    method: () => void;\n};\n\nconst Cards = observer(({ is_mobile, has_dashboard_strategies }: TCardProps) => {\n    const { dashboard, load_modal, quick_strategy } = useDBotStore();\n    const {\n        onCloseDialog,\n        dialog_options,\n        is_dialog_open,\n        setActiveTab,\n        setFileLoaded,\n        setPreviewOnPopup,\n        setOpenSettings,\n        showVideoDialog,\n    } = dashboard;\n    const { handleFileChange, loadFileFromLocal } = load_modal;\n    const { setFormVisibility } = quick_strategy;\n\n    const [is_file_supported, setIsFileSupported] = React.useState<boolean>(true);\n    const file_input_ref = React.useRef<HTMLInputElement | null>(null);\n\n    const openGoogleDriveDialog = () => {\n        showVideoDialog({\n            type: 'google',\n        });\n    };\n\n    const openFileLoader = () => {\n        file_input_ref?.current?.click();\n    };\n\n    const actions: TCardArray[] = [\n        {\n            icon: is_mobile ? 'IcLocal' : 'IcMyComputer',\n            content: is_mobile ? localize('Local') : localize('My computer'),\n            method: openFileLoader,\n        },\n        {\n            icon: 'IcGoogleDriveDbot',\n            content: localize('Google Drive'),\n            method: openGoogleDriveDialog,\n        },\n        {\n            icon: 'IcBotBuilder',\n            content: localize('Bot Builder'),\n            method: () => setActiveTab(DBOT_TABS.BOT_BUILDER),\n        },\n        {\n            icon: 'IcQuickStrategy',\n            content: localize('Quick strategy'),\n            method: () => {\n                setActiveTab(DBOT_TABS.BOT_BUILDER);\n                setFormVisibility(true);\n            },\n        },\n    ];\n\n    return React.useMemo(\n        () => (\n            <div\n                className={classNames('tab__dashboard__table', {\n                    'tab__dashboard__table--minimized': has_dashboard_strategies && is_mobile,\n                })}\n            >\n                <div\n                    className={classNames('tab__dashboard__table__tiles', {\n                        'tab__dashboard__table__tiles--minimized': has_dashboard_strategies && is_mobile,\n                    })}\n                    id='tab__dashboard__table__tiles'\n                >\n                    {actions.map(icons => {\n                        const { icon, content, method } = icons;\n                        return (\n                            <div\n                                key={content}\n                                className={classNames('tab__dashboard__table__block', {\n                                    'tab__dashboard__table__block--minimized': has_dashboard_strategies && is_mobile,\n                                })}\n                            >\n                                <Icon\n                                    className={classNames('tab__dashboard__table__images', {\n                                        'tab__dashboard__table__images--minimized': has_dashboard_strategies,\n                                    })}\n                                    width='8rem'\n                                    height='8rem'\n                                    icon={icon}\n                                    id={icon}\n                                    onClick={method}\n                                />\n                                <Text color='prominent' size={is_mobile ? 'xxs' : 'xs'}>\n                                    {content}\n                                </Text>\n                            </div>\n                        );\n                    })}\n                    <input\n                        type='file'\n                        ref={file_input_ref}\n                        accept='application/xml, text/xml'\n                        hidden\n                        onChange={e => {\n                            setIsFileSupported(handleFileChange(e, false));\n                            loadFileFromLocal();\n                            setFileLoaded(true);\n                            setOpenSettings('import');\n                        }}\n                    />\n                    <DesktopWrapper>\n                        <Dialog\n                            title={dialog_options.title}\n                            is_visible={is_dialog_open}\n                            onCancel={onCloseDialog}\n                            is_mobile_full_width\n                            className='dc-dialog__wrapper--google-drive'\n                            has_close_icon\n                        >\n                            <GoogleDrive />\n                        </Dialog>\n                    </DesktopWrapper>\n                    <MobileWrapper>\n                        <MobileFullPageModal\n                            is_modal_open={is_dialog_open}\n                            className='load-strategy__wrapper'\n                            header={localize('Load strategy')}\n                            onClickClose={() => {\n                                setPreviewOnPopup(false);\n                                onCloseDialog();\n                            }}\n                            height_offset='80px'\n                            page_overlay\n                        >\n                            <div label='Google Drive' className='google-drive-label'>\n                                <GoogleDrive />\n                            </div>\n                        </MobileFullPageModal>\n                    </MobileWrapper>\n                </div>\n                <Recent is_file_supported={is_file_supported} />\n            </div>\n        ),\n        [is_dialog_open, has_dashboard_strategies]\n    );\n});\n\nexport default Cards;\n","import { localize } from '@deriv/translations';\n\nexport type TSidebarItem = {\n    label: string;\n    content: string[];\n    link: boolean;\n};\n\nexport const SIDEBAR_INTRO: TSidebarItem[] = [\n    {\n        label: localize('Welcome to Deriv Bot!'),\n        content: [\n            localize(\n                'Ready to automate your trading strategy without writing any code? You’ve come to the right place.'\n            ),\n            localize('Check out these guides and FAQs to learn more about building your bot:'),\n        ],\n        link: false,\n    },\n    {\n        label: localize('Guide'),\n        content: [localize('Deriv Bot - your automated trading partner')],\n        link: true,\n    },\n    {\n        label: localize('FAQs'),\n        content: [\n            localize('What is Deriv Bot?'),\n            localize('Where do I find the blocks I need?'),\n            localize('How do I remove blocks from the workspace?'),\n        ],\n        link: true,\n    },\n];\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { DesktopWrapper, Icon, MobileWrapper, Modal, Text } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\n\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport { SIDEBAR_INTRO } from './constants';\n\nconst InfoPanel = observer(() => {\n    const {\n        ui: { is_mobile },\n    } = useStore();\n    const { dashboard } = useDBotStore();\n    const { active_tour, is_info_panel_visible, setActiveTab, setActiveTabTutorial, setInfoPanelVisibility } =\n        dashboard;\n    const switchTab = (link: boolean, label: string) => {\n        const tutorial_link = link ? setActiveTab(DBOT_TABS.TUTORIAL) : null;\n        const tutorial_label = label === 'Guide' ? setActiveTabTutorial(0) : setActiveTabTutorial(1);\n        return {\n            tutorial_link,\n            tutorial_label,\n        };\n    };\n\n    const handleClose = () => {\n        setInfoPanelVisibility(false);\n        localStorage.setItem('dbot_should_show_info', JSON.stringify(Date.now()));\n    };\n\n    const renderInfo = () => (\n        <div className='db-info-panel'>\n            <div className='db-info-panel__close-action' onClick={handleClose}>\n                <Icon width='1rem' height='1rem' icon='IcCloseIconDbot' />\n            </div>\n\n            {SIDEBAR_INTRO.map(sidebar_item => {\n                const { label, content, link } = sidebar_item;\n                return (\n                    <div key={`${label}-${content}`}>\n                        <Text color='prominent' line_height='xxl' size={is_mobile ? 's' : 'm'} weight='bold' as='h1'>\n                            {label}\n                        </Text>\n                        {content.map(text => (\n                            <Text\n                                key={`info-panel-tour${text}`}\n                                className={classNames('db-info-panel__card', {\n                                    'db-info-panel__content': link,\n                                })}\n                                color='prominent'\n                                line_height='xl'\n                                as='p'\n                                onClick={() => switchTab(link, label)}\n                                size={is_mobile ? 'xxs' : 's'}\n                            >\n                                {text}\n                            </Text>\n                        ))}\n                    </div>\n                );\n            })}\n        </div>\n    );\n\n    return (\n        <>\n            <DesktopWrapper>\n                {!active_tour && (\n                    <div\n                        className={classNames('tab__dashboard__info-panel', {\n                            'tab__dashboard__info-panel--active': is_info_panel_visible,\n                        })}\n                    >\n                        {renderInfo()}\n                    </div>\n                )}\n            </DesktopWrapper>\n            <MobileWrapper>\n                <Modal\n                    className='statistics__modal statistics__modal--mobile'\n                    is_open={is_info_panel_visible}\n                    toggleModal={handleClose}\n                    width={'440px'}\n                >\n                    <Modal.Body>{renderInfo()}</Modal.Body>\n                </Modal>\n            </MobileWrapper>\n        </>\n    );\n});\n\nexport default InfoPanel;\n","import React from 'react';\nimport { Icon, Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport { DBOT_TABS } from 'Constants/bot-contents';\n\ntype TUserGuide = {\n    setActiveTab: (param: number) => void;\n    setActiveTabTutorial: (active_tab_tutorials: number) => void;\n};\n\nconst UserGuide = ({ setActiveTab, setActiveTabTutorial }: TUserGuide) => {\n    return (\n        <div className='tab__dashboard__home__retrigger'>\n            <button\n                data-testid='btn-user-guide'\n                onClick={() => {\n                    setActiveTab(DBOT_TABS.TUTORIAL);\n                    setActiveTabTutorial(0);\n                }}\n            >\n                <Icon className='tab__dashboard__home__retrigger__icon' icon={'IcDbotUserGuide'} />\n                <Text size='xs' line_height='s' className={'tab__dashboard__home__retrigger__text'}>\n                    {localize('User Guide')}\n                </Text>\n            </button>\n        </div>\n    );\n};\n\nexport default UserGuide;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { DesktopWrapper, MobileWrapper, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport OnboardTourHandler from '../dbot-tours/onboarding-tour';\n\nimport Local from './load-bot-preview/local';\nimport Cards from './cards';\nimport InfoPanel from './info-panel';\nimport UserGuide from './user-guide';\n\ntype TMobileIconGuide = {\n    has_dashboard_strategies: boolean;\n    handleTabChange: (active_number: number) => void;\n};\n\ntype TDashboardMobileCommonProps = {\n    is_mobile: boolean;\n    has_dashboard_strategies: boolean;\n};\n\nconst DashboardTitle = ({ is_mobile, has_dashboard_strategies }: TDashboardMobileCommonProps) => (\n    <div\n        className={classNames('tab__dashboard__header', {\n            'tab__dashboard__header--not-listed': !has_dashboard_strategies && is_mobile,\n        })}\n    >\n        <Text color='prominent' line_height='xxl' size={is_mobile ? 's' : 'm'} weight='bold'>\n            {localize('Load or build your bot')}\n        </Text>\n    </div>\n);\n\nconst MobileIconGuide = ({ handleTabChange }: TMobileIconGuide) => (\n    <MobileWrapper>\n        <div>\n            <Local handleTabChange={handleTabChange} />\n        </div>\n    </MobileWrapper>\n);\n\nconst DashboardDescription = ({ is_mobile, has_dashboard_strategies }: TDashboardMobileCommonProps) => (\n    <div\n        className={classNames('tab__dashboard__description', {\n            'tab__dashboard__description__loaded--listed': has_dashboard_strategies && !is_mobile,\n            'tab__dashboard__description__loaded--not-listed':\n                !has_dashboard_strategies || (!has_dashboard_strategies && is_mobile),\n        })}\n    >\n        <Text color='prominent' line_height='s' size={is_mobile ? 'xxs' : 's'}>\n            {localize(\n                'Import a bot from your computer or Google Drive, build it from scratch, or start with a quick strategy.'\n            )}\n        </Text>\n    </div>\n);\n\nconst DashboardComponent = observer(({ handleTabChange }: TMobileIconGuide) => {\n    const { load_modal, dashboard } = useDBotStore();\n    const { dashboard_strategies } = load_modal;\n    const { setActiveTab, setActiveTabTutorial, active_tab, active_tour } = dashboard;\n    const has_dashboard_strategies = !!dashboard_strategies?.length;\n    const is_mobile = isMobile();\n\n    return (\n        <React.Fragment>\n            <div\n                className={classNames('tab__dashboard', {\n                    'tab__dashboard--tour-active': active_tour,\n                })}\n            >\n                <div className='tab__dashboard__content'>\n                    <div\n                        className={classNames('tab__dashboard__centered', {\n                            'tab__dashboard__centered--listed': !is_mobile && has_dashboard_strategies,\n                            'tab__dashboard__centered--not-listed': !has_dashboard_strategies,\n                        })}\n                    >\n                        {!has_dashboard_strategies && !is_mobile && (\n                            <DashboardTitle is_mobile={is_mobile} has_dashboard_strategies={has_dashboard_strategies} />\n                        )}\n                        <DesktopWrapper>\n                            {!has_dashboard_strategies && (\n                                <UserGuide setActiveTab={setActiveTab} setActiveTabTutorial={setActiveTabTutorial} />\n                            )}\n                        </DesktopWrapper>\n                        <div>\n                            <div\n                                className={classNames({\n                                    'tab__dashboard__mobile-container': is_mobile,\n                                    'tab__dashboard__mobile-container--minimized':\n                                        is_mobile && has_dashboard_strategies,\n                                })}\n                            >\n                                {is_mobile && !has_dashboard_strategies && (\n                                    <DashboardTitle\n                                        is_mobile={is_mobile}\n                                        has_dashboard_strategies={has_dashboard_strategies}\n                                    />\n                                )}\n                                {(!is_mobile || (is_mobile && has_dashboard_strategies)) && (\n                                    <DashboardDescription\n                                        is_mobile={is_mobile}\n                                        has_dashboard_strategies={has_dashboard_strategies}\n                                    />\n                                )}\n                                <MobileIconGuide\n                                    handleTabChange={handleTabChange}\n                                    has_dashboard_strategies={has_dashboard_strategies}\n                                />\n                            </div>\n                            {is_mobile && !has_dashboard_strategies && (\n                                <DashboardDescription\n                                    is_mobile={is_mobile}\n                                    has_dashboard_strategies={has_dashboard_strategies}\n                                />\n                            )}\n                        </div>\n                        <Cards has_dashboard_strategies={has_dashboard_strategies} is_mobile={is_mobile} />\n                    </div>\n\n                    {has_dashboard_strategies && !is_mobile && (\n                        <div className='tab__dashboard__preview'>\n                            <Local handleTabChange={handleTabChange} />\n                        </div>\n                    )}\n                </div>\n            </div>\n            <InfoPanel />\n            {active_tab === 0 && <OnboardTourHandler />}\n        </React.Fragment>\n    );\n});\n\nexport default DashboardComponent;\n","import DashboardComponent from './dashboard-component';\n\nexport default DashboardComponent;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Toast } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst StrategyNotification = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { show_toast, toast_message, setOpenSettings } = dashboard;\n\n    React.useEffect(() => {\n        setTimeout(() => {\n            setOpenSettings(toast_message, false);\n        }, 3000);\n    }, [show_toast]);\n    const el_portal = document.getElementById('popup_root');\n\n    if (el_portal && show_toast) {\n        return ReactDOM.createPortal(\n            <div className='import-notification'>\n                <div>\n                    <Toast>\n                        {toast_message === 'delete'\n                            ? localize('You’ve successfully deleted a bot.')\n                            : localize('You’ve successfully imported a bot.')}\n                    </Toast>\n                </div>\n            </div>,\n            el_portal\n        );\n    }\n    return null;\n});\n\nexport default StrategyNotification;\n","import { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport React from 'react';\n\nconst SearchInput = observer(({ ref, faq_value, setFaqSearchContent, prev_active_tutorials }) => {\n    const { dashboard } = useDBotStore();\n    const { setActiveTabTutorial, active_tab_tutorials } = dashboard;\n\n    const onSearch = event => {\n        if (faq_value !== '') {\n            onFocusSearch();\n        }\n        setFaqSearchContent(event.target.value);\n    };\n\n    const onFocusSearch = () => {\n        if (faq_value !== '') {\n            setActiveTabTutorial(2);\n            ref?.current?.focus();\n        }\n    };\n\n    React.useEffect(() => {\n        if (faq_value !== '') {\n            ref?.current?.focus();\n            setActiveTabTutorial(2);\n        } else {\n            setActiveTabTutorial(prev_active_tutorials);\n        }\n    }, [faq_value]);\n\n    return (\n        <>\n            <input\n                ref={ref}\n                data-testid='id-test-input-search'\n                type='text'\n                placeholder={localize('Search')}\n                className='dc-tabs__wrapper__group__search-input'\n                onChange={event => onSearch(event)}\n                onFocus={onFocusSearch}\n                value={faq_value}\n            />\n        </>\n    );\n});\n\nexport default SearchInput;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Icon, SelectNative } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { TContent } from './config';\nimport SearchInput from './common/search-input';\n\ntype TTutorialsTabMobile = {\n    tutorial_tabs: TContent;\n};\n\nconst TutorialsTabMobile = observer(({ tutorial_tabs, prev_active_tutorials }: TTutorialsTabMobile) => {\n    const { dashboard } = useDBotStore();\n    const { active_tab_tutorials, faq_search_value, setActiveTabTutorial, setFAQSearchValue } = dashboard;\n\n    const search = faq_search_value?.toLowerCase();\n    const initialSelectedTab = { label: '', content: '' };\n    const [selectedTab, setSelectedTab] = React.useState(initialSelectedTab);\n    const [showSearchBar, setShowSearchBar] = React.useState(false);\n\n    React.useEffect(() => {\n        if (search) setShowSearchBar(true);\n        setSelectedTab(tutorial_tabs[active_tab_tutorials] || {});\n    }, [tutorial_tabs]);\n\n    const onFocusSearch = () => setActiveTabTutorial(2);\n\n    const onChangeHandle = React.useCallback(\n        ({ target }) => setActiveTabTutorial(tutorial_tabs.findIndex(i => i.label === target.value)),\n        [active_tab_tutorials]\n    );\n\n    const onHandleChangeMobile = () => {\n        setShowSearchBar(!showSearchBar);\n    };\n\n    const onClickBackButton = () => {\n        setFAQSearchValue('');\n        setShowSearchBar(!showSearchBar);\n        setActiveTabTutorial(prev_active_tutorials);\n        setSelectedTab(tutorial_tabs[prev_active_tutorials] || {});\n    };\n\n    const onCloseHandleSearch = () => {\n        onFocusSearch();\n        setFAQSearchValue('');\n        setActiveTabTutorial(2);\n    };\n\n    React.useEffect(() => {\n        const selectElement = document.getElementById('dt_components_select-native_select-tag');\n\n        if (selectElement) {\n            selectElement.removeChild(selectElement?.options[2]);\n        }\n    }, []);\n\n    return (\n        <div className='tutorials-mobile' data-testid='test-tutorials-mobile'>\n            <div\n                className={classNames('tutorials-mobile__select', {\n                    'tutorials-mobile__select--show-search': showSearchBar,\n                    'tutorials-mobile__select--hide-search': !showSearchBar,\n                })}\n                data-testid={showSearchBar ? 'id-search-visible' : 'id-search-hidden'}\n            >\n                <Icon\n                    onClick={onClickBackButton}\n                    data_testid='id-arrow-left-bold'\n                    className='arrow-left-bold'\n                    icon='IcArrowLeftBold'\n                />\n                <SearchInput\n                    faq_value={faq_search_value}\n                    setFaqSearchContent={setFAQSearchValue}\n                    prev_active_tutorials={prev_active_tutorials}\n                />\n                {search && (\n                    <Icon\n                        data_testid='id-close-icon'\n                        className='close-icon'\n                        data-testid='id-test-search'\n                        width='1.6rem'\n                        height='1.6rem'\n                        icon='IcDbotClose'\n                        onClick={onCloseHandleSearch}\n                    />\n                )}\n\n                <SelectNative\n                    data_testid='id-tutorials-select'\n                    className='dc-tabs__wrapper__group__search-input--active'\n                    list_items={tutorial_tabs.map(({ label }, idx) => ({\n                        id: idx,\n                        value: label,\n                        text: label,\n                    }))}\n                    value={selectedTab.label}\n                    label=''\n                    should_show_empty_option={false}\n                    onChange={onChangeHandle}\n                />\n                <Icon onClick={onHandleChangeMobile} className='search-icon' icon='IcSearch' />\n            </div>\n            <div\n                className={classNames({\n                    'tutorials-mobile__guide': active_tab_tutorials === 0,\n                    'tutorials-mobile__faq': active_tab_tutorials === 1,\n                    'tutorials-mobile__search': active_tab_tutorials === 2,\n                })}\n            >\n                {selectedTab.content}\n            </div>\n        </div>\n    );\n});\n\nexport default TutorialsTabMobile;\n","import React from 'react';\nimport { Icon, Tabs } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { TContent } from './config';\nimport classNames from 'classnames';\nimport SearchInput from './common/search-input';\n\ntype TTutorialsTabDesktop = {\n    tutorial_tabs: TContent;\n    prev_active_tutorials: number;\n};\n\nconst TutorialsTabDesktop = observer(({ tutorial_tabs, prev_active_tutorials }: TTutorialsTabDesktop) => {\n    const input_ref = React.useRef(null);\n    const { dashboard } = useDBotStore();\n\n    const { active_tab_tutorials, faq_search_value, setActiveTabTutorial, setFAQSearchValue } = dashboard;\n    const search = faq_search_value?.toLowerCase();\n\n    const onCloseHandleSearch = () => {\n        setFAQSearchValue('');\n        setActiveTabTutorial(prev_active_tutorials);\n    };\n\n    React.useEffect(() => {\n        if (faq_search_value !== '') {\n            setActiveTabTutorial(2);\n            input_ref?.current?.focus();\n        }\n    }, [active_tab_tutorials]);\n\n    return (\n        <div className='dc-tabs__wrapper'>\n            <div className='dc-tabs__wrapper__group'>\n                <Icon\n                    className='search-icon'\n                    data_testid='id-test-search'\n                    width='1.6rem'\n                    height='1.6rem'\n                    icon='IcSearch'\n                />\n                <SearchInput\n                    ref={input_ref}\n                    faq_value={faq_search_value}\n                    setFaqSearchContent={setFAQSearchValue}\n                    prev_active_tutorials={prev_active_tutorials}\n                />\n                {search && (\n                    <Icon\n                        className='close-icon'\n                        data_testid='id-test-close'\n                        width='1.6rem'\n                        height='1.6rem'\n                        icon='IcDbotClose'\n                        onClick={onCloseHandleSearch}\n                    />\n                )}\n            </div>\n            <Tabs\n                className={classNames('tutorials', {\n                    'tutorials-guide': prev_active_tutorials === 0,\n                    'tutorials-faq': prev_active_tutorials === 1,\n                    'tutorials-search': active_tab_tutorials === 2,\n                })}\n                active_index={active_tab_tutorials}\n                onTabItemClick={setActiveTabTutorial}\n                top\n            >\n                {tutorial_tabs.map(\n                    ({ label, content }) =>\n                        content && (\n                            <div label={label} key={label}>\n                                {content}\n                            </div>\n                        )\n                )}\n            </Tabs>\n        </div>\n    );\n});\n\nexport default TutorialsTabDesktop;\n","import React from 'react';\nimport { Accordion, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize } from '@deriv/translations';\nimport { TDescription } from '../config';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TFAQContent = {\n    faq_list: TFAQList[];\n};\n\ntype TFAQList = {\n    title: string;\n    description: TDescription[];\n};\n\nconst FAQ = ({ type, content, src, imageclass }: TDescription) => {\n    if (type === 'image') return <img src={src} className={imageclass} />;\n    const is_mobile = isMobile();\n\n    return (\n        <Text\n            as='p'\n            size={is_mobile ? 'xs' : 's'}\n            line_height={is_mobile ? 'xl' : 'xxl'}\n            className='faq__description'\n            weight='normal'\n            key={content}\n            dangerouslySetInnerHTML={{ __html: content }}\n        />\n    );\n};\n\nconst scrollToElement = (wrapper_element: HTMLElement, offset: number) => {\n    if (wrapper_element) {\n        wrapper_element.scrollTo({\n            top: offset,\n            behavior: 'smooth',\n        });\n    }\n};\n\nconst FAQContent = observer(({ faq_list }: TFAQContent) => {\n    const { dashboard } = useDBotStore();\n    const { active_tab_tutorials } = dashboard;\n\n    const faq_wrapper_element = React.useRef<HTMLDivElement>(null);\n    const timer_id = React.useRef<ReturnType<typeof setTimeout> | null>(null);\n\n    const handleAccordionClick = () => {\n        // Scroll to the top of the open accordion item.\n        // Need timer to first close the accordion item then scroll the new item to top.\n        timer_id.current = setTimeout(() => {\n            const open_accordion_element: HTMLElement | null | undefined =\n                faq_wrapper_element.current?.querySelector('.dc-accordion__item--open');\n            const previous_sibling_element = open_accordion_element?.previousElementSibling as HTMLElement;\n            if (faq_wrapper_element.current && open_accordion_element) {\n                const offset = previous_sibling_element ? previous_sibling_element.offsetTop - 80 : 0;\n                scrollToElement(faq_wrapper_element?.current, offset);\n            }\n            if (timer_id?.current) clearTimeout(timer_id.current);\n        }, 5);\n    };\n\n    const handleKeyboardEvent = (e: KeyboardEvent) => {\n        if (e.key === 'Enter') handleAccordionClick();\n    };\n\n    React.useEffect(() => {\n        return () => {\n            if (timer_id.current) clearTimeout(timer_id.current);\n        };\n    }, []);\n\n    const getList = () => {\n        return faq_list.map(({ title, description }: TFAQList) => ({\n            header: (\n                <Text\n                    as='p'\n                    line_height='xl'\n                    className='faq__title'\n                    weight='bold'\n                    key={title}\n                    size={isMobile() ? 'xs' : 's'}\n                >\n                    {title}\n                </Text>\n            ),\n            content: description?.map((item, index) => (\n                <FAQ {...item} key={`faq-description-item-${item?.content}-${index}`} />\n            )),\n        }));\n    };\n\n    return (\n        <div data-testid='id-faq__wrapper'>\n            <div className='faq__wrapper' ref={faq_wrapper_element}>\n                {faq_list?.length > 0 && (\n                    <>\n                        {active_tab_tutorials === 2 && (\n                            <Text as='p' line_height='xl' className='faq__wrapper__header' weight='bold'>\n                                <Localize i18n_default_text='FAQ' />\n                            </Text>\n                        )}\n                        <div\n                            data-testid='id-accordion-test'\n                            onClick={handleAccordionClick}\n                            onKeyDown={handleKeyboardEvent}\n                        >\n                            <Accordion className='faq__wrapper__content' list={getList()} icon_close='' icon_open='' />\n                        </div>\n                    </>\n                )}\n            </div>\n        </div>\n    );\n});\n\nexport default FAQContent;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Dialog, Icon, Text } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { removeKeyValue } from 'Utils/settings';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TGuideList = {\n    content?: string;\n    id: number;\n    src?: string;\n    subtype?: string;\n    type: string;\n    url?: string;\n    imageclass?: string;\n};\n\ntype TGuideContent = {\n    guide_list: TGuideList[];\n};\n\nconst GuideContent = observer(({ guide_list }: TGuideContent) => {\n    const { ui } = useStore();\n    const { is_mobile } = ui;\n    const { dashboard } = useDBotStore();\n    const {\n        dialog_options,\n        is_dialog_open,\n        onCloseDialog: onOkButtonClick,\n        setActiveTab,\n        setTourDialogVisibility,\n        showVideoDialog,\n        setActiveTour,\n        setShowMobileTourDialog,\n        faq_search_value,\n    } = dashboard;\n\n    const [video_guide, setVideoGuide] = React.useState(true);\n    const [tour_guides, setTourGuides] = React.useState(true);\n\n    const getLengthOfArrayForTabs = React.useCallback(() => {\n        const hasVideoGuide = guide_list.some(({ type }) => type !== 'Tour');\n        const hasTourGuide = guide_list.some(({ type }) => type === 'Tour');\n\n        setVideoGuide(hasVideoGuide);\n        setTourGuides(hasTourGuide);\n    }, [guide_list, video_guide, tour_guides]);\n\n    React.useEffect(() => {\n        getLengthOfArrayForTabs();\n    }, [getLengthOfArrayForTabs, faq_search_value]);\n\n    const triggerTour = (type: string) => {\n        if (type === 'OnBoard') {\n            removeKeyValue('onboard_tour_token');\n            setActiveTab(DBOT_TABS.DASHBOARD);\n            if (is_mobile) setActiveTour('onboarding');\n            setTourDialogVisibility(true);\n        } else {\n            setActiveTab(DBOT_TABS.BOT_BUILDER);\n            if (is_mobile) setActiveTour('bot_builder');\n            setTourDialogVisibility(true);\n            if (is_mobile) setShowMobileTourDialog(true);\n        }\n    };\n\n    const handleKeyboardEvent = (e: KeyboardEvent) => {\n        if (e.key === 'Enter') triggerTour('OnBoard');\n    };\n\n    return React.useMemo(\n        () => (\n            <div className='tutorials-wrap'>\n                {tour_guides && (\n                    <Text align='center' weight='bold' color='prominent' line_height='s' size={is_mobile ? 'xxs' : 's'}>\n                        <Localize i18n_default_text='Step-by-step guides' />\n                    </Text>\n                )}\n                {tour_guides && (\n                    <div className='tutorials-wrap__group'>\n                        {guide_list?.map(({ id, content, src, type, subtype }) => {\n                            return (\n                                type === 'Tour' && (\n                                    <div\n                                        className='tutorials-wrap__group__cards tutorials-wrap--tour'\n                                        key={id}\n                                        onClick={() => triggerTour(subtype)}\n                                        onKeyDown={handleKeyboardEvent}\n                                    >\n                                        <div\n                                            className={classNames('tutorials-wrap__placeholder__tours', {\n                                                'tutorials-wrap__placeholder--disabled': !src,\n                                            })}\n                                            style={{\n                                                backgroundImage: `url(${src})`,\n                                            }}\n                                        />\n                                        <Text\n                                            align='center'\n                                            color='prominent'\n                                            line_height='s'\n                                            size={is_mobile ? 'xxs' : 's'}\n                                        >\n                                            {content}\n                                        </Text>\n                                    </div>\n                                )\n                            );\n                        })}\n                    </div>\n                )}\n\n                {video_guide && (\n                    <Text align='center' weight='bold' color='prominent' line_height='s' size={is_mobile ? 'xxs' : 's'}>\n                        <Localize i18n_default_text='Videos on Deriv Bot' />\n                    </Text>\n                )}\n                {video_guide && (\n                    <div className='tutorials-wrap__group'>\n                        {guide_list?.map(({ id, content, url, type, src }) => {\n                            return (\n                                type !== 'Tour' && (\n                                    <div className='tutorials-wrap__group__cards tutorials-wrap--placeholder' key={id}>\n                                        <div\n                                            className={classNames('tutorials-wrap__placeholder', {\n                                                'tutorials-wrap__placeholder--disabled': !url,\n                                            })}\n                                            style={{\n                                                backgroundImage: `url(${src})`,\n                                            }}\n                                        >\n                                            <div className='tutorials-wrap__placeholder__button-group'>\n                                                <Icon\n                                                    className='tutorials-wrap__placeholder__button-group--play'\n                                                    width='4rem'\n                                                    height='4rem'\n                                                    icon={'IcPlayOutline'}\n                                                    onClick={() =>\n                                                        showVideoDialog({\n                                                            type: 'url',\n                                                            url,\n                                                        })\n                                                    }\n                                                />\n                                            </div>\n                                        </div>\n                                        <Text\n                                            align='center'\n                                            color='prominent'\n                                            line_height='s'\n                                            size={is_mobile ? 'xxs' : 's'}\n                                        >\n                                            {content}\n                                        </Text>\n                                    </div>\n                                )\n                            );\n                        })}\n                    </div>\n                )}\n                <Dialog\n                    title={dialog_options.title}\n                    is_visible={is_dialog_open}\n                    cancel_button_text={localize('Cancel')}\n                    onCancel={onOkButtonClick}\n                    confirm_button_text={localize('OK')}\n                    onConfirm={onOkButtonClick}\n                    is_mobile_full_width\n                    className={'dc-dialog'}\n                    has_close_icon\n                    onClose={onOkButtonClick}\n                >\n                    <iframe width='100%' height='100%' src={dialog_options.url} frameBorder='0' allowFullScreen />\n                </Dialog>\n            </div>\n        ),\n        [guide_list, is_dialog_open, video_guide, tour_guides]\n    );\n});\n\nexport default GuideContent;\n","import NoSearchResult from './no-search-result';\n\nexport default NoSearchResult;\n","import React from 'react';\nimport { Icon, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { Localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst NoSearchResult = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { faq_search_value } = dashboard;\n    return (\n        <div className='dc-tabs__content dc-tabs__content--no-result'>\n            <Icon icon='IcDbotNoSearchResult' size={80} />\n            <Text className='dc-tabs__content--no-result__title' as='h1' weight='bold' line_height='xxs'>\n                <Localize i18n_default_text='No results found' />\n            </Text>\n            <Text className='dc-tabs__content--no-result__content' line_height='xxs'>\n                <Localize i18n_default_text={`We couldn’t find anything matching \"${faq_search_value}\".`} />\n            </Text>\n            <Text className='dc-tabs__content--no-result__content' line_height='xxs'>\n                <Localize i18n_default_text={`Try another term.`} />\n            </Text>\n        </div>\n    );\n});\n\nexport default NoSearchResult;\n","import React from 'react';\nimport { localize } from '@deriv/translations';\nimport FAQContent from '../../faq-content';\nimport GuideContent from '../../guide-content';\nimport NoSearchResult from '../no-search-result-found';\n\nexport const GuideTab = ({ guideList }) => <GuideContent guide_list={guideList} />;\n\nexport const FAQTab = ({ faqList }) => <FAQContent faq_list={faqList} />;\n\nexport const SearchTab = ({ filteredList, guideList, faqList }) =>\n    filteredList.length > 0 ? (\n        <>\n            {guideList.length > 0 && <GuideTab guideList={guideList} />}\n            {faqList.length > 0 && <FAQTab faqList={faqList} />}\n        </>\n    ) : (\n        <NoSearchResult />\n    );\n\nexport const generateTutorialTabs = (sidebar_content, is_mobile, search) => {\n    const { guide_tab_content, faq_tab_content, filtered_tab_list } = sidebar_content;\n\n    const tutorial_tabs = [\n        { label: localize('Guide'), content: <GuideTab guideList={guide_tab_content} /> },\n        {\n            label: localize('FAQ'),\n            content: <FAQTab faqList={faq_tab_content} isMobile={is_mobile} />,\n        },\n        {\n            label: localize('Search'),\n            content: (\n                <SearchTab\n                    filteredList={filtered_tab_list}\n                    guideList={guide_tab_content}\n                    faqList={faq_tab_content}\n                    isMobile={is_mobile}\n                    search={search}\n                />\n            ),\n        },\n    ];\n\n    return tutorial_tabs;\n};\n","import React from 'react';\nimport { observer, useStore } from '@deriv/stores';\nimport TutorialsTabMobile from './tutorials-tab-mobile';\nimport TutorialsTabDesktop from './tutorials-tab-desktop';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { generateTutorialTabs } from './common/common-tabs';\n\nlet timeoutId;\n\nconst debounce = (func, delay) => {\n    return (...args) => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n        timeoutId = setTimeout(() => {\n            func(...args);\n        }, delay);\n    };\n};\n\nconst TutorialsTab = observer(() => {\n    const { ui } = useStore();\n    const { is_mobile } = ui;\n    const { dashboard } = useDBotStore();\n    const [prev_active_tutorials, setPrevActiveTutorialsTab] = React.useState<number | null>(0);\n\n    const { tutorials_combined_content, faq_search_value, active_tab_tutorials } = dashboard;\n\n    const [guide_tab_content, setGuideContent] = React.useState([]);\n    const [faq_tab_content, setFaqContent] = React.useState([]);\n    const [filtered_tab_list, setCombinedList] = React.useState([]);\n    const removeHTMLTagsFromString = (param = '') => param.replace(/<.*?>/g, '');\n\n    const filterContentBySearch = (content, search) => removeHTMLTagsFromString(content).toLowerCase().includes(search);\n\n    const search = faq_search_value.toLowerCase().trim();\n\n    const unified_filtered_list = React.useMemo(() => {\n        return tutorials_combined_content.filter(({ title, description = [], content }) => {\n            const descriptionMatch = description\n                .filter(item => item.type === 'text')\n                .map(item => item.content)\n                .join(' ')\n                .toLowerCase();\n            const titleMatch = removeHTMLTagsFromString(title).toLowerCase().includes(search);\n            const contentMatch = filterContentBySearch(content, search);\n            const descriptionMatchFiltered = filterContentBySearch(descriptionMatch, search);\n            return descriptionMatchFiltered || titleMatch || contentMatch;\n        });\n    }, [search, tutorials_combined_content]);\n\n    React.useEffect(() => {\n        generateAllTabs();\n    }, [active_tab_tutorials]);\n\n    React.useEffect(() => {\n        const _active_tab = [0, 1];\n        if (_active_tab.includes(active_tab_tutorials)) {\n            setPrevActiveTutorialsTab(active_tab_tutorials);\n        }\n    }, [active_tab_tutorials]);\n\n    const generateAllTabs = () => {\n        const filtered_guide_list = unified_filtered_list?.filter(item => item.tab_id === 0);\n        const filtered_faq_list = unified_filtered_list?.filter(item => item.tab_id === 2);\n        setGuideContent(filtered_guide_list);\n        setFaqContent(filtered_faq_list);\n        setCombinedList([...filtered_guide_list, ...filtered_faq_list]);\n    };\n\n    React.useEffect(() => {\n        debounce(() => {\n            generateAllTabs();\n        }, 300)();\n    }, [search, tutorials_combined_content]);\n\n    const tutorial_tabs = generateTutorialTabs(\n        {\n            guide_tab_content,\n            faq_tab_content,\n            filtered_tab_list,\n        },\n        is_mobile,\n        search,\n        prev_active_tutorials\n    );\n\n    return is_mobile ? (\n        <TutorialsTabMobile tutorial_tabs={tutorial_tabs} prev_active_tutorials={prev_active_tutorials} />\n    ) : (\n        <TutorialsTabDesktop tutorial_tabs={tutorial_tabs} prev_active_tutorials={prev_active_tutorials} />\n    );\n});\n\nexport default TutorialsTab;\n","import TutorialTab from './tutorial-tab';\nimport './index.scss';\n\nexport default TutorialTab;\n","import React, { useEffect } from 'react';\nimport classNames from 'classnames';\nimport { updateWorkspaceName } from '@deriv/bot-skeleton';\nimport dbot from '@deriv/bot-skeleton/src/scratch/dbot';\nimport { initTrashCan } from '@deriv/bot-skeleton/src/scratch/hooks/trashcan';\nimport { api_base } from '@deriv/bot-skeleton/src/services/api/api-base';\nimport { DesktopWrapper, Dialog, MobileWrapper, Tabs } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport Chart from 'Components/chart';\nimport { DBOT_TABS, TAB_IDS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport RunPanel from '../run-panel';\nimport RunStrategy from './dashboard-component/run-strategy';\nimport { tour_list } from './dbot-tours/utils';\nimport DashboardComponent from './dashboard-component';\nimport StrategyNotification from './strategy-notification';\nimport Tutorial from './tutorial-tab';\n\nconst Dashboard = observer(() => {\n    const { dashboard, load_modal, run_panel, quick_strategy, summary_card } = useDBotStore();\n    const { active_tab, active_tour, setActiveTab, setWebSocketState, setActiveTour, setTourDialogVisibility } =\n        dashboard;\n    const { onEntered, dashboard_strategies } = load_modal;\n    const { is_dialog_open, is_drawer_open, dialog_options, onCancelButtonClick, onCloseDialog, onOkButtonClick } =\n        run_panel;\n    const { is_open } = quick_strategy;\n    const { clear } = summary_card;\n    const { DASHBOARD, BOT_BUILDER } = DBOT_TABS;\n    const is_mobile = isMobile();\n    const init_render = React.useRef(true);\n    const { ui } = useStore();\n    const { url_hashed_values } = ui;\n    const hash = ['dashboard', 'bot_builder', 'chart', 'tutorial'];\n\n    let tab_value: number | string = active_tab;\n    const GetHashedValue = (tab: number) => {\n        tab_value = url_hashed_values?.split('#')[1];\n        if (!tab_value) return tab;\n        return Number(hash.indexOf(String(tab_value)));\n    };\n    const active_hash_tab = GetHashedValue(active_tab);\n\n    const checkAndHandleConnection = () => {\n        const api_status = api_base.getConnectionStatus();\n        //added this check because after sleep mode all the store values refresh and is_running is false.\n        const is_bot_running = document.getElementById('db-animation__stop-button') !== null;\n        if (is_bot_running && (api_status === 'Closed' || api_status === 'Closing')) {\n            dbot.terminateBot();\n            clear();\n            setWebSocketState(false);\n        }\n    };\n\n    React.useEffect(() => {\n        window.addEventListener('focus', checkAndHandleConnection);\n    }, []);\n\n    React.useEffect(() => {\n        if (is_open) {\n            setTourDialogVisibility(false);\n        }\n\n        if (init_render.current) {\n            setActiveTab(Number(active_hash_tab));\n            if (is_mobile) handleTabChange(Number(active_hash_tab));\n            init_render.current = false;\n        } else {\n            window.location.hash = hash[active_tab] || hash[0];\n        }\n        if (tour_list[active_tab] !== active_tour) {\n            setActiveTour('');\n        }\n    }, [active_tab]);\n\n    React.useEffect(() => {\n        if (active_tab === BOT_BUILDER) {\n            if (is_drawer_open) {\n                initTrashCan(400, -748);\n            } else {\n                initTrashCan(20);\n            }\n            setTimeout(() => {\n                window.dispatchEvent(new Event('resize')); // make the trash can work again after resize\n            }, 500);\n        }\n    }, [active_tab, is_drawer_open]);\n\n    useEffect(() => {\n        let timer: ReturnType<typeof setTimeout>;\n        if (dashboard_strategies.length > 0) {\n            // Needed to pass this to the Callback Queue as on tab changes\n            // document title getting override by 'Bot | Deriv' only\n            timer = setTimeout(() => {\n                updateWorkspaceName();\n            });\n        }\n        return () => {\n            if (timer) clearTimeout(timer);\n        };\n    }, [dashboard_strategies, active_tab]);\n\n    const handleTabChange = React.useCallback(\n        (tab_index: number) => {\n            setActiveTab(tab_index);\n            const el_id = TAB_IDS[tab_index];\n            if (el_id) {\n                const el_tab = document.getElementById(el_id);\n                el_tab?.scrollIntoView({\n                    behavior: 'smooth',\n                    block: 'center',\n                    inline: 'center',\n                });\n            }\n        },\n        [active_tab]\n    );\n\n    return (\n        <React.Fragment>\n            <div className='dashboard__main'>\n                <div\n                    className={classNames('dashboard__container', {\n                        'dashboard__container--active': active_tour && active_tab === DASHBOARD && is_mobile,\n                    })}\n                >\n                    <Tabs\n                        active_index={active_tab}\n                        className='dashboard__tabs'\n                        onTabItemChange={onEntered}\n                        onTabItemClick={handleTabChange}\n                        top\n                    >\n                        <div icon='IcDashboardComponentTab' label={localize('Dashboard')} id='id-dbot-dashboard'>\n                            <DashboardComponent handleTabChange={handleTabChange} />\n                        </div>\n                        <div icon='IcBotBuilderTabIcon' label={localize('Bot Builder')} id='id-bot-builder' />\n                        <div icon='IcChartsTabDbot' label={localize('Charts')} id='id-charts'>\n                            <Chart />\n                        </div>\n                        <div icon='IcTutorialsTabs' label={localize('Tutorials')} id='id-tutorials'>\n                            <div className='tutorials-wrapper'>\n                                <Tutorial />\n                            </div>\n                        </div>\n                    </Tabs>\n                </div>\n            </div>\n            <DesktopWrapper>\n                <div className={'dashboard__run-strategy-wrapper'}>\n                    <RunStrategy />\n                    <RunPanel />\n                </div>\n            </DesktopWrapper>\n            <MobileWrapper>{!is_open && <RunPanel />}</MobileWrapper>\n            <Dialog\n                cancel_button_text={dialog_options.cancel_button_text || localize('Cancel')}\n                className={'dc-dialog__wrapper--fixed'}\n                confirm_button_text={dialog_options.ok_button_text || localize('OK')}\n                has_close_icon\n                is_mobile_full_width={false}\n                is_visible={is_dialog_open}\n                onCancel={onCancelButtonClick}\n                onClose={onCloseDialog}\n                onConfirm={onOkButtonClick || onCloseDialog}\n                portal_element_id='modal_root'\n                title={dialog_options.title}\n            >\n                {dialog_options.message}\n            </Dialog>\n            <StrategyNotification />\n        </React.Fragment>\n    );\n});\n\nexport default Dashboard;\n","import Dashboard from './dashboard';\nimport './dashboard.scss';\n\nexport default Dashboard;\n","import React from 'react';\nimport classNames from 'classnames';\nimport ReactDOM from 'react-dom';\nimport { MobileWrapper, Toast } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\n\n// TODO: Need to sanitize,\n// Same sort of component is being used inside DTrader,\n// In Future we might move the `NetworkStatusToastError` to the core packages for resuability.\n\n/**\n * Network status Toast components\n */\n\nconst NetworkStatusToastError = observer(() => {\n    const { common } = useStore();\n    const { network_status } = common;\n    const [is_open, setIsOpen] = React.useState(false);\n    const { message, status } = network_status;\n    const portal_id = 'popup_root';\n\n    if (!document.getElementById(portal_id) || !message) return null;\n\n    if (!is_open && status !== 'online') {\n        setIsOpen(true); // open if status === 'blinker' or 'offline'\n    } else if (is_open && status === 'online') {\n        setTimeout(() => {\n            setIsOpen(false);\n        }, 1500);\n    }\n\n    return ReactDOM.createPortal(\n        <MobileWrapper>\n            <Toast\n                className={classNames({\n                    'dc-toast--blinker': status === 'blinker',\n                })}\n                is_open={is_open}\n                timeout={0}\n                type='error'\n            >\n                {message}\n            </Toast>\n        </MobileWrapper>,\n        document.getElementById(portal_id)\n    );\n});\n\nexport default NetworkStatusToastError;\n","import NetworkToastPopup from './network-toast-popup';\n\nexport default NetworkToastPopup;\n","import React from 'react';\nimport { Dialog } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst RoutePromptDialog = observer(() => {\n    const { route_prompt_dialog } = useDBotStore();\n    const { continueRoute, should_show, is_confirmed, last_location, onCancel, onConfirm } = route_prompt_dialog;\n\n    React.useEffect(continueRoute, [is_confirmed, last_location, continueRoute]);\n\n    return (\n        <Dialog\n            title={localize('Leaving already?')}\n            confirm_button_text={localize(\"Yes, I'll come back later\")}\n            cancel_button_text={localize(\"No, I'll stay\")}\n            onConfirm={onConfirm}\n            onCancel={onCancel}\n            is_visible={should_show}\n            has_close_icon={false}\n        >\n            <Localize i18n_default_text='If you leave, your current contract will be completed, but your bot will stop running immediately.' />\n        </Dialog>\n    );\n});\n\nexport default RoutePromptDialog;\n","import RoutePromptDialog from './route-prompt-dialog';\n\nexport default RoutePromptDialog;\n","import BlocklyLoading from './blockly-loading';\nimport './blockly-loading.scss';\n\nexport default BlocklyLoading;\n","import React from 'react';\nimport { Loading } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from '../../stores/useDBotStore';\n\nconst BlocklyLoading = observer(() => {\n    const { blockly_store } = useDBotStore();\n    const { is_loading } = blockly_store;\n    return (\n        <>\n            {is_loading && (\n                <div className='bot__loading' data-testid='blockly-loader'>\n                    <Loading />\n                </div>\n            )}\n        </>\n    );\n});\n\nexport default BlocklyLoading;\n","import React from 'react';\nimport { api_base, ApiHelpers, ServerTime, setColors } from '@deriv/bot-skeleton';\nimport { Loading } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport BotBuilder from 'Components/dashboard/bot-builder';\nimport BotStopped from 'Components/dashboard/bot-stopped';\nimport TransactionDetailsModal from 'Components/transaction-details';\nimport GTM from 'Utils/gtm';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { Audio, BotNotificationMessages, Dashboard, NetworkToastPopup, RoutePromptDialog } from '../components';\nimport BlocklyLoading from '../components/blockly-loading';\nimport './app.scss';\n\nconst AppContent = observer(() => {\n    const [is_loading, setIsLoading] = React.useState(true);\n    const RootStore = useStore();\n    const {\n        common,\n        client,\n        ui: { is_dark_mode_on },\n    } = RootStore;\n    const DBotStores = useDBotStore();\n    const { app, transactions } = DBotStores;\n    const { showDigitalOptionsMaltainvestError } = app;\n\n    // TODO: Remove this when connect is removed completely\n    const combinedStore = { ...DBotStores, core: { ...RootStore } };\n\n    const { recovered_transactions, recoverPendingContracts } = transactions;\n    const is_subscribed_to_msg_listener = React.useRef(false);\n    const msg_listener = React.useRef(null);\n\n    const handleMessage = ({ data }) => {\n        if (data?.msg_type === 'proposal_open_contract' && !data?.error) {\n            const { proposal_open_contract } = data;\n            if (\n                proposal_open_contract?.status !== 'open' &&\n                !recovered_transactions?.includes(proposal_open_contract?.contract_id)\n            ) {\n                recoverPendingContracts(proposal_open_contract);\n            }\n        }\n    };\n\n    React.useEffect(() => {\n        // Listen for proposal open contract messages to check\n        // if there is any active contract from bot still running\n        if (api_base?.api && !is_subscribed_to_msg_listener.current) {\n            is_subscribed_to_msg_listener.current = true;\n            msg_listener.current = api_base.api?.onMessage()?.subscribe(handleMessage);\n        }\n        return () => {\n            if (is_subscribed_to_msg_listener.current && msg_listener.current) {\n                is_subscribed_to_msg_listener.current = false;\n                msg_listener.current.unsubscribe();\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [api_base?.api]);\n\n    //Do not remove this is for the bot-skeleton package to load blockly with the theme\n    React.useEffect(() => {\n        setColors(is_dark_mode_on);\n    }, [is_dark_mode_on]);\n\n    React.useEffect(() => {\n        showDigitalOptionsMaltainvestError(client, common);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [client.is_options_blocked, client.account_settings.country_code, client.clients_country]);\n\n    const init = () => {\n        GTM.init(combinedStore);\n        ServerTime.init(common);\n        app.setDBotEngineStores(combinedStore);\n        ApiHelpers.setInstance(app.api_helpers_store);\n    };\n\n    const changeActiveSymbolLoadingState = () => {\n        init();\n        const { active_symbols } = ApiHelpers.instance;\n        active_symbols.retrieveActiveSymbols(true).then(() => {\n            setIsLoading(false);\n        });\n    };\n\n    React.useEffect(() => {\n        init();\n        setIsLoading(true);\n        if (!client.is_logged_in) {\n            changeActiveSymbolLoadingState();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    // use is_landing_company_loaded to know got details of accounts to identify should show an error or not\n    if (client.is_landing_company_loaded) {\n        changeActiveSymbolLoadingState();\n    }\n\n    React.useEffect(() => {\n        const onDisconnectFromNetwork = () => {\n            setIsLoading(false);\n        };\n        window.addEventListener('offline', onDisconnectFromNetwork);\n        return () => {\n            window.removeEventListener('offline', onDisconnectFromNetwork);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return is_loading ? (\n        <Loading />\n    ) : (\n        <>\n            <BlocklyLoading />\n            <div className='bot-dashboard bot'>\n                <Audio />\n                <BotNotificationMessages />\n                <Dashboard />\n                <NetworkToastPopup />\n                <BotBuilder />\n                <BotStopped />\n                <RoutePromptDialog />\n                <TransactionDetailsModal />\n            </div>\n        </>\n    );\n});\n\nexport default AppContent;\n","import React from 'react';\nimport { StoreProvider } from '@deriv/stores';\nimport { TStores } from '@deriv/stores/types';\nimport type { TWebSocket } from 'Types';\nimport { DBotStoreProvider } from 'Stores/useDBotStore';\n\nconst DBotProviders = ({ children, store, WS }: React.PropsWithChildren<{ store: TStores; WS: TWebSocket }>) => {\n    return (\n        <StoreProvider store={store}>\n            <DBotStoreProvider ws={WS}>{children}</DBotStoreProvider>\n        </StoreProvider>\n    );\n};\n\nexport default DBotProviders;\n","import React from 'react';\nimport { TStores } from '@deriv/stores/types';\nimport type { TWebSocket } from 'Types';\nimport { setInnerHeightToVariable } from '../utils/window-size';\nimport AppContent from './app-content';\nimport DBotProviders from './dbot-providers';\n\ntype TAppProps = {\n    passthrough: {\n        WS: TWebSocket;\n        root_store: TStores;\n    };\n};\n\nconst App = ({ passthrough }: TAppProps) => {\n    const { root_store, WS } = passthrough;\n    React.useEffect(() => {\n        setInnerHeightToVariable();\n    }, []);\n\n    return (\n        <DBotProviders store={root_store} WS={WS}>\n            <AppContent />\n        </DBotProviders>\n    );\n};\n\nexport default App;\n","export const getMainContentHeight = () => {\n    return getComputedStyle(document.getElementsByClassName('bot')[0]).getPropertyValue('--bot-content-height');\n};\n\nexport const getMainContentWidth = () => {\n    return getComputedStyle(document.getElementsByClassName('bot')[0]).getPropertyValue('--bot-content-width');\n};\n\nexport const setMainContentWidth = is_run_panel_open => {\n    const width = is_run_panel_open ? 'calc(100vw - 366px)' : 'calc(100vw - 16px)';\n    return document.getElementsByClassName('bot')[0].style.setProperty('--bot-content-width', width);\n};\n\nexport const setInnerHeightToVariable = () => {\n    // Setting the inner height of the document to the --vh variable to fix the issue\n    // of dynamic view height(vh) on mobile browsers for few scrollable components\n    const vh = window.innerHeight;\n    document.body.style.setProperty('--vh', `${vh}px`);\n};\n","var map = {\n\t\"./af\": 95191,\n\t\"./af.js\": 95191,\n\t\"./ar\": 54358,\n\t\"./ar-dz\": 71727,\n\t\"./ar-dz.js\": 71727,\n\t\"./ar-kw\": 98279,\n\t\"./ar-kw.js\": 98279,\n\t\"./ar-ly\": 87895,\n\t\"./ar-ly.js\": 87895,\n\t\"./ar-ma\": 11987,\n\t\"./ar-ma.js\": 11987,\n\t\"./ar-sa\": 52796,\n\t\"./ar-sa.js\": 52796,\n\t\"./ar-tn\": 12386,\n\t\"./ar-tn.js\": 12386,\n\t\"./ar.js\": 54358,\n\t\"./az\": 57452,\n\t\"./az.js\": 57452,\n\t\"./be\": 79053,\n\t\"./be.js\": 79053,\n\t\"./bg\": 65428,\n\t\"./bg.js\": 65428,\n\t\"./bm\": 21569,\n\t\"./bm.js\": 21569,\n\t\"./bn\": 56212,\n\t\"./bn-bd\": 24635,\n\t\"./bn-bd.js\": 24635,\n\t\"./bn.js\": 56212,\n\t\"./bo\": 13667,\n\t\"./bo.js\": 13667,\n\t\"./br\": 192,\n\t\"./br.js\": 192,\n\t\"./bs\": 51802,\n\t\"./bs.js\": 51802,\n\t\"./ca\": 19118,\n\t\"./ca.js\": 19118,\n\t\"./cs\": 39990,\n\t\"./cs.js\": 39990,\n\t\"./cv\": 30557,\n\t\"./cv.js\": 30557,\n\t\"./cy\": 4227,\n\t\"./cy.js\": 4227,\n\t\"./da\": 95406,\n\t\"./da.js\": 95406,\n\t\"./de\": 87994,\n\t\"./de-at\": 44139,\n\t\"./de-at.js\": 44139,\n\t\"./de-ch\": 86591,\n\t\"./de-ch.js\": 86591,\n\t\"./de.js\": 87994,\n\t\"./dv\": 94649,\n\t\"./dv.js\": 94649,\n\t\"./el\": 14453,\n\t\"./el.js\": 14453,\n\t\"./en-au\": 48428,\n\t\"./en-au.js\": 48428,\n\t\"./en-ca\": 36972,\n\t\"./en-ca.js\": 36972,\n\t\"./en-gb\": 13224,\n\t\"./en-gb.js\": 13224,\n\t\"./en-ie\": 18843,\n\t\"./en-ie.js\": 18843,\n\t\"./en-il\": 32732,\n\t\"./en-il.js\": 32732,\n\t\"./en-in\": 76579,\n\t\"./en-in.js\": 76579,\n\t\"./en-nz\": 29851,\n\t\"./en-nz.js\": 29851,\n\t\"./en-sg\": 70442,\n\t\"./en-sg.js\": 70442,\n\t\"./eo\": 10654,\n\t\"./eo.js\": 10654,\n\t\"./es\": 63621,\n\t\"./es-do\": 68791,\n\t\"./es-do.js\": 68791,\n\t\"./es-mx\": 67278,\n\t\"./es-mx.js\": 67278,\n\t\"./es-us\": 60717,\n\t\"./es-us.js\": 60717,\n\t\"./es.js\": 63621,\n\t\"./et\": 72404,\n\t\"./et.js\": 72404,\n\t\"./eu\": 62944,\n\t\"./eu.js\": 62944,\n\t\"./fa\": 30496,\n\t\"./fa.js\": 30496,\n\t\"./fi\": 98137,\n\t\"./fi.js\": 98137,\n\t\"./fil\": 32872,\n\t\"./fil.js\": 32872,\n\t\"./fo\": 6545,\n\t\"./fo.js\": 6545,\n\t\"./fr\": 49090,\n\t\"./fr-ca\": 13049,\n\t\"./fr-ca.js\": 13049,\n\t\"./fr-ch\": 12338,\n\t\"./fr-ch.js\": 12338,\n\t\"./fr.js\": 49090,\n\t\"./fy\": 95088,\n\t\"./fy.js\": 95088,\n\t\"./ga\": 77812,\n\t\"./ga.js\": 77812,\n\t\"./gd\": 8374,\n\t\"./gd.js\": 8374,\n\t\"./gl\": 63649,\n\t\"./gl.js\": 63649,\n\t\"./gom-deva\": 52674,\n\t\"./gom-deva.js\": 52674,\n\t\"./gom-latn\": 44948,\n\t\"./gom-latn.js\": 44948,\n\t\"./gu\": 24033,\n\t\"./gu.js\": 24033,\n\t\"./he\": 10175,\n\t\"./he.js\": 10175,\n\t\"./hi\": 58055,\n\t\"./hi.js\": 58055,\n\t\"./hr\": 41678,\n\t\"./hr.js\": 41678,\n\t\"./hu\": 85111,\n\t\"./hu.js\": 85111,\n\t\"./hy-am\": 26530,\n\t\"./hy-am.js\": 26530,\n\t\"./id\": 19126,\n\t\"./id.js\": 19126,\n\t\"./is\": 11696,\n\t\"./is.js\": 11696,\n\t\"./it\": 98710,\n\t\"./it-ch\": 38821,\n\t\"./it-ch.js\": 38821,\n\t\"./it.js\": 98710,\n\t\"./ja\": 93974,\n\t\"./ja.js\": 93974,\n\t\"./jv\": 70648,\n\t\"./jv.js\": 70648,\n\t\"./ka\": 54731,\n\t\"./ka.js\": 54731,\n\t\"./kk\": 43501,\n\t\"./kk.js\": 43501,\n\t\"./km\": 84398,\n\t\"./km.js\": 84398,\n\t\"./kn\": 91825,\n\t\"./kn.js\": 91825,\n\t\"./ko\": 13729,\n\t\"./ko.js\": 13729,\n\t\"./ku\": 19670,\n\t\"./ku.js\": 19670,\n\t\"./ky\": 78797,\n\t\"./ky.js\": 78797,\n\t\"./lb\": 50627,\n\t\"./lb.js\": 50627,\n\t\"./lo\": 65859,\n\t\"./lo.js\": 65859,\n\t\"./lt\": 80355,\n\t\"./lt.js\": 80355,\n\t\"./lv\": 16594,\n\t\"./lv.js\": 16594,\n\t\"./me\": 45324,\n\t\"./me.js\": 45324,\n\t\"./mi\": 11689,\n\t\"./mi.js\": 11689,\n\t\"./mk\": 61308,\n\t\"./mk.js\": 61308,\n\t\"./ml\": 85241,\n\t\"./ml.js\": 85241,\n\t\"./mn\": 76320,\n\t\"./mn.js\": 76320,\n\t\"./mr\": 96771,\n\t\"./mr.js\": 96771,\n\t\"./ms\": 20503,\n\t\"./ms-my\": 77748,\n\t\"./ms-my.js\": 77748,\n\t\"./ms.js\": 20503,\n\t\"./mt\": 55534,\n\t\"./mt.js\": 55534,\n\t\"./my\": 62727,\n\t\"./my.js\": 62727,\n\t\"./nb\": 7550,\n\t\"./nb.js\": 7550,\n\t\"./ne\": 49899,\n\t\"./ne.js\": 49899,\n\t\"./nl\": 41228,\n\t\"./nl-be\": 31225,\n\t\"./nl-be.js\": 31225,\n\t\"./nl.js\": 41228,\n\t\"./nn\": 97130,\n\t\"./nn.js\": 97130,\n\t\"./oc-lnc\": 93130,\n\t\"./oc-lnc.js\": 93130,\n\t\"./pa-in\": 91282,\n\t\"./pa-in.js\": 91282,\n\t\"./pl\": 28190,\n\t\"./pl.js\": 28190,\n\t\"./pt\": 41549,\n\t\"./pt-br\": 78135,\n\t\"./pt-br.js\": 78135,\n\t\"./pt.js\": 41549,\n\t\"./ro\": 307,\n\t\"./ro.js\": 307,\n\t\"./ru\": 89272,\n\t\"./ru.js\": 89272,\n\t\"./sd\": 79248,\n\t\"./sd.js\": 79248,\n\t\"./se\": 74969,\n\t\"./se.js\": 74969,\n\t\"./si\": 65522,\n\t\"./si.js\": 65522,\n\t\"./sk\": 61581,\n\t\"./sk.js\": 61581,\n\t\"./sl\": 56428,\n\t\"./sl.js\": 56428,\n\t\"./sq\": 34611,\n\t\"./sq.js\": 34611,\n\t\"./sr\": 19821,\n\t\"./sr-cyrl\": 20185,\n\t\"./sr-cyrl.js\": 20185,\n\t\"./sr.js\": 19821,\n\t\"./ss\": 35029,\n\t\"./ss.js\": 35029,\n\t\"./sv\": 80939,\n\t\"./sv.js\": 80939,\n\t\"./sw\": 73107,\n\t\"./sw.js\": 73107,\n\t\"./ta\": 72304,\n\t\"./ta.js\": 72304,\n\t\"./te\": 72550,\n\t\"./te.js\": 72550,\n\t\"./tet\": 99717,\n\t\"./tet.js\": 99717,\n\t\"./tg\": 87669,\n\t\"./tg.js\": 87669,\n\t\"./th\": 94959,\n\t\"./th.js\": 94959,\n\t\"./tk\": 92661,\n\t\"./tk.js\": 92661,\n\t\"./tl-ph\": 52234,\n\t\"./tl-ph.js\": 52234,\n\t\"./tlh\": 94120,\n\t\"./tlh.js\": 94120,\n\t\"./tr\": 81111,\n\t\"./tr.js\": 81111,\n\t\"./tzl\": 53080,\n\t\"./tzl.js\": 53080,\n\t\"./tzm\": 88246,\n\t\"./tzm-latn\": 25385,\n\t\"./tzm-latn.js\": 25385,\n\t\"./tzm.js\": 88246,\n\t\"./ug-cn\": 48777,\n\t\"./ug-cn.js\": 48777,\n\t\"./uk\": 2014,\n\t\"./uk.js\": 2014,\n\t\"./ur\": 45953,\n\t\"./ur.js\": 45953,\n\t\"./uz\": 89716,\n\t\"./uz-latn\": 87791,\n\t\"./uz-latn.js\": 87791,\n\t\"./uz.js\": 89716,\n\t\"./vi\": 99816,\n\t\"./vi.js\": 99816,\n\t\"./x-pseudo\": 94450,\n\t\"./x-pseudo.js\": 94450,\n\t\"./yo\": 22556,\n\t\"./yo.js\": 22556,\n\t\"./zh-cn\": 7414,\n\t\"./zh-cn.js\": 7414,\n\t\"./zh-hk\": 50824,\n\t\"./zh-hk.js\": 50824,\n\t\"./zh-mo\": 88589,\n\t\"./zh-mo.js\": 88589,\n\t\"./zh-tw\": 63285,\n\t\"./zh-tw.js\": 63285\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 96616;","var map = {\n\t\"./1_3_2_6.xml\": [\n\t\t298,\n\t\t217\n\t],\n\t\"./dalembert.xml\": [\n\t\t29022,\n\t\t406\n\t],\n\t\"./dalembert_max-stake.xml\": [\n\t\t41960,\n\t\t917\n\t],\n\t\"./martingale.xml\": [\n\t\t41732,\n\t\t101\n\t],\n\t\"./martingale_max-stake.xml\": [\n\t\t62387,\n\t\t784\n\t],\n\t\"./oscars_grind.xml\": [\n\t\t86373,\n\t\t113\n\t],\n\t\"./oscars_grind_max-stake.xml\": [\n\t\t36065,\n\t\t688\n\t],\n\t\"./reverse_dalembert.xml\": [\n\t\t40010,\n\t\t172\n\t],\n\t\"./reverse_martingale.xml\": [\n\t\t91688,\n\t\t54\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 27328;\nmodule.exports = webpackAsyncContext;"],"names":["common_store","clock_started","pending","NetworkMonitor","apiInstance","parentElement","this","api","addEvents","navigator","window","addEventListener","setStatus","onLine","setInterval","html","send","ping","then","PendingPromise","init","store","resolve","server_time","get","clone","undefined","timePromise","Promise","promise","CRYPTO_CURRENCIES","config","lists","PAYOUTTYPE","localize","DETAILS","CHECK_RESULT","CHECK_DIRECTION","BALANCE_TYPE","NOTIFICATION_TYPE","NOTIFICATION_SOUND","CURRENCY","opposites","MULTIPLIER","MULTUP","MULTDOWN","CALLPUT","CALL","PUT","CALLPUTEQUAL","CALLE","PUTE","HIGHERLOWER","TOUCHNOTOUCH","ONETOUCH","NOTOUCH","ENDSINOUT","EXPIRYRANGE","EXPIRYMISS","STAYSINOUT","RANGE","UPORDOWN","ASIANS","ASIANU","ASIAND","MATCHESDIFFERS","DIGITMATCH","DIGITDIFF","EVENODD","DIGITEVEN","DIGITODD","OVERUNDER","DIGITOVER","DIGITUNDER","HIGHLOWTICKS","TICKHIGH","TICKLOW","RESET","RESETCALL","RESETPUT","RUNS","RUNHIGH","RUNLOW","CALLPUTSPREAD","CALLSPREAD","PUTSPREAD","BARRIER_TYPES","ohlcFields","candleIntervals","mainBlocks","mandatoryMainBlocks","procedureDefinitionBlocks","single_instance_blocks","TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING","callput","asian","digits","TRADE_TYPE_CATEGORIES","multiplier","touchnotouch","inout","reset","callputspread","highlowticks","runs","TRADE_TYPE_CATEGORY_NAMES","BARRIER_CATEGORIES","euro_atm","euro_non_atm","american","non_financial","lookback","DEFAULT_DURATION_DROPDOWN_OPTIONS","BARRIER_LABELS","ABSOLUTE_BARRIER_DROPDOWN_OPTION","NOT_AVAILABLE_DROPDOWN_OPTIONS","NOT_AVAILABLE_DURATIONS","display","unit","min","BARRIER_TRADE_TYPES","PREDICTION_TRADE_TYPES","DIGIT_CATEGORIES","INDEPEDENT_BLOCKS","bbResult","macdFields","gd","scope","discovery_docs","workspaces","flyoutWorkspacesStartScale","mainWorkspaceStartScale","previewWorkspaceStartScale","strategies","martingale","index","label","description","dalembert","oscars_grind","default_file_name","DISABLED_SYMBOLS","DISABLED_SUBMARKETS","QUICK_STRATEGY","DISABLED","SYMBOLS","SUBMARKETS","DEFAULT","symbol","tradetype","durationtype","size","unrecoverable_errors","message_types","Object","freeze","ERROR","NOTIFY","SUCCESS","error_types","RECOVERABLE_ERRORS","UNRECOVERABLE_ERRORS","log_types","LOAD_BLOCK","PURCHASE","SELL","NOT_OFFERED","PROFIT","LOST","WELCOME_BACK","WELCOME","save_types","UNSAVED","LOCAL","GOOGLE_DRIVE","require","goog","Blockly","JavaScript","defineContract","blueInfo","purchase","sellContract","finishSign","plusIconDark","plusIconLight","minusIconDark","Blocks","procedures_defnoreturn","arguments","argument_var_models","jsonInit","definition","getField","setValidator","Procedures","rename","fieldImage","FieldImage","onAddClick","appendDummyInput","appendField","setStatements","message0","function_name","function_params","args0","type","name","text","colour","Colours","Special2","colourSecondary","colourTertiary","tooltip","category","Categories","Functions","meta","display_name","onchange","event","allowedEvents","Events","BLOCK_DELETE","BLOCK_CREATE","BLOCK_CHANGE","workspace","isFlyout","includes","blockId","id","getProcedureCallers","forEach","block","setFieldValue","newValue","options","readOnly","isInFlyout","setTimeout","promptMessage","prompt","paramName","variable","Variables","getOrCreateVariablePackage","push","setText","join","setProcedureParameters","initSvg","render","hasStatements","appendStatementInput","getInput","moveInputBefore","removeInput","updateParams","paramString","length","disable","enable","mutationToDom","optParamIds","container","document","createElement","setAttribute","getFieldValue","arg","i","parameter","getId","paramIds","appendChild","domToMutation","xmlElement","childNodes","childNode","nodeName","toLowerCase","var_name","getAttribute","var_id","console","log","getProcedureDef","getAllBlocks","filter","callType","data","getVars","getVarModels","customContextMenu","option","enabled","replace","xmlMutation","argumentName","xmlArg","xmlBlock","callback","ContextMenu","callbackFactory","isCollapsed","argumentVarModel","getOption","xmlField","generateVariableFieldDom","xmlOptionBlock","functionName","variableDB_","getName","NAME_TYPE","branch","statementToCode","STATEMENT_PREFIX","prefixLines","INDENT","INFINITE_LOOP_TRAP","returnValue","valueToCode","ORDER_NONE","args","map","code","scrub_","definitions_","procedures_defreturn","dummy","message1","args1","check","align","ALIGN_RIGHT","renameVarById","displayRenamedVar","registerWorkspaceListener","procedures_callnoreturn","previousDisabledState","previousStatement","nextStatement","recordUndo","ids","indexOf","getProcedureCall","def","getDefinition","defType","JSON","stringify","setGroup","group","xml","xy","getRelativeToSurfaceXY","x","SNAP_RADIUS","RTL","y","mutation","field","createTextNode","Xml","domToWorkspace","procedure_definition","dispose","element","oldGroup","getGroup","disabled","setDisabled","getProcedureDefinition","getTopBlocks","find","tuple","Names","equals","renameProcedure","oldName","newName","paramNames","concat","updateShape","setValue","FieldLabel","appendValueInput","topRow","removeField","centerOnBlock","select","ORDER_COMMA","procedures_callreturn","output","outputShape","OUTPUT_SHAPE_ROUND","ORDER_FUNCTION_CALL","procedures_ifreturn","hasReturnValue","condition","value","Number","isDragging","legal","FUNCTION_TYPES","getSurroundParent","rerender","getInheritedDisabled","lists_create_with","protected_statements","allowed_children","field_image","onIconClick","bind","Base","List","runGroupedEvents","statement_block","newBlock","required_parent_id","setMovable","getLastConnectionInStatement","connect","previousConnection","END_DRAG","getBlocksInStatement","runIrreversibleEvents","unplug","elements","b","Array","isArray","lists_repeat","input_item","number","getRequiredValueInputs","ITEM","emptyTextValidator","NUM","provideFunction_","FUNCTION_NAME_PLACEHOLDER_","repeat_count","lists_length","input_list","VALUE","list","ORDER_MEMBER","lists_isEmpty","getAllVariables","findIndex","ORDER_LOGICAL_NOT","lists_indexOf","first_or_last","input_value","FIND","operator","item","oneBasedIndex","ORDER_ADDITION","lists_getIndex","MODE_OPTIONS","WHERE_OPTIONS","modeMenu","FieldDropdown","isStatement","updateStatement","setCheck","setColourFromRawValues_","setTooltip","setOutput","setOutputShape","updateAt","outputConnection","isAt","INPUT_VALUE","newStatement","setPreviousStatement","setNextStatement","menu","newAt","order","mode","where","listOrder","at","getAdjusted","lists_setIndex","ORDER_ASSIGNMENT","cacheList","match","listVar","getDistinctName","ORDER_SUBTRACTION","xVar","lists_getSublist","WHERE_OPTIONS_1","WHERE_OPTIONS_2","isAt1","isAt2","n","at1","at2","where1","where2","where_pascal_case","FROM_START","FROM_END","FIRST","LAST","getIndex","list_name","opt_at","has_at1","has_at2","lists_split","dropdown","newMode","updateType","delimInput","spaceField","insertFieldAt","input","delimiter","lists_sort","sort_type","sort_direction","LIST","direction","getCompareFunctionName","lists_statement","required_parent_type","surround_parent","original_parent","last_connection","ORDER_ATOMIC","controls_repeat_ext","Loop","TIMES","repeats","String","loopVar","endVar","isNumber","controls_repeat","precision","controls_whileUntil","while_or_until","boolean","BOOL","until","argument0","maxLoopVar","currentLoopVar","controls_for","start_number","end_number","step_size","FROM","TO","BY","variable0","argument1","increment","addLoopTrap","up","parseFloat","step","Math","abs","assignment","statement","startVar","incVar","incVal","controls_forEach","indexVar","controls_flow_statements","break_or_continue","keyword","variables_get","VAR_RENAME","function_blocks","category_","old_param","new_param","param_index","variables_set","varName","after_purchase","src","width","height","alt","class","RootBlock","After_Purchase","stack","contract_check_result","win_or_loss","top_parent","getTopParent","isMainBlock","checkWith","read_details","contract_detail","restricted_parents","detailIndex","trade_again","Special1","key_words","before_purchase","setDeletable","Before_Purchase","contract_type","populatePurchaseList","menuGenerator_","trade_definition_block","getTradeDefinitionBlock","trade_type","getChildByType","purchase_type_list","purchase_type","getValue","contract_type_options","getContractTypeOptions","updateOptions","default_value","event_group","should_pretend_empty","purchaseList","ask_price","enforceLimitations","payout","during_purchase","During_Purchase","sell_at_market","check_sell","sell_price","bb_statement","required_child_blocks","band_type","Indicators","bb_result","childValueToCode","period","std_dev_up","std_dev_down","bba_statement","ema_statement","emaa_statement","rsi_statement","rsia_statement","sma_statement","smaa_statement","macda_statement","macd_field","fast_ema_period","slow_ema_period","signal_ema_period","setParentId","allowed_parents","has_parent","is_illegal_parent","parent_block","INPUT_LIST","input_period","PERIOD","std_dev_multiplier_up","input_number","UPMULTIPLIER","std_dev_multiplier_down","DOWNMULTIPLIER","FAST_EMA_PERIOD","SLOW_EMA_PERIOD","SIGNAL_EMA_PERIOD","tick","Tick_Analysis","tick_string","parent","getParent","ticks","ticks_string","ohlc","candle_interval_type","selectedGranularity","ohlc_values","candle_property","granularity","ohlcField","read_ohlc","CANDLEINDEX","get_ohlc","check_direction","direction_type","tick_analysis","last_digit","lastDigitList","is_candle_black","input_candle","Candle","OHLCOBJ","ohlcObj","ohlc_values_in_list","candle_list","OHLCLIST","ohlcList","read_ohlc_obj","balance","Miscellaneous","balanceType","barrier_offset","block_holder","loader","blocks_added_by_me","current_url","input_url","loader_block","loadBlocksFromCurrentUrl","oldValue","isValidUrl","isKnownUrl","loadBlocksFromRemote","globalObserver","log_type","error_msg","url","some","notify","notification_type","notification_sound","input_message","Special3","MESSAGE","notificationType","sound","message_block","getInputTargetBlock","variable_name","variable_id","derivWorkspace","getVariableById","message","notify_telegram","input_access_token","input_chat_id","TELEGRAM_ACCESS_TOKEN","TELEGRAM_CHAT_ID","TELEGRAM_MESSAGE","access_token","chat_id","total_profit","getRootInputTargetBlock","total_profit_string","total_runs","useless_block","message_type","console_type","epoch","Time","timeout","stack_input","SECONDS","seconds","todatetime","input_timestamp","TIMESTAMP","timestamp","invalid_timestamp","totimestamp","input_datetime","DATETIME","datetime_string","trade_definition","isInit","message2","message3","message4","message5","args2","args3","args4","args5","Trade_Definition","selected","removeErrorHandlingEventListener","initErrorHandlingListener","blocks_in_trade_options","test","client","DBotStore","is_logged_in","Error","loginid","account","getToken","market_block","trade_type_block","contract_type_block","candle_interval_block","restart_on_error_block","restart_on_buy_sell_block","candle_interval","should_restart_on_error","should_restart_on_buy_sell","contract_type_list","toUpperCase","opposite","keys","initialization","trade_options_statement","trim","trade_definition_market","input_market","input_submarket","input_symbol","is_allowed_event","event_name","active_symbols","ApiHelpers","market_dropdown","submarket_dropdown","symbol_dropdown","market","submarket","market_options","getMarketDropdownOptions","populateMarketDropdown","getSubmarketDropdownOptions","getSymbolDropdownOptions","getRootBlock","isEmpty","isDescendantOf","trade_definition_tradetype","trade_type_category","trade_definition_contracttype","is_load_event","trade_types","trade_definition_candleinterval","trade_definition_restartbuysell","checkbox","checked","required_inputs","trade_definition_restartonerror","trade_definition_tradeoptions","durations","is_stake","duration_unit","duration_value","getCurrencyDisplayCode","selected_block","getBlockById","parentBlock_","inputList","input_target","connection","targetBlock","startsWith","new_value","parseInt","toString","selected_symbol","selected_market","selected_trade_type_category","selected_trade_type","selected_duration","selected_barrier_types","setCurrency","updateAmountLimits","updateBarrierInputs","updateDurationInput","updatePredictionInput","enforceSingleBarrierType","fake_creation_event","Create","fire","createPredictionInput","prediction_range","prediction_input","shadow_block","setShadow","createBarrierInputs","barriers","input_names","values","fieldRow","account_limits","currency","landing_company_shortcode","getStakePayoutLimits","limits","amount_limits","max_payout","min_stake","should_use_default_unit","should_update_value","contracts_for","multiplier_block","parent_connection","child_connection","stake_input","stake_shadow_block","take_profit_block","take_profit_input","take_profit_shadow_block","stop_loss_block","stop_loss_input","stop_loss_shadow_block","cleanUp","getDurations","duration_field_dropdown","duration_input","duration_options","duration","target_block","isShadow","min_duration","should_use_default_type","should_use_default_values","getBarriers","barrier_field_dropdown","barrier_field_value","allow_both_types","allow_absolute_type","barrier_value","should_use_default_value","getPredictionRange","initial_prediction","max","barrier_input_name","should_force_distinct","other_barrier_input_name","other_barrier_field","has_other_barrier","other_barrier_type","other_barrier_value","has_first_barrier","has_second_barrier","has_prediction","currency_field","AMOUNT","error_message","isNaN","DURATION","d","is_valid_duration","trade_definition_tradeoptions_payout","prediction_value","barrier_offset_value","second_barrier_offset_value","amount","duration_type","decimal_places","getDecimalPlaces","stake_amount","getBarrierValue","barrier_offset_type","trade_definition_multiplier","validateBlocksInStatement","blocks_in_multiplier","block_types_in_multiplier","block_multiplier_take_profit","block_multiplier_stop_loss","Set","selected_multiplier","updateMultiplierInput","duration_block","duration_shadow_block","getMultiplierRange","multiplier_range","multiplier_list_dropdown","multiplier_options","setContractUpdateConfig","multiplier_value","stop_loss","take_profit","limit_order","multiplier_stop_loss","multiplier_take_profit","logic_compare","Logic","A","B","EQ","NEQ","LT","LTE","GT","GTE","ORDER_EQUALITY","ORDER_RELATIONAL","controls_if","value_connections","statement_connections","else_statement_connection","else_if_count","else_count","rebuildShape","targetConnection","getIfInputNames","if_input","IF","do_input","DO","reconnectChildBlocks","update","updateFn","old_mutation_dom","old_mutation","domToText","is_rendered","rendered","call","new_mutation_dom","new_mutation","change_event","BlockChange","bumpNeighbours_","BUMP_DELAY","IF_LABEL","THEN_LABEL","DELETE_ICON","j","modifyElseIf","modifyElse","storeConnections","else_input","opt_value_conns","opt_statement_conns","opt_else_statement_conns","value_connection","statement_connection","Mutator","reconnect","is_add","opt_idx","idx","logic_boolean","logic_operation","selectedOperator","ORDER_LOGICAL_AND","ORDER_LOGICAL_OR","logic_null","logic_ternary","return_value","THEN","ELSE","valueIf","ORDER_CONDITIONAL","valueThen","valueElse","logic_negate","math_change","Mathematical","DELTA","math_constant","constant","ORDER_DIVISION","math_constrain","low_number","high_number","LOW","HIGH","argument2","math_modulo","number1","number2","DIVIDEND","DIVISOR","ORDER_MODULUS","math_number","numberValidator","MAX_SAFE_INTEGER","math_number_positive","math_number_property","setOnChange","hasDivisorInput","toolip","divisorInput","inputExists","NUMBER_TO_CHECK","property","divisor","math_on_list","calculation","type_list","childBlocks_","operation","math_random_float","math_random_int","math_round","math_arithmetic","ADD","MINUS","MULTIPLY","ORDER_MULTIPLICATION","DIVIDE","POWER","math_single","ORDER_UNARY_NEGATION","math_trig","Text","quote_","text_join","text_block","text_statement","stack_blocks","getMainWorkspace","text_append","input_text","TEXT","forceString","text_length","text_isEmpty","text_indexOf","input_text1","input_text2","cateogry","substring","text_charAt","AT","textOrder","text_getSubstring","position1","index1","position2","index2","is_at","old_label_text","text_","new_input","new_at","hasInput","input_name","STRING","AT1","AT2","string_name","text_changeCase","transform_type","UPPERCASE","LOWERCASE","TITLECASE","text_trim","side","LEFT","RIGHT","BOTH","text_print","msg","text_prompt_ext","string_or_number","is_mobile","is_dark_mode_on","dashboard","flyout","toolbar","toolbox","save_modal","load_modal","toggleStrategyModal","handleFileChange","setLoading","reaction","api_base","singleton","instance","parseOhlc","open","high","low","close","open_time","getType","isCandle","TicksService","forget","subscription_id","reject","Map","candles","tickListeners","ohlcListeners","subscriptions","ticks_history_promise","active_symbols_promise","candles_promise","observe","pipSizes","style","has","hasIn","getIn","requestStream","res","e","key","getUUID","request","setIn","deleteIn","unsubscribeIfEmptyListeners","needToUnsubscribe","tickListener","ohlcListener","unsubscribeAllAndSubscribeListeners","ohlcSubscriptions","subscription","from","all","doUntilDone","set","listeners","address","subscribe","newTick","msg_type","updateTicksAndCallListeners","quote","parseTick","getLast","slice","updateCandlesAndCallListeners","lastCandle","prevCandles","updateCandles","stringified_options","requestPipSizes","requestTicks","request_object","ticks_history","end","count","r","historyToTicks","history","t","parseCandles","parse","createScope","observer","Observer","ticksService","stopped","isPositiveNumber","num","isFinite","isPositiveInteger","isInteger","expectInitArg","token","createError","contractTypes","expectOptions","candle","every","expectCandle","takeField","arr","takeLast","mean","reduce","a","simpleMovingAverage","periods","acc","sum","simpleMovingAverageArray","pipSize","sequence","toFixed","bollingerBands","stdDevUp","stdDevDown","vals","middle","std_dev","data_mean","sq_diff","pow","avg_sq_diff","sqrt","stddev","upper","lower","bollingerBandsArray","exponentialMovingAverage","init_val","weighting_multiplier","mean_val","prev","exponentialMovingAverageArray","paddingLeft","fill","macdArray","fastEmaPeriod","slowEmaPeriod","signalEmaPeriod","fast_ema_array","slow_ema_array","macd_calc_array","signal_ema_array","calcGain","q1","q2","calcLoss","calcFirstAvgDiff","comp","q","diff","calcSecondAvgDiff","init_avg","relativeStrengthIndex","memoized_diff","rest_seq","init_avg_gain","init_avg_loss","gain","loss","avg_gain","avg_loss","relativeStrengthIndexArray","decorate","f","tradeEngine","getPipSize","dateTimeStringToTimestamp","invalid_msg","validated_datetime","date_time","split","date_obj","Date","getTime","isCandleBlack","candleValues","c","expectCandles","o","candleField","notifyTelegram","onError","fetch","method","headers","body","response","ok","getTotalRuns","getBalance","getTotalProfit","tradeOptions","getMiscInterface","sma","smaa","ema","emaa","rsi","rsia","bb","bba","macda","getIndicatorsInterface","highlightBlock","block_id","highlightExecutedBlock","getLastTick","getLastDigit","getTicks","checkDirection","getOhlcFromEnd","getOhlc","getLastDigitList","getProposal","proposals","proposal","purchase_reference","getPurchaseReference","balance_string","BEFORE_PURCHASE","DURING_PURCHASE","PROPOSALS_READY","CLEAR_PROPOSALS","PURCHASE_SUCCESSFUL","OPEN_CONTRACT","START","STOP","NEW_TICK","dispatchIfScopeIs","dispatch","getState","proposalsReady","constants","dispatchIfBeforePurchaseReady","dispatchIfScopeIsBeforePurchase","delayIndex","initialState","state","action","openContract","payload","tickListenerKey","skeleton","totalProfit","totalWins","totalLosses","totalStake","totalPayout","totalRuns","globalStat","prevTick","watchScope","stopScope","passScope","passFlag","unsubscribe","newState","TradeEngine","$scope","contract","createStore","rootReducer","applyMiddleware","thunk","initArgs","startPromise","loginAndGetBalance","checkTicksPromiseExists","watchTicks","validated_trade_options","validateTradeOptions","checkLimits","makeDirectPurchaseDecision","accountInfo","transaction","transaction_recovery_timeout","is_same_contract","contract_id","is_open_contract","status","proposal_open_contract","observeOpenContract","observeBalance","observeProposals","watchName","watchDuring","checkBlocksForProposalRequest","has_payout_block","is_basis_payout","is_proposal_subscription_required","makeProposals","checkProposalReady","Engine","getFormattedText","info","accountID","Balance","regeneratePurchaseReference","onSuccess","buy","contractStatus","transaction_id","contractId","renewProposalsOnPurchase","longcode","updateAndReturnTotalRuns","transaction_ids","buy_price","selectProposal","askPrice","price","isSold","timeMachineEnabled","recoverFromError","errorCode","makeDelay","clearProposals","emit","trade_option","tradeOptionToBuy","Purchase","isSellAvailable","isExpired","isSellAtMarketAvailable","delay_index","onContractSold","sell_response","sold_for","sell","waitForAfter","sellContractAndGetContractInfo","error","sell_error","proposal_open_contract_response","errors_to_ignore","error_code","Sell","expectedContractId","setContractFlags","broadcastContract","clearTimeout","updateTotals","afterPromise","is_expired","is_valid_to_sell","is_sold","entry_tick","Boolean","hasEntryTick","bidPrice","bid_price","buyPrice","getRoundedNumber","OpenContract","isNewTradeOption","proposal_templates","tradeOptionToProposal","to_buy","requestProposals","has_informed_error","echo_req","passthrough","p","template","Proposal","stopMonitor","monitor","ticks_list","raw","last_tick","getLastDigitsFromList","dir","getDirection","candleInterval","expectPositiveInteger","sessionRuns","sessionProfit","clearStatistics","sellPrice","profit","win","accountStat","getAccountStat","tradeOption","limitations","maxLoss","maxTrades","sleep","getInterface","getDetail","createDetails","start","stop","getAskPrice","getPayout","sellAtMarket","getSellPrice","isResult","result","isTradeAgain","readDetails","getBotInterface","getToolsInterface","getTicksInterface","watch","alert","toLocaleTimeString","JSInterpreter","cloneThorough","stateStack","snapshot","global","object","initFunc_","botInitialized","bot","shouldRestartOnError","errorName","onFinish","Interface","interpreter","revert","restoreStateSnapshot","paused_","loop","run","pseudoToNative","createAsync","js_interpreter","func","asyncFunc","pop","reversed_args","reverse","first_defined_arg_idx","function_args","rv","nativeToPseudo","defineProperty","MAX_ACCEPTABLE_FUNC_ARGS","createAsyncFunction","initFunc","bot_interface","custom_console","ticks_interface","setProperty","pseudo_bot_interface","entries","startState","takeStateSnapshot","beforeState","duringState","global_timeouts","is_timeouts_cancellable","is_cancellable","terminateSession","is_error_triggered","isMultiplierContract","unsubscribeFromTicksService","register","shouldStopOnError","botStarted","DBot","terminateConnection","before_run_funcs","is_bot_running","public_path","api_helpers_store","getSavedWorkspaces","recent_files","Interpreter","that","getTradeTypeCategories","categories","category_field","run_button","querySelector","getTradeTypes","__webpack_public_path__","window_width","innerWidth","workspaceScale","getElementById","offsetWidth","el_scratch_div","inject","media","trashcan","zoom","wheel","startScale","scrollbars","cached_xml","main","main_xml","addChangeListener","valueInputLimitationsListener","updateDisabledBlocks","dispatchBlockEventEffects","validateErrorOnBlockDelete","addBeforeRunFunction","unselectBlocks","disableStrayBlocks","checkForErroredBlocks","checkForRequiredBlocks","current_strategy_id","utils","genUid","strategy_to_load","mainWorkspace","file_name","latest_file","now","textToDom","updateBotName","clearUndo","dispatchEvent","Event","handleDragOver","handleDropOver","parentNode","overflow","current_xml_dom","stored_strategy","strategy","stored_strategy_xml","current_xml","compareXml","workspaceToDom","isStrategyUpdated","saveWorkspaceToRecent","generateCode","stopBot","workspaceToCode","unselect","isIndependentBlock","disableBlocksRecursively","nextConnection","sourceBlock_","error_blocks","is_error_highlighted","self","should_animate","block_to_highlight","setErrorHighlighted","blink","isAllRequiredBlocksEnabled","force_check","hideChaff","UI","isChangeInMyInputs","isParentEnabledEvent","unhighlightRecursively","child_blocks","child_block","getChildren","required_inputs_object","should_highlight","is_selected","is_disabled","hasErrorHighlightedDescendant","inputValidatorFn","warn","removeSelect","current_collapsed_block","setCollapsed","notify_blocks","strategy_sounds","selected_sound","value_","stopPropagation","preventDefault","dataTransfer","dropEffect","main_workspace_dom","local_drag_zone","contains","target","effectAllowed","BlockSvg","MIN_BLOCK_X_WITH_STATEMENT","GRID_UNIT","START_HAT_PATH","CORNER_RADIUS","EXTRA_STATEMENT_ROW_Y","EDITABLE_FIELD_PADDING","prototype","updateColour","strokeColour","getColourTertiary","renderShadowed","scratchBlocksUtils","isShadowArgumentReporter","FieldColour","FieldColourSlider","colourPickerStroke","svgPath_","fillColour","getColour","isGlowingBlock_","getShadowColour","getColourSecondary","getOpacity","outlinePath","icons","getIcons","computeOutputPadding_","input_rows","getOutputShape","row","shape","paddingStart","paddingEnd","otherShape","firstInput","inputConnection","getSourceBlock","OUTPUT_SHAPE_HEXAGONAL","deltaHeight","renderHeight","MIN_BLOCK_Y_REPORTER","SHAPE_IN_SHAPE_PADDING","lastInput","Connection","DRAG_RADIUS","FLYOUT_DRAG_RADIUS","Css","CONTENT","dropDownShadow","fieldShadow","motion","tertiary","secondary","primary","optAlt","optOnClick","optFlipRtl","height_","width_","size_","math","Size","flipRtl_","tooltip_","clickHandler_","inherits","Field","fromJson","replaceMessageReferences","flipRtl","EDITABLE","fieldGroup_","createSvgElement","visible_","imageElement_","src_","getSvgRoot","Tooltip","bindMouseEvents","maybeAddClickHandler_","dom","removeNode","mouseDownWrapper_","bindEventWithChecks_","cursor","newTip","setAttributeNS","getFlipRtl","render_","forceRerender","updateWidth","showEditor_","FieldTextInput","notInShadow","className_","maxDisplayLength","superClass_","box_","rx","ry","stroke","insertBefore","textElement_","Gesture","updateIsDraggingFromFlyout_","targetBlock_","flyout_","isScrollable","isDragTowardWorkspace","currentDragDeltaXY_","startWorkspace_","targetWorkspace_","updateScreenCalculationsIfScrolled","startBlock_","createBlock","mostRecentEvent_","Icon","renderIcon","cursorX","collapseHidden","block_","iconGroup_","newCursorX","SIZE","computeIconLocation","SEP_SPACE_X","Block","Dimensions","getDisplayName","block_meta","getSiblings","siblings","getDescendants","child","getChildFieldValue","childType","childField","childBlock","statementInputName","firstBlock","statement_input_name","first_block_in_stack","lastConnectionInStack","isEnabled","parentBlock","nextParent","getDimensions","block_node","existing_dimensions_key","outer_html","outerHTML","Options","el_injection_div","svg","createDom_","createMainWorkspace_","block_hw","domToBlock","getHeightWidth","current_block","current_input","getInputWithBlock","hasHighlightedDescendant","is_self_highlighted","is_descendant_highlighted","isDynamic","block_type","addSelect","setVisibility","addClass","svgGroup_","updateDisabled","disabledPatternId","removeClass","showContextMenu_","contextMenu","menu_options","isDeletable","isMovable","blockDuplicateOption","blockDetachOption","isEditable","comments","blockCommentOption","blockDeleteOption","isShadow_","collapse","collapsed_","expand_option","collapse_option","is_trade_parameter","disable_option","restricted_parent","has_next_block","isConnected","downloadBlock","should_delete_next","block_xml","blockToDom","deleteNext","save","blockEnableOption","blockDisableOption","show","currentBlock","should_be_error_highlighted","highlight_class","highlight_block_class","hasClass","blink_class","collapsed","userAgent","search","getAllFields","render_list","COLLAPSED_INPUT_NAME","setVisible","visibility","icon","ScratchBlockComment","field_class","class_","dropdown_path","pathToMedia","isDarkRgbColour","field_expand_icon","COLLAPSE_CHARS","field_label","setWarningText","asserts","assert","isInsertionMarker","initOutlinePath","createIcon","updateMovable","eventsInit_","onMouseDown_","getCanvas","duplicate_","wsCleanupOption","ws","numTopBlocks","wsCollapseOption","hasExpandedBlocks","topBlocks","toggleCollapseFn_","wsExpandOption","hasCollapsedBlocks","blocks","shouldCollapse","wsDeleteOption","delete_list","WorkspaceSvg","buildDeleteList_","delete_count","shift","currentGesture_","cancel","confirm","comment_option","IE","comment","setCommentText","is_collapsed","canDisconnect","getConnections_","moveBy","checkAreSomeEnabled","enabledArr","checkAreSomeDisabled","disabledArr","enableBlocksRecursively","DataCategory","variableModelList","getVariablesOfType","xmlList","addCreateVariable","generateVariableFieldXmlString","variableModel","string","htmlEscape","firstVariable","gap","setBlockText","setBlock","firstChild","sort","first_variable","second_variable","getBlockText","getBlock","el_button_xml","createDom","el_input_xml","button_text","callback_key","input_placeholder","registerButtonCallback","button","el_input","getTargetWorkspace","createVariable","refreshCategory","dropdown_options","DropDownDiv","isVisible","hideWithoutAnimation","previous_value","has_default_value","runInvisibleEvents","should_trigger_event","arrowSize_","arrowX_","arrowY_","arrow_","disableColourChange_","FieldCheckbox","getAltText","is_checked","old_value","el_field_group","children","child_node","removeChild","Flyout","original_block","main_workspace","variables_before_creation","setResizesEnabled","new_block","placeNewBlock_","new_variables","getAddedVariables","ws_block","new_variable","VarCreate","autoClose","hide","setIsSearchFlyout","old_block","main_offset_pixels","getOriginOffsetInPixels","old_block_pos_pixels","Coordinate","clientX","clientY","final_offset_main_ws","difference","scale","flyoutCategory","nameField","allProcedures","populateDynamicProcedures","populateProcedures","procedureList","templateName","isNameUsed","optExclude","procName","WorkspaceDragger","drag","currentDragDeltaXY","workspace_","metrics","startDragMetrics_","newXY","startScrollXY_","contentLeft","contentTop","viewWidth","contentWidth","viewHeight","contentHeight","updateScroll_","Workspace","wait_events","undoStack_","redoStack_","setHasRedoStack","setHasUndoStack","clearPendingUndo","fireChangeListener","MAX_UNDO","unshift","listeners_","listener","waitForBlockEvent","opt_event_type","event_promise","event_type","isPending","wait_event","is_same_block_type","is_same_event_type","splice","is_ordered","fields","MouseEvent","cachedParentSvg_","constructor","gesture","getGesture","handleWsStart","scrollbar","heightWidth","blockCenterY","blockCenterX","pixelX","pixelY","getMetrics","scrollToBlockX","scrollToBlockY","scrollToCenterX","scrollToCenterY","addBlockNode","getFlyout","top_blocks","last_block","last_block_xy","extra_spacing","startHat_","START_HAT_HEIGHT","svgResize","blocks_to_clean","is_import","root_blocks","blockIndex","main_block_type","blocks_per_column","ceil","original_cursor_y","column_index","cursor_x","cursor_y","fat_neighbour_block","position_x","MIN_BLOCK_X","snapToGrid","MIN_BLOCK_Y","lowest_root_block","getTopLevelWorkspaceMetrics_","toolbox_dimensions","getDimensionsPx_","toolbox_","flyout_dimensions","svg_size","svgSize","getParentSvg","toolboxPosition","TOOLBOX_AT_TOP","TOOLBOX_AT_BOTTOM","TOOLBOX_AT_LEFT","TOOLBOX_AT_RIGHT","content_dimensions","getContentDimensions_","absolute_left","absolute_top","top","left","viewTop","scrollY","viewLeft","scrollX","absoluteTop","absoluteLeft","toolboxWidth","toolboxHeight","flyoutWidth","flyoutHeight","paste","xml_block","tagName","pasteWorkspaceComment_","removeLimitedBlocks","pasteBlock_","all_blocks","wsUndoOption","wsRedoOption","has_collapsed_blocks","has_expanded_blocks","workspaceCommentOption","disposeFn","svgBlockCanvas_","svgBubbleCanvas_","zoomControls_","audioManager_","grid_","toolboxCategoryCallbacks_","flyoutButtonCallbacks_","parentWorkspace","resizeHandlerWrapper_","unbindEvent_","asyncClear","clear","HOVER_MS","show_","params","DIV","poisonedElement_","element_","blocked_","innerHTML","wrap","LIMIT","param","div","text_span","verticalAlign","img","img_span","paddingRight","client_width","documentElement","clientWidth","client_height","clientHeight","visible","last_x","lastX_","OFFSET_X","last_y","lastY_","OFFSET_Y","offsetHeight","MARGINS","showPid_","createVirtualWorkspace_","fragment","blockDragSurface","workspaceDragSurface","zoomOptions","bubble_","setColour","VariableMap","opt_type","opt_id","opt_is_local","opt_is_cloud","getVariable","optional_id","optional_type","VariableModel","variableMap_","allUsedVarModels","variableHash","create","blockVariables","blockVariable","variableList","WorkspaceAudio","preload","NODE_BLOCK","NODE_BUTTON","NODE_LABEL","NODE_SHADOW","NODE_INPUT","saveAs","filename","blob","Blob","filesaver","contract_options","BlockConversion","blocks_pending_reconnect","createWorkspace","workspace_variables","has_market_block","exception_blocks","generateGrowingListBlock","child_value_input_name","block_child_nodes","mutation_dom","items_amount","value_input_name","value_input_index","value_block_node","value_block","convertBlockNode","generateUniqueVariable","variable_block","block_to_attach","statement_blocks","generateIndicatorBlock","value_input_name_mappings","old","new","bb_result_list","macd_fields_list","required_child_block_name","block_in_statement","value_name_mappings","value_name_mapping","el_value","value_input","el_value_child","converted_block","is_symbol_type","block_node_to_use","barrier_inputs","block_child_node","field_name","trade","block_fields","blocks_to_connect","child_block_name","illegal_blocks","active_symbol","symbol_name","opposites_name","DocumentFragment","el_block","el_field","textContent","current_previous_connection","previous_block","getPreviousBlock","renamed_fields","MARKET_LIST","volidx","TRADETYPECAT_LIST","endsinout","staysinout","callputequal","TRADETYPE_LIST","risefall","risefallequals","innerText","old_name","has_initialization_block","current_name","counter","ws_variable","id_","strategy_node","showIncompatibleStrategyDialog","updateRenamedFields","hasAttribute","getIllegalBlocks","illegal_block_type","variable_nodes","block_nodes","strategy_child_node","registerVariables","el_variables","el_variable","querySelectorAll","previous_sibling_id","previous_sibling_block","sibling_previous_connection","sibling_previous_target_connection","highest_previous_connection","naivelyFixLegacyStrategyAfterConversion","converted_xml","conversions","getConversions","is_old_block","is_immovable","is_undeletable","setBlockAttributes","conversion_obj","previous_connection","getClosestLegalPreviousConnection","conversion_parent","el_block_child","FieldVariable","processValueInputs","statement_name","processStatementInputs","closest_statement","closest","el_sibling_block","sibling_block","is_minimised","comment_text","iconXY_","el_input_child_block","input_child_block","el_node_with_children","block_to_use","statement_input","supposed_parent_block","getFirstBlockInStack","is_protected_statement","isConnectedToProtectedStatementInput","new_parent","target_connection","getInputWithConnection","getSelectedTradeType","translate_xy","translate_X","translate_Y","blockRect","getBoundingClientRect","translate_offset","blockX","blockY","required_block_types","error_message_map","updateWorkspaceName","dashboard_strategies","title","string_to_replace","substr","new_document_title","collection","xmlDom","domToPrettyText","delayExecution","ms","load","block_string","drop_event","strategy_id","showInvalidStrategyError","DOMParser","parseFromString","getElementsByTagName","blockConversion","convertStrategy","blockly_xml","is_collection","loadBlocks","loadWorkspace","is_user_disabled_state","added_blocks","blockly_metrics","scale_cancellation","blockly_left","blockly_top","cleanUpOnLoad","has_possible_missing_index_xml","onFetchError","xml_string","addLoaderBlocksFirst","addDomAsBlock","loadBlocksFromHeader","promises","remove","domToVariables","block_conversion","el","throwNewErrorMessage","parent_block_error","parent_error_message","child_error_message","mandatory_trade_option_block","required_blocks_check","getAllRequiredBlocks","missing_blocks","blockType","getMissingBlocks","disabled_blocks","hasDisabledChild","getDisabledBlocks","scrollWorkspace","scroll_amount","is_horizontal","is_chronological","ws_metrics","scroll_x","scroll_y","use_existing_group","callbackFn","opt_group_name","should_disable","string_rgb","rgb","ActiveSymbols","trading_times","sortDropdownOptions","closedFunc","is_a_closed","is_b_closed","disabled_symbols","disabled_submarkets","init_promise","is_initialised","processed_symbols","is_forced_update","initialise","authorized","activeSymbols","processActiveSymbols","onMarketOpenCloseChanged","changes","symbol_obj","exchange_is_open","isExistingValue","prop","market_display_name","submarkets","submarket_display_name","symbols","pip_size","pip","is_active","is_trading_suspended","should_be_open","all_symbols","market_name","isMarketClosed","submarket_name","market_display","submarket_display","symbol_display","getSymbolsForBot","symbols_for_bot","market_option","sorted_options","submarket_options","market_obj","isSubmarketClosed","symbol_options","accumulator","symbol_display_name","isSymbolClosed","formatDate","formatTime","REQUESTS","getRequestType","req_type","measures","measure","datadogLogs","startTime","startTimeDate","detail","isBotRunning","defineMeasure","res_type","performance","mark","sendIsCalled","response_promise","sendRequestsStatistic","getEntriesByName","clearMeasures","debounced_calls","addGlobalMethod","clearMarks","getLoginId","login_id","localStorage","getItem","account_id","pip_sizes","account_info","is_running","time_interval","has_activeSymbols","reconnectIfNotConnected","readyState","getActiveSymbols","toExponential","toggleRunButton","toggle","socket_url","deriv_socket","force_update","terminate","getSocketURL","getAppId","getLanguage","website_name","WebSocket","DerivAPIBasic","middleware","APIMiddleware","initEventListeners","authorizeAndSubscribe","clearInterval","ready_state","socket_state","disconnect","active_loginid","client_accounts","active_account","authorize","expectResponse","s","_","time","AccountLimits","landing_company_details","landing_company","currency_config","TradingTimes","ContractsFor","getHiddenCategories","hidden_categories","has_barrier","getTradeTypeOptions","trade_type_options","is_muliplier","getContractTypes","cache_age_in_min","disabled_options","retrieving_contracts_for","barrier_types","barrier_props","getContractsByTradeType","contracts_for_category","offset_regexp","RegExp","isOffset","has_absolute_default_value","barrier_type","has_selected_offset_type","real_trade_type","getContractCategoryByTradeType","barrier_category","has_matching_category","contract_category","has_matching_duration","has_matching_barrier_category","has_matching_barrier_type","barrier","high_barrier","barrier_prop_name","barrier_match","assign","expiry_type","getTradeTypeCategoryByTradeType","getContractsFor","contracts","getBarrierCategoryByTradeType","has_matching_barrier","getContractsForFromApi","available","filtered_contracts","start_type","unix","convert_day_to_hours","getDurationIndex","convertDuration","unit_to_convert","duration_index","target_index","default_duration","converted_duration","min_contract_duration","max_contract_duration","start_index","end_index","day_duration_index","subcategory","last_digit_range","trade_type_category_name","getTradeTypeCategoryNameByTradeType","getTradeTypeByTradeCategory","isDisabledOption","subcategories","has_durations","types","filtered_trade_type_categories","getMarketBySymbol","getSubmarketBySymbol","trade_type_categories","category_names","compare_obj","disabled_obj","last_update_moment","local","updateTradingTimes","periodicUpdate","updateMarketOpenClosed","next_update_date","nextUpdateDate","now_moment","next_update_moment","add","isAfter","is_open_map","is_opened","hour","minute","second","toDate","wait_period","update_timer","last_update_date","format","tradingTimes","date_str","toISOString","getUTCDate","markets","processed_times","times","is_open_all_day","is_closed_all_day","calcIsMarketOpened","session","nextDate","symbol_names","className","extra","basis","prediction","selected_tick","barrierOffset","secondBarrierOffset","barrier2","isEmptyObject","parameters","app_markup_percentage","barrier_range","date_expiry","date_start","product_type","trading_period_start","growth_rate","tickOld","tickNew","number_string","promiseFn","recoverFn","details","updateErrorMessage","shouldThrowError","recoverResolve","getGlobalTimeouts","next_delay_in_seconds","logError","delay","req_id","getBackoffDelayInMs","findValueByKeyRecursively","repeatFn","entry_tick_time","exit_tick_time","exit_tick","random","CONNECTING","OPEN","CLOSING","CLOSED","generateErrorMessage","missing_space","missing","misplaced","default","trade_parameters","purchase_conditions","trackAndEmitError","trackJs","track","getContractTypeName","contract_type_obj","contract_type_names","shortcode_suffix","shortcode","is_risefall","importExternal","script","async","onload","external_global_component","onerror","timeSince","secondPast","minutePast","hourPast","timestampDate","day","getDate","month","toDateString","year","getFullYear","setColors","is_dark_mode","darkMode","lightMode","pipe","fns","initialValue","nextParam","fn","extractBlocksFromXml","sortBlockChild","blocksArray","areFieldsEqual","fields1","fields2","xml1","xml2","sortedBlocks1","sortedBlocks2","blocks1","blocks2","onKeyDownHandleError","handleError","removeEventListener","save_type","updateListStrategies","workspace_id","current_timestamp","current_workspace_index","current_workspace","bot_name","localForage","LZString","decompress","removeExistingWorkspace","eam","_action","once","unregisterIfError","unregisterAllBefore","unregisterAll","apiError","unregister","unreg","actionList","searchBy","_resolve","_reject","onWorkspaceResize","block_types","createContext","timer_id","APIContext","initializeDerivAPI","DerivAPI","endpoint","app_id","language","wss_url","websocketConnection","WSConnections","existingWebsocketInstance","handleReconnection","getWebsocketInstance","queryClient","ReactQueryClient","QueryClient","standalone","WS","useWS","standaloneDerivAPI","useRef","useEffect","interval_id","current","Provider","derivAPI","QueryClientProvider","useState","isLoading","setIsLoading","isSubscribed","setSubscribed","setError","setData","subscriber","_subscribe","context","useContext","useAPIContext","useCallback","props","StoreContext","useSubscription","useStore","exchange_rates","base_currency","merge","BaseStore","onHydrationDone","makeObservable","observable","unmount","makePersistable","properties","storage","Function","stopPersisting","ExchangeRatesStore","FLAGS","wallet","next_wallet","sharkfin","FeatureFlagsStore","flag","memoizedValue","useMemo","is_mock","feature_flags","is_open","onClick","handleClose","notification_timer","setNotificationTimer","React","onMouseOver","onMouseLeave","Toast","onClose","data_testid","AppStore","root_store","core","getErrorForNonEuClients","link","getErrorForEuClients","route","routes","handleErrorForEu","show_default_error","common","ui","traders_hub","toggleAccountsDialog","is_eu_country","showDigitalOptionsUnavailableError","showError","is_landing_company_loaded","location","pathname","should_show_eu_error","content_flag","ContentFlag","is_bot_allowed","is_eu","isEuResidenceWithOnlyVRTC","active_accounts","is_options_blocked","has_error","onBeforeUnload","run_panel","is_stop_button_visible","onClickOutsideBlockly","path","composedPath","classList","showDigitalOptionsMaltainvestError","onMount","onUnmount","registerReloadOnLanguageChange","registerCurrencyReaction","registerOnAccountSwitch","registerLandingCompanyChangeReaction","registerResidenceChangeReaction","setDBotEngineStores","dbot_store","timer","blockly_store","timer_counter","setContainerSize","getCachedActiveTab","when","save_workspace_interval","disposeReloadOnLanguageChangeReaction","disposeCurrencyReaction","disposeSwitchAccountListener","disposeLandingCompanyChangeReaction","disposeResidenceChangeReaction","setAccountSwitcherDisabledMessage","setPromptHandler","current_language","reload","trade_options_block","switch_broadcast","retrieveActiveSymbols","disposeCache","fake_create_event","account_settings","country_code","quick_strategy","summary_card","loadDataStrategy","tabs_title","WORKSPACE","CHART","DBOT_TABS","DASHBOARD","BOT_BUILDER","TUTORIAL","TAB_IDS","getSettingsFromLocal","getSetting","settings","storeSetting","setItem","BlocklyStore","is_loading","active_tab","setActiveTab","tab","g_subscribers_map","ChartStore","is_chart_loading","chart_type","wsSubscribe","req","subscribeTicksHistory","wsForget","wsForgetStream","stream_id","forgetStream","wsSendRequest","ServerTime","getMarketsOrder","synthetic_index","has_synthetic_index","is_contract_ended","computed","onStartBot","onStopBot","updateSymbol","onSymbolChange","updateGranularity","updateChartType","setChartStatus","restoreFromStorage","transactions","is_ended","saveToLocalStorage","app","is_beta_chart","LocalStore","TAB_LOCAL","TAB_GOOGLE","TAB_RECENT","clearInjectionDiv","el_ref","getElementsByClassName","tour_type","setTourSettings","tour_list","getUrlBase","l","get_path","getImageLocation","image_name","user_guide_content","subtype","content","tab_id","guide_content","faq_content","imageclass","DashboardStore","tutorials_combined_content","active_tab_tutorials","active_tour_step_number","dialog_options","faq_search_value","getFileArray","has_file_loaded","has_mobile_preview_loaded","active_tour","is_dialog_open","is_file_supported","is_info_panel_visible","is_preview_on_popup","is_tour_dialog_visible","show_toast","show_mobile_tour_dialog","strategy_save_type","toast_message","is_web_socket_intialised","setShowMobileTourDialog","setWebSocketState","setOpenSettings","setIsFileSupported","setTourActiveStep","setPreviewOnDialog","onLoadModalClose","setStrategySaveType","setPreviewOnPopup","setTourDialogVisibility","setActiveTour","setFileLoaded","onCloseDialog","setActiveTabTutorial","setFAQSearchValue","showVideoDialog","setInfoPanelVisibility","onZoomInOutClick","is_zoom_in","addition","onCloseTour","setTourEnd","isMobile","onTourEnd","is_tour_active","initInfoPanel","previewRecentStrategy","current_workspace_id","refreshBotBuilderTheme","DataCollectionStore","IS_PENDING","IS_PROCESSED","run_id","run_start","should_post_xml","strategy_content","cleanXmlDom","xml_dom","useless_attributes","updated_dom","cloneObject","removeAttributesRecursively","useless_attribute","removeAttribute","getHash","btoa","crc32","trackRun","trackTransaction","setRunId","setRunStart","setStrategyContent","isProduction","hostname","xml_hash","pako","getPayload","gzip","Referer","DownloadStore","getSuccessJournalMessage","current_currency","onClickDownloadTransaction","transaction_csv_titles","transaction_csv_content","transaction_encoded_uri","encodeURI","transaction_link","click","onClickDownloadJournal","journal_csv_titles","journal","filtered_messages","array_message","date","journal_csv_content","journal_encoded_uri","journal_link","help_content_types","IMAGE","BLOCK","EXAMPLE","help_content_config","example_id","variables_gets","Localize","i18n_default_text","components","StaticUrl","href","pushDataLayer","onRunBot","onTransactionClosed","FlyoutHelpStore","css","move","sounds","examples","help_string","should_next_disable","should_previous_disable","active_helper","setHelpContent","setExamples","example_blocks","example","setFlyoutWidth","runInAction","is_help_content","help_strings","is_search_flyout","updateSequenceButtons","getHelpContent","target_blocks","xml_list_group","block_content","getFilledBlocksIndex","blocks_type","blocks_content","getNextHelpContentIndex","is_last","filled_blocks_index","setActiveHelper","onBackClick","onSequenceClick","initFlyoutHelp","getElementsByName","onSearch","should_go_next","xml_list","current_block_index","getNextBlock","current_index","is_next","next_index","next_blocks_type","next_filled_block","next_filled_block_index","next_block_type","getCategoryContents","selected_category","groupBy","last_filled_content_index","first_filled_content_index","nodes","should_include_block_only","block_group","node","all_examples","toolbox_examples","GTM","statistics","counters","number_of_runs","total_stake","total_payout","lost_contracts","won_contracts","is_completed","reference_id","refrence_id","_root_store","run_statistics","gtm","FlyoutStore","block_listeners","block_workspaces","flyout_min_width","flyout_content","flyout_width","is_visible","search_term","initFlyout","initBlockWorkspace","setContents","setSelectedCategory","getSelectedCategory","onClickOutsideFlyout","variables_blocks_count","first_get_variable_block_index","horizontalLayout","HorizontalFlyout","VerticalFlyout","targetWorkspace","getVariableMap","createPotentialVariableMap","el_block_workspace","block_svg_root","blockMouseDown_","bindEvent_","processed_xml","longest_block_width","is_search","is_flyout_click","is_search_focus","button_status","NORMAL","LOADING","COMPLETED","GoogleDriveStore","is_authorised","setKey","client_id","process","api_key","gapi","initialiseClient","google","accounts","oauth2","initTokenClient","updateSigninStatus","saveFile","loadFile","signIn","signOut","getPickerLanguage","checkFolderExists","createSaveFilePicker","createLoadFilePicker","showGoogleDriveFilePicker","bot_folder_name","google_auth","is_signed_in","requestAccessToken","setToken","revoke","removeItem","drive","files","pageSize","picker","pickerBackground","xml_doc","mime_type","file","mimeType","resource","setButtonStatus","Action","PICKED","folder_id","docs","strategy_file","strategy_file_metadata","parents","form_data","FormData","append","xhr","XMLHttpRequest","responseType","setRequestHeader","CANCEL","loadPickerCallback","fileId","is_save","docs_view","DocsView","setIncludeFolders","setMimeTypes","setSelectFolderEnabled","PickerBuilder","setOrigin","protocol","host","setTitle","setLocale","setAppId","setOAuthToken","addView","setDeveloperKey","setSize","setCallback","build","getIcon","showErrorMessageWithButton","showErrorMessage","centerAndHighlightBlock","unique_id","btn_text","Button","has_effect","messageWithButton","parseArray","getStoredItemsByUser","storage_key","getStoredItemsByKey","session_storage_item","sessionStorage","decompressed_item","stored_items","setStoredItemsByKey","compressed_value","JournalStore","JOURNAL_CACHE","is_filter_dialog_visible","filters","journal_filters","unfiltered_messages","playAudio","play","toggleFilterDialog","onLogSuccess","onNotify","pushMessage","getServerTime","checked_filters","filterMessage","welcomeBackUser","welcomeUser","registerReactions","restoreStoredJournals","disposeReactionsFn","dbot","parsedArray","is","NaN","message_length","header","ExpansionPanel","onResize","isCustomJournalMessage","parsed_message","account_list","current_account","is_virtual","item_id","disposeWriteJournalMessageListener","stored_journals","disposeJournalMessageListener","fireImmediately","LoadModalStore","previewed_strategy_id","recent_workspace","local_workspace","drop_zone","active_index","is_load_modal_open","is_explanation_expand","is_open_button_loading","loaded_local_file","recent_strategies","selected_strategy_id","is_strategy_loaded","is_delete_modal_open","is_strategy_removed","setPreviewedStrategyId","clicked_id","getSelectedStrategyID","is_body","setLoadedLocalFile","getDashboardStrategies","readFile","resetBotBuilderStrategy","loadStrategyToBuilder","refreshStrategiesTheme","selected_strategy","loadFileFromRecent","loadFileFromLocal","onActiveIndexChange","tab_name","onDriveConnect","google_drive","onEntered","setActiveTabIndex","preview_workspace","zoomCenter","setSelectedStrategyId","dark_mode","ref","setRecentStrategies","refreshStrategies","toggleExplanationExpand","toggleLoadModal","toggleTourLoadModal","getRecentFileIcon","getSaveType","onToggleDeleteDialog","is_preview","reader","FileReader","load_options","readAsText","onDriveOpen","setDashboardStrategies","NUMBER_DEFAULT_VALIDATION","getMessage","SYMBOL","fullWidth","TRADETYPE","dependencies","CONTRACT_TYPE","LABEL_STAKE","STAKE","validation","LABEL_DURATION","DURATION_TYPE","attached","LABEL_PROFIT","LABEL_LOSS","LOSS","LABEL_SIZE","qs_config","LABEL_DALEMBERT_UNIT","UNIT","CHECKBOX_MAX_STAKE","MAX_STAKE","should_have","STRATEGIES","MARTINGALE","D_ALEMBERT","OSCARS_GRIND","REVERSE_MARINGALE","REVERSE_D_ALEMBERT","QuickStrategyStore","is_contract_dialog_open","is_stop_bot_dialog_open","current_duration_min_max","setFormVisibility","setSelectedStrategy","setCurrentDurationMinMax","onSubmit","trade_type_cat","strategy_xml","strategy_dom","modifyValueInputs","el_value_inputs","el_value_input","modifyFieldDropdownValues","name_list","el_blocks","rest_data","fields_to_update","tradetypecat","dalembert_unit","oscar_unit","onRunButtonClick","toggleStopBotDialog","RoutePromptDialogStore","should_show","is_confirmed","last_location","shouldNavigateAfterPrompt","onConfirm","onCancel","continueRoute","setShoudShow","next_location","routeTo","contract_stages","NOT_RUNNING","STARTING","PURCHASE_SENT","PURCHASE_RECEIVED","IS_STOPPING","CONTRACT_CLOSED","SUMMARY","TRANSACTIONS","JOURNAL","switch_account_notification","is_persistent","RunPanelStore","contract_stage","has_open_contract","is_statistics_info_modal_open","is_drawer_open","is_sell_requested","show_bot_stop_message","error_type","unregisterBotListeners","is_stop_button_disabled","is_clear_stat_disabled","onStopButtonClick","onStopBotClick","onClearStatClick","clearStat","toggleStatisticsInfoModal","toggleDrawer","performSelfExclusionCheck","showStopMultiplierContractDialog","showLoginDialog","showRealAccountDialog","showClearStatDialog","showContractUpdateErrorDialog","onBotSellEvent","onBotStopEvent","onBotReadyEvent","onBotTradeAgain","onContractStatusEvent","onClickSell","onBotContractEvent","switchToJournal","setContractStage","setHasOpenContract","setIsRunning","setShowBotStopMessage","handleInvalidToken","registerBotListeners","onBotRunningEvent","preloadAudio","stopMyBot","closeMultiplierContract","stats","trx","self_exclusion","checkRestriction","route_prompt_dialog","is_ios","mobileOSDetect","saveRecentWorkspace","unHighlightAllBlocks","isSafari","should_bot_run","setIsRestricted","shouldRunBot","runBot","is_multiplier","setActiveTransactionId","terminateBot","onOkButtonClick","onCancelButtonClick","rel","ok_button_text","cancel_button_text","notifications","registerIsSocketOpenedListener","is_socket_opened","disposeIsSocketOpenedListener","addNotificationMessage","disposeLogoutListener","disposeStopBotListener","ignore_new_version","run_limit","indicateBotStopped","resetSelfExclusion","clearContractUpdateConfigValues","listen_new_version","is_trade_again","contract_status","platform","platform_name","is_disposable","removeNotificationMessage","toggleNotificationsModal","removeNotificationByKey","logout","getStrategySounds","audioElement","muted","pause","SaveModalStore","is_save_modal_open","toggleSaveModal","validateBotName","errors","addStrategyToWorkspace","is_local","save_as_collection","local_type","save_collection","workspace_structure","updated_strategies","onConfirmSave","main_strategy","SelfExclusionStore","api_max_losses","is_restricted","initial_values","setApiMaxLosses","setRunLimit","form_max_losses","getSelfExclusion","max_losses","getContractUpdateConfig","contract_update","getLimitOrderAmount","contract_update_stop_loss","contract_update_take_profit","has_contract_update_stop_loss","has_contract_update_take_profit","getContractConfig","is_high_low","position","LBFLOATCALL","LBFLOATPUT","LBHIGHLOW","getSupportedContracts","getContractTypeDisplay","SummaryCardStore","contract_info","indicative_movement","profit_movement","validation_errors","validation_rules","trigger","rules","contract_store","stake","getBuyPrice","contract_update_config","indicative","is_contract_completed","is_contract_loading","is_contract_inactive","getLimitOrder","onChange","populateContractUpdateConfig","updateLimitOrder","setValidationErrorMessages","validateProperty","profit_loss","getIndicativePrice","movements","isEqualObject","contractUpdate","propertyName","messages","inputs","hasOwnProperty","validator","Validator","isPassed","disposeSwitchAcountListener","SummaryStore","ToolbarStore","is_animation_info_modal_open","has_undo_stack","has_redo_stack","is_reset_button_clicked","setResetButtonState","onResetClick","closeResetDialog","onResetOkButtonClick","resetDefaultStrategy","onSortClick","onUndoClick","is_redo","undo","hasUndoStack","hasRedoStack","ToolboxStore","is_toolbox_open","is_search_loading","sub_category_index","toolbox_dom","setWorkspaceOptions","adjustWorkspace","onToolboxItemClick","onToolboxItemExpand","getAllCategories","hasSubCategory","onSearchBlur","onSearchClear","onSearchKeyUp","showSearch","toolbox_ref","disposeToolboxToggleReaction","languageTree","hasCategories","hasCollapse","hasComments","hasDisable","toolbox_width","block_canvas_rect","round","scroll_distance","category_id","open_ids","open_id","dynamic","getToolboxCategoryCallback","fnToApply","subCategory","submitForm","typing_timer","search_words","all_variables","all_procedures","general_term","term","block_contents","contents","flat","pushIfNotExists","array","element_to_push","priority","block_definitions","block_name","block_type_terms","block_name_terms","definition_key_to_search","word","definition_strings","matched_meta","block_meta_strings","pushBlockWithPriority","matched_variables","unique_var_blocks","searched_procedures","procedure","unique_proce_blocks","procedure_block","transaction_elements","CONTRACT","DIVIDER","TransactionsStore","TRANSACTION_CACHE","active_transaction_id","recovered_completed_transactions","recovered_transactions","is_called_proposal_open_contract","is_transaction_details_modal_open","pushTransaction","onClickOutsideTransaction","recoverPendingContracts","updateResultsCompletedContract","sortOutPositionsBeforeAction","recoverPendingContractsById","toggleTransactionDetailsModal","isEnded","entry_tick_display_value","exit_tick_display_value","low_barrier","tick_count","underlying","same_contract_index","disposeTransactionElementsListener","stored_transactions","disposeRecoverContracts","positions","element_id","contract_details","portfolio","RootStore","download","flyout_help","summary","chart_store","data_collection_store","DBotStoreContext","DBotStoreProvider","mock","stores","useDBotStore","GoogleDrive","classnames","large","is_document","LocalFooter","Wrapper","mockZoomInOut","LocalComponent","file_input_ref","classNames","accept","onDrop","header_text","MobileFullPageModal","is_modal_open","onClickClose","height_offset","page_overlay","Tabs","onTabItemClick","has_loaded_file","has_recent_strategies","Modal","toggleModal","elements_to_ignore","header_fit_content","has_separator","FormWrapper","useFormikContext","isValid","validateForm","onEdit","handleSubmit","weight","str","active","onChangeStrategy","ThemedScrollbars","autohide","MobileFormWrapper","dropdown_list","SelectNative","list_items","should_show_empty_option","MarketOption","color","is_desktop","setActiveSymbols","is_input_started","setIsInputStarted","setInputValue","has_symbol","component","handleFocus","handleInputChange","handleItemSelection","handleHideDropdownList","selectedSymbol","rest_field","Autocomplete","inputMode","autoComplete","onItemSelection","onFocus","onHideDropdownList","leading_icon","TradeTypeOption","IconTradeTypes","setTradeTypes","getTradeTypesForQuickStrategy","has_selected","debounce","trade_type_dropdown_options","ContractTypes","setList","handleChange","selected_item","getDurationUnits","duration_units","QSInput","fullwidth","has_focus","setFocus","setFieldTouched","is_number","onMouseEnter","Popover","alignment","zIndex","classNameBubble","should_disable_pointer_events","Input","data_testId","trailing_icon","QSCheckbox","Checkbox","QSInputLabel","QuickStrategyForm","handleEnter","group_index","field_index","should_enable","getErrorMessage","MIN","MAX","FormikWrapper","Yup","dynamic_schema","setDynamicSchema","initial_value","max_stake","boolean_max_stake","Formik","initialValues","validationSchema","validate","formikData","sub_schema","schema","typeError","min_error","max_error","should_validate","required","validateOnBlur","validateOnChange","validateOnMount","QuickStrategy","Form","google_drive_connected","is_drive_radio","as","line_height","styles","SaveModalForm","is_onscreen_keyboard_active","setCurrentFocus","touched","content_height","placeholder","currentTarget","onBlur","RadioGroup","onToggle","is_submit_success","SaveModal","common_tour_button_properties","fontWeight","fontSize","padding","steps","handleCallback","continuous","locale","back","next","arrowColor","backgroundColor","primaryColor","textColor","spotlightShadow","buttonBack","border","marginRight","borderRadius","buttonNext","overlay","TourEndDialog","Dialog","confirm_button_text","is_mobile_full_width","has_close_icon","step_index","has_localize_component","show_actions","autoPlay","controls","playsInline","disablePictureInPicture","controlsList","content_data","joyride_props","showProgress","spotlightClicks","disableBeacon","disableOverlay","disableCloseOnEsc","DBOT_ONBOARDING","placement","last","hideBackButton","Step1","show_label","Step1A","Step2","Step3","Step4","Step5","Step6","BOT_BUILDER_TOUR","BOT_BUILDER_MOBILE","tour_step_key","DBOT_ONBOARDING_MOBILE","tourDialogInfo","tourDialogAction","onboarding_tour_header","bot_builder_tour_header","TourStartDialog","tour_token","onboard_tour","header_text_size","content_text_size","tour_headers","useTourHandler","is_finished","setIsFinished","is_close_tour","setIsCloseTour","handleJoyrideCallback","expanded","test_id","setOpen","tour_step","setTourStep","tour_active","tour_button_text","ProgressBarTracker","steps_list","v","onStepChange","should_hide_display_name","FlyoutBlockGroup","onInfoClick","is_variables_get","is_variables_set","AddButton","is_plus","propTypes","PropTypes","lineHeight","frameBorder","allow","allowFullScreen","block_help_component","text_count","example_node","renderText","SearchResult","total_result","interpolation","escapeValue","FlyoutContent","flyout_ref","is_empty","custom_color","platform_name_dbot","getPlatformSettings","callback_id","getButtonCallback","flyout__search","flyout__help","flyout__normal","title_text","toggle_dialog_or_stop","portal_element_id","paddingBottom","paddingTop","StopBotModal","popover_message","button_id","button_classname","buttonOnClick","green","popover_zindex","TOOLBAR","TRANSACTION","SUMMARY_TOOLTIPS","RUN_PANEL","icon_id","icon_color","Toolbar","onKeyUp","Arg","Category","Example","Examples","Mutation","Next","Shadow","Statement","Value","ToolboxItems","ReactDomServer","xmlns","deletable","movable","divisor_input","variabletype","elseif","else","has_sub_category","is_sub_category_open","BotBuilder","is_blockly_listener_registered","show_snackbar","setShowSnackbar","handleBlockChangeOnBotRun","removeBlockChangeListener","removeChangeListener","PARENT_CLASS","bounds","dragHandleClassName","enableResizing","header_title","minWidth","onCloseDraggable","xaxis","yaxis","minHeight","onDragStart","role","CSSTransition","appear","in","enter","enterDone","exit","unmountOnExit","TableCell","extra_classes","CellLoader","TableHeader","columns","column","extra_class","IconWrapper","speed","foregroundColor","DesktopTransactionTable","result_columns","transaction_columns","convertDateFormat","TransactionDetailsDesktop","transaction_list","screenDimensions","setScreenDimensions","handleResize","innerHeight","modalWidth","yAxisValue","wrapper_ref","classNameLabel","hasFilter","defaultChecked","toggle_ref","useOnClickOutside","logType","formatMoney","getLogMessage","is_new_row","in_prop","useNewRowTransition","date_el","DateItem","getJournalItemContent","Download","clickFunction","Journal","filtered_messages_length","unfiltered_messages_length","DataList","data_source","rowRenderer","keyMapper","SelfExclusionForm","max_losses_error","setMaxLossesError","updateSelfExclusion","is_reality_check_visible","onSubmitLimits","set_losses","is_integer","requested_field_message","valid_number_message","max_number_message","max_decimal_message","max_losses_limit_message","amount_decimal_array","hint","SelfExclusion","self_exclusion_form_props","virtual_account_loginid","FadeWrapper","keyname","PageOverlay","MobileWrapper","Div100vhContainer","SummaryCard","addToast","current_focus","removeToast","card_header","ContractCard","getCardLabels","has_progress_slider","card_body","error_message_alignment","getContractById","card_footer","contract_el","should_show_result_overlay","Summary","has_won_contract","notificationTimer","CircularWrapper","ContractStageText","TradeAnimation","should_show_overlay","account_status","cashier_validation","is_button_disabled","updateIsButtonDisabled","is_unavailable_for_payment_agent","status_classes","progress_status","status_class","TransactionIconWithText","TransactionFieldLoader","TransactionIconLoader","PopoverItem","PopoverContent","Transaction","Money","show_currency","TransactionItem","Transactions","transactions__content","getRowSize","StatisticsTile","contentClassName","StatisticsSummary","has_sign","DrawerHeader","DrawerContent","DrawerFooter","MobileDrawerFooter","info_direction","StatisticsInfoModal","RunPanel","footer","Drawer","anchor","CardColumn","large_title","right_aligned","IconContainer","MobileTransactionCards","TransactionDetailsMobile","TransactionDetails","Suspense","fallback","Loading","BotNotificationMessages","Notifications","notification_messages_ui","module","component_name","moduleLoader","setSmartChartsPublicPath","SmartChart","ChartTitle","ChartMode","DrawTools","Share","StudyLegend","Views","ToolbarWidget","SmartChartBeta","ChartTitleBeta","ChartModeBeta","DrawToolsBeta","ShareBeta","StudyLegendBeta","ViewsBeta","ToolbarWidgetBeta","portalNodeId","onChartType","onGranularity","isDesktop","searchInputClassName","Chart","show_digits_stats","assetInformation","countdown","isHighestLowestMarkerEnabled","is_chart_layout_default","theme","showLastDigitStats","chartControlsWidgets","enabledChartFooter","chartStatusListener","toolbarWidget","chartType","enabledNavigationWidget","requestAPI","requestForget","requestForgetStream","requestSubscribe","topWidgets","isConnectionOpened","isLive","leftMargin","initTrashCan","margin","Trashcan","MARGIN_BOTTOM_","MARGIN_SIDE_","default_tour_data","setStep","tour_data","setTourData","start_button","id_ref","has_dashboard_strategies","renderOpenButton","resetStrategiesAfterDelete","deleted_strategy_id","updated_workspaces","current_previewed_strategy","removeBotStrategy","strategy_from_workspace","onHandleChange","STRATEGY","MENU_DESKTOP","CONTEXT_MENU_MOBILE","RecentWorkspace","trigger_div_ref","is_div_triggered_once","is_dropdown_visible","setDropdownVisibility","handleHideDropdown","handleClickOutside","useComponentVisibility","handlePreviewList","dashboard_tab_dom_element","selector","observingParent","MutationObserver","childList","subtree","handleEdit","viewRecentStrategy","is_active_mobile","text_size","DesktopWrapper","HEADERS","RecentComponent","getStrategies","setStrategies","Cards","actions","hidden","SIDEBAR_INTRO","InfoPanel","renderInfo","sidebar_item","tutorial_link","tutorial_label","switchTab","DashboardTitle","MobileIconGuide","handleTabChange","DashboardDescription","DashboardComponent","el_portal","ReactDOM","faq_value","setFaqSearchContent","prev_active_tutorials","onFocusSearch","focus","tutorial_tabs","selectedTab","setSelectedTab","showSearchBar","setShowSearchBar","onChangeHandle","selectElement","input_ref","FAQ","dangerouslySetInnerHTML","__html","FAQContent","faq_list","faq_wrapper_element","handleAccordionClick","open_accordion_element","previous_sibling_element","previousElementSibling","offset","offsetTop","wrapper_element","scrollTo","behavior","scrollToElement","onKeyDown","Accordion","icon_close","icon_open","GuideContent","guide_list","video_guide","setVideoGuide","tour_guides","setTourGuides","getLengthOfArrayForTabs","hasVideoGuide","hasTourGuide","triggerTour","handleKeyboardEvent","backgroundImage","timeoutId","GuideTab","guideList","FAQTab","faqList","SearchTab","filteredList","TutorialsTab","setPrevActiveTutorialsTab","guide_tab_content","setGuideContent","faq_tab_content","setFaqContent","filtered_tab_list","setCombinedList","removeHTMLTagsFromString","filterContentBySearch","unified_filtered_list","descriptionMatch","titleMatch","contentMatch","generateAllTabs","filtered_guide_list","filtered_faq_list","sidebar_content","generateTutorialTabs","Dashboard","tab_value","init_render","url_hashed_values","hash","active_hash_tab","checkAndHandleConnection","api_status","tab_index","el_id","el_tab","scrollIntoView","inline","onTabItemChange","network_status","setIsOpen","portal_id","DBotStores","combinedStore","is_subscribed_to_msg_listener","msg_listener","handleMessage","onMessage","clients_country","changeActiveSymbolLoadingState","onDisconnectFromNetwork","vh","webpackContext","webpackContextResolve","__webpack_require__","exports","webpackAsyncContext"],"sourceRoot":""}