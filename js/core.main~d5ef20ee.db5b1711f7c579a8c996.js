/*! For license information please see core.main~d5ef20ee.db5b1711f7c579a8c996.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4215],{46121:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(60216),o=n.n(r),i=n(32735),a=n(39796),c=n(68461),s=n(68722),l=n(44850),u=function(e){var t=e.header,n=e.message,r=e.redirect_label,o=e.redirectOnClick,u=void 0===o?null:o,d=e.should_clear_error_on_click,_=e.setError,f=e.redirect_to,p=void 0===f?s.routes.trade:f,h=e.should_show_refresh,m=void 0===h||h,g=e.should_redirect,v=void 0===g||g,y=(0,a.useHistory)();i.useEffect((function(){if(y)return y.listen((function(){"function"==typeof _&&_(!1,null)}))}),[y,_]);var b=m?(0,l.localize)("Please refresh this page to continue."):"";return i.createElement(c.PageErrorContainer,{error_header:null!=t?t:"",error_messages:n?[n,b]:[],redirect_urls:[p],redirect_labels:!1===r&&[]||[r||(0,l.localize)("Refresh")],buttonOnClick:u||function(){return location.reload()},should_clear_error_on_click:d,setError:_,should_redirect:v})};u.propTypes={header:o().string,message:o().oneOfType([o().node,o().string,o().object]),redirectOnClick:o().func||o().object,redirect_label:o().string,setError:o().func,should_clear_error_on_click:o().bool,should_redirect:o().bool,redirect_to:o().string,should_show_refresh:o().bool};const d=u},91517:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(32735),o=n(39796),i=n(68722),a=n(49189),c=n.n(a),s=n(84880);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=l((0,r.useState)(!1),2),a=n[0],u=n[1],d=l((0,r.useState)(!1),2),_=d[0],f=d[1],p=(0,o.useHistory)(),h=(0,s.tm)(),m=window.LiveChatWidget,g=(0,r.useCallback)((function(){new Promise((function(e){window.LiveChatWidget?window.LiveChatWidget.on("ready",(function(){try{var t,n;"chatting"!==(null===(t=window.LiveChatWidget)||void 0===t?void 0:t.get("customer_data").status)&&(null===(n=window.LiveChatWidget)||void 0===n||n.call("destroy"),e())}catch(t){e()}})):e()})).then((function(){new Promise((function(e){window.__lc=window.__lc||{},window.__lc.license=i.livechat_license_id,function(e,t,n){function r(e){return o._h?o._h.apply(null,e):o._q.push(e)}var o={_q:[],_h:null,_v:"2.0",on:function(){r(["on",n.call(arguments)])},once:function(){r(["once",n.call(arguments)])},off:function(){r(["off",n.call(arguments)])},get:function(){if(!o._h)throw new Error("[LiveChatWidget] You can't use getters before load.");return r(["get",n.call(arguments)])},call:function(){r(["call",n.call(arguments)])},init:function(){var e=t.createElement("script");e.async=!0,e.type="text/javascript",e.src="https://cdn.livechatinc.com/tracking.js",t.head.appendChild(e)}};!e.__lc.asyncInit&&o.init(),e.LiveChatWidget=e.LiveChatWidget||o}(window,document,[].slice),e()})).then((function(){h()&&(f(!0),u(!0))}))}))}),[h]),v=function(e){var t;window.LiveChatWidget&&(window.LiveChatWidget.init(),null===(t=window.LiveChatWidget)||void 0===t||t.on("ready",(function(){var t,n,r,o=/^(.)*deriv\.(com|me|be)$/gi.test(window.location.hostname)?i.deriv_urls.DERIV_HOST_NAME:"binary.sx",a=c().getJSON("client_information",{domain:o}),s=c().getJSON("utm_data",{domain:o})||{},l=s.utm_source,u=s.utm_medium,d=s.utm_campaign,_=a||{},f=_.loginid,p=_.email,h=_.landing_company_shortcode,m=_.currency,g=_.residence,v=_.first_name,y=_.last_name;n=null!=v?v:" ",r=null!=y?y:" ";var b,w,E,k,S,x,O={is_logged_in:!!e,loginid:null!=f?f:" ",landing_company_shortcode:null!=h?h:" ",currency:null!=m?m:" ",residence:null!=g?g:" ",email:null!=p?p:" ",utm_source:null!=l?l:" ",utm_medium:null!=u?u:" ",utm_campaign:null!=d?d:" "};(null===(t=window.LiveChatWidget)||void 0===t||t.call("set_session_variables",O),e)?(null===(b=window.LiveChatWidget)||void 0===b||b.call("set_customer_email",O.email),null===(w=window.LiveChatWidget)||void 0===w||w.call("set_customer_name","".concat(n," ").concat(r)),null!==(E=window.LC_API)&&void 0!==E&&E.on_chat_ended&&(window.LC_API.on_chat_ended=function(){var e,t;null===(e=window.LiveChatWidget)||void 0===e||e.call("set_customer_email",O.email),null===(t=window.LiveChatWidget)||void 0===t||t.call("set_customer_name","".concat(n," ").concat(r))})):(null===(k=window.LiveChatWidget)||void 0===k||k.call("set_customer_email"," "),null===(S=window.LiveChatWidget)||void 0===S||S.call("set_customer_name"," "),null!==(x=window.LC_API)&&void 0!==x&&x.on_chat_ended&&(window.LC_API.on_chat_ended=function(){var e,t;null===(e=window.LiveChatWidget)||void 0===e||e.call("set_customer_email"," "),null===(t=window.LiveChatWidget)||void 0===t||t.call("set_customer_name"," ")}))})))};return(0,r.useEffect)((function(){a&&!m&&g()}),[m,a,g]),(0,r.useEffect)((function(){var e;p.listen(g),null===(e=window.LiveChatWidget)||void 0===e||e.on("ready",(function(){h()&&u(!0)}))}),[p,h,g]),(0,r.useEffect)((function(){_&&(v(e),f(!1))}),[_,e]),(0,r.useEffect)((function(){return v(e)}),[e,t]),{isReady:a,widget:window.LiveChatWidget,LC_API:window.LC_API}}},20026:(e,t,n)=>{n.d(t,{JH:()=>u,Lv:()=>i,S_:()=>a,V5:()=>l,VL:()=>d,dc:()=>s,fh:()=>c});var r,o,i=3e3,a=3,c=1,s={danger:"IcAlertDanger",info:"IcAlertInfo",success:"IcAlertSuccess",warning:"IcAlertWarning",contract_sold:"IcAlertInfo",announce:"IcAlertAnnounce"},l={announce:"notification--announce",danger:"notification--danger",info:"notification--info",success:"notification--success",warning:"notification--warning",contract_sold:"notification--info"},u=(r={promotions:1,news:2,contract_sold:3,danger:4,warning:5,info:6,success:7},function(e,t){return r[e.type]-r[t.type]}),d=(o={contract_sold:1,promotions:2,danger:3,news:4,warning:5,info:6,success:7},function(e,t){return o[e.type]-o[t.type]})},94418:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(32735),o=n(68461),i=n(68722);const a=function(e){var t=e.is_disabled,n=e.is_mobile,a=e.disabled_message,c=e.children;return t&&a?r.createElement(o.Popover,{alignment:(0,i.isBot)()&&n?"bottom":"left",message:a,zIndex:"99999"},c):r.createElement(r.Fragment,null,c)}},79250:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var r=n(32735),o=n(60216),i=n.n(o),a=n(40841),c=n.n(a),s=n(4390),l=n(68461),u=n(44850),d=n(68722),_=n(39796),f=n(59472),p=n(39448),h=function(e){var t=e.country_standpoint,n=e.currency,o=e.loginid,i=e.is_virtual,a=Object.values(t).includes(!0),c=o.replace(/\d/g,"");if(a){if("MLT"===c)return r.createElement(u.Localize,{i18n_default_text:"Options"});if("MX"===c)return t.is_united_kingdom?r.createElement(u.Localize,{i18n_default_text:"Gaming"}):t.is_isle_of_man?(0,d.getCurrencyName)(n):r.createElement(u.Localize,{i18n_default_text:"Synthetic"});if("MF"===c)return r.createElement(u.Localize,{i18n_default_text:"Multipliers"})}return i?r.createElement(u.Localize,{i18n_default_text:"Demo"}):n?(0,d.getCurrencyName)(n):r.createElement(u.Localize,{i18n_default_text:"No currency assigned"})},m=function(e){var t,n,o=e.has_error,i=e.market_type,a=e.sub_account_type,s=e.platform,_=e.server,f=e.is_dark_mode_on,p=e.is_eu,h=e.shortcode,m=e.should_show_server_name,g=(0,d.getCFDAccountDisplay)({market_type:i,sub_account_type:a,platform:s,is_eu:p,shortcode:h}),v=r.useCallback((function(e){if(e){var t,n,r,o,i,a,c=null===(t=e.server_info)||void 0===t||null===(n=t.geolocation)||void 0===n?void 0:n.region;if(c)return"".concat(c," ").concat(1===(null==e||null===(r=e.server_info)||void 0===r||null===(o=r.geolocation)||void 0===o?void 0:o.sequence)?"":null==e||null===(i=e.server_info)||void 0===i||null===(a=i.geolocation)||void 0===a?void 0:a.sequence)}return""}),[]);if(o)return r.createElement("div",null,r.createElement(l.Text,{color:"disabled",size:"xs"},r.createElement(u.Localize,{i18n_default_text:"Unavailable"})),(null==_||null===(t=_.server_info)||void 0===t?void 0:t.geolocation)&&m&&"synthetic"===i&&"svg"===h&&r.createElement(l.Text,{color:"less-prominent",size:"xxs",className:"badge-server badge-server--disabled"},v(_)));var y=(0,d.isBot)().is_pathname_bot;return r.createElement("div",null,"dxtrade"===s&&g===(0,u.localize)("Derived")?(0,u.localize)("Synthetic"):g,(null==_||null===(n=_.server_info)||void 0===n?void 0:n.geolocation)&&m&&"synthetic"===i&&"svg"===h&&r.createElement(l.Text,{color:f?"general":"colored-background",size:"xxs",className:c()("badge-server",{"badge-server-bot":y})},v(_)))};const g=function(e){var t=e.balance,n=e.currency,o=e.currency_icon,i=e.country_standpoint,a=e.display_type,s=e.has_balance,_=e.has_error,f=e.has_reset_balance,p=e.is_dark_mode_on,g=e.is_disabled,v=e.is_virtual,y=e.is_eu,b=e.loginid,w=e.market_type,E=e.redirectAccount,k=e.onClickResetVirtualBalance,S=e.selected_loginid,x=e.server,O=e.shortcode,A=e.sub_account_type,L=e.platform,C=e.should_show_server_name,P=n?o:"IcCurrencyUnknown";return r.createElement(r.Fragment,null,r.createElement("div",{id:"dt_".concat(b),className:c()("acc-switcher__account",{"acc-switcher__account--selected":b===S,"acc-switcher__account--disabled":g}),onClick:function(){g||E()}},r.createElement("span",{className:"acc-switcher__id"},r.createElement(l.Icon,{icon:v?"IcCurrencyVirtual":P,className:"acc-switcher__id-icon",size:24}),r.createElement("span",null,"currency"===a?r.createElement(h,{country_standpoint:i,currency:n,loginid:b,is_virtual:v}):r.createElement(m,{is_eu:y,market_type:w,server:x,sub_account_type:A,has_error:_,platform:L,is_dark_mode_on:p,shortcode:O,should_show_server_name:C}),r.createElement("div",{className:c()("acc-switcher__loginid-text",{"acc-switcher__loginid-text--disabled":_})},b)),f?r.createElement(l.Button,{is_disabled:g,onClick:function(e){e.stopPropagation(),k()},className:"acc-switcher__reset-account-btn",secondary:!0,small:!0},(0,u.localize)("Reset balance")):s&&r.createElement(l.Text,{size:"xs",color:"prominent",styles:{fontWeight:"inherit"},className:"acc-switcher__balance"},n&&r.createElement(l.Money,{currency:(0,d.getCurrencyDisplayCode)(n),amount:(0,d.formatMoney)(n,t,!0),should_format:!1,show_currency:!0})))))};var v=function(e){var t=e.children,n=e.header,o=e.is_visible,i=e.toggleVisibility;return r.createElement(l.ContentExpander,{className:"acc-switcher",title:n,is_expanded:o,onToggle:i,is_title_spaced:!0},t)};v.propTypes={children:i().node,header:i().oneOfType([i().object,i().string]),is_visible:i().bool,toggleVisibility:i().func};const y=v;function b(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e,t){return b(e).sort((function(e,n){var r=t[e.loginid].currency,o=t[n.loginid].currency,i=(0,d.isCryptocurrency)(r),a=(0,d.isCryptocurrency)(o),c=!i,s=!a;return e.is_virtual||n.is_virtual?e.is_virtual?1:-1:i&&a||c&&s?r<o?-1:1:c&&a?-1:1}))},k=function(e){return b(e).sort((function(e,t){var n=S(e),r=S(t);return n&&!r?1:r&&!n||"gaming"===e.market_type||"synthetic"===e.market_type?-1:"financial"===e.sub_account_type?"gaming"===t.market_type||"synthetic"===t.market_type?1:-1:1}))},S=function(e){return"demo"===e.account_type},x=n(34964),O=n(11490),A=n(77178);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function C(){C=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==L(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function P(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){P(i,r,o,a,c,"next",e)}function c(e){P(i,r,o,a,c,"throw",e)}a(void 0)}))}}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=(0,f.observer)((function(e){var t,n,o,i=e.history,a=e.is_mobile,s=e.is_visible,_=(0,f.useStore)(),h=_.client,m=_.ui,v=_.traders_hub,b=h.available_crypto_currencies,w=h.loginid,L=h.accounts,P=h.account_type,j=h.account_list,I=h.residence,z=h.country_standpoint,M=h.currency,D=h.is_eu,R=h.is_landing_company_loaded,F=h.is_low_risk,U=h.is_high_risk,W=h.is_logged_in,B=h.is_virtual,G=h.has_fiat,V=h.landing_company_shortcode,Y=h.mt5_login_list,H=h.obj_total_balance,q=h.switchAccount,K=h.resetVirtualBalance,Z=h.has_active_real_account,$=h.logout,J=h.upgradeable_landing_companies,X=h.real_account_creation_unlock_date,Q=h.has_any_real_account,ee=h.virtual_account_loginid,te=v.show_eu_related_content,ne=v.content_flag,re=v.selectRegion,oe=v.setTogglePlatformType,ie=m.is_dark_mode_on,ae=m.is_positions_drawer_on,ce=m.openRealAccountSignup,se=m.toggleAccountsDialog,le=m.togglePositionsDrawer,ue=m.toggleSetCurrencyModal,de=m.should_show_real_accounts_list,_e=m.setShouldShowCooldownModal,fe=T(r.useState(!B||de?0:1),2),pe=fe[0],he=fe[1],me=T(r.useState(!0),2),ge=me[0],ve=me[1],ye=T(r.useState(!0),2),be=ye[0],we=ye[1],Ee=T(r.useState(!0),2),ke=Ee[0],Se=Ee[1],xe=T(r.useState(!0),2),Oe=xe[0],Ae=xe[1],Le=r.useRef(),Ce=r.useRef(null),Pe=H.currency,Ne=null===(t=j.find((function(e){return e.is_virtual})))||void 0===t?void 0:t.loginid,Te=L[Ne]?L[Ne].currency:"USD",je=function(e){switch(e){case"demo_deriv":return ve(!ge);case"real_deriv":return we(!be);case"non-eu-regulator":return Se(!ke);case"eu-regulator":return Ae(!Oe);default:return!1}},Ie=function(){var e=N(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ze(),ae&&le(),i.push(d.routes.index),e.next=5,$().then((function(){return window.location.href=(0,d.getStaticUrl)("/")}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){se(!1)};(0,l.useOnClickOutside)(Le,ze,(function(e){return s&&!e.target.classList.contains("acc-info")}));var Me=function(){var e=N(C().mark((function e(t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ze(),w!==t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,q(t);case 5:A.Analytics.setAttributes({account_type:t.substring(0,2)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=N(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ze(),K();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=0===pe,Fe=1===pe,Ue=te&&("malta"===V||"iom"===V&&0!==J.length),We=function(){return te||B||!(b.length<1&&!G||!B)||Ue||F?J:[]},Be=(0,O.useHasSetCurrency)();if(!W)return!1;var Ge=function(e){return(null==e?void 0:e.is_virtual)&&1e4!==(null==e?void 0:e.balance)},Ve=function(){var e=[];return(R?ne===d.ContentFlag.LOW_RISK_CR_NON_EU?k(Y).filter((function(e){return!S(e)&&"maltainvest"!==e.landing_company_short})):k(Y).filter((function(e){return!S(e)})):[]).map((function(t){"svg"===t.landing_company_short&&"synthetic"===t.market_type&&(e.length?e.forEach((function(n){return n.server!==t.server&&e.push(t),e})):e.push(t))})),e.length>1},Ye=function(e){return E(j,L).filter((function(t){return!t.is_virtual&&t.loginid.startsWith(e)})).length>1},He=null===(n=j.find((function(e){var t;return null===(t=e.loginid)||void 0===t?void 0:t.startsWith("CR")})))||void 0===n?void 0:n.loginid,qe=r.createElement("div",{className:"acc-switcher__list-wrapper"},Ne&&r.createElement(y,{header:(0,u.localize)("Deriv account"),is_visible:ge,toggleVisibility:function(){je("demo_deriv")}},r.createElement("div",{className:"acc-switcher__accounts"},E(j,L).filter((function(e){return e.is_virtual})).map((function(e){return r.createElement(g,{is_dark_mode_on:ie,key:e.loginid,balance:L[e.loginid].balance,currency:L[e.loginid].currency,currency_icon:"IcCurrency-".concat(e.icon),country_standpoint:z,display_type:"currency",has_balance:"balance"in L[e.loginid],has_reset_balance:Ge(L[w]),is_disabled:e.is_disabled,is_virtual:e.is_virtual,loginid:e.loginid,redirectAccount:e.is_disabled?void 0:function(){return Me(e.loginid)},onClickResetVirtualBalance:De,selected_loginid:w})}))))),Ke=r.createElement("div",{ref:Ce,className:"acc-switcher__list-wrapper"},r.createElement(r.Fragment,null,!D||F?r.createElement(r.Fragment,null,r.createElement(y,{className:"acc-switcher__title",header:F?(0,u.localize)("Non-EU Deriv ".concat(Ye("CR")?"accounts":"account")):(0,u.localize)("Deriv ".concat(Ye("CR")?"accounts":"account")),is_visible:ke,toggleVisibility:function(){je("real_deriv")}},r.createElement("div",{className:"acc-switcher__accounts"},E(j,L).filter((function(e){return!e.is_virtual&&e.loginid.startsWith("CR")})).map((function(e){return r.createElement(g,{account_type:P,is_dark_mode_on:ie,key:e.loginid,balance:L[e.loginid].balance,currency:L[e.loginid].currency,currency_icon:"IcCurrency-".concat(e.icon),country_standpoint:z,display_type:"currency",has_balance:"balance"in L[e.loginid],is_disabled:e.is_disabled,is_virtual:e.is_virtual,is_eu:D,loginid:e.loginid,redirectAccount:e.is_disabled?void 0:function(){return Me(e.loginid)},selected_loginid:w,should_show_server_name:Ve()})}))),!He&&We().filter((function(e){return"svg"===e})).map((function(e,t){return r.createElement("div",{key:t,className:"acc-switcher__new-account"},r.createElement(l.Icon,{icon:"IcDeriv",size:24}),r.createElement(l.Text,{size:"xs",color:"general",className:"acc-switcher__new-account-text"},(0,p.GH)(e,{account_residence:I},z)),r.createElement(l.Button,{id:"dt_core_account-switcher_add-new-account",onClick:function(){X?(ze(),_e(!0)):(re("Non-EU"),ce("svg"))},className:"acc-switcher__new-account-btn",secondary:!0,small:!0},(0,u.localize)("Add")))}))),r.createElement("div",{className:"acc-switcher__separator"})):null,!U||D?r.createElement(y,{header:F?(0,u.localize)("EU Deriv ".concat(Ye("MF")?"accounts":"account")):(0,u.localize)("Deriv ".concat(Ye("MF")?"accounts":"account")),is_visible:Oe,toggleVisibility:function(){je("real_deriv")}},r.createElement("div",{className:"acc-switcher__accounts"},E(j,L).filter((function(e){return!e.is_virtual&&e.loginid.startsWith("MF")})).map((function(e){return r.createElement(g,{account_type:P,is_dark_mode_on:ie,key:e.loginid,balance:L[e.loginid].balance,currency:L[e.loginid].currency,currency_icon:"IcCurrency-".concat(e.icon),country_standpoint:z,display_type:"currency",has_balance:"balance"in L[e.loginid],is_disabled:e.is_disabled,is_virtual:e.is_virtual,is_eu:D,loginid:e.loginid,redirectAccount:e.is_disabled?void 0:function(){return Me(e.loginid)},selected_loginid:w,should_show_server_name:Ve()})}))),We().filter((function(e){return"maltainvest"===e})).map((function(e,t){return r.createElement("div",{key:t,className:"acc-switcher__new-account"},r.createElement(l.Icon,{icon:"IcDeriv",size:24}),r.createElement(l.Text,{size:"xs",color:"general",className:"acc-switcher__new-account-text"},(0,p.GH)(e,{account_residence:I},z)),r.createElement(l.Button,{id:"dt_core_account-switcher_add-new-account",onClick:function(){X?(ze(),_e(!0)):(re("EU"),ce("maltainvest"))},className:"acc-switcher__new-account-btn",secondary:!0,small:!0},(0,u.localize)("Add")))}))):null)),Ze=null==j||null===(o=j.find((function(e){return/^(CR|MF)/.test(e.loginid)})))||void 0===o?void 0:o.loginid,$e=function(){var e=function(){var e=function(){var e=N(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B||!Fe){e.next=5;break}return e.next=3,q(ee);case 3:e.next=8;break;case 5:if(!B||!Re){e.next=8;break}return e.next=8,q(Ze);case 8:se(!1),i.push(d.routes.traders_hub),oe("cfd");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement("div",{className:"acc-switcher__traders-hub"},r.createElement(x.CG,{onClick:e,className:"acc-switcher__traders-hub--link"},r.createElement(l.Text,{size:"xs",align:"center",className:"acc-switcher__traders-hub--text"},r.createElement(u.Localize,{i18n_default_text:"Looking for CFD accounts? Go to Trader's Hub"})))),r.createElement("div",{className:"acc-switcher__separator"}))};return Re&&Q||Fe?r.createElement(e,null):null};return r.createElement("div",{className:"acc-switcher__list",ref:Le,"data-testid":"acc-switcher"},R?r.createElement(r.Fragment,null,r.createElement(l.Tabs,{active_index:pe,className:"acc-switcher__list-tabs",onTabItemClick:function(e){return he(e)},top:!0},r.createElement("div",{label:(0,u.localize)("Real"),id:"real_account_tab"},r.createElement(l.DesktopWrapper,null,r.createElement(l.ThemedScrollbars,{height:"354px"},Ke)),r.createElement(l.MobileWrapper,null,r.createElement(l.Div100vhContainer,{className:"acc-switcher__list-container",max_autoheight_offset:"234px"},Ke))),r.createElement("div",{label:(0,u.localize)("Demo"),id:"dt_core_account-switcher_demo-tab"},r.createElement(l.DesktopWrapper,null,r.createElement(l.ThemedScrollbars,{height:"354px"},qe)),r.createElement(l.MobileWrapper,null,r.createElement(l.Div100vhContainer,{className:"acc-switcher__list-container",max_autoheight_offset:"234px"},qe)))),r.createElement("div",{className:c()("acc-switcher__separator",{"acc-switcher__separator--auto-margin":a})}),r.createElement("div",{className:"acc-switcher__total"},r.createElement(l.Text,{line_height:"s",size:"xs",weight:"bold",color:"prominent"},r.createElement(u.Localize,{i18n_default_text:"Total assets"})),r.createElement(l.Text,{size:"xs",color:"prominent",className:"acc-switcher__balance"},r.createElement(l.Money,{currency:Re?Pe:Te,amount:(0,d.formatMoney)(Re?Pe:Te,Re?H.amount_real:L[Ne]?L[Ne].balance:0,!0),show_currency:!0,should_format:!1}))),r.createElement(l.Text,{color:"less-prominent",line_height:"xs",size:"xxxs",className:"acc-switcher__total-subtitle"},(0,u.localize)("Total assets in your Deriv accounts.")),r.createElement("div",{className:"acc-switcher__separator"}),r.createElement($e,null),r.createElement("div",{className:"acc-switcher__footer"},Re&&Z&&!B&&r.createElement(l.Button,{className:"acc-switcher__btn--traders_hub",secondary:!0,onClick:!Q||Be&&M?function(){return ce("manage")}:function(){ze(),ue()}},(0,u.localize)("Manage accounts")),r.createElement("div",{id:"dt_logout_button",className:"acc-switcher__logout",onClick:Ie},r.createElement(l.Text,{color:"prominent",size:"xs",align:"left",className:"acc-switcher__logout-text"},(0,u.localize)("Log out")),r.createElement(l.Icon,{icon:"IcLogout",className:"acc-switcher__logout-icon drawer__icon",onClick:Ie})))):r.createElement(l.Loading,{is_fullscreen:!1}))}));I.propTypes={is_visible:i().bool,history:i().object};const z=(0,_.withRouter)(I);var M=function(e){var t=e.disableApp,n=e.enableApp,o=e.is_visible,i=e.is_upgrade_enabled,a=e.toggle;return r.createElement(l.Modal,{id:"dt_account_switcher_modal",className:"accounts-switcher",enableApp:n,is_open:o,is_vertical_top:!0,disableApp:t,has_close_icon:!1,toggleModal:a,height:"auto",width:"calc(100vw - 32px)"},r.createElement(l.Div100vhContainer,{className:c()("acc-switcher__wrapper","acc-switcher__wrapper--is-mobile"),max_autoheight_offset:"48px"},r.createElement(z,{is_mobile:!0,is_visible:!0,toggle:a,is_upgrade_enabled:i})))};M.propTypes={children:i().any,disableApp:i().func,enableApp:i().func,is_visible:i().bool,is_upgrade_enabled:i().bool,onClose:i().func,title:i().string,toggle:i().func,visible:i().bool,wrapperClassName:i().string};const D=M;var R=n(94418);const F=function(e){var t=e.is_virtual,n=e.currency;return r.createElement(l.Icon,{data_testid:"dt_icon",icon:"IcCurrency-".concat(t?"virtual":null!=n?n:"Unknown"),className:"acc-info__id-icon acc-info__id-icon--".concat(t?"virtual":n),size:24})};const U=function(e){var t=e.account_type,n=e.country_standpoint,o=e.is_eu;return"financial"===t?r.createElement(u.Localize,{i18n_default_text:"Multipliers"}):"gaming"===t?n.is_isle_of_man?null:n.is_united_kingdom?r.createElement(u.Localize,{i18n_default_text:"Gaming"}):o||n.is_belgium?r.createElement(u.Localize,{i18n_default_text:"Options"}):r.createElement(u.Localize,{i18n_default_text:"Derived"}):null};var W=function(e){var t=e.acc_switcher_disabled_message,n=e.account_type,o=void 0===n?"":n,i=e.balance,a=e.currency,_=e.country_standpoint,f=e.disableApp,p=e.enableApp,h=e.is_dialog_on,m=e.is_eu,g=e.is_virtual,v=e.toggleDialog,y=e.is_disabled,b=e.is_mobile,w=null==a?void 0:a.toLowerCase();return r.createElement("div",{className:"acc-info__wrapper"},r.createElement("div",{className:"acc-info__separator"}),r.createElement(R.Z,{is_disabled:y,disabled_message:t,is_mobile:b},r.createElement("div",{"data-testid":"dt_acc_info",id:"dt_core_account-info_acc-info",className:c()("acc-info",{"acc-info--show":h,"acc-info--is-virtual":g,"acc-info--is-disabled":y}),onClick:y?void 0:function(){return v()}},r.createElement("span",{className:"acc-info__id"},r.createElement(l.DesktopWrapper,null,r.createElement(F,{is_virtual:g,currency:w})),r.createElement(l.MobileWrapper,null,(g||a)&&r.createElement(F,{is_virtual:g,currency:w}))),(void 0!==i||!a)&&r.createElement("div",{className:"acc-info__account-type-and-balance"},r.createElement("p",{"data-testid":"dt_balance",className:c()("acc-info__balance",{"acc-info__balance--no-currency":!a&&!g})},a?"".concat(i," ").concat((0,d.getCurrencyDisplayCode)(a)):r.createElement(u.Localize,{i18n_default_text:"No currency assigned"})),r.createElement(l.Text,{size:"xxxs",line_height:"s"},r.createElement(U,{account_type:o,country_standpoint:_,is_eu:m}))),y?r.createElement(l.Icon,{data_testid:"dt_lock_icon",icon:"IcLock"}):r.createElement(l.Icon,{data_testid:"dt_select_arrow",icon:"IcChevronDownBold",className:"acc-info__select-arrow"}))),r.createElement(l.MobileWrapper,null,r.createElement(D,{is_visible:h,disableApp:f,enableApp:p,toggle:v})),r.createElement(l.DesktopWrapper,null,r.createElement(s.Z,{in:h,timeout:200,classNames:{enter:"acc-switcher__wrapper--enter",enterDone:"acc-switcher__wrapper--enter-done",exit:"acc-switcher__wrapper--exit"},unmountOnExit:!0},r.createElement("div",{className:"acc-switcher__wrapper"},r.createElement(z,{is_visible:h,toggle:v})))))};W.propTypes={acc_switcher_disabled_message:i().string,account_type:i().string,balance:i().string,currency:i().string,country_standpoint:i().object,disableApp:i().func,enableApp:i().func,is_dialog_on:i().bool,is_disabled:i().bool,is_eu:i().bool,is_virtual:i().bool,is_mobile:i().bool,loginid:i().string,toggleDialog:i().func};const B=W},34964:(e,t,n)=>{n.d(t,{CG:()=>b,Fv:()=>k,ZP:()=>L});var r=n(40841),o=n.n(r),i=n(60216),a=n.n(i),c=n(32735),s=n(56149),l=n(68722),u=n(39796),d=function e(t,n){var r;return n.some((function(n){var o;try{o=(0,u.matchPath)(t,n)}catch(e){if(/undefined/.test(e.message))return}return o?(r=n,!0):!!n.routes&&(r=e(t,n.routes))})),r},_=n(12951),f=n(59472);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var h=["active_class","to","children","href"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y=(0,f.observer)((function(e){var t=e.active_class,n=e.to,r=e.children,i=e.href,a=v(e,h),u=c.useContext(l.PlatformContext),p=(0,f.useStore)().common,y=p.has_error,b=p.error.setError,w=null==u?void 0:u.is_appstore,E=function(e){return/^\//.test(e)?e:"/".concat(e||"")}(n),k=d(E,(0,_.Z)({is_appstore:w}));if(!k&&n)throw new Error("Route not found: ".concat(n));return n&&!i?c.createElement("span",{"data-testid":"dt_span",className:o()(g({},"".concat(t,"__link-wrapper"),!!t)),onClick:function(){y&&b(!1,null)}},c.createElement(s.NavLink,m({to:E,activeClassName:t||"active",exact:k.exact},a),r)):c.createElement("a",m({"data-testid":"dt_link"},a),r)}));y.propTypes={active_class:a().string,children:a().oneOfType([a().object,a().array,a().string]),href:a().string,to:a().string};const b=y;var w=n(68461),E=n(44850);const k=(0,f.observer)((function(e){var t=e.icon_classname,n=e.is_clickable,r=void 0!==n&&n,i=e.lang,a=e.toggleModal,s=(0,f.useStore)().common,l=s.changeSelectedLanguage,u=s.current_language===i,d=c.createElement(c.Fragment,null,c.createElement(w.Icon,{icon:"IcFlag".concat(i.replace("_","-")),className:o()("settings-language__language-link-flag","settings-language__language-flag",t)}),c.createElement("span",{className:o()("settings-language__language-name",{"settings-language__language-name--active":u})},(0,E.getAllowedLanguages)()[i]));return c.createElement(c.Fragment,null,r?c.createElement("span",{"data-testid":"dt_settings_language_button",id:"dt_settings_".concat(i,"_button"),key:i,onClick:function(){l(i),null==a||a()},className:o()("settings-language__language-link",{"settings-language__language-link--active":u})},d):c.createElement("div",{id:"dt_settings_".concat(i,"_button"),className:o()("settings-language__language-link",{"settings-language__language-link--active":u})},d))}));var S=n(50344);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}const O=(0,f.observer)((function(e){var t=(0,f.useStore)().common.checkAppId;return c.createElement(u.Route,{exact:e.exact,path:e.path,render:function(n){var r,o=null,i=(0,l.removeBranchName)(location.pathname).replace(/\/$/,""),a=function(t){if(t.startsWith("/cashier")&&!t.includes("p2p")&&e.routes)return e.path===t||!(null==e||!e.routes.find((function(e){var n=e.path;return t===n})));if(t.includes("p2p")&&e.routes){var n=null==e?void 0:e.routes.find((function(e){return"/cashier/p2p"===e.path})),r="/cashier/p2p"===t?l.routes.p2p_buy_sell:null==n?void 0:n.routes.find((function(e){var n=e.path;return t===n}));return e.path===t||!!r}return!0}(i);if(a&&t(),e.component===u.Redirect){var s=e.to;if(e.path===l.routes.index)s=n.location.pathname.toLowerCase().replace(e.path,"");o=c.createElement(u.Redirect,{to:s})}else if(a&&e.is_authenticated&&!e.is_logged_in&&!e.is_logging_in)"true"===window.localStorage.getItem("is_redirecting")?(window.localStorage.removeItem("is_redirecting"),(0,l.redirectToLogin)(e.is_logged_in,(0,E.getLanguage)(),!0,3e3)):(0,l.redirectToLogin)(e.is_logged_in,(0,E.getLanguage)());else{var d=e.routes?e.routes.find((function(e){return e.default})):{},_=!(0,l.isEmptyObject)(d);o=c.createElement(c.Fragment,null,_&&i===e.path&&c.createElement(u.Redirect,{to:d.path}),a?c.createElement(e.component,x({},n,{routes:e.routes,passthrough:e.passthrough})):c.createElement(S.default,null))}var f=(null===(r=e.getTitle)||void 0===r?void 0:r.call(e))||"";return document.title="".concat(f," | ").concat(l.default_title),(0,l.alternateLinkTagChange)(),(0,l.canonicalLinkTagChange)(),o}})}));function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}const L=(0,f.observer)((function(e){var t=(0,f.useStore)(),n=t.ui,r=t.gtm,o=t.client,i=n.promptFn,a=n.prompt_when,s=r.pushDataLayer,d=o.is_eu,p=(0,u.useLocation)(),h=c.useContext(l.PlatformContext).is_appstore;c.useEffect((function(){s({event:"page_load"})}),[p]);var m=d;return c.createElement(c.Suspense,{fallback:c.createElement(w.Loading,null)},c.createElement(u.Prompt,{when:a,message:i}),c.createElement(u.Switch,null,(0,_.Z)({is_appstore:h,is_eu_country:m}).map((function(t,n){return c.createElement(O,A({key:n},t,e))}))))}))},12951:(e,t,n)=>{n.d(t,{Z:()=>H});var r=n(32735),o=n(39796),i=n(68722),a=n(68461),c=n(44850),s=n(60216),l=n.n(s),u=n(59472),d=n(42671),_=n(77178),f=(0,u.observer)((function(){var e,t,n=(0,o.useHistory)(),a=(0,u.useStore)(),s=a.client,l=a.ui,f=s.currency,p=s.is_logged_in,h=s.is_logging_in,m=s.setNewEmail,g=s.setVerificationCode,v=s.verification_code,y=l.openRealAccountSignup,b=l.setResetTradingPasswordModalOpen,w=l.toggleAccountSignupModal,E=l.toggleResetPasswordModal,k=l.toggleResetEmailModal,S=l.toggleUpdateEmailModal,x=l.is_mobile,O=window.location.search,A=new URLSearchParams(O),L=!1,C=A.get("action"),P=A.get("code")||v[C],N=A.get("ext_platform_url"),T=null===(e=localStorage.getObject("FeatureFlagsStore"))||void 0===e||null===(t=e.data)||void 0===t?void 0:t.next_wallet,j=r.useContext(i.PlatformContext).is_appstore,I=function(e){n.push("".concat(i.routes.root,"?ext_platform_url=").concat(e)),L=!0};switch(g(P,C),m(A.get("email"),C),C){case"signup":j||_.Analytics.trackEvent("ce_virtual_signup_form",{action:"email_confirmed",form_name:x?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default",email:A.get("email")}),i.SessionStore.set("signup_query_param",O),n.push({pathname:i.routes.onboarding,search:O}),i.SessionStore.remove("redirect_url"),L=!0,w(!0);break;case"reset_password":case"social_email_change":E(!0);break;case"request_email":k(!0);break;case"system_email_change":S(!0);break;case"trading_platform_mt5_password_reset":case"trading_platform_dxtrade_password_reset":var z="".concat(C,"_code");if(!h&&!p){v[C]&&sessionStorage.setItem(z,v[C]),(0,i.redirectToLogin)(p,(0,c.getLanguage)()),L=!0;break}if(!v[C])g(sessionStorage.getItem(z),C),sessionStorage.removeItem(z);var M=A.get("redirect_to");if(M){var D="",R="";switch(M){case"1":case"2":D=i.routes.traders_hub;break;case"10":case"20":D=i.routes.traders_hub,R="real";break;case"11":case"21":D=i.routes.traders_hub,R="demo";break;case"3":D=i.routes.passwords}D&&(n.push({pathname:D,hash:R,search:O}),L=!0)}b(!0);break;case"payment_withdraw":T?n.push("".concat(i.routes.wallets_withdrawal,"?verification=").concat(null==v?void 0:v.payment_withdraw)):n.push(i.routes.cashier_withdrawal),L=!0;break;case"payment_agent_withdraw":n.push(i.routes.cashier_pa),L=!0;break;case"add_account":d.WS.wait("get_account_status").then((function(){return y(f?"svg":"set_currency")})),N&&I(N);break;case"add_account_multiplier":d.WS.wait("get_account_status").then((function(){return y(f?"maltainvest":"set_currency")})),N&&I(N);break;case"manage_account":d.WS.wait("get_account_status").then((function(){return y("manage")})),N&&I(N);break;case"verification":sessionStorage.setItem("redirect_url",i.routes.p2p_verification);var F=(0,i.loginUrl)({language:(0,c.getLanguage)()});window.location.href=F;break;case"trading_platform_investor_password_reset":var U;localStorage.setItem("cfd_reset_password_code",P);var W=null===(U=localStorage.getItem("cfd_reset_password_intent"))||void 0===U?void 0:U.includes("demo");n.push("".concat(i.routes.traders_hub,"#").concat(W?"demo":"real","#reset-password")),L=!0;break;case"p2p_order_confirm":n.push({pathname:i.routes.cashier_p2p,search:O}),L=!0}return L||n.location.pathname===i.routes.root||n.push({pathname:i.routes.root,search:O}),null}));f.propTypes={history:l().object};const p=(0,o.withRouter)(f);var h=n(61055);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=(0,u.observer)((function(){var e,t,n=(0,u.useStore)().feature_flags,o=["wallet"],c=null===(e=Object.entries(null!==(t=n.data)&&void 0!==t?t:{}))||void 0===e?void 0:e.reduce((function(e,t){var n=w(t,2),r=n[0],a=n[1];return location.hostname===i.website_domain&&i.TRADE_FEATURE_FLAGS.includes(r)||o.includes(r)||(e[r]=a),e}),{});return n.data?r.createElement("div",{style:{marginTop:"4rem"}},r.createElement(a.Text,{as:"h1",weight:"bold",color:"prominent"},"Feature flags"),Object.keys(c).map((function(e){return r.createElement("div",{key:e,style:{marginTop:"1.6rem"}},r.createElement(a.Checkbox,{label:e,value:c[e],onChange:function(t){return n.update((function(n){return y(y({},n),{},b({},e,t.target.checked))}))}}))}))):null})),S=function(e){return r.createElement(h.Field,{name:e.name},(function(t){var n=t.field,o=t.form,i=o.errors,c=o.touched;return r.createElement(r.Fragment,null,r.createElement(a.Input,g({type:"text",autoComplete:"off",maxLength:"30",error:c[n.name]&&i[n.name]},n,e)))}))};const x=function(){var e=r.useContext(i.PlatformContext);return r.createElement(h.Formik,{initialValues:{app_id:(0,i.getAppId)(),server:(0,i.getSocketURL)(),is_appstore_enabled:e.is_appstore,is_debug_service_worker_enabled:!!(0,i.getDebugServiceWorker)()},validate:function(e){var t={};return e.app_id?/^\d+$/.test(e.app_id)||(t.app_id="Please enter a valid app ID."):t.app_id="App ID is required.",e.server||(t.server="Server is required."),t},onSubmit:function(t){localStorage.setItem("config.app_id",t.app_id),localStorage.setItem("config.server_url",t.server),localStorage.setItem(e.DERIV_APPSTORE_KEY,t.is_appstore_enabled),localStorage.setItem("debug_service_worker",t.is_debug_service_worker_enabled?1:0),e.setIsAppStore(t.is_appstore_enabled),sessionStorage.removeItem("config.platform"),location.reload()}},(function(e){var t=e.errors,n=e.isSubmitting,o=e.touched,c=e.values,s=e.handleChange,l=e.setFieldTouched;return r.createElement(h.Form,{style:{width:"30vw",minWidth:"300px",margin:(0,i.isMobile)()?"auto":"20vh auto"}},r.createElement("div",{style:{marginBottom:"1.6rem"}},r.createElement(a.Text,{as:"h1",weight:"bold",color:"prominent"},"Change API endpoint")),r.createElement(S,{name:"server",label:"Server",hint:"e.g. frontend.derivws.com"}),r.createElement(S,{name:"app_id",label:"OAuth App ID",hint:r.createElement(r.Fragment,null,"Register an"," ",r.createElement("a",{href:"https://developers.binary.com/applications/",target:"_blank",rel:"noopener noreferrer"},"app ID")," ","to use the above server for logging in.")}),r.createElement(h.Field,{name:"is_appstore_enabled"},(function(e){var t=e.field;return r.createElement("div",{style:{marginTop:"4.5rem",marginBottom:"1.6rem"}},r.createElement(a.Checkbox,g({},t,{label:"Enable Appstore",value:c.is_appstore_enabled,onChange:function(e){s(e),l("is_appstore_enabled",!0)}})))})),r.createElement(h.Field,{name:"is_debug_service_worker_enabled"},(function(e){var t=e.field;return r.createElement("div",{style:{marginTop:"4.5rem",marginBottom:"1.6rem"}},r.createElement(a.Checkbox,g({},t,{label:"Enable Service Worker registration for this URL",value:c.is_debug_service_worker_enabled,onChange:function(e){s(e),l("is_debug_service_worker_enabled",!0)}})))})),r.createElement(a.Button,{type:"submit",is_disabled:!((o.server||o.app_id||o.is_appstore_enabled||o.is_debug_service_worker_enabled)&&c.server&&c.app_id&&!t.server&&!t.app_id&&!n),text:"Submit",primary:!0}),r.createElement("span",{style:{marginLeft:"1.6rem"}}),r.createElement(a.Button,{type:"button",onClick:function(){localStorage.removeItem("config.app_id"),localStorage.removeItem("config.server_url"),location.reload()},text:"Reset to original settings",secondary:!0}),r.createElement(k,null))}))};var O=n(50368);function A(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}var P,N=r.lazy((function(){return Promise.resolve().then(n.bind(n,50344))})),T=r.lazy((function(){return(0,i.moduleLoader)((function(){return Promise.all([n.e(8605),n.e(654)]).then(n.t.bind(n,35024,23))}))})),j=r.lazy((function(){return n.e(3992).then(n.t.bind(n,17520,23))})),I=r.lazy((function(){return(0,i.moduleLoader)((function(){return n.e(1405).then(n.t.bind(n,78152,23))}))})),z=r.lazy((function(){return(0,i.moduleLoader)((function(){return n.e(1809).then(n.t.bind(n,88073,23))}))})),M=r.lazy((function(){return(0,i.moduleLoader)((function(){return Promise.all([n.e(4645),n.e(2856)]).then(n.t.bind(n,20217,23))}))})),D=r.lazy((function(){return(0,i.moduleLoader)((function(){return Promise.all([n.e(8605),n.e(5558)]).then(n.t.bind(n,50418,23))}))})),R=r.lazy((function(){return(0,i.moduleLoader)((function(){return n.e(1542).then(n.t.bind(n,82054,23))}))})),F=r.lazy((function(){return(0,i.moduleLoader)((function(){return n.e(655).then(n.t.bind(n,72243,23))}))})),U=r.lazy((function(){return(0,i.moduleLoader)((function(){return n.e(8001).then(n.t.bind(n,51267,23))}))})),W=r.lazy((function(){return(0,i.moduleLoader)((function(){return n.e(4645).then(n.t.bind(n,4318,23))}))})),B=r.lazy((function(){return(0,i.moduleLoader)((function(){return n.e(6747).then(n.t.bind(n,12129,23))}))})),G=(0,i.makeLazyLoader)((function(){return(0,i.moduleLoader)((function(){return n.e(3880).then(n.bind(n,62452))}))}),(function(){return r.createElement(a.Loading,null)})),V=function(e){e.is_appstore,e.is_eu_country;return[{path:i.routes.index,component:o.Redirect,getTitle:function(){return""},to:i.routes.root},{path:i.routes.endpoint,component:x,getTitle:function(){return"Endpoint"}},{path:i.routes.redirect,component:p,getTitle:function(){return(0,c.localize)("Redirect")}},{path:i.routes.complaints_policy,component:G(),getTitle:function(){return(0,c.localize)("Complaints policy")},icon_component:"IcComplaintsPolicy",is_authenticated:!0}].concat(A([{path:i.routes.bot,component:D,getTitle:function(){return(0,c.localize)("Bot")}},{path:i.routes.reports,component:j,getTitle:function(){return(0,c.localize)("Reports")},icon_component:"IcReports",is_authenticated:!0,routes:[{path:i.routes.positions,component:j,getTitle:function(){return(0,c.localize)("Open positions")},icon_component:"IcOpenPositions",default:!0},{path:i.routes.profit,component:j,getTitle:function(){return(0,c.localize)("Trade table")},icon_component:"IcProfitTable"},{path:i.routes.statement,component:j,getTitle:function(){return(0,c.localize)("Statement")},icon_component:"IcStatement"}]},{path:i.routes.dxtrade,component:function(e){return r.createElement(I,C({},e,{platform:"dxtrade"}))},getTitle:function(){return(0,c.localize)("Deriv X")}},{path:i.routes.compare_cfds,component:O.Z,getTitle:function(){return(0,c.localize)("Compare CFD accounts")}},{path:i.routes.mt5,component:function(e){return r.createElement(I,C({},e,{platform:"mt5"}))},getTitle:function(){return(0,c.localize)("MT5")}},{path:i.routes.account_closed,component:z,getTitle:function(){return(0,c.localize)("Account deactivated")}},{path:i.routes.account,component:z,getTitle:function(){return(0,c.localize)("Account Settings")},icon_component:"IcUserOutline",is_authenticated:!0,routes:[{getTitle:function(){return(0,c.localize)("Profile")},icon:"IcUserOutline",subroutes:[{path:i.routes.personal_details,component:z,getTitle:function(){return(0,c.localize)("Personal details")},default:!0},{path:i.routes.languages,component:z,getTitle:function(){return(0,c.localize)("Languages")}}]},{getTitle:function(){return(0,c.localize)("Assessments")},icon:"IcAssessment",subroutes:[{path:i.routes.trading_assessment,component:z,getTitle:function(){return(0,c.localize)("Trading assessment")}},{path:i.routes.financial_assessment,component:z,getTitle:function(){return(0,c.localize)("Financial assessment")}}]},{getTitle:function(){return(0,c.localize)("Verification")},icon:"IcVerification",subroutes:[{path:i.routes.proof_of_identity,component:z,getTitle:function(){return(0,c.localize)("Proof of identity")}},{path:i.routes.proof_of_address,component:z,getTitle:function(){return(0,c.localize)("Proof of address")}},{path:i.routes.proof_of_ownership,component:z,getTitle:function(){return(0,c.localize)("Proof of ownership")}},{path:i.routes.proof_of_income,component:z,getTitle:function(){return(0,c.localize)("Proof of income")}}]},{getTitle:function(){return(0,c.localize)("Security and safety")},icon:"IcSecurity",subroutes:[{path:i.routes.passwords,component:z,getTitle:function(){return(0,c.localize)("Email and passwords")}},{path:i.routes.self_exclusion,component:z,getTitle:function(){return(0,c.localize)("Self exclusion")}},{path:i.routes.account_limits,component:z,getTitle:function(){return(0,c.localize)("Account limits")}},{path:i.routes.login_history,component:z,getTitle:function(){return(0,c.localize)("Login history")}},{path:i.routes.api_token,component:z,getTitle:function(){return(0,c.localize)("API token")}},{path:i.routes.connected_apps,component:z,getTitle:function(){return(0,c.localize)("Connected apps")}},{path:i.routes.two_factor_authentication,component:z,getTitle:function(){return(0,c.localize)("Two-factor authentication")}},{path:i.routes.closing_account,component:z,getTitle:function(){return(0,c.localize)("Close your account")}}]}]},{path:i.routes.traders_hub,component:R,is_authenticated:!0,getTitle:function(){return(0,c.localize)("Trader's Hub")}},{path:i.routes.wallets,component:F,is_authenticated:!0,getTitle:function(){return(0,c.localize)("Wallets")}},{path:i.routes.cashier_p2p_v2,component:B,getTitle:function(){return(0,c.localize)("P2P-V2")},is_authenticated:!0},{path:i.routes.traders_hub_v2,component:U,is_authenticated:!0,getTitle:function(){return(0,c.localize)("Trader’s Hub V2")}},{path:i.routes.onboarding,component:R,is_authenticated:!1,getTitle:function(){return(0,c.localize)("Appstore")},routes:[{path:i.routes.traders_hub,component:R,getTitle:function(){return(0,c.localize)("Trader's Hub")}},{path:i.routes.onboarding,component:R,is_authenticated:!1,getTitle:function(){return(0,c.localize)("Onboarding")}}]},{path:i.routes.cashier,component:M,is_modal:!0,is_authenticated:!0,getTitle:function(){return(0,c.localize)("Cashier")},icon_component:"IcCashier",routes:[{path:i.routes.cashier_deposit,component:M,getTitle:function(){return(0,c.localize)("Deposit")},icon_component:"IcCashierAdd",default:!0},{path:i.routes.cashier_withdrawal,component:M,getTitle:function(){return(0,c.localize)("Withdrawal")},icon_component:"IcCashierMinus"},{path:i.routes.cashier_pa,component:M,getTitle:function(){return(0,c.localize)("Payment agents")},icon_component:"IcPaymentAgent"},{path:i.routes.cashier_acc_transfer,component:M,getTitle:function(){return(0,c.localize)("Transfer")},icon_component:"IcAccountTransfer"},{path:i.routes.cashier_pa_transfer,component:M,getTitle:function(){return(0,c.localize)("Transfer to client")},icon_component:"IcAccountTransfer"},{path:i.routes.cashier_p2p,component:M,getTitle:function(){return(0,c.localize)("Deriv P2P")},icon_component:"IcDp2p",routes:[{path:i.routes.p2p_buy_sell,component:W,getTitle:function(){return(0,c.localize)("Buy / Sell")},default:!0},{path:i.routes.p2p_advertiser_page,component:W,getTitle:function(){return(0,c.localize)("Advertiser's page")}},{path:i.routes.p2p_orders,component:W,getTitle:function(){return(0,c.localize)("Orders")}},{path:i.routes.p2p_my_ads,component:W,getTitle:function(){return(0,c.localize)("My ads")}},{path:i.routes.p2p_my_profile,component:W,getTitle:function(){return(0,c.localize)("My profile")}},{path:i.routes.p2p_verification,component:W,getTitle:function(){return(0,c.localize)("P2P verification")}}]},{id:"gtm-onramp-tab",path:i.routes.cashier_onramp,component:M,getTitle:function(){return(0,c.localize)("Fiat onramp")},icon_component:"IcCashierOnRamp"},{path:i.routes.cashier_transactions_crypto,component:M,is_invisible:!0}]},{path:i.routes.root,component:T,getTitle:function(){return(0,c.localize)("Trader")},routes:[{path:i.routes.contract,component:T,getTitle:function(){return(0,c.localize)("Contract Details")},is_authenticated:!0},{path:i.routes.error404,component:T,getTitle:function(){return(0,c.localize)("Error 404")}}]}]))},Y={component:N,getTitle:function(){return(0,c.localize)("Error 404")}};const H=function(e){var t=e.is_appstore,n=void 0===t||t,r=e.is_eu_country;return P||(P=V({is_appstore:n,is_eu_country:r})).push(Y),P}},39448:(e,t,n)=>{n.d(t,{FX:()=>o,GH:()=>i,Sj:()=>a});var r=n(44850),o={SUCCESS:1,WARN:0,DANGER:-1,PENDING:-2},i=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).account_residence,n=arguments.length>2?arguments[2]:void 0;if("im"===(void 0===t?"":t))return(0,r.localize)("Deriv account");switch(e){case"svg":return(0,r.localize)("Options & Multipliers");case"iom":return n.is_united_kingdom?(0,r.localize)("Deriv Gaming"):(0,r.localize)("Derived");case"malta":return n.is_united_kingdom||n.is_rest_of_eu||n.is_belgium?(0,r.localize)("Options"):(0,r.localize)("Derived");case"maltainvest":return(0,r.localize)("Multipliers");default:return(0,r.localize)("Deriv")}},a=function(e){var t=e.landing_company_shortcode,n=void 0===t?"":t,r=e.is_fully_authenticated,i=void 0!==r&&r,a=e.is_age_verified,c=void 0!==a&&a,s=e.is_isle_of_man_residence,l=void 0!==s&&s,u=e.is_belgium_residence;return"svg"===n||l||void 0!==u&&u?o.SUCCESS:"iom"===n?i?o.SUCCESS:c?o.WARN:o.DANGER:o.SUCCESS}},89474:(e,t,n)=>{n.d(t,{Z:()=>G});var r=n(40841),o=n.n(r),i=n(60216),a=n.n(i),c=n(32735),s=n(12788),l=n(81472),u=n(4390),d=n(68722),_=n(59472),f=n(68461),p=n(44850),h=function(e){var t=e.onClick,n=e.className;return c.createElement("button",{className:n,type:"button",onClick:t,"aria-label":(0,p.localize)("Close")})};h.propTypes={className:a().string,onClick:a().func.isRequired};const m=h;var g=n(20026);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){var t=e.type,n=e.class_suffix;return t&&"danger"===t?c.createElement(f.Icon,{icon:"IcAlertDanger",className:o()("inline-icon","notification__icon-type",y({},"notification__icon-type--".concat(n),n))}):c.createElement(c.Fragment,null,!!t&&c.createElement(f.Icon,{icon:g.dc[t],className:o()("notification__icon-type",y({},"notification__icon-type--".concat(n),n)),color:"success"===t?"green":void 0}))};b.propTypes={class_suffix:a().string,type:a().string};const w=b;function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){var t=e.className,n=e.header,r=e.message,i=e.primary_btn,a=e.secondary_btn,s=e.img_src,l=e.img_alt,u=e.onClose,_=e.icon;return c.createElement("div",{className:o()("notification-banner",k({},"notification-banner__".concat(t),t)),"data-testid":"dt_notification_banner"},c.createElement("div",{className:"notification-banner--left"},c.createElement(f.Text,{as:"h4",size:(0,d.isMobile)()?"xs":"s",weight:"bold",className:"notification-banner__title"},n),c.createElement(f.Text,{as:"p",size:(0,d.isMobile)()?"xxs":"xs",className:"notification-banner__description",line_height:"xs"},r),!!i&&c.createElement("div",{className:"notification-banner__btn-wrapper"},c.createElement(f.Button,{className:"notification-banner__btn",primary:!0,small:!0,onClick:i.onClick},i.text)),!!a&&c.createElement("div",{className:"notification-banner__btn-wrapper"},c.createElement(f.Button,{className:"notification-banner__btn",secondary:!0,small:!0,onClick:a.onClick},a.text))),c.createElement("div",{className:"notification-banner--right"},c.createElement("div",{className:"notification-banner__bg"}),c.createElement("img",{className:"notification-banner__img",src:s,alt:l}),c.createElement(f.Icon,{className:"notification-banner__close-icon",icon:null!=_?_:"IcCloseLight",onClick:u})))};S.propTypes={className:a().string,secondary_btn:a().object,header:a().string,img_alt:a().string,img_src:a().string,message:a().string,onClose:a().func,primary_btn:a().shape({text:a().string,onClick:a().func}),icon:a().string};const x=S;const O=function(e){var t=e.cta_btn,n=e.img_alt,r=e.img_src,o=e.message,i=e.onClose;return c.createElement("div",{"data-testid":"dt_notification_promo",className:"notification-promo"},c.createElement("img",{className:"notification-promo__img",src:r,alt:n}),c.createElement("div",{className:"notification-promo--container"},c.createElement("div",{className:"notification-promo--left"},c.createElement(f.Text,{as:"p",size:"xs",className:"notification-promo__message"},o),t&&c.createElement(f.Button,{className:"notification-promo__btn",blue:!0,secondary:!0,onClick:t.onClick},t.text)),c.createElement(f.Icon,{className:"notification-promo__close-icon",icon:"IcCloseLight",onClick:i})))};var A=n(34964),L=function(e){var t=e.action,n=e.header,r=e.message,i=e.onClose;return setTimeout(i,6e4),c.createElement("div",{"data-testid":"dt_notification_order",className:"notification notification-announce notification--order-successful"},c.createElement("div",{className:"notification__icon-background"},c.createElement(w,{type:"announce",class_suffix:"is-background"})),c.createElement("div",{className:"notification__icon"},c.createElement(w,{type:"announce"})),c.createElement("div",{className:"notification__text-container"},c.createElement(f.Text,{as:"h4",weight:"bold",className:"notification__header"},n),c.createElement(f.Text,{as:"p",className:"notification__text-body"},r),c.createElement("div",{className:"notification__action"},!(0,d.isEmptyObject)(t)&&c.createElement(c.Fragment,null,t.route?c.createElement(A.CG,{className:o()("dc-btn","dc-btn--secondary","notification__cta-button"),onClick:i,to:t.route},c.createElement(f.Text,{size:"xxs",weight:"bold"},t.text)):c.createElement(f.Button,{className:"notification__cta-button",text:t.text,onClick:function(){t.onClick(),i()},secondary:!0,renderText:function(e){return c.createElement(f.Text,{size:"xxs",weight:"bold",align:"center"},e)}})))),c.createElement(m,{className:"notification__close-button",onClick:i}))};L.propTypes={action:a().object,header:a().string,is_auto_close:a().bool,message:a().string,onClose:a().func};const C=L;var P=function(e){var t=e.data,n=e.removeNotificationMessage,r=c.useRef(null),i=c.useContext(d.PlatformContext).is_appstore,a=function(e){n(t),t.closeOnClick&&t.closeOnClick(t,e)};switch(t.is_auto_close&&setTimeout(a,t.delay||g.Lv),t.type){case"news":return c.createElement(x,{className:t.className,header:t.header,message:t.message,primary_btn:t.primary_btn,secondary_btn:t.secondary_btn,img_src:t.img_src,img_alt:t.img_alt,onClose:a,icon:t.icon});case"trustpilot":return c.createElement(x,{className:t.className,header:t.header_popup,message:t.message_popup,secondary_btn:t.action,img_src:t.img_src,img_alt:t.img_alt,onClose:a});case"promotions":return c.createElement(O,{cta_btn:t.cta_btn,img_alt:t.img_alt,img_src:t.img_src,message:t.message,onClose:a});case"p2p_completed_order":return c.createElement(C,{action:t.action,header:t.header,message:t.message,onClose:a});default:return c.createElement("div",{className:o()("notification",g.V5[t.type],{"notification--small":"small"===t.size}),"data-testid":"dt_default_component"},c.createElement("div",{className:o()("notification__icon-background",{"notification__icon-background--header-only":!t.message})},c.createElement(w,{type:t.type,class_suffix:"is-background"})),c.createElement("div",{className:"notification__icon"},c.createElement(w,{type:t.type})),c.createElement("div",{className:"notification__text-container"},c.createElement(f.Text,{as:"h4",weight:"bold",className:"notification__header"},t.header),t.timeout&&c.createElement(f.LinearProgress,{className:"notification__timeout",timeout:t.timeout,action:t.action.onClick,render:t.timeoutMessage,should_store_in_session:!0,session_id:t.key,ref:r}),c.createElement("p",{className:"notification__text-body"},t.message),c.createElement("div",{className:"notification__action"},!(0,d.isEmptyObject)(t.action)&&c.createElement(c.Fragment,null,t.action.route?c.createElement(A.CG,{className:o()("dc-btn","dc-btn--secondary","notification__cta-button"),to:t.action.route},c.createElement(f.Text,{size:"xxs",weight:"bold"},t.action.text)):c.createElement(f.Button,{className:"notification__cta-button",onClick:function(){t.timeout&&r.current.removeTimeoutSession(),t.action.onClick({is_appstore:i})},text:t.action.text,secondary:!0,renderText:function(e){return c.createElement(f.Text,{size:"xxs",weight:"bold",align:"center"},e)}})))),!t.should_hide_close_btn&&c.createElement(m,{className:"notification__close-button",onClick:function(){return a(!0)}}))}};P.propTypes={data:a().shape({action:a().shape({onClick:a().func,route:a().string,text:a().string}),cta_btn:a().object,className:a().string,closeOnClick:a().func,delay:a().number,header:a().oneOfType([a().object,a().string]),header_popup:a().string,img_alt:a().string,img_src:a().string,is_auto_close:a().bool,key:a().string,icon:a().string,message:a().oneOfType([a().node,a().string]),message_popup:a().string,primary_btn:a().object,secondary_btn:a().object,should_hide_close_btn:a().bool,size:a().oneOf(["small"]),timeout:a().number,timeoutMessage:a().func,type:a().oneOf(["warning","info","success","danger","contract_sold","news","trustpilot","announce","promotions","p2p_completed_order"]).isRequired}),removeNotificationMessage:a().func};const N=P;var T=n(39796),j=n(79479),I=(0,n(16).observer)((function(e){var t=e.show_trade_notifications,n=(0,_.useStore)().notifications,r=n.removeTradeNotifications,o=n.trade_notifications;return t&&o.length?c.createElement(f.MobileWrapper,null,c.createElement("div",{className:"trade-notifications"},o.slice(0,3).map((function(e){var t=e.buy_price,n=e.contract_id,o=e.currency,i=e.contract_type,a=e.id,s=e.profit,l=e.symbol,u=e.status,_=e.timestamp,h="open"===u;return c.createElement(f.SwipeableNotification,{key:a,is_failure:!h&&s<0,is_success:!h&&s>=0,onUnmount:function(){return r(a)},redirect_to:(0,d.getContractPath)(n),timestamp:h?null:_,visibility_duration_ms:3e3},c.createElement(f.Text,{as:"p",size:"xxxs",line_height:"s"},c.createElement(p.Localize,{i18n_default_text:"<0>{{title}}:</0> {{trade_type_name}} on {{symbol}}",components:[c.createElement("strong",{key:0})],values:{symbol:l,title:h?(0,p.localize)("Trade opened"):(0,p.localize)("Trade closed"),trade_type_name:i},shouldUnescape:!0})),c.createElement(f.Text,{as:"p",size:"xxxs",line_height:"s"},h?(0,d.getCardLabels)().STAKE:(0,d.getCardLabels)().TOTAL_PROFIT_LOSS," ",c.createElement(f.Text,{size:"xxxs",line_height:"s",weight:"bold"},c.createElement(f.Money,{amount:h?t:s,currency:o,has_sign:!h,should_format:!0,show_currency:!0}))))})))):null}));const z=I;function M(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e){var t=e.children;return(0,d.isMobile)()?s.createPortal(t,document.getElementById("deriv_app")):t},W=function(e){var t=e.is_notification_loaded,n=e.style,r=e.notifications,i=e.removeNotificationMessage,a=e.show_trade_notifications,s=(0,T.useLocation)().pathname;return c.createElement("div",{className:o()("notification-messages",{"notification-messages--traders-hub":s===d.routes.traders_hub}),style:n},c.createElement(l.Z,{component:"div"},r.map((function(e){return c.createElement(u.Z,{appear:!!t,key:e.key,in:!!e.header,timeout:150,classNames:{appear:"notification--enter",enter:"notification--enter",enterDone:"notification--enter-done",exit:"notification--exit"},unmountOnExit:!0},c.createElement(N,{data:e,removeNotificationMessage:i}))})),c.createElement(z,{show_trade_notifications:a})))},B=(0,_.observer)((function(e){var t=e.is_notification_loaded,n=e.is_mt5,r=e.stopNotificationLoading,o=e.show_trade_notifications,i=(0,_.useStore)().notifications,a=i.marked_notifications,s=i.notification_messages,l=i.removeNotificationMessage,u=i.markNotificationMessage,f=i.should_show_popups,p=D(c.useState({}),2),h=p[0],m=p[1],v=D(c.useState(null),2),y=v[0],b=v[1];c.useEffect((function(){if(n&&r(),y&&(0,d.isMobile)()&&null!==y.parentElement){var e=y.parentElement.getBoundingClientRect();m({top:e.top+8})}}),[n,y]);var w=s.filter((function(e){var t=!a.includes(e.key),n=!(0,d.isMobile)()||([].concat(M(j.vv),["authenticate","deriv_go","document_needs_action","dp2p","contract_sold","has_changed_two_fa","identity","install_pwa","need_fa","needs_poinc","notify_financial_assessment","poi_name_mismatch","poa_address_mismatch_failure","poa_address_mismatch_success","poa_address_mismatch_warning","poa_expired","poa_failed","poa_rejected_for_mt5","poa_verified","poi_expired","poi_failed","poi_verified","poinc_upload_limited","p2p_daily_limit_increase","resticted_mt5_with_failed_poa","resticted_mt5_with_pending_poa","svg_needs_poa","svg_needs_poi","svg_needs_poi_poa","svg_poi_expired","wallets_migrated","wallets_failed","tnc","trustpilot","unwelcome","additional_kyc_info"]).includes(e.key)||"p2p_completed_order"===e.type),r=window.location.pathname!==d.routes.cashier_p2p||"P2P"===(null==e?void 0:e.platform),o=j.vv.includes(e.key);return t&&n&&(r||o)})),E=(0,d.isMobile)()?g.fh:g.S_,k=w.filter((function(e){return j.Pv.includes(e.key)||e.type.includes("p2p")?e:j.rH.includes(e.key)})),S=window.location.pathname===d.routes.cashier_deposit?k.filter((function(e){return["switched_to_real"].concat(M(j.vv)).includes(e.key)})):k.slice(0,E);return f?S.length?c.createElement("div",{ref:function(e){return b(e)},className:"notification-messages-bounds"},c.createElement(U,null,c.createElement(W,{notifications:S,is_notification_loaded:t,style:h,removeNotificationMessage:l,markNotificationMessage:u,show_trade_notifications:o}))):c.createElement(z,{show_trade_notifications:o}):null}));B.propTypes={is_mt5:a().bool,is_notification_loaded:a().bool,stopNotificationLoading:a().func,show_trade_notifications:a().bool};const G=B},32226:(e,t,n)=>{n.d(t,{Z:()=>Na});var r=n(32735),o=n(22568),i=n(10331),a=n.n(i),c=n(39064),s=n.n(c),l=n(68722),u=n(59472),d=n(44850),_=n(17804),f=n(60216),p=n.n(f),h=n(48115),m=n(56149),g={dxtrade:function(){return(0,d.localize)("Deriv X")},mt5:function(){return(0,d.localize)("MT5")},mt5_cfds:function(){return(0,d.localize)("MT5 CFDs")},ctrader:function(){return(0,d.localize)("Deriv cTrader")},cfd:function(){return(0,d.localize)("CFDs")},synthetic:function(){return(0,d.localize)("Derived")},synthetic_demo:function(){return(0,d.localize)("Derived Demo")},synthetic_bvi:function(){return(0,d.localize)("Derived BVI")},synthetic_svg:function(){return(0,d.localize)("Derived SVG")},synthetic_v:function(){return(0,d.localize)("Derived Vanuatu")},financial:function(){return(0,d.localize)("Financial")},financial_demo:function(){return(0,d.localize)("Financial Demo")},financial_bvi:function(){return(0,d.localize)("Financial BVI")},financial_fx:function(){return(0,d.localize)("Financial Labuan")},financial_v:function(){return(0,d.localize)("Financial Vanuatu")},financial_svg:function(){return(0,d.localize)("Financial SVG")},all:function(){return(0,d.localize)("Swap-Free")},all_demo:function(){return(0,d.localize)("Swap-Free Demo")},all_svg:function(){return(0,d.localize)("Swap-Free SVG")}},v={empty_address:function(){return(0,d.localize)("This field is required")},address:function(){return(0,d.localize)("Use only the following special characters: {{permitted_characters}}",{permitted_characters:l.address_permitted_special_characters_message,interpolation:{escapeValue:!1}})},barrier:function(){return(0,d.localize)("Only numbers and these special characters are allowed: {{permitted_characters}}",{permitted_characters:"+ - ."})},email:function(){return(0,d.localize)("Invalid email address.")},general:function(){return(0,d.localize)("Only letters, numbers, space, hyphen, period, and apostrophe are allowed.")},name:function(){return(0,d.localize)("Letters, spaces, periods, hyphens, apostrophes only.")},password:function(){return(0,d.localize)("Password should have lower and uppercase English letters with numbers.")},po_box:function(){return(0,d.localize)("P.O. Box is not accepted in address")},phone:function(){return(0,d.localize)("Please enter a valid phone number (e.g. +15417541234).")},postcode:function(){return(0,d.localize)("Letters, numbers, spaces, hyphens only")},signup_token:function(){return(0,d.localize)("The length of token should be 8.")},tax_id:function(){return(0,d.localize)("Should start with letter or number, and may contain hyphen and underscore.")},number:function(){return(0,d.localize)("Should be a valid number.")},decimalPlaces:function(e){return(0,d.localize)("Up to {{decimal_count}} decimal places are allowed.",{decimal_count:e})},value:function(e){return(0,d.localize)("Should be {{value}}",{value:e})},betweenMinMax:function(e,t){return(0,d.localize)("Should be between {{min_value}} and {{max_value}}",{min_value:e,max_value:t})},minNumber:function(e){return(0,d.localize)("Should be more than {{min_value}}",{min_value:e})},maxNumber:function(e){return(0,d.localize)("Should be less than {{max_value}}",{max_value:e})},password_warnings:{use_a_few_words:function(){return(0,d.localize)("Use a few words, avoid common phrases")},no_need_for_mixed_chars:function(){return(0,d.localize)("No need for symbols, digits, or uppercase letters")},uncommon_words_are_better:function(){return(0,d.localize)("Add another word or two. Uncommon words are better.")},straight_rows_of_keys_are_easy:function(){return(0,d.localize)("Straight rows of keys are easy to guess")},short_keyboard_patterns_are_easy:function(){return(0,d.localize)("Short keyboard patterns are easy to guess")},use_longer_keyboard_patterns:function(){return(0,d.localize)("Use a longer keyboard pattern with more turns")},repeated_chars_are_easy:function(){return(0,d.localize)('Repeats like "aaa" are easy to guess')},repeated_patterns_are_easy:function(){return(0,d.localize)('Repeats like "abcabcabc" are only slightly harder to guess than "abc"')},avoid_repeated_chars:function(){return(0,d.localize)("Avoid repeated words and characters")},sequences_are_easy:function(){return(0,d.localize)("Sequences like abc or 6543 are easy to guess")},avoid_sequences:function(){return(0,d.localize)("Avoid sequences")},recent_years_are_easy:function(){return(0,d.localize)("Recent years are easy to guess")},avoid_recent_years:function(){return(0,d.localize)("Avoid recent years")},avoid_associated_years:function(){return(0,d.localize)("Avoid years that are associated with you")},dates_are_easy:function(){return(0,d.localize)("Dates are often easy to guess")},avoid_associated_dates_and_years:function(){return(0,d.localize)("Avoid dates and years that are associated with you")},top10_common_password:function(){return(0,d.localize)("This is a top-10 common password")},top100_common_password:function(){return(0,d.localize)("This is a top-100 common password")},very_common_password:function(){return(0,d.localize)("This is a very common password")},similar_to_common_password:function(){return(0,d.localize)("This is similar to a commonly used password")},a_word_is_easy:function(){return(0,d.localize)("A word by itself is easy to guess")},names_are_easy:function(){return(0,d.localize)("Names and surnames by themselves are easy to guess")},common_names_are_easy:function(){return(0,d.localize)("Common names and surnames are easy to guess")},capitalization_doesnt_help:function(){return(0,d.localize)("Capitalization doesn't help very much")},all_uppercase_doesnt_help:function(){return(0,d.localize)("All-uppercase is almost as easy to guess as all-lowercase")},reverse_doesnt_help:function(){return(0,d.localize)("Reversed words aren't much harder to guess")},substitution_doesnt_help:function(){return(0,d.localize)("Predictable substitutions like '@' instead of 'a' don't help very much")},user_dictionary:function(){return(0,d.localize)("This password is on the blacklist")}}},y=n(68461),b=n(11490);const w=function(){var e=(0,l.getUrlBinaryBot)(!1);return r.createElement("iframe",{id:"localstorage-sync__bot",src:"".concat(e,"/localstorage-sync.html"),style:{display:"none",visibility:"hidden"},sandbox:"allow-same-origin allow-scripts"})};const E=function(){var e="";return e=(0,l.getPlatformFromUrl)().is_staging_deriv_app?l.deriv_urls.SMARTTRADER_STAGING:l.deriv_urls.SMARTTRADER_PRODUCTION,r.createElement("iframe",{id:"localstorage-sync",src:"".concat(e,"/localstorage-sync.html"),style:{display:"none",visibility:"hidden"},sandbox:"allow-same-origin allow-scripts"})};var k=n(46121);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===S(i)?i:String(i)),r)}var o,i}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,o,i=A(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).componentDidCatch=function(e,n){window.TrackJS&&window.TrackJS.console.log(t.props.root_store),t.setState({hasError:!0,error:e,info:n})},t.render=function(){return t.state.hasError?r.createElement(k.default,{should_show_refresh:!0}):t.props.children},t.state={hasError:!1},t}return t=a,n&&x(t.prototype,n),o&&x(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(r.Component);C.propTypes={root_store:p().object,children:p().oneOfType([p().string,p().arrayOf(p().node),p().node])};const P=C;var N=n(40841),T=n.n(N),j=n(39796),I=n(77178),z=function(e){var t=e.onAccept,n=e.onDecline,o=e.is_open,i=e.is_dark_mode;return r.createElement("div",{className:T()("cookie-banner",{"cookie-banner--is-closed":!o,"cookie-banner--theme-dark":i})},r.createElement("div",{className:"description"},r.createElement(d.Localize,{i18n_default_text:"Cookies help us to give you a better experience and personalised content on our site."}),r.createElement("br",null),r.createElement(d.Localize,{i18n_default_text:"If you agree to our use of cookies, click on Accept. For more information, <0>see our policy</0>.",components:[r.createElement(y.StaticUrl,{key:0,className:"link link--red",href:"/terms-and-conditions",is_eu_url:!0})]})),r.createElement(y.Button,{className:"cookie-banner__btn-dont-accept",secondary:!0,onClick:n},(0,d.localize)("Don’t accept")),r.createElement(y.Button,{id:"dt_core_cookie-banner_accept-btn",className:"cookie-banner__btn-accept",secondary:!0,onClick:t},(0,d.localize)("Accept")))};z.prototype={is_dark_mode:p().bool,is_open:p().bool,onAccept:p().func,onDecline:p().func};const M=z;function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=new l.CookieStorage(l.TRACKING_STATUS_KEY),U=(0,u.observer)((function(e){var t=e.children,n=D(r.useState(!1),2),o=n[0],i=n[1],a=D(r.useState(!1),2),c=a[0],s=a[1],_=r.useContext(l.PlatformContext).is_appstore,f=(0,u.useStore)(),p=f.client,h=f.common.platform,m=f.gtm.pushDataLayer,g=f.ui,v=p.is_eu_country,b=p.is_logged_in,w=p.is_logging_in,E=p.loginid,k=p.user_id,S=g.is_app_disabled,x=g.is_cashier_visible,O=g.is_cfd_page,A=g.is_positions_drawer_on,L=g.is_route_modal_on,C=g.notifyAppInstall,P=g.setAppContentsScrollRef,N=g.is_dark_mode_on,z=F.get(l.TRACKING_STATUS_KEY),R=r.useRef(null),U=r.useRef(null),W=(0,j.useLocation)(),B=window.location.hostname+window.location.pathname;r.useEffect((function(){if(b&&k){var e=(null===I.Analytics||void 0===I.Analytics?void 0:I.Analytics.getInstances()).tracking;null===I.Analytics||void 0===I.Analytics||I.Analytics.setAttributes({account_type:E.substring(0,2)}),null==e||e.identifyEvent(k,{language:(0,d.getLanguage)().toLowerCase()||"en"}),null===I.Analytics||void 0===I.Analytics||I.Analytics.pageView(B)}R.current&&P(R)}),[]),null===I.Analytics||void 0===I.Analytics||I.Analytics.pageView(B),r.useEffect((function(){(!v||"accepted"===z)&&!c&&(m({event:"allow_tracking"}),s(!0))}),[c,v,m,z]),r.useEffect((function(){z||b||w||l.WS.wait("website_status").then((function(){i(v)}))}),[z,b,v,w]),r.useEffect((function(){U.current&&(U.current.scrollTop=0)}),[null==W?void 0:W.pathname]),r.useEffect((function(){var e=function(e){e.preventDefault(),C(e)};return window.addEventListener("beforeinstallprompt",e),function(){return window.removeEventListener("beforeinstallprompt",e)}}),[C]);return r.createElement("div",{id:"app_contents",className:T()("app-contents",{"app-contents--show-positions-drawer":A,"app-contents--is-disabled":S,"app-contents--is-mobile":(0,l.isMobile)(),"app-contents--is-route-modal":L,"app-contents--is-scrollable":O||x,"app-contents--is-dashboard":_,"app-contents--is-hidden":l.platforms[h],"app-contents--is-onboarding":window.location.pathname===l.routes.onboarding}),ref:R},r.createElement(y.MobileWrapper,null,t),r.createElement(y.DesktopWrapper,null,window.location.pathname===l.routes.onboarding?r.createElement(y.ThemedScrollbars,{style:{maxHeight:"",height:"100%"},refSetter:U},t):r.createElement(y.ThemedScrollbars,{height:"calc(100vh - 84px)",has_horizontal:!0,refSetter:U},t)),o&&r.createElement(M,{onAccept:function(){F.set(l.TRACKING_STATUS_KEY,"accepted",{sameSite:"none",secure:!0}),m({event:"allow_tracking"}),i(!1),s(!0)},onDecline:function(){F.set(l.TRACKING_STATUS_KEY,"declined",{sameSite:"none",secure:!0}),i(!1)},is_open:o,is_dark_mode:N}))}));U.propTypes={children:p().any};const W=(0,j.withRouter)(U);var B=(0,u.observer)((function(e){var t=e.is_mobile,n=(0,u.useStore)().common.network_status,o=r.createElement("div",{"data-testid":"dt_network_status_element",className:T()("network-status__circle",{"network-status__circle--offline":"offline"===n.class,"network-status__circle--online":"online"===n.class,"network-status__circle--blinker":"blinker"===n.class})});return r.createElement("div",{"data-testid":"dt_network_status",className:T()("network-status__wrapper",{"network-status__wrapper--is-mobile":t})},t?o:r.createElement(y.Popover,{classNameBubble:"network-status__tooltip",alignment:"top",message:(0,d.localize)("Network status: {{status}}",{status:n.tooltip||(0,d.localize)("Connecting to server")})},o))}));B.propTypes={is_mobile:p().bool};const G=B;var V=function(){var e=(0,d.localize)("Go to {{hostname}}",{hostname:l.deriv_urls.DERIV_HOST_NAME});return r.createElement(y.StaticUrl,{href:"/",className:"footer__link"},r.createElement(y.Popover,{alignment:"top",message:e,zIndex:9999},r.createElement(y.Icon,{icon:"IcDerivOutline",className:"footer__icon ic-deriv__icon"})))},Y=n(34964),H=function(){var e=localStorage.getItem("config.server_url");return e?r.createElement("span",{style:{fontSize:"var(--text-size-xs)",color:"var(--brand-red-coral)"}},"The server"," ",r.createElement(Y.CG,{className:"account-settings-toggle",to:l.routes.endpoint},"endpoint")," ","is: ",e):null};function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(){var e=q(r.useState(!1),2),t=e[0],n=e[1],o={event:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],element:["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],fnc_enter:["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],fnc_exit:["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"]};r.useEffect((function(){o.event.forEach((function(e){document.addEventListener(e,i,!1)}))}),[o.event,i]);var i=r.useCallback((function(){n(o.element.some((function(e){return document[e]})))}),[o.element]),a=T()("ic-fullscreen","footer__link",{"ic-fullscreen--active":t});return r.createElement("a",{"data-testid":"dt_fullscreen_toggle",className:"".concat(a," footer__link"),onClick:function(e){e.stopPropagation();var r=t,i=r?document:document.documentElement,a=o[r?"fnc_exit":"fnc_enter"].find((function(e){return i[e]}));a?i[a]():n(!1)},id:"dt_fullscreen_toggle"},r.createElement(y.Popover,{alignment:"top",message:t?(0,d.localize)("Exit"):(0,d.localize)("Full screen"),zIndex:9999},t?r.createElement(y.Icon,{icon:"IcFullScreenRestore",className:"footer__icon"}):r.createElement(y.Icon,{data_testid:"dt_icon",icon:"IcFullScreen",className:"footer__icon"})))};function $(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=function(e){var t=e.settings_extension,n=[];return n.push.apply(n,$(t||[])),r.createElement(y.VerticalTab,{list:n})},Q=function(e){var t=e.enableApp,n=e.is_settings_visible,o=e.disableApp,i=e.toggleSettings,a=e.settings_extension,c=T()("ic-settings","footer__link",{"ic-settings--active":n});return r.createElement(r.Fragment,null,r.createElement("a",{id:"dt_settings_toggle","data-testid":"dt_toggle_settings",onClick:i,className:"".concat(c," footer__link")},r.createElement(y.Popover,{alignment:"top",message:(0,d.localize)("Platform settings"),zIndex:9999},r.createElement(y.Icon,{icon:"IcGear",data_testid:"dt_icon",className:"footer__icon ic-settings__icon"}))),r.createElement(y.Modal,{id:"dt_settings_modal",className:"modal-settings",enableApp:t,is_open:n,disableApp:o,title:(0,d.localize)("Platform settings"),toggleModal:i,height:"616px",width:"736px"},r.createElement(X,{settings_extension:a})))};Q.propTypes={disableApp:p().func,enableApp:p().func,is_settings_visible:p().bool,settings_extension:p().array,toggleSettings:p().func};const ee=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.common,n=e.ui,o=t.current_language,i=n.toggleLanguageSettingsModal;return r.createElement("div",{className:"settings-language"},r.createElement("div",{className:"settings-language__language-container"},Object.keys((0,d.getAllowedLanguages)()).map((function(e){return function(e,t){return e===t}(e,o)?r.createElement(Y.Fv,{key:e,lang:e}):r.createElement(Y.Fv,{key:e,is_clickable:!0,lang:e,toggleModal:i})}))))}));var te=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.common,n=e.ui,o=n.is_language_settings_modal_on,i=n.toggleLanguageSettingsModal,a=t.current_language,c=t.is_language_changing,s=T()("ic-language","footer__link",{"ic-settings--active":o,"ic-settings--disabled":c});return r.createElement(r.Fragment,null,r.createElement("a",{id:"dt_language_settings_toggle","data-testid":"dt_toggle_language_settings",onClick:i,className:s},r.createElement(y.Popover,{alignment:"top",message:(0,d.localize)("Language"),zIndex:"9999"},r.createElement(y.Icon,{icon:"IcFlag".concat(a.replace("_","-")),data_testid:"dt_icon",className:"ic-settings-language__icon",size:18}),r.createElement(y.Text,{weight:"bold",size:"xxs"},r.createElement(d.Localize,{i18n_default_text:a})))),r.createElement(y.Modal,{id:"dt_settings_modal",is_open:o,title:(0,d.localize)("Select Language"),toggleModal:i,width:"616px",should_header_stick_body:!1},r.createElement(ee,null)))})),ne=function(){return r.createElement(y.StaticUrl,{href:"/help-centre/",id:"dt_help_centre","aria-label":(0,d.localize)("Help centre"),className:"footer__link"},r.createElement(y.Popover,{classNameBubble:"help-centre__tooltip",alignment:"top",message:(0,d.localize)("Help centre"),zIndex:9999},r.createElement(y.Icon,{icon:"IcHelpCentre",className:"footer__icon"})))},re=function(){return r.createElement(y.StaticUrl,{href:"/responsible",className:"footer__link"},r.createElement(y.Popover,{alignment:"top",message:(0,d.localize)("Responsible trading"),zIndex:9999},r.createElement(y.Icon,{icon:"IcVerification",className:"footer__icon ic-deriv__icon"})))},oe=function(){return r.createElement(m.Link,{to:l.routes.account_limits,className:"footer__link"},r.createElement(y.Popover,{alignment:"top",message:(0,d.localize)("Account limits"),zIndex:9999},r.createElement(y.Icon,{icon:"IcAccountLimits",className:"footer__icon ic-deriv__icon"})))},ie=["styles"];function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}function ce(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const se=function(e){e.styles;var t=ce(e,ie);return r.createElement("svg",ae({xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128"},t),r.createElement("g",{fill:"none"},r.createElement("path",{fill:"#D1010E",d:"M25.04 47.46V63.2l-8.3-22.74c-.94-2.6 1.32-.92 1.32-.92l4.73 3.51a5.94 5.94 0 012.25 4.42m-8.3 38.48l8.3-22.75-23.54 8c-2.68.91-.95-1.26-.95-1.26L4.2 65.4a6.34 6.34 0 014.57-2.18 6.34 6.34 0 01-4.57-2.17L.56 56.44s-1.73-2.18.95-1.26l23.54 8v15.74a5.93 5.93 0 01-2.25 4.42l-4.74 3.5s-2.25 1.68-1.3-.9"}),r.createElement("path",{fill:"#818084",d:"M118.9 64.69v4.85a7.5 7.5 0 01-3.81.94c-2 0-3.26-.88-3.26-2.7A2.4 2.4 0 01113 65.5a6.55 6.55 0 013.1-.72l2.8-.1zm1.96 11.65h6.84a19.57 19.57 0 01-.44-5.13V59.5c0-6.36-3.3-9.94-11.37-9.94-3.74-.02-7.43.85-10.77 2.53l2.6 5.25a15.02 15.02 0 016.62-1.6c2.81 0 4.58 1 4.58 3.43v.27l-4.14.17a16.3 16.3 0 00-6.9 1.6 7.46 7.46 0 00-4.37 7.12c0 5.02 3.75 8.56 8.89 8.56 2.7.04 5.3-.95 7.29-2.76l1.17 2.2zm-32.8-12.7c-2.5 0-3.7-1.98-3.7-4 0-2.76 1.6-4 3.6-4 2.53 0 3.8 2.1 3.8 4.09 0 2.59-1.6 3.92-3.7 3.92m.56 20.15c-4.15 0-6.52-1.49-6.52-3.64a3.26 3.26 0 011.1-2.4c2.66 1.38 11 .6 11 3.7 0 1.6-2.65 2.4-5.6 2.4m-1.22 5.6c9.94 0 14.64-4.25 14.64-8.95 0-9.8-17.16-5.51-17.16-9.97-.01-.4.07-.79.22-1.16.98.24 1.98.35 2.98.33 6.68 0 11.38-3.8 11.38-9.83a9.6 9.6 0 00-1.88-5.8 5.49 5.49 0 011.54-.22c.75.01 1.49.1 2.21.28l1.55-5.75a18.88 18.88 0 00-1.88-.11c-3.76 0-5.47.94-6.96 2.32-.23.22-.39.33-.67.17a11.1 11.1 0 00-5.46-1.22c-8.07 0-11.32 5.25-11.32 9.83 0 3.43 1.54 6.63 4.58 8.23-2.1 1.16-3.48 2.98-3.48 4.8a3.6 3.6 0 001.71 3.2 6.5 6.5 0 00-4.64 6.01c0 4.36 4.42 7.79 12.65 7.79M30.6 76.32h8.35V58.45a8.88 8.88 0 015.02-1.71c3.09 0 3.42 2.2 3.42 4.75v14.85h8.34v-17.9a8.71 8.71 0 014.97-1.7c3.1 0 3.48 2.1 3.48 4.64v14.96h8.33V59.22c0-7.28-4.44-9.66-9.24-9.66-2.7 0-6.02 1.16-9.17 3.7-1.39-2.32-3.81-3.7-7.12-3.7-3.15 0-6.13 1.49-8.56 3.31l-.81-2.67h-7v26.12z"})))};function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var de=function(){return r.createElement("div",{className:"footer-regulatory-information"},r.createElement("div",{className:"footer-regulatory-information__icon"},r.createElement(se,null)),r.createElement("p",null,r.createElement(d.Localize,{i18n_default_text:"Synthetic indices in the EU are offered by {{legal_entity_name}}, W Business Centre, Level 3, Triq Dun Karm, Birkirkara BKR 9033, Malta, licensed and regulated by the Malta Gaming Authority (<0>licence no. MGA/B2C/102/2000</0>) and by the Revenue Commissioners for clients in Ireland (<2>licence no. 1010285</2>).",components:[r.createElement(y.StaticUrl,{href:"/regulatory/Deriv_(Europe)_Limited.pdf",key:0,className:"footer-regulatory-information__link",is_document:!0}),r.createElement("a",{href:"https://www.gamblingcommission.gov.uk/public-register/business/detail/39495",key:1,className:"footer-regulatory-information__link"}),r.createElement("a",{href:"https://".concat(l.deriv_urls.DERIV_HOST_NAME,"/regulatory/DEL_Remote_Bookmarker_License.pdf"),target:"_blank",rel:"nofollow noreferrer",key:2,className:"footer-regulatory-information__link"})],values:{legal_entity_name:(0,l.getLegalEntityName)("malta")}})))},_e=function(){return r.createElement("div",{className:"footer-regulatory-information"},r.createElement("p",null,r.createElement(d.Localize,{i18n_default_text:"Virtual events based bets in the UK and the Isle of Man are offered by {{legal_entity_name}}, Millennium House, Level 1, Victoria Road, Douglas IM2 4RW, Isle of Man, licensed and regulated in Great Britain by the Gambling Commission under <0>account no. 39172</0> and by the Gambling Supervision Commission in the Isle of Man (<1>view licence</1>).",components:[r.createElement("a",{href:"https://www.gamblingcommission.gov.uk/public-register/business/detail/39172",target:"_blank",rel:"nofollow noreferrer",key:0,className:"footer-regulatory-information__link"}),r.createElement("a",{href:"https://".concat(l.deriv_urls.DERIV_HOST_NAME,"/regulatory/Deriv_(MX)_Ltd.pdf"),target:"_blank",rel:"nofollow noreferrer",key:1,className:"footer-regulatory-information__link"})],values:{legal_entity_name:(0,l.getLegalEntityName)("mx")}})))},fe=function(){return r.createElement("div",{className:"footer-regulatory-information"},r.createElement("p",null,r.createElement(d.Localize,{i18n_default_text:"Financial products in the EU are offered by {{legal_entity_name}}, licensed as a Category 3 Investment Services provider by the Malta Financial Services Authority (<0>Licence no. IS/70156</0>).",components:[r.createElement("a",{href:"https://".concat(l.deriv_urls.DERIV_HOST_NAME,"/regulatory/Deriv_Investments_(Europe)_Limited.pdf"),target:"_blank",rel:"nofollow noreferrer",key:0,className:"footer-regulatory-information__link"})],values:{legal_entity_name:(0,l.getLegalEntityName)("maltainvest")}})))},pe=function(e){var t=e.landing_company,n=e.is_eu,o=e.show_eu_related_content,i=le(r.useState(!1),2),a=i[0],c=i[1];if(!n||n&&!o)return null;var s="iom"===t,l="malta"===t,u="maltainvest"===t;return r.createElement("div",{className:"footer__link"},r.createElement(y.Popover,{alignment:"top",message:(0,d.localize)("Regulatory Information"),zIndex:9999},r.createElement("a",{onClick:function(){return c(!0)}},r.createElement(y.Icon,{icon:"IcRegulatoryInformation",className:"footer__icon ic-deriv__icon"}))),r.createElement(y.Modal,{is_open:a,small:!0,has_close_icon:!0,toggleModal:function(){return c(!1)},title:(0,d.localize)("Regulatory Information")},s&&r.createElement(_e,null),l&&r.createElement(de,null),(u||o)&&r.createElement(fe,null)))};const he=G;var me=n(91517);const ge=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.ui,o=t.has_cookie_account,i=t.loginid,a=n.is_mobile,c=(0,me.Z)(o,i);if(!c.isReady)return null;var s=function(){var e;return null===(e=c.widget)||void 0===e?void 0:e.call("maximize")};return a?r.createElement("div",{className:"livechat gtm-deriv-livechat",onKeyDown:s,onClick:s},r.createElement("div",{className:"livechat__icon-wrapper"},r.createElement(y.Icon,{icon:"IcLiveChat",className:"livechat__icon"})),r.createElement(y.Text,{size:"xs"},r.createElement(d.Localize,{i18n_default_text:"Live chat"}))):r.createElement("div",{onKeyDown:s,onClick:s},r.createElement(y.Popover,{className:"footer__link",classNameBubble:"help-centre__tooltip",alignment:"top",message:r.createElement(d.Localize,{i18n_default_text:"Live chat"}),zIndex:"9999"},r.createElement(y.Icon,{icon:"IcLiveChat",className:"footer__icon gtm-deriv-livechat"})))}));const ve=function(){return(0,me.Z)().isReady?r.createElement("a",{href:l.whatsapp_url,"aria-label":(0,d.localize)("WhatsApp"),className:"footer__link",target:"_blank",rel:"noreferrer"},r.createElement(y.Popover,{classNameBubble:"whatsapp__tooltip",alignment:"top",message:(0,d.localize)("WhatsApp"),zIndex:9999},r.createElement(y.Icon,{icon:"IcWhatsApp",className:"footer__icon"}))):null};var ye=(0,u.observer)((function(e){var t=e.is_mobile,n=(0,u.useStore)().common.server_time,o=(0,l.toGMTFormat)(n),i=(0,l.toLocalFormat)(n);return r.createElement(y.Popover,{alignment:"top",message:i,className:T()("server-time",{"server-time--is-mobile":t}),zIndex:9999},o)}));ye.propTypes={is_mobile:p().bool};const be=ye;var we=function(){return r.createElement("div",{className:"footer-icon-separator"})},Ee=function(e,t){var n=e.Component;return r.createElement(r.Fragment,{key:"footer-link-".concat(e.position,"-").concat(t)},e.has_left_separator&&r.createElement(we,null),r.createElement(n,null),e.has_right_separator&&r.createElement(we,null))},ke=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.common,o=e.ui,i=e.traders_hub,a=t.is_logged_in,c=t.landing_company_shortcode,s=t.is_eu,l=t.is_virtual,d=n.current_language,_=o.enableApp,f=o.footer_extensions,p=o.settings_extension,h=o.is_app_disabled,m=o.is_route_modal_on,g=o.is_settings_modal_on,v=o.is_language_settings_modal_on,y=o.disableApp,b=o.toggleSettingsModal,w=o.toggleLanguageSettingsModal,E=i.show_eu_related_content,k=[],S=[];return f.filter&&(k=f.filter((function(e){return"left"===e.position})),S=f.filter((function(e){return"right"===e.position}))),r.createElement("footer",{className:T()("footer",{"footer--is-disabled":h||m})},k.length>0&&r.createElement("div",{className:"footer__links footer__links--left"},k.map(Ee)),r.createElement(H,null),r.createElement(he,null),r.createElement(be,null),r.createElement("div",{className:"footer__links"},S.map(Ee),r.createElement(ve,null),r.createElement(ge,null),r.createElement(we,null),r.createElement(V,null),r.createElement(re,null),a&&r.createElement(oe,null),a&&!l&&r.createElement(pe,{landing_company:c,is_eu:s,show_eu_related_content:E}),r.createElement(we,null),r.createElement(ne,null),r.createElement(Q,{is_settings_visible:g,toggleSettings:b,disableApp:y,enableApp:_,settings_extension:p}),r.createElement(te,{is_settings_visible:v,toggleSettings:w,lang:d}),r.createElement(Z,null)))}));const Se=(0,j.withRouter)(ke);var xe=["styles"];function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}function Ae(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const Le=function(e){e.styles;var t=Ae(e,xe);return r.createElement("svg",Oe({width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r.createElement("path",{d:"M8 12a4 4 0 110-8 4 4 0 010 8zm0-7C6.35 5 5 6.35 5 8s1.35 3 3 3 3-1.35 3-3-1.35-3-3-3zm.5-2.5v-2C8.5.22 8.28 0 8 0s-.5.22-.5.5v2c0 .28.22.5.5.5s.5-.22.5-.5zm3.74 1.96l1.11-1.11a.5.5 0 000-.71.5.5 0 00-.71 0l-1.11 1.11a.5.5 0 000 .71.48.48 0 00.7 0h.01zm1.11 8.89a.5.5 0 000-.71l-1.11-1.11a.5.5 0 00-.71 0 .5.5 0 000 .71l1.11 1.11a.48.48 0 00.7 0h.01zm-10 0l1.11-1.11a.5.5 0 000-.71.5.5 0 00-.71 0l-1.11 1.11a.5.5 0 000 .71.48.48 0 00.7 0h.01zm1.11-8.89a.5.5 0 000-.71L3.35 2.64a.5.5 0 00-.71 0 .5.5 0 000 .71l1.11 1.11a.48.48 0 00.7 0h.01zM16 8a.5.5 0 00-.5-.5h-2c-.28 0-.5.22-.5.5s.22.5.5.5h2A.5.5 0 0016 8zm-7.5 7.5v-2c0-.28-.22-.5-.5-.5s-.5.22-.5.5v2c0 .28.22.5.5.5s.5-.22.5-.5zM3 8a.5.5 0 00-.5-.5h-2c-.28 0-.5.22-.5.5s.22.5.5.5h2A.5.5 0 003 8z",fill:"#333"}))};var Ce=["styles"];function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pe.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const Te=function(e){e.styles;var t=Ne(e,Ce);return r.createElement("svg",Pe({width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r.createElement("path",{d:"M8 16a8 8 0 01-7.72-5.93.48.48 0 01.13-.48.53.53 0 01.48-.13A6.99 6.99 0 009.45.9a.48.48 0 01.13-.48c.13-.13.31-.18.48-.13a8.01 8.01 0 015.93 7.72c0 4.41-3.59 8-8 8L8 16zm-6.49-5.39A7 7 0 008 15a7 7 0 002.61-13.49 7.98 7.98 0 01-9.1 9.1z",fill:"#C2C2C2"}))};var je=function(){return r.createElement("div",{className:"footer-icon-separator"})},Ie=function(e,t){var n=e.Component;return r.createElement(r.Fragment,{key:"footer-link-".concat(e.position,"-").concat(t)},e.has_left_separator&&r.createElement(je,null),r.createElement(n,null),e.has_right_separator&&r.createElement(je,null))},ze=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.common,o=e.ui,i=e.traders_hub.show_eu_related_content,a=t.is_logged_in,c=t.is_eu,s=t.landing_company_shortcode,_=t.is_virtual,f=n.current_language,p=o.enableApp,h=o.footer_extensions,m=o.settings_extension,g=o.is_app_disabled,v=o.is_route_modal_on,b=o.is_settings_modal_on,w=o.is_language_settings_modal_on,E=o.disableApp,k=o.toggleSettingsModal,S=o.toggleLanguageSettingsModal,x=o.is_dark_mode_on,O=o.setDarkMode,A=[],L=[];h.filter&&(A=h.filter((function(e){return"left"===e.position})),L=h.filter((function(e){return"right"===e.position})));var C=function(){O(!x)},P=window.location.pathname;return r.createElement("footer",{className:T()("footer",{"footer--is-disabled":g||v})},A.length>0&&r.createElement("div",{className:"footer__links footer__links--left"},A.map(Ie)),r.createElement(H,null),r.createElement(he,null),r.createElement(je,null),r.createElement(be,null),r.createElement(je,null),r.createElement("div",{className:"footer__links"},L.map(Ie),r.createElement(ve,null),r.createElement(ge,null),r.createElement(V,null),r.createElement(re,null),a&&r.createElement(oe,null),a&&!_&&r.createElement(pe,{landing_company:s,is_eu:c,show_eu_related_content:i}),r.createElement("div",{className:"footer__links--dark-mode"},r.createElement(y.Popover,{alignment:"top",message:(0,d.localize)("Change theme"),zIndex:9999},x?r.createElement(Te,{onClick:C}):r.createElement(Le,{onClick:C}))),r.createElement(je,null),r.createElement(ne,null),P===l.routes.trade&&r.createElement(Q,{is_settings_visible:b,toggleSettings:k,disableApp:E,enableApp:p,settings_extension:m}),r.createElement(te,{is_settings_visible:w,toggleSettings:S,lang:f}),r.createElement(Z,null)))}));ze.propTypes={location:p().object};const Me=(0,j.withRouter)(ze);const De=function(){var e=(0,j.useLocation)().pathname;return e!==l.routes.onboarding?r.createElement(Me,null):e===l.routes.onboarding?null:r.createElement(Se,null)};var Re=n(4390);const Fe=function(){return r.createElement("div",{className:"notifications-empty__container"},r.createElement("div",{className:"notifications-empty"},r.createElement(y.Icon,{data_testid:"dt_ic_box_icon",icon:"IcBox",className:"notifications-empty__icon",size:64,color:"secondary"}),r.createElement("div",{className:"notifications-empty__content"},r.createElement(y.Text,{as:"h4",size:"xs",weight:"bold",align:"center",color:"less-prominent",className:"notifications-empty__header"},r.createElement(d.Localize,{i18n_default_text:"No notifications"})),r.createElement(y.Text,{size:"xxs",color:"less-prominent",align:"center"},r.createElement(d.Localize,{i18n_default_text:"You have yet to receive any notifications"})))))};const Ue=(0,u.observer)((function(e){var t=e.clearNotifications,n=(0,u.useStore)(),o=n.notifications,i=n.ui,a=o.is_notifications_empty,c=i.is_mobile;return r.createElement(r.Fragment,null,r.createElement("div",{className:"notifications-dialog__separator"}),r.createElement("div",{"data-testid":"dt_clear_all_footer_button",className:T()("notifications-dialog__footer",{"notifications-dialog__content--empty":a,"notifications-dialog__content--sticky":c})},r.createElement(y.Button,{className:T()("dc-btn--secondary","notifications-dialog__clear"),disabled:a,onClick:t},r.createElement(y.Text,{size:"xxs",color:"prominent",weight:"bold"},r.createElement(d.Localize,{i18n_default_text:"Clear All"})))))}));function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function Be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==We(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===We(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ge=(0,u.observer)((function(){var e=(0,u.useStore)().notifications,t=e.notifications,n=e.toggleNotificationsModal,o=function(e){var t=e.type;return["contract_sold","info","news","promotions"].includes(t)?"IcAlertInfo":"p2p_completed_order"===t?"IcAlertAnnounce":"IcAlert".concat((0,l.toTitleCase)(t))},i=function(e){switch(["action","secondary_btn","cta_btn","primary_btn"].find((function(t){return!(0,l.isEmptyObject)(e[t])}))){case"primary_btn":return e.primary_btn;case"cta_btn":return e.cta_btn;case"secondary_btn":return e.secondary_btn;case"action":return e.action;default:return}};return r.createElement(r.Fragment,null,t.map((function(e){var t,a,c,s,l;return r.createElement("div",{className:"notifications-item",key:e.key},r.createElement(y.Text,{as:"h2",className:"notifications-item__title",weight:"bold",size:"xs",color:"prominent"},e.type&&r.createElement(y.Icon,{icon:o(e),className:T()("notifications-item__title-icon",Be({},"notifications-item__title-icon--".concat(e.type),e.type))}),e.header),r.createElement("div",{className:"notifications-item__message"},e.message),r.createElement("div",{className:"notifications-item__action"},!!i(e)&&r.createElement(r.Fragment,null,null!==(t=i(e))&&void 0!==t&&t.route?r.createElement(Y.CG,{onClick:n,active_class:"notifications-item",className:T()("dc-btn","dc-btn--secondary","notifications-item__cta-button"),to:null===(a=i(e))||void 0===a?void 0:a.route},r.createElement(y.Text,{weight:"bold",size:"xxs"},null===(c=i(e))||void 0===c?void 0:c.text)):r.createElement(y.Button,{className:T()("dc-btn--secondary","notifications-item__cta-button"),onClick:null===(s=i(e))||void 0===s?void 0:s.onClick},r.createElement(y.Text,{weight:"bold",size:"xxs"},null===(l=i(e))||void 0===l?void 0:l.text)))))})))}));var Ve=r.forwardRef((function(e,t){var n=e.clearNotifications,o=(0,u.useStore)(),i=o.notifications,a=o.ui,c=i.is_notifications_empty,s=a.is_mobile,_=window.location.pathname===l.routes.traders_hub,f=window.location.pathname===l.routes.wallets;return r.createElement("div",{"data-testid":"dt_notifications_list_wrapper",className:T()("notifications-dialog",{"notifications-dialog--pre-appstore":_||window.location.pathname.startsWith(l.routes.account)||f}),ref:t},r.createElement("div",{className:"notifications-dialog__header"},r.createElement(y.Text,{as:"h2",className:"notifications-dialog__header-text",weight:"bold",color:"prominent",styles:{lineHeight:"1.6rem"}},r.createElement(d.Localize,{i18n_default_text:"Notifications"}))),r.createElement("div",{className:T()("notifications-dialog__content",{"notifications-dialog__content--empty":c})},r.createElement(y.ThemedScrollbars,{is_bypassed:s||c},c?r.createElement(Fe,null):r.createElement(Ge,null))),r.createElement(Ue,{clearNotifications:n}))}));Ve.displayName="NotificationListWrapper";const Ye=(0,u.observer)(Ve);const He=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.notifications,o=t.loginid,i=n.is_notifications_visible,a=n.notifications,c=n.removeNotifications,s=n.removeNotificationMessage,_=n.removeNotificationMessageByKey,f=n.toggleNotificationsModal,p=r.useRef(null),h=function(){var e=l.LocalStore.getObject("p2p_settings");o&&e[o]&&(e[o].is_notifications_visible=!1),l.LocalStore.setObject("p2p_settings",e),a.forEach((function(e){var t=e.key,n=e.should_show_again;_({key:t}),s({key:t,should_show_again:n}),c(!0)}))};return(0,y.useOnClickOutside)(p,(function(e){var t,n,r=!(null!=e&&null!==(t=e.target)&&void 0!==t&&t.classList.contains("notifications-toggle__icon-wrapper"));null!=p&&null!==(n=p.current)&&void 0!==n&&n.contains(e.target)||!i||!r||f()})),r.createElement(r.Fragment,null,r.createElement(y.MobileWrapper,null,r.createElement(y.MobileDialog,{portal_element_id:"modal_root",title:r.createElement(d.Localize,{i18n_default_text:"Notifications"}),wrapper_classname:"notifications-mobile-dialog",visible:i,onClose:f},r.createElement(Ye,{clearNotifications:h,ref:p}))),r.createElement(y.DesktopWrapper,null,r.createElement(Re.Z,{in:i,classNames:{enter:"notifications-dialog--enter",enterDone:"notifications-dialog--enter-done",exit:"notifications-dialog--exit"},timeout:150,unmountOnExit:!0},r.createElement(Ye,{clearNotifications:h,ref:p}))))}));const qe=function(e){var t=e.count,n=e.is_visible,o=e.toggleDialog,i=e.tooltip_message,a=e.should_disable_pointer_events,c=void 0!==a&&a,s=r.createElement("div",{className:T()("notifications-toggle__icon-wrapper",{"notifications-toggle__icon-wrapper--active":n}),onClick:o},r.createElement(y.Icon,{className:"notifications-toggle__icon",icon:"IcBell"}),!!t&&r.createElement(y.Counter,{count:t,className:"notifications-toggle__step"}));return r.createElement("div",{className:T()("notifications-toggle",{"notifications-toggle--active":n})},r.createElement(y.DesktopWrapper,null,r.createElement(y.Popover,{classNameBubble:"notifications-toggle__tooltip",alignment:"bottom",message:i,should_disable_pointer_events:c,zIndex:9999},s),r.createElement(He,{is_visible:n,toggleDialog:o})),r.createElement(y.MobileWrapper,null,s,r.createElement(He,{is_visible:n,toggleDialog:o})))};var Ke=n(12788),Ze=function(e){var t=e.platform,n=t.icon,o=t.description;return r.createElement(r.Fragment,null,r.createElement("div",{className:"platform-dropdown__list-platform-background"}),r.createElement("div",{className:"platform-switcher__dropdown","data-testid":"dt_platform_box_icon"},r.createElement(y.Icon,{icon:n,height:42,width:150,description:n}),r.createElement("p",{className:"platform-dropdown__list-platform-description"},o())))},$e=function(e){var t=e.platform,n=e.app_routing_history;return t.link_to&&r.createElement(Y.CG,{"data-testid":"dt_platform_dropdown",to:t.link_to,exact:t.link_to===l.routes.trade,className:"platform-dropdown__list-platform",isActive:function(){return(0,l.getActivePlatform)(n)===t.name}},r.createElement(Ze,{platform:t}))||r.createElement("a",{"data-testid":"dt_platform_dropdown_link",href:t.href,className:"platform-dropdown__list-platform"},r.createElement(Ze,{platform:t}))},Je=function(e){var t=e.app_routing_history,n=e.closeDrawer,o=e.platform_config,i=e.setTogglePlatformType,a=(0,j.useHistory)(),c=function(){return r.createElement("div",{className:"platform-dropdown__cta"},r.createElement(Y.CG,{onClick:function(){(0,l.isMobile)()&&(a.push(l.routes.traders_hub),i("cfd")),a.push(l.routes.traders_hub)}},r.createElement(y.Text,{size:"xs",weight:"bold",align:"center",className:"platform-dropdown__cta--link"},r.createElement(d.Localize,{i18n_default_text:"Looking for CFDs? Go to Trader's Hub"}))))};r.useEffect((function(){return window.addEventListener("popstate",n),function(){window.removeEventListener("popstate",n)}}),[n]);var s=r.useRef();(0,y.useOnClickOutside)(s,(function(e){e.target.closest(".platform-dropdown__list")||e.target.closest(".platform-switcher")||n()}),(function(){return(0,l.isDesktop)()}));var u=r.createElement("div",{className:"platform-dropdown"},r.createElement(y.Div100vhContainer,{className:"platform-dropdown__list",height_offset:"15rem",is_disabled:(0,l.isDesktop)()},o.map((function(e){return r.createElement("div",{key:e.name,onClick:n,ref:s},r.createElement($e,{platform:e,app_routing_history:t}))})),r.createElement(c,null)));return(0,l.isMobile)()?Ke.createPortal(u,document.getElementById("mobile_platform_switcher")):Ke.createPortal(u,document.getElementById("deriv_app"))},Xe=n(68980),Qe=function(e){var t=e.is_mobile,n=e.speed,o=t?16:8,i=t?40:32,a=16+i+o,c=t?12:8,s=32+i+o+90;return r.createElement(Xe.ZP,{height:i,width:s,speed:n,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},r.createElement("rect",{x:16,y:"0",rx:"4",ry:"4",width:i,height:i}),r.createElement("rect",{x:a,y:c,rx:"4",ry:"4",width:90,height:16}))};function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nt=function(e){var t=e.toggleDrawer,n=e.app_routing_history,o=e.platform_config,i=void 0===o?[]:o,a=e.current_language,c=e.is_landing_company_loaded,s=e.is_logged_in,u=e.is_logging_in,d=e.setTogglePlatformType,_=et(r.useState(!1),2),f=_[0],p=_[1],h=r.useRef(!1);r.useEffect((function(){i.forEach((function(e){"Binary Bot"===e.name&&(e.href=(0,l.getUrlBinaryBot)())}))}),[a,i]),r.useEffect((function(){h.current&&"function"==typeof t&&t(),h.current=!1}));return(s||u?c:0!==n.length)?r.createElement(r.Fragment,null,r.createElement("div",{"data-testid":"dt_platform_switcher",className:T()("platform-switcher",{"platform-switcher--active":f},{"platform-switcher--is-mobile":(0,l.isMobile)()}),onClick:function(){return p(!f)}},r.createElement(y.Icon,{className:"platform-switcher__icon",icon:(0,l.getPlatformInformation)(n).icon,description:(0,l.getPlatformInformation)(n).header,width:120,height:25}),r.createElement(y.Icon,{className:"platform-switcher__arrow",icon:"IcChevronDownBold"})),r.createElement(Re.Z,{mountOnEnter:!0,appear:!0,in:f,classNames:{enterDone:"platform-dropdown--enter-done"},timeout:!(0,l.isMobile)()&&f?0:250,unmountOnExit:!0},r.createElement(Je,{platform_config:i,closeDrawer:function(){p(!1),h.current=!0},current_language:a,app_routing_history:n,setTogglePlatformType:d}))):r.createElement("div",{"data-testid":"dt_platform_switcher_preloader",className:T()("platform-switcher__preloader",{"platform-switcher__preloader--is-mobile":(0,l.isMobile)()})},r.createElement(Qe,{is_mobile:(0,l.isMobile)(),speed:3}))};nt.propTypes={platform_config:p().array,toggleDrawer:p().func,current_language:p().string,app_routing_history:p().array,is_landing_company_loaded:p().bool,is_logged_in:p().bool,is_logging_in:p().bool,setTogglePlatformType:p().func};const rt=(0,j.withRouter)(nt);var ot=n(83859),it=function(e){var t=e.id,n=e.text,o=e.icon,i=e.link_to,a=e.handleClickCashier;return r.createElement(Y.CG,{id:t,key:o,to:i,className:"header__menu-link",active_class:"header__menu-link--active",onClick:a},r.createElement(y.Text,{size:"m",line_height:"xs",title:n,className:"header__menu-link-text"},o,n))},at=function(){return r.createElement(it,{id:"dt_reports_tab",icon:r.createElement(y.Icon,{icon:"IcReports",className:"header__icon"}),text:(0,d.localize)("Reports"),link_to:l.routes.reports})},ct=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.ui,o=t.has_any_real_account,i=t.is_virtual,a=n.toggleReadyToDepositModal,c=n.toggleNeedRealAccountForCashierModal,s=(0,b.useP2PNotificationCount)(),_=(0,b.useIsRealAccountNeededForCashier)(),f=(0,j.useHistory)(),p=window.location.pathname===l.routes.root||window.location.pathname===l.routes.traders_hub||window.location.pathname===l.routes.bot,h=p&&!o&&i||_;return r.createElement(it,{id:"dt_cashier_tab",icon:r.createElement(r.Fragment,null,r.createElement(y.Icon,{icon:"IcCashier",className:"header__icon"}),s>0&&r.createElement(y.Counter,{className:"cashier__counter",count:s})),text:(0,d.localize)("Cashier"),link_to:h?null:l.routes.cashier,handleClickCashier:function(){!o&&i||_?p&&!o?a():window.location.pathname===l.routes.traders_hub&&c():f.push(l.routes.cashier_deposit)}})})),st=(0,u.observer)((function(e){var t=e.is_traders_hub_routes,n=void 0!==t&&t,o=(0,ot.$)().i18n,i=(0,u.useStore)(),a=i.client,c=i.ui,s=a.is_logged_in,l=c.is_mobile,d=(0,b.useFeatureFlags)().is_next_wallet_enabled;return s?r.createElement("div",{key:"menu-links__".concat(o.language),className:"header__menu-links"},!n&&r.createElement(at,null),!l&&!d&&r.createElement(ct,null)):r.createElement(r.Fragment,null)})),lt=function(e){var t=e.className;return r.createElement(y.Button,{id:"dt_login_button",className:t,has_effect:!0,text:(0,d.localize)("Log in"),onClick:function(){return(0,l.redirectToLogin)(!1,(0,d.getLanguage)())},tertiary:!0})};lt.propTypes={className:p().string};var ut=function(e){var t=e.className,n=e.is_appstore;return r.createElement(y.Button,{id:"dt_signup_button",className:t,has_effect:!0,text:(0,d.localize)("Sign up"),onClick:function(){return(0,l.redirectToSignUp)({is_appstore:n})},primary:!0})};ut.propTypes={className:p().string,is_appstore:p().bool};var dt=r.lazy((function(){return(0,l.moduleLoader)((function(){return Promise.resolve().then(n.bind(n,79250))}))})),_t=r.memo((function(e){var t=e.acc_switcher_disabled_message,n=e.account_type,o=e.balance,i=e.currency,a=e.country_standpoint,c=e.disableApp,s=e.enableApp,u=e.is_acc_switcher_on,_=e.is_acc_switcher_disabled,f=e.is_eu,p=e.is_logged_in,h=e.is_notifications_visible,m=e.is_virtual,g=e.notifications_count,v=e.onClickDeposit,b=e.openRealAccountSignup,w=e.toggleAccountsDialog,E=e.toggleNotifications,k=r.useContext(l.PlatformContext).is_appstore;return p?r.createElement(r.Fragment,null,r.createElement(y.MobileWrapper,null,r.createElement(qe,{count:g,is_visible:h,toggleDialog:E}),r.createElement(r.Suspense,{fallback:r.createElement("div",null)},r.createElement(dt,{acc_switcher_disabled_message:t,account_type:n,balance:void 0===o?o:(0,l.formatMoney)(i,o,!0),is_disabled:_,disableApp:c,enableApp:s,is_eu:f,is_virtual:m,is_mobile:!0,currency:i,country_standpoint:a,is_dialog_on:u,toggleDialog:w}))),r.createElement(y.DesktopWrapper,null,r.createElement(qe,{count:g,is_visible:h,toggleDialog:E,tooltip_message:r.createElement(d.Localize,{i18n_default_text:"View notifications"}),should_disable_pointer_events:!0}),r.createElement(y.Popover,{classNameBubble:"account-settings-toggle__tooltip",alignment:"bottom",message:r.createElement(d.Localize,{i18n_default_text:"Manage account settings"}),should_disable_pointer_events:!0,zIndex:9999},r.createElement(Y.CG,{className:"account-settings-toggle",to:l.routes.personal_details},r.createElement(y.Icon,{icon:"IcUserOutline"}))),r.createElement(r.Suspense,{fallback:r.createElement("div",null)},r.createElement(dt,{acc_switcher_disabled_message:t,account_type:n,balance:void 0===o?o:(0,l.formatMoney)(i,o,!0),is_disabled:_,is_eu:f,is_virtual:m,currency:i,country_standpoint:a,is_dialog_on:u,toggleDialog:w})),!m&&!i&&r.createElement("div",{className:"set-currency"},r.createElement(y.Button,{onClick:function(){return b("set_currency")},has_effect:!0,type:"button",text:(0,d.localize)("Set currency"),primary:!0})),i&&r.createElement(y.Button,{className:"acc-info__button",has_effect:!0,text:(0,d.localize)("Deposit"),onClick:v,primary:!0}))):r.createElement(r.Fragment,null,r.createElement(lt,{className:"acc-info__button"}),r.createElement(ut,{className:"acc-info__button",is_appstore:k}))}));_t.displayName="AccountActions",_t.propTypes={acc_switcher_disabled_message:f.string,account_type:f.string,balance:f.any,currency:f.any,is_acc_switcher_disabled:f.any,is_eu:f.bool,disableApp:f.any,enableApp:f.any,country_standpoint:f.object,is_acc_switcher_on:f.any,is_logged_in:f.any,is_notifications_visible:f.any,is_virtual:f.any,notifications_count:f.any,onClickDeposit:f.func,openRealAccountSignup:f.func,toggleAccountsDialog:f.any,toggleNotifications:f.any};const ft=function(e){var t,n=e.is_demo,o=e.label;return n?r.createElement(y.Badge,{type:"contained",background_color:"blue",label:(0,d.localize)("Demo"),custom_color:"colored-background"}):r.createElement(y.Badge,{type:"bordered",label:null!==(t=null==o?void 0:o.toUpperCase())&&void 0!==t?t:""})};function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function ht(){ht=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==pt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function mt(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var gt=(0,u.observer)((function(e){var t,n,o=e.closeAccountsDialog,i=e.account,a=e.show_badge,c=void 0!==a&&a,s=i.currency,_=i.dtrade_loginid,f=i.dtrade_balance,p=i.gradients,h=i.icons,m=i.is_virtual,g=i.landing_company_name,v=i.linked_to,b=i.icon_type,w=i.loginid,E=(0,u.useStore)(),k=E.ui.is_dark_mode_on,S=E.client,x=S.switchAccount,O=S.loginid,A=k?"dark":"light",L=k?"IcWalletOptionsDark":"IcWalletOptionsLight",C=w===O||(null==v?void 0:v.some((function(e){return e.loginid===O}))),P=function(){var e,t=(e=ht().mark((function e(){return ht().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(),!C){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,x(_);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){mt(i,r,o,a,c,"next",e)}function c(e){mt(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return r.createElement("div",{className:T()("acc-switcher-wallet-item__container",{"acc-switcher-wallet-item__container--active":C}),"data-testid":"account-switcher-wallet-item",onClick:P,role:"button",onKeyDown:P},r.createElement("div",null,r.createElement(y.AppLinkedWithWalletIcon,{app_icon:L,gradient_class:null!==(t=null==p?void 0:p.card[A])&&void 0!==t?t:"",type:b,wallet_icon:null!==(n=null==h?void 0:h[A])&&void 0!==n?n:"",hide_watermark:!0})),r.createElement("div",{className:"acc-switcher-wallet-item__content"},r.createElement(y.Text,{size:"xxxs"},r.createElement(d.Localize,{i18n_default_text:"Deriv Apps"})),r.createElement(y.Text,{size:"xxxs"},m?r.createElement(d.Localize,{i18n_default_text:"Demo Wallet"}):r.createElement(d.Localize,{i18n_default_text:"{{currency}} Wallet",values:{currency:(0,l.getCurrencyDisplayCode)(s)}})),r.createElement(y.Text,{size:"xs",weight:"bold"},"".concat((0,l.formatMoney)(s||"",f||0,!0)," ").concat((0,l.getCurrencyDisplayCode)(s)))),c&&r.createElement(ft,{is_demo:Boolean(m),label:g}))})),vt=function(e){var t=e.wallets,n=e.closeAccountsDialog;return r.createElement("div",{className:"account-switcher-wallet-list"},null==t?void 0:t.map((function(e){var t=(null==e?void 0:e.is_malta_wallet)||(null==e?void 0:e.is_virtual);return r.createElement(gt,{key:e.dtrade_loginid,account:e,closeAccountsDialog:n,show_badge:t})})))};function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function bt(){bt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==yt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function wt(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var Et=(0,u.observer)((function(e){var t=e.is_visible,n=e.toggle,o=(0,b.useStoreWalletAccountsList)().data,i=null==o?void 0:o.filter((function(e){return e.dtrade_loginid})),a=(0,j.useHistory)(),c=r.useRef(null),s=r.useCallback((function(){n(!1)}),[n]);(0,y.useOnClickOutside)(c,s,(function(e){return t&&!e.target.classList.contains("acc-info")}));var u=function(){var e,t=(e=bt().mark((function e(){return bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(),a.push(l.routes.wallets);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){wt(i,r,o,a,c,"next",e)}function c(e){wt(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return r.createElement("div",{className:"account-switcher-wallet",ref:c},r.createElement("div",{className:"account-switcher-wallet__header"},r.createElement(y.Text,{as:"h4",weight:"bold",size:"xs"},r.createElement(d.Localize,{i18n_default_text:"Deriv Apps accounts"}))),r.createElement(y.ThemedScrollbars,{height:450},r.createElement(vt,{wallets:i,closeAccountsDialog:s})),r.createElement("div",{className:"account-switcher-wallet__looking-for-cfds"},r.createElement(y.Text,{size:"xs",line_height:"xl"},r.createElement(d.Localize,{i18n_default_text:"Looking for CFDs? Go to Trader’s hub"})),r.createElement(y.Icon,{data_testid:"dt_go_to_arrow",icon:"IcChevronDownBold",className:"account-switcher-wallet__arrow",onClick:u})))}));function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function St(){St=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==kt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function xt(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var Ot=(0,u.observer)((function(e){var t=e.is_visible,n=e.toggle,o=(0,j.useHistory)(),i=(0,b.useStoreWalletAccountsList)().data,a=null==i?void 0:i.filter((function(e){return e.dtrade_loginid})),c=r.useCallback((function(){n(!1)}),[n]),s=function(){var e,t=(e=St().mark((function e(){return St().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(),o.push(l.routes.traders_hub);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){xt(i,r,o,a,c,"next",e)}function c(e){xt(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),u=r.createElement("div",{className:"account-switcher-wallet-mobile__footer",onClick:s,role:"button",onKeyDown:s},r.createElement(y.Text,{weight:"normal",size:"xs"},r.createElement(d.Localize,{i18n_default_text:"Looking for CFDs? Go to Trader’s hub"})),r.createElement(y.Icon,{icon:"IcChevronRightBold"}));return r.createElement(y.MobileDialog,{portal_element_id:"deriv_app",footer:u,visible:t,onClose:c,has_close_icon:!0,has_full_height:!0,title:r.createElement(d.Localize,{i18n_default_text:"Deriv Apps accounts"})},r.createElement("div",{className:"account-switcher-wallet-mobile"},r.createElement(vt,{wallets:a,closeAccountsDialog:c}),r.createElement(y.Button,{className:"account-switcher-wallet-mobile__button",has_effect:!0,primary:!0,large:!0},r.createElement(d.Localize,{i18n_default_text:"Manage funds"}))))})),At=function(e){var t=e.is_mobile,n=e.is_logged_in,o=e.speed;return r.createElement(Xe.ZP,{height:t?42:46,width:t?216:350,speed:o,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},n?r.createElement(Ct,{is_mobile:t}):r.createElement(Lt,{is_mobile:t}))},Lt=function(e){var t=e.is_mobile;return r.createElement(r.Fragment,null,r.createElement("rect",{x:t?42:166,y:"8",rx:"4",ry:"4",width:"66",height:"32"}),r.createElement("rect",{x:t?120:250,y:"8",rx:"4",ry:"4",width:"80",height:"32"}))},Ct=function(e){var t=e.is_mobile;return r.createElement(r.Fragment,null,t?r.createElement(r.Fragment,null,r.createElement("circle",{cx:"97",cy:"22",r:"13"}),r.createElement("circle",{cx:"59",cy:"22",r:"13"}),r.createElement("rect",{x:"128",y:"19",rx:"4",ry:"4",width:"76",height:"7"})):r.createElement(r.Fragment,null,r.createElement("circle",{cx:"14",cy:"22",r:"12"}),r.createElement("circle",{cx:"58",cy:"22",r:"12"}),r.createElement("rect",{x:"150",y:"20",rx:"4",ry:"4",width:"76",height:"7"}),r.createElement("circle",{cx:"118",cy:"24",r:"13"}),r.createElement("rect",{x:"87",y:"8",rx:"4",ry:"4",width:"1",height:"30"}),r.createElement("rect",{x:"250",y:"8",rx:"4",ry:"4",width:"82",height:"32"})))};At.propTypes={speed:p().number,is_mobile:p().bool,is_logged_in:p().bool};p().number;var Pt=n(94418),Nt=function(e){var t=e.is_disabled;return void 0!==t&&t?r.createElement(y.Icon,{data_testid:"dt_lock_icon",icon:"IcLock"}):r.createElement(y.Icon,{data_testid:"dt_select_arrow",icon:"IcChevronDownBold",className:"acc-info__select-arrow"})},Tt=function(e){var t=e.balance,n=e.currency,o=e.is_virtual,i=e.display_code;return void 0===t&&n?null:r.createElement("div",{className:"acc-info__wallets-account-type-and-balance"},r.createElement(y.Text,{as:"p","data-testid":"dt_balance",className:T()("acc-info__balance acc-info__wallets-balance",{"acc-info__balance--no-currency":!n&&!o})},n?"".concat((0,l.formatMoney)(n,null!=t?t:0,!0)," ").concat(i):r.createElement(d.Localize,{i18n_default_text:"No currency assigned"})))},jt=(0,u.observer)((function(e){var t,n,o,i,a=e.wallet_account,c=(0,u.useStore)().ui.is_dark_mode_on,s=c?"dark":"light",l=c?"IcWalletOptionsDark":"IcWalletOptionsLight";return r.createElement("div",{className:"acc-info__wallets-container"},r.createElement(y.AppLinkedWithWalletIcon,{app_icon:l,gradient_class:null!==(t=null==a||null===(n=a.gradients)||void 0===n?void 0:n.card[s])&&void 0!==t?t:"",size:"small",type:null==a?void 0:a.icon_type,wallet_icon:null!==(o=null==a||null===(i=a.icons)||void 0===i?void 0:i[s])&&void 0!==o?o:"",hide_watermark:!0}))})),It=(0,u.observer)((function(e){var t,n,o,i=e.wallet_account,a=(0,u.useStore)().ui.is_dark_mode_on,c=a?"dark":"light";return r.createElement("div",{className:"acc-info__wallets-container"},r.createElement(y.Icon,{icon:a?"IcWalletOptionsDark":"IcWalletOptionsLight",size:24,data_testid:"dt_ic_wallet_options"}),r.createElement(y.WalletIcon,{icon:null!==(t=null==i||null===(n=i.icons)||void 0===n?void 0:n[c])&&void 0!==t?t:"",type:null==i?void 0:i.icon_type,gradient_class:null==i||null===(o=i.gradients)||void 0===o?void 0:o.card[c],size:"small",has_bg:!0,hide_watermark:!0}))}));const zt=(0,u.observer)((function(e){var t,n,o=e.is_dialog_on,i=e.toggleDialog,a=(0,u.useStore)(),c=a.client,s=a.ui,d=c.switchAccount,_=c.is_logged_in,f=c.loginid,p=c.accounts,h=s.is_mobile,m=s.account_switcher_disabled_message,g=(0,b.useStoreWalletAccountsList)().data,v=(0,b.useStoreLinkedWalletsAccounts)(),y=null==p?void 0:p[null!=f?f:""],w=null==g?void 0:g.find((function(e){return e.loginid===f})),E=f;w&&((E=w.dtrade_loginid||(null===(t=v.dtrade)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.loginid))&&E!==f&&d(E));var k=null==g?void 0:g.find((function(e){return e.dtrade_loginid===E}));if(!k)return r.createElement(At,{is_logged_in:_,is_mobile:h,speed:3});var S=k.is_malta_wallet||k.is_virtual;return r.createElement("div",{className:"acc-info__wrapper"},r.createElement("div",{className:"acc-info__separator"}),r.createElement(Pt.Z,{is_mobile:h,is_disabled:Boolean(null==y?void 0:y.is_disabled),disabled_message:m},r.createElement("div",{"data-testid":"dt_acc_info",id:"dt_core_account-info_acc-info",className:T()("acc-info acc-info__wallets",{"acc-info--show":o,"acc-info--is-disabled":null==y?void 0:y.is_disabled}),onClick:null!=y&&y.is_disabled?void 0:function(){return i()},onKeyDown:null!=y&&y.is_disabled?void 0:function(){return i()}},h?r.createElement(jt,{wallet_account:k}):r.createElement(It,{wallet_account:k}),r.createElement(Tt,{balance:null==y?void 0:y.balance,currency:null==y?void 0:y.currency,is_virtual:Boolean(null==y?void 0:y.is_virtual),display_code:(0,l.getCurrencyDisplayCode)(null==y?void 0:y.currency)}),S&&r.createElement(ft,{is_demo:Boolean(null==k?void 0:k.is_virtual),label:null==k?void 0:k.landing_company_name}),r.createElement(Nt,{is_disabled:Boolean(null==y?void 0:y.is_disabled)}))),h?r.createElement(Ot,{is_visible:o,toggle:i}):r.createElement(Re.Z,{in:o,timeout:200,classNames:{enter:"acc-switcher__wrapper--enter",enterDone:"acc-switcher__wrapper--enter-done",exit:"acc-switcher__wrapper--exit"},unmountOnExit:!0},r.createElement("div",{className:"acc-switcher__wrapper acc-switcher__wrapper--wallets"},r.createElement(Et,{is_visible:o,toggle:i}))))}));var Mt=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.ui,o=e.notifications,i=t.is_logged_in,a=t.accounts,c=t.loginid,s=n.openRealAccountSignup,_=n.toggleAccountsDialog,f=n.is_mobile,p=n.is_accounts_switcher_on,h=o.is_notifications_visible,m=o.notifications,g=o.toggleNotificationsModal,v=null==m?void 0:m.length,b=null==a?void 0:a[null!=c?c:""],w=null==b?void 0:b.is_virtual,E=null==b?void 0:b.currency;return i?f?r.createElement(r.Fragment,null,r.createElement(zt,{is_dialog_on:p,toggleDialog:_}),r.createElement("div",{className:"acc-info__wallets-notification-icon"},r.createElement(qe,{count:v,is_visible:h,toggleDialog:g,tooltip_message:void 0}))):r.createElement(r.Fragment,null,r.createElement(qe,{count:v,is_visible:h,toggleDialog:g,tooltip_message:r.createElement(d.Localize,{i18n_default_text:"View notifications"}),should_disable_pointer_events:!0}),r.createElement(y.Popover,{classNameBubble:"account-settings-toggle__tooltip",alignment:"bottom",message:r.createElement(d.Localize,{i18n_default_text:"Manage account settings"}),should_disable_pointer_events:!0,zIndex:"9999"},r.createElement(Y.CG,{className:"account-settings-toggle",to:l.routes.personal_details},r.createElement(y.Icon,{icon:"IcUserOutline"}))),r.createElement(zt,{is_dialog_on:p,toggleDialog:_}),!w&&!E&&r.createElement("div",{className:"set-currency"},r.createElement(y.Button,{onClick:function(){return s("set_currency")},has_effect:!0,type:"button",text:(0,d.localize)("Set currency"),primary:!0})),E&&r.createElement(y.Button,{className:"acc-info__button",has_effect:!0,text:(0,d.localize)("Manage funds"),onClick:function(){},primary:!0})):r.createElement(r.Fragment,null,r.createElement(lt,{className:"acc-info__button"}),r.createElement(ut,{className:"acc-info__button"}))}));const Dt=function(e){var t=e.onUpdate;return r.useEffect((function(){var e=function(){document.removeEventListener("UpdateAvailable",t)},n=function(){document.addEventListener("UpdateAvailable",t)};return document.addEventListener("UpdateAvailable",t),document.addEventListener("IgnorePWAUpdate",e),document.addEventListener("ListenPWAUpdate",n),function(){document.removeEventListener("IgnorePWAUpdate",e),document.removeEventListener("ListenPWAUpdate",n),document.removeEventListener("UpdateAvailable",t)}}),[]),null};var Rt=n(5658),Ft=n.n(Rt),Ut=n(59270),Wt=n.n(Ut),Bt=n(19465),Gt=n.n(Bt),Vt=n(61055);const Yt=function(e){var t=e.onConfirm,n=e.onClose;return r.createElement(Vt.Formik,{initialValues:{},onSubmit:t,validateOnMount:!0},(function(e){var t=e.handleSubmit;return r.createElement(y.AutoHeightWrapper,{default_height:200},(function(e){var o=e.setRef,i=e.height;return r.createElement("form",{ref:o,onSubmit:t,className:"accept-risk__form"},r.createElement(y.Div100vhContainer,{className:"details-form",height_offset:"40px",is_disabled:(0,l.isDesktop)()},r.createElement(y.ThemedScrollbars,{autoHide:!(window.innerHeight<890),height:i-77},r.createElement("div",{className:"accept-risk__container"},r.createElement("div",{className:"accept-risk__header"},r.createElement(y.Text,{weight:"bold",size:"xs"},(0,d.localize)("Appropriateness Test, WARNING:"))),r.createElement(y.Text,{as:"p",size:"xs"},r.createElement(d.Localize,{i18n_default_text:"In providing our services to you, we are required to obtain information from you in order to assess whether a given product or service is appropriate for you (that is, whether you possess the experience and knowledge to understand the risks involved).<0/><1/>",components:[r.createElement("br",{key:0}),r.createElement("br",{key:1})]}),r.createElement(d.Localize,{i18n_default_text:"On the basis of the information provided in relation to your knowledge and experience, we consider that the investments available via this website are not appropriate for you.<0/><1/>",components:[r.createElement("br",{key:0}),r.createElement("br",{key:1})]}),r.createElement(d.Localize,{i18n_default_text:"By clicking Accept below and proceeding with the Account Opening you should note that you may be exposing yourself to risks (which may be significant, including the risk of loss of the entire sum invested) that you may not have the knowledge and experience to properly assess or mitigate."}))))),r.createElement("input",{name:"accept_risk",value:"1",type:"hidden"}),r.createElement(y.Modal.Footer,{has_separator:!0,is_bypassed:(0,l.isMobile)()},r.createElement(y.FormSubmitButton,{is_absolute:(0,l.isMobile)(),label:(0,d.localize)("Accept"),has_cancel:!0,cancel_label:(0,d.localize)("Decline"),onCancel:n})))}))}))};function Ht(){return Ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ht.apply(this,arguments)}const qt=function(e){return r.createElement("div",{className:"account-signup-loader"},r.createElement(y.Loading,Ht({},e,{is_fullscreen:!1})))};var Kt=n(39979),Zt=n.n(Kt),$t=n(80046),Jt=n.n($t),Xt=n(78247),Qt=n.n(Xt),en=n(7335),tn=n.n(en),nn=n(86245),rn=n.n(nn),on=n(71711),an=n.n(on),cn=n(1652),sn=n.n(cn),ln=n(94709),un=n(86504),dn=n(74721),_n=n(13631),fn=n(50898);function pn(e){return function(e){if(Array.isArray(e))return hn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mn=function(e){return"maltainvest"===e.real_account_signup_target},gn=function(e){return[Qt()(e,fn.Z),rn()(e,dn.Z),Jt()(e,_n.Z)].concat(pn(mn(e)?[sn()(e,un.Z)]:[]),pn(mn(e)?[tn()(e,ln.Z)]:[]),[an()(e,Zt())])};function vn(e){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(e)}function yn(){return yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yn.apply(this,arguments)}function bn(e){return function(e){if(Array.isArray(e))return On(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wn(){wn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==vn(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function En(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function kn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){En(i,r,o,a,c,"next",e)}function c(e){En(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||xn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){if(e){if("string"==typeof e)return On(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(e,t):void 0}}function On(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){Cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==vn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==vn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===vn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pn=["account_currency","personal_details","address_details","terms_of_use"],Nn=function(e){var t=e.has_target,n=e.has_real_account,o=e.items,i=e.getCurrentStep,a=e.getTotalSteps,c=e.sub_section_index,s=i()-1,l=o[s].header?o[s].header.title:"";return r.createElement(r.Fragment,null,(!n||t)&&r.createElement(r.Fragment,null,r.createElement(y.DesktopWrapper,null,r.createElement(y.FormProgress,{steps:o,current_step:s,sub_section_index:c})),r.createElement(y.MobileWrapper,null,r.createElement(y.FormProgress,{steps:o,current_step:s,sub_section_index:c}),r.createElement("div",{className:"account-wizard__header-steps"},r.createElement(y.Text,{as:"h4",styles:{lineHeight:"20px",color:"var(--brand-red-coral)"},size:"xs",weight:"bold",className:"account-wizard__header-steps-title"},r.createElement(d.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:s+1,steps:a(),step_title:l}}))))))},Tn=(0,u.observer)((function(e){var t=(0,u.useStore)(),n=t.client,o=t.notifications,i=t.ui,a=t.traders_hub,c=Ln(Ln({},e),{},{account_settings:n.account_settings,account_status:n.account_status,fetchAccountSettings:n.fetchAccountSettings,fetchResidenceList:n.fetchResidenceList,fetchStatesList:n.fetchStatesList,financial_assessment:n.financial_assessment,has_currency:!!n.currency,has_real_account:n.has_active_real_account,has_residence:n.residence,is_fully_authenticated:n.is_fully_authenticated,is_virtual:n.is_virtual,realAccountSignup:n.realAccountSignup,residence_list:n.residence_list,residence:n.residence,states_list:n.states_list,upgrade_info:n.upgrade_info,refreshNotifications:o.refreshNotifications,content_flag:a.content_flag,closeRealAccountSignup:i.closeRealAccountSignup,real_account_signup_target:i.real_account_signup_target,setIsRealAccountSignupModalVisible:i.setIsRealAccountSignupModalVisible,setIsTradingAssessmentForNewUserEnabled:i.setIsTradingAssessmentForNewUserEnabled,setShouldShowAppropriatenessWarningModal:i.setShouldShowAppropriatenessWarningModal,setShouldShowRiskWarningModal:i.setShouldShowRiskWarningModal,setSubSectionIndex:i.setSubSectionIndex,sub_section_index:i.sub_section_index}),s=Sn(r.useState(void 0),1)[0],d=Sn(r.useState(!1),2),_=d[0],f=d[1],p=Sn(r.useState(""),2),h=p[0],m=p[1],g=Sn(r.useState([]),2),v=g[0],w=g[1],E=Sn(r.useState([]),2),k=E[0],S=E[1],x=Sn(r.useState(!1),2),O=x[0],A=x[1],L=(0,b.useIsClientHighRiskForMT5)(),C=r.useCallback((function(e){"maltainvest"!==c.real_account_signup_target&&I.Analytics.trackEvent("ce_real_account_signup_form",Ln({current_step:Pn[e.step_num],form_source:document.referrer,form_name:"real_account_signup_form",landing_company:c.real_account_signup_target},e))}),[c.real_account_signup_target]),P=c.setIsTradingAssessmentForNewUserEnabled,N=c.residence_list,j=c.states_list,z=c.fetchResidenceList,M=c.fetchStatesList,D=c.has_residence,R=c.setLoading,F=function(){var e=kn(wn().mark((function e(){return wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R(!0),N.length){e.next=4;break}return e.next=4,z();case 4:if(!D||j.length){e.next=7;break}return e.next=7,M();case 7:R(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=Ln(Ln({},c),{},{is_high_risk_client_for_mt5:L});r.useEffect((function(){P(!0),F(),S((function(e){return e.length?e:gn(U)})),w(W()),f(!0)}),[N,j,z,M,D]),r.useEffect((function(){if(v.length>0){var e=bn(k);v.forEach((function(t,n){t instanceof Object&&(e[n].form_value=t)})),S(e),w([])}}),[v]),r.useEffect((function(){if(N.length){B(N).then((function(e){var t,n;(n=k.length?k:gn(U)).length>1&&"phone"in(null===(t=n[1])||void 0===t?void 0:t.form_value)&&(n[1].form_value.phone=n[1].form_value.phone||e||"",S(n))}))}}),[N]);var W=function(){var e=localStorage.getItem("real_account_signup_wizard");try{return JSON.parse(e)||[]}catch(e){return[]}finally{localStorage.removeItem("real_account_signup_wizard")}},B=function(){var e=kn(wn().mark((function e(t){var n;return wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.find((function(e){return e.value===c.residence})))&&n.phone_idd){e.next=3;break}return e.abrupt("return","");case 3:return e.abrupt("return","+".concat(n.phone_idd));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){return k.map((function(e){return e.form_value})).reduce((function(e,t){var n=Gt()(new Map(Object.entries(t))),r=Object.keys(n).reduce((function(e,t){return e[t]="string"==typeof n[t]?n[t].trim():n[t],e}),{});return r.date_of_birth&&(r.date_of_birth=(0,l.toMoment)(r.date_of_birth).format("YYYY-MM-DD")),r.place_of_birth&&(r.place_of_birth=r.place_of_birth?(0,l.getLocation)(N,r.place_of_birth,"value"):""),r.citizen&&(r.citizen=r.citizen?(0,l.getLocation)(N,r.citizen,"value"):""),r.tax_residence&&(r.tax_residence=r.tax_residence?(0,l.getLocation)(N,r.tax_residence,"value"):r.tax_residence),Ln(Ln({},e),r)}),{})},V=function(){m("")},Y=function(e,t){e-1<0?c.onClose():(C({action:"step_back",step_num:e,step_codename:Pn[e]}),t(),V())},H=function(){var e,t,n,r,o,i,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,l=Ln({},G());return null===(e=l)||void 0===e||delete e.tax_identification_confirm,null===(t=l)||void 0===t||delete t.agreed_tnc,null===(n=l)||void 0===n||delete n.agreed_tos,null===(r=l)||void 0===r||delete r.confirmation_checkbox,0===(null===(o=l)||void 0===o||null===(i=o.tax_identification_number)||void 0===i?void 0:i.length)&&delete l.tax_identification_number,l="No"===(null==(a=l)?void 0:a.risk_tolerance)?Object.entries(a).reduce((function(e,t){var n=Sn(t,2),r=n[0],o=n[1];return o?Ln(Ln({},e),{},Cn({},r,o)):Ln({},e)}),{}):a,c.setRealAccountFormData(l),s&&(l=Ln(Ln({},l),s)),c.realAccountSignup(l)},q=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];K(e,t),V(),o||e+1>=k.length?$({}):(C({action:"step_passed",step_num:e,step_codename:Pn[e]}),r())},K=function(e,t){var n=Object.assign([],k);n[e].form_value=t,S(n)},Z=function(e,t){return e?k[t][e]:k[t]},$=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;R(!0);var n=Ln({},G());null!=n&&null!==(e=n.document_type)&&void 0!==e&&e.id||delete n.document_type,C({action:"save"}),H(t).then(function(){var e=kn(wn().mark((function e(t){var r,o;return wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C({action:"real_signup_finished",user_choice:JSON.stringify(null==t?void 0:t.echo_req)}),c.setIsRiskWarningVisible(!1),"maltainvest"===c.real_account_signup_target?c.onOpenDepositModal():"samoa"===c.real_account_signup_target?c.onOpenWelcomeModal(t.new_account_samoa.currency.toLowerCase()):c.onFinishSuccess(t.new_account_real.currency.toLowerCase()),r=c.account_settings.citizen||c.residence,null==n||!n.document_type){e.next=8;break}return o=Ln({identity_verification_document_add:1},(0,l.formatIDVFormValues)(n,r)),e.next=8,l.WS.send(o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){C({action:"real_signup_error",real_signup_error_message:e}),"show risk disclaimer"===e.code?(c.setIsRiskWarningVisible(!0),A(!0)):"AppropriatenessTestFailed"===e.code?"No"===(null==n?void 0:n.risk_tolerance)?(c.fetchAccountSettings(),c.setShouldShowRiskWarningModal(!0)):c.setShouldShowAppropriatenessWarningModal(!0):c.onError(e,k)})).finally((function(){R(!1),localStorage.removeItem("current_question_index")}))};if(c.is_loading)return r.createElement(qt,null);if(O)return r.createElement(Yt,{onConfirm:function(){$({accept_risk:1})},onClose:function(){c.onClose(),c.setIsRiskWarningVisible(!1)}});if(!_)return null;if(!s){var J,X,Q=(null===(J=k.find((function(e){return e.form_value.employment_status})))||void 0===J||null===(X=J.form_value)||void 0===X?void 0:X.employment_status)||"",ee=k.map((function(e,t){var n=function(e){var t=Z("passthrough",e),n=Z("props",e)||{};return null!=t&&t.length&&(t.forEach((function(e){Object.assign(n,Cn({},e,c[e]))})),n.bypass_to_personal=v.length>0),n}(t),o=e.body;return r.createElement(o,yn({value:Z("form_value",t),index:t,onSubmit:q,onCancel:Y,onSave:K,closeRealAccountSignup:c.closeRealAccountSignup,is_virtual:c.is_virtual,has_currency:c.has_currency,form_error:h},n,{key:t,employment_status:Q}))})),te=r.createElement("div",null);return"samoa"!==c.real_account_signup_target&&(te=r.createElement(Nn,{has_real_account:c.has_real_account,items:k,has_currency:c.has_currency,has_target:"manage"!==c.real_account_signup_target,setIsRiskWarningVisible:c.setIsRiskWarningVisible,sub_section_index:c.sub_section_index})),r.createElement(y.Wizard,{nav:te,className:T()("account-wizard",{"account-wizard--set-currency":!c.has_currency,"account-wizard--deriv-crypto":"samoa"===c.real_account_signup_target})},ee)}var ne=s;return r.createElement(ne,null)}));Tn.propTypes={account_settings:p().object,account_status:p().object,closeRealAccountSignup:p().func,content_flag:p().string,fetchResidenceList:p().func,fetchAccountSettings:p().func,fetchStatesList:p().func,has_currency:p().bool,has_real_account:p().bool,has_residence:p().bool,is_loading:p().bool,is_virtual:p().bool,onClose:p().func,onError:p().func,onFinishSuccess:p().func,onLoading:p().func,onOpenWelcomeModal:p().func,real_account_signup_target:p().string,realAccountSignup:p().func,residence_list:p().array,residence:p().string,states_list:p().array,setIsTradingAssessmentForNewUserEnabled:p().func,setIsRiskWarningVisible:p().func,setLoading:p().func,setShouldShowRiskWarningModal:p().func,setSubSectionIndex:p().func,sub_section_index:p().number};const jn=Tn;var In=n(75594),zn=n.n(In),Mn=n(71857),Dn=n.n(Mn),Rn=function(){return[r.createElement(d.Localize,{key:0,i18n_default_text:"Choose your preferred cryptocurrency"}),r.createElement(d.Localize,{key:1,i18n_default_text:"You can open an account for each cryptocurrency."}),r.createElement(d.Localize,{key:2,i18n_default_text:"Add a real account"}),r.createElement(d.Localize,{key:3,i18n_default_text:"Choose a currency you would like to trade with."}),r.createElement(d.Localize,{key:4,i18n_default_text:"Choose a currency"})]},Fn=function(e){var t=e.heading,n=e.subheading;return r.createElement(r.Fragment,null,r.createElement(y.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-crypto-currency__title"},t),r.createElement(y.Text,{as:"h3",size:"xxs",color:"prominent",align:"center",className:"add-crypto-currency__sub-title"},n))},Un="crypto",Wn=(0,u.observer)((function(e){var t=e.form_error,n=e.is_add_fiat,o=e.onClickBack,i=e.onSubmit,a=e.should_show_crypto_only,c=e.should_show_fiat_only,s=e.value,_=e.hasNoAvailableCrypto,f=(0,u.useStore)(),p=f.client,h=f.ui,m=p.available_crypto_currencies,g=p.upgradeable_currencies,v=p.has_fiat,b=h.should_show_cancel,w=function(){return(0,l.reorderCurrencies)(g.filter((function(e){return"fiat"===e.type})))},E=function(){return(0,l.reorderCurrencies)(g.filter((function(e){return e.type===Un})),Un)},k=function(){return!v&&!a},S=function(e){return-1===m.map((function(e){return e.value})).indexOf(e.value)};return r.createElement(Vt.Formik,{initialValues:{currency:s.currency},onSubmit:i},(function(e){var i=e.handleSubmit,a=e.values,s=e.errors,u=e.touched,f=e.isSubmitting;return r.createElement("form",{onSubmit:i},!k()&&r.createElement(Fn,{heading:Rn()[0],subheading:Rn()[1]}),k()&&r.createElement(Fn,{heading:n?Rn()[4]:Rn()[2],subheading:Rn()[3]}),k()&&r.createElement(r.Fragment,null,r.createElement(y.ThemedScrollbars,null,r.createElement(zn(),{id:"fiat_currency",is_fiat:!0,className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:a.currency,error:s.currency,touched:u.currency,is_title_enabled:k(),item_count:w().length},w().map((function(e){return r.createElement(Vt.Field,{key:e.value,component:Dn(),name:"currency",id:e.value,label:e.name})}))))),k()&&r.createElement(y.Text,{as:"p",color:"prominent",size:"xxs",align:"center",className:"currency-selector__deposit-warn"},r.createElement(d.Localize,{i18n_default_text:"You’ll not be able to change currency once you have made a deposit."})),_()&&r.createElement("div",{className:"account-wizard--disabled-message"},r.createElement(y.Text,{as:"p",align:"center",size:"xxs",className:"account-wizard--disabled-message-description"},(0,d.localize)("You already have an account for each of the cryptocurrencies available on {{deriv}}.",{deriv:l.website_name}))),!c&&(0!==m.length?r.createElement(y.ThemedScrollbars,null,r.createElement(zn(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,d.localize)("Cryptocurrencies"),value:a.currency,error:s.currency,touched:u.currency,is_title_enabled:k(),item_count:E().length},E().map((function(e){return r.createElement(Vt.Field,{key:e.value,component:Dn(),name:"currency",id:e.value,label:e.name,selected:S(e)})})))):r.createElement(y.ThemedScrollbars,null,r.createElement(zn(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,d.localize)("Cryptocurrencies"),is_title_enabled:k(),item_count:E().length},E().map((function(e){return r.createElement(Vt.Field,{key:e.value,component:Dn(),name:"currency",id:e.value,label:e.name,selected:!0})}))))),r.createElement(y.FormSubmitButton,{className:"currency-selector__button",is_disabled:f||!a.currency,label:(0,d.localize)("Add account"),is_absolute:!(0,l.isMobile)(),form_error:t,has_cancel:b,cancel_label:(0,d.localize)("Back"),cancel_icon:r.createElement(y.Icon,{icon:"IcArrowLeftBold"}),onCancel:function(){return o()}}))}))}));Wn.propTypes={hasNoAvailableCrypto:p().func,form_error:p().string,onSubmit:p().func,should_show_crypto_only:p().bool,should_show_fiat_only:p().bool,value:p().shape({crypto:p().string,fiat:p().string,currency:p().string}),onClickBack:p().func,is_add_fiat:p().bool};const Bn=Wn;function Gn(e){return Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(e)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Gn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Gn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const qn=function(e,t,n){var r=[];return e.forEach((function(e){r.push(Yn(Yn({},e),{},{has_payment_agent:!(null==t||!t.filter((function(t){return t.currencies===e.value})).length),is_disabled:null==n?void 0:n.some((function(t){return t.title===e.value&&t.is_disabled}))}))})),r};function Kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $n="crypto",Jn=(0,u.observer)((function(e){var t=e.onSubmit,n=e.hasNoAvailableCrypto,o=e.is_add_crypto,i=e.is_add_fiat,a=(0,u.useStore)(),c=a.client,s=a.modules,_=a.ui,f=c.available_crypto_currencies,p=c.has_fiat,h=c.upgradeable_currencies,m=s.cashier,g=m.general_store.setShouldShowAllAvailableCurrencies,v=m.general_store.deposit_target,w=_.openRealAccountSignup,E=Kn(r.useState(""),1)[0],k=Kn(r.useState({crypto:"",fiat:""}),1)[0],S=(0,b.usePaymentAgentList)(),x=S.data,O=S.isLoading,A=r.useMemo((function(){var e=qn(h,x);return{crypto:(0,l.reorderCurrencies)(null==e?void 0:e.filter((function(e){return e.type===$n&&f.some((function(t){return t.value===e.value}))})),$n),fiat:(0,l.reorderCurrencies)(null==e?void 0:e.filter((function(e){return"fiat"===e.type&&!f.some((function(t){return t.value===e.value}))})))}}),[x,f,h]),L=function(){w("choose"),v===l.routes.cashier_pa&&g(!0)},C=function(){return r.createElement("div",null,r.createElement(y.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-currency__title"},(0,d.localize)("Fiat currencies")),!!p&&r.createElement(y.Text,{as:"p",color:"prominent",align:"center",size:"xxs",className:"add-currency__sub-title"},(0,d.localize)("You are limited to one fiat account only.")),O?r.createElement(y.Loading,{is_fullscreen:!1}):r.createElement(zn(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",item_count:A.fiat.length},A.fiat.map((function(e){return r.createElement(Vt.Field,{key:e.value,component:Dn(),name:"currency",id:e.value,label:e.name,icon:e.icon,second_line_label:e.second_line_label,onClick:e.onClick,selected:p})}))))},P=function(){return r.createElement("div",null,r.createElement(y.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-currency__title"},(0,d.localize)("Cryptocurrencies")),r.createElement(y.Text,{as:"p",color:"prominent",align:"center",size:"xxs",className:"add-currency__sub-title"},(0,d.localize)("You can open an account for each cryptocurrency.")),O?r.createElement(y.Loading,{is_fullscreen:!1}):r.createElement(zn(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",item_count:A.crypto.length},A.crypto.map((function(e){return r.createElement(Vt.Field,{key:e.value,component:Dn(),name:"currency",id:e.value,label:e.name,icon:e.icon,second_line_label:e.second_line_label,onClick:e.onClick,selected:v===l.routes.cashier_pa&&!e.has_payment_agent})}))))};return o?r.createElement(y.ThemedScrollbars,{autohide:!1},r.createElement("div",{className:T()("add-crypto-currency cashier-deposit",{"account-wizard--disabled":n()})},r.createElement(Bn,{className:"account-wizard__body",onSubmit:t,onClickBack:L,value:k,form_error:E,should_show_crypto_only:!0,hasNoAvailableCrypto:n}))):i?r.createElement(y.ThemedScrollbars,{autohide:!1},r.createElement("div",{className:"change-currency"},r.createElement(Bn,{className:"account-wizard__body",onSubmit:t,value:k,form_error:E,should_show_fiat_only:!0,hasNoAvailableCrypto:n,is_add_fiat:!0}))):r.createElement(Vt.Formik,{initialValues:{currency:k.currency},onSubmit:t},(function(e){var t=e.handleSubmit,n=e.values,o=e.isSubmitting;return r.createElement("form",{onSubmit:t},r.createElement(y.ThemedScrollbars,{height:(0,l.isMobile)()?window.innerHeight-190:"460px"},r.createElement("div",null,r.createElement(y.Text,{as:"p",color:"prominent",weight:"bold",align:"center",className:"add-currency__wizard-header"},(0,d.localize)("Choose your currency")),r.createElement(C,null),r.createElement("div",{className:"add-currency__underline"}),r.createElement(P,null))),r.createElement("div",{className:"add-currency__note-wrapper"},r.createElement(y.Text,{as:"p",color:"prominent",align:"center",size:"xxs",className:"add-currency__note"},(0,d.localize)("Some currencies may not be supported by payment agents in your country."))),r.createElement(y.FormSubmitButton,{className:"currency-selector__button",is_disabled:o||!n.currency,label:(0,d.localize)("Add account"),is_absolute:!0,form_error:E,has_cancel:!0,cancel_label:(0,d.localize)("Back"),cancel_icon:r.createElement(y.Icon,{icon:"IcArrowLeftBold"}),onCancel:function(){return L()}}))}))}));Jn.propTypes={onSubmit:p().func,is_add_crypto:p().bool,is_add_fiat:p().bool,hasNoAvailableCrypto:p().func};const Xn=Jn;var Qn=n(42671),er=(0,u.observer)((function(e){var t,n=e.value,o=e.onSubmit,i=e.form_error,a=e.can_change_fiat_currency,c=e.current_currency_type,s=(0,u.useStore)(),_=s.client,f=s.ui,p=_.upgradeable_currencies,h=_.currency,m=_.current_fiat_currency,g=f.closeRealAccountSignup,v=function(){return(0,l.reorderCurrencies)(p.filter((function(e){return"fiat"===e.type})))},b="fiat"===c,w=r.createElement(d.Localize,{i18n_default_text:"If you want to change your account currency, please contact us via <0>live chat</0>.",components:[r.createElement("span",{key:0,className:"link link--orange",onClick:function(){g(),window.LC_API.open_chat_window()}})]}),E=r.createElement(d.Localize,{i18n_default_text:"Please switch to your {{fiat_currency}} account to change currencies.",values:{fiat_currency:null==m||null===(t=m.toUpperCase)||void 0===t?void 0:t.call(m)}}),k=b?w:E;return r.createElement(Vt.Formik,{initialValues:{fiat:n.fiat},onSubmit:o},(function(e){var t=e.handleSubmit,n=e.values,o=e.errors,c=e.touched,s=e.isSubmitting;return r.createElement("form",{onSubmit:function(e){e.preventDefault(),t()}},r.createElement(y.Text,{as:"h1",color:"prominent",weight:"bold",align:"center",className:"change-currency__title"},r.createElement(d.Localize,{i18n_default_text:"Change your currency"})),r.createElement(y.Text,{as:"h3",size:"xxs",align:"center",className:"change-currency__sub-title"},r.createElement(d.Localize,{i18n_default_text:"Choose the currency you would like to trade with."})),!a&&r.createElement("div",{className:"account-wizard--disabled-message"},r.createElement(y.Text,{as:"p",align:"center",size:"xxs",className:"account-wizard--disabled-message-description"},k)),r.createElement(zn(),{id:"fiat",label:(0,d.localize)("Cryptocurrencies"),className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:n.fiat,error:o.fiat,touched:c.fiat,is_title_enabled:!1,item_count:v().length},v().map((function(e){return r.createElement(Vt.Field,{key:e.value,component:Dn(),name:"fiat",id:e.value,label:e.name,selected:e.value===h})}))),r.createElement(y.FormSubmitButton,{className:"change-currency__button",is_disabled:s||!n.fiat,label:(0,d.localize)("Change currency"),is_absolute:!(0,l.isMobile)(),form_error:i}))}))}));er.propTypes={onSubmit:p().func,closeModal:p().func,value:p().shape({crypto:p().string,fiat:p().string}),form_error:p().string,can_change_fiat_currency:p().bool,current_currency_type:p().string,current_fiat_currency:p().string};const tr=er;function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function rr(){rr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==nr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function or(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cr=(0,u.observer)((function(e){var t=e.deposit_target,n=e.is_add_crypto,o=e.is_add_currency,i=e.is_add_fiat,a=e.is_loading,c=e.onError,s=e.onSuccessSetAccountCurrency,_=e.setLoading,f=e.onClose,p=(0,u.useStore)(),h=p.client,m=p.modules,g=p.ui,v=p.traders_hub,b=h.available_crypto_currencies,w=h.can_change_fiat_currency,E=h.current_currency_type,k=h.has_fiat,S=h.setAccountCurrency,x=h.createCryptoAccount,O=h.is_low_risk,A=h.loginid,L=m.cashier,C=v.show_eu_related_content,P=g.manage_real_account_tab_index,N=g.setShouldShowCancel,j=g.resetRealAccountSignupTarget,I=L.general_store.setIsDeposit,z=(null!=P?P:k&&0===(null==b?void 0:b.length))?1:0,M=ir(r.useState(z),2),D=M[0],R=M[1],F=ir(r.useState(""),1)[0],U=ir(r.useState({crypto:"",fiat:""}),1)[0];r.useEffect((function(){var e=function(){var e,t=(e=rr().mark((function e(){return rr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,Qn.WS.mt5LoginList();case 3:_(!1);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){or(i,r,o,a,c,"next",e)}function c(e){or(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return e(),function(){return N(!1)}}),[]);var W=function(e){_(!0),Object.entries(e).map((function(e){var n=ir(e,2),r=n[0],o=n[1];r===l.CURRENCY_TYPE.FIAT?S(o).then((function(e){s(e.passthrough.previous_currency,e.echo_req.set_account_currency,t)})).catch((function(e){c(e)})).finally((function(){return _(!1)})):x(o).then((function(){s("",o,t),j(),I(!0)})).catch((function(e){c(e)})).finally((function(){return _(!1)}))}))},B=function(){return 0===b.length&&k};if(a)return r.createElement(qt,null);var G=k&&r.createElement("div",{className:T()("change-currency",{"account-wizard--disabled":!w})},r.createElement(tr,{className:"account-wizard__body",onSubmit:W,value:U,form_error:F,can_change_fiat_currency:w,current_currency_type:E,closeModal:f}));if(o||n||i)return r.createElement(Xn,{onSubmit:W,value:U,form_error:F,should_show_crypto_only:!0,hasNoAvailableCrypto:B,is_add_crypto:n,is_add_fiat:i,is_add_currency:o});var V=null==A?void 0:A.startsWith("MF");return r.createElement(y.ThemedScrollbars,{is_bypassed:(0,l.isMobile)(),autohide:!1},C&&!O&&k||V?G:r.createElement(y.Tabs,{active_index:D,className:"account-wizard add-or-manage tabs--desktop",onTabItemClick:function(e){R(e)},top:!0,header_fit_content:(0,l.isDesktop)()},r.createElement("div",{label:(0,d.localize)("Cryptocurrencies")},r.createElement("div",{className:T()("add-crypto-currency",{"account-wizard--disabled":B()})},r.createElement(Bn,{className:"account-wizard__body",onSubmit:W,value:U,form_error:F,should_show_crypto_only:!0,hasNoAvailableCrypto:B}))),r.createElement("div",{label:(0,d.localize)("Fiat currencies")},k?G:r.createElement(Bn,{className:"account-wizard__body",onSubmit:W,value:U,form_error:F,should_show_fiat_only:!0,hasNoAvailableCrypto:B}))))}));cr.propTypes={onClose:p().func,onError:p().func,onSuccessSetAccountCurrency:p().func,is_loading:p().bool,is_add_crypto:p().bool,setLoading:p().func,is_add_fiat:p().bool,is_add_currency:p().bool,deposit_target:p().string};const sr=cr;function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}function ur(){ur=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==lr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function dr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function _r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){dr(i,r,o,a,c,"next",e)}function c(e){dr(i,r,o,a,c,"throw",e)}a(void 0)}))}}function fr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hr="crypto";const mr=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.modules,o=e.ui,i=t.account_list,a=t.available_crypto_currencies,c=t.currency,s=t.has_fiat,_=t.upgradeable_currencies,f=t.switchAccount,p=n.cashier,h=o.closeRealAccountSignup,m=o.continueRouteAfterChooseCrypto,g=o.openRealAccountSignup,v=o.setShouldShowCancel,w=p.general_store.deposit_target,E=p.general_store.should_show_all_available_currencies,k=p.general_store.setShouldShowAllAvailableCurrencies,S=fr(r.useState(""),1)[0],x=fr(r.useState({crypto:""}),1)[0],O=(0,b.usePaymentAgentList)(),A=O.data,L=O.isLoading;r.useEffect((function(){return function(){return k(!1)}}),[k]);var C=r.useMemo((function(){var e=function(){return 0===(null==_?void 0:_.filter((function(e){return e.type===hr&&!i.some((function(t){return t.title===e.value}))})).length)},t=qn(_,A,i),n=E?(0,l.reorderCurrencies)(null==t?void 0:t.filter((function(e){return i.some((function(t){return t.title===e.value}))})),hr):(0,l.reorderCurrencies)(null==t?void 0:t.filter((function(e){return e.type===hr&&!a.some((function(t){return t.value===e.value}))})),hr);return(w===l.routes.cashier_pa&&!s||!e())&&n.push({value:"plus",name:w===l.routes.cashier_pa?(0,d.localize)("Add a new"):(0,d.localize)("Add new"),second_line_label:w===l.routes.cashier_pa?(0,d.localize)("account"):(0,d.localize)("crypto account"),icon:"IcAddAccount",onClick:function(){return g(w===l.routes.cashier_pa?"add_currency":"add_crypto"),void v(!0)},has_payment_agent:!0}),n}),[i,A,a,w,s,_,E,g,v]),P=function(){var e=_r(ur().mark((function e(t){var n,r;return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.filter((function(e){return e.title===t})),!(r=n.map((function(e){return e.loginid}))[0])){e.next=5;break}return e.next=5,f(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=_r(ur().mark((function e(t){return ur().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.entries(t).map((function(e){var t=fr(e,2),n=t[0],r=t[1];n&&(h(),r!==c&&P(r),m())}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.createElement(Vt.Formik,{initialValues:{currency:x.currency},onSubmit:function(e){N(e)}},(function(e){var t=e.handleSubmit,n=e.values,o=e.isSubmitting;return r.createElement("form",{onSubmit:t},r.createElement(y.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-crypto-currency__title"},w===l.routes.cashier_pa?(0,d.localize)("Choose an account or add a new one"):(0,d.localize)("Choose one of your accounts or add a new cryptocurrency account")),r.createElement(y.ThemedScrollbars,null,L?r.createElement(y.Loading,{is_fullscreen:!1,className:"currency-list__loading-wrapper"}):r.createElement(zn(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",item_count:C.length},C.map((function(e){return r.createElement(Vt.Field,{key:e.value,component:Dn(),name:"currency",id:e.value,label:e.name,icon:e.icon,second_line_label:e.second_line_label,onClick:e.onClick,selected:!(!e.is_disabled&&w!==l.routes.cashier_pa)&&!e.has_payment_agent})})))),r.createElement(y.FormSubmitButton,{className:"currency-selector__button",is_disabled:o||!n.currency,label:(0,d.localize)("Continue"),is_absolute:!0,form_error:S}))}))}));var gr=function(e){var t=e.current,n=e.closeRealAccountSignup,o=e.deposit_target,i=e.redirectToLegacyPlatform,a=e.deposit_real_account_signup_target,c=e.history,s=e.onSubmit,u=e.setIsDeposit,_=function(){return r.createElement(y.Icon,{icon:"IcCurrency-".concat(t.toLowerCase()),height:120,width:90})},f=function(e){var t=e.className;return r.createElement(y.Icon,{className:t,icon:"IcCheckmarkCircle",color:"green"})},p=function(){n(),u(!1),i()};return r.createElement(r.Fragment,null,(0,l.isDesktop)()&&r.createElement("div",{onClick:p,className:"finished-add-currency__close"},r.createElement(y.Icon,{icon:"IcCross"})),r.createElement(y.Div100vhContainer,{className:"finished-add-currency__dialog",is_disabled:(0,l.isDesktop)(),height_offset:"40px"},r.createElement("div",{className:T()("status-dialog__header",{"status-dialog__header--center":(0,l.isMobile)()})},r.createElement(_,null),r.createElement(f,{className:"bottom-right-overlay"})),r.createElement("div",{className:T()("status-dialog__body",{"status-dialog__body--no-grow":(0,l.isMobile)()})},r.createElement(y.Text,{as:"h2",align:"center",className:"status-dialog__message-header",weight:"bold"},r.createElement(d.Localize,{i18n_default_text:"Your account is ready"})),r.createElement(y.Text,{as:"p",align:"center"},r.createElement(d.Localize,{i18n_default_text:"Fund your account to start trading."}))),r.createElement("div",{className:"finished-add-currency__footer"},r.createElement(y.Button,{onClick:p,text:(0,d.localize)("Maybe later"),secondary:!0}),r.createElement(y.Button,{onClick:["add_crypto","add_fiat","add_currency"].includes(a)?function(){n(),c.push(o),o===l.routes.cashier_deposit&&u(!0),i()}:s,text:(0,d.localize)("Deposit now"),primary:!0}))))};const vr=r.memo(gr);var yr=function(e){var t=e.prev,n=e.current;return t?r.createElement(d.Localize,{i18n_default_text:"<0>You have successfully changed your currency to {{currency}}.</0><0>Make a deposit now to start trading.</0>",values:{currency:(0,l.getCurrencyDisplayCode)(n)},components:[r.createElement(y.Text,{as:"p",align:"center",className:"status-dialog__message-text",color:"general",size:"xs",key:n})]}):r.createElement(d.Localize,{i18n_default_text:"<0>You have added a {{currency}} account.</0><0> Make a deposit now to start trading.</0>",values:{currency:(0,l.getCurrencyDisplayCode)(n)},components:[r.createElement(y.Text,{as:"p",align:"center",className:"status-dialog__message-text",color:"general",size:"xs",key:n})]})},br=function(e){var t=e.current,n=e.closeRealAccountSignup,o=e.deposit_target,i=e.deposit_real_account_signup_target,a=e.history,c=e.onCancel,s=e.onSubmit,u=e.prev,_=e.setIsDeposit,f=function(){return u?r.createElement(y.Icon,{icon:"IcCurrency-".concat(u.toLowerCase()),height:120,width:90}):null},p=function(){return r.createElement(y.Icon,{icon:"IcCurrency-".concat(t.toLowerCase()),height:120,width:90})},h=function(){return u?r.createElement(y.Icon,{icon:"IcArrowPointerRight",color:"red",width:50,height:20}):null},m=function(e){var t=e.className;return r.createElement(y.Icon,{className:t,icon:"IcCheckmarkCircle",color:"green"})};return r.createElement(y.Div100vhContainer,{className:"status-dialog",is_disabled:(0,l.isDesktop)(),height_offset:"40px"},r.createElement("div",{className:T()("status-dialog__header",{"status-dialog__header--center":(0,l.isMobile)(),"status-dialog__header--set-currency":u})},r.createElement(f,null),r.createElement(h,null),r.createElement(p,null),r.createElement(m,{className:"bottom-right-overlay"})),r.createElement("div",{className:T()("status-dialog__body",{"status-dialog__body--no-grow":(0,l.isMobile)()})},r.createElement(y.Text,{as:"h2",align:"center",className:"status-dialog__message-header",weight:"bold"},r.createElement(d.Localize,{i18n_default_text:"Success!"})),r.createElement(yr,{prev:u,current:t})),r.createElement("div",{className:"status-dialog__footer"},r.createElement(y.Button,{onClick:function(){c(),_(!1)},text:(0,d.localize)("Maybe later"),secondary:!0}),r.createElement(y.Button,{onClick:["add_crypto","add_fiat","add_currency"].includes(i)?function(){n(),a.push(o),o===l.routes.cashier_deposit&&_(!0)}:s,text:(0,d.localize)("Deposit now"),primary:!0})))};const wr=r.memo(br);var Er=["setLoading","onSuccessSetAccountCurrency","onError","is_loading"];function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kr.apply(this,arguments)}function Sr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const xr=(0,u.observer)((function(e){var t=e.setLoading,n=e.onSuccessSetAccountCurrency,o=e.onError,i=e.is_loading,a=Sr(e,Er),c=(0,u.useStore)().client,s=c.available_crypto_currencies,_=c.has_fiat,f=c.landing_company_shortcode,p=r.useState(""),h=r.useState({currency:""}),m=function(){return 0===s.length&&_&&a.currency};return i?r.createElement(qt,null):r.createElement("div",{className:T()("set-currency-modal",{"set-currency-modal--disabled":m()})},m()&&r.createElement("div",{className:"set-currency-modal--disabled-message"},r.createElement("p",null,(0,d.localize)("You already have an account for each of the cryptocurrencies available on {{deriv}}.",{deriv:l.website_name}))),r.createElement("div",{className:"set-currency-modal__heading-container"},r.createElement(y.Text,{as:"p",size:"xs",line_height:"s",align:"center",className:"set-currency-modal__heading-container__main-heading"},(0,d.localize)("You have an account that do not have currency assigned. Please choose a currency to trade with this account.")),r.createElement(y.Text,{as:"p",weight:"bold",align:"center",className:"set-currency-modal__heading-container__sub-heading"},(0,d.localize)("Please choose your currency"))),r.createElement(fn.Z,kr({className:"account-wizard__body",onSubmit:function(e,r,i){!function(e,r){t(!0);var i=e.currency;i&&a.setCurrency(i).then((function(e){r(!1),n("",e.echo_req.set_account_currency)})).catch((function(e){o(e)})).finally((function(){return t(!1)}))}(r,i)},value:h,form_error:p,set_currency:!0,validate:(0,l.generateValidationFunction)(f,Qt())},a)))}));function Or(e){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}function Ar(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Or(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Or(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lr=function(e){switch(e.code){case"DuplicateAccount":return r.createElement(y.Text,{as:"h1",align:"center",weight:"bold"},r.createElement(d.Localize,{i18n_default_text:"Already signed up?"}));case"InvalidAccount":return r.createElement(y.Text,{as:"h2",size:(0,l.isMobile)()?"xs":"s",align:"center",weight:"bold",line_height:"xxl"},r.createElement(d.Localize,{i18n_default_text:"You can’t add another real account"}));case"InputValidationFailed":case"PoBoxInAddress":case"InvalidPhone":return r.createElement(y.Text,{as:"h1",align:"center",weight:"bold",line_height:"xxl"},r.createElement(d.Localize,{i18n_default_text:"Invalid inputs"}));default:return r.createElement(y.Text,{as:"h1",align:"center",weight:"bold"},r.createElement(d.Localize,{i18n_default_text:"Something’s not right"}))}},Cr=function(e){var t=e.code,n=e.message,o=e.details;switch("PoBoxInAddress"===t?o.error_details={address_line_1:n}:"InvalidPhone"===t&&(o.error_details={phone:n}),t){case"DuplicateAccount":return r.createElement("p",null,r.createElement(d.Localize,{i18n_default_text:"An account with your details already exists."}),r.createElement("br",null),r.createElement(d.Localize,{i18n_default_text:"If you're having trouble signing in, let us know via <0>chat</0>",components:[r.createElement("span",{className:"chat-inline",key:0,onClick:function(){return window.LC_API.open_chat_window()}})]}));case"InvalidAccount":return r.createElement(y.Text,{size:(0,l.isMobile)()?"xxs":"xs",align:"center"},n);case"InputValidationFailed":case"PoBoxInAddress":case"InvalidPhone":return r.createElement("div",{className:"input_validation_failed"},r.createElement(y.Text,{align:"center",weight:"normal",line_height:"xxl"},r.createElement(d.Localize,{i18n_default_text:"We don’t accept the following inputs for:"})),Object.keys(null==o?void 0:o.error_details).map((function(e){return r.createElement("div",{key:e,className:"invalid_fields_input"},r.createElement(y.Text,{size:"xs",weight:"bold"},(0,l.getSignupFormFields)()[e]),r.createElement(y.Text,{size:"xs",weight:"bold"}," : "),r.createElement(y.Text,{size:"xs"},o[e]))})));default:return r.createElement("p",null,n)}},Pr=function(e){var t=e.text,n=e.onConfirm;return r.createElement(y.Button,{primary:!0,onClick:n,large:!0},t)},Nr=function(e){var t=e.code,n=e.onConfirm;switch(t){case"DuplicateCurrency":case"CurrencyTypeNotAllowed":return r.createElement(Pr,{text:(0,d.localize)("Try a different currency"),onConfirm:n});case"DuplicateAccount":return null;case"InputValidationFailed":case"PoBoxInAddress":case"InvalidPhone":return r.createElement(Pr,{text:(0,d.localize)("Let’s try again"),onConfirm:n});case"InvalidAccount":return r.createElement(Pr,{text:(0,d.localize)("OK"),onConfirm:n});default:return r.createElement(y.StaticUrl,{href:"help-centre/".concat("InvalidAccount"===t?"account#who-can-open-an-account":""),type:"button",className:"dc-btn dc-btn--primary"},r.createElement(y.Text,{weight:"bold",color:"white",size:"xxs"},r.createElement(d.Localize,{i18n_default_text:"OK"})))}},Tr=function(e){var t=e.message,n=e.code,o=e.onConfirm,i=e.className,a=e.error_field,c=void 0===a?{}:a,s=["InputValidationFailed","PoBoxInAddress","InvalidPhone"].includes(n);return r.createElement("div",{className:T()("account-wizard--error",Ar({},"account-wizard--error__".concat(i),i))},r.createElement(y.Icon,{icon:s?"IcInvalidError":"IcAccountError",size:s?"64":"InvalidAccount"===n?"96":"115"}),r.createElement(Lr,{code:n}),r.createElement(Cr,{code:n,message:t,details:c}),r.createElement(Nr,{code:n,onConfirm:o}))};Tr.propTypes={code:p().string,error_field:p().object,message:p().string,onConfirm:p().func,className:p().string};const jr=Tr;var Ir=n(39448),zr=function(e){var t=e.status;return r.createElement(y.Text,{as:"h2",align:"center",className:"status-dialog__message-header",weight:"bold"},t===Ir.FX.SUCCESS&&r.createElement(d.Localize,{i18n_default_text:"Your account is ready"}),t===Ir.FX.WARN&&r.createElement(d.Localize,{i18n_default_text:"Please verify your address"}),t===Ir.FX.DANGER&&r.createElement(d.Localize,{i18n_default_text:"Please verify your identity and address"}),t===Ir.FX.PENDING&&r.createElement(d.Localize,{i18n_default_text:"We're processing your personal information"}))},Mr=function(e){var t=e.status;return"iom"===e.landing_company_shortcode?r.createElement(zr,{status:t}):r.createElement(y.Text,{as:"h2",align:"center",className:"status-dialog__message-header",weight:"bold"},r.createElement(d.Localize,{i18n_default_text:"Your account is ready"}))};Mr.propTypes={status:p().number.isRequired,landing_company_shortcode:p().string.isRequired};var Dr=function(e){var t=e.country_standpoint,n=e.is_fully_authenticated,o=e.landing_company_shortcode,i=e.status,a=void 0===i?Ir.FX.SUCCESS:i,c="";if("maltainvest"===o)c=n?[r.createElement(d.Localize,{key:0,i18n_default_text:"You have added a Deriv Financial account."}),r.createElement(d.Localize,{key:1,i18n_default_text:"Make a deposit now to start trading."})]:r.createElement(d.Localize,{i18n_default_text:"We need proof of your identity and address before you can start trading."});else if("malta"===o)(t.is_united_kingdom&&n||t.is_rest_of_eu||t.is_belgium)&&(c=r.createElement(d.Localize,{i18n_default_text:"You have added a real Options account.<0/>Make a deposit now to start trading.",components:[r.createElement("br",{key:0})]}));else if("iom"===o)t.is_united_kingdom&&n&&(c=r.createElement(d.Localize,{i18n_default_text:"You have added a real Gaming account.<0/>Make a deposit now to start trading.",components:[r.createElement("br",{key:0})]}));else switch(a){case Ir.FX.WARN:c=r.createElement(d.Localize,{i18n_default_text:"To get trading, please confirm where you live."});break;case Ir.FX.DANGER:c=r.createElement(d.Localize,{i18n_default_text:"To get trading, please confirm who you are, and where you live."});break;case Ir.FX.PENDING:c=r.createElement(d.Localize,{i18n_default_text:"You'll be able to get trading as soon as verification is complete."});break;default:c=r.createElement(d.Localize,{i18n_default_text:"Fund your account to start trading."})}return Array.isArray(c)?r.createElement(r.Fragment,null,c.map((function(e,t){return r.createElement(y.Text,{key:t,as:"p",align:"center",className:"status-dialog__message-text",color:"general",size:"xs"},e)}))):r.createElement(y.Text,{as:"p",align:"center",className:"status-dialog__message-text",color:"general",size:"xs"},c)};Dr.propTypes={country_standpoint:p().object,currency:p().string,is_fully_authenticated:p().bool,is_isle_of_man_residence:p().bool,landing_company_shortcode:p().string,status:p().number};var Rr=function(e){var t=e.status,n=e.landing_company_shortcode,o=e.closeModal,i=e.closeModalAndOpenCashier,a=e.closeModalAndOpenPOI,c=e.closeModalAndOpenPOA,s=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.is_fully_authenticated,o=e.closeModal,i=e.closeModalAndOpenCashier,a=e.closeModalAndOpenPOI,c=e.closeModalAndOpenPOA;switch(n){case"iom":return t===Ir.FX.DANGER?{label:(0,d.localize)("Submit proofs"),action:a}:t===Ir.FX.WARN?{label:(0,d.localize)("Submit proof"),action:c}:t===Ir.FX.PENDING?{label:(0,d.localize)("OK"),action:o}:{label:(0,d.localize)("Deposit"),action:i};case"maltainvest":return r?{label:(0,d.localize)("Deposit"),action:i}:{label:(0,d.localize)("Submit proof"),action:a};default:return{label:(0,d.localize)("Deposit"),action:i}}}({status:t,landing_company_shortcode:n,is_fully_authenticated:e.is_fully_authenticated,closeModal:o,closeModalAndOpenCashier:i,closeModalAndOpenPOI:a,closeModalAndOpenPOA:c}),l=s.label,u=s.action;return r.createElement(y.Button,{primary:!0,text:l,onClick:u})},Fr=function(e){var t=e.status,n=e.landing_company_shortcode,o=e.closeModal,i=e.switchToVirtual;if(e.is_bypassed)return null;var a=function(e){var t=e.status,n=e.landing_company_shortcode,r=e.closeModal,o=e.switchToVirtual;return"iom"===n?t===Ir.FX.SUCCESS?{label:(0,d.localize)("Maybe later"),action:r}:t===Ir.FX.WARN?{label:(0,d.localize)("Trade on demo"),action:function(){r(),o()}}:{label:(0,d.localize)("Maybe later"),action:r}:{label:(0,d.localize)("Maybe later"),action:r}}({status:t,landing_company_shortcode:n,closeModal:o,switchToVirtual:i}),c=a.label,s=a.action;return r.createElement(y.Button,{secondary:!0,text:c,onClick:s})},Ur=function(e){var t=e.status,n=e.landing_company_shortcode,o=e.is_fully_authenticated,i=e.closeModal,a=e.closeModalAndOpenCashier,c=e.closeModalAndOpenPOA,s=e.closeModalAndOpenPOI,l=e.switchToVirtual;return r.createElement("div",{className:"status-dialog__footer"},r.createElement(Fr,{closeModal:i,is_bypassed:t===Ir.FX.PENDING,status:t,landing_company_shortcode:n,switchToVirtual:l}),r.createElement(Rr,{status:t,landing_company_shortcode:n,closeModal:i,closeModalAndOpenCashier:a,closeModalAndOpenPOI:s,closeModalAndOpenPOA:c,is_fully_authenticated:o}))};Ur.propTypes={status:p().number,landing_company_shortcode:p().string,is_fully_authenticated:p().bool,closeModal:p().func,closeModalAndOpenCashier:p().func,closeModalAndOpenPOA:p().func,closeModalAndOpenPOI:p().func,switchToVirtual:p().func};var Wr=function(e){var t=e.currency;return r.createElement(y.Icon,{icon:"IcCurrency-".concat(t.toLowerCase()),size:120})},Br=function(e){var t=e.className;return r.createElement(y.Icon,{className:t,icon:"IcCheckmarkCircle",color:"green",size:24})},Gr=function(e){var t=e.className;return r.createElement(y.Icon,{className:t,icon:"IcAlertDanger",size:24})},Vr=function(e){var t=e.className;return r.createElement(y.Icon,{className:t,icon:"IcCrossCircle",size:24,color:"red"})},Yr=function(e){var t=e.closeModal;return r.createElement("div",{onClick:t,className:"status-dialog__close"},r.createElement(y.Icon,{icon:"IcCross"}))},Hr=(0,u.observer)((function(e){var t=e.closeModal,n=e.currency,o=e.history,i=e.icon_size,a=(0,u.useStore)().client,c=a.country_standpoint,s=a.landing_company_shortcode,d=a.is_fully_authenticated,_=a.is_age_verified,f="im"===a.residence,p="be"===a.residence,h=function(){return(0,Ir.Sj)({landing_company_shortcode:s,is_fully_authenticated:d,is_age_verified:_,is_isle_of_man_residence:f,is_belgium_residence:p})};return r.createElement(y.Div100vhContainer,{className:"status-dialog",is_disabled:(0,l.isDesktop)(),height_offset:"40px"},(0,l.isDesktop)()&&r.createElement(Yr,{closeModal:t}),r.createElement("div",{className:T()("status-dialog__header",{"status-dialog__header--large":"large"===i,"status-dialog__header--xlarge":"xlarge"===i})},r.createElement(Wr,{currency:n}),h()===Ir.FX.SUCCESS&&r.createElement(Br,{className:"bottom-right-overlay"}),h()===Ir.FX.WARN&&r.createElement(Gr,{className:"bottom-right-overlay"}),h()===Ir.FX.DANGER&&r.createElement(Vr,{className:"bottom-right-overlay"})),r.createElement("div",{className:T()("status-dialog__body",{"status-dialog__body--no-grow":(0,l.isMobile)()})},r.createElement(Mr,{status:h(),landing_company_shortcode:s}),r.createElement(Dr,{country_standpoint:c,currency:n,is_fully_authenticated:d,landing_company_shortcode:s,status:h()})),r.createElement(Ur,{closeModal:t,closeModalAndOpenPOI:function(){t(),o.push(l.routes.proof_of_identity)},closeModalAndOpenPOA:function(){t(),o.push(l.routes.proof_of_address)},closeModalAndOpenCashier:function(){t(),o.push(l.routes.cashier_deposit)},is_fully_authenticated:d,landing_company_shortcode:s,status:h(),switchToVirtual:function(){return a.switchAccount(a.virtual_account_loginid)}}))}));Hr.defaultProps={icon_size:"large"},Hr.propTypes={closeModal:p().func,currency:p().string,history:p().object,icon:p().object,icon_size:p().string};const qr=(0,j.withRouter)(Hr);function Kr(){Kr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Jr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Zr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function $r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Zr(i,r,o,a,c,"next",e)}function c(e){Zr(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Jr(e){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jr(e)}function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){eo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Jr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Jr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function to(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return no(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return no(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ro={account_wizard:0,add_or_manage_account:1,finished_set_currency:2,status_dialog:3,set_currency:4,signup_error:5,choose_crypto_currency:6,add_currency:7,finished_add_currency:8,restricted_country_signup_error:9,invalid_input_error:10},oo=0,io=function(e){var t=e.country_standpoint,n=e.currency,o=e.is_isle_of_man_residence,i=e.real_account_signup_target,a="iom"===i,c="deposit_cash"===i;if(!("maltainvest"===i)&&!n||oo===ro.set_currency)return r.createElement(d.Localize,{i18n_default_text:"Set a currency for your real account"});if(c)return r.createElement(d.Localize,{i18n_default_text:"Add a Deriv Gaming account"});if(a&&o)return r.createElement(d.Localize,{i18n_default_text:"Add a Deriv account"});switch(i){case"malta":return t.is_united_kingdom||t.is_rest_of_eu||t.is_belgium?r.createElement(d.Localize,{i18n_default_text:"Add a real Deriv Options account"}):r.createElement(d.Localize,{i18n_default_text:"Add a Derived account"});case"iom":return t.is_united_kingdom?r.createElement(d.Localize,{i18n_default_text:"Add a real Deriv Gaming account"}):r.createElement(d.Localize,{i18n_default_text:"Add a Derived account"});case"maltainvest":return t.is_united_kingdom||t.is_france||t.is_other_eu||t.is_rest_of_eu?r.createElement(d.Localize,{i18n_default_text:"Setup your account"}):r.createElement(d.Localize,{i18n_default_text:"Add a Deriv Financial account"});case"samoa":return r.createElement(d.Localize,{i18n_default_text:"Terms of use"});default:return r.createElement(d.Localize,{i18n_default_text:"Add a Deriv account"})}},ao=(0,u.observer)((function(e){var t=e.history,n=e.state_index,o=e.is_trading_experience_incomplete,i=(0,u.useStore)(),a=i.ui,c=i.client,s=i.traders_hub,_=i.modules,f=c.available_crypto_currencies,p=c.country_standpoint,h=c.currency,m=c.fetchAccountSettings,g=c.has_fiat,v=c.has_active_real_account,b=c.is_from_restricted_country,w=c.realAccountSignup,E=c.redirectToLegacyPlatform,k=a.closeRealAccountSignup,S=a.deposit_real_account_signup_target,x=a.is_real_acc_signup_on,O=a.real_account_signup_target,A=a.setIsTradingAssessmentForNewUserEnabled,L=a.setIsClosingCreateRealAccountModal,C=a.setRealAccountSignupParams,P=a.setShouldShowAppropriatenessWarningModal,N=a.setShouldShowRiskWarningModal,j=a.should_show_appropriateness_warning_modal,z=a.should_show_risk_warning_modal,M=a.setShouldShowOneTimeDepositModal,D=a.real_account_signup,R=a.is_trading_assessment_for_new_user_enabled,F=s.content_flag,U=s.show_eu_related_content,W=s.toggleIsTourOpen,B=_.cashier.general_store.deposit_target,G=_.cashier.general_store.setIsDeposit,V=_.cashier.general_store.should_show_all_available_currencies,Y="be"===c.residence,H="im"===c.residence,q=to(r.useState(null),2),K=q[0],Z=q[1],$=to(r.useState(!1),2),J=$[0],X=$[1],Q=to(r.useState(null),2),ee=Q[0],te=Q[1],ne=to(r.useState(!1),2),re=ne[0],oe=ne[1],ie=to(r.useState({}),2),ae=ie[0],ce=ie[1],se=to(r.useState(""),2),le=se[0],ue=se[1],de=to(r.useState([{action:"signup",body:function(e){return r.createElement(jn,{setIsRiskWarningVisible:oe,onFinishSuccess:ge,onOpenDepositModal:me,onOpenWelcomeModal:ve,is_loading:e.is_loading,setLoading:we,onError:Ee,onClose:Se,realAccountSignup:w,setRealAccountFormData:ce})},title:io},{action:"multi",body:function(e){return r.createElement(sr,{onSuccessSetAccountCurrency:be,is_loading:e.is_loading,setLoading:we,onError:Ee,is_add_crypto:"add_crypto"===e.real_account_signup_target,is_add_fiat:"add_fiat"===e.real_account_signup_target,is_add_currency:"add_currency"===e.real_account_signup_target,deposit_target:e.deposit_target,onClose:Se})},title:function(e){var t;return"add_crypto"===e.real_account_signup_target?(0,d.localize)("Create a cryptocurrency account"):"add_fiat"===e.real_account_signup_target?(0,d.localize)("Add a Deriv real account"):"add_currency"===e.real_account_signup_target?(0,d.localize)("Create a new account"):e.has_fiat&&0===(null===(t=e.available_crypto_currencies)||void 0===t?void 0:t.length)?(0,d.localize)("Manage account"):(0,d.localize)("Add or manage account")}},{body:function(e){return r.createElement(wr,{prev:e.state_value.previous_currency,current:e.state_value.current_currency,onCancel:ke,onSubmit:ye,deposit_real_account_signup_target:e.deposit_real_account_signup_target,deposit_target:e.deposit_target,closeRealAccountSignup:k,setIsDeposit:G,history:t})},title:function(e){var t;return e.has_fiat&&0===(null===(t=e.available_crypto_currencies)||void 0===t?void 0:t.length)?(0,d.localize)("Manage account"):(0,d.localize)("Add or manage account")}},{body:function(e){return r.createElement(qr,{currency:e.state_value.currency,closeModal:ke})}},{body:function(e){return r.createElement(xr,{is_loading:e.is_loading,setLoading:we,onError:Ee,onClose:Se,onSuccessSetAccountCurrency:be})},title:io},{body:function(e){var t;return r.createElement(jr,{message:e.state_value.error_message||(null===(t=e.state_value.error_code)||void 0===t?void 0:t.message_to_client),code:e.state_value.error_code,onConfirm:function(){return xe(e.state_value.error_code)}})},title:function(){return(0,d.localize)("Add a real account")}},{body:function(){return r.createElement(mr,{className:"account-wizard__body",onError:Ee})},title:function(e){return e.should_show_all_available_currencies?(0,d.localize)("Choose an account"):(0,d.localize)("Choose a cryptocurrency account")}},{body:function(){return r.createElement(Xn,{className:"account-wizard__body",onError:Ee})},title:function(){return(0,d.localize)("Create a new account")}},{body:function(e){return r.createElement(vr,{redirectToLegacyPlatform:E,prev:e.state_value.previous_currency,current:e.state_value.current_currency,onSubmit:ye,deposit_real_account_signup_target:e.deposit_real_account_signup_target,deposit_target:e.deposit_target,closeRealAccountSignup:k,setIsDeposit:G,history:t})}},{body:function(e){var t;return r.createElement(jr,{message:e.state_value.error_message||(null===(t=e.state_value.error_code)||void 0===t?void 0:t.message_to_client),code:e.state_value.error_code,onConfirm:k,className:"restricted-country-error"})}},{body:function(e){var t;return r.createElement(jr,{message:e.state_value.error_message||(null===(t=e.state_value.error_code)||void 0===t?void 0:t.message_to_client),code:e.state_value.error_code,onConfirm:xe,error_field:e.state_value,className:"invalid-input-error"})}}]),1)[0],_e=to(r.useState(!1),2),fe=_e[0],pe=_e[1],he=r.useCallback((function(e){"maltainvest"!==O&&I.Analytics.trackEvent("ce_real_account_signup_form",Qr({form_source:document.referrer,form_name:"real_account_signup_form",landing_company:O},e))}),[O]);r.useEffect((function(){x&&he({action:"open"})}),[x,he]);var me=function(){k(),M(!0)},ge=function(e){C({active_modal_index:ro.status_dialog,currency:e})},ve=function(e){k(),C({currency:e})},ye=function(){k(),t.push(l.routes.cashier_deposit)},be=function(e,t,n){C({previous_currency:e,current_currency:t,active_modal_index:n?ro.finished_add_currency:ro.finished_set_currency})},we=function(e){X(e)},Ee=function(e,t){var n;t&&function(e){localStorage.setItem("real_account_signup_wizard",JSON.stringify(e.map((function(e){return"object"===Jr(e.form_value)&&e.form_value}))))}(t),Z(null===(n=de[Oe()])||void 0===n?void 0:n.action),te(e),he({action:"other_error",real_signup_error_message:e})};r.useEffect((function(){return ue((0,d.localize)("Risk Tolerance Warning")),function(){return A(o)}}),[]),r.useEffect((function(){ee&&C(Qr({active_modal_index:["InputValidationFailed","PoBoxInAddress","InvalidPhone"].includes(ee.code)?ro.invalid_input_error:ro.signup_error,error_message:ee.message,error_code:ee.code},"InputValidationFailed"===ee.code&&{error_details:ee.details}))}),[ee]),r.useEffect((function(){b&&C({active_modal_index:ro.restricted_country_signup_error,error_message:(0,d.localize)("Adding more real accounts has been restricted for your country."),error_code:"InvalidAccount"})}),[b,x]);var ke=function(e){"noopener noreferrer"===(null==e?void 0:e.target.getAttribute("rel"))||null!=e&&e.target.closest(".redirect-notice")||null!=e&&e.target.closest(".dc-popover__bubble")||(Oe()!==ro.status_dialog&&(sessionStorage.removeItem("post_real_account_signup"),localStorage.removeItem("real_account_signup_wizard")),k())},Se=function(e){if(!(!e||"noopener noreferrer"===(null==e?void 0:e.target.getAttribute("rel"))||null!=e&&e.target.closest(".redirect-notice")||null!=e&&e.target.closest(".dc-popover__bubble"))){if(Oe()!==ro.status_dialog&&(sessionStorage.removeItem("post_real_account_signup"),localStorage.removeItem("real_account_signup_wizard")),"signup"===de[Oe()].action)return L(!0),void([l.ContentFlag.EU_REAL,l.ContentFlag.EU_DEMO].includes(F)&&W(!0));k(),E()}},xe=function(e){C({active_modal_index:"multi"===K||"CurrencyTypeNotAllowed"===e?ro.add_or_manage_account:ro.account_wizard})},Oe=function(){return oo="choose"===O?ro.choose_crypto_currency:["add_crypto","add_fiat","add_currency"].includes(O)?ro.add_or_manage_account:-1===D.active_modal_index?v&&h&&"manage"===O?ro.add_or_manage_account:"set_currency"===O?ro.set_currency:ro.account_wizard:D.active_modal_index},Ae=de[Oe()],Le=Ae.title,Ce=Ae.body,Pe=ro.account_wizard,Ne=ro.add_or_manage_account,Te=ro.finished_set_currency,je=ro.status_dialog,Ie=ro.set_currency,ze=ro.signup_error,Me=ro.restricted_country_signup_error,De=ro.invalid_input_error,Re=[Pe,Ne,Ie,ze].includes(Oe()),Fe=function(){var e=$r(Kr().mark((function e(){var t;return Kr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return we(!0),e.prev=1,e.next=4,w(Qr(Qr({},ae),{},{accept_risk:1}));case 4:t=e.sent,l.WS.authorized.getAccountStatus().then((function(e){var n,r,o=e.get_account_status;(P(!1),"maltainvest"!==O||null!=o&&null!==(n=o.status)&&void 0!==n&&n.includes("cashier_locked"))?ge(null==t||null===(r=t.new_account_maltainvest)||void 0===r?void 0:r.currency.toLowerCase()):me()})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,m(),we(!1),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[1,8,10,14]])})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=$r(Kr().mark((function e(){return Kr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return we(!0),pe(!0),e.prev=2,e.next=5,w(Qr(Qr({},ae),{},{accept_risk:0}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),ue((0,d.localize)("24-hour Cool Down Warning")),"AppropriatenessTestFailed"===e.t0.code&&(P(!1),N(!0));case 11:return e.prev=11,m(),we(!1),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[2,7,11,15]])})));return function(){return e.apply(this,arguments)}}(),We=function(){k(),N(!1),pe(!1)};return fe?r.createElement(Ft(),{show_risk_modal:fe,title:le,handleAcceptRisk:We,body_content:r.createElement(d.Localize,{i18n_default_text:"CFDs and other financial instruments come with a high risk of losing money rapidly due to leverage. You should consider whether you understand how CFDs and other financial instruments work and whether you can afford to take the risk of losing your money. <0/><0/> As you have declined our previous warning, you would need to wait 24 hours before you can proceed further.",components:[r.createElement("br",{key:0})]})}):R&&z?r.createElement(Ft(),{show_risk_modal:z,title:le,handleAcceptRisk:We,body_content:r.createElement(d.Localize,{i18n_default_text:"CFDs and other financial instruments come with a high risk of losing money rapidly due to leverage. You should consider whether you understand how CFDs and other financial instruments work and whether you can afford to take the high risk of losing your money. <0/><0/> To continue, kindly note that you would need to wait 24 hours before you can proceed further.",components:[r.createElement("br",{key:0})]})}):j?r.createElement(Wt(),{show_risk_modal:j,body_content:r.createElement(y.Text,{as:"p",size:"xs"},r.createElement(d.Localize,{i18n_default_text:"In providing our services to you, we are required to ask you for some information to assess if a given product or service is appropriate for you and whether you have the experience and knowledge to understand the risks involved.<0/><0/>",components:[r.createElement("br",{key:0})]}),r.createElement(d.Localize,{i18n_default_text:"On the basis of the information provided in relation to your knowledge and experience, we consider that the investments available via this website are not appropriate for you.<0/><0/>",components:[r.createElement("br",{key:0})]}),r.createElement(d.Localize,{i18n_default_text:"By clicking ‘Accept’ and proceeding with the account opening, you should note that you may be exposing yourself to risks. These risks, which may be significant, include the risk of losing the entire sum invested, and you may not have the knowledge and experience to properly assess or mitigate them."})),footer_content:r.createElement(r.Fragment,null,r.createElement(y.Button,{type:"button",large:!0,text:(0,d.localize)("Decline"),secondary:!0,onClick:Ue}),r.createElement(y.Button,{type:"button",large:!0,text:(0,d.localize)("Accept"),primary:!0,onClick:Fe,is_loading:J}))}):r.createElement(r.Fragment,null,x&&r.createElement(r.Fragment,null,r.createElement(y.DesktopWrapper,null,r.createElement(y.Modal,{id:"real_account_signup_modal",className:T()("real-account-signup-modal",{"dc-modal__container_real-account-signup-modal--error":[ze,Me,De].includes(Oe()),"dc-modal__container_real-account-signup-modal--success":[Te,je].includes(Oe())}),is_open:x,is_risk_warning_visible:re,has_close_icon:"samoa"!==O,is_title_centered:"samoa"===O,renderTitle:function(){return Le&&![Te,je].includes(Oe())?r.createElement(Le,{available_crypto_currencies:f,country_standpoint:p,currency:h,has_fiat:g,is_belgium_residence:Y,is_eu:U,is_isle_of_man_residence:H,real_account_signup_target:O,should_show_all_available_currencies:V}):null},toggleModal:Se,height:function(){if(b)return"304px";if([De,je].includes(Oe()))return"auto";if(!h||Oe()===ro.set_currency)return"688px";if(v&&h){if(U&&Oe()===ro.add_or_manage_account)return"420px";if([ro.finished_set_currency,ro.finished_add_currency].includes(Oe()))return"auto"}return"740px"}(),width:b||Oe()===ro.invalid_input_error?"440px":Re?"955px":"auto",elements_to_ignore:[document.querySelector(".modal-root")]},r.createElement(Ce,{state_value:D,passthrough:n,is_loading:J,real_account_signup_target:O,deposit_real_account_signup_target:S,deposit_target:B}))),r.createElement(y.MobileWrapper,null,r.createElement(y.MobileDialog,{portal_element_id:"modal_root",wrapper_classname:"account-signup-mobile-dialog",visible:x,onClose:Se,renderTitle:function(){return Le?r.createElement(Le,{country_standpoint:p,currency:h,is_belgium_residence:Y,is_isle_of_man_residence:H,real_account_signup_target:O,should_show_all_available_currencies:V}):null}},r.createElement(Ce,{state_value:D,passthrough:n,is_loading:J,real_account_signup_target:O,deposit_real_account_signup_target:S,deposit_target:B})))))}));const co=(0,j.withRouter)(ao);const so=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.ui,o=t.is_virtual,i=n.is_set_currency_modal_visible,a=n.openRealAccountSignup,c=n.toggleSetCurrencyModal,s=(0,b.useHasSetCurrency)();return r.createElement(y.Modal,{id:"dt_set_account_currency_modal",has_close_icon:!1,is_open:i,small:!0,toggleModal:c,title:s?(0,d.localize)("You have an account that needs action"):(0,d.localize)("No currency assigned to your account")},r.createElement(y.Modal.Body,null,(0,d.localize)("Please set a currency for your existing real account before creating another account.")),r.createElement(y.Modal.Footer,null,o?r.createElement(y.Button,{has_effect:!0,text:(0,d.localize)("OK"),onClick:c,primary:!0}):r.createElement(r.Fragment,null,r.createElement(y.Button,{has_effect:!0,text:(0,d.localize)("Cancel"),onClick:c,secondary:!0}),r.createElement(y.Button,{has_effect:!0,text:(0,d.localize)("Set currency"),onClick:function(){c(),setTimeout((function(){a("set_currency")}),250)},primary:!0}))))}));var lo=n(12951),uo=n(60380);const _o=(0,u.observer)((function(e){var t=e.data_testid,n=e.icon,o=void 0===n?"":n,i=e.is_active,a=e.is_disabled,c=e.is_hidden,s=e.link_to,_=void 0===s?"":s,f=e.onClickLink,p=e.suffix_icon,h=void 0===p?"":p,m=e.text,g=(0,u.useStore)(),v=g.ui,w=g.client,E=w.has_any_real_account,k=w.is_virtual,S=v.setMobileLanguageMenuOpen,x=v.toggleReadyToDepositModal,O=v.toggleNeedRealAccountForCashierModal,A=(0,b.useIsRealAccountNeededForCashier)(),L=m===(0,d.localize)("Trade"),C=(0,l.getStaticUrl)(_),P=window.location.pathname===l.routes.traders_hub,N=(0,l.isMobile)()&&_===l.routes.languages,j=C&&(0,uo.Bm)(_),I=[l.routes.cashier_deposit,l.routes.cashier_withdrawal,l.routes.cashier_acc_transfer].includes(_);if(c)return null;if(N)return r.createElement("div",{className:T()("header__menu-mobile-link",{"header__menu-mobile-link--disabled":a}),onClick:function(){return S(!0)},"data-testid":t},r.createElement(y.Icon,{className:"header__menu-mobile-link-icon",icon:o}),r.createElement("span",{className:"header__menu-mobile-link-text"},m),h&&r.createElement(y.Icon,{className:"header__menu-mobile-link-suffix-icon",icon:h}));if(A&&I&&P){return r.createElement("div",{className:T()("header__menu-mobile-link",{"header__menu-mobile-link--disabled":a}),onClick:function(){null==f||f(),O()},"data-testid":t},r.createElement(y.Icon,{className:"header__menu-mobile-link-icon",icon:o}),r.createElement("span",{className:"header__menu-mobile-link-text"},m),h&&r.createElement(y.Icon,{className:"header__menu-mobile-link-suffix-icon",icon:h}))}if(I&&k&&!E){var z=window.location.pathname===l.routes.root||P;return r.createElement("div",{className:T()("header__menu-mobile-link",{"header__menu-mobile-link--disabled":a}),onClick:function(){z&&x(),null==f||f()},"data-testid":t},r.createElement(y.Icon,{className:"header__menu-mobile-link-icon",icon:o}),r.createElement("span",{className:"header__menu-mobile-link-text"},m),h&&r.createElement(y.Icon,{className:"header__menu-mobile-link-suffix-icon",icon:h}))}return _?j?r.createElement("a",{className:T()("header__menu-mobile-link",{"header__menu-mobile-link--disabled":a,"header__menu-mobile-link--active":i}),href:_,"data-testid":t},r.createElement(y.Icon,{className:"header__menu-mobile-link-icon",icon:o}),r.createElement(y.Text,{className:L?"":"header__menu-mobile-link-text",as:"h3",size:"xs",weight:"/"===window.location.pathname&&L?"bold":void 0},m),h&&r.createElement(y.Icon,{className:"header__menu-mobile-link-suffix-icon",icon:h})):r.createElement(Y.CG,{to:_,className:T()("header__menu-mobile-link",{"header__menu-mobile-link--disabled":a,"header__menu-mobile-link--active":i}),active_class:"header__menu-mobile-link--active",onClick:f,"data-testid":t},r.createElement(y.Icon,{className:"header__menu-mobile-link-icon",icon:o}),r.createElement(y.Text,{className:L?"":"header__menu-mobile-link-text",as:"h3",size:"xs",weight:"/"===window.location.pathname&&L?"bold":void 0},m),h&&r.createElement(y.Icon,{className:"header__menu-mobile-link-suffix-icon",icon:h})):r.createElement("div",{className:T()("header__menu-mobile-link",{"header__menu-mobile-link--disabled":a}),"data-testid":t},r.createElement(y.Icon,{className:"header__menu-mobile-link-icon",icon:o}),r.createElement("span",{className:"header__menu-mobile-link-text"},m),h&&r.createElement(y.Icon,{className:"header__menu-mobile-link-suffix-icon",icon:h}))}));const fo=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.common,n=e.ui,o=t.current_language,i=n.is_mobile_language_menu_open,a=n.setMobileLanguageMenuOpen;return r.createElement(r.Fragment,null,r.createElement("div",null,(0,d.localize)("Menu")),r.createElement("div",{className:"settings-language__language-button_wrapper",onClick:function(){i||a(!0)}},!i&&r.createElement(r.Fragment,null,r.createElement(y.Icon,{icon:"IcFlag".concat(o.replace("_","-")),data_testid:"dt_icon",className:"ic-settings-language__icon",size:22}),r.createElement(y.Text,{weight:"bold",size:"xxs"},r.createElement(d.Localize,{i18n_default_text:o})))))}));const po=(0,u.observer)((function(e){var t=e.expandSubMenu,n=e.toggleDrawer,o=(0,u.useStore)(),i=o.common,a=o.ui,c=i.is_language_changing,s=a.is_mobile_language_menu_open,l=a.setMobileLanguageMenuOpen;return r.createElement(y.MobileDrawer.SubMenu,{is_expanded:s,has_subheader:!0,submenu_title:(0,d.localize)("Language"),onToggle:function(e){t(e),l(!1)},submenu_toggle_class:"dc-mobile-drawer__submenu-toggle--hidden"},r.createElement("div",{className:T()("settings-language__language-container",{"settings-language__language-container--disabled":c})},Object.keys((0,d.getAllowedLanguages)()).map((function(e){return r.createElement(Y.Fv,{key:e,icon_classname:"settings-language__language-flag",is_clickable:!0,lang:e,toggleModal:function(){n(),l(!1)}})}))))}));function ho(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var go=(0,u.observer)((function(e){var t=e.platform_config,n=(0,u.useStore)(),o=n.common,i=n.ui,a=n.client,c=n.traders_hub,s=n.modules,_=o.app_routing_history,f=o.current_language,p=i.disableApp,h=i.enableApp,m=i.is_mobile_language_menu_open,g=i.is_dark_mode_on,v=i.setDarkMode,w=i.setMobileLanguageMenuOpen,E=a.account_status,k=a.is_logged_in,S=a.is_logging_in,x=a.is_virtual,O=a.loginid,A=a.logout,L=a.should_allow_authentication,C=a.should_allow_poinc_authentication,P=a.landing_company_shortcode,N=a.is_landing_company_loaded,I=a.is_pending_proof_of_ownership,z=a.is_eu,M=s.cashier.payment_agent.is_payment_agent_visible,D=c.show_eu_related_content,R=c.setTogglePlatformType,F=(0,b.useAccountTransferVisible)(),U=(0,b.useOnrampVisible)(),W=(0,b.usePaymentAgentTransferVisible)().data,B=(0,b.useIsP2PEnabled)().data,G=(0,me.Z)(!1,O),V=ho(r.useState(!1),2),Y=V[0],H=V[1],q=ho(r.useState(!1),2),K=q[0],Z=q[1],$=ho(r.useState([]),2),J=$[0],X=$[1],Q=ho(r.useState(!1),2),ee=Q[0],te=Q[1],ne=r.useContext(l.PlatformContext).is_appstore,re=r.useRef(),oe=(0,j.useHistory)(),ie=(0,b.useFeatureFlags)().is_next_wallet_enabled;r.useEffect((function(){return(E||L)&&function(){var e=(0,lo.Z)({is_appstore:ne}),t=[],n=window.location.pathname;t=ne?[l.routes.my_apps,l.routes.explore,l.routes.wallets,l.routes.platforms,l.routes.trade_types,l.routes.markets]:n===l.routes.traders_hub||de?[l.routes.account,l.routes.cashier]:n===l.routes.wallets||ie?[l.routes.reports,l.routes.account]:[l.routes.reports,l.routes.account,l.routes.cashier],X(se(e,t))}(),function(){return clearTimeout(re.current)}}),[ne,E,L,de,ie]);var ae,ce=r.useCallback((function(){m&&w(!1),Y?(Z(!0),re.current=setTimeout((function(){H(!1),Z(!1)}),400)):H(!Y),te(!1)}),[te,Y,m,w]),se=function(e,t){var n=e.flatMap((function(e){return e.routes||[]}));return t.map((function(t){return e.find((function(e){return e.path===t}))||n.find((function(e){return e.path===t}))})).filter((function(e){return e}))},le=function(e,t){if(!(!e.is_authenticated||k))return null;if(!e.routes)return r.createElement(y.MobileDrawer.Item,{key:t},r.createElement(_o,{link_to:e.path,icon:e.icon_component,text:e.getTitle(),onClickLink:ce}));var n=e.routes.some((function(e){return e.subroutes}));return r.createElement(y.MobileDrawer.SubMenu,{key:t,has_subheader:!0,submenu_icon:e.icon_component,submenu_title:e.getTitle(),submenu_suffix_icon:"IcChevronRight",onToggle:te,route_config_path:e.path},!n&&e.routes.map((function(e,t){if(!e.is_invisible&&(e.path!==l.routes.cashier_pa||M)&&(e.path!==l.routes.cashier_pa_transfer||W)&&(e.path!==l.routes.cashier_p2p||B)&&(e.path!==l.routes.cashier_onramp||U)&&(e.path!==l.routes.cashier_acc_transfer||F))return r.createElement(y.MobileDrawer.Item,{key:t},r.createElement(_o,{link_to:e.path,icon:e.icon_component,text:e.getTitle(),onClickLink:ce}))})),n&&e.routes.map((function(e,t){return e.subroutes?r.createElement(y.MobileDrawer.SubMenuSection,{key:t,section_icon:e.icon,section_title:e.getTitle()},e.subroutes.map((function(e,t){return r.createElement(_o,{key:t,is_disabled:(n=e.path,(/financial-assessment/.test(n)?x:/trading-assessment/.test(n)?x||"maltainvest"!==P:/proof-of-address/.test(n)||/proof-of-identity/.test(n)?!L:/proof-of-income/.test(n)?!C:!!/proof-of-ownership/.test(n)&&(x||!I))||e.is_disabled),link_to:e.path,text:e.getTitle(),onClickLink:ce});var n}))):r.createElement(y.MobileDrawer.Item,{key:t},r.createElement(_o,{link_to:e.path,icon:e.icon_component,text:e.getTitle(),onClickLink:ce}))})))},ue=(0,j.useLocation)().pathname,de=ue.startsWith(l.routes.traders_hub)||ue.startsWith(l.routes.cashier)||ue.startsWith(l.routes.account);return r.createElement(r.Fragment,null,r.createElement("a",{id:"dt_mobile_drawer_toggle",onClick:ce,className:"header__mobile-drawer-toggle"},r.createElement(y.Icon,{icon:ne&&!k?"IcHamburgerWhite":"IcHamburger",width:"16px",height:"16px",className:"header__mobile-drawer-icon"})),r.createElement(y.MobileDrawer,{alignment:ne?"right":"left",icon_class:"header__menu-toggle",is_open:Y,transitionExit:K,toggle:ce,id:"dt_mobile_drawer",enableApp:h,disableApp:p,title:r.createElement(fo,null),height:"100vh",width:"295px",className:"pre-appstore"},r.createElement(y.Div100vhContainer,{height_offset:"40px"},r.createElement("div",{className:"header__menu-mobile-body-wrapper"},ne&&r.createElement(y.MobileDrawer.Body,null,J.map((function(e,t){return le(e,t)}))),r.createElement(r.Fragment,null,!de&&r.createElement(y.MobileDrawer.SubHeader,{className:T()({"dc-mobile-drawer__subheader--hidden":ee})},r.createElement(rt,{app_routing_history:_,is_mobile:!0,is_landing_company_loaded:N,is_logged_in:k,is_logging_in:S,platform_config:t,toggleDrawer:ce,current_language:f,setTogglePlatformType:R})),r.createElement(y.MobileDrawer.Body,{className:T()({"header__menu-mobile-traders-hub":de})},r.createElement("div",{className:"header__menu-mobile-platform-switcher",id:"mobile_platform_switcher"}),k&&r.createElement(y.MobileDrawer.Item,null,r.createElement(_o,{link_to:ie?l.routes.wallets:l.routes.traders_hub,icon:g?"IcAppstoreHomeDark":"IcAppstoreTradersHubHome",text:(0,d.localize)("Trader's Hub"),onClickLink:ce})),!de&&r.createElement(y.MobileDrawer.Item,null,r.createElement(_o,{link_to:l.routes.trade,icon:"IcTrade",text:(0,d.localize)("Trade"),onClickLink:ce})),J.map((function(e,t){return le(e,t)})),r.createElement(y.MobileDrawer.Item,{className:"header__menu-mobile-theme",onClick:function(e){e.preventDefault(),v(!g)}},r.createElement("div",{className:T()("header__menu-mobile-link")},r.createElement(y.Icon,{className:"header__menu-mobile-link-icon",icon:"IcTheme"}),r.createElement("span",{className:"header__menu-mobile-link-text"},(0,d.localize)("Dark theme")),r.createElement(y.ToggleSwitch,{id:"dt_mobile_drawer_theme_toggler",handleToggle:function(){return v(!g)},is_enabled:g}))),r.createElement(y.MobileDrawer.Item,{className:T()({"header__menu-mobile-theme":ae})},r.createElement(_o,{link_to:(0,l.getStaticUrl)("/help-centre"),icon:"IcHelpCentre",text:(0,d.localize)("Help centre"),onClickLink:ce})),k&&r.createElement(r.Fragment,null,r.createElement(y.MobileDrawer.Item,null,r.createElement(_o,{link_to:l.routes.account_limits,icon:"IcAccountLimits",text:(0,d.localize)("Account Limits"),onClickLink:ce})),r.createElement(y.MobileDrawer.Item,null,r.createElement(_o,{link_to:(0,l.getStaticUrl)("/responsible"),icon:"IcVerification",text:(0,d.localize)("Responsible trading"),onClickLink:ce})),z&&D&&!x&&r.createElement(y.MobileDrawer.Item,null,r.createElement(_o,{link_to:(0,l.getStaticUrl)("/regulatory"),icon:"IcRegulatoryInformation",text:(0,d.localize)("Regulatory information"),onClickLink:ce})),r.createElement(y.MobileDrawer.Item,{className:"header__menu-mobile-theme--trader-hub"},r.createElement(_o,{link_to:(0,l.getStaticUrl)("/"),icon:"IcDerivOutline",text:(0,d.localize)("Go to Deriv.com"),onClickLink:ce}))),G.isReady&&r.createElement(y.MobileDrawer.Item,{className:"header__menu-mobile-whatsapp"},r.createElement(y.Icon,{icon:"IcWhatsApp",className:"drawer-icon"}),r.createElement("a",{className:"header__menu-mobile-whatsapp-link",href:l.whatsapp_url,target:"_blank",rel:"noopener noreferrer",onClick:ce},(0,d.localize)("WhatsApp"))),r.createElement(y.MobileDrawer.Item,{className:"header__menu-mobile-livechat"},r.createElement(ge,null)),k&&r.createElement(y.MobileDrawer.Item,{onClick:function(){ce(),oe.push(l.routes.index),A().then((function(){window.location.href=(0,l.getStaticUrl)("/")}))},className:"dc-mobile-drawer__item"},r.createElement(_o,{icon:"IcLogout",text:(0,d.localize)("Log out")}))),r.createElement(y.MobileDrawer.Footer,{className:k?"dc-mobile-drawer__footer--servertime":""},r.createElement(be,{is_mobile:!0}),r.createElement(he,{is_mobile:!0})),m&&r.createElement(po,{expandSubMenu:te,toggleDrawer:ce}))))))}));go.displayName="ToggleMenuDrawer";const vo=go;const yo=[{icon:(0,l.getPlatformSettings)("trader").icon,title:function(){return(0,l.getPlatformSettings)("trader").name},name:(0,l.getPlatformSettings)("trader").name,description:function(){return(0,d.localize)("A whole new trading experience on a powerful yet easy to use platform.")},link_to:l.routes.trade},{icon:(0,l.getPlatformSettings)("dbot").icon,title:function(){return(0,l.getPlatformSettings)("dbot").name},name:(0,l.getPlatformSettings)("dbot").name,description:function(){return(0,d.localize)("Automated trading at your fingertips. No coding needed.")},link_to:l.routes.bot},{icon:(0,l.getPlatformSettings)("smarttrader").icon,title:function(){return(0,l.getPlatformSettings)("smarttrader").name},name:(0,l.getPlatformSettings)("smarttrader").name,description:function(){return(0,d.localize)("Trade the world’s markets with our popular user-friendly platform.")},href:l.routes.smarttrader},{icon:(0,l.getPlatformSettings)("bbot").icon,title:function(){return(0,l.getPlatformSettings)("bbot").name},name:(0,l.getPlatformSettings)("bbot").name,description:function(){return(0,d.localize)("Our classic “drag-and-drop” tool for creating trading bots, featuring pop-up trading charts, for advanced users.")},href:l.routes.binarybot}];const bo=(0,u.observer)((function(e){var t=e.onClickDeposit,n=(0,u.useStore)(),o=n.client,i=n.ui,a=n.notifications,c=o.account_type,s=o.balance,l=o.currency,d=o.country_standpoint,_=o.is_eu,f=o.is_logged_in,p=o.is_virtual,h=i.account_switcher_disabled_message,m=i.disableApp,g=i.enableApp,v=i.is_account_switcher_disabled,y=i.is_accounts_switcher_on,b=i.openRealAccountSignup,w=i.toggleAccountsDialog,E=a.is_notifications_visible,k=a.notifications,S=a.toggleNotificationsModal;return r.createElement("div",{id:"dt_core_header_acc-info-container",className:"acc-info__container"},r.createElement(_t,{acc_switcher_disabled_message:h,account_type:c,balance:s,currency:l,country_standpoint:d,disableApp:m,enableApp:g,is_acc_switcher_on:y,is_acc_switcher_disabled:v,is_eu:_,is_notifications_visible:E,is_logged_in:f,is_virtual:p,onClickDeposit:t,notifications_count:k.length,toggleAccountsDialog:w,toggleNotifications:S,openRealAccountSignup:b}))}));const wo=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.common,o=e.notifications,i=e.traders_hub,a=e.ui,c=t.currency,s=t.is_bot_allowed,d=t.is_dxtrade_allowed,_=t.is_logged_in,f=t.is_logging_in,p=t.is_mt5_allowed,h=t.is_switching,m=t.is_landing_company_loaded,g=n.app_routing_history,v=n.current_language,y=n.platform,b=o.addNotificationMessage,w=o.client_notifications,E=o.removeNotificationMessage,k=i.setTogglePlatformType,S=a.header_extension,x=a.is_desktop,O=a.is_mobile,A=a.is_app_disabled,L=a.is_route_modal_on,C=a.is_trading_assessment_for_existing_user_enabled,P=a.is_real_acc_signup_on,N=(0,j.useHistory)(),I=r.useCallback((function(){return E({key:"new_version_available"})}),[E]);r.useEffect((function(){return document.addEventListener("IgnorePWAUpdate",I),function(){return document.removeEventListener("IgnorePWAUpdate",I)}}),[I]);var z=function(e){return e.filter((function(e){return e.link_to===l.routes.mt5?!_||p:e.link_to===l.routes.dxtrade?d:e.link_to!==l.routes.bot&&e.href!==l.routes.binarybot&&e.href!==l.routes.smarttrader||s}))};return r.createElement("header",{className:T()("header",{"header--is-disabled":A||L,"header--is-hidden":l.platforms[y]})},r.createElement("div",{className:"header__menu-items"},r.createElement("div",{className:"header__menu-left"},x&&r.createElement(rt,{app_routing_history:g,is_landing_company_loaded:m,is_logged_in:_,is_logging_in:f,platform_config:z(yo),setTogglePlatformType:k,current_language:v}),O&&r.createElement(r.Fragment,null,r.createElement(vo,{platform_config:z(yo)}),S&&_&&r.createElement("div",{className:"header__menu-left-extensions"},S)),r.createElement(st,null)),r.createElement("div",{className:T()("header__menu-right",{"header__menu-right--hidden":O&&f})},(f||h)&&r.createElement("div",{id:"dt_core_header_acc-info-preloader",className:T()("acc-info__preloader",{"acc-info__preloader--no-currency":!c,"acc-info__preloader--is-crypto":(0,l.getDecimalPlaces)(c)>2})},r.createElement(At,{is_logged_in:_,is_mobile:O,speed:3})),r.createElement(bo,{onClickDeposit:function(){return N.push(l.routes.cashier_deposit)}}))),!C&&P&&r.createElement(co,null),r.createElement(so,null),r.createElement(Dt,{onUpdate:function(){return b(null==w?void 0:w.new_version_available)}}))}));const Eo=(0,u.observer)((function(){var e=(0,u.useStore)().ui.is_dark_mode_on,t=(0,j.useHistory)(),n=(0,j.useLocation)().pathname,o=(0,b.useFeatureFlags)(),i=o.is_next_wallet_enabled,a=o.is_next_tradershub_enabled;return r.createElement("div",{"data-testid":"dt_traders_hub_home_button",className:T()("traders-hub-header__tradershub",{"traders-hub-header__tradershub--active":n===l.routes.traders_hub||n===l.routes.wallets}),onClick:function(){return t.push(i?l.routes.wallets:a?l.routes.traders_hub_v2:l.routes.traders_hub)}},r.createElement("div",{className:"traders-hub-header__tradershub--home-logo"},r.createElement(y.Icon,{icon:e?"IcAppstoreHomeDark":"IcAppstoreTradersHubHome",size:e?15:17})),r.createElement(y.Text,{className:"traders-hub-header__tradershub--text"},r.createElement(d.Localize,{i18n_default_text:"Trader's Hub"})))}));const ko=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.common,o=e.ui,i=e.notifications,a=e.traders_hub,c=t.currency,s=t.has_any_real_account,d=t.is_bot_allowed,_=t.is_dxtrade_allowed,f=t.is_logged_in,p=t.is_logging_in,h=t.is_mt5_allowed,m=t.is_virtual,g=t.is_switching,v=n.app_routing_history,y=n.platform,b=n.current_language,w=o.header_extension,E=o.is_app_disabled,k=o.is_desktop,S=o.is_mobile,x=o.is_route_modal_on,O=o.toggleReadyToDepositModal,A=o.is_real_acc_signup_on,L=i.addNotificationMessage,C=i.client_notifications,P=i.removeNotificationMessage,N=a.setTogglePlatformType,I=(0,j.useHistory)(),z=r.useCallback((function(){return P({key:"new_version_available"})}),[P]);r.useEffect((function(){return document.addEventListener("IgnorePWAUpdate",z),function(){return document.removeEventListener("IgnorePWAUpdate",z)}}),[z]);var M=function(e){return e.filter((function(e){return e.link_to===l.routes.mt5?!f||h:e.link_to===l.routes.dxtrade?_:e.link_to!==l.routes.bot&&e.href!==l.routes.binarybot&&e.href!==l.routes.smarttrader||d}))};return r.createElement("header",{className:T()("header",{"header--is-disabled":E||x,"header--is-hidden":l.platforms[y]})},r.createElement("div",{className:"header__menu-items"},r.createElement("div",{className:"header__menu-left"},k&&r.createElement(rt,{app_routing_history:v,platform_config:M(yo),setTogglePlatformType:N,current_language:b}),S&&r.createElement(r.Fragment,null,r.createElement(vo,{platform_config:M(yo)}),w&&f&&r.createElement("div",{className:"header__menu-left-extensions"},w)),k&&r.createElement(Eo,null),r.createElement(st,null)),r.createElement("div",{className:T()("header__menu-right",{"header__menu-right--hidden":S&&p})},k&&r.createElement("div",{className:"header__menu--dtrader--separator--account"},r.createElement("div",{className:"header__menu--dtrader--separator"})),(p||g)&&r.createElement("div",{id:"dt_core_header_acc-info-preloader",className:T()("acc-info__preloader__dtrader",{"acc-info__preloader__dtrader--no-currency":!c,"acc-info__preloader__dtrader--is-crypto":(0,l.getDecimalPlaces)(c)>2})},r.createElement(At,{is_logged_in:f,is_mobile:S,speed:3})),r.createElement(bo,{onClickDeposit:function(){!s&&m?O():I.push(l.routes.cashier_deposit)}}))),A&&r.createElement(co,null),r.createElement(so,null),r.createElement(Dt,{onUpdate:function(){return L(null==C?void 0:C.new_version_available)}}))}));var So=["styles"];function xo(){return xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xo.apply(this,arguments)}function Oo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const Ao=function(e){e.styles;var t=Oo(e,So);return r.createElement("svg",xo({viewBox:"0 0 104 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r.createElement("g",{clipPath:"url(#clip0_34589_443010)"},r.createElement("path",{d:"M20.83 1.09l-1.78 10.1h-6.18C7.11 11.18 1.61 15.84.6 21.6l-.43 2.46C-.85 29.83 3 34.5 8.76 34.5h5.16c4.2 0 8.2-3.4 8.94-7.6L27.61 0l-6.78 1.09zm-4.38 24.86a2.85 2.85 0 01-2.7 2.35h-3.13c-2.59 0-4.32-2.1-3.87-4.7l.27-1.53a5.85 5.85 0 015.53-4.7h5.41l-1.51 8.58zm51.98 8.55l4.06-23h6.41l-4.05 23h-6.42zm.7-22.73l-.97 5.47a16.35 16.35 0 00-7.14-.45L57.9 34.51h-6.42l3.85-21.82a21.7 21.7 0 0113.8-.92zm-26.01-.6h-5c-4.86 0-9.5 3.95-10.36 8.81l-1 5.72c-.87 4.86 2.38 8.8 7.25 8.8h10.62l1.09-6.18h-9.99c-1.62 0-2.7-1.31-2.41-2.93l.03-.2h16.1l.91-5.2c.86-4.87-2.38-8.81-7.25-8.81zm.8 8.32l-.03.33h-9.57l.05-.3c.29-1.61 1.77-3.04 3.4-3.04h3.73c1.6 0 2.7 1.4 2.43 3zm53.6-7.99h6.41c-2.19 5.82-7.2 15.7-12.05 23h-6.42c-2.23-6.95-3.67-16.63-3.94-23h6.42c.11 2.08 1.04 9.79 2.1 15.17a208.42 208.42 0 007.47-15.17z",fill:"#FF444F"})),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0_34589_443010"},r.createElement("path",{fill:"#fff",d:"M0 0h104v34.51H0z"}))))};var Lo=n(79250),Co=n(47172),Po=["icon"];function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},No.apply(this,arguments)}function To(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const jo=function(e){var t=e.icon,n=To(e,Po);return r.createElement(y.Icon,No({icon:"IcCurrency".concat((0,l.capitalizeFirstLetter)(t.toLowerCase()))},n))};function Io(e){return Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Io(e)}function zo(){zo=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Io(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Mo(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Do(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Mo(i,r,o,a,c,"next",e)}function c(e){Mo(i,r,o,a,c,"throw",e)}a(void 0)}))}}const Ro=(0,u.observer)((function(e){var t,n,o,i=e.is_visible,a=(0,u.useStore)(),c=a.client,s=a.traders_hub,_=a.ui,f=c.account_list,p=c.accounts,h=c.switchAccount,m=c.has_any_real_account,g=c.account_status,v=c.loginid,w=s.closeModal,E=s.selected_region,k=s.openFailedVerificationModal,S=_.openRealAccountSignup,x=_.toggleSetCurrencyModal,O=g.authentication,A=(0,b.useMFAccountStatus)(),L=(0,Co.Z)(A,k,"multipliers",void 0,{poi_status:null==O||null===(t=O.identity)||void 0===t?void 0:t.status,poa_status:null==O||null===(n=O.document)||void 0===n?void 0:n.status}),C=L.text,P=L.icon,N=(0,b.useHasSetCurrency)();return r.createElement(y.Modal,{is_open:i,toggleModal:w,width:"422px",height:"422px"},r.createElement("div",{className:"currency-selection-modal__header"},r.createElement(y.Text,{"line-height":"m",weight:"bold"},(0,d.localize)("Select account")),r.createElement(y.Icon,{className:"close-icon",icon:"IcCross",onClick:function(){return w()}})),r.createElement("div",{className:"currency-selection-modal__body"},f.filter((function(e){return!1==!!e.is_disabled&&(!e.is_virtual&&"Non-EU"===E&&e.loginid.startsWith("CR")||"EU"===E&&e.loginid.startsWith("MF"))})).map((function(e){var t=e.icon,n=e.loginid,o=p[n],i=o.balance,a=o.currency,c=v===n;return r.createElement("div",{key:n,className:T()("currency-item-card",{"currency-item-card--active":c}),onClick:Do(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n===v){e.next=3;break}return e.next=3,h(n);case 3:w();case 4:case"end":return e.stop()}}),e)})))},r.createElement(jo,{className:"currency-item-card__icons",icon:t,size:32}),r.createElement("div",{className:"currency-item-card__details"},r.createElement(y.Text,{size:"xs"},(0,l.getCurrencyName)(a)),r.createElement(y.Text,{color:c?"prominent":"less-prominent",size:"xxs"},n)),r.createElement("div",{className:"currency-item-card__balance"},A?r.createElement(y.StatusBadge,{account_status:A,icon:P,text:C}):r.createElement(y.Text,{size:"xs",color:"prominent"},r.createElement(y.Money,{amount:i,currency:a,show_currency:!0}))))}))),r.createElement("div",{className:"currency-selection-modal__bottom-controls"},r.createElement(y.Button,{className:"block-button",onClick:function(){clearTimeout(o),o=setTimeout((function(){m&&!N?x():S("manage")}),500),w()},secondary:!0,large:!0},(0,d.localize)("Add or manage account"))))}));const Fo=(0,u.observer)((function(){var e=(0,u.useStore)().notifications,t=e.is_notifications_visible,n=e.notifications,o=e.toggleNotificationsModal;return r.createElement("div",{"data-testid":"dt_traders_hub_show_notifications",className:"traders-hub-header__notification"},r.createElement(qe,{count:n.length,is_visible:t,toggleDialog:o,tooltip_message:r.createElement(d.Localize,{i18n_default_text:"View notifications"})}))}));var Uo=n(84880);function Wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Go=(0,u.observer)((function(){var e=(0,j.useHistory)(),t=(0,u.useStore)(),n=t.traders_hub,o=t.ui,i=n.setIsOnboardingVisited,a=n.setIsFirstTimeVisit,c=o.is_dark_mode_on,s=o.is_mobile,_=(0,b.useFeatureFlags)().is_next_wallet_enabled,f=Wo((0,Uo._)("walletsOnboarding",""),2)[1],p=_?function(){f("started")}:function(){e.push(l.routes.onboarding),i(!1),a(!1)};return r.createElement("div",{"data-testid":"dt_traders_hub_onboarding"},r.createElement("div",{className:"traders-hub-header__tradershub--onboarding--logo"},r.createElement(y.Popover,{classNameBubble:"account-settings-toggle__tooltip",alignment:"bottom",message:!s&&r.createElement(d.Localize,{i18n_default_text:"View onboarding"}),should_disable_pointer_events:!0,zIndex:"9999"},r.createElement(y.Icon,{data_testid:"dt_traders_hub_onboarding_icon",icon:c?"IcAppstoreTradingHubOnboardingDark":"IcAppstoreTradingHubOnboarding",size:20,onClick:p}))))}));var Vo=r.memo((function(e){var t=e.handleClickCashier,n=(0,b.useFeatureFlags)().is_next_wallet_enabled;return r.createElement(r.Fragment,null,r.createElement("div",{className:"traders-hub-header__menu-right--items--onboarding"},r.createElement(Go,null)),r.createElement("div",{className:"traders-hub-header__menu-right--items--notifications"},r.createElement(Fo,null)),r.createElement(Y.CG,{className:"traders-hub-header__setting",to:l.routes.personal_details},r.createElement(y.Icon,{icon:"IcUserOutline",size:20})),!n&&r.createElement("div",{className:"traders-hub-header__cashier-button"},r.createElement(y.Button,{primary:!0,small:!0,onClick:t},r.createElement(d.Localize,{i18n_default_text:"Cashier"}))))}));Vo.displayName="DefaultMobileLinks";const Yo=Vo;const Ho=(0,u.observer)((function(){var e,t=(0,u.useStore)(),n=t.client,o=t.common,i=t.traders_hub,a=t.ui,c=n.account_type,s=n.balance,_=n.country_standpoint,f=n.currency,p=n.has_any_real_account,h=n.is_eu,m=n.is_logged_in,g=n.is_mt5_allowed,v=n.is_virtual,w=o.platform,E=i.modal_data,k=a.header_extension,S=a.is_accounts_switcher_on,x=a.is_app_disabled,O=a.is_desktop,A=a.is_mobile,L=a.is_route_modal_on,C=a.account_switcher_disabled_message,P=a.toggleAccountsDialog,N=a.toggleNeedRealAccountForCashierModal,I=a.toggleReadyToDepositModal,z=a.is_real_acc_signup_on,M=(0,j.useHistory)(),D=(0,j.useLocation)().pathname.startsWith(l.routes.cashier),R=(0,b.useIsRealAccountNeededForCashier)(),F=(0,l.formatMoney)(f,null!=s?s:"",!0);return r.createElement("header",{className:T()("traders-hub-header",{"traders-hub-header--is-disabled":x||L,"traders-hub-header--is-hidden":l.platforms[w]})},r.createElement("div",{className:"traders-hub-header__menu-left"},A&&r.createElement(r.Fragment,null,r.createElement(vo,{platform_config:(e=yo,e.filter((function(e){return e.link_to!==l.routes.mt5||!m||g})))}),k&&m&&r.createElement("div",null,k)),r.createElement("div",{className:T()("traders-hub-header__logo-wrapper",{"traders-hub-header__logo-wrapper--cashier":D})},r.createElement(y.StaticUrl,{href:"/"},r.createElement(Ao,{className:"traders-hub-header__logo"}))),O&&r.createElement(r.Fragment,null,r.createElement("div",{className:"traders-hub-header__divider"}),r.createElement(Eo,null)),r.createElement(st,{is_traders_hub_routes:!0})),O&&r.createElement(r.Fragment,null,r.createElement("div",{className:"traders-hub-header__menu-right"},r.createElement("div",{className:"traders-hub-header__divider"}),r.createElement("div",{className:"traders-hub-header__menu-right--items"},r.createElement("div",{className:"traders-hub-header__menu-right--items--onboarding"},r.createElement(Go,null)),r.createElement("div",{className:"traders-hub-header__menu-right--items--notifications"},r.createElement(Fo,null)),r.createElement(y.Popover,{classNameBubble:"account-settings-toggle__tooltip",alignment:"bottom",message:r.createElement(d.Localize,{i18n_default_text:"Manage account settings"}),should_disable_pointer_events:!0,zIndex:"9999"},r.createElement(Y.CG,{className:"traders-hub-header__setting",to:l.routes.personal_details},r.createElement(y.Icon,{icon:"IcUserOutline",size:20}))),D&&r.createElement("div",{className:"traders-hub-header__menu-right--items--account-toggle"},r.createElement(Lo.default,{acc_switcher_disabled_message:C,account_type:c,balance:F,country_standpoint:_,currency:f,is_dialog_on:S,is_disabled:!1,is_eu:h,is_virtual:v,toggleDialog:P})))),z&&r.createElement(co,null)),A&&r.createElement(r.Fragment,null,r.createElement("div",{className:"traders-hub-header__mobile-parent"},r.createElement("div",{className:"traders-hub-header__menu-middle"},D?r.createElement(r.Fragment,null,r.createElement("div",{className:"traders-hub-header__menu-right--items--notifications__cashier"},r.createElement(Fo,null)),r.createElement("div",{className:"traders-hub-header__menu-right--items--account-toggle"},r.createElement(Lo.default,{acc_switcher_disabled_message:C,account_type:c,balance:F,country_standpoint:_,currency:f,is_dialog_on:S,is_disabled:!1,is_eu:h,is_virtual:v,toggleDialog:P}))):r.createElement(Yo,{handleClickCashier:function(){!p&&v||R?p?window.location.pathname===l.routes.traders_hub&&N():I():M.push(l.routes.cashier_deposit)}}))),r.createElement(co,null)),r.createElement(so,null),r.createElement(Ro,{is_visible:"currency_selection"===E.active_modal}))}));var qo=function(e){var t=e.is_mobile;return r.createElement(r.Fragment,null,r.createElement("rect",{x:t?42:166,y:"8",rx:"4",ry:"4",width:"66",height:"32"}),r.createElement("rect",{x:t?120:250,y:"8",rx:"4",ry:"4",width:"80",height:"32"}))},Ko=function(e){return e.is_mobile?r.createElement(r.Fragment,null,r.createElement("circle",{cx:"97",cy:"22",r:"13"}),r.createElement("circle",{cx:"59",cy:"22",r:"13"}),r.createElement("rect",{x:"128",y:"19",rx:"4",ry:"4",width:"76",height:"7"})):r.createElement(r.Fragment,null,r.createElement("circle",{cx:"14",cy:"22",r:"12"}),r.createElement("circle",{cx:"58",cy:"22",r:"12"}),r.createElement("rect",{x:"87",y:"8",rx:"4",ry:"4",width:"1",height:"30"}),r.createElement("circle",{cx:"118",cy:"24",r:"13"}),r.createElement("rect",{x:"150",y:"20",rx:"4",ry:"4",width:"150",height:"7"}),r.createElement("rect",{x:"330",y:"8",rx:"4",ry:"4",width:"122",height:"32"}))};const Zo=function(e){var t=e.is_mobile,n=e.is_logged_in,o=e.speed;return r.createElement(Xe.ZP,{height:t?42:46,width:t?216:450,speed:o,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},n?r.createElement(Ko,{is_mobile:t}):r.createElement(qo,{is_mobile:t}))};var $o=function(){return r.createElement("div",{className:"header__menu--dtrader--separator"})},Jo=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.common,o=e.ui,i=e.traders_hub,a=t.is_bot_allowed,c=t.is_logged_in,s=t.is_mt5_allowed,d=t.is_dxtrade_allowed,_=n.app_routing_history,f=n.current_language,p=o.header_extension,h=i.setTogglePlatformType,m=function(e){return e.filter((function(e){return e.link_to===l.routes.mt5?!c||s:e.link_to===l.routes.dxtrade?d:e.link_to!==l.routes.bot&&e.href!==l.routes.binarybot&&e.href!==l.routes.smarttrader||a}))};return r.createElement("div",{className:"header__menu-left"},r.createElement(y.DesktopWrapper,null,r.createElement(rt,{app_routing_history:_,platform_config:m(yo),setTogglePlatformType:h,current_language:f})),r.createElement(y.MobileWrapper,null,r.createElement(vo,{platform_config:m(yo)}),p&&c&&r.createElement("div",{className:"header__menu-left-extensions"},p)),r.createElement(y.DesktopWrapper,null,r.createElement(Eo,null)),r.createElement(st,null))})),Xo=(0,u.observer)((function(){var e,t=(0,u.useStore)(),n=t.client,o=t.ui,i=n.is_logged_in,a=n.is_logging_in,c=n.is_switching,s=n.accounts,l=n.loginid,d=n.is_crypto,_=o.is_mobile,f=null==s?void 0:s[null!=l?l:""],p=null!==(e=null==f?void 0:f.currency)&&void 0!==e?e:"";return r.createElement("div",{className:T()("header__menu-right",{"header__menu-right--hidden":_&&a})},r.createElement(y.DesktopWrapper,null,r.createElement("div",{className:"header__menu--dtrader--separator--account"},r.createElement($o,null))),(a||c)&&r.createElement("div",{id:"dt_core_header_acc-info-preloader",className:T()("acc-info__preloader__dtrader acc-info__preloader__dtrader--wallets",{"acc-info__preloader__dtrader--no-currency":!p,"acc-info__preloader__dtrader--is-crypto":d(p)})},r.createElement(Zo,{is_logged_in:i,is_mobile:_,speed:3})),r.createElement("div",{id:"dt_core_header_acc-info-container",className:"acc-info__container"},r.createElement(Mt,null)))})),Qo=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.common,n=e.ui,o=e.notifications,i=t.platform,a=n.is_app_disabled,c=n.is_route_modal_on,s=o.addNotificationMessage,d=o.client_notifications,_=o.removeNotificationMessage,f=r.useCallback((function(){return _({key:"new_version_available"})}),[_]);return r.useEffect((function(){return document.addEventListener("IgnorePWAUpdate",f),function(){return document.removeEventListener("IgnorePWAUpdate",f)}}),[f]),r.createElement("header",{className:T()("header",{"header--is-disabled":a||c,"header--is-hidden":l.platforms[i]})},r.createElement("div",{className:"header__menu-items"},r.createElement(Jo,null),r.createElement(Xo,null)),r.createElement(co,null),r.createElement(so,null),r.createElement(Dt,{onUpdate:function(){return s(d.new_version_available)}}))}));const ei=(0,j.withRouter)(Qo);const ti=(0,u.observer)((function(){var e=(0,u.useStore)().client,t=e.accounts,n=e.is_logged_in,o=e.setAccounts,i=e.loginid,a=e.switchAccount,c=(0,j.useLocation)().pathname,s=c.includes(l.routes.wallets_cashier),d=[l.routes.traders_hub,l.routes.traders_hub_v2,l.routes.account,l.routes.cashier,l.routes.wallets,l.routes.wallets_compare_accounts,l.routes.compare_cfds].includes(c)||c.startsWith(l.routes.compare_cfds)||s,_=(0,Uo.Fx)("client.accounts"),f=(0,b.useFeatureFlags)().is_next_wallet_enabled,p=(0,b.useStoreWalletAccountsList)().has_wallet,h=f&&p;return r.useEffect((function(){if(h&&n){var e=Object.keys(null!=t?t:{});if(Object.keys(null!=_?_:{}).length>e.length){var r;o(_);var c=null!==(r=localStorage.getItem("active_loginid"))&&void 0!==r?r:"";i!==c&&a(c)}}}),[t,_,n,i,o,h,a]),n?d?r.createElement(Ho,null):c===l.routes.onboarding?null:h?r.createElement(ei,null):r.createElement(ko,null):c===l.routes.onboarding?null:r.createElement(wo,null)}));const ni=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.ui,n=e.traders_hub.is_eu_user,o=t.is_deriv_account_needed_modal_visible,i=t.openDerivRealAccountNeededModal,a=t.disableApp,c=t.enableApp,s=t.openRealAccountSignup;return r.createElement(y.Dialog,{className:"open-real-account-dialog",title:(0,d.localize)("You’ll need a Deriv account"),confirm_button_text:(0,d.localize)("Add Deriv Account"),onConfirm:function(){n?(i(),s("maltainvest")):(i(),s("svg"))},cancel_button_text:(0,d.localize)("Cancel"),onCancel:i,is_closed_on_cancel:!0,disableApp:a,enableApp:c,is_closed_on_confirm:!0,is_visible:o},(0,d.localize)("A Deriv account will allow you to fund (and withdraw from) your CFDs account(s)."))}));const ri=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.ui,o=n.is_account_needed_modal_on,i=n.account_needed_modal_props,a=i.target,c=i.target_label,s=i.target_dmt5_label,l=n.closeAccountNeededModal,_=n.disableApp,f=n.enableApp,p=n.openRealAccountSignup,h=t.is_eu,m=h?(0,d.localize)("CFDs"):(0,d.localize)("Deriv MT5"),g=h?(0,d.localize)("Deriv Multipliers"):(0,d.localize)("Deriv");return r.createElement(y.Dialog,{title:(0,d.localize)("You’ll need a {{deriv_account}} account",{deriv_account:c}),confirm_button_text:(0,d.localize)("Add {{deriv_account}} account",{deriv_account:c}),onConfirm:function(){l(),p(a)},cancel_button_text:(0,d.localize)("Cancel"),onCancel:l,is_closed_on_cancel:!0,disableApp:_,enableApp:f,is_closed_on_confirm:!0,is_visible:o},r.createElement(d.Localize,{i18n_default_text:"Please add a {{deriv_account}} account first before adding a {{dmt5_account}} account. Deposits and withdrawals for your {{dmt5_label}} account are done by transferring funds to and from your {{deriv_label}} account.",values:{deriv_account:c,dmt5_account:s,dmt5_label:m,deriv_label:g}}))}));function oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ii(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ai=function(e){var t=e.is_logged_in,n=e.is_eu,o=e.portal_id,i=oi(r.useState(!1),2),a=i[0],c=i[1],s=oi(r.useState(""),2),u=s[0],_=s[1],f=function(){c(!1)},p=function(e){var r="A"===e.target.tagName?e.target:e.target.closest("a");r&&function(e){var t;try{t=new URL(e)}catch(e){return!1}return!(!t.host||new RegExp("^.*\\.".concat((0,l.getCurrentProductionDomain)()||"binary\\.com","$")).test(t.host)||new RegExp("^.*\\.binary\\.bot$").test(t.host)||/www\.(betonmarkets|xodds)\.com/.test(t.host)||/deriv.(app|com)/.test(t.host)||window.location.host===t.host)}(r.href)&&t&&n&&(e.preventDefault(),e.stopPropagation(),_(r.href),c(!0))};return r.useEffect((function(){return document.addEventListener("click",p),function(){document.removeEventListener("click",p)}}),[t,n]),Ke.createPortal(r.createElement(y.Dialog,{className:"redirect-notice",is_visible:a,title:"Redirect notice",cancel_button_text:(0,d.localize)("Cancel"),confirm_button_text:(0,d.localize)("Proceed"),onCancel:f,onConfirm:function(){c(!1),window.open(u)},dismissable:f},(0,d.localize)("You are being redirected to an external website.")),document.getElementById(o))};const ci=(0,u.observer)((function(){var e=(0,u.useStore)().ui,t=e.should_show_assessment_complete_modal,n=e.setShouldShowAssessmentCompleteModal;return r.createElement(y.Modal,{width:"44rem",has_close_icon:!1,className:"center-risk-modal",is_open:t},r.createElement(y.Modal.Body,null,r.createElement(y.Icon,{icon:"IcVerificationSuccess",color:"green",size:80}),r.createElement(y.Text,{as:"p",align:"center",weight:"bold",className:"verified-account__text"},r.createElement(d.Localize,{i18n_default_text:"Assessment Completed<0/><0/>",components:[r.createElement("br",{key:0})]})),r.createElement(y.Text,{as:"p",size:"xs",align:"center"},r.createElement(d.Localize,{i18n_default_text:"Thank you! Your response has been recorded into our system.<0/><0/>Please click ‘OK’ to continue.",components:[r.createElement("br",{key:0})]}))),r.createElement(y.Modal.Footer,null,r.createElement(y.Button,{type:"button",large:!0,text:(0,d.localize)("OK"),primary:!0,onClick:function(){n(!1)}})))}));const si=(0,u.observer)((function(){var e=(0,u.useStore)().ui,t=e.should_show_account_success_modal,n=e.setShouldTriggerTourGuide,o=e.toggleAccountSuccessModal,i=e.disableApp,a=e.enableApp,c=e.setIsVerificationModalVisible,s=e.setIsFromSuccessDepositModal,l=e.is_mobile,_=(0,b.useHasMFAccountDeposited)().has_mf_account_deposited,f=function(){o(),n(!0)};return r.createElement(y.Dialog,{className:"ready-to-verify-dialog",title:_?(0,d.localize)("Successfully deposited"):(0,d.localize)("Account added"),confirm_button_text:(0,d.localize)("Verify now"),onConfirm:function(){_&&s(!0),o(),c(!0)},cancel_button_text:(0,d.localize)("Maybe later"),onCancel:f,disableApp:i,enableApp:a,is_visible:t,dismissable:!0,has_close_icon:!1,onEscapeButtonCancel:f},r.createElement(y.Text,{align:"center",size:l?"xxs":"xs"},_?r.createElement(d.Localize,{i18n_default_text:"Your funds will be available for trading once the verification of your account is complete."}):r.createElement(d.Localize,{i18n_default_text:"Your account will be available for trading once the verification of your account is complete."})))}));const li=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.ui,o=t.real_account_creation_unlock_date,i=n.should_show_cooldown_modal,a=n.setShouldShowCooldownModal,c=(0,l.formatDate)(o,"DD MMMM"),s=(0,l.formatTime)(o,"hh:mm [GMT]"),_=(0,d.localize)("{{unblock_date}} at {{unblock_time}}",{unblock_date:c,unblock_time:s});return r.createElement(y.Modal,{width:"44rem",title:(0,d.localize)("Account creation paused for 24 hours"),is_open:i,toggleModal:function(){return a(!i)},className:"center-risk-modal",has_close_icon:!(0,l.isMobile)()},r.createElement(y.Modal.Body,null,r.createElement(y.Icon,{icon:"IcRedWarning",size:63}),r.createElement(y.Text,{as:"p",size:"xs",align:"center",className:"risk-acceptance__text"},r.createElement(d.Localize,{i18n_default_text:"Sorry, you're unable to create an account at this time. As you declined our previous risk warnings, we need you to wait for 24 hours after your first account creation attempt before you can proceed.<0/><0/>",components:r.createElement("br",{key:0})}),r.createElement(d.Localize,{i18n_default_text:"We take your financial well-being seriously and want to ensure you are fully aware of the risks before trading.<0/><0/>",components:r.createElement("br",{key:0})}),r.createElement(d.Localize,{i18n_default_text:"Thank you for your understanding. You can create your account on {{real_account_unblock_date}} or later.",values:{real_account_unblock_date:_}}))),r.createElement(y.Modal.Footer,null,r.createElement(y.Button,{type:"button",large:!0,text:(0,d.localize)("OK"),primary:!0,onClick:function(){a(!1)}})))}));const ui=function(e){var t=e.setMT5NotificationModal;return r.createElement("div",{className:"mt5-notification-modal-description"},r.createElement("ol",{className:"mt5-notification-list-container"},r.createElement("li",{className:"mt5-notification-list"},r.createElement(y.Text,{as:"p",size:"xs"},r.createElement(d.Localize,{i18n_default_text:"Log back in to MT5 after 7:30 GMT on 20 Oct 2023 if you’re having difficulty logging in to MT5 as we’re making some updates to our MT5 platform. <0>Follow these steps</0> to log back in to MT5.",components:[r.createElement("a",{className:"mt5-notification-list__link",target:"_blank",rel:"noopener noreferrer",href:l.mt5_community_url,key:0,onClick:function(){t(!1)}})]}))),r.createElement("li",{className:"mt5-notification-list"},r.createElement(y.Text,{as:"p",size:"xs"},r.createElement(d.Localize,{i18n_default_text:"If you need further assistance, let us know via <0>live chat</0>.",components:[r.createElement("a",{className:"mt5-notification-list__link",onClick:function(){window.LC_API.open_chat_window(),t(!1)},key:0})]})))))};const di=(0,u.observer)((function(){var e=(0,u.useStore)().traders_hub,t=e.setMT5NotificationModal,n=e.is_mt5_notification_modal_visible;return r.createElement(r.Suspense,{fallback:r.createElement(y.UILoader,null)},r.createElement(y.DesktopWrapper,null,r.createElement(y.Modal,{has_close_icon:!1,is_open:n,title:(0,d.localize)("Deriv MT5: Your action is needed"),toggleModal:function(){t(!n)},className:"mt5-notification-modal",width:"510px"},r.createElement(y.Modal.Body,{className:"mt5-notification-modal-body"},r.createElement(ui,{setMT5NotificationModal:t})),r.createElement(y.Modal.Footer,{has_separator:!0},r.createElement(y.Button,{primary:!0,onClick:function(){t(!1)}},(0,d.localize)("OK"))))),r.createElement(y.MobileWrapper,null,r.createElement(y.MobileDialog,{portal_element_id:"modal_root",wrapper_classname:"mt5-notification-modal-description",title:(0,d.localize)("Deriv MT5: Your action is needed"),visible:n,onClose:function(){t(!1)},has_full_height:!0,has_close_icon:!1,footer:r.createElement("div",{className:"mt5-notification-modal-description--footer"},r.createElement(y.Button,{className:"mt5-notification-modal-description--button",primary:!0,onClick:function(){return t(!1)}},(0,d.localize)("OK")))},r.createElement(ui,{setMT5NotificationModal:t}))))}));function _i(e){return _i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_i(e)}function fi(){fi=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==_i(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function pi(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}const hi=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.ui,n=e.traders_hub,o=n.is_eu_user,i=n.selectRegion,a=t.is_need_real_account_for_cashier_modal_visible,c=t.toggleNeedRealAccountForCashierModal,s=t.disableApp,_=t.enableApp,f=t.openRealAccountSignup,p=(0,j.useHistory)(),h=function(){var e,t=(e=fi().mark((function e(){return fi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(),e.next=3,i(o?"Non-EU":"EU");case 3:p.push(l.routes.cashier_deposit);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){pi(i,r,o,a,c,"next",e)}function c(e){pi(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),m=o?"EU":"non-EU",g=o?"non-EU":"EU";return r.createElement(y.Dialog,{className:"need-real-account-for-cashier-dialog",title:(0,d.localize)("The cashier is for real accounts only"),confirm_button_text:(0,d.localize)("Add account"),onConfirm:function(){return c(),f(o?"maltainvest":"svg")},cancel_button_text:(0,d.localize)("Switch account"),onCancel:h,is_closed_on_cancel:!0,disableApp:s,enableApp:_,is_closed_on_confirm:!0,is_visible:a,dismissable:!1,has_close_icon:!0,onClose:c},r.createElement(d.Localize,{i18n_default_text:"It looks like you don’t have a real {{regulation}} account. To use the cashier, switch to your {{active_real_regulation}} real account, or get an {{regulation}} real account.",values:{regulation:m,active_real_regulation:g}}))}));const mi=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.ui,n=e.traders_hub,o=e.client,i=n.is_eu_user,a=t.is_ready_to_deposit_modal_visible,c=t.toggleReadyToDepositModal,s=t.disableApp,l=t.enableApp,_=t.openRealAccountSignup,f=t.setShouldShowCooldownModal,p=o.real_account_creation_unlock_date;return r.createElement(y.Dialog,{className:"ready-to-deposit-dialog",title:(0,d.localize)("Ready to deposit and trade for real?"),confirm_button_text:(0,d.localize)("Add real account"),onConfirm:function(){return c(),p?f(!0):_(i?"maltainvest":"svg")},cancel_button_text:(0,d.localize)("Maybe later"),onCancel:c,is_closed_on_cancel:!0,disableApp:s,enableApp:l,is_closed_on_confirm:!0,is_visible:a,dismissable:!0,has_close_icon:!1,onEscapeButtonCancel:c},(0,d.localize)("You need a real Deriv account to access the cashier."))}));const gi=(0,u.observer)((function(){var e=(0,u.useStore)().ui,t=e.should_show_risk_accept_modal,n=e.setShouldShowWarningModal,o=e.setShouldShowAssessmentCompleteModal,i=e.setIsTradingAssessmentForNewUserEnabled;return r.createElement(Wt(),{show_risk_modal:t,body_content:r.createElement(y.Text,{as:"p",size:"xs"},r.createElement(d.Localize,{i18n_default_text:"In providing our services to you, we are required to ask you for some information to assess if a given product or service is appropriate for you and whether you have the experience and knowledge to understand the risks involved.<0/><0/>",components:[r.createElement("br",{key:0})]}),r.createElement(d.Localize,{i18n_default_text:"Based on your answers, it looks like you have insufficient knowledge and experience in trading CFDs. CFD trading is risky and you could potentially lose all of your capital.<0/><0/>",components:[r.createElement("br",{key:0})]}),r.createElement(d.Localize,{i18n_default_text:"Please note that by clicking ‘OK’, you may be exposing yourself to risks. You may not have the knowledge or experience to properly assess or mitigate these risks, which may be significant, including the risk of losing the entire sum you have invested."})),footer_content:r.createElement(y.Button,{type:"button",large:!0,text:(0,d.localize)("OK"),primary:!0,onClick:function(){n(!1),window.location.href.includes(l.routes.trading_assessment)?o(!1):(o(!0),i(!0))}})})}));var vi=n(42176),yi=n(23115),bi=n(30830);const wi=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.ui,o=t.is_trading_experience_incomplete,i=t.cfd_score,a=n.setShouldShowTradingAssessmentModal,c=n.should_show_trading_assessment_modal,s=n.setShouldShowTradeAssessmentForm;r.useEffect((function(){a(0===i)}),[]);return r.createElement(y.Modal,{width:"44rem",className:"center-risk-modal",is_open:o&&c},r.createElement(y.Modal.Body,null,r.createElement(y.Icon,{icon:"IcCurrencyEurCheck",size:95}),r.createElement(y.Text,{as:"p",align:"center",weight:"bold",className:"verified-account__text"},r.createElement(d.Localize,{i18n_default_text:"Trading Experience Assessment<0/>",components:[r.createElement("br",{key:0})]})),r.createElement(y.Text,{as:"p",size:"xs",align:"center"},r.createElement(d.Localize,{i18n_default_text:"As per our regulatory obligations, we are required to assess your trading knowledge and experience.<0/><0/>Please click ‘OK’ to continue",components:[r.createElement("br",{key:0})]}))),r.createElement(y.Modal.Footer,null,r.createElement(y.Button,{type:"button",large:!0,text:(0,d.localize)("OK"),primary:!0,onClick:function(){a(!1),s(!0)}})))}));function Ei(e){return Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(e)}function ki(){ki=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Ei(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(n),!0).forEach((function(t){Oi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ei(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ei(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ei(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ai(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ci(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ci(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Pi=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.ui,o=t.setFinancialAndTradingAssessment,i=t.updateAccountStatus,a=t.landing_company_shortcode,c=n.should_show_risk_warning_modal,s=n.setShouldShowRiskWarningModal,l=n.setShouldShowWarningModal,_=n.should_show_trade_assessment_form,f=n.setShouldShowTradeAssessmentForm,p=n.setShouldShowAssessmentCompleteModal,h=n.setIsTradingAssessmentForExistingUserEnabled,m=n.setIsTradingAssessmentForNewUserEnabled,g=n.setShouldShowTradingAssessmentModal,v=n.setSubSectionIndex,b=Li(r.useState({}),2),w=b[0],E=b[1],k=Li(r.useState({}),2),S=k[0],x=k[1],O=Li(r.useState(!1),2),A=O[0],L=O[1];r.useEffect((function(){var e;localStorage.removeItem("current_question_index"),h(!0);var t=(0,yi.Z)({real_account_signup_target:a},null),n=t.form_value,r=t.props;return E(n),x(null!==(e=r.assessment_questions)&&void 0!==e?e:[]),function(){return h(!1)}}),[]);var C=function(){var e,t=(e=ki().mark((function e(t){var n,r,a,c,u;return ki().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("No"!==t.risk_tolerance){e.next=5;break}f(!1),s(!0),e.next=15;break;case 5:return r={trading_experience_regulated:xi({},t)},e.next=8,o(r);case 8:return a=e.sent,c=null!==(n=a.set_financial_assessment)&&void 0!==n?n:{},u=c.trading_score,e.next=12,i();case 12:f(!1),0===u?l(!0):p(!0),m(!0);case 15:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ai(i,r,o,a,c,"next",e)}function c(e){Ai(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),P=function(){g(!0),f(!1)};return c?r.createElement(bi.Z,{show_risk_modal:c,title:(0,d.localize)("Risk Tolerance Warning"),button_text:(0,d.localize)("Yes, I understand the risk."),handleAcceptRisk:function(){E((function(e){return xi(xi({},e),{},{risk_tolerance:"Yes"})})),L(!0),s(!1),f(!0)},body_content:r.createElement(d.Localize,{i18n_default_text:"CFDs and other financial instruments come with a high risk of losing money rapidly due to leverage. You should consider whether you understand how CFDs and other financial instruments work and whether you can afford to take the high risk of losing your money. <0/><0/> To continue, you must confirm that you understand your capital is at risk.",components:[r.createElement("br",{key:0})]}),has_icon:!0,has_sub_header:!0}):_?r.createElement(r.Fragment,null,r.createElement(y.DesktopWrapper,null,r.createElement(y.Modal,{is_open:_,title:(0,d.localize)("Trading Experience Assessment"),width:"904px",has_close_icon:!1,height:"688px",className:"real-account-signup-modal"},r.createElement(vi.Z,{assessment_questions:S,form_value:w,onSubmit:C,onCancel:P,setSubSectionIndex:v,class_name:"trading-assessment--existing-user",should_move_to_next:A}))),r.createElement(y.MobileWrapper,null,r.createElement(y.MobileDialog,{visible:_,title:(0,d.localize)("Trading Experience Assessment"),portal_element_id:"modal_root",has_close_icon:!1},r.createElement(vi.Z,{assessment_questions:S,form_value:w,onSubmit:C,onCancel:P,setSubSectionIndex:v,class_name:"trading-assessment--existing-user",should_move_to_next:A})))):r.createElement(wi,null)}));var Ni=n(50296),Ti=n(88706);function ji(e){return function(e){if(Array.isArray(e))return Mi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||zi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e,t){if(e){if("string"==typeof e)return Mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mi(e,t):void 0}}function Mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Di=(0,u.observer)((function(e){var t=Ii(r.useState(0),2),n=t[0],o=t[1],i=Ii(r.useState(""),2),a=i[0],c=i[1],s=n,d=r.useRef(!0).current,_=(0,u.useStore)(),f=_.client,p=_.notifications,h=f.authentication_status,m=f.fetchStatesList,g=p.refreshNotifications,v={body:Ti.Z},b={body:Ni.Z},w=!["pending","verified"].includes(h.identity_status),E=!["pending","verified"].includes(h.document_status),k=[].concat(ji(w?[v]:[]),ji(E?[b]:[])),S=Ii(r.useState(k),2),x=S[0],O=S[1];r.useEffect((function(){g()}),[x,g]),r.useEffect((function(){m()}),[m]);var A,L=function(){d=!1,e.onFinish()},C=function(){if(d){var e=ji(x);O(e)}},P=function(){c(""),n+1<x.length?(C(),o(n+1)):L()},N=(A="body")?x[s][A]:x[s];return r.createElement(y.Div100vhContainer,{className:"proof-of-identity",id:"verification_modal_content",is_disabled:(0,l.isDesktop)(),height_offset:"40px"},r.createElement("div",{className:"proof-of-identity__main-container","data-testid":"dt_verification_modal_body"},r.createElement(N,{index:s,onSubmit:P,onStateChange:function(){C(),P()},height:"auto",onCancel:function(){n-1>=0?(o(n-1),c("")):L()},onSave:C,form_error:a})))}));const Ri=(0,u.observer)((function(){var e,t=(0,u.useStore)(),n=t.ui,o=t.client.authentication_status,i=n.is_verification_modal_visible,a=n.setIsVerificationModalVisible,c=n.setIsVerificationSubmitted,s=!["pending","verified"].includes(o.identity_status),l=!["pending","verified"].includes(o.document_status);return e=s&&l?(0,d.localize)("Submit your proof of identity and address"):s&&!l?(0,d.localize)("Submit your proof of identity"):(0,d.localize)("Submit your proof of address"),r.createElement(r.Suspense,{fallback:r.createElement(y.UILoader,null)},r.createElement(y.DesktopWrapper,null,r.createElement(y.Modal,{className:"verification-modal",is_open:i,title:e,toggleModal:function(){return a(!1)},height:"70rem",width:"99.6rem",exit_classname:"verification-modal--custom-exit"},r.createElement(Di,{onFinish:function(){a(!1),c(!0)}}))),r.createElement(y.MobileWrapper,null,r.createElement(y.MobileDialog,{portal_element_id:"deriv_app",title:e,wrapper_classname:"verification-modal",visible:i,onClose:function(){return a(!1)}},r.createElement(Di,{onFinish:function(){a(!1),c(!0)}}))))}));var Fi=r.lazy((function(){return(0,l.moduleLoader)((function(){return n.e(1301).then(n.bind(n,95302))}))})),Ui=r.lazy((function(){return(0,l.moduleLoader)((function(){return n.e(1708).then(n.bind(n,34988))}))})),Wi=r.lazy((function(){return n.e(1708).then(n.bind(n,27439))})),Bi=r.lazy((function(){return(0,l.moduleLoader)((function(){return n.e(2871).then(n.bind(n,57902))}))})),Gi=r.lazy((function(){return(0,l.moduleLoader)((function(){return n.e(6530).then(n.bind(n,3216))}))})),Vi=r.lazy((function(){return n.e(9418).then(n.bind(n,91991))})),Yi=r.lazy((function(){return n.e(3973).then(n.bind(n,22643))})),Hi=r.lazy((function(){return n.e(9109).then(n.bind(n,84477))})),qi=r.lazy((function(){return n.e(3499).then(n.bind(n,90438))})),Ki=r.lazy((function(){return n.e(6534).then(n.bind(n,58489))})),Zi=r.lazy((function(){return n.e(2634).then(n.bind(n,13029))})),$i=r.lazy((function(){return n.e(903).then(n.bind(n,33026))})),Ji=r.lazy((function(){return n.e(7929).then(n.bind(n,83911))}));const Xi=(0,u.observer)((function(){var e=(0,u.useStore)(),t=e.client,n=e.ui,o=e.traders_hub,i=t.is_logged_in,a=t.fetchFinancialAssessment,c=t.setCFDScore,s=t.landing_company_shortcode,d=t.is_trading_experience_incomplete,_=o.is_mt5_notification_modal_visible,f=o.content_flag,p=n.is_account_needed_modal_on,h=n.is_closing_create_real_account_modal,m=n.is_set_residence_modal_visible,g=n.should_show_cooldown_modal,v=n.should_show_assessment_complete_modal,y=n.toggleAccountSignupModal,b=n.is_trading_assessment_for_new_user_enabled,w=n.is_deriv_account_needed_modal_visible,E=n.is_warning_scam_message_modal_visible,k=n.is_ready_to_deposit_modal_visible,S=n.is_need_real_account_for_cashier_modal_visible,x=n.should_show_risk_accept_modal,O=n.is_additional_kyc_info_modal_open,A=n.is_kyc_information_submitted_modal_open,L=n.is_verification_modal_visible,C=n.is_verification_submitted,P=n.should_show_one_time_deposit_modal,N=n.should_show_account_success_modal,T=l.SessionStore.get("signup_query_param"),I=new URLSearchParams((0,j.useLocation)().search||T).get("action"),z=[l.ContentFlag.LOW_RISK_CR_EU,l.ContentFlag.EU_REAL,l.ContentFlag.EU_DEMO].includes(f);r.useEffect((function(){i&&a().then((function(e){var t;c(null!==(t=null==e?void 0:e.cfd_score)&&void 0!==t?t:0)}))}),[i]),T&&window.location.href.includes(l.routes.onboarding)?y(!0):(l.SessionStore.remove("signup_query_param"),y(!1));var M=null;switch(I){case"redirect_to_login":M=r.createElement(Bi,null);break;case"reset_password":M=r.createElement(Ui,null);break;case"signup":M=r.createElement(Fi,null);break;case"request_email":M=r.createElement(Vi,null);break;case"social_email_change":M=r.createElement(Wi,null);break;case"system_email_change":M=r.createElement(Yi,null);break;default:m&&(M=r.createElement(Gi,null))}return i&&"maltainvest"===s&&!b&&d&&f!==l.ContentFlag.LOW_RISK_CR_EU&&f!==l.ContentFlag.LOW_RISK_CR_NON_EU?M=r.createElement(Pi,null):E?M=r.createElement(Hi,null):h?M=r.createElement(qi,null):p?M=r.createElement(ri,null):g?M=r.createElement(li,null):_?M=r.createElement(di,null):v?M=r.createElement(ci,null):w?M=r.createElement(ni,null):x&&(M=r.createElement(gi,null)),k&&(M=r.createElement(mi,null)),S&&(M=r.createElement(hi,null)),L&&(M=r.createElement(Ri,null)),C&&(M=r.createElement(Ki,null)),P&&(M=r.createElement(Zi,null)),N&&(M=r.createElement(si,null)),O&&(M=r.createElement($i,null)),A&&(M=r.createElement(Ji,null)),r.createElement(r.Fragment,null,r.createElement(ai,{is_logged_in:i,is_eu:z,portal_id:"popup_root"}),M?r.createElement(r.Suspense,{fallback:r.createElement("div",null)},M):null)}));function Qi(){return Qi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qi.apply(this,arguments)}function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ta(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var na="is_appstore";const ra=function(e){var t="true"===window.localStorage.getItem(na),n=ea(r.useState(t),2),o={is_appstore:n[0],setIsAppStore:n[1],DERIV_APPSTORE_KEY:na};return r.createElement(l.PlatformContext.Provider,Qi({value:o},e))};var oa=n(23942);function ia(e){return ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ia(e)}function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){sa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ia(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ia(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ia(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var la=n.n(oa)()({loader:function(){return Promise.resolve().then(n.bind(n,46121))},loading:y.UILoader,render:function(e,t){var n=e.default;return r.createElement(n,t)}}),ua=(0,u.observer)((function(e){var t=e.history,n=e.location,o=e.passthrough,i=(0,u.useStore)(),a=i.client,c=i.common,s=a.is_logged_in,_=a.is_logging_in,f=c.error,p=c.has_error,h=c.setAppRouterHistory,m=c.addRouteHistoryItem,g=c.setInitialRouteHistoryItem,v=r.useRef(null),y=r.useRef(null);r.useEffect((function(){return y.current||v.current||(v.current=n.pathname),g(t.location),y.current=t.listen((function(e,t){["PUSH","POP"].includes(t)&&m(ca(ca({},e),{},{action:t}))})),h(t),function(){"function"==typeof y.current&&(y.current(),y.current=null,v.current=null)}}),[]);var b=(0,d.getLanguage)(),w=/[?&]lang=/.test(n.search);return p?r.createElement(la,f):((!w&&"EN"!==b||w&&"EN"===b)&&window.history.replaceState({},document.title,(0,l.urlForLanguage)(b)),r.createElement(Y.ZP,{is_logged_in:s,is_logging_in:_,passthrough:o}))}));ua.propTypes={history:p().object,location:p().object,passthrough:p().object};const da=(0,j.withRouter)(ua);var _a=["key","content"];function fa(){return fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fa.apply(this,arguments)}function pa(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const ha=(0,u.observer)((function(){var e=(0,u.useStore)().ui,t=e.toasts,n=e.removeToast;if(0===t.length)return null;var o=t.filter((function(e){return!e.is_bottom})),i=t.filter((function(e){return e.is_bottom})),a=function(e){var t=e.key,o=e.content,i=pa(e,_a);return r.createElement(y.Toast,fa({key:t},i,{onClose:function(){return n(t)}}),o)},c=r.createElement(y.Div100vhContainer,{className:"toast-messages",height_offset:"15px"},r.createElement("div",{className:"toast-messages__top"},o.map(a)),r.createElement("div",{className:"toast-messages__bottom"},i.map(a)));return Ke.createPortal(c,document.getElementById("popup_root"))}));function ma(e){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return va(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){wa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ma(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ma(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ma(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ea.apply(this,arguments)}var ka=(0,u.observer)((function(){var e=(0,Vt.useFormik)({initialValues:{app_id:(0,l.getAppId)(),server:(0,l.getSocketURL)(),is_debug_service_worker_enabled:!!(0,l.getDebugServiceWorker)()},onSubmit:function(e){localStorage.setItem("config.app_id",e.app_id.toString()),localStorage.setItem("config.server_url",e.server),localStorage.setItem("debug_service_worker",(e.is_debug_service_worker_enabled?1:0).toString()),sessionStorage.removeItem("config.platform"),location.reload()},validate:function(e){var t={};return e.app_id?/^\d+$/.test(e.app_id.toString())||(t.app_id="Please enter a valid app ID."):t.app_id="App ID is required.",e.server?/^[\w|\-|.]+$/.test(e.server)||(t.server="Please enter a valid server."):t.server="Server is required.",t}});return r.createElement("div",{className:"devtools__endpoint-container"},r.createElement(y.Input,Ea({type:"text",autoComplete:"off",maxLength:30,error:e.touched.server?e.errors.server:void 0,label:"Server",hint:"e.g. frontend.derivws.com"},e.getFieldProps("server"))),r.createElement(y.Input,Ea({type:"text",autoComplete:"off",maxLength:30,error:e.touched.app_id?e.errors.app_id:void 0,label:"OAuth App ID",hint:r.createElement(r.Fragment,null,"Register an"," ",r.createElement("a",{href:"https://developers.binary.com/applications/",target:"_blank",rel:"noopener noreferrer"},"app ID")," ","to use the above server for logging in.")},e.getFieldProps("app_id"))),r.createElement(y.Checkbox,Ea({classNameLabel:"devtools__checkbox-label",label:"Enable Service Worker registration for this URL"},e.getFieldProps("is_debug_service_worker_enabled"))),r.createElement("div",{className:"devtools__endpoint-actions"},r.createElement(y.Button,{type:"submit",is_disabled:!e.isValid||!e.dirty,text:"Submit",primary:!0,onClick:function(){return e.handleSubmit()}}),r.createElement(y.Button,{type:"button",onClick:function(){localStorage.removeItem("config.app_id"),localStorage.removeItem("config.server_url"),location.reload()},text:"Reset to original settings"})))})),Sa=(0,u.observer)((function(){var e=(0,u.useStore)().feature_flags;return e.data?r.createElement("div",{className:"devtools__checkbox-container"},Object.keys(e.data).map((function(t){var n,o=t;return r.createElement(y.Checkbox,{key:o,className:"devtools__checkbox",classNameLabel:"devtools__checkbox-label",label:o,value:null===(n=e.data)||void 0===n?void 0:n[o],onChange:function(t){return e.update((function(e){return ba(ba({},e),{},wa({},o,t.target.checked))}))}})}))):null}));(0,u.observer)((function(){var e=ga((0,r.useState)(!1),2),t=e[0],n=e[1];return r.createElement("div",null,r.createElement("div",{className:"devtools__panel devtools__panel".concat(t?"--open":"--close")},r.createElement("div",{className:"devtools__panel-left"},r.createElement("p",{className:"devtools__panel-title"},"Endpoint"),r.createElement(ka,null)),r.createElement("div",{className:"devtools__panel-right"},r.createElement("p",{className:"devtools__panel-title"},"Feature flags"),r.createElement(Sa,null)),r.createElement("button",{onClick:function(){return n(!t)},className:"devtools__close-button"},"Close")),r.createElement("button",{onClick:function(){return n(!t)},className:"devtools__toggle-button"},"</>"))}));const xa=function(){return null};const Oa=(0,u.observer)((function(e){var t=e.passthrough,n=(0,b.useFeatureFlags)().is_next_wallet_enabled,o=(0,u.useStore)();return r.createElement(ra,null,r.createElement(ti,null),r.createElement(P,{root_store:o},r.createElement(W,null,r.createElement(da,{passthrough:t}))),r.createElement(y.DesktopWrapper,null,r.createElement(De,null)),r.createElement(P,{root_store:o},r.createElement(Xi,null)),r.createElement(E,null),r.createElement(w,null),r.createElement(ha,null),n&&r.createElement(xa,null))}));var Aa=n(19792);function La(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pa=function(e){var t=e.root_store,i=window.location,c=i.pathname.split("/")[1],f=/^\/(br_)/.test(i.pathname),p=La((0,l.useOnLoadTranslation)(),1)[0];r.useEffect((function(){t.modules.attachModule("cashier",new(a())(t,_.Z)),t.modules.cashier.general_store.init()}),[]);r.useEffect((function(){t.modules.attachModule("cfd",new(s())({root_store:t,WS:_.Z}))}),[]),r.useEffect((function(){(0,d.initializeTranslations)(),(0,l.setUrlLanguage)((0,d.getLanguage)()),(0,l.initFormErrorMessages)(v),(0,l.setSharedCFDText)(g),t.common.setPlatform(),n.e(6408).then(n.bind(n,96408))}),[]),r.useEffect((function(){(0,Aa.Z)(t.client)}),[]);var h={root_store:t,WS:_.Z};return(0,l.setWebsocket)(_.Z),r.useEffect((function(){t.client.email||I.Analytics.reset()}),[t.client.email]),r.createElement(r.Fragment,null,p?r.createElement(m.BrowserRouter,{basename:f?"/".concat(c):null},r.createElement(u.StoreProvider,{store:t},r.createElement(o.APIProvider,null,r.createElement(l.POIProvider,null,r.createElement(u.StoreProvider,{store:t},r.createElement(u.ExchangeRatesProvider,null,r.createElement(Oa,{passthrough:h}))))))):r.createElement(r.Fragment,null))};Pa.propTypes={root_store:p().object};const Na=(0,h.Z)()(Pa)},61823:(e,t,n)=>{n.d(t,{Z:()=>ro});var r,o,i=n(31025),a=n(34113),c=n.n(a),s=n(42671);const l=(o=(0,i.action)((function(e,t){r&&r.setNetworkStatus(e,t)})),{init:function(e){c().init(s.j.init(e),o,e.client),r=e.common}});var u,d=n(49189),_=n.n(d),f=n(53806),p=n.n(f),h=n(68722),m=n(77178),g=n(44850),v=n(82714),y=function(e){var t;return/^VR/.test(e)?t="virtual":/^MF/.test(e)?t="financial":/^MLT|MX/.test(e)&&(t="gaming"),t},b={get:function(){return u||(u={default:(0,g.localize)("Real"),financial:(0,g.localize)("Investment"),gaming:(0,g.localize)("Gaming"),virtual:(0,g.localize)("Virtual")}),u}},w=function(e){return"all"===e?"all":"financial"},E=function(e,t){var n=function(e){return new h.CookieStorage(e.includes("utm")?"utm_data":e)}(e);return n.get(e)||n.set(e,t),n};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function O(){O=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new A(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(L([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==x(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function A(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){A(i,r,o,a,c,"next",e)}function c(e){A(i,r,o,a,c,"throw",e)}a(void 0)}))}}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function j(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}var I=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,i.makeObservable)(this,{validation_errors:i.observable,validation_rules:i.observable,partial_fetch_time:i.observable,retrieveFromStorage:i.action,setValidationErrorMessages:i.action,setValidationRules:i.action,addRule:i.action,validateProperty:i.action,validateAllProperties:i.action,onSwitchAccount:i.action.bound,onPreSwitchAccount:i.action.bound,onLogout:i.action.bound,onClientInit:i.action.bound,onNetworkStatusChange:i.action.bound,onThemeChange:i.action.bound,onRealAccountSignupEnd:i.action.bound,disposePreSwitchAccount:i.action.bound,disposeSwitchAccount:i.action.bound,disposeLogout:i.action.bound,disposeClientInit:i.action.bound,disposeNetworkStatusChange:i.action.bound,disposeThemeChange:i.action.bound,disposeRealAccountSignupEnd:i.action.bound,onUnmount:i.action.bound,assertHasValidCache:i.action.bound});var r=n.root_store,o=n.local_storage_properties,a=n.session_storage_properties,c=n.validation_rules,s=n.store_name;if(Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0}),o&&o.length||a&&a.length){if(!s)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:s,enumerable:!1,writable:!1})}this.root_store=r,this.local_storage_properties=o||[],this.session_storage_properties=a||[],setTimeout((function(){t.setValidationRules(c),t.setupReactionForLocalStorage(),t.setupReactionForSessionStorage(),t.retrieveFromStorage()}),0)}var t,n,r;return t=e,n=[{key:"getSnapshot",value:function(e){var t=(0,i.toJS)(this);return(0,h.isEmptyObject)(this.root_store)||(t.root_store=this.root_store),e&&e.length&&(t=e.reduce((function(e,n){return Object.assign(e,N({},n,t[n]))}),{})),t}},{key:"setupReactionForLocalStorage",value:function(){var t=this;this.local_storage_properties.length&&(0,i.reaction)((function(){return t.local_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.local_storage_properties,e.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var t=this;this.session_storage_properties.length&&(0,i.reaction)((function(){return t.session_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.session_storage_properties,e.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(t,n){var r=JSON.stringify(this.getSnapshot(t),(function(e,t){if(null!==t)return t}));n===e.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,r):n===e.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,r)}},{key:"retrieveFromStorage",value:function(){var e=this,t=JSON.parse(localStorage.getItem(this.store_name,{})),n=JSON.parse(sessionStorage.getItem(this.store_name,{})),r=P(P({},t),n);Object.keys(r).forEach((function(t){return e[t]=r[t]}))}},{key:"setValidationErrorMessages",value:function(e,t){var n=this;this.validation_errors[e]&&!n.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!n.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"setValidationRules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){e.addRule(n,t[n])}))}},{key:"addRule",value:function(e,t){var n=this;this.validation_rules[e]=t,(0,i.intercept)(this,e,(function(t){return n.validateProperty(e,t.newValue),t}))}},{key:"validateProperty",value:function(e,t){var n=this,r=this.validation_rules[e].trigger,o=N({},e,void 0!==t?t:this[e]),i=N({},e,this.validation_rules[e].rules||[]);r&&Object.hasOwnProperty.call(this,r)&&(o[r]=this[r],i[r]=this.validation_rules[r].rules||[]);var a=new h.Validator(o,i,this);a.isPassed(),Object.keys(o).forEach((function(e){n.setValidationErrorMessages(e,a.errors.get(e))}))}},{key:"validateAllProperties",value:function(){var e=this,t=Object.keys(this.validation_rules),n=Object.keys(this.validation_errors);t.forEach((function(t){e.validateProperty(t,e[t])})),n.forEach((function(n){t.includes(n)||delete e.validation_errors[n]}))}},{key:"onSwitchAccount",value:function(e){var t=this;e&&(this.switch_account_listener=e,this.switchAccountDisposer=(0,i.when)((function(){return t.root_store.client.switch_broadcast}),L(O().mark((function e(){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.switch_account_listener())||!n.then||"function"!=typeof n.then){e.next=6;break}n.then((function(){t.root_store.client.switchEndSignal(),t.onSwitchAccount(t.switch_account_listener)})),e.next=7;break;case 6:throw new Error("Switching account listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,h.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))))}},{key:"onPreSwitchAccount",value:function(e){var t=this;e&&(this.pre_switch_account_listener=e,this.preSwitchAccountDisposer=(0,i.when)((function(){return t.root_store.client.pre_switch_broadcast}),L(O().mark((function e(){var n,r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=null===(n=t.pre_switch_account_listener)||void 0===n?void 0:n.call(t))||!r.then||"function"!=typeof r.then){e.next=6;break}r.then((function(){t.root_store.client.setPreSwitchAccount(!1),t.onPreSwitchAccount(t.pre_switch_account_listener)})),e.next=7;break;case 6:throw new Error("Pre-switch account listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,h.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))))}},{key:"onLogout",value:function(e){var t=this;this.logoutDisposer=(0,i.when)((function(){return t.root_store.client.has_logged_out}),L(O().mark((function e(){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.logout_listener())||!n.then||"function"!=typeof n.then){e.next=6;break}n.then((function(){t.root_store.client.setLogout(!1),t.onLogout(t.logout_listener)})),e.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,h.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.logout_listener=e}},{key:"onClientInit",value:function(e){var t=this;this.clientInitDisposer=(0,i.when)((function(){return t.root_store.client.initialized_broadcast}),L(O().mark((function e(){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.client_init_listener())||!n.then||"function"!=typeof n.then){e.next=6;break}n.then((function(){t.root_store.client.setInitialized(!1),t.onClientInit(t.client_init_listener)})),e.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,h.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.client_init_listener=e}},{key:"onNetworkStatusChange",value:function(e){var t=this;this.networkStatusChangeDisposer=(0,i.reaction)((function(){return t.root_store.common.is_network_online}),(function(e){try{t.network_status_change_listener(e)}catch(e){(0,h.isProduction)()||console.error(e)}})),this.network_status_change_listener=e}},{key:"onThemeChange",value:function(e){var t=this;this.themeChangeDisposer=(0,i.reaction)((function(){return t.root_store.ui.is_dark_mode_on}),(function(e){try{t.theme_change_listener(e)}catch(e){(0,h.isProduction)()||console.error(e)}})),this.theme_change_listener=e}},{key:"onRealAccountSignupEnd",value:function(e){var t=this;this.realAccountSignupEndedDisposer=(0,i.when)((function(){return t.root_store.ui.has_real_account_signup_ended}),(function(){try{var e=t.real_account_signup_ended_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Real account signup listeners are required to return a promise.");e.then((function(){t.root_store.ui.setRealAccountSignupEnd(!1),t.onRealAccountSignupEnd(t.real_account_signup_ended_listener)}))}catch(e){(0,h.isProduction)()||console.error(e)}})),this.real_account_signup_ended_listener=e}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(e){if(this.root_store.client.loginid!==e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(e){return e()})),this.partial_fetch_time=!1}}}],n&&T(t.prototype,n),r&&T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();I.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var z=n(42830),M=n.n(z),D=n(72720),R=n(82886);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}var U=["document_number","document_type","document_additional"];function W(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function B(){B=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==F(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function G(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){G(i,r,o,a,c,"next",e)}function c(e){G(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Y(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return(t=J(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function J(e){var t=function(e,t){if("object"!==F(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===F(t)?t:String(t)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}(this,n)}}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}var ne="i18n_language",re="client.accounts",oe=new RegExp("^(maltainvest|malta|iom)$"),ie=new RegExp("^mt$"),ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(z,e);var t,n,r,o,a,c,l,u,d,f,k,x,O,A,L,C,P,N,T,j,I=Q(z);function z(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,z);return(t=I.call(this,{root_store:e,local_storage_properties:["device_data"],store_name:"client_store"})).loginid=void 0,t.preferred_language=void 0,t.upgrade_info=void 0,t.email=void 0,t.accounts={},t.trading_platform_available_accounts=[],t.pre_switch_broadcast=!1,t.switched="",t.is_switching=!1,t.switch_broadcast=!1,t.initialized_broadcast=!1,t.currencies_list={},t.residence_list=[],t.states_list=[],t.citizen="",t.selected_currency="",t.is_populating_account_list=!1,t.is_populating_mt5_account_list=!0,t.is_populating_dxtrade_account_list=!0,t.website_status={},t.account_settings={},t.account_status={},t.device_data={},t.is_authorize=!1,t.is_logging_in=!1,t.has_logged_out=!1,t.is_landing_company_loaded=!1,t.is_account_setting_loaded=!1,t.has_enabled_two_fa=!1,t.has_changed_two_fa=!1,t.landing_companies={},t.standpoint={iom:!1,svg:!1,malta:!1,maltainvest:!1,gaming_company:!1,financial_company:!1},t.upgradeable_landing_companies=[],t.mt5_disabled_signup_types={real:!1,demo:!1},t.mt5_login_list=[],t.mt5_login_list_error=null,t.dxtrade_accounts_list=[],t.ctrader_accounts_list=[],t.dxtrade_accounts_list_error=null,t.dxtrade_disabled_signup_types={real:!1,demo:!1},t.statement=[],t.obj_total_balance={amount_real:void 0,amount_mt5:void 0,amount_dxtrade:void 0,currency:""},t.verification_code={signup:"",reset_password:"",payment_withdraw:"",payment_agent_withdraw:"",trading_platform_mt5_password_reset:"",trading_platform_dxtrade_password_reset:"",request_email:"",social_email_change:"",system_email_change:""},t.new_email={system_email_change:"",social_email_change:""},t.account_limits={},t.self_exclusion={},t.local_currency_config={currency:"",decimal_places:void 0},t.has_cookie_account=!1,t.financial_assessment=null,t.mt5_trading_servers=[],t.dxtrade_trading_servers=[],t.is_cfd_poi_completed=!1,t.cfd_score=0,t.is_mt5_account_list_updated=!1,t.prev_real_account_loginid="",t.p2p_advertiser_info={},t.prev_account_type="demo",t.external_url_params={},t.is_already_attempted=!1,t.hasAnyRealAccount=function(){return t.account_list.some((function(e){return 0===e.is_virtual}))},t.hasAccountErrorInCFDList=function(e,n){var r,o;if(!t.is_logged_in)return!1;switch(e){case h.CFD_PLATFORMS.MT5:o=t.mt5_login_list;break;case h.CFD_PLATFORMS.DXTRADE:o=t.dxtrade_accounts_list;break;default:return!1}return null===(r=o)||void 0===r?void 0:r.some((function(e){return!!e.has_error&&e.account_type===n}))},t.setExternalParams=function(e){t.external_url_params=e},t.redirectToLegacyPlatform=function(){var e=t.external_url_params,n=e.url;e.should_redirect&&window.location.replace(n)},t.getIsMarketTypeMatching=function(e,t){return"synthetic"===t?e.market_type===t||"gaming"===e.market_type:"all"===t?"all"===e.market_type:"financial"===e.market_type},t.isMT5Allowed=function(e){return!e||!Object.keys(e).length||!(!t.mt5_login_list.some((function(e){return"synthetic"===e.market_type}))&&(t.country_standpoint.is_belgium||t.country_standpoint.is_france))&&("mt_financial_company"in e||"mt_gaming_company"in e)},t.isDxtradeAllowed=function(e){var n;return!(!t.is_logged_in&&t.is_eu_country||t.is_logged_in&&t.root_store.traders_hub.show_eu_related_content)&&(!(null!==(n=t.website_status)&&void 0!==n&&n.clients_country&&e&&Object.keys(e).length)||("dxtrade_financial_company"in e||"dxtrade_gaming_company"in e||"dxtrade_all_company"in e||!t.is_logged_in&&!t.is_eu&&!t.is_eu_country))},t.isBotAllowed=function(){if(!t.is_logged_in&&t.is_eu_country)return!1;var e="maltainvest"===t.landing_company_shortcode;return t.is_virtual?t.is_eu_or_multipliers_only:!e&&!t.is_options_blocked},t.setPreferredLanguage=function(e){t.preferred_language=e,h.LocalStore.setObject(ne,e)},t.isEuCountrySelected=function(e){return!!e&&(0,R.isEuCountry)(e)},t.isAccountOfType=function(e){var n=y(t.loginid);return("virtual"===e&&"virtual"===n||"real"===e&&"virtual"!==n||e===n)&&!t.isDisabled()},t.isAccountOfTypeDisabled=function(e){var n=t.account_list.filter((function(t){return y(t.loginid)===e}));return n.length>0&&n.every((function(e){return e.is_disabled}))},t.shouldCompleteTax=function(){var e;return!!t.isAccountOfType("financial")&&!/crs_tin_information/.test(null===(e=t.account_status||{})||void 0===e?void 0:e.status)},t.setPrevRealAccountLoginid=function(e){t.prev_real_account_loginid=e},t.setPrevAccountType=function(e){t.prev_account_type=e},(0,i.makeObservable)(ee(t),{loginid:i.observable,external_url_params:i.observable,setExternalParams:i.action.bound,redirectToLegacyPlatform:i.action.bound,preferred_language:i.observable,upgrade_info:i.observable,email:i.observable,accounts:i.observable,trading_platform_available_accounts:i.observable,pre_switch_broadcast:i.observable,switched:i.observable,is_switching:i.observable,switch_broadcast:i.observable,initialized_broadcast:i.observable,currencies_list:i.observable,residence_list:i.observable,states_list:i.observable,citizen:i.observable,selected_currency:i.observable,is_populating_account_list:i.observable,is_populating_mt5_account_list:i.observable,is_populating_dxtrade_account_list:i.observable,website_status:i.observable,account_settings:i.observable,account_status:i.observable,device_data:i.observable,is_authorize:i.observable,is_logging_in:i.observable,has_logged_out:i.observable,is_landing_company_loaded:i.observable,is_account_setting_loaded:i.observable,has_enabled_two_fa:i.observable,has_changed_two_fa:i.observable,landing_companies:i.observable,standpoint:i.observable,upgradeable_landing_companies:i.observable,mt5_disabled_signup_types:i.observable,mt5_login_list:i.observable,mt5_login_list_error:i.observable,dxtrade_accounts_list:i.observable,ctrader_accounts_list:i.observable,dxtrade_accounts_list_error:i.observable,dxtrade_disabled_signup_types:i.observable,statement:i.observable,cfd_score:i.observable,obj_total_balance:i.observable,verification_code:i.observable,new_email:i.observable,account_limits:i.observable,self_exclusion:i.observable,local_currency_config:i.observable,has_cookie_account:i.observable,financial_assessment:i.observable,mt5_trading_servers:i.observable,dxtrade_trading_servers:i.observable,is_cfd_poi_completed:i.observable,prev_real_account_loginid:i.observable,p2p_advertiser_info:i.observable,prev_account_type:i.observable,is_already_attempted:i.observable,balance:i.computed,account_open_date:i.computed,is_svg:i.computed,has_active_real_account:i.computed,has_maltainvest_account:i.computed,has_any_real_account:i.computed,first_switchable_real_loginid:i.computed,can_change_fiat_currency:i.computed,legal_allowed_currencies:i.computed,upgradeable_currencies:i.computed,current_currency_type:i.computed,available_crypto_currencies:i.computed,has_fiat:i.computed,current_fiat_currency:i.computed,current_landing_company:i.computed,account_list:i.computed,has_real_mt5_login:i.computed,has_real_dxtrade_login:i.computed,has_account_error_in_mt5_real_list:i.computed,has_account_error_in_mt5_demo_list:i.computed,has_account_error_in_dxtrade_real_list:i.computed,has_account_error_in_dxtrade_demo_list:i.computed,active_accounts:i.computed,all_loginids:i.computed,account_title:i.computed,currency:i.computed,is_crypto:i.action.bound,default_currency:i.computed,should_allow_authentication:i.computed,should_allow_poinc_authentication:i.computed,is_financial_assessment_incomplete:i.computed,is_financial_assessment_needed:i.computed,is_authentication_needed:i.computed,is_identity_verification_needed:i.computed,is_poa_expired:i.computed,real_account_creation_unlock_date:i.computed,is_tnc_needed:i.computed,is_social_signup:i.computed,isEligibleForMoreDemoMt5Svg:i.action.bound,isEligibleForMoreRealMt5:i.action.bound,setIsCfdPoiCompleted:i.action.bound,setCitizen:i.action.bound,is_mt5_password_not_set:i.computed,is_dxtrade_password_not_set:i.computed,is_financial_information_incomplete:i.computed,is_deposit_lock:i.computed,is_withdrawal_lock:i.computed,is_trading_experience_incomplete:i.computed,authentication_status:i.computed,social_identity_provider:i.computed,is_from_restricted_country:i.computed,is_fully_authenticated:i.computed,is_pending_authentication:i.computed,is_financial_account:i.computed,is_age_verified:i.computed,landing_company_shortcode:i.computed,landing_company:i.computed,is_valid_login:i.computed,is_logged_in:i.computed,has_restricted_mt5_account:i.computed,has_mt5_account_with_rejected_poa:i.computed,should_restrict_bvi_account_creation:i.computed,should_restrict_vanuatu_account_creation:i.computed,should_show_eu_content:i.computed,should_show_eu_error:i.computed,is_virtual:i.computed,is_eu:i.computed,is_uk:i.computed,is_brazil:i.computed,country_standpoint:i.computed,can_upgrade:i.computed,can_upgrade_to:i.computed,virtual_account_loginid:i.computed,is_single_currency:i.computed,account_type:i.computed,is_mt5_allowed:i.computed,is_dxtrade_allowed:i.computed,is_bot_allowed:i.computed,clients_country:i.computed,is_eu_country:i.computed,is_options_blocked:i.computed,is_multipliers_only:i.computed,is_pending_proof_of_ownership:i.computed,resetLocalStorageValues:i.action.bound,getBasicUpgradeInfo:i.action.bound,setMT5DisabledSignupTypes:i.action.bound,setCFDDisabledSignupTypes:i.action.bound,getLimits:i.action.bound,setPreferredLanguage:i.action.bound,setCookieAccount:i.action.bound,setCFDScore:i.action.bound,updateSelfExclusion:i.action.bound,responsePayoutCurrencies:i.action.bound,responseAuthorize:i.action.bound,setWebsiteStatus:i.action.bound,accountRealReaction:i.action.bound,setLoginInformation:i.action.bound,realAccountSignup:i.action.bound,setAccountCurrency:i.action.bound,updateAccountCurrency:i.action.bound,createCryptoAccount:i.action.bound,residence:i.computed,email_address:i.computed,is_website_status_ready:i.computed,updateAccountList:i.action.bound,switchAccount:i.action.bound,resetVirtualBalance:i.action.bound,switchEndSignal:i.action.bound,init:i.action.bound,resetMt5AccountListPopulation:i.action.bound,responseWebsiteStatus:i.action.bound,responseLandingCompany:i.action.bound,setStandpoint:i.action.bound,setLoginId:i.action.bound,setAccounts:i.action.bound,setSwitched:i.action.bound,setIsAuthorize:i.action.bound,setIsLoggingIn:i.action.bound,setPreSwitchAccount:i.action.bound,broadcastAccountChange:i.action.bound,switchAccountHandler:i.action.bound,registerReactions:i.action.bound,setBalanceActiveAccount:i.action.bound,setBalanceOtherAccounts:i.action.bound,selectCurrency:i.action.bound,setResidence:i.action.bound,setEmail:i.action.bound,setAccountSettings:i.action.bound,setAccountStatus:i.action.bound,updateAccountStatus:i.action.bound,setInitialized:i.action.bound,cleanUp:i.action.bound,logout:i.action.bound,setLogout:i.action.bound,storeClientAccounts:i.action.bound,setUserLogin:i.action.bound,canStoreClientAccounts:i.action.bound,setVerificationCode:i.action.bound,setNewEmail:i.action.bound,setDeviceData:i.action.bound,getSignupParams:i.action.bound,onSetResidence:i.action.bound,onSetCitizen:i.action.bound,onSignup:i.action.bound,fetchAccountSettings:i.action.bound,fetchResidenceList:i.action.bound,setResidenceList:i.action.bound,fetchStatesList:i.action.bound,resetMt5ListPopulatedState:i.action.bound,updateMt5LoginList:i.action.bound,responseMT5TradingServers:i.action.bound,responseMt5LoginList:i.action.bound,responseDxtradeTradingServers:i.action.bound,responseTradingPlatformAvailableAccounts:i.action.bound,responseTradingPlatformAccountsList:i.action.bound,responseStatement:i.action.bound,getChangeableFields:i.action.bound,syncWithLegacyPlatforms:i.action.bound,is_high_risk:i.computed,is_low_risk:i.computed,has_residence:i.computed,fetchFinancialAssessment:i.action.bound,setFinancialAndTradingAssessment:i.action.bound,setTwoFAStatus:i.action.bound,setTwoFAChangedStatus:i.action.bound,is_eu_or_multipliers_only:i.computed,getTwoFAStatus:i.action.bound,updateMT5Status:i.action.bound,isEuropeCountry:i.action.bound,setPrevRealAccountLoginid:i.action.bound,setP2pAdvertiserInfo:i.action.bound,setPrevAccountType:i.action.bound,setIsAlreadyAttempted:i.action.bound}),(0,i.reaction)((function(){return[t.is_logged_in,t.loginid,t.email,t.landing_company,t.currency,t.residence,t.account_settings,t.preferred_language]}),(function(){t.setCookieAccount()})),(0,i.reaction)((function(){return[t.account_settings]}),(function(){var e,n=(0,g.getRedirectionLanguage)(null===(e=t.account_settings)||void 0===e?void 0:e.preferred_language);window.history.replaceState({},document.title,(0,h.urlForLanguage)(n)),t.setPreferredLanguage(n),h.LocalStore.set(ne,n)})),(0,i.when)((function(){return!t.is_logged_in&&t.root_store.ui&&t.root_store.ui.is_real_acc_signup_on}),(function(){return t.root_store.ui.closeRealAccountSignup()})),t}return t=z,n=[{key:"balance",get:function(){if(!(0,h.isEmptyObject)(this.accounts))return this.accounts[this.loginid]&&"balance"in this.accounts[this.loginid]?this.accounts[this.loginid].balance.toString():void 0}},{key:"account_open_date",get:function(){if(!(0,h.isEmptyObject)(this.accounts))return Object.keys(this.accounts[this.loginid]).includes("created_at")?this.accounts[this.loginid].created_at:void 0}},{key:"is_svg",get:function(){return!!this.landing_company_shortcode&&("svg"===this.landing_company_shortcode||"costarica"===this.landing_company_shortcode)}},{key:"has_active_real_account",get:function(){return this.active_accounts.some((function(e){return 0===e.is_virtual}))}},{key:"has_maltainvest_account",get:function(){return this.active_accounts.some((function(e){return"maltainvest"===e.landing_company_shortcode}))}},{key:"has_any_real_account",get:function(){return this.hasAnyRealAccount()}},{key:"first_switchable_real_loginid",get:function(){return this.active_accounts.find((function(e){return 0===e.is_virtual&&"svg"===e.landing_company_shortcode})).loginid||void 0}},{key:"can_change_fiat_currency",get:function(){var e,t,n=!this.has_real_mt5_login,r=!this.has_real_dxtrade_login,o=0===this.statement.count&&0===this.statement.transactions.length,i=!(null!==(e=this.account_status)&&void 0!==e&&null!==(t=e.status)&&void 0!==t&&t.includes("deposit_attempt")),a=o&&n&&r&&i;return!this.is_virtual&&a&&"fiat"===this.current_currency_type}},{key:"legal_allowed_currencies",get:function(){var e=this,t=function(){var t,n,r,o,i,a;return null!==(t=e.landing_companies)&&void 0!==t&&t.gaming_company?null===(r=e.landing_companies)||void 0===r||null===(o=r.gaming_company)||void 0===o?void 0:o.legal_allowed_currencies:null!==(n=e.landing_companies)&&void 0!==n&&n.financial_company?null===(i=e.landing_companies)||void 0===i||null===(a=i.financial_company)||void 0===a?void 0:a.legal_allowed_currencies:[]};if(!this.landing_companies||!this.root_store.ui)return[];if(!this.root_store.ui.real_account_signup_target)return t();if(["set_currency","manage"].includes(this.root_store.ui.real_account_signup_target)&&this.current_landing_company)return this.current_landing_company.legal_allowed_currencies;var n="maltainvest"===this.root_store.ui.real_account_signup_target?"financial":"gaming";return this.landing_companies["".concat(n,"_company")]?this.landing_companies["".concat(n,"_company")].legal_allowed_currencies:t()}},{key:"upgradeable_currencies",get:function(){var e=this;return this.legal_allowed_currencies&&this.website_status.currencies_config?this.legal_allowed_currencies.map((function(t){return K({value:t},e.website_status.currencies_config[t])})):[]}},{key:"current_currency_type",get:function(){return"virtual"===this.account_type?"virtual":this.website_status&&this.website_status.currencies_config&&this.website_status.currencies_config[this.currency]?this.website_status.currencies_config[this.currency].type:void 0}},{key:"available_crypto_currencies",get:function(){var e=Object.values(this.accounts).reduce((function(e,t){return e.push(t.currency),e}),[]);return this.upgradeable_currencies.filter((function(t){return!e.includes(t.value)&&"crypto"===t.type}))}},{key:"has_fiat",get:function(){var e=this,t=Object.values(this.accounts).reduce((function(t,n){return n.is_virtual||n.landing_company_shortcode!==e.landing_company_shortcode||t.push(n.currency),t}),[]);return!!this.upgradeable_currencies.filter((function(e){return t.includes(e.value)&&"fiat"===e.type})).length}},{key:"current_fiat_currency",get:function(){var e=Object.values(this.accounts).reduce((function(e,t){return t.is_virtual||e.push(t.currency),e}),[]);return this.has_fiat?this.upgradeable_currencies.filter((function(t){return e.includes(t.value)&&"fiat"===t.type}))[0].value:void 0}},{key:"current_landing_company",get:function(){var e=this,t=this.landing_companies&&Object.keys(this.landing_companies).find((function(t){var n;return(null===(n=e.landing_companies[t])||void 0===n?void 0:n.shortcode)===e.landing_company_shortcode}));return t?this.landing_companies[t]:void 0}},{key:"account_list",get:function(){var e=this;return this.all_loginids.map((function(t){return e.getAccountInfo(t)})).filter((function(e){return e}))}},{key:"has_real_mt5_login",get:function(){return this.mt5_login_list.some((function(e){return"real"===e.account_type}))}},{key:"has_real_dxtrade_login",get:function(){return this.dxtrade_accounts_list.some((function(e){return"real"===e.account_type}))}},{key:"has_real_ctrader_login",get:function(){return this.ctrader_accounts_list.some((function(e){return"real"===e.account_type}))}},{key:"has_account_error_in_mt5_real_list",get:function(){return this.hasAccountErrorInCFDList(h.CFD_PLATFORMS.MT5,"real")}},{key:"has_account_error_in_mt5_demo_list",get:function(){return this.hasAccountErrorInCFDList(h.CFD_PLATFORMS.MT5,"demo")}},{key:"has_account_error_in_dxtrade_real_list",get:function(){return this.hasAccountErrorInCFDList(h.CFD_PLATFORMS.DXTRADE,"real")}},{key:"has_account_error_in_dxtrade_demo_list",get:function(){return this.hasAccountErrorInCFDList(h.CFD_PLATFORMS.DXTRADE,"demo")}},{key:"active_accounts",get:function(){return this.accounts instanceof Object?Object.values(this.accounts).filter((function(e){return!e.is_disabled})):[]}},{key:"all_loginids",get:function(){return(0,h.isEmptyObject)(this.accounts)?[]:Object.keys(this.accounts)}},{key:"account_title",get:function(){return e=this.loginid,(t=b.get())[y(e)]||t.default;var e,t}},{key:"currency",get:function(){return this.selected_currency.length?this.selected_currency:this.is_logged_in?this.accounts[this.loginid].currency:this.default_currency}},{key:"is_crypto",value:function(e){return(0,h.isCryptocurrency)(e||this.currency)}},{key:"default_currency",get:function(){if(Object.keys(this.currencies_list).length>0){var e,t=Object.keys(this.currencies_list);return(null===(e=this.currencies_list[(0,g.localize)("Fiat")])||void 0===e?void 0:e.length)<1?"USD":Object.values(this.currencies_list["".concat(t[0])])[0].text}return"USD"}},{key:"should_allow_authentication",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.some((function(e){return"allow_document_upload"===e||"allow_poi_resubmission"===e}))}},{key:"should_allow_poinc_authentication",get:function(){var e,t,n;return this.is_fully_authenticated&&(null===(e=this.account_status)||void 0===e||null===(t=e.authentication)||void 0===t||null===(n=t.needs_verification)||void 0===n?void 0:n.includes("income"))}},{key:"is_financial_assessment_incomplete",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.includes("financial_assessment_not_complete")}},{key:"is_financial_assessment_needed",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.includes("financial_assessment_notification")}},{key:"is_poa_expired",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.includes("poa_expired")}},{key:"is_authentication_needed",get:function(){var e,t,n;return!this.is_fully_authenticated&&!(null===(e=this.account_status)||void 0===e||null===(t=e.authentication)||void 0===t||null===(n=t.needs_verification)||void 0===n||!n.length)}},{key:"is_identity_verification_needed",get:function(){var e,t,n=null===(e=this.account_status)||void 0===e||null===(t=e.authentication)||void 0===t?void 0:t.needs_verification;return 1===(null==n?void 0:n.length)&&(null==n?void 0:n.includes("identity"))}},{key:"real_account_creation_unlock_date",get:function(){return this.account_settings.cooling_off_expiration_date}},{key:"is_tnc_needed",get:function(){if(this.is_virtual)return!1;var e=(this.account_settings||{}).client_tnc_status,t=(this.website_status||{}).terms_conditions_version;return void 0!==e&&e!==t}},{key:"is_social_signup",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.includes("social_signup")}},{key:"is_mt5_password_not_set",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.includes("mt5_password_not_set")}},{key:"is_dxtrade_password_not_set",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.includes("dxtrade_password_not_set")}},{key:"is_financial_information_incomplete",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.some((function(e){return"financial_information_not_complete"===e}))}},{key:"is_deposit_lock",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.some((function(e){return"deposit_locked"===e}))}},{key:"is_withdrawal_lock",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.some((function(e){return"withdrawal_locked"===e}))}},{key:"is_trading_experience_incomplete",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.some((function(e){return"trading_experience_not_complete"===e}))}},{key:"authentication_status",get:function(){var e,t,n,r,o,i;return{document_status:null===(e=this.account_status)||void 0===e||null===(t=e.authentication)||void 0===t||null===(n=t.document)||void 0===n?void 0:n.status,identity_status:null===(r=this.account_status)||void 0===r||null===(o=r.authentication)||void 0===o||null===(i=o.identity)||void 0===i?void 0:i.status}}},{key:"social_identity_provider",get:function(){var e;return null===(e=this.account_status)||void 0===e?void 0:e.social_identity_provider}},{key:"is_from_restricted_country",get:function(){var e,t=this;return"DISABLED"===(null===(e=this.residence_list.find((function(e){return e.value===t.residence})))||void 0===e?void 0:e.disabled)}},{key:"is_fully_authenticated",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.some((function(e){return"authenticated"===e}))}},{key:"is_pending_authentication",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.some((function(e){return"document_under_review"===e}))}},{key:"is_financial_account",get:function(){return!!this.landing_companies&&"financial"===this.account_type}},{key:"is_age_verified",get:function(){var e,t;return null===(e=this.account_status)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.some((function(e){return"age_verification"===e}))}},{key:"landing_company_shortcode",get:function(){if(this.accounts[this.loginid])return this.accounts[this.loginid].landing_company_shortcode}},{key:"landing_company",get:function(){return this.landing_companies}},{key:"is_valid_login",get:function(){if(!this.is_logged_in)return!0;var e=new RegExp("^(MF|MFW|VRTC|VRW|MLT|CR|CRW)[0-9]+$","i");return this.all_loginids.every((function(t){return e.test(t)}))}},{key:"is_logged_in",get:function(){return!!(!(0,h.isEmptyObject)(this.accounts)&&Object.keys(this.accounts).length>0&&this.loginid&&this.accounts[this.loginid].token)}},{key:"has_restricted_mt5_account",get:function(){return!!this.mt5_login_list.filter((function(e){var t;return null==e||null===(t=e.status)||void 0===t?void 0:t.includes("poa_failed")})).length}},{key:"has_mt5_account_with_rejected_poa",get:function(){return!!this.mt5_login_list.filter((function(e){var t;return null==e||null===(t=e.status)||void 0===t?void 0:t.includes("poa_rejected")})).length}},{key:"should_restrict_bvi_account_creation",get:function(){return!!this.mt5_login_list.filter((function(e){return"bvi"===(null==e?void 0:e.landing_company_short)&&"poa_failed"===(null==e?void 0:e.status)})).length}},{key:"should_restrict_vanuatu_account_creation",get:function(){return!!this.mt5_login_list.filter((function(e){return"vanuatu"===(null==e?void 0:e.landing_company_short)&&"poa_failed"===(null==e?void 0:e.status)})).length}},{key:"should_show_eu_content",get:function(){var e="maltainvest"===this.landing_company_shortcode;return!this.is_logged_in&&this.is_eu_country||this.is_eu||e}},{key:"should_show_eu_error",get:function(){return!!this.is_landing_company_loaded&&this.is_eu&&!this.is_low_risk}},{key:"is_virtual",get:function(){return!(0,h.isEmptyObject)(this.accounts)&&this.accounts[this.loginid]&&!!this.accounts[this.loginid].is_virtual}},{key:"is_eu",get:function(){if(!this.landing_companies)return!1;var e=this.landing_companies,t=e.gaming_company,n=e.financial_company,r=e.mt_gaming_company,o=null==n?void 0:n.shortcode,i=null==t?void 0:t.shortcode,a=(null==r?void 0:r.financial.shortcode)||(null==r?void 0:r.swap_free.shortcode);return"maltainvest"===this.landing_company_shortcode||(o||i||a?oe.test(o)&&"svg"!==i||oe.test(i):ie.test(this.residence))}},{key:"is_brazil",get:function(){return"br"===this.clients_country}},{key:"is_uk",get:function(){return"gb"===this.residence}},{key:"country_standpoint",get:function(){var e={is_united_kingdom:this.is_uk,is_isle_of_man:"im"===this.residence,is_france:"fr"===this.residence,is_belgium:"be"===this.residence,is_other_eu:"de"===this.residence||"es"===this.residence||"it"===this.residence||"lu"===this.residence||"gr"===this.residence};return e.is_rest_of_eu=this.is_eu&&!e.is_uk&&!e.is_france&&!e.is_belgium&&!e.is_other_eu,e}},{key:"can_upgrade",get:function(){return this.upgrade_info&&(this.upgrade_info.can_upgrade||this.upgrade_info.can_open_multi)}},{key:"can_upgrade_to",get:function(){return this.upgrade_info&&this.upgrade_info.can_upgrade_to}},{key:"virtual_account_loginid",get:function(){var e=this;return this.all_loginids.find((function(t){return!!e.accounts[t].is_virtual}))}},{key:"is_single_currency",get:function(){var e=this;return 1===Object.keys(this.currencies_list).map((function(t){return Object.values(e.currencies_list[t]).length})).reduce((function(e,t){return e+t}),0)}},{key:"account_type",get:function(){return y(this.loginid)}},{key:"is_mt5_allowed",get:function(){return this.isMT5Allowed(this.landing_companies)}},{key:"is_dxtrade_allowed",get:function(){return this.isDxtradeAllowed(this.landing_companies)}},{key:"is_bot_allowed",get:function(){return this.isBotAllowed()}},{key:"isEligibleForMoreDemoMt5Svg",value:function(e){var t=this,n="synthetic"===e,r=w(e),o=this.mt5_login_list.filter((function(n){return"demo"===n.account_type&&t.getIsMarketTypeMatching(n,e)})),i=this.trading_platform_available_accounts.some((function(e){return(n?"gaming":r)===e.market_type&&"svg"===e.shortcode})),a=o.every((function(e){return!("svg"===e.landing_company_short)}));return i&&a}},{key:"isEligibleForMoreRealMt5",value:function(e){var t=this,n="synthetic"===e,r=w(e),o=this.mt5_login_list.filter((function(n){return"real"===n.account_type&&t.getIsMarketTypeMatching(n,e)}));return!this.trading_platform_available_accounts.filter((function(e){return(n?"gaming":r)===e.market_type&&"maltainvest"!==e.shortcode})).map((function(e){return e.shortcode})).every((function(e){return o.some((function(t){return t.landing_company_short===e}))}))}},{key:"is_eu_or_multipliers_only",get:function(){return this.is_multipliers_only?!this.is_multipliers_only:!(0,R.isEuCountry)(this.residence)}},{key:"clients_country",get:function(){var e;return null===(e=this.website_status)||void 0===e?void 0:e.clients_country}},{key:"is_eu_country",get:function(){var e=this.website_status.clients_country;return!!e&&(0,R.isEuCountry)(e)}},{key:"isEuropeCountry",value:function(){return this.is_eu_country||this.is_eu}},{key:"is_options_blocked",get:function(){return(0,R.isOptionsBlocked)(this.residence)}},{key:"is_multipliers_only",get:function(){return(0,R.isMultipliersOnly)(this.residence)}},{key:"resetLocalStorageValues",value:function(e){this.accounts[e].accepted_bch=0,h.LocalStore.setObject(re,this.accounts),h.LocalStore.set("active_loginid",e),this.syncWithLegacyPlatforms(e,(0,i.toJS)(this.accounts)),this.loginid=e}},{key:"setIsAuthorize",value:function(e){this.is_authorize=e}},{key:"getBasicUpgradeInfo",value:function(){var e,t,n=this,r=Y(new Set(h.State.getResponse("authorize.upgradeable_landing_companies"))),o=!1;return(r||[]).length&&(o=-1!==r.indexOf(this.accounts[this.loginid].landing_company_shortcode),t=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return t.find((function(e){return e!==n.accounts[n.loginid].landing_company_shortcode&&-1!==r.indexOf(e)}))}("svg","iom","malta","maltainvest"),t&&(e="maltainvest"===t?"financial":"real")),{type:e,can_upgrade:!!t,can_upgrade_to:t,can_open_multi:o}}},{key:"setMT5DisabledSignupTypes",value:function(e){var t=this.mt5_disabled_signup_types;this.mt5_disabled_signup_types=K(K({},t),e)}},{key:"setCFDDisabledSignupTypes",value:function(e,t){if(e===h.CFD_PLATFORMS.DXTRADE){var n=this.dxtrade_disabled_signup_types;this.dxtrade_disabled_signup_types=K({current_list:n},t)}}},{key:"getLimits",value:function(){var e=this;return new Promise((function(t){s.WS.authorized.storage.getLimits().then((function(n){(0,i.runInAction)((function(){n.error?(e.account_limits={api_initial_load_error:n.error.message},t(n)):(e.account_limits=K(K({},n.get_limits),{},{is_loading:!1}),t(n))}))}))}))}},{key:"setCookieAccount",value:function(){var e=/deriv\.(com|me)/.test(window.location.hostname)?h.deriv_urls.DERIV_HOST_NAME:"binary.sx",t=this.loginid,n=this.email,r=this.landing_company_shortcode,o=this.currency,i=this.residence,a=this.account_settings,c=this.preferred_language,s=this.user_id,l=a.first_name,u=a.last_name,d=a.name;if(t&&n){var f={loginid:t,email:n,landing_company_shortcode:r,currency:o,residence:i,first_name:l,last_name:u,name:d,preferred_language:c,user_id:s};_().set("region",(0,R.getRegion)(r,i),{domain:e}),_().set("client_information",f,{domain:e}),_().set("is_p2p_disabled",!this.is_p2p_enabled,{domain:e}),this.has_cookie_account=!0}else(0,h.removeCookies)("region","client_information","is_p2p_disabled"),this.has_cookie_account=!1}},{key:"setCFDScore",value:function(e){this.cfd_score=e}},{key:"getSelfExclusion",value:function(){var e=this;return new Promise((function(t){s.WS.authorized.storage.getSelfExclusion().then((function(n){(0,i.runInAction)((function(){n.get_self_exclusion?e.self_exclusion=n.get_self_exclusion:e.self_exclusion=!1,t(n)}))}))}))}},{key:"updateSelfExclusion",value:function(e){var t=this;return new Promise((function(n){s.WS.authorized.storage.setSelfExclusion(e).then((function(e){e.error||t.getSelfExclusion(),n(e)}))}))}},{key:"responsePayoutCurrencies",value:function(e){var t,n,r,o,i=(null==e?void 0:e.payout_currencies)||e;this.currencies_list=(t=Array.isArray(i)?i:[],r=[],o=[],t.forEach((function(e){var t=(0,h.isCryptocurrency)(e);(t?o:r).push({text:(0,h.getCurrencyDisplayCode)(e),value:e,has_tooltip:t})})),S(n={},(0,g.localize)("Fiat"),r),S(n,(0,g.localize)("Crypto"),o),n),this.selectCurrency("")}},{key:"responseAuthorize",value:function(e){var t;this.accounts[this.loginid].email=e.authorize.email,this.accounts[this.loginid].currency=e.authorize.currency,this.accounts[this.loginid].is_virtual=+e.authorize.is_virtual,this.accounts[this.loginid].session_start=parseInt(p()().utc().valueOf()/1e3),this.accounts[this.loginid].landing_company_shortcode=e.authorize.landing_company_name,this.accounts[this.loginid].country=e.country,this.updateAccountList(e.authorize.account_list),this.upgrade_info=this.getBasicUpgradeInfo(),this.user_id=e.authorize.user_id,localStorage.setItem("active_user_id",this.user_id),this.upgradeable_landing_companies=Y(new Set(e.authorize.upgradeable_landing_companies)),this.local_currency_config.currency=Object.keys(e.authorize.local_currencies)[0];var n=null!==(t=h.LocalStore.getObject("notification_messages")[this.loginid])&&void 0!==t?t:[];h.LocalStore.setObject("notification_messages",Z({},this.loginid,n)),this.local_currency_config.decimal_places=(0,h.isEmptyObject)(e.authorize.local_currencies)?2:+e.authorize.local_currencies[this.local_currency_config.currency].fractional_digits}},{key:"setWebsiteStatus",value:function(e){this.website_status=e.website_status,this.responseWebsiteStatus(e),(0,h.setCurrencies)(this.website_status);var t=/deriv\.(com|me)/.test(window.location.hostname)?h.deriv_urls.DERIV_HOST_NAME:window.location.hostname,n=this.website_status.clients_country,r={domain:t,expires:7};try{var o=_().get("website_status")?JSON.parse(_().get("website_status")):{};o.clients_country=n,_().set("website_status",o,r)}catch(e){_().set("website_status",{clients_country:n},r)}}},{key:"accountRealReaction",value:(j=V(B().mark((function e(t){var n=this;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r,o,a=!!h.LocalStore.get(re);(0,i.runInAction)((function(){n.is_populating_account_list=!0})),n.is_logged_in&&!a&&(localStorage.setItem(re,JSON.stringify(n.accounts)),h.LocalStore.set(re,JSON.stringify(n.accounts)),n.syncWithLegacyPlatforms(u,n.accounts));try{o=JSON.parse(h.LocalStore.get(re))}catch(e){console.error("JSON parse failed, invalid value (client.accounts): ",e)}var c=null!==(r=t.new_account_real)&&void 0!==r?r:t.new_account_maltainvest,l=c.oauth_token,u=c.client_id;M().authorize(l).then((function(t){var r={};r.token=l,r.residence=t.authorize.country,r.currency=t.authorize.currency,r.is_virtual=t.authorize.is_virtual,r.landing_company_name=t.authorize.landing_company_fullname,r.landing_company_shortcode=t.authorize.landing_company_name,(0,i.runInAction)((function(){return o[u]=r})),n.setLoginInformation(o,u),s.WS.authorized.storage.getSettings().then((function(t){n.setAccountSettings(t.get_settings),e()})),n.syncWithLegacyPlatforms(u,o)})).catch((function(e){console.error("Something went wrong while registering a real account: ",e)}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return j.apply(this,arguments)})},{key:"setLoginInformation",value:function(e,t){this.setAccounts(e),localStorage.setItem(re,JSON.stringify(e)),h.LocalStore.set(re,JSON.stringify(e)),this.is_populating_account_list=!1,this.upgrade_info=this.getBasicUpgradeInfo(),this.setSwitched(t),this.syncWithLegacyPlatforms(t,e)}},{key:"realAccountSignup",value:(T=V(B().mark((function e(t){var n,r,o,i,a,c,l;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="BTC",o="maltainvest"===this.root_store.ui.real_account_signup_target,i="samoa"===this.root_store.ui.real_account_signup_target,a="",t.residence=this.residence,o&&(a=t.currency),this.root_store.ui.setRealAccountSignupParams(t),t.document_number,t.document_type,t.document_additional,(c=W(t,U)).citizen=(null==t?void 0:t.citizen)||(null===(n=this.account_settings)||void 0===n?void 0:n.citizen)||this.residence,!o){e.next=15;break}return e.next=12,s.WS.newAccountRealMaltaInvest(c);case 12:e.t0=e.sent,e.next=18;break;case 15:return e.next=17,s.WS.newAccountReal(c);case 17:e.t0=e.sent;case 18:if((l=e.t0).error){e.next=29;break}return e.next=22,this.accountRealReaction(l);case 22:if(!i){e.next=25;break}return e.next=25,this.setAccountCurrency(r);case 25:return localStorage.removeItem("real_account_signup_wizard"),e.next=28,this.root_store.gtm.pushDataLayer({event:"real_signup"});case 28:return e.abrupt("return",Promise.resolve(K(K(K({},l),o?{new_account_maltainvest:K(K({},l.new_account_maltainvest),{},{currency:a})}:{}),i?{new_account_samoa:{currency:a}}:{})));case 29:return e.abrupt("return",Promise.reject(l.error));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"setAccountCurrency",value:(N=V(B().mark((function e(t){var n;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WS.setAccountCurrency(t,{previous_currency:this.currency});case 2:if((n=e.sent).error){e.next=7;break}return e.next=6,this.updateAccountCurrency(t);case 6:return e.abrupt("return",Promise.resolve(n));case 7:return e.abrupt("return",Promise.reject(n.error));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return N.apply(this,arguments)})},{key:"updateAccountCurrency",value:(P=V(B().mark((function e(t){var n,r=this,o=arguments;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>1&&void 0!==o[1])||o[1],(0,i.runInAction)((function(){var e=K({},r.accounts[r.loginid]);e.currency=t,"balance"in e||(e.balance=0),r.accounts[r.loginid]=e})),n&&(localStorage.setItem(re,JSON.stringify(this.accounts)),h.LocalStore.setObject(re,JSON.parse(JSON.stringify(this.accounts)))),this.selectCurrency(t),this.root_store.notifications.removeNotificationMessage({key:"currency"}),this.root_store.notifications.removeNotificationByKey({key:"currency"}),e.next=8,this.init();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return P.apply(this,arguments)})},{key:"createCryptoAccount",value:(C=V(B().mark((function e(t){var n,r,o,i,a,c,l;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.residence,r=this.account_settings,o=r.date_of_birth,i=r.first_name,a=r.last_name,c={residence:n,currency:t,first_name:i,last_name:a,date_of_birth:(0,h.toMoment)(o).format("YYYY-MM-DD")},e.next=5,s.WS.newAccountReal(c);case 5:if((l=e.sent).error){e.next=10;break}return e.next=9,this.accountRealReaction(l);case 9:return e.abrupt("return",Promise.resolve(l));case 10:return e.abrupt("return",Promise.reject(l.error));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"residence",get:function(){var e,t;return this.is_logged_in&&null!==(e=null===(t=this.account_settings)||void 0===t?void 0:t.country_code)&&void 0!==e?e:""}},{key:"email_address",get:function(){return this.accounts&&this.accounts[this.loginid]?this.accounts[this.loginid].email:""}},{key:"is_website_status_ready",get:function(){return this.website_status&&!M().getAvailability().is_down}},{key:"updateAccountList",value:function(e){var t=this;e.forEach((function(e){t.accounts[e.loginid]&&(t.accounts[e.loginid].excluded_until=e.excluded_until||"",Object.keys(e).forEach((function(n){var r="country"===n?"residence":n,o=void 0===e[n]?"":e[n];"loginid"!==r&&(t.accounts[e.loginid][r]=o)})))}))}},{key:"switchAccount",value:(L=V(B().mark((function e(t){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return this.setPreSwitchAccount(!0),this.setIsLoggingIn(!0),this.root_store.notifications.removeNotifications(!0),this.root_store.notifications.removeTradeNotifications(),this.root_store.notifications.removeAllNotificationMessages(!0),!this.is_virtual&&/VRTC|VRW/.test(t)&&this.setPrevRealAccountLoginid(this.loginid),this.setSwitched(t),e.t0=this,e.next=12,s.WS.authorized.payoutCurrencies();case 12:e.t1=e.sent,e.t0.responsePayoutCurrencies.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return L.apply(this,arguments)})},{key:"resetVirtualBalance",value:(A=V(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.root_store.notifications.removeNotificationByKey({key:"reset_virtual_balance"}),this.root_store.notifications.removeNotificationMessage({key:"reset_virtual_balance",should_show_again:!0}),e.next=4,s.WS.authorized.topupVirtual();case 4:case"end":return e.stop()}}),e,this)}))),function(){return A.apply(this,arguments)})},{key:"switchEndSignal",value:function(){this.switch_broadcast=!1}},{key:"init",value:(O=V(B().mark((function e(t){var n,r,o,a,c,l,u,d,_,f,p,y,b,w,E,k=this;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem("walletsOnboarding"),n=h.SessionStore.get("signup_query_param")||window.location.search,r=new URLSearchParams(n),o=null==r?void 0:r.get("redirect_url"),a=null==r?void 0:r.get("code"),c=null==r?void 0:r.get("action"),l=null==r?void 0:r.get("loginid"),u=["type","acp","label","server","interface","cid","age","utm_source","first_name","second_name","email","phone","_filteredParams"],e.next=10,this.setUserLogin(t);case 10:if(d=e.sent,"signup"===c&&this.root_store.ui.setIsNewAccount(),n&&(a&&c&&this.setVerificationCode(a,c),document.addEventListener("DOMContentLoaded",(function(){setTimeout((function(){history.replaceState(null,null,window.location.search.replace(/&?code=[^&]*/i,""))}),0)}))),this.setDeviceData(),null==d||!d.error){e.next=22;break}return e.next=17,this.logout();case 17:return this.root_store.common.setError(!0,{header:d.error.message,message:(0,g.localize)("Please Log in"),should_show_refresh:!1,redirect_label:(0,g.localize)("Log in"),redirectOnClick:function(){return(0,h.redirectToLogin)(!1,(0,g.getLanguage)())}}),this.setIsLoggingIn(!1),this.setInitialized(!1),this.setSwitched(""),e.abrupt("return",!1);case 22:if("payment_withdraw"===c&&l?this.setLoginId(l):this.setLoginId(h.LocalStore.get("active_loginid")),this.user_id=h.LocalStore.get("active_user_id"),this.setAccounts(h.LocalStore.getObject(re)),this.setSwitched(""),_=this.accounts[this.loginid],!d){e.next=54;break}if(this.loginid!==d.authorize.loginid){e.next=38;break}return v.Z.authorizeAccount(d),m.Analytics.setAttributes({app_id:(0,h.getAppId)(),account_type:this.loginid.substring(0,2)}),null===m.Analytics||void 0===m.Analytics||m.Analytics.identifyEvent(),f=window.location.hostname+window.location.pathname,null===m.Analytics||void 0===m.Analytics||m.Analytics.pageView(f),e.next=36,this.root_store.gtm.pushDataLayer({event:"login"});case 36:e.next=40;break;case 38:return e.next=40,M().authorize(_.token);case 40:if(o&&(p=h.routes[o].length>1?h.routes[o]:"",["payment_agent_withdraw","payment_withdraw","reset_password"].includes(c)?(y=(0,h.filterUrlQuery)(n,["platform","code","action"]),[h.routes.cashier_withdrawal,h.routes.cashier_pa].includes(p)?window.location.replace("/redirect?".concat(y)):window.location.replace("".concat(p,"/redirect?").concat(y))):window.location.replace("".concat(p,"/?").concat((0,h.filterUrlQuery)(n,["platform"])))),(0,i.runInAction)((function(){k.is_populating_account_list=!1})),b=(0,g.getRedirectionLanguage)(d.authorize.preferred_language),w=h.LocalStore.get(ne),"EN"===b||!w||b===w){e.next=48;break}return window.history.replaceState({},document.title,(0,h.urlForLanguage)(b)),e.next=48,this.root_store.common.changeSelectedLanguage(b);case 48:if(!this.citizen){e.next=51;break}return e.next=51,this.onSetCitizen(this.citizen);case 51:this.is_virtual||this.setPrevRealAccountLoginid(this.loginid),!this.active_accounts.some((function(e){return"svg"===e.landing_company_shortcode}))&&this.is_low_risk&&this.switchAccount(this.virtual_account_loginid);case 54:return this.selectCurrency(""),e.t0=this,e.next=58,s.WS.authorized.payoutCurrencies();case 58:if(e.t1=e.sent,e.t0.responsePayoutCurrencies.call(e.t0,e.t1),!this.is_logged_in){e.next=98;break}return e.next=63,s.WS.mt5LoginList().then(this.responseMt5LoginList);case 63:return s.WS.tradingServers(h.CFD_PLATFORMS.MT5).then(this.responseMT5TradingServers),s.WS.tradingPlatformAvailableAccounts(h.CFD_PLATFORMS.MT5).then(this.responseTradingPlatformAvailableAccounts),s.WS.tradingPlatformAccountsList(h.CFD_PLATFORMS.DXTRADE).then(this.responseTradingPlatformAccountsList),s.WS.tradingPlatformAccountsList(h.CFD_PLATFORMS.CTRADER).then(this.responseTradingPlatformAccountsList),s.WS.tradingServers(h.CFD_PLATFORMS.DXTRADE).then(this.responseDxtradeTradingServers),e.t2=this,e.next=71,M().send({statement:1});case 71:if(e.t3=e.sent,e.t2.responseStatement.call(e.t2,e.t3),0!==Object.keys(this.account_settings).length){e.next=79;break}return e.t4=this,e.next=77,s.WS.authorized.cache.getSettings();case 77:e.t5=e.sent.get_settings,e.t4.setAccountSettings.call(e.t4,e.t5);case 79:return this.account_settings&&this.setPreferredLanguage(this.account_settings.preferred_language),"null"!==this.loginid&&m.Analytics.setAttributes({account_type:this.loginid.substring(0,2)}),e.next=83,this.fetchResidenceList();case 83:return e.next=85,this.getTwoFAStatus();case 85:if(this.account_settings&&!this.account_settings.residence&&this.root_store.ui.toggleSetResidenceModal(!0),!this.residence){e.next=91;break}return e.next=89,s.WS.authorized.cache.landingCompany(this.residence).then(this.responseLandingCompany);case 89:return e.next=91,this.fetchStatesList();case 91:if(this.is_virtual){e.next=94;break}return e.next=94,this.getLimits();case 94:return e.next=96,s.WS.p2pAdvertiserInfo().then(this.setP2pAdvertiserInfo);case 96:e.next=99;break;case 98:this.resetMt5AccountListPopulation();case 99:return e.t6=this,e.next=102,s.WS.wait("website_status");case 102:return e.t7=e.sent,e.t6.responseWebsiteStatus.call(e.t6,e.t7),this.registerReactions(),this.setIsLoggingIn(!1),this.setInitialized(!0),"signup"===c&&(E=(0,h.filterUrlQuery)(n,["lang"]),history.replaceState(null,null,window.location.href.replace("".concat(n),""===E?"":"?".concat(E)))),history.replaceState(null,null,window.location.href.replace("".concat(n),(0,h.excludeParamsFromUrlQuery)(n,u))),e.abrupt("return",!0);case 110:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"resetMt5AccountListPopulation",value:function(){this.is_populating_mt5_account_list=!1}},{key:"responseWebsiteStatus",value:function(e){this.website_status=e.website_status}},{key:"responseLandingCompany",value:function(e){this.landing_companies=e.landing_company,this.is_landing_company_loaded=!0,this.setStandpoint(this.landing_companies)}},{key:"setP2pAdvertiserInfo",value:function(e){this.p2p_advertiser_info=e.p2p_advertiser_info}},{key:"setStandpoint",value:function(e){if(e){var t,n,r,o,i=e.gaming_company,a=e.financial_company;null!=i&&i.shortcode&&(this.standpoint=K(K({},this.standpoint),{},(Z(n={},i.shortcode,!(null==i||!i.shortcode)),Z(n,"gaming_company",null!==(t=null==i?void 0:i.shortcode)&&void 0!==t&&t),n))),null!=a&&a.shortcode&&(this.standpoint=K(K({},this.standpoint),{},(Z(o={},a.shortcode,!(null==a||!a.shortcode)),Z(o,"financial_company",null!==(r=null==a?void 0:a.shortcode)&&void 0!==r&&r),o)))}}},{key:"setLoginId",value:function(e){this.loginid=e}},{key:"setAccounts",value:function(e){this.accounts=e}},{key:"setSwitched",value:function(e){this.switched=e}},{key:"setIsCfdPoiCompleted",value:function(e){this.is_cfd_poi_completed=e}},{key:"isDisabled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.getAccount(e).is_disabled}},{key:"getToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.getAccount(e).token}},{key:"getAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid;return this.accounts[e]}},{key:"getAccountInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.loginid,t=this.getAccount(e),n=t.currency,r=t.is_disabled,o=t.is_virtual,i=!o&&n?n:this.account_title;return{loginid:e,is_disabled:r,is_virtual:o,icon:i.toLowerCase(),title:"virtual"===i.toLowerCase()?(0,g.localize)("DEMO"):i}}},{key:"setIsLoggingIn",value:function(e){this.is_logging_in=e}},{key:"setPreSwitchAccount",value:function(e){this.pre_switch_broadcast=e}},{key:"broadcastAccountChange",value:function(){this.switch_broadcast=!0}},{key:"broadcastAccountChangeAfterAuthorize",value:function(){var e=this;return M().wait("authorize").then((function(){e.broadcastAccountChange()}))}},{key:"handleNotFoundLoginId",value:function(){this.root_store.notifications.addNotificationMessage({message:(0,g.localize)("Could not switch to default account."),type:"danger"}),this.logout()}},{key:"isUnableToFindLoginId",value:function(){var e=this;return!this.all_loginids.some((function(t){return t!==e.switched}))||this.switched===this.loginid}},{key:"switchAccountHandler",value:(x=V(B().mark((function e(){var t,n,r,o=this;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.switched&&this.switched.length&&null!==(t=this.getAccount(this.switched))&&void 0!==t&&t.token){e.next=9;break}if(!this.isUnableToFindLoginId()){e.next=4;break}return this.handleNotFoundLoginId(),e.abrupt("return");case 4:return this.root_store.notifications.addNotificationMessage({message:(0,g.localize)("Switching to default account."),type:"info"}),this.switchAccount(this.all_loginids[0]),e.next=8,this.switchAccountHandler();case 8:return e.abrupt("return");case 9:if((0,i.runInAction)((function(){return o.is_switching=!0})),this.setIsAuthorize(!1),n=this.loginid,this.resetLocalStorageValues(this.switched),D.clear(),!(r=this.is_virtual||/VRTC|VRW/.test(n))){e.next=21;break}return M().closeAndOpenNewConnection(),e.next=19,M().wait("authorize");case 19:e.next=25;break;case 21:return e.next=23,s.WS.forgetAll("balance");case 23:return e.next=25,M().authorize(this.getToken());case 25:return this.root_store.common.has_error&&this.root_store.common.setError(!1,null),sessionStorage.setItem("active_tab","1"),this.root_store.gtm.setLoginFlag(),e.next=30,this.init();case 30:r||this.broadcastAccountChange(),this.is_virtual||this.getLimits(),(0,i.runInAction)((function(){return o.is_switching=!1}));case 33:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)})},{key:"registerReactions",value:function(){var e=this;(0,i.when)((function(){return e.switched}),(function(){var t;null!==(t=e.accounts[e.switched])&&void 0!==t&&t.is_virtual&&(e.root_store.notifications.removeNotifications(!0),e.root_store.notifications.removeAllNotificationMessages()),e.switchAccountHandler()}))}},{key:"setBalanceActiveAccount",value:function(e){if(this.accounts[null==e?void 0:e.loginid]&&e.loginid===this.loginid){var t;if(this.accounts[e.loginid].balance=e.balance,this.accounts[e.loginid].is_virtual&&this.root_store.notifications.resetVirtualBalanceNotification(e.loginid),window.location.pathname.includes(h.routes.wallets_cashier))return void this.resetLocalStorageValues(null!==(t=localStorage.getItem("active_loginid"))&&void 0!==t?t:this.loginid);this.resetLocalStorageValues(this.loginid)}}},{key:"setBalanceOtherAccounts",value:function(e){var t,n,r,o=this;if((null===(t=this.root_store.modules)||void 0===t||null===(n=t.cashier)||void 0===n||null===(r=n.account_transfer)||void 0===r||!r.is_mt5_transfer_in_progress)&&(this.accounts[null==e?void 0:e.loginid]&&!e.accounts&&e.loginid!==this.loginid&&(this.accounts[e.loginid].balance=e.balance),this.accounts[null==e?void 0:e.loginid]&&e.accounts&&Object.keys(e.accounts).forEach((function(t){t!==o.loginid&&o.accounts[t]&&(o.accounts[t].balance=+e.accounts[t].balance)})),null!=e&&e.total)){var i=(0,h.getPropertyValue)(e,["total","deriv"]),a=(0,h.getPropertyValue)(e,["total",h.CFD_PLATFORMS.MT5]),c=(0,h.getPropertyValue)(e,["total",h.CFD_PLATFORMS.DXTRADE]),s=!(0,h.isEmptyObject)(a),l=!(0,h.isEmptyObject)(c);this.obj_total_balance={amount_real:+i.amount,amount_mt5:s?+a.amount:this.obj_total_balance.amount_mt5,amount_dxtrade:l?+c.amount:this.obj_total_balance.amount_dxtrade,currency:i.currency}}}},{key:"selectCurrency",value:function(e){this.selected_currency=e}},{key:"setResidence",value:function(e){this.loginid&&(this.accounts[this.loginid].residence=e)}},{key:"setCitizen",value:function(e){this.citizen=e}},{key:"setEmail",value:function(e){this.loginid&&(this.accounts[this.loginid].email=e,this.email=e)}},{key:"setAccountSettings",value:function(e){JSON.stringify(e)===JSON.stringify(this.account_settings)||(this.account_settings=e,this.is_account_setting_loaded=!0)}},{key:"setAccountStatus",value:function(e){this.account_status=e}},{key:"updateAccountStatus",value:(k=V(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WS.authorized.getAccountStatus();case 2:(t=e.sent).error||this.setAccountStatus(t.get_account_status);case 4:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)})},{key:"setInitialized",value:function(e){this.initialized_broadcast=e}},{key:"cleanUp",value:function(){var e=this,t=h.LocalStore.getObject("notification_messages");t&&this.loginid&&(delete t[this.loginid],h.LocalStore.setObject("notification_messages",K({},t))),this.root_store.gtm.pushDataLayer({event:"log_out"}),this.loginid=null,this.user_id=null,this.upgrade_info=void 0,this.accounts={},this.mt5_login_list=[],this.dxtrade_accounts_list=[],this.ctrader_accounts_list=[],this.landing_companies={},localStorage.removeItem("readScamMessage"),localStorage.removeItem("isNewAccount"),h.LocalStore.set("marked_notifications",JSON.stringify([])),localStorage.setItem("active_loginid",this.loginid),localStorage.setItem("active_user_id",this.user_id),localStorage.setItem("client.accounts",JSON.stringify(this.accounts)),(0,i.runInAction)(V(B().mark((function t(){return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,s.WS.payoutCurrencies();case 3:t.t1=t.sent,t.t0.responsePayoutCurrencies.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t)})))),this.root_store.notifications.removeAllNotificationMessages(!0),this.syncWithLegacyPlatforms(this.loginid,this.accounts)}},{key:"logout",value:(f=V(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Y)();case 2:return 1===(null==(t=e.sent)?void 0:t.logout)&&(this.cleanUp(),this.setLogout(!0)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"setLogout",value:function(e){this.has_logged_out=e,this.root_store.common.has_error&&this.root_store.common.setError(!1,null)}},{key:"storeClientAccounts",value:function(e,t){var n,r={country:"residence",landing_company_name:"landing_company_shortcode"},o={};e.selected_acct&&(n=e.selected_acct),t.forEach((function(e){Object.keys(e).forEach((function(t){if("loginid"===t)n||e.is_disabled||(e.is_virtual?e.is_virtual&&(n=e[t]):n=e[t]);else{var i=r[t]||t,a=void 0===e[t]?"":e[t];e.loginid in o||(o[e.loginid]={}),o[e.loginid][i]=a}}))}));for(var i=1;e["acct".concat(i)];){var a=e["acct".concat(i)],c=e["token".concat(i)];a&&c&&(o[a].token=c),i++}n&&o[n].token||(n=e.acct1),n&&Object.keys(o).length&&(localStorage.setItem("active_loginid",n),localStorage.setItem("client.accounts",JSON.stringify(o)),this.syncWithLegacyPlatforms(n,this.accounts))}},{key:"setUserLogin",value:(d=V(B().mark((function e(t){var n,r,o,a,c,l,u,d,_,f,p,v,y,b=this;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},r=window.location.search,o=!1,r&&((c=new URLSearchParams(window.location.search)).forEach((function(e,t){["acct","token","cur"].some((function(e){return(null==t?void 0:t.includes(e))&&"affiliate_token"!==t}))&&(n[t]=e,o=!0)})),Object.keys(n).forEach((function(e){return c.delete(e)})),c.delete("state"),c=null===(a=c)||void 0===a?void 0:a.toString(),l=c?"?".concat(c):"/",history.replaceState(null,null,"".concat(l).concat(window.location.hash))),!(u=t?t.token1:n.token1)){e.next=25;break}return this.setIsLoggingIn(!0),(null!=(d=sessionStorage.getItem("redirect_url"))&&d.endsWith("/")||null!=d&&d.endsWith(h.routes.bot))&&((0,h.isTestLink)()||(0,h.isProduction)()||(0,h.isLocal)()||(0,h.isStaging)())?window.history.replaceState({},document.title,"/appstore/traders-hub"):window.history.replaceState({},document.title,sessionStorage.getItem("redirect_url")),D.clear(),this.is_populating_account_list=!0,e.next=13,M().authorize(u);case 13:if(_=e.sent,!o){e.next=20;break}return e.next=17,s.WS.authorized.getAccountStatus();case 17:v=e.sent,y=v.get_account_status,m.Analytics.trackEvent("ce_virtual_signup_form",{action:"signup_continued",signup_provider:null==y?void 0:y.social_identity_provider,form_name:null!==(f=this.root_store)&&void 0!==f&&null!==(p=f.ui)&&void 0!==p&&p.is_mobile?"virtual_signup_web_mobile_default":"virtual_signup_web_desktop_default"});case 20:if(t&&(n=t),!_.error){e.next=23;break}return e.abrupt("return",_);case 23:return(0,i.runInAction)((function(){var e=(_.authorize||{}).account_list;b.upgradeable_landing_companies=Y(new Set(_.upgradeable_landing_companies)),b.canStoreClientAccounts(n,e)?b.storeClientAccounts(n,e):_.error={code:"MismatchedAcct",message:(0,g.localize)("Invalid token")}})),e.abrupt("return",_);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"canStoreClientAccounts",value:function(e,t){var n=t&&(0,h.isEmptyObject)(this.accounts),r=Object.keys(e).filter((function(e){return/^acct./.test(e)})).every((function(n){return t.some((function(t){return t.loginid===e[n]}))}));return n&&r}},{key:"setVerificationCode",value:function(e,t){this.verification_code[t]=e,e?h.LocalStore.set("verification_code.".concat(t),e):h.LocalStore.remove("verification_code.".concat(t)),"signup"===t&&this.fetchResidenceList()}},{key:"setNewEmail",value:function(e,t){this.new_email[t]=e,e?h.LocalStore.set("new_email.".concat(t),e):h.LocalStore.remove("new_email.".concat(t))}},{key:"setDeviceData",value:function(){E("signup_device",(0,h.isDesktopOs)()?"desktop":"mobile")}},{key:"getSignupParams",value:function(){var e={},t=new URLSearchParams(window.location.search);return["date_first_contact","signup_device","gclid_url","utm_source","utm_ad_id","utm_adgroup_id","utm_adrollclk_id","utm_campaign_id","utm_campaign","utm_fbcl_id","utm_gl_client_id","utm_msclk_id","utm_medium","utm_term","utm_content","affiliate_token"].forEach((function(n){t.get(n)&&(e[n]=t.get(n))})),e}},{key:"onSetResidence",value:function(e,t){var n=this,r=e.residence;r&&s.WS.setSettings({residence:r}).then(function(){var e=V(B().mark((function e(o){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.error){e.next=4;break}t(o.error.message),e.next=12;break;case 4:return e.next=6,n.setResidence(r);case 6:return e.next=8,s.WS.authorized.storage.landingCompany(n.accounts[n.loginid].residence).then(n.responseLandingCompany);case 8:return e.next=10,s.WS.authorized.storage.getSettings().then(function(){var e=V(B().mark((function e(t){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setAccountSettings(t.get_settings);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:(0,i.runInAction)(V(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M().authorize(n.getToken()).then((function(){(0,i.runInAction)((function(){return n.upgrade_info=n.getBasicUpgradeInfo()}))}));case 2:case"end":return e.stop()}}),e)})))),t();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"onSetCitizen",value:(u=V(B().mark((function e(t){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:s.WS.setSettings({set_settings:1,citizen:t});case 3:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"onSignup",value:function(e,t){var n=this,r=e.citizenship,o=e.password,i=e.residence;this.verification_code.signup&&o&&i&&r&&s.WS.newAccountVirtual(this.verification_code.signup,o,i,this.getSignupParams()).then(function(){var e=V(B().mark((function e(o){var i,a,c,s;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.error){e.next=4;break}t(o.error.message),e.next=11;break;case 4:return t(),i=o.new_account_virtual,a=i.client_id,c=i.currency,s=i.oauth_token,e.next=8,n.setCitizen(r);case 8:return e.next=10,n.switchToNewlyCreatedAccount(a,s,c);case 10:n.root_store.gtm.pushDataLayer({event:"virtual_signup"});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"switchToNewlyCreatedAccount",value:(l=V(B().mark((function e(t,n,r){var o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setPreSwitchAccount(!0),o={acct1:t,token1:n,curr1:r},e.next=4,this.init(o);case 4:this.broadcastAccountChange();case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return l.apply(this,arguments)})},{key:"fetchAccountSettings",value:function(){var e=this;return new Promise((function(t){s.WS.authorized.storage.getSettings().then((function(n){e.setAccountSettings(n.get_settings),t(n)}))}))}},{key:"fetchResidenceList",value:function(){var e=this;return new Promise((function(t){s.WS.storage.residenceList().then((function(n){e.setResidenceList(n),t(n)}))}))}},{key:"setResidenceList",value:function(e){this.residence_list=e.residence_list||[]}},{key:"fetchStatesList",value:function(){var e=this;return new Promise((function(t,n){s.WS.authorized.storage.statesList({states_list:e.accounts[e.loginid].residence}).then((function(r){r.error?n(r.error):(0,i.runInAction)((function(){e.states_list=r.states_list||[]})),t(r)}))}))}},{key:"resetMt5ListPopulatedState",value:function(){this.is_mt5_account_list_updated=!1,this.is_populating_mt5_account_list=!0,this.mt5_login_list_error=null}},{key:"updateMt5LoginList",value:(c=V(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is_logged_in||this.is_mt5_account_list_updated||this.is_populating_mt5_account_list){e.next=5;break}return e.next=3,s.WS.mt5LoginList();case 3:t=e.sent,this.responseMt5LoginList(t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"responseMT5TradingServers",value:function(e){e.error?this.mt5_trading_servers=[]:this.mt5_trading_servers=e.trading_servers}},{key:"responseMt5LoginList",value:function(e){var t=this;this.is_populating_mt5_account_list=!1,this.is_mt5_account_list_updated=!0,this.mt5_login_list_error=null,setTimeout((function(){t.is_mt5_account_list_updated=!1}),6e4),e.error?this.mt5_login_list_error=e.error:this.mt5_login_list=e.mt5_login_list.map((function(e){var n=(e.error?e.error.details.login:e.login).replace(/^(MT[DR]?)/i,"");if(e.error){var r=e.error.details,o=r.account_type,i=r.server;return t.setMT5DisabledSignupTypes(Z({},o,!0)),platform===h.CFD_PLATFORMS.CTRADER&&t.setCFDDisabledSignupTypes(platform,Z({},o,!0)),{account_type:o,display_login:n,has_error:!0,server:i}}return K(K({},e),{},{display_login:n})}))}},{key:"responseDxtradeTradingServers",value:function(e){var t=this;e.error?this.dxtrade_trading_servers=[]:(this.dxtrade_trading_servers=e.trading_servers,this.dxtrade_trading_servers.forEach((function(e){var n=e.account_type;e.disabled&&t.setCFDDisabledSignupTypes(h.CFD_PLATFORMS.DXTRADE,Z({},n,!0))})))}},{key:"responseTradingPlatformAvailableAccounts",value:function(e){e.error||(this.trading_platform_available_accounts=e.trading_platform_available_accounts)}},{key:"responseTradingPlatformAccountsList",value:function(e){var t=this,n=(e.echo_req||{}).platform;this["is_populating_".concat(n,"_account_list")]=!1,this["".concat(n,"_accounts_list_error")]=null,e.error?this["".concat(n,"_accounts_list_error")]=e.error:this["".concat(n,"_accounts_list")]=e.trading_platform_accounts.map((function(e){var r=e.error?e.error.details.account_id:e.account_id;if(e.error){var o=e.error.details,i=o.account_type,a=o.server;return n===h.CFD_PLATFORMS.DXTRADE&&t.setCFDDisabledSignupTypes(n,Z({},i,!0)),{account_type:i,display_login:r,has_error:!0,server:a}}return K(K({},e),{},{display_login:r})}))}},{key:"responseStatement",value:function(e){e.error||(this.statement=e.statement)}},{key:"getChangeableFields",value:function(){var e=[].concat(Y(this.account_settings.immutable_fields||[]),["immutable_fields","email","password"]);return Object.keys(this.account_settings).filter((function(t){return!e.includes(t)}))}},{key:"syncWithLegacyPlatforms",value:function(e,t){var n={},r={};n.iframe=document.getElementById("localstorage-sync"),r.iframe=document.getElementById("localstorage-sync__bot"),n.origin=(0,h.getUrlSmartTrader)(),r.origin=(0,h.getUrlBinaryBot)(!1),[n,r].forEach((function(n){n.iframe&&(n.iframe.contentWindow.postMessage({key:"client.accounts",value:JSON.stringify(t)},n.origin),n.iframe.contentWindow.postMessage({key:"active_loginid",value:e},n.origin))}))}},{key:"is_high_risk",get:function(){if((0,h.isEmptyObject)(this.account_status))return!1;var e=this.landing_companies,t=e.gaming_company,n=e.financial_company,r="svg"===(null==n?void 0:n.shortcode)||"svg"===(null==t?void 0:t.shortcode)&&"maltainvest"!==(null==n?void 0:n.shortcode);return"svg"===(null==n?void 0:n.shortcode)&&"svg"===(null==t?void 0:t.shortcode)||"high"===this.account_status.risk_classification||r}},{key:"is_low_risk",get:function(){var e,t,n=this.landing_companies,r=n.gaming_company,o=n.financial_company;return"maltainvest"===(null==o?void 0:o.shortcode)&&"svg"===(null==r?void 0:r.shortcode)||(null===(e=this.upgradeable_landing_companies)||void 0===e?void 0:e.includes("svg"))&&(null===(t=this.upgradeable_landing_companies)||void 0===t?void 0:t.includes("maltainvest"))}},{key:"has_residence",get:function(){var e;return!(null===(e=this.accounts[this.loginid])||void 0===e||!e.residence)}},{key:"is_pending_proof_of_ownership",get:function(){var e,t,n;return null===(e=this.account_status)||void 0===e||null===(t=e.authentication)||void 0===t||null===(n=t.needs_verification)||void 0===n?void 0:n.includes("ownership")}},{key:"fetchFinancialAssessment",value:function(){var e=this;return new Promise(function(){var t=V(B().mark((function t(n){var r,o;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.WS.authorized.storage.getFinancialAssessment();case 2:r=t.sent,o=r.get_financial_assessment,(0,i.runInAction)((function(){return e.financial_assessment=o})),n(o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setFinancialAndTradingAssessment",value:(a=V(B().mark((function e(t){var n;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WS.setFinancialAndTradingAssessment(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"setTwoFAStatus",value:function(e){this.has_enabled_two_fa=e}},{key:"getTwoFAStatus",value:function(){var e=this;return new Promise((function(t){s.WS.authorized.accountSecurity({account_security:1,totp_action:"status"}).then((function(n){if(n.error)t(n.error);else{var r=!!(0,h.getPropertyValue)(n,["account_security","totp","is_enabled"]);e.setTwoFAStatus(r),t(r)}}))}))}},{key:"setTwoFAChangedStatus",value:function(e){this.has_changed_two_fa=e}},{key:"updateMT5Status",value:(o=V(B().mark((function e(){return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateAccountStatus(),e.next=3,s.WS.authorized.mt5LoginList().then(this.root_store.client.responseMt5LoginList);case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"setIsAlreadyAttempted",value:function(e){this.is_already_attempted=e}},{key:"is_p2p_enabled",get:function(){var e,t,n,r,o=null===(e=this.root_store)||void 0===e||null===(t=e.traders_hub)||void 0===t?void 0:t.is_low_risk_cr_eu_real;return Boolean(null===(n=this.website_status)||void 0===n||null===(r=n.p2p_config)||void 0===r?void 0:r.supported_currencies.includes(this.currency.toLocaleLowerCase()))&&!this.is_virtual&&!o}}],n&&$(t.prototype,n),r&&$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),z}(I),ce=n(93574),se=n.n(ce),le=n(17804),ue=n(31328);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return(t=ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(){he=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==de(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function me(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){me(i,r,o,a,c,"next",e)}function c(e){me(i,r,o,a,c,"throw",e)}a(void 0)}))}}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ye(r.key),r)}}function ye(e){var t=function(e,t){if("object"!==de(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===de(t)?t:String(t)}function be(e,t){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},be(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke(e);if(t){var o=ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===de(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}(this,n)}}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(a,e);var t,n,r,o=we(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,{root_store:e})).allowed_languages=Object.keys((0,g.getAllowedLanguages)()),t.app_id=void 0,t.app_router={history:null},t.app_routing_history=[],t.changing_language_timer_id="",t.current_language=ue.XX,t.deposit_url="",t.has_error=!1,t.is_language_changing=!1,t.is_network_online=!1,t.is_socket_opened=!1,t.error={type:"info",message:""},t.network_status={},t.platform="",t.selected_contract_type="",t.server_time=se().get()||(0,h.toMoment)(),t.services_error={},t.was_socket_opened=!1,t.withdraw_url="",t.changeSelectedLanguage=function(){var e=ge(he().mark((function e(n){return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D.clear(),"EN"===n&&window.localStorage.setItem("i18n_language",n),e.next=4,le.Z.wait("authorize");case 4:return e.abrupt("return",new Promise((function(e,r){le.Z.setSettings({set_settings:1,preferred_language:n}).then(ge(he().mark((function o(){var i;return he().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=new URL(window.location.href),"EN"===n?i.searchParams.delete("lang"):i.searchParams.set("lang",n),window.history.pushState({path:i.toString()},"",i.toString()),o.prev=3,o.next=6,(0,g.changeLanguage)(n,(function(){t.changeCurrentLanguage(n),M().closeAndOpenNewConnection(n),t.root_store.client.setIsAuthorize(!1)}));case 6:e(),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(3),r();case 12:case"end":return o.stop()}}),o,null,[[3,9]])}))))})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.isCurrentLanguage=function(e){return e===t.current_language},(0,i.makeObservable)(Ee(t),{addRouteHistoryItem:i.action.bound,allowed_languages:i.observable,app_id:i.observable,app_router:i.observable,app_routing_history:i.observable,changeCurrentLanguage:i.action.bound,changeSelectedLanguage:i.action.bound,changing_language_timer_id:i.observable,checkAppId:i.action.bound,current_language:i.observable,deposit_url:i.observable,error:i.observable,has_error:i.observable,init:i.action.bound,is_from_derivgo:i.computed,is_language_changing:i.observable,is_network_online:i.observable,is_socket_opened:i.observable,network_status:i.observable,platform:i.observable,routeBackInApp:i.action.bound,routeTo:i.action.bound,selected_contract_type:i.observable,server_time:i.observable,services_error:i.observable,setAppRouterHistory:i.action.bound,setAppstorePlatform:i.action.bound,setDepositURL:i.action.bound,setError:i.action.bound,setInitialRouteHistoryItem:i.action.bound,setIsSocketOpened:i.action.bound,setNetworkStatus:i.action.bound,setPlatform:i.action.bound,setSelectedContractType:i.action.bound,setServerTime:i.action.bound,setServicesError:i.action.bound,setWithdrawURL:i.action.bound,showError:i.action.bound,was_socket_opened:i.observable,withdraw_url:i.observable}),t}return t=a,n=[{key:"setSelectedContractType",value:function(e){this.selected_contract_type=e}},{key:"init",value:function(){this.setPlatform()}},{key:"checkAppId",value:function(){this.app_id&&this.app_id!==(0,h.getAppId)()&&M().closeAndOpenNewConnection(),this.app_id=(0,h.getAppId)()}},{key:"changeCurrentLanguage",value:function(e){var t=this;this.current_language!==e&&(this.changing_language_timer_id&&clearTimeout(this.changing_language_timer_id),this.current_language=e,this.is_language_changing=!0,this.changing_language_timer_id=setTimeout((function(){t.is_language_changing=!1}),2500))}},{key:"setAppstorePlatform",value:function(e){this.platform=e}},{key:"setPlatform",value:function(){var e=window.location.search;if(e){var t=new URLSearchParams(e).get("platform");t&&(this.platform=t,window.sessionStorage.setItem("config.platform",this.platform))}}},{key:"is_from_derivgo",get:function(){var e;return(null===(e=h.platforms[this.platform])||void 0===e?void 0:e.platform_name)===h.platforms.derivgo.platform_name}},{key:"setInitialRouteHistoryItem",value:function(e){if(-1!==window.location.href.indexOf("?ext_platform_url=")){var t=decodeURI(new URL(window.location.href).searchParams.get("ext_platform_url"));(0,this.root_store.client.setExternalParams)({url:t,should_redirect:!0}),0===(null==t?void 0:t.indexOf((0,h.getUrlSmartTrader)()))?this.addRouteHistoryItem({pathname:t,action:"PUSH",is_external:!0}):0===(null==t?void 0:t.indexOf(h.routes.cashier_p2p))?this.addRouteHistoryItem({pathname:t,action:"PUSH"}):0===(null==t?void 0:t.indexOf((0,h.getUrlBinaryBot)()))?this.addRouteHistoryItem({pathname:t,action:"PUSH",is_external:!0}):this.addRouteHistoryItem(fe(fe({},e),{},{action:"PUSH"})),window.history.replaceState({},document.title,window.location.pathname)}else this.addRouteHistoryItem(fe(fe({},e),{},{action:"PUSH"}))}},{key:"setServerTime",value:function(e){this.server_time=e}},{key:"setIsSocketOpened",value:function(e){var t=this.was_socket_opened&&e;this.is_socket_opened=e,this.was_socket_opened=this.was_socket_opened||e,t&&this.root_store.client.broadcastAccountChangeAfterAuthorize()}},{key:"setNetworkStatus",value:function(e,t){this.network_status.class?(this.network_status.class=e.class,this.network_status.tooltip=e.tooltip):this.network_status=e,this.is_network_online=t;var n=this.root_store.notifications,r=n.addNotificationMessage,o=n.client_notifications,i=n.removeNotificationMessage;t?i(o.you_are_offline):r(o.you_are_offline)}},{key:"setError",value:function(e,t){this.has_error=e,this.error=fe({type:t?t.type:"info"},t&&{header:t.header,message:t.message,redirect_label:t.redirect_label,redirectOnClick:t.redirectOnClick,should_show_refresh:t.should_show_refresh,redirect_to:t.redirect_to,should_clear_error_on_click:t.should_clear_error_on_click,should_redirect:t.should_redirect,setError:this.setError})}},{key:"showError",value:function(e){var t=e.message,n=e.header,r=e.redirect_label,o=e.redirectOnClick,i=e.should_show_refresh,a=e.redirect_to,c=e.should_clear_error_on_click,s=e.should_redirect;this.setError(!0,{header:n,message:t,redirect_label:r,redirectOnClick:o,should_show_refresh:i,redirect_to:a,should_clear_error_on_click:c,type:"error",should_redirect:s})}},{key:"setDepositURL",value:function(e){this.deposit_url=e}},{key:"setWithdrawURL",value:function(e){this.withdraw_url=e}},{key:"setServicesError",value:function(e){this.services_error=e,(0,h.isMobile)()?"CompanyWideLimitExceeded"===e.code||"PleaseAuthenticate"===e.code?this.root_store.ui.toggleServicesErrorModal(!0):this.root_store.ui.addToast({content:e.message,type:"error"}):this.root_store.ui.toggleServicesErrorModal(!0)}},{key:"setAppRouterHistory",value:function(e){this.app_router.history=e}},{key:"routeTo",value:function(e){this.app_router.history&&this.app_router.history.push(e)}},{key:"addRouteHistoryItem",value:function(e){var t=this.app_routing_history.findIndex((function(t){return t.pathname===e.pathname&&"PUSH"===t.action}));t>-1&&this.app_routing_history.splice(t,1),this.app_routing_history.unshift(e)}},{key:"routeBackInApp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=-1,r=this.app_routing_history.find((function(e,r){if("PUSH"===e.action){if(e.is_external)return!0;var o=e.pathname.split("/")[1];if([h.routes.mt5,h.routes.bot,h.routes.trade,h.routes.dxtrade].map((function(e){return e.split("/")[1]})).includes(o)||t.includes(e.pathname))return n=r,!0}return!1}));if(r){if(r.is_external)return void(window.location.href=r.pathname);if(n>-1){this.app_routing_history.splice(0,n+1);var o=this.root_store.ui;return void(r.pathname===h.routes.cashier_p2p&&o.is_mobile?e.push("".concat(r.pathname,"/verification")):e.push(r.pathname))}}e.push(h.routes.trade)}}],n&&ve(t.prototype,n),r&&ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(I);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Oe(){Oe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==xe(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Ae(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return(t=Te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Te(r.key),r)}}function Te(e){var t=function(e,t){if("object"!==xe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xe(t)?t:String(t)}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Me(e);if(t){var o=Me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ze(e)}(this,n)}}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(s,e);var t,n,r,o,a,c=Ie(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=c.call(this,{root_store:e})).is_gtm_applicable="deriv-app.binary.sx"===window.location.hostname||/^(16303|16929|19111|19112)$/.test((0,h.getAppId)()),(0,i.makeObservable)(ze(t),{visitorId:i.computed,common_variables:i.computed,accountSwitcherListener:i.action.bound,pushDataLayer:i.action.bound,pushTransactionData:i.action.bound,eventHandler:i.action.bound,setLoginFlag:i.action.bound}),t.onSwitchAccount(t.accountSwitcherListener),t}return t=s,n=[{key:"visitorId",get:function(){return this.root_store.client.loginid}},{key:"common_variables",get:function(){var e,t,n;return Ce(Ce({language:(0,g.getLanguage)()},this.root_store.client.is_logged_in&&{visitorId:this.visitorId,currency:this.root_store.client.currency,userId:this.root_store.client.user_id,email:this.root_store.client.email}),{},{loggedIn:this.root_store.client.is_logged_in,theme:this.root_store.ui.is_dark_mode_on?"dark":"light",platform:(e=new URL(window.location.href),t=e.hostname,n=e.pathname,/^(deriv-app\.binary.sx|app\.deriv\.com|staging-app\.deriv\.com|deriv.app|staging.deriv.app|localhost.binary.sx)$/.test(t)?"bot"===n?"DBot":n===h.CFD_PLATFORMS.MT5?"MT5":"DTrader":"undefined")})}},{key:"accountSwitcherListener",value:function(){var e=this;return new Promise((function(t){return t(e.pushDataLayer({event:"account switch"}))}))}},{key:"pushDataLayer",value:(o=Oe().mark((function e(t){var n=this;return Oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.is_gtm_applicable&&M().wait("authorize").then((function(){var e=Ce(Ce({},n.common_variables),t);e.event&&dataLayer.push(e)}));case 1:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){Ae(i,n,r,a,c,"next",e)}function c(e){Ae(i,n,r,a,c,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"pushTransactionData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.is_gtm_applicable&&!this.root_store.client.is_virtual&&e.transaction&&e.transaction.action&&["deposit","withdrawal"].includes(e.transaction.action)){var n=(0,h.toMoment)(),r="GTM_transactions",o=JSON.parse(localStorage.getItem(r))||{};Object.prototype.hasOwnProperty.call(o,"timestamp")&&n.isAfter((0,h.epochToMoment)(o.timestamp),"day")&&(localStorage.removeItem(r),o={timestamp:n.unix()});var i=o.transactions||[];if(!i.includes(e.transaction.transaction_id)){var a={event:"transaction",bom_account_type:this.root_store.client.account_type,bom_today:n.unix(),transaction:{id:e.transaction.transaction_id,type:e.transaction.action,time:e.transaction.transaction_time,amount:e.transaction.amount}};Object.assign(a,t),this.pushDataLayer(a),i.push(e.transaction.transaction_id),o.transactions=i,o.timestamp=o.timestamp||n.unix(),localStorage.setItem(r,JSON.stringify(o))}}}},{key:"eventHandler",value:function(e){if(this.is_gtm_applicable){var t=localStorage.getItem("GTM_login"),n="1"===localStorage.getItem("GTM_new_account");localStorage.removeItem("GTM_login"),localStorage.removeItem("GTM_new_account");var r=d.getJSON("affiliate_tracking");r&&this.pushDataLayer({affiliate_token:r});var o=(0,h.toMoment)(),i={visitorId:this.visitorId,account_type:this.root_store.client.account_type,currency:this.root_store.client.currency,country:e.country,country_abbrev:e.country_code,email:e.email,url:window.location.href,today:o.unix()};n&&(i.event="new_account",i.bom_date_joined=i.bom_today),t&&(i.event=t),this.pushDataLayer(i)}}},{key:"setLoginFlag",value:function(e){this.is_gtm_applicable&&e&&localStorage.setItem("GTM_login",e)}}],n&&Ne(t.prototype,n),r&&Ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(I);function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Re(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Re(i)?i:String(i)),r)}var o,i}var Ue=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=t}var t,n,r;return t=e,(n=[{key:"attachModule",value:function(e,t){this[e]=t}},{key:"detachModule",value:function(e){this[e]={}}}])&&Fe(t.prototype,n),r&&Fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),We=n(32735),Be=n(40001),Ge=n.n(Be),Ve=n(68461),Ye=n(34964),He=n(20026),qe=n(79479);function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return(t=ot(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(e){return function(e){if(Array.isArray(e))return Qe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(){et=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Ke(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function tt(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function nt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){tt(i,r,o,a,c,"next",e)}function c(e){tt(i,r,o,a,c,"throw",e)}a(void 0)}))}}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ot(r.key),r)}}function ot(e){var t=function(e,t){if("object"!==Ke(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ke(t)?t:String(t)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=st(e);if(t){var o=st(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ct(e)}(this,n)}}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},st(e)}var lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(l,e);var t,n,r,o,a,c=at(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,{root_store:e})).is_notifications_visible=!1,t.notifications=[],t.notification_messages=[],t.marked_notifications=[],t.push_notifications=[],t.client_notifications={},t.should_show_popups=!0,t.trade_notifications=[],t.p2p_order_props={},t.p2p_redirect_to={},t.p2p_completed_orders=null,t.handlePOAAddressMismatchNotifications=function(){var e=t.root_store.client.account_status.status;(0,qe.i$)(e||[]).poa_address_mismatch&&t.showPOAAddressMismatchWarningNotification()},t.showPOAAddressMismatchWarningNotification=function(){t.addNotificationMessage({key:"poa_address_mismatch_warning",header:(0,g.localize)("Please update your address"),message:(0,g.localize)("It appears that the address in your document doesn’t match the address in your Deriv profile. Please update your personal details now with the correct address."),action:{route:h.routes.personal_details,text:(0,g.localize)("Go to Personal details")},type:"warning",should_show_again:!0})},t.showPOAAddressMismatchSuccessNotification=function(){t.addNotificationMessage({key:"poa_address_mismatch_success",header:(0,g.localize)("Your proof of address has been verified"),type:"announce",should_show_again:!0,platform:"Account"})},t.showPOAAddressMismatchFailureNotification=function(){t.addNotificationMessage({key:"poa_address_mismatch_failure",header:(0,g.localize)("Your address doesn’t match your profile"),message:(0,g.localize)("Update the address in your profile."),type:"danger",should_show_again:!0,platform:"Account"})},(0,i.makeObservable)(ct(t),{addNotificationBar:i.action.bound,addNotificationMessage:i.action.bound,addNotificationMessageByKey:i.action.bound,addTradeNotification:i.action.bound,addVerificationNotifications:i.action.bound,client_notifications:i.observable,filterNotificationMessages:i.action.bound,getP2pCompletedOrders:i.action.bound,handleClientNotifications:i.action.bound,is_notifications_empty:i.computed,is_notifications_visible:i.observable,marked_notifications:i.observable,markNotificationMessage:i.action.bound,notification_messages:i.observable,notifications:i.observable,p2p_completed_orders:i.observable,p2p_order_props:i.observable,p2p_redirect_to:i.observable,push_notifications:i.observable,refreshNotifications:i.action.bound,removeAllNotificationMessages:i.action.bound,removeNotificationByKey:i.action.bound,removeNotificationMessage:i.action.bound,removeNotificationMessageByKey:i.action.bound,removeNotifications:i.action.bound,removeTradeNotifications:i.action.bound,resetVirtualBalanceNotification:i.action.bound,setClientNotifications:i.action.bound,setP2POrderProps:i.action.bound,setP2PRedirectTo:i.action.bound,setShouldShowPopups:i.action.bound,should_show_popups:i.observable,showCompletedOrderNotification:i.action.bound,toggleNotificationsModal:i.action.bound,trade_notifications:i.observable,unmarkNotificationMessage:i.action.bound,updateNotifications:i.action.bound});var n=Ge()(t.getP2pCompletedOrders,1e3);return(0,i.reaction)((function(){return e.common.app_routing_history.map((function(e){return e.pathname}))}),(function(){t.filterNotificationMessages(),t.marked_notifications=JSON.parse(h.LocalStore.get("marked_notifications")||"[]")})),(0,i.reaction)((function(){var n;return[e.client.account_settings,e.client.account_status,e.client.landing_companies,e.client.is_p2p_enabled,null===(n=e.common)||void 0===n?void 0:n.selected_contract_type,e.client.is_eu,e.client.has_enabled_two_fa,e.client.has_changed_two_fa,t.p2p_order_props.order_id,e.client.p2p_advertiser_info]}),nt(et().mark((function r(){return et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e.client.is_logged_in&&!e.client.is_virtual&&Object.keys(e.client.account_status||{}).length>0&&Object.keys(e.client.landing_companies||{}).length>0&&e.client.is_p2p_enabled)){r.next=3;break}return r.next=3,n();case 3:(!e.client.is_logged_in||Object.keys(e.client.account_status||{}).length>0&&Object.keys(e.client.landing_companies||{}).length>0)&&(t.removeNotifications(),t.removeAllNotificationMessages(),t.setClientNotifications(),t.handleClientNotifications(),t.filterNotificationMessages(),t.checkNotificationMessages());case 4:case"end":return r.stop()}}),r)})))),t}return t=l,n=[{key:"is_notifications_empty",get:function(){return!this.notifications.length}},{key:"addNotificationBar",value:function(e){this.push_notifications.push(e),this.push_notifications=(0,h.unique)(this.push_notifications,"msg_type")}},{key:"addNotificationMessage",value:function(e){if(e&&!this.notification_messages.find((function(t){return t.key===e.key}))){var t=h.LocalStore.get("active_loginid"),n=h.LocalStore.getObject("notification_messages");if(t){if(Array.isArray(n[t])&&n[t].includes(e.key))return void this.markNotificationMessage({key:e.key});var r=(0,h.isMobile)()?He.VL:He.JH;this.notification_messages=[].concat(Xe(this.notification_messages),[e]).sort(r),(["svg","p2p"].some((function(t){var n;return null===(n=e.key)||void 0===n?void 0:n.includes(t)}))||qe.rH&&!qe.rH.includes(e.key))&&this.updateNotifications()}}}},{key:"addNotificationMessageByKey",value:function(e){e&&this.addNotificationMessage(this.client_notifications[e])}},{key:"addTradeNotification",value:function(e){if(e){var t=e.buy_price,n=e.contract_id,r=e.contract_type,o=e.currency,i=e.profit,a=e.purchase_time,c=e.shortcode,s=e.status,l=e.underlying,u="".concat(n,"_").concat(s);if(!this.trade_notifications.some((function(e){return e.id===u}))){this.trade_notifications.push({id:u,buy_price:t,contract_id:n,contract_type:(0,h.getTradeTypeName)(r,(0,h.isHighLow)({shortcode:c}),(0,h.isTurbosContract)(r)),currency:o,profit:(0,h.isMultiplierContract)(r)&&!isNaN(i)?(0,h.getTotalProfit)(e):i,status:s,symbol:(0,h.getMarketName)(null!=l?l:(0,h.extractInfoFromShortcode)(c).underlying),timestamp:"open"===s?a:(0,h.getEndTime)(e)});var d=Math.floor(Date.now()/1e3)-100;this.trade_notifications=this.trade_notifications.filter((function(e){return e.timestamp>d}))}}}},{key:"addVerificationNotifications",value:function(e,t,n,r){"verified"===e.status?this.addNotificationMessage(this.client_notifications.poi_verified):["none","pending","expired"].includes(e.status)||this.addNotificationMessage(this.client_notifications.poi_failed),"verified"===t.status?this.addNotificationMessage(this.client_notifications.poa_verified):n?"pending"===t.status?this.addNotificationMessage(this.client_notifications.resticted_mt5_with_pending_poa):this.addNotificationMessage(this.client_notifications.resticted_mt5_with_failed_poa):r?this.addNotificationMessage(this.client_notifications.poa_rejected_for_mt5):["none","pending","expired"].includes(t.status)||this.addNotificationMessage(this.client_notifications.poa_failed)}},{key:"filterNotificationMessages",value:function(){var e=this;"null"!==h.LocalStore.get("active_loginid")&&this.resetVirtualBalanceNotification(h.LocalStore.get("active_loginid")),window.location.pathname===h.routes.personal_details?this.notification_messages=this.notification_messages.filter((function(e){return"Account"===e.platform||qe.vv.includes(e.key)})):window.location.pathname.includes(h.routes.cashier_p2p)||(this.notification_messages=this.notification_messages.filter((function(t){return!(void 0!==t.platform&&!t.platform.includes((0,h.getPathname)())&&(t.platform.includes((0,h.getPathname)())||t.is_disposable&&(e.removeNotificationMessage({key:t.key,should_show_again:t.should_show_again}),e.removeNotificationByKey({key:t.key})),1))})))}},{key:"checkNotificationMessages",value:function(){var e=this,t=h.LocalStore.getObject("notification_messages"),n=this.root_store.client.loginid,r=t[n]?Object.values(t[n]):[],o=h.LocalStore.getObject("p2p_settings"),i=!!o[n]&&o[n].is_notifications_visible;r.length&&r.map((function(t){t.includes("p2p")?!1===i&&e.removeNotificationByKey({key:t}):e.removeNotificationByKey({key:t})}))}},{key:"handleClientNotifications",value:(a=nt(et().mark((function e(){var t,n,r,o,i,a,c,s,l,u,d,_,f,p,m,g,v,y,b,w,E,k,S,x,O,A,L,C,P,N,T,j,I,z,M,D,R,F,U,W,B,G,V,Y,H,q,K,Z,$,J,X,Q,ee,te,ne,re,oe,ie,ae,ce,se,le,ue,de,_e,fe,pe,he,me,ge,ve,ye,be,we,Ee,ke,Se,xe,Oe,Ae,Le,Ce,Pe,Ne,Te,je,Ie,ze,Me,De=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store.client,o=r.account_settings,i=r.account_status,a=r.account_open_date,c=r.accounts,s=r.isAccountOfType,l=r.is_eu,u=r.is_identity_verification_needed,d=r.is_logged_in,_=r.is_tnc_needed,f=r.landing_company_shortcode,p=r.loginid,m=r.obj_total_balance,g=r.website_status,v=r.has_enabled_two_fa,y=r.has_changed_two_fa,b=r.is_poi_dob_mismatch,w=r.is_financial_assessment_needed,E=r.is_financial_information_incomplete,k=r.has_restricted_mt5_account,S=r.has_mt5_account_with_rejected_poa,x=r.is_pending_proof_of_ownership,O=r.p2p_advertiser_info,A=r.is_p2p_enabled,L=r.is_poa_expired,C=(O||{}).upgradable_daily_limits,N=(P=C||{}).max_daily_buy,T=P.max_daily_sell,j=this.root_store.modules.cashier.withdraw.is_10k_withdrawal_limit_reached,I=this.root_store.common,z=I.current_language,M=I.selected_contract_type,D="maltainvest"===f,R="svg"===f,F="up"===g.site_status,U=null===(t=h.LocalStore.getObject("notification_messages")[p])||void 0===t?void 0:t.includes(this.client_notifications.trustpilot.key),null!=g&&null!==(n=g.message)&&void 0!==n&&n.length?this.addNotificationMessage(this.client_notifications.site_maintenance):this.removeNotificationByKey({key:this.client_notifications.site_maintenance}),!d){e.next=60;break}if(!(0,h.isEmptyObject)(i)){e.next=13;break}return e.abrupt("return");case 13:if(W=i.authentication,B=W.document,G=W.identity,V=W.income,Y=W.needs_verification,H=W.ownership,q=i.status,K=i.cashier_validation,Z=(0,qe.i$)(q||[]),$=Z.cashier_locked,J=Z.deposit_locked,X=Z.document_needs_action,Q=Z.mt5_withdrawal_locked,ee=Z.personal_details_locked,te=Z.poi_name_mismatch,ne=Z.withdrawal_locked,this.handlePOAAddressMismatchNotifications(),null!=q&&q.includes("mt5_additional_kyc_required")&&this.addNotificationMessage(this.client_notifications.additional_kyc_info),!v&&m.amount_real>0?this.addNotificationMessage(this.client_notifications.two_f_a):this.removeNotificationByKey({key:this.client_notifications.two_f_a.key}),D&&E?this.addNotificationMessage(this.client_notifications.need_fa):this.removeNotificationByKey({key:this.client_notifications.need_fa}),b?this.addNotificationMessage(this.client_notifications.poi_dob_mismatch):this.removeNotificationByKey({key:this.client_notifications.poi_dob_mismatch}),L?this.addNotificationMessage(this.client_notifications.poa_expired):this.removeNotificationByKey({key:this.client_notifications.poa_expired}),p===h.LocalStore.get("active_loginid")){e.next=23;break}return e.abrupt("return");case 23:if(w?this.addNotificationMessage(this.client_notifications.notify_financial_assessment):this.removeNotificationByKey({key:this.client_notifications.notify_financial_assessment.key}),y&&this.addNotificationMessage(this.client_notifications.has_changed_two_fa),!(re=c[p])||re.is_virtual){e.next=60;break}if(!(0,h.isEmptyObject)(i)){e.next=29;break}return e.abrupt("return");case 29:if(p===h.LocalStore.get("active_loginid")){e.next=31;break}return e.abrupt("return");case 31:ce=K?(0,qe.XE)(K):{},se=ce.cashier_locked_status,le=ce.documents_expired,ue=ce.FinancialAssessmentRequired,de=ce.is_virtual,_e=ce.no_residence,fe=ce.no_withdrawal_or_trading_status,pe=ce.SelfExclusion,he=ce.system_maintenance,me=ce.unwelcome_status,ge=ce.withdrawal_locked_status,ve=ce.ASK_AUTHENTICATE,ye=ce.ASK_CURRENCY,be=ce.ASK_FINANCIAL_RISK_APPROVAL,we=ce.ASK_FIX_DETAILS,Ee=ce.ASK_SELF_EXCLUSION_MAX_TURNOVER_SET,ke=ce.ASK_TIN_INFORMATION,Se=ce.ASK_UK_FUNDS_PROTECTION,xe=j&&(Y.includes("document")||"verified"!==(null==B?void 0:B.status)),Oe=j&&"verified"!==(null==G?void 0:G.status),Ae=Y.includes("income")&&["rejected","none"].includes(null==V?void 0:V.status),Le=Y.includes("income")&&"locked"===(null==V?void 0:V.status),Ce=null==G?void 0:G.services.onfido.submissions_left,Pe=(null==H||null===(oe=H.requests)||void 0===oe?void 0:oe.length)>0&&"rejected"!==(null==H||null===(ie=H.status)||void 0===ie?void 0:ie.toLowerCase()),Ne=x&&"rejected"===(null==H||null===(ae=H.status)||void 0===ae?void 0:ae.toLowerCase()),Te=R&&q.includes("allow_document_upload")&&"none"===(null==G?void 0:G.status)&&"none"===(null==B?void 0:B.status),je=R&&q.includes("allow_document_upload")&&"none"===(null==B?void 0:B.status),Ie=R&&q.includes("allow_document_upload")&&"none"===(null==G?void 0:G.status),ze=R&&"expired"===(null==G?void 0:G.status),this.addVerificationNotifications(G,B,k,S),xe&&this.addNotificationMessage(this.client_notifications.needs_poa),Oe&&this.addNotificationMessage(this.client_notifications.needs_poi),Ae&&this.addNotificationMessage(this.client_notifications.needs_poinc),Le&&this.addNotificationMessage(this.client_notifications.poinc_upload_limited),te&&null!=G&&G.services.onfido.last_rejected&&!ee&&Ce>0&&this.addNotificationMessage(this.client_notifications.poi_name_mismatch),he?(this.setClientNotifications(re),this.addNotificationMessage(this.client_notifications.system_maintenance(ne,J))):$?de?this.addNotificationMessage(this.client_notifications.is_virtual):_e?this.addNotificationMessage(this.client_notifications.no_residence):le?this.addNotificationMessage(this.client_notifications.documents_expired):se?this.addNotificationMessage(this.client_notifications.cashier_locked):ye?this.addNotificationMessage(this.client_notifications.currency):ve&&u?this.addNotificationMessage(this.client_notifications.identity):ve?this.addNotificationMessage(this.client_notifications.authenticate):s("financial")&&be?this.addNotificationMessage(this.client_notifications.ask_financial_risk_approval):ue?this.addNotificationMessage(this.client_notifications.risk):s("financial")&&ke?this.addNotificationMessage(this.client_notifications.tax):Se?this.addNotificationMessage(this.client_notifications.ask_uk_funds_protection):Ee?this.addNotificationMessage(this.client_notifications.max_turnover_limit_not_set):we?this.addNotificationMessage(this.client_notifications.required_fields(ne,J)):this.addNotificationMessage(this.client_notifications.cashier_locked):(ne&&(ve?this.addNotificationMessage(this.client_notifications.withdrawal_locked_review):fe?this.addNotificationMessage(this.client_notifications.no_withdrawal_or_trading):ge?this.addNotificationMessage(this.client_notifications.withdrawal_locked):we&&this.addNotificationMessage(this.client_notifications.required_fields(ne,J))),J&&(pe?this.addNotificationMessage(this.client_notifications.self_exclusion(re.excluded_until)):me&&this.addNotificationMessage(this.client_notifications.unwelcome))),Q&&this.addNotificationMessage(this.client_notifications.mt5_withdrawal_locked),X&&this.addNotificationMessage(this.client_notifications.document_needs_action),A?(this.addNotificationMessage(this.client_notifications.dp2p),null===(Me=this.p2p_completed_orders)||void 0===Me||Me.map((function(e){var t=e.advertiser_details,n=e.client_details,r=e.id,o=e.is_reviewable,i=e.status,a=e.type;o&&("buy"===a&&"completed"===i&&n.loginid===p&&De.showCompletedOrderNotification(t.name,r),"sell"===a&&"completed"===i&&t.loginid===p&&De.showCompletedOrderNotification(n.name,r))})),C&&this.addNotificationMessage(this.client_notifications.p2p_daily_limit_increase(re.currency,N,T))):this.removeNotificationMessageByKey({key:this.client_notifications.dp2p.key}),F&&!U&&(0,h.daysSince)(a)>7&&this.addNotificationMessage(this.client_notifications.trustpilot),_&&this.addNotificationMessage(this.client_notifications.tnc),(0,qe.s4)(o,re,s)&&this.addNotificationMessage(this.client_notifications.required_fields(ne,J)),Pe&&this.addNotificationMessage(this.client_notifications.poo_required),Ne&&this.addNotificationMessage(this.client_notifications.poo_rejected),Te?this.addNotificationMessage(this.client_notifications.svg_needs_poi_poa):je?this.addNotificationMessage(this.client_notifications.svg_needs_poa):Ie?this.addNotificationMessage(this.client_notifications.svg_needs_poi):ze&&this.addNotificationMessage(this.client_notifications.svg_poi_expired);case 60:!l&&(0,h.isMultiplierContract)(M)&&"EN"===z&&d?this.addNotificationMessage(this.client_notifications.deriv_go):this.removeNotificationMessageByKey({key:this.client_notifications.deriv_go.key});case 61:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"showCompletedOrderNotification",value:function(e,t){var n=this,r="p2p_order_".concat(t),o=this.p2p_order_props,i=o.setP2POrderTab,a=o.navigateToOrderDetails,c=window.location.pathname.includes(h.routes.cashier_p2p)?{onClick:function(){i(t),a(t),n.setP2POrderProps($e($e({},n.p2p_order_props),{},{order_id:t})),n.is_notifications_visible&&n.toggleNotificationsModal(),n.refreshNotifications()},text:(0,g.localize)("Give feedback")}:{route:"".concat(h.routes.p2p_orders,"?order=").concat(t),text:(0,g.localize)("Give feedback")};this.addNotificationMessage({action:c,header:We.createElement(g.Localize,{i18n_default_text:"Your order {{order_id}} is complete",values:{order_id:t}}),key:r,message:We.createElement(g.Localize,{i18n_default_text:"{{name}} has released your funds. <br/> Would you like to give your feedback?",values:{name:e}}),platform:"P2P",type:"p2p_completed_order"})}},{key:"markNotificationMessage",value:function(e){var t=e.key;this.marked_notifications.includes(t)||(this.marked_notifications.push(t),h.LocalStore.set("marked_notifications",JSON.stringify(this.marked_notifications)))}},{key:"refreshNotifications",value:function(){this.removeNotifications(!0),this.removeAllNotificationMessages(),this.setClientNotifications(),this.handleClientNotifications()}},{key:"removeAllNotificationMessages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.notification_messages=e?[]:Xe(this.notification_messages.filter((function(e){return e.is_persistent})))}},{key:"removeNotifications",value:function(e){this.notifications=e?[]:Xe(this.notifications.filter((function(e){return e.is_persistent})))}},{key:"removeTradeNotifications",value:function(e){this.trade_notifications=e?this.trade_notifications.filter((function(t){return t.id!==e})):[]}},{key:"removeNotificationByKey",value:function(e){var t=e.key;this.notifications=this.notifications.filter((function(e){return e.key!==t}))}},{key:"removeNotificationMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=e.should_show_again;if(t){this.notification_messages=this.notification_messages.filter((function(e){return e.key!==t}));var r=h.LocalStore.get("active_loginid");if(!qe.rH.includes(t)&&r){var o=h.LocalStore.getObject("notification_messages");if(o[r]&&o[r].includes(t))return;n||(o=$e($e({},o),{},Je({},r,Array.isArray(o[r])?(o[r].push(t),o[r]):[t])),h.LocalStore.setObject("notification_messages",o))}}}},{key:"removeNotificationMessageByKey",value:function(e){var t=e.key;this.notification_messages=this.notification_messages.filter((function(e){return e.key!==t}))}},{key:"resetVirtualBalanceNotification",value:function(e){var t,n,r=this.root_store.client,o=r.accounts;if(r.is_logged_in&&null!==(t=o[e])&&void 0!==t&&t.is_virtual){var i=999e3,a=parseInt(null===(n=o[e])||void 0===n?void 0:n.balance);if(a<=1e3||a>=i){var c=(0,g.localize)("Your demo account balance is low. Reset your balance to continue trading from your demo account.");a>=i&&(c=(0,g.localize)("Your demo account balance has reached the maximum limit, and you will not be able to place new trades. Reset your balance to continue trading from your demo account.")),this.setClientNotifications({resetVirtualBalance:this.root_store.client.resetVirtualBalance,message:c}),this.addNotificationMessage(this.client_notifications.reset_virtual_balance)}else this.removeNotificationByKey({key:"reset_virtual_balance"}),this.removeNotificationMessage({key:"reset_virtual_balance",should_show_again:!0})}}},{key:"setClientNotifications",value:function(){var e,t,n,r,o=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.root_store.ui,c=this.root_store.client,l=c.has_enabled_two_fa,u=c.setTwoFAChangedStatus,d=c.logout,_=this.root_store.traders_hub.setMT5NotificationModal,f=l?(0,g.localize)("enabled"):(0,g.localize)("disabled"),p=(0,h.getPlatformSettings)("trader").name,m=(0,h.getPlatformSettings)("go").name,v={ask_financial_risk_approval:{key:"ask_financial_risk_approval",header:(0,g.localize)("Complete your Appropriateness Test"),message:(0,g.localize)("Please click the following link to complete your Appropriateness Test."),action:{route:h.routes.financial_assessment,text:(0,g.localize)("Click here")},type:"warning"},ask_uk_funds_protection:{key:"ask_uk_funds_protection",header:(0,g.localize)("Your cashier is locked"),message:(0,g.localize)("See how we protect your funds to unlock the cashier."),action:{route:h.routes.cashier_deposit,text:(0,g.localize)("Find out more")},type:"warning"},authenticate:{key:"authenticate",header:(0,g.localize)("Your account has not been verified"),message:(0,g.localize)("Please submit your proof of identity and proof of address to verify your account in your account settings to access the cashier."),action:{route:h.routes.proof_of_identity,text:(0,g.localize)("Go to my account settings")},type:"warning"},cashier_locked:{key:"cashier_locked",header:(0,g.localize)("Your cashier is currently locked"),message:(0,g.localize)("Please contact us via live chat to unlock it."),action:{onClick:function(){window.LC_API.open_chat_window()},text:(0,g.localize)("Go to live chat")},type:"warning"},trustpilot:{key:"trustpilot",header:(0,g.localize)("Enjoy using Deriv?"),header_popup:(0,g.localize)("We’d love to hear your thoughts"),message:(0,g.localize)("Drop your review on Trustpilot."),message_popup:(0,g.localize)("Drop your review on Trustpilot."),action:{onClick:function(){window.open("https://www.trustpilot.com/evaluate/deriv.com","_blank"),o.removeNotificationByKey({key:o.client_notifications.trustpilot.key}),o.removeNotificationMessage({key:o.client_notifications.trustpilot.key,should_show_again:!1})},text:(0,g.localize)("Go to Trustpilot")},img_src:(0,h.getUrlBase)("/public/images/common/trustpilot_banner.png"),img_alt:"Trustpilot",className:"trustpilot",type:"trustpilot"},currency:{key:"currency",header:(0,g.localize)("You have not selected your account currency"),message:(0,g.localize)("Please set your account currency to enable deposits and withdrawals."),action:{onClick:function(){a.openRealAccountSignup("set_currency")},text:(0,g.localize)("Set my account currency")},type:"danger"},p2p_daily_limit_increase:function(e,t,n){return{action:window.location.pathname.includes(h.routes.cashier_p2p)?{onClick:function(){o.p2p_redirect_to.routeToMyProfile(),o.is_notifications_visible&&o.toggleNotificationsModal(),o.removeNotificationMessage({key:"p2p_daily_limit_increase",should_show_again:!1})},text:(0,g.localize)("Yes, increase my limits")}:{route:h.routes.p2p_my_profile,text:(0,g.localize)("Yes, increase my limits")},header:We.createElement(g.Localize,{i18n_default_text:"Enjoy higher daily limits"}),key:"p2p_daily_limit_increase",message:We.createElement(g.Localize,{i18n_default_text:"Would you like to increase your daily limits to {{max_daily_buy}} {{currency}} (buy) and {{max_daily_sell}} {{currency}} (sell)?",values:{currency:e,max_daily_buy:(0,h.formatMoney)(i.currency,t,!0),max_daily_sell:(0,h.formatMoney)(i.currency,n,!0)}}),platform:"P2P",type:"announce"}},deriv_go:{key:"deriv_go",header:We.createElement(g.Localize,{i18n_default_text:"Trade on the go"}),message:We.createElement(g.Localize,{i18n_default_text:"Get a faster mobile trading experience with the <0>{{platform_name_go}}</0> app!",components:[We.createElement(Ve.StaticUrl,{key:0,className:"link dark",href:"/landing/deriv-go"})],values:{platform_name_go:m}}),cta_btn:{text:(0,g.localize)("Learn more"),onClick:function(){window.open((0,h.getStaticUrl)("/landing/deriv-go"),"_blank")}},img_src:(0,h.getUrlBase)("/public/images/common/derivgo_banner.png"),img_alt:"deriv_go",type:"promotions"},documents_expired:{key:"poi_expired",header:(0,g.localize)("You submitted expired identification documents"),message:(0,g.localize)("Please submit valid identity documents to unlock the cashier."),action:{route:h.routes.proof_of_identity,text:(0,g.localize)("Submit identity documents")},type:"danger"},document_needs_action:{key:"document_needs_action",header:(0,g.localize)("Authentication failed"),message:We.createElement(g.Localize,{i18n_default_text:"<0>Your Proof of Identity or Proof of Address</0> did not meet our requirements. Please check your email for further instructions.",components:[We.createElement(Ye.CG,{key:0,className:"link",to:h.routes.proof_of_identity})]}),type:"warning"},dp2p:{key:"dp2p",header:(0,g.localize)("Payment problems?"),message:(0,g.localize)("There’s an app for that"),primary_btn:{text:(0,g.localize)("Learn more"),onClick:function(){window.open((0,h.getStaticUrl)("/p2p"),"_blank")}},img_src:(0,h.getUrlBase)("/public/images/common/dp2p_banner.png"),img_alt:"Deriv P2P",type:"news"},identity:{key:"identity",header:(0,g.localize)("Let’s verify your ID"),message:(0,g.localize)("You need to make a quick identity verification before you can access the Cashier. Please go to your account settings to submit your proof of identity."),action:{route:h.routes.proof_of_identity,text:(0,g.localize)("Go to my account settings")},type:"warning"},install_pwa:{key:"install_pwa",action:{onClick:function(){return a.installWithDeferredPrompt()},text:(0,g.localize)("Install")},header:(0,g.localize)("Install the {{platform_name_trader}} web app",{platform_name_trader:p}),message:(0,g.localize)("Launch {{platform_name_trader}} in seconds the next time you want to trade.",{platform_name_trader:p}),type:"announce",should_hide_close_btn:!1},is_virtual:{key:"is_virtual",header:(0,g.localize)("You are on your demo account"),message:(0,g.localize)("Please switch to your real account or create one to access the cashier."),type:"warning"},max_turnover_limit_not_set:{key:"max_turnover_limit_not_set",header:(0,g.localize)("You’ve not set your 30-day turnover limit"),message:(0,g.localize)("Your access to the cashier has been temporarily disabled as you have not set your 30-day turnover limit. Please go to Self-exclusion and set the limit."),action:{route:h.routes.self_exclusion,text:(0,g.localize)("Go to Self-exclusion")},type:"danger"},mt5_withdrawal_locked:{key:"mt5_withdrawal_locked",header:(0,g.localize)("MT5 withdrawal disabled"),message:(0,g.localize)("MT5 withdrawals have been disabled on your account. Please check your email for more details."),type:"warning"},needs_poa:{action:{route:h.routes.proof_of_address,text:(0,g.localize)("Verify address")},key:"needs_poa",header:(0,g.localize)("Please verify your proof of address"),message:(0,g.localize)("To continue trading with us, please confirm where you live."),type:"danger"},needs_poi:{action:{route:h.routes.proof_of_identity,text:(0,g.localize)("Verify identity")},key:"needs_poi",header:(0,g.localize)("Please verify your proof of identity"),message:(0,g.localize)("To continue trading with us, please confirm who you are."),type:"danger"},needs_poinc:{action:{route:h.routes.proof_of_income,text:(0,g.localize)("Go to my account settings")},key:"needs_poinc",header:(0,g.localize)("Please verify your proof of income"),message:(0,g.localize)("To continue trading with us, please submit your proof of income."),type:"warning"},new_version_available:{action:{onClick:function(){return window.location.reload()},text:(0,g.localize)("Refresh now")},key:"new_version_available",header:(0,g.localize)("A new version of Deriv is available"),message:(0,g.localize)("This page will automatically refresh in 5 minutes to load the latest version."),type:"warning",should_hide_close_btn:!0,timeout:3e5,timeoutMessage:function(e){return(0,g.localize)("Auto update in {{ remaining }} seconds",{remaining:e})}},no_residence:{key:"no_residence",header:(0,g.localize)("You have not selected your country of residence"),message:(0,g.localize)("Please set your country of residence in your account settings to access the cashier."),action:{route:h.routes.personal_details,text:(0,g.localize)("Go to my account settings")},type:"warning"},no_withdrawal_or_trading:{key:"no_withdrawal_or_trading",header:(0,g.localize)("You are only allowed to make deposits"),message:(0,g.localize)("Please contact us via live chat to enable withdrawals."),action:{onClick:function(){window.LC_API.open_chat_window()},text:(0,g.localize)("Go to live chat")},type:"warning"},notify_financial_assessment:{action:{route:h.routes.financial_assessment,text:(0,g.localize)("Start now")},header:(0,g.localize)("Pending action required"),key:"notify_financial_assessment",message:(0,g.localize)("Please complete your financial assessment."),should_show_again:!0,type:"warning"},password_changed:{key:"password_changed",header:(0,g.localize)("Password updated."),message:We.createElement(g.Localize,{i18n_default_text:"Please log in with your updated password."}),type:"info"},poa_rejected_for_mt5:{action:{route:h.routes.proof_of_address,text:(0,g.localize)("Resubmit proof of address")},key:"poa_rejected_for_mt5",header:(0,g.localize)("Please resubmit your proof of address or we may restrict your account."),message:(0,g.localize)("Please submit your proof of address."),type:"danger"},poa_failed:{action:{route:h.routes.proof_of_address,text:(0,g.localize)("Resubmit proof of address")},key:"poa_failed",header:(0,g.localize)("Please resubmit your proof of address."),type:"danger"},poa_verified:{key:"poa_verified",header:(0,g.localize)("Your proof of address is verified."),type:"announce",should_hide_close_btn:!1},poa_expired:{key:"poa_expired",header:We.createElement(g.Localize,{i18n_default_text:"Lets get your address verified"}),message:We.createElement(g.Localize,{i18n_default_text:"Please submit your proof of address"}),type:"warning",action:{route:h.routes.proof_of_address,text:(0,g.localize)("Submit now")}},poi_failed:{action:{route:h.routes.proof_of_identity,text:(0,g.localize)("Resubmit proof of identity")},key:"poi_failed",header:(0,g.localize)("Your proof of identity verification has failed"),message:(0,g.localize)("Please submit your proof of identity."),type:"danger"},poi_verified:{key:"poi_verified",header:(0,g.localize)("Your proof of identity is verified."),type:"announce",should_hide_close_btn:!1},poi_name_mismatch:{action:{route:h.routes.personal_details,text:(0,g.localize)("Personal details")},key:"poi_name_mismatch",header:(0,g.localize)("Please update your personal info"),message:We.createElement(g.Localize,{i18n_default_text:"It seems that your name in the document is not the same as your Deriv profile. Please update your name in the <0>Personal details</0> page to solve this issue.",components:[We.createElement("strong",{key:0})]}),type:"warning"},poinc_upload_limited:{key:"poinc_upload_limited",header:(0,g.localize)("You've reached the limit of uploading your documents."),message:(0,g.localize)("Please check your email."),type:"danger"},resticted_mt5_with_pending_poa:{key:"resticted_mt5_with_pending_poa",header:(0,g.localize)("Your proof of address verification is pending"),message:(0,g.localize)("Your address verification is pending, and we’ve placed some restrictions on your account. The restrictions will be lifted once your address is verified."),type:"danger"},resticted_mt5_with_failed_poa:{action:{route:h.routes.proof_of_address,text:(0,g.localize)("Resubmit proof of address")},key:"resticted_mt5_with_failed_poa",header:(0,g.localize)("Your proof of address verification has failed"),message:(0,g.localize)("Your proof of address did not pass our verification checks, and we’ve placed some restrictions on your account. Please resubmit your proof of address."),type:"danger"},required_fields:function(e,t){var n;return n=e?(0,g.localize)("Please go to your account settings and complete your personal details to enable withdrawals."):t?(0,g.localize)("Please go to your account settings and complete your personal details to enable deposits."):(0,g.localize)("Please go to your account settings and complete your personal details to enable deposits and withdrawals."),{key:"required_fields",header:(0,g.localize)("Your personal details are incomplete"),message:n,type:"danger",action:{route:h.routes.personal_details,text:(0,g.localize)("Go to my account settings")}}},reset_virtual_balance:{key:"reset_virtual_balance",header:(0,g.localize)("Reset your balance"),message:i.message,type:"info",is_persistent:!0,should_show_again:!0,is_disposable:!0,action:{text:(0,g.localize)("Reset balance"),onClick:(r=nt(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.resetVirtualBalance();case 2:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}},risk:{key:"risk",header:(0,g.localize)("Your cashier is locked"),message:(0,g.localize)("Please complete the financial assessment in your account settings to unlock it."),action:{route:h.routes.financial_assessment,text:(0,g.localize)("Go to my account settings")},type:"warning"},self_exclusion:function(e){return{key:"self_exclusion",header:(0,g.localize)("You have self-excluded from trading"),message:We.createElement(g.Localize,{i18n_default_text:"You have chosen to exclude yourself from trading on our website until {{exclusion_end}}. If you are unable to place a trade or deposit after your self-exclusion period, please contact us via live chat.",values:{exclusion_end:(0,h.formatDate)(e,"DD MMM, YYYY"),interpolation:{escapeValue:!1}}}),action:{onClick:function(){window.LC_API.open_chat_window()},text:(0,g.localize)("Go to live chat")},type:"danger"}},site_maintenance:{key:"site_maintenance",header:(0,g.localize)("We’re updating our site"),message:(0,g.localize)("Some services may be temporarily unavailable."),type:"warning",should_show_again:!0,closeOnClick:function(e){return o.markNotificationMessage({key:e.key})}},system_maintenance:function(e,t){var n,r;return(0,h.isCryptocurrency)(i.currency)?e?(r=(0,g.localize)("Unable to process withdrawals in the moment"),n=(0,g.localize)("Withdrawals are temporarily unavailable due to system maintenance. You can make withdrawals when the maintenance is complete.")):t?(r=(0,g.localize)("Unable to process deposit in the moment"),n=(0,g.localize)("Deposits are temporarily unavailable due to system maintenance. You can make deposits when the maintenance is complete.")):(r=(0,g.localize)("Scheduled cashier system maintenance"),n=(0,g.localize)("Our cryptocurrency cashier is temporarily down due to system maintenance. You can make cryptocurrency deposits and withdrawals in a few minutes when the maintenance is complete.")):(r=(0,g.localize)("Scheduled cashier maintenance"),n=(0,g.localize)("The cashier is temporarily down due to maintenance. It will be available as soon as the maintenance is complete.")),{key:"system_maintenance",header:r,message:n,type:"warning",should_show_again:!0,closeOnClick:function(e){return o.markNotificationMessage({key:e.key})}}},tax:{key:"tax",header:(0,g.localize)("You have not provided your tax identification number"),message:(0,g.localize)("This information is necessary for legal and regulatory requirements. Please go to your account settings, and fill in your latest tax identification number."),action:{route:h.routes.personal_details,text:(0,g.localize)("Go to my account settings")},type:"danger"},tnc:{action:{onClick:(n=nt(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WS.tncApproval();case 2:s.WS.getSettings();case 3:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)}),text:(0,g.localize)("I accept")},key:"tnc",header:(0,g.localize)("Terms & conditions updated"),message:We.createElement(g.Localize,{i18n_default_text:"Please accept our <0>updated Terms and Conditions</0> to proceed.",components:[We.createElement(Ve.StaticUrl,{key:0,className:"link",href:"terms-and-conditions"})]}),type:"warning"},has_changed_two_fa:{key:"has_changed_two_fa",header:(0,g.localize)("Logging out on other devices"),message:We.createElement(g.Localize,{i18n_default_text:"You've {{two_fa_status}} 2FA on this device. You'll be logged out of your account on other devices (if any). Use your password and a 2FA code to log back in.",values:{two_fa_status:f}}),type:"info",delay:4e3,is_auto_close:!0,closeOnClick:function(){u(!1)}},two_f_a:{key:"two_f_a",header:(0,g.localize)("Stronger security for your Deriv account"),message:(0,g.localize)("With two-factor authentication, you’ll protect your account with both your password and your phone - so only you can access your account, even if someone knows your password."),action:{route:h.routes.two_factor_authentication,text:(0,g.localize)("Secure my account")},type:"warning"},unwelcome:{key:"unwelcome",header:(0,g.localize)("Deposits are locked"),message:(0,g.localize)("Please contact us via live chat."),action:{onClick:function(){window.LC_API.open_chat_window()},text:(0,g.localize)("Go to live chat")},type:"danger"},withdrawal_locked:{key:"withdrawal_locked",header:(0,g.localize)("You are only allowed to make deposits"),message:(0,g.localize)("Please contact us via live chat to enable withdrawals."),action:{onClick:function(){window.LC_API.open_chat_window()},text:(0,g.localize)("Go to live chat")},type:"warning"},withdrawal_locked_review:{key:"withdrawal_locked_review",header:(0,g.localize)("You are unable to make withdrawals"),message:We.createElement(g.Localize,{i18n_default_text:"To enable withdrawals, please submit your <0>Proof of Identity (POI)</0> and <1>Proof of Address (POA)</1> and also complete the <2>financial assessment</2> in your account settings.",components:[We.createElement("a",{key:0,className:"link dark",href:"/account/proof-of-identity"}),We.createElement("a",{key:1,className:"link dark",href:"/account/proof-of-address"}),We.createElement("a",{key:2,className:"link dark",href:"/account/financial-assessment"})]}),type:"warning"},you_are_offline:{key:"you_are_offline",header:(0,g.localize)("You are offline"),message:We.createElement(g.Localize,{i18n_default_text:"Check your connection."}),type:"danger"},poi_dob_mismatch:{key:"poi_dob_mismatch",header:(0,g.localize)("Please update your personal info"),message:We.createElement(g.Localize,{i18n_default_text:"It seems that your date of birth in the document is not the same as your Deriv profile. Please update your date of birth in the <0>Personal details</0> page to solve this issue.",components:[We.createElement("strong",{key:0})]}),type:"warning",action:{route:h.routes.personal_details,text:(0,g.localize)("Personal details")}},poo_required:{key:"poo_required",header:We.createElement(g.Localize,{i18n_default_text:"<0>Proof of ownership</0> <1>required</1>",components:[We.createElement("div",{key:0}),We.createElement("div",{key:1})]}),message:We.createElement(g.Localize,{i18n_default_text:"<0></0><1>Your account is currently locked</1> <2></2><3>Please upload your proof of</3> <4>ownership to unlock your account.</4> <5></5>",components:[We.createElement("br",{key:0}),We.createElement("div",{key:1}),We.createElement("br",{key:2}),We.createElement("div",{key:3}),We.createElement("div",{key:4}),We.createElement("br",{key:5})]}),action:{route:h.routes.proof_of_ownership,text:(0,g.localize)("Upload my document")},type:"warning"},poo_rejected:{key:"poo_rejected",header:We.createElement(g.Localize,{i18n_default_text:"<0>Proof of ownership</0> <1>verification failed</1>",components:[We.createElement("div",{key:0}),We.createElement("div",{key:1})]}),message:We.createElement(g.Localize,{i18n_default_text:"<0></0><1>Please upload your document</1> <2>with the correct details.</2> <3></3>",components:[We.createElement("br",{key:0}),We.createElement("div",{key:1}),We.createElement("div",{key:2}),We.createElement("br",{key:3})]}),action:{route:h.routes.proof_of_ownership,text:(0,g.localize)("Upload again")},type:"warning"},need_fa:{key:"need_fa",header:(0,g.localize)("You can only make deposits."),message:We.createElement(g.Localize,{i18n_default_text:"You can only make deposits at the moment. To enable withdrawals, please complete your financial assessment."}),type:"warning",action:{route:h.routes.financial_assessment,text:(0,g.localize)("Start assessment")},should_show_again:!0,closeOnClick:function(e){return o.markNotificationMessage({key:e.key})}},svg_needs_poi_poa:{key:"svg_needs_poi_poa",header:(0,g.localize)("Account verification required"),message:We.createElement(g.Localize,{i18n_default_text:"Please submit your proof of identity and proof of address to verify your account and continue trading."}),type:"warning",action:{route:h.routes.proof_of_identity,text:(0,g.localize)("Go to my account settings")}},svg_needs_poa:{key:"svg_needs_poa",header:(0,g.localize)("Proof of address required"),message:We.createElement(g.Localize,{i18n_default_text:"Please submit your proof of address to verify your account and continue trading."}),type:"warning",action:{route:h.routes.proof_of_address,text:(0,g.localize)("Submit proof of address")}},svg_needs_poi:{key:"svg_needs_poi",header:(0,g.localize)("Proof of identity required"),message:We.createElement(g.Localize,{i18n_default_text:"Please submit your proof of identity to verify your account and continue trading."}),type:"warning",action:{route:h.routes.proof_of_identity,text:(0,g.localize)("Submit proof of identity")}},svg_poi_expired:{key:"svg_poi_expired",header:(0,g.localize)("Your proof of identity is expired"),message:We.createElement(g.Localize,{i18n_default_text:"Your proof of identity has expired. Please submit a new proof of identity to verify your account and continue trading."}),type:"warning",action:{route:h.routes.proof_of_identity,text:(0,g.localize)("Resubmit proof of identity")}},wallets_migrated:{key:"wallets_migrated",header:(0,g.localize)("Your Wallets are ready"),message:(0,g.localize)("To complete the upgrade, please log out and log in again to add more accounts and make transactions with your Wallets."),action:{onClick:(t=nt(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),text:(0,g.localize)("Log out")},type:"announce"},wallets_failed:{key:"wallets_failed",header:(0,g.localize)("Sorry for the interruption"),message:(0,g.localize)("We're unable to complete with the Wallet upgrade. Please try again later or contact us via live chat."),action:{onClick:(e=nt(et().mark((function e(){return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.LC_API.open_chat_window();case 1:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),text:(0,g.localize)("Go to LiveChat")},type:"danger"},mt5_notification:{key:"mt5_notification",header:(0,g.localize)("Deriv MT5: Your action is needed"),message:(0,g.localize)("Follow these simple instructions to fix it."),action:{text:(0,g.localize)("Learn more"),onClick:function(){_(!0)}},type:"warning"},additional_kyc_info:{key:"additional_kyc_info",header:We.createElement(g.Localize,{i18n_default_text:"Pending action required"}),message:We.createElement(g.Localize,{i18n_default_text:"We require additional information for your Deriv MT5 account(s). Please take a moment to update your information now."}),action:{text:(0,g.localize)("Update now"),onClick:function(){o.is_notifications_visible&&o.toggleNotificationsModal(),a.toggleAdditionalKycInfoModal(),o.markNotificationMessage({key:"additional_kyc_info"})}},type:"warning"}};this.client_notifications=v}},{key:"setP2POrderProps",value:function(e){this.p2p_order_props=e}},{key:"setP2PRedirectTo",value:function(e){this.p2p_redirect_to=e}},{key:"setShouldShowPopups",value:function(e){this.should_show_popups=e}},{key:"toggleNotificationsModal",value:function(){this.is_notifications_visible=!this.is_notifications_visible}},{key:"unmarkNotificationMessage",value:function(e){var t=e.key;this.marked_notifications=this.marked_notifications.filter((function(e){return t!==e}))}},{key:"updateNotifications",value:function(){this.notifications=this.notification_messages.filter((function(e){return["svg","p2p"].some((function(t){var n;return null===(n=e.key)||void 0===n?void 0:n.includes(t)}))?e:qe.rH&&!qe.rH.includes(e.key)}))}},{key:"getP2pCompletedOrders",value:(o=nt(et().mark((function e(){var t,n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.WS.wait("authorize");case 2:return e.next=4,null===(t=s.WS.send)||void 0===t?void 0:t.call(s.WS,{p2p_order_list:1,active:0});case 4:null!=(n=e.sent)&&n.error||(this.p2p_completed_orders=(null==n||null===(r=n.p2p_order_list)||void 0===r?void 0:r.list)||[]);case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}],n&&rt(t.prototype,n),r&&rt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(I);function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function dt(){dt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==ut(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function _t(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return(t=gt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gt(r.key),r)}}function gt(e){var t=function(e,t){if("object"!==ut(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ut(t)?t:String(t)}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wt(e);if(t){var o=wt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}(this,n)}}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}var Et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(s,e);var t,n,r,o,a,c=yt(s);function s(e){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);return(r=c.call(this,{root_store:e,local_storage_properties:["advanced_duration_unit","is_advanced_duration","advanced_expiry_type","simple_duration_unit","duration_t","duration_s","duration_m","duration_h","duration_d","is_account_settings_visible","is_chart_asset_info_visible","is_chart_countdown_visible","is_chart_layout_default","is_dark_mode_on","is_positions_drawer_on","is_reports_visible","is_warning_scam_message_modal_visible","should_show_cancellation_warning"],store_name:"ui_store"})).url_hashed_values="",r.is_account_settings_visible=!1,r.is_positions_drawer_on=!1,r.is_reports_visible=!1,r.reports_route_tab_index=0,r.is_cashier_visible=!1,r.is_history_tab_active=!1,r.should_show_cancellation_warning=!0,r.footer_extensions=[],r.header_extension=void 0,r.settings_extension=void 0,r.notification_messages_ui=void 0,r.is_dark_mode_on=(null===(t=window)||void 0===t||null===(n=t.matchMedia)||void 0===n?void 0:n.call(t,"(prefers-color-scheme: dark)").matches)&&(0,h.isMobile)(),r.is_settings_modal_on=!1,r.is_language_settings_modal_on=!1,r.is_mobile_language_menu_open=!1,r.is_accounts_switcher_on=!1,r.account_switcher_disabled_message="",r.has_only_forward_starting_contracts=!1,r.has_read_scam_message=localStorage.getItem("readScamMessage")||!1,r.is_services_error_visible=!1,r.is_unsupported_contract_modal_visible=!1,r.is_new_account=localStorage.getItem("isNewAccount")||!1,r.is_account_signup_modal_visible=!1,r.is_link_expired_modal_visible=!1,r.is_set_residence_modal_visible=!1,r.is_reset_password_modal_visible=!1,r.is_reset_email_modal_visible=!1,r.is_update_email_modal_visible=!1,r.is_reset_trading_password_modal_visible=!1,r.is_mf_verification_pending_modal_visible=!1,r.is_chart_countdown_visible=!1,r.is_chart_layout_default=!0,r.pwa_prompt_event=null,r.screen_width=window.innerWidth,r.screen_height=window.innerHeight,r.is_onscreen_keyboard_active=!1,r.is_advanced_duration=!1,r.advanced_duration_unit="t",r.advanced_expiry_type="duration",r.simple_duration_unit="t",r.duration_t=5,r.duration_s=15,r.duration_m=3,r.duration_h=1,r.duration_d=1,r.purchase_states=[!1,!1],r.is_app_disabled=!1,r.is_route_modal_on=!1,r.is_real_acc_signup_on=!1,r.is_from_signup_account=!1,r.real_account_signup_target=void 0,r.deposit_real_account_signup_target=void 0,r.has_real_account_signup_ended=!1,r.is_verification_modal_visible=!1,r.is_verification_submitted=!1,r.is_set_currency_modal_visible=!1,r.show_positions_toggle=!0,r.modal_index=0,r.is_top_up_virtual_open=!1,r.is_top_up_virtual_in_progress=!1,r.is_top_up_virtual_success=!1,r.should_show_real_accounts_list=!1,r.real_account_signup={active_modal_index:-1,previous_currency:"",current_currency:"",success_message:"",error_message:""},r.current_focus=null,r.mobile_toast_timeout=3500,r.toasts=[],r.is_cfd_page=!1,r.is_nativepicker_visible=!1,r.is_landscape=!1,r.prompt_when=!1,r.promptFn=function(){},r.is_closing_create_real_account_modal=!1,r.is_account_needed_modal_on=!1,r.is_mt5_migration_modal_open=!1,r.account_needed_modal_props={target:"",target_label:"",target_dmt5_label:""},r.is_mt5_verification_failed_modal=!1,r.manage_real_account_tab_index=0,r.is_real_tab_enabled=!1,r.choose_crypto_currency_target=null,r.should_show_cancel=!1,r.should_show_risk_warning_modal=!1,r.should_show_appropriateness_warning_modal=!1,r.should_show_risk_accept_modal=!1,r.should_show_cooldown_modal=!1,r.should_show_trading_assessment_modal=!1,r.should_show_account_success_modal=!1,r.should_show_one_time_deposit_modal=!1,r.should_show_trade_assessment_form=!1,r.should_trigger_tour_guide=!1,r.is_from_success_deposit_modal=!1,r.is_trading_assessment_for_existing_user_enabled=!1,r.is_trading_assessment_for_new_user_enabled=!1,r.should_show_assessment_complete_modal=!1,r.app_contents_scroll_ref=null,r.is_deriv_account_needed_modal_visible=!1,r.is_wallet_modal_visible=!1,r.is_ready_to_deposit_modal_visible=!1,r.is_need_real_account_for_cashier_modal_visible=!1,r.is_switch_to_deriv_account_modal_visible=!1,r.is_cfd_reset_password_modal_enabled=!1,r.is_mt5_migration_modal_enabled=!1,r.sub_section_index=0,r.is_additional_kyc_info_modal_open=!1,r.is_kyc_information_submitted_modal_open=!1,r.getDurationFromUnit=function(e){return r["duration_".concat(e)]},r.changeTheme=function(){r.is_dark_mode_on?(document.body.classList.remove("theme--light"),document.body.classList.add("theme--dark")):(document.body.classList.remove("theme--dark"),document.body.classList.add("theme--light"))},(0,i.makeObservable)(bt(r),{is_additional_kyc_info_modal_open:i.observable,is_kyc_information_submitted_modal_open:i.observable,account_needed_modal_props:i.observable,account_switcher_disabled_message:i.observable,has_only_forward_starting_contracts:i.observable,has_read_scam_message:i.observable,is_ready_to_deposit_modal_visible:i.observable,is_need_real_account_for_cashier_modal_visible:i.observable,is_services_error_visible:i.observable,is_unsupported_contract_modal_visible:i.observable,is_new_account:i.observable,is_account_signup_modal_visible:i.observable,is_link_expired_modal_visible:i.observable,is_set_residence_modal_visible:i.observable,is_reset_password_modal_visible:i.observable,is_reset_email_modal_visible:i.observable,is_update_email_modal_visible:i.observable,is_reset_trading_password_modal_visible:i.observable,is_cfd_reset_password_modal_enabled:i.observable,sub_section_index:i.observable,is_chart_countdown_visible:i.observable,is_chart_layout_default:i.observable,pwa_prompt_event:i.observable,screen_width:i.observable,screen_height:i.observable,is_onscreen_keyboard_active:i.observable,is_advanced_duration:i.observable,advanced_duration_unit:i.observable,advanced_expiry_type:i.observable,app_contents_scroll_ref:i.observable,choose_crypto_currency_target:i.observable,current_focus:i.observable,deposit_real_account_signup_target:i.observable,duration_d:i.observable,duration_h:i.observable,duration_m:i.observable,duration_s:i.observable,duration_t:i.observable,footer_extensions:i.observable,has_real_account_signup_ended:i.observable,header_extension:i.observable,is_account_needed_modal_on:i.observable,is_account_settings_visible:i.observable,is_accounts_switcher_on:i.observable,is_app_disabled:i.observable,is_cashier_visible:i.observable,is_cfd_page:i.observable,is_mt5_verification_failed_modal:i.observable,is_closing_create_real_account_modal:i.observable,is_dark_mode_on:i.observable,is_deriv_account_needed_modal_visible:i.observable,is_from_signup_account:i.observable,is_wallet_modal_visible:i.observable,is_history_tab_active:i.observable,is_landscape:i.observable,is_language_settings_modal_on:i.observable,is_mf_verification_pending_modal_visible:i.observable,is_mobile_language_menu_open:i.observable,is_nativepicker_visible:i.observable,is_positions_drawer_on:i.observable,is_real_acc_signup_on:i.observable,is_real_tab_enabled:i.observable,is_reports_visible:i.observable,is_route_modal_on:i.observable,is_set_currency_modal_visible:i.observable,is_settings_modal_on:i.observable,is_switch_to_deriv_account_modal_visible:i.observable,is_top_up_virtual_in_progress:i.observable,is_top_up_virtual_open:i.observable,is_top_up_virtual_success:i.observable,is_trading_assessment_for_existing_user_enabled:i.observable,is_trading_assessment_for_new_user_enabled:i.observable,is_verification_modal_visible:i.observable,is_verification_submitted:i.observable,is_mt5_migration_modal_open:i.observable,is_mt5_migration_modal_enabled:i.observable,manage_real_account_tab_index:i.observable,modal_index:i.observable,notification_messages_ui:i.observable,prompt_when:i.observable,promptFn:i.observable,purchase_states:i.observable,real_account_signup_target:i.observable,real_account_signup:i.observable,reports_route_tab_index:i.observable,settings_extension:i.observable,should_show_appropriateness_warning_modal:i.observable,should_show_assessment_complete_modal:i.observable,should_show_cancel:i.observable,should_show_cancellation_warning:i.observable,should_show_cooldown_modal:i.observable,should_show_account_success_modal:i.observable,should_show_one_time_deposit_modal:i.observable,should_show_real_accounts_list:i.observable,should_show_risk_accept_modal:i.observable,should_show_risk_warning_modal:i.observable,should_show_trade_assessment_form:i.observable,should_show_trading_assessment_modal:i.observable,should_trigger_tour_guide:i.observable,is_from_success_deposit_modal:i.observable,show_positions_toggle:i.observable,simple_duration_unit:i.observable,toasts:i.observable.shallow,addToast:i.action.bound,closeAccountNeededModal:i.action.bound,closeRealAccountSignup:i.action.bound,closeSuccessTopUpModal:i.action.bound,closeTopUpModal:i.action.bound,continueRouteAfterChooseCrypto:i.action.bound,disableApp:i.action.bound,disableRouteModal:i.action.bound,enableApp:i.action.bound,handleResize:i.action.bound,init:i.action.bound,installWithDeferredPrompt:i.action.bound,is_account_switcher_disabled:i.computed,is_desktop:i.computed,is_mobile:i.computed,is_tablet:i.computed,is_warning_scam_message_modal_visible:i.computed,url_hashed_values:i.observable,notifyAppInstall:i.action.bound,onChangeUiStore:i.action.bound,openAccountNeededModal:i.action.bound,openDerivRealAccountNeededModal:i.action.bound,openPositionsDrawer:i.action.bound,openRealAccountSignup:i.action.bound,openSwitchToRealAccountModal:i.action.bound,openTopUpModal:i.action.bound,populateFooterExtensions:i.action.bound,populateHeaderExtensions:i.action.bound,populateSettingsExtensions:i.action.bound,removePWAPromptEvent:i.action.bound,removeToast:i.action.bound,resetPurchaseStates:i.action.bound,resetRealAccountSignupParams:i.action.bound,resetRealAccountSignupTarget:i.action.bound,setAccountSwitcherDisabledMessage:i.action.bound,setAppContentsScrollRef:i.action.bound,setCFDPasswordResetModal:i.action.bound,setChartCountdown:i.action.bound,setChartLayout:i.action.bound,setCurrentFocus:i.action.bound,setDarkMode:i.action.bound,setHasOnlyForwardingContracts:i.action.bound,setHashedValue:i.action.bound,setIsClosingCreateRealAccountModal:i.action.bound,setIsFromSignupAccount:i.action.bound,setIsNativepickerVisible:i.action.bound,setIsVerificationModalVisible:i.action.bound,setIsVerificationSubmitted:i.action.bound,setReportsTabIndex:i.action.bound,toggleReadyToDepositModal:i.action.bound,toggleNeedRealAccountForCashierModal:i.action.bound,toggleShouldShowRealAccountsList:i.action.bound,shouldNavigateAfterChooseCrypto:i.action.bound,setIsMT5VerificationFailedModal:i.action.bound,setShouldShowRiskWarningModal:i.action.bound,setIsWalletModalVisible:i.action.bound,setIsNewAccount:i.action.bound,setIsRealTabEnabled:i.action.bound,setIsTradingAssessmentForExistingUserEnabled:i.action.bound,setIsTradingAssessmentForNewUserEnabled:i.action.bound,setManageRealAccountActiveTabIndex:i.action.bound,setModalIndex:i.action.bound,setPromptHandler:i.action.bound,setPurchaseState:i.action.bound,setPWAPromptEvent:i.action.bound,setRealAccountSignupEnd:i.action.bound,setRealAccountSignupParams:i.action.bound,setResetTradingPasswordModalOpen:i.action.bound,setRouteModal:i.action.bound,setScamMessageLocalStorage:i.action.bound,setShouldShowAppropriatenessWarningModal:i.action.bound,setShouldShowAssessmentCompleteModal:i.action.bound,setShouldShowCancel:i.action.bound,setShouldShowCooldownModal:i.action.bound,setShouldShowOneTimeDepositModal:i.action.bound,setShouldShowTradeAssessmentForm:i.action.bound,setShouldShowTradingAssessmentModal:i.action.bound,setShouldShowWarningModal:i.action.bound,setShouldTriggerTourGuide:i.action.bound,setIsFromSuccessDepositModal:i.action.bound,setSubSectionIndex:i.action.bound,setTopUpInProgress:i.action.bound,setIsMFVericationPendingModal:i.action.bound,setMT5MigrationModalEnabled:i.action.bound,setMobileLanguageMenuOpen:i.action.bound,toggleAccountsDialog:i.action.bound,toggleAccountSettings:i.action.bound,toggleAccountSignupModal:i.action.bound,toggleCancellationWarning:i.action.bound,toggleCashier:i.action.bound,toggleHistoryTab:i.action.bound,toggleLinkExpiredModal:i.action.bound,toggleOnScreenKeyboard:i.action.bound,togglePositionsDrawer:i.action.bound,toggleReports:i.action.bound,toggleResetEmailModal:i.action.bound,toggleResetPasswordModal:i.action.bound,toggleServicesErrorModal:i.action.bound,toggleSetCurrencyModal:i.action.bound,toggleSetResidenceModal:i.action.bound,toggleSettingsModal:i.action.bound,toggleLanguageSettingsModal:i.action.bound,toggleUnsupportedContractModal:i.action.bound,toggleUpdateEmailModal:i.action.bound,toggleAccountSuccessModal:i.action.bound,toggleAdditionalKycInfoModal:i.action.bound,toggleKycInformationSubmittedModal:i.action.bound,toggleMT5MigrationModal:i.action.bound}),window.addEventListener("resize",r.handleResize),(0,i.autorun)((function(){r.changeTheme()})),r}return t=s,n=[{key:"is_warning_scam_message_modal_visible",get:function(){return this.root_store.client.is_logged_in&&this.root_store.client.is_brazil&&!this.has_read_scam_message&&!this.is_new_account}},{key:"setIsClosingCreateRealAccountModal",value:function(e){this.is_closing_create_real_account_modal=e}},{key:"setIsRealTabEnabled",value:function(e){this.is_real_tab_enabled=e}},{key:"setScamMessageLocalStorage",value:function(){localStorage.setItem("readScamMessage",!this.has_read_scam_message),this.has_read_scam_message=localStorage.getItem("readScamMessage")||!1}},{key:"setIsNewAccount",value:function(){localStorage.setItem("isNewAccount",!this.is_new_account),this.is_new_account=localStorage.getItem("isNewAccount")||!1}},{key:"setHashedValue",value:function(e){this.url_hashed_values=e}},{key:"init",value:function(e){this.setHashedValue(window.location.hash),this.notification_messages_ui=e}},{key:"setIsMT5VerificationFailedModal",value:function(e){this.is_mt5_verification_failed_modal=e}},{key:"setAppContentsScrollRef",value:function(e){this.app_contents_scroll_ref=e}},{key:"populateFooterExtensions",value:function(e){this.footer_extensions=e}},{key:"populateHeaderExtensions",value:function(e){this.header_extension=e}},{key:"populateSettingsExtensions",value:function(e){this.settings_extension=e}},{key:"onChangeUiStore",value:function(e){var t=e.name,n=e.value;if(!(t in this))throw new Error("Invalid Argument: ".concat(t));this[t]=n}},{key:"handleResize",value:function(){this.screen_width=window.innerWidth,this.screen_height=window.innerHeight}},{key:"setPromptHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.prompt_when=e,this.promptFn=t}},{key:"is_mobile",get:function(){return this.screen_width<=767}},{key:"is_tablet",get:function(){return 767<this.screen_width&&this.screen_width<=1024}},{key:"is_desktop",get:function(){return this.is_tablet||this.screen_width>1024}},{key:"is_account_switcher_disabled",get:function(){return!!this.account_switcher_disabled_message}},{key:"setRouteModal",value:function(){this.is_route_modal_on=!0}},{key:"disableRouteModal",value:function(){this.is_route_modal_on=!1}},{key:"disableApp",value:function(){this.is_app_disabled=!0}},{key:"enableApp",value:function(){this.is_app_disabled=!1}},{key:"toggleAccountsDialog",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_accounts_switcher_on;this.is_accounts_switcher_on=e}},{key:"setAccountSwitcherDisabledMessage",value:function(e){e?(this.is_accounts_switcher_on=!1,this.account_switcher_disabled_message=e):this.account_switcher_disabled_message=""}},{key:"setIsFromSignupAccount",value:function(e){this.is_from_signup_account=e}},{key:"setPurchaseState",value:function(e){this.purchase_states[e]=!0;var t=document.getElementsByClassName("btn-purchase");t[e]&&t[e].classList.add("btn-purchase--swoosh"),setTimeout((function(){[].forEach.bind(t,(function(e){e.classList.add("btn-purchase--disabled")}))()}),250)}},{key:"resetPurchaseStates",value:function(){this.purchase_states=[!1,!1]}},{key:"setChartLayout",value:function(e){this.is_chart_layout_default=e}},{key:"setChartCountdown",value:function(e){this.is_chart_countdown_visible=e}},{key:"setDarkMode",value:function(e){return this.is_dark_mode_on!==e&&(this.is_dark_mode_on=e,this.root_store.gtm.pushDataLayer({event:"switch theme"})),this.is_dark_mode_on}},{key:"setMobileLanguageMenuOpen",value:function(e){this.is_mobile_language_menu_open=e}},{key:"toggleSetCurrencyModal",value:function(){this.is_set_currency_modal_visible=!this.is_set_currency_modal_visible}},{key:"toggleCashier",value:function(){this.is_cashier_visible=!this.is_cashier_visible}},{key:"setModalIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.modal_index=e}},{key:"toggleSettingsModal",value:function(){this.is_settings_modal_on=!this.is_settings_modal_on}},{key:"toggleLanguageSettingsModal",value:function(){this.is_language_settings_modal_on=!this.is_language_settings_modal_on}},{key:"openPositionsDrawer",value:function(){this.is_positions_drawer_on=!0}},{key:"openRealAccountSignup",value:function(e){e&&(this.is_real_acc_signup_on=!0,this.real_account_signup_target=e,this.is_accounts_switcher_on=!1,localStorage.removeItem("current_question_index"))}},{key:"setShouldShowCancel",value:function(e){this.should_show_cancel=e}},{key:"resetRealAccountSignupTarget",value:function(){this.deposit_real_account_signup_target=this.real_account_signup_target,this.real_account_signup_target=""}},{key:"setManageRealAccountActiveTabIndex",value:function(e){this.manage_real_account_tab_index=e}},{key:"closeRealAccountSignup",value:function(){var e=this;this.is_real_acc_signup_on=!1,this.resetRealAccountSignupTarget(),setTimeout((function(){e.resetRealAccountSignupParams(),e.setRealAccountSignupEnd(!0)}),300)}},{key:"openAccountNeededModal",value:function(e,t,n){this.is_account_needed_modal_on=!0,this.account_needed_modal_props={target:e,target_label:t,target_dmt5_label:n}}},{key:"closeAccountNeededModal",value:function(){this.is_account_needed_modal_on=!1,this.account_needed_modal_props={target:"",target_label:"",target_dmt5_label:""}}},{key:"togglePositionsDrawer",value:function(){this.is_positions_drawer_on=!this.is_positions_drawer_on}},{key:"toggleAccountSettings",value:function(e){this.is_account_settings_visible=e}},{key:"toggleReports",value:function(e){this.is_reports_visible=e}},{key:"toggleServicesErrorModal",value:function(e){this.is_services_error_visible=e}},{key:"removePWAPromptEvent",value:function(){this.pwa_prompt_event=null}},{key:"setPWAPromptEvent",value:function(e){this.pwa_prompt_event=e}},{key:"setHasOnlyForwardingContracts",value:function(e){this.has_only_forward_starting_contracts=e}},{key:"toggleUnsupportedContractModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_unsupported_contract_modal_visible;this.is_unsupported_contract_modal_visible=e}},{key:"toggleAccountSignupModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_account_signup_modal_visible;this.is_account_signup_modal_visible=e}},{key:"toggleSetResidenceModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_set_residence_modal_visible;this.is_set_residence_modal_visible=e}},{key:"toggleCancellationWarning",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.should_show_cancellation_warning;this.should_show_cancellation_warning=e}},{key:"toggleHistoryTab",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_history_tab_active;this.is_history_tab_active=e}},{key:"setTopUpInProgress",value:function(e){this.is_top_up_virtual_in_progress=e}},{key:"closeTopUpModal",value:function(){this.is_top_up_virtual_open=!1}},{key:"openTopUpModal",value:function(){this.is_top_up_virtual_open=!0}},{key:"closeSuccessTopUpModal",value:function(){this.is_top_up_virtual_success=!1}},{key:"toggleResetPasswordModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_reset_password_modal_visible;this.is_reset_password_modal_visible=e}},{key:"toggleLinkExpiredModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_link_expired_modal_visible;this.is_link_expired_modal_visible=e}},{key:"toggleResetEmailModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_reset_email_modal_visible;this.is_reset_email_modal_visible=e}},{key:"toggleUpdateEmailModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_update_email_modal_visible;this.is_update_email_modal_visible=e}},{key:"setResetTradingPasswordModalOpen",value:function(e){this.is_reset_trading_password_modal_visible=e}},{key:"setRealAccountSignupParams",value:function(e){this.real_account_signup=pt(pt({},this.real_account_signup),e)}},{key:"setRealAccountSignupEnd",value:function(e){this.has_real_account_signup_ended=e}},{key:"resetRealAccountSignupParams",value:function(){this.real_account_signup={active_modal_index:-1,previous_currency:"",current_currency:"",success_message:"",error_message:""}}},{key:"toggleOnScreenKeyboard",value:function(){this.is_onscreen_keyboard_active=null!==this.current_focus&&this.is_mobile&&(0,h.isTouchDevice)()}},{key:"setCurrentFocus",value:function(e){this.current_focus=e,this.toggleOnScreenKeyboard()}},{key:"addToast",value:function(e){var t,n;e.key=null!==(t=e.key)&&void 0!==t?t:e.content;var r=this.toasts.findIndex((function(t){return t.key===e.key}));r>-1&&this.toasts.splice(r,1),e.timeout=null!==(n=e.timeout)&&void 0!==n?n:this.mobile_toast_timeout,e.is_bottom?this.toasts.push(e):this.toasts.unshift(e)}},{key:"removeToast",value:function(e){var t=this.toasts.findIndex((function(t){return t.key===e}));t>-1&&this.toasts.splice(t,1)}},{key:"setIsNativepickerVisible",value:function(e){this.is_nativepicker_visible=e}},{key:"setReportsTabIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.reports_route_tab_index=e}},{key:"notifyAppInstall",value:function(e){var t=this;this.deferred_prompt=e,setTimeout((function(){t.root_store.notifications.addNotificationMessageByKey("install_pwa")}),1e4)}},{key:"installWithDeferredPrompt",value:(o=dt().mark((function e(){var t;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.deferred_prompt.prompt(),e.next=3,this.deferred_prompt.userChoice;case 3:"accepted"===e.sent.outcome&&(t="install_pwa",this.root_store.notifications.removeNotificationMessage({key:t,should_show_again:!1}),this.root_store.notifications.removeNotificationByKey({key:t}));case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){_t(i,n,r,a,c,"next",e)}function c(e){_t(i,n,r,a,c,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"toggleShouldShowRealAccountsList",value:function(e){this.should_show_real_accounts_list=e}},{key:"shouldNavigateAfterChooseCrypto",value:function(e){this.choose_crypto_currency_target=e}},{key:"continueRouteAfterChooseCrypto",value:function(){this.root_store.common.routeTo(this.choose_crypto_currency_target),this.choose_crypto_currency_target===h.routes.cashier_deposit&&this.root_store.modules.cashier.general_store.setIsDeposit(!0)}},{key:"openDerivRealAccountNeededModal",value:function(){this.is_deriv_account_needed_modal_visible=!this.is_deriv_account_needed_modal_visible}},{key:"setIsWalletModalVisible",value:function(e){this.is_wallet_modal_visible=e}},{key:"setShouldShowRiskWarningModal",value:function(e){this.should_show_risk_warning_modal=e}},{key:"setIsTradingAssessmentForExistingUserEnabled",value:function(e){this.is_trading_assessment_for_existing_user_enabled=e}},{key:"setIsTradingAssessmentForNewUserEnabled",value:function(e){this.is_trading_assessment_for_new_user_enabled=e}},{key:"setShouldShowAppropriatenessWarningModal",value:function(e){this.should_show_appropriateness_warning_modal=e}},{key:"setShouldShowWarningModal",value:function(e){this.should_show_risk_accept_modal=e}},{key:"setShouldShowAssessmentCompleteModal",value:function(e){this.should_show_assessment_complete_modal=e}},{key:"setShouldShowCooldownModal",value:function(e){this.should_show_cooldown_modal=e}},{key:"setShouldShowTradingAssessmentModal",value:function(e){this.should_show_trading_assessment_modal=e}},{key:"setShouldShowTradeAssessmentForm",value:function(e){this.should_show_trade_assessment_form=e}},{key:"openSwitchToRealAccountModal",value:function(){this.is_switch_to_deriv_account_modal_visible=!this.is_switch_to_deriv_account_modal_visible}},{key:"toggleReadyToDepositModal",value:function(){this.is_ready_to_deposit_modal_visible=!this.is_ready_to_deposit_modal_visible}},{key:"toggleNeedRealAccountForCashierModal",value:function(){this.is_need_real_account_for_cashier_modal_visible=!this.is_need_real_account_for_cashier_modal_visible}},{key:"setCFDPasswordResetModal",value:function(e){this.is_cfd_reset_password_modal_enabled=!!e}},{key:"setSubSectionIndex",value:function(e){this.sub_section_index=e}},{key:"setIsVerificationModalVisible",value:function(e){this.is_verification_modal_visible=e}},{key:"setIsVerificationSubmitted",value:function(e){this.is_verification_submitted=e}},{key:"setShouldShowOneTimeDepositModal",value:function(e){this.should_show_one_time_deposit_modal=e}},{key:"toggleAccountSuccessModal",value:function(){this.should_show_account_success_modal=!this.should_show_account_success_modal}},{key:"setShouldTriggerTourGuide",value:function(e){this.should_trigger_tour_guide=e}},{key:"setIsFromSuccessDepositModal",value:function(e){this.is_from_success_deposit_modal=e}},{key:"setIsMFVericationPendingModal",value:function(e){this.is_mf_verification_pending_modal_visible=e}},{key:"toggleAdditionalKycInfoModal",value:function(){this.is_additional_kyc_info_modal_open=!this.is_additional_kyc_info_modal_open}},{key:"toggleKycInformationSubmittedModal",value:function(){this.is_kyc_information_submitted_modal_open=!this.is_kyc_information_submitted_modal_open}},{key:"setMT5MigrationModalEnabled",value:function(e){this.is_mt5_migration_modal_enabled=e}},{key:"toggleMT5MigrationModal",value:function(){this.is_mt5_migration_modal_open=!this.is_mt5_migration_modal_open}}],n&&mt(t.prototype,n),r&&mt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(I);function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function St(){St=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==kt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function xt(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==kt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===kt(i)?i:String(i)),r)}var o,i}function At(e,t){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},At(e,t)}function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pt(e);if(t){var o=Pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ct(e)}(this,n)}}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pt(e)}var Nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&At(e,t)}(s,e);var t,n,r,o,a,c=Lt(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=c.call(this)).active_symbols=[],(0,i.makeObservable)(Ct(e),{active_symbols:i.observable,setActiveSymbols:i.action.bound}),e}return t=s,n=[{key:"setActiveSymbols",value:(o=St().mark((function e(){var t,n,r,o=this;return St().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.WS.authorized.activeSymbols();case 2:t=e.sent,n=t.active_symbols,r=t.error,(0,i.runInAction)((function(){n.length&&!r?o.active_symbols=n:o.active_symbols=[]}));case 6:case"end":return e.stop()}}),e)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){xt(i,n,r,a,c,"next",e)}function c(e){xt(i,n,r,a,c,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})}],n&&Ot(t.prototype,n),r&&Ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(I),Tt=n(50200),jt=n.n(Tt),It=n(6088);function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Mt(e){return function(e){if(Array.isArray(e))return Dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==zt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===zt(i)?i:String(i)),r)}var o,i}var Ft=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=o.color,c=o.hideBarrierLine,s=o.line_style,l=o.not_draggable,u=o.shade;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.color=void 0,this.lineStyle=void 0,this.shade=void 0,this.shadeColor=void 0,this.high=void 0,this.low=void 0,this.relative=void 0,this.draggable=void 0,this.hidePriceLines=void 0,this.hideBarrierLine=void 0,this.hideOffscreenLine=void 0,this.title=void 0,this.onChartBarrierChange=void 0,(0,i.makeObservable)(this,{color:i.observable,lineStyle:i.observable,shade:i.observable,shadeColor:i.observable,high:i.observable,low:i.observable,relative:i.observable,draggable:i.observable,hidePriceLines:i.observable,hideBarrierLine:i.observable,hideOffscreenLine:i.observable,title:i.observable,updateBarriers:i.action.bound,updateBarrierShade:i.action.bound,onBarrierChange:i.action.bound,barrier_count:i.computed,default_shade:i.computed}),this.color=a,this.hideBarrierLine=c,this.shade=u,this.lineStyle=s||h.BARRIER_LINE_STYLES.SOLID,this.onChange=this.onBarrierChange,this.onChartBarrierChange="function"==typeof r?r.bind(this):function(){},this.high=t||0,n&&(this.low=n),this.shade=this.default_shade;var d=!!t;this.relative=!d||/^[+-]/.test(t),this.draggable=!l&&d,this.hidePriceLines=!d}var t,n,r;return t=e,n=[{key:"updateBarriers",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this.relative=/^[+-]/.test(e)),this.high=e||void 0,this.low=t||void 0}},{key:"updateBarrierShade",value:function(e,t){this.shade=e&&h.CONTRACT_SHADES[t]||this.default_shade}},{key:"onBarrierChange",value:function(e){var t=e.high,n=e.low;this.updateBarriers(t,n,!0),this.onChartBarrierChange.apply(this,Mt((0,h.barriersToString)(this.relative,t,n)))}},{key:"barrier_count",get:function(){return(void 0!==this.high)+(void 0!==this.low)}},{key:"default_shade",get:function(){return h.DEFAULT_SHADES[this.barrier_count]}}],n&&Rt(t.prototype,n),r&&Rt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ut={STOP_OUT:"stop_out",TAKE_PROFIT:"take_profit",STOP_LOSS:"stop_loss"},Wt=function(e){var t=e.barriers,n=e.contract_type,r=e.contract_info,o=void 0===r?{}:r;if(e.is_over&&function(e,t){return(0,h.isMultiplierContract)(e)&&t.limit_order}(n,o)){var i=Object.values(Ut),a=Object.keys(o.limit_order).some((function(e){return e===Ut.STOP_LOSS&&o.limit_order[e].value}));i.forEach((function(e){var n=o.limit_order[e];if(n&&n.value){var r=t.find((function(t){return t.key===e}));if(r){if(r.high===+n.value)return;r.onChange({high:n.value})}else{var i={key:e,title:"".concat(n.display_name),color:e===Ut.TAKE_PROFIT?h.BARRIER_COLORS.GREEN:h.BARRIER_COLORS.ORANGE,draggable:!1,lineStyle:e===Ut.STOP_OUT?h.BARRIER_LINE_STYLES.DOTTED:h.BARRIER_LINE_STYLES.SOLID,hidePriceLines:a&&e===Ut.STOP_OUT,hideOffscreenLine:!0,showOffscreenArrows:!0,isSingleBarrier:!0,opacityOnOverlap:e===Ut.STOP_OUT&&.15};r=new Ft(n.value),Object.assign(r,i),t.push(r)}}else(0,h.removeBarrier)(t,e)}))}else{Object.values(Ut).forEach((function(e){return(0,h.removeBarrier)(t,e)}))}},Bt=function(e){var t,n,r,o,i=e.has_contract_update_stop_loss,a=e.has_contract_update_take_profit,c=e.contract_update_stop_loss,s=e.contract_update_take_profit,l=e.contract_info,u={},d=a?+s:null;Math.abs(null===(t=l.limit_order)||void 0===t||null===(n=t.take_profit)||void 0===n?void 0:n.order_amount)!==Math.abs(d)&&(u.take_profit=d);var _=i?+c:null;return Math.abs(null===(r=l.limit_order)||void 0===r||null===(o=r.stop_loss)||void 0===o?void 0:o.order_amount)!==Math.abs(_)&&(u.stop_loss=_),u};function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Vt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ht(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||Ht(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){if(e){if("string"==typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(e,t):void 0}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kt(){Kt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Gt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Zt(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function $t(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Zt(i,r,o,a,c,"next",e)}function c(e){Zt(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){Qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e,t,n){return(t=tn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tn(r.key),r)}}function tn(e){var t=function(e,t){if("object"!==Gt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Gt(t)?t:String(t)}function nn(e,t){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nn(e,t)}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=an(e);if(t){var o=an(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return on(e)}(this,n)}}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){return an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},an(e)}var cn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(l,e);var t,n,r,o,a,c,s=rn(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).positions=[],t.all_positions=[],t.positions_map={},t.is_loading=!1,t.error="",t.open_accu_contract=null,t.barriers=[],t.main_barrier=null,t.contract_type="",t.getPositionById=(0,It.kq)((function(e){return t.positions.find((function(t){return+t.id==+e}))})),t.responseQueue=[],t.active_positions=[],t.deepClone=function(e){return JSON.parse(JSON.stringify(e))},t.proposalOpenContractQueueHandler=function(e){t.responseQueue.push(e),t.throttledUpdatePositions()},t.populateResultDetailsFromTransaction=function(e){var n=e.transaction,r=n.contract_id,o=n.amount,i=t.getPositionIndexById(r),a=t.positions[i];if(a){var c=Xt(Xt({},a.contract_info),{},{is_sold:1,is_expired:1,status:"complete"});a.contract_info=c,a.is_valid_to_sell=!1,a.result=o>c.buy_price?"won":"lost",a.status="complete",a.is_sold=1,a.is_loading=!1,c.exit_tick_time=c.date_expiry,c.sell_price=String(o),c.profit=o-c.buy_price,t.updatePositions()}},t.populateResultDetails=function(e){var n=e.proposal_open_contract,r=t.getPositionIndexById(n.contract_id);t.positions[r]&&(t.positions[r].contract_info=n,t.positions[r].duration=(0,h.getDurationTime)(n),t.positions[r].duration_unit=(0,h.getDurationUnitText)((0,h.getDurationPeriod)(n)),t.positions[r].exit_spot=n.exit_tick||n.current_spot,t.positions[r].is_valid_to_sell=(0,h.isValidToSell)(n),t.positions[r].result=(0,h.getDisplayStatus)(n),t.positions[r].profit_loss=+n.profit,t.positions[r].sell_time=(0,h.getEndTime)(n)||n.current_spot_time,t.positions[r].sell_price=n.sell_price,t.positions[r].status="complete",t.positions[r].contract_info.barrier&&t.positions[r].contract_info.entry_spot||(t.positions[r].contract_info.barrier=t.positions[r].barrier,t.positions[r].contract_info.entry_spot=t.positions[r].entry_spot),(0,h.isUserSold)(n)&&(t.positions[r].exit_spot="-"),t.positions[r].is_loading=!1,t.root_store.ui.is_mobile&&(0,h.getEndTime)(n)&&window.location.pathname===h.routes.trade&&t.root_store.notifications.addTradeNotification(t.positions[r].contract_info))},t.updatePositions=function(){t.responseQueue.forEach((function(e){return t.proposalOpenContractHandler(e)})),t.responseQueue=[],t.setActivePositions()},t.throttledUpdatePositions=jt()(t.updatePositions,500),(0,i.makeObservable)(on(t),{positions:i.observable.shallow,all_positions:i.observable.shallow,is_loading:i.observable,error:i.observable,barriers:i.observable,main_barrier:i.observable,contract_type:i.observable,active_positions:i.observable.struct,initializePortfolio:i.action.bound,clearTable:i.action.bound,portfolioHandler:i.action.bound,onBuyResponse:i.action.bound,transactionHandler:i.action.bound,proposalOpenContractHandler:i.action.bound,open_accu_contract:i.observable,onClickCancel:i.action.bound,onClickSell:i.action.bound,handleSell:i.action.bound,populateResultDetailsFromTransaction:i.action.bound,populateResultDetails:i.action.bound,populateContractUpdate:i.action.bound,pushNewPosition:i.action.bound,removePositionById:i.action.bound,onHoverPosition:i.action.bound,logoutListener:i.action.bound,networkStatusChangeListener:i.action.bound,onMount:i.action.bound,onUnmount:i.override,totals:i.computed,setActivePositions:i.action.bound,is_active_empty:i.computed,active_positions_count:i.computed,is_empty:i.computed,setPurchaseSpotBarrier:i.action,updateLimitOrderBarriers:i.action,setContractType:i.action,is_accumulator:i.computed,is_multiplier:i.computed,is_turbos:i.computed}),t.root_store=e,t}return t=l,n=[{key:"initializePortfolio",value:(c=$t(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.has_subscribed_to_poc_and_transaction&&this.clearTable(),this.is_loading=!0,e.next=4,h.WS.wait("authorize");case 4:h.WS.portfolio().then(this.portfolioHandler),h.WS.subscribeProposalOpenContract(null,this.proposalOpenContractQueueHandler),h.WS.subscribeTransaction(this.transactionHandler),this.has_subscribed_to_poc_and_transaction=!0;case 8:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"clearTable",value:function(){this.positions=[],this.positions_map={},this.is_loading=!1,this.error="",this.updatePositions(),this.has_subscribed_to_poc_and_transaction&&h.WS.forgetAll("proposal_open_contract","transaction"),this.has_subscribed_to_poc_and_transaction=!1}},{key:"portfolioHandler",value:function(e){var t=this;this.is_loading=!1,"error"in e?this.error=e.error.message:(this.error="",e.portfolio.contracts&&(this.positions=e.portfolio.contracts.filter(h.filterDisabledPositions).map((function(e){return(0,h.formatPortfolioPosition)(e,t.root_store.active_symbols.active_symbols)})).sort((function(e,t){return t.reference-e.reference})),this.positions.forEach((function(e){t.positions_map[e.id]=e})),this.updatePositions()))}},{key:"onBuyResponse",value:function(e){var t={contract_id:e.contract_id,longcode:e.longcode,contract_type:e.contract_type};this.pushNewPosition(t)}},{key:"transactionHandler",value:(a=$t(Kt().mark((function e(t){var n,r,o,i,a,c,s=this;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("error"in t&&(this.error=t.error.message),t.transaction){e.next=3;break}return e.abrupt("return");case 3:if(n=t.transaction,r=n.contract_id,o=n.action,i=n.longcode,"buy"!==o){e.next=8;break}this.onBuyResponse({contract_id:r,longcode:i,contract_type:""}),e.next=14;break;case 8:if("sell"!==o){e.next=14;break}if(a=this.getPositionIndexById(r),this.positions[a]){e.next=12;break}return e.abrupt("return");case 12:this.positions[a].is_loading=!0,c=h.WS.subscribeProposalOpenContract(r,(function(e){e.error?s.populateResultDetailsFromTransaction(t):(s.updateContractTradeStore(e),s.updateContractReplayStore(e),s.populateResultDetails(e)),c.unsubscribe()}));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"updateContractTradeStore",value:function(e){var t=this.root_store.contract_trade,n=!(0,h.isEmptyObject)(e.proposal_open_contract),r=!!e.error;(n||r)&&n&&(t.addContract(this.deepClone(e.proposal_open_contract)),t.updateProposal(this.deepClone(e)))}},{key:"updateContractReplayStore",value:function(e){var t,n=this.root_store.contract_replay;n.contract_id===(null===(t=e.proposal_open_contract)||void 0===t?void 0:t.contract_id)&&n.populateConfig(e)}},{key:"updateTradeStore",value:function(e,t,n){n||this.setPurchaseSpotBarrier(e,t),this.updateLimitOrderBarriers(e,t)}},{key:"proposalOpenContractHandler",value:function(e){if("error"in e)return this.updateContractTradeStore(e),void this.updateContractReplayStore(e);var t=e.proposal_open_contract,n=this.positions_map[t.contract_id];if(n){this.updateContractTradeStore(e),this.updateContractReplayStore(e);var r=(0,h.formatPortfolioPosition)(t,this.root_store.active_symbols.active_symbols,n.indicative);Object.assign(n,r);var o=n.indicative,i=+t.bid_price,a=+t.profit;if(Object.entries(t).forEach((function(e){var t=Yt(e,2),r=t[0],o=t[1];"barrier"!==r&&"high_barrier"!==r&&"low_barrier"!==r&&"entry_spot"!==r||(n[r]=+o)})),n.indicative=i,n.profit_loss=a,n.is_valid_to_sell=(0,h.isValidToSell)(t),n.contract_info=t,t.tick_count){var c=n.current_tick>(0,h.getCurrentTick)(t)?n.current_tick:(0,h.getCurrentTick)(t);n.current_tick=c}n.status=i>o?"profit":i<o?"loss":null,this.hovered_position_id===n.id&&(1===n.contract_info.is_sold?this.updateTradeStore(!1,n):this.updateTradeStore(!0,n,!0)),1===n.contract_info.is_sold&&this.populateResultDetails(e)}}},{key:"onClickCancel",value:function(e){var t=this,n=this.getPositionIndexById(e);this.positions[n].is_sell_requested||(this.positions[n].is_sell_requested=!0,e&&h.WS.cancelContract(e).then((function(e){e.error?t.root_store.common.setServicesError(Xt({type:e.msg_type},e.error)):window.location.pathname===h.routes.trade&&t.root_store.ui.is_mobile||t.root_store.notifications.addNotificationMessage((0,h.contractCancelled)())})))}},{key:"onClickSell",value:function(e){var t=this.getPositionIndexById(e);if(!this.positions[t].is_sell_requested){var n=this.positions[t].contract_info.bid_price;this.positions[t].is_sell_requested=!0,e&&"number"==typeof n&&h.WS.sell(e,n).then(this.handleSell)}}},{key:"handleSell",value:function(e){if(e.error){var t=this.getPositionIndexById(e.echo_req.sell);this.positions[t].is_sell_requested=!1,"InvalidToken"!==e.error.code&&this.root_store.common.setServicesError(Xt({type:e.msg_type},e.error))}else!e.error&&e.sell&&(this.root_store.contract_trade.sell_info={sell_price:e.sell.sold_for,transaction_id:e.sell.transaction_id},window.location.pathname===h.routes.trade&&this.root_store.ui.is_mobile||this.root_store.notifications.addNotificationMessage((0,h.contractSold)(this.root_store.client.currency,e.sell.sold_for,Ve.Money)),m.Analytics.trackEvent("ce_reports_form",{action:"close_contract",form_name:"default",subform_name:"open_positions_form"}))}},{key:"populateContractUpdate",value:function(e,t){var n=e.contract_update,r=this.getPositionById(t);r&&(Object.assign(r.contract_update||{},n),this.updatePositions())}},{key:"pushNewPosition",value:function(e){var t=(0,h.formatPortfolioPosition)(e,this.root_store.active_symbols.active_symbols);this.positions_map[t.id]||(this.positions.unshift(t),this.positions_map[t.id]=t,this.updatePositions())}},{key:"removePositionById",value:function(e){var t=this.getPositionIndexById(e);this.positions.splice(t,1),delete this.positions_map[e],this.updatePositions(),this.root_store.contract_trade.removeContract({contract_id:e})}},{key:"accountSwitcherListener",value:(o=$t(Kt().mark((function e(){return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializePortfolio();case 2:return e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"onHoverPosition",value:function(e,t,n){t.contract_info.underlying===n&&!(0,h.isEnded)(t.contract_info)&&(0,h.isMultiplierContract)(t.type)&&(this.hovered_position_id=e?t.id:null,this.updateTradeStore(e,t))}},{key:"preSwitchAccountListener",value:function(){return this.clearTable(),Promise.resolve()}},{key:"logoutListener",value:function(){return this.clearTable(),Promise.resolve()}},{key:"networkStatusChangeListener",value:function(e){this.is_loading=!e}},{key:"onMount",value:function(){var e=this;this.onPreSwitchAccount(this.preSwitchAccountListener),this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),this.onLogout(this.logoutListener),0!==this.positions.length||this.has_subscribed_to_poc_and_transaction||(this.root_store.client.is_logged_in?this.initializePortfolio():(0,i.reaction)((function(){return e.root_store.client.is_logged_in}),(function(){e.root_store.client.is_logged_in&&e.initializePortfolio()})))}},{key:"onUnmount",value:function(){/^\/reports/.test(window.location.pathname)||(this.clearTable(),this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout())}},{key:"getPositionIndexById",value:function(e){return this.positions.findIndex((function(t){return+t.id==+e}))}},{key:"totals",get:function(){var e=0,t=0,n=0;return this.positions.forEach((function(r){e+=+r.indicative,t+=+r.payout,n+=+r.purchase})),{indicative:e,payout:t,purchase:n}}},{key:"setActivePositions",value:function(){this.active_positions=this.positions.filter((function(e){return!(0,h.getEndTime)(e.contract_info)})),this.all_positions=Vt(this.positions),this.open_accu_contract=this.active_positions.find((function(e){var t=e.type;return(0,h.isAccumulatorContract)(t)}))}},{key:"is_active_empty",get:function(){return!this.is_loading&&0===this.active_positions.length}},{key:"active_positions_count",get:function(){return this.active_positions.length||0}},{key:"is_empty",get:function(){return!this.is_loading&&0===this.all_positions.length}},{key:"setPurchaseSpotBarrier",value:function(e,t){var n="PURCHASE_SPOT_BARRIER";if(e){var r=this.barriers.find((function(e){return e.key===n}));r?r.high!==+t.contract_info.entry_spot&&r.onChange({high:t.contract_info.entry_spot}):((r=new Ft(t.contract_info.entry_spot)).key=n,r.draggable=!1,r.hideOffscreenBarrier=!0,r.isSingleBarrier=!0,this.barriers.push(r))}else(0,h.removeBarrier)(this.barriers,n)}},{key:"updateLimitOrderBarriers",value:function(e,t){var n=t.contract_info,r=this.barriers;Wt({barriers:r,contract_info:n,contract_type:n.contract_type,is_over:e})}},{key:"setContractType",value:function(e){this.contract_type=e}},{key:"is_accumulator",get:function(){return this.contract_type===h.TRADE_TYPES.ACCUMULATOR}},{key:"is_multiplier",get:function(){return this.contract_type===h.TRADE_TYPES.MULTIPLIER}},{key:"is_turbos",get:function(){return this.contract_type===h.TRADE_TYPES.TURBOS.LONG||this.contract_type===h.TRADE_TYPES.TURBOS.SHORT}}],n&&en(t.prototype,n),r&&en(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(I),sn=[[1,0],[2,120],[6,600],[24,900],[120,3600],[720,14400]],ln=function(e){return e||se().get().unix()},un=function(e,t){return p().duration(p().unix(ln(t)).diff(p().unix(e))).asHours()<=1?"line":"candles"},dn=function(e,t){return _n(ln(t)-e)},_n=function(e){return(sn.find((function(t){return e<=3600*t[0]}))||[null,86400])[1]},fn=n(57833),pn=n.n(fn),hn=n(40841),mn=n.n(hn),gn=n(16),vn=n(60216),yn=n.n(vn),bn=function(e){var t=e.label,n=e.line_style,r=e.marker_config,o=e.status;return r?We.createElement("div",{className:mn()("chart-marker-line__wrapper","chart-marker-line--".concat(n))},t===r.LINE_END.content_config.label&&We.createElement(Ve.Icon,{icon:"IcContractExitTimeCircle",className:"chart-marker-line__icon",color:"lost"===o?"red":"green",size:24}),t===r.LINE_START.content_config.label&&We.createElement(Ve.Icon,{icon:"IcContractStartTimeCircle",className:"chart-marker-line__icon chart-marker-line__icon--time",color:"secondary",size:24})):We.createElement("div",null)};bn.propTypes={label:yn().string,line_style:yn().string,marker_config:yn().object,status:yn().oneOf(["won","lost"])};const wn=(0,gn.observer)(bn);var En=function(e){var t=e.className,n=e.spot_count;return We.createElement("div",{className:mn()("chart-spot",t)},n)};En.propTypes={className:yn().string,spot_count:yn().oneOfType([yn().number,yn().string])};const kn=(0,gn.observer)(En);function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var On=function(e){var t=e.align_label,n=e.has_hover_toggle,r=e.is_value_hidden,o=e.spot_className,i=e.spot_count,a=e.spot_epoch,c=e.spot_value,s=e.spot_profit,l=e.status,u=Sn(We.useState(!n),2),d=u[0],_=u[1],f=function(){_(!d)},p=We.createElement(kn,{className:o,spot_count:i});return n&&(p=We.createElement("div",{"data-testid":"dt_marker_hover_container",className:"marker-hover-container",onMouseEnter:f,onMouseLeave:f},p)),We.createElement(We.Fragment,null,We.createElement("div",{className:"chart-spot-label"},d&&!r&&We.createElement("div",{className:"chart-spot-label__info-container"},We.createElement("div",{"data-testid":"dt_time_value_container",className:"chart-spot-label__time-value-container chart-spot-label__time-value-container--".concat(t)},a&&We.createElement("div",{className:"chart-spot-label__time-container"},We.createElement(Ve.Icon,{icon:"IcClockOutline",height:10,width:10,className:"chart-spot-label__time-icon"}),We.createElement(Ve.Text,{as:"p",color:"prominent",size:"xxxs"},(0,h.toMoment)(+a).format("HH:mm:ss"))),We.createElement("div",{"data-testid":"dt_value_container",className:mn()("chart-spot-label__value-container",{"chart-spot-label__value-container--won":"won"===l,"chart-spot-label__value-container--lost":"lost"===l})},We.createElement("p",null,(0,h.addComma)(c))))),p),s&&We.createElement("div",{className:mn()("chart-spot-label-profit",{"chart-spot-label-profit--won":"won"===l,"chart-spot-label-profit--lost":"lost"===l})},We.createElement("div",{className:mn()("chart-spot-label__value-container",{"chart-spot-label__value-container--won":"won"===l,"chart-spot-label__value-container--lost":"lost"===l})},We.createElement(Ve.Text,{as:"p",size:"xxs"},(0,g.localize)("Total profit/loss:")),We.createElement(Ve.Text,{as:"p",size:"xs"},"".concat(parseFloat(s)>0?"+":"").concat(s)))))};On.defaultProps={align_label:"top",is_value_hidden:!1},On.propTypes={align_label:yn().oneOf(["top","middle","bottom"]),has_hover_toggle:yn().bool,is_value_hidden:yn().bool,spot_className:yn().string,spot_count:yn().oneOfType([yn().number,yn().string]),spot_epoch:yn().oneOfType([yn().number,yn().string]),spot_value:yn().oneOfType([yn().number,yn().string]),spot_profit:yn().string,status:yn().oneOf(["won","lost"])};const An=(0,gn.observer)(On);var Ln,Cn,Pn={LINE_END:{type:"LINE_END",marker_config:{ContentComponent:wn,className:"chart-marker-line"},content_config:{line_style:"dash",label:(0,g.localize)("End Time")}},LINE_PURCHASE:{type:"LINE_PURCHASE",marker_config:{ContentComponent:wn,className:"chart-marker-line"},content_config:{line_style:"solid",label:(0,g.localize)("Purchase Time")}},LINE_START:{type:"LINE_START",marker_config:{ContentComponent:wn,className:"chart-marker-line"},content_config:{line_style:"solid",label:(0,g.localize)("Start Time")}},SPOT_ENTRY:{type:"SPOT_ENTRY",marker_config:{ContentComponent:kn},content_config:{className:"chart-spot__entry"}},SPOT_SELL:{type:"SPOT_SELL",marker_config:{ContentComponent:kn},content_config:{className:"chart-spot__sell"}},SPOT_EXIT:{type:"SPOT_EXIT",marker_config:{ContentComponent:An},content_config:{spot_className:"chart-spot__spot"}},SPOT_MIDDLE:{type:"SPOT_MIDDLE",marker_config:{ContentComponent:An},content_config:{spot_className:"chart-spot__spot"}}},Nn=function(e,t,n,r){return pn()(!0,{},Pn[e],{marker_config:{x:+t,y:n},content_config:r})},Tn=function(e,t){return(0,h.isDigitContract)(e.contract_type)?t+1:(0,h.isAccumulatorContract)(e.contract_type)||(0,h.isSmartTraderContract)(e.contract_type)?null:t},jn=function(e){if(!e.entry_tick_time)return!1;var t=Pn.SPOT_ENTRY.type,n={},r=e.entry_tick_display_value;return(0,h.isDigitContract)(e.contract_type)&&(t=Pn.SPOT_MIDDLE.type,n={spot_value:"".concat(r),spot_epoch:"".concat(e.entry_tick_time),spot_count:1}),Nn(t,e.entry_tick_time,r,n)},In=function(e,t,n){if(!e.exit_tick_time)return!1;var r,o,i=(0,h.isUserSold)(e);t&&(r=Tn(e,n),o=t.align_label);var a=e.exit_tick_display_value,c=!i||(0,h.isMultiplierContract)(e.contract_type),s=(0,h.isVanillaContract)(e.contract_type)&&(0,h.isDesktop)(),l=c?Pn.SPOT_EXIT.type:Pn.SPOT_SELL.type,u=c?{spot_value:"".concat(a),spot_epoch:"".concat(e.exit_tick_time),status:"".concat(+e.profit>=0?"won":"lost"),align_label:s?"middle":o,spot_count:r,spot_profit:s&&"".concat((0,h.formatMoney)(e.currency,e.profit,!0)," ").concat(e.currency)||""}:{};return Nn(l,+e.exit_tick_time,+a,u)};function zn(e){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(e)}function Mn(e){return function(e){if(Array.isArray(e))return e}(e)||Un(e)||Fn(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==zn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===zn(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e){return function(e){if(Array.isArray(e))return Wn(e)}(e)||Un(e)||Fn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){if(e){if("string"==typeof e)return Wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wn(e,t):void 0}}function Un(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bn=function(e,t){var n=e.tick_stream,r=(0,h.isAccumulatorContractOpen)(e)&&10===n.length,o=[];if(e){var i=(0,h.getEndTime)(e),a=un(e.date_start,i);if(e.tick_count){var c,s=Hn(e,t);(c=o).push.apply(c,Rn(s))}else if("candles"!==a){var l,u=Object.keys(Gn).map((function(t){return Gn[t](e)}));(l=o).push.apply(l,Rn(u))}if(!r){var d,_=Object.keys(Vn).map((function(t){return Vn[t](e)}));(d=o).push.apply(d,Rn(_))}o=o.filter((function(e){return!!e}))}return o.forEach((function(t){var n=e.contract_id;t.react_key="".concat(n,"-").concat(t.type)})),o},Gn=(Dn(Ln={},Pn.SPOT_ENTRY.type,jn),Dn(Ln,Pn.SPOT_EXIT.type,In),Ln),Vn=(Dn(Cn={},Pn.LINE_START.type,(function(e){return!!e.date_start&&Nn(Pn.LINE_START.type,+e.date_start,null,{marker_config:Pn})})),Dn(Cn,Pn.LINE_END.type,(function(e){var t=(0,h.getEndTime)(e);return!!t&&Nn(Pn.LINE_END.type,+t,null,{status:"".concat(e.profit>=0?"won":"lost"),marker_config:Pn})})),Dn(Cn,Pn.LINE_PURCHASE.type,(function(e){return!(!e.purchase_time||!e.date_start||+e.purchase_time==+e.date_start)&&Nn(Pn.LINE_PURCHASE.type,+e.purchase_time)})),Cn),Yn=function(e,t,n){if(t>0&&n.length){var r=n[t-1];+e>+r.tick&&(e.align_label="top"),+e.tick<+r.tick&&(e.align_label="bottom"),+e.tick==+r.tick&&(e.align_label=r.align_label)}return e},Hn=function(e,t){var n,r=(0,h.isAccumulatorContract)(e.contract_type),o=(0,h.isSmartTraderContract)(e.contract_type),i=r&&!(0,h.isOpen)(e),a=r&&(null===(n=e.audit_details)||void 0===n?void 0:n.all_ticks)||e.tick_stream,c=(0,h.unique)(a,"epoch").map(Yn),s=[];if(i){var l=e||{},u=l.exit_tick_time,d=l.tick_stream;u&&c.every((function(e){return e.epoch!==u}))&&c.push(d[d.length-1]);var _=c.findIndex((function(e){return e.epoch===u}))+1;c.length=_>0?_:c.length}return c.forEach((function(n,a){var l,u=function(t){return+t.epoch===e.entry_tick_time},d=+n.epoch!==e.exit_tick_time&&(r?u(n):0===a),_=a>(r?c.findIndex(u):0)&&+n.epoch!=+e.exit_tick_time,f=function(t,n){return+t.epoch==+e.exit_tick_time||Tn(e,n)===e.tick_count},p=f(n,a),m=a===c.length-1,g=c.findIndex(f),v=r&&!p&&m,y=r&&(i?a===g-1:a===c.length-2);if(d?l=jn(e):_?l=function(e,t,n){var r=(0,h.isAccumulatorContract)(e.contract_type),o=Tn(e,n),i=t.tick_display_value,a=r?"":"".concat(t.epoch),c=Nn(Pn.SPOT_MIDDLE.type,+t.epoch,+i,{spot_value:"".concat(i),spot_epoch:a,align_label:t.align_label,is_value_hidden:r,spot_count:o});return c.type="".concat(c.type,"_").concat(n),(0,h.isMobile)()&&o>1?null:c}(e,n,a):p&&!v&&(n.align_label="top",l=In(e,n,a)),o&&_){var b=l.content_config.spot_className;l.content_config.spot_className="".concat(b," ").concat(b,"--smarttrader-contract-middle"),m||(l.content_config.is_value_hidden=!0)}if(r){if((v||p)&&!i)return;if(l&&(_||p)){var w=y&&(!t||i),E=l.content_config.spot_className;l.content_config.spot_className="".concat(E," ").concat(E,"--accumulator").concat(p?"-exit":"-middle".concat(w?"--preexit":""))}}l&&s.push(l)})),s},qn={bg:"#0e0e0e",fg:"#ffffff",grey_border:"#6e6e6e",lost:"#cc2e3d",open:"#377cfc",sold:"#ffad3a",won:"#00a79e"},Kn={bg:"#ffffff",fg:"#333333",grey_border:"#999999",lost:"#ec3f3f",open:"#377cfc",sold:"#ffad3a",won:"#4bb4b3"};function Zn(e){var t=e.status,n=e.profit,r=e.is_dark_theme,o=e.is_vanilla,i=r?qn:Kn,a=i[t||"open"];return o?"open"===t?i.open:i[n>0?"won":"lost"]:("open"===t&&n&&(a=i[n>0?"won":"lost"]),a)}var $n={AUD:"A$",EUR:"€",GBP:"£",JPY:"¥",USD:"$",BTC:"₿",BCH:"",ETH:"E",ETC:"",LTC:"Ł",UST:"₮"},Jn=function(e){var t=e.tick_count,n=e.contract_type;return(0,h.isAccumulatorContract)(n)?"AccumulatorContract":(0,h.isDigitContract)(n)?"DigitContract":t>0?"TickContract":"NonTickContract"},Xn=function(e){var t=e.barrier,n=e.contract_type,r=e.currency,o=e.is_sold,i=e.profit,a=e.tick_count,c=e.tick_stream,s=!a;if(!o&&!(0,h.isAccumulatorContract)(n)){if(s){if(!i||!t)return;var l=$n[r]||"",u=(0,h.getDecimalPlaces)(r);return"".concat(i<0?"-":i>0?"+":" ").concat(l).concat(Math.abs(i).toFixed(u))}return"".concat(Math.max(c.length-1,0),"/").concat(a)}};function Qn(e,t,n){if(!e||(0,h.isMultiplierContract)(e.contract_type))return null;var r,o=e.transaction_ids,i=e.tick_stream,a=e.date_start,c=e.date_expiry,s=e.entry_tick,l=e.exit_tick,u=e.entry_tick_time,d=e.exit_tick_time,_=e.contract_type,f=e.tick_count,p=e.barrier_count,m=e.barrier,v=e.high_barrier,y=e.low_barrier,b=e.shortcode,w=e.status,E=e.profit,k=e.is_sold,S=(0,h.isAccumulatorContract)(_),x=(0,h.isDigitContract)(_),O=f>0,A=!O,L=(0,h.isHighLow)({shortcode:b}),C=(0,h.isTouchContract)(_),P=(0,h.isTurbosContract)(_),N=O?d:(0,h.getEndTime)(e)||c;if(x||S?r=+s:1==+p&&m?r=+m:2==+p&&v&&y&&(r=+v),!a)return null;if(!o)return{type:Jn(e),markers:[]};var T=[],j=r||0;if(n&&!k&&T.push({epoch:a,quote:x?void 0:j,type:"activeStart",text:(0,g.localize)("Start\nTime")}),a&&s){var I=A?Zn({status:"open",profit:E}):void 0;T.push({epoch:a,quote:x?void 0:j,type:"start",text:Xn(e),color:I})}if((s&&(T.push({epoch:u,quote:j,type:"entry"}),(L||C||P)&&T.push({epoch:u,quote:s,type:"entryTick"})),N&&T.push({epoch:N,quote:j,type:"end"}),l?T.push({epoch:d,quote:+l,type:"exit"}):(null==i?void 0:i.length)>0&&T.push.apply(T,Rn(function(e,t){var n=e.contract_type,r=e.tick_stream,o=(0,h.isDigitContract)(n),i=(0,h.isAccumulatorContract)(n),a=r.length>1?r[r.length-1]:null,c=Mn(i?[]:o?[void 0].concat(Rn(r.slice(-1))):r).slice(1).map((function(e){return{epoch:e.epoch,quote:e.tick,type:"tick"}}));return o||i||!a||(c.push({epoch:a.epoch,quote:a.quote,type:"latestTick"}),c.push({epoch:a.epoch,quote:t,type:"latestTickBarrier"})),c}(e,r))),S&&(null==i?void 0:i.length)>0)&&"open"!==(0,h.getContractStatus)({contract_type:_,profit:E,exit_tick_time:d,status:w})){var z=i[i.length-1],M=i[i.length-2]||z;T.push.apply(T,Rn(er({high_barrier:v,low_barrier:y,prev_epoch:M.epoch,is_dark_mode_on:t,contract_info:e})))}return{type:Jn(e),markers:T,color:Zn({status:w,profit:A||k?E:void 0,is_dark_theme:t,is_vanilla:(0,h.isVanillaContract)(_)})}}function er(e){var t=e.contract_info,n=e.high_barrier,r=e.low_barrier,o=e.is_accumulator_trade_without_contract,i=void 0!==o&&o,a=e.is_dark_theme,c=e.has_crossed_accu_barriers,s=e.barrier_spot_distance,l=e.prev_epoch,u=t||{},d=u.contract_type,_=u.profit,f=u.exit_tick_time,p=u.status,m=u.is_sold,g=(0,h.getContractStatus)({contract_type:d,profit:_,exit_tick_time:f,status:p}),v="open"!==g,y=Zn({status:c||"lost"===g?"lost":i?"open":"won",is_dark_theme:a}),b=Zn(i?{status:"fg",is_dark_theme:a}:{is_dark_theme:a,status:g,profit:m||v?_:null});return[{epoch:l,quote:+n,type:"highBarrier",color:y,text:s?"+".concat(s):""},{epoch:l,quote:+r,type:"lowBarrier",color:y,text:s?"-".concat(s):""},{epoch:l,type:"previousTick",color:b}]}function tr(e){var t=e.prev_epoch,n=e.high_barrier,r=e.low_barrier,o=e.is_accumulator_trade_without_contract,i=void 0!==o&&o,a=e.has_crossed_accu_barriers,c=void 0!==a&&a,s=e.is_dark_theme,l=e.contract_info,u=e.in_contract_details,d=void 0!==u&&u;return{type:"AccumulatorContract",markers:er({contract_info:l,high_barrier:n,low_barrier:r,is_accumulator_trade_without_contract:i,is_dark_theme:s,has_crossed_accu_barriers:c,barrier_spot_distance:e.barrier_spot_distance,prev_epoch:t}),props:{hasPersistentBorders:d}}}function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){ir(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ir(e,t,n){return(t=cr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cr(r.key),r)}}function cr(e){var t=function(e,t){if("object"!==nr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nr(t)?t:String(t)}function sr(e,t){return sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sr(e,t)}function lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dr(e);if(t){var o=dr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ur(e)}(this,n)}}function ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e){return dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dr(e)}var _r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}(a,e);var t,n,r,o=lr(a);function a(e,t){var n,r=t.contract_id;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=o.call(this,{root_store:e,validation_rules:(0,h.getContractValidationRules)()})).digits_info=i.observable.object({}),n.sell_info=i.observable.object({}),n.contract_config={},n.display_status="purchased",n.is_ended=!1,n.is_digit_contract=!1,n.error_message="",n.contract_info=i.observable.object({}),n.is_static_chart=!1,n.end_time=null,n.accu_high_barrier=null,n.accu_low_barrier=null,n.cached_barriers_data={},n.contract_update_take_profit="",n.contract_update_stop_loss="",n.has_contract_update_take_profit=!1,n.has_contract_update_stop_loss=!1,n.contract_update_history=[],n.contract_update_config={},n.margin=void 0,n.barriers_array=[],n.markers_array=[],n.marker=null,n.accumulator_marker=null,n.is_ongoing_contract=!1,n.cacheProposalOpenContractResponse=function(e){var t=e.proposal_open_contract.contract_id;h.WS.storage.set({proposal_open_contract:1,contract_id:t},e)},n.createBarriersArray=function(e){var t=[];if(e){var r=e.contract_type,o=e.barrier,i=e.entry_spot,a=e.high_barrier,c=e.low_barrier,s=n.accu_high_barrier||o||a;if((0,h.isBarrierSupported)(r)&&(s||i&&!(0,h.isAccumulatorContract)(r))){var l=new Ft(s||i,n.accu_low_barrier||c,null,{color:h.BARRIER_COLORS.BLUE,line_style:!(0,h.isAccumulatorContract)(r)&&h.BARRIER_LINE_STYLES.SOLID,not_draggable:!0,hideBarrierLine:(0,h.isAccumulatorContract)(r),shade:(0,h.isAccumulatorContract)(r)&&h.DEFAULT_SHADES[2]});l.updateBarrierShade(!0,r),t=[l]}}return t},(0,i.makeObservable)(ur(n),{accu_high_barrier:i.observable,accu_low_barrier:i.observable,cached_barriers_data:i.observable,digits_info:i.observable,sell_info:i.observable,contract_config:i.observable.ref,display_status:i.observable,is_ended:i.observable,is_digit_contract:i.observable,error_message:i.observable,contract_info:i.observable.ref,is_static_chart:i.observable,end_time:i.observable,contract_update_take_profit:i.observable,contract_update_stop_loss:i.observable,has_contract_update_take_profit:i.observable,has_contract_update_stop_loss:i.observable,contract_update_history:i.observable.ref,margin:i.observable,barriers_array:i.observable.shallow,markers_array:i.observable.shallow,marker:i.observable.ref,accumulator_marker:i.observable.ref,populateConfig:i.action.bound,populateContractUpdateConfig:i.action.bound,populateContractUpdateHistory:i.action.bound,clearContractUpdateConfigValues:i.action.bound,onChange:i.action.bound,updateLimitOrder:i.action.bound,getContractsArray:i.action.bound}),n.root_store=e,n.contract_id=r,n}return t=a,n=[{key:"populateConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.contract_info;this.contract_info=e,this.end_time=(0,h.getEndTime)(this.contract_info);var r=(0,h.getAccuBarriersForContractDetails)(e),o=r.accu_high_barrier,a=r.accu_low_barrier;this.accu_high_barrier=o,this.accu_low_barrier=a,this.updateBarriersArray(e,this.root_store.ui.is_dark_mode_on),this.markers_array=Bn(this.contract_info),this.marker=Qn(this.contract_info,this.root_store.ui.is_dark_mode_on,t),this.contract_config=function(e){var t;if((0,h.isEmptyObject)(e))return null;var n=e.date_start,r=(0,h.getEndTime)(e),o=dn(n,r||null),i=un(n,r||null),a=(0,h.isAccumulatorContract)(e.contract_type),c=a&&!(null===(t=e.tick_stream)||void 0===t||!t.length)&&e.tick_stream[0].epoch,s=a&&"open"===e.status&&10===e.tick_stream.length,l=s?c:n,u=s?c:e.purchase_time;return{chart_type:e.tick_count?"line":i,granularity:e.tick_count?0:o,end_epoch:r,start_epoch:l,scroll_to_epoch:u}}(this.contract_info),this.display_status=(0,h.getDisplayStatus)(this.contract_info),this.is_ended=(0,h.isEnded)(this.contract_info),this.is_digit_contract=(0,h.isDigitContract)(this.contract_info.contract_type),!this.contract_info.barrier&&n.barrier&&this.is_digit_contract&&(this.contract_info.barrier=n.barrier),this.is_digit_contract&&(0,i.extendObservable)(this.digits_info,(0,h.getDigitInfo)(this.digits_info,this.contract_info)),1!=+e.is_settleable||e.is_sold||h.WS.send({sell_expired:1});var c=(0,h.isMultiplierContract)(this.contract_info.contract_type),s=(0,h.isAccumulatorContract)(this.contract_info.contract_type),l=(0,h.isTurbosContract)(this.contract_info.contract_type);(s||c||l)&&e.contract_id&&e.limit_order&&this.populateContractUpdateConfig(this.contract_info)}},{key:"populateContractUpdateConfig",value:function(e){var t=(0,h.getContractUpdateConfig)(e);if(!(0,h.isEqualObject)(this.contract_update_config,t)){Object.assign(this,t),this.contract_update_config=t;var n=e.contract_update,r=e.error;n&&!r&&(this.contract_info.limit_order=Object.assign(this.contract_info.limit_order||{},n))}}},{key:"populateContractUpdateHistory",value:function(e){var t=e.contract_update_history;this.root_store.contract_replay.contract_store.contract_update_history=t.sort((function(e,t){return t.order_date-e.order_date}))}},{key:"updateBarriersArray",value:function(e,t){var n,r=this,o=e||{},a=o.barrier,c=o.contract_type,s=o.current_spot_high_barrier,l=o.current_spot_low_barrier,u=o.high_barrier,d=o.low_barrier,_=o.status,f=o.current_spot_time,p=o.underlying,m=o.tick_stream,g=void 0===m?[]:m,v=null===(n=this.barriers_array)||void 0===n?void 0:n[0];if((0,h.isAccumulatorContract)(e.contract_type)){var y,b;if(this.cached_barriers_data.current_spot_high_barrier===s&&this.cached_barriers_data.current_spot_low_barrier===l&&this.cached_barriers_data.high_barrier===u&&this.cached_barriers_data.low_barrier===d&&this.cached_barriers_data.status===_)return;var w="open"!==(0,h.getContractStatus)(e),E=w?(null===(y=g[g.length-2])||void 0===y?void 0:y.epoch)||(null===(b=g[g.length-1])||void 0===b?void 0:b.epoch):f;return w&&(this.accumulator_marker=tr({high_barrier:u,low_barrier:d,prev_epoch:E,is_dark_mode_on:t,contract_info:e,in_contract_details:!0})),this.barriers_array.length?(setTimeout((function(){return(0,i.runInAction)((function(){e&&((0,h.isBarrierSupported)(c)&&r.accu_high_barrier&&r.accu_low_barrier&&(null==v||v.updateBarriers(r.accu_high_barrier,r.accu_low_barrier)),r.markers_array=Bn(e,!0),r.accumulator_marker=tr({high_barrier:r.accu_high_barrier,low_barrier:r.accu_low_barrier,prev_epoch:E,is_dark_mode_on:r.root_store.ui.is_dark_mode_on,contract_info:r.contract_info,in_contract_details:!0}))}))}),(0,h.isOpen)(e)?(0,h.getAccuBarriersDefaultTimeout)(p):0),void(this.cached_barriers_data={current_spot_high_barrier:s,current_spot_low_barrier:l,high_barrier:u,low_barrier:d,status:_})):void(this.barriers_array=this.createBarriersArray(or(or({},e),{},{high_barrier:this.accu_high_barrier,low_barrier:this.accu_low_barrier}),t))}this.barriers_array.length?e&&((0,h.isBarrierSupported)(c)&&(a||u)&&(null==v||v.updateBarriers(a||u,d)),e.contract_id&&e.contract_id===this.root_store.contract_replay.contract_id&&Wt({barriers:this.barriers_array,contract_info:e,contract_type:c,is_over:!0})):this.barriers_array=this.createBarriersArray(e,t)}},{key:"clearContractUpdateConfigValues",value:function(){Object.assign(this,(0,h.getContractUpdateConfig)(this.contract_info)),this.validation_errors.contract_update_stop_loss=[],this.validation_errors.contract_update_take_profit=[]}},{key:"onChange",value:function(e){var t=e.name,n=e.value;this[t]=n,this.validateProperty(t,this[t])}},{key:"updateLimitOrder",value:function(){var e=this,t=(0,h.isAccumulatorContract)(this.contract_info.contract_type)||(0,h.isTurbosContract)(this.contract_info.contract_type)?{take_profit:Bt(this).take_profit}:Bt(this);h.WS.contractUpdate(this.contract_id,t).then((function(t){t.error?e.root_store.common.setServicesError(or({type:t.msg_type},t.error)):(e.populateContractUpdateConfig(t),e.root_store.ui.is_history_tab_active&&h.WS.contractUpdateHistory(e.contract_id).then(e.populateContractUpdateHistory),e.root_store.portfolio.populateContractUpdate(t,e.contract_id))}))}},{key:"getContractsArray",value:function(){return this.accumulator_marker?[this.accumulator_marker]:[]}}],n&&ar(t.prototype,n),r&&ar(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(I);function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){mr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mr(e,t,n){return(t=br(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gr(){gr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==fr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function vr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,br(r.key),r)}}function br(e){var t=function(e,t){if("object"!==fr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fr(t)?t:String(t)}function wr(e,t){return wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wr(e,t)}function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sr(e);if(t){var o=Sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kr(e)}(this,n)}}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sr(e){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sr(e)}var xr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wr(e,t)}(a,e);var t,n,r,o=Er(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).chart_state="",t.contract_store={contract_info:{}},t.is_market_closed=!1,t.is_sell_requested=!1,t.has_error=!1,t.error_message="",t.error_code="",t.is_chart_loading=!0,t.is_chart_scaling=!1,t.is_forward_starting=!1,t.margin=void 0,t.contract_id=void 0,t.indicative_status=void 0,t.contract_info=i.observable.object({}),t.is_static_chart=!1,t.is_ongoing_contract=!1,t.prev_indicative=0,t.contract_update=i.observable.object({}),t.should_forget_first=!1,t.handleSubscribeProposalOpenContract=function(){var e,n=(e=gr().mark((function e(n,r){return gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.WS.storage.has({proposal_open_contract:1,contract_id:n});case 2:if(!e.sent){e.next=6;break}return h.WS.storage.proposalOpenContract({contract_id:n}).then(r),e.abrupt("return");case 6:if(!t.should_forget_first){e.next=10;break}return e.next=9,h.WS.forgetAll("proposal_open_contract");case 9:t.should_forget_first=!1;case 10:t.subscriber=h.WS.subscribeProposalOpenContract(n,r);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){vr(i,r,o,a,c,"next",e)}function c(e){vr(i,r,o,a,c,"throw",e)}a(void 0)}))});return function(e,t){return n.apply(this,arguments)}}(),t.subscribeProposalOpenContract=function(){h.WS.wait("authorize").then((function(){t.handleSubscribeProposalOpenContract(t.contract_id,t.populateConfig)}))},t.forgetProposalOpenContract=function(){t.subscriber&&(t.subscriber.unsubscribe(),delete t.subscriber)},t.setAccountSwitcherListener=function(e,n){t.onSwitchAccount((function(){return t.accountSwitcherListener(e,n)}))},t.accountSwitcherListener=function(e,n){return t.has_error?(t.removeErrorMessage(),t.onMount(e)):t.root_store.common.is_language_changing||n.push(h.routes.reports),Promise.resolve()},t.removeAccountSwitcherListener=function(){t.disposeSwitchAccount()},(0,i.makeObservable)(kr(t),{chart_state:i.observable,contract_store:i.observable,is_market_closed:i.observable,is_sell_requested:i.observable,has_error:i.observable,error_message:i.observable,error_code:i.observable,is_chart_loading:i.observable,is_chart_scaling:i.observable,is_forward_starting:i.observable,margin:i.observable,contract_id:i.observable,indicative_status:i.observable,contract_info:i.observable.ref,is_static_chart:i.observable,contract_update:i.observable.ref,onMount:i.action.bound,onUnmount:i.override,populateConfig:i.action.bound,updateMargin:i.action.bound,chartStateChange:i.action.bound,onClickCancel:i.action.bound,onClickSell:i.action.bound,handleSell:i.action.bound,removeErrorMessage:i.action.bound}),t.root_store=e,t}return t=a,(n=[{key:"onMount",value:function(e){var t=this;e&&(this.contract_id=e,this.contract_store=new _r(this.root_store,{contract_id:e}),this.subscribeProposalOpenContract(),h.WS.setOnReconnect((function(){t.root_store.client.is_switching||t.subscribeProposalOpenContract()})))}},{key:"onUnmount",value:function(){this.forgetProposalOpenContract(this.contract_id,this.populateConfig),this.contract_id=null,this.is_ongoing_contract=!1,this.is_static_chart=!1,this.is_chart_loading=!0,this.contract_info={},this.indicative_status=null,this.prev_indicative=0,this.chart_state="",this.root_store.ui.toggleHistoryTab(!1),h.WS.removeOnReconnect()}},{key:"populateConfig",value:function(e){if(this.switch_account_listener){if("error"in e){var t=e.error,n=t.code,r=t.message;return this.has_error=!0,this.is_chart_loading=!1,this.error_message=r,void(this.error_code=n)}if((0,h.isEmptyObject)(e.proposal_open_contract))return this.has_error=!0,this.error_message=(0,g.localize)("Sorry, you can't view this contract because it doesn't belong to this account."),this.should_forget_first=!0,void(this.is_chart_loading=!1);if(+e.proposal_open_contract.contract_id===this.contract_id){this.contract_info=e.proposal_open_contract,this.contract_update=e.proposal_open_contract.limit_order;var o=this.prev_indicative,i=+this.contract_info.bid_price;this.indicative_status=i>o?"profit":i<o?"loss":null,this.prev_indicative=i;var a=!!this.contract_info.is_forward_starting||(0,h.isForwardStarting)(this.contract_info.shortcode,this.contract_info.purchase_time);this.is_forward_starting=a,this.contract_store.populateConfig(this.contract_info);var c=this.contract_store.end_time;this.updateMargin((c||this.contract_info.date_expiry)-this.contract_info.date_start),c||(this.is_ongoing_contract=!0),c&&(this.is_ongoing_contract?this.is_static_chart=!1:this.is_static_chart=!0),this.contract_info.is_sold&&this.contract_store.cacheProposalOpenContractResponse(e)}}}},{key:"updateMargin",value:function(e){var t=this.contract_store.contract_config.granularity;this.margin=Math.floor(t?3*t:Math.max(300,30*e/3600||0))}},{key:"chartStateChange",value:function(e,t){var n=this;this.chart_state=e;var r="isClosed";switch(e){case"INITIAL":this.is_chart_scaling=!1,this.is_chart_loading||(this.is_chart_loading=!0);break;case"READY":setTimeout((0,i.action)((function(){return n.is_chart_scaling=!0})),10);break;case"SCROLL_TO_LEFT":setTimeout((0,i.action)((function(){n.is_chart_loading=!1})),20);break;case"MARKET_STATE_CHANGE":t&&r in t&&(this.is_market_closed=t[r])}}},{key:"onClickCancel",value:function(e){var t=this;e&&h.WS.cancelContract(e).then((function(e){e.error?t.root_store.common.setServicesError(hr({type:e.msg_type},e.error)):t.root_store.notifications.addNotificationMessage((0,h.contractCancelled)())}))}},{key:"onClickSell",value:function(e){var t=this.contract_info.bid_price;e&&(t||0===t)&&(this.is_sell_requested=!0,h.WS.sell(e,t).then(this.handleSell))}},{key:"handleSell",value:function(e){e.error?(this.is_sell_requested=!1,this.root_store.common.setServicesError(hr({type:e.msg_type},e.error))):!e.error&&e.sell&&(this.is_sell_requested=!1,this.sell_info={sell_price:e.sell.sold_for,transaction_id:e.sell.transaction_id},this.root_store.notifications.addNotificationMessage((0,h.contractSold)(this.root_store.client.currency,e.sell.sold_for,Ve.Money)),m.Analytics.trackEvent("ce_reports_form",{action:"close_contract",form_name:"default",subform_name:"contract_details_form"}))}},{key:"removeErrorMessage",value:function(){this.error_message="",this.has_error=!1}}])&&yr(t.prototype,n),r&&yr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(I);function Or(e){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){Cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cr(e,t,n){return(t=Nr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nr(r.key),r)}}function Nr(e){var t=function(e,t){if("object"!==Or(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Or(t)?t:String(t)}function Tr(e,t){return Tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tr(e,t)}function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zr(e);if(t){var o=zr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ir(e)}(this,n)}}function Ir(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zr(e){return zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zr(e)}var Mr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tr(e,t)}(a,e);var t,n,r,o=jr(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,{root_store:e})).contracts=[],t.contracts_map={},t.has_error=!1,t.error_message="",t.granularity=+h.LocalStore.get("contract_trade.granularity")||0,t.chart_type=h.LocalStore.get("contract_trade.chart_style")||"line",t.prev_chart_type="",t.prev_granularity=null,t.accu_barriers_timeout_id=null,t.accumulator_barriers_data={},t.accumulator_contract_barriers_data={},t.applicable_contracts=function(){var e=JSON.parse(sessionStorage.getItem("trade_store"))||{},n=e.contract_type,r=e.symbol;if(!n||!r)return[];var o=(0,h.getContractTypesConfig)()[n].trade_types,i=(0,h.isCallPut)(n);return i?o=[h.CONTRACT_TYPES.CALLE,h.CONTRACT_TYPES.PUTE,h.CONTRACT_TYPES.CALL,h.CONTRACT_TYPES.PUT]:(0,h.isTurbosContract)(n)?o=[h.CONTRACT_TYPES.TURBOS.LONG,h.CONTRACT_TYPES.TURBOS.SHORT]:(0,h.isVanillaContract)(n)&&(o=[h.CONTRACT_TYPES.VANILLA.CALL,h.CONTRACT_TYPES.VANILLA.PUT]),t.contracts.filter((function(e){return e.contract_info.underlying===r})).filter((function(e){var t=e.contract_info;return!((0,h.isMultiplierContract)(t.contract_type)&&(0,h.isEnded)(e.contract_info))})).filter((function(e){var t=e.contract_info,r=-1!==o.indexOf(t.contract_type);return r&&i&&(t.barrier&&t.entry_tick||t.shortcode)?"".concat(+t.entry_tick)!=="".concat(+t.barrier)||(0,h.isHighLow)(t)?n===h.TRADE_TYPES.HIGH_LOW:n===h.TRADE_TYPES.RISE_FALL||n===h.TRADE_TYPES.RISE_FALL_EQUAL:r}))},(0,i.makeObservable)(Ir(t),{accu_barriers_timeout_id:i.observable,accumulator_barriers_data:i.observable.struct,accumulator_contract_barriers_data:i.observable.struct,clearAccumulatorBarriersData:i.action.bound,contracts:i.observable.shallow,has_crossed_accu_barriers:i.computed,has_error:i.observable,error_message:i.observable,granularity:i.observable,chart_type:i.observable,updateAccumulatorBarriersData:i.action.bound,updateChartType:i.action.bound,updateGranularity:i.action.bound,markers_array:i.computed,filtered_contracts:i.computed,addContract:i.action.bound,removeContract:i.action.bound,accountSwitchListener:i.action.bound,onUnmount:i.override,prev_chart_type:i.observable,prev_granularity:i.observable,updateProposal:i.action.bound,last_contract:i.computed,clearError:i.action.bound,getContractById:i.action.bound,savePreviousChartMode:i.action.bound,setNewAccumulatorBarriersData:i.action.bound}),t.root_store=e,t.onSwitchAccount(t.accountSwitchListener),(0,i.reaction)((function(){return t.last_contract.contract_info}),(function(){var e;if((0,h.isAccumulatorContract)(null===(e=t.last_contract.contract_info)||void 0===e?void 0:e.contract_type)){var n=t.last_contract.contract_info||{},r=n.barrier_spot_distance,o=n.current_spot,i=n.current_spot_time,a=n.current_spot_high_barrier,c=n.current_spot_low_barrier,s=n.is_sold,l=n.underlying;o&&a&&!s?t.updateAccumulatorBarriersData({barrier_spot_distance:r,current_spot_time:i,accumulators_high_barrier:a,accumulators_low_barrier:c,should_update_contract_barriers:!0,underlying:l}):(0,h.isAccumulatorContractOpen)(t.last_contract.contract_info)||t.clearAccumulatorBarriersData(!0,!1)}})),t}return t=a,n=[{key:"clearAccumulatorBarriersData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.accu_barriers_timeout_id&&t&&clearTimeout(this.accu_barriers_timeout_id),(0,h.isAccumulatorContractOpen)(this.last_contract.contract_info)||(this.accumulator_contract_barriers_data={}),e||(this.accumulator_barriers_data={})}},{key:"setNewAccumulatorBarriersData",value:function(e,t){t?this.accumulator_contract_barriers_data=Lr(Lr({},this.accumulator_contract_barriers_data),e):this.accumulator_barriers_data=Lr(Lr({},this.accumulator_barriers_data),e)}},{key:"updateAccumulatorBarriersData",value:function(e){var t=this,n=e.accumulators_high_barrier,r=e.accumulators_low_barrier,o=e.barrier_spot_distance,a=e.current_spot,c=e.current_spot_time,s=e.prev_spot_time,l=e.should_update_contract_barriers,u=e.underlying;if(a){var d=null!=s?s:this.accumulator_barriers_data.current_spot_time;if(c===d)return;var _={current_spot:a,current_spot_time:c,ticks_history_prev_spot_time:d,tick_update_timestamp:Date.now()};return this.setNewAccumulatorBarriersData(_,!0),void this.setNewAccumulatorBarriersData(_)}var f={accumulators_high_barrier:n,accumulators_low_barrier:r,barrier_spot_distance:o,should_update_contract_barriers:l,proposal_prev_spot_time:c};if(!(this.accumulator_barriers_data.current_spot_time&&this.accumulator_barriers_data.current_spot_time!==c&&!this.accumulator_barriers_data.accumulators_high_barrier||Object.keys(f).every((function(e){return l?t.accumulator_contract_barriers_data[e]===f[e]:t.accumulator_barriers_data[e]===f[e]})))){var p=l?this.accumulator_contract_barriers_data.tick_update_timestamp:this.accumulator_barriers_data.tick_update_timestamp;if(document.hidden)return clearTimeout(this.accu_barriers_timeout_id),void this.setNewAccumulatorBarriersData(f,l);this.accu_barriers_timeout_id=setTimeout((function(){(0,i.runInAction)((function(){t.setNewAccumulatorBarriersData(f,l)}))}),(0,h.getAccuBarriersDTraderTimeout)({barriers_update_timestamp:Date.now(),has_default_timeout:this.accumulator_barriers_data.current_spot_time!==c,tick_update_timestamp:p,underlying:u}))}}},{key:"updateChartType",value:function(e){h.LocalStore.set("contract_trade.chart_style",e),this.chart_type=e}},{key:"updateGranularity",value:function(e){0===e&&-1===["line","candles","hollow","ohlc"].indexOf(this.chart_type)&&(this.chart_type="line"),h.LocalStore.set("contract_trade.granularity",e),this.granularity=e,0===this.granularity&&this.root_store.notifications.removeNotificationMessage(h.switch_to_tick_chart)}},{key:"savePreviousChartMode",value:function(e,t){this.prev_chart_type=e,this.prev_granularity=t}},{key:"has_crossed_accu_barriers",get:function(){var e=(JSON.parse(sessionStorage.getItem("trade_store"))||{}).symbol,t=this.last_contract.contract_info||{},n=t.current_spot,r=t.entry_spot,o=t.underlying,i=((0,h.isAccumulatorContractOpen)(this.last_contract.contract_info)?this.accumulator_contract_barriers_data:this.accumulator_barriers_data)||{},a=i.accumulators_high_barrier,c=i.accumulators_low_barrier,s=i.current_spot,l=i.proposal_prev_spot_time,u=i.ticks_history_prev_spot_time,d=r&&r!==n&&o===e;return!(!(s&&a&&c&&(s>=a||s<=c))||!u||u!==l||(0,h.isAccumulatorContractOpen)(this.last_contract.contract_info)&&!d)}},{key:"filtered_contracts",get:function(){return this.applicable_contracts()}},{key:"markers_array",get:function(){var e,t=[],n=(JSON.parse(sessionStorage.getItem("trade_store"))||{}).contract_type;t=this.applicable_contracts().map((function(e){return e.marker})).filter((function(e){return e})).map((function(e){return(0,i.toJS)(e)}));var r=this.last_contract.contract_info||{},o=r.current_spot_time,a=r.entry_tick_time,c=r.exit_tick_time,s=a&&a!==o||c&&o<=c,l=(0,h.isAccumulatorContractOpen)(this.last_contract.contract_info)&&s&&(null===(e=this.accumulator_contract_barriers_data)||void 0===e?void 0:e.accumulators_high_barrier)&&this.accumulator_contract_barriers_data||this.accumulator_barriers_data||{},u=l.accumulators_high_barrier,d=l.accumulators_low_barrier,_=l.barrier_spot_distance,f=l.proposal_prev_spot_time;if(n===h.TRADE_TYPES.ACCUMULATOR&&f&&u){var p=(0,h.isAccumulatorContractOpen)(this.last_contract.contract_info);t.push(tr({high_barrier:u,low_barrier:d,barrier_spot_distance:_,prev_epoch:f,has_crossed_accu_barriers:this.has_crossed_accu_barriers,is_dark_theme:this.root_store.ui.is_dark_mode_on,contract_info:p?this.last_contract.contract_info:{},is_accumulator_trade_without_contract:!p||!a}))}return t}},{key:"addContract",value:function(e){var t=e.barrier,n=e.contract_id,r=e.contract_type,o=e.start_time,i=e.longcode,a=e.underlying,c=e.is_tick_contract,s=e.limit_order,l=void 0===s?{}:s,u=this.contracts_map[n];if(u)this.contracts.every((function(e){return e.contract_id!==n}))&&this.contracts.push(u);else{var d=n===this.last_contract.contract_id,_=new _r(this.root_store,{contract_id:n});_.populateConfig({date_start:o,barrier:t,contract_type:r,longcode:i,underlying:a,limit_order:l},d),this.contracts.push(_),this.contracts_map[n]=_,c&&!this.root_store.portfolio.is_multiplier&&0!==this.granularity&&(0,h.isDesktop)()&&this.root_store.notifications.addNotificationMessage(h.switch_to_tick_chart)}}},{key:"removeContract",value:function(e){var t=e.contract_id;this.contracts=this.contracts.filter((function(e){return e.contract_id!==t})),delete this.contracts_map[t]}},{key:"accountSwitchListener",value:function(){return this.has_error&&this.clearError(),Promise.resolve()}},{key:"onUnmount",value:function(){this.disposeSwitchAccount()}},{key:"updateProposal",value:function(e){if("error"in e)return this.has_error=!0,void(this.error_message=e.error.message);if(e.proposal_open_contract){var t=+e.proposal_open_contract.contract_id,n=this.contracts_map[t],r=t===this.last_contract.contract_id;n.populateConfig(e.proposal_open_contract,r),e.proposal_open_contract.is_sold&&(this.root_store.notifications.removeNotificationMessage(h.switch_to_tick_chart),n.cacheProposalOpenContractResponse(e))}}},{key:"last_contract",get:function(){var e,t=this.applicable_contracts(),n=null!==(e=this.contracts[0])&&void 0!==e&&e.contract_info.current_spot_time?t.length:-1;return n>0?t[n-1]:{}}},{key:"clearError",value:function(){this.error_message="",this.has_error=!1}},{key:"getContractById",value:function(e){return this.contracts_map[e]||this.root_store.contract_replay.contract_store}}],n&&Pr(t.prototype,n),r&&Pr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(I);function Dr(e){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dr(e)}function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){Ur(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ur(e,t,n){return(t=qr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wr(e){return function(e){if(Array.isArray(e))return Br(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Br(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gr(){Gr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new x(o||[]);return r(a,"_invoke",{value:w(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(O([])));g&&g!==t&&n.call(g,i)&&(h=g);var v=p.prototype=_.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==Dr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return A()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function O(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(v),s(v,c,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Vr(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Yr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Vr(i,r,o,a,c,"next",e)}function c(e){Vr(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qr(r.key),r)}}function qr(e){var t=function(e,t){if("object"!==Dr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Dr(t)?t:String(t)}function Kr(e,t){return Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kr(e,t)}function Zr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jr(e);if(t){var o=Jr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Dr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $r(e)}(this,n)}}function $r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jr(e){return Jr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jr(e)}var Xr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kr(e,t)}(d,e);var t,n,r,o,a,c,s,l,u=Zr(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=u.call(this,{root_store:e})).available_platforms=[],t.available_cfd_accounts=[],t.available_mt5_accounts=[],t.available_dxtrade_accounts=[],t.available_ctrader_accounts=[],t.combined_cfd_mt5_accounts=[],t.selected_account_type=void 0,t.selected_region=void 0,t.is_onboarding_visited=!1,t.is_first_time_visit=!0,t.is_failed_verification_modal_visible=!1,t.is_regulators_compare_modal_visible=!1,t.is_mt5_notification_modal_visible=!1,t.is_tour_open=!1,t.is_account_type_modal_visible=!1,t.account_type_card="",t.selected_platform_type="options",t.mt5_existing_account={},t.open_failed_verification_for="",t.modal_data={active_modal:"",data:{}},t.is_account_transfer_modal_open=!1,t.selected_account={},t.is_real_wallets_upgrade_on=!1,t.is_wallet_migration_failed=!1,t.active_modal_tab=void 0,t.active_modal_wallet_id=void 0,t.getServerName=function(e){if(e){var t,n,r,o,i,a,c=null===(t=e.server_info)||void 0===t||null===(n=t.geolocation)||void 0===n?void 0:n.region;if(c)return"".concat(c," ").concat(1===(null==e||null===(r=e.server_info)||void 0===r||null===(o=r.geolocation)||void 0===o?void 0:o.sequence)?"":null==e||null===(i=e.server_info)||void 0===i||null===(a=i.geolocation)||void 0===a?void 0:a.sequence)}return""},t.hasMultipleSVGAccounts=function(){var e=[];return t.combined_cfd_mt5_accounts.map((function(t){"svg"===t.landing_company_short&&"synthetic"===t.market_type&&(e.length?e.forEach((function(n){return n.server!==t.server&&e.push(t),e})):e.push(t))})),e.length>1},(0,i.makeObservable)($r(t),{account_type_card:i.observable,available_cfd_accounts:i.observable,available_dxtrade_accounts:i.observable,available_ctrader_accounts:i.observable,available_mt5_accounts:i.observable,available_platforms:i.observable,combined_cfd_mt5_accounts:i.observable,is_account_transfer_modal_open:i.observable,is_account_type_modal_visible:i.observable,is_regulators_compare_modal_visible:i.observable,is_mt5_notification_modal_visible:i.observable,is_failed_verification_modal_visible:i.observable,is_tour_open:i.observable,modal_data:i.observable,is_onboarding_visited:i.observable,is_first_time_visit:i.observable,selected_account:i.observable,selected_account_type:i.observable,selected_platform_type:i.observable,active_modal_tab:i.observable,active_modal_wallet_id:i.observable,selected_region:i.observable,mt5_existing_account:i.observable,open_failed_verification_for:i.observable,is_real_wallets_upgrade_on:i.observable,is_wallet_migration_failed:i.observable,closeModal:i.action.bound,content_flag:i.computed,getAccount:i.action.bound,getAvailableCFDAccounts:i.action.bound,getAvailableDxtradeAccounts:i.action.bound,getAvailableCTraderAccounts:i.action.bound,getExistingAccounts:i.action.bound,handleTabItemClick:i.action.bound,setWalletModalActiveTab:i.action.bound,setWalletModalActiveWalletID:i.action.bound,has_any_real_account:i.computed,is_demo_low_risk:i.computed,is_demo:i.computed,is_eu_selected:i.computed,is_real:i.computed,is_low_risk_cr_eu_real:i.computed,no_CR_account:i.computed,no_MF_account:i.computed,CFDs_restricted_countries:i.computed,financial_restricted_countries:i.computed,openDemoCFDAccount:i.action.bound,openModal:i.action.bound,openRealAccount:i.action.bound,selectAccountType:i.action.bound,selectAccountTypeCard:i.action.bound,switchToCRAccount:i.action.bound,selectRegion:i.action.bound,setCombinedCFDMT5Accounts:i.action.bound,setSelectedAccount:i.action.bound,setTogglePlatformType:i.action.bound,should_show_exit_traders_modal:i.computed,show_eu_related_content:i.computed,startTrade:i.action.bound,toggleAccountTransferModal:i.action.bound,closeAccountTransferModal:i.action.bound,toggleAccountTypeModalVisibility:i.action.bound,setIsOnboardingVisited:i.action.bound,setIsFirstTimeVisit:i.action.bound,setMT5NotificationModal:i.action.bound,toggleFailedVerificationModalVisibility:i.action.bound,setMT5ExistingAccount:i.action.bound,openFailedVerificationModal:i.action.bound,toggleIsTourOpen:i.action.bound,toggleRegulatorsCompareModal:i.action.bound,showTopUpModal:i.action.bound,toggleWalletsUpgrade:i.action.bound,setWalletsMigrationFailedPopup:i.action.bound}),(0,i.reaction)((function(){var e,n;return[t.selected_account_type,t.selected_region,t.root_store.client.is_switching,t.root_store.client.mt5_login_list,t.root_store.client.dxtrade_accounts_list,t.root_store.client.ctrader_accounts_list,t.is_demo_low_risk,null===(e=t.root_store.modules)||void 0===e||null===(n=e.cfd)||void 0===n?void 0:n.current_list,t.root_store.client.landing_companies,t.root_store.common.current_language,t.financial_restricted_countries]}),(function(){t.getAvailablePlatforms(),t.getAvailableCFDAccounts()})),(0,i.reaction)((function(){return[t.selected_region,t.root_store.client.is_landing_company_loaded,t.root_store.client.loginid]}),(function(){"real"===t.selected_account_type&&t.setSwitchEU()})),(0,i.reaction)((function(){return[t.root_store.client.loginid,t.root_store.client.residence]}),(function(){var e=t.root_store.client.residence,n=/^VRT|VRW/.test(t.root_store.client.loginid),r=/^MF|MFW/.test(t.root_store.client.loginid);t.selected_account_type=/^VRT|VRW/.test(t.root_store.client.loginid)?"demo":"real",t.selected_region=(n||r)&&(0,R.isEuCountry)(e)||r?"EU":"Non-EU"})),t}return t=d,n=[{key:"setSwitchEU",value:(l=Yr(Gr().mark((function e(){var t,n,r,o,i,a,c,s,l;return Gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store.client,o=r.account_list,i=r.switchAccount,a=r.loginid,c=r.setIsLoggingIn,s=null===(t=o.find((function(e){var t;return null===(t=e.loginid)||void 0===t?void 0:t.startsWith("MF")})))||void 0===t?void 0:t.loginid,l=null===(n=o.find((function(e){var t;return null===(t=e.loginid)||void 0===t?void 0:t.startsWith("CR")})))||void 0===n?void 0:n.loginid,"EU"!==this.selected_region||null!=a&&a.startsWith("MF")){e.next=8;break}return e.next=6,i(s).then((function(){c(!1)}));case 6:e.next=11;break;case 8:if("Non-EU"!==this.selected_region||null!=a&&a.startsWith("CR")){e.next=11;break}return e.next=11,i(l).then((function(){c(!1)}));case 11:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"setWalletModalActiveTab",value:function(e){this.active_modal_tab=e}},{key:"setWalletModalActiveWalletID",value:function(e){this.active_modal_wallet_id=e}},{key:"no_MF_account",get:function(){var e=this.root_store.client.has_maltainvest_account;return"EU"===this.selected_region&&!e}},{key:"no_CR_account",get:function(){return!this.root_store.client.active_accounts.some((function(e){return"svg"===e.landing_company_shortcode}))&&"Non-EU"===this.selected_region}},{key:"setSelectedAccount",value:function(e){this.selected_account=e}},{key:"selectAccountType",value:(s=Yr(Gr().mark((function e(t){var n,r,o,i,a,c,s;return Gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.root_store.client,r=n.account_list,o=n.switchAccount,i=n.prev_real_account_loginid,a=n.has_active_real_account,"demo"!==t){e.next=6;break}return e.next=4,o(null===(c=r.find((function(e){return e.is_virtual&&!e.is_disabled})))||void 0===c?void 0:c.loginid);case 4:e.next=15;break;case 6:if("real"!==t){e.next=15;break}if(a||this.content_flag!==h.ContentFlag.EU_DEMO||(this.root_store.client.real_account_creation_unlock_date?this.root_store.ui.setShouldShowCooldownModal(!0):this.root_store.ui.openRealAccountSignup("maltainvest")),!i){e.next=13;break}return e.next=11,o(i);case 11:e.next=15;break;case 13:return e.next=15,o(null===(s=r.find((function(e){return!e.is_virtual&&!e.is_disabled})))||void 0===s?void 0:s.loginid);case 15:this.selected_account_type=t;case 16:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"switchToCRAccount",value:(c=Yr(Gr().mark((function e(){var t,n,r,o,i;return Gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.root_store.client,n=t.account_list,r=t.switchAccount,!(o=t.prev_real_account_loginid)||o.startsWith("MF")){e.next=6;break}return e.next=4,r(o);case 4:e.next=8;break;case 6:return e.next=8,r(null===(i=n.find((function(e){return!e.is_virtual&&!e.is_disabled&&!e.loginid.startsWith("MF")})))||void 0===i?void 0:i.loginid);case 8:this.selected_account_type="real",this.selected_region="Non-EU";case 10:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"selectAccountTypeCard",value:function(e){this.account_type_card=e}},{key:"selectRegion",value:function(e){this.selected_region=e}},{key:"toggleIsTourOpen",value:function(e){this.is_tour_open=e}},{key:"is_demo_low_risk",get:function(){if(this.root_store.client.is_landing_company_loaded){var e=this.root_store.client.landing_companies,t=e.financial_company,n=e.gaming_company;return this.content_flag===h.ContentFlag.CR_DEMO&&"maltainvest"===(null==t?void 0:t.shortcode)&&"svg"===(null==n?void 0:n.shortcode)}return!1}},{key:"content_flag",get:function(){var e=this.root_store.client,t=e.is_logged_in,n=e.landing_companies,r=e.residence;if(e.is_landing_company_loaded){var o=n.financial_company,i=n.gaming_company,a="svg"===(null==o?void 0:o.shortcode)||"svg"===(null==i?void 0:i.shortcode);if(!t)return"";if(!(null!=i&&i.shortcode||"maltainvest"!==(null==o?void 0:o.shortcode)))return this.is_demo?h.ContentFlag.EU_DEMO:h.ContentFlag.EU_REAL;if("maltainvest"===(null==o?void 0:o.shortcode)&&"svg"===(null==i?void 0:i.shortcode)&&this.is_real)return this.is_eu_user?h.ContentFlag.LOW_RISK_CR_EU:h.ContentFlag.LOW_RISK_CR_NON_EU;if(("svg"===(null==o?void 0:o.shortcode)&&"svg"===(null==i?void 0:i.shortcode)||a)&&this.is_real)return h.ContentFlag.HIGH_RISK_CR;if((0,R.isEuCountry)(r))return this.is_demo?h.ContentFlag.EU_DEMO:h.ContentFlag.EU_REAL;if(this.is_demo)return h.ContentFlag.CR_DEMO}return h.ContentFlag.LOW_RISK_CR_NON_EU}},{key:"show_eu_related_content",get:function(){return[h.ContentFlag.EU_DEMO,h.ContentFlag.EU_REAL,h.ContentFlag.LOW_RISK_CR_EU].includes(this.content_flag)}},{key:"is_low_risk_cr_eu_real",get:function(){return[h.ContentFlag.LOW_RISK_CR_EU,h.ContentFlag.EU_REAL].includes(this.content_flag)}},{key:"getAvailablePlatforms",value:function(){var e=(0,h.getAppstorePlatforms)();!this.financial_restricted_countries&&!this.is_eu_user||this.is_demo_low_risk?"Non-EU"===this.selected_region&&!this.financial_restricted_countries||this.is_demo_low_risk?this.available_platforms=e.filter((function(e){return["Non-EU","All"].some((function(t){return t===e.availability}))})):this.available_platforms=e:this.available_platforms=e.filter((function(e){return["EU","All"].some((function(t){return t===e.availability}))}))}},{key:"toggleAccountTypeModalVisibility",value:function(){this.is_account_type_modal_visible=!this.is_account_type_modal_visible}},{key:"setIsOnboardingVisited",value:function(e){this.is_onboarding_visited=e}},{key:"setIsFirstTimeVisit",value:function(e){this.is_first_time_visit=e}},{key:"is_eu_selected",get:function(){return"EU"===this.selected_region}},{key:"should_show_exit_traders_modal",get:function(){var e=[h.ContentFlag.LOW_RISK_CR_EU,h.ContentFlag.LOW_RISK_CR_NON_EU,h.ContentFlag.CR_DEMO].includes(this.content_flag),t=this.root_store.client.active_accounts;return e&&t.some((function(e){return"maltainvest"===e.landing_company_shortcode}))}},{key:"toggleRegulatorsCompareModal",value:function(){this.is_regulators_compare_modal_visible=!this.is_regulators_compare_modal_visible}},{key:"setMT5NotificationModal",value:function(e){this.is_mt5_notification_modal_visible=e}},{key:"has_any_real_account",get:function(){return"real"===this.selected_account_type&&this.root_store.client.has_active_real_account}},{key:"setTogglePlatformType",value:function(e){this.selected_platform_type=e}},{key:"getAvailableCFDAccounts",value:function(){var e=this,t=[].concat(Wr((0,h.getCFDAvailableAccount)()),[{name:!this.is_eu_user||this.is_demo_low_risk?(0,g.localize)("Financial"):(0,g.localize)("CFDs"),description:!e.is_eu_user||e.is_demo_low_risk?(0,g.localize)("This account offers CFDs on financial instruments."):(0,g.localize)("This MFSA-regulated account offers CFDs on derived and financial instruments."),platform:h.CFD_PLATFORMS.MT5,market_type:"financial",icon:!this.is_eu_user||this.is_demo_low_risk?"Financial":"CFDs",availability:"All"},{name:(0,g.localize)("Swap-Free"),description:(0,g.localize)("Trade swap-free CFDs on MT5 with forex, stocks, stock indices, commodities cryptocurrencies, ETFs and synthetic indices."),platform:h.CFD_PLATFORMS.MT5,market_type:"all",icon:"SwapFree",availability:"Non-EU"}]);this.available_cfd_accounts=t.map((function(e){return Fr(Fr({},e),{},{description:e.description})})),this.getAvailableDxtradeAccounts(),this.getAvailableCTraderAccounts(),this.getAvailableMt5Accounts(),this.setCombinedCFDMT5Accounts()}},{key:"financial_restricted_countries",get:function(){var e=this.root_store.client.landing_companies,t=e.financial_company,n=e.gaming_company;return"svg"===(null==t?void 0:t.shortcode)&&!n}},{key:"CFDs_restricted_countries",get:function(){var e=this.root_store.client.landing_companies,t=e.financial_company,n=e.gaming_company;return"svg"===(null==n?void 0:n.shortcode)&&!t}},{key:"getAvailableMt5Accounts",value:function(){!this.is_eu_user||this.is_demo_low_risk?this.financial_restricted_countries?this.available_mt5_accounts=this.available_cfd_accounts.filter((function(e){return"financial"===e.market_type&&e.platform===h.CFD_PLATFORMS.MT5})):this.CFDs_restricted_countries?this.available_mt5_accounts=this.available_cfd_accounts.filter((function(e){return"financial"!==e.market_type&&"all"!==e.market_type&&e.platform===h.CFD_PLATFORMS.MT5})):this.available_mt5_accounts=this.available_cfd_accounts.filter((function(e){return e.platform===h.CFD_PLATFORMS.MT5})):this.available_mt5_accounts=this.available_cfd_accounts.filter((function(e){return["EU","All"].some((function(t){return t===e.availability}))}))}},{key:"getAvailableDxtradeAccounts",value:function(){this.CFDs_restricted_countries||this.financial_restricted_countries?this.available_dxtrade_accounts=[]:!this.is_eu_user||this.is_demo_low_risk?this.available_dxtrade_accounts=this.available_cfd_accounts.filter((function(e){return e.platform===h.CFD_PLATFORMS.DXTRADE})):this.available_dxtrade_accounts=this.available_cfd_accounts.filter((function(e){return["EU","All"].some((function(t){return t===e.availability}))&&e.platform===h.CFD_PLATFORMS.DXTRADE}))}},{key:"getAvailableCTraderAccounts",value:function(){this.CFDs_restricted_countries||this.financial_restricted_countries?this.available_ctrader_accounts=[]:!this.is_eu_user||this.is_demo_low_risk?this.available_ctrader_accounts=this.available_cfd_accounts.filter((function(e){return e.platform===h.CFD_PLATFORMS.CTRADER})):this.available_ctrader_accounts=this.available_cfd_accounts.filter((function(e){return["EU","All"].some((function(t){return t===e.availability}))&&e.platform===h.CFD_PLATFORMS.CTRADER}))}},{key:"getExistingAccounts",value:function(e,t){var n,r,o=this,i=this.root_store.client.residence,a=(null===(n=this.root_store.modules)||void 0===n||null===(r=n.cfd)||void 0===r?void 0:r.current_list)||[],c=Object.keys(a),s=this.selected_account_type;return c.filter((function(n){var r="maltainvest"===a[n].landing_company_short;return e!==h.CFD_PLATFORMS.MT5||o.is_eu_user||r?e===h.CFD_PLATFORMS.MT5&&"all"===t||e===h.CFD_PLATFORMS.DXTRADE&&"all"===t||e===h.CFD_PLATFORMS.CTRADER&&"all"===t?n.startsWith("".concat(e,".").concat(s,".").concat(e,"@").concat(t)):e===h.CFD_PLATFORMS.MT5&&(o.is_eu_user||(0,R.isEuCountry)(i))&&r?n.startsWith("".concat(e,".").concat(s,".").concat(t)):n.startsWith("".concat(e,".").concat(s,".").concat(t,"@").concat(t)):n.startsWith("".concat(e,".").concat(s,".").concat(t))})).reduce((function(e,t){return e.push(a[t]),e}),[])}},{key:"startTrade",value:function(e,t){var n=this.root_store,r=n.common,o=n.modules.cfd,i=o.toggleMT5TradeModal,a=o.setMT5TradeAccount;(0,r.setAppstorePlatform)(e),i(),a(t)}},{key:"is_demo",get:function(){return"demo"===this.selected_account_type}},{key:"is_real",get:function(){return"real"===this.selected_account_type}},{key:"is_eu_user",get:function(){return"EU"===this.selected_region}},{key:"handleTabItemClick",value:function(e){this.selected_region=0===e?"Non-EU":"EU"}},{key:"openDemoCFDAccount",value:(a=Yr(Gr().mark((function e(t,n){var r,o,i,a,c,s,l,u,d,_;return Gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store,o=r.client,i=r.modules,a=r.ui,c=i.cfd,s=c.standpoint,l=c.createCFDAccount,u=c.enableCFDPasswordModal,d=c.has_maltainvest_account,_=a.openAccountNeededModal,!o.is_eu||d||null==s||!s.iom){e.next=8;break}_("maltainvest",(0,g.localize)("Deriv Multipliers"),(0,g.localize)("demo CFDs")),e.next=14;break;case 8:if(n===h.CFD_PLATFORMS.CTRADER){e.next=12;break}u(),e.next=14;break;case 12:return e.next=14,l(Fr(Fr({},t),{},{platform:n}));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"openRealAccount",value:(o=Yr(Gr().mark((function e(t,n){var r,o,i,a,c,s,l,u;return Gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store,o=r.client,i=r.modules,a=o.has_active_real_account,c=i.cfd,s=c.createCFDAccount,l=c.enableCFDPasswordModal,u=c.toggleJurisdictionModal,!a||n!==h.CFD_PLATFORMS.MT5){e.next=7;break}u(),e.next=13;break;case 7:if(n!==h.CFD_PLATFORMS.DXTRADE){e.next=11;break}l(),e.next=13;break;case 11:return e.next=13,s(Fr(Fr({},t),{},{platform:n}));case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"openModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.modal_data={active_modal:e,data:t}}},{key:"closeModal",value:function(){this.modal_data={active_modal:"",data:{}}}},{key:"selectRealLoginid",value:function(e){var t=this.root_store.client.accounts;Object.keys(t).includes(e)&&(this.selected_loginid=e)}},{key:"getAccount",value:function(){var e=this.root_store,t=e.modules,n=e.common,r=t.cfd.account_type,o=n.platform;this.is_demo?this.openDemoCFDAccount(r,o):this.openRealAccount(r,o)}},{key:"getShortCodeAndRegion",value:function(e){var t;if(this.is_real&&!this.is_eu_user){var n,r,o,i=e.landing_company_short&&"svg"!==e.landing_company_short&&"bvi"!==e.landing_company_short?(null===(n=e.landing_company_short)||void 0===n?void 0:n.charAt(0).toUpperCase())+(null===(r=e.landing_company_short)||void 0===r?void 0:r.slice(1)):null===(o=e.landing_company_short)||void 0===o?void 0:o.toUpperCase(),a="";this.hasMultipleSVGAccounts()&&(a="financial"!==e.market_type&&"bvi"!==e.landing_company_short?" - ".concat(this.getServerName(e)):""),t="".concat(i).concat(a)}return t}},{key:"setCombinedCFDMT5Accounts",value:function(){var e,t=this;this.combined_cfd_mt5_accounts=[],null===(e=this.available_mt5_accounts)||void 0===e||e.forEach((function(e){var n=t.getExistingAccounts(e.platform,e.market_type);n.length>0?n.forEach((function(n){t.combined_cfd_mt5_accounts=[].concat(Wr(t.combined_cfd_mt5_accounts),[Fr(Fr({},n),{},{icon:e.icon,sub_title:e.name,name:"".concat((0,h.formatMoney)(n.currency,n.display_balance,!0)," ").concat(n.currency),short_code_and_region:t.getShortCodeAndRegion(n),platform:e.platform,description:n.display_login,key:"trading_app_card_".concat(n.display_login),action_type:"multi-action",availability:t.selected_region,market_type:e.market_type})])})):t.combined_cfd_mt5_accounts=[].concat(Wr(t.combined_cfd_mt5_accounts),[{icon:e.icon,name:e.name,platform:e.platform,description:e.description,key:"trading_app_card_".concat(e.name),action_type:"get",availability:t.selected_region,market_type:e.market_type}])}))}},{key:"closeAccountTransferModal",value:function(){this.is_account_transfer_modal_open=!1}},{key:"toggleAccountTransferModal",value:function(){this.is_account_transfer_modal_open=!this.is_account_transfer_modal_open}},{key:"toggleFailedVerificationModalVisibility",value:function(){this.is_failed_verification_modal_visible=!this.is_failed_verification_modal_visible}},{key:"setMT5ExistingAccount",value:function(e){this.mt5_existing_account=e}},{key:"openFailedVerificationModal",value:function(e){var t=this.root_store,n=t.common,r=t.modules.cfd,o=r.setJurisdictionSelectedShortcode,i=r.setAccountType,a=n.setAppstorePlatform;(null==e?void 0:e.platform)===h.CFD_PLATFORMS.MT5?(a(e.platform),i({category:e.category,type:e.type}),this.setMT5ExistingAccount(e),o(e.jurisdiction)):o(""),this.open_failed_verification_for=(null==e?void 0:e.platform)===h.CFD_PLATFORMS.MT5?null==e?void 0:e.jurisdiction:"multipliers",this.toggleFailedVerificationModalVisibility()}},{key:"showTopUpModal",value:function(e){var t=this.root_store,n=t.ui,r=t.modules,o=n.openTopUpModal;(0,r.cfd.setCurrentAccount)(e,{category:this.selected_account_type,type:e.market_type}),o()}},{key:"toggleWalletsUpgrade",value:function(e){this.is_real_wallets_upgrade_on=e}},{key:"setWalletsMigrationFailedPopup",value:function(e){this.is_wallet_migration_failed=e}}],n&&Hr(t.prototype,n),r&&Hr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(I);function Qr(e){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qr(e)}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Qr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Qr(i)?i:String(i)),r)}var o,i}function to(e,t,n){return t&&eo(e.prototype,t),n&&eo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var no=to((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=new ae(this),this.common=new Se(this),this.modules=new Ue(this),this.ui=new Et(this),this.gtm=new De(this),this.notifications=new lt(this),this.active_symbols=new Nt(this),this.portfolio=new cn(this),this.contract_replay=new xr(this),this.contract_trade=new Mr(this),this.chart_barrier_store=new Ft(this),this.traders_hub=new Xr(this)}));(0,i.configure)({enforceActions:"observed"});const ro=function(e){var t=window.location.search;if("signup"===new URLSearchParams(t).get("action")){var n=localStorage.getItem("config.server_url"),r=localStorage.getItem("config.app_id");localStorage.clear(),n&&localStorage.setItem("config.server_url",n),r&&localStorage.setItem("config.app_id",r)}var o=new no;return function(e){window.addEventListener("storage",(function(t){switch(t.key){case"client.accounts":var n,r,o,i,a=e.client.loginid,c=null===(n=JSON.parse(t.newValue))||void 0===n||null===(r=n[a])||void 0===r?void 0:r.currency,s=null===(o=JSON.parse(t.oldValue))||void 0===o||null===(i=o[a])||void 0===i?void 0:i.currency;document.hidden&&c&&s!==c&&e.client.updateAccountCurrency(c,!1);break;case"active_loginid":"null"!==localStorage.getItem("active_loginid")&&localStorage.getItem("active_loginid")||e.client.logout(),document.hidden&&window.location.reload()}}))}(o),l.init(o),o.client.init(),o.common.init(),o.ui.init(e),o}},50344:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(32735),o=n(68461),i=n(68722),a=n(44850);const c=function(){return r.createElement(o.PageError,{header:(0,a.localize)("We couldn’t find that page"),messages:[(0,a.localize)("You may have followed a broken link, or the page has moved to a new address."),(0,a.localize)("Error code: {{error_code}} page not found",{error_code:404})],redirect_urls:[i.routes.trade],redirect_labels:[(0,a.localize)("Return to trade")],classNameImage:"page-404__image",image_url:(0,i.getUrlBase)("/public/images/common/404.png")})}},42671:(e,t,n)=>{n.d(t,{j:()=>r.Z,WS:()=>o.Z,Y:()=>s});var r=n(82714),o=n(17804),i=n(68722),a=n(72720),c=n.n(a),s=function(){return o.Z.logout().then(l)};var l=function(e){var t,n;if(1===e.logout)return(0,i.removeCookies)("affiliate_token","affiliate_tracking","onfido_token"),c().clear(),sessionStorage.clear(),null===(t=window.LC_API)||void 0===t||null===(n=t.close_chat)||void 0===n||n.call(t),e}},82714:(e,t,n)=>{n.d(t,{Z:()=>T});var r,o,i,a=n(53806),c=n.n(a),s=n(31025),l=n(68722),u=n(44850),d=n(93574),_=n.n(d),f=n(42830),p=n.n(f),h=n(17804);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(){g=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),c=new A(o||[]);return r(a,"_invoke",{value:k(e,n,c)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function _(){}function f(){}function p(){}var h={};s(h,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(L([])));y&&y!==t&&n.call(y,i)&&(h=y);var b=p.prototype=_.prototype=Object.create(h);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(r,i,a,c){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==m(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return C()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=S(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function L(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,r(b,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(E.prototype),s(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=L,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var v,y,b,w,E,k,S,x,O,A,L,C,P,N=(w=null,E=function(){clearTimeout(w),o.setIsSocketOpened(!1)},k=function(e){if(w=setTimeout((function(){var e,t,n,o,i,a,c=(null===h.Z||void 0===h.Z||null===(e=h.Z.get)||void 0===e||null===(t=e.call(h.Z))||void 0===t?void 0:t.expect_response_types)||{},s=Object.keys(c).filter((function(e){return"pending"===c[e].state})),u=new Error("deriv-api: no message received after 30s");u.userId=null===(n=r)||void 0===n?void 0:n.loginid,null===(o=window.TrackJS)||void 0===o||null===(i=o.console)||void 0===i||i.error({message:u.message,clientsCountry:null===(a=r)||void 0===a?void 0:a.clients_country,websocketUrl:(0,l.getSocketURL)(),pendingResponseTypes:s})}),3e4),e){if(!r.is_valid_login)return void r.logout();r.is_logged_in||r.is_logging_in?h.Z.get().expectResponse("authorize").then((function(){h.Z.subscribeWebsiteStatus(j.websiteStatus)})):h.Z.subscribeWebsiteStatus(j.websiteStatus),_().init((function(){return o.setServerTime(_().get())})),o.setIsSocketOpened(!0)}},S=function(e){switch(clearTimeout(w),L(e),e.msg_type){case"authorize":if(e.error){var t="1"===sessionStorage.getItem("active_tab");"SelfExclusion"===(0,l.getPropertyValue)(e,["error","code"])&&t&&sessionStorage.removeItem("active_tab"),r.logout()}else/authorize/.test(l.State.get("skip_response"))||(e.authorize.loginid===r.loginid||r.is_populating_account_list||r.is_switching?e.authorize.loginid===r.loginid&&P(e):r.logout());break;case"landing_company":break;case"get_self_exclusion":O(e);break;case"get_settings":e.get_settings&&(x(e.get_settings.country_code),r.setEmail(e.get_settings.email),r.setAccountSettings(e.get_settings),i.eventHandler(e.get_settings));break;case"set_account_currency":h.Z.forgetAll("balance").then(C);break;case"get_account_status":r.setAccountStatus(e.get_account_status);break;case"payout_currencies":r.responsePayoutCurrencies(null==e?void 0:e.payout_currencies);break;case"transaction":i.pushTransactionData(e)}},x=function(e){e&&(r.setResidence(e),h.Z.landingCompany(e).then(r.responseLandingCompany))},O=function(e){var t,n=null==e||null===(t=e.get_self_exclusion)||void 0===t?void 0:t.session_duration_limit;if(y=new Date(sessionStorage.getItem("session_start_time")||_().get()),sessionStorage.setItem("session_start_time",y),n&&n!==v){var o=60*n*1e3-(v?_().get()-c()(y):0);clearTimeout(b),b=setTimeout((function(){r.logout(),sessionStorage.removeItem("session_start_time")}),o)}else n||clearTimeout(b);v=n},A=(0,s.flow)(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p().wait("website_status");case 2:r.setBalanceActiveAccount(t);case 3:case"end":return e.stop()}}),e)}))),L=function(e){var t=e.msg_type;switch((0,l.getPropertyValue)(e,["error","code"])){case"WrongResponse":"mt5_login_list"===t?h.Z.authorized.mt5LoginList().then((function(e){e.error?r.resetMt5ListPopulatedState():(r.responseMt5LoginList(e),h.Z.balanceAll().then((function(e){e.error||r.setBalanceOtherAccounts(e.balance)})))})):"balance"===t?h.Z.forgetAll("balance").then(C):"get_account_status"===t?h.Z.authorized.getAccountStatus().then((function(e){e.error||r.setAccountStatus(e.get_account_status)})):"landing_company"===t&&r.residence&&h.Z.authorized.landingCompany(r.residence).then((function(e){e.error||r.responseLandingCompany(e)}));break;case"InternalServerError":case"OutputValidationFailed":"mt5_login_list"!==t&&o.setError(!0,{message:e.error.message});break;case"RateLimit":"cashier_password"!==t&&o.setError(!0,{message:(0,u.localize)("You have reached the rate limit of requests per second. Please try later.")});break;case"InvalidAppID":case"DisabledClient":o.setError(!0,{message:e.error.message});break;case"InvalidToken":if(["cashier","paymentagent_withdraw","reset_password","trading_platform_password_reset","trading_platform_investor_password_reset","new_account_virtual","portfolio","proposal_open_contract","change_email"].includes(t))return;var n=(0,l.getActivePlatform)(o.app_routing_history);if("DBot"===n)return;r.logout().then((function(){var e=l.routes.trade;"system_email_change"!==(0,l.getActionFromUrl)()&&("Deriv MT5"===n&&(e=l.routes.mt5),o.routeTo(e))}));break;case"AuthorizationRequired":if("buy"===t)return;r.logout()}},C=function(){h.Z.subscribeBalanceAll(j.balanceOtherAccounts),h.Z.subscribeBalanceActiveAccount(j.balanceActiveAccount,r.loginid)},{init:function(e){return r=e.client,o=e.common,i=e.gtm,{onDisconnect:E,onOpen:k,onMessage:S}},setBalanceActiveAccount:A,setBalanceOtherAccounts:function(e){r.setBalanceOtherAccounts(e)},authorizeAccount:P=function(e){r.responseAuthorize(e),C(),h.Z.storage.getSettings(),h.Z.getAccountStatus(),h.Z.storage.payoutCurrencies(),r.setIsAuthorize(!0),r.is_virtual||h.Z.getSelfExclusion(),p().sendBuffered(),/bch/i.test(e.authorize.currency)&&r.accounts[r.loginid].accepted_bch}});const T=N;var j={websiteStatus:function(e){if(e.website_status){if(!p().isSiteDown(e.website_status.site_status)&&p().getAvailability().is_down)return void window.location.reload();if(p().isSiteUpdating(e.website_status.site_status)&&!p().getAvailability().is_updating){var t=Math.floor(30*Math.random())+1;window.setTimeout((function(){p().closeAndOpenNewConnection()}),1e3*t)}p().setAvailability(e.website_status.site_status),r.setWebsiteStatus(e)}},balanceActiveAccount:function(e){e.error||N.setBalanceActiveAccount(e.balance)},balanceOtherAccounts:function(e){e.error||N.setBalanceOtherAccounts(e.balance)}}},17804:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(42830);const o=n.n(r)()},79479:(e,t,n)=>{n.d(t,{Pv:()=>d,XE:()=>s,i$:()=>c,rH:()=>l,s4:()=>a,vv:()=>u});var r=n(68722);function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=function(e,t,n){if(!e||(0,r.isEmptyObject)(e))return!1;var i,a,c,s,l=t.is_svg,u=t.landing_company_shortcode;return l?(a=r.State.getResponse("landing_company.financial_company.requirements.withdrawal")||[],c=r.State.getResponse("landing_company.financial_company.requirements.signup"),s=c?c.map((function(e){return"residence"===e?"country":e})):[],i=[].concat(o(a),o(s))):i=function(){if(!n("financial"))return[];var e=t.residence,r=["account_opening_reason","address_line_1","address_city","phone","tax_identification_number","tax_residence"];"gb"!==e&&"iom"!==u||r.push("address_postcode");return[].concat(r)}(),i.some((function(t){return!e[t]}))},c=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},s=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},l=["contract_sold","has_changed_two_fa"],u=["system_maintenance","site_maintenance"],d=["svg","need_fa","p2p_daily_limit_increase","authenticate","poinc_upload_limited","wallets_migrated","wallets_failed","needs_poinc","notify_financial_assessment","additional_kyc_info","poa_expired","svg_needs_poi_poa","svg_needs_poa","svg_needs_poi","poi_failed","poa_failed","svg_poi_expired","mt5_notification"].concat(u)}}]);
//# sourceMappingURL=core.main~d5ef20ee.db5b1711f7c579a8c996.js.map