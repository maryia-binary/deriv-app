"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1301],{6417:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var i=n(40841),r=n.n(i),a=n(71838),s=n(60216),c=n.n(s),l=n(32735),o=n(34302),u=n(42413),d=n(20374),p=n(58468),_=n(75672);const m=function(e){var t=e.onCitizenshipSelection,n=e.residence,i=e.setFieldValue,r=e.setIsCitizenshipModal,a=e.setIsPasswordModal,s=e.setIsSameCitizenshipModal;return l.createElement("div",null,l.createElement(o.Text,{as:"p",className:"account-signup__text"},(0,d.localize)("Are you a citizen of the same country where you live?")),l.createElement("div",{className:"account-signup__same-citizenship"},l.createElement(o.Button,{type:"button",onClick:function(){s(!1)},tertiary:!0,large:!0,text:(0,d.localize)("Back")}),l.createElement("div",{className:"account-signup__same-citizenship-buttons"},l.createElement(o.Button,{type:"button",onClick:function(){r(!0)},secondary:!0,large:!0,text:(0,d.localize)("No")}),l.createElement(o.Button,{type:"button",onClick:function(){i("citizenship",n,!0),t(n),a(!0)},secondary:!0,large:!0,text:(0,d.localize)("Yes")}))))};var f=function(e){var t=e.children;return l.createElement("div",{className:"signup-separator-container"},t)};f.Line=function(e){var t=e.is_invisible;return l.createElement("div",{className:r()("signup-separator-container__line",{"signup-separator-container__line--invisible":t})})};const g=f;function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b.apply(this,arguments)}const h=function(e){var t=e.api_error,n=e.errors,i=e.handleBlur,s=e.handleChange,c=e.is_appstore,p=e.isModalVisible,_=e.isSubmitting,m=e.touched,f=e.pw_input,h=e.setFieldTouched,v=e.updatePassword,y=e.values;return l.createElement("div",{className:"account-signup__password-selection"},l.createElement(o.Text,{as:"p",weight:"bold",className:"account-signup__heading",align:"center"},l.createElement(d.Localize,{i18n_default_text:"Keep your account secure with a password"})),l.createElement(a.Field,{name:"password"},(function(e){var t=e.field;return l.createElement(o.PasswordMeter,{input:f,has_error:!(!m.password||!n.password),custom_feedback_messages:(0,u.getErrorMessages)().password_warnings},l.createElement(o.PasswordInput,b({},t,{autoComplete:"new-password",className:"account-signup__password-field",label:(0,d.localize)("Create a password"),error:m.password&&n.password,required:!0,value:y.password,onBlur:i,onChange:function(e){var t=e.target;h("password",!0),t&&v(t.value),s(e)},input_id:"dt_core_account-signup-modal_account-signup-password-field"})))})),l.createElement(o.Text,{as:"p",size:"xxs",className:"account-signup__subtext",align:"center"},l.createElement(d.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols."})),l.createElement(g,null),t?l.createElement(l.Fragment,null,l.createElement(o.Text,{as:"p",size:"xxs",color:"loss-danger",className:"account-signup__subtext account-signup__subtext--error",align:"center"},t),l.createElement("div",{className:"account-signup__error-wrapper"},l.createElement(o.Button,{large:!0,secondary:!0,text:(0,d.localize)("Cancel"),type:"button",onClick:function(){return p(!1)}}),l.createElement(o.Button,{large:!0,primary:!0,text:(0,d.localize)("Create new account"),type:"button",onClick:function(){return(0,u.redirectToSignUp)({is_appstore:c})}}))):l.createElement(o.Button,{className:r()("account-signup__btn",{"account-signup__btn--disabled":!y.password||n.password||_}),id:"dt_core_account-signup-modal_submit-btn",type:"submit",is_disabled:!y.password||!!n.password||_,text:(0,d.localize)("Start trading"),large:!0,primary:!0}))};var v=n(70747);function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y.apply(this,arguments)}var w=function(e){var t=e.class_prefix,n=void 0===t?"set-residence":t,i=e.children,r=e.errors,s=e.touched,c=e.setFieldTouched,u=e.setFieldValue,p=e.citizenship_list;return l.createElement("div",{className:"".concat(n,"__residence-selection")},l.createElement(o.Text,{as:"p",align:"center",weight:"bold",className:"".concat(n,"__heading")},(0,d.localize)("Choose your citizenship")),l.createElement(a.Field,{name:"citizenship"},(function(e){var t=e.field;return l.createElement(l.Fragment,null,l.createElement(o.DesktopWrapper,null,l.createElement(o.Autocomplete,y({},t,{autoComplete:"off",input_id:"dt_core_set-citizenship-form_signup-citizenship-select",className:"".concat(n,"__residence-field"),type:"text",label:(0,d.localize)("Citizenship"),error:s.citizenship&&r.citizenship,required:!0,list_items:p,onItemSelection:function(e){var t=e.value,n=e.text;return u("citizenship",t?n:"",!0)}}))),l.createElement(o.MobileWrapper,null,l.createElement(o.SelectNative,{placeholder:(0,d.localize)("Please select"),label:(0,d.localize)("Citizenship"),value:t.value,list_items:p,error:s.citizenship&&r.citizenship,required:!0,use_text:!0,onChange:function(e){c("citizenship",!0),u("citizenship",e.target.value,!0)}})))})),i)};w.propTypes={children:c().node,class_prefix:c().string,citizenship_list:c().arrayOf(c().object)};const E=w;function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],s=!0,c=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{s||null==n.return||n.return()}finally{if(c)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var A={citizenship:"",password:"",residence:""},N=function(e){var t=e.enableApp,n=e.isModalVisible,i=e.clients_country,s=e.onSignup,c=e.residence_list,_=l.useContext(u.PlatformContext).is_appstore,f=C(l.useState(!1),2),g=f[0],b=f[1],y=C(l.useState(!0),2),w=y[0],z=y[1],S=C(l.useState(""),2),O=S[0],N=S[1],j=C(l.useState(""),2),F=j[0],P=j[1],T=C(l.useState(""),2),M=T[0],k=T[1],I=C(l.useState(""),2),B=I[0],L=I[1],V=C(l.useState(!1),2),D=V[0],W=V[1],q=C(l.useState(!1),2),U=q[0],Y=q[1],Z=C(l.useState(!1),2),$=Z[0],K=Z[1],G=function(e){P(e)},H=function(e){L(e),K(!0)};l.useEffect((function(){p.WS.wait("website_status","residence_list").then((function(){i&&c&&N((0,u.getLocation)(c,i,"text")),z(!1)}))}),[]);var J=function(e){e?b(e):(n(!1),t())},Q=function(e){return c.findIndex((function(t){return t.text.toLowerCase()===e.toLowerCase()}))};return l.createElement("div",{className:"account-signup"},w?l.createElement(o.Loading,{is_fullscreen:!1}):l.createElement(a.Formik,{initialValues:A,validate:function(e){return function(e,t){var n={};if((0,u.validLength)(e.password,{min:8,max:25})?(0,u.validPassword)(e.password)||(n.password=(0,u.getErrorMessages)().password()):n.password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.residence){var i=t.findIndex((function(t){return t.text.toLowerCase()===e.residence.toLowerCase()}));-1!==i&&"DISABLED"!==t[i].disabled||(n.residence=(0,d.localize)("Unfortunately, {{website_name}} is not available in your country.",{website_name:u.website_name}))}else n.residence=!0;if(e.citizenship){var r=t.findIndex((function(t){return t.text.toLowerCase()===e.citizenship.toLowerCase()}));-1!==r&&"DISABLED"!==t[r].disabled||(n.citizenship=(0,d.localize)("Unfortunately, {{website_name}} is not available in your country.",{website_name:u.website_name}))}else n.citizenship=!0;return n}(e,c)},onSubmit:function(e){var t=Q(e.residence),n=Q(e.citizenship),i=x(x({},e),{},{residence:c[t].value,citizenship:c[n].value});s(i,J)},residence_list:c},(function(e){var t=e.isSubmitting,i=e.handleBlur,s=e.errors,u=e.handleChange,p=e.values,f=e.setFieldValue,b=e.setFieldTouched,y=e.touched;return l.createElement(a.Form,null,M&&U?l.createElement(l.Fragment,null,$||D?l.createElement(l.Fragment,null,B&&$?l.createElement(h,{api_error:g,errors:s,handleBlur:i,handleChange:u,is_appstore:_,isModalVisible:n,isSubmitting:t,touched:y,pw_input:F,setFieldTouched:b,updatePassword:G,values:p}):l.createElement(E,{class_prefix:"account-signup",errors:s,touched:y,setFieldTouched:b,setFieldValue:f,citizenship_list:c},l.createElement(o.Button,{className:r()("account-signup__btn",{"account-signup__btn--disabled":!p.citizenship||s.citizenship}),type:"button",is_disabled:!p.citizenship||!!s.citizenship,onClick:function(){H(p.citizenship)},primary:!0,large:!0,text:(0,d.localize)("Next")}))):l.createElement(m,{onCitizenshipSelection:H,residence:p.residence,setFieldValue:f,setIsCitizenshipModal:W,setIsPasswordModal:K,setIsSameCitizenshipModal:Y})):l.createElement(v.Z,{header_text:(0,d.localize)("Thanks for verifying your email"),class_prefix:"account-signup",errors:s,touched:y,setFieldTouched:b,setFieldValue:f,residence_list:c,default_value:O},l.createElement(o.Button,{className:r()("account-signup__btn",{"account-signup__btn--disabled":!p.residence||s.residence}),type:"button",is_disabled:!p.residence||!!s.residence,onClick:function(){var e;e=p.residence,k(e),Y(!0)},primary:!0,large:!0,text:(0,d.localize)("Next")})))})))};N.propTypes={clients_country:c().string,enableApp:c().func,onSignup:c().func,residence_list:c().array,isModalVisible:c().func};var j=function(e){var t=e.enableApp,n=e.disableApp,i=e.clients_country,r=e.is_loading,a=e.is_visible,s=e.is_logged_in,c=e.logout,u=e.onSignup,d=e.residence_list,p=e.toggleAccountSignupModal;return l.useEffect((function(){a&&s&&c()}),[a,s,c]),l.createElement(o.Dialog,{is_visible:a,disableApp:n,enableApp:t,is_loading:r||!d.length,is_mobile_full_width:!1,is_content_centered:!0},l.createElement(N,{clients_country:i,onSignup:u,residence_list:d,isModalVisible:p,enableApp:t}))};j.propTypes={clients_country:c().string,disableApp:c().func,enableApp:c().func,is_loading:c().bool,is_visible:c().bool,onSignup:c().func,residence_list:c().arrayOf(c().object)};const F=(0,_.$j)((function(e){var t=e.ui,n=e.client;return{is_visible:t.is_account_signup_modal_visible,toggleAccountSignupModal:t.toggleAccountSignupModal,enableApp:t.enableApp,disableApp:t.disableApp,is_loading:t.is_loading,onSignup:n.onSignup,is_logged_in:n.is_logged_in,residence_list:n.residence_list,clients_country:n.clients_country,logout:n.logout}}))(j)},70747:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(71838),r=n(60216),a=n.n(r),s=n(32735),c=n(34302),l=n(20374);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}var u=function(e){var t=e.class_prefix,n=void 0===t?"set-residence":t,r=e.children,a=e.default_value,u=e.header_text,d=e.errors,p=e.touched,_=e.setFieldTouched,m=e.setFieldValue,f=e.residence_list;return s.useEffect((function(){a&&(_("residence",!0),m("residence",a,!0))}),[]),s.createElement("div",{className:"".concat(n,"__residence-selection")},!!u&&s.createElement(c.Text,{as:"p",align:"center",weight:"bold",className:"".concat(n,"__heading")},u),s.createElement(c.Text,{as:"p",className:"".concat(n,"__").concat(u?"text":"heading")},(0,l.localize)("Where do you live?")),s.createElement(i.Field,{name:"residence"},(function(e){var t=e.field;return s.createElement(s.Fragment,null,s.createElement(c.DesktopWrapper,null,s.createElement(c.Autocomplete,o({},t,{autoComplete:"off",input_id:"dt_core_set-residence-form_signup-residence-select",className:"".concat(n,"__residence-field"),type:"text",label:(0,l.localize)("Choose country"),error:p.residence&&d.residence,required:!0,list_items:f,onItemSelection:function(e){var t=e.value,n=e.text;return m("residence",t?n:"",!0)}}))),s.createElement(c.MobileWrapper,null,s.createElement(c.SelectNative,{placeholder:(0,l.localize)("Please select"),label:(0,l.localize)("Choose country"),value:t.value,list_items:f,error:p.residence&&d.residence,required:!0,use_text:!0,onChange:function(e){_("residence",!0),m("residence",e.target.value,!0)}})))})),r)};u.propTypes={children:a().node,default_value:a().string,class_prefix:a().string,header_text:a().string,residence_list:a().arrayOf(a().object)};const d=u}}]);