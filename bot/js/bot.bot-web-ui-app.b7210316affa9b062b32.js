/*! For license information please see bot.bot-web-ui-app.b7210316affa9b062b32.js.LICENSE.txt */
(self.webpackChunk_deriv_bot_web_ui=self.webpackChunk_deriv_bot_web_ui||[]).push([[558],{96818:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ActiveSymbols:()=>i.Z,ApiHelpers:()=>a.Z,ContractsFor:()=>l.Z,DBot:()=>r.Z,NetworkMonitor:()=>p,ServerTime:()=>m,TradingTimes:()=>h.Z,api_base:()=>y.D,compareXml:()=>v.dY,config:()=>o.vc,createError:()=>v.Tr,error_types:()=>o.Di,extractBlocksFromXml:()=>v.mT,getContractTypeName:()=>v.ZT,getSavedWorkspaces:()=>v.WN,handleError:()=>v.S3,importExternal:()=>v.Vc,initErrorHandlingListener:()=>v.tZ,load:()=>_.zD,log_types:()=>o.F$,message_types:()=>o.LF,observer:()=>v.Pi,onWorkspaceResize:()=>v.N0,pipe:()=>v.zG,removeErrorHandlingEventListener:()=>v.GZ,removeExistingWorkspace:()=>v.lY,runGroupedEvents:()=>_.UR,runIrreversibleEvents:()=>_.$9,save:()=>_.a1,saveWorkspaceToRecent:()=>v.l5,save_types:()=>o.Rg,scrollWorkspace:()=>_.yW,setColors:()=>v.Ow,sortBlockChild:()=>v.X6,timeSince:()=>v.VG,trackAndEmitError:()=>v.N_,unrecoverable_errors:()=>o.Jr,updateWorkspaceName:()=>_.Hh});var r=n(92410),o=n(74353),i=n(51781),a=n(8399),l=n(62113);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var s,u,d,p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t,this.parentElement=n,this.addEvents()}var t,n;return t=e,(n=[{key:"addEvents",value:function(){var e=this;"onLine"in navigator?(window.addEventListener("online",(function(){return e.setStatus()})),window.addEventListener("offline",(function(){return e.setStatus()}))):(navigator.onLine=!0,setInterval((function(){return e.setStatus()}),1e4)),this.setStatus()}},{key:"setStatus",value:function(){var e=this;navigator.onLine?(this.parentElement.html("<span class='connecting'></span>"),this.api.send({ping:"1"}).then((function(){e.parentElement.html("<span class='online'></span>")}))):this.parentElement.html("<span class='offline'></span>")}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=n(8969);const m=(u=!1,d=new f.Z,{init:function(e){u||(s=e,d.resolve(s.server_time),u=!0)},get:function(){return u&&s.server_time?s.server_time.clone():void 0},timePromise:function(){return u?Promise.resolve(s.server_time):d.promise}});var h=n(54158),y=n(99368),v=n(20437),_=n(81937)},62893:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(92273),o=["BTC","ETH","LTC","BCH","UST"],i={lists:{PAYOUTTYPE:[[(0,r.localize)("Stake"),"stake"]],CRYPTO_CURRENCIES:o,DETAILS:[[(0,r.localize)("deal reference id"),"1"],[(0,r.localize)("purchase price"),"2"],[(0,r.localize)("payout"),"3"],[(0,r.localize)("profit"),"4"],[(0,r.localize)("contract type"),"5"],[(0,r.localize)("entry spot time"),"6"],[(0,r.localize)("entry spot price"),"7"],[(0,r.localize)("exit spot time"),"8"],[(0,r.localize)("exit spot price"),"9"],[(0,r.localize)("barrier"),"10"],[(0,r.localize)("result"),"11"]],CHECK_RESULT:[[(0,r.localize)("Win"),"win"],[(0,r.localize)("Loss"),"loss"]],CHECK_DIRECTION:[[(0,r.localize)("Rise"),"rise"],[(0,r.localize)("Fall"),"fall"],[(0,r.localize)("No Change"),""]],BALANCE_TYPE:[[(0,r.localize)("string"),"STR"],[(0,r.localize)("number"),"NUM"]],NOTIFICATION_TYPE:[[(0,r.localize)("green"),"success"],[(0,r.localize)("blue"),"info"],[(0,r.localize)("yellow"),"warn"],[(0,r.localize)("red"),"error"]],NOTIFICATION_SOUND:[[(0,r.localize)("Silent"),"silent"],[(0,r.localize)("Announcement"),"announcement"],[(0,r.localize)("Earned money"),"earned-money"],[(0,r.localize)("Job done"),"job-done"],[(0,r.localize)("Error"),"error"],[(0,r.localize)("Severe error"),"severe-error"]],CURRENCY:["USD","EUR","GBP","AUD"].concat(o)},opposites:{MULTIPLIER:[{MULTUP:(0,r.localize)("Up")},{MULTDOWN:(0,r.localize)("Down")}],CALLPUT:[{CALL:(0,r.localize)("Rise")},{PUT:(0,r.localize)("Fall")}],CALLPUTEQUAL:[{CALLE:(0,r.localize)("Rise Equals")},{PUTE:(0,r.localize)("Fall Equals")}],HIGHERLOWER:[{CALL:(0,r.localize)("Higher")},{PUT:(0,r.localize)("Lower")}],TOUCHNOTOUCH:[{ONETOUCH:(0,r.localize)("Touch")},{NOTOUCH:(0,r.localize)("No Touch")}],ENDSINOUT:[{EXPIRYRANGE:(0,r.localize)("Ends Between")},{EXPIRYMISS:(0,r.localize)("Ends Outside")}],STAYSINOUT:[{RANGE:(0,r.localize)("Stays Between")},{UPORDOWN:(0,r.localize)("Goes Outside")}],ASIANS:[{ASIANU:(0,r.localize)("Asian Up")},{ASIAND:(0,r.localize)("Asian Down")}],MATCHESDIFFERS:[{DIGITMATCH:(0,r.localize)("Matches")},{DIGITDIFF:(0,r.localize)("Differs")}],EVENODD:[{DIGITEVEN:(0,r.localize)("Even")},{DIGITODD:(0,r.localize)("Odd")}],OVERUNDER:[{DIGITOVER:(0,r.localize)("Over")},{DIGITUNDER:(0,r.localize)("Under")}],HIGHLOWTICKS:[{TICKHIGH:(0,r.localize)("High Tick")},{TICKLOW:(0,r.localize)("Low Tick")}],RESET:[{RESETCALL:(0,r.localize)("Reset Call")},{RESETPUT:(0,r.localize)("Reset Put")}],RUNS:[{RUNHIGH:(0,r.localize)("Only Ups")},{RUNLOW:(0,r.localize)("Only Downs")}],CALLPUTSPREAD:[{CALLSPREAD:(0,r.localize)("Call Spread")},{PUTSPREAD:(0,r.localize)("Put Spread")}]},BARRIER_TYPES:[["Offset +","+"],["Offset -","-"]],ohlcFields:[[(0,r.localize)("Open"),"open"],[(0,r.localize)("High"),"high"],[(0,r.localize)("Low"),"low"],[(0,r.localize)("Close"),"close"],[(0,r.localize)("Open Time"),"epoch"]],candleIntervals:[[(0,r.localize)("Default"),"default"],[(0,r.localize)("1 minute"),"60"],[(0,r.localize)("2 minutes"),"120"],[(0,r.localize)("3 minutes"),"180"],[(0,r.localize)("5 minutes"),"300"],[(0,r.localize)("10 minutes"),"600"],[(0,r.localize)("15 minutes"),"900"],[(0,r.localize)("30 minutes"),"1800"],[(0,r.localize)("1 hour"),"3600"],[(0,r.localize)("2 hours"),"7200"],[(0,r.localize)("4 hours"),"14400"],[(0,r.localize)("8 hours"),"28800"],[(0,r.localize)("1 day"),"86400"]],mainBlocks:["trade_definition","before_purchase","during_purchase","after_purchase"],mandatoryMainBlocks:["trade_definition","purchase","before_purchase"],procedureDefinitionBlocks:["procedures_defnoreturn","procedures_defreturn"],single_instance_blocks:["trade_definition","before_purchase","during_purchase","after_purchase"],TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING:{callput:["callput","higherlower"],asian:["asians"],digits:["matchesdiffers","evenodd","overunder"]},TRADE_TYPE_CATEGORIES:{multiplier:["multiplier"],callput:["callput","callputequal","higherlower"],touchnotouch:["touchnotouch"],inout:["endsinout","staysinout"],asian:["asians"],digits:["matchesdiffers","evenodd","overunder"],reset:["reset"],callputspread:["callputspread"],highlowticks:["highlowticks"],runs:["runs"]},TRADE_TYPE_CATEGORY_NAMES:{callput:(0,r.localize)("Up/Down"),touchnotouch:(0,r.localize)("Touch/No Touch"),inout:(0,r.localize)("In/Out"),asian:(0,r.localize)("Asians"),digits:(0,r.localize)("Digits"),reset:(0,r.localize)("Reset Call/Reset Put"),callputspread:(0,r.localize)("Call Spread/Put Spread"),highlowticks:(0,r.localize)("High/Low Ticks"),runs:(0,r.localize)("Only Ups/Only Downs"),multiplier:(0,r.localize)("Multipliers")},BARRIER_CATEGORIES:{euro_atm:["callput","callputequal"],euro_non_atm:["endsinout","higherlower","callputspread"],american:["staysinout","touchnotouch","highlowticks","runs","multiplier"],non_financial:["digits","overunder","evenodd","matchesdiffers"],asian:["asians"],reset:["reset"],lookback:["lookback"]},DEFAULT_DURATION_DROPDOWN_OPTIONS:[[(0,r.localize)("Ticks"),"t"],[(0,r.localize)("Seconds"),"s"],[(0,r.localize)("Minutes"),"m"],[(0,r.localize)("Hours"),"h"],[(0,r.localize)("Days"),"d"]],BARRIER_LABELS:[(0,r.localize)("High barrier"),(0,r.localize)("Low barrier")],ABSOLUTE_BARRIER_DROPDOWN_OPTION:[[(0,r.localize)("Absolute"),"absolute"]],NOT_AVAILABLE_DROPDOWN_OPTIONS:[[(0,r.localize)("Not available"),"na"]],NOT_AVAILABLE_DURATIONS:[{display:(0,r.localize)("Not available"),unit:"na",min:0}],BARRIER_TRADE_TYPES:["higherlower","touchnotouch","endsinout","staysinout","callputspread"],PREDICTION_TRADE_TYPES:["matchesdiffers","overunder","highlowticks"],DIGIT_CATEGORIES:["digits","highlowticks"],INDEPEDENT_BLOCKS:["block_holder","tick_analysis","loader","procedures_defreturn","procedures_defnoreturn"],bbResult:[[(0,r.localize)("upper"),"1"],[(0,r.localize)("middle"),"0"],[(0,r.localize)("lower"),"2"]],macdFields:[[(0,r.localize)("Histogram"),"0"],[(0,r.localize)("MACD"),"1"],[(0,r.localize)("Signal"),"2"]],gd:{scope:"https://www.googleapis.com/auth/drive.file",discovery_docs:"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"},workspaces:{flyoutWorkspacesStartScale:.7,mainWorkspaceStartScale:.9,previewWorkspaceStartScale:.6},strategies:{martingale:{index:0,label:(0,r.localize)("Martingale"),description:(0,r.localize)("The Martingale Strategy is a classic trading technique that has been used for more than a hundred years, popularised by the French mathematician Paul Pierre Levy in the 18th century.")},dalembert:{index:1,label:(0,r.localize)("D'Alembert"),description:(0,r.localize)("The concept of the D’Alembert Strategy is said to be similar to the Martingale Strategy where you will increase your contract size after a loss. With the D’Alembert Strategy, you will also decrease your contract size after a successful trade.")},oscars_grind:{index:2,label:(0,r.localize)("Oscar's Grind"),description:(0,r.localize)("The Oscar's Grind Strategy is a low-risk positive progression strategy that first appeared in 1965. By using this strategy, the size of your contract will increase after successful trades, but remains unchanged after unsuccessful trades.")}},default_file_name:(0,r.localize)("Untitled Bot"),DISABLED_SYMBOLS:["frxGBPNOK","frxUSDNOK","frxUSDNEK","frxUSDSEK"],DISABLED_SUBMARKETS:["energy"],QUICK_STRATEGY:{DISABLED:{SYMBOLS:["1HZ150V","1HZ250V"],SUBMARKETS:["crash_index","non_stable_coin","step_index"],BARRIER_TRADE_TYPES:["higherlower","touchnotouch","endsinout","staysinout","callputspread"],PREDICTION_TRADE_TYPES:["highlowticks"]},DEFAULT:{symbol:"1HZ100V",tradetype:"callput",durationtype:"t",size:1,unit:1,prediction:0}}}},74353:(e,t,n)=>{"use strict";n.d(t,{Di:()=>o.Di,F$:()=>o.F$,Jr:()=>o.Jr,LF:()=>o.LF,Rg:()=>i.R,vc:()=>r.v});var r=n(62893),o=n(77794),i=n(70147)},77794:(e,t,n)=>{"use strict";n.d(t,{Di:()=>i,F$:()=>a,Jr:()=>r,LF:()=>o});var r=["InsufficientBalance","CustomLimitsReached","OfferingsValidationError","InvalidCurrency","ContractBuyValidationError","NotDefaultCurrency","PleaseAuthenticate","FinancialAssessmentRequired","PositiveIntegerExpected","OptionError","IncorrectPayoutDecimals","IncorrectStakeDecimals","NoMFProfessionalClient","AuthorizationRequired","InvalidToken","DailyLossLimitExceeded","InputValidationFailed","ClientUnwelcome","PriceMoved"],o=Object.freeze({ERROR:"error",NOTIFY:"notify",SUCCESS:"success"}),i=Object.freeze({RECOVERABLE_ERRORS:"recoverable_errors",UNRECOVERABLE_ERRORS:"unrecoverable_errors"}),a=Object.freeze({LOAD_BLOCK:"load_block",PURCHASE:"purchase",SELL:"sell",NOT_OFFERED:"not_offered",PROFIT:"profit",LOST:"lost",WELCOME_BACK:"welcome_back",WELCOME:"welcome"})},70147:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});var r=Object.freeze({UNSAVED:"unsaved",LOCAL:"local",GOOGLE_DRIVE:"google drive"})},72002:(e,t,n)=>{var r=n(71723),o=r.goog,i=r.Blockly;i.JavaScript=n(19697),window.goog=o,window.Blockly=i,n(74294),n(36004),n(99818)},55432:(e,t,n)=>{"use strict";n.d(t,{DV:()=>l,M8:()=>c,N$:()=>r,dK:()=>s,dp:()=>a,e_:()=>i,fK:()=>u,xY:()=>o});var r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAAGXcA1uAAAAAXNSR0IArs4c6QAAAK9JREFUSA3tVUkOgCAMROP/f4PfU4iOaWQKLYmBg71AOksXTAyhGkeKKuECjTSDUwcFxVdNawNgQ10omJNKROqiJbMJsKJZgKgEouuESRYVFVxO35JTnxGDvk9aWQ5GCXfSPbRbsLHysr0lBeMESaKE3hkmbKk230SY9Ulky5rG/SVJU8udPrMU5s7w9bEugUlN886MWiJN86/o2dywFQ17g10b+dlJefH9X0t9X+YETM6gfmoeI+MAAAAASUVORK5CYII=",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAWBJREFUOI2dk81KQmEQhp/5zgHRjhtz0apMXBUSdAcVLWrnxhswsHARSLcRhYm00CvIRbugrCtIaJHtIqlFQUsPBeY50yINM7WfZzV8M+/MOzCfMED8wE2q0Q0VVgSJASjaNEJNoHy7Fb7ur5dekChooGO7ewJZwAw27uIBh6Gok2+kpf3ZIFHQgG+7JwpLI4RfULiYiDprjbS0DYBvu/u/FXenLr88u7sAEj9wk2rp1TDb1VQQXyF9/Dp0HctnwajRjWFiAF9BRxuxOpZmJF5qNRTmfmt/gGujMD0qW00FOUoFxzWYsRnjcnHK+smBGoGHn6rGcG8Qzv6v11MjUObjwr5Rf/K4fByaAvA8IxUBmC21ikDub8Mp3OXC2wYgFHXyCOd/kNcitrMD3QNqpKUdmnTWUYqMWKdnG6UQsZz1elbeoO839kgUW/MdSzOisgrEus9N0FPPSOV+M3zTX/8O8E9xAaZDaSsAAAAASUVORK5CYII=",i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAvlJREFUaAXtmU1u00AUxxPEGoluKMcgJ8gCARsW9CZ0ReEU5BwFiYpWqtgYiQuQFSygJ2CRLV2E39+ZZ42dGc84XxIwT3p9X//34VfbsZPRaGNaQkpGPNu4yGESGfHUOtnYte0b6G8NdABJu7NoG4KXmi1GwUTACwtYomzp5r9ripP3/KB8zj7q4P4t0z9o9PfJowM0NhD6D9NN+sFm1xb05Rjybe171nKkDBLqfw6yt1Oqjjo3F4XArbli1dfmT7YpgOQGWPanLgjfFXyn6x9sU+QMfhdKxL/1OfSAGreh4vIR643H8pQ4hydRQCAAPv9owJ7AF1YH/bKr+z7FsPMbdBP8ZNNNOuwE+6v0bPILpJLAXsAvUrgSLxsoG4hsgAtoDDe3CoPhW7uFW8yXOffzcxK++ElOfxzwDXcxafAmhvscfjO8opdBgSfwjedqVPxaXbB5A0op5P+GH8ZwqXgwj6RtaO1kiDYJBiJOJop+HuScRZGyLfcUq2p5nJHVgAnrQzepXF/HnMIVnEckt84Os02qSkdfYN/Pq75KnpPQPFVYMZOBBq2B/EaxFVWApga0x2WT8vu64UIyq0EoMdfXeuC3JFZxhP7L7ByZe0Q5tQqmbKBsoGygbOCv2wAfHU/1SQp9Sw0P5nuNJCeFPUicYY7hW8fHqaYOr4dR5UQfSFN1dhJnAD1a/4RF2RsFq8d10Q0ce+LYyYy9RWiulw/R615gIEiOvuASpb/IDeRv7aLxq7r9FgOQbwvY7g2s72ho0vurgjuIfYmPfbMNijGhvsoSnQxKHABW7brDcvkhN23IBVS5otPc4hvgrHa1QW5/CpvR26loHkKuQuuvc/L7+BDO4sT0tiZ6ZL6dSgrr/VGkd54WrdzpYUM4FVJNF1u0CieM7g90CfjoM4Dn8BTu3v6u8LW2jZ3rA1rXlKz0Zy/Ehk7dlma7bkDdmav9cte1m3o0mLgmweugAW6gUHfuau/n/LeZaHLtGu1DXFufIssGygb+kw38ARimnBqQbBHiAAAAAElFTkSuQmCC",a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAA45JREFUaAXtWDFrFUEQzoU0QhpjFVRs/Cc2Sf6AxD4BQSF/QBFtbPwDYici2ImFIqaVlBEEK7FICBaxCFEQRM/v29vZzO7O3dv3uGCEXdg3M998M7O7d7e37+bmZmpt2y4xEPLITABHazpOC0wLwt5wtVKHDGBeFJEg7og+okTaVY5hUgslSQwGFJhb2tZ6mARI3XQ77x/YbzQR9mlMTpc4u3rDoWEFomXtGe5+0zSXg28oCL69IT8r/kwJYocLF0p1yi2ITwl2YiL6+MTq5iQZiUNvtO24GaAywLc+5FfUqp7tFdCXUeulo0bMMfoy+WY8QdUcMU0O/xfPuZ/6fOJtyZH56chABcC94oMXFWyqOlffs2YFXge4hi3gu05gEU3Mj24ZklvDtkUCfgHdfMiBu+cXMnos3QbGZHDsQVyyEs+CYaYh9yzxNaauQF2BWVaATzL6WG01GwMzE4TgfhSdGzKyAUi8z5HvzEKA5Ez08TOkA34jGInCeDT5H2EX6Di9O+k17+d2nW1kwDjz0JL6Pa85xfKRS5BP0T8oV6aSWwYqFoPQHiqoVyUxc5pgwgLnM3loFxNXZJIQATRMULHgf+5596AfKlemmrkIou2gZxfQJ6b/Lfov9CdZVgDAN9B5fLFnANy9TyH7ijyD72pPch5ZeIu7uynjwOGqQrDI1H+zJJ6Jtb6gK2mH1jVnSFcx+0O86qsrUFegrkBdgboC/9MKZK91vPBG/ac88mLEnxmt5Hxjs2kfTDnHTH3M0HlKdNTioYxtXfM7KB6X9gddiJA8OHHgPESx8UCVXbEQaCjg30bnMf+c4TYh1kCX702szTFwLK6ZQRoUIiSPllwNHjOLBw7uFfQf6GxH6LtO635u6lpDOuicCGtzDO6YCxndGWY8SWymswBE6F2XoG0PIN3EIVfQ36G/KkhhUhDrmunUYDFRByU6cvBsL+0Qyh30iV8QkzSRKcki0DKKiVZwgiHXPDrv4W8+74uEUmz6+Ml3RjGxpzTiP/ocL4UC+5HHvgo2rfTx5ROQAC+5K5hfsNOBgLeAzgH/RtftNYzzKd+yweOuIzuRzlE+AUmMaH6QkK3U/Owi3FQi7gH6+xQfssHnzsPGmu5zDfkOwc9QrPNZRGCyD0/9YWpiwYSAWrJlRlfcGhdDo//dPtca5GMGeFuLxR5cc8bSuQ3rXPwvv6mBqtcVqCtQV+Dfr8BfZ6VurZP8obgAAAAASUVORK5CYII=",l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAa5JREFUaAXtV1tywzAIdDq5Rg/Ui/SGzYl8j1brzqYYidHDYWw60g/iIWABKc6yGOsG+XdaSr/uFLe0dkZkNC25Wt6U7zq7C05zJMH9FofBd0IymZIKR4qYWAyh95LfbCgAxYLwd/e3h+yJm0YQWiurk2V4cXkzaALO5owKAJV7E7gsr9zzQBaBiirVXaV3KYeTbtDVyNOgUIFU9q+CeFj0bBs9sL/k5fhJnSXHOakbnzxmUKH3kl5m0JK1ZQ/fxQBHncqk3Uskg217mX2mHBC4I3APMAB6HglfgXQPXvqaZgXBRTu4PqTT+M+1+00uPtfW+94rRy/cEbgHKJYIY8pRGykLz/7jEkmIslwt8mSzSrtsbznMDBsF7lM0A1Q74V6iagbTYFZgVsC7Ani7sbzjjPrPPhu1o4skv6YPj3edG/jDAOQXjQxgAe+1p0/rXPhfgvAAih+9bJukVgtfNSq9/plb+A6EB9A8QmePCkdG0/AdCA+geYR068hbo0W9pr326Tz+p35qP+SbAVjPHB2dRcOP0ARw1ugwbvgOtFziR0J72T807MSkswKDFfgBlTxsE+QpCHoAAAAASUVORK5CYII=",c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==",u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC6ElEQVR4Ae2bA6weURCFp7bd4NnaOyeo3Qa1zaiKXpzUbazajJ3UjVXbtm1rGqO6u/sv5uXf74t91nfvHEpISEhISAgO5PAwU4nlvANHcBmP8Z0/8xNcwRHegeWmkochhzRS0hDjsBF3IHb5Nm8yYwoakRZMBVbjA8Sb/I7XooziBbXMGD4I8S8fNGNRi+KgrBnm8hNIAD7EvLJmFCnVeCpeQAL0mZlG1SgauAhHICF4hIsofHgYPkJC8iMPoFCpjsWQcOUloV1KmXV5JyR8eWdmXQqekuZ8DBKNfKykOQVLWTauQyL0elk2BQfa4S4kYu+a9sFdPFchMXilsEUgty5OQmLyVEltShVeAYnR5ZQapg8kZvuRfwpb4FncAfgpWpJfsA2iwG3kD9MRokOnE/mgJi5DlHjZx6IHMyCKnOH5+PNtTQH4FtUkL/AUiDInkxdwWV2AK+Qe0w2iT9NN//M/mPdBeQP+rDLAp/IG5AYzHKJTM1z796dFXkFuwDmIUs+5Wn9B9OpisW96aw5gepMNzIQodqY9wDLVAZaRDd6nOQDvIxs4C3EjBYzLCGfJBt/WHIBv2wO8VB3gpT3AT9UBftgDfFEd4AvZwHPNAfCcbPAtzQH4Vho8RnW/yPaSDSyv6p8SszUH4FlkA/00B3D6ko2CRqoXNA3JDp+B6JTPkAXtt/Hy9PitUt4AnyD65M/lDcgd2KoywBZyC3dVGaBrGvxeV7zBwVO8bjE9UBXgIdUkb/Bs7d9AFlBL0zYr1STvOJ20BDAd03PUgAgt+SkkZp9Zhj20rw5Mnyo98MQrghg5OxFbgBOBTJAWtsAV7UN/Fkx7/WOXFpzMqAdfncxk9Pgvw987IOHLOzLrhtfcWKJ//N6CMxgftBcgLHARHwjl2B/gouhKQFOCLwFFX8Oap7+GZV/0jONDqRXheDxqxV5F5LX8XnkV0f5P24xVXAZ1j5P3Rx33Cz/BFT4aRh03ISEhISHhF9FSCRjypNzcAAAAAElFTkSuQmCC"},36004:(e,t,n)=>{"use strict";n.r(t);var r=n(92273),o=n(55432);Blockly.Blocks.procedures_defnoreturn={init:function(){var e=this;this.arguments=[],this.argument_var_models=[],this.jsonInit(this.definition()),this.getField("NAME").setValidator(Blockly.Procedures.rename);var t=new Blockly.FieldImage(o.dK,24,24,"+",(function(){return e.onAddClick()}));this.appendDummyInput("ADD_ICON").appendField(t),this.setStatements(!0)},definition:function(){return{message0:(0,r.localize)("function {{ function_name }} {{ function_params }}",{function_name:"%1",function_params:"%2"}),args0:[{type:"field_input",name:"NAME",text:""},{type:"field_label",name:"PARAMS",text:""}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:(0,r.localize)("Function with no return value"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:(0,r.localize)("Function"),description:(0,r.localize)("This block creates a function, which is a group of instructions that can be executed at any time. Place other blocks in here to perform any kind of action that you need in your strategy. When all the instructions in a function have been carried out, your bot will continue with the remaining blocks in your strategy. Click the “do something” field to give it a name of your choice. Click the plus icon to send a value (as a named variable) to your function.")}},onchange:function(e){var t=[Blockly.Events.BLOCK_DELETE,Blockly.Events.BLOCK_CREATE,Blockly.Events.BLOCK_CHANGE];this.workspace&&!this.workspace.isFlyout&&t.includes(e.type)&&e.type===Blockly.Events.BLOCK_CHANGE&&e.blockId===this.id&&"NAME"===e.name&&this.getProcedureCallers().forEach((function(t){t.setFieldValue(e.newValue,"NAME")}))},onAddClick:function(){var e=this;this.workspace.options.readOnly||this.isInFlyout||setTimeout((function(){var t=(0,r.localize)("Specify a parameter name:");Blockly.prompt(t,"",(function(t){if(t){var n=Blockly.Variables.getOrCreateVariablePackage(e.workspace,null,t,"");n&&(e.arguments.push(t),e.argument_var_models.push(n),e.getField("PARAMS").setText("".concat((0,r.localize)("with: ")," ").concat(e.arguments.join(", "))),e.getProcedureCallers().forEach((function(t){t.setProcedureParameters(e.arguments),t.initSvg(),t.render(!1)})))}}))}),200)},setStatements:function(e){this.hasStatements!==e&&(e?(this.appendStatementInput("STACK").appendField(""),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements=e)},updateParams:function(){var e="";this.arguments.length&&(e="".concat((0,r.localize)("with:")," ").concat(this.arguments.join(", "))),Blockly.Events.disable();try{this.setFieldValue(e,"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(e){var t=this,n=document.createElement("mutation");return e&&n.setAttribute("name",this.getFieldValue("NAME")),this.argument_var_models.forEach((function(r,o){var i=document.createElement("arg");i.setAttribute("name",r.name),i.setAttribute("varid",r.getId()),e&&t.paramIds&&i.setAttribute("paramId",t.paramIds[o]),n.appendChild(i)})),this.hasStatements||n.setAttribute("statements","false"),n},domToMutation:function(e){var t=this;this.arguments=[],this.argument_var_models=[],e.childNodes.forEach((function(e){if("arg"===e.nodeName.toLowerCase()){var n=e.getAttribute("name"),r=e.getAttribute("varid")||e.getAttribute("varId"),o=Blockly.Variables.getOrCreateVariablePackage(t.workspace,r,n,"");t.arguments.push(n),null!==o?t.argument_var_models.push(o):console.log("Failed to create a variable with name ".concat(n,", ignoring."))}})),this.updateParams(),this.setStatements("false"!==e.getAttribute("statements"))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments,!1]},getProcedureCallers:function(){var e=this;return this.workspace.getAllBlocks(!1).filter((function(t){return t.type===e.callType&&t.data===e.id}))},getVars:function(){return this.arguments},getVarModels:function(){return this.argument_var_models},customContextMenu:function(e){var t=this;if(!this.isInFlyout){var n={enabled:!0},o=this.getFieldValue("NAME");n.text=(0,r.localize)('Create "%1"').replace("%1",o);var i=document.createElement("mutation");i.setAttribute("name",o),this.arguments.forEach((function(e){var t=document.createElement("arg");t.setAttribute("name",e),i.appendChild(t)}));var a=document.createElement("block");a.setAttribute("type",this.callType),a.appendChild(i),n.callback=Blockly.ContextMenu.callbackFactory(this,a),e.push(n),this.isCollapsed()||this.argument_var_models.forEach((function(n){var o={enabled:!0};o.text=(0,r.localize)('Create "get %1"').replace("%1",n.name);var i=Blockly.Variables.generateVariableFieldDom(n),a=document.createElement("block");a.setAttribute("type","variables_get"),a.appendChild(i),o.callback=Blockly.ContextMenu.callbackFactory(t,a),e.push(o)}))}},callType:"procedures_callnoreturn"},Blockly.JavaScript.procedures_defnoreturn=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),n=Blockly.JavaScript.statementToCode(e,"STACK");if(Blockly.JavaScript.STATEMENT_PREFIX){var r=e.id.replace(/\$/g,"$$$$");n=Blockly.JavaScript.prefixLines(Blockly.JavaScript.STATEMENT_PREFIX.replace(/%1/g,"'".concat(r,"'")),Blockly.JavaScript.INDENT)+n}Blockly.JavaScript.INFINITE_LOOP_TRAP&&(n=Blockly.JavaScript.INFINITE_LOOP_TRAP.replace(/%1/g,"'".concat(e.id,"'"))+n);var o=Blockly.JavaScript.valueToCode(e,"RETURN",Blockly.JavaScript.ORDER_NONE)||"";o&&(o="".concat(Blockly.JavaScript.INDENT,"return ").concat(o,";\n"));var i=e.arguments.map((function(e){return Blockly.JavaScript.variableDB_.getName(e,Blockly.Variables.NAME_TYPE)})),a=Blockly.JavaScript.scrub_(e,"\n    function ".concat(t,"(").concat(i.join(", "),") {\n        ").concat(n,"\n        ").concat(o,"\n    }\n"));return Blockly.JavaScript.definitions_["%".concat(t)]=a,null},Blockly.Blocks.procedures_defreturn={init:function(){var e=this;this.arguments=[],this.argument_var_models=[],this.jsonInit(this.definition()),this.getField("NAME").setValidator(Blockly.Procedures.rename);var t=new Blockly.FieldImage(o.M8,24,24,"+",(function(){return e.onAddClick()}));this.appendDummyInput("ADD_ICON").appendField(t),this.moveInputBefore("ADD_ICON","RETURN"),this.setStatements(!0)},definition:function(){return{message0:(0,r.localize)("function {{ function_name }} {{ function_params }} {{ dummy }}",{function_name:"%1",function_params:"%2",dummy:"%3"}),message1:"return %1",args0:[{type:"field_input",name:"NAME",text:""},{type:"field_label",name:"PARAMS",text:""},{type:"input_dummy"}],args1:[{type:"input_value",name:"RETURN",check:null,align:Blockly.ALIGN_RIGHT}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:(0,r.localize)("Function that returns a value"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:(0,r.localize)("Function that returns a value"),description:(0,r.localize)("This block is similar to the one above, except that this returns a value. The returned value can be assigned to a variable of your choice.")}},onAddClick:Blockly.Blocks.procedures_defnoreturn.onAddClick,onchange:Blockly.Blocks.procedures_defnoreturn.onchange,setStatements:Blockly.Blocks.procedures_defnoreturn.setStatements,updateParams:Blockly.Blocks.procedures_defnoreturn.updateParams,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments,!0]},getProcedureCallers:Blockly.Blocks.procedures_defnoreturn.getProcedureCallers,getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,displayRenamedVar:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,callType:"procedures_callreturn",registerWorkspaceListener:Blockly.Blocks.procedures_defnoreturn.registerWorkspaceListener},Blockly.JavaScript.procedures_defreturn=Blockly.JavaScript.procedures_defnoreturn,Blockly.Blocks.procedures_callnoreturn={init:function(){this.arguments=[],this.argument_var_models=[],this.previousDisabledState=!1,this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_label",name:"NAME",text:this.id},{type:"input_dummy",name:"TOPROW"}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Custom function"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:(0,r.localize)("Custom function"),description:""}},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo)if(e.type===Blockly.Events.BLOCK_CREATE&&-1!==e.ids.indexOf(this.id)){var t=this.getProcedureCall(),n=Blockly.Procedures.getDefinition(t,this.workspace);if(!n||n.type===this.defType&&JSON.stringify(n.arguments)===JSON.stringify(this.arguments)||(n=null),n)return void(this.data=n.id);Blockly.Events.setGroup(e.group);var r=document.createElement("xml"),o=document.createElement("block");o.setAttribute("type",this.defType);var i=this.getRelativeToSurfaceXY(),a=i.x+Blockly.SNAP_RADIUS*(this.RTL?-1:1),l=i.y+2*Blockly.SNAP_RADIUS;o.setAttribute("x",a),o.setAttribute("y",l);var c=this.mutationToDom();o.appendChild(c);var s=document.createElement("field");s.setAttribute("name","NAME"),s.appendChild(document.createTextNode(this.getProcedureCall())),o.appendChild(s),r.appendChild(o),Blockly.Xml.domToWorkspace(r,this.workspace),Blockly.Events.setGroup(!1);var u=Blockly.Procedures.getDefinition(t,this.workspace);this.data=u.id}else if(e.type===Blockly.Events.BLOCK_DELETE){var d=this.getProcedureCall();Blockly.Procedures.getDefinition(d,this.workspace)||(Blockly.Events.setGroup(e.group),this.dispose(!0,!1),Blockly.Events.setGroup(!1))}else if(e.type===Blockly.Events.BLOCK_CHANGE&&"disabled"===e.element){var p=this.getProcedureCall(),f=Blockly.Procedures.getDefinition(p,this.workspace);if(f&&f.id===e.blockId){var m=Blockly.Events.getGroup();m&&console.log("Saw an existing group while responding to a definition change"),Blockly.Events.setGroup(e.group),e.newValue?(this.previousDisabledState=this.disabled,this.setDisabled(!0)):this.setDisabled(this.previousDisabledState),Blockly.Events.setGroup(m)}}},getProcedureDefinition:function(e){return this.workspace.getTopBlocks(!1).find((function(t){if(t.getProcedureDef){var n=t.getProcedureDef();return n&&Blockly.Names.equals(n[0],e)}return!1}))},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,t){Blockly.Names.equals(e,this.getProcedureCall())&&this.setFieldValue(t,"NAME")},setProcedureParameters:function(e){var t=this;this.arguments=[].concat(e),this.argument_var_models=this.arguments.map((function(e){return Blockly.Variables.getOrCreateVariablePackage(t.workspace,null,e,"")})),this.updateShape()},updateShape:function(){var e=this;this.arguments.forEach((function(t,n){var r=e.getField("ARGNAME".concat(n));if(r){Blockly.Events.disable();try{r.setValue(t)}finally{Blockly.Events.enable()}}else r=new Blockly.FieldLabel(t),e.appendValueInput("ARG".concat(n)).appendField(r,"ARGNAME".concat(n)).init()}));for(var t=this.arguments.length;this.getInput("ARG".concat(t));)this.removeInput("ARG".concat(t)),t++;var n=this.getInput("TOPROW");n&&(this.arguments.length?this.getField("WITH")||(n.appendField((0,r.localize)("with:"),"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("name",this.getProcedureCall()),this.arguments.forEach((function(t){var n=document.createElement("arg");n.setAttribute("name",t),e.appendChild(n)})),e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t);var n=[],r=[];e.childNodes.forEach((function(e){"arg"===e.nodeName.toLowerCase()&&(n.push(e.getAttribute("name")),r.push(e.getAttribute("paramId")))})),this.setProcedureParameters(n,r)},getVarModels:function(){return this.argument_var_models},customContextMenu:function(e){var t=this,n=this.getProcedureCall(),o=this.workspace,i={enabled:!0};i.text=(0,r.localize)("Highlight function definition"),i.callback=function(){var e=t.getProcedureDefinition(n);e&&(o.centerOnBlock(e.id),e.select())},e.push(i)},defType:"procedures_defnoreturn"},Blockly.JavaScript.procedures_callnoreturn=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),n=e.arguments.map((function(t,n){return Blockly.JavaScript.valueToCode(e,"ARG".concat(n),Blockly.JavaScript.ORDER_COMMA)||"null"}));return"".concat(t,"(").concat(n.join(", "),");\n")},Blockly.Blocks.procedures_callreturn={init:function(){this.arguments=[],this.previousDisabledState=!1,this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_label",name:"NAME",text:this.id},{type:"input_dummy",name:"TOPROW"}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:(0,r.localize)("Custom function"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:(0,r.localize)("Custom function"),description:""}},onchange:Blockly.Blocks.procedures_callnoreturn.onchange,getProcedureDefinition:Blockly.Blocks.procedures_callnoreturn.getProcedureDefinition,getProcedureCall:Blockly.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters:Blockly.Blocks.procedures_callnoreturn.setProcedureParameters,updateShape:Blockly.Blocks.procedures_callnoreturn.updateShape,mutationToDom:Blockly.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_callnoreturn.domToMutation,getVarModels:Blockly.Blocks.procedures_callnoreturn.getVarModels,customContextMenu:Blockly.Blocks.procedures_callnoreturn.customContextMenu,defType:"procedures_defreturn"},Blockly.JavaScript.procedures_callreturn=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),n=e.arguments.map((function(t,n){return Blockly.JavaScript.valueToCode(e,"ARG".concat(n),Blockly.JavaScript.ORDER_COMMA)||"null"}));return["".concat(t,"(").concat(n.join(", "),")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.procedures_ifreturn={init:function(){this.hasReturnValue=!0,this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("if {{ condition }} return {{ value }}",{condition:"%1",value:"%2"}),args0:[{type:"input_value",name:"CONDITION"},{type:"input_value",name:"VALUE"}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Prematurely returns a value within a function"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:(0,r.localize)("Conditional return"),description:(0,r.localize)("This block returns a value when a condition is true. Use this block within either of the function blocks above.")}},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue)),e},domToMutation:function(e){var t=e.getAttribute("value");this.hasReturnValue="1"===t,this.hasReturnValue||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField((0,r.localize)("return")),this.initSvg(),this.render())},onchange:function(){var e=this;if(this.workspace.isDragging&&!this.workspace.isDragging()){var t=!1,n=this;do{if(-1!==this.FUNCTION_TYPES.indexOf(n.type)){t=!0;break}n=n.getSurroundParent()}while(n);if(t){var o=function(){e.initSvg(),e.render()};"procedures_defnoreturn"===n.type&&this.hasReturnValue?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField((0,r.localize)("return")),o(),this.hasReturnValue=!1):"procedures_defreturn"!==n.type||this.hasReturnValue||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField((0,r.localize)("return")),o(),this.hasReturnValue=!0),this.isInFlyout||this.setDisabled(!1)}else this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0)}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},Blockly.JavaScript.procedures_ifreturn=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"CONDITION",Blockly.JavaScript.ORDER_NONE)||"false";if(e.hasReturnValue){var r=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"null";t="return ".concat(r,";\n")}else t="return;\n";return"\n    if (".concat(n,") {\n        ").concat(t,"\n    }\n")};var i=n(81937);Blockly.Blocks.lists_create_with={protected_statements:["STACK"],allowed_children:["lists_statement"],init:function(){var e=new Blockly.FieldImage(o.M8,25,25,"",this.onIconClick.bind(this));this.jsonInit(this.definition()),this.appendDummyInput("ADD_ICON").appendField(e),this.moveInputBefore("ADD_ICON","STACK")},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to create list with",{variable:"%1"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:(0,r.localize)("list")}],args1:[{type:"input_statement",name:"STACK"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("This block creates a list with strings and numbers."),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,r.localize)("Create list"),description:(0,r.localize)("This block creates a list with strings and numbers.")}},onIconClick:function(){var e=this;this.workspace.options.readOnly||this.isInFlyout||(0,i.UR)(!1,(function(){var t=e.workspace.newBlock("lists_statement");t.required_parent_id=e.id,t.setMovable(!1),t.initSvg(),t.render(),e.getLastConnectionInStatement("STACK").connect(t.previousConnection)}))},onchange:function(e){var t=this;!this.workspace||this.isInFlyout||this.workspace.isDragging()||e.type===Blockly.Events.END_DRAG&&this.getBlocksInStatement("STACK").forEach((function(e){t.allowed_children.includes(e.type)||(0,i.$9)((function(){e.unplug(!1)}))}))}},Blockly.JavaScript.lists_create_with=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.getBlocksInStatement("STACK").map((function(e){var t=Blockly.JavaScript[e.type](e);return Array.isArray(t)?t[0]:t}));return"".concat(t," = [").concat(n.join(", "),"];\n")},Blockly.Blocks.lists_repeat={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("create list with item {{ input_item }} repeated {{ number }} times",{input_item:"%1",number:"%2"}),args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM"}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Creates a list by repeating a given item"),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,r.localize)("Repeat an item"),description:(0,r.localize)("Creates a list with a given item repeated for a specific number of times.")}},getRequiredValueInputs:function(){return{ITEM:i.cM,NUM:i.cM}}},Blockly.JavaScript.lists_repeat=function(e){var t=Blockly.JavaScript.provideFunction_("listsRepeat",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(value, n) {\n            var array = [];\n            for (var i = 0; i < n; i++) {\n                array[i] = value;\n            }\n            return array;\n        }")]),n=Blockly.JavaScript.valueToCode(e,"ITEM",Blockly.JavaScript.ORDER_COMMA)||"null",r=Blockly.JavaScript.valueToCode(e,"NUM",Blockly.JavaScript.ORDER_COMMA)||"0";return["".concat(t,"(").concat(n,", ").concat(r,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_length={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("length of {{ input_list }}",{input_list:"%1"}),args0:[{type:"input_value",name:"VALUE"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block gives you the total number of items in a given list."),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,r.localize)("List Length"),description:(0,r.localize)("This block gives you the total number of items in a given list.")}},getRequiredValueInputs:function(){return{VALUE:null}}},Blockly.JavaScript.lists_length=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";return["".concat(t,".length"),Blockly.JavaScript.ORDER_MEMBER]},Blockly.Blocks.lists_isEmpty={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("list {{ input_list }} is empty",{input_list:"%1"}),args0:[{type:"input_value",name:"VALUE",check:["Array"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Checks if a given list is empty"),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,r.localize)("Is list empty?"),description:(0,r.localize)("This block checks if a given list is empty. It returns “True” if the list is empty, “False” if otherwise.")}},getRequiredValueInputs:function(){return{VALUE:null}}},Blockly.JavaScript.lists_isEmpty=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";return[-1!==e.workspace.getAllVariables().findIndex((function(e){return e.name===t}))?"!".concat(t," || !").concat(t,".length"):"!".concat(t,".length"),Blockly.JavaScript.ORDER_LOGICAL_NOT]},Blockly.Blocks.lists_indexOf={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("in list {{ input_list }} find {{ first_or_last }} occurence of item {{ input_value }}",{input_list:"%1",first_or_last:"%2",input_value:"%3"}),args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"END",options:[[(0,r.localize)("first"),"FIRST"],[(0,r.localize)("last"),"LAST"]]},{type:"input_value",name:"FIND"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block gives you the position of an item in a given list."),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,r.localize)("List item position"),description:(0,r.localize)("This block gives you the position of an item in a given list.")}},getRequiredValueInputs:function(){return{VALUE:null,FIND:null}}},Blockly.JavaScript.lists_indexOf=function(e){var t="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",n=Blockly.JavaScript.valueToCode(e,"FIND",Blockly.JavaScript.ORDER_NONE)||"''",r=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''",o="".concat(r,".").concat(t,"(").concat(n,")");return e.workspace.options.oneBasedIndex?["".concat(o," + 1"),Blockly.JavaScript.ORDER_ADDITION]:[o,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_getIndex={init:function(){var e=this;this.MODE_OPTIONS=[[(0,r.localize)("get"),"GET"],[(0,r.localize)("get and remove"),"GET_REMOVE"],[(0,r.localize)("remove"),"REMOVE"]],this.WHERE_OPTIONS=[["#","FROM_START"],[(0,r.localize)("# from end"),"FROM_END"],[(0,r.localize)("first"),"FIRST"],[(0,r.localize)("last"),"LAST"],[(0,r.localize)("random"),"RANDOM"]];var t=new Blockly.FieldDropdown(this.MODE_OPTIONS,(function(t){var n="REMOVE"===t;e.updateStatement(n)}));this.appendValueInput("VALUE").setCheck("Array").appendField((0,r.localize)("in list")),this.appendDummyInput().appendField(t,"MODE"),this.appendDummyInput("AT"),this.setColourFromRawValues_(Blockly.Colours.Base.colour,Blockly.Colours.Base.colourSecondary,Blockly.Colours.Base.colourTertiary),this.setTooltip("This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list."),this.setOutput(!0,null),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.updateAt(!0)},meta:function(){return{display_name:(0,r.localize)("Get list item"),description:(0,r.localize)("This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list."),category:Blockly.Categories.List}},mutationToDom:function(){var e=document.createElement("mutation"),t=!this.outputConnection,n=this.getInput("AT").type===Blockly.INPUT_VALUE;return e.setAttribute("statement",t),e.setAttribute("at",n),e},domToMutation:function(e){var t="true"===e.getAttribute("statement");this.updateStatement(t);var n="false"!==e.getAttribute("at");this.updateAt(n)},updateStatement:function(e){e!==!this.outputConnection&&(this.unplug(!0,!0),this.setOutput(!e),this.setPreviousStatement(e),this.setNextStatement(e),this.initSvg(),this.render(!1))},updateAt:function(e){var t=this;this.removeInput("AT",!0),e?this.appendValueInput("AT").setCheck("Number"):this.appendDummyInput("AT");var n=new Blockly.FieldDropdown(this.WHERE_OPTIONS,(function(n){var r=["FROM_START","FROM_END"].includes(n);if(r!==e)return t.updateAt(r),t.setFieldValue(n,"WHERE"),null}));this.getInput("AT").appendField(n,"WHERE"),this.initSvg(),this.render(!1)}},Blockly.JavaScript.lists_getIndex=function(e){var t,n,r=e.getFieldValue("MODE")||"GET",o=e.getFieldValue("WHERE")||"FIRST",i="RANDOM"===o?Blockly.JavaScript.ORDER_COMMA:Blockly.JavaScript.ORDER_MEMBER,a=Blockly.JavaScript.valueToCode(e,"VALUE",i)||"[]";if("FIRST"===o){if("GET"===r)t="".concat(a,"[0]"),n=Blockly.JavaScript.ORDER_MEMBER;else if("GET_REMOVE"===r)t="".concat(a,".shift()"),n=Blockly.JavaScript.ORDER_MEMBER;else if("REMOVE"===r)return"".concat(a,".shift();\n")}else if("LAST"===o){if("GET"===r)t="".concat(a,".slice(-1)[0]"),n=Blockly.JavaScript.ORDER_MEMBER;else if("GET_REMOVE"===r)t="".concat(a,".pop()"),n=Blockly.JavaScript.ORDER_MEMBER;else if("REMOVE"===r)return"".concat(a,".pop();\n")}else if("FROM_START"===o){var l=Blockly.JavaScript.getAdjusted(e,"AT");if("GET"===r)t="".concat(a,"[").concat(l,"]"),n=Blockly.JavaScript.ORDER_MEMBER;else if("GET_REMOVE"===r)t="".concat(a,".splice(").concat(l,", 1)[0]"),n=Blockly.JavaScript.ORDER_FUNCTION_CALL;else if("REMOVE"===r)return"".concat(a,".splice(").concat(l,", 1);\n")}else if("FROM_END"===o){var c=Blockly.JavaScript.getAdjusted(e,"AT",1,!0);if("GET"===r)t="".concat(a,".slice(").concat(c,")[0]"),n=Blockly.JavaScript.ORDER_FUNCTION_CALL;else if("GET_REMOVE"===r)t="".concat(a,".splice(").concat(c,", 1)[0]"),n=Blockly.JavaScript.ORDER_FUNCTION_CALL;else if("REMOVE"===r)return"".concat(a,".splice(").concat(c,", 1);\n")}else if("RANDOM"===o){var s=Blockly.JavaScript.provideFunction_("listsGetRandomItem",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list, remove) {\n                var x = Math.floor(Math.random() * list.length);\n                if (remove) {\n                    return list.splice(x, 1)[0];\n                } else {\n                    return list[x];\n                }\n            }")]);if(t="".concat(s,"(").concat(a,", ").concat("GET"!==r,")"),"GET"===r||"GET_REMOVE"===r)n=Blockly.JavaScript.ORDER_FUNCTION_CALL;else if("REMOVE"===r)return"".concat(t,";\n")}return[t,n]},Blockly.Blocks.lists_setIndex={init:function(){this.MODE_OPTIONS=[[(0,r.localize)("set"),"SET"],[(0,r.localize)("insert at"),"INSERT"]],this.WHERE_OPTIONS=[[(0,r.localize)("#"),"FROM_START"],[(0,r.localize)("# from end"),"FROM_END"],[(0,r.localize)("first"),"FIRST"],[(0,r.localize)("last"),"LAST"],[(0,r.localize)("random"),"RANDOM"]],this.appendValueInput("LIST").setCheck("Array").appendField((0,r.localize)("in list")),this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.MODE_OPTIONS),"MODE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField((0,r.localize)("as")),this.setColourFromRawValues_(Blockly.Colours.Base.colour,Blockly.Colours.Base.colourSecondary,Blockly.Colours.Base.colourTertiary),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip((0,r.localize)("This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position.")),this.updateAt(!0)},meta:function(){return{display_name:(0,r.localize)("Set list item"),description:(0,r.localize)("This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position."),category:Blockly.Categories.List}},mutationToDom:function(){var e=document.createElement("mutation"),t=this.getInput("AT").type===Blockly.INPUT_VALUE;return e.setAttribute("at",t),e},domToMutation:function(e){var t="false"!==e.getAttribute("at");this.updateAt(t)},updateAt:function(e){var t=this;this.removeInput("AT",!0),e?this.appendValueInput("AT").setCheck("Number"):this.appendDummyInput("AT");var n=new Blockly.FieldDropdown(this.WHERE_OPTIONS,(function(n){var r=["FROM_START","FROM_END"].includes(n);if(r!==e)return t.updateAt(r),t.setFieldValue(n,"WHERE"),null}));this.moveInputBefore("AT","TO"),this.getInput("AT").appendField(n,"WHERE"),this.initSvg(),this.render(!1)}},Blockly.JavaScript.lists_setIndex=function(e){var t,n=e.getFieldValue("MODE")||"SET",r=e.getFieldValue("WHERE")||"FIRST",o=Blockly.JavaScript.valueToCode(e,"TO",Blockly.JavaScript.ORDER_ASSIGNMENT)||"null",i=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]",a=function(){if(i.match(/^\w+$/))return"";var e=Blockly.JavaScript.variableDB_.getDistinctName("tmpList",Blockly.Variables.NAME_TYPE),t="var ".concat(e," = ").concat(i,";\n");return i=e,t};if("FIRST"===r)"SET"===n?t="".concat(i,"[0] = ").concat(o,";\n"):"INSERT"===n&&(t="".concat(i,".unshift(").concat(o,");\n"));else if("LAST"===r)"SET"===n?(t=a(),t+="".concat(i,"[").concat(i,".length - 1] = ").concat(o,";\n")):"INSERT"===n&&(t="".concat(i,".push(").concat(o,");\n"));else if("FROM_START"===r){var l=Blockly.JavaScript.getAdjusted(e,"AT");"SET"===n?t="".concat(i,"[").concat(l,"] = ").concat(o,";\n"):"INSERT"===n&&(t="".concat(i,".splice(").concat(l,", 0, ").concat(o,");\n"))}else if("FROM_END"===r){var c=Blockly.JavaScript.getAdjusted(e,"AT",1,!1,Blockly.JavaScript.ORDER_SUBTRACTION);t=a(),"SET"===n?t="".concat(i,"[").concat(i,".length - ").concat(c,"] = ").concat(o,";\n"):"INSERT"===n&&(t="".concat(i,".splice(").concat(i,".length - ").concat(c,", 0, ").concat(o,");\n"))}else if("RANDOM"===r){t=a();var s=Blockly.JavaScript.variableDB_.getDistinctName("tmpX",Blockly.Variables.NAME_TYPE);t+="var ".concat(s," = Math.floor(Math.random() * ").concat(i,".length);\n"),"SET"===n?t+="".concat(i,"[").concat(s,"] = ").concat(o,";\n"):"INSERT"===n&&(t+="".concat(i,".splice(").concat(s,", 0, ").concat(o,");\n"))}return t},Blockly.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[(0,r.localize)("get sub-list from #"),"FROM_START"],[(0,r.localize)("get sub-list from # from end"),"FROM_END"],[(0,r.localize)("get sub-list from first"),"FIRST"]],this.WHERE_OPTIONS_2=[[(0,r.localize)("#"),"FROM_START"],[(0,r.localize)("# from end"),"FROM_END"],[(0,r.localize)("last"),"LAST"]],this.appendValueInput("LIST").appendField((0,r.localize)("in list")),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),this.setColourFromRawValues_(Blockly.Colours.Base.colour,Blockly.Colours.Base.colourSecondary,Blockly.Colours.Base.colourTertiary),this.setOutput(!0,null),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip((0,r.localize)("This block creates a list of items from an existing list, using specific item positions.")),this.updateAt(1,!0),this.updateAt(2,!0)},meta:function(){return{display_name:(0,r.localize)("Get sub-list"),description:(0,r.localize)("This block creates a list of items from an existing list, using specific item positions."),category:Blockly.Categories.List}},mutationToDom:function(){var e=document.createElement("mutation"),t=this.getInput("AT1").type===Blockly.INPUT_VALUE,n=this.getInput("AT2").type===Blockly.INPUT_VALUE;return e.setAttribute("at1",t),e.setAttribute("at2",n),e},domToMutation:function(e){var t="true"===e.getAttribute("at1"),n="true"===e.getAttribute("at2");this.updateAt(1,t),this.updateAt(2,n)},updateAt:function(e,t){var n=this;this.removeInput("AT".concat(e)),t?this.appendValueInput("AT".concat(e)).setCheck("Number"):this.appendDummyInput("AT".concat(e));var r=new Blockly.FieldDropdown(this["WHERE_OPTIONS_".concat(e)],(function(r){var o=["FROM_START","FROM_END"].includes(r);if(o!==t)return n.updateAt(e,o),n.setFieldValue(r,"WHERE".concat(e)),null}));this.getInput("AT".concat(e)).appendField(r,"WHERE".concat(e)),1===e&&this.moveInputBefore("AT1","AT2"),this.initSvg(),this.render(!1)}},Blockly.JavaScript.lists_getSublist=function(e){var t,n,r,o=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]",i=e.getFieldValue("WHERE1"),a=e.getFieldValue("WHERE2");if("FIRST"===i&&"LAST"===a)r="".concat(o,".slice(0)");else if(o.match(/^\w+$/)||"FROM_END"!==i&&"FROM_START"===a)"FROM_START"===i?t=Blockly.JavaScript.getAdjusted(e,"AT1"):"FROM_END"===i?(t=Blockly.JavaScript.getAdjusted(e,"AT1",1,!1,Blockly.JavaScript.ORDER_SUBTRACTION),t="".concat(o,".length - ").concat(t)):"FIRST"===i&&(t="0"),"FROM_START"===a?n=Blockly.JavaScript.getAdjusted(e,"AT2",1):"FROM_END"===a?(n=Blockly.JavaScript.getAdjusted(e,"AT2",0,!1,Blockly.JavaScript.ORDER_SUBTRACTION),n="".concat(o,".length - ").concat(n)):"LAST"===a&&(n="".concat(o,".length")),r="".concat(o,".slice(").concat(t,", ").concat(n,")");else{t=Blockly.JavaScript.getAdjusted(e,"AT1"),n=Blockly.JavaScript.getAdjusted(e,"AT2");var l={FROM_START:"FromStart",FROM_END:"FromEnd",FIRST:"First",LAST:"Last"},c=function(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?"".concat(e,".length - 1 - ").concat(n):"LAST"===t?"".concat(e,".length - 1"):"".concat(n)},s="FROM_END"===i||"FROM_START"===i,u="FROM_END"===a||"FROM_START"===a,d=Blockly.JavaScript.provideFunction_("subsequence".concat(l[i]).concat(l[a]),["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(\n                    sequence").concat(s?", at1":"").concat(u?", at2":"","\n                ) {\n                    var start = ").concat(c("sequence",i,"at1"),";\n                    var end = ").concat(c("sequence",a,"at2")," + 1;\n\n                    return sequence.slice(start, end);\n                }")]);r="".concat(d,"(").concat(o).concat(s?", ".concat(t):"").concat(u?", ".concat(n):"",")")}return[r,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_split={init:function(){var e=this,t=new Blockly.FieldDropdown([[(0,r.localize)("make list from text"),"SPLIT"],[(0,r.localize)("make text from list"),"JOIN"]],(function(t){return e.updateType(t)}));this.appendValueInput("INPUT").setCheck("String").appendField(t,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField("","SPACE1").appendField((0,r.localize)("with delimiter"),"DELIM_LABEL"),this.appendDummyInput().appendField("","SPACE2"),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setColourFromRawValues_(Blockly.Colours.Base.colour,Blockly.Colours.Base.colourSecondary,Blockly.Colours.Base.colourTertiary),this.setTooltip((0,r.localize)("This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text."))},meta:function(){return{display_name:(0,r.localize)("Create list from text"),description:(0,r.localize)("This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text."),category:Blockly.Categories.List}},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(e){this.updateType(e.getAttribute("mode"))},updateType:function(e){var t=this.getInput("DELIM"),n=this.getField("SPACE1");"SPLIT"===e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String"),n||t.insertFieldAt(0,"","SPACE1")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck(null),n&&t.removeField("SPACE1")),this.initSvg(),this.render(!1)}},Blockly.JavaScript.lists_split=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"INPUT",Blockly.JavaScript.ORDER_MEMBER),r=Blockly.JavaScript.valueToCode(e,"DELIM",Blockly.JavaScript.ORDER_NONE)||"''",o=e.getFieldValue("MODE");return"SPLIT"===o?t="".concat(n||"''",".split(").concat(r,")"):"JOIN"===o&&(t="".concat(n||"[]",".join(").concat(r,")")),[t,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_sort={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("sort {{ sort_type }} {{ sort_direction }} {{ input_list }}",{sort_type:"%1",sort_direction:"%2",input_list:"%3"}),args0:[{type:"field_dropdown",name:"TYPE",options:[[(0,r.localize)("numeric"),"NUMERIC"],[(0,r.localize)("alphabetic"),"TEXT"]]},{type:"field_dropdown",name:"DIRECTION",options:[[(0,r.localize)("ascending"),"1"],[(0,r.localize)("descending"),"-1"]]},{type:"input_value",name:"LIST"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Sorts the items in a given list"),category:Blockly.Categories.List}},meta:function(){return{display_name:(0,r.localize)("Sort list"),description:(0,r.localize)("Sorts the items in a given list, by their numeric or alphabetical value, in either ascending or descending order.")}},getRequiredValueInputs:function(){return{LIST:null}}},Blockly.JavaScript.lists_sort=function(e){var t=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]",n="1"===e.getFieldValue("DIRECTION")?1:-1,r=e.getFieldValue("TYPE"),o=Blockly.JavaScript.provideFunction_("listsGetSortCompare",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(type, direction) {\n            var compareFuncs = {\n                NUMERIC: function(a, b) {\n                    return parseFloat(a) - parseFloat(b);\n                },\n                TEXT: function(a, b) {\n                    return a.toString() > b.toString() ? 1 : -1;\n                }\n            };\n\n            return function(a, b) {\n                return compareFuncs[type](a, b) * direction; \n            }\n        }")]);return["".concat(t,".sort().slice(0).sort(").concat(o,'("').concat(r,'", ').concat(n,"))"),Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_statement={required_parent_type:"lists_create_with",init:function(){var e=this;this.required_parent_id="";var t=new Blockly.FieldImage(o.fK,25,25,"",(function(){return e.onIconClick()}));this.jsonInit(this.definition()),this.appendDummyInput("REMOVE_ICON").appendField(t)},definition:function(){return{message0:"%1",args0:[{type:"input_value",name:"VALUE"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,category:Blockly.Categories.List}},meta:function(){return{display_name:(0,r.localize)("List Statement"),description:""}},onIconClick:function(){var e=this;this.workspace.options.readOnly||this.isInFlyout||(0,i.UR)(!1,(function(){e.unplug(!0),e.dispose()}))},onchange:function(e){var t=this;if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()&&e.type===Blockly.Events.END_DRAG){var n=this.getSurroundParent();if(n)if(this.required_parent_id||n.type!==this.required_parent_type){if(n.id!==this.required_parent_id){var r=this.workspace.getAllBlocks().find((function(e){return e.id===t.required_parent_id}));if(r){var o=r.getLastConnectionInStatement("STACK");(0,i.$9)((function(){o.connect(t.previousConnection)}))}else(0,i.$9)((function(){t.dispose(!0)}))}}else this.required_parent_id=n.id;else(0,i.$9)((function(){t.dispose()}))}}},Blockly.JavaScript.lists_statement=function(e){return[Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_ATOMIC)||"null",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.controls_repeat_ext={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("repeat {{ number }} times",{number:"%1"}),args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:(0,r.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Repeats inside instructions specified number of times"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,r.localize)("Repeat (2)"),description:(0,r.localize)("This block is similar to the block above, except that the number of times it repeats is determined by a given variable.")}},getRequiredValueInputs:function(){return{TIMES:null}}},Blockly.JavaScript.controls_repeat_ext=function(e){var t;t=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):Blockly.JavaScript.valueToCode(e,"TIMES",Blockly.JavaScript.ORDER_ATOMIC)||"0";var n=Blockly.JavaScript.statementToCode(e,"DO"),r="",o=Blockly.JavaScript.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE),i=t;return t.match(/^\w+$/)||Blockly.isNumber(t)||(i=Blockly.JavaScript.variableDB_.getDistinctName("repeat_end",Blockly.Variables.NAME_TYPE),r+="var ".concat(i," = ").concat(t,";\n")),r+"\n    for (var ".concat(o," = 0; ").concat(o," < ").concat(i,"; ").concat(o,"++) {\n        ").concat(n,"\n    }\n")},Blockly.Blocks.controls_repeat={init:function(){this.jsonInit(this.definition())},definition:function(){return{type:"controls_repeat",message0:(0,r.localize)("repeat {{ number }} times",{number:"%1"}),args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:(0,r.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Repeats inside instructions specified number of times"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,r.localize)("Repeat (1)"),description:(0,r.localize)("This block repeats the instructions contained within for a specific number of times.")}}},Blockly.JavaScript.controls_repeat=Blockly.JavaScript.controls_repeat_ext,Blockly.Blocks.controls_whileUntil={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("repeat {{ while_or_until }} {{ boolean }}",{while_or_until:"%1",boolean:"%2"}),args0:[{type:"field_dropdown",name:"MODE",options:[[(0,r.localize)("while"),"WHILE"],[(0,r.localize)("until"),"UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:(0,r.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("This block repeats instructions as long as a given condition is true"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,r.localize)("Repeat While/Until"),description:(0,r.localize)("This block repeats instructions as long as a given condition is true.")}},getRequiredValueInputs:function(){return{BOOL:null}}},Blockly.JavaScript.controls_whileUntil=function(e){var t=Blockly.JavaScript.statementToCode(e,"DO"),n="UNTIL"===e.getFieldValue("MODE"),o=n?Blockly.JavaScript.ORDER_LOGICAL_NOT:Blockly.JavaScript.ORDER_NONE,i=Blockly.JavaScript.valueToCode(e,"BOOL",o)||"false";n&&(i="!".concat(i));var a=Blockly.JavaScript.variableDB_.getDistinctName("maxLoops",Blockly.Variables.NAME_TYPE),l=Blockly.JavaScript.variableDB_.getDistinctName("currentLoop",Blockly.Variables.NAME_TYPE);return"\n        var ".concat(a," = 10000;\n        var ").concat(l," = 0;\n\n        while (").concat(i,") {\n            if (").concat(l," > ").concat(a,') {\n                throw new Error("').concat((0,r.localize)("Infinite loop detected"),'");\n            } else {\n                ').concat(l,"++;\n            }\n            \n            ").concat(t,"\n        }\n")},Blockly.Blocks.controls_for={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("count with {{ variable }} from {{ start_number }} to {{ end_number }} by {{ step_size }}",{variable:"%1",start_number:"%2",end_number:"%3",step_size:"%4"}),args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"},{type:"input_value",name:"BY",check:"Number"}],message1:(0,r.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list."),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,r.localize)("Iterate (1)"),description:(0,r.localize)("This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list.")}},getRequiredValueInputs:function(){return{FROM:null,TO:null,BY:null}}},Blockly.JavaScript.controls_for=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),n=Blockly.JavaScript.valueToCode(e,"FROM",Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",r=Blockly.JavaScript.valueToCode(e,"TO",Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",o=Blockly.JavaScript.valueToCode(e,"BY",Blockly.JavaScript.ORDER_ASSIGNMENT)||"1",i=Blockly.JavaScript.statementToCode(e,"DO");i=Blockly.JavaScript.addLoopTrap(i,e.id);var a="";if(Blockly.isNumber(n)&&Blockly.isNumber(r)&&Blockly.isNumber(o)){var l=parseFloat(n)<=parseFloat(r),c=l?"<=":">=",s=Math.abs(parseFloat(o)),u="".concat(t," = ").concat(n),d="".concat(t," ").concat(c," ").concat(r),p="".concat(t," ").concat(l?"+=":"-="," ").concat(s);a="\n        for (".concat(u,"; ").concat(d,"; ").concat(p,") {\n            ").concat(i,"\n        }\n")}else{var f=n;n.match(/^\w+$/)||Blockly.isNumber(n)||(f=Blockly.JavaScript.variableDB_.getDistinctName("".concat(t,"_start"),Blockly.Variables.NAME_TYPE),a="var ".concat(f," = ").concat(n,";\n"));var m=r;r.match(/^\w+$/)||Blockly.isNumber(r)||(m=Blockly.JavaScript.variableDB_.getDistinctName("".concat(t,"_end"),Blockly.Variables.NAME_TYPE),a+="var ".concat(m," = ").concat(r,";\n"));var h=Blockly.JavaScript.variableDB_.getDistinctName("".concat(t,"_inc"),Blockly.Variables.NAME_TYPE),y=Blockly.isNumber(o)?Math.abs(o):"Math.abs(".concat(o,")");a+="\n        var ".concat(h," = ").concat(y,";\n        if (").concat(f," > ").concat(m,") {\n            ").concat(h," = -").concat(h,";\n        }\n        for (\n           ").concat(t," = ").concat(f,"; \n           ").concat(h," >= 0 ? ").concat(t," <= ").concat(m," : ").concat(t," >= ").concat(m,";\n           ").concat(t," += ").concat(h,"\n        ) {\n            ").concat(i,";\n        }\n")}return a},Blockly.Blocks.controls_forEach={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("for each item {{ variable }} in list {{ input_list }}",{variable:"%1",input_list:"%2"}),args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:(0,r.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Iterates through a given list"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,r.localize)("Iterate (2)"),description:(0,r.localize)('This block uses the variable "i" to control the iterations. With each iteration, the value of "i" is determined by the items in a given list.')}},getRequiredValueInputs:function(){return{LIST:null}}},Blockly.JavaScript.controls_forEach=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_ASSIGNMENT)||"[]",r=Blockly.JavaScript.statementToCode(e,"DO");r=Blockly.JavaScript.addLoopTrap(r,e.id);var o="",i=n;n.match(/^\w+$/)||(i=Blockly.JavaScript.variableDB_.getDistinctName("".concat(t,"_list"),Blockly.Variables.NAME_TYPE),o="var ".concat(i," = ").concat(n,";\n"));var a=Blockly.JavaScript.variableDB_.getDistinctName("".concat(t,"_list"),Blockly.Variables.NAME_TYPE);return o+"\n    for (var ".concat(a," in ").concat(i,") {\n        ").concat(t," = ").concat(i,"[").concat(a,"];\n        ").concat(r,"\n    }\n")},Blockly.Blocks.controls_flow_statements={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("{{ break_or_continue }} of loop",{break_or_continue:"%1"}),args0:[{type:"field_dropdown",name:"FLOW",options:[[(0,r.localize)("break out"),"BREAK"],[(0,r.localize)("continue with next iteration"),"CONTINUE"]]}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block."),category:Blockly.Categories.Loop}},meta:function(){return{display_name:(0,r.localize)("Break out/continue"),description:(0,r.localize)("This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.")}}},Blockly.JavaScript.controls_flow_statements=function(e){var t="BREAK"===e.getFieldValue("FLOW")?"break":"continue";return"".concat(t,";\n")},Blockly.Blocks.variables_get={init:function(){this.jsonInit(this.definition())},definition:function(){return{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:(0,r.localize)("item")}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:(0,r.localize)("Gets variable value"),category:Blockly.Categories.Variables}},meta:function(){return{display_name:(0,r.localize)("User-defined variable"),description:""}},onchange:function(e){if(e.type===Blockly.Events.VAR_RENAME){var t=this.workspace.getAllBlocks().filter((function(e){return"custom_functions"===e.category_})),n=e.oldName,o=e.newName;t.forEach((function(e){var t;if(null!==(t=e.arguments)&&void 0!==t&&t.length){var i=e.arguments.findIndex((function(e){return e===n}));-1!==i&&(e.arguments[i]=o,e.getField("PARAMS")&&e.setFieldValue("".concat((0,r.localize)("with: ")," ").concat(e.arguments.join(", ")),"PARAMS"),e.getField("WITH")&&e.updateShape())}}))}}},Blockly.JavaScript.variables_get=function(e){return[Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.variables_set={init:function(){this.jsonInit(this.definition())},definition:function(){return{type:"field_variable",message0:(0,r.localize)("set {{ variable }} to {{ value }}",{variable:"%1",value:"%2"}),args0:[{type:"field_variable",name:"VAR",variable:(0,r.localize)("item")},{type:"input_value",name:"VALUE"}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Sets variable value"),category:Blockly.Categories.Variables}},meta:function(){return{display_name:(0,r.localize)("Set variable"),description:(0,r.localize)("Assigns a given value to a variable")}}},Blockly.JavaScript.variables_set=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",n=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);return"".concat(n," = ").concat(t,";\n")},Blockly.Blocks.after_purchase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",message1:"%1",args0:[{type:"field_image",src:o.DV,width:25,height:25,alt:"F"},{type:"field_label",text:(0,r.localize)("4. Restart trading conditions"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"AFTERPURCHASE_STACK",check:"TradeAgain"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,r.localize)("Get the last trade information and result, then trade again."),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:(0,r.localize)("Restart trading conditions"),description:(0,r.localize)("Here is where you can decide if your bot should continue trading.")}}},Blockly.JavaScript.after_purchase=function(e){var t=Blockly.JavaScript.statementToCode(e,"AFTERPURCHASE_STACK");return"\n    BinaryBotPrivateAfterPurchase = function BinaryBotPrivateAfterPurchase() {\n        Bot.highlightBlock('".concat(e.id,"');\n        ").concat(t,"\n        Bot.isTradeAgain(false);\n        return false;\n    };")};var a=n(62893);Blockly.Blocks.contract_check_result={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Result is {{ win_or_loss }}",{win_or_loss:"%1"}),args0:[{type:"field_dropdown",name:"CHECK_RESULT",options:a.v.lists.CHECK_RESULT}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("True if the result of the last trade matches the selection"),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:(0,r.localize)("Last trade result"),description:(0,r.localize)("You can check the result of the last trade with this block.")}},onchange:function(e){if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()&&(e.type===Blockly.Events.BLOCK_CREATE||e.type===Blockly.Events.END_DRAG)){var t=this.getTopParent();t&&t.isMainBlock()&&"after_purchase"!==t.type&&this.setDisabled(!0)}}},Blockly.JavaScript.contract_check_result=function(e){var t=e.getFieldValue("CHECK_RESULT");return["Bot.isResult('".concat(t,"')"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.read_details={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Contract Details: {{ contract_detail }}",{contract_detail:"%1"}),args0:[{type:"field_dropdown",name:"DETAIL_INDEX",options:a.v.lists.DETAILS}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Reads a selected property from contract details list"),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:(0,r.localize)("Contract details"),description:(0,r.localize)("This block gives you information about your last contract.")}},restricted_parents:["after_purchase"]},Blockly.JavaScript.read_details=function(e){var t=e.getFieldValue("DETAIL_INDEX");return["Bot.readDetails(".concat(t,")"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.trade_again={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){return{message0:(0,r.localize)("Trade again"),colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,tooltip:(0,r.localize)("These blocks transfer control to the Purchase conditions block."),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:(0,r.localize)("Trade again"),description:(0,r.localize)("This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract."),key_words:(0,r.localize)("restart")}},restricted_parents:["after_purchase"]},Blockly.JavaScript.trade_again=function(){return"\n        Bot.isTradeAgain(true);\n\n        return true;\n\n    "},Blockly.Blocks.before_purchase={init:function(){this.jsonInit(this.definition()),this.setDeletable(!1)},definition:function(){return{message0:"%1 %2 %3",message1:"%1",args0:[{type:"field_image",src:o.e_,width:25,height:25,alt:"P"},{type:"field_label",text:(0,r.localize)("2. Purchase conditions"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"BEFOREPURCHASE_STACK",check:"Purchase"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,r.localize)("Specify contract type and purchase conditions."),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:(0,r.localize)("Purchase conditions"),description:(0,r.localize)("This block is mandatory. Only one copy of this block is allowed. You can place the Purchase block (see below) here as well as conditional blocks to define your purchase conditions.")}}},Blockly.JavaScript.before_purchase=function(e){var t=Blockly.JavaScript.statementToCode(e,"BEFOREPURCHASE_STACK");return"BinaryBotPrivateBeforePurchase = function BinaryBotPrivateBeforePurchase() {\n        Bot.highlightBlock('".concat(e.id,"');\n        ").concat(t,"\n    };\n")};var l=n(41383);Blockly.Blocks.purchase={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){return{message0:(0,r.localize)("Purchase {{ contract_type }}",{contract_type:"%1"}),args0:[{type:"field_dropdown",name:"PURCHASE_LIST",options:[["",""]]}],previousStatement:null,colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,tooltip:(0,r.localize)("This block purchases contract of a specified type."),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:(0,r.localize)("Purchase"),description:(0,r.localize)("Use this block to purchase the specific contract you want. You may add multiple Purchase blocks together with conditional blocks to define your purchase conditions. This block can only be used within the Purchase conditions block."),key_words:(0,r.localize)("buy")}},onchange:function(e){!this.workspace||this.isInFlyout||this.workspace.isDragging()||(e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id)?this.populatePurchaseList(e):e.type===Blockly.Events.BLOCK_CHANGE?"TYPE_LIST"!==e.name&&"TRADETYPE_LIST"!==e.name||this.populatePurchaseList(e):e.type===Blockly.Events.END_DRAG&&e.blockId===this.id&&""===this.getField("PURCHASE_LIST").menuGenerator_[0][0]&&this.populatePurchaseList(e))},populatePurchaseList:function(e){var t=this.workspace.getTradeDefinitionBlock();if(t){var n=t.getChildByType("trade_definition_tradetype").getFieldValue("TRADETYPE_LIST"),r=t.getChildByType("trade_definition_contracttype").getFieldValue("TYPE_LIST"),o=this.getField("PURCHASE_LIST"),i=o.getValue(),a=(0,l.M)(r,n);o.updateOptions(a,{default_value:i,event_group:e.group,should_pretend_empty:!0})}},restricted_parents:["before_purchase"]},Blockly.JavaScript.purchase=function(e){var t=e.getFieldValue("PURCHASE_LIST");return"Bot.purchase('".concat(t,"');\n")},Blockly.Blocks.ask_price={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Ask Price {{ contract_type }}",{contract_type:"%1"}),args0:[{type:"field_dropdown",name:"PURCHASE_LIST",options:[["",""]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block returns the purchase price for the selected trade type."),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:(0,r.localize)("Purchase price"),description:(0,r.localize)('This block returns the purchase price for the selected trade type. This block can be used only in the "Purchase conditions" root block.')}},onchange:Blockly.Blocks.purchase.onchange,populatePurchaseList:Blockly.Blocks.purchase.populatePurchaseList,enforceLimitations:Blockly.Blocks.purchase.enforceLimitations},Blockly.JavaScript.ask_price=function(e){var t=e.getFieldValue("PURCHASE_LIST");return["Bot.getAskPrice('".concat(t,"')"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.payout={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Payout {{ contract_type }}",{contract_type:"%1"}),args0:[{type:"field_dropdown",name:"PURCHASE_LIST",options:[["",""]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block returns the potential payout for the selected trade type"),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:(0,r.localize)("Potential payout"),description:(0,r.localize)('This block returns the potential payout for the selected trade type. This block can be used only in the "Purchase conditions" root block.')}},onchange:Blockly.Blocks.purchase.onchange,populatePurchaseList:Blockly.Blocks.purchase.populatePurchaseList,enforceLimitations:Blockly.Blocks.purchase.enforceLimitations},Blockly.JavaScript.payout=function(e){var t=e.getFieldValue("PURCHASE_LIST");return["Bot.getPayout('".concat(t,"')"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.during_purchase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",message1:"%1",args0:[{type:"field_image",src:o.dp,width:25,height:25,alt:"S"},{type:"field_label",text:(0,r.localize)("3. Sell conditions"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"DURING_PURCHASE_STACK",check:"SellAtMarket"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,r.localize)("Sell your active contract if needed (optional)"),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:(0,r.localize)("Sell conditions"),description:(0,r.localize)("Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed.")}}},Blockly.JavaScript.during_purchase=function(e){var t=Blockly.JavaScript.statementToCode(e,"DURING_PURCHASE_STACK");return"BinaryBotPrivateDuringPurchase = function BinaryBotPrivateDuringPurchase() {\n        Bot.highlightBlock('".concat(e.id,"');\n        ").concat(t,"\n    };\n")},Blockly.Blocks.sell_at_market={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Sell at market price"),colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Use this block to sell your contract at the market price."),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:(0,r.localize)("Sell at market price"),description:(0,r.localize)("Use this block to sell your contract at the market price.")}},restricted_parents:["during_purchase"]},Blockly.JavaScript.sell_at_market=function(){return"Bot.sellAtMarket();\n"},Blockly.Blocks.check_sell={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Sell is available"),output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("True if active contract can be sold before expiration at current market price"),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:(0,r.localize)("Can contract be sold?"),description:(0,r.localize)("This block helps you check if your contract can be sold. If your contract can be sold, it returns “True”. Otherwise, it returns an empty string.")}},restricted_parents:["during_purchase"]},Blockly.JavaScript.check_sell=function(){return["Bot.isSellAvailable()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.sell_price={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Sell profit/loss"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the profit/loss from selling at market price"),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:(0,r.localize)("Profit/loss from selling"),description:(0,r.localize)("This block gives you the potential profit or loss if you decide to sell your contract.")}},restricted_parents:["during_purchase"]},Blockly.JavaScript.sell_price=function(){return["Bot.getSellPrice()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.bb_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period","std_dev_multiplier_up","std_dev_multiplier_down"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to Bollinger Bands {{ band_type }} {{ dummy }}",{variable:"%1",band_type:"%2",dummy:"%3"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"bb"},{type:"field_dropdown",name:"BBRESULT_LIST",options:a.v.bbResult},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Calculates Bollinger Bands (BB) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,r.localize)("Bollinger Bands (BB)"),description:(0,r.localize)("BB is a technical analysis indicator that’s commonly used by traders. The idea behind BB is that the market price stays within the upper and lower bands for 95% of the time. The bands are the standard deviations of the market price, while the line in the middle is a simple moving average line. If the price reaches either the upper or lower band, there’s a possibility of a trend reversal.")}},onchange:function(e){var t=this;!this.workspace||this.isInFlyout||this.workspace.isDragging()||e.type===Blockly.Events.END_DRAG&&this.getBlocksInStatement("STATEMENT").forEach((function(e){t.required_child_blocks.includes(e.type)||(Blockly.Events.disable(),e.unplug(!1),Blockly.Events.enable())}))}},Blockly.JavaScript.bb_statement=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.getFieldValue("BBRESULT_LIST"),r=e.childValueToCode("input_list","INPUT_LIST"),o=e.childValueToCode("period","PERIOD"),i=e.childValueToCode("std_dev_multiplier_up","UPMULTIPLIER"),a=e.childValueToCode("std_dev_multiplier_down","DOWNMULTIPLIER");return"".concat(t," = Bot.bb(").concat(r,", { \n        periods: ").concat(o,", \n        stdDevUp: ").concat(i,", \n        stdDevDown: ").concat(a," \n    }, ").concat(n,");\n")},Blockly.Blocks.bba_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period","std_dev_multiplier_up","std_dev_multiplier_down"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to Bollinger Bands Array {{ band_type }} {{ dummy }}",{variable:"%1",band_type:"%2",dummy:"%3"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"bba"},{type:"field_dropdown",name:"BBRESULT_LIST",options:a.v.bbResult},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Calculates Bollinger Bands (BB) list from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,r.localize)("Bollinger Bands Array (BBA)"),description:(0,r.localize)("Similar to BB. This block gives you a choice of returning the values of either the lower band, higher band, or the SMA line in the middle.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.bba_statement=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.getFieldValue("BBRESULT_LIST"),r=e.childValueToCode("input_list","INPUT_LIST"),o=e.childValueToCode("period","PERIOD"),i=e.childValueToCode("std_dev_multiplier_up","UPMULTIPLIER"),a=e.childValueToCode("std_dev_multiplier_down","DOWNMULTIPLIER");return"".concat(t," = Bot.bba(").concat(r,", { \n        periods: ").concat(o,", \n        stdDevUp: ").concat(i,", \n        stdDevDown: ").concat(a," \n    }, ").concat(n,");\n")},Blockly.Blocks.ema_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to Exponential Moving Average {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"ema"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Calculates Exponential Moving Average (EMA) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,r.localize)("Exponential Moving Average (EMA)"),description:(0,r.localize)("EMA is a type of moving average that places more significance on the most recent data points. It’s also known as the exponentially weighted moving average. EMA is different from SMA in that it reacts more significantly to recent price changes.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.ema_statement=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.childValueToCode("input_list","INPUT_LIST"),r=e.childValueToCode("period","PERIOD");return"".concat(t," = Bot.ema(").concat(n,", ").concat(r,");\n")},Blockly.Blocks.emaa_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to Exponential Moving Average Array {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"emaa"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Calculates Exponential Moving Average (EMA) list from a list of values with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,r.localize)("Exponential Moving Average Array (EMAA)"),description:(0,r.localize)("This block is similar to EMA, except that it gives you the entire EMA line based on the input list and the given period.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.emaa_statement=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.childValueToCode("input_list","INPUT_LIST"),r=e.childValueToCode("period","PERIOD");return"".concat(t," = Bot.emaa(").concat(n,", ").concat(r,");\n")},Blockly.Blocks.rsi_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to Relative Strength Index {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"rsi"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Relative Strength Index (RSI) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,r.localize)("Relative Strength Index (RSI)"),description:(0,r.localize)("RSI is a technical analysis tool that helps you identify the market trend. It will give you a value from 0 to 100. An RSI value of 70 and above means that the asset is overbought and the current trend may reverse, while a value of 30 and below means that the asset is oversold.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.rsi_statement=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.childValueToCode("input_list","INPUT_LIST"),r=e.childValueToCode("period","PERIOD");return"".concat(t," = Bot.rsi(").concat(n,", ").concat(r,");\n")},Blockly.Blocks.rsia_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to Relative Strength Index Array {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"rsia"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Calculates Relative Strength Index (RSI) list from a list of values with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,r.localize)("Relative Strength Index Array (RSIA)"),description:(0,r.localize)("Similar to RSI, this block gives you a list of values for each entry in the input list.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.rsia_statement=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.childValueToCode("input_list","INPUT_LIST"),r=e.childValueToCode("period","PERIOD");return"".concat(t," = Bot.rsia(").concat(n,", ").concat(r,");\n")},Blockly.Blocks.sma_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to Simple Moving Average {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"sma"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Calculates Simple Moving Average (SMA) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,r.localize)("Simple Moving Average (SMA)"),description:(0,r.localize)("SMA is a frequently used indicator in technical analysis. It calculates the average market price over a specified period, and is usually used to identify market trend direction: up or down. For example, if the SMA is moving upwards, it means the market trend is up. ")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.sma_statement=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.childValueToCode("input_list","INPUT_LIST"),r=e.childValueToCode("period","PERIOD");return"".concat(t," = Bot.sma(").concat(n,", ").concat(r,");\n")},Blockly.Blocks.smaa_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to Simple Moving Average Array {{ dummy }}",{variable:"%1",dummy:"%2"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"smaa"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Calculates Simple Moving Average line from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,r.localize)("Simple Moving Average Array (SMAA)"),description:(0,r.localize)("Similar to SMA, this block gives you the entire SMA line containing a list of all values for a given period.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.smaa_statement=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.childValueToCode("input_list","INPUT_LIST"),r=e.childValueToCode("period","PERIOD");return"".concat(t," = Bot.smaa(").concat(n,", ").concat(r,");\n")},Blockly.Blocks.macda_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","fast_ema_period","slow_ema_period","signal_ema_period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to MACD Array {{ dropdown }} {{ dummy }}",{variable:"%1",dropdown:"%2",dummy:"%3"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"macda"},{type:"field_dropdown",name:"MACDFIELDS_LIST",options:a.v.macdFields},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Calculates Moving Average Convergence Divergence (MACD) from a list"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:(0,r.localize)("Moving Average Convergence Divergence"),description:(0,r.localize)("MACD is calculated by subtracting the long-term EMA (26 periods) from the short-term EMA (12 periods). If the short-term EMA is greater or lower than the long-term EMA than there’s a possibility of a trend reversal.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.macda_statement=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.getFieldValue("MACDFIELDS_LIST"),r=e.childValueToCode("input_list","INPUT_LIST"),o=e.childValueToCode("fast_ema_period","FAST_EMA_PERIOD"),i=e.childValueToCode("slow_ema_period","SLOW_EMA_PERIOD"),a=e.childValueToCode("signal_ema_period","SIGNAL_EMA_PERIOD");return"".concat(t," = Bot.macda(").concat(r,", { \n        fastEmaPeriod: ").concat(o,",\n        slowEmaPeriod: ").concat(i,",\n        signalEmaPeriod: ").concat(a,",\n    }, ").concat(n,");\n")},Blockly.Blocks.input_list={init:function(){this.jsonInit({message0:(0,r.localize)("Input List {{ input_list }}",{input_list:"%1"}),args0:[{type:"input_value",name:"INPUT_LIST",check:"Array"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(e){var t=this;if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){var n=function(){var e=t.getSurroundParent();e&&!t.required_parent_id&&t.allowed_parents.includes(e.type)&&(t.required_parent_id=e.id)};if(e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id))n();else if(e.type===Blockly.Events.END_DRAG){n();var r=this.getSurroundParent(),o=!!r,a=!o||r.id!==this.required_parent_id;o&&!a||(0,i.$9)((function(){t.unplug(!0);var e=t.workspace.getAllBlocks().find((function(e){return e.id===t.required_parent_id}));e?e.getLastConnectionInStatement("STATEMENT").connect(t.previousConnection):t.dispose()}))}}},allowed_parents:["bb_statement","bba_statement","ema_statement","emaa_statement","macda_statement","rsi_statement","rsia_statement","sma_statement","smaa_statement"],getRequiredValueInputs:function(){return{INPUT_LIST:null}}},Blockly.JavaScript.input_list=function(){},Blockly.Blocks.period={init:function(){this.jsonInit({message0:(0,r.localize)("Period {{ input_period }}",{input_period:"%1"}),args0:[{type:"input_value",name:"PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["bb_statement","bba_statement","ema_statement","emaa_statement","macda_statement","rsi_statement","rsia_statement","sma_statement","smaa_statement"],getRequiredValueInputs:function(){return{PERIOD:null}}},Blockly.JavaScript.period=function(){},Blockly.Blocks.std_dev_multiplier_up={init:function(){this.jsonInit({message0:(0,r.localize)("Standard Deviation Up Multiplier {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"UPMULTIPLIER",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["bb_statement","bba_statement"],getRequiredValueInputs:function(){return{UPMULTIPLIER:null}}},Blockly.JavaScript.std_dev_multiplier_up=function(){},Blockly.Blocks.std_dev_multiplier_down={init:function(){this.jsonInit({message0:(0,r.localize)("Standard Deviation Down Multiplier {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"DOWNMULTIPLIER",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["bb_statement","bba_statement"],getRequiredValueInputs:function(){return{DOWNMULTIPLIER:null}}},Blockly.JavaScript.std_dev_multiplier_down=function(){},Blockly.Blocks.fast_ema_period={init:function(){this.jsonInit({message0:(0,r.localize)("Fast EMA Period {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"FAST_EMA_PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["macda_statement"],getRequiredValueInputs:function(){return{FAST_EMA_PERIOD:null}}},Blockly.JavaScript.fast_ema_period=function(){},Blockly.Blocks.slow_ema_period={init:function(){this.jsonInit({message0:(0,r.localize)("Slow EMA Period {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"SLOW_EMA_PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["macda_statement"],getRequiredValueInputs:function(){return{SLOW_EMA_PERIOD:null}}},Blockly.JavaScript.slow_ema_period=function(){},Blockly.Blocks.signal_ema_period={init:function(){this.jsonInit({message0:(0,r.localize)("Signal EMA Period {{ input_number }}",{input_number:"%1"}),args0:[{type:"input_value",name:"SIGNAL_EMA_PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["macda_statement"],getRequiredValueInputs:function(){return{SIGNAL_EMA_PERIOD:null}}},Blockly.JavaScript.signal_ema_period=function(){},Blockly.Blocks.tick={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Last Tick"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the value of the last tick"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Last tick"),description:(0,r.localize)("This block gives you the value of the last tick.")}}},Blockly.Blocks.tick_string={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Last Tick String"),output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the value of the latest tick in string format"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Tick value"),description:(0,r.localize)("Tick value Description")}},onchange:Blockly.Blocks.tick.onchange},Blockly.JavaScript.tick=function(e){var t=e.getParent();return["Bot.getLastTick(false, ".concat(["notify","text_print"].includes(null==t?void 0:t.type),")"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.JavaScript.tick_string=function(){return["Bot.getLastTick(false, true)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.ticks={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Ticks list"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block gives you a list of the last 1000 tick values."),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Tick list"),description:(0,r.localize)("This block gives you a list of the last 1000 tick values.")}}},Blockly.Blocks.ticks_string={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Ticks String List"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the list of tick values in string format"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Tick List String"),description:(0,r.localize)("Tick List String Description")}},onchange:Blockly.Blocks.ticks.onchange},Blockly.JavaScript.ticks=function(e){var t=e.getParent();return["Bot.getTicks(".concat(["notify","text_print"].includes(null==t?void 0:t.type),")"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.JavaScript.ticks_string=function(){return["Bot.getTicks(true)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.ohlc={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Candles List"),message1:(0,r.localize)("with interval: {{ candle_interval_type }}",{candle_interval_type:"%1"}),args1:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:a.v.candleIntervals}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block gives you a list of candles within a selected time interval."),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Get candle list"),description:(0,r.localize)("This block gives you a list of candles within a selected time interval.")}}},Blockly.JavaScript.ohlc=function(e){var t=e.getFieldValue("CANDLEINTERVAL_LIST");return["Bot.getOhlc({ granularity: ".concat("default"===t?"undefined":t," })"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.ohlc_values={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Make a List of {{ candle_property }} values in candles list with interval: {{ candle_interval_type }}",{candle_property:"%1",candle_interval_type:"%2"}),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:a.v.ohlcFields},{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:a.v.candleIntervals}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns a list of specific values from a candle list according to selected time interval"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Create a list of candle values (1)"),description:(0,r.localize)("This block gives you the selected candle value from a list of candles within the selected time interval.")}}},Blockly.JavaScript.ohlc_values=function(e){var t=e.getFieldValue("CANDLEINTERVAL_LIST"),n="default"===t?"undefined":t,r=e.getFieldValue("OHLCFIELD_LIST");return["Bot.getOhlc({ field: '".concat(r,"', granularity: ").concat(n," })"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.read_ohlc={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("In candles list read {{ candle_property }} # from end {{ input_number }}",{candle_property:"%1",input_number:"%2"}),message1:(0,r.localize)("with interval: %1"),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:a.v.ohlcFields},{type:"input_value",name:"CANDLEINDEX",check:"Number"}],args1:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:a.v.candleIntervals}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Read the selected candle value"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Read candle value (1)"),description:(0,r.localize)("This block gives you the specified candle value for a selected time interval.")}},getRequiredValueInputs:function(){return{CANDLEINDEX:null}}},Blockly.JavaScript.read_ohlc=function(e){var t=e.getFieldValue("CANDLEINTERVAL_LIST"),n="default"===t?"undefined":t,r=e.getFieldValue("OHLCFIELD_LIST"),o=Blockly.JavaScript.valueToCode(e,"CANDLEINDEX",Blockly.JavaScript.ORDER_ATOMIC)||"1";return["Bot.getOhlcFromEnd({ field: '".concat(r,"', index: ").concat(o,", granularity: ").concat(n," })"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.get_ohlc={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("in candle list get # from end {{ input_number }}",{input_number:"%1"}),message1:(0,r.localize)("with interval: {{ candle_interval_type }}",{candle_interval_type:"%1"}),args0:[{type:"input_value",name:"CANDLEINDEX",check:"Number"}],args1:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:a.v.candleIntervals}],output:"Candle",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block gives you a specific candle from within the selected time interval."),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Get candle"),description:(0,r.localize)("This block gives you a specific candle from within the selected time interval.")}},getRequiredValueInputs:function(){return{CANDLEINDEX:null}}},Blockly.JavaScript.get_ohlc=function(e){var t=e.getFieldValue("CANDLEINTERVAL_LIST"),n="default"===t?"undefined":t,r=Blockly.JavaScript.valueToCode(e,"CANDLEINDEX",Blockly.JavaScript.ORDER_ATOMIC)||"1";return["Bot.getOhlcFromEnd({ index: ".concat(r,", granularity: ").concat(n," })"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.check_direction={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Direction is {{ direction_type }}",{direction_type:"%1"}),args0:[{type:"field_dropdown",name:"CHECK_DIRECTION",options:a.v.lists.CHECK_DIRECTION}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("True if the market direction matches the selection"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Market direction"),description:(0,r.localize)("This block is used to determine if the market price moves in the selected direction or not. It gives you a value of “True” or “False”.")}}},Blockly.JavaScript.check_direction=function(e){var t=e.getFieldValue("CHECK_DIRECTION");return["Bot.checkDirection('".concat(t,"')"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.tick_analysis={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"field_label",text:(0,r.localize)("The content of this block is called on every tick"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"},{type:"input_statement",name:"TICKANALYSIS_STACK",check:null}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,r.localize)("You can use this block to analyze the ticks, regardless of your trades"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Run on every tick"),description:(0,r.localize)("The content of this block is called on every tick. Place this block outside of any root block.")}}},Blockly.JavaScript.tick_analysis=function(e){var t=Blockly.JavaScript.statementToCode(e,"TICKANALYSIS_STACK")||"";return"\n    BinaryBotPrivateTickAnalysisList.push(function BinaryBotPrivateTickAnalysis() {\n        ".concat(t,"\n    });\n")},Blockly.Blocks.last_digit={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Last Digit"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the last digit of the latest tick"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Last Digit"),description:(0,r.localize)("This block gives you the last digit of the latest tick value.")}}},Blockly.JavaScript.last_digit=function(){return["Bot.getLastDigit()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.lastDigitList={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Last digits list"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the list of last digits of 1000 recent tick values"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:(0,r.localize)("Last Digits List"),description:(0,r.localize)("This block gives you a list of the last digits of the last 1000 tick values.")}}},Blockly.JavaScript.lastDigitList=function(){return["Bot.getLastDigitList()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.is_candle_black={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Is candle {{ input_candle }} black?",{input_candle:"%1"}),args0:[{type:"input_value",name:"OHLCOBJ",check:"Candle"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)('Returns "True" if the given candle is black'),category:Blockly.Categories.Candle}},meta:function(){return{display_name:(0,r.localize)("Is candle black?"),description:(0,r.localize)("This block returns “True” if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.")}},getRequiredValueInputs:function(){return{OHLCOBJ:null}}},Blockly.JavaScript.is_candle_black=function(e){var t=Blockly.JavaScript.valueToCode(e,"OHLCOBJ",Blockly.JavaScript.ORDER_ATOMIC)||"{}";return["Bot.isCandleBlack(".concat(t,")"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.ohlc_values_in_list={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Make a list of {{ candle_property }} values from candles list {{ candle_list }}",{candle_property:"%1",candle_list:"%2"}),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:a.v.ohlcFields},{type:"input_value",name:"OHLCLIST"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns a list of specific values from a given candle list"),category:Blockly.Categories.Candle}},meta:function(){return{display_name:(0,r.localize)("Create a list of candle values (2)"),description:(0,r.localize)("This block gives you the selected candle value from a list of candles.")}},getRequiredValueInputs:function(){return{OHLCLIST:null}}},Blockly.JavaScript.ohlc_values_in_list=function(e){var t=e.getFieldValue("OHLCFIELD_LIST")||"open",n=Blockly.JavaScript.valueToCode(e,"OHLCLIST",Blockly.JavaScript.ORDER_ATOMIC)||"[]";return["Bot.candleValues(".concat(n,", '").concat(t,"')"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.read_ohlc_obj={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Read {{ candle_property }} value in candle {{ input_candle }}",{candle_property:"%1",input_candle:"%2"}),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:a.v.ohlcFields},{type:"input_value",name:"OHLCOBJ"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block gives you the selected candle value."),category:Blockly.Categories.Candle}},meta:function(){return{display_name:(0,r.localize)("Read candle value (2)"),description:(0,r.localize)("This block gives you the selected candle value.")}},getRequiredValueInputs:function(){return{OHLCOBJ:null}}},Blockly.JavaScript.read_ohlc_obj=function(e){var t=e.getFieldValue("OHLCFIELD_LIST"),n=Blockly.JavaScript.valueToCode(e,"OHLCOBJ",Blockly.JavaScript.ORDER_ATOMIC)||"{}";return["Bot.candleField(".concat(n,", '").concat(t,"')"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.balance={init:function(){var e=this;this.jsonInit(this.definition()),this.getField("BALANCE_TYPE").setValidator((function(t){"STR"===t?e.setOutput(!0,"String"):"NUM"===t&&e.setOutput(!0,"Number"),e.initSvg(),e.render(!1)}))},definition:function(){return{message0:(0,r.localize)("Balance: %1"),args0:[{type:"field_dropdown",name:"BALANCE_TYPE",options:a.v.lists.BALANCE_TYPE}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block returns account balance"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,r.localize)("Account balance"),description:(0,r.localize)("This block gives you the balance of your account either as a number or a string of text.")}}},Blockly.JavaScript.balance=function(e){var t=e.getFieldValue("BALANCE_TYPE");return["Bot.getBalance('".concat(t,"')"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.barrier_offset={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"BARRIEROFFSET_IN",options:a.v.BARRIER_TYPES}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Adds a sign to a number to create a barrier offset. (deprecated)"),category:Blockly.Categories.Miscellaneous})}},Blockly.JavaScript.barrier_offset=function(){},Blockly.Blocks.block_holder={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"field_label",text:"Ignore",class:"blocklyTextRootBlockHeader"},{type:"input_dummy"},{type:"input_statement",name:"USELESS_STACK",check:null}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,r.localize)("Put your blocks in here to prevent them from being removed"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,r.localize)("Ignore"),description:(0,r.localize)("Use this block if you want some instructions to be ignored when your bot runs. Instructions within this block won’t be executed.")}}},Blockly.JavaScript.block_holder=function(){return""};var c=n(49568),s=n(77794);Blockly.Blocks.loader={init:function(){this.blocks_added_by_me=[],this.current_url="",this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Load block from URL: {{ input_url }}",{input_url:"%1"}),args0:[{type:"field_input",name:"URL",text:"http://www.example.com/block.xml"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Loads blocks from URL"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,r.localize)("Loads from URL"),description:(0,r.localize)("This block allows you to load blocks from a URL if you have them stored on a remote server, and they will be loaded only when your bot runs.")}},onchange:function(e){var t=this;this.workspace&&!this.isInFlyout&&(e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id)?(this.current_url=this.getFieldValue("URL"),this.workspace.getAllBlocks().filter((function(e){return"loader"===e.type})).forEach((function(e){e.id!==t.id&&e.current_url===t.current_url&&t.setDisabled(!0)})),this.disabled||this.loadBlocksFromCurrentUrl()):e.type===Blockly.Events.BLOCK_CHANGE&&e.blockId===this.id&&e.newValue&&e.oldValue!==e.newValue&&(e.newValue===this.current_url?this.setDisabled(!1):this.isValidUrl(e.newValue)&&!this.isKnownUrl(e.newValue)?(this.setDisabled(!1),this.loadBlocksFromCurrentUrl()):this.setDisabled(!0)))},loadBlocksFromCurrentUrl:function(){var e=this;this.current_url=this.getFieldValue("URL"),(0,i.$9)((function(){e.blocks_added_by_me.forEach((function(e){return e.dispose()}))})),(0,i.oG)(this).then((function(){c.P.emit("ui.log.success",{log_type:s.F$.LOAD_BLOCK})})).catch((function(t){c.P.emit("ui.log.error",t),e.setDisabled(!0)}))},isKnownUrl:function(e){var t=this;return this.workspace.getAllBlocks().filter((function(e){return"loader"===e.type})).some((function(n){return n.id!==t.id&&n.current_url===e}))},isValidUrl:function(e){return String(e).match(/[^/]*\.[a-zA-Z]{3}$/)}},Blockly.JavaScript.loader=function(){},Blockly.Blocks.notify={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Notify {{ notification_type }} with sound: {{ notification_sound }} {{ input_message }}",{notification_type:"%1",notification_sound:"%2",input_message:"%3"}),args0:[{type:"field_dropdown",name:"NOTIFICATION_TYPE",options:a.v.lists.NOTIFICATION_TYPE},{type:"field_dropdown",name:"NOTIFICATION_SOUND",options:a.v.lists.NOTIFICATION_SOUND},{type:"input_value",name:"MESSAGE",check:null}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Displays a notification and optionally play selected sound"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,r.localize)("Notify"),description:(0,r.localize)("This block displays a message. You can specify the color of the message and choose from 6 different sound options.")}},getRequiredValueInputs:function(){return{MESSAGE:i.cM}}},Blockly.JavaScript.notify=function(e){var t=e.getFieldValue("NOTIFICATION_TYPE"),n=e.getFieldValue("NOTIFICATION_SOUND"),o=e.getInputTargetBlock("MESSAGE"),i=null;if("variables_get"===o.type){var a=o.getFieldValue("VAR");i=Blockly.derivWorkspace.getVariableById(a).name}var l=Blockly.JavaScript.valueToCode(e,"MESSAGE",Blockly.JavaScript.ORDER_ATOMIC)||'"'.concat((0,r.localize)("<empty message>"),'"');return"Bot.notify({ className: 'journal__text--".concat(t,"', message: ").concat(l,", sound: '").concat(n,"', block_id: '").concat(e.id,"', variable_name: '").concat(i,"' });\n")},Blockly.Blocks.notify_telegram={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Notify Telegram {{ dummy }} Access Token: {{ input_access_token }} Chat ID: {{ input_chat_id }} Message: {{ input_message }}",{dummy:"%1",input_access_token:"%2",input_chat_id:"%3",input_message:"%4"}),args0:[{type:"input_dummy"},{type:"input_value",name:"TELEGRAM_ACCESS_TOKEN"},{type:"input_value",name:"TELEGRAM_CHAT_ID"},{type:"input_value",name:"TELEGRAM_MESSAGE"}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Sends a message to Telegram"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,r.localize)("Notify Telegram"),description:(0,r.localize)("This block sends a message to a Telegram channel.")}},getRequiredValueInputs:function(){return{TELEGRAM_ACCESS_TOKEN:i.cM,TELEGRAM_CHAT_ID:i.cM,TELEGRAM_MESSAGE:i.cM}}},Blockly.JavaScript.notify_telegram=function(e){var t=Blockly.JavaScript.valueToCode(e,"TELEGRAM_ACCESS_TOKEN",Blockly.JavaScript.ORDER_ATOMIC)||"",n=Blockly.JavaScript.valueToCode(e,"TELEGRAM_CHAT_ID",Blockly.JavaScript.ORDER_ATOMIC)||"",r=Blockly.JavaScript.valueToCode(e,"TELEGRAM_MESSAGE",Blockly.JavaScript.ORDER_ATOMIC)||"";return t&&n&&r?"Bot.notifyTelegram(".concat(t,", ").concat(n,", ").concat(r,");\n"):""},Blockly.Blocks.total_profit={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Total profit/loss"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the total profit/loss"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,r.localize)("Total profit/loss"),description:(0,r.localize)("This block gives you the total profit/loss of your trading strategy since your bot started running. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.")}},onchange:function(e){!this.workspace||this.isInFlyout||this.workspace.isDragging()||(e.type===Blockly.Events.END_DRAG||e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id))&&"INITIALIZATION"===this.getRootInputTargetBlock()&&this.unplug(!0)}},Blockly.Blocks.total_profit_string={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Total Profit String"),output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the total profit in string format"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,r.localize)("Total Profit String"),description:(0,r.localize)("Total Profit String Description")}},onchange:Blockly.Blocks.total_profit.onchange},Blockly.JavaScript.total_profit=function(){return["Bot.getTotalProfit(false)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.JavaScript.total_profit_string=function(){return["Bot.getTotalProfit(true)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.total_runs={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Number of runs"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the number of runs"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,r.localize)("Number of runs"),description:(0,r.localize)("This block gives you the total number of times your bot has run. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.")}},onchange:Blockly.Blocks.total_profit.onchange},Blockly.JavaScript.total_runs=function(){return["Bot.getTotalRuns()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.useless_block={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_label",text:(0,r.localize)("Conversion Helper Block"),class:"blocklyTextRootBlockHeader"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,r.localize)("This block was required to correctly convert your old strategy."),category:Blockly.Categories.Miscellaneous,nextStatement:null,previousStatement:null})}},Blockly.JavaScript.useless_block=function(){},Blockly.Blocks.console={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Console {{ message_type }} value: {{ input_message }}",{message_type:"%1",input_message:"%2"}),args0:[{type:"field_dropdown",name:"CONSOLE_TYPE",options:[[(0,r.localize)("Log"),"log"],[(0,r.localize)("Warn"),"warn"],[(0,r.localize)("Error"),"error"],[(0,r.localize)("Table"),"table"]]},{type:"input_value",name:"MESSAGE",check:null}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Display messages in the developer’s console."),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:(0,r.localize)("Console"),description:(0,r.localize)("This block displays messages in the developer's console with an input that can be either a string of text, a number, boolean, or an array of data.")}},getRequiredValueInputs:function(){return{MESSAGE:i.cM}}},Blockly.JavaScript.console=function(e){var t=e.getFieldValue("CONSOLE_TYPE")||"log",n=Blockly.JavaScript.valueToCode(e,"MESSAGE",Blockly.JavaScript.ORDER_ATOMIC)||'"'.concat((0,r.localize)("<empty message>"),'"');return"Bot.console({ type: '".concat(t,"', message: ").concat(n,"});\n")},Blockly.Blocks.epoch={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Seconds Since Epoch"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the number of seconds since January 1st, 1970"),category:Blockly.Categories.Time}},meta:function(){return{display_name:(0,r.localize)("Second Since Epoch"),description:(0,r.localize)("This block returns the number of seconds since January 1st, 1970.")}}},Blockly.JavaScript.epoch=function(){return["Bot.getTime()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.timeout={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("{{ dummy }} {{ stack_input }} Run after {{ number }} second(s)",{dummy:"%1",stack_input:"%2",number:"%3"}),args0:[{type:"input_dummy"},{type:"input_statement",name:"TIMEOUTSTACK"},{type:"input_value",name:"SECONDS"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Run the blocks inside after a given number of seconds"),category:Blockly.Categories.Time}},meta:function(){return{display_name:(0,r.localize)("Delayed run"),description:(0,r.localize)("This block delays execution for a given number of seconds. You can place any blocks within this block. The execution of other blocks in your strategy will be paused until the instructions in this block are carried out.")}},getRequiredValueInputs:function(){return{SECONDS:null}}},Blockly.JavaScript.timeout=function(e){var t=Blockly.JavaScript.statementToCode(e,"TIMEOUTSTACK"),n=Blockly.JavaScript.valueToCode(e,"SECONDS",Blockly.JavaScript.ORDER_ATOMIC)||"1";return"sleep(".concat(n,");\n").concat(t,"\n")},Blockly.Blocks.todatetime={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("To date/time {{ input_timestamp }} {{ dummy }}",{input_timestamp:"%1",dummy:"%2"}),args0:[{type:"input_value",name:"TIMESTAMP",check:"Number"},{type:"input_dummy"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time."),category:Blockly.Categories.Time}},meta:function(){return{display_name:(0,r.localize)("Convert to date/time"),description:(0,r.localize)("This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time.")}},getRequiredValueInputs:function(){return{TIMESTAMP:null}}},Blockly.JavaScript.todatetime=function(e){var t=Blockly.JavaScript.valueToCode(e,"TIMESTAMP",Blockly.JavaScript.ORDER_ATOMIC),n="".concat((0,r.localize)("Invalid timestamp"),":"),o=Blockly.JavaScript.provideFunction_("timestampToDateString",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,'(timestamp) {\n            var datetime = new Date(timestamp * 1000);\n\n            if (!datetime.getTime()) {\n                return "').concat(n," \" + timestamp;\n            }\n\n            var getTwoDigitValue = function(input) {\n                return input < 10 ? '0' + input : input;\n            }\n\n            var year    = datetime.getFullYear();\n            var month   = getTwoDigitValue(datetime.getMonth() + 1);\n            var day     = getTwoDigitValue(datetime.getDate());\n            var hours   = getTwoDigitValue(datetime.getHours());\n            var minutes = getTwoDigitValue(datetime.getMinutes());\n            var seconds = getTwoDigitValue(datetime.getSeconds());\n\n            var formatGmtOffset = function() {\n                var gmt_offset_raw = datetime.getTimezoneOffset();\n                var sign           = gmt_offset_raw > 0 ? '-' : '+';\n                var gmt_offset     = Math.abs(gmt_offset_raw);\n                var hour           = Math.floor(gmt_offset / 60);\n                var minute         = gmt_offset - hour * 60;\n\n                return 'GMT' + sign + getTwoDigitValue(hour) + getTwoDigitValue(minute);\n            }\n\n            var date_string = year + '-' + month + '-' + day;\n            var time_string = hours + ':' + minutes + ':' + seconds;\n\n            return date_string + ' ' + time_string + ' ' + formatGmtOffset();\n        }")]);return["".concat(o,"(").concat(t,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.totimestamp={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("To timestamp {{ input_datetime }} {{ dummy }}",{input_datetime:"%1",dummy:"%2"}),args0:[{type:"input_value",name:"DATETIME"},{type:"input_dummy"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Converts a string representing a date/time string into seconds since Epoch. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825. Time and time zone offset are optional."),category:Blockly.Categories.Time}},meta:function(){return{display_name:(0,r.localize)("Convert to timestamp"),description:(0,r.localize)("This block converts a string of text that represents the date and time into seconds since the Unix Epoch (1 January 1970). The time and time zone offset are optional. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825.")}},getRequiredValueInputs:function(){return{DATETIME:i.cM}}},Blockly.JavaScript.totimestamp=function(e){var t=Blockly.JavaScript.valueToCode(e,"DATETIME",Blockly.JavaScript.ORDER_ATOMIC);return["Bot.dateTimeStringToTimestamp(".concat(t,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};var u=n(27675),d=n(20437);Blockly.Blocks.trade_definition={init:function(){this.jsonInit(this.definition()),this.setDeletable(!1),this.isInit=!1},definition:function(){return{message0:"%1 %2 %3",message1:"%1",message2:"%1 %2 %3",message3:"%1",message4:"%1 %2 %3",message5:"%1",args0:[{type:"field_image",src:o.N$,width:25,height:25,alt:"T"},{type:"field_label",text:(0,r.localize)("1. Trade parameters"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"TRADE_OPTIONS"}],args2:[{type:"field_image",src:"",width:4,height:25},{type:"field_label",text:(0,r.localize)("Run once at start:"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args3:[{type:"input_statement",name:"INITIALIZATION",check:null}],args4:[{type:"field_image",src:"",width:4,height:25},{type:"field_label",text:(0,r.localize)("Trade options:"),class:"blocklyTextRootBlockHeader"},{type:"input_dummy"}],args5:[{type:"input_statement",name:"SUBMARKET"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:(0,r.localize)("Here is where you define the parameters of your contract."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,r.localize)("Trade parameters"),description:(0,r.localize)("Here is where you define the parameters of your contract."),key_words:(0,r.localize)("market, trade type, contract type")}},onchange:function(e){var t=this;if("ui"!==e.type||this.isInit?null===Blockly.selected&&this.isInit&&(this.isInit=!1,(0,d.GZ)("keydown")):(this.isInit=!0,(0,d.tZ)("keydown")),this.workspace&&!this.workspace.isDragging()&&!this.isInFlyout&&(e.type===Blockly.Events.BLOCK_CHANGE||e.type===Blockly.Events.END_DRAG)){var n=this.getBlocksInStatement("TRADE_OPTIONS");n.length>0?n.forEach((function(e){/^trade_definition_.+$/.test(e.type)||(0,i.$9)((function(){e.unplug(!0)}))})):(0,i.$9)((function(){t.dispose()}))}}},Blockly.JavaScript.trade_definition=function(e){var t=u.Z.instance.client;if(!t||!t.is_logged_in)throw new Error("Please login");var n=t.loginid,r=t.getToken(n),o=e.getChildByType("trade_definition_market"),i=e.getChildByType("trade_definition_tradetype"),l=e.getChildByType("trade_definition_contracttype"),c=e.getChildByType("trade_definition_candleinterval"),s=e.getChildByType("trade_definition_restartonerror"),d=e.getChildByType("trade_definition_restartbuysell"),p=o.getFieldValue("SYMBOL_LIST"),f=i.getFieldValue("TRADETYPE_LIST"),m=l.getFieldValue("TYPE_LIST"),h=c.getFieldValue("CANDLEINTERVAL_LIST"),y="FALSE"!==s.getFieldValue("RESTARTONERROR"),v="FALSE"!==d.getFieldValue("TIME_MACHINE_ENABLED"),_=a.v.opposites,g="both"===m?_[f.toUpperCase()].map((function(e){return Object.keys(e)[0]})):[m],b=Blockly.JavaScript.statementToCode(e,"INITIALIZATION"),k=Blockly.JavaScript.statementToCode(e,"SUBMARKET");return"  \n    BinaryBotPrivateInit = function BinaryBotPrivateInit() {\n        Bot.init('".concat(r,"', {\n          symbol              : '").concat(p,"',\n          contractTypes       : ").concat(JSON.stringify(g),",\n          candleInterval      : '").concat(h||"FALSE","',\n          shouldRestartOnError: ").concat(y,",\n          timeMachineEnabled  : ").concat(v,",\n        });\n        ").concat(b.trim(),"\n    };\n      BinaryBotPrivateStart = function BinaryBotPrivateStart() {\n        BinaryBotPrivateHasCalledTradeOptions = false;\n        Bot.highlightBlock('").concat(e.id,"');\n        ").concat(k.trim(),"\n      };\n")};var p=n(8399);function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Blockly.Blocks.trade_definition_market={init:function(){this.jsonInit({message0:(0,r.localize)("Market: {{ input_market }} > {{ input_submarket }} > {{ input_symbol }}",{input_market:"%1",input_submarket:"%2",input_symbol:"%3"}),args0:[{type:"field_dropdown",name:"MARKET_LIST",options:[["",""]]},{type:"field_dropdown",name:"SUBMARKET_LIST",options:[["",""]]},{type:"field_dropdown",name:"SYMBOL_LIST",options:[["",""]]}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(e){var t=-1!==["BLOCK_CREATE","BLOCK_CHANGE","END_DRAG"].findIndex((function(t){return e.type===Blockly.Events[t]}));if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()&&t){this.enforceLimitations();var n=p.Z.instance.active_symbols,r=this.getField("MARKET_LIST"),o=this.getField("SUBMARKET_LIST"),i=this.getField("SYMBOL_LIST"),a=r.getValue(),l=o.getValue(),c=i.getValue(),s=n.getMarketDropdownOptions().filter((function(e){return"cryptocurrency"!==e[1]})),u=function(){r.updateOptions(s,{default_value:a,should_pretend_empty:!0,event_group:e.group})};e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id)?u():e.type===Blockly.Events.BLOCK_CHANGE&&e.blockId===this.id?"MARKET_LIST"===e.name?o.updateOptions(n.getSubmarketDropdownOptions(a),{default_value:l,should_pretend_empty:!0,event_group:e.group}):"SUBMARKET_LIST"===e.name&&i.updateOptions(n.getSymbolDropdownOptions(l),{default_value:c,should_pretend_empty:!0,event_group:e.group}):e.type===Blockly.Events.END_DRAG&&e.blockId===this.getRootBlock().id&&(r.isEmpty()||o.isEmpty()||i.isEmpty())&&u()}},enforceLimitations:function(){var e=this;(0,i.$9)((function(){if(e.isDescendantOf("trade_definition"))e.disabled&&e.setDisabled(!1);else{e.unplug(!1);var t=e.workspace.getTopBlocks().find((function(e){return"trade_definition"===e.type}));t?t.getLastConnectionInStatement("TRADE_OPTIONS").connect(e.previousConnection):e.dispose()}}))}},Blockly.JavaScript.trade_definition_market=function(){},Blockly.Blocks.trade_definition_tradetype={init:function(){this.jsonInit({message0:(0,r.localize)("Trade Type: {{ trade_type_category }} > {{ trade_type }}",{trade_type_category:"%1",trade_type:"%2"}),args0:[{type:"field_dropdown",name:"TRADETYPECAT_LIST",options:[["",""]]},{type:"field_dropdown",name:"TRADETYPE_LIST",options:[["",""]]}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.trade_definition_tradetype=function(){},Blockly.Blocks.trade_definition_contracttype={init:function(){this.jsonInit({message0:(0,r.localize)("Contract Type: {{ contract_type }}",{contract_type:"%1"}),args0:[{type:"field_dropdown",name:"TYPE_LIST",options:[["",""]]}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,tooltip:(0,r.localize)('If the contract type is “Both”, then the Purchase Conditions should include both Rise and Fall using the “Conditional Block"'),previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(e){if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){this.enforceLimitations();var t=/^dbot-load/.test(e.group);if(Blockly.Events.BLOCK_CHANGE&&"TRADETYPE_LIST"===e.name){var n=e.newValue,o=this.getField("TYPE_LIST"),i=[],c=(0,l.M)("both",n);c.length>1&&i.push([(0,r.localize)("Both"),"both"]),i.push.apply(i,f(c)),0===i.length&&i.push.apply(i,f(a.v.NOT_AVAILABLE_DROPDOWN_OPTIONS)),o.updateOptions(i,{event_group:e.group,default_value:t?o.getValue():void 0})}}},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.trade_definition_contracttype=function(){return""},Blockly.Blocks.trade_definition_candleinterval={init:function(){this.jsonInit({message0:(0,r.localize)("Default Candle Interval: {{ candle_interval_type }}",{candle_interval_type:"%1"}),args0:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:a.v.candleIntervals.slice(1)}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(){!this.workspace||this.isInFlyout||this.workspace.isDragging()||this.enforceLimitations()},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.trade_definition_candleinterval=function(){},Blockly.Blocks.trade_definition_restartbuysell={init:function(){this.jsonInit({message0:(0,r.localize)("Restart buy/sell on error (disable for better performance): {{ checkbox }}",{checkbox:"%1"}),args0:[{type:"field_image_checkbox",name:"TIME_MACHINE_ENABLED",checked:!1}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(){!this.workspace||this.isInFlyout||this.workspace.isDragging()||this.enforceLimitations()},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations,required_inputs:["TIME_MACHINE_ENABLED"]},Blockly.JavaScript.trade_definition_restartbuysell=function(){},Blockly.Blocks.trade_definition_restartonerror={init:function(){this.jsonInit({message0:(0,r.localize)("Restart last trade on error (bot ignores the unsuccessful trade): {{ checkbox }}",{checkbox:"%1"}),args0:[{type:"field_image_checkbox",name:"RESTARTONERROR",checked:!0}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setNextStatement(!1),this.setMovable(!1),this.setDeletable(!1)},onchange:function(){!this.workspace||this.isInFlyout||this.workspace.isDragging()||this.enforceLimitations()},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations,required_inputs:["RESTARTONERROR"]},Blockly.JavaScript.trade_definition_restartonerror=function(){};var h=n(55770);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Blockly.Blocks.trade_definition_tradeoptions={durations:[],init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){var e="trade_definition_tradeoptions"===this.type;return{message0:(0,r.localize)("Duration: {{ duration_unit }} {{ duration_value }}",{duration_unit:"%1",duration_value:"%2"}),message1:"".concat(e?(0,r.localize)("Stake"):(0,r.localize)("Payout"),": %1 %2 %3"),args0:[{type:"field_dropdown",name:"DURATIONTYPE_LIST",options:[["",""]]},{type:"input_value",name:"DURATION",check:"Number"}],args1:[{type:"field_label",name:"CURRENCY_LIST",text:(0,h.getCurrencyDisplayCode)(a.v.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"},{type:"field_label",name:"AMOUNT_LIMITS",text:""}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Define your trade options such as duration and stake."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,r.localize)("Trade options"),description:(0,r.localize)("Define your trade options such as duration and stake. Some options are only applicable for certain trade types.")}},onchange:function(e){if("change"===e.type){var t,n=this.workspace.getBlockById(e.blockId);null==n||null===(t=n.parentBlock_)||void 0===t||t.inputList.filter((function(e){return["DURATION","AMOUNT"].includes(e.name)})).forEach((function(e){var t=e.connection.targetBlock(),n=t.getFieldValue("NUM");if(null!=n&&n.startsWith("0")){var r=n.includes(".")?parseFloat("".concat(n)):parseInt("".concat(n));t.setFieldValue(r.toString(),"NUM")}}))}if(this.workspace&&!this.workspace.isDragging()&&!this.isInFlyout){var r=this.workspace.getAllBlocks(!0).find((function(e){return"trade_definition"===e.type}));if(r){var o=r.getChildByType("trade_definition_market"),i=r.getChildByType("trade_definition_tradetype");if(o&&i){this.selected_symbol=o.getFieldValue("SYMBOL_LIST"),this.selected_market=o.getFieldValue("MARKET_LIST"),this.selected_trade_type_category=i.getFieldValue("TRADETYPECAT_LIST"),this.selected_trade_type=i.getFieldValue("TRADETYPE_LIST"),this.selected_duration=this.getFieldValue("DURATIONTYPE_LIST"),this.selected_barrier_types=[this.getFieldValue("BARRIEROFFSETTYPE_LIST")||a.v.BARRIER_TYPES[0][1],this.getFieldValue("SECONDBARRIEROFFSETTYPE_LIST")||a.v.BARRIER_TYPES[1][1]],(e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id)||e.type===Blockly.Events.END_DRAG)&&(this.setCurrency(),this.updateAmountLimits());var l=/^dbot-load/.test(e.group);if(e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id))l?(this.updateBarrierInputs(!1,!1),this.updateDurationInput(!1,!1),this.updatePredictionInput(!1),this.updateAmountLimits()):(this.updateBarrierInputs(!0,!0),this.enforceSingleBarrierType("BARRIEROFFSETTYPE_LIST",!0),this.updateDurationInput(!0,!0),this.updatePredictionInput(!0));else if(e.type===Blockly.Events.BLOCK_CHANGE)if(l)"TRADETYPE_LIST"===e.name&&(this.updateBarrierInputs(!1,!1),this.enforceSingleBarrierType(!1),this.updateDurationInput(!1,!1),this.updatePredictionInput(!1));else if(e.blockId===this.id)switch(e.name){case"DURATIONTYPE_LIST":this.updateBarrierInputs(!0,!0),this.enforceSingleBarrierType("BARRIEROFFSETTYPE_LIST",!0),this.updateDurationInput(!1,!0);break;case"BARRIEROFFSETTYPE_LIST":case"SECONDBARRIEROFFSETTYPE_LIST":this.updateBarrierInputs(!1,!0),this.enforceSingleBarrierType(e.name,!1)}else"SYMBOL_LIST"!==e.name&&"TRADETYPE_LIST"!==e.name||(this.updateBarrierInputs(!0,!0),this.enforceSingleBarrierType(!0),this.updateDurationInput(!0,!0),this.updatePredictionInput(!0),this.updateAmountLimits());else if(e.type===Blockly.Events.END_DRAG&&e.blockId===this.id)if(this.selected_duration)"multiplier"===this.selected_trade_type&&this.updateDurationInput(!1,!1);else{var c=new Blockly.Events.Create(this);c.recordUndo=!1,Blockly.Events.fire(c)}}}}},createPredictionInput:function(e){var t=this;(0,i.$9)((function(){if(0===e.length)t.removeInput("PREDICTION_LABEL",!0),t.removeInput("PREDICTION",!0);else if(!t.getInput("PREDICTION")){t.appendDummyInput("PREDICTION_LABEL").appendField((0,r.localize)("Prediction:"));var n=t.appendValueInput("PREDICTION"),o=t.workspace.newBlock("math_number_positive");o.setShadow(!0),o.setFieldValue(e[0],"NUM"),o.outputConnection.connect(n.connection),o.initSvg(),o.render(!0)}}))},createBarrierInputs:function(e){var t=this;(0,i.$9)((function(){for(var n=["BARRIEROFFSET","SECONDBARRIEROFFSET"],o=0;o<e.values.length;o++){var i=1===e.values.length?(0,r.localize)("Barrier"):a.v.BARRIER_LABELS[o],l=t.getInput(n[o]);if(l)l.fieldRow[0].setText(i);else{l=t.appendValueInput(n[o]).appendField(i,"".concat(n[o],"_LABEL")).appendField(new Blockly.FieldDropdown(a.v.BARRIER_TYPES),"".concat(n[o],"TYPE_LIST"));var c=t.workspace.newBlock("math_number_positive");c.setShadow(!0),c.setFieldValue(e.values[o],"NUM"),c.outputConnection.connect(l.connection),c.initSvg(),c.render(!0)}}for(var s=n.length;s>e.values.length;s--)t.removeInput(n[s-1],!0)}))},updateAmountLimits:function(){var e=this,t=p.Z.instance.account_limits,n=u.Z.instance.client,o=n.currency,a=n.landing_company_shortcode;t.getStakePayoutLimits(o,a,this.selected_market).then((function(t){if(e.getField("AMOUNT_LIMITS")){e.amount_limits=t;var n=t.max_payout,o=t.min_stake;n&&o&&(0,i.$9)((function(){e.setFieldValue((0,r.localize)("(min: {{min_stake}} - max: {{max_payout}})",{min_stake:o,max_payout:n}),"AMOUNT_LIMITS")}))}}))},updateDurationInput:function(e,t){var n=this,r=p.Z.instance.contracts_for;"multiplier"===this.selected_trade_type&&this.isDescendantOf("trade_definition")?(0,i.$9)((function(){(0,i.UR)(!1,(function(){var e=n.workspace.newBlock("trade_definition_multiplier");e.initSvg(),e.render();var t=n.workspace.getTradeDefinitionBlock().getInput("SUBMARKET").connection,r=e.previousConnection;t.connect(r);var o=e.getInput("AMOUNT"),i=n.workspace.newBlock("math_number_positive");i.setShadow(!0),i.setFieldValue(1,"NUM"),i.outputConnection.connect(o.connection),i.initSvg(),i.render();var a=n.workspace.newBlock("multiplier_take_profit"),l=a.getInput("AMOUNT"),c=n.workspace.newBlock("math_number_positive");c.setShadow(!0),c.setFieldValue(0,"NUM"),c.outputConnection.connect(l.connection),c.initSvg(),c.render(),e.getLastConnectionInStatement("MULTIPLIER_PARAMS").connect(a.previousConnection),a.initSvg(),a.render();var s=n.workspace.newBlock("multiplier_stop_loss"),u=s.getInput("AMOUNT"),d=n.workspace.newBlock("math_number_positive");d.setShadow(!0),d.setFieldValue(0,"NUM"),d.outputConnection.connect(u.connection),d.initSvg(),d.render(),e.getLastConnectionInStatement("MULTIPLIER_PARAMS").connect(s.previousConnection),s.initSvg(),s.render(),n.dispose(),Blockly.derivWorkspace.cleanUp()}))})):r.getDurations(this.selected_symbol,this.selected_trade_type).then((function(r){n.durations=r;var o=n.getField("DURATIONTYPE_LIST"),a=n.getInput("DURATION"),l=r.map((function(e){return[e.display,e.unit]}));if(null==o||o.updateOptions(l,{default_value:e?void 0:o.getValue()}),t&&a&&a.connection){var c=a.connection.targetBlock();if(c&&c.isShadow()){var s=r.find((function(e){return e.unit===n.selected_duration}));s&&(0,i.$9)((function(){c.setFieldValue(s.min,"NUM")}))}}}))},updateBarrierInputs:function(e,t){var n=this,r=p.Z.instance.contracts_for,o=a.v.BARRIER_TYPES;r.getBarriers(this.selected_symbol,this.selected_trade_type,this.selected_duration,this.selected_barrier_types).then((function(r){n.createBarrierInputs(r);for(var l=["BARRIEROFFSET","SECONDBARRIEROFFSET"],c=0;c<r.values.length;c++){var s=n.getField("".concat(l[c],"TYPE_LIST")),u=a.v.ABSOLUTE_BARRIER_DROPDOWN_OPTION,d=e?o[c][1]:s.getValue();if("d"===n.selected_duration)s.updateOptions(u,{default_value:"absolute"});else if(r.allow_both_types||r.allow_absolute_type){var p=[].concat(o,u);s.updateOptions(p,{default_value:d})}else s.updateOptions(o,{default_value:d});var f=n.getInput(l[c]).connection;t&&f&&function(){var e=f.targetBlock();if(e&&e.isShadow()){var t=!1!==r.values[c]?r.values[c]:"";(0,i.$9)((function(){e.setFieldValue(t,"NUM")}))}}()}}))},updatePredictionInput:function(e){var t=this;p.Z.instance.contracts_for.getPredictionRange(this.selected_symbol,this.selected_trade_type).then((function(n){if(t.createPredictionInput(n),n.length>0){var r=t.getInput("PREDICTION").connection;if(e&&r){var o=r.targetBlock();if(o&&o.isShadow()){var a=Math.max(1,n[0]);(0,i.$9)((function(){o.setFieldValue(a,"NUM")}))}}}}))},enforceSingleBarrierType:function(e,t){var n=this.getFieldValue(e),r="BARRIEROFFSETTYPE_LIST"===e?"SECONDBARRIEROFFSETTYPE_LIST":"BARRIEROFFSETTYPE_LIST",o=this.getField(r),l=a.v.BARRIER_TYPES;if(o){var c=-1!==l.findIndex((function(e){return e[1]===n})),s=o.getValue();(0,i.$9)((function(){if(c&&("absolute"===s||t)){var e=l.find((function(e){return e[1]!==n}));o.setValue(e[1])}else"absolute"===n&&"absolute"!==s&&o.setValue("absolute")}))}},domToMutation:function(e){var t="true"===e.getAttribute("has_first_barrier"),n="true"===e.getAttribute("has_second_barrier"),r="true"===e.getAttribute("has_prediction");t&&n?this.createBarrierInputs({values:[1,-1]}):t?this.createBarrierInputs({values:[1]}):r&&this.createPredictionInput([1])},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("has_first_barrier",!!this.getInput("BARRIEROFFSET")),e.setAttribute("has_second_barrier",!!this.getInput("SECONDBARRIEROFFSET")),e.setAttribute("has_prediction",!!this.getInput("PREDICTION")),e},setCurrency:function(){var e=this.getField("CURRENCY_LIST"),t=u.Z.instance.client.currency;e.setText((0,h.getCurrencyDisplayCode)(t))},restricted_parents:["trade_definition"],getRequiredValueInputs:function(){var e=this;return{AMOUNT:function(t){var n,o,i=Number(t),a=null===(n=e.amount_limits)||void 0===n?void 0:n.max_payout,l=null===(o=e.amount_limits)||void 0===o?void 0:o.min_stake;return l&&i<l?(e.error_message=(0,r.localize)("Please enter a stake amount that's at least {{min_stake}}.",{min_stake:l}),i<l):a&&i>a?(e.error_message=(0,r.localize)("Please enter a payout amount that's lower than {{max_payout}}.",{max_payout:a}),i>a):(e.error_message=(0,r.localize)("Amount must be a positive number."),!isNaN(i)&&i<=0)},DURATION:function(t){var n=Number(t);if(isNaN(n)||!e.durations.length)return!1;var o=e.durations.find((function(t){return t.unit===e.selected_duration}));if(o){var i=o.min,a=o.max,l=n>=i&&n<=a;return e.error_message=i===a?(0,r.localize)("Duration value is not allowed. To run the bot, please enter {{min}}.",{min:i}):(0,r.localize)("Duration value is not allowed. To run the bot, please enter a value between {{min}} to {{max}}.",{min:i,max:a}),!l}return!1}}}},Blockly.Blocks.trade_definition_tradeoptions_payout=Blockly.Blocks.trade_definition_tradeoptions,Blockly.JavaScript.trade_definition_tradeoptions=function(e){var t,n,r,o=Blockly.JavaScript.valueToCode(e,"AMOUNT",Blockly.JavaScript.ORDER_ATOMIC)||"0",i=u.Z.instance.client.currency,a=e.getFieldValue("DURATIONTYPE_LIST")||"0",l=Blockly.JavaScript.valueToCode(e,"DURATION",Blockly.JavaScript.ORDER_ATOMIC)||"0",c=(0,h.getDecimalPlaces)(i),s="+(Number(".concat(o,").toFixed(").concat(c,"))"),d=function(e,t){return/^(\d+(\.\d+)?)$/.test(t)?"absolute"===e?"'".concat(t,"'"):"'".concat(e).concat(t,"'"):"absolute"===e?t:"'".concat(e,"' + ").concat(t)};return e.getInput("PREDICTION")&&(t=Blockly.JavaScript.valueToCode(e,"PREDICTION",Blockly.JavaScript.ORDER_ATOMIC)||"-1"),e.getInput("BARRIEROFFSET")&&(n=d(e.getFieldValue("BARRIEROFFSETTYPE_LIST"),Blockly.JavaScript.valueToCode(e,"BARRIEROFFSET",Blockly.JavaScript.ORDER_ATOMIC)||"0")),e.getInput("SECONDBARRIEROFFSET")&&(r=d(e.getFieldValue("SECONDBARRIEROFFSETTYPE_LIST"),Blockly.JavaScript.valueToCode(e,"SECONDBARRIEROFFSET",Blockly.JavaScript.ORDER_ATOMIC)||"0")),"\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            duration           : ".concat(l,",\n            duration_unit      : '").concat(a,"',\n            currency           : '").concat(i,"',\n            amount             : ").concat(s,",\n            prediction         : ").concat(t||"undefined",",\n            barrierOffset      : ").concat(n||"undefined",",\n            secondBarrierOffset: ").concat(r||"undefined",",\n            basis              : '").concat("trade_definition_tradeoptions"===e.type?"stake":"payout","',\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    ")},Blockly.JavaScript.trade_definition_tradeoptions_payout=Blockly.JavaScript.trade_definition_tradeoptions,Blockly.Blocks.trade_definition_multiplier={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){return{message0:(0,r.localize)("Multiplier: {{ multiplier }}",{multiplier:"%1"}),message1:"".concat((0,r.localize)("Stake"),": %1 %2 %3"),message2:"%1",message3:"%1",args0:[{type:"field_dropdown",name:"MULTIPLIERTYPE_LIST",options:[["",""]]}],args1:[{type:"field_label",name:"CURRENCY_LIST",text:(0,h.getCurrencyDisplayCode)(a.v.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"},{type:"field_label",name:"AMOUNT_LIMITS",text:""}],args2:[{type:"input_dummy"}],args3:[{type:"input_statement",name:"MULTIPLIER_PARAMS"}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Define your trade options such as multiplier and stake."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,r.localize)("Multiplier trade options"),description:(0,r.localize)("Define your trade options such as multiplier and stake. This block can only be used with the multipliers trade type. If you select another trade type, this block will be replaced with the Trade options block.")}},validateBlocksInStatement:function(){var e=this.getBlocksInStatement("MULTIPLIER_PARAMS");if(e.length>0){var t=[];e.forEach((function(e){t.push(e.type);var n=e.childValueToCode("multiplier_take_profit","AMOUNT"),r=e.childValueToCode("multiplier_stop_loss","AMOUNT");(n<=0||r<=0)&&e.setDisabled(!0),"multiplier_stop_loss"===e.type&&r>0&&e.setDisabled(!1),"multiplier_take_profit"===e.type&&n>0&&e.setDisabled(!1),/^multiplier_.+$/.test(e.type)&&new Set(t).size===t.length||(0,i.$9)((function(){e.unplug(!0)}))}))}},onchange:function(e){if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){var t=this.workspace.getAllBlocks(!0).find((function(e){return"trade_definition"===e.type}));if(t){var n=t.getChildByType("trade_definition_market"),r=t.getChildByType("trade_definition_tradetype");if(n&&r){this.selected_symbol=n.getFieldValue("SYMBOL_LIST"),this.selected_market=n.getFieldValue("MARKET_LIST"),this.selected_trade_type_category=r.getFieldValue("TRADETYPECAT_LIST"),this.selected_trade_type=r.getFieldValue("TRADETYPE_LIST"),this.selected_multiplier=this.getFieldValue("MULTIPLIERTYPE_LIST");var o=/^dbot-load/.test(e.group);if(e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id))return this.setCurrency(),this.updateAmountLimits(),void(o?this.updateMultiplierInput(!1):this.updateMultiplierInput(!0));if(e.type!==Blockly.Events.BLOCK_CHANGE){if(e.type===Blockly.Events.END_DRAG&&(this.setCurrency(),this.updateAmountLimits(),this.validateBlocksInStatement(),e.blockId===this.id))if(this.selected_multiplier)"multiplier"!==this.selected_trade_type&&this.updateMultiplierInput(!0);else{var i=new Blockly.Events.Create(this);i.recordUndo=!1,Blockly.Events.fire(i)}}else this.validateBlocksInStatement(),o?"TRADETYPE_LIST"===e.name&&this.updateMultiplierInput(!1):e.blockId===this.id?"MULTIPLIERTYPE_LIST"===e.name&&this.updateMultiplierInput(!1):"SYMBOL_LIST"!==e.name&&"TRADETYPE_LIST"!==e.name||(this.updateMultiplierInput(!0),this.updateAmountLimits())}}}},updateAmountLimits:Blockly.Blocks.trade_definition_tradeoptions.updateAmountLimits,updateMultiplierInput:function(e){var t=this,n=p.Z.instance.contracts_for;"multiplier"!==this.selected_trade_type?this.isDescendantOf("trade_definition")&&(0,i.$9)((function(){(0,i.UR)(!1,(function(){var e=t.workspace.newBlock("trade_definition_tradeoptions");e.initSvg(),e.render();var n=t.workspace.getTradeDefinitionBlock().getInput("SUBMARKET").connection,r=e.previousConnection;n.connect(r);var o=e.getInput("DURATION"),i=t.workspace.newBlock("math_number_positive");i.setShadow(!0),i.outputConnection.connect(o.connection),i.initSvg(),i.render(!0);var a=e.getInput("AMOUNT"),l=t.workspace.newBlock("math_number_positive");l.setShadow(!0),l.setFieldValue(1,"NUM"),l.outputConnection.connect(a.connection),l.initSvg(),l.render(!0),t.dispose(),Blockly.derivWorkspace.cleanUp()}))})):n.getMultiplierRange(this.selected_symbol,this.selected_trade_type).then((function(n){if(n.length>0){var r=t.getField("MULTIPLIERTYPE_LIST"),o=n.map((function(e){var t=e.toString();return[t,t]}));null==r||r.updateOptions(o,{default_value:e?void 0:r.getValue()})}}))},setCurrency:Blockly.Blocks.trade_definition_tradeoptions.setCurrency,restricted_parents:["trade_definition"],getRequiredValueInputs:function(){var e=this;return{AMOUNT:function(t){var n,o,i=Number(t),a=null===(n=e.amount_limits)||void 0===n?void 0:n.max_payout,l=null===(o=e.amount_limits)||void 0===o?void 0:o.min_stake;return l&&i<l?(e.error_message=(0,r.localize)("Please enter a stake amount that's at least {{min_stake}}.",{min_stake:l}),i<l):a&&i>a?(e.error_message=(0,r.localize)("Please enter a payout amount that's lower than {{max_payout}}.",{max_payout:a}),i>a):(e.error_message=(0,r.localize)("Amount must be a positive number."),!isNaN(i)&&i<=0)}}}},Blockly.JavaScript.trade_definition_multiplier=function(e){var t,n,r=Blockly.JavaScript.valueToCode(e,"AMOUNT",Blockly.JavaScript.ORDER_ATOMIC)||"0",o=u.Z.instance.client.currency,i=u.Z.instance.setContractUpdateConfig,a=e.getFieldValue("MULTIPLIERTYPE_LIST")||"1",l=!(null!==(t=e.getChildByType("multiplier_stop_loss"))&&void 0!==t&&t.disabled)&&e.childValueToCode("multiplier_stop_loss","AMOUNT"),c=!(null!==(n=e.getChildByType("multiplier_take_profit"))&&void 0!==n&&n.disabled)&&e.childValueToCode("multiplier_take_profit","AMOUNT"),s={stop_loss:l?"+(Number(".concat(l,").toFixed(2))"):void 0,take_profit:c?"+(Number(".concat(c,").toFixed(2))"):void 0};i(c,l);var d=(0,h.getDecimalPlaces)(o),p="+(Number(".concat(r,").toFixed(").concat(d,"))");return"\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            multiplier         : ".concat(a,",\n            currency           : '").concat(o,"',\n            amount             : ").concat(p,",\n            limit_order        : ").concat(JSON.stringify(s),",\n            basis              : 'stake',\n            stop_loss          : ").concat(s.stop_loss,",\n            take_profit        : ").concat(s.take_profit,",\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    ")},Blockly.Blocks.multiplier_stop_loss={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Stop Loss: {{ currency }} {{ stop_loss }}",{currency:"%1",stop_loss:"%2"}),args0:[{type:"field_label",name:"CURRENCY_LIST",text:(0,h.getCurrencyDisplayCode)(a.v.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Your contract is closed automatically when your loss is more than or equals to this amount. This block can only be used with the multipliers trade type."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,r.localize)("Stop loss"),description:(0,r.localize)("Your contract is closed automatically when your loss is more than or equals to this amount. This block can only be used with the multipliers trade type.")}},onchange:function(e){!this.workspace||this.isInFlyout||this.workspace.isDragging()||(e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id)||e.type===Blockly.Events.END_DRAG)&&this.setCurrency()},restricted_parents:["trade_definition_multiplier"],setCurrency:Blockly.Blocks.trade_definition_tradeoptions.setCurrency,getRequiredValueInputs:function(){var e=this;return this.getInput("AMOUNT").connection.targetBlock()?{AMOUNT:function(t){var n=Number(t);return e.error_message=(0,r.localize)("Stop loss must be a positive number."),!isNaN(n)&&n<=0}}:{}}},Blockly.JavaScript.multiplier_stop_loss=function(){},Blockly.Blocks.multiplier_take_profit={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Take Profit: {{ currency }} {{ take_profit }}",{currency:"%1",take_profit:"%2"}),args0:[{type:"field_label",name:"CURRENCY_LIST",text:(0,h.getCurrencyDisplayCode)(a.v.lists.CURRENCY[0])},{type:"input_value",name:"AMOUNT",check:"Number"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the multipliers trade type."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:(0,r.localize)("Take Profit"),description:(0,r.localize)("Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the multipliers trade type.")}},onchange:function(e){!this.workspace||this.isInFlyout||this.workspace.isDragging()||(e.type===Blockly.Events.BLOCK_CREATE&&e.ids.includes(this.id)||e.type===Blockly.Events.END_DRAG)&&this.setCurrency()},restricted_parents:["trade_definition_multiplier"],setCurrency:Blockly.Blocks.trade_definition_tradeoptions.setCurrency,getRequiredValueInputs:function(){var e=this;return this.getInput("AMOUNT").connection.targetBlock()?{AMOUNT:function(t){var n=Number(t);return e.error_message=(0,r.localize)("Take profit must be a positive number."),!isNaN(n)&&n<=0}}:{}}},Blockly.JavaScript.multiplier_take_profit=function(){},Blockly.Blocks.logic_compare={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Compares two values"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:(0,r.localize)("Compare"),description:(0,r.localize)("This block compares two values and is used to build a conditional structure.")}},getRequiredValueInputs:function(){return{A:null,B:null}}},Blockly.JavaScript.logic_compare=function(e){var t={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")||"EQ"],n=["==","!="].includes(t)?Blockly.JavaScript.ORDER_EQUALITY:Blockly.JavaScript.ORDER_RELATIONAL,r=Blockly.JavaScript.valueToCode(e,"A",n)||"false",o=Blockly.JavaScript.valueToCode(e,"B",n)||"false";return["".concat(r," ").concat(t," ").concat(o),n]},Blockly.Blocks.controls_if={init:function(){this.value_connections=[null],this.statement_connections=[null],this.else_statement_connection=null,this.else_if_count=0,this.else_count=0,this.jsonInit(this.definition()),this.updateShape()},definition:function(){return{message0:(0,r.localize)("if {{ condition }} then",{condition:"%1"}),message1:"%1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],args1:[{type:"input_statement",name:"DO0"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Conditional block"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:(0,r.localize)("Conditional block"),description:(0,r.localize)("This block evaluates a statement and will perform an action only when the statement is true.")}},mutationToDom:function(){var e=document.createElement("mutation");return this.else_if_count&&e.setAttribute("elseif",this.else_if_count),this.else_count&&e.setAttribute("else",1),e},domToMutation:function(e){this.else_if_count=parseInt(e.getAttribute("elseif"))||0,this.else_count=parseInt(e.getAttribute("else"))||0,this.rebuildShape()},rebuildShape:function(){for(var e,t,n=[null],r=[null],o=(null===(e=this.getInput("ELSE"))||void 0===e||null===(t=e.connection)||void 0===t?void 0:t.targetConnection)||null,i=1;;){var a=this.getIfInputNames(i),l=this.getInput(a.IF);if(!l)break;var c=this.getInput(a.DO);n.push(l.connection.targetConnection),r.push(c.connection.targetConnection),i++}this.updateShape(),this.reconnectChildBlocks(n,r,o)},update:function(e){var t=this;Blockly.Events.setGroup(!0);var n=this.mutationToDom(),r=n&&Blockly.Xml.domToText(n),o=this.rendered;this.rendered=!1,e&&e.call(this),this.updateShape(),this.rendered=o,this.initSvg();var i=Blockly.Events.getGroup(),a=this.mutationToDom(),l=a&&Blockly.Xml.domToText(a);if(r!==l){var c=new Blockly.Events.BlockChange(this,"mutation",null,r,l);Blockly.Events.fire(c),setTimeout((function(){Blockly.Events.setGroup(i),t.bumpNeighbours_(),Blockly.Events.setGroup(!1)}),Blockly.BUMP_DELAY)}this.rendered&&this.render(),Blockly.Events.setGroup(!1)},updateShape:function(){var e=this;this.getInput("ELSE")&&(this.removeInput("ELSE"),this.removeInput("ELSE_LABEL"),this.removeInput("DELETE_ELSE"));for(var t=1;;){var n=this.getIfInputNames(t);if(!this.getInput(n.IF))break;this.removeInput(n.IF_LABEL),this.removeInput(n.IF),this.removeInput(n.THEN_LABEL),this.removeInput(n.DELETE_ICON),this.removeInput(n.DO),t++}this.getInput("MUTATOR")&&this.removeInput("MUTATOR");for(var i=function(t){var n=e.getIfInputNames(t);e.appendDummyInput(n.IF_LABEL).appendField((0,r.localize)("else if")),e.appendValueInput(n.IF).setCheck("Boolean"),e.appendDummyInput(n.THEN_LABEL).appendField((0,r.localize)("then")),e.appendDummyInput(n.DELETE_ICON).appendField(new Blockly.FieldImage(o.fK,24,24,"-",(function(){return e.modifyElseIf(!1,t)}))),e.appendStatementInput(n.DO)},a=1;a<=this.else_if_count;a++)i(a);this.else_count>0&&(this.appendDummyInput("ELSE_LABEL").appendField((0,r.localize)("else")),this.appendDummyInput("DELETE_ELSE").appendField(new Blockly.FieldImage(o.fK,24,24,"-",(function(){return e.modifyElse(!1)}),!1)),this.appendStatementInput("ELSE")),this.appendDummyInput("MUTATOR").appendField(new Blockly.FieldImage(o.M8,24,24,"+",(function(){0===e.else_count?e.modifyElse(!0):(e.else_if_count||(e.else_if_count=0),e.modifyElseIf(!0))}),!1)),this.initSvg(),this.render()},storeConnections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.value_connections=[null],this.statement_connections=[null],this.else_statement_connection=null;for(var t=1;t<=this.else_if_count;t++)if(e!==t){var n=this.getIfInputNames(t);this.value_connections.push(this.getInput(n.IF).connection.targetConnection),this.statement_connections.push(this.getInput(n.DO).connection.targetConnection)}var r=this.getInput("ELSE");r&&(this.else_statement_connection=r.connection.targetConnection)},reconnectChildBlocks:function(e,t,n){for(var r=null!=e?e:this.value_connections,o=null!=t?t:this.statement_connections,i=null!=n?n:this.else_statement_connection,a=1;a<=this.else_if_count;a++){var l=this.getIfInputNames(a),c=r[a],s=o[a];c&&this.getInput(l.IF)&&Blockly.Mutator.reconnect(c,this,l.IF),s&&this.getInput(l.DO)&&Blockly.Mutator.reconnect(s,this,l.DO)}i&&this.getInput("ELSE")&&Blockly.Mutator.reconnect(i,this,"ELSE")},modifyElse:function(e){var t=this;this.storeConnections(),this.update((function(){t.else_count+=e?1:-1})),this.reconnectChildBlocks()},modifyElseIf:function(e,t){var n=this;this.storeConnections(t),this.update((function(){n.else_if_count+=e?1:-1})),this.reconnectChildBlocks()},getRequiredValueInputs:function(){var e={};return this.inputList.filter((function(e){return/^IF[0-9]*?$/.test(e.name)})).forEach((function(t){return e[t.name]=null})),e},getIfInputNames:function(e){return{IF_LABEL:"IF_LABEL".concat(e),IF:"IF".concat(e),THEN_LABEL:"THEN_LABEL".concat(e),DELETE_ICON:"DELETE_ICON".concat(e),DO:"DO".concat(e)}}},Blockly.JavaScript.controls_if=function(e){var t=0,n="";do{var r=Blockly.JavaScript.valueToCode(e,"IF".concat(t),Blockly.JavaScript.ORDER_NONE)||"false";n+="\n        ".concat(t>0?"else if":"if"," (").concat(r,") {\n            ").concat(Blockly.JavaScript.statementToCode(e,"DO".concat(t)),"\n        }"),t++}while(e.getInput("IF".concat(t)));return e.getInput("ELSE")&&(n+="\n        else {\n            ".concat(Blockly.JavaScript.statementToCode(e,"ELSE"),"\n        }")),"".concat(n,"\n")},Blockly.Blocks.logic_boolean={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[[(0,r.localize)("true"),"TRUE"],[(0,r.localize)("false"),"FALSE"]]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns either True or False"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:(0,r.localize)("True-False"),description:(0,r.localize)("This is a single block that returns a boolean value, either true or false.")}}},Blockly.JavaScript.logic_boolean=function(e){return["TRUE"===e.getFieldValue("BOOL")?"true":"false",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.logic_operation={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[[(0,r.localize)("and"),"AND"],[(0,r.localize)("or"),"OR"]]},{type:"input_value",name:"B"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Performs selected logic operation"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:(0,r.localize)("Logic operation"),description:(0,r.localize)('This block performs the "AND" or the "OR" logic operation.')}},getRequiredValueInputs:function(){return{A:null,B:null}}},Blockly.JavaScript.logic_operation=function(e){var t,n,r=e.getFieldValue("OP");"AND"===r?(t="&&",n=Blockly.JavaScript.ORDER_LOGICAL_AND):"OR"===r&&(t="||",n=Blockly.JavaScript.ORDER_LOGICAL_OR);var o=Blockly.JavaScript.valueToCode(e,"A",Blockly.JavaScript.ORDER_ATOMIC)||"false",i=Blockly.JavaScript.valueToCode(e,"B",Blockly.JavaScript.ORDER_ATOMIC)||"false";return["".concat(o," ").concat(t," ").concat(i),n]},Blockly.Blocks.logic_null={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"null",output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block assigns a null value to an item or statement."),category:Blockly.Categories.Logic}},meta:function(){return{display_name:(0,r.localize)("Null"),description:(0,r.localize)("This block assigns a null value to an item or statement.")}}},Blockly.JavaScript.logic_null=function(){return["null",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.logic_ternary={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("test {{ condition }}",{condition:"%1"}),message1:(0,r.localize)("if true {{ return_value }}",{return_value:"%1"}),message2:(0,r.localize)("if false {{ return_value }}",{return_value:"%1"}),args0:[{type:"input_value",name:"IF",check:"Boolean"}],args1:[{type:"input_value",name:"THEN"}],args2:[{type:"input_value",name:"ELSE"}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block tests if a given value is true or false and returns “True” or “False” accordingly."),category:Blockly.Categories.Logic}},meta:function(){return{display_name:(0,r.localize)("Test value"),description:(0,r.localize)("This block tests if a given value is true or false and returns “True” or “False” accordingly.")}},getRequiredValueInputs:function(){return{IF:null,THEN:null,ELSE:null}}},Blockly.JavaScript.logic_ternary=function(e){var t=Blockly.JavaScript.valueToCode(e,"IF",Blockly.JavaScript.ORDER_CONDITIONAL)||"false",n=Blockly.JavaScript.valueToCode(e,"THEN",Blockly.JavaScript.ORDER_CONDITIONAL)||"null",r=Blockly.JavaScript.valueToCode(e,"ELSE",Blockly.JavaScript.ORDER_CONDITIONAL)||"null";return["(".concat(t," ? ").concat(n," : ").concat(r,")"),Blockly.JavaScript.ORDER_CONDITIONAL]},Blockly.Blocks.logic_negate={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("not {{ boolean }}",{boolean:"%1"}),args0:[{type:"input_value",name:"BOOL"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Converts a given True or False to the opposite value"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:(0,r.localize)("Logic negation"),description:(0,r.localize)("This block converts the boolean value (true or false) to its opposite.")}},getRequiredValueInputs:function(){return{BOOL:null}}},Blockly.JavaScript.logic_negate=function(e){var t=Blockly.JavaScript.ORDER_LOGICAL_NOT,n=Blockly.JavaScript.valueToCode(e,"BOOL",t)||"true";return["!".concat(n),t]},Blockly.Blocks.math_change={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("change {{ variable }} by {{ number }}",{variable:"%1",number:"%2"}),args0:[{type:"field_variable",name:"VAR",variable:(0,r.localize)("item")},{type:"input_value",name:"DELTA",check:"Number"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("This block adds the given number to the selected variable"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Change variable"),description:(0,r.localize)("This block adds the given number to the selected variable.")}},getRequiredValueInputs:function(){return{DELTA:null}}},Blockly.JavaScript.math_change=function(e){var t=e.getFieldValue("VAR"),n=Blockly.JavaScript.variableDB_.getName(t,Blockly.Variables.NAME_TYPE),r=Blockly.JavaScript.valueToCode(e,"DELTA",Blockly.JavaScript.ORDER_ADDITION)||"0";return"".concat(n," = (typeof ").concat(n," === 'number' ? ").concat(n," : 0) + ").concat(r,";")},Blockly.Blocks.math_constant={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["ℇ","E"],["ϕ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block gives you the selected constant values."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Mathematical constants"),description:(0,r.localize)("This block gives you the selected constant values.")}}},Blockly.JavaScript.math_constant=function(e){var t,n,r=e.getFieldValue("CONSTANT");return"PI"===r?(t="Math.PI",n=Blockly.JavaScript.ORDER_MEMBER):"E"===r?(t="Math.E",n=Blockly.JavaScript.ORDER_MEMBER):"GOLDEN_RATIO"===r?(t="(1 + Math.sqrt(5)) / 2",n=Blockly.JavaScript.ORDER_DIVISION):"SQRT2"===r?(t="Math.SQRT2",n=Blockly.JavaScript.ORDER_MEMBER):"SQRT1_2"===r?(t="Math.SQRT1_2",n=Blockly.JavaScript.ORDER_MEMBER):"INFINITY"===r&&(t="Infinity",n=Blockly.JavaScript.ORDER_ATOMIC),[t,n]},Blockly.Blocks.math_constrain={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("constrain {{ number }} low {{ low_number }} high {{ high_number }}",{number:"%1",low_number:"%2",high_number:"%3"}),args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block constrains a given number so that it is within a set range."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Constrain within a range"),description:(0,r.localize)("This block constrains a given number so that it is within a set range.")}},getRequiredValueInputs:function(){return{VALUE:null,LOW:null,HIGH:null}}},Blockly.JavaScript.math_constrain=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_COMMA)||"0",n=Blockly.JavaScript.valueToCode(e,"LOW",Blockly.JavaScript.ORDER_COMMA)||"0",r=Blockly.JavaScript.valueToCode(e,"HIGH",Blockly.JavaScript.ORDER_COMMA)||"0";return["Math.min(Math.max(".concat(t,", ").concat(n,"), ").concat(r,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_modulo={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("remainder of {{ number1 }} ÷ {{ number2 }}",{number1:"%1",number2:"%2"}),args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns the remainder after a division"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Remainder after division"),description:(0,r.localize)("Returns the remainder after the division of the given numbers.")}},getRequiredValueInputs:function(){return{DIVIDEND:null,DIVISOR:null}}},Blockly.JavaScript.math_modulo=function(e){var t=Blockly.JavaScript.valueToCode(e,"DIVIDEND",Blockly.JavaScript.ORDER_MODULUS)||"0",n=Blockly.JavaScript.valueToCode(e,"DIVISOR",Blockly.JavaScript.ORDER_MODULUS)||"0";return["".concat(t," % ").concat(n),Blockly.JavaScript.ORDER_MODULUS]},Blockly.Blocks.math_number={init:function(){var e=this;this.jsonInit(this.definition()),this.getField("NUM").setValidator((function(t){return e.numberValidator(t)}))},definition:function(){return{message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Please use `.` as a decimal separator for fractional numbers."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Number"),description:(0,r.localize)("Enter an integer or fractional number into this block. Please use `.` as a decimal separator for fractional numbers.")}},numberValidator:function(e){if(!(/^-?([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(e)&&e<Number.MAX_SAFE_INTEGER))return null}},Blockly.JavaScript.math_number=function(e){return[e.getFieldValue("NUM"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.math_number_positive={init:Blockly.Blocks.math_number.init,definition:Blockly.Blocks.math_number.definition,meta:function(){return{display_name:(0,r.localize)("Math Number Positive"),description:(0,r.localize)("Math Number Description")}},numberValidator:function(e){if(!(/^([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(e)&&e<Number.MAX_SAFE_INTEGER))return null}},Blockly.JavaScript.math_number_positive=Blockly.JavaScript.math_number,Blockly.Blocks.math_number_property={init:function(){var e=this;this.jsonInit(this.definition()),this.setOnChange((function(t){if("PROPERTY"===t.name){var n="DIVISIBLE_BY"===e.getFieldValue("PROPERTY");e.updateShape(n)}}))},definition:function(){return{message0:(0,r.localize)("{{ number }} is {{ type }}",{number:"%1",type:"%2"}),args0:[{type:"input_value",name:"NUMBER_TO_CHECK"},{type:"field_dropdown",name:"PROPERTY",options:[[(0,r.localize)("even"),"EVEN"],[(0,r.localize)("odd"),"ODD"],[(0,r.localize)("prime"),"PRIME"],[(0,r.localize)("whole"),"WHOLE"],[(0,r.localize)("positive"),"POSITIVE"],[(0,r.localize)("negative"),"NEGATIVE"],[(0,r.localize)("divisible by"),"DIVISIBLE_BY"]]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,toolip:(0,r.localize)("This block tests a given number according to the selection"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Test a number"),description:(0,r.localize)("This block tests a given number according to the selection and it returns a value of “True” or “False”. Available options: Even, Odd, Prime, Whole, Positive, Negative, Divisible")}},domToMutation:function(e){var t="true"===e.getAttribute("divisor_input");this.updateShape(t)},mutationToDom:function(){var e=document.createElement("mutation"),t="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",t),e},updateShape:function(e){var t=this.getInput("DIVISOR");e?t||(this.appendValueInput("DIVISOR").setCheck("Number"),this.initSvg(),this.render(!1)):this.removeInput("DIVISOR")},getRequiredValueInputs:function(){return{NUMBER_TO_CHECK:null}}},Blockly.JavaScript.math_number_property=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"NUMBER_TO_CHECK",Blockly.JavaScript.ORDER_MODULUS)||"0",r=e.getFieldValue("PROPERTY");if("PRIME"===r){var o=Blockly.JavaScript.provideFunction_("mathIsPrime",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(n) {\n                // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n                if (n == 2 || n == 3) {\n                    return true;\n                }\n\n                // False if n is NaN, negative, is 1, or not whole.\n                // And false if n is divisible by 2 or 3.\n                if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\n                    return false;\n                }\n\n                // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n                for (var x  = 6; x <= Math.sqrt(n) + 1; x += 6) {\n                    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }")]);return[t="".concat(o,"(").concat(n,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]}if("EVEN"===r)t="".concat(n," % 2 === 0");else if("ODD"===r)t="".concat(n," % 2 === 1");else if("WHOLE"===r)t="".concat(n," % 1 === 0");else if("POSITIVE"===r)t="".concat(n," > 0");else if("NEGATIVE"===r)t="".concat(n," < 0");else if("DIVISIBLE_BY"===r){var i=Blockly.JavaScript.valueToCode(e,"DIVISOR",Blockly.JavaScript.ORDER_MODULUS)||"0";t="".concat(n," % ").concat(i," == 0")}return[t,Blockly.JavaScript.ORDER_EQUALITY]},Blockly.Blocks.math_on_list={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("{{ calculation }} of list {{ input_list }}",{calculation:"%1",input_list:"%2"}),args0:[{type:"field_dropdown",name:"OP",options:[[(0,r.localize)("sum"),"SUM"],[(0,r.localize)("min"),"MIN"],[(0,r.localize)("max"),"MAX"],[(0,r.localize)("average"),"AVERAGE"],[(0,r.localize)("median"),"MEDIAN"],[(0,r.localize)("mode"),"MODE"],[(0,r.localize)("antimode"),"ANTIMODE"],[(0,r.localize)("standard deviation"),"STD_DEV"],[(0,r.localize)("random item"),"RANDOM"]]},{type:"input_value",name:"LIST"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Aggregate operations"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Aggregate operations"),description:(0,r.localize)("This block performs the following operations on a given list: sum, minimum, maximum, average, median, mode, antimode, standard deviation, random item.")}},getRequiredValueInputs:function(){var e=this,t=["variables_get","lists_getSublist","ohlc_values","lists_split","ohlc","ticks","lists_repeat","lastDigitList","ohlc_values_in_list","procedures_callreturn"];return{LIST:function(){var n;return!t.includes(null===(n=e.childBlocks_[0])||void 0===n?void 0:n.type)}}}},Blockly.JavaScript.math_on_list=function(e){var t,n,r=e.getFieldValue("OP");if("SUM"===r){var o=Blockly.JavaScript.provideFunction_("mathMean",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                },0);\n            }")]);n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]",t="".concat(o,"((").concat(n," || [0]))")}else if("MIN"===r){var i=Blockly.JavaScript.provideFunction_("mathMean",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return Math.min.apply(null, (recursiveList(myList, final_list) || [0]));\n            }")]);n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_COMMA)||"[]",t="".concat(i,"((").concat(n," || [0]))")}else if("MAX"===r){var a=Blockly.JavaScript.provideFunction_("mathMean",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return Math.max.apply(null, (recursiveList(myList, final_list) || [0]));\n            }")]);n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_COMMA)||"[]",t="".concat(a,"((").concat(n," || [0]))")}else if("AVERAGE"===r){var l=Blockly.JavaScript.provideFunction_("mathMean",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                }, 0) / myList.length;\n            }")]);n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]",t="".concat(l,"((").concat(n," || [0]))")}else if("MEDIAN"===r){var c=Blockly.JavaScript.provideFunction_("mathMedian",["\n            Array.prototype.swap = function (x,y) {\n                var b = this[x];\n                this[x] = this[y];\n                this[y] = b;\n                return this;\n            }\n\n            function partition(arr, start, end){\n                var pivotValue = arr[end];\n                var pivotIndex = start;\n                for (var i = start; i < end; i++) {\n                    if (arr[i] < pivotValue) {\n                    arr.swap(pivotIndex, i);\n                    pivotIndex++;\n                    }\n                }\n                arr.swap(end, pivotIndex);\n                return pivotIndex;\n            };\n\n            function quickSort(arr) {\n                var stack = [];\n                stack.push(0);\n                stack.push(arr.length - 1);\n\n                while(stack[stack.length - 1] >= 0){\n                    end = stack.pop();\n                    start = stack.pop();\n                    pivotIndex = partition(arr, start, end);\n                    if (pivotIndex - 1 > start){\n                        stack.push(start);\n                        stack.push(pivotIndex - 1);\n                    }\n                    if (pivotIndex + 1 < end){\n                        stack.push(pivotIndex + 1);\n                        stack.push(end);\n                    }\n                }\n\n            }\n\n            function calculateMedian(final_list){\n                quickSort(final_list);\n\n                if (final_list.length % 2 == 0) {\n                    return (final_list[final_list.length / 2 - 1] + final_list[final_list.length / 2]) / 2;\n                }\n                return final_list[(final_list.length - 1) / 2];\n            }\n\n            function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(myList) {\n                var final_list = [];\n                return calculateMedian(recursiveList(myList, final_list));\n            }")]);n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]",t="".concat(c,"((").concat(n," || [0]))")}else if("MODE"===r){var s=Blockly.JavaScript.provideFunction_("mathModes",["\n            function calculateMathMode(values){\n                var modes = [];\n                var counts = [];\n                var maxCount = 0;\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                    maxCount = Math.max(thisCount, maxCount);\n                }\n\n                for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == maxCount) {\n                        modes.push(counts[j][0]);\n                    }\n                }\n\n                return modes;\n            }\n\n            function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list) {\n                var final_list = [];\n                return calculateMathMode(recursiveList(list, final_list));\n            }")]);n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]",t="".concat(s,"((").concat(n," || [0]))")}else if("ANTIMODE"===r){var u=Blockly.JavaScript.provideFunction_("mathAntiMode",["\n            function calculateMathAntiMode(values){\n                var antiMode = [];\n                var counts = [];\n                var minCount = 1;\n                var countArray = [];\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                }\n\n                 minCount = Math.min.apply(null, counts.map(function(element) {\n                     return element[1];\n                 }));\n\n                 for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == minCount) {\n                        antiMode.push(counts[j][0]);\n                    }\n                }\n\n                return antiMode;\n            }\n\n            function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list) {\n                var final_list = [];\n                return calculateMathAntiMode(recursiveList(list, final_list));\n            }")]);n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]",t="".concat(u,"((").concat(n," || [0]))")}else if("STD_DEV"===r){var d=Blockly.JavaScript.provideFunction_("mathStandardDeviation",["\n            function calculateMathStandardDeviation(numbers){\n                var n = numbers.length;\n                if (!n) {\n                    return null;\n                }\n\n                var mean = numbers.reduce(function(x, y) {\n                    return x + y;\n                }, 0) / n;\n\n                var variance = 0;\n                for (var j = 0; j < n; j++) {\n                    variance += Math.pow(numbers[j] - mean, 2);\n                }\n                variance = variance / n;\n                return Math.sqrt(variance);\n            }\n\n            function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list) {\n                var final_list = [];\n                return calculateMathStandardDeviation(recursiveList(list, final_list));\n            }")]);n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]",t="".concat(d,"((").concat(n," || [0]))")}else if("RANDOM"===r){var p=Blockly.JavaScript.provideFunction_("mathRandomList",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(list) {\n                var final_list = [];\n                var final_list = recursiveList(list, final_list);\n                var x = Math.floor(Math.random() * final_list.length);\n                return final_list[x];\n            }")]);n=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]",t="".concat(p,"((").concat(n," || [0]))")}return[t,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_random_float={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("random fraction"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block gives you a random fraction between 0.0 to 1.0"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Random fraction number"),description:(0,r.localize)("This block gives you a random fraction between 0.0 to 1.0.")}}},Blockly.JavaScript.math_random_float=function(){return["Math.random()",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_random_int={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("random integer from {{ start_number }} to {{ end_number }}",{start_number:"%1",end_number:"%2"}),args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block gives you a random number from within a set range"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Random integer"),description:(0,r.localize)("This block gives you a random number from within a set range.")}},getRequiredValueInputs:function(){return{FROM:null,TO:null}}},Blockly.JavaScript.math_random_int=function(e){var t=Blockly.JavaScript.valueToCode(e,"FROM",Blockly.JavaScript.ORDER_COMMA)||"0",n=Blockly.JavaScript.valueToCode(e,"TO",Blockly.JavaScript.ORDER_COMMA)||"0",r=Blockly.JavaScript.provideFunction_("mathRandomInt",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(a, b) {\n            if (a > b) {\n                // Swap a and b to ensure a is smaller.\n                var c = a;\n                a = b;\n                b = c;\n            }\n            return Math.floor(Math.random() * (b - a + 1) + a);\n        }")]);return["".concat(r,"(").concat(t,", ").concat(n,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_round={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["round","ROUND"],["round up","ROUNDUP"],["round down","ROUNDDOWN"]]},{type:"input_value",name:"NUM"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Rounds a given number to an integer"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Rounding operation"),description:(0,r.localize)("This block rounds a given number according to the selection: round, round up, round down.")}},getRequiredValueInputs:function(){return{NUM:null}}},Blockly.JavaScript.math_round=function(e){var t,n=e.getFieldValue("OP"),r=Blockly.JavaScript.valueToCode(e,"NUM",Blockly.JavaScript.ORDER_ATOMIC)||"0";return"ROUND"===n?t="Math.round(".concat(r,")"):"ROUNDUP"===n?t="Math.ceil(".concat(r,")"):"ROUNDDOWN"===n&&(t="Math.floor(".concat(r,")")),[t,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_arithmetic={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["+","ADD"],["-","MINUS"],["*","MULTIPLY"],["/","DIVIDE"],["^","POWER"]]},{type:"input_value",name:"B",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("This block performs arithmetic operations between two numbers."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Arithmetical operations"),description:(0,r.localize)("This block performs arithmetic operations between two numbers.")}},getRequiredValueInputs:function(){return{A:null,B:null}}},Blockly.JavaScript.math_arithmetic=function(e){var t={ADD:["+",Blockly.JavaScript.ORDER_ADDITION],MINUS:["-",Blockly.JavaScript.ORDER_SUBTRACTION],MULTIPLY:["*",Blockly.JavaScript.ORDER_MULTIPLICATION],DIVIDE:["/",Blockly.JavaScript.ORDER_DIVISION],POWER:[null,Blockly.JavaScript.ORDER_COMMA]}[e.getFieldValue("OP")],n=t[0],r=t[1],o=Blockly.JavaScript.valueToCode(e,"A",r)||"0",i=Blockly.JavaScript.valueToCode(e,"B",r)||"0";return n?["".concat(o," ").concat(n," ").concat(i),r]:["Math.pow(".concat(o,", ").concat(i,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_single={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[[(0,r.localize)("square root"),"ROOT"],[(0,r.localize)("absolute"),"ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Operations on a given number"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Operations on a given number"),description:(0,r.localize)("This block performs the selected operations to a given number.")}},getRequiredValueInputs:function(){return{NUM:null}}},Blockly.JavaScript.math_single=function(e){var t,n,r=e.getFieldValue("OP");return"NEG"===r?("-"===(n=Blockly.JavaScript.valueToCode(e,"NUM",Blockly.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" ".concat(n)),[t="-".concat(n),Blockly.JavaScript.ORDER_UNARY_NEGATION]):(n=["SIN","COS","TAN"].includes(r)?Blockly.JavaScript.valueToCode(e,"NUM",Blockly.JavaScript.ORDER_DIVISION)||"0":Blockly.JavaScript.valueToCode(e,"NUM",Blockly.JavaScript.ORDER_NONE)||"0","ABS"===r?t="Math.abs(".concat(n,")"):"ROOT"===r?t="Math.sqrt(".concat(n,")"):"LN"===r?t="Math.log(".concat(n,")"):"EXP"===r?t="Math.pow(Math.E, ".concat(n,")"):"POW10"===r?t="Math.pow(10, ".concat(n,")"):"ROUND"===r?t="Math.round(".concat(n,")"):"ROUNDUP"===r?t="Math.ceil(".concat(n,")"):"ROUNDDOWN"===r?t="Math.floor(".concat(n,")"):"SIN"===r?t="Math.sin(".concat(n," / 180 * Math.PI)"):"COS"===r?t="Math.cos(".concat(n," / 180 * Math.PI)"):"TAN"===r&&(t="Math.tan(".concat(n," / 180 * Math.PI)")),t?[t,Blockly.JavaScript.ORDER_FUNCTION_CALL]:("LOG10"===r?t="Math.log(".concat(n,") / Math.log(10)"):"ASIN"===r?t="Math.asin(".concat(n,") / Math.PI * 180"):"ACOS"===r?t="Math.acos(".concat(n,") / Math.PI * 180"):"ATAN"===r&&(t="Math.atan(".concat(n,") / Math.PI * 180")),[t,Blockly.JavaScript.ORDER_DIVISION]))},Blockly.Blocks.math_trig={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["sin","SIN"],["cos","COS"],["tan","TAN"],["asin","ASIN"],["acos","ACOS"],["atan","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Trigonometric functions"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:(0,r.localize)("Trigonometric functions"),description:(0,r.localize)("This block performs trigonometric functions.")}},getRequiredValueInputs:function(){return{NUM:null}}},Blockly.JavaScript.math_trig=Blockly.JavaScript.math_single,Blockly.Blocks.text={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1",args0:[{type:"field_input",name:"TEXT"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Enter some text here"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Text"),description:(0,r.localize)("A  block that can contain text.")}}},Blockly.JavaScript.text=function(e){return[Blockly.JavaScript.quote_(e.getFieldValue("TEXT")),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.text_join={protected_statements:["STACK"],allowed_children:["text_statement"],init:function(){var e=new Blockly.FieldImage(o.M8,25,25,"",this.onIconClick.bind(this));this.jsonInit(this.definition()),this.appendDummyInput("ADD_ICON").appendField(e),this.moveInputBefore("ADD_ICON","STACK")},definition:function(){return{message0:(0,r.localize)("set {{ variable }} to create text with",{variable:"%1"}),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:(0,r.localize)("text")}],args1:[{type:"input_statement",name:"STACK"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Text join"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Text join"),description:(0,r.localize)("Creates a single text string from combining the text value of each attached item, without spaces in between. The number of items can be added accordingly.")}},onIconClick:function(){var e=this;this.workspace.options.readOnly||this.isInFlyout||(0,i.UR)(!1,(function(){var t=e.workspace.newBlock("text_statement");t.required_parent_id=e.id,t.setMovable(!0),t.initSvg(),t.render();var n=e.workspace.newBlock("text");n.setShadow(!0),n.setFieldValue("","TEXT"),n.initSvg(),n.render(),t.getInput("TEXT").connection.connect(n.outputConnection),e.getLastConnectionInStatement("STACK").connect(t.previousConnection)}))},onchange:Blockly.Blocks.lists_create_with.onchange},Blockly.JavaScript.text_join=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=e.getBlocksInStatement("STACK").map((function(e){var t=Blockly.JavaScript[e.type](e);return Array.isArray(t)?t[0]:t}));return"".concat(t," = [").concat(n,'].join(" ");\n')},Blockly.Blocks.text_statement={required_parent_type:"text_join",init:function(){this.required_parent_id="";var e=new Blockly.FieldImage(o.fK,25,25,"",this.onIconClick.bind(this));this.jsonInit(this.definition()),this.appendDummyInput("REMOVE_ICON").appendField(e)},definition:function(){return{message0:"%1",args0:[{type:"input_value",name:"TEXT"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Text Statement"),description:""}},onchange:function(e){var t=this;if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){var n=this.getSurroundParent();if(e.type===Blockly.Events.BLOCK_CREATE&&(this.setMovable(!0),this.required_parent_id||(null==n?void 0:n.type)!==this.required_parent_type||(this.required_parent_id=n.id)),e.type===Blockly.Events.END_DRAG){var r=Blockly.getMainWorkspace().getBlockById(e.blockId);if(this.required_parent_id&&(!n||n.id!==this.required_parent_id)){var o=Blockly.getMainWorkspace().getBlockById(this.required_parent_id);if(o)if(o.getInputTargetBlock("STACK")){var a=o.getLastConnectionInStatement("STACK");(0,i.$9)((function(){a.connect(t.previousConnection)}))}else(0,i.$9)((function(){o.getInput("STACK").connection.connect(r.previousConnection)}))}}}},onIconClick:Blockly.Blocks.lists_statement.onIconClick},Blockly.JavaScript.text_statement=function(e){return["String(".concat(Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_ATOMIC),")"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.text_append={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("to {{ variable }} append text {{ input_text }}",{variable:"%1",input_text:"%2"}),args0:[{type:"field_variable",name:"VAR",variable:(0,r.localize)("text")},{type:"input_value",name:"TEXT"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Appends a given text to a variable"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Text Append"),description:(0,r.localize)("Appends a given text to a variable.")}},getRequiredValueInputs:function(){return{TEXT:i.cM}}},Blockly.JavaScript.text_append=function(e){var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),n=Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''",r="".concat(t," += ").concat(function(e){return/^\s*'([^']|\\')*'\s*$/.test(e)?e:"String(".concat(e,")")}(n),";\n");return r},Blockly.Blocks.text_length={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("length of {{ input_text }}",{input_text:"%1"}),args0:[{type:"input_value",name:"VALUE"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Text String Length"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Text String Length"),description:(0,r.localize)("Returns the number of characters of a given string of text, including numbers, spaces, punctuation marks, and symbols.")}},getRequiredValueInputs:function(){return{VALUE:i.cM}}},Blockly.JavaScript.text_length=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"''";return["".concat(t,".length"),Blockly.JavaScript.ORDER_MEMBER]},Blockly.Blocks.text_isEmpty={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("text {{ input_text }} is empty",{input_text:"%1"}),args0:[{type:"input_value",name:"VALUE",check:["String"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Tests if a given text string is empty"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Text Is empty"),description:(0,r.localize)("Tests whether a string of text is empty. Returns a boolean value (true or false).")}},getRequiredValueInputs:function(){return{VALUE:i.cM}}},Blockly.JavaScript.text_isEmpty=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''";return[-1!==e.workspace.getAllVariables().findIndex((function(e){return e.name===t}))?"!".concat(t," || !").concat(t,".length"):"!".concat(t,".length"),Blockly.JavaScript.ORDER_LOGICAL_NOT]},Blockly.Blocks.text_indexOf={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("in text {{ input_text1 }} find {{ first_or_last }} occurence of text {{ input_text2 }}",{input_text1:"%1",first_or_last:"%2",input_text2:"%3"}),args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"END",options:[[(0,r.localize)("first"),"FIRST"],[(0,r.localize)("last"),"LAST"]]},{type:"input_value",name:"FIND"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Search for a given string"),cateogry:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Search for string"),description:(0,r.localize)("Searches through a string of text for a specific occurrence of a given character or word, and returns the position.")}},getRequiredValueInputs:function(){return{VALUE:i.cM,FIND:i.cM}}},Blockly.JavaScript.text_indexOf=function(e){var t="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",n=Blockly.JavaScript.valueToCode(e,"FIND",Blockly.JavaScript.ORDER_NONE)||"''",r=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''",o="".concat(r,".").concat(t,"(").concat(n,")");return e.workspace.options.oneBasedIndex?["".concat(o," + 1"),Blockly.JavaScript.ORDER_ADDITION]:[o,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_charAt={init:function(){var e=this;this.jsonInit(this.definition()),this.getField("WHERE").setValidator((function(t){var n=["FROM_START","FROM_END"].includes(t);if(n!==e.isAt)return e.updateAt(n),e.setFieldValue(t,"WHERE"),null})),this.updateAt(!0)},definition:function(){return{message0:(0,r.localize)("in text %1 get %2"),args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"WHERE",options:[[(0,r.localize)("letter #"),"FROM_START"],[(0,r.localize)("letter # from end"),"FROM_END"],[(0,r.localize)("first letter"),"FIRST"],[(0,r.localize)("last letter"),"LAST"],[(0,r.localize)("random letter"),"RANDOM"]]}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns a specific character from a given string"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Get character"),description:(0,r.localize)("Returns the specific character from a given string of text according to the selected option. ")}},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("at",!!this.isAt),e},domToMutation:function(e){var t="false"!==e.getAttribute("at");this.updateAt(t)},updateAt:function(e){this.removeInput("AT",!0),e&&this.appendValueInput("AT").setCheck("Number"),this.isAt=e,this.initSvg(),this.render(!1)},getRequiredValueInputs:function(){return{VALUE:i.cM,AT:i.cM}}},Blockly.JavaScript.text_charAt=function(e){var t,n=e.getFieldValue("WHERE")||"FROM_START",r="RANDOM"===n?Blockly.JavaScript.ORDER_NONE:Blockly.JavaScript.ORDER_MEMBER,o=Blockly.JavaScript.valueToCode(e,"VALUE",r)||"''";if("FROM_START"===n){var i=Blockly.JavaScript.getAdjusted(e,"AT");t="".concat(o,".charAt(").concat(i,")")}else if("FROM_END"===n){var a=Blockly.JavaScript.getAdjusted(e,"AT",1,!0);t="".concat(o,".slice(").concat(a,").charAt(0)")}else if("FIRST"===n)t="".concat(o,".charAt(0)");else if("LAST"===n)t="".concat(o,".slice(-1)");else if("RANDOM"===n){var l=Blockly.JavaScript.provideFunction_("textRandomLetter",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(text) {\n                var x = Math.floor(Math.random() * text.length);\n                return text[x];\n            }")]);t="".concat(l,"(").concat(o,")")}return[t,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[(0,r.localize)("letter #"),"FROM_START"],[(0,r.localize)("letter # from end"),"FROM_END"],[(0,r.localize)("first"),"FIRST"]],this.WHERE_OPTIONS_2=[[(0,r.localize)("letter #"),"FROM_START"],[(0,r.localize)("letter # from end"),"FROM_END"],[(0,r.localize)("last"),"LAST"]],this.jsonInit(this.definition()),this.updateAt(1,!0),this.updateAt(2,!0)},definition:function(){return{message0:(0,r.localize)("in text {{ input_text }} get substring from {{ position1 }} {{ index1 }} to {{ position2 }} {{ index2 }}",{input_text:"%1",position1:"%2",index1:"%3",position2:"%4",index2:"%5"}),args0:[{type:"input_value",name:"STRING"},{type:"field_dropdown",name:"WHERE1",options:this.WHERE_OPTIONS_1},{type:"input_dummy",name:"AT1"},{type:"field_dropdown",name:"WHERE2",options:this.WHERE_OPTIONS_2},{type:"input_dummy",name:"AT2"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Returns a specific portion of a given string of text."),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Get substring"),description:(0,r.localize)("Returns a specific portion of a given string of text.")}},mutationToDom:function(){var e=document.createElement("mutation"),t=this.getInput("AT1").type===Blockly.INPUT_VALUE,n=this.getInput("AT2").type===Blockly.INPUT_VALUE;return e.setAttribute("at1",t),e.setAttribute("at2",n),e},domToMutation:function(e){var t="true"===e.getAttribute("at1"),n="true"===e.getAttribute("at2");this.updateAt(1,t),this.updateAt(2,n)},updateAt:function(e,t){var n,r=this,o=this.getInput("AT".concat(e));o&&(o.fieldRow.some((function(e){e instanceof Blockly.FieldLabel&&(n=e.text_)})),this.removeInput("AT".concat(e)));var i=t?this.appendValueInput("AT".concat(e)).setCheck("Number"):this.appendDummyInput("AT".concat(e));n&&i.insertFieldAt(0,new Blockly.FieldLabel(n));var a=new Blockly.FieldDropdown(this["WHERE_OPTIONS_".concat(e)],(function(n){var o=["FROM_START","FROM_END"].includes(n);if(o!==t)return r.updateAt(e,o),r.setFieldValue(n,"WHERE".concat(e)),null}));this.getInput("AT".concat(e)).appendField(a,"WHERE".concat(e)),1===e&&this.moveInputBefore("AT1","AT2"),this.initSvg(),this.render(!1)},getRequiredValueInputs:function(){var e=this,t=function(t){var n;return(null===(n=e.getInput(t))||void 0===n?void 0:n.type)===Blockly.INPUT_VALUE};return _(_({STRING:i.cM},t("AT1")?{AT1:i.cM}:{}),t("AT2")?{AT2:i.cM}:{})}},Blockly.JavaScript.text_getSubstring=function(e){var t,n,r,o=Blockly.JavaScript.valueToCode(e,"STRING",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"''",i=e.getFieldValue("WHERE1"),a=e.getFieldValue("WHERE2");if("FIRST"===i&&"LAST"===a)r=o;else if(o.match(/^'?\w+'?$/)||"FROM_END"!==i&&"LAST"!==i&&"FROM_END"!==a&&"LAST"!==a){switch(i){case"FROM_START":t=Blockly.JavaScript.getAdjusted(e,"AT1");break;case"FROM_END":t=Blockly.JavaScript.getAdjusted(e,"AT1",1,!1,Blockly.JavaScript.ORDER_SUBTRACTION),t="".concat(o,".length - ").concat(t);break;case"FIRST":t="0"}switch(a){case"FROM_START":n=Blockly.JavaScript.getAdjusted(e,"AT2",1);break;case"FROM_END":n=Blockly.JavaScript.getAdjusted(e,"AT2",0,!1,Blockly.JavaScript.ORDER_SUBTRACTION),n="".concat(o,".length - ").concat(n);break;case"LAST":n="".concat(o,".length")}r="".concat(o,".slice(").concat(t,", ").concat(n,")")}else{t=Blockly.JavaScript.getAdjusted(e,"AT1"),n=Blockly.JavaScript.getAdjusted(e,"AT2");var l=function(e,t,n){return"FIRST"===t?"0":"FROM_END"===t?"".concat(e,".length - 1 - ").concat(n):"LAST"===t?"".concat(e,".length - 1"):n},c={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},s=Blockly.JavaScript.provideFunction_("subsequence".concat(c[i]).concat(c[a]),["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(\n                    sequence\n                    ").concat("FROM_END"===i||"FROM_START"===i?", at1":"","\n                    ").concat("FROM_END"===a||"FROM_START"===a?", at2":"","\n                ) {\n                    var start = ").concat(l("sequence",i,"at1"),";\n                    var end   = ").concat(l("sequence",a,"at2")," + 1;\n                    \n                    return sequence.slice(start, end);\n                }")]);r="".concat(s,"(\n            ").concat(o,"\n            ").concat("FROM_END"===i||"FROM_START"===i?", ".concat(t):"","\n            ").concat("FROM_END"===a||"FROM_START"===a?", ".concat(n):"","\n        )")}return[r,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_changeCase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("Transform {{ input_text }} to {{ transform_type }}",{input_text:"%1",transform_type:"%2"}),args0:[{type:"input_value",name:"TEXT"},{type:"field_dropdown",name:"CASE",options:[[(0,r.localize)("UPPER CASE"),"UPPERCASE"],[(0,r.localize)("lower case"),"LOWERCASE"],[(0,r.localize)("Title Case"),"TITLECASE"]]}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Changes text case accordingly"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Change text case"),description:(0,r.localize)("Changes the capitalisation of a string of text to Upper case, Lower case, Title case.")}},getRequiredValueInputs:function(){return{TEXT:i.cM}}},Blockly.JavaScript.text_changeCase=function(e){var t,n={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")],r=n?Blockly.JavaScript.ORDER_MEMBER:Blockly.JavaScript.ORDER_NONE,o=Blockly.JavaScript.valueToCode(e,"TEXT",r)||"''";if(n)t="".concat(o).concat(n);else{var i=Blockly.JavaScript.provideFunction_("textToTitleCase",["function ".concat(Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,"(str) {\n                return str.toLowerCase().split(' ').map(function(word) {\n                    return word.replace(word[0], word[0].toUpperCase());\n                }).join(' ');\n            }")]);t="".concat(i,"(").concat(o,")")}return[t,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_trim={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("trim spaces from {{ side }} of {{ input_text }}",{side:"%1",input_text:"%2"}),args0:[{type:"field_dropdown",name:"MODE",options:[[(0,r.localize)("both sides"),"BOTH"],[(0,r.localize)("left side"),"LEFT"],[(0,r.localize)("right side"),"RIGHT"]]},{type:"input_value",name:"TEXT"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:(0,r.localize)("Trims spaces"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Trim spaces"),description:(0,r.localize)("Trims the spaces within a given string or text.")}},getRequiredValueInputs:function(){return{TEXT:i.cM}}},Blockly.JavaScript.text_trim=function(e){var t={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")],n=Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''";return["".concat(n).concat(t),Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_print={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:(0,r.localize)("print {{ input_text }}",{input_text:"%1"}),args0:[{type:"input_value",name:"TEXT"}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:(0,r.localize)("Displays a dialog window with a message"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Print"),description:(0,r.localize)('This block displays a dialog box with a customised message. When the dialog box is displayed, your strategy is paused and will only resume after you click "OK".')}},getRequiredValueInputs:function(){return{TEXT:i.cM}}},Blockly.JavaScript.text_print=function(e){var t=Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''";return"window.alert(".concat(t,");\n")},Blockly.Blocks.text_prompt_ext={init:function(){var e=this;this.jsonInit(this.definition()),this.getField("TYPE").setValidator((function(t){"TEXT"===t?e.setOutput(!0,"String"):"NUMBER"===t&&e.setOutput(!0,"Number"),e.initSvg(),e.render(!1)}))},definition:function(){return{message0:(0,r.localize)("prompt for {{ string_or_number }} with message {{ input_text }}",{string_or_number:"%1",input_text:"%2"}),args0:[{type:"field_dropdown",name:"TYPE",options:[[(0,r.localize)("string"),"TEXT"],[(0,r.localize)("number"),"NUMBER"]]},{type:"input_value",name:"TEXT"}],output:"function"==typeof this.getFieldValue&&"TEXT"===this.getFieldValue("TYPE")?"String":"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,tooltip:(0,r.localize)("Request an input"),category:Blockly.Categories.Text}},meta:function(){return{display_name:(0,r.localize)("Request an input"),description:(0,r.localize)('This block displays a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number and can be assigned to a variable. When the dialog box is displayed, your strategy is paused and will only resume after you enter a response and click "OK".')}},getRequiredValueInputs:function(){return{TEXT:i.cM}}},Blockly.JavaScript.text_prompt_ext=function(e){var t;return t=e.getField("TEXT")?Blockly.JavaScript.quote_(e.getFieldValue("TEXT")):Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''",["NUMBER"===e.getFieldValue("TYPE")?"parseFloat(window.prompt(".concat(t,"))"):"window.prompt(".concat(t,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]}},27675:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(70259),o=n(99368);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(d,e);var t,n,c=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=l(t);if(n){var o=l(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function d(e){var t;return u(this,d),(t=c.call(this)).is_mobile=e.is_mobile||!1,t.is_dark_mode_on=e.is_dark_mode_on||!1,t.client=e.client,t.dashboard=e.dashboard,t.flyout=e.flyout,t.toolbar=e.toolbar,t.toolbox=e.toolbox,t.save_modal=e.save_modal,t.load_modal=e.load_modal,t.setContractUpdateConfig=e.setContractUpdateConfig,t.toggleStrategyModal=e.toggleStrategyModal,t.handleFileChange=e.handleFileChange,t.setLoading=e.setLoading,(0,r.reaction)((function(){return t.client.loginid}),(function(){return o.D.createNewInstance(t.client.loginid)})),t}return s(d,null,[{key:"setInstance",value:function(e){return this.singleton=new d(e),this.instance}},{key:"instance",get:function(){return this.singleton}}]),d}(s((function e(){u(this,e),this.handleFileChange=function(){throw Error("handleFileChange has not been implemented.")},this.toggleStrategyModal=function(){throw Error("handleFileChange has not been implemented.")}})));d.singleton=null;const p=d},92410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>yn});var r=n(74353),o=n(62893),i=n(99368),a=n(8399),l=n(55770),c=n(66650),s=n.n(c),u=n(46670),d=n(92052),p=n(64894),f=n(49568);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){h=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new O(o||[]);return r(a,"_invoke",{value:w(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function y(){}var v={};c(v,i,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(x([])));g&&g!==t&&n.call(g,i)&&(v=g);var b=y.prototype=p.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==m(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:f,configurable:!0}),f.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(b),c(b,l,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){g(i,r,o,a,l,"next",e)}function l(e){g(i,r,o,a,l,"throw",e)}a(void 0)}))}}function k(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}function E(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){return{open:+e.open,high:+e.high,low:+e.low,close:+e.close,epoch:+(e.open_time||e.epoch)}},T=function(e){return e?"candles":"ticks"},B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.forget=function(e){return new Promise((function(t,n){e?i.D.api.forget(e).then((function(){t()})).catch(n):t()}))},this.ticks=new u.Map,this.candles=new u.Map,this.tickListeners=new u.Map,this.ohlcListeners=new u.Map,this.subscriptions=new u.Map,this.ticks_history_promise=null,this.active_symbols_promise=null,this.candles_promise=null,this.observe()}var t,n,r,o,a;return t=e,n=[{key:"requestPipSizes",value:function(){var e=this;return this.pipSizes?Promise.resolve(this.pipSizes):(this.active_symbols_promise||(this.active_symbols_promise=new Promise((function(t){e.pipSizes=i.D.pip_sizes,t(e.pipSizes)}))),this.active_symbols_promise)}},{key:"request",value:(a=b(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var o=t.symbol,i=t.granularity,a=T(i);"ticks"===a&&n.ticks.has(o)&&e(n.ticks.get(o)),"candles"===a&&n.candles.hasIn([o,Number(i)])&&e(n.candles.getIn([o,Number(i)])),n.requestStream(v(v({},t),{},{style:a})).then((function(t){e(t)})).catch((function(e){r(e)}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"monitor",value:function(e){var t=this;return new Promise((function(n,r){var o=e.symbol,a=e.granularity,l=e.callback,c=T(a),s=(0,p.Fs)();t.request(e).then((function(){"ticks"===c?(t.tickListeners=t.tickListeners.setIn([o,s],l),f.P.emit("bot.bot_ready"),i.D.toggleRunButton(!1)):t.ohlcListeners=t.ohlcListeners.setIn([o,Number(a),s],l),n(s)})).catch((function(e){f.P.emit("Error",e),t.ticks_history_promise=null,i.D.toggleRunButton(!1),r(e)}))}))}},{key:"stopMonitor",value:(o=b(h().mark((function e(t){var n,r,o,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.symbol,r=t.granularity,o=t.key,"ticks"===(i=T(r))&&this.tickListeners.hasIn([n,o])&&(this.tickListeners=this.tickListeners.deleteIn([n,o])),"candles"===i&&this.ohlcListeners.hasIn([n,Number(r),o])&&(this.ohlcListeners=this.ohlcListeners.deleteIn([n,Number(r),o])),e.next=6,this.unsubscribeIfEmptyListeners(t);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"unsubscribeIfEmptyListeners",value:(r=b(h().mark((function e(t){var n,r,o,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.symbol,r=t.granularity,o=!1,(i=this.tickListeners.get(n))&&!i.size&&(this.tickListeners=this.tickListeners.delete(n),this.ticks=this.ticks.delete(n),o=!0),(a=this.ohlcListeners.getIn([n,Number(r)]))&&!a.size&&(this.ohlcListeners=this.ohlcListeners.deleteIn([n,Number(r)]),this.candles=this.candles.deleteIn([n,Number(r)]),o=!0),!o){e.next=9;break}return e.next=9,this.unsubscribeAllAndSubscribeListeners(n);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"unsubscribeAllAndSubscribeListeners",value:function(e){var t=this.subscriptions.getIn(["ohlc",e]),n=E(t?Array.from(t.values()):[]);Promise.all(n.map((function(e){return(0,p.l6)((function(){return i.D.api.forget(e)}))}))),this.subscriptions=new u.Map}},{key:"updateTicksAndCallListeners",value:function(e,t){var n=this;if(this.ticks.get(e)!==t){this.ticks=this.ticks.set(e,t);var r=this.tickListeners.get(e);r&&r.forEach((function(t){return t(n.ticks.get(e))}))}}},{key:"updateCandlesAndCallListeners",value:function(e,t){var n=this;if(this.ticks.getIn(e)!==t){this.candles=this.candles.setIn(e,t);var r=this.ohlcListeners.getIn(e);r&&r.forEach((function(t){return t(n.candles.getIn(e))}))}}},{key:"observe",value:function(){var e=this;if(i.D.api){var t=i.D.api.onMessage().subscribe((function(t){var n,r,o=t.data;if("tick"===o.msg_type){var i=o.tick,a=i.symbol,l=i.id;e.ticks.has(a)&&(e.subscriptions=e.subscriptions.setIn(["tick",a],l),e.updateTicksAndCallListeners(a,(n=e.ticks.get(a),r=function(e){return{epoch:+e.epoch,quote:+e.quote}}(i),(0,d.CT)(n).epoch>=r.epoch?n:[].concat(E(n.slice(1)),[r]))))}if("ohlc"===o.msg_type){var c=o.ohlc,s=c.symbol,u=c.granularity,p=c.id;if(e.candles.hasIn([s,Number(u)])){e.subscriptions=e.subscriptions.setIn(["ohlc",s,Number(u)],p);var f=[s,Number(u)];e.updateCandlesAndCallListeners(f,function(e,t){var n=(0,d.CT)(e);if(n.open===t.open&&n.high===t.high&&n.low===t.low&&n.close===t.close&&n.epoch===t.epoch||n.epoch>t.epoch)return e;var r=n.epoch===t.epoch?e.slice(0,-1):e.slice(1);return[].concat(E(r),[t])}(e.candles.getIn(f),S(c)))}}}));i.D.pushSubscription(t)}}},{key:"requestStream",value:function(e){var t,n=this,r=e.style,o=JSON.stringify(e);return"ticks"===r?((null===(t=this.ticks_history_promise)||void 0===t?void 0:t.stringified_options)!==o&&(this.ticks_history_promise={promise:this.requestPipSizes().then((function(){return n.requestTicks(e)})),stringified_options:o}),this.ticks_history_promise.promise):"candles"===r?(this.candles_promise&&this.candles_promise.stringified_options===o||(this.candles_promise={promise:this.requestPipSizes().then((function(){return n.requestTicks(e)})),stringified_options:o}),this.candles_promise.promise):[]}},{key:"requestTicks",value:function(e){var t=this,n=e.symbol,r=e.granularity,o=e.style,a={ticks_history:n,subscribe:1,end:"latest",count:1e3,granularity:r?Number(r):void 0,style:o};return new Promise((function(e,l){i.D.api||e([]),(0,p.l6)((function(){return i.D.api.send(a)}),[],i.D).then((function(i){if("ticks"===o){var a=(0,d.Yp)(i.history);t.updateTicksAndCallListeners(n,a),e(a)}else{var l=function(e){return e.map((function(e){return S(e)}))}(i.candles);t.updateCandlesAndCallListeners([n,Number(r)],l),e(l)}})).catch(l)}))}},{key:"unsubscribeFromTicksService",value:function(){var e=this;return new Promise((function(t,n){if(e.ticks_history_promise){var r=e.ticks_history_promise.stringified_options,o=JSON.parse(r).symbol,i=void 0===o?"":o;i?e.forget(e.subscriptions.getIn(["tick",i])).then((function(e){t(e)})).catch(n):t()}if(e.ticks_history_promise=null,e.candles_promise){var a=e.candles_promise.stringified_options,l=JSON.parse(a).symbol,c=void 0===l?"":l;c?e.forget(e.subscriptions.getIn(["candle",c])).then((function(e){t(e)})).catch(n):t()}e.ticks_history_promise||e.candles_promise||t()}))}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),O=function(){return{observer:new f.Z,ticksService:new B,stopped:!1}},x=n(92273),A=n(79305);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=function(e){return Number.isFinite(e)&&e>0},L=function(e){return I(e)&&Number.isInteger(e)},N=function(e){return e instanceof Object&&["open","high","low","close"].every((function(t){return I(e[t])}))&&L(e.epoch)},R=function(e){if(!N(e))throw(0,A.T)("CandleExpected",(0,x.localize)("Given candle is not valid"));return e},D=function(e,t){return e.map((function(e){return t?e[t]:e}))},P=function(e,t,n){return D(e.slice(t>e.length?0:e.length-t,e.length),n)},z=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},j=function(e,t){var n=t.periods,r=t.field;if(e.length<n)throw new Error("Periods longer than data length");return function(e){return e.reduce((function(e,t){return e+t}),0)}(P(e,n,r))/n},M=function(e,t){var n=t.periods,r=t.pipSize,o=void 0===r?2:r;return(0,l.sequence)(e.length-n+1).map((function(r,i){return+j(e.slice(i,i+n),t).toFixed(o)}))},F=function(e,t){var n=t.periods,r=void 0===n?20:n,o=t.field,i=t.stdDevUp,a=void 0===i?2:i,l=t.stdDevDown,c=void 0===l?2:l,s=t.pipSize,u=void 0===s?2:s,d=P(e,r,o),p=j(d,{periods:r}),f=function(e){var t=z(e),n=e.map((function(e){return Math.pow(e-t,2)})),r=z(n);return Math.sqrt(r)}(d),m=p+f*a,h=p-f*c;return[+p.toFixed(u),+m.toFixed(u),+h.toFixed(u)]},U=function(e,t){var n=t.periods;return(0,l.sequence)(e.length-n+1).map((function(r,o){return F(e.slice(o,o+n),t)}))},V=function(e,t,n){var r=t.periods,o=t.field,i=t.pipSize,a=void 0===i?2:i,l=2/(r+1),c=D(e,o);if(n)return(c[0]-n)*l+n;if(e.length<r)throw new Error("Periods longer than data length");var s=z(D(e.slice(0,r),o));return+c.slice(r).reduce((function(e,t){return(t-e)*l+e}),s).toFixed(a)},G=function(e,t){var n=t.periods,r=V(e.slice(0,n),t);return e.slice(n-1).map((function(e,n){return n?r=V([e],t,r):r}))};function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e,t){var n=[];return n.length=t-e.length,n.fill(0),[].concat(n,function(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))},W=function(e,t){var n=t.field,r=t.fastEmaPeriod,o=void 0===r?12:r,i=t.slowEmaPeriod,a=void 0===i?26:i,l=t.signalEmaPeriod,c=void 0===l?9:l,s=t.pipSize,u=void 0===s?2:s,d=D(e,n),p=d.length,f=J(G(d,{periods:o,pipSize:20,field:n}),p),m=J(G(d,{periods:a,pipSize:20,field:n}),p),h=J(m.map((function(e,t){return+(f[t]-e).toFixed(u)})),p),y=J(G(h.slice(a-1),{periods:c,pipSize:20,field:n}),p);return h.map((function(e,t){return[+(e-y[t]).toFixed(u),e,+y[t].toFixed(u)]})).slice(a+c-2)},Y=function(e,t){return t>e?t-e:0},q=function(e,t){return t<e?e-t:0},K=function(e,t,n){var r;return e.reduce((function(e,n,o){1===o&&(r=e);var i=t(r,n);return r=n,i+(1===o?0:e)}))/n},X=function(e,t,n,r){var o;return 1===e.length?r:e.reduce((function(e,i,a){1===a&&(o=e);var l=t(o,i);return o=i,((1===a?r:e)*(n-1)+l)/n}))},Z=function(e,t,n){var r=t.periods,o=t.field;if(e.length<r)throw new Error("Periods longer than data length");if(e.length===r)return 0;var i,a,l,c=D(e.slice(0,r+1),o);n&&"gain"in n?(i=D(e.slice(-2),o),a=n.gain,l=n.loss):(i=D(e.slice(r,e.length),o),a=K(c,Y,r),l=K(c,q,r));var s=X(i,Y,r,a),u=X(i,q,r,l);return n&&(n.gain=s,n.loss=u),0===s?0:0===u?100:100-100/(1+s/u)},Q=function(e,t){var n=t.periods,r=t.pipSize,o=void 0===r?2:r,i={};return(0,l.sequence)(e.length-n).map((function(r,a){return+Z(e.slice(0,a+n+1),t,i).toFixed(o)}))};function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ne(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==$(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===$(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e,t,n,r){for(var o=n.getPipSize(),i=arguments.length,a=new Array(i>4?i-4:0),l=4;l<i;l++)a[l-4]=arguments[l];return e.apply(void 0,[t,te({pipSize:o},r)].concat(a))},oe=n(10793);function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ie(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ie(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const se=function(e){return{getLastTick:function(){return e.getLastTick.apply(e,arguments)},getLastDigit:function(){return e.getLastDigit.apply(e,arguments)},getTicks:function(){return e.getTicks.apply(e,arguments)},checkDirection:function(){return e.checkDirection.apply(e,arguments)},getOhlcFromEnd:function(){return e.getOhlcFromEnd.apply(e,arguments)},getOhlc:function(){return e.getOhlc.apply(e,arguments)},getLastDigitList:function(){return e.getLastDigitList.apply(e,arguments)}}};var ue=function(e,t){return t.data.proposals.find((function(n){return n.contract_type===e&&n.purchase_reference===t.getPurchaseReference()}))},de=n(69394),pe=n(43292),fe=n(27675);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}var ve="",_e="BEFORE_PURCHASE",ge="DURING_PURCHASE",be="PROPOSALS_READY",ke="CLEAR_PROPOSALS",Ee="PURCHASE_SUCCESSFUL",we="OPEN_CONTRACT",Se="SELL",Te="START",Be="STOP",Oe="NEW_TICK";function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==xe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===xe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=function(e){var t=e.dispatch,n=e.getState,r=e.data,o=e.scope;n().scope===o&&t(r)},Ne=function(){return{type:be}},Re=function(e){(0,e.getState)().proposalsReady&&function(e){Le(Ce(Ce({},e),{},{scope:_e}))}(e),Le(Ce(Ce({},e),{},{scope:_e}))};function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e,t,n){return(t=je(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e){var t=function(e,t){if("object"!==De(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===De(t)?t:String(t)}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fe(e)}function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return(t=Je(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e){var t=function(e,t){if("object"!==Ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ue(t)?t:String(t)}function We(e,t){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},We(e,t)}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}var qe=n(77794);function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function Xe(e,t){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xe(e,t)}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}var Qe,$e=0;function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return(t=ot(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e){var t=function(e,t){if("object"!==et(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===et(t)?t:String(t)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==lt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===lt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt={scope:Be,proposalsReady:!1};const pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return{scope:_e,proposalsReady:e.proposalsReady};case be:return st(st({},e),{},{proposalsReady:!0});case ke:return st(st({},e),{},{proposalsReady:!1});case Ee:return{scope:ge,openContract:!1,proposalsReady:e.proposalsReady};case we:return{scope:ge,openContract:!0,proposalsReady:e.proposalsReady};case Se:return{scope:Be,proposalsReady:e.proposalsReady};case Oe:return st(st({},e),{},{newTick:t.payload});default:return e}};function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function mt(){mt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==ft(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function ht(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function yt(e,t){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yt(e,t)}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}var _t;function gt(e){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(e)}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){Et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(e,t,n){return(t=wt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){var t=function(e,t){if("object"!==gt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===gt(t)?t:String(t)}function St(e,t){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},St(e,t)}function Tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bt(e)}var Ot={totalProfit:0,totalWins:0,totalLosses:0,totalStake:0,totalPayout:0,totalRuns:0},xt={};function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e,t,n){return(t=zt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zt(r.key),r)}}function Pt(e,t,n){return t&&Dt(e.prototype,t),n&&Dt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zt(e){var t=function(e,t){if("object"!==At(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===At(t)?t:String(t)}function jt(e,t){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jt(e,t)}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}var Ft,Ut=function(e){var t=e.store,n=e.stopScope,r=e.passScope,o=e.passFlag;return t.getState().scope===n?Promise.resolve(!1):new Promise((function(e){var i=t.subscribe((function(){var a=t.getState();a.newTick!==Ft&&(Ft=a.newTick,a.scope===r&&a[o]&&(i(),e(!0)),a.scope===n&&(i(),e(!1)))}))}))},Vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Mt(t);if(n){var o=Mt(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===At(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function o(e){var t;return Rt(this,o),(t=r.call(this)).observer=e.observer,t.$scope=e,t.observe(),t.data={contract:{},proposals:[]},t.store=(0,de.MT)(pt,(0,de.md)(pe.Z)),t}return Pt(o,[{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=(r=function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return C(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],o=n[1];if(!r)throw(0,A.T)("LoginError",(0,x.localize)("Please login"));return function(e){var t=e.symbol,n=e.contractTypes;if(!t)throw(0,A.T)("OptionError",(0,x.localize)("Underlying market is not selected"));if(!n[0])throw(0,A.T)("OptionError",(0,x.localize)("Contract type is not selected"))}(o),e}(t),2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(r)||function(e,t){if(e){if("string"==typeof e)return Nt(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,2):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],l=a.symbol;this.initArgs=t,this.options=a,this.startPromise=this.loginAndGetBalance(i),this.checkTicksPromiseExists()||this.watchTicks(l)}},{key:"start",value:function(e){if(!this.options)throw(0,A.T)("NotInitialized",(0,x.localize)("Bot.init is not called"));f.P.emit("bot.running");var t=this.validateTradeOptions(e);this.tradeOptions=It(It({},t),{},{symbol:this.options.symbol}),this.store.dispatch((function(e,t){return Le({dispatch:e,getState:t,data:{type:Te},scope:Be})})),this.checkLimits(t),this.makeDirectPurchaseDecision()}},{key:"loginAndGetBalance",value:function(e){var t=this;return this.token===e?Promise.resolve():(this.accountInfo=i.D.account_info,this.token=i.D.token,new Promise((function(e){var n=i.D.api.onMessage().subscribe((function(n){var r=n.data;"transaction"===r.msg_type&&"sell"===r.transaction.action&&(t.transaction_recovery_timeout=setTimeout((function(){var e=t.data.contract,n=e.contract_id===r.transaction.contract_id,o="open"===e.status;n&&o&&(0,p.l6)((function(){i.D.api.send({proposal_open_contract:1,contract_id:e.contract_id})}),["PriceMoved"])}),1500)),e()}));i.D.pushSubscription(n)})))}},{key:"observe",value:function(){this.observeOpenContract(),this.observeBalance(),this.observeProposals()}},{key:"watch",value:function(e){return"before"===e?(t=this.store,Ut({store:t,stopScope:ge,passScope:_e,passFlag:"proposalsReady"})):function(e){return Ut({store:e,stopScope:Be,passScope:ge,passFlag:"openContract"})}(this.store);var t}},{key:"makeDirectPurchaseDecision",value:function(){var e=(0,p.vo)(),t=e.has_payout_block,n=e.is_basis_payout;this.is_proposal_subscription_required=t||n,this.is_proposal_subscription_required?(this.makeProposals(It(It({},this.options),this.tradeOptions)),this.checkProposalReady()):this.store.dispatch(Ne())}}]),o}(function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(c,e);var t,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(r);if(o){var n=ye(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"observeBalance",value:function(){var e=this;if(i.D.api){var t=i.D.api.onMessage().subscribe((function(t){var n=t.data;if("balance"===n.msg_type){var r=n.balance,o=r.balance,i=r.currency;ve=(0,l.getFormattedText)(o,i),e.accountInfo&&(0,oe.um)({accountID:e.accountInfo.loginid,balance:ve})}}));i.D.pushSubscription(t)}}},{key:"getBalance",value:function(e){var t=fe.Z.instance.client,n=t&&t.balance||0;return ve=(0,l.getFormattedText)(n,t.currency,!1),"STR"===e?ve:n}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==me(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===me(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(e)}(function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xe(e,t)}(l,e);var t,n,r,o,a=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ze(r);if(o){var n=Ze(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).getPurchaseReference=function(){return Qe},e.regeneratePurchaseReference=function(){Qe=(0,p.Fs)()},e}return t=l,n=[{key:"purchase",value:function(e){var t=this;if(this.store.getState().scope!==_e)return Promise.resolve();var n=function(n){var r=n.buy;(0,oe.x_)({id:"contract.purchase_received",data:r.transaction_id,buy:r}),t.contractId=r.contract_id,t.store.dispatch((function(e,t){return Re({dispatch:e,getState:t,data:{type:Ee}})})),t.is_proposal_subscription_required&&t.renewProposalsOnPurchase(),$e=0,(0,oe.cM)(qe.F$.PURCHASE,{longcode:r.longcode,transaction_id:r.transaction_id}),(0,oe.um)({accountID:t.accountInfo.loginid,totalRuns:t.updateAndReturnTotalRuns(),transaction_ids:{buy:r.transaction_id},contract_type:e,buy_price:r.buy_price})};if(this.is_proposal_subscription_required){var r=this.selectProposal(e),o=r.id,a=r.askPrice,l=function(){return i.D.api.send({buy:o,price:a})};return this.isSold=!1,(0,oe.x_)({id:"contract.purchase_sent",data:a}),this.options.timeMachineEnabled?(0,p.Kn)(l,(function(e,n){"DisconnectError"!==e?t.renewProposalsOnPurchase():t.clearProposals();var r=t.store.subscribe((function(){var e=t.store.getState(),o=e.scope,i=e.proposalsReady;o===_e&&i&&(n().then((function(){return t.observer.emit("REVERT","before")})),r())}))}),["PriceMoved","InvalidContractProposal"],$e++).then(n):(0,p.l6)(l).then(n)}var c=(0,p.nD)(e,this.tradeOptions),s=function(){return i.D.api.send(c)};return this.isSold=!1,(0,oe.x_)({id:"contract.purchase_sent",data:this.tradeOptions.amount}),this.options.timeMachineEnabled?(0,p.Kn)(s,(function(e,n){"DisconnectError"===e&&t.clearProposals();var r=t.store.subscribe((function(){t.store.getState().scope===_e&&(n().then((function(){return t.observer.emit("REVERT","before")})),r())}))}),["PriceMoved","InvalidContractProposal"],$e++).then(n):(0,p.l6)(s).then(n)}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==Ke(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ke(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(e)}(function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(l,e);var t,n,r,o,a=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=at(r);if(o){var n=at(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,n=[{key:"isSellAtMarketAvailable",value:function(){return this.contractId&&!this.isSold&&this.isSellAvailable&&!this.isExpired}},{key:"sellAtMarket",value:function(){var e=this;if(f.P.emit("bot.sell"),this.store.getState().scope!==ge)return Promise.resolve();if(!this.isSellAtMarketAvailable())return(0,oe.cM)(qe.F$.NOT_OFFERED),Promise.resolve();var t=1;return new Promise((function(n){var r=function(r){if(t=1,r){var o=r.sell.sold_for;(0,oe.cM)(qe.F$.SELL,{sold_for:o})}(0,oe.x_)("purchase.sold"),e.waitForAfter(),n()},o=e.contractId,a=function(){return(0,p.l6)((function(){return i.D.api.send({sell:o,price:0})})).then((function(e){(0,p.l6)((function(){return i.D.api.send({proposal_open_contract:1,contract_id:o})})).then((function(){return e}))})).catch((function(e){var t=e.error;if("InvalidOfferings"===t.code)return Promise.resolve();var n={name:t.code,message:t.message,msg_type:e.msg_type,error:nt({},t.error)};return"RateLimit"===t.code?Promise.reject(n):(0,p.l6)((function(){return i.D.api.send({proposal_open_contract:1,contract_id:o})})).then((function(e){var t=e.proposal_open_contract;return"sold"!==t.status?Promise.reject(n):Promise.resolve({sell:{sold_for:t.sell_price}})}))}))},l=["NoOpenPosition","InvalidSellContractProposal","UnrecognisedRequest"];return e.options.timeMachineEnabled?(0,p.Kn)(a,(function(t,n){return n().then((function(){return e.observer.emit("REVERT","during")}))}),l,t++).then((function(e){return r(e)})):(0,p.l6)(a,l).then((function(e){return r(e)}))}))}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ot(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(e)}(function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(c,e);var t,n,r,o,a=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fe(r);if(o){var n=Fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return t=c,n=[{key:"observeOpenContract",value:function(){var e=this;if(i.D.api){var t=i.D.api.onMessage().subscribe((function(t){var n=t.data;if("proposal_open_contract"===n.msg_type){var r=n.proposal_open_contract;if(!r||!e.expectedContractId(null==r?void 0:r.contract_id))return;e.setContractFlags(r),e.data.contract=r,(0,oe.LJ)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({accountID:i.D.account_info.loginid},r)),e.isSold?(e.contractId="",clearTimeout(e.transaction_recovery_timeout),e.updateTotals(r),(0,oe.x_)({id:"contract.sold",data:r.transaction_ids.sell,contract:r}),e.afterPromise&&e.afterPromise(),e.store.dispatch((function(e,t){return Le({dispatch:e,getState:t,data:{type:Se},scope:ge})}))):e.store.dispatch((function(e,t){t().scope===ge&&e({type:we}),Re({dispatch:e,getState:t,data:{type:we}})}))}}));i.D.pushSubscription(t)}}},{key:"waitForAfter",value:function(){var e=this;return new Promise((function(t){e.afterPromise=t}))}},{key:"setContractFlags",value:function(e){var t=e.is_expired,n=e.is_valid_to_sell,r=e.is_sold,o=e.entry_tick;this.isSold=Boolean(r),this.isSellAvailable=!this.isSold&&Boolean(n),this.isExpired=Boolean(t),this.hasEntryTick=Boolean(o)}},{key:"expectedContractId",value:function(e){return this.contractId&&e===this.contractId}},{key:"getSellPrice",value:function(){var e=this.data.contract,t=e.bid_price,n=e.buy_price,r=e.currency;return(0,l.getRoundedNumber)(Number(t)-Number(n),r)}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(e)}(function(e){return function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}(l,e);var t,n,r,o,a=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ye(r);if(o){var n=Ye(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,n=[{key:"makeProposals",value:function(e){this.isNewTradeOption(e)&&(this.regeneratePurchaseReference(),this.trade_option=e,this.proposal_templates=(0,p.pH)(e,this.getPurchaseReference()),this.renewProposalsOnPurchase())}},{key:"selectProposal",value:function(e){var t=this,n=this.data.proposals;if(0===n.length)throw Error((0,x.localize)("Proposals are not ready"));var r=n.find((function(n){if(n.contract_type===e&&n.purchase_reference===t.getPurchaseReference()){if(n.error)throw n.error;return n}return!1}));if(!r)throw new Error((0,x.localize)("Selected proposal does not exist"));return{id:r.id,askPrice:r.ask_price}}},{key:"renewProposalsOnPurchase",value:function(){this.data.proposals=[],this.store.dispatch({type:ke}),this.requestProposals()}},{key:"requestProposals",value:function(){var e=this,t=!1;Promise.all(this.proposal_templates.map((function(n){(0,p.l6)((function(){return i.D.api.send(n)})).catch((function(n){return"ContractBuyValidationError"===n.error.code?(e.data.proposals.push(Ge(Ge(Ge({},n.error.echo_req),n.echo_req.passthrough),{},{error:n})),null):(t||(t=!0,e.$scope.observer.emit("Error",n.error)),null)}))})))}},{key:"observeProposals",value:function(){var e=this;if(i.D.api){var t=i.D.api.onMessage().subscribe((function(t){if("proposal"===t.data.msg_type){var n=t.data,r=n.passthrough,o=n.proposal;o&&-1===e.data.proposals.findIndex((function(e){return e.id===o.id}))&&(e.data.proposals.push(Ge(Ge({},o),r)),e.checkProposalReady())}}));i.D.pushSubscription(t)}}},{key:"checkProposalReady",value:function(){var e=this,t=this.data.proposals;t.length>0&&this.proposal_templates&&this.proposal_templates.every((function(e){return-1!==t.findIndex((function(t){return t.purchase_reference===e.passthrough.purchase_reference&&t.contract_type===e.contract_type}))}))&&this.startPromise.then((function(){return e.store.dispatch(Ne())}))}},{key:"isNewTradeOption",value:function(e){var t=this;return this.trade_option?["amount","barrierOffset","basis","duration","duration_unit","prediction","secondBarrierOffset","symbol"].some((function(n){return t.trade_option[n]!==e[n]})):(this.trade_option=e,!0)}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Je(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(e)}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yt(e,t)}(c,e);var t,n,r,o,i,a,l=(i=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vt(i);if(a){var n=vt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l.apply(this,arguments)}return t=c,n=[{key:"watchTicks",value:(r=mt().mark((function e(t){var n,r,o,i=this;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||this.symbol===t){e.next=10;break}return this.symbol=t,n=this.$scope.ticksService,e.next=5,n.stopMonitor({symbol:t,key:_t});case 5:return r=function(e){i.is_proposal_subscription_required&&i.checkProposalReady();var t=e.slice(-1)[0].epoch;i.store.dispatch({type:Oe,payload:t})},e.next=8,n.monitor({symbol:t,callback:r});case 8:o=e.sent,_t=o;case 10:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){ht(i,n,o,a,l,"next",e)}function l(e){ht(i,n,o,a,l,"throw",e)}a(void 0)}))},function(e){return o.apply(this,arguments)})},{key:"checkTicksPromiseExists",value:function(){return this.$scope.ticksService.ticks_history_promise}},{key:"getTicks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(n){e.$scope.ticksService.request({symbol:e.symbol}).then((function(r){var o=r.map((function(n){return t?n.quote.toFixed(e.getPipSize()):n.quote}));n(o)}))}))}},{key:"getLastTick",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(r){return t.$scope.ticksService.request({symbol:t.symbol}).then((function(o){var i=e?(0,d.CT)(o):(0,d.CT)(o).quote;!e&&n&&(i=i.toFixed(t.getPipSize())),r(i)})).catch((function(e){"MarketIsClosed"===e.code&&(f.P.emit("Error",e),r(e.code))}))}))}},{key:"getLastDigit",value:function(){var e=this;return new Promise((function(t){return e.getLastTick(!1,!0).then((function(e){return t((0,p.VM)(e))}))}))}},{key:"getLastDigitList",value:function(){var e=this;return new Promise((function(t){return e.getTicks().then((function(n){return t(e.getLastDigitsFromList(n))}))}))}},{key:"getLastDigitsFromList",value:function(e){var t=this;return e.map((function(e){return(0,p.VM)(e.toFixed(t.getPipSize()))}))}},{key:"checkDirection",value:function(e){var t=this;return new Promise((function(n){return t.$scope.ticksService.request({symbol:t.symbol}).then((function(t){return n((0,p.Mg)(t)===e)}))}))}},{key:"getOhlc",value:function(e){var t=this,n=e||{},r=n.granularity,o=void 0===r?this.options.candleInterval||60:r,i=n.field;return new Promise((function(e){return t.$scope.ticksService.request({symbol:t.symbol,granularity:o}).then((function(t){return e(i?t.map((function(e){return e[i]})):t)}))}))}},{key:"getOhlcFromEnd",value:function(e){var t=this,n=(e||{}).index,r=function(e,t){if(!L(e))throw(0,A.T)("PositiveIntegerExpected",t);return e}(Number(void 0===n?1:n),(0,x.localize)("Index must be a positive integer"));return new Promise((function(n){return t.getOhlc(e).then((function(e){return n(e.slice(-r)[0])}))}))}},{key:"getPipSize",value:function(){return this.$scope.ticksService.pipSizes[this.symbol]}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==ft(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ft(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&St(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Bt(r);if(o){var n=Bt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tt(e)}(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).sessionRuns=0,e.sessionProfit=0,f.P.register("statistics.clear",e.clearStatistics.bind(Tt(e))),e}return t=a,(n=[{key:"clearStatistics",value:function(){if(this.sessionRuns=0,this.sessionProfit=0,this.accountInfo){var e=this.accountInfo.loginid;xt[e]=kt({},Ot)}}},{key:"updateTotals",value:function(e){var t=e.sell_price,n=e.buy_price,r=e.currency,o=(0,l.getRoundedNumber)(Number(t)-Number(n),r),i=o>0,a=this.getAccountStat();a.totalWins+=i?1:0,a.totalLosses+=i?0:1,this.sessionProfit=(0,l.getRoundedNumber)(Number(this.sessionProfit)+Number(o),r),a.totalProfit=(0,l.getRoundedNumber)(Number(a.totalProfit)+Number(o),r),a.totalStake=(0,l.getRoundedNumber)(Number(a.totalStake)+Number(n),r),a.totalPayout=(0,l.getRoundedNumber)(Number(a.totalPayout)+Number(t),r),(0,oe.um)({profit:o,contract:e,accountID:this.accountInfo.loginid,totalProfit:a.totalProfit,totalWins:a.totalWins,totalLosses:a.totalLosses,totalStake:a.totalStake,totalPayout:a.totalPayout}),(0,oe.cM)(i?qe.F$.PROFIT:qe.F$.LOST,{currency:r,profit:o})}},{key:"updateAndReturnTotalRuns",value:function(){return this.sessionRuns++,++this.getAccountStat().totalRuns}},{key:"getTotalRuns",value:function(){return this.getAccountStat().totalRuns}},{key:"getTotalProfit",value:function(e,t){var n=this.getAccountStat();return e&&0!==n.totalProfit?(0,l.getRoundedNumber)(+n.totalProfit,t):+n.totalProfit}},{key:"checkLimits",value:function(e){if(e.limitations){var t=e.limitations,n=t.maxLoss,r=t.maxTrades;if(n&&r){if(this.sessionRuns>=r)throw(0,A.T)("CustomLimitsReached",(0,x.localize)("Maximum number of trades reached"));if(this.sessionProfit<=-n)throw(0,A.T)("CustomLimitsReached",(0,x.localize)("Maximum loss amount reached"))}}}},{key:"validateTradeOptions",value:function(e){var t=e.take_profit,n=e.stop_loss;return t&&(e.limit_order.take_profit=t),n&&(e.limit_order.stop_loss=n),e}},{key:"getAccountStat",value:function(){var e=this.accountInfo.loginid;return e in xt||(xt[e]=kt({},Ot)),xt[e]}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wt(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Pt((function e(){Rt(this,e)}))))))))));function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Gt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Gt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(n){return setTimeout((function(){n(),setTimeout((function(){return e.emit("CONTINUE")}),0)}),1e3*t)}),(function(){}))};const qt=function(e){var t=new Vt(e),n=e.observer;return{tradeEngine:t,observer:n,getInterface:function(){return Jt(Jt(Jt({},function(e){var t=function(t){return(0,p.mh)(e.data.contract)[t]};return{init:function(){return e.init.apply(e,arguments)},start:function(){return e.start.apply(e,arguments)},stop:function(){return e.stop.apply(e,arguments)},purchase:function(t){return e.purchase(t)},getAskPrice:function(t){return Number(ue(t,e).ask_price)},getPayout:function(t){return Number(ue(t,e).payout)},getPurchaseReference:function(){return e.getPurchaseReference()},isSellAvailable:function(){return e.isSellAtMarketAvailable()},sellAtMarket:function(){return e.sellAtMarket()},getSellPrice:function(){return function(e){return e.getSellPrice()}(e)},isResult:function(e){return t(10)===e},isTradeAgain:function(e){return f.P.emit("bot.trade_again",e)},readDetails:function(e){return t(e-1)}}}(t)),function(e){return le(le(le(le({dateTimeStringToTimestamp:function(e){var t=(0,x.localize)("Invalid date/time: {{ datetime_string }}",{datetime_string:e});if("string"!=typeof e)return t;var n,r=e.replace(/[^0-9.:-\s]/g,"").replace(/\s+/g," ").trim().split(" "),o=/^[12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/;if(n=r.length>=2?o.test(r[0])&&/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])(:([0-5][0-9])?)?$/.test(r[1])?"".concat(r[0],"T").concat(r[1]):null:1===r.length&&o.test(r[0])?r[0]:null){var i=new Date(n);if(i instanceof Date&&!isNaN(i))return i.getTime()/1e3}return t},getTime:function(){return parseInt((new Date).getTime()/1e3)}},{isCandleBlack:function(e){return R(e)&&e.close<e.open},candleValues:function(e,t){return function(e){if(!(e instanceof Array&&e.every((function(e){return N(e)}))))throw(0,A.T)("CandleListExpected",(0,x.localize)("Given candle list is not valid"));return e}(e).map((function(e){return e[t]}))},candleField:function(e,t){return R(e)[t]}}),function(e){return{notify:function(e){return f.P.emit("ui.log.notify",e)},console:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.type,n=e.message;return console[t](n)})),notifyTelegram:function(e,t,n){var r="https://api.telegram.org/bot".concat(e,"/sendMessage"),o=function(){return(0,oe.h4)("warn",(0,x.localize)("The Telegram notification could not be sent"))};fetch(r,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:t,text:n})}).then((function(e){e.ok||o()})).catch(o)},getTotalRuns:function(){return e.getTotalRuns()},getBalance:function(t){return e.getBalance(t)},getTotalProfit:function(t){return e.getTotalProfit(t,e.tradeOptions.currency)}}}(e)),function(e){return{sma:function(t,n){return re(j,t,e,{periods:n})},smaa:function(t,n){return re(M,t,e,{periods:n})},ema:function(t,n){return re(V,t,e,{periods:n})},emaa:function(t,n){return re(G,t,e,{periods:n})},rsi:function(t,n){return re(Z,t,e,{periods:n})},rsia:function(t,n){return re(Q,t,e,{periods:n})},bb:function(t,n,r){return re(F,t,e,n)[r]},bba:function(t,n,r){return re(U,t,e,n).map((function(e){return e[r]}))},macda:function(t,n,r){return re(W,t,e,n).map((function(e){return e[r]}))}}}(e)),{},{highlightBlock:function(e){var t=Blockly.derivWorkspace.getBlockById(e);t&&t.highlightExecutedBlock(t)}})}(t)),{},{getTicksInterface:se(t),watch:function(){return t.watch.apply(t,arguments)},sleep:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Yt.apply(void 0,[n].concat(t))},alert:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return alert.apply(void 0,arguments)})),prompt:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return prompt.apply(void 0,arguments)})),console:{log:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,[(new Date).toLocaleTimeString()].concat(n))}}})}}};function Kt(e){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(e)}function Xt(){Xt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Kt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Zt(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Qt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Zt(i,r,o,a,l,"next",e)}function l(e){Zt(i,r,o,a,l,"throw",e)}a(void 0)}))}}function $t(e){return function(e){if(Array.isArray(e))return tn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||en(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){if(e){if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tn(e,t):void 0}}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}s().prototype.takeStateSnapshot=function(){return(0,l.cloneThorough)(this.stateStack,void 0,void 0,void 0,!0)},s().prototype.restoreStateSnapshot=function(e){this.stateStack=(0,l.cloneThorough)(e,void 0,void 0,void 0,!0),this.global=this.stateStack[0].scope.object||this.stateStack[0].scope,this.initFunc_(this,this.global)};var nn=function(e){return e&&e.tradeEngine.options},rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!qe.Jr.includes(t)&&nn(e)&&e.tradeEngine.options.shouldRestartOnError};const on=function(){var e,t=O(),n=qt(t),r={};function o(e){r.restoreStateSnapshot(e),r.paused_=!1,a()}function a(){!t.stopped&&r.run()||e(r.pseudoToNative(r.value))}function c(e,n){var r=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var l=o.pop(),c=o.slice().reverse(),s=c.findIndex((function(e){return void 0!==e})),u=s<0?[]:c.slice(s).reverse();n.apply(void 0,$t(u.map((function(t){return e.pseudoToNative(t)})))).then((function(t){l(e.nativeToPseudo(t)),a()})).catch((function(e){t.observer.emit("Error",e.error||e)}))};return Object.defineProperty(r,"length",{value:101}),e.createAsyncFunction(r)}function u(e,o){var i=n.getInterface(),a=i.getTicksInterface,l=i.alert,s=i.prompt,u=i.sleep,d=i.console,p=a;e.setProperty(o,"console",e.nativeToPseudo(d)),e.setProperty(o,"alert",e.nativeToPseudo(l)),e.setProperty(o,"prompt",e.nativeToPseudo(s)),e.setProperty(o,"getPurchaseReference",e.nativeToPseudo(i.getPurchaseReference));var f=e.nativeToPseudo(i);Object.entries(p).forEach((function(t){var n,r=(2,function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(n)||en(n,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return e.setProperty(f,o,c(e,i))})),e.setProperty(f,"start",e.nativeToPseudo((function(){var r=i.start;rn(n)&&(t.startState=e.takeStateSnapshot()),r.apply(void 0,arguments)}))),e.setProperty(f,"purchase",c(e,i.purchase)),e.setProperty(f,"sellAtMarket",c(e,i.sellAtMarket)),e.setProperty(o,"Bot",f),e.setProperty(o,"watch",c(e,(function(e){var o=n.getInterface().watch;if(function(e){return nn(e)&&e.tradeEngine.options.timeMachineEnabled}(n)){var i=r.takeStateSnapshot();"before"===e?t.beforeState=i:t.duringState=i}return o(e)}))),e.setProperty(o,"sleep",c(e,u))}function d(){return d=Qt(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){try{var o,i,a,c,s,u,d=null!==(o=f.P.getState("global_timeouts"))&&void 0!==o?o:[],m=Object.keys(d).every((function(e){return d[e].is_cancellable}));!n.tradeEngine.contractId&&m?(d.forEach((function(e){return clearTimeout(d[e])})),p().then((function(){return e()}))):!1===n.tradeEngine.isSold&&!t.is_error_triggered&&(0,l.isMultiplierContract)(null!==(i=null===(a=n)||void 0===a||null===(c=a.tradeEngine)||void 0===c||null===(s=c.data)||void 0===s||null===(u=s.contract)||void 0===u?void 0:u.contract_type)&&void 0!==i?i:"")?f.P.register("contract.status",function(){var t=Qt(Xt().mark((function t(n){return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"contract.sold"===n.id&&p().then((function(){return e()}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):p().then((function(){return e()}))}catch(e){r(e)}})));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(){return m.apply(this,arguments)}function m(){return m=Qt(Xt().mark((function e(){return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{t.stopped=!0,t.is_error_triggered=!1,f.P.emit("bot.stop");var r=t.ticksService;i.D.clearSubscriptions(),r.unsubscribeFromTicksService().then((function(){e()}))}catch(e){n(e)}})));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(){return(h=Qt(Xt().mark((function e(){var n;return Xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ticksService,e.abrupt("return",new Promise((function(e,t){try{n.unsubscribeFromTicksService().then((function(){e()}))}catch(e){t(e)}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.observer.register("REVERT",(function(e){return o("before"===e?t.beforeState:t.duringState)})),{stop:function(){return d.apply(this,arguments)},run:function(i){return new Promise((function(l,c){t.observer.register("Error",(function i(a){var l;if(!t.stopped)if("InvalidToken"!==a.code){if(function(e){return!(!["SellNotAvailableCustom","ContractCreationFailure","InvalidtoBuy"].includes(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")||!nn(e))}(n,null==a?void 0:a.code))return f.P.emit("ui.log.error",a.message),void f.P.emit("bot.click_stop");if(t.is_error_triggered=!0,rn(n,a.code)&&function(e){return nn(e)&&e.tradeEngine.tradeOptions}(n)){f.P.emit("Error",a);var s=n.tradeEngine,u=s.initArgs,d=s.tradeOptions;p(),t=O(),n=qt(t),r={},e=function(){},t.observer.register("Error",i),(l=n.tradeEngine).init.apply(l,$t(u)),n.tradeEngine.start(d),o(t.startState)}else c(a)}else f.P.emit("client.invalid_token")})),r=new(s())(i,u),e=l,a()}))},terminateSession:p,bot:n,unsubscribeFromTicksService:function(){return h.apply(this,arguments)}}};var an=n(20437),ln=n(51609);const cn='<xml xmlns="http://www.w3.org/1999/xhtml" collection="false" is_dbot="true">\n  <variables></variables>\n  <block type="trade_definition" x="0" y="0">\n    <statement name="TRADE_OPTIONS">\n      <block type="trade_definition_market" deletable="false" movable="false">\n        <field name="MARKET_LIST"></field>\n        <field name="SUBMARKET_LIST"></field>\n        <field name="SYMBOL_LIST"></field>\n        <next>\n          <block type="trade_definition_tradetype" deletable="false" movable="false">\n            <field name="TRADETYPECAT_LIST"></field>\n            <field name="TRADETYPE_LIST"></field>\n            <next>\n              <block type="trade_definition_contracttype" deletable="false" movable="false">\n                <field name="TYPE_LIST"></field>\n                <next>\n                  <block type="trade_definition_candleinterval" deletable="false" movable="false">\n                    <field name="CANDLEINTERVAL_LIST">60</field>\n                    <next>\n                      <block type="trade_definition_restartbuysell" deletable="false" movable="false">\n                        <field name="TIME_MACHINE_ENABLED">FALSE</field>\n                        <next>\n                          <block type="trade_definition_restartonerror" deletable="false" movable="false">\n                            <field name="RESTARTONERROR">TRUE</field>\n                          </block>\n                        </next>\n                      </block>\n                    </next>\n                  </block>\n                </next>\n              </block>\n            </next>\n          </block>\n        </next>\n      </block>\n    </statement>\n    <statement name="SUBMARKET">\n      <block type="trade_definition_tradeoptions">\n        <mutation has_first_barrier="false" has_second_barrier="false" has_prediction="false"></mutation>\n        <field name="DURATIONTYPE_LIST"></field>\n        <field name="CURRENCY_LIST">USD</field>\n        <value name="DURATION">\n          <shadow type="math_number_positive">\n            <field name="NUM">5</field>\n          </shadow>\n        </value>\n        <value name="AMOUNT">\n          <shadow type="math_number_positive">\n            <field name="NUM">1</field>\n          </shadow>\n        </value>\n        <field name="AMOUNT_LIMITS"></field>\n      </block>\n    </statement>\n  </block>\n  <block type="during_purchase" x="720" y="0">\n    <statement name="DURING_PURCHASE_STACK">\n      <block type="controls_if">\n        <value name="IF0">\n          <block type="check_sell"></block>\n        </value>\n      </block>\n    </statement>\n  </block>\n  <block type="after_purchase" x="720" y="248">\n    <statement name="AFTERPURCHASE_STACK">\n      <block type="trade_again"></block>\n    </statement>\n  </block>\n  <block type="before_purchase" x="0" y="576">\n    <statement name="BEFOREPURCHASE_STACK">\n      <block type="purchase">\n        <field name="PURCHASE_LIST"></field>\n      </block>\n    </statement>\n  </block>\n</xml>';var sn=n(81937);function un(e){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(e)}function dn(){dn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==un(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function pn(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function fn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){pn(i,r,o,a,l,"next",e)}function l(e){pn(i,r,o,a,l,"throw",e)}a(void 0)}))}}function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==un(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===un(o)?o:String(o)),r)}var o}n(72002);var hn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.terminateConnection=function(){i.D.terminate()},this.interpreter=null,this.workspace=null,this.before_run_funcs=[],this.symbol=null,this.is_bot_running=!1}var t,l,c,s,u,d,p;return t=e,l=[{key:"initWorkspace",value:(p=fn(dn().mark((function t(r,l,c,s){var u,d,p=this;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,ln.WN)();case 2:return u=t.sent,i.D.init(),this.interpreter=on(),d=this,Blockly.Blocks.trade_definition_tradetype.onchange=function(e){var t=this;if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){this.enforceLimitations();var n=e.name;if(e.type===Blockly.Events.BLOCK_CHANGE&&("SYMBOL_LIST"===n||"TRADETYPECAT_LIST"===n)){var r=a.Z.instance.contracts_for,o=this.getTopParent().getChildByType("trade_definition_market"),i=o.getFieldValue("MARKET_LIST"),l=o.getFieldValue("SUBMARKET_LIST"),c=o.getFieldValue("SYMBOL_LIST"),s=this.getFieldValue("TRADETYPECAT_LIST"),u=this.getFieldValue("TRADETYPE_LIST");if("SYMBOL_LIST"===n){if(r.getTradeTypeCategories(i,l,c).then((function(n){var r=t.getField("TRADETYPECAT_LIST");r&&r.updateOptions(n,{default_value:s,should_pretend_empty:!0,event_group:e.group})})),d.symbol=c,!d.is_bot_running&&d.interpreter&&!this.workspace.options.readOnly&&c!==d.interpreter.bot.tradeEngine.symbol){var p=document.querySelector("#db-animation__run-button");p&&(p.disabled=!0),d.interpreter.unsubscribeFromTicksService().then(fn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.interpreter.bot.tradeEngine.watchTicks(c);case 2:case"end":return e.stop()}}),e)}))))}}else"TRADETYPECAT_LIST"===n&&e.blockId===this.id&&r.getTradeTypes(i,l,c,s).then((function(n){t.getField("TRADETYPE_LIST").updateOptions(n,{default_value:u,should_pretend_empty:!0,event_group:e.group})}))}}},t.abrupt("return",new Promise((function(t,i){n.p=r,a.Z.setInstance(c),fe.Z.setInstance(l);var d=window.innerWidth;try{var f,m=.8,h=fe.Z.instance.handleFileChange;d<1640&&(m=s?.7:(null===(f=document.getElementById("scratch_div"))||void 0===f?void 0:f.offsetWidth)/d/1.5);var y=document.getElementById("scratch_div");if(!y)return;p.workspace=Blockly.inject(y,{media:"".concat(n.p,"media/"),trashcan:!s,zoom:{wheel:!0,startScale:m},scrollbars:!0}),p.workspace.cached_xml={main:cn},p.workspace.addChangeListener(p.valueInputLimitationsListener.bind(p)),p.workspace.addChangeListener((function(e){return(0,sn.P_)(p.workspace,e)})),p.workspace.addChangeListener((function(e){return p.workspace.dispatchBlockEventEffects(e)})),p.workspace.addChangeListener((function(e){"endDrag"!==e.type||s||(0,sn.Y2)()})),Blockly.derivWorkspace=p.workspace,p.addBeforeRunFunction(p.unselectBlocks.bind(p)),p.addBeforeRunFunction(p.disableStrayBlocks.bind(p)),p.addBeforeRunFunction(p.checkForErroredBlocks.bind(p)),p.addBeforeRunFunction(p.checkForRequiredBlocks.bind(p)),p.workspace.current_strategy_id=Blockly.utils.genUid(),Blockly.derivWorkspace.strategy_to_load=cn,Blockly.mainWorkspace.strategy_to_load=cn;var v=o.v.default_file_name;if(u&&u.length){var _=u[0];Blockly.derivWorkspace.strategy_to_load=_.xml,Blockly.mainWorkspace.strategy_to_load=_.xml,v=_.name,Blockly.derivWorkspace.current_strategy_id=_.id,Blockly.mainWorkspace.current_strategy_id=_.id}var g="dbot-load".concat(Date.now());Blockly.Events.setGroup(g),Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(Blockly.derivWorkspace.strategy_to_load),p.workspace),fe.Z.instance.save_modal.updateBotName(v),p.workspace.cleanUp(),p.workspace.clearUndo(),window.dispatchEvent(new Event("resize")),window.addEventListener("dragover",e.handleDragOver),window.addEventListener("drop",(function(t){return e.handleDropOver(t,h)})),y.parentNode.style.overflow="hidden",t()}catch(e){throw i(e),e}})));case 8:case"end":return t.stop()}}),t,this)}))),function(e,t,n,r){return p.apply(this,arguments)})},{key:"isStrategyUpdated",value:function(e,t){var n=this;if(t&&t.length){var r,o=null===(r=t.filter((function(e){var t;return(null==e?void 0:e.id)===(null===(t=n.workspace)||void 0===t?void 0:t.current_strategy_id)})))||void 0===r?void 0:r[0];if(null!=o&&o.xml){var i=null==o?void 0:o.xml,a=Blockly.Xml.domToText(e);if((0,an.dY)(i,a))return!1}}return!0}},{key:"saveRecentWorkspace",value:(d=fn(dn().mark((function e(){var t,n,o,i;return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null!=this&&this.workspace?null===(t=Blockly)||void 0===t||null===(n=t.Xml)||void 0===n?void 0:n.workspaceToDom(this.workspace):null,e.prev=1,e.next=4,(0,ln.WN)();case 4:if(i=e.sent,!o||!this.isStrategyUpdated(o,i)){e.next=8;break}return e.next=8,(0,ln.l5)(o,r.Rg.UNSAVED);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),an.Pi.emit("Error",e.t0),e.next=15,(0,ln.l5)(o,r.Rg.UNSAVED);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return d.apply(this,arguments)})},{key:"addBeforeRunFunction",value:function(e){this.before_run_funcs.push(e)}},{key:"shouldRunBot",value:function(){return this.before_run_funcs.every((function(e){return!!e()}))}},{key:"runBot",value:function(){var e=this;try{var t=this.generateCode();this.interpreter.bot.tradeEngine.checkTicksPromiseExists()||(this.interpreter=on()),this.is_bot_running=!0,i.D.setIsRunning(!0),this.interpreter.run(t).catch((function(t){an.Pi.emit("Error",t),e.stopBot()}))}catch(e){an.Pi.emit("Error",e),this.interpreter&&this.stopBot()}}},{key:"generateCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"\n            var BinaryBotPrivateInit;\n            var BinaryBotPrivateStart;\n            var BinaryBotPrivateBeforePurchase; \n            var BinaryBotPrivateDuringPurchase;\n            var BinaryBotPrivateAfterPurchase;\n            var BinaryBotPrivateLastTickTime;\n            var BinaryBotPrivateTickAnalysisList = [];\n            var BinaryBotPrivateHasCalledTradeOptions = false;\n\n           \n            function recursiveList(list, final_list){\n                for(var i=0; i < list.length; i++){\n                    if(typeof(list[i]) === 'object'){\n                        recursiveList(list[i], final_list);\n                    }\n                    if(typeof(list[i]) == 'number'){\n                        final_list.push(list[i]);   \n                                  \t\n                    }\n                }\n                return final_list;\n            }\n\n            function BinaryBotPrivateRun(f, arg) {\n                if (f) return f(arg);\n                return false;\n            }\n            function BinaryBotPrivateTickAnalysis() {\n                var currentTickTime = Bot.getLastTick(true);\n                while (currentTickTime === 'MarketIsClosed') {\n                    sleep(5);\n                    currentTickTime = Bot.getLastTick(true);\n                }\n                currentTickTime = currentTickTime.epoch;\n                if (currentTickTime === BinaryBotPrivateLastTickTime) {\n                    return;\n                }\n                BinaryBotPrivateLastTickTime = currentTickTime;\n                for (var BinaryBotPrivateI = 0; BinaryBotPrivateI < BinaryBotPrivateTickAnalysisList.length; BinaryBotPrivateI++) {\n                    BinaryBotPrivateRun(BinaryBotPrivateTickAnalysisList[BinaryBotPrivateI]);\n                }\n            }\n            var BinaryBotPrivateLimitations = ".concat(JSON.stringify(e),";\n            ").concat(Blockly.JavaScript.workspaceToCode(this.workspace),"\n            BinaryBotPrivateRun(BinaryBotPrivateInit);\n            while (true) {\n                BinaryBotPrivateTickAnalysis();\n                BinaryBotPrivateRun(BinaryBotPrivateStart);\n                if (!BinaryBotPrivateHasCalledTradeOptions) {\n                    sleep(1);\n                    continue;\n                }\n                while (watch('before')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateBeforePurchase);\n                }\n                while (watch('during')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateDuringPurchase);\n                }\n                BinaryBotPrivateTickAnalysis();\n                if (!BinaryBotPrivateRun(BinaryBotPrivateAfterPurchase)) {\n                    break;\n                }\n            }")}},{key:"stopBot",value:(u=fn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.D.setIsRunning(!1),e.next=3,this.interpreter.stop();case 3:return this.is_bot_running=!1,this.interpreter=null,this.interpreter=on(),e.next=8,this.interpreter.bot.tradeEngine.watchTicks(this.symbol);case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"terminateBot",value:(s=fn(dn().mark((function e(){return dn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.interpreter){e.next=7;break}return e.next=3,this.interpreter.terminateSession();case 3:return this.interpreter=null,this.interpreter=on(),e.next=7,this.interpreter.bot.tradeEngine.watchTicks(this.symbol);case 7:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"unselectBlocks",value:function(){return Blockly.selected&&Blockly.selected.unselect(),!0}},{key:"disableStrayBlocks",value:function(){var e=this;return this.workspace.getTopBlocks().forEach((function(t){t.isMainBlock()||t.isIndependentBlock()||e.disableBlocksRecursively(t)})),!0}},{key:"disableBlocksRecursively",value:function(e){var t;e.setDisabled(!0),null!==(t=e.nextConnection)&&void 0!==t&&t.targetConnection&&this.disableBlocksRecursively(e.nextConnection.targetConnection.sourceBlock_)}},{key:"checkForErroredBlocks",value:function(){this.valueInputLimitationsListener({},!0);var e=this.workspace.getAllBlocks(!0).filter((function(e){return e.is_error_highlighted&&!e.disabled})).filter((function(e,t,n){return t===n.findIndex((function(t){return t.error_message===e.error_message}))}));return!e.length||(this.workspace.centerOnBlock(e[0].id),e.forEach((function(e){an.Pi.emit("ui.log.error",e.error_message)})),!1)}},{key:"centerAndHighlightBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.workspace.getBlockById(e);n&&(this.workspace.getAllBlocks().forEach((function(e){return e.setErrorHighlighted(!1)})),t&&n.blink(),n.setErrorHighlighted(!0),this.workspace.centerOnBlock(n.id))}},{key:"unHighlightAllBlocks",value:function(){var e;null===(e=this.workspace)||void 0===e||e.getAllBlocks().forEach((function(e){return e.setErrorHighlighted(!1)}))}},{key:"checkForRequiredBlocks",value:function(){return(0,sn.nf)(this.workspace)}},{key:"valueInputLimitationsListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t||this.workspace&&!this.workspace.isDragging())&&(Blockly.JavaScript.init(this.workspace),t&&Blockly.hideChaff(!1),this.workspace.getAllBlocks(!0).forEach((function(n){if(t||e.type===Blockly.Events.END_DRAG||e.type===Blockly.Events.BLOCK_DELETE||e.type===Blockly.Events.BLOCK_CREATE||e.type===Blockly.Events.UI&&("click"===e.element||"selected"===e.element)||(a=n,e.type===Blockly.Events.BLOCK_CHANGE&&e.blockId===a.id)||function(t){return e.type===Blockly.Events.BLOCK_CHANGE&&t.inputList.some((function(t){if(t.connection){var n=t.connection.targetBlock();return n&&e.blockId===n.id}return!1}))}(n)||function(t){if(e.type===Blockly.Events.BLOCK_CHANGE&&"disabled"===e.element)for(var n=t.getParent();null!==n;){if(n.id===e.blockId)return!0;n=n.getParent()}return!1}(n)){if(n.disabled)return void function e(t){t.forEach((function(t){t.setErrorHighlighted(!1),e(t.getChildren())}))}([n]);if(!n.getRequiredValueInputs)return;var r=n.getRequiredValueInputs(),o=Object.keys(r).some((function(e){var t=Blockly.selected===n,o=n.disabled||n.getInheritedDisabled();if(t||o)return!1;if(n.isCollapsed()&&n.hasErrorHighlightedDescendant())return!0;var i=n.getInput(e);if(i||n.domToMutation){if(i.connection){var a=Blockly.JavaScript.ORDER_ATOMIC,l=Blockly.JavaScript.valueToCode(n,e,a),c=r[e];return"function"==typeof c?!!c(l):!l}}else console.warn("Detected a non-existent required input.",{input_name:e,type:n.type});return!0}));if(o&&n.removeSelect(),n.setErrorHighlighted(o,n.error_message||void 0),t&&(n.is_error_highlighted||n.hasErrorHighlightedDescendant()))for(var i=n;i;)i.setCollapsed(!1),i=i.getParent()}var a})))}},{key:"getStrategySounds",value:function(){var e=this.workspace.getAllBlocks().filter((function(e){return"notify"===e.type})),t=[];return e.forEach((function(e){var n=e.inputList[0].fieldRow[3].value_;"silent"!==n&&t.push(n)})),t}}],c=[{key:"handleDragOver",value:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"handleDropOver",value:function(e,t){var n=document.getElementById("scratch_div"),r=document.getElementById("load-strategy__local-dropzone-area");n.contains(e.target)?t(e):r&&r.contains(e.target)?t(e,!1):(e.stopPropagation(),e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")}}],l&&mn(t.prototype,l),c&&mn(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();const yn=new hn},79796:()=>{Blockly.BlockSvg.MIN_BLOCK_X_WITH_STATEMENT=100*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.START_HAT_PATH="m 0,".concat(Blockly.BlockSvg.CORNER_RADIUS," A ").concat(Blockly.BlockSvg.CORNER_RADIUS,", ").concat(Blockly.BlockSvg.CORNER_RADIUS," 0 0,1 ").concat(Blockly.BlockSvg.CORNER_RADIUS,",0"),Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y=10*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.EDITABLE_FIELD_PADDING=16,Blockly.BlockSvg.prototype.updateColour=function(){var e=this.getColourTertiary(),t=this.isShadow()&&!Blockly.scratchBlocksUtils.isShadowArgumentReporter(this);t&&this.parentBlock_&&(e=this.parentBlock_.getColourTertiary(),this.inputList[0]&&this.inputList[0].fieldRow[0]&&(this.inputList[0].fieldRow[0]instanceof Blockly.FieldColour||this.inputList[0].fieldRow[0]instanceof Blockly.FieldColourSlider)&&(e=Blockly.Colours.colourPickerStroke)),this.svgPath_.setAttribute("stroke",e);var n=this.getColour();(this.isGlowingBlock_||t)&&(n=this.getShadowColour()?this.getShadowColour():this.getColourSecondary()),this.svgPath_.setAttribute("fill",n),this.svgPath_.setAttribute("fill-opacity",this.getOpacity());for(var r,o=0;r=this.inputList[o];o++)r.outlinePath&&r.outlinePath.setAttribute("fill",this.getColourTertiary());for(var i=this.getIcons(),a=0;a<i.length;a++)i[a].updateColour();for(var l,c=0;l=this.inputList[c];c++)for(var s,u=0;s=l.fieldRow[u];u++)s.setText(null);this.inputList.forEach((function(e){e.outlinePath&&(e.outlinePath.setAttribute("fill","var(--state-normal)"),e.outlinePath.setAttribute("stroke","#6d7278"),e.outlinePath.setAttribute("stroke-width","0.3px"))}))},Blockly.BlockSvg.prototype.computeOutputPadding_=function(e){if(this.getOutputShape()&&this.outputConnection&&(!this.isShadow()||Blockly.scratchBlocksUtils.isShadowArgumentReporter(this))&&!(e.length>1)){var t=e[0],n=this.getOutputShape();t.paddingStart=0,t.paddingEnd=0;var r,o=t[0];if(o.fieldRow[0])r=0;else{var i=o.connection;if(!i)return;if(r=i.targetConnection?i.targetConnection.getSourceBlock().getOutputShape():i.getOutputShape(),n===Blockly.OUTPUT_SHAPE_HEXAGONAL&&r!==Blockly.OUTPUT_SHAPE_HEXAGONAL){var a=o.renderHeight-Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER;t.paddingStart+=a/2}}t.paddingStart+=Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[n][r];var l=t[t.length-1];if(l.connection){var c=l.connection;if(r=c.targetConnection?c.targetConnection.getSourceBlock().getOutputShape():c.getOutputShape(),n===Blockly.OUTPUT_SHAPE_HEXAGONAL&&r!==Blockly.OUTPUT_SHAPE_HEXAGONAL){var s=l.renderHeight-Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER;t.paddingEnd+=s/2}}else r=0;t.paddingEnd+=Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[n][r]}}},58112:()=>{Blockly.Connection.prototype.getOutputShape=function(){return Blockly.OUTPUT_SHAPE_ROUND}},76814:()=>{Blockly.Categories={Trade_Definition:"trade_parameters",Before_Purchase:"purchase_conditions",During_Purchase:"sell_conditions",After_Purchase:"trade_results",Mathematical:"math",Logic:"logic",Text:"text",Variables:"variables",Functions:"custom_functions",List:"lists",Indicators:"indicators",Time:"time",Tick_Analysis:"technical_analysis",Candle:"candle",Miscellaneous:"miscellaneous",Loop:"loops"},Blockly.DRAG_RADIUS=3,Blockly.FLYOUT_DRAG_RADIUS=1},65659:()=>{Blockly.Css.CONTENT=["@keyframes blinkEffect {","0% {","stroke: var(--status-danger);","stroke-width: 5px;","}","50% {","stroke: var(--status-warning);","stroke-width: 8px;","}","100% {","stroke: var(--status-danger);","stroke-width: 5px;","}","}",".block--error-highlighted > .blocklyPath {","stroke: var(--status-danger);","stroke-width: 5px;","}","@keyframes fade-in-out {","0%{","stroke-opacity: 0;","}","50%{","stroke-opacity: 1;","stroke-width: 6px;","}","100%{","stroke-opacity: 0;","}}",".block--execution-highlighted > .blocklyPath {","stroke: #89B2AF;","animation: fade-in-out 1.5s","}",".block--blink > .blocklyPath {","animation: blinkEffect 1s infinite;","}",".blocklySvg {","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyRelativeWrapper {","position: relative;","width: 100%;","height: 100%;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: calc(100vh - 20rem);","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-moz-user-select: none;","-webkit-user-select: none;","-ms-user-select: none;","}",".blocklyWidgetDiv.fieldTextInput {","overflow: hidden;","border: 1px solid;","box-sizing: border-box;","transform-origin: 0 0;","-ms-transform-origin: 0 0;","-moz-transform-origin: 0 0;","-webkit-transform-origin: 0 0;","}",".blocklyWidgetDiv.fieldTextInput.removableTextInput {","overflow: visible;","}",".blocklyTextDropDownArrow {","position: absolute;","}",".blocklyTextRemoveIcon {","position: absolute;","width: 24px;","height: 24px;","top: -40px;","left: 50%;","margin-left: -12px;","cursor: pointer;","}",".blocklyNonSelectable {","user-select: none;","-moz-user-select: none;","-webkit-user-select: none;","-ms-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyTooltipDiv {","min-height: 34px;","background-color: #d6dadb;","border-radius: 4px;","color: #333333;","padding: 8px;","font-size: 12px;",'font-family: "IBM Plex Sans";',"line-height: 1.5;","letter-spacing: normal;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: fixed;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-radius: 4px;","box-shadow: 0px 0px 8px 1px ".concat(Blockly.Colours.dropDownShadow,";"),"padding: 4px;","-webkit-user-select: none;","min-height: 15px","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyDropDownButtonHover {","box-shadow: 0px 0px 0px 4px ".concat(Blockly.Colours.fieldShadow,";"),"}",".blocklyDropDownButton:active {","box-shadow: 0px 0px 0px 6px ".concat(Blockly.Colours.fieldShadow,";"),"}",".blocklyDropDownButton > img {","width: 80%;","height: 80%;","margin-top: 5%","}",".blocklyDropDownPlaceholder {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","}",".blocklyNumPadButton {","display: inline-block;","float: left;","padding: 0;","width: 48px;","height: 48px;","margin: 4px;","border-radius: 4px;","background: $colour_numPadBackground;","color: #333333;","outline: none;","border: 1px solid $colour_numPadBorder;","cursor: pointer;","font-weight: 600;","font-size: 12pt;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".blocklyNumPadButton > img {","margin-top: 10%;","width: 80%;","height: 80%;","filter: invert(1);","}",".blocklyNumPadButton:active {","background: $colour_numPadActiveBackground;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".arrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".arrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".valueReportBox {","min-width: 50px;","max-width: 300px;","max-height: 200px;","overflow: auto;","word-wrap: break-word;","text-align: center;","font-size: .8em;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #888;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPath {","stroke-width: 0.3px;","}",".blocklySelected>.blocklyPath {","stroke: #ffc358;","stroke-width: 3px;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","cursor: -moz-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","cursor: -moz-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","cursor: -moz-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","cursor: -moz-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging.blocklyDraggingMouseThrough {","pointer-events: none;","}",".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: 1.0;","stroke-opacity: 1.0;","}",".blocklyDragging>.blocklyPath {","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyInsertionMarker>.blocklyPath {","stroke: none;","}",".blocklyText {","fill: #333333;","font-family: inherit;","font-size: var(--text-size-s);","font-weight: normal;","font-stretch: normal;","font-style: normal;","line-height: 1.5;","letter-spacing: normal;","}",".blocklyTextTruncated {","font-size: 11pt;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyNonEditableText>text,",".blocklyEditableText>text {","fill: var(--text-prominent);","}",".blocklyEditableText>.blocklyEditableLabel {","fill: var(--text-prominent);","}",".blocklyDropdownText {","fill: var(--text-prominent)!important;","}",".blocklyBubbleText {","fill: $colour_text;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyFlyoutButton {","fill: none;","pointer-events: all;","}",".blocklyFlyoutButtonBackground {","stroke: #c6c6c6;","}",".blocklyFlyoutButton .blocklyText {","fill: $colour_text;","}",".blocklyFlyoutButtonShadow {","fill: transparent;","}",".blocklyFlyoutButton:hover {","fill: white;","cursor: pointer;","}",".blocklyFlyoutLabel {","cursor: default;","}",".blocklyFlyoutLabelBackground {","opacity: 0;","}",".blocklyFlyoutLabelText {","font-size: 14pt;","fill: #575E75;","font-weight: bold;","}",".blocklySvg text, .blocklyBlockDragSurface text, .blocklyFlyout text, .blocklyToolboxDiv text {","user-select: none;","-moz-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyCommentForeignObject {","position: relative;","z-index: 0;","}",".blocklyCommentRect {","fill: #E7DE8E;","stroke: #bcA903;","stroke-width: 1px","}",".blocklyCommentTarget {","fill: transparent;","stroke: #bcA903;","}",".blocklyCommentTargetFocused {","fill: none;","}",".blocklyCommentHandleTarget {","fill: none;","}",".blocklyCommentHandleTargetFocused {","fill: transparent;","}",".blocklyFocused>.blocklyCommentRect {","fill: #B9B272;","stroke: #B9B272;","}",".blocklySelected>.blocklyCommentTarget {","stroke: #fc3;","stroke-width: 3px;","}",".blocklyCommentTextarea {","background-color: #fef49c;","border: 0;","outline: 0;","margin: 0;","padding: 3px;","resize: none;","display: block;","overflow: hidden;","}",".blocklyCommentDeleteIcon {","cursor: pointer;","fill: #000;","display: none","}",".blocklySelected > .blocklyCommentDeleteIcon {","display: block","}",".blocklyDeleteIconShape {","fill: #000;","stroke: #000;","stroke-width: 1px;","}",".blocklyDeleteIconShape.blocklyDeleteIconHighlighted {","stroke: #fc3;","}",".scratchCommentForeignObject {","position: relative;","}",".scratchCommentBody {","background-color: #fef49c;","border-radius: 4px;","}",".scratchCommentRect {","fill: #fef49c;","}",".scratchCommentTarget {","fill: transparent;","}",".scratchWorkspaceCommentBorder {","stroke: #bcA903;","stroke-width: 1px;","}",".scratchCommentTargetFocused {","fill: none;","}",".scratchCommentTopBar {","fill: #000000;","fill-opacity: 0.1","}",".scratchCommentText {","font-size: 12pt;","font-weight: 400;","}",".scratchCommentTextarea {","background-color: #fef49c;","border: 0;","outline: 0;","padding: 0;","resize: none;","overflow: hidden;","}",".scratchCommentResizeSE {","cursor: se-resize;","fill: transparent;","}",".scratchCommentResizeSW {","cursor: sw-resize;","fill: transparent;","}",".blocklyHtmlInput {","border: none;","font-size: 12pt;","height: 100%;","margin: 0;","outline: none;","box-sizing: border-box;","width: 100%;","text-align: center;","color: $colour_text;","font-weight: 500;","}",".blocklyMainBackground {","stroke-width: 0;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #fff;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: $colour_flyout;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal, .blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: $colour_scrollbar;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: $colour_scrollbarHover;","}",".blocklyZoom>image {","opacity: 1;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyAngleCircle {","stroke: ".concat(Blockly.Colours.motion.tertiary,";"),"stroke-width: 1;","fill: ".concat(Blockly.Colours.motion.secondary,";"),"}",".blocklyAngleCenterPoint {","stroke: #fff;","stroke-width: 1;","fill: #fff;","}",".blocklyAngleDragHandle {","stroke: #fff;","stroke-width: 5;","stroke-opacity: 0.25;","fill: #fff;","cursor: pointer;","}",".blocklyAngleDragArrow {","pointer-events: none","}",".blocklyAngleMarks {","stroke: #fff;","stroke-width: 1;","stroke-opacity: 0.5;","}",".blocklyAngleGauge {","fill: #fff;","fill-opacity: 0.20;","}",".blocklyAngleLine {","stroke: #fff;","stroke-width: 1;","stroke-linecap: round;","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","padding: 0 !important;","}",".blocklyDropDownNumPad {","background-color: $colour_numPadBackground;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","}",".blocklyToolboxDiv {","background-color: $colour_toolbox;","color: $colour_toolboxText;","overflow-x: visible;","overflow-y: auto;","position: absolute;","z-index: 40;","-webkit-tap-highlight-color: transparent;","}",".blocklyTreeRoot {","padding: 4px 0;","}",".blocklyTreeRoot:focus {","outline: none;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",".blocklyHorizontalTree {","float: left;","margin: 1px 5px 8px 0;","}",".blocklyHorizontalTreeRtl {","float: right;","margin: 1px 0 8px 5px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","}",".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: #e4e4e4;","}",".blocklyTreeSeparator {","border-bottom: solid #e5e5e5 1px;","height: 0;","margin: 5px 0;","}",".blocklyTreeSeparatorHorizontal {","border-right: solid #e5e5e5 1px;","width: 0;","padding: 5px 0;","margin: 0 5px;","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","width: 16px;","}",".blocklyTreeIconClosedLtr {","background-position: -32px -1px;","}",".blocklyTreeIconClosedRtl {","background-position: 0px -1px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedLtr {","background-position: -32px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedRtl {","background-position: 0px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeIconNone,",".blocklyTreeSelected>.blocklyTreeIconNone {","background-position: -48px -1px;","}",".blocklyTreeLabel {","cursor: default;","font-size: 16px;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}",".blocklyDropDownDiv .goog-slider-horizontal {","margin: 8px;","height: 22px;","width: 150px;","position: relative;","outline: none;","border-radius: 11px;","margin-bottom: 20px;","}",".blocklyDropDownDiv .goog-slider-horizontal .goog-slider-thumb {","width: 26px;","height: 26px;","top: -1px;","position: absolute;","background-color: white;","border-radius: 100%;","-webkit-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","-moz-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","}",".scratchEyedropper {","background: none;","outline: none;","border: none;","width: 100%;","text-align: center;","border-top: 1px solid #ddd;","padding-top: 5px;","cursor: pointer;","}",".scratchColourPickerLabel {","font-size: 0.65rem;","color: $colour_toolboxText;","margin: 8px;","}",".scratchColourPickerLabelText {","font-weight: bold;","}",".scratchColourPickerReadout {","margin-left: 10px;","}",".scratchMatrixButtonDiv {","width: 50%;","text-align: center;","float: left;","}",".scratchNotePickerKeyLabel {","font-size: 0.75rem;","fill: $colour_text;","pointer-events: none;","}",".blocklyWidgetDiv .goog-menu {","background: #fff;","border-color: #ccc #666 #666 #ccc;","border-style: solid;","border-width: 1px;","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","z-index: 20000;","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyWidgetDiv .goog-menuitem {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"list-style: none;","margin: 0;","padding: 4px 7em 4px 28px;","white-space: nowrap;","}",".blocklyDropDownDiv .goog-menuitem {","color: #333333;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"font-weight: bold;","list-style: none;","margin: 0;","min-height: 24px;","padding: 4px 7em 4px 28px;","white-space: nowrap;","}",".blocklyWidgetDiv .goog-menuitem.goog-menuitem-rtl, ",".blocklyDropDownDiv .goog-menuitem.goog-menuitem-rtl {","padding-left: 7em;","padding-right: 28px;","}",".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem, ",".blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyDropDownDiv .goog-menu-noicon .goog-menuitem { ","padding-left: 12px;","}",".blocklyWidgetDiv .goog-menu-noaccel .goog-menuitem, ",".blocklyDropDownDiv .goog-menu-noaccel .goog-menuitem {","padding-right: 20px;","}",".blocklyWidgetDiv .goog-menuitem-content ",".blocklyDropDownDiv .goog-menuitem-content {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-accel,",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content, ",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-accel,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {","color: #ccc !important;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon, ",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {","opacity: 0.3;","-moz-opacity: 0.3;","filter: alpha(opacity=30);","}",".blocklyWidgetDiv .goog-menuitem-highlight,",".blocklyWidgetDiv .goog-menuitem-hover {","background-color: #d6e9f8;","border-color: #d6e9f8;","border-style: dotted;","border-width: 1px 0;","padding-bottom: 3px;","padding-top: 3px;","}",".blocklyDropDownDiv .goog-menuitem-highlight,",".blocklyDropDownDiv .goog-menuitem-hover {","background-color: rgba(0, 0, 0, 0.2);","}",".blocklyWidgetDiv .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-icon, ",".blocklyDropDownDiv .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-icon {","background-repeat: no-repeat;","height: 16px;","left: 6px;","position: absolute;","right: auto;","vertical-align: middle;","width: 16px;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","position: static;","float: left;","margin-left: -24px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","float: right;","margin-right: -24px;","}",".blocklyWidgetDiv .goog-menuitem-accel, ",".blocklyDropDownDiv .goog-menuitem-accel {","color: #999;","direction: ltr;","left: auto;","padding: 0 6px;","position: absolute;","right: 0;","text-align: right;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-accel, ",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-accel {","left: 0;","right: auto;","text-align: left;","}",".blocklyWidgetDiv .goog-menuitem-mnemonic-hint, ",".blocklyDropDownDiv .goog-menuitem-mnemonic-hint {","text-decoration: underline;","}",".blocklyWidgetDiv .goog-menuitem-mnemonic-separator, ",".blocklyDropDownDiv .goog-menuitem-mnemonic-separator {","color: #999;","font-size: 12px;","padding-left: 4px;","}",".blocklyWidgetDiv .goog-menuseparator, ",".blocklyDropDownDiv .goog-menuseparator {","border-top: 1px solid #ccc;","margin: 4px 0;","padding: 0;","}",".blocklyFlyoutCheckbox {","fill: white;","stroke: #c8c8c8;","}",".blocklyFlyoutCheckbox.checked {","fill: ".concat(Blockly.Colours.motion.primary,";"),"stroke: ".concat(Blockly.Colours.motion.tertiary,";"),"}",".blocklyFlyoutCheckboxPath {","stroke: white;","stroke-width: 3;","stroke-linecap: round;","stroke-linejoin: round;","}",".scratchCategoryMenu {","width: 60px;","background: $colour_toolbox;","color: $colour_toolboxText;","font-size: .7rem;","user-select: none;","-webkit-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","}",".scratchCategoryMenuHorizontal {","width: 100%;","height: 50px;","background: $colour_toolbox;","color: $colour_toolboxText;","font-size: .7em;","user-select: none;","-webkit-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","}",".scratchCategoryMenuHorizontal .scratchCategoryMenuRow {","float: left;","margin: 3px;","}",".scratchCategoryMenuRow {","}",".scratchCategoryMenuItem {","padding: 0.375rem 0px;","cursor: pointer;","text-align: center;","}",".scratchCategoryMenuHorizontal .scratchCategoryMenuItem {","padding: 6px 5px;","}",".scratchCategoryMenuItem.categorySelected {","background: $colour_toolboxSelected;","}",".scratchCategoryItemBubble {","width: 1.25rem;","height: 1.25rem;","border: 1px solid;","border-radius: 100%;","margin: 0 auto 0.125rem;","}",".scratchCategoryItemIcon {","width: 1.25rem;","height: 1.25rem;","margin: 0 auto 0.125rem;","background-size: 100%;","}",".scratchCategoryMenuItem:hover {","color: $colour_toolboxHover !important;","}",""]},70636:()=>{Blockly.FieldImage=function(e,t,n,r,o,i){this.sourceBlock_=null,this.height_=Number(n),this.width_=Number(t),this.size_=new goog.math.Size(this.width_,this.height_),this.flipRtl_=i,this.tooltip_="",this.setValue(e),this.setText(r),"function"==typeof o&&(this.clickHandler_=o)},goog.inherits(Blockly.FieldImage,Blockly.Field),Blockly.FieldImage.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.src),n=Number(Blockly.utils.replaceMessageReferences(e.width)),r=Number(Blockly.utils.replaceMessageReferences(e.height)),o=Blockly.utils.replaceMessageReferences(e.alt),i=!!e.flipRtl;return new Blockly.FieldImage(t,n,r,o,null,i)},Blockly.FieldImage.prototype.EDITABLE=!1,Blockly.FieldImage.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),this.imageElement_=Blockly.utils.createSvgElement("image",{height:"".concat(this.height_,"px"),width:"".concat(this.width_,"px")},this.fieldGroup_),this.setValue(this.src_),this.setText(this.text_),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.tooltip_?this.imageElement_.tooltip=this.tooltip_:this.setTooltip(this.sourceBlock_),Blockly.Tooltip.bindMouseEvents(this.imageElement_),this.maybeAddClickHandler_())},Blockly.FieldImage.prototype.dispose=function(){goog.dom.removeNode(this.fieldGroup_),this.fieldGroup_=null,this.imageElement_=null},Blockly.FieldImage.prototype.maybeAddClickHandler_=function(){!this.clickHandler_||this.sourceBlock_.workspace.options.readOnly||this.sourceBlock_.isInFlyout||(this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.fieldGroup_,"mousedown",this,this.clickHandler_),this.fieldGroup_.style.cursor="pointer")},Blockly.FieldImage.prototype.setTooltip=function(e){this.tooltip_=e,this.imageElement_&&(this.imageElement_.tooltip=e)},Blockly.FieldImage.prototype.getValue=function(){return this.src_},Blockly.FieldImage.prototype.setValue=function(e){null!==e&&(this.src_=e,this.imageElement_&&this.imageElement_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e||""))},Blockly.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},Blockly.FieldImage.prototype.setText=function(e){null!==e&&(this.text_=e,this.imageElement_&&this.imageElement_.setAttribute("alt",e||""))},Blockly.FieldImage.prototype.render_=function(){},Blockly.FieldImage.prototype.forceRerender=function(){},Blockly.FieldImage.prototype.updateWidth=function(){},Blockly.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},Blockly.Field.register("field_image",Blockly.FieldImage)},31925:()=>{Blockly.FieldTextInput.prototype.init=function(){if(!this.fieldGroup_){var e=!this.sourceBlock_.isShadow();e&&(this.className_+=" blocklyEditableLabel"),this.maxDisplayLength=17,Blockly.FieldTextInput.superClass_.init.call(this),e&&(this.box_=Blockly.utils.createSvgElement("rect",{rx:4*Blockly.BlockSvg.CORNER_RADIUS,ry:4*Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,fill:this.sourceBlock_.getColourSecondary(),stroke:this.sourceBlock_.getColourTertiary(),"stroke-width":"0.3px"}),this.fieldGroup_.insertBefore(this.box_,this.textElement_))}}},72882:()=>{Blockly.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(this.targetBlock_.disabled||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace_,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.mostRecentEvent_,this.targetBlock_),this.targetBlock_.select(),0))}},49278:()=>{Blockly.Icon.prototype.renderIcon=function(e){if(this.collapseHidden&&this.block_.isCollapsed())return this.iconGroup_.setAttribute("display","none"),e;this.iconGroup_.setAttribute("display","block");var t=e,n=this.SIZE;return this.block_.RTL&&(t-=n),this.iconGroup_.setAttribute("transform","localize(".concat(t,",").concat(9,")")),this.computeIconLocation(),this.block_.RTL?t-=Blockly.BlockSvg.SEP_SPACE_X:t+=n+Blockly.BlockSvg.SEP_SPACE_X,t}},99818:(e,t,n)=>{"use strict";n.r(t);var r=n(62893);Blockly.Block.Dimensions={},Blockly.Block.prototype.getDisplayName=function(){if(this.meta){var e=this.meta();return e&&e.display_name}return this.type},Blockly.Block.prototype.getSiblings=function(){var e=this,t=[this];return["getPreviousBlock","getNextBlock"].forEach((function(n){for(var r=e[n]();null!==r;){var o=e.getParent();if(o&&o.id===r.id)break;t.push(r),r=r[n]()}})),t},Blockly.Block.prototype.getChildByType=function(e){return this.getDescendants().find((function(t){return t.type===e}))},Blockly.Block.prototype.getChildFieldValue=function(e,t){var n=this.getChildByType(e);return n?n.getFieldValue(t):null},Blockly.Block.prototype.childValueToCode=function(e,t){var n=this.getChildByType(e);return n&&Blockly.JavaScript.valueToCode(n,t,Blockly.JavaScript.ORDER_ATOMIC)},Blockly.Block.prototype.getBlocksInStatement=function(e){var t=this.getInputTargetBlock(e);return t?t.getSiblings():[]},Blockly.Block.prototype.getLastConnectionInStatement=function(e){var t=this.getInputTargetBlock(e);return t?t.lastConnectionInStack():this.getInput(e).connection},Blockly.Block.prototype.isEnabled=function(){return!this.disabled},Blockly.Block.prototype.isDescendantOf=function(e){for(var t=this.getParent();null!==t;){if(t.type===e)return!0;t=t.getParent()}return!1},Blockly.Block.prototype.getTopParent=function(){for(var e=this.getParent();null!==e;){var t=e.getParent();if(!t)return e;e=t}return null},Blockly.Block.getDimensions=function(e){var t=Object.keys(Blockly.Block.Dimensions).find((function(t){return e.outerHTML===t}));if(t)return Blockly.Block.Dimensions[t];var r=new Blockly.Options({media:"".concat(n.p,"media/")}),o=document.createElement("div"),i=Blockly.createDom_(o,r),a=Blockly.createMainWorkspace_(i,r,!1,!1),l=Blockly.Xml.domToBlock(e,a).getHeightWidth();return a.dispose(),Blockly.Block.Dimensions[e.outerHTML]=l,l},Blockly.Block.prototype.isMainBlock=function(){return r.v.mainBlocks.includes(this.type)},Blockly.Block.prototype.isIndependentBlock=function(){return r.v.INDEPEDENT_BLOCKS.includes(this.type)},Blockly.Block.prototype.getRootInputTargetBlock=function(){for(var e,t=this.getParent();t;){var n=this.getRootBlock().getInputWithBlock(t);n&&n.name&&(e=n.name),t=t.getParent()}return e},Blockly.Block.prototype.hasErrorHighlightedDescendant=function(){return function e(t){return t.some((function(t){var n=t.is_error_highlighted,r=e(t.getChildren());return n||r}))}(this.getChildren())},Blockly.Block.isDynamic=function(e){return/^((procedures_)|(variables_)|(math_change$))/.test(e)},n(79796);var o=n(92273),i=n(27675),a=n(81937);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Blockly.BlockSvg.prototype.addSelect=function(){if(!this.isInFlyout){var e=i.Z.instance.flyout;e&&e.setVisibility(!1),Blockly.utils.addClass(this.svgGroup_,"blocklySelected")}},Blockly.BlockSvg.prototype.setDisabled=function(e){this.disabled!==e&&(Blockly.BlockSvg.superClass_.setDisabled.call(this,e),this.rendered&&this.updateDisabled())},Blockly.BlockSvg.prototype.updateDisabled=function(){if(this.disabled||this.getInheritedDisabled()){Blockly.utils.addClass(this.svgGroup_,"blocklyDisabled");var e="url(#".concat(this.workspace.options.disabledPatternId,")");this.svgPath_.getAttribute("fill")!==e&&this.svgPath_.setAttribute("fill",e)}else Blockly.utils.removeClass(this.svgGroup_,"blocklyDisabled")&&this.updateColour();this.getChildren(!1).forEach((function(e){return e.updateDisabled()}))},Blockly.BlockSvg.prototype.showContextMenu_=function(e){var t;if(!this.workspace.options.readOnly&&this.contextMenu){var n=this,r=[];if(this.isDeletable()&&this.isMovable()&&!n.isInFlyout)r.push(Blockly.ContextMenu.blockDuplicateOption(n,e)),r.push(Blockly.ContextMenu.blockDetachOption(n,e)),this.isEditable()&&this.workspace.options.comments&&r.push(Blockly.ContextMenu.blockCommentOption(n)),r.push(Blockly.ContextMenu.blockDeleteOption(n));else if(this.parentBlock_&&this.isShadow_)return void this.parentBlock_.showContextMenu_(e);if(this.workspace.options.collapse)if(this.collapsed_){var i={enabled:!0};i.text=(0,o.localize)("Expand Block"),i.callback=function(){return n.setCollapsed(!1)},r.push(i)}else{var l={enabled:!0};l.text=(0,o.localize)("Collapse Block"),l.callback=function(){return n.setCollapsed(!0)},r.push(l)}if(this.workspace.options.disable){var c=n.restricted_parents||[],s=this.type.includes("trade_definition_")&&!this.isMovable(),u={text:this.disabled?(0,o.localize)("Enable Block"):(0,o.localize)("Disable Block"),enabled:!s&&(!this.disabled||0===c.length||c.some((function(e){return n.isDescendantOf(e)}))),callback:function(){var e=Blockly.Events.getGroup();e||Blockly.Events.setGroup(!0),n.setDisabled(!n.disabled),e||Blockly.Events.setGroup(!1)}};r.push(u)}if(this.isMovable()){var d=n.nextConnection&&n.nextConnection.isConnected(),p=function(e){var t=Blockly.Xml.textToDom("<xml/>"),r=Blockly.Xml.blockToDom(n),i=e?n.type:"".concat(n.type,"_").concat((0,o.localize)("stack"));e&&Blockly.Xml.deleteNext(r),t.appendChild(r),(0,a.a1)(i,!0,t)};r.push({text:(0,o.localize)("Download block"),enabled:!0,callback:function(){return p(!0)}}),d&&r.push({text:(0,o.localize)("Download stack"),enabled:!0,callback:function(){return p(!1)}})}null!==(t=n.nextConnection)&&void 0!==t&&t.targetConnection&&(r.push(Blockly.ContextMenu.blockEnableOption(n,e)),r.push(Blockly.ContextMenu.blockDisableOption(n,e))),this.customContextMenu&&this.customContextMenu(r),Blockly.ContextMenu.show(e,r,this.RTL),Blockly.ContextMenu.currentBlock=this}},Blockly.BlockSvg.prototype.setErrorHighlighted=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.localize)('The block(s) highlighted in red are missing input values. Please update them and click "Run bot".');if(this.is_error_highlighted!==e){var n="block--error-highlighted";e?Blockly.utils.addClass(this.svgGroup_,n):Blockly.utils.removeClass(this.svgGroup_,n),this.is_error_highlighted=e,this.error_message=t}},Blockly.BlockSvg.prototype.highlightExecutedBlock=function(){var e=this,t="block--execution-highlighted";Blockly.utils.hasClass(this.svgGroup_,t)||(Blockly.utils.addClass(this.svgGroup_,t),setTimeout((function(){e.svgGroup_&&Blockly.utils.removeClass(e.svgGroup_,t)}),1505))},Blockly.BlockSvg.prototype.blink=function(){var e=this,t="block--blink";Blockly.utils.addClass(this.svgGroup_,t),setTimeout((function(){Blockly.utils.removeClass(e.svgGroup_,t)}),2e3)},Blockly.BlockSvg.prototype.setCollapsed=function(e){var t=this;if(this.collapsed_!==e){navigator.userAgent.search("Firefox")>0&&setTimeout((function(){t.workspace.getAllFields().forEach((function(e){return e.forceRerender()}))}),0);var n=[],r="_TEMP_COLLAPSED_INPUT";if(this.inputList.forEach((function(t){var r;n.push.apply(n,function(e){if(Array.isArray(e))return l(e)}(r=t.setVisible(!e))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e&&1===t.type&&!t.connection.targetConnection&&t.outlinePath&&(t.outlinePath.style.visibility="hidden")})),e){this.getIcons().filter((function(e){return!(e instanceof Blockly.ScratchBlockComment)})).forEach((function(e){return e.setVisible(!1)}));var i=null;this.inputList.some((function(e){return e.fieldRow.some((function(e){return!!e.class_&&(i=e.class_,!0)}))}));var c=this.workspace.options.pathToMedia+((0,a.YQ)(this.getColour())?"dropdown-arrow.svg":"dropdown-arrow-dark.svg"),s=new Blockly.FieldImage(c,16,16,(0,o.localize)("Expand"),(function(){return t.setCollapsed(!1)}));if("procedures_defreturn"===this.type||"procedures_defnoreturn"===this.type){var u=this.getFieldValue("NAME"),d=" (".concat(this.arguments.join(", "),")");this.appendDummyInput(r).appendField(new Blockly.FieldLabel((0,o.localize)("function"),i)).appendField(new Blockly.FieldLabel(u+d,"header__title")).appendField(s).init()}else{var p=this.toString(Blockly.COLLAPSE_CHARS),f=new Blockly.FieldLabel(p,i);this.appendDummyInput(r).appendField(f).appendField(s).init()}}else this.removeInput(r),this.setWarningText(null);Blockly.BlockSvg.superClass_.setCollapsed.call(this,e),n.length||n.push(this),this.rendered&&n.forEach((function(e){return e.render()})),this.setErrorHighlighted(e&&this.hasErrorHighlightedDescendant())}},Blockly.BlockSvg.prototype.initSvg=function(){if(goog.asserts.assert(this.workspace.rendered,"Workspace is headless."),!this.isInsertionMarker()){for(var e,t=0;e=this.inputList[t];t++)e.init(),e.initOutlinePath(this.svgGroup_);for(var n=this.getIcons(),r=0;r<n.length;r++)n[r].createIcon()}this.updateColour(),this.updateMovable(),this.workspace.options.readOnly||this.eventsInit_||Blockly.bindEventWithChecks_(this.getSvgRoot(),"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,!this.getSvgRoot().parentNode&&this.workspace.getCanvas()&&this.workspace.getCanvas().appendChild(this.getSvgRoot())},n(58112),n(76814),Blockly.ContextMenu.blockDuplicateOption=function(e){return{callback:function(){Blockly.duplicate_(e)},enabled:!r.v.single_instance_blocks.includes(e.type),text:(0,o.localize)("Duplicate")}},Blockly.ContextMenu.wsCleanupOption=function(e,t){return{text:(0,o.localize)("Rearrange Vertically"),enabled:t>1,callback:e.cleanUp.bind(e)}},Blockly.ContextMenu.wsCollapseOption=function(e,t){return{enabled:e,text:(0,o.localize)("Collapse All Blocks"),callback:function(){Blockly.ContextMenu.toggleCollapseFn_(t,!0)}}},Blockly.ContextMenu.wsExpandOption=function(e,t){return{enabled:e,text:(0,o.localize)("Expand All Blocks"),callback:function(){Blockly.ContextMenu.toggleCollapseFn_(t,!1)}}},Blockly.ContextMenu.toggleCollapseFn_=function(e,t){e.forEach((function(e){return e.setCollapsed(t)}))},Blockly.ContextMenu.wsDeleteOption=function(e,t){var n=Blockly.WorkspaceSvg.buildDeleteList_(t),r=n.filter((function(e){return!e.isShadow()})).length,i=Blockly.utils.genUid(),a=function e(){Blockly.Events.setGroup(i);var t=n.shift();t&&(t.workspace?(t.dispose(!1,!0),setTimeout(e,10)):e()),Blockly.Events.setGroup(!1)};return{text:1===r?(0,o.localize)("Delete Block"):(0,o.localize)("Delete {{ delete_count }} Blocks",{delete_count:r}),enabled:r>0,callback:function(){if(e.currentGesture_&&e.currentGesture_.cancel(),r<2)a();else{var t=(0,o.localize)("Delete all {{ delete_count }} blocks?",{delete_count:r});Blockly.confirm(t,(function(e){e&&a()}))}}}},Blockly.ContextMenu.blockCommentOption=function(e){var t={enabled:!goog.userAgent.IE};return e.comment?(t.text=(0,o.localize)("Remove comment"),t.callback=function(){e.setCommentText(null)}):(t.text=(0,o.localize)("Add comment"),t.callback=function(){var t=e.collapsed_;t&&e.setCollapsed(!1),e.setCommentText(""),e.collapsed_!==t&&e.setCollapsed(t)}),t},Blockly.ContextMenu.blockDetachOption=function(e){var t=e.getConnections_().some((function(e){var t;return e.isConnected()&&!(null!==(t=e.targetConnection)&&void 0!==t&&t.sourceBlock_.isShadow_)}));return{callback:function(){e.unplug(!0),e.moveBy(250,100)},enabled:e.parentBlock_&&t,text:(0,o.localize)("Detach Block")}},Blockly.ContextMenu.blockDisableOption=function(e){var t=function e(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o.push(!t.disabled),null!==(n=t.nextConnection)&&void 0!==n&&n.targetConnection?e(null===(r=t.nextConnection)||void 0===r?void 0:r.targetConnection.sourceBlock_,o):o.includes(!0)}(e),n=function e(t){var n,r;t.setDisabled(!0),null!==(n=t.nextConnection)&&void 0!==n&&n.targetConnection&&e(null===(r=t.nextConnection)||void 0===r?void 0:r.targetConnection.sourceBlock_)};return{callback:function(){n(e)},enabled:t,text:(0,o.localize)("Disable stack")}},Blockly.ContextMenu.blockEnableOption=function(e){var t=function e(t){var n,r,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!(t.restricted_parents&&(null===(n=t.restricted_parents)||void 0===n||!n.includes(null===(r=t.getTopParent())||void 0===r?void 0:r.type)))&&(a.push(t.disabled),null!==(o=t.nextConnection)&&void 0!==o&&o.targetConnection?e(null===(i=t.nextConnection)||void 0===i?void 0:i.targetConnection.sourceBlock_,a):a.includes(!0))}(e),n=function e(t){var n,r,o;t.restricted_parents&&!t.restricted_parents.includes(null===(n=t.getTopParent())||void 0===n?void 0:n.type)||t.setDisabled(!1),null!==(r=t.nextConnection)&&void 0!==r&&r.targetConnection&&e(null===(o=t.nextConnection)||void 0===o?void 0:o.targetConnection.sourceBlock_)};return{callback:function(){n(e)},enabled:t,text:(0,o.localize)("Enable stack")}},n(65659),Blockly.DataCategory=function(e){var t=e.getVariablesOfType(""),n=[];return Blockly.DataCategory.addCreateVariable(n,e),n.concat(Blockly.DataCategory.search(t,["variables_set","variables_get","math_change"]))},Blockly.DataCategory.search=function(e){var t=[];if(e.length>0){var n=function(e){return'<field name="VAR" id="'.concat(e.getId(),'" variabletype="').concat(goog.string.htmlEscape(e.type),'">').concat(goog.string.htmlEscape(e.name),"</field>")},r=e[0];if(Blockly.Blocks.variables_set){var o=Blockly.Blocks.math_change?8:24,i='<xml><block type="variables_set" gap="'.concat(o,'">').concat(n(r),"</block></xml>"),a=Blockly.Xml.textToDom(i).firstChild;t.push(a)}Blockly.Blocks.variables_get&&(e.sort((function(t,n){return e.indexOf(n)-e.indexOf(t)})),e.forEach((function(e){var r='<xml><block type="variables_get">'.concat(n(e),"</block></xml>"),o=Blockly.Xml.textToDom(r).firstChild;t.push(o)})))}return t},Blockly.DataCategory.addCreateVariable=function(e,t){var n=goog.dom.createDom("button"),r=goog.dom.createDom("input"),a=(0,o.localize)("Create"),l="CREATE_VARIABLE",c=(0,o.localize)("New variable name");n.setAttribute("text",a),n.setAttribute("className","flyout__button-new"),n.setAttribute("callbackKey",l),r.setAttribute("className","flyout__input"),r.setAttribute("name","variable"),r.setAttribute("type","text"),r.setAttribute("placeholder",c),t.registerButtonCallback(l,(function(e){var t=document.querySelector(".flyout__input > .dc-input__container").firstChild;e.getTargetWorkspace().createVariable(t.value,""),t.value="",i.Z.instance.flyout.refreshCategory()})),e.push(r),e.push(n)},Blockly.FieldDropdown.prototype.updateOptions=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Blockly.DropDownDiv.isVisible()&&Blockly.DropDownDiv.hideWithoutAnimation(),this.menuGenerator_=e;var r=this.getValue();n.should_pretend_empty&&(r="");var o=-1!==e.findIndex((function(e){return e[1]===n.default_value}));if((0,a.zJ)((function(){t.setValue(""),o?t.setValue(n.default_value):e.length>0?t.setValue(t.menuGenerator_[0][1]):t.setValue(r)})),!n.should_trigger_event||!0===n.should_trigger_event){var i=new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,r,this.getValue());i.recordUndo=!1,i.group=n.event_group,Blockly.Events.fire(i)}},Blockly.FieldDropdown.prototype.init=function(){if(!this.fieldGroup_){this.arrowSize_=12,this.arrowX_=0,this.arrowY_=11,this.arrow_=Blockly.utils.createSvgElement("image",{height:"".concat(this.arrowSize_,"px"),width:"".concat(this.arrowSize_,"px")}),this.arrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","".concat(Blockly.mainWorkspace.options.pathToMedia,"dropdown-arrow-dark.svg")),this.className_+=" blocklyDropdownText",this.disableColourChange_=!0,Blockly.FieldDropdown.superClass_.init.call(this),this.sourceBlock_.isShadow()||(this.box_=Blockly.utils.createSvgElement("rect",{rx:4*Blockly.BlockSvg.CORNER_RADIUS,ry:4*Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,stroke:this.sourceBlock_.getColourTertiary(),"stroke-width":"0.3px",fill:this.sourceBlock_.getColourSecondary(),"fill-opacity":1},null),this.fieldGroup_.insertBefore(this.box_,this.textElement_));var e=this.text_;this.text_=null,this.setText(e)}},Blockly.FieldDropdown.prototype.isEmpty=function(){return 0===this.menuGenerator_.length||!this.menuGenerator_[0][1]},Blockly.Field.register("field_image_checkbox",function e(){var t=function(e){return e?(0,o.localize)("Y"):(0,o.localize)("N")},n=new Blockly.FieldImage(!0,16,16,t(!0),(function(){this.sourceBlock_.workspace.options.readOnly||this.sourceBlock_.isInFlyout||(this.is_checked=!this.is_checked,this.setValue(this.is_checked),this.setText(t(this.is_checked)))}));return n.fromJson=function(){return e()},n.setValue=function(e){var t=!0===e||"TRUE"===e,n=this.getValue();this.src_=t?"TRUE":"FALSE";var r=this.fieldGroup_;r&&(Array.from(r.children).forEach((function(e){return r.removeChild(e)})),Blockly.utils.createSvgElement("rect",{fill:this.sourceBlock_.getColourSecondary(),"fill-rule":"nonzero",height:this.height_,width:this.width_,rx:2,stroke:this.sourceBlock_.getColourTertiary()},r),t&&Blockly.utils.createSvgElement("path",{fill:"var(--text-general)",d:"M6 10.086L3.707 7.793a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l7-7a1 1 0 10-1.414-1.414L6 10.086z"},r)),this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,n,this.getValue()))},n}()),n(70636),Blockly.Flyout.prototype.createBlock=function(e,t){Blockly.Events.disable();var n=this.targetWorkspace_,o=n.getAllVariables();n.setResizesEnabled(!1);var a=null;try{a=this.placeNewBlock_(e,t),Blockly.hideChaff()}finally{Blockly.Events.enable()}var l=Blockly.Variables.getAddedVariables(n,o);Blockly.Events.isEnabled()&&(Blockly.Events.setGroup(!0),r.v.single_instance_blocks.includes(a.type)&&n.getAllBlocks().forEach((function(e){e.type===a.type&&e.id!==a.id&&e.dispose()})),l.forEach((function(e){Blockly.Events.fire(new Blockly.Events.VarCreate(e))})),Blockly.Events.fire(new Blockly.Events.Create(a))),this.autoClose&&this.hide();var c=i.Z.instance.flyout;return c.setIsSearchFlyout(!1),c.setVisibility(!1),a.isInFlyout=!1,a},Blockly.Flyout.prototype.placeNewBlock_=function(e,t){var n=this.targetWorkspace_;if(!t.getSvgRoot())throw new Error("old_block is not rendered.");var r=Blockly.Xml.blockToDom(t,!0);n.setResizesEnabled(!1);var o=Blockly.Xml.domToBlock(r,n);if(!o.getSvgRoot())throw new Error("block is not rendered.");if(e){var i=n.getOriginOffsetInPixels(),a=new goog.math.Coordinate(e.clientX?e.clientX-25:0,e.clientY?e.clientY-160:0),l=goog.math.Coordinate.difference(a,i).scale(1/n.scale);o.moveBy(l.x,l.y)}return o},n(72882),n(31032),n(49278),n(96750),Blockly.Procedures.flyoutCategory=function(e){var t=[];if(Blockly.Blocks.procedures_defnoreturn){var n=document.createElement("block");n.setAttribute("type","procedures_defnoreturn"),n.setAttribute("gap",16);var r=document.createElement("field");r.setAttribute("name","NAME"),r.appendChild(document.createTextNode((0,o.localize)("do something"))),n.appendChild(r),t.push(n)}if(Blockly.Blocks.procedures_defreturn){var i=document.createElement("block");i.setAttribute("type","procedures_defreturn"),i.setAttribute("gap",16);var a=document.createElement("field");a.setAttribute("name","NAME"),a.appendChild(document.createTextNode((0,o.localize)("do something"))),i.appendChild(a),t.push(i)}if(Blockly.Blocks.procedures_ifreturn){var l=document.createElement("block");l.setAttribute("type","procedures_ifreturn"),l.setAttribute("gap",16),t.push(l)}t.length&&t[t.length-1].setAttribute("gap",24);var c=Blockly.Procedures.allProcedures(e);return t.concat(Blockly.Procedures.populateDynamicProcedures(c))},Blockly.Procedures.populateDynamicProcedures=function(e){var t=[],n=function(e,t){var n=[];if(!e)return n;for(var r=function(r){var o=e[r][0],i=e[r][1],a=document.createElement("block");a.setAttribute("type",t),a.setAttribute("gap",16);var l=document.createElement("mutation");l.setAttribute("name",o),a.appendChild(l),i.forEach((function(e){var t=document.createElement("arg");t.setAttribute("name",e),l.appendChild(t)})),n.push(a)},o=0;o<e.length;o++)r(o);return n};return(t=t.concat(n(e[0],"procedures_callnoreturn"))).concat(n(e[1],"procedures_callreturn"))},Blockly.Procedures.getDefinition=function(e,t){for(var n=t.getTopBlocks(!1),r=0;r<n.length;r++)if(n[r].getProcedureDef){var o=n[r].getProcedureDef();if(o&&Blockly.Names.equals(o[0],e))return n[r]}return null},Blockly.Procedures.isNameUsed=function(e,t,n){return t.getAllBlocks(!1).some((function(t){if(t!==n&&t.getProcedureDef){var r=t.getProcedureDef();return Blockly.Names.equals(r[0],e)}return!1}))},Blockly.WorkspaceDragger.prototype.drag=function(e){if(!this.workspace_.isFlyout){var t=this.startDragMetrics_,n=goog.math.Coordinate.sum(this.startScrollXY_,e),r=Math.min(n.x,-t.contentLeft),o=Math.min(n.y,-t.contentTop);r=Math.max(r,t.viewWidth-t.contentLeft-t.contentWidth),o=Math.max(o,t.viewHeight-t.contentTop-t.contentHeight),r=-r-t.contentLeft,o=-o-t.contentTop,this.updateScroll_(r,o)}},n(89265),n(2866);var c=n(8969);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Blockly.Workspace.prototype.wait_events=[],Blockly.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0;var e=i.Z.instance.toolbar;e.setHasRedoStack(),e.setHasUndoStack(),Blockly.Events.clearPendingUndo()},Blockly.Workspace.prototype.fireChangeListener=function(e){if(e.recordUndo){this.undoStack_.push(e),this.redoStack_.length=0,this.undoStack_.length>this.MAX_UNDO&&this.undoStack_.unshift();var t=i.Z.instance.toolbar;t.setHasRedoStack(),t.setHasUndoStack()}this.listeners_.slice().forEach((function(t){t(e)}))},Blockly.Workspace.prototype.getTradeDefinitionBlock=function(){return this.getAllBlocks(!0).find((function(e){return"trade_definition"===e.type}))},Blockly.Workspace.prototype.waitForBlockEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new c.Z;return this.wait_events.some((function(n){return n.blockId===e&&n.type===t}))||this.wait_events.push({blockId:e,promise:n,type:t}),n},Blockly.Workspace.prototype.waitForBlockEvent=function(e){var t=e.block_type,n=e.event_type,r=e.timeout,o=new c.Z;return this.wait_events.push({block_type:t,event_type:n,promise:o}),r&&setTimeout((function(){o.isPending&&o.reject()}),r),o},Blockly.Workspace.prototype.dispatchBlockEventEffects=function(e){var t=this;this.wait_events.forEach((function(n,r){if(e.blockId){var o=t.getBlockById(e.blockId);if(o){var i=n.block_type===o.type,a=null===n.event_type||n.event_type===e.type;i&&a&&setTimeout((function(){n.promise.resolve(),t.wait_events.splice(r,1)}),500)}}}))},Blockly.Workspace.prototype.getAllFields=function(e){return this.getAllBlocks(e).reduce((function(e,t){return t.inputList.forEach((function(t){return e.push.apply(e,function(e){if(Array.isArray(e))return s(e)}(n=t.fieldRow)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var n})),e}),[])},n(85540);var u=n(24503);Blockly.WorkspaceSvg.prototype.onMouseDown_=function(e){e instanceof MouseEvent&&Blockly.derivWorkspace.cachedParentSvg_.dispatchEvent(new e.constructor(e.type,e));var t=this.getGesture(e);t&&t.handleWsStart(e,this)},Blockly.WorkspaceSvg.prototype.centerOnBlock=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.scrollbar){var n=this.getBlockById(e);if(n){var r=n.getRelativeToSurfaceXY(),o=n.getHeightWidth(),i=r.y+o.height/2,a=this.RTL?-1:1,l=r.x+a*o.width/2,c=this.scale,s=l*c,u=i*c,d=this.getMetrics(),p=s-d.contentLeft,f=u-d.contentTop,m=p-d.viewWidth/2,h=f-d.viewHeight/2;t&&Blockly.hideChaff(),this.scrollbar.set(m,h)}}else console.warn("Tried to scroll a non-scrollable workspace.")},Blockly.WorkspaceSvg.prototype.addBlockNode=function(e){var t=i.Z.instance.flyout,n=Blockly.Xml.domToBlock(e,t.getFlyout().workspace_),r=this.getTopBlocks(!0),o=t.getFlyout().createBlock(!1,n);if(r.length){var a=r[r.length-1],l=a.getRelativeToSurfaceXY(),c=a.startHat_?Blockly.BlockSvg.START_HAT_HEIGHT:0,s=l.y+a.getHeightWidth().height+c+30;o.moveBy(l.x,s)}Blockly.svgResize(o.workspace),this.centerOnBlock(o.id,!1)},Blockly.WorkspaceSvg.prototype.cleanUp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.setResizesEnabled(!1),Blockly.Events.setGroup(Blockly.Events.getGroup()||!0);var o=0!==n.length,i=o?n:this.getTopBlocks(!0),a=i.filter((function(e){return e.isMainBlock()})).sort((function(e,t){var n=function(e){return r.v.mainBlocks.findIndex((function(t){return t===e.type}))};return n(e)-n(t)})),l=Math.ceil(a.length/2),c=t;if(a.length){var s=0;a.forEach((function(n,r){r===(s+1)*l&&(c=t,s++);var i=n.getRelativeToSurfaceXY(),u=o?e:-i.x,d=c-(o?0:i.y);if(0===s)n.moveBy(u,d);else{var p,f=(s-1)*l,m=null===(p=a.slice(f,f+l))||void 0===p?void 0:p.reduce((function(e,t){return e.getHeightWidth().width>t.getHeightWidth().width?e:t}),{getHeightWidth:function(){return{width:0}}}),h=u+m.getHeightWidth().width+Blockly.BlockSvg.MIN_BLOCK_X;o||(h+=m.getRelativeToSurfaceXY().x),n.moveBy(h,d)}n.snapToGrid(),c=n.getRelativeToSurfaceXY().y+n.getHeightWidth().height+Blockly.BlockSvg.MIN_BLOCK_Y}));var u=a.reduce((function(e,t){return e.getRelativeToSurfaceXY().y+e.getHeightWidth().height>t.getRelativeToSurfaceXY().y+t.getHeightWidth().height?e:t}),{getRelativeToSurfaceXY:function(){return{y:0}},getHeightWidth:function(){return{height:0}}});c=u.getRelativeToSurfaceXY().y+u.getHeightWidth().height+Blockly.BlockSvg.MIN_BLOCK_Y}i.filter((function(e){return!e.isMainBlock()})).forEach((function(t){var n=t.getRelativeToSurfaceXY(),r=o?e:-n.x,i=c-(o?0:n.y);t.moveBy(r,i),t.snapToGrid(),c=t.getRelativeToSurfaceXY().y+t.getHeightWidth().height+Blockly.BlockSvg.MIN_BLOCK_Y})),Blockly.Events.setGroup(!1),this.setResizesEnabled(!0)},Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var e=Blockly.WorkspaceSvg.getDimensionsPx_(this.toolbox_),t=Blockly.WorkspaceSvg.getDimensionsPx_(this.flyout_),n=Blockly.svgSize(this.getParentSvg());this.toolbox_&&(this.toolboxPosition===Blockly.TOOLBOX_AT_TOP||this.toolboxPosition===Blockly.TOOLBOX_AT_BOTTOM?n.height-=e.height:this.toolboxPosition!==Blockly.TOOLBOX_AT_LEFT&&this.toolboxPosition!==Blockly.TOOLBOX_AT_RIGHT||(n.width-=e.width));var r=Blockly.WorkspaceSvg.getContentDimensions_(this,n),o=0,i=0;return this.toolbox_&&this.toolboxPosition===Blockly.TOOLBOX_AT_LEFT&&(i=50,o=e.width),this.toolbox_&&this.toolboxPosition===Blockly.TOOLBOX_AT_TOP&&(i=e.height+50),{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,viewHeight:n.height,viewWidth:n.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:i,absoluteLeft:o,toolboxWidth:e.width,toolboxHeight:e.height,flyoutWidth:t.width,flyoutHeight:t.height,toolboxPosition:this.toolboxPosition}},Blockly.WorkspaceSvg.prototype.paste=function(e){this.rendered&&(this.currentGesture_&&this.currentGesture_.cancel(),"comment"===e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):((0,u.kH)(this,e.getAttribute("type")),this.pasteBlock_(e)))},Blockly.WorkspaceSvg.prototype.showContextMenu_=function(e){if(!this.options.readOnly&&!this.isFlyout){var t=[],n=this.getTopBlocks(!0),r=this.getAllBlocks(!0);if(t.push(Blockly.ContextMenu.wsUndoOption(this)),t.push(Blockly.ContextMenu.wsRedoOption(this)),this.scrollbar&&t.push(Blockly.ContextMenu.wsCleanupOption(this,n.length)),this.options.collapse){var o=r.some((function(e){return e.isCollapsed()})),i=r.some((function(e){return!e.isCollapsed()}));t.push(Blockly.ContextMenu.wsExpandOption(o,r)),t.push(Blockly.ContextMenu.wsCollapseOption(i,r))}this.options.comments&&t.push(Blockly.ContextMenu.workspaceCommentOption(this,e)),t.push(Blockly.ContextMenu.wsDeleteOption(this,n)),Blockly.ContextMenu.show(e,t,this.RTL)}},Blockly.WorkspaceSvg.prototype.dispose=function(){var e=this,t=function(){e.rendered=!1,e.currentGesture_&&e.currentGesture_.cancel(),Blockly.WorkspaceSvg.superClass_.dispose.call(e),e.svgGroup_&&(goog.dom.removeNode(e.svgGroup_),e.svgGroup_=null),e.svgBlockCanvas_=null,e.svgBubbleCanvas_=null,e.toolbox_&&(e.toolbox_.dispose(),e.toolbox_=null),e.flyout_&&(e.flyout_.dispose(),e.flyout_=null),e.trashcan&&(e.trashcan.dispose(),e.trashcan=null),e.scrollbar&&(e.scrollbar.dispose(),e.scrollbar=null),e.zoomControls_&&(e.zoomControls_.dispose(),e.zoomControls_=null),e.audioManager_&&(e.audioManager_.dispose(),e.audioManager_=null),e.grid_&&(e.grid_.dispose(),e.grid_=null),e.toolboxCategoryCallbacks_&&(e.toolboxCategoryCallbacks_=null),e.flyoutButtonCallbacks_&&(e.flyoutButtonCallbacks_=null),e.options.parentWorkspace||goog.dom.removeNode(e.getParentSvg().parentNode),e.resizeHandlerWrapper_&&(Blockly.unbindEvent_(e.resizeHandlerWrapper_),e.resizeHandlerWrapper_=null)};if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var n=i.Z.instance.setLoading;n(!0),setTimeout((function(){t(),n(!1)}),50)}else t()},Blockly.WorkspaceSvg.prototype.asyncClear=function(){var e=this,t=i.Z.instance.setLoading;return t(!0),new Promise((function(n){e.clear(),t(!1),n()}))},n(62911),n(31925),n(3013);var d=n(55432);Blockly.Tooltip.HOVER_MS=50,Blockly.Tooltip.show_=function(){var e;if(Blockly.Tooltip.DIV=(Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_,Blockly.Tooltip.DIV),!Blockly.Tooltip.blocked_){for(Blockly.Tooltip.DIV.innerHTML="",e=Blockly.Tooltip.element_.tooltip;"function"==typeof e;)e=e();(e=(e=Blockly.utils.string.wrap(e,Blockly.Tooltip.LIMIT)).split("\n")).forEach((function(e,t){var n=document.createElement("div"),r=document.createElement("span");if(r.appendChild(document.createTextNode(e)),r.style.verticalAlign="middle",Blockly.Tooltip.DIV.appendChild(n),t)r.style.paddingLeft="24px";else{var o=document.createElement("img"),i=document.createElement("span");o.src=d.xY,o.style.paddingRight="8px",o.style.verticalAlign="middle",n.appendChild(i),i.appendChild(o)}n.appendChild(r)}));var t=Blockly.Tooltip.element_.RTL,n=document.documentElement.clientWidth,r=document.documentElement.clientHeight;Blockly.Tooltip.DIV&&(Blockly.Tooltip.DIV.style.direction=t?"rtl":"ltr"),Blockly.Tooltip.DIV.style.display="block",Blockly.Tooltip.visible=!0;var o=Blockly.Tooltip.lastX_;o=t?o-(Blockly.Tooltip.OFFSET_X+Blockly.Tooltip.DIV.offsetWidth):o+Blockly.Tooltip.OFFSET_X;var i=Blockly.Tooltip.lastY_+Blockly.Tooltip.OFFSET_Y;i+Blockly.Tooltip.DIV.offsetHeight>r+window.scrollY&&(i-=Blockly.Tooltip.DIV.offsetHeight+2*Blockly.Tooltip.OFFSET_Y),t&&(o=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,o)),o+Blockly.Tooltip.DIV.offsetWidth>n+window.scrollX-2*Blockly.Tooltip.MARGINS&&(o=n-Blockly.Tooltip.DIV.offsetWidth-2*Blockly.Tooltip.MARGINS),Blockly.Tooltip.DIV.style.top="".concat(i,"px"),Blockly.Tooltip.DIV.style.left="".concat(o,"px")}},Blockly.Tooltip.hide=function(){var e;Blockly.Tooltip.visible&&Blockly.Tooltip.DIV&&(Blockly.Tooltip.visible=!1,setTimeout((function(){return Blockly.Tooltip.DIV.style.display="none"}),Blockly.Tooltip.HOVER_MS)),Blockly.Tooltip.showPid_&&clearTimeout(Blockly.Tooltip.showPid_),null!==(e=Blockly.Tooltip.DIV)&&void 0!==e&&e.style.direction||(Blockly.Tooltip.visible=!1,Blockly.Tooltip.DIV.style.display="none")}},96750:()=>{Blockly.createVirtualWorkspace_=function(e,t,n,r){t.parentWorkspace=null;var o=new Blockly.WorkspaceSvg(t,n,r);return o.scale=t.zoomOptions.startScale,e.appendChild(o.createDom("blocklyMainBackground")),o}},3013:()=>{Blockly.ScratchBlockComment.prototype.updateColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.getColour())}},31032:()=>{Blockly.utils.string={wrap:Blockly.utils.wrap}},89265:()=>{Blockly.VariableMap.prototype.createVariable=function(e,t,n,r,o){var i=this.getVariable(e,t);if(i)return i;if(n&&(i=this.getVariableById(n)))return i;var a=n||Blockly.utils.genUid(),l=t||"";return i=new Blockly.VariableModel(this.workspace,e,l,a,r,o),this.variableMap_[l]?this.variableMap_[l].push(i):this.variableMap_[l]=[i],i}},2866:()=>{Blockly.Variables.allUsedVarModels=function(e){var t=e.getAllBlocks(!1),n=Object.create(null);t.forEach((function(e){var t=e.getVarModels();t&&t.forEach((function(e){var t=e.getId();t&&(n[t]=e)}))}));var r=[];return Object.keys(n).forEach((function(e){r.push(n[e])})),r},Blockly.Variables.generateVariableFieldDom=function(e){var t=document.createElement("field");t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type);var n=document.createTextNode(e.name);return t.appendChild(n),t}},85540:()=>{Blockly.WorkspaceAudio.prototype.preload=function(){}},62911:()=>{Blockly.Xml.NODE_BLOCK="BLOCK",Blockly.Xml.NODE_BUTTON="BUTTON",Blockly.Xml.NODE_LABEL="LABEL",Blockly.Xml.NODE_SHADOW="SHADOW",Blockly.Xml.NODE_INPUT="INPUT"},41383:(e,t,n)=>{"use strict";n.d(t,{M:()=>l,p:()=>a});var r=n(46782),o=n.n(r),i=n(62893),a=function(e){var t=e.data,n=e.filename,r=e.type,i=new Blob([t],{type:r});o().saveAs(i,n)},l=function(e,t){var n=i.v.opposites[t.toUpperCase()];if(!n)return i.v.NOT_AVAILABLE_DROPDOWN_OPTIONS;var r=n.map((function(e){return Object.entries(e)[0].reverse()}));return"both"!==e?r.filter((function(t){return t[1]===e})):r}},81937:(e,t,n)=>{"use strict";n.d(t,{cM:()=>F,nf:()=>R,YQ:()=>U,zD:()=>O,oG:()=>C,UR:()=>P,zJ:()=>j,$9:()=>z,a1:()=>T,yW:()=>D,P_:()=>M,Hh:()=>S,Y2:()=>w});var r=n(92273),o=n(41383),i=n(62893),a=n(8399);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.blocks_pending_reconnect={},this.workspace=this.createWorkspace(),this.workspace_variables={},this.has_market_block=!1,this.exception_blocks=["r_100"]}var t,o;return t=e,o=[{key:"getConversions",value:function(){var e=this,t=function(t,n,r,o){var i=e.workspace.newBlock(n),a=Array.from(t.children),l=a.find((function(e){return"mutation"===e.tagName.toLowerCase()}));if(l){var c=parseInt(l.getAttribute("items"))||0;if(c>0){for(var s=0;s<c;s++)i.onIconClick();a.filter((function(e){return"value"===e.tagName.toLowerCase()})).forEach((function(t){var n=t.getAttribute("name"),r=parseInt(n.replace(/[^0-9]+/g,""));Array.from(t.children).forEach((function(t){var n=e.convertBlockNode(t,i),a=i.getBlocksInStatement("STACK").find((function(e,t){return r===t}));a.getInput(o).connection.connect(n.outputConnection)})),t.parentNode.removeChild(t)}))}}var u=e.generateUniqueVariable(r),d=e.workspace.newBlock("variables_get");return d.setFieldValue(u.getId(),"VAR"),i.setFieldValue(u.getId(),"VARIABLE"),{block_to_attach:d,statement_blocks:[i]}},n=function(t,n,r){var o=e.workspace.newBlock(n),i={input_list:[{old:"INPUT",new:"INPUT_LIST"}],period:[{old:"PERIOD",new:"PERIOD"}],fast_ema_period:[{old:"FAST_EMA_PERIOD",new:"FAST_EMA_PERIOD"}],signal_ema_period:[{old:"SMA_PERIOD",new:"SIGNAL_EMA_PERIOD"},{old:"SIGNAL_EMA_PERIOD",new:"SIGNAL_EMA_PERIOD"}],slow_ema_period:[{old:"SLOW_EMA_PERIOD",new:"SLOW_EMA_PERIOD"}],std_dev_multiplier_up:[{old:"UPMULTIPLIER",new:"UPMULTIPLIER"}],std_dev_multiplier_down:[{old:"DOWNMULTIPLIER",new:"DOWNMULTIPLIER"}]};switch(n){case"bb_statement":case"bba_statement":var a=o.getField("BBRESULT_LIST");a&&a.setValue(e.getFieldValue(t,"BBRESULT_LIST"));break;case"macda_statement":var l=o.getField("MACDFIELDS_LIST");l&&l.setValue(e.getFieldValue(t,"MACDFIELDS_LIST"))}(o.required_child_blocks||[]).forEach((function(t){var n=e.workspace.newBlock(t);o.getLastConnectionInStatement("STATEMENT").connect(n.previousConnection)})),o.getBlocksInStatement("STATEMENT").forEach((function(n){var r=i[n.type];r&&r.forEach((function(r){var i=t.querySelector('value[name="'.concat(r.old,'"]'));if(i){var a=n.getInput(r.new);Array.from(i.children).forEach((function(t){var n=e.convertBlockNode(t,o);"shadow"===t.tagName.toLowerCase()&&n.setShadow(!0),a.connection.connect(n.outputConnection)})),i.parentNode.removeChild(i)}}))}));var c=e.generateUniqueVariable(r),s=e.workspace.newBlock("variables_get");return s.setFieldValue(c.getId(),"VAR"),o.setFieldValue(c.getId(),"VARIABLE"),{block_to_attach:s,statement_blocks:[o]}},o=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.workspace.newBlock("trade_definition_tradeoptions"),o=t;if(n)return!1;var i=Array.from(o.children),a=0,l=!1;return i.filter((function(e){return"value"===e.tagName.toLowerCase()})).forEach((function(e){var t=e.getAttribute("name");"BARRIEROFFSET"===t||"SECONDBARRIEROFFSET"===t?a++:"PREDICTION"===t&&(l=!0)})),a>0&&r.createBarrierInputs({allow_both_types:!0,values:[1,-1]}),l&&r.createPredictionInput([0]),["DURATIONTYPE_LIST","CURRENCY_LIST","BARRIEROFFSETTYPE_LIST","SECONDBARRIEROFFSETTYPE_LIST"].forEach((function(t){var n=r.getField(t);n&&n.setValue(e.getFieldValue(o,t))})),{block_to_attach:r}};return{bb:function(e){return n(e,"bb_statement","bb")},bba:function(e){return n(e,"bba_statement","bba")},ema:function(e){return n(e,"ema_statement","ema")},emaa:function(e){return n(e,"emaa_statement","emaa")},lists_create_with:function(e){return t(e,"lists_create_with",(0,r.localize)("list"),"VALUE")},macda:function(e){return n(e,"macda_statement","macda")},market:function(t){return e.has_market_block=!0,o(t)},rsi:function(e){return n(e,"rsi_statement","rsi")},rsia:function(e){return n(e,"rsia_statement","rsia")},sma:function(e){return n(e,"sma_statement","sma")},smaa:function(e){return n(e,"smaa_statement","smaa")},text_join:function(e){return t(e,"text_join",(0,r.localize)("text"),"TEXT")},trade:function(t){var n=e.workspace.newBlock("trade_definition"),r={trade_definition_market:["MARKET_LIST","SUBMARKET_LIST","SYMBOL_LIST"],trade_definition_tradetype:["TRADETYPECAT_LIST","TRADETYPE_LIST"],trade_definition_contracttype:["TYPE_LIST"],trade_definition_candleinterval:["CANDLEINTERVAL_LIST"],trade_definition_restartbuysell:["TIME_MACHINE_ENABLED"],trade_definition_restartonerror:["RESTARTONERROR"]},o={};return Object.keys(r).forEach((function(n){var i=e.workspace.newBlock(n);r[n].forEach((function(n){i.setFieldValue(e.getFieldValue(t,n),n)})),o[n]=i})),Object.values(o).forEach((function(e){n.getLastConnectionInStatement("TRADE_OPTIONS").connect(e.previousConnection)})),{block_to_attach:n}},tradeOptions:o}}},{key:"getIllegalBlocks",value:function(){var e=[],t=a.Z.instance.active_symbols.active_symbols,n=i.v.opposites;return t.forEach((function(t){var n=t.symbol.toLowerCase();e.includes(n)||e.push(n)})),Object.keys(n).forEach((function(t){return e.push(t)})),e}},{key:"createWorkspace",value:function(){var e=new Blockly.Options({media:"".concat(n.p,"media/")}),t=new DocumentFragment;return Blockly.createVirtualWorkspace_(t,e,!1,!1)}},{key:"getFieldValue",value:function(e,t){var n=e.querySelector('field[name="'.concat(t,'"]'));return n?n.textContent:""}},{key:"getFirstBlockInStack",value:function(e){var t=e.previousConnection,n=e.getPreviousBlock();if(!t)return e;for(;n&&n!==e.getSurroundParent();)t=n.previousConnection,n=n.getPreviousBlock();return t.sourceBlock_}},{key:"updateRenamedFields",value:function(e){var t={MARKET_LIST:{volidx:"synthetic_index"},TRADETYPECAT_LIST:{endsinout:"inout",staysinout:"inout",callputequal:"callput"},TRADETYPE_LIST:{risefall:"callput",risefallequals:"callputequal"}};return Object.keys(t).forEach((function(n){var r=e.querySelector('field[name="'.concat(n,'"]'));if(r){var o=r.innerText;Object.keys(t[n]).forEach((function(e){o===e&&(r.innerText=t[n][e])}))}})),e}},{key:"naivelyFixLegacyStrategyAfterConversion",value:function(){var e=this,t=this.workspace.getTradeDefinitionBlock(),n=t.getBlocksInStatement("INITIALIZATION").length>0;t&&t.getBlocksInStatement("SUBMARKET").forEach((function(r){if("trade_definition_tradeoptions"!==r.type&&e.has_market_block&&!n){var o=t.getLastConnectionInStatement("INITIALIZATION");r.unplug(!0),o.connect(r.previousConnection)}}))}},{key:"generateUniqueVariable",value:function(e){for(var t=e,n=0;Object.values(this.workspace_variables).includes(t);)t=e+ ++n;var r=Blockly.Variables.getOrCreateVariablePackage(this.workspace,"",t,"");return this.workspace_variables[r.id_]=t,r}},{key:"convertStrategy",value:function(e,t){var n=this;Blockly.Events.disable();var r=this.updateRenamedFields(e);if(e.hasAttribute("is_dbot")&&"true"===e.getAttribute("is_dbot"))return Blockly.Events.enable(),r;if(this.getIllegalBlocks().some((function(e){if(!n.exception_blocks.includes(e))return!!r.querySelector('block[type="'.concat(e,'"]'))})))return t&&t(),Blockly.Events.enable(),Blockly.Xml.textToDom("<xml />");var o=[],i=[];Array.from(r.children).forEach((function(e){switch(e.nodeName.toLowerCase()){case"block":case"shadow":i.push(e);break;case"variables":o.push.apply(o,function(e){if(Array.isArray(e))return c(e)}(t=e.children)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}var t}));var a=function(e){e.forEach((function(e){var t=e.getAttribute("id"),r=e.textContent;if(!n.workspace_variables[t]){var o=Blockly.Variables.getOrCreateVariablePackage(n.workspace,t,r,"");n.workspace_variables[o.id_]=o.name}}))};a(o),a(r.querySelectorAll('field[name="VAR"]')),i.forEach((function(e){return n.convertBlockNode(e)})),Object.keys(this.blocks_pending_reconnect).forEach((function(e){var t=n.workspace.getBlockById(e),r=n.blocks_pending_reconnect[e],o=t.previousConnection;if(o){var i=o.targetConnection,a=o;if(r.reverse().forEach((function(e){a.connect(e.nextConnection),a=e.previousConnection})),i){for(var l=t.previousConnection,c=t.getPreviousBlock();c&&c!==c.getSurroundParent();)l=c.previousConnection,c=c.getPreviousBlock();i.connect(l)}}})),this.naivelyFixLegacyStrategyAfterConversion(),this.workspace.getAllBlocks(!0).forEach((function(e){e.initSvg(),e.render()})),this.workspace.cleanUp();var l=Blockly.Xml.workspaceToDom(this.workspace);return e.hasAttribute("collection")&&"true"===e.getAttribute("collection")&&l.setAttribute("collection","true"),l.setAttribute("is_dbot","true"),this.workspace=null,Blockly.Events.enable(),l}},{key:"convertBlockNode",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getConversions(),o=e.getAttribute("type"),i=Object.keys(r).includes(o),a=null,l=e.getAttribute("collapsed")&&"true"===e.getAttribute("collapsed"),c=e.getAttribute("movable")&&"false"===e.getAttribute("movable"),s=e.getAttribute("deletable")&&"false"===e.getAttribute("deletable"),u=e.getAttribute("disabled")&&"true"===e.getAttribute("disabled"),d=function(e){e.setCollapsed(l),e.setMovable(!c),e.setDeletable(!s),e.setDisabled(u)};if(i){var p=r[o](e);p.block_to_attach&&(a=p.block_to_attach,d(a)),n&&p.statement_blocks&&p.statement_blocks.forEach((function(e){d(e);var r=t.getClosestLegalPreviousConnection(n);if(r){var o=r.sourceBlock_;t.blocks_pending_reconnect[o.id]||(t.blocks_pending_reconnect[o.id]=[]),t.blocks_pending_reconnect[o.id].push(e)}}))}else if(Object.keys(Blockly.Blocks).includes(o)&&(a=this.workspace.newBlock(o),d(a),a)){var f=Array.from(e.children).find((function(e){return"mutation"===e.tagName.toLowerCase()}));f&&a.domToMutation&&a.domToMutation(f)}return a?(n&&(a.conversion_parent=n),Array.from(e.children).forEach((function(e){switch(e.tagName.toLowerCase()){case"field":var n=e.getAttribute("name"),r=a.getField(n);if(r)if(r instanceof Blockly.FieldVariable){var o=e.getAttribute("id"),i=e.innerText.trim(),l=Blockly.Variables.getOrCreateVariablePackage(t.workspace,o,i,"");t.workspace_variables[l.id_]=i,r.setValue(l.id_)}else r.setValue(e.innerText);break;case"value":t.processValueInputs(a,e);break;case"statement":var c=e.getAttribute("name");t.processStatementInputs(a,c,e);break;case"next":var s=e.closest("statement");if(s){var u=s.getAttribute("name");t.processStatementInputs(a,u,e,a.conversion_parent)}else a.nextConnection&&Array.from(e.children).forEach((function(e){var n=t.convertBlockNode(e);a.nextConnection.connect(n.previousConnection)}));break;case"comment":var d="true"!==e.getAttribute("pinned"),p=e.innerText;a.comment=new Blockly.ScratchBlockComment(a,p,null,0,0,d),a.comment.iconXY_={x:0,y:0},a.comment.setVisible(!0)}})),a):(console.warn("Unrecognised block found.",o),!1)}},{key:"processValueInputs",value:function(e,t){var n=this,r=t.getAttribute("name"),o=e.getInput(r);if(!o)return console.warn("Unrecognised value input",r),!1;Array.from(t.children).forEach((function(t){var r=n.convertBlockNode(t,e);if(!r)return console.warn("Illegal child.",t.getAttribute("type")),!1;"shadow"===t.tagName.toLowerCase()&&r.setShadow(!0),o.connection.connect(r.outputConnection)}))}},{key:"processStatementInputs",value:function(e,t,n){var r=this,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)||e;if(!o.getInput(t))return console.warn("Unrecognised statement input",t),!1;Array.from(n.children).forEach((function(e){var n=r.convertBlockNode(e,o);if(!n)return console.warn("Unrecognised child in statement",e.getAttribute("type")),!1;var i=o.getInput(t);i&&n.previousConnection&&i.connection.connect(n.previousConnection)}))}},{key:"getClosestLegalPreviousConnection",value:function(e){if(i.v.procedureDefinitionBlocks.includes(e.type)){if(0===e.getBlocksInStatement("STACK").length){var t=e.getInput("STACK"),n=this.workspace.newBlock("useless_block");return t.connection.connect(n.previousConnection),n.previousConnection}return e.getInputTargetBlock("STACK").previousConnection}for(var r=this.getFirstBlockInStack(e),o=this.isConnectedToProtectedStatementInput(r);o;){var a=r.getParent();a&&(r=a,o=this.isConnectedToProtectedStatementInput(r))}return r.previousConnection?r.previousConnection:!!e.conversion_parent&&this.getClosestLegalPreviousConnection(e.conversion_parent)}},{key:"isConnectedToProtectedStatementInput",value:function(e){var t=this.getFirstBlockInStack(e).previousConnection;if(t){var n=t.targetConnection;if(n){var r=n.sourceBlock_,o=r.getInputWithConnection(n),i=r.protected_statements||[];if(o&&i.includes(o.name))return!0}}return!1}}],o&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===l(o)?o:String(o)),r)}var o}(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),u=n(49568),d=n(24503),p=n(51609),f=n(27675),m=n(77794),h=n(62004);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(){g=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new O(o||[]);return r(a,"_invoke",{value:w(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var v=Object.getPrototypeOf,_=v&&v(v(x([])));_&&_!==t&&n.call(_,i)&&(h=_);var b=m.prototype=p.prototype=Object.create(h);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==y(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(b),c(b,l,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function b(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){b(i,r,o,a,l,"next",e)}function l(e){b(i,r,o,a,l,"throw",e)}a(void 0)}))}}var E=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Blockly.derivWorkspace).getAllBlocks(!0).find((function(e){return"trade_definition_tradetype"===e.type}));return"multiplier"===(null==e?void 0:e.getFieldValue("TRADETYPE_LIST"))?"trade_definition_multiplier":"trade_definition_tradeoptions"},w=function(){var e,t,n,r,o,i,a,l,c,s=((c=(l=(null===(o=Blockly)||void 0===o||null===(i=o.derivWorkspace)||void 0===i||null===(a=i.trashcan)||void 0===a?void 0:a.svgGroup_.getAttribute("transform")).match(/translate\((-?\d*\.?\d+),(-?\d*\.?\d+)\)/))&&l.length>2?{x:parseFloat(l[1]),y:parseFloat(l[2])}:null)||u.P.emit("Error","Invalid String"),{translate_X:c.x,translate_Y:c.y}),d=s.translate_X,p=s.translate_Y,f=null===(e=Blockly.selected)||void 0===e?void 0:e.getSvgRoot().getBoundingClientRect(),m=200,y=(null==f?void 0:f.left)||0,v=(null==f?void 0:f.top)||0,_=[E(),"trade_definition","purchase","before_purchase"];null!=_&&_.includes(null===(t=Blockly)||void 0===t||null===(n=t.selected)||void 0===n?void 0:n.type)&&v>=p-m&&v<=p+m&&y>=d-m&&y<=d+m&&u.P.emit("ui.log.error",null===(r=h.T[Blockly.selected.category_])||void 0===r?void 0:r.default)},S=function(){var e,t,n;if(null!==f.Z&&void 0!==f.Z&&f.Z.instance){var r=f.Z.instance.load_modal,o=null!==(e=null==r||null===(t=r.dashboard_strategies)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.name)&&void 0!==e?e:i.v.default_file_name;if(document.title.indexOf("-")>-1){var a=document.title.substr(document.title.indexOf("-")),l=document.title.replace(a,"- ".concat(o));document.title=l}else document.title+=" - ".concat(o)}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"@deriv/bot",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;n.setAttribute("is_dbot","true"),n.setAttribute("collection",t?"true":"false");var r=Blockly.Xml.domToPrettyText(n);(0,o.p)({data:r,type:"text/xml;charset=utf-8",filename:"".concat(e,".xml")})},B=function(e){return new Promise((function(t){return setTimeout(t,e)}))},O=function(){var e=k(g().mark((function e(t){var n,o,i,a,l,c,h,y,v,_,b,k,E,w;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.block_string,o=t.drop_event,i=t.file_name,a=t.strategy_id,l=t.from,c=t.workspace,h=t.showIncompatibleStrategyDialog,null!==f.Z&&void 0!==f.Z&&f.Z.instance&&c){e.next=3;break}return e.abrupt("return");case 3:return(y=f.Z.instance.setLoading)(!0),e.next=7,B(100);case 7:if(v=function(){y(!1);var e=(0,r.localize)("XML file contains unsupported elements. Please check or modify file.");u.P.emit("ui.log.error",e)},e.prev=8,!(new DOMParser).parseFromString(n,"application/xml").getElementsByTagName("parsererror").length){e.next=12;break}return e.abrupt("return",v());case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(8),e.abrupt("return",v());case 17:e.prev=17,_=Blockly.Xml.textToDom(n),e.next=24;break;case 21:return e.prev=21,e.t1=e.catch(17),e.abrupt("return",v());case 24:if(b=new s,_=b.convertStrategy(_,h),(k=_.querySelectorAll("block")).length){e.next=29;break}return e.abrupt("return",v());case 29:if(!Array.from(k).some((function(e){var t=e.getAttribute("type");return!Object.keys(Blockly.Blocks).includes(t)}))){e.next=32;break}return e.abrupt("return",v());case 32:if(e.prev=32,E=_.hasAttribute("collection")&&"true"===_.getAttribute("collection"),w=E?"load_collection".concat(Date.now()):"dbot-load".concat(Date.now()),Blockly.Events.setGroup(w),(0,d.kH)(c,Array.from(k).map((function(e){return e.getAttribute("type")}))),!E){e.next=41;break}x(_,o,w,c),e.next=51;break;case 41:return e.next=43,A(_,w,c);case 43:if(c!==Blockly.derivWorkspace){e.next=51;break}return f.Z.instance.save_modal.updateBotName(i),c.clearUndo(),c.current_strategy_id=a||Blockly.utils.genUid(),e.next=51,(0,p.l5)(_,l);case 51:c.getAllBlocks().forEach((function(e){e.disabled&&(e.is_user_disabled_state=!0)})),c===Blockly.derivWorkspace&&u.P.emit("ui.log.success",{log_type:m.F$.LOAD_BLOCK}),e.next=59;break;case 55:return e.prev=55,e.t2=e.catch(32),console.error(e.t2),e.abrupt("return",v());case 59:return e.prev=59,y(!1),e.finish(59);case 62:case"end":return e.stop()}}),e,null,[[8,14],[17,21],[32,55,59,62]])})));return function(t){return e.apply(this,arguments)}}(),x=function(e,t,n,r){Blockly.Events.setGroup(n);var o=Blockly.Xml.domToWorkspace(e,r).map((function(e){return r.getBlockById(e)}));t&&0!==Object.keys(t).length?function(e,t,n){var r=t||{},o=r.clientX,i=void 0===o?0:o,a=r.clientY,l=void 0===a?0:a,c=n.getMetrics(),s=1/n.scale,u=c.absoluteLeft-c.viewLeft,d=document.body.offsetHeight-c.viewHeight-c.viewTop,p=i?(i-u)*s:0,f=l?(l-d-76)*s:0;n.cleanUp(p,f,e)}(o,t,r):r.cleanUp()},A=function(){var e=k(g().mark((function e(t,n,r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Blockly.Events.setGroup(n),e.next=3,r.asyncClear();case 3:Blockly.Xml.domToWorkspace(t,r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),C=function(e){return new Promise((function(t,n){var o=e.getFieldValue("URL");-1===o.indexOf("http")&&(o="http://".concat(o));var i="/"===o.slice(-1)[0];if(!o.match(/[^/]*\.[a-zA-Z]{3}$/)&&!i)return n((0,r.localize)("Target must be an XML file"));if(i&&(o+="index.xml"),e.isKnownUrl(o))return e.setDisabled(!0),n((0,r.localize)("This URL is already loaded"));var a=function(){return n((0,r.localize)("An error occured while trying to load the URL"))};fetch(o).then((function(n){n.ok?n.text().then((function(n){(function(e,t){return new Promise((function(n,o){var i;try{i=Blockly.Xml.textToDom(e)}catch(e){return o((0,r.localize)("Unrecognized file format"))}try{i.hasAttribute("collection")&&"true"===i.getAttribute("collection")||o((0,r.localize)("Remote blocks to load must be a collection.")),I(i).then((function(){Array.from(i.children).forEach((function(e){return L(e,t)})),n()})).catch((function(){o()}))}catch(e){o((0,r.localize)("Unable to load the block file."))}}))})(n,e).then((function(){return t(e)})).catch(a)})):a()})).catch(a)}))},I=function(e){return new Promise((function(t,n){var r=[];Array.from(e.children).forEach((function(e){if("loader"===e.getAttribute("type")){e.remove();var t=Blockly.Xml.domToBlock(e,Blockly.derivWorkspace);r.push(C(t))}})),r.length?Promise.all(r).then(t,n):t([])}))},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("variables"===e.tagName.toLowerCase())return Blockly.Xml.domToVariables(e,Blockly.derivWorkspace);var n=e.getAttribute("type"),r=new s,o=Blockly.Xml.blockToDom(r.convertBlockNode(e));Array.from(o.getElementsByTagName("arg")).forEach((function(e){e.hasAttribute("varid")&&e.setAttribute("varId",e.getAttribute("varid"))})),(0,d.kH)(Blockly.derivWorkspace,n);var i=Blockly.Xml.domToBlock(o,Blockly.derivWorkspace);return t&&t.blocks_added_by_me.push(i),i},N=function(e,t){return e.forEach((function(e){var n,r;if("misplaced"===t&&e)u.P.emit("ui.log.error",null===(n=h.T[null==e?void 0:e.type])||void 0===n?void 0:n[t]);else if("missing"===t&&e)u.P.emit("ui.log.error",null===(r=h.T[e])||void 0===r?void 0:r[t]);else if("disabled"===t&&e){var o,i=!1,a=null===(o=h.T[e.type])||void 0===o?void 0:o[t];e.disabled&&a?(u.P.emit("ui.log.error",a),i=!0):!i&&e.childBlocks_&&e.childBlocks_.forEach((function(e){var n,r=null===(n=h.T[e.type])||void 0===n?void 0:n[t];r&&u.P.emit("ui.log.error",r)}))}}))},R=function(e){if(!e)return!1;var t=E(e),n=i.v.mandatoryMainBlocks,r=[t].concat(v(n)),o=function(e,t){return e.getAllBlocks().filter((function(e){if(t.includes(e.type))return 0===e.childBlocks_.length&&t.includes(e.category_)||null===e.parentBlock_}))}(e,r),a=function(e,t){return t.filter((function(t){return!e.getAllBlocks().some((function(e){return e.type===t}))}))}(e,r),l=function(e){return e.filter((function(e){var t=e.childBlocks_&&e.childBlocks_.some((function(e){return!0===e.disabled}));return!0===e.disabled||t}))}(o);return a&&N(a,"missing"),l&&N(l,"disabled"),0===[].concat(v(a),v(l)).length},D=function(e,t,n,r){var o=e.getMetrics(),i=o.viewLeft-o.contentLeft,a=o.viewTop-o.contentTop;n?(i+=r?t:-t,a+=-20):(i+=-20,a+=r?t:-t),e.scrollbar.set(i,a)},P=function(e,t,n){var r=e&&Blockly.Events.getGroup()||n||!0;Blockly.Events.setGroup(r),t(),e||Blockly.Events.setGroup(!1)},z=function(e){var t=Blockly.Events.recordUndo;Blockly.Events.recordUndo=!1,e(),Blockly.Events.recordUndo=t},j=function(e){Blockly.Events.disable(),e(),Blockly.Events.enable()},M=function(e,t){t.type===Blockly.Events.END_DRAG&&e.getAllBlocks().forEach((function(e){if(e.getParent()&&!e.is_user_disabled_state){var n=e.restricted_parents||[];if(0!==n.length){var r=!n.some((function(t){return e.isDescendantOf(t)}));P(!0,(function(){e.setDisabled(r)}),t.group),Blockly.Events.setGroup(!1)}}}))},F=function(e){return!e||"''"===e},U=function(e){var t=e.substring(1),n=parseInt(t,16);return.2126*(n>>16&255)+.7152*(n>>8&255)+.0722*(n>>0&255)<160}},51781:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(92273),o=n(8969),i=n(62893);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(){l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),l=new O(o||[]);return r(a,"_invoke",{value:w(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var f={};function m(){}function h(){}function y(){}var v={};u(v,i,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(x([])));g&&g!==t&&n.call(g,i)&&(v=g);var b=y.prototype=m.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(r,i,l,c){var s=p(e[r],e,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==a(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,c)}),(function(e){o("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return o("throw",e,l,c)}))}c(s.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=p(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=p(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),u(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(d(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(b),u(b,s,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function c(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===a(o)?o:String(o)),r)}var o}var d=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sortDropdownOptions=function(e,t){var n,o=function(e){if(Array.isArray(e))return s(e)}(n=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return o.sort((function(e,n){var o=t.call(r,e[1]),i=t.call(r,n[1]);return o&&!i?1:o===i?0:-1})),o},this.active_symbols=[],this.disabled_symbols=i.v.DISABLED_SYMBOLS,this.disabled_submarkets=i.v.DISABLED_SUBMARKETS,this.init_promise=new o.Z,this.is_initialised=!1,this.processed_symbols={},this.trading_times=n,this.ws=t}var t,n,a,d;return t=e,n=[{key:"retrieveActiveSymbols",value:(a=l().mark((function e(){var t,n,r,o=this,i=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],e.next=3,this.trading_times.initialise();case 3:if(t||!this.is_initialised){e.next=7;break}return e.next=6,this.init_promise;case 6:return e.abrupt("return",this.active_symbols);case 7:return this.is_initialised=!0,e.next=10,this.ws.authorized.activeSymbols();case 10:return n=e.sent,r=n.active_symbols,this.active_symbols=r,this.processed_symbols=this.processActiveSymbols(),this.trading_times.onMarketOpenCloseChanged=function(e){Object.keys(e).forEach((function(t){var n=o.active_symbols[t];n&&(n.exchange_is_open=e[t])})),o.changes=e,o.processActiveSymbols()},this.init_promise.resolve(),e.abrupt("return",this.active_symbols);case 17:case"end":return e.stop()}}),e,this)})),d=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){c(o,n,r,i,l,"next",e)}function l(e){c(o,n,r,i,l,"throw",e)}i(void 0)}))},function(){return d.apply(this,arguments)})},{key:"processActiveSymbols",value:function(){return this.active_symbols.reduce((function(e,t){if(i.v.DISABLED_SYMBOLS.includes(t.symbol)||i.v.DISABLED_SUBMARKETS.includes(t.submarket))return e;var n=function(e,n){return-1!==Object.keys(e).findIndex((function(e){return e===t[n]}))};n(e,"market")||(e[t.market]={display_name:t.market_display_name,submarkets:{}});var r=e[t.market].submarkets;n(r,"submarket")||(r[t.submarket]={display_name:t.submarket_display_name,symbols:{}});var o=r[t.submarket].symbols;return n(o,"symbol")||(o[t.symbol]={display_name:t.display_name,pip_size:"".concat(t.pip).length-2,is_active:!t.is_trading_suspended&&t.exchange_is_open}),e}),{})}},{key:"getAllSymbols",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[];return Object.keys(this.processed_symbols).forEach((function(r){if(!t||!e.isMarketClosed(r)){var o=e.processed_symbols[r],i=o.submarkets;Object.keys(i).forEach((function(e){var t=i[e],a=t.symbols;Object.keys(a).forEach((function(i){var l=a[i];n.push({market:r,market_display:o.display_name,submarket:e,submarket_display:t.display_name,symbol:i,symbol_display:l.display_name})}))}))}})),this.getSymbolsForBot(),n}},{key:"getSymbolsForBot",value:function(){var e=this,t=i.v.QUICK_STRATEGY.DISABLED,n=[];return Object.keys(this.processed_symbols).forEach((function(r){if(!e.isMarketClosed(r)){var o=e.processed_symbols[r].submarkets;Object.keys(o).forEach((function(e){if(!t.SUBMARKETS.includes(e)){var r=o[e],i=r.symbols;Object.keys(i).forEach((function(e){if(!t.SYMBOLS.includes(e)){var o=i[e];n.push({group:r.display_name,text:o.display_name,value:e})}}))}}))}})),n}},{key:"getMarketDropdownOptions",value:function(){var e=this,t=[];if(Object.keys(this.processed_symbols).forEach((function(n){var o=e.processed_symbols[n].display_name+(e.isMarketClosed(n)?" ".concat((0,r.localize)("(Closed)")):"");t.push([o,n])})),0===t.length)return i.v.NOT_AVAILABLE_DROPDOWN_OPTIONS;if(t.sort((function(e){return"synthetic_index"===e[1]?-1:1})),t.some((function(t){return e.isMarketClosed(t[1])}))){var n=this.sortDropdownOptions(t,this.isMarketClosed);return this.isMarketClosed("forex")?n.sort((function(e){return"synthetic_index"===e[1]?-1:1})):n}return t}},{key:"getSubmarketDropdownOptions",value:function(e){var t=this,n=[],o=this.processed_symbols[e];if(o){var a=o.submarkets;Object.keys(a).forEach((function(e){var o=a[e].display_name+(t.isSubmarketClosed(e)?" ".concat((0,r.localize)("(Closed)")):"");n.push([o,e])}))}return 0===n.length?i.v.NOT_AVAILABLE_DROPDOWN_OPTIONS:("synthetic_index"===e&&n.sort((function(e){return"random_index"===e[1]?-1:1})),this.sortDropdownOptions(n,this.isSubmarketClosed))}},{key:"getSymbolDropdownOptions",value:function(e){var t=this,n=Object.keys(this.processed_symbols).reduce((function(n,o){var i=t.processed_symbols[o].submarkets;return Object.keys(i).forEach((function(o){if(o===e){var a=i[o].symbols;Object.keys(a).forEach((function(e){var o=a[e].display_name+(t.isSymbolClosed(e)?" ".concat((0,r.localize)("(Closed)")):"");n.push([o,e])}))}})),n}),[]);return 0===n.length?i.v.NOT_AVAILABLE_DROPDOWN_OPTIONS:this.sortDropdownOptions(n,this.isSymbolClosed)}},{key:"isMarketClosed",value:function(e){var t=this,n=this.processed_symbols[e];return!n||Object.keys(n.submarkets).every((function(e){return t.isSubmarketClosed(e)}))}},{key:"isSubmarketClosed",value:function(e){var t=this,n=Object.keys(this.processed_symbols).find((function(n){var r=t.processed_symbols[n];return Object.keys(r.submarkets).includes(e)}));if(!n)return!0;var r=this.processed_symbols[n].submarkets[e];if(!r)return!0;var o=r.symbols;return Object.keys(o).every((function(e){return t.isSymbolClosed(e)}))}},{key:"isSymbolClosed",value:function(e){return this.active_symbols.some((function(t){return t.symbol===e&&(!t.exchange_is_open||t.is_trading_suspended)}))}}],n&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},99368:(e,t,n)=>{"use strict";n.d(t,{D:()=>g});var r=n(49568),o=n(64894),i=n(75974),a=n.n(i),l=n(55770),c=n(92273),s=n(24731);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}"deriv-app-staging-v".concat((0,l.formatDate)(new Date,"YYYYMMDD"),"-").concat((0,l.formatTime)(Date.now(),"HH:mm"));var f=["active_symbols","authorize","balance","buy","proposal","proposal_open_contract","run_proposal_or_direct_buy","transaction","ticks_history","history"];const m=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getRequestType=function(e){var t;return f.forEach((function(n){n in e&&!t&&(t=n)})),t},this.log=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;e&&e.length&&e.forEach((function(e){s.fy.logger.info(e.name,{name:e.name,startTime:e.startTimeDate,duration:e.duration,detail:e.detail,isBotRunning:t})}))},this.defineMeasure=function(e){var t;return!!e&&("history"===e?(performance.mark("ticks_history_end"),t=performance.measure("ticks_history","ticks_history_start","ticks_history_end")):(performance.mark("".concat(e,"_end")),t=performance.measure("".concat(e),"".concat(e,"_start"),"".concat(e,"_end"))),t.startTimeDate=new Date(Date.now()-t.startTime))},this.sendIsCalled=function(e){var t=e.response_promise,r=d(e.args,1)[0],o=n.getRequestType(r);return o&&performance.mark("".concat(o,"_start")),t.then((function(e){var t=n.getRequestType(e);t&&n.defineMeasure(t)})).catch((function(){})),t},this.sendRequestsStatistic=function(e){f.forEach((function(e){var t=performance.getEntriesByName(e);t&&t.length})),performance.clearMeasures()},this.config=t,this.debounced_calls={},this.addGlobalMethod()}var t,n;return t=e,(n=[{key:"sendWillBeCalled",value:function(e){var t=d(e.args,1)[0];"buy"===this.getRequestType(t)&&(performance.mark("first_proposal_or_run_end"),performance.getEntriesByName("bot-start","mark").length&&(performance.measure("run_proposal_or_direct_buy","bot-start","first_proposal_or_run_end"),performance.clearMarks("bot-start")))}},{key:"addGlobalMethod",value:function(){window&&(window.sendRequestsStatistic=this.sendRequestsStatistic)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var h=function(){var e=localStorage.getItem("active_loginid");return e&&"null"!==e?e:null};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(){v=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new O(o||[]);return r(a,"_invoke",{value:w(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(x([])));g&&g!==t&&n.call(g,i)&&(h=g);var b=m.prototype=p.prototype=Object.create(h);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==y(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(b),c(b,l,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function _(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var g=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=void 0,this.token=void 0,this.account_id=void 0,this.pip_sizes={},this.account_info={},this.is_running=!1,this.subscriptions=[],this.time_interval=null,this.has_activeSymbols=!1,this.reconnectIfNotConnected=function(){console.log("connection state: ",t.api.connection.readyState),1!==t.api.connection.readyState&&(console.log("Info: Connection to the server was closed, trying to reconnect."),t.init())},this.getActiveSymbols=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){_(i,r,o,a,l,"next",e)}function l(e){_(i,r,o,a,l,"throw",e)}a(void 0)}))}}(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,o.l6)((function(){return t.api.send({active_symbols:"brief"})})).then((function(e){var n=e.active_symbols,r=void 0===n?[]:n,o={};r.length&&(t.has_activeSymbols=!0),r.forEach((function(e){var t=e.symbol,n=e.pip;o[t]=+(+n).toExponential().substring(3)})),t.pip_sizes=o,t.toggleRunButton(!1)}));case 1:case"end":return e.stop()}}),e)}))),this.toggleRunButton=function(e){var t=document.querySelector("#db-animation__run-button");t&&(t.disabled=e)}}var t,n;return t=e,n=[{key:"init",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h()&&(this.toggleRunButton(!0),n&&this.terminate(),this.api=(e="wss://".concat((0,l.getSocketURL)(),"/websockets/v3?app_id=").concat((0,l.getAppId)(),"&l=").concat((0,c.getLanguage)(),"&brand=").concat(l.website_name.toLowerCase()),t=new WebSocket(e),new(a())({connection:t,middleware:new m({})})),this.initEventListeners(),this.authorizeAndSubscribe(),this.time_interval&&clearInterval(this.time_interval),this.time_interval=null,this.getTime())}},{key:"getConnectionStatus",value:function(){var e;if(null!==(e=this.api)&&void 0!==e&&e.connection){var t=this.api.connection.readyState;return o.Px[t]||"Unknown"}return"Socket not initialized"}},{key:"terminate",value:function(){console.log("connection terminated"),this.api&&this.api.disconnect()}},{key:"initEventListeners",value:function(){window&&(window.addEventListener("online",this.reconnectIfNotConnected),window.addEventListener("focus",this.reconnectIfNotConnected))}},{key:"createNewInstance",value:function(e){this.account_id!==e&&this.init(!0)}},{key:"authorizeAndSubscribe",value:function(){var e,t,n,o=this,i=(e=h(),{token:(null==(n=(t=JSON.parse(localStorage.getItem("client.accounts"))||void 0)&&t[e]||{})?void 0:n.token)||void 0,account_id:e||void 0}),a=i.token,l=i.account_id;a&&(this.token=a,this.account_id=l,this.api.authorize(this.token),this.api.expectResponse("authorize").then((function(e){var t=e.authorize;o.has_activeSymbols?o.toggleRunButton(!1):o.getActiveSymbols(),o.subscribe(),o.account_info=t})).catch((function(e){r.P.emit("Error",e)})))}},{key:"subscribe",value:function(){var e=this;(0,o.l6)((function(){return e.api.send({balance:1,subscribe:1})})),(0,o.l6)((function(){return e.api.send({transaction:1,subscribe:1})})),(0,o.l6)((function(){return e.api.send({proposal_open_contract:1,subscribe:1})}))}},{key:"setIsRunning",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_running=e}},{key:"pushSubscription",value:function(e){this.subscriptions.push(e)}},{key:"clearSubscriptions",value:function(){var e;this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions=[],(null!==(e=r.P.getState("global_timeouts"))&&void 0!==e?e:[]).forEach((function(e,t){clearTimeout(t)}))}},{key:"getTime",value:function(){var e=this;this.time_interval||(this.time_interval=setInterval((function(){e.api.send({time:1})}),3e4))}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===y(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())},8399:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(54158),o=n(62113),i=n(51781);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ws=t.ws}var t,n;return t=e,n=[{key:"getStakePayoutLimits",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"AUD",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svg",n=arguments.length>2?arguments[2]:void 0;return this.ws.send({landing_company_details:t}).then((function(t){var r,o=null==t||null===(r=t.landing_company_details)||void 0===r?void 0:r.currency_config[n];return o?o[e]:{}}))}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===a(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trading_times=new r.Z(t),this.contracts_for=new o.Z(t),this.active_symbols=new i.Z(t.ws,this.trading_times),this.account_limits=new l(t)}var t,n;return t=e,n=[{key:"setInstance",value:function(t){return this.singleton||(this.singleton=new e(t)),this.instance}},{key:"instance",get:function(){return this.singleton}}],n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();u.singleton=null;const d=u},62113:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(62893),o=n(8969);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(){c=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),l=new O(o||[]);return r(a,"_invoke",{value:w(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var f={};function m(){}function h(){}function y(){}var v={};u(v,a,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(x([])));g&&g!==t&&n.call(g,a)&&(v=g);var b=y.prototype=m.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(r,a,l,c){var s=p(e[r],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==i(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,c)}),(function(e){o("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return o("throw",e,l,c)}))}c(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=p(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=p(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),u(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(d(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(b),u(b,s,"Generator"),u(b,a,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function s(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,l,"next",e)}function l(e){s(i,r,o,a,l,"throw",e)}a(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}var p=function(){function e(t){var n=t.ws,o=t.server_time;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getHiddenCategories=function(e){for(var t=0,n=0;n<e.length;n++){var o=e[n],i=r.v.QUICK_STRATEGY.DISABLED.BARRIER_TRADE_TYPES.includes(o.value),a=r.v.QUICK_STRATEGY.DISABLED.PREDICTION_TRADE_TYPES.includes(o.value);(i||a)&&t++}return t},this.getTradeTypeOptions=function(e,t){var n=[];return e.forEach((function(e){var o=r.v.QUICK_STRATEGY.DISABLED.BARRIER_TRADE_TYPES.includes(e.value),i=r.v.QUICK_STRATEGY.DISABLED.PREDICTION_TRADE_TYPES.includes(e.value),a=["multiplier"].includes(e.value);o||i||a||n.push({text:e.name,value:e.value,group:t[0],icon:e.icon})})),n},this.getContractTypes=function(e){return r.v.opposites[e.toUpperCase()].map((function(e){return{value:Object.keys(e)[0],text:Object.values(e)[0]}}))},this.cache_age_in_min=10,this.contracts_for={},this.ws=n,this.server_time=o,this.disabled_options=[{submarket:"forex_basket",trade_type:"higherlower"},{submarket:"minor_pairs",trade_type:"higherlower"},{submarket:"metals",trade_type:"callputequal"},{market:"indices",trade_type:"callputequal"},{symbol:"OTC_AS51",trade_type_category:"inout"},{trade_type_category:"lookback"},{trade_type_category:"callputspread"}],this.retrieving_contracts_for={}}var t,n,i,l,s,p,f,m,h,y,v,_,g,b,k;return t=e,n=[{key:"getBarriers",value:(k=u(c().mark((function e(t,n,o,i){var a,l,s,u,d,p,f,m=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={values:[]},r.v.BARRIER_TRADE_TYPES.includes(n)){e.next=3;break}return e.abrupt("return",a);case 3:return l=["high_barrier","low_barrier"],e.next=6,this.getContractsByTradeType(t,n);case 6:return s=e.sent,e.next=9,this.getDurations(t,n,!1);case 9:return u=e.sent,d=new RegExp("^[-|+]([0-9]+.[0-9]+)$"),p=function(e){return e&&d.test(e.toString())},f=!0,s.length>0&&(i.forEach((function(e,t){var c=["+","-"].includes(e),h=m.getContractCategoryByTradeType(n),y=s.find((function(e){var i=r.v.BARRIER_CATEGORIES,a=Object.keys(i).find((function(e){return i[e].includes(n)})),s=e.contract_category===h,d=-1!==u.findIndex((function(e){return e.unit===o})),f=e.barrier_category===a,m=c&&p(e.barrier||e[l[t]])||!c&&!p(e.barrier||e[l[t]]);return s&&d&&f&&m}));if(y||(y=s.filter((function(e){return e.barrier||e.high_barrier})).sort((function(e,t){var n=e.barrier||e.high_barrier,r=t.barrier||t.high_barrier;return parseFloat(n)-parseFloat(r)})).shift())&&!c&&(f=!1),y){var v=1===y.barriers?"barrier":l[t];if(y[v]){var _="".concat(y[v]).match(d);a.values[t]=_?_[1]:y[v]}Object.assign(a,{allow_both_types:["intraday","tick"].includes(y.expiry_type)&&p(y[v]),allow_absolute_type:"absolute"===e&&!p(y[v])}),1===y.barriers&&i.splice(t+1,1)}})),f?2===a.values.length&&i.every((function(e){return e===i[0]}))&&a.values.every((function(e){return e===a.values[0]}))&&(a.values[1]=(.95*a.values[0]).toFixed(1)):a.values=a.values.map((function(){return!1}))),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return k.apply(this,arguments)})},{key:"getContractCategoryByTradeType",value:function(e){var t=r.v.TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING;return Object.keys(t).find((function(n){return t[n].includes(e)}))||e}},{key:"getTradeTypeCategoryByTradeType",value:function(e){var t=r.v.TRADE_TYPE_CATEGORIES;return Object.keys(t).find((function(n){return t[n].includes(e)}))||e}},{key:"getTradeTypeCategoryNameByTradeType",value:function(e){return r.v.TRADE_TYPE_CATEGORY_NAMES[this.getTradeTypeCategoryByTradeType(e)]}},{key:"getBarrierCategoryByTradeType",value:function(e){var t=r.v.BARRIER_CATEGORIES;return Object.keys(t).find((function(n){return t[n].includes(e)}))}},{key:"getContractsByTradeType",value:(b=u(c().mark((function e(t,n){var r,o,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsFor(t);case 2:return r=e.sent,o=this.getContractCategoryByTradeType(n),i=this.getBarrierCategoryByTradeType(n),e.abrupt("return",r.filter((function(e){var t=e.contract_category===o,n=e.barrier_category===i;return t&&n})));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"getContractsFor",value:(g=u(c().mark((function e(t){var n,r,i,a,l=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&"na"!==t){e.next=2;break}return e.abrupt("return",[]);case 2:if(n=function(){var e=u(c().mark((function e(){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.retrieving_contracts_for[t]){e.next=4;break}return e.next=3,l.retrieving_contracts_for[t];case 3:return e.abrupt("return",l.contracts_for[t].contracts);case 4:return l.retrieving_contracts_for[t]=new o.Z,e.next=7,l.ws.send({contracts_for:t});case 7:if(!(n=e.sent).error){e.next=10;break}return e.abrupt("return",[]);case 10:return r=n.contracts_for.available,i=r.filter((function(e){return"forward"!==e.start_type})),l.contracts_for[t]={contracts:i,timestamp:l.server_time.unix()},l.retrieving_contracts_for[t].resolve(),delete l.retrieving_contracts_for[t],e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!this.contracts_for[t]){e.next=8;break}return r=this.contracts_for[t],i=r.contracts,a=r.timestamp,this.server_time.unix()-a>60*this.cache_age_in_min&&n(),e.abrupt("return",i);case 8:return e.abrupt("return",n());case 9:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"getDurations",value:(_=u(c().mark((function e(t,n){var o,i,a,l,s,u,d,p,f,m=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(m.length>2&&void 0!==m[2])||m[2],"multiplier"!==n){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,this.getContractsFor(t);case 5:if(i=e.sent,a=r.v.NOT_AVAILABLE_DURATIONS,l=r.v.DEFAULT_DURATION_DROPDOWN_OPTIONS,0!==i.length){e.next=9;break}return e.abrupt("return",a);case 9:return e.next=11,this.getContractsByTradeType(t,n);case 11:if(s=e.sent,u=[],d=function(e){return l.findIndex((function(t){return t[1]===e.replace(/\d+/g,"")}))},p=function(e,t){var n=e.replace(/\D/g,""),r=d(e),o=l.findIndex((function(e){return e[1]===t})),i=parseInt(n);return l.slice(o+1,r+1).reverse().forEach((function(e){switch(e[1]){case"m":case"h":i*=60;break;case"d":i*=24}})),i},s.forEach((function(e){if(e.min_contract_duration&&e.max_contract_duration){var t=d(e.min_contract_duration),n=d("1d"===e.max_contract_duration&&o?"24h":e.max_contract_duration);l.slice(t,n+1).forEach((function(t,n){-1!==u.findIndex((function(e){return e.unit===t[1]}))||u.push({display:t[0],unit:t[1],min:0===n?parseInt(e.min_contract_duration.replace(/\D/g,"")):1,max:p(e.max_contract_duration,t[1])})}))}})),s.every((function(e){return"intraday"===e.expiry_type}))&&-1!==(f=u.findIndex((function(e){return"d"===e[1]})))&&u.splice(f,1),0!==u.length){e.next=19;break}return e.abrupt("return",a);case 19:return e.abrupt("return",u.sort((function(e,t){return d(e.unit)-d(t.unit)})));case 20:case"end":return e.stop()}}),e,this)}))),function(e,t){return _.apply(this,arguments)})},{key:"getPredictionRange",value:(v=u(c().mark((function e(t,n){var o,i,l,s,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsByTradeType(t,n);case 2:return o=e.sent,i=this.getContractCategoryByTradeType(n),l=[],s=r.v.DIGIT_CATEGORIES,u=r.v.opposites,s.includes(i)&&"evenodd"!==n&&((d=o.find((function(e){return Object.keys(u).some((function(t){return u[t].map((function(e){return Object.keys(e)[0]})).includes(e.contract_type)}))})))&&d.last_digit_range?l.push.apply(l,a(d.last_digit_range)):l.push(1,2,3,4,5,6,7,8)),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return v.apply(this,arguments)})},{key:"getMultiplierRange",value:(y=u(c().mark((function e(t,n){var o,i,l,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsByTradeType(t,n);case 2:return o=e.sent,i=[],l=r.v.opposites,null!=(s=o.find((function(e){return Object.keys(l).some((function(t){return l[t].map((function(e){return Object.keys(e)[0]})).includes(e.contract_type)}))})))&&s.multiplier_range&&i.push.apply(i,a(s.multiplier_range)),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return y.apply(this,arguments)})},{key:"getMarketBySymbol",value:(h=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsFor(t);case 2:if((n=e.sent).length){e.next=5;break}return e.abrupt("return","na");case 5:return e.abrupt("return",n[0].market);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"getSubmarketBySymbol",value:(m=u(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsFor(t);case 2:if((n=e.sent).length){e.next=5;break}return e.abrupt("return","na");case 5:return e.abrupt("return",n[0].submarket);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getGroupedTradeTypes",value:(f=u(c().mark((function e(t){var n,r,o,i,a,l,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContractsFor(t);case 2:n=e.sent,r={},o=0;case 5:if(!(o<n.length)){e.next=17;break}return i=n[o].market,a=n[o].submarket,l=this.getTradeTypeCategoryByTradeType(n[o].contract_category),s=this.getTradeTypeCategoryNameByTradeType(n[o].contract_category),e.next=12,this.getTradeTypeByTradeCategory(i,a,t,l);case 12:u=e.sent,s&&(this.isDisabledOption({market:i,submarket:a,symbol:t,trade_type_category:l})||(r[s]=u));case 14:o++,e.next=5;break;case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"getTradeTypeByTradeCategory",value:(p=u(c().mark((function e(t,n,o,i){var a,l,s,u,d,p,f,m,h,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.v.NOT_AVAILABLE_DURATIONS,l=r.v.TRADE_TYPE_CATEGORIES,s=r.v.opposites,u=l[i],d=[],!u||!u.length){e.next=16;break}p=0;case 5:if(!(p<u.length)){e.next=16;break}return f=u[p],e.next=9,this.getDurations(o,f);case 9:m=e.sent,h=JSON.stringify(m)!==JSON.stringify(a),!this.isDisabledOption({market:t,submarket:n,symbol:o,trade_type_category:i,trade_type:f})&&h&&(y=s[f.toUpperCase()],d.push({name:y.map((function(e){return e[Object.keys(e)[0]]})).join("/"),value:f,icon:[Object.keys(y[0])[0],Object.keys(y[1])[0]]}));case 13:p++,e.next=5;break;case 16:return e.abrupt("return",d);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return p.apply(this,arguments)})},{key:"getTradeTypesForQuickStrategy",value:(s=u(c().mark((function e(t){var n,r,o,i,l,s,u,d,p,f,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=[],e.next=4,this.getMarketBySymbol(t);case 4:return o=e.sent,e.next=7,this.getSubmarketBySymbol(t);case 7:return i=e.sent,e.next=10,this.getTradeTypeCategories(o,i,t);case 10:l=e.sent,s=0;case 12:if(!(s<l.length)){e.next=22;break}return u=l[s],e.next=16,this.getTradeTypeByTradeCategory(o,i,t,u[1]);case 16:d=e.sent,this.getHiddenCategories(d)<d.length&&r.push(u);case 19:s++,e.next=12;break;case 22:p=0;case 23:if(!(p<r.length)){e.next=32;break}return f=r[p],e.next=27,this.getTradeTypeByTradeCategory(o,i,t,f[1]);case 27:m=e.sent,n.push.apply(n,a(this.getTradeTypeOptions(m,f)));case 29:p++,e.next=23;break;case 32:return e.abrupt("return",n);case 33:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getTradeTypeCategories",value:(l=u(c().mark((function e(t,n,o){var i,a,l,s,u,d=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.v.TRADE_TYPE_CATEGORY_NAMES,a=r.v.NOT_AVAILABLE_DROPDOWN_OPTIONS,e.next=3,this.getContractsFor(o);case 3:if(l=e.sent,s=[],l.forEach((function(e){var r=d.getTradeTypeCategoryByTradeType(e.contract_category),i=d.getTradeTypeCategoryNameByTradeType(e.contract_category);i&&(d.isDisabledOption({market:t,submarket:n,symbol:o,trade_type_category:r})||-1!==s.findIndex((function(e){return e[1]===r}))||s.push([i,r]))})),!(s.length>0)){e.next=9;break}return u=Object.keys(i),e.abrupt("return",s.sort((function(e,t){return u.findIndex((function(t){return t===e[1]}))-u.findIndex((function(e){return e===t[1]}))})));case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return l.apply(this,arguments)})},{key:"getTradeTypes",value:(i=u(c().mark((function e(t,n,o,i){var a,l,s,u,d,p,f,m,h,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.v.NOT_AVAILABLE_DURATIONS,l=r.v.TRADE_TYPE_CATEGORIES,s=r.v.opposites,u=[],!(d=l[i])){e.next=16;break}p=0;case 5:if(!(p<d.length)){e.next=16;break}return f=d[p],e.next=9,this.getDurations(o,f);case 9:m=e.sent,h=JSON.stringify(m)!==JSON.stringify(a),!this.isDisabledOption({market:t,submarket:n,symbol:o,trade_type_category:i,trade_type:f})&&h&&(y=s[f.toUpperCase()],u.push([y.map((function(e){return e[Object.keys(e)[0]]})).join("/"),f]));case 13:p++,e.next=5;break;case 16:return e.abrupt("return",u.length>0?u:r.v.NOT_AVAILABLE_DROPDOWN_OPTIONS);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return i.apply(this,arguments)})},{key:"isDisabledOption",value:function(e){return this.disabled_options.some((function(t){return Object.keys(t).every((function(n){return e[n]===t[n]}))}))}},{key:"disposeCache",value:function(){this.contracts_for={}}}],n&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},54158:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(8969);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),l=new O(o||[]);return r(a,"_invoke",{value:w(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var f={};function m(){}function h(){}function y(){}var v={};u(v,l,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(x([])));g&&g!==t&&n.call(g,l)&&(v=g);var b=y.prototype=m.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function i(r,a,l,c){var s=p(e[r],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==o(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,l,c)}),(function(e){i("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return i("throw",e,l,c)}))}c(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=p(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=p(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),u(E.prototype,c,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(d(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(b),u(b,s,"Generator"),u(b,l,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function a(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){a(i,r,o,l,c,"next",e)}function c(e){a(i,r,o,l,c,"throw",e)}l(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var s=function(){function e(t){var n=t.ws,o=t.server_time;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init_promise=new r.Z,this.is_initialised=!1,this.trading_times={},this.ws=n,this.server_time=o.clone()}var t,n,o,a;return t=e,n=[{key:"initialise",value:(a=l(i().mark((function e(){var t,n=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is_initialised){e.next=2;break}return e.abrupt("return",this.init_promise);case 2:if(this.is_initialised=!0,this.last_update_moment=this.server_time.local(),Object.keys(this.trading_times).length){e.next=11;break}return e.next=7,this.updateTradingTimes();case 7:return this.init_promise.resolve(),t=function(){var e=l(i().mark((function e(){var r,o,a,l,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.updateMarketOpenClosed(),Object.keys(r).length>0&&n.onMarketOpenCloseChanged&&n.onMarketOpenCloseChanged(r),o=n.nextUpdateDate()){e.next=14;break}return a=n.server_time.local(),l=n.last_update_moment.clone().add(1,"days"),a.isAfter(l)?n.last_update_moment=a.clone():n.last_update_moment=l.clone(),c={},Object.keys(n.trading_times).forEach((function(e){c[e]=n.trading_times[e].is_opened})),e.next=11,n.updateTradingTimes();case 11:Object.keys(n.trading_times).forEach((function(e){n.trading_times[e].is_opened=c[e]})),l.set({hour:0,minute:0,second:0}),o=l.toDate();case 14:s=o-n.server_time.local().toDate(),n.update_timer=setTimeout(t,s);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=11,t();case 11:return e.abrupt("return",this.init_promise);case 12:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"updateTradingTimes",value:(o=l(i().mark((function e(){var t,n,r,o,a,l,c=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.last_update_moment.format("YYYY-MM-DD"),e.next=3,this.ws.tradingTimes(t);case 3:if(!(n=e.sent).error){e.next=6;break}return e.abrupt("return");case 6:if(this.trading_times={},r=this.server_time.local().toDate(),o=r.toISOString().substring(0,11),a=function(e){return new Date("".concat(o).concat(e,"Z"))},l=n.trading_times.markets){e.next=13;break}return e.abrupt("return");case 13:l.forEach((function(e){e.submarkets.forEach((function(e){e.symbols.forEach((function(e){var t,n=e.times,r=e.symbol,o=n.open,i=n.close,l=1===o.length&&"00:00:00"===o[0]&&"23:59:59"===i[0],s=1===o.length&&"--"===o[0]&&"--"===i[0];l||s||(t=o.map((function(e,t){return{open:a(e),close:a(i[t])}}))),c.trading_times[r]={is_open_all_day:l,is_closed_all_day:s,times:t}}))}))}));case 14:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"updateMarketOpenClosed",value:function(){var e=this,t={};return Object.keys(this.trading_times).forEach((function(n){var r=e.calcIsMarketOpened(n),o=e.trading_times[n];o.is_opened!==r&&(o.is_opened=r,t[n]=r)})),t}},{key:"calcIsMarketOpened",value:function(e){var t=this.server_time.local().unix(),n=this.trading_times[e],r=n.times,o=n.is_open_all_day;return!n.is_closed_all_day&&(!!o||r.some((function(e){var n=e.open,r=e.close;return t>=n&&t<r})))}},{key:"nextUpdateDate",value:function(){var e,t=this,n=this.server_time.local().toDate();return Object.keys(this.trading_times).forEach((function(r){var o=t.trading_times[r],i=o.times,a=o.is_open_all_day,l=o.is_closed_all_day;a||l||i.forEach((function(t){var r=t.open,o=t.close;r>n&&(!e||r<e)&&(e=r),o>n&&(!e||o<e)&&(e=o)}))})),e}},{key:"isMarketOpened",value:function(e){var t=Object.keys(this.trading_times);return!(!t.length||!t.includes(e))&&this.trading_times[e].is_opened}}],n&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},10793:(e,t,n)=>{"use strict";n.d(t,{LJ:()=>i,cM:()=>s,h4:()=>c,um:()=>l,vU:()=>u,x_:()=>a});var r=n(49568),o=n(62893),i=function(e){return r.P.emit("bot.contract",e)},a=function(e){return r.P.emit("contract.status",e)},l=function(e){return r.P.emit("bot.info",e)},c=function(e,t){return r.P.emit("ui.log.notify",{className:e,message:t,sound:o.v.lists.NOTIFICATION_SOUND[0][1]})},s=function(e,t){return r.P.emit("ui.log.success",{log_type:e,extra:t})},u=function(e){return r.P.emit("ui.log.error",e)}},64894:(e,t,n)=>{"use strict";n.d(t,{Fs:()=>_,Kn:()=>h,Mg:()=>f,Px:()=>b,VM:()=>m,l6:()=>y,mh:()=>v,nD:()=>p,pH:()=>d,vo:()=>g});var r,o=n(55770),i=n(92273),a=n(10793),l=n(49568);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e,t){return e.contractTypes.map((function(n){var r={amount:e.amount,basis:e.basis,contract_type:n,currency:e.currency,duration:e.duration,duration_unit:e.duration_unit,multiplier:e.multiplier,passthrough:{contract_type:n,purchase_reference:t},proposal:1,symbol:e.symbol};return void 0!==e.prediction&&(r.selected_tick=e.prediction),["TICKLOW","TICKHIGH"].includes(n)||void 0===e.prediction?void 0!==e.barrierOffset&&(r.barrier=e.barrierOffset):r.barrier=e.prediction,void 0!==e.secondBarrierOffset&&(r.barrier2=e.secondBarrierOffset),["MULTUP","MULTDOWN"].includes(n)&&(r.duration=void 0,r.duration_unit=void 0),(0,o.isEmptyObject)(e.limit_order)||(r.limit_order=e.limit_order),r}))},p=function(e,t){var n={buy:"1",price:t.amount,parameters:{amount:t.amount,basis:t.basis,contract_type:e,currency:t.currency,duration:t.duration,duration_unit:t.duration_unit,multiplier:t.multiplier,symbol:t.symbol}};return void 0!==t.prediction&&(n.parameters.selected_tick=t.prediction),["TICKLOW","TICKHIGH"].includes(e)||void 0===t.prediction?void 0!==t.barrierOffset&&(n.parameters.barrier=t.barrierOffset):n.parameters.barrier=t.prediction,void 0!==t.secondBarrierOffset&&(n.parameters.barrier2=t.secondBarrierOffset),(0,o.isEmptyObject)(t.app_markup_percentage)||(n.parameters.app_markup_percentage=t.app_markup_percentage),(0,o.isEmptyObject)(t.barrier_range)||(n.parameters.barrier_range=t.barrier_range),(0,o.isEmptyObject)(t.date_expiry)||(n.parameters.date_expiry=t.date_expiry),(0,o.isEmptyObject)(t.date_start)||(n.parameters.date_start=t.date_start),(0,o.isEmptyObject)(t.product_type)||(n.parameters.product_type=t.product_type),(0,o.isEmptyObject)(t.trading_period_start)||(n.parameters.trading_period_start=t.trading_period_start),(0,o.isEmptyObject)(t.limit_order)||(n.parameters.limit_order=t.limit_order),["MULTUP","MULTDOWN"].includes(e)&&(n.parameters.duration=void 0,n.parameters.duration_unit=void 0,n.parameters.multiplier=t.multiplier),["ACCU"].includes(e)&&(n.parameters.growth_rate=t.growth_rate),n},f=function(e){var t,n=e.length,r=(2,function(e){if(Array.isArray(e))return e}(t=e.slice(-2))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],a="";return n>=2&&(a=o.quote<i.quote?"rise":a,a=o.quote>i.quote?"fall":a),a},m=function(e){var t=e;return"number"==typeof t&&(t=String(t)),Number(t[t.length-1])},h=function(e,t,n,r,c){return new Promise((function(s,u){var d=e();d?d.then(s).catch((function(e){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!e.error&&(function(e){var t,n,r;"InputValidationFailed"===(null===(t=e.error)||void 0===t?void 0:t.code)&&(null!==(n=e.error.details)&&void 0!==n&&n.duration&&(e.error.message=(0,i.localize)("Duration must be a positive integer")),null!==(r=e.error.details)&&void 0!==r&&r.amount&&(e.error.message=(0,i.localize)("Amount must be a positive number.")))}(e),!t.concat(["CallError","WrongResponse","GetProposalFailure","RateLimit","DisconnectError","MarketIsClosed"]).includes(e.error.code))})(e,n)||c&&!c.is_running?u(e):t(e.error.code,(function(){return new Promise((function(t){var n=function(){var e;return null!==(e=l.P.getState("global_timeouts"))&&void 0!==e?e:[]},c=setTimeout((function(){var e=n();delete e[c],l.P.setState(e),t()}),function(e,t){var n=Math.min(2.5*t,15);return"RateLimit"===e.error.code?(0,a.vU)((0,i.localize)("You are rate limited for: {{ message_type }}, retrying in {{ delay }}s (ID: {{ request }})",{message_type:e.msg_type,delay:n,request:e.echo_req.req_id})):"DisconnectError"===e.error.code?(0,a.vU)((0,i.localize)("You are disconnected, retrying in {{ delay }}s",{delay:n})):"MarketIsClosed"===e.error.code?(0,a.vU)((0,i.localize)("This market is presently closed.")):(0,a.vU)((0,i.localize)("Request failed for: {{ message_type }}, retrying in {{ delay }}s",{message_type:e.msg_type||(0,i.localize)("unknown"),delay:n})),1e3*n}(e,r)),s=n(),u=(0,o.findValueByKeyRecursively)(e,"msg_type");s[c]={is_cancellable:["buy"].includes(u),msg_type:u},l.P.setState({global_timeouts:s})}))}))})):s()}))},y=function(e,t,n){var r=1;return new Promise((function(o,i){var a=function(e,t){r++,t().then(l)},l=function(){h(e,a,t,r,n).then(o).catch(i)};l()}))},v=function(e){var t=e.sell_price,n=e.buy_price,r=e.currency,i=(0,o.getRoundedNumber)(t-n,r),a=i<0?"loss":"win";return[e.transaction_ids.buy,+e.buy_price,+e.sell_price,i,e.contract_type,(0,o.formatTime)(parseInt("".concat(e.entry_tick_time,"000")),"HH:mm:ss"),+e.entry_tick,(0,o.formatTime)(parseInt("".concat(e.exit_tick_time,"000")),"HH:mm:ss"),+e.exit_tick,+(e.barrier?e.barrier:0),a]},_=function(){return"".concat((new Date).getTime()*Math.random())},g=function(){return{has_payout_block:Blockly.derivWorkspace.getAllBlocks().some((function(e){return"payout"===e.type&&!!e.parentBlock_})),is_basis_payout:!1}},b=(s(r={},WebSocket.CONNECTING,"Connecting"),s(r,WebSocket.OPEN,"Connected"),s(r,WebSocket.CLOSING,"Closing"),s(r,WebSocket.CLOSED,"Closed"),r)},62004:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var r=n(92273),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,r.localize)("workspace");return{missing:(0,r.localize)("The {{block_type}} block is mandatory and cannot be deleted/disabled.",{block_type:e}),misplaced:(0,r.localize)("The {{block_type}} block is misplaced from {{missing_space}}.",{block_type:e,missing_space:t}),disabled:(0,r.localize)("The {{block_type}} block is mandatory and cannot be deleted/disabled.",{block_type:e}),default:(0,r.localize)("The {{block_type}} block is mandatory and cannot be deleted/disabled.",{block_type:e})}},i={trade_definition:o((0,r.localize)("Trade parameters")),trade_parameters:o((0,r.localize)("Trade parameters")),before_purchase:o((0,r.localize)("Purchase conditions")),purchase_conditions:o((0,r.localize)("Purchase conditions")),purchase:o((0,r.localize)("Purchase"),(0,r.localize)("purchase conditions")),trade_definition_tradeoptions:o((0,r.localize)("Trade options"),(0,r.localize)("trade parameters")),trade_definition_multiplier:o((0,r.localize)("Trade options multipliers"),(0,r.localize)("trade parameters"))}},79305:(e,t,n)=>{"use strict";n.d(t,{N:()=>i,T:()=>o});var r=n(49568),o=function(e,t){var n=new Error(t);return n.name=e,n.code=e,n},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.P.emit("ui.log.error",e),window.trackJs&&trackJs.track("".concat(e," - Error: ").concat(JSON.stringify(t)))}},20437:(e,t,n)=>{"use strict";n.d(t,{dY:()=>v,Tr:()=>a.T,mT:()=>m,ZT:()=>i,WN:()=>u.WN,S3:()=>E,Vc:()=>c,tZ:()=>k,Pi:()=>l.P,N0:()=>s.N0,zG:()=>f,GZ:()=>b,lY:()=>u.lY,l5:()=>u.l5,Ow:()=>p,X6:()=>h,VG:()=>d,N_:()=>a.N});var r=n(92273),o=n(62893),i=function(e){var t=o.v.opposites,n=(0,r.localize)("Unknown");return Object.keys(t).forEach((function(r){t[r].forEach((function(t){var o=Object.entries(t)[0];if(o[0]===e.contract_type){if(["CALL","PUT"].includes(o[0])){var i=e.shortcode.split("_").slice(-2)[0],a=/^S0P$/.test(i);if(r!==(a?"CALLPUT":"HIGHERLOWER"))return}n=o[1]}}))})),n},a=n(79305),l=n(49568),c=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.src=e,r.async=!0,r.onload=function(){return t(window.external_global_component)},r.onerror=n,document.body.appendChild(r)}))},s=n(24503),u=n(51609),d=function(e){var t=new Date,n=(t.getTime()-e)/1e3;if(n<60)return(0,r.localize)("{{secondPast}}s ago",{secondPast:parseInt(n)});if(n<3600)return(0,r.localize)("{{minutePast}}m ago",{minutePast:parseInt(n/60)});if(n<=86400)return(0,r.localize)("{{hourPast}}h ago",{hourPast:parseInt(n/3600)});var o=new Date(e),i=o.getDate(),a=o.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ",""),l="".concat(o.getFullYear()===t.getFullYear()?"":" ").concat(o.getFullYear());return"".concat(i," ").concat(a).concat(l)},p=function(e){return e?function(){var e=Blockly;e.Colours.RootBlock={colour:"#183046",colourSecondary:"#F2F3F5",colourTertiary:"#151717"},e.Colours.Base={colour:"#C2C2C2",colourSecondary:"#0e0e0e",colourTertiary:"#0e0e0e"},e.Colours.Special1={colour:"#C2C2C2",colourSecondary:"#0e0e0e",colourTertiary:"#6d7278"},e.Colours.Special2={colour:"#C2C2C2",colourSecondary:"#0e0e0e",colourTertiary:"#D27954"},e.Colours.Special3={colour:"#C2C2C2",colourSecondary:"#0e0e0e",colourTertiary:"#D27954"}}():function(){var e=Blockly;e.Colours.RootBlock={colour:"#064e72",colourSecondary:"#064e72",colourTertiary:"#6d7278"},e.Colours.Base={colour:"#e5e5e5",colourSecondary:"#ffffff",colourTertiary:"#6d7278"},e.Colours.Special1={colour:"#e5e5e5",colourSecondary:"#ffffff",colourTertiary:"#6d7278"},e.Colours.Special2={colour:"#e5e5e5",colourSecondary:"#ffffff",colourTertiary:"#6d7278"},e.Colours.Special3={colour:"#e5e5e5",colourSecondary:"#ffffff",colourTertiary:"#6d7278"}}()},f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},m=function(e){var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("block");return Array.from(t).map((function(e){return{type:e.getAttribute("type"),fields:Array.from(e.getElementsByTagName("field")).map((function(e){return{name:e.getAttribute("name"),value:e.textContent.trim()}}))}}))},h=function(e){return e.sort((function(e,t){return e.type<t.type?-1:e.type>t.type?1:JSON.stringify(e.fields)<JSON.stringify(t.fields)?-1:1}))},y=function(e,t){if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;for(var n=0;n<e.length;n++){var r,o,i,a;if((null===(r=e[n])||void 0===r?void 0:r.name)!==(null===(o=t[n])||void 0===o?void 0:o.name)||(null===(i=e[n])||void 0===i?void 0:i.value)!==(null===(a=t[n])||void 0===a?void 0:a.value))return!1}return!0},v=function(e,t){var n=f(m,h),r=f(m,h),o=n(e),i=r(t);if((null==o?void 0:o.length)!==(null==i?void 0:i.length))return!1;for(var a=0;a<o.length;a++){var l,c,s,u;if((null===(l=o[a])||void 0===l?void 0:l.type)!==(null===(c=i[a])||void 0===c?void 0:c.type)||!y(null===(s=o[a])||void 0===s?void 0:s.fields,null===(u=i[a])||void 0===u?void 0:u.fields))return!1}return!0},_=n(62004),g=function(e){null!==Blockly.selected&&null===Blockly.selected.parentBlock_&&("Delete"!==e.key&&"Backspace"!==e.key||E("BLOCK_DELETION",l.P))},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keydown";window.removeEventListener(e,g)},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keydown";window.addEventListener(e,g)},E=function(e,t){var n;"BLOCK_DELETION"===e&&_.T[Blockly.selected.type]&&t.emit("ui.log.error",null===(n=_.T[Blockly.selected.type])||void 0===n?void 0:n.default)}},51609:(e,t,n)=>{"use strict";n.d(t,{WN:()=>m,l5:()=>f,lY:()=>h});var r=n(36954),o=n.n(r),i=n(75486),a=n.n(i),l=n(27675),c=n(70147);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(){u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,o){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),l=new O(o||[]);return r(a,"_invoke",{value:w(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var f={};function m(){}function h(){}function y(){}var v={};c(v,i,(function(){return this}));var _=Object.getPrototypeOf,g=_&&_(_(x([])));g&&g!==t&&n.call(g,i)&&(v=g);var b=y.prototype=m.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(r,i,a,l){var c=p(e[r],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==s(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=S(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=p(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=p(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(d(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(b),c(b,l,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function d(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){d(i,r,o,a,l,"next",e)}function l(e){d(i,r,o,a,l,"throw",e)}a(void 0)}))}}var f=function(){var e=p(u().mark((function e(t){var n,r,i,s,d,p,f,h,y,v,_=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.length>1&&void 0!==_[1]?_[1]:c.R.UNSAVED,t.setAttribute("is_dbot",!0),r=l.Z.instance,i=r.load_modal.updateListStrategies,s=r.save_modal,d=Blockly.derivWorkspace.current_strategy_id||Blockly.utils.genUid(),e.next=6,m();case 6:p=e.sent,f=Blockly.Xml.domToText(t),h=Date.now(),(y=p.findIndex((function(e){return e.id===d})))>=0?((v=p[y]).xml=f,v.name=s.bot_name,v.timestamp=h,v.save_type=n):p.push({id:d,timestamp:h,name:s.bot_name,xml:f,save_type:n}),p.sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)})).reverse(),p.length>10&&p.pop(),i(p),a().setItem("saved_workspaces",o().compress(JSON.stringify(p)));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=p(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t1=JSON,e.t2=o(),e.next=5,a().getItem("saved_workspaces");case 5:if(e.t3=e.sent,e.t4=e.t2.decompress.call(e.t2,e.t3),e.t0=e.t1.parse.call(e.t1,e.t4),e.t0){e.next=10;break}e.t0=[];case 10:return e.abrupt("return",e.t0);case 13:return e.prev=13,e.t5=e.catch(0),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=p(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return n=e.sent,(r=n.findIndex((function(e){return e.id===t})))>=0&&n.splice(r,1),e.next=7,a().setItem("saved_workspaces",o().compress(JSON.stringify(n)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},49568:(e,t,n)=>{"use strict";n.d(t,{P:()=>d,Z:()=>u});var r=n(46670);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eam=new r.Map}var t,n;return t=e,n=[{key:"register",value:function(e,t,n,o,i){var a=this;i&&this.unregisterAll(e);var l=function e(t){t.type===o.type&&(a.unregister("api.error",e),o.unregister.forEach((function(e){var t;e instanceof Array?a.unregister.apply(a,function(e){if(Array.isArray(e))return c(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):a.unregisterAll(e)})))};o&&this.register("api.error",l);var s=function(){n&&a.unregister(e,t),o&&a.unregister("api.error",l),t.apply(void 0,arguments)},u=this.eam.get(e);this.eam=u?this.eam.set(e,u.push({action:s,searchBy:t})):this.eam.set(e,(new r.List).push({action:s,searchBy:t}))}},{key:"unregister",value:function(e,t){this.eam=this.eam.set(e,this.eam.get(e).filter((function(e){return e.searchBy!==t})))}},{key:"isRegistered",value:function(e){return this.eam.has(e)}},{key:"unregisterAll",value:function(e){this.eam=this.eam.delete(e)}},{key:"emit",value:function(e,t){this.eam.has(e)&&this.eam.get(e).forEach((function(e){return e.action(t)}))}},{key:"setState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.state=a(a({},this.state),e)}},{key:"getState",value:function(e){var t;return null===(t=this.state)||void 0===t?void 0:t[e]}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=new u},8969:(e,t,n)=>{"use strict";function r(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.isPending=!0,n.resolve=function(t){n.isPending=!1,e(t)},n.reject=function(e){n.isPending=!1,t(e)},n}n.d(t,{Z:()=>r})},24503:(e,t,n)=>{"use strict";n.d(t,{N0:()=>o,kH:()=>i});var r=n(62893),o=function(){var e=Blockly.derivWorkspace;if(e){e.getAllFields().forEach((function(e){return e.forceRerender()}));var t=document.getElementById("scratch_div");t&&(t.style.width="calc(100vw - 3.2rem)",t.style.height="var(--bot-content-height)",Blockly.svgResize(e))}},i=function(e,t){(Array.isArray(t)?t:[t]).forEach((function(t){r.v.single_instance_blocks.includes(t)&&e.getAllBlocks().forEach((function(e){e.type===t&&e.dispose()}))}))}},41460:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Gu});var r={};n.r(r),n.d(r,{after_purchase:()=>He,balance:()=>Je,before_purchase:()=>We,check_direction:()=>Ye,console:()=>qe,contract_check_result:()=>Ke,controls_flow_statements:()=>Xe,controls_for:()=>Ze,controls_forEach:()=>Qe,controls_if:()=>$e,controls_whileUntil:()=>et,during_purchase:()=>tt,epoch:()=>nt,get_ohlc:()=>rt,is_candle_black:()=>ot,last_digit:()=>it,logic_operation:()=>at,math_arithmetic:()=>lt,math_constrain:()=>ct,math_single:()=>st,notify_telegram:()=>ut,ohlc:()=>dt,ohlc_values:()=>pt,ohlc_values_in_list:()=>ft,procedures_ifreturn:()=>mt,read_details:()=>ht,read_ohlc:()=>yt,read_ohlc_obj:()=>vt,sell_at_market:()=>_t,sell_price:()=>gt,sma_statement:()=>bt,text_print:()=>kt,text_prompt_ext:()=>Et,tick_analysis:()=>wt,todatetime:()=>St,totimestamp:()=>Tt,trade_again:()=>Bt,trade_definition:()=>Ot,trade_definition_multiplier:()=>xt,trade_definition_tradeoptions:()=>At,variables_set:()=>Ct});var o=n(8156),i=n.n(o),a=n(96818),l=n(1336),c=n(34309);n(51344);const s=(0,o.createContext)(null);var u=n(75974),d=n.n(u),p=n(55770),f=n(49954),m=n(55830);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=(0,o.createContext)(null),_=function(e){var t,n,r;window.DerivAPI||(window.DerivAPI={});var o,i,a,l=(o=(0,p.getSocketURL)(),i=(0,p.getAppId)(),a=localStorage.getItem("i18n_language"),"wss://".concat(o,"/websockets/v3?app_id=").concat(i,"&l=").concat(a,"&brand=").concat("deriv")),c=function(e,t){window.WSConnections||(window.WSConnections={});var n=window.WSConnections[e];return n&&n instanceof WebSocket&&![2,3].includes(n.readyState)||(window.WSConnections[e]=new WebSocket(e),window.WSConnections[e].addEventListener("close",(function(){"function"==typeof t&&t()}))),window.WSConnections[e]}(l,e);return(null===(t=window.DerivAPI)||void 0===t||!t[l]||null!==(n=window.DerivAPI)&&void 0!==n&&n[l].isConnectionClosed())&&(window.DerivAPI[l]=new(d())({connection:c})),null===(r=window.DerivAPI)||void 0===r?void 0:r[l]},g=(window.ReactQueryClient||(window.ReactQueryClient=new f.S({logger:{log:console.log,warn:console.warn,error:function(){return null}}})),window.ReactQueryClient),b=function(e){return window.localStorage.getItem("config.server_url")?"custom":e&&!/^(VRT|VRW)/.test(e)?"real":"demo"};const k=function(e){var t=e.children,n=e.standalone,r=void 0!==n&&n,a=(0,p.useWS)(),l=h((0,o.useState)(!1),2),c=l[0],s=l[1],u=window.localStorage.getItem("active_loginid"),d=h((0,o.useState)(b(u)),2),f=d[0],y=d[1],k=(0,o.useRef)(r?_((function(){return s(!0)})):null),E=(0,o.useCallback)((function(e){if(r){var t=b(e);"custom"!==t&&t!==f&&y(t)}}),[f,r]);return(0,o.useEffect)((function(){var e;return r&&(e=setInterval((function(){var e;return null===(e=k.current)||void 0===e?void 0:e.send({ping:1})}),1e4)),function(){return clearInterval(e)}}),[r]),(0,o.useEffect)((function(){var e;return(r||c)&&(k.current=_((function(){e=setTimeout((function(){return s(!0)}),500)})),s(!1)),function(){return clearTimeout(e)}}),[f,c,r]),i().createElement(v.Provider,{value:{derivAPI:r?k.current:a,switchEnvironment:E}},i().createElement(m.aH,{client:g},t))};n(98572),n(57114),n(19034),n(68762);var E=n(70259),w=n(87575);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var x={wallet:!1,next_wallet:!1,sharkfin:!1,p2p_v2:!1,next_tradershub:!1},A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(r){var o=O(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"FeatureFlagsStore",(function(){e.data||e.update(x),e.data&&Object.keys(e.data).length!==Object.keys(x).length&&e.update((function(e){var t=x;return Object.keys(x).forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),t}))}))).data=x,e}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=void 0,(0,E.makeObservable)(this,{data:E.observable,update:E.action.bound,unmount:E.action.bound}),(0,w.Ko)(this,{name:t,properties:["data"],storage:window.localStorage}).then((function(){return null==n?void 0:n()}))}var t,n;return t=e,(n=[{key:"update",value:function(e){this.data=e instanceof Function?e(this.data):e}},{key:"unmount",value:function(){(0,w.Rf)(this)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===C(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const R=function(e){var t=e.children,n=e.store,r=(0,o.useMemo)((function(){return"is_mock"in n&&n.is_mock?n:L(L({},n),{},{feature_flags:new A})}),[n]);return(0,o.useEffect)((function(){return function(){Object.values(r).forEach((function(e){"object"===C(e)&&"unmount"in e&&e.unmount()}))}}),[r]),i().createElement(k,null,i().createElement(s.Provider,{value:r},t))},D=function(){var e=(0,o.useContext)(s);if(!e)throw new Error("useStore must be used within StoreProvider");return e};n(62683);var P=n(78310),z=n.n(P),j=n(28462),M=n(92273);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const U=function(e){var t,n=e.message,r=e.timeout,a=void 0===r?6e3:r,c=e.is_open,s=e.onClick,u=e.handleClose,d=e.type,p=e.className,f=(2,function(e){if(Array.isArray(e))return e}(t=(0,o.useState)(a))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return F(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],h=f[1];return i().useEffect((function(){c&&h(a)}),[c,a]),i().createElement("div",{onMouseOver:function(){h(0)},onMouseLeave:function(){h(a)},className:null!=p?p:"bot-snackbar","data-testid":"bot-snackbar-notification-container"},i().createElement(l.Toast,{is_open:c,type:d,timeout:m,onClick:s,onClose:u},i().createElement("div",null,n),i().createElement(l.Icon,{icon:"IcCross",className:"notification-close",data_testid:"bot-snackbar-notification-close",onClick:u})))};var V=Object.freeze({WORKSPACE:"Workspace",CHART:"Chart"}),G=Object.freeze({DASHBOARD:0,BOT_BUILDER:1,CHART:2,TUTORIAL:3}),H=["id-dbot-dashboard","id-bot-builder","id-charts","id-tutorials"],J=300;function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}var Y=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getErrorForNonEuClients=function(){return{text:(0,M.localize)("Unfortunately, this trading platform is not available for EU Deriv account. Please switch to a non-EU account to continue trading."),title:(0,M.localize)("Deriv Bot is unavailable for this account"),link:(0,M.localize)("Switch to another account")}},this.getErrorForEuClients=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{text:" ",title:e?(0,M.localize)("Deriv Bot is not available for EU clients"):(0,M.localize)("Deriv Bot is unavailable in the EU"),link:e&&(0,M.localize)("Back to Trader's Hub"),route:p.routes.traders_hub}},this.handleErrorForEu=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=r.core,n=t.client,o=t.common,i=t.ui,a=t.traders_hub,l=null==i?void 0:i.toggleAccountsDialog;if((null==n||!n.is_logged_in)&&null!=n&&n.is_eu_country)return(0,p.showDigitalOptionsUnavailableError)(o.showError,r.getErrorForEuClients());if(!n.is_landing_company_loaded)return!1;if(window.location.pathname===p.routes.bot){if(n.should_show_eu_error)return(0,p.showDigitalOptionsUnavailableError)(o.showError,r.getErrorForEuClients(n.is_logged_in));if(a.content_flag===p.ContentFlag.HIGH_RISK_CR)return!1;if(a.content_flag===p.ContentFlag.LOW_RISK_CR_EU&&l)return(0,p.showDigitalOptionsUnavailableError)(o.showError,r.getErrorForNonEuClients(),l,!1,!1);if((!n.is_bot_allowed&&n.is_eu&&n.should_show_eu_error||(0,p.isEuResidenceWithOnlyVRTC)(n.active_accounts)||n.is_options_blocked)&&l)return(0,p.showDigitalOptionsUnavailableError)(o.showError,r.getErrorForNonEuClients(),l,!1,!1)}return e&&o.has_error&&o.setError(!1,null),!1},this.onBeforeUnload=function(e){r.root_store.run_panel.is_stop_button_visible&&(e.returnValue=!0)},this.onClickOutsideBlockly=function(e){var t;document.querySelector(".injectionDiv")&&((e.path||e.composedPath&&e.composedPath()).some((function(e){return e.classList&&e.classList.contains("injectionDiv")}))||null===(t=Blockly)||void 0===t||t.hideChaff(!1))},this.showDigitalOptionsMaltainvestError=function(){r.handleErrorForEu(!0)},(0,E.makeObservable)(this,{onMount:E.action.bound,onUnmount:E.action.bound,onBeforeUnload:E.action.bound,registerReloadOnLanguageChange:E.action.bound,registerCurrencyReaction:E.action.bound,registerOnAccountSwitch:E.action.bound,registerLandingCompanyChangeReaction:E.action.bound,registerResidenceChangeReaction:E.action.bound,setDBotEngineStores:E.action.bound,onClickOutsideBlockly:E.action.bound,showDigitalOptionsMaltainvestError:E.action.bound}),this.root_store=t,this.core=n,this.dbot_store=null,this.api_helpers_store=null,this.timer=null}var t,r;return t=e,r=[{key:"onMount",value:function(){var e=this,t=this.root_store,r=t.blockly_store,o=t.run_panel,i=this.core,l=i.client,c=i.ui,s=i.traders_hub;this.showDigitalOptionsMaltainvestError();var u=1;this.timer=setInterval((function(){window.sendRequestsStatistic&&(window.sendRequestsStatistic(!1),performance.clearMeasures(),6===u||null!=o&&o.is_running?clearInterval(e.timer):u++)}),1e4),r.setLoading(!0),a.DBot.initWorkspace(n.p,this.dbot_store,this.api_helpers_store,c.is_mobile).then((function(){r.setContainerSize(),r.setLoading(!1)})),this.registerReloadOnLanguageChange(this),this.registerCurrencyReaction.call(this),this.registerOnAccountSwitch.call(this),this.registerLandingCompanyChangeReaction.call(this),this.registerResidenceChangeReaction.call(this),window.addEventListener("click",this.onClickOutsideBlockly),window.addEventListener("beforeunload",this.onBeforeUnload),r.getCachedActiveTab(),(0,E.when)((function(){return[null==l?void 0:l.should_show_eu_error,null==l?void 0:l.is_landing_company_loaded]}),(function(){return e.showDigitalOptionsMaltainvestError()})),(0,E.reaction)((function(){return null==s?void 0:s.content_flag}),(function(){return e.showDigitalOptionsMaltainvestError()}))}},{key:"onUnmount",value:function(){a.DBot.terminateBot(),a.DBot.terminateConnection(),Blockly.derivWorkspace&&(clearInterval(Blockly.derivWorkspace.save_workspace_interval),Blockly.derivWorkspace.dispose()),"function"==typeof this.disposeReloadOnLanguageChangeReaction&&this.disposeReloadOnLanguageChangeReaction(),"function"==typeof this.disposeCurrencyReaction&&this.disposeCurrencyReaction(),"function"==typeof this.disposeSwitchAccountListener&&this.disposeSwitchAccountListener(),"function"==typeof this.disposeLandingCompanyChangeReaction&&this.disposeLandingCompanyChangeReaction(),"function"==typeof this.disposeResidenceChangeReaction&&this.disposeResidenceChangeReaction(),window.removeEventListener("click",this.onClickOutsideBlockly),window.removeEventListener("beforeunload",this.onBeforeUnload);var e=this.core.ui;e.setAccountSwitcherDisabledMessage(!1),e.setPromptHandler(!1),this.timer&&clearInterval(this.timer),performance.clearMeasures()}},{key:"registerReloadOnLanguageChange",value:function(){var e=this;this.disposeReloadOnLanguageChangeReaction=(0,E.reaction)((function(){return e.core.common.current_language}),(function(){var e=window.location.pathname;(/^\/bot/.test(e)||/^\/(br_)/.test(e)&&"bot"===e.split("/")[2])&&window.location.reload()}))}},{key:"registerCurrencyReaction",value:function(){var e=this;this.disposeCurrencyReaction=(0,E.reaction)((function(){return e.core.client.currency}),(function(e){Blockly.derivWorkspace&&Blockly.derivWorkspace.getAllBlocks().filter((function(e){return"trade_definition_tradeoptions"===e.type||"trade_definition_multiplier"===e.type||e.isDescendantOf("trade_definition_multiplier")&&"trade_parameters"===e.category_})).forEach((function(t){return t.setCurrency(e)}))}))}},{key:"registerOnAccountSwitch",value:function(){var e=this,t=this.core.client;this.disposeSwitchAccountListener=(0,E.reaction)((function(){return t.switch_broadcast}),(function(t){if(t){e.showDigitalOptionsMaltainvestError();var n=a.ApiHelpers.instance,r=n.active_symbols,o=n.contracts_for;Blockly.derivWorkspace&&r.retrieveActiveSymbols(!0).then((function(){o.disposeCache(),Blockly.derivWorkspace.getAllBlocks().filter((function(e){return"trade_definition_market"===e.type})).forEach((function(e){(0,a.runIrreversibleEvents)((function(){var t=new Blockly.Events.Create(e);Blockly.Events.fire(t)}))}))}))}}))}},{key:"registerLandingCompanyChangeReaction",value:function(){var e=this,t=this.core.client;this.disposeLandingCompanyChangeReaction=(0,E.reaction)((function(){return t.landing_company_shortcode}),(function(){return e.handleErrorForEu()}))}},{key:"registerResidenceChangeReaction",value:function(){var e=this,t=this.core.client;this.disposeResidenceChangeReaction=(0,E.reaction)((function(){return t.account_settings.country_code}),(function(){return e.handleErrorForEu()}))}},{key:"setDBotEngineStores",value:function(){var e=this.root_store,t=e.flyout,n=e.toolbar,r=e.save_modal,o=e.dashboard,i=e.quick_strategy,a=e.load_modal,l=e.run_panel,c=e.blockly_store,s=e.summary_card,u=this.core.client,d=a.handleFileChange,p=i.loadDataStrategy,f=c.setLoading,m=s.setContractUpdateConfig;this.dbot_store={client:u,flyout:t,toolbar:n,save_modal:r,dashboard:o,load_modal:a,run_panel:l,setLoading:f,setContractUpdateConfig:m,loadDataStrategy:p,handleFileChange:d},this.api_helpers_store={server_time:this.core.common.server_time,ws:this.root_store.ws}}}],r&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==W(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===W(o)?o:String(o)),r)}var o}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),q=function(){return JSON.parse(localStorage.getItem("dbot_settings"))},K=function(e){var t=q();return t?t[e]:null},X=function(e,t){var n=q()||{};n[e]=t,localStorage.setItem("dbot_settings",JSON.stringify(n))};function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}var Q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.is_loading=!1,this.active_tab=V.WORKSPACE,(0,E.makeObservable)(this,{is_loading:E.observable,active_tab:E.observable,setActiveTab:E.action.bound,setContainerSize:E.action.bound,onMount:E.action.bound,getCachedActiveTab:E.action.bound,onUnmount:E.action.bound,setLoading:E.action.bound}),this.root_store=t}var t,n;return t=e,(n=[{key:"setActiveTab",value:function(e){this.active_tab=e,X("active_tab",this.active_tab)}},{key:"setContainerSize",value:function(){this.active_tab===V.WORKSPACE&&(0,a.onWorkspaceResize)()}},{key:"onMount",value:function(){window.addEventListener("resize",this.setContainerSize)}},{key:"getCachedActiveTab",value:function(){K("active_tab")&&(this.active_tab=K("active_tab"))}},{key:"onUnmount",value:function(){window.removeEventListener("resize",this.setContainerSize)}},{key:"setLoading",value:function(e){this.is_loading=e}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==Z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Z(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}var ee,te,ne={},re=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.symbol=void 0,this.is_chart_loading=void 0,this.chart_type=void 0,this.granularity=void 0,this.wsSubscribe=function(e,t){if(1===e.subscribe){var n=JSON.stringify(e),r=ee.subscribeTicksHistory(e,t);ne[n]=r}},this.wsForget=function(e){var t=JSON.stringify(e);ne[t]&&(ne[t].unsubscribe(),delete ne[t])},this.wsForgetStream=function(e){ee.forgetStream(e)},this.wsSendRequest=function(e){return e.time?a.ServerTime.timePromise().then((function(){return{msg_type:"time",time:a.ServerTime.get().unix()}})):e.active_symbols?ee.activeSymbols():ee.storage.send(e)},this.getMarketsOrder=function(e){var t="synthetic_index",n=!!e.find((function(e){return e.market===t}));return e.slice().sort((function(e,t){return e.display_name<t.display_name?-1:1})).map((function(e){return e.market})).reduce((function(e,t){return-1===e.indexOf(t)&&e.push(t),e}),n?[t]:[])},(0,E.makeObservable)(this,{symbol:E.observable,is_chart_loading:E.observable,chart_type:E.observable,granularity:E.observable,is_contract_ended:E.computed,onStartBot:E.action.bound,onStopBot:E.action.bound,updateSymbol:E.action.bound,onSymbolChange:E.action.bound,updateGranularity:E.action.bound,updateChartType:E.action.bound,setChartStatus:E.action.bound,wsSubscribe:E.action.bound,wsForget:E.action.bound,wsForgetStream:E.action.bound,wsSendRequest:E.action.bound,getMarketsOrder:E.action.bound}),this.root_store=t,ee=t.ws;var r=t.run_panel;(0,E.reaction)((function(){return r.is_running}),(function(){return r.is_running?n.onStartBot():n.onStopBot()})),this.restoreFromStorage()}var t,n;return t=e,n=[{key:"is_contract_ended",get:function(){var e=this.root_store.transactions;return e.contracts.length>0&&e.contracts[0].is_ended}},{key:"onStartBot",value:function(){this.updateSymbol()}},{key:"onStopBot",value:function(){}},{key:"updateSymbol",value:function(){var e=Blockly.derivWorkspace.getAllBlocks().find((function(e){return"trade_definition_market"===e.type}));if(e&&"na"!==e){var t=e.getFieldValue("SYMBOL_LIST");this.symbol=t}}},{key:"onSymbolChange",value:function(e){this.symbol=e,this.saveToLocalStorage()}},{key:"updateGranularity",value:function(e){this.granularity=e,this.saveToLocalStorage()}},{key:"updateChartType",value:function(e){this.chart_type=e,this.saveToLocalStorage()}},{key:"setChartStatus",value:function(e){this.is_chart_loading=e}},{key:"saveToLocalStorage",value:function(){p.LocalStore.set("bot.chart_props",JSON.stringify({symbol:this.symbol,granularity:this.granularity,chart_type:this.chart_type}))}},{key:"restoreFromStorage",value:function(){try{var e=p.LocalStore.get("bot.chart_props");if(e){var t=JSON.parse(e),n=t.symbol,r=t.granularity,o=t.chart_type;this.symbol=n,this.granularity=r,this.chart_type=o}else this.granularity=0,this.chart_type="line"}catch(e){p.LocalStore.remove("bot.chart_props")}}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==$(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=window.location;if(!/^\/(br_)/.test(t.pathname))return e;var n=e.startsWith("/")?e:"/".concat(e);return"/".concat(t.pathname.split("/")[1]).concat(n)},ie=function(e){return oe("/public/images/common/".concat(e))};te=oe("/"),n.p=te;var ae=[{id:1,type:"Tour",subtype:"OnBoard",content:(0,M.localize)("Get started on Deriv Bot"),src:ie("dbot-onboard-tour.png"),search_id:"ugc-0"},{id:2,type:"Tour",subtype:"BotBuilder",content:(0,M.localize)("Let’s build a bot!"),src:ie("bot-builder-tour.png"),search_id:"ugc-1"}],le=[{id:1,type:"DBotVideo",content:(0,M.localize)("Deriv Bot - your automated trading partner"),url:"https://www.youtube.com/embed/QdI5zCkO4Gk",src:ie("video_dbot.webp"),search_id:"gc-0"}],ce=[{title:(0,M.localize)("What is Deriv Bot?"),description:[{type:"text",content:(0,M.localize)("Deriv Bot is a web-based strategy builder for trading digital options. It’s a platform where you can build your own automated trading bot using drag-and-drop 'blocks'.")}],search_id:"faq-0"},{title:(0,M.localize)("Where do I find the blocks I need?"),description:[{type:"text",content:(0,M.localize)("Follow these steps:")},{type:"text",content:(0,M.localize)("1. Go to <strong>Bot Builder</strong>.")},{type:"text",content:(0,M.localize)("2. Under the <strong>Blocks menu</strong>, you'll see a list of categories. Blocks are grouped within these categories. Choose the block you want and drag them to the workspace.")},{type:"image",src:ie("blocks_menu.png")},{type:"text",content:(0,M.localize)("3. You can also search for the blocks you want using the search bar above the categories.")},{type:"image",src:ie("blocks_menu_search.png")},{type:"text",content:(0,M.localize)('For more info, <a href="https://deriv.com/academy/blog/posts/how-to-build-a-basic-trading-bot-with-dbot/" target="_blank">check out this blog post</a> on the basics of building a trading bot.')}],search_id:"faq-1"},{title:(0,M.localize)("How do I remove blocks from the workspace?"),description:[{type:"text",content:(0,M.localize)("Click on the block you want to remove and press <strong>Delete</strong> on your keyboard.")}],search_id:"faq-2"},{title:(0,M.localize)("How do I create variables?"),description:[{type:"text",content:(0,M.localize)("1. Under the <strong>Blocks</strong> menu, go to <strong>Utility > Variables</strong>.")},{type:"text",content:(0,M.localize)("2. Enter a name for your variable, and hit <strong>Create</strong>. New blocks containing your new variable will appear below.")},{type:"text",content:(0,M.localize)("3. Choose the block you want and drag it to the workspace.")}],search_id:"faq-3"},{title:(0,M.localize)("Do you offer pre-built trading bots on Deriv Bot?"),description:[{type:"text",content:(0,M.localize)("Yes, you can get started with a pre-built bot using the <strong>Quick strategy</strong> feature. You’ll find some of the most popular trading strategies here: Martingale, D'Alembert, and Oscar's Grind. Just select the strategy, enter your trade parameters, and your bot will be created for you. You can always tweak the parameters later.")}],search_id:"faq-4"},{title:(0,M.localize)("What is a quick strategy?"),description:[{type:"text",content:(0,M.localize)("A quick strategy is a ready-made strategy that you can use in Deriv Bot. There are 3 quick strategies you can choose from: Martingale, D'Alembert, and Oscar's Grind.")},{type:"text",content:(0,M.localize)("<strong>Using a quick strategy</strong>")},{type:"text",content:(0,M.localize)("1. Go to <strong>Quick strategy</strong> and select the strategy you want.")},{type:"text",content:(0,M.localize)("2. Select the asset and trade type.")},{type:"text",content:(0,M.localize)("3. Set your trade parameters and hit <strong>Run</strong>.")},{type:"text",content:(0,M.localize)("4. Once the blocks are loaded onto the workspace, tweak the parameters if you want, or hit <strong>Run</strong> to start trading.")},{type:"text",content:(0,M.localize)("5. Hit <strong>Save</strong> to download your bot. You can choose to download your bot to your device or your Google Drive.")}],search_id:"faq-5"},{title:(0,M.localize)("How do I save my strategy?"),description:[{type:"text",content:(0,M.localize)("In <strong>Bot Builder</strong>, hit <strong>Save</strong> on the toolbar at the top to download your bot. Give your bot a name, and choose to download your bot to your device or Google Drive. Your bot will be downloaded as an XML file.")}],search_id:"faq-6"},{title:(0,M.localize)("How do I import my own trading bot into Deriv Bot?"),description:[{type:"text",content:(0,M.localize)("Just drag the XML file from your computer onto the workspace, and your bot will be loaded accordingly. Alternatively, you can hit <strong>Import</strong> in <strong>Bot Builder</strong>, and choose to import your bot from your computer or from your Google Drive.")},{type:"text",content:(0,M.localize)("<strong>Import from your computer</strong>")},{type:"text",content:(0,M.localize)("1. After hitting <strong>Import</strong>, select <strong>Local</strong> and click <strong>Continue</strong>.")},{type:"text",content:(0,M.localize)("2. Select your XML file and hit <strong>Open</strong>.")},{type:"text",content:(0,M.localize)("3. Your bot will be loaded accordingly.")},{type:"text",content:(0,M.localize)("<strong>Import from your Google Drive</strong>")},{type:"text",content:(0,M.localize)("1. After hitting <strong>Import</strong>, select <strong>Google Drive</strong> and click <strong>Continue</strong>.")},{type:"text",content:(0,M.localize)("2. Select your XML file and hit <strong>Select</strong>.")},{type:"text",content:(0,M.localize)("3. Your bot will be loaded accordingly.")}],search_id:"faq-7"},{title:(0,M.localize)("How do I reset the workspace?"),description:[{type:"text",content:(0,M.localize)("In <strong>Bot Builder</strong>, hit <strong>Reset</strong> on the toolbar at the top. This will clear the workspace. Please note that any unsaved changes will be lost.")}],search_id:"faq-8"},{title:(0,M.localize)("How do I clear my transaction log?"),description:[{type:"text",content:(0,M.localize)("1. Hit <strong>Reset</strong> at the bottom of stats panel.")},{type:"image",src:ie("reset_transaction_log.png")},{type:"text",content:(0,M.localize)("2. Hit <strong>Ok</strong> to confirm.")},{type:"image",src:ie("reset_transaction_log_message.png")}],search_id:"faq-9"},{title:(0,M.localize)("How do I control my losses with Deriv Bot?"),description:[{type:"text",content:(0,M.localize)("There are several ways to control your losses with Deriv Bot. Here’s a simple example of how you can implement loss control in your strategy:")},{type:"image",src:ie("loss_control_all_block.png"),imageclass:"loss-control"},{type:"text",content:(0,M.localize)("<strong>1.</strong> Create the following variables and place them under <strong>Run once at start</strong>:")},{type:"text",content:(0,M.localize)("• <strong>Stop loss threshold</strong>: Use this variable to store your loss limit. You can assign any amount you want. Your bot will stop when your losses hits or exceeds this amount.")},{type:"text",content:(0,M.localize)("Example:")},{type:"image",src:ie("loss_control_set_stop_loss.png")},{type:"text",content:(0,M.localize)("• <strong>Current stake</strong>: Use this variable to store the stake amount. You can assign any amount you want, but it must be a positive number.")},{type:"text",content:(0,M.localize)("Example:")},{type:"image",src:ie("loss_control_set_current_stake.png")},{type:"text",content:(0,M.localize)("This is how your trade parameters, variables, and trade options should look like:")},{type:"image",src:ie("loss_control_trade_parameters.png")},{type:"text",content:(0,M.localize)("<strong>2.</strong> Set the <strong>Purchase conditions</strong>. In this example, your bot will purchase a <strong>Rise</strong> contract when it starts and after a contract closes.")},{type:"image",src:ie("loss_control_purchase_conditions.png")},{type:"text",content:(0,M.localize)("<strong>3.</strong> Use a logic block to check if <strong>Total profit/loss</strong> is more than the <strong>Stop loss threshold</strong> amount. You can find the <strong>Total profit/loss</strong> variable under <strong>Analysis > Stats</strong> on the <strong>Blocks menu</strong> on the left. Your bot will continue to purchase new contracts until the <strong>Total profit/loss</strong> amount exceeds the <strong>Stop loss threshold</strong> amount.")},{type:"image",src:ie("loss_control_restart_trade_conditions.png")}],search_id:"faq-10"},{title:(0,M.localize)("Can I run Deriv Bot on multiple tabs in my web browser?"),description:[{type:"text",content:(0,M.localize)('Yes, you can. However, there are limits on your account, such as maximum number of open positions and maximum aggregate payouts on open positions. So, just keep these limits in mind when opening multiple positions. You can find more info about these limits at <a href="https://app.deriv.com/account/account-limits" target="_blank">Settings > Account limits</a>.')}],search_id:"faq-11"},{title:(0,M.localize)("Can I trade cryptocurrencies on Deriv Bot?"),description:[{type:"text",content:(0,M.localize)("No, we don't offer cryptocurrencies on Deriv Bot.")}],search_id:"faq-12"},{title:(0,M.localize)("Do you sell trading bots?"),description:[{type:"text",content:(0,M.localize)("No, we don't. However, you'll find quick strategies on Deriv Bot that'll help you build your own trading bot for free.")}],search_id:"faq-13"},{title:(0,M.localize)("In which countries is Deriv Bot available?"),description:[{type:"text",content:(0,M.localize)('We offer our services in all countries, except for the ones <a href="https://deriv.com/tnc/general-terms.pdf" target="_blank">mentioned in our terms and conditions.</a>')}],search_id:"faq-14"},{title:(0,M.localize)("If I close my web browser, will Deriv Bot continue to run?"),description:[{type:"text",content:(0,M.localize)("No, Deriv Bot will stop running when your web browser is closed.")}],search_id:"faq-15"},{title:(0,M.localize)("What are the most popular strategies for automated trading?"),description:[{type:"text",content:(0,M.localize)("Three of the most commonly used strategies in automated trading are Martingale, D'Alembert, and Oscar's Grind — you can find them all ready-made and waiting for you in Deriv Bot.")}],search_id:"faq-16"},{title:(0,M.localize)("How do I build a trading bot?"),description:[{type:"text",content:(0,M.localize)('<a href="https://www.youtube.com/watch?v=QdI5zCkO4Gk&t=203s" target="_blank">Watch this video</a> to learn how to build a trading bot on Deriv Bot. Also, <a href="https://deriv.com/academy/blog/posts/how-to-build-a-basic-trading-bot-with-dbot/" target="_blank">check out this blog post</a> on building a trading bot.')}],search_id:"faq-17"}],se=[{qs_name:"MARTINGALE",type:(0,M.localize)("About Martingale"),content:[(0,M.localize)("Exploring the Martingale strategy in Deriv Bot"),(0,M.localize)("An example of Martingale strategy")]},{qs_name:"D_ALEMBERT",type:(0,M.localize)("About D'Alembert"),content:[(0,M.localize)("Exploring the D’Alembert strategy in Deriv Bot"),(0,M.localize)("An example of D’Alembert strategy")]},{qs_name:"OSCARS_GRIND",type:(0,M.localize)("About Oscar's Grind"),content:[(0,M.localize)("Exploring the Oscar’s Grind strategy in Deriv Bot"),(0,M.localize)("An example of Oscar’s Grind strategy")]},{qs_name:"REVERSE_MARTINGALE",type:(0,M.localize)("About Reverse Martingale"),content:[(0,M.localize)("Exploring the Reverse Martingale strategy in Deriv Bot"),(0,M.localize)("An example of Reverse Martingale strategy")]}],ue=Object.freeze({TAB_LOCAL:"local_tab",TAB_GOOGLE:"google_tab",TAB_RECENT:"recent_tab"}),de=function(e,t){var n,r;"store"===e?t&&t.getElementsByClassName("injectionDiv").length>1&&t.removeChild(t.getElementsByClassName("injectionDiv")[0]):null==t||null===(n=t.current)||void 0===n||n.removeChild(null==t||null===(r=t.current)||void 0===r?void 0:r.children[0])},pe={key:"onboard_tour"},fe=("".concat(pe.key,"_status"),function(e,t){return X(t,e)}),me=Object.freeze({0:"onboarding",1:"bot_builder"});function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ye(){ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==he(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function ve(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function _e(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var be=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.tutorials_combined_content=[],this.combined_search=[],this.active_tab=0,this.active_tab_tutorials=0,this.active_tour_step_number=0,this.dialog_options={},this.faq_search_value="",this.getFileArray=[],this.has_file_loaded=!1,this.has_mobile_preview_loaded=!1,this.active_tour="",this.is_dialog_open=!1,this.is_file_supported=!1,this.is_info_panel_visible=!1,this.is_preview_on_popup=!1,this.is_tour_dialog_visible=!1,this.show_toast=!1,this.show_mobile_tour_dialog=!1,this.strategy_save_type="unsaved",this.toast_message="",this.is_web_socket_intialised=!0,this.search_param="",this.guide_tab_content=ae,this.video_tab_content=le,this.faq_tab_content=ce,this.filtered_tab_list=[],this.is_chart_modal_visible=!1,this.resetTutorialTabContent=function(){r.guide_tab_content=ae,r.video_tab_content=le,r.faq_tab_content=ce},this.filterTuotrialTab=function(e){r.search_param=e;var t=r.combined_search.filter((function(t){return t.includes(e.toLowerCase())})),n=[],o=[],i=[],a=t.map((function(e){var t=e.split("#")[0],r=t.split("-")[1];return t.includes("ugc")?(n.push(ae[Number(r)]),ae[Number(r)]):t.includes("gc")?(o.push(le[Number(r)]),le[Number(r)]):(i.push(ce[Number(r)]),ce[Number(r)])}));return r.guide_tab_content=n,r.video_tab_content=o,r.faq_tab_content=i,a},this.setShowMobileTourDialog=function(e){r.show_mobile_tour_dialog=e},this.setWebSocketState=function(e){r.is_web_socket_intialised=e},this.setOpenSettings=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.toast_message=e,r.show_toast=t},this.setChartModalVisibility=function(){r.is_chart_modal_visible=!r.is_chart_modal_visible},this.setIsFileSupported=function(e){r.is_file_supported=e},this.setTourActiveStep=function(e){r.active_tour_step_number=e},this.setPreviewOnDialog=function(e){r.has_mobile_preview_loaded=e,(0,r.root_store.load_modal.onLoadModalClose)()},this.setStrategySaveType=function(e){r.strategy_save_type=e},this.setPreviewOnPopup=function(e){r.is_preview_on_popup=e},this.setTourDialogVisibility=function(e){r.is_tour_dialog_visible=e},this.setActiveTour=function(e){r.active_tour=e},this.setFileLoaded=function(e){r.has_file_loaded=e,de("store",document.getElementById("load-strategy__blockly-container"))},this.onCloseDialog=function(){r.is_dialog_open=!1},this.setActiveTab=function(e){r.active_tab=e},this.setActiveTabTutorial=function(e){r.active_tab_tutorials=e},this.setFAQSearchValue=function(e){r.faq_search_value=e},this.showVideoDialog=function(e){var t=e.url,n=e.type;["google","url"].includes(n)?("url"===n&&(r.dialog_options={url:t}),r.is_dialog_open=!0):r.is_dialog_open=!1},this.setInfoPanelVisibility=function(e){r.is_info_panel_visible=e},this.onZoomInOutClick=function(e){var t=Blockly.mainWorkspace,n=t.getMetrics(),r=e?1:-1;t.zoom(n.viewWidth/2,n.viewHeight/2,r)},this.onCloseTour=function(){fe((new Date).getTime(),"".concat(pe.key,"_token")),r.setActiveTour("")},this.setTourEnd=function(e){var t=e.key;r.core.ui.is_mobile&&r.setTourDialogVisibility(!0),fe((new Date).getTime(),"".concat(t,"_token"))},this.onTourEnd=function(e,t){8===e&&(r.onCloseTour(),r.setTourEnd(pe),r.setActiveTour("")),t||3!==e||(r.onCloseTour(),r.setTourEnd(pe),r.setActiveTour(""))},(0,E.makeObservable)(this,{active_tab_tutorials:E.observable,active_tab:E.observable,dialog_options:E.observable,faq_search_value:E.observable,getFileArray:E.observable,has_file_loaded:E.observable,has_mobile_preview_loaded:E.observable,initInfoPanel:E.action.bound,active_tour:E.observable,is_dialog_open:E.observable,is_file_supported:E.observable,is_info_panel_visible:E.observable,is_preview_on_popup:E.observable,is_tour_dialog_visible:E.observable,is_web_socket_intialised:E.observable,is_dark_mode:E.computed,tutorials_combined_content:E.observable,onCloseDialog:E.action.bound,onCloseTour:E.action.bound,onTourEnd:E.action.bound,setActiveTab:E.action.bound,setActiveTabTutorial:E.action.bound,setWebSocketState:E.action.bound,setFAQSearchValue:E.action.bound,setFileLoaded:E.action.bound,setInfoPanelVisibility:E.action.bound,setIsFileSupported:E.action.bound,setPreviewOnDialog:E.action.bound,setPreviewOnPopup:E.action.bound,setActiveTour:E.action.bound,setTourDialogVisibility:E.action.bound,setOpenSettings:E.action.bound,resetTutorialTabContent:E.action.bound,filterTuotrialTab:E.action.bound,show_toast:E.observable,show_mobile_tour_dialog:E.observable,showVideoDialog:E.action.bound,strategy_save_type:E.observable,toast_message:E.observable,guide_tab_content:E.observable,faq_tab_content:E.observable,video_tab_content:E.observable,setStrategySaveType:E.action.bound,setShowMobileTourDialog:E.action.bound,is_chart_modal_visible:E.observable}),this.root_store=t,this.core=n;var o=_e(ae).map((function(e){return"".concat(e.search_id,"# ").concat(e.content.toLowerCase())})),i=_e(le).map((function(e){return"".concat(e.search_id,"# ").concat(e.content.toLowerCase())})),l=ce.map((function(e){return"".concat(e.search_id,"# ").concat(e.title.toLowerCase()," ").concat(e.description.map((function(e){var t=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/<.*?>/g,"")}(e.content);return null==t?void 0:t.toLowerCase()})).join(" "))}));this.combined_search=[].concat(_e(o),_e(i),_e(l));var c=this.root_store.load_modal,s=c.previewRecentStrategy,u=c.current_workspace_id,d=function(){Blockly.derivWorkspace.asyncClear(),Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(Blockly.derivWorkspace.strategy_to_load),Blockly.derivWorkspace)};(0,E.reaction)((function(){return r.is_dark_mode}),(function(){var e,t,n,o,i;Blockly&&(o=null===(e=Blockly)||void 0===e?void 0:e.Xml.workspaceToDom(null===(t=Blockly)||void 0===t?void 0:t.derivWorkspace),i=null===(n=Blockly)||void 0===n?void 0:n.Xml.domToText(o),Blockly&&(Blockly.derivWorkspace.strategy_to_load=i)),(0,a.setColors)(r.is_dark_mode),1===r.active_tab?d():(d(),s(u))})),(0,E.reaction)((function(){return r.is_preview_on_popup}),function(){var e,t=(e=ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&r.setPreviewOnPopup(!1);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ve(i,r,o,a,l,"next",e)}function l(e){ve(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()),this.initInfoPanel()}var t,n;return t=e,(n=[{key:"is_dark_mode",get:function(){return this.root_store.app.core.ui.is_dark_mode_on}},{key:"initInfoPanel",value:function(){localStorage.getItem("dbot_should_show_info")||(this.is_info_panel_visible=!0)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==he(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===he(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ke=n(97108),Ee=n.n(ke);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t,n){return(t=Ce(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(){Oe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==we(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function xe(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){xe(i,r,o,a,l,"next",e)}function l(e){xe(i,r,o,a,l,"throw",e)}a(void 0)}))}}function Ce(e){var t=function(e,t){if("object"!==we(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===we(t)?t:String(t)}var Ie=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.IS_PENDING=!1,this.IS_PROCESSED=!0,this.endpoint="https://dbot-conf-dot-deriv-bi-reporting.as.r.appspot.com/dbotconf",this.run_id="",this.run_start=0,this.should_post_xml=!0,this.strategy_content="",this.transaction_ids={},this.cleanXmlDom=function(e){var t=["x","y","id"],n=(0,p.cloneObject)(e);return function e(n){t.forEach((function(e){return n.removeAttribute(e)})),Array.from(n.children).forEach((function(t){return e(t)}))}(n),n},this.getHash=function(e){return btoa(Ee().str(e))},(0,E.makeObservable)(this,{IS_PENDING:E.observable,IS_PROCESSED:E.observable,endpoint:E.observable,run_id:E.observable,run_start:E.observable,should_post_xml:E.observable,strategy_content:E.observable,transaction_ids:E.observable,trackRun:E.action.bound,trackTransaction:E.action.bound,setRunId:E.action.bound,setRunStart:E.action.bound,setStrategyContent:E.action.bound,cleanXmlDom:E.action.bound,getHash:E.action.bound}),this.root_store=t,this.core=n,((0,p.isProduction)()||/(.*?)\.binary.sx$/.test(window.location.hostname))&&(this.root_store=t,(0,E.reaction)((function(){return r.root_store.run_panel.is_running}),(function(){return r.root_store.run_panel.is_running?r.trackRun():void 0})),(0,E.reaction)((function(){return r.root_store.transactions.transactions}),(function(e){r.run_id&&r.trackTransaction(e)})))}var t,r,o,i;return t=e,r=[{key:"trackRun",value:(i=Ae(Oe().mark((function e(){var t,n,r;return Oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.cleanXmlDom(Blockly.Xml.workspaceToDom(a.DBot.workspace,!0)),n=Blockly.Xml.domToText(t),r=this.getHash(n),this.getHash(this.strategy_content)!==r&&(this.should_post_xml=!0,this.setStrategyContent(n)),this.setRunId(this.getHash(r+this.core.client.loginid+Math.random())),this.setRunStart(this.core.common.server_time.unix());case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"trackTransaction",value:(o=Ae(Oe().mark((function e(t){var r,o,i,a,l=this;return Oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(297).then(n.t.bind(n,32845,23));case 2:if(r=e.sent,o=t[0]){e.next=6;break}return e.abrupt("return");case 6:i=o.data.transaction_ids.buy,Object.keys(this.transaction_ids).includes(i.toString())||(this.transaction_ids[i]=this.IS_PENDING,a=function(){return{body:r.gzip(l.strategy_content),headers:{"Content-Encoding":"gzip","Content-Type":"application/xml",Referer:window.location.hostname}}},fetch("".concat(this.endpoint,"/").concat(this.run_id,"/").concat(i,"/").concat(this.run_start,"/").concat(this.getHash(this.strategy_content)),Te(Te({},this.should_post_xml?a():{}),{},{method:"POST",mode:"no-cors"})).then((function(){l.should_post_xml=!1,l.transaction_ids[i]=l.IS_PROCESSED})).catch((function(){delete l.transaction_ids[i]})));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setRunId",value:function(e){this.run_id=e}},{key:"setRunStart",value:function(e){this.run_start=e}},{key:"setStrategyContent",value:function(e){this.strategy_content=e}}],r&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ce(r.key),r)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==Le(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Le(o)?o:String(o)),r)}var o}var Re=function(e,t,n){return t&&Ne(e.prototype,t),n&&Ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getSuccessJournalMessage=function(e,t){var n=t.profit,r=t.sold_for,o=t.longcode,i=t.transaction_id,l=t.current_currency;switch(e){case a.log_types.LOAD_BLOCK:return(0,M.localize)("Blocks are loaded successfully");case a.log_types.NOT_OFFERED:return(0,M.localize)("Resale of this contract is not offered.");case a.log_types.PURCHASE:return(0,M.localize)("Bought: {{longcode}} (ID: {{transaction_id}})",{longcode:o,transaction_id:i});case a.log_types.SELL:return(0,M.localize)("Sold for: {{sold_for}}",{sold_for:r});case a.log_types.PROFIT:return(0,M.localize)("Profit amount: {{profit}}",{profit:n});case a.log_types.LOST:return(0,M.localize)("Loss amount: {{profit}}",{profit:n});case a.log_types.WELCOME_BACK:return l?(0,M.localize)("Welcome back! Your messages have been restored. You are using your {{current_currency}} account.",{current_currency:l}):(0,M.localize)("Welcome back! Your messages have been restored.");case a.log_types.WELCOME:if(l)return(0,M.localize)("You are using your {{current_currency}} account.",{current_currency:l});break;default:return null}},this.onClickDownloadTransaction=function(){var e=[[(0,M.localize)("Market"),(0,M.localize)("Reference ID (buy)"),(0,M.localize)("Reference ID (sell)"),(0,M.localize)("Barrier"),(0,M.localize)("Start Time"),(0,M.localize)("Entry Spot"),(0,M.localize)("Entry Spot Time"),(0,M.localize)("Exit Spot"),(0,M.localize)("Exit Spot Time"),(0,M.localize)("Buy Price"),(0,M.localize)("Profit/Loss")]];n.root_store.transactions.transactions.forEach((function(t){return e.push([t.data.display_name,t.data.transaction_ids.buy,t.data.transaction_ids.sell,t.data.barrier,t.data.date_start,t.data.entry_tick,t.data.entry_tick_time,t.data.exit_tick,t.data.exit_tick_time,t.data.buy_price,t.data.profit])}));var t="data:text/csv;charset=utf-8, ".concat(e.map((function(e){return e.join(",")})).join("\n")),r=encodeURI(t),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download",(0,M.localize)("Transactions.csv")),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o)},this.onClickDownloadJournal=function(){var e=[[(0,M.localize)("Date"),(0,M.localize)("Time"),(0,M.localize)("Message")]];n.root_store.journal.filtered_messages.map((function(t){var r,o;o="success"!==t.message_type?JSON.stringify(t.message):n.getSuccessJournalMessage(t.message.toString(),t.extra);var i=[t.date,t.time,null===(r=o)||void 0===r?void 0:r.replace("&#x2F;","/")];e.push(i)}));var t="data:text/csv;charset=utf-8, ".concat(e.map((function(e){return e.join(",")})).join("\n")),r=encodeURI(t),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download",(0,M.localize)("Journal.csv")),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o)},(0,E.makeObservable)(this,{onClickDownloadTransaction:E.action.bound,onClickDownloadJournal:E.action.bound,getSuccessJournalMessage:E.action.bound}),this.root_store=t})),De="text",Pe="image",ze="block",je="example",Me=De,Fe=Pe,Ue=ze,Ve=je,Ge=function(e){return n.p=e,{procedures_ifreturn:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"if-return"}],math_arithmetic:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me}],math_single:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me}],math_constrain:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Ve,example_id:"constrain"}],text_print:[{type:Me},{type:Ue},{type:Me}],text_prompt_ext:[{type:Me},{type:Ue},{type:Me}],tick_analysis:[{type:Me},{type:Ue}],read_details:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me}],last_digit:[{type:Me},{type:Ue}],read_ohlc:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Ve,example_id:"in_candle_list_read"}],read_ohlc_obj:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Ve,example_id:"read_candle_value"}],check_direction:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me}],get_ohlc:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"get_candle"},{type:Me}],ohlc:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"candle_list_1"}],ohlc_values:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"candle_list"}],is_candle_black:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Fe,width:"100%",url:"".concat(n.p,"media/is_candle_black.jpeg")},{type:Me},{type:Fe,width:"100%",url:"".concat(n.p,"media/is_candle_black_1.jpeg")},{type:Me}],ohlc_values_in_list:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Ve,example_id:"candle_list_1"}],variables_gets:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me}],variables_set:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Fe,width:"100%",url:"".concat(n.p,"media/create_variable.jpg")},{type:Me},{type:Fe,width:"100%",url:"".concat(n.p,"media/set_variable.png")}],epoch:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Ve,example_id:"epoch"}],todatetime:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"todatetime"},{type:Me}],totimestamp:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"totimestamp"},{type:Me}],notify_telegram:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Ve,example_id:"notify_telegram"}],console:[{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me}],balance:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me}],sma_statement:[{type:Me},{type:Ue},{type:Me},{type:Fe,width:"60%",url:"".concat(n.p,"media/sma_formula.png")},{type:Me},{type:Me},{type:Me},{type:Me},{type:Fe,width:"100%",url:"".concat(n.p,"media/sma_chart_1.png")},{type:Me},{type:Fe,width:"100%",url:"".concat(n.p,"media/sma_chart_2.png")},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Ve,example_id:"sma_block_example"},{type:Me},{type:Me},{type:Ve,example_id:"sma_block_example_1"},{type:Me},{type:Me},{type:Ve,example_id:"sma_array"},{type:Me},{type:Me},{type:Me},{type:Fe,width:"100%",url:"".concat(n.p,"media/sma_array_explanation.jpeg")}],trade_definition:[{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Me},{type:Ue}],trade_definition_tradeoptions:[{type:Me},{type:Ue}],trade_definition_multiplier:[{type:Me},{type:Me},{type:Me},{type:Me}],before_purchase:[{type:Me},{type:Ue},{type:Me}],during_purchase:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"sell_available"}],sell_at_market:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"sell_available"}],after_purchase:[{type:Me},{type:Ue},{type:Me}],trade_again:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"trade_again"}],contract_check_result:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Ve,example_id:"check_result"}],sell_price:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"sell_pl"}],controls_if:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"controls_if"},{type:Me},{type:Ve,example_id:"compare_logic"},{type:Ve,example_id:"compare_logic_1"}],logic_operation:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Fe,width:"40%",url:"".concat(n.p,"media/logic.png")}],controls_whileUntil:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Ve,example_id:"repeat_while"},{type:Me},{type:Ve,example_id:"repeat_until"}],controls_for:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"controls_for"},{type:Me},{type:Me}],controls_forEach:[{type:Me},{type:Ue},{type:Me},{type:Ve,example_id:"controls_forEach"},{type:Me},{type:Me},{type:Me}],controls_flow_statements:[{type:Me},{type:Ue},{type:Me},{type:Me},{type:Ve,example_id:"break_out"},{type:Me},{type:Ve,example_id:"continue"}]}};const He={text:[(0,M.localize)("This block is mandatory. Here is where you can decide if your bot should continue trading. Only one copy of this block is allowed."),(0,M.localize)("This block is commonly used to adjust the parameters of your next trade and to implement stop loss/take profit logic.")]},Je={text:[(0,M.localize)("This block returns current account balance."),(0,M.localize)('The only input parameter determines how block output is going to be formatted. In case if the input parameter is "string" then the account currency will be added.'),(0,M.localize)("Example output of the below example will be:"),(0,M.localize)('1. for "string": 1325.68 USD'),(0,M.localize)('2. for "number": 1325.68')]},We={text:[(0,M.localize)("This block is mandatory. Only one copy of this block is allowed. It is added to the canvas by default when you open Deriv Bot."),(0,M.localize)("After defining trade parameters and trade options, you may want to instruct your bot to purchase contracts when specific conditions are met. To do that you can use conditional blocks and indicators blocks to help your bot to make decisions.")]},Ye={text:[(0,M.localize)('This block is used to determine if the market price moves in the selected direction or not. It gives you a value of "True" or "False".'),(0,M.localize)("Examples:"),(0,M.localize)('1. If the selected direction is "Rise", and the previous tick value is less than the current tick value, the output will be "True". Otherwise, the output will be an empty string.'),(0,M.localize)('2. If the selected direction is "Fall", and the previous tick value is more than the current tick value, the output will be "True". Otherwise, the output will be an empty string.')]},qe={text:[(0,M.localize)("This block displays messages in the developer’s console with an input that can be either a string of text, a number, boolean, or an array of data."),(0,M.localize)("There are 4 message types:"),(0,M.localize)("1. 'Log' displays a regular message."),(0,M.localize)("2. 'Warn' displays a message in yellow to highlight something that needs attention."),(0,M.localize)("3. 'Error' displays a message in red to highlight something that needs to be resolved immediately."),(0,M.localize)("4. 'Table' takes an array of data, such as a list of candles, and displays it in a table format.")]},Ke={text:[(0,M.localize)('You can check the result of the last trade with this block. It can only be placed within the "Restart trading conditions" root block.'),(0,M.localize)('If "Win" is selected, it will return "True" if your last trade was successful. Otherwise, it will return an empty string.'),(0,M.localize)('If "Loss" is selected, it will return "True" if your last trade was unsuccessful. Otherwise, it will return an empty string.'),(0,M.localize)("Example:")]},Xe={text:[(0,M.localize)("This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block."),(0,M.localize)("Examples:"),(0,M.localize)('1. In the below example the loop is terminated in case "x" is "False" even though only one iteration is complete'),(0,M.localize)('2. In the below example the loop jumps to the next iteration without executing below block in case if "x" is "False"')]},Ze={text:[(0,M.localize)('This block uses the variable "i" to control the iterations. With each iteration, the value of "i" is determined by the items in a given list.'),(0,M.localize)("Example:"),(0,M.localize)('"i" starts with the value of 1, and it will be increased by 2 at every iteration. The loop will repeat until "i" reaches the value of 12, and then the loop is terminated.'),(0,M.localize)('You can use "i" inside the loop, for example to access list items')]},Qe={text:[(0,M.localize)('This block uses the variable "i" to control the iterations. With each iteration, the value of "i" is determined by the items in a given list.'),(0,M.localize)("Example:"),(0,M.localize)('In this example, the loop will repeat three times, as that is the number of items in the given list. During each iteration, the variable "i" will be assigned a value from the list. '),(0,M.localize)('Please note that changing the value of "i" won\'t change the value of the original item in the list')]},$e={text:[(0,M.localize)("This block evaluates a statement and will perform an action only when the statement is true."),(0,M.localize)("Click the plus icon to extend the functionality of this block."),(0,M.localize)('You can also use "Compare" and "Logic operation" blocks to make test variables.')]},et={text:[(0,M.localize)("This block repeats instructions as long as a given condition is true."),(0,M.localize)("Examples:"),(0,M.localize)("1. In the example below, the instructions are repeated as long as the value of x is less than or equal to 10. Once the value of x exceeds 10, the loop is terminated."),(0,M.localize)("2. In this example, the instructions are repeated as long as the value of x is greater than or equal to 10. Once the value of x drops below 10, the loop is terminated.")]},tt={text:[(0,M.localize)("Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed."),(0,M.localize)("Example:")]},nt={text:[(0,M.localize)('"Seconds Since Epoch" block returns the number of seconds since January 1st, 1970.'),(0,M.localize)("Example:"),(0,M.localize)("1551661986 seconds since Jan 01 1970 (UTC) translates to 03/04/2019 @ 1:13am (UTC)."),(0,M.localize)("You might need it when you want to repeat an actions after certain amount of time."),(0,M.localize)("The example below restarts trading after 30 or more seconds after 1 minute candle was started.")]},rt={text:[(0,M.localize)("This block gives you a specific candle from within the selected time interval."),(0,M.localize)('In this example, the open price of a candle is assigned to the variable "candle_open_price".'),(0,M.localize)("In the above example it is assumed that variable candle_open_price is processed somewhere within other blocks.")]},ot={text:[(0,M.localize)('This block returns "True" if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.'),(0,M.localize)('The term "candle" refers to each bar on the candlestick chart. Each candle represents four market prices for the selected time interval:'),(0,M.localize)("Each candlestick on the chart represents 4 market prices for the selected time interval:"),(0,M.localize)("- Open price: the opening price"),(0,M.localize)("- High price: the highest price"),(0,M.localize)("- Low price: the lowest price"),(0,M.localize)("- Close price: the closing price"),(0,M.localize)("A black (or red) candle indicates that the open price is higher than the close price. This represents a downward movement of the market price."),(0,M.localize)("A white (or green) candle indicates that the open price is lower than the close price. This represents an upward movement of the market price."),(0,M.localize)("The time interval for each candle can be set from one minute to one day.")]},it={text:[(0,M.localize)("This block gives you the last digit of the latest tick value of the selected market. If the latest tick value is 1410.90, this block will return 0. It’s useful for digit-based contracts such as Even/Odd, Matches/Differs, or Higher/Lower.")]},at={text:[(0,M.localize)('This block performs the "AND" or the "OR" logic operation with the given values.'),(0,M.localize)('In case if the "AND" operation is selected, the block returns "True" only if both given values are "True"'),(0,M.localize)('In case if the "OR" operation is selected, the block returns "True" in case if one or both given values are "True"')]},lt={text:[(0,M.localize)("This block performs arithmetic operations between two numbers."),(0,M.localize)("Available operations:"),(0,M.localize)("- Addition"),(0,M.localize)("- Subtraction"),(0,M.localize)("- Multiplication"),(0,M.localize)("- Division"),(0,M.localize)("- Raise the first number to the power of the second number")]},ct={text:[(0,M.localize)("This block constrains a given number within a set range."),(0,M.localize)("In case if the given number is less than the lower boundary of the range, the block returns the lower boundary value. Similarly, if the given number is greater than the higher boundary, the block will return the higher boundary value. In case if the given value is between boundaries, the block will return the given value unchanged."),(0,M.localize)("In the below example the block returns the value of 10 as the given value (5) is less than the lower boundary (10)")]},st={text:[(0,M.localize)("This block performs the following operations to a given number"),(0,M.localize)("Available operations are:"),(0,M.localize)("- Square root"),(0,M.localize)("- Absolute"),(0,M.localize)("- Negation"),(0,M.localize)("- Natural log"),(0,M.localize)("- Euler’s number (2.71) to the power of a given number"),(0,M.localize)("- 10 to the power of a given number")]},ut={text:[(0,M.localize)("This block sends a message to a Telegram channel. You will need to create your own Telegram bot to use this block."),(0,M.localize)("Here’s how:"),(0,M.localize)("1. Create a Telegram bot and get your Telegram API token. Read more on how to create bots in Telegram here: https://core.telegram.org/bots#6-botfather"),(0,M.localize)("2. Start a chat with your newly created Telegram bot and make sure to send it some messages before proceeding to the next step. (e.g. Hello Bot!)"),(0,M.localize)("3. Get the chat ID using the Telegram REST API (read more: https://core.telegram.org/bots/api#getupdates)"),(0,M.localize)("- Visit the following URL, make sure to replace <access_token> with the Telegram API token you created in Step 1: https://api.telegram.org/bot<access_token>/getUpdates"),(0,M.localize)("- Find the chat ID property in the response, and copy the value of the id property"),(0,M.localize)("4. Come back to Deriv Bot and add the Notify Telegram block to the workspace. Paste the Telegram API token and chat ID into the block fields accordingly.")]},dt={text:[(0,M.localize)("This block gives you a list of candles within a selected time interval."),(0,M.localize)('In this example, this block is used with another block to get the open prices from a list of candles. The open prices are then assigned to the variable called "cl".')]},pt={text:[(0,M.localize)("This block gives you the selected candle value from a list of candles within the selected time interval. You can choose from open price, close price, high price, low price, and open time."),(0,M.localize)('In this example, the open prices from a list of candles are assigned to a variable called "candle_list".')]},ft={text:[(0,M.localize)("This block gives you the selected candle value from a list of candles. You can choose from open price, close price, high price, low price, and open time."),(0,M.localize)("This block requires a list of candles as an input parameter."),(0,M.localize)('In this example, the open prices from a list of candles are assigned to a variable called "cl".')]},mt={text:[(0,M.localize)("Used within a function block, this block returns a value when a specific condition is true."),(0,M.localize)("Example:")]},ht={text:[(0,M.localize)("This block gives you information about your last contract."),(0,M.localize)("You can choose to see one of the following:"),(0,M.localize)("- Deal reference ID: the reference ID of the contract"),(0,M.localize)("- Purchase price: the purchase price (stake) of the contract"),(0,M.localize)("- Payout: the payout of the contract"),(0,M.localize)("- Profit: the profit you’ve earned"),(0,M.localize)("- Contract type: the name of the contract type such as Rise, Fall, Touch, No Touch, etс."),(0,M.localize)("- Entry time: the starting time of the contract"),(0,M.localize)("- Entry value: the value of the first tick of the contract"),(0,M.localize)("- Exit time: the contract expiration time"),(0,M.localize)("- Exit value: the value of the last tick of the contract"),(0,M.localize)("- Barrier: the barrier value of the contract (applicable to barrier-based trade types such as stays in/out, touch/no touch, etc.)"),(0,M.localize)('- Result: the result of the last contract: "win" or "loss"')]},yt={text:[(0,M.localize)("This block gives you the specified candle value for a selected time interval. You can choose which value you want:"),(0,M.localize)("- Open: the opening price"),(0,M.localize)("- High: the highest price"),(0,M.localize)("- Low: the lowest price"),(0,M.localize)("- Close: the closing price"),(0,M.localize)("- Open time: the opening time stamp"),(0,M.localize)('In the example below, the opening price is selected, which is then assigned to a variable called "op".')]},vt={text:[(0,M.localize)("This block gives you the selected candle value such as open price, close price, high price, low price, and open time. It requires a candle as an input parameter."),(0,M.localize)('In the example below, the open price is assigned to the variable "op".')]},_t={text:[(0,M.localize)("Use this block to sell your contract at the market price. Selling your contract is optional. You may choose to sell if the market trend is unfavourable."),(0,M.localize)("Example:")]},gt={text:[(0,M.localize)('This block gives you the potential profit or loss if you decide to sell your contract. It can only be used within the "Sell conditions" root block.'),(0,M.localize)("In the example below, the contract will only be sold if the potential profit or loss is more than the stake.")]},bt={text:[(0,M.localize)("SMA adds the market price in a list of ticks or candles for a number of time periods, and divides the sum by that number of time periods."),(0,M.localize)("The formula for SMA is:"),(0,M.localize)("where n is the number of periods."),"",(0,M.localize)("What SMA tells you"),(0,M.localize)("SMA serves as an indicator of the trend. If the SMA points up then the market price is increasing and vice versa. The larger the period number, the smoother SMA line is."),(0,M.localize)("In this example, each point of the SMA line is an arithmetic average of close prices for the last 10 days."),(0,M.localize)("In this example, each point of the SMA line is an arithmetic average of close prices for the last 50 days."),"",(0,M.localize)("How to use the SMA block"),(0,M.localize)("Input list accepts a list of ticks or candles, while period is the specified time period."),(0,M.localize)("Example:"),(0,M.localize)("This will display the SMA for the specified period, using a candle list."),(0,M.localize)("SMA places equal weight to the entire distribution of values."),(0,M.localize)("This is the same as the above example, using a tick list."),(0,M.localize)("You may compare SMA values calculated on every bot run to identify the market trend direction. Alternatively, you may also use a variation of the SMA block, the Simple Moving Average Array block. "),(0,M.localize)("This block returns the entire SMA line, containing a list of all values for a given period."),(0,M.localize)("If a period of 10 is entered, the Simple Moving Average Array block will return a list of SMA values calculated based on period of 10."),(0,M.localize)("The below image illustrates how Simple Moving Average Array block works:")]},kt={text:[(0,M.localize)('This block displays a dialog box with a customised message. When the dialog box is displayed, your strategy is paused and will only resume after you click "OK".')]},Et={text:[(0,M.localize)('This block displays a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number and can be assigned to a variable. When the dialog box is displayed, your strategy is paused and will only resume after you enter a response and click "OK".')]},wt={text:[(0,M.localize)("Any blocks placed within this block will be executed at every tick. If the default candle interval is set to 1 minute in the Trade Parameters root block, the instructions in this block will be executed once every minute. Place this block outside of any root block.")]},St={text:[(0,M.localize)("This block converts the number of seconds since the Unix Epoch to a date and time format such as 2019-08-01 00:00:00."),(0,M.localize)("Example:"),(0,M.localize)("In this example, the date and time will be displayed in a green notification box.")]},Tt={text:[(0,M.localize)("This block converts the date and time to the number of seconds since the Unix Epoch (1970-01-01 00:00:00)."),(0,M.localize)("Example:"),(0,M.localize)("In this example, a Rise contract will be purchased at midnight on 1 August 2019.")]},Bt={text:[(0,M.localize)("This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract without manually stopping and restarting your bot."),(0,M.localize)("Example:")]},Ot={text:[(0,M.localize)("This block is mandatory. It's added to your strategy by default when you create new strategy. You can not add more than one copy of this block to the canvas."),(0,M.localize)("1. Market"),(0,M.localize)("Select your desired market and asset type. For example, Forex > Major pairs > AUD/JPY"),(0,M.localize)("2. Trade Type"),(0,M.localize)("Select your desired trade type. For example, Up/Down > Rise/Fall"),(0,M.localize)("3. Contract Type"),(0,M.localize)("Choose what type of contract you want to trade. For example, for the Rise/Fall trade type you can choose one of three options: Rise, Fall, or Both. Selected option will determine available options for the Purchase block."),(0,M.localize)("4. Default Candle Interval"),(0,M.localize)("Sets the default time interval for blocks that read list of candles."),(0,M.localize)("5. Restart buy/sell on error"),(0,M.localize)("Restarts the bot when an error is encountered."),(0,M.localize)("6. Restart last trade on error"),(0,M.localize)("Repeats the previous trade when an error is encountered."),(0,M.localize)("7. Run Once at Start"),(0,M.localize)("Place blocks here to perform tasks once when your bot starts running."),(0,M.localize)("8. Trade Options"),(0,M.localize)("The desired duration, stake, prediction, and/or barrier(s) for the contract is defined here.")]},xt={text:[(0,M.localize)("Use this block when you want to use multipliers as your trade type."),(0,M.localize)("Click the multiplier drop-down menu and choose the multiplier value you want to trade with."),(0,M.localize)("Your potential profit will be multiplied by the multiplier value you’ve chosen."),i().createElement(M.Localize,{key:0,i18n_default_text:"To learn more about multipliers, please go to the <0>Multipliers</0> page.",components:[i().createElement(l.StaticUrl,{key:0,className:"link",href:"trade-types/multiplier"})]})]},At={text:[(0,M.localize)("This block is used to define trade options within the Trade parameters root block. Some options are only applicable for certain trade types. Parameters such as duration and stake are common among most trade types. Prediction is used for trade types such as Digits, while barrier offsets are for trade types that involve barriers such as Touch/No Touch, Ends In/Out, etc."),(0,M.localize)("Example:")]},Ct={text:[(0,M.localize)("This block assigns a given value to a variable, creating the variable if it doesn't already exist."),(0,M.localize)("A variable is among the most important and powerful components in creating a bot. It is a way to store information, either as text or numbers. The information stored as a variable can be used and changed according to the given instructions. Variables can be given any name, but usually they are given useful, symbolic names so that it is easier to call them during the execution of instructions."),(0,M.localize)("Creating a variable"),(0,M.localize)("1. From the block library, enter a name for the new variable and click Create."),(0,M.localize)("2. The new variable will appear as a block under Set variable.")]};function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Lt(){Lt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==It(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Nt(e){return function(e){if(Array.isArray(e))return Rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Pt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Dt(i,r,o,a,l,"next",e)}function l(e){Dt(i,r,o,a,l,"throw",e)}a(void 0)}))}}var zt,jt,Mt,Ft,Ut=function(){function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={css:!1,media:"".concat(n.p,"media/"),move:{scrollbars:!1,drag:!0,wheel:!1},zoom:{startScale:a.config.workspaces.flyoutWorkspacesStartScale},sounds:!1},this.block_node=null,this.block_type="",this.examples=[],this.help_string={},this.title="",this.should_next_disable=!1,this.should_previous_disable=!1,this.active_helper="",this.setHelpContent=function(){var e=Pt(Lt().mark((function e(t){var n,i,a,l;return Lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getAttribute("type"),i=Blockly.Blocks[n].meta().display_name,""!==n&&(o.active_helper=n),a=o.root_store.flyout,o.setExamples(n),l=o.examples.map((function(e){return e.childNodes[0]})),setTimeout((function(){return a.setFlyoutWidth([t].concat(Nt(l)))}),50),(0,E.runInAction)((function(){a.is_help_content=!0,o.block_node=t,o.block_type=n,o.title=i,o.help_string=r[n]})),a.is_search_flyout||o.updateSequenceButtons();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getHelpContent=function(){var e=Pt(Lt().mark((function e(t){var n,i,a;return Lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(i=o.xml_list_group[t],a=i[0].getAttribute("type"),n=r[a]),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getFilledBlocksIndex=function(){var e=Pt(Lt().mark((function e(t){var n;return Lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return o.getHelpContent(e)})));case 2:return n=e.sent,e.abrupt("return",n.map((function(e,t){return e?t:null})).filter((function(e){return null!==e})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getNextHelpContentIndex=function(){var e=Pt(Lt().mark((function e(t){var n;return Lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getFilledBlocksIndex(Object.keys(o.xml_list_group));case 2:return n=e.sent,e.abrupt("return",t?n[n.length-1]:n[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,E.makeObservable)(this,{block_node:E.observable,block_type:E.observable,examples:E.observable,help_string:E.observable,title:E.observable,should_next_disable:E.observable,should_previous_disable:E.observable,active_helper:E.observable,setHelpContent:E.action.bound,setActiveHelper:E.action.bound,onBackClick:E.action.bound,onSequenceClick:E.action.bound,initFlyoutHelp:E.action.bound,updateSequenceButtons:E.action.bound,setExamples:E.action.bound,getHelpContent:E.action.bound,getFilledBlocksIndex:E.action.bound,getNextHelpContentIndex:E.action.bound}),this.root_store=t}var t,o,i,l;return t=e,o=[{key:"setActiveHelper",value:function(e){this.active_helper=e}},{key:"onBackClick",value:function(){var e=this.root_store,t=e.toolbox,n=e.flyout;if(n.is_search_flyout){var r=document.getElementsByName("search")[0].value;t.onSearch({search:r})}else n.refreshCategory()}},{key:"onSequenceClick",value:(l=Pt(Lt().mark((function e(t){var r,o,i,a,l,c=this;return Lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Array.from(this.xml_list).find((function(e){return e.getAttribute("type")===c.block_type})),Object.keys(this.xml_list_group).forEach((function(e,t){r.getAttribute("type")===e&&(o=t)})),i=function(){var e=Pt(Lt().mark((function e(t,r,o){var a,l,s,u,d;return Lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r+(o?1:-1),l=Object.keys(t).filter((function(e,t){return o?a<=t:a>=t})),e.next=4,c.getFilledBlocksIndex(l);case 4:if(s=e.sent,u=o?s[0]:s[s.length-1],d=l[u]){e.next=9;break}return e.abrupt("return",!1);case 9:return e.prev=9,e.next=12,Promise.resolve().then(n.bind(n,96818));case 12:return e.abrupt("return",d);case 15:return e.prev=15,e.t0=e.catch(9),e.abrupt("return",i(t,a,o));case 18:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n,r){return e.apply(this,arguments)}}(),e.next=5,i(this.xml_list_group,o,t);case 5:(a=e.sent)&&(l=this.xml_list_group[a],this.setHelpContent(l[0]));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"initFlyoutHelp",value:function(e){var t=this.root_store,n=t.flyout,r=t.toolbox;this.xml_list=r.getCategoryContents(n.selected_category),this.xml_list_group=this.groupBy(this.xml_list,!0),this.setHelpContent(e)}},{key:"updateSequenceButtons",value:(i=Pt(Lt().mark((function e(){var t,n,r,o,i=this;return Lt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.xml_list).find((function(e){return e.getAttribute("type")===i.block_type})),n=Object.keys(this.xml_list_group).findIndex((function(e){return t.getAttribute("type")===e})),e.next=4,this.getNextHelpContentIndex(!0);case 4:return r=e.sent,e.next=7,this.getNextHelpContentIndex(!1);case 7:o=e.sent,(0,E.runInAction)((function(){i.should_previous_disable=0===n||n===o,i.should_next_disable=n===Object.keys(i.xml_list_group).length-1||n===r}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"groupBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.from(e).reduce((function(e,n){var r=n.getAttribute("type");return t&&null===r||(e[r]||(e[r]=[]),(!t||t&&null!==r)&&e[r].push(n)),e}),{})}},{key:"setExamples",value:function(e){var t=Nt(this.root_store.toolbox.toolbox_examples.childNodes),r=Ge(n.p)[e].filter((function(e){return"example"===e.type})).map((function(e){return e.example_id})).map((function(e){return t.find((function(t){return t.id===e}))}));this.examples=r}}],o&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==It(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===It(o)?o:String(o)),r)}var o}(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Vt=(Mt=function(e){try{var t="".concat(zt.core.client.loginid,"-").concat((null===(r=zt)||void 0===r||null===(o=r.core)||void 0===o||null===(i=o.server_time)||void 0===i?void 0:i.unix())||Date.now()),n={counters:"tr:".concat(e.number_of_runs,",                ts:").concat(e.total_stake,",                py:").concat(e.total_payout,",                lc:").concat(e.lost_contracts,",                wc:").concat(e.won_contracts,",                pr:").concat(e.total_profit).replace(/\s/g,""),event:"dbot_run",run_id:t};jt(n)}catch(e){console.warn("Error pushing run data to datalayer",e)}var r,o,i},Ft=function(e){try{var t=e.length>0&&e[0];if(t&&t.is_completed){var n={event:"dbot_run_transaction",reference_id:t.refrence_id};jt(n)}}catch(e){console.warn("Error pushing transaction to datalayer",e)}},{init:function(e){try{var t=zt=e,n=t.run_panel,r=t.transactions,o=n.statistics;(0,E.reaction)((function(){return n.is_running}),(function(){return n.is_running&&Mt(o)})),(0,E.reaction)((function(){return r.contracts}),(function(){return Ft(r.contracts)}))}catch(e){console.warn("Error initializing GTM reactions ",e)}},pushDataLayer:jt=function(e){var t,n,r;return null===(t=zt)||void 0===t||null===(n=t.core)||void 0===n||null===(r=n.gtm)||void 0===r?void 0:r.pushDataLayer(e)}});const Gt=Vt;function Ht(e){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(e)}var Jt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.block_listeners=[],this.block_workspaces=[],this.flyout_min_width=440,this.options={css:!1,media:"".concat(n.p,"media/"),move:{scrollbars:!1,drag:!0,wheel:!1},zoom:{startScale:a.config.workspaces.flyoutWorkspacesStartScale},sounds:!1},this.is_help_content=!1,this.flyout_content=[],this.flyout_width=this.flyout_min_width,this.is_visible=!1,this.is_search_flyout=!1,this.is_loading=!1,this.search_term="",this.selected_category=null,(0,E.makeObservable)(this,{is_help_content:E.observable,flyout_content:E.observable,flyout_width:E.observable,is_visible:E.observable,is_search_flyout:E.observable,is_loading:E.observable,search_term:E.observable,selected_category:E.observable,onMount:E.action.bound,onUnmount:E.action.bound,initFlyout:E.action.bound,initBlockWorkspace:E.action.bound,getFlyout:E.action.bound,setContents:E.action.bound,setFlyoutWidth:E.action.bound,setVisibility:E.action.bound,setIsSearchFlyout:E.action.bound,setSelectedCategory:E.action.bound,getSelectedCategory:E.action.bound,onClickOutsideFlyout:E.action.bound,refreshCategory:E.action.bound,variables_blocks_count:E.computed,first_get_variable_block_index:E.computed}),this.root_store=t}var t,r;return t=e,r=[{key:"onMount",value:function(){this.initFlyout(),window.addEventListener("click",this.onClickOutsideFlyout)}},{key:"onUnmount",value:function(){window.removeEventListener("click",this.onClickOutsideFlyout)}},{key:"initFlyout",value:function(){var e=Blockly.derivWorkspace,t={parentWorkspace:e,RTL:e.RTL,horizontalLayout:e.horizontalLayout};e.horizontalLayout?this.flyout=new Blockly.HorizontalFlyout(t):this.flyout=new Blockly.VerticalFlyout(t),this.flyout.targetWorkspace_=e,this.flyout.workspace_.targetWorkspace=e,this.flyout.workspace_.getGesture=this.flyout.targetWorkspace_.getGesture.bind(this.flyout.targetWorkspace_),e.variableMap_=this.flyout.targetWorkspace_.getVariableMap(),this.flyout.workspace_.createPotentialVariableMap(),e.flyout_=this.flyout}},{key:"initBlockWorkspace",value:function(e,t){var n=this,r=Blockly.inject(e,this.options);r.isFlyout=!0,r.targetWorkspace=Blockly.derivWorkspace;var o=Blockly.Xml.domToBlock(t,r),i=o.getHeightWidth();o.isInFlyout=!0,e.style.height="".concat(Math.ceil(i.height*this.options.zoom.startScale)+1,"px"),e.style.width="".concat(Math.ceil(i.width*this.options.zoom.startScale)+1,"px"),o.moveBy(1,1);var a=o.getSvgRoot();this.block_listeners.push(Blockly.bindEventWithChecks_(a,"mousedown",null,(function(e){Gt.pushDataLayer({event:"dbot_drag_block",block_type:o.type}),n.flyout.blockMouseDown_(o)(e)})),Blockly.bindEvent_(a,"mouseout",o,o.removeSelect),Blockly.bindEvent_(a,"mouseover",o,o.addSelect)),this.block_workspaces.push(r),Blockly.svgResize(r)}},{key:"getFlyout",value:function(){return this.flyout}},{key:"setContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e;this.block_listeners.forEach((function(e){return Blockly.unbindEvent_(e)})),this.block_workspaces.forEach((function(e){return e.dispose()})),this.block_listeners=[],this.block_workspaces=[],this.is_help_content=!1,this.search_term=n.length>20?"".concat(n.substring(0,20),"..."):n,this.flyout_content=e,this.setFlyoutWidth(r),this.setVisibility(!0),setTimeout((function(){return t.setFlyoutWidth(r)}),50)}},{key:"setFlyoutWidth",value:function(e){var t=this,n=0;e.forEach((function(e){if(e.tagName.toUpperCase()===Blockly.Xml.NODE_BLOCK){var r=Blockly.Block.getDimensions(e);e.setAttribute("width",Math.ceil(r.width*t.options.zoom.startScale)),e.setAttribute("height",Math.ceil(r.height*t.options.zoom.startScale)),n=Math.max(n,Math.ceil(r.width*t.options.zoom.startScale))}})),this.flyout_width=Math.max(this.flyout_min_width,n+65)}},{key:"setVisibility",value:function(e){this.is_visible=e,e||(this.setSelectedCategory(null),this.flyout_content=[])}},{key:"setIsSearchFlyout",value:function(e){this.is_search_flyout=e}},{key:"setSelectedCategory",value:function(e){this.selected_category=e}},{key:"getSelectedCategory",value:function(){return this.selected_category}},{key:"onClickOutsideFlyout",value:function(e){if(this.is_visible&&Blockly.derivWorkspace){var t=document.getElementById("gtm-toolbox"),n=(e.path||e.composedPath&&e.composedPath()).some((function(e){return e.classList&&e.classList.contains("flyout")})),r=this.root_store.toolbox.is_search_focus;n||t.contains(e.target)||r||(this.setVisibility(!1),this.setSelectedCategory(null))}}},{key:"refreshCategory",value:function(){var e=this.getSelectedCategory(),t=this.root_store.toolbox.getCategoryContents(e);this.setContents(t)}},{key:"variables_blocks_count",get:function(){return this.flyout_content.filter((function(e){return"variables_get"===e.getAttribute("type")})).length}},{key:"first_get_variable_block_index",get:function(){return this.flyout_content.length-this.variables_blocks_count}}],r&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==Ht(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ht(o)?o:String(o)),r)}var o}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Wt=Object.freeze({NORMAL:0,LOADING:1,COMPLETED:2});function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function qt(){qt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Yt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Kt(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Xt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Kt(i,r,o,a,l,"next",e)}function l(e){Kt(i,r,o,a,l,"throw",e)}a(void 0)}))}}var Zt=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.is_authorised=!!localStorage.getItem("google_access_token"),this.setKey=function(){var e=a.config.gd,t=e.scope,r=e.discovery_docs;n.client_id=void 0,n.app_id=void 0,n.api_key=void 0,n.scope=t,n.discovery_docs=r},this.initialise=function(){gapi.load("client:picker",(function(){return gapi.client.load(n.discovery_docs)}))},this.initialiseClient=function(){n.client=google.accounts.oauth2.initTokenClient({client_id:n.client_id,scope:n.scope,callback:function(e){n.access_token=e.access_token,n.updateSigninStatus(!0),localStorage.setItem("google_access_token",e.access_token)}})},(0,E.makeObservable)(this,{is_authorised:E.observable,updateSigninStatus:E.action.bound,saveFile:E.action.bound,loadFile:E.action.bound,setKey:E.action.bound,initialise:E.action.bound,signIn:E.action.bound,signOut:E.action.bound,getPickerLanguage:E.action.bound,checkFolderExists:E.action.bound,createSaveFilePicker:E.action.bound,createLoadFilePicker:E.action.bound,showGoogleDriveFilePicker:E.action.bound}),this.root_store=t,this.bot_folder_name="Binary Bot - ".concat((0,M.localize)("Strategies")),this.google_auth=null,this.setKey(),this.client=null,this.access_token=localStorage.getItem("google_access_token")||"",(0,a.importExternal)("https://accounts.google.com/gsi/client").then((function(){return n.initialiseClient()})),(0,a.importExternal)("https://apis.google.com/js/api.js").then((function(){return n.initialise()}))}var t,n,r,o,i;return t=e,n=[{key:"updateSigninStatus",value:function(e){this.is_authorised=e}},{key:"signIn",value:function(){this.is_authorised||this.client.requestAccessToken()}},{key:"signOut",value:function(){this.access_token&&(gapi.client.setToken(""),google.accounts.oauth2.revoke(this.access_token),localStorage.removeItem("google_access_token"),this.access_token=""),this.updateSigninStatus(!1)}},{key:"getPickerLanguage",value:function(){var e=(0,M.getLanguage)();return"zhTw"===e?"zh-TW":"zhCn"===e?"zh-CN":e}},{key:"saveFile",value:(i=Xt(qt().mark((function e(t){return qt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.signIn();case 3:return this.access_token&&gapi.client.setToken({access_token:this.access_token}),e.next=6,this.checkFolderExists();case 6:return e.next=8,this.createSaveFilePicker("application/vnd.google-apps.folder",(0,M.localize)("Select a folder"),t);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),401===e.t0.status&&this.signOut();case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(e){return i.apply(this,arguments)})},{key:"loadFile",value:(o=Xt(qt().mark((function e(){var t;return qt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signIn();case 2:return this.access_token&&gapi.client.setToken({access_token:this.access_token}),e.prev=3,e.next=6,gapi.client.drive.files.list({pageSize:10,fields:"files(id, name)"});case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),401!==(null===e.t0||void 0===e.t0?void 0:e.t0.status)){e.next=14;break}return e.next=13,this.signOut();case 13:setTimeout((function(){var e=document.getElementsByClassName("picker-dialog-content")[0];e.parentNode.removeChild(e);var t=document.getElementsByClassName("picker-dialog-bg");if(t.length)for(var n=0;n<t.length;n++)t[n].style.display="none"}),500);case 14:return e.next=16,this.createLoadFilePicker("text/xml,application/xml",(0,M.localize)("Select a Deriv Bot Strategy"));case 16:return t=e.sent,e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(){return o.apply(this,arguments)})},{key:"checkFolderExists",value:(r=Xt(qt().mark((function e(){var t,n,r;return qt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=gapi.client.drive.files,e.next=3,t.list({q:"trashed=false"});case 3:if(n=e.sent,r="application/vnd.google-apps.folder",!n.result.files.find((function(e){return e.mimeType===r}))){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,t.create({resource:{name:this.bot_folder_name,mimeType:r,fields:"id"}});case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"createSaveFilePicker",value:function(e,t,n){var r=this,o=this.root_store.save_modal.setButtonStatus;return new Promise((function(i){r.showGoogleDriveFilePicker(!0,e,t,(function(e){if(e.action===google.picker.Action.PICKED){var t=e.docs[0].id,a=new Blob([n.content],{type:n.mimeType}),l=JSON.stringify({name:n.name,mimeType:n.mimeType,parents:[t]}),c=new FormData;c.append("metadata",new Blob([l],{type:"application/json"})),c.append("file",a);var s=new XMLHttpRequest;s.responseType="json",s.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart"),s.setRequestHeader("Authorization","Bearer ".concat(r.access_token)),s.onload=function(){401===s.status&&r.signOut(),o(Wt.NORMAL),i()},s.send(c)}else e.action===google.picker.Action.CANCEL&&o(Wt.NORMAL)}))}))}},{key:"createLoadFilePicker",value:function(e,t){var n=this;return new Promise((function(r){var o=function(){var e=Xt(qt().mark((function e(t){var o,i,a,l,c,s;return qt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.action!==google.picker.Action.PICKED){e.next=11;break}return o=t.docs[0],i=o.name,a=o.id,l=gapi.client.drive.files,c=n.root_store.dashboard.setOpenSettings,e.next=8,l.get({alt:"media",fileId:a,mimeType:"text/plain"});case 8:s=e.sent,r({xml_doc:s.body,file_name:i}),c("import");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n.showGoogleDriveFilePicker(!1,e,t,o)}))}},{key:"showGoogleDriveFilePicker",value:function(e,t,n,r){var o=new google.picker.DocsView;o.setIncludeFolders(!0),o.setMimeTypes(t),e&&o.setSelectFolderEnabled(!0),(new google.picker.PickerBuilder).setOrigin("".concat(window.location.protocol,"//").concat(window.location.host)).setTitle((0,M.localize)(n)).setLocale(this.getPickerLanguage()).setAppId(this.app_id).setOAuthToken(this.access_token).addView(o).setDeveloperKey(this.api_key).setSize(1051,650).setCallback(r).build().setVisible(!0)}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==Yt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Yt(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Qt=n(62893),$t=function(e){switch(e){case"error":return"IcAlertDanger";case"warn":default:return"IcAlertWarning";case"info":return"IcAlertInfo"}},en=function(e,t,n,r){n(function(e){var t=e.unique_id,n=e.type,r=e.message,o=e.btn_text,a=e.onClick;return i().createElement(i().Fragment,null,i().createElement("div",{key:"".concat(t,"_message"),className:"notify__item-container"},i().createElement(l.Icon,{key:"".concat(t,"_icon"),icon:$t(n),size:"22"}),i().createElement("div",{key:"".concat(t,"_text"),className:"notify__item-message"},r)),i().createElement(l.Button,{key:"".concat(t,"_btn"),className:"notify__item-button",text:o,onClick:a,has_effect:!0,secondary:!0}))}({unique_id:t,type:"error",message:e,btn_text:(0,M.localize)("Go to block"),onClick:function(){r()}}))},tn=function e(t){return t.map((function(t){return{id:(new Date).getTime()*Math.random(),value:t&&Array.isArray(t)?e(t):t}}))},nn=n(36954),rn=n.n(nn),on=function(e,t,n){return t&&an(e,n)[t]||n},an=function(e,t){try{var n=sessionStorage.getItem(e),r=rn().decompress(n),o=JSON.parse(r);if(o)return o}catch(e){}return t},ln=function(e,t){try{var n=rn().compress(JSON.stringify(t));sessionStorage.setItem(e,n)}catch(e){console.warn("Could not write to storage.")}};function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}function sn(){sn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==cn(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function un(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var dn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.JOURNAL_CACHE="journal_cache",this.is_filter_dialog_visible=!1,this.filters=[{id:a.message_types.ERROR,label:(0,M.localize)("Errors")},{id:a.message_types.NOTIFY,label:(0,M.localize)("Notifications")},{id:a.message_types.SUCCESS,label:(0,M.localize)("System")}],this.journal_filters=[],this.unfiltered_messages=[],this.playAudio=function(e){e!==Qt.v.lists.NOTIFICATION_SOUND[0][1]&&document.getElementById(e).play()},(0,E.makeObservable)(this,{is_filter_dialog_visible:E.observable,journal_filters:E.observable.shallow,filters:E.observable.shallow,unfiltered_messages:E.observable.shallow,toggleFilterDialog:E.action.bound,onLogSuccess:E.action.bound,onError:E.action.bound,onNotify:E.action.bound,pushMessage:E.action.bound,filtered_messages:E.computed,getServerTime:E.action.bound,playAudio:E.action.bound,checked_filters:E.computed,filterMessage:E.action.bound,clear:E.action.bound,welcomeBackUser:E.action.bound,welcomeUser:E.action.bound,registerReactions:E.action.bound,restoreStoredJournals:E.action.bound}),this.root_store=t,this.core=n,this.disposeReactionsFn=this.registerReactions(),this.restoreStoredJournals()}var t,n;return t=e,n=[{key:"restoreStoredJournals",value:function(){var e,t=(null===(e=this.core)||void 0===e?void 0:e.client).loginid;this.journal_filters=K("journal_filter")||this.filters.map((function(e){return e.id})),this.unfiltered_messages=on(this.JOURNAL_CACHE,t,[])}},{key:"getServerTime",value:function(){var e;return null===(e=this.core)||void 0===e?void 0:e.common.server_time.get()}},{key:"toggleFilterDialog",value:function(){this.is_filter_dialog_visible=!this.is_filter_dialog_visible}},{key:"onLogSuccess",value:function(e){var t=e.log_type,n=e.extra;this.pushMessage(t,a.message_types.SUCCESS,"",n)}},{key:"onError",value:function(e){this.pushMessage(e,a.message_types.ERROR)}},{key:"onNotify",value:function(e){var t=this,n=this.root_store,r=n.run_panel,o=n.dbot,c=e.message,s=e.className,u=e.message_type,d=e.sound,p=e.block_id,f=e.variable_name;(function(e,t,n,r){var o,a=e.message,c=e.block_id,s=e.variable_name;if(void 0===a&&null!=s)return en((0,M.localize)("Variable '{{variable_name}}' has no value. Please set a value for variable '{{variable_name}}' to notify.",{variable_name:s}),c,t,n),!0;if(null===a)return r("NULL"),!0;if(Object.is(a,NaN))return en((0,M.localize)("Tried to perform an invalid operation."),c,t,n),!0;if(Array.isArray(a)){var u=a.length;return r((o={header:"null"!==s?"".concat(s,": (").concat(u,")"):(0,M.localize)("List: ({{message_length}})",{message_length:u}),content:tn(a)},function(e){return i().createElement(l.ExpansionPanel,{message:o,onResize:e})})),!0}return"boolean"==typeof a&&(r(a.toString()),!0)})({message:c,block_id:p,variable_name:f},r.showErrorMessage,(function(){return o.centerAndHighlightBlock(p,!0)}),(function(e){return t.pushMessage(e,u||a.message_types.NOTIFY,s)}))||this.pushMessage(c,u||a.message_types.NOTIFY,s),this.playAudio(d)}},{key:"pushMessage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this.core.client,i=o.loginid,l=o.account_list;if(i){var c=null==l?void 0:l.find((function(e){return(null==e?void 0:e.loginid)===i}));r.current_currency=null!=c&&c.is_virtual?"Demo":null==c?void 0:c.title}else if(e===a.log_types.WELCOME)return;var s=(0,p.formatDate)(this.getServerTime()),u=(0,p.formatDate)(this.getServerTime(),"HH:mm:ss [GMT]"),d=Blockly.utils.genUid();this.unfiltered_messages.unshift({date:s,time:u,message:e,message_type:t,className:n,unique_id:d,extra:r}),this.unfiltered_messages=this.unfiltered_messages.slice()}},{key:"filtered_messages",get:function(){var e=this;return this.unfiltered_messages.filter((function(t){return e.journal_filters.length&&e.journal_filters.some((function(e){return t.message_type===e}))}))}},{key:"checked_filters",get:function(){return this.journal_filters.filter((function(e){return null!=e}))}},{key:"filterMessage",value:function(e,t){e?this.journal_filters.push(t):this.journal_filters.splice(this.journal_filters.indexOf(t),1),X("journal_filter",this.journal_filters)}},{key:"clear",value:function(){this.unfiltered_messages=this.unfiltered_messages.slice(0,0)}},{key:"welcomeBackUser",value:function(){this.pushMessage(a.log_types.WELCOME_BACK,a.message_types.SUCCESS,"journal__text")}},{key:"welcomeUser",value:function(){this.pushMessage(a.log_types.WELCOME,a.message_types.SUCCESS,"journal__text")}},{key:"registerReactions",value:function(){var e=this,t=this.core.client,n=(0,E.reaction)((function(){return e.unfiltered_messages}),(function(n){var r=an(e.JOURNAL_CACHE,{});r[t.loginid]=n.slice(0,5e3),ln(e.JOURNAL_CACHE,r)})),r=(0,E.reaction)((function(){return null==t?void 0:t.loginid}),function(){var n,r=(n=sn().mark((function n(r){return sn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.when)((function(){var e,n,o;return null!==(e=null===(n=t.account_list)||void 0===n||null===(o=n.find((function(e){return e.loginid===r})))||void 0===o?void 0:o.title)&&void 0!==e&&e}));case 2:e.unfiltered_messages=on(e.JOURNAL_CACHE,r,[]),0===e.unfiltered_messages.length?e.welcomeUser():e.unfiltered_messages.length>0&&e.welcomeBackUser();case 4:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){un(i,r,o,a,l,"next",e)}function l(e){un(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}(),{fireImmediately:!0});return function(){n(),r()}}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==cn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===cn(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pn(e){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(e)}function fn(){fn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==pn(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function mn(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function hn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){mn(i,r,o,a,l,"next",e)}function l(e){mn(i,r,o,a,l,"throw",e)}a(void 0)}))}}function yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vn=function(){function e(t,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.core=void 0,this.previewed_strategy_id="",this.recent_workspace=null,this.local_workspace=null,this.drop_zone=void 0,this.active_index=0,this.is_load_modal_open=!1,this.is_explanation_expand=!1,this.is_open_button_loading=!1,this.loaded_local_file=null,this.recent_strategies=[],this.dashboard_strategies=[],this.selected_strategy_id="",this.is_strategy_loaded=!1,this.is_delete_modal_open=!1,this.is_strategy_removed=!1,this.current_workspace_id="",this.setPreviewedStrategyId=function(e){o.previewed_strategy_id=e},this.getSelectedStrategyID=function(e){o.current_workspace_id=e},this.handleFileChange=function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"drop"===e.type?(e.stopPropagation(),e.preventDefault(),t=e.dataTransfer.files):t=e.target.files;var r,i=(r=t,1,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),1!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(r)||function(e,t){if(e){if("string"==typeof e)return yn(e,1);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yn(e,1):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];if(!n){if(!i.name.includes("xml"))return!1;o.setLoadedLocalFile(i),o.getDashboardStrategies()}return o.readFile(!n,e,i),e.target.value="",!0},this.resetBotBuilderStrategy=function(){var e=Blockly.derivWorkspace;e&&(Blockly.derivWorkspace.asyncClear(),Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(e.cached_xml.main),e),Blockly.derivWorkspace.strategy_to_load=e.cached_xml.main)},this.loadStrategyToBuilder=function(){var e=hn(fn().mark((function e(t){var n;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||!t.id){e.next=4;break}return e.next=3,(0,a.load)({block_string:t.xml,strategy_id:t.id,file_name:t.name,workspace:null===(n=Blockly)||void 0===n?void 0:n.derivWorkspace,from:t.save_type,drop_event:{},showIncompatibleStrategyDialog:!1});case 3:Blockly.derivWorkspace.strategy_to_load=t.xml;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.refreshStrategiesTheme=hn(fn().mark((function e(){var t,n,r,i;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.load)({block_string:null===(t=o.selected_strategy)||void 0===t?void 0:t.xml,drop_event:{},workspace:o.recent_workspace,file_name:null===(n=o.selected_strategy)||void 0===n?void 0:n.name,strategy_id:null===(r=o.selected_strategy)||void 0===r?void 0:r.id,from:null===(i=o.selected_strategy)||void 0===i?void 0:i.save_type,showIncompatibleStrategyDialog:!1});case 2:case"end":return e.stop()}}),e)}))),this.loadFileFromRecent=hn(fn().mark((function e(){return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.is_open_button_loading=!0,o.selected_strategy){e.next=6;break}return Blockly.derivWorkspace.asyncClear(),Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(Blockly.derivWorkspace.strategy_to_load),Blockly.derivWorkspace),o.is_open_button_loading=!1,e.abrupt("return");case 6:return(0,a.removeExistingWorkspace)(o.selected_strategy.id),e.next=9,(0,a.load)({block_string:o.selected_strategy.xml,strategy_id:o.selected_strategy.id,file_name:o.selected_strategy.name,workspace:Blockly.derivWorkspace,from:o.selected_strategy.save_type,drop_event:{},showIncompatibleStrategyDialog:!1});case 9:return e.next=11,(0,a.getSavedWorkspaces)();case 11:e.sent.map((function(e){var t=e.xml,n=e.id;o.selected_strategy.id===n&&(Blockly.derivWorkspace.strategy_to_load=t)})),o.is_open_button_loading=!1;case 14:case"end":return e.stop()}}),e)}))),this.loadFileFromLocal=function(){o.is_open_button_loading=!0,o.loaded_local_file&&o.readFile(!1,{},o.loaded_local_file),o.is_open_button_loading=!1},this.onActiveIndexChange=function(){o.tab_name===ue.TAB_RECENT?o.previewRecentStrategy(o.selected_strategy_id):o.recent_workspace&&setTimeout((function(){var e;null===(e=o.recent_workspace)||void 0===e||e.dispose(),o.recent_workspace=null})),o.tab_name===ue.TAB_LOCAL?o.drop_zone||(o.drop_zone=document.querySelector("load-strategy__local-dropzone-area"),o.drop_zone&&o.drop_zone.addEventListener("drop",(function(e){return o.handleFileChange(e,!1)}))):o.local_workspace&&setTimeout((function(){var e;null===(e=o.local_workspace)||void 0===e||e.dispose(),o.local_workspace=null,o.setLoadedLocalFile(null)}),0),o.tab_name!==ue.TAB_LOCAL&&o.drop_zone&&o.drop_zone.removeEventListener("drop",(function(e){return o.handleFileChange(e,!1)}))},this.onDriveConnect=function(){var e=o.root_store.google_drive;e.is_authorised?e.signOut():e.signIn()},this.onEntered=function(){o.previewRecentStrategy(o.selected_strategy_id)},this.onLoadModalClose=function(){o.recent_workspace&&(o.recent_workspace=null),o.local_workspace&&(o.local_workspace=null),o.setActiveTabIndex(0),o.setLoadedLocalFile(null)},this.onZoomInOutClick=function(e){o.preview_workspace&&o.preview_workspace.zoomCenter(e?1:-1)},this.previewRecentStrategy=function(e){var t;if(e?o.setSelectedStrategyId(e):o.setSelectedStrategyId(o.current_workspace_id),o.selected_strategy){1!==o.root_store.dashboard.active_tab||o.is_load_modal_open||(o.recent_workspace=null,o.setLoadedLocalFile(null));var r=document.body.classList.contains("theme--dark");(0,a.setColors)(r);var i=document.getElementById("load-strategy__blockly-container");i?(o.tab_name!==ue.TAB_LOCAL&&o.recent_workspace&&(de("store",i),o.recent_workspace.dispose(),o.recent_workspace=null),null!==(t=o.recent_workspace)&&void 0!==t&&t.rendered||(o.recent_workspace=Blockly.inject(i,{media:"".concat(n.p,"media/"),zoom:{wheel:!0,startScale:a.config.workspaces.previewWorkspaceStartScale},readOnly:!0,scrollbars:!0})),o.refreshStrategiesTheme()):console.warn("Could not find preview workspace element.")}},this.setActiveTabIndex=function(e){o.active_index=e},this.setLoadedLocalFile=function(e){o.loaded_local_file=e},this.setRecentStrategies=function(e){o.recent_strategies=e},this.refreshStrategies=function(){o.setRecentStrategies(o.recent_strategies)},this.setSelectedStrategyId=function(e){o.selected_strategy_id=e},this.toggleExplanationExpand=function(){o.is_explanation_expand=!o.is_explanation_expand},this.toggleLoadModal=function(){o.is_load_modal_open=!o.is_load_modal_open,o.selected_strategy_id&&o.previewRecentStrategy(o.selected_strategy_id)},this.toggleTourLoadModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!o.is_load_modal_open;o.is_load_modal_open=e},this.updateListStrategies=function(e){e&&(o.dashboard_strategies=e)},this.getRecentFileIcon=function(e){switch(e){case a.save_types.UNSAVED:return"IcReports";case a.save_types.LOCAL:return"IcMyComputer";case a.save_types.GOOGLE_DRIVE:return"IcGoogleDrive";default:return"IcReports"}},this.getSaveType=function(e){switch(e){case a.save_types.UNSAVED:return(0,M.localize)("Unsaved");case a.save_types.LOCAL:return(0,M.localize)("Local");case a.save_types.GOOGLE_DRIVE:return(0,M.localize)("Google Drive");default:return(0,M.localize)("Unsaved")}},this.onToggleDeleteDialog=function(e){o.is_delete_modal_open=e},this.readFile=function(e,t,r){var i=null==r?void 0:r.name.replace(/\.[^/.]+$/,""),l=new FileReader;l.onload=(0,E.action)((function(r){var l,c={block_string:null==r||null===(l=r.target)||void 0===l?void 0:l.result,drop_event:t,from:a.save_types.LOCAL,workspace:null,file_name:"",strategy_id:"",showIncompatibleStrategyDialog:!1},s=document.getElementById("load-strategy__blockly-container");e&&s?(o.local_workspace=Blockly.inject(s,{media:"".concat(n.p,"media/"),zoom:{wheel:!1,startScale:a.config.workspaces.previewWorkspaceStartScale},readOnly:!0,scrollbars:!0}),c.workspace=o.local_workspace):(c.workspace=Blockly.derivWorkspace,c.file_name=i),(0,a.load)(c)})),l.readAsText(r)},(0,E.makeObservable)(this,{active_index:E.observable,previewed_strategy_id:E.observable,is_load_modal_open:E.observable,is_explanation_expand:E.observable,is_open_button_loading:E.observable,is_strategy_loaded:E.observable,is_delete_modal_open:E.observable,is_strategy_removed:E.observable,loaded_local_file:E.observable,recent_strategies:E.observable,dashboard_strategies:E.observable,selected_strategy_id:E.observable,current_workspace_id:E.observable,preview_workspace:E.computed,selected_strategy:E.computed,tab_name:E.computed,setPreviewedStrategyId:E.action.bound,getSelectedStrategyID:E.action.bound,refreshStrategies:E.action.bound,loadStrategyToBuilder:E.action.bound,refreshStrategiesTheme:E.action.bound,handleFileChange:E.action.bound,loadFileFromRecent:E.action.bound,loadFileFromLocal:E.action.bound,onActiveIndexChange:E.action.bound,onDriveConnect:E.action.bound,onDriveOpen:E.action.bound,onEntered:E.action.bound,onLoadModalClose:E.action.bound,onZoomInOutClick:E.action.bound,previewRecentStrategy:E.action.bound,setActiveTabIndex:E.action.bound,setLoadedLocalFile:E.action.bound,setRecentStrategies:E.action.bound,setSelectedStrategyId:E.action.bound,toggleExplanationExpand:E.action.bound,toggleLoadModal:E.action.bound,toggleTourLoadModal:E.action.bound,readFile:E.action.bound,resetBotBuilderStrategy:E.action.bound,setDashboardStrategies:E.action.bound,updateListStrategies:E.action.bound}),this.root_store=t,this.core=r,(0,E.reaction)((function(){return o.active_index}),(function(){return o.onActiveIndexChange()})),(0,E.reaction)((function(){return o.is_load_modal_open}),function(){var e=hn(fn().mark((function e(t){return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.t0=o,e.next=4,(0,a.getSavedWorkspaces)();case 4:if(e.t1=e.sent,e.t1){e.next=7;break}e.t1=[];case 7:e.t2=e.t1,e.t0.setRecentStrategies.call(e.t0,e.t2),e.next=12;break;case 11:o.onLoadModalClose();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var t,r,o,i;return t=e,r=[{key:"preview_workspace",get:function(){return this.tab_name===ue.TAB_LOCAL?this.local_workspace:this.tab_name===ue.TAB_RECENT?this.recent_workspace:null}},{key:"selected_strategy",get:function(){var e,t=this;return null!==(e=this.dashboard_strategies.find((function(e){return e.id===t.selected_strategy_id})))&&void 0!==e?e:this.dashboard_strategies[0]}},{key:"tab_name",get:function(){if(this.core.ui.is_mobile){if(0===this.active_index)return ue.TAB_LOCAL;if(1===this.active_index)return ue.TAB_GOOGLE}return 0===this.active_index?ue.TAB_RECENT:1===this.active_index?ue.TAB_LOCAL:2===this.active_index?ue.TAB_GOOGLE:""}},{key:"setDashboardStrategies",value:function(e){this.dashboard_strategies=e,e.length||(this.selected_strategy_id="")}},{key:"getDashboardStrategies",value:(i=hn(fn().mark((function e(){var t;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.getSavedWorkspaces)();case 2:t=e.sent,this.dashboard_strategies=t;case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"onDriveOpen",value:(o=hn(fn().mark((function e(){var t,n,r,o;return fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.root_store.google_drive.loadFile,e.next=3,t();case 3:return n=e.sent,r=n.xml_doc,o=n.file_name,e.next=8,(0,a.load)({block_string:r,file_name:o,workspace:Blockly.derivWorkspace,from:a.save_types.GOOGLE_DRIVE,drop_event:null,strategy_id:null,showIncompatibleStrategyDialog:null});case 8:1===this.root_store.dashboard.active_tab&&this.toggleLoadModal(),this.root_store.dashboard.is_dialog_open=!1;case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}],r&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==pn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===pn(o)?o:String(o)),r)}var o}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_n=n(70147),gn=[{type:"subtitle",content:[(0,M.localize)("Exploring the D’Alembert strategy in Deriv Bot")]},{type:"text",content:[(0,M.localize)("The D'Alembert strategy involves increasing your stake after a losing trade and reducing it after a successful trade by a predetermined number of units.")]},{type:"subtitle",content:[(0,M.localize)("Key Parameters")]},{type:"text",content:[(0,M.localize)("These are the trade parameters used for D’Alembert strategy in Deriv Bot.")]},{type:"text",content:[(0,M.localize)("<strong>Initial stake:</strong> The amount you pay to enter a trade. In this example, we will use 1 USD.")]},{type:"text",content:[(0,M.localize)("<strong>Unit:</strong> The number of units that are added in the event of a trade resulting in loss or the number of units removed in the event of a trade resulting in profit. For example, if the unit is set at 2, the stake increases or decreases by two times the initial stake of 1 USD, meaning it changes by 2 USD.")]},{type:"text",content:[(0,M.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,M.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"subtitle",content:[(0,M.localize)("An example of D’Alembert strategy")]},{type:"media",src:ie("dalembert.svg"),alt:(0,M.localize)("An example of D’Alembert's Grind strategy")},{type:"text",content:[(0,M.localize)("1. Start with the initial stake. In this example, we’ll use 1 USD."),(0,M.localize)("2. Set your preferred unit. In this example, it is 2 units or 2 USD."),(0,M.localize)("3. If the first trade results in profit, the stake for the following trade will not reduce but remain at the initial stake. The strategy minimally trades at the initial stake of 1 USD. See A1."),(0,M.localize)("4. If the second trade results in a loss, the Deriv Bot will automatically increase your stake for the next trade by 2 USD. Deriv Bot will continue to add 2 USD to the previous round’s stake after every losing trade. See A2."),(0,M.localize)("5. If the next trades are profitable, the stake for the following trade will be reduced by $2.This can be shown above where the stake of 3 USD is reduced to 1 USD.See A3.")]},{type:"subtitle",content:[(0,M.localize)("Profit and Loss Thresholds")]},{type:"text",content:[(0,M.localize)("With Deriv Bot, traders can set the profit and loss thresholds to secure profits and limit potential losses. This means that the trading bot will automatically stop when either the profit or loss thresholds are reached. It's a form of risk management that can potentially enhance returns.For example, if a trader sets the profit threshold at 100 USD and the strategy exceeds 100 USD of profit from all trades, then the bot will stop running.")]},{type:"subtitle",content:[(0,M.localize)("Calculating your risk")]},{type:"text",content:[(0,M.localize)("The D’Alembert strategy is less risky than Martingale, but you can still determine how long your funds will last with this strategy before trading. Simply use this formula.")]},{type:"text",content:[(0,M.localize)("B = Loss threshold"),(0,M.localize)("s = initial stake"),(0,M.localize)("R = number of rounds"),(0,M.localize)("f = unit increment")],className:"no-margin"},{type:"text",content:[(0,M.localize)("B = s*(R+(((R-1)/2)*R*f))"),(0,M.localize)("For instance, if you have a loss threshold (B) of 100 USD, with an initial stake (s) of 1 USD and 2 units of increment (f), the calculation would be as follows:"),(0,M.localize)("100= 1*(10+(((10-1)/2)10*2))"),(0,M.localize)("This means after 10 rounds of consecutive losses, the trader will lose 100 USD. This reaches the loss threshold of 100 USD, stopping the bot.")]},{type:"subtitle",content:[(0,M.localize)("Summary")]},{type:"text",content:[(0,M.localize)("The D'Alembert system offers more balanced trading through controlled stake progression. With prudent risk management like stake limits, it can be effectively automated in Deriv Bot. However, traders should thoroughly assess their risk appetite, test strategies on a demo account  to align with their trading style before trading with real money. This allows optimising the approach and striking a balance between potential gains and losses whilst managing risk.")]},{type:"subtitle_italic",content:[(0,M.localize)("<i>Disclaimer:</i>")]},{type:"text_italic",content:[(0,M.localize)("Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a 1 USD stake does not necessarily equate to a 1 USD profit in successful trades. Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.")]},{type:"text_italic",content:[(0,M.localize)("The information contained in this article is for educational purposes only and is not intended as financial or investment advice.")]}],bn=[{type:"subtitle",content:[(0,M.localize)("Exploring the Martingale strategy in Deriv Bot")]},{type:"text",content:[(0,M.localize)("The Martingale strategy involves increasing your stake after each loss to recoup prior losses with a single successful trade."),(0,M.localize)("This article explores the Martingale strategy integrated into Deriv Bot, a versatile trading bot designed to trade assets such as forex, commodities, and derived indices. We will delve into the strategy's core parameters, its application, and provide essential takeaways for traders looking to use the bot effectively.")]},{type:"subtitle",content:[(0,M.localize)("Key Parameters")]},{type:"text",content:[(0,M.localize)("These are the trade parameters used in Deriv Bot with Martingale strategy.")]},{type:"text",content:[(0,M.localize)("<strong>Initial stake:</strong> The amount you pay to enter a trade. This is the starting point for any changes in stake depending on the dynamic of the strategy being used.")]},{type:"text",content:[(0,M.localize)("<strong>Multiplier:</strong> The multiplier used to increase your stake if you're losing a trade. The value must be greater than 1.")]},{type:"text",content:[(0,M.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,M.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"text",content:[(0,M.localize)("<strong>Maximum stake:</strong> The maximum amount you are willing to pay to enter a single trade. The stake for your next trade will reset to the initial stake if it exceeds this value. This is an optional risk management parameter.")]},{type:"subtitle",content:[(0,M.localize)("An example of Martingale strategy")]},{type:"media",src:ie("martingale.svg"),alt:(0,M.localize)("An example of Martingale strategy")},{type:"text",content:[(0,M.localize)("1. Start with the initial stake. Let’s say $1."),(0,M.localize)("2. Select your Martingale multiplier. In this example, it is 2."),(0,M.localize)("3. If the first trade ends in a loss, Deriv Bot will automatically double your stake for the next trade to $2. Deriv Bot will continue to double the stake after every losing trade."),(0,M.localize)("4. If a trade ends in a profit, the stake for the following trade will be reset to the initial stake amount of $1.")]},{type:"text",content:[(0,M.localize)("The idea is that successful trades may recoup previous losses. However, it is crucial to exercise caution as the risk can quickly increase with this strategy. With Deriv Bot, you can minimise your risk by setting a maximum stake. This is an optional risk management feature. Let’s say a maximum stake of $3. If your stake for the next trade is set to exceed $3, your stake will reset to the initial stake of $1. If you didn't set a maximum stake, it would have increased beyond $3.")]},{type:"subtitle",content:[(0,M.localize)("Profit and Loss Thresholds")]},{type:"text",content:[(0,M.localize)("Deriv Bot allows setting profit and loss thresholds to manage risk. A profit threshold will automatically stop trading after reaching a preset amount to lock your profits. A loss threshold will stop trading after accumulating a preset loss amount. These thresholds secure profits and limit losses as part of your risk management. For example, with a $10 profit threshold, the bot will stop after exceeding $10 in total profit.")]},{type:"subtitle",content:[(0,M.localize)("The Martingale Formula")]},{type:"text",content:[(0,M.localize)("If you're about to start trading and haven't established a Maximum Stake as part of your risk management strategy, you can determine how long your funds will last by employing the Martingale strategy. Simply use this formula.")]},{type:"text",content:[(0,M.localize)("R = log(B/s) / log(m)")]},{type:"text",content:[(0,M.localize)("Where:"),(0,M.localize)("R represents the number of rounds a trader can sustain given a specific loss threshold."),(0,M.localize)("B is the loss threshold."),(0,M.localize)("s is the initial stake."),(0,M.localize)("m is the Martingale multiplier.")],className:"no-margin"},{type:"text",content:[(0,M.localize)("For instance, if a trader sets the loss threshold (B) is $1000, initial stake (s) is $1, and the Martingale multiplier (m) is 2, the calculation would be as follows:"),(0,M.localize)("R = log(1000/1) / log(2)"),(0,M.localize)("R ≈ 9.965"),(0,M.localize)("This means that after 10 rounds of consecutive losses, this trader will lose $1023 which exceeds the loss threshold of $1000, stopping the bot."),(0,M.localize)("This formula allows you to work backwards based on your available capital and risk tolerance. Determine the Loss Threshold and Initial Stake, which will automatically calculate the number of rounds you can trade. This will give you an insight on stake sizing and expectations.")]},{type:"subtitle",content:[(0,M.localize)("Summary")]},{type:"text",content:[(0,M.localize)("The Martingale strategy in trading may offer substantial gains but also comes with significant risks. With your selected strategy, Deriv Bot provides automated trading with risk management measures like setting initial stake, stake size, maximum stake, profit threshold and loss threshold. It's crucial for traders to assess their risk tolerance, practice in a demo account, and understand the strategy before trading with real money.")]},{type:"subtitle",content:[(0,M.localize)("IMPORTANT:")]},{type:"text",content:[(0,M.localize)("Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a $1 stake does not necessarily equate to a $1 profit in successful trades. Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.")]},{type:"subtitle_italic",content:[(0,M.localize)("<i>Disclaimer:</i>")]},{type:"text_italic",content:[(0,M.localize)("The information contained in this blog article is for educational purposes only and is not intended as financial or investment advice.")]}],kn=[{type:"subtitle",content:[(0,M.localize)("Exploring the Oscar’s Grind strategy in Deriv Bot")]},{type:"text",content:[(0,M.localize)("The Oscar’s Grind strategy is designed to potentially gain a modest yet steady profit in each trading session. This strategy splits trades into sessions and has three principles.")]},{type:"subtitle",content:[(0,M.localize)("Key Parameters")]},{type:"text",content:[(0,M.localize)("These are the trade parameters used for Oscar’s Grind strategy in Deriv Bot.")]},{type:"text",content:[(0,M.localize)("<strong>Initial stake:</strong> The amount you pay to enter a trade.")]},{type:"text",content:[(0,M.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,M.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"subtitle",content:[(0,M.localize)("An example of Oscar’s Grind strategy")]},{type:"media",src:ie("oscars_grind.png"),alt:(0,M.localize)("An example of Oscar’s Grind strategy")},{type:"subtitle",content:[(0,M.localize)("Principle 1: Strategy aims to potentially make one unit of profit per session")]},{type:"text",content:[(0,M.localize)("The table above demonstrates this principle by showing that when a successful trade occurs and meets the target of one unit of profit which is 1 USD in this example, the session ends. If trading continues, a new session will begin.")]},{type:"subtitle",content:[(0,M.localize)("Principle 2: The stake only increases when a loss trade is followed by a successful trade")]},{type:"text",content:[(0,M.localize)("The table illustrates this principle in the second session. After a trade resulting in loss in round 4 followed by a successful trade in round 5, the stake will increase to 2 USD for round 6. This is in line with the strategy’s rule of raising the stake only after a loss is followed by a successful trade.")]},{type:"subtitle",content:[(0,M.localize)("Principle 3: The stake adjusts to the gap size between current loss and the target profit for the session")]},{type:"text",content:[(0,M.localize)("In round 7, the stake is adjusted downwards from 2 USD to 1 USD, to meet the target profit of $1.")]},{type:"text",content:[(0,M.localize)("The stake adjustment: target session profit (1 USD) - current session profit (0 USD) = 1 USD")]},{type:"text",content:[(0,M.localize)("The second session concludes upon reaching the aim of one unit of profit per session, equivalent to 1 USD. If trading continues, a new session will commence again.")]},{type:"subtitle",content:[(0,M.localize)("Profit and Loss Thresholds")]},{type:"text",content:[(0,M.localize)("With Deriv Bot, traders can set the profit and loss thresholds to secure profits and limit potential losses. This means that the trading bot will automatically stop when either the profit or loss threshold is reached. This is a form of risk management that can potentially boost successful trades whilst limiting the impact of loss. For example, if a trader sets the profit threshold at 100 USD and the strategy exceeds 100 USD of profit from all trades, then the bot will stop running.")]},{type:"subtitle",content:[(0,M.localize)("Summary")]},{type:"text",content:[(0,M.localize)("The Oscar’s Grind strategy provides a disciplined approach for incremental gains through systematic stake progression. When integrated into Deriv Bot with proper risk management like profit or loss thresholds, it offers traders a potentially powerful automated trading technique. However, traders should first thoroughly assess their risk tolerance and first try trading on a demo account in order to familiarise with the strategy before trading with real funds.")]},{type:"subtitle_italic",content:[(0,M.localize)("<em>Disclaimers:</em>")]},{type:"text_italic",content:[(0,M.localize)("<i>Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a 1 USD stake does not necessarily equate to a 1 USD profit in successful trades. Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.</i>")]},{type:"text_italic",content:[(0,M.localize)("<i>The information contained in this article is for educational purposes only and is not intended as financial or investment advice.</i>")]}],En=[{type:"subtitle",content:[(0,M.localize)("Exploring the Reverse Martingale strategy in Deriv Bot")]},{type:"text",content:[(0,M.localize)("The Reverse Martingale strategy involves increasing your stake after each successful trade and resets to the initial stake for every losing trade as it aims to secure potential profits from consecutive wins."),(0,M.localize)("This article explores the Reverse Martingale strategy integrated into Deriv Bot, a versatile trading bot designed to trade assets such as forex, commodities, and derived indices. We will delve into the strategy's core parameters, its application, and provide essential takeaways for traders looking to use the bot effectively.")]},{type:"subtitle",content:[(0,M.localize)("Key Parameters")]},{type:"text",content:[(0,M.localize)("These are the trade parameters used in Deriv Bot with Reverse Martingale strategy.")]},{type:"text",content:[(0,M.localize)("<strong>Initial stake:</strong> The amount that you are willing to place as a stake to enter a trade. This is the starting point for any changes in stake depending on the dynamic of the strategy being used.")]},{type:"text",content:[(0,M.localize)("<strong>Multiplier:</strong> The multiplier used to increase your stake if your trade is successful. The value must be greater than 1.")]},{type:"text",content:[(0,M.localize)("<strong>Profit threshold:</strong> The bot will stop trading if your total profit exceeds this amount.")]},{type:"text",content:[(0,M.localize)("<strong>Loss threshold:</strong> The bot will stop trading if your total loss exceeds this amount.")]},{type:"text",content:[(0,M.localize)("<strong>Maximum stake:</strong> The maximum amount you are willing to pay to enter a single trade. The stake for your next trade will reset to the initial stake if it exceeds this value. This is an optional risk management parameter.")]},{type:"subtitle",content:[(0,M.localize)("An example of Reverse Martingale strategy")]},{type:"media",src:ie("reverse_martingale.svg"),alt:(0,M.localize)("An example of Martingale strategy")},{type:"text",content:[(0,M.localize)("1. Start with the initial stake. Let’s say 1 USD."),(0,M.localize)("2. Select your Martingale multiplier. In this example, it is 2."),(0,M.localize)("3. If the first trade is a successful trade, Deriv Bot will automatically double your stake for the next trade to 2 USD. Deriv Bot will continue to double the stake after every successful trade."),(0,M.localize)("4. If a trade ends in a loss, the stake for the following trade will be reset to the initial stake amount of 1 USD.")]},{type:"text",content:[(0,M.localize)("The objective of Martingale strategy is to take advantage of consecutive successful trades and maximise potential profits from them. This strategy is beneficial only if there are consecutive successful trades. Therefore, it is important to set a maximum stake to secure all the potential profits gained from a number of consecutive successful trades, or you could lose all the profits you have accumulated, including your initial stake. For example, if your goal is to maximise profits within 2 consecutive successful trades, you set a maximum stake of 2 USD, given your initial stake is 1 USD. Similarly, if your goal is to maximise profits within 3 consecutive successful trades, you set a maximum stake of 4 USD, given your initial stake is 1 USD.")]},{type:"subtitle",content:[(0,M.localize)("Profit and Loss Thresholds")]},{type:"text",content:[(0,M.localize)("Deriv Bot allows setting profit and loss thresholds to manage risk. A profit threshold will automatically stop trading after reaching a preset amount to lock your profits. A loss threshold will stop trading after accumulating a preset loss amount. These thresholds secure profits and limit losses as part of your risk management. For example, with a 100 USD profit threshold, the bot will stop after exceeding 100 USD in total profit.")]},{type:"subtitle",content:[(0,M.localize)("Summary")]},{type:"text",content:[(0,M.localize)("The Reverse Martingale strategy in trading may offer substantial gains but also comes with significant risks. With your selected strategy, Deriv Bot provides automated trading with risk management measures like setting initial stake, stake size, maximum stake, profit threshold and loss threshold. It's crucial for traders to assess their risk tolerance, practice in a demo account, and understand the strategy before trading with real money.")]},{type:"subtitle_italic",content:[(0,M.localize)("<i>Disclaimer:</i>")]},{type:"text_italic",content:[(0,M.localize)("Please be aware that while we may use rounded figures for illustration, a stake of a specific amount does not guarantee an exact amount in successful trades. For example, a 1 USD stake does not necessarily equate to a 1 USD profit in successful trades.")]},{type:"text_italic",content:[(0,M.localize)("Trading inherently involves risks, and actual profits can fluctuate due to various factors, including market volatility and other unforeseen variables. As such, exercise caution and conduct thorough research before engaging in any trading activities.")]}],wn=[{label:(0,M.localize)("Trade Parameters"),value:"TRADE_PARAMETERS"},{label:(0,M.localize)("Description"),value:"DESCRIPTION",disabled:!0}],Sn={type:"min",value:1,getMessage:function(e){return(0,M.localize)("Must be a number higher than {{ min }}",{min:Number(e)-1})}},Tn={type:"label",label:(0,M.localize)("Asset"),description:(0,M.localize)("The underlying market your bot will trade with this strategy.")},Bn={type:"symbol",name:"symbol"},On={type:"label",label:(0,M.localize)("Trade Type"),description:(0,M.localize)("Your bot will use this trade type for every run")},xn={type:"tradetype",name:"tradetype",dependencies:["symbol"]},An={type:"label",label:(0,M.localize)("Purchase Condition"),description:(0,M.localize)("Your bot uses a single trade type for each run.")},Cn={type:"contract_type",name:"type",dependencies:["symbol","tradetype"]},In={type:"label",label:(0,M.localize)("Initial Stake"),description:(0,M.localize)("The amount that you pay to enter a trade.")},Ln={type:"number",name:"stake",validation:["number","required","ceil",Sn]},Nn={type:"label",label:(0,M.localize)("Duration"),description:(0,M.localize)("How long each trade takes to expire.")},Rn={type:"durationtype",name:"durationtype",dependencies:["symbol","tradetype"],attached:!0},Dn={type:"number",name:"duration",attached:!0,validation:["number","required","min","max"]},Pn={type:"label",label:(0,M.localize)("Profit Threshold"),description:(0,M.localize)("The bot will stop trading if your total profit exceeds this amount.")},zn={type:"number",name:"profit",validation:["number","required","ceil",Sn]},jn={type:"label",label:(0,M.localize)("Loss Threshold"),description:(0,M.localize)("The bot will stop trading if your total loss exceeds this amount.")},Mn={type:"number",name:"loss",validation:["number","required","ceil",Sn]},Fn={type:"label",label:(0,M.localize)("Size"),description:(0,M.localize)("The multiplier amount used to increase your stake if you’re losing a trade. Value must be higher than 1.")},Un={type:"number",name:"size",validation:["number","required","floor",{type:"min",value:String(a.config.QUICK_STRATEGY.DEFAULT.size),getMessage:function(e){return(0,M.localize)("The value must be equal or greater than {{ min }}",{min:e})}}]},Vn={type:"label",label:(0,M.localize)("Unit"),description:(0,M.localize)("The amount that you may add to your stake if you're losing a trade.")},Gn={type:"number",name:"unit",validation:["number","required","ceil",Sn]},Hn={type:"checkbox",name:"boolean_max_stake",label:(0,M.localize)("Max stake"),description:(0,M.localize)("The stake for your next trade will reset to the initial stake if it exceeds this value."),attached:!0},Jn={type:"number",name:"max_stake",validation:["number","required","ceil","min"],should_have:[{key:"boolean_max_stake",value:!0}],attached:!0},Wn={type:"label",name:"label_last_digit_prediction",label:(0,M.localize)("Last Digit Prediction"),description:(0,M.localize)("Your prediction of the last digit of the asset price."),should_have:[{key:"tradetype",value:"",multiple:["matchesdiffers","overunder"]}],hide_without_should_have:!0},Yn={type:"number",name:"last_digit_prediction",validation:["number","required","min","max","integer"],should_have:[{key:"tradetype",value:"",multiple:["matchesdiffers","overunder"]}],hide_without_should_have:!0},qn={MARTINGALE:{name:"martingale_max-stake",label:(0,M.localize)("Martingale"),description:(0,M.localize)("The Martingale strategy multiplies the stake by the chosen multiplier after every losing trade. The stake for the next trade resets to the initial stake after a successful trade. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake."),long_description:bn,fields:[[Tn,Bn,On,xn,An,Cn,Wn,Yn,In,Ln,Nn,Rn,Dn],[Pn,zn,jn,Mn,Fn,Un,Hn,Jn]]},D_ALEMBERT:{name:"dalembert_max-stake",label:(0,M.localize)("D’Alembert"),description:(0,M.localize)("The D'Alembert strategy increases the stake after a losing trade and reduces the stake after a successful trade by the number of units that traders decide. One unit is equal to the amount of the initial stake. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake."),long_description:gn,fields:[[Tn,Bn,On,xn,An,Cn,Wn,Yn,In,Ln,Nn,Rn,Dn],[Pn,zn,jn,Mn,Vn,Gn,Hn,Jn]]},OSCARS_GRIND:{name:"oscars_grind_max-stake",label:(0,M.localize)("Oscar’s Grind"),description:(0,M.localize)("The Oscar's Grind strategy aims to potentially make one unit of profit per session. A new session starts when the target profit is reached. If a losing trade is followed by a successful one, the stake increases by one unit. In every other scenario, the stake for the next trade will be the same as the previous one. If the stake for the next trade exceeds the gap between the target profit and current loss of the session, it adjusts to the gap size. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake."),long_description:kn,fields:[[Tn,Bn,On,xn,An,Cn,Wn,Yn,In,Ln,Nn,Rn,Dn],[Pn,zn,jn,Mn,Hn,Jn]]},REVERSE_MARTINGALE:{name:"reverse_martingale",label:(0,M.localize)("Reverse Martingale"),description:(0,M.localize)("The Reverse Martingale strategy multiplies the stake by the chosen multiplier after every successful trade. The stake for the next trade will reset to the initial stake after a losing trade. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake."),long_description:En,fields:[[Tn,Bn,On,xn,An,Cn,Wn,Yn,In,Ln,Nn,Rn,Dn],[Pn,zn,jn,Mn,Fn,Un,Hn,Jn]]},REVERSE_D_ALEMBERT:{name:"reverse_dalembert",label:(0,M.localize)("Reverse D’Alembert"),description:(0,M.localize)("The Reverse D'Alembert strategy increases the stake after a successful trade and reduces the stake after a losing trade by the number of units that traders decide. One unit is equal to the amount of the initial stake. To manage risk, set the maximum stake for a single trade. The stake for the next trade will reset to the initial stake if it exceeds the maximum stake."),fields:[[Tn,Bn,On,xn,An,Cn,Wn,Yn,In,Ln,Nn,Rn,Dn],[Pn,zn,jn,Mn,Vn,Gn,Hn,Jn]]},"1_3_2_6":{name:"1_3_2_6",label:(0,M.localize)("1-3-2-6"),description:(0,M.localize)("The 1-3-2-6 strategy aims to maximise profits with four consecutive wins. One unit is equal to the amount of the initial stake. The stake will adjust from 1 unit to 3 units after the first successful trade, then to 2 units after your second successful trade, and to 6 units after the third successful trade. The stake for the next trade will reset to the initial stake if there is a losing trade or a completion of the trade cycle."),fields:[[Tn,Bn,On,xn,An,Cn,Wn,Yn,In,Ln,Nn,Rn,Dn],[Pn,zn,jn,Mn]]}},Kn=function(e,t,n,r){if("digits"===n||"highlowticks"===n){var o=document.createElement("value");o.setAttribute("name",e),o.setAttribute("strategy_value",t);var i=document.createElement("shadow");i.setAttribute("type","math_number_positive"),i.setAttribute("id","p0O]7-M{ZORlORxGuIEb");var a=document.createElement("field");a.setAttribute("name","NUM"),a.textContent="0",i.appendChild(a),o.appendChild(i);var l=r.querySelector('value[name="AMOUNT"]');if(l){var c=l.parentNode;c&&c.insertBefore(o,l.nextSibling)}}if("PREDICTION"===e&&r){var s=r.querySelector('block[type="trade_definition_tradeoptions"] > mutation');s&&s.setAttribute("has_prediction","true")}};function Xn(e){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(e)}var Zn=["unit","action"];function Qn(){Qn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Xn(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function $n(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function er(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rr(e,t,n){return(t=ir(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ir(r.key),r)}}function ir(e){var t=function(e,t){if("object"!==Xn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Xn(t)?t:String(t)}var ar=function(e,t,n){return t&&or(e.prototype,t),n&&or(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.is_open=!1,this.selected_strategy="MARTINGALE",this.form_data={symbol:a.config.QUICK_STRATEGY.DEFAULT.symbol,tradetype:a.config.QUICK_STRATEGY.DEFAULT.tradetype,durationtype:a.config.QUICK_STRATEGY.DEFAULT.durationtype,action:"RUN"},this.is_contract_dialog_open=!1,this.is_stop_bot_dialog_open=!1,this.current_duration_min_max={min:0,max:10},this.loss_threshold_warning_data={show:!1},this.setLossThresholdWarningData=function(e){r.loss_threshold_warning_data=nr(nr({},r.loss_threshold_warning_data),e)},this.initializeLossThresholdWarningData=function(){r.loss_threshold_warning_data={show:!1,highlight_field:[],already_shown:!1}},this.setFormVisibility=function(e){r.is_open=e},this.setSelectedStrategy=function(e){r.selected_strategy=e},this.setValue=function(e,t){r.form_data[e]=t},this.setCurrentDurationMinMax=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;r.current_duration_min_max={min:e,max:t}},this.onSubmit=function(){var e,t=(e=Qn().mark((function e(t){var o,i,l,c,s,u,d,p,f,m,h,y,v,_,g;return Qn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.ApiHelpers.instance.contracts_for,e.next=3,o.getMarketBySymbol(t.symbol);case 3:return i=e.sent,e.next=6,o.getSubmarketBySymbol(t.symbol);case 6:return l=e.sent,e.next=9,o.getTradeTypeCategoryByTradeType(t.tradetype);case 9:return c=e.sent,s=qn[r.selected_strategy],e.next=13,n(27328)("./".concat(s.name,".xml"));case 13:return u=e.sent,d=Blockly.Xml.textToDom(u.default),Kn("PREDICTION","last_digit_prediction",c,d),p=function(e,t){var n=null==d?void 0:d.querySelectorAll('value[strategy_value="'.concat(e,'"]'));null==n||n.forEach((function(n){e.includes("boolean")?n.innerHTML=t?'<block type="logic_boolean"><field name="BOOL">TRUE</field></block>':'<block type="logic_boolean"><field name="BOOL">FALSE</field></block>':n.innerHTML='<shadow type="math_number"><field name="NUM">'.concat(t,"</field></shadow>")}))},f=function(e,t){var n="".concat(e.toUpperCase(),"_LIST"),r=null==d?void 0:d.querySelectorAll('field[name="'.concat(n,'"]'));null==r||r.forEach((function(e){e.innerHTML=t}))},m=t.unit,h=t.action,y=$n(t,Zn),v=nr({market:i,submarket:l,tradetypecat:c,dalembert_unit:m,oscar_unit:m},y),Object.keys(v).forEach((function(e){var t=v[e];isNaN(t)?"string"==typeof t&&f(e,t):p(e,t)})),_=Blockly,g=_.derivWorkspace,"RUN"===h&&(null==g||g.waitForBlockEvent({block_type:"trade_definition",event_type:Blockly.Events.BLOCK_CREATE,timeout:5e3}).then((function(){r.root_store.run_panel.onRunButtonClick()}))),r.setFormVisibility(!1),e.next=26,(0,a.load)({block_string:Blockly.Xml.domToText(d),file_name:s.label,workspace:g,from:_n.R.UNSAVED,drop_event:null,strategy_id:null,showIncompatibleStrategyDialog:null});case 26:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){er(i,r,o,a,l,"next",e)}function l(e){er(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),this.toggleStopBotDialog=function(){r.is_contract_dialog_open=!r.is_contract_dialog_open,r.is_stop_bot_dialog_open=!r.is_stop_bot_dialog_open},(0,E.makeObservable)(this,{current_duration_min_max:E.observable,form_data:E.observable,is_contract_dialog_open:E.observable,is_open:E.observable,is_stop_bot_dialog_open:E.observable,initializeLossThresholdWarningData:E.action,selected_strategy:E.observable,loss_threshold_warning_data:E.observable,onSubmit:E.action,setCurrentDurationMinMax:E.action,setFormVisibility:E.action,setSelectedStrategy:E.action,setLossThresholdWarningData:E.action,setValue:E.action,toggleStopBotDialog:E.action}),this.root_store=t,(0,E.reaction)((function(){return r.is_open}),(function(){r.is_open||(r.selected_strategy="MARTINGALE")}))}));function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}var cr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.should_show=!1,this.is_confirmed=!1,this.last_location=null,(0,E.makeObservable)(this,{should_show:E.observable,is_confirmed:E.observable,last_location:E.observable,shouldNavigateAfterPrompt:E.action.bound,onConfirm:E.action.bound,onCancel:E.action.bound,continueRoute:E.action.bound,setShoudShow:E.action.bound}),this.root_store=t,this.core=n}var t,n;return t=e,(n=[{key:"shouldNavigateAfterPrompt",value:function(e){return!!this.is_confirmed||(this.last_location=e,"/bot"!==e.pathname&&(this.should_show=!0),!1)}},{key:"setShoudShow",value:function(e){this.should_show=e}},{key:"onConfirm",value:function(){this.should_show=!1,this.is_confirmed=!0}},{key:"onCancel",value:function(){this.should_show=!1}},{key:"continueRoute",value:function(){var e=this.core.common;this.is_confirmed&&this.last_location&&e.routeTo(this.last_location.pathname)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==lr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===lr(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),sr=Object.freeze({NOT_RUNNING:0,STARTING:1,PURCHASE_SENT:2,PURCHASE_RECEIVED:3,IS_STOPPING:4,CONTRACT_CLOSED:5}),ur=Object.freeze({SUMMARY:0,TRANSACTIONS:1,JOURNAL:2}),dr={key:"bot_switch_account",header:(0,M.localize)("You have switched accounts."),message:(0,M.localize)("Our system will finish any Deriv Bot trades that are running, and Deriv Bot will not place any new trades."),type:"warning",is_persistent:!0};function pr(e){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(e)}function fr(){fr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==pr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function mr(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function hr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){mr(i,r,o,a,l,"next",e)}function l(e){mr(i,r,o,a,l,"throw",e)}a(void 0)}))}}var yr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active_index=0,this.contract_stage=sr.NOT_RUNNING,this.dialog_options={},this.has_open_contract=!1,this.is_running=!1,this.is_statistics_info_modal_open=!1,this.is_drawer_open=!0,this.is_dialog_open=!1,this.is_sell_requested=!1,this.show_bot_stop_message=!1,this.run_id="",this.error_type=void 0,this.clear=function(){a.observer.emit("statistics.clear")},this.unregisterBotListeners=function(){a.observer.unregisterAll("bot.running"),a.observer.unregisterAll("bot.stop"),a.observer.unregisterAll("bot.trade_again"),a.observer.unregisterAll("contract.status"),a.observer.unregisterAll("bot.contract"),a.observer.unregisterAll("Error")},(0,E.makeObservable)(this,{active_index:E.observable,contract_stage:E.observable,dialog_options:E.observable,has_open_contract:E.observable,is_running:E.observable,is_statistics_info_modal_open:E.observable,is_drawer_open:E.observable,is_dialog_open:E.observable,is_sell_requested:E.observable,run_id:E.observable,error_type:E.observable,show_bot_stop_message:E.observable,statistics:E.computed,is_stop_button_visible:E.computed,is_stop_button_disabled:E.computed,is_clear_stat_disabled:E.computed,onStopButtonClick:E.action.bound,onStopBotClick:E.action.bound,stopBot:E.action.bound,onClearStatClick:E.action.bound,clearStat:E.action.bound,toggleStatisticsInfoModal:E.action.bound,toggleDrawer:E.action.bound,setActiveTabIndex:E.action.bound,onCloseDialog:E.action.bound,performSelfExclusionCheck:E.action.bound,showStopMultiplierContractDialog:E.action.bound,showLoginDialog:E.action.bound,showRealAccountDialog:E.action.bound,showClearStatDialog:E.action.bound,showIncompatibleStrategyDialog:E.action.bound,showContractUpdateErrorDialog:E.action.bound,onBotSellEvent:E.action.bound,onBotStopEvent:E.action.bound,onBotReadyEvent:E.action.bound,onBotTradeAgain:E.action.bound,onContractStatusEvent:E.action.bound,onClickSell:E.action.bound,onBotContractEvent:E.action.bound,onError:E.action.bound,showErrorMessage:E.action.bound,switchToJournal:E.action.bound,setContractStage:E.action.bound,setHasOpenContract:E.action.bound,setIsRunning:E.action.bound,setShowBotStopMessage:E.action.bound,onMount:E.action.bound,onUnmount:E.action.bound,handleInvalidToken:E.action.bound,onRunButtonClick:E.action.bound,registerBotListeners:E.action.bound,registerReactions:E.action.bound,onBotRunningEvent:E.action.bound,unregisterBotListeners:E.action.bound,clear:E.action.bound,preloadAudio:E.action.bound,stopMyBot:E.action.bound,closeMultiplierContract:E.action.bound}),this.root_store=t,this.dbot=this.root_store.dbot,this.core=n,this.disposeReactionsFn=this.registerReactions(),this.timer=null}var t,n,r,o,l;return t=e,n=[{key:"statistics",get:function(){var e=0,t=this.root_store.transactions.transactions.reduce((function(t,n){var r=n.data;return r.is_completed&&(r.profit>0?(t.won_contracts+=1,t.total_payout+=r.payout):t.lost_contracts+=1,t.total_profit+=r.profit,t.total_stake+=r.buy_price,e+=1),t}),{lost_contracts:0,number_of_runs:0,total_profit:0,total_payout:0,total_stake:0,won_contracts:0});return t.number_of_runs=e,t}},{key:"is_stop_button_visible",get:function(){return this.is_running||this.has_open_contract}},{key:"is_stop_button_disabled",get:function(){return[sr.PURCHASE_SENT,sr.IS_STOPPING].includes(this.contract_stage)}},{key:"is_clear_stat_disabled",get:function(){var e,t=this.root_store,n=t.journal,r=t.transactions;return this.is_running||this.has_open_contract||0===n.unfiltered_messages.length&&0===(null==r||null===(e=r.transactions)||void 0===e?void 0:e.length)}},{key:"setShowBotStopMessage",value:function(e){this.show_bot_stop_message=e}},{key:"performSelfExclusionCheck",value:(l=hr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.root_store.self_exclusion,e.next=3,t.checkRestriction();case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"onRunButtonClick",value:(o=hr(fr().mark((function e(){var t,n,r,o,i,a,l,c,s,u=this;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1,window.sendRequestsStatistic&&(performance.clearMeasures(),performance.mark("bot-start"),this.timer=setInterval((function(){window.sendRequestsStatistic(!0),performance.clearMeasures(),12===t?clearInterval(u.timer):t++}),1e4)),n=this.root_store,r=n.summary_card,o=n.route_prompt_dialog,i=n.self_exclusion,a=this.core,l=a.client,c=a.ui,s="iOS"===(0,p.mobileOSDetect)(),this.dbot.saveRecentWorkspace(),this.dbot.unHighlightAllBlocks(),l.is_logged_in){e.next=10;break}return this.showLoginDialog(),e.abrupt("return");case 10:if((s||(0,p.isSafari)())&&this.preloadAudio(),i.should_bot_run){e.next=14;break}return i.setIsRestricted(!0),e.abrupt("return");case 14:if(i.setIsRestricted(!1),this.registerBotListeners(),this.dbot.shouldRunBot()){e.next=19;break}return this.unregisterBotListeners(),e.abrupt("return");case 19:c.setAccountSwitcherDisabledMessage((0,M.localize)("Account switching is disabled while your bot is running. Please stop your bot before switching accounts.")),(0,E.runInAction)((function(){u.setIsRunning(!0),c.setPromptHandler(!0,o.shouldNavigateAfterPrompt),u.toggleDrawer(!0),u.run_id="run-".concat(Date.now()),r.clear(),u.setContractStage(sr.STARTING),u.dbot.runBot()})),this.setShowBotStopMessage(!1);case 22:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"onStopButtonClick",value:function(){this.root_store.summary_card.is_multiplier?this.showStopMultiplierContractDialog():this.stopBot()}},{key:"onStopBotClick",value:function(){var e=this.root_store.summary_card.is_multiplier,t=this.root_store.summary_card;e?this.showStopMultiplierContractDialog():(this.stopBot(),t.clear(),this.setShowBotStopMessage(!0))}},{key:"stopBot",value:function(){var e=this.core.ui;this.dbot.stopBot(),e.setPromptHandler(!1),this.error_type?(this.setContractStage(sr.NOT_RUNNING),e.setAccountSwitcherDisabledMessage(!1),this.setIsRunning(!1)):this.has_open_contract?this.setContractStage(sr.IS_STOPPING):(this.setContractStage(sr.NOT_RUNNING),this.unregisterBotListeners(),e.setAccountSwitcherDisabledMessage(!1),this.setIsRunning(!1)),this.error_type&&(this.error_type=void 0),this.timer&&clearInterval(this.timer),window.sendRequestsStatistic&&(window.sendRequestsStatistic(!0),performance.clearMeasures())}},{key:"onClearStatClick",value:function(){this.showClearStatDialog()}},{key:"clearStat",value:function(){var e=this.root_store,t=e.summary_card,n=e.journal,r=e.transactions;this.setIsRunning(!1),this.setHasOpenContract(!1),this.clear(),n.clear(),t.clear(),r.clear(),this.setContractStage(sr.NOT_RUNNING)}},{key:"toggleStatisticsInfoModal",value:function(){this.is_statistics_info_modal_open=!this.is_statistics_info_modal_open}},{key:"toggleDrawer",value:function(e){this.is_drawer_open=e}},{key:"setActiveTabIndex",value:function(e){this.active_index=e,1!==this.active_index&&this.root_store.transactions.setActiveTransactionId(null)}},{key:"onCloseDialog",value:function(){this.is_dialog_open=!1}},{key:"stopMyBot",value:function(){var e=this.root_store,t=e.summary_card,n=e.quick_strategy,r=this.core.ui,o=n.toggleStopBotDialog;r.setPromptHandler(!1),this.dbot.terminateBot(),this.onCloseDialog(),t.clear(),o(),this.timer&&clearInterval(this.timer),window.sendRequestsStatistic&&(window.sendRequestsStatistic(!0),performance.clearMeasures())}},{key:"closeMultiplierContract",value:function(){var e=this.root_store.quick_strategy.toggleStopBotDialog;this.onClickSell(),this.stopBot(),this.onCloseDialog(),e()}},{key:"showStopMultiplierContractDialog",value:function(){var e=this,t=this.root_store.summary_card,n=this.core.ui;this.onOkButtonClick=function(){n.setPromptHandler(!1),e.dbot.terminateBot(),e.timer&&clearInterval(e.timer),window.sendRequestsStatistic&&(window.sendRequestsStatistic(!0),performance.clearMeasures()),e.onCloseDialog(),t.clear()},this.onCancelButtonClick=function(){e.onClickSell(),e.stopBot(),e.onCloseDialog()},this.dialog_options={title:(0,M.localize)("Keep your current contract?"),message:i().createElement(M.Localize,{i18n_default_text:"Would you like to keep your current contract or close it? If you decide to keep it running, you can check and close it later on the <0>Reports</0> page.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",target:"_blank",href:"/reports/positions"})]}),ok_button_text:(0,M.localize)("Keep my contract"),cancel_button_text:(0,M.localize)("Close my contract")},this.is_dialog_open=!0}},{key:"showLoginDialog",value:function(){this.onOkButtonClick=this.onCloseDialog,this.onCancelButtonClick=void 0,this.dialog_options={title:(0,M.localize)("Please log in"),message:(0,M.localize)("You need to log in to run the bot.")},this.is_dialog_open=!0}},{key:"showRealAccountDialog",value:function(){this.onOkButtonClick=this.onCloseDialog,this.onCancelButtonClick=void 0,this.dialog_options={title:(0,M.localize)("Deriv Bot isn't quite ready for real accounts"),message:(0,M.localize)("Please switch to your demo account to run your Deriv Bot.")},this.is_dialog_open=!0}},{key:"showClearStatDialog",value:function(){var e=this;this.onOkButtonClick=function(){e.clearStat(),e.onCloseDialog()},this.onCancelButtonClick=this.onCloseDialog,this.dialog_options={title:(0,M.localize)("Are you sure?"),message:(0,M.localize)("This will clear all data in the summary, transactions, and journal panels. All counters will be reset to zero.")},this.is_dialog_open=!0}},{key:"showIncompatibleStrategyDialog",value:function(){this.onOkButtonClick=this.onCloseDialog,this.onCancelButtonClick=void 0,this.dialog_options={title:(0,M.localize)("Import error"),message:(0,M.localize)("This strategy is currently not compatible with Deriv Bot.")},this.is_dialog_open=!0}},{key:"showContractUpdateErrorDialog",value:function(e){this.onOkButtonClick=this.onCloseDialog,this.onCancelButtonClick=void 0,this.dialog_options={title:(0,M.localize)("Contract Update Error"),message:(0,M.localize)(e)},this.is_dialog_open=!0}},{key:"registerBotListeners",value:function(){var e=this.root_store,t=e.summary_card,n=e.transactions;a.observer.register("bot.running",this.onBotRunningEvent),a.observer.register("bot.sell",this.onBotSellEvent),a.observer.register("bot.stop",this.onBotStopEvent),a.observer.register("bot.bot_ready",this.onBotReadyEvent),a.observer.register("bot.click_stop",this.onStopButtonClick),a.observer.register("bot.trade_again",this.onBotTradeAgain),a.observer.register("contract.status",this.onContractStatusEvent),a.observer.register("bot.contract",this.onBotContractEvent),a.observer.register("bot.contract",t.onBotContractEvent),a.observer.register("bot.contract",n.onBotContractEvent),a.observer.register("Error",this.onError)}},{key:"registerReactions",value:function(){var e=this,t=this.core,n=t.client,r=t.common,o=t.notifications,i=function(){r.is_socket_opened?e.disposeIsSocketOpenedListener=(0,E.reaction)((function(){return n.loginid}),(function(t){t&&e.is_running&&o.addNotificationMessage(dr),e.dbot.terminateBot(),e.unregisterBotListeners()})):"function"==typeof e.disposeLogoutListener&&e.disposeLogoutListener()};return i(),this.disposeLogoutListener=(0,E.reaction)((function(){return r.is_socket_opened}),(function(){return i()})),this.disposeStopBotListener=(0,E.reaction)((function(){return!e.is_running}),(function(){e.is_running||e.setContractStage(sr.NOT_RUNNING)})),function(){"function"==typeof e.disposeIsSocketOpenedListener&&e.disposeIsSocketOpenedListener(),"function"==typeof e.disposeLogoutListener&&e.disposeLogoutListener(),"function"==typeof e.disposeStopBotListener&&e.disposeStopBotListener()}}},{key:"onBotRunningEvent",value:function(){this.setHasOpenContract(!0);var e=new Event("IgnorePWAUpdate");document.dispatchEvent(e);var t=this.root_store.self_exclusion;t.should_bot_run&&-1!==t.run_limit&&(t.run_limit-=1,t.run_limit<0&&this.onStopButtonClick())}},{key:"onBotSellEvent",value:function(){this.is_sell_requested=!0}},{key:"onBotStopEvent",value:function(){var e=this,t=this.root_store,n=t.self_exclusion,r=t.summary_card,o=this.core.ui,i=function(){e.error_type=void 0,e.setContractStage(sr.NOT_RUNNING),o.setAccountSwitcherDisabledMessage(!1),e.unregisterBotListeners(),n.resetSelfExclusion()};if(this.error_type===a.error_types.RECOVERABLE_ERRORS){var l=this.dbot.interpreter.bot.tradeEngine.options,c=l.shouldRestartOnError,s=l.timeMachineEnabled;c||s?(this.error_type=void 0,this.setContractStage(sr.PURCHASE_SENT)):(this.setIsRunning(!1),i())}else this.error_type===a.error_types.UNRECOVERABLE_ERRORS?(this.setIsRunning(!1),i()):this.has_open_contract&&(this.error_type=void 0,this.is_sell_requested=!1,this.setContractStage(sr.CONTRACT_CLOSED),o.setAccountSwitcherDisabledMessage(!1),this.unregisterBotListeners(),n.resetSelfExclusion());this.setHasOpenContract(!1),r.clearContractUpdateConfigValues();var u=new Event("ListenPWAUpdate");document.dispatchEvent(u)}},{key:"onBotReadyEvent",value:function(){this.setIsRunning(!1),a.observer.unregisterAll("bot.bot_ready")}},{key:"onBotTradeAgain",value:function(e){e||this.stopBot()}},{key:"onContractStatusEvent",value:function(e){switch(e.id){case"contract.purchase_sent":this.setContractStage(sr.PURCHASE_SENT);break;case"contract.purchase_received":this.setContractStage(sr.PURCHASE_RECEIVED),this.root_store.transactions.setActiveTransactionId(null);var t=e.buy;this.core.client.is_virtual||this.core.gtm.pushDataLayer({event:"dbot_purchase",buy_price:t.buy_price});break;case"contract.sold":this.is_sell_requested=!1,this.setContractStage(sr.CONTRACT_CLOSED)}}},{key:"onClickSell",value:function(){this.root_store.summary_card.is_multiplier&&this.setContractStage(sr.IS_STOPPING),this.dbot.interpreter.bot.getInterface().sellAtMarket()}},{key:"onBotContractEvent",value:function(e){null!=e&&e.is_sold&&(this.is_sell_requested=!1,this.setContractStage(sr.CONTRACT_CLOSED))}},{key:"onError",value:function(e){var t=e.error||e;a.unrecoverable_errors.includes(t.code)?(this.root_store.summary_card.clear(),this.error_type=a.error_types.UNRECOVERABLE_ERRORS):this.error_type=a.error_types.RECOVERABLE_ERRORS;var n=null==t?void 0:t.message;this.showErrorMessage(n)}},{key:"showErrorMessage",value:function(e){var t,n=this.root_store.journal,r=this.core,o=r.notifications,i=r.ui;n.onError(e),n.journal_filters.some((function(e){return e===a.message_types.ERROR}))?(this.toggleDrawer(!0),this.setActiveTabIndex(ur.JOURNAL),i.setPromptHandler(!1)):(o.addNotificationMessage((t=this.switchToJournal,{key:"bot_error",header:(0,M.localize)("The bot encountered an error while running."),action:{text:(0,M.localize)("View in Journal"),onClick:t},type:"danger",platform:[p.platform_name.DBot],is_disposable:!0})),o.removeNotificationMessage({key:"bot_error"}))}},{key:"switchToJournal",value:function(){var e=this.root_store.journal,t=this.core.notifications;e.journal_filters.push(a.message_types.ERROR),this.setActiveTabIndex(ur.JOURNAL),this.toggleDrawer(!0),t.toggleNotificationsModal(),t.removeNotificationByKey({key:"bot_error"})}},{key:"setContractStage",value:function(e){this.contract_stage=e}},{key:"setHasOpenContract",value:function(e){this.has_open_contract=e}},{key:"setIsRunning",value:function(e){this.is_running=e}},{key:"onMount",value:function(){var e=this.root_store.journal;a.observer.register("ui.log.error",this.showErrorMessage),a.observer.register("ui.log.notify",e.onNotify),a.observer.register("ui.log.success",e.onLogSuccess),a.observer.register("client.invalid_token",this.handleInvalidToken)}},{key:"onUnmount",value:function(){var e=this.root_store,t=e.journal,n=e.summary_card,r=e.transactions;this.is_running||(this.unregisterBotListeners(),this.disposeReactionsFn(),t.disposeReactionsFn(),n.disposeReactionsFn(),r.disposeReactionsFn()),a.observer.unregisterAll("ui.log.error"),a.observer.unregisterAll("ui.log.notify"),a.observer.unregisterAll("ui.log.success"),a.observer.unregisterAll("client.invalid_token")}},{key:"handleInvalidToken",value:(r=hr(fr().mark((function e(){var t;return fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.core.client,e.next=3,t.logout();case 3:this.setActiveTabIndex(ur.SUMMARY);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"preloadAudio",value:function(){this.dbot.getStrategySounds().forEach((function(e){var t=document.getElementById(e);t.muted=!0,t.play().catch((function(){})),t.pause(),t.muted=!1}))}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==pr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===pr(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),vr=n(75486),_r=n.n(vr);function gr(e){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(e)}function br(){br=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==gr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function kr(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Er(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){kr(i,r,o,a,l,"next",e)}function l(e){kr(i,r,o,a,l,"throw",e)}a(void 0)}))}}var wr=window.Blockly,Sr=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.is_save_modal_open=!1,this.button_status=Wt.NORMAL,this.bot_name="",this.toggleSaveModal=function(){n.is_save_modal_open||n.setButtonStatus(Wt.NORMAL),n.is_save_modal_open=!n.is_save_modal_open},this.validateBotName=function(e){var t={};return""===e.bot_name.trim()&&(t.bot_name=(0,M.localize)("Strategy name cannot be empty")),t},this.addStrategyToWorkspace=function(){var e=Er(br().mark((function e(t,r,o,i,l){var c,s,u,d,p,f,m,h,y,v,_,g;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.getSavedWorkspaces)();case 3:return s=e.sent,u=s.findIndex((function(e){return e.id===t})),d=n.root_store.load_modal.getSaveType,p=r?a.save_types.LOCAL:a.save_types.GOOGLE_DRIVE,f=o?a.save_types.UNSAVED:p,m=null===(c=d(f))||void 0===c?void 0:c.toLowerCase(),h={id:t,xml:wr.Xml.domToText(l),name:i,timestamp:Date.now(),save_type:m},u>=0?(y=h,s[u]=y):s.push(h),s.sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)})).reverse(),s.length>10&&s.pop(),v=n.root_store.load_modal,_=v.setRecentStrategies,_r().setItem("saved_workspaces",rn().compress(JSON.stringify(s))),e.next=19,(0,a.getSavedWorkspaces)();case 19:g=e.sent,_(g),(0,n.root_store.dashboard.setStrategySaveType)(m),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),a.observer.emit("Error",e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n,r,o,i){return e.apply(this,arguments)}}(),this.updateBotName=function(e){n.bot_name=e},this.setButtonStatus=function(e){n.button_status=e},(0,E.makeObservable)(this,{is_save_modal_open:E.observable,button_status:E.observable,bot_name:E.observable,toggleSaveModal:E.action.bound,validateBotName:E.action.bound,onConfirmSave:E.action.bound,updateBotName:E.action.bound,onDriveConnect:E.action.bound,setButtonStatus:E.action.bound}),this.root_store=t}var t,n,r,o;return t=e,n=[{key:"onConfirmSave",value:(o=Er(br().mark((function e(t){var n,r,o,i,l,c,s,u,d,p,f,m,h,y,v,_,g,b,k,E,w,S,T;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.is_local,i=t.save_as_collection,l=t.bot_name,c=this.root_store,s=c.load_modal,u=c.dashboard,d=c.google_drive,p=s.loadStrategyToBuilder,f=s.selected_strategy,m=u.active_tab,this.setButtonStatus(Wt.LOADING),h=d.saveFile,v=null,1!==m){e.next=11;break}y=null==wr||null===(_=wr.Xml)||void 0===_?void 0:_.workspaceToDom(null==wr?void 0:wr.derivWorkspace),e.next=18;break;case 11:return e.next=13,(0,a.getSavedWorkspaces)();case 13:k=e.sent,(v=null===(g=k.filter((function(e){return e.id===f.id})))||void 0===g?void 0:g[0]).name=l,v.save_type=o?a.save_types.LOCAL:a.save_types.GOOGLE_DRIVE,y=null==wr||null===(b=wr.Xml)||void 0===b?void 0:b.textToDom(v.xml);case 18:if(null===(n=y)||void 0===n||n.setAttribute("is_dbot","true"),null===(r=y)||void 0===r||r.setAttribute("collection",i?"true":"false"),!o){e.next=24;break}(0,a.save)(l,i,y),e.next=27;break;case 24:return e.next=26,h({name:l,content:null==wr||null===(E=wr.Xml)||void 0===E?void 0:E.domToPrettyText(y),mimeType:"application/xml"});case 26:this.setButtonStatus(Wt.COMPLETED);case 27:if(this.updateBotName(l),0!==m){e.next=37;break}return T=null!==(w=f.id)&&void 0!==w?w:null==wr||null===(S=wr.utils)||void 0===S?void 0:S.genUid(),e.next=32,this.addStrategyToWorkspace(T,o,i,l,y);case 32:if(!v){e.next=35;break}return e.next=35,p(v);case 35:e.next=39;break;case 37:return e.next=39,(0,a.saveWorkspaceToRecent)(y,o?a.save_types.LOCAL:a.save_types.GOOGLE_DRIVE);case 39:this.toggleSaveModal();case 40:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"onDriveConnect",value:(r=Er(br().mark((function e(){var t;return br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.root_store.google_drive).is_authorised?t.signOut():t.signIn();case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==gr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==gr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===gr(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Br(){Br=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Tr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Or(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var xr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api_max_losses=0,this.run_limit=-1,this.is_restricted=!1,(0,E.makeObservable)(this,{api_max_losses:E.observable,run_limit:E.observable,is_restricted:E.observable,initial_values:E.computed,should_bot_run:E.computed,setIsRestricted:E.action.bound,setApiMaxLosses:E.action.bound,setRunLimit:E.action.bound,resetSelfExclusion:E.action.bound,checkRestriction:E.action.bound}),this.root_store=t,this.core=n}var t,n,r,o;return t=e,n=[{key:"initial_values",get:function(){return{form_max_losses:this.api_max_losses||"",run_limit:-1!==this.run_limit?this.run_limit:""}}},{key:"should_bot_run",get:function(){var e=this.core.client;return!(e.is_eu&&!e.is_virtual&&(0===this.api_max_losses||-1===this.run_limit))}},{key:"setIsRestricted",value:function(e){this.is_restricted=e}},{key:"setApiMaxLosses",value:function(e){this.api_max_losses=e}},{key:"setRunLimit",value:function(e){this.run_limit=e}},{key:"resetSelfExclusion",value:function(){this.is_restricted=!1,this.api_max_losses=0,this.form_max_losses=0,this.run_limit=-1}},{key:"checkRestriction",value:(r=Br().mark((function e(){var t;return Br().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.core.client,e.next=3,t.getSelfExclusion();case 3:t.self_exclusion.max_losses&&this.setApiMaxLosses(t.self_exclusion.max_losses);case 4:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){Or(i,n,o,a,l,"next",e)}function l(e){Or(i,n,o,a,l,"throw",e)}a(void 0)}))},function(){return o.apply(this,arguments)})}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==Tr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Tr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Tr(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ar=function(e){var t=e.contract_update,n=e.limit_order,r=(0,p.getLimitOrderAmount)(n||t),o=r.stop_loss,i=r.take_profit;return{contract_update_stop_loss:o?Math.abs(o).toString():"",contract_update_take_profit:i?i.toString():"",has_contract_update_stop_loss:!!o,has_contract_update_take_profit:!!i}};function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Cr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Cr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nr=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){Lr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},function(e){return{ASIANU:{name:(0,M.localize)("Asian Up"),position:"top"},ASIAND:{name:(0,M.localize)("Asian Down"),position:"bottom"},CALL:{name:e?(0,M.localize)("Higher"):(0,M.localize)("Rise"),position:"top"},PUT:{name:e?(0,M.localize)("Lower"):(0,M.localize)("Fall"),position:"bottom"},CALLE:{name:(0,M.localize)("Rise"),position:"top"},PUTE:{name:(0,M.localize)("Fall"),position:"bottom"},CALLSPREAD:{name:(0,M.localize)("Spread Up"),position:"top"},PUTSPREAD:{name:(0,M.localize)("Spread Down"),position:"bottom"},DIGITMATCH:{name:(0,M.localize)("Matches"),position:"top"},DIGITDIFF:{name:(0,M.localize)("Differs"),position:"bottom"},DIGITEVEN:{name:(0,M.localize)("Even"),position:"top"},DIGITODD:{name:(0,M.localize)("Odd"),position:"bottom"},DIGITOVER:{name:(0,M.localize)("Over"),position:"top"},DIGITUNDER:{name:(0,M.localize)("Under"),position:"bottom"},EXPIRYMISS:{name:(0,M.localize)("Ends Outside"),position:"top"},EXPIRYRANGE:{name:(0,M.localize)("Ends Between"),position:"bottom"},LBFLOATCALL:{name:(0,M.localize)("Close-to-Low"),position:"top"},LBFLOATPUT:{name:(0,M.localize)("High-to-Close"),position:"top"},LBHIGHLOW:{name:(0,M.localize)("High-to-Low"),position:"top"},MULTUP:{name:(0,M.localize)("Up"),position:"top"},MULTDOWN:{name:(0,M.localize)("Down"),position:"bottom"},ONETOUCH:{name:(0,M.localize)("Touch"),position:"top"},NOTOUCH:{name:(0,M.localize)("No Touch"),position:"bottom"},RANGE:{name:(0,M.localize)("Stays Between"),position:"top"},UPORDOWN:{name:(0,M.localize)("Goes Outside"),position:"bottom"},RESETCALL:{name:(0,M.localize)("Reset Call"),position:"top"},RESETPUT:{name:(0,M.localize)("Reset Put"),position:"bottom"},RUNHIGH:{name:(0,M.localize)("Only Ups"),position:"top"},RUNLOW:{name:(0,M.localize)("Only Downs"),position:"bottom"},TICKHIGH:{name:(0,M.localize)("High Tick"),position:"top"},TICKLOW:{name:(0,M.localize)("Low Tick"),position:"bottom"}}}(e))},Rr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Nr(t)[e]?Nr(t)[e.toUpperCase()].name:""};function Dr(e){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dr(e)}function Pr(e,t,n){return(t=zr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zr(e){var t=function(e,t){if("object"!==Dr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Dr(t)?t:String(t)}var jr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contract_info=null,this.indicative_movement="",this.profit_movement="",this.validation_errors={},this.validation_rules={has_contract_update_stop_loss:{trigger:"contract_update_stop_loss"},contract_update_stop_loss:{rules:[["req",{condition:function(e){return!e.contract_update_stop_loss},message:(0,M.localize)("Please enter a stop loss amount.")}],["custom",{func:function(e,t,n){var r=(0,p.getTotalProfit)(n.contract_info);return!(r<0&&-e>r)},message:(0,M.localize)("Please enter a stop loss amount that's higher than the current potential loss.")}],["custom",{func:function(e,t,n){var r=function(e){return e.contract_info.buy_price}(n);return e<r+1},message:(0,M.localize)("Invalid stop loss. Stop loss cannot be more than stake.")}]]},has_contract_update_take_profit:{trigger:"contract_update_take_profit"},contract_update_take_profit:{rules:[["req",{condition:function(e){return!e.contract_update_take_profit},message:(0,M.localize)("Please enter a take profit amount.")}],["custom",{func:function(e,t,n){var r=(0,p.getTotalProfit)(n.contract_info);return!(r>0&&+e<r)},message:(0,M.localize)("Please enter a take profit amount that's higher than the current potential profit.")}]]}},this.contract_update_take_profit="",this.contract_update_stop_loss="",this.has_contract_update_take_profit=!1,this.has_contract_update_stop_loss=!1,this.contract_update_config={},this.contract_id=null,this.profit=0,this.indicative=0,(0,E.makeObservable)(this,{contract_info:E.observable,indicative_movement:E.observable,profit_movement:E.observable,validation_errors:E.observable,validation_rules:E.observable,contract_update_take_profit:E.observable,contract_update_stop_loss:E.observable,has_contract_update_take_profit:E.observable,has_contract_update_stop_loss:E.observable,contract_update_config:E.observable,contract_id:E.observable,profit:E.observable,indicative:E.observable,is_contract_completed:E.computed,is_contract_loading:E.computed,is_contract_inactive:E.computed,is_multiplier:E.computed,clear:E.action.bound,clearContractUpdateConfigValues:E.action.bound,getLimitOrder:E.action.bound,onBotContractEvent:E.action.bound,onChange:E.action.bound,populateContractUpdateConfig:E.action.bound,setContractUpdateConfig:E.action.bound,updateLimitOrder:E.action.bound,setValidationErrorMessages:E.action,validateProperty:E.action,registerReactions:E.action.bound}),this.root_store=t,this.core=n,this.disposeReactionsFn=this.registerReactions()}var t,n;return t=e,n=[{key:"is_contract_completed",get:function(){var e;return!(null===(e=this.contract_info)||void 0===e||!e.is_sold)&&this.root_store.run_panel.contract_stage!==sr.PURCHASE_RECEIVED}},{key:"is_contract_loading",get:function(){return this.root_store.run_panel.is_running&&null===this.contract_info||this.root_store.run_panel.contract_stage===sr.PURCHASE_SENT||this.root_store.run_panel.contract_stage===sr.STARTING}},{key:"is_contract_inactive",get:function(){return!this.contract_info&&!this.is_loading}},{key:"is_multiplier",get:function(){var e;return(0,p.isMultiplierContract)(null===(e=this.contract_info)||void 0===e?void 0:e.contract_type)}},{key:"clear",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.contract_info=null),this.profit=0,this.profit_loss=0,this.indicative=0,this.indicative_movement="",this.profit_movement=""}},{key:"clearContractUpdateConfigValues",value:function(){this.contract_info&&Object.assign(this,Ar(this.contract_info))}},{key:"getLimitOrder",value:function(){var e={};return e.take_profit=this.has_contract_update_take_profit?+this.contract_update_take_profit:null,e.stop_loss=this.has_contract_update_stop_loss?+this.contract_update_stop_loss:null,e}},{key:"onBotContractEvent",value:function(e){var t=this,n=e.profit,r=(0,p.getIndicativePrice)(e);this.contract_id!==e.id&&(this.clear(!1),this.contract_id=e.id,this.profit=n,this.indicative=r);var o={profit:n,indicative:r};Object.keys(o).forEach((function(e){o[e]!==t[e]?t["".concat(e,"_movement")]=o[e]>t[e]?"profit":"loss":""!==t["".concat(e,"_movement")]&&(t.indicative_movement=""),t[e]=o[e]})),this.contract_info=e}},{key:"onChange",value:function(e){var t=e.name,n=e.value;this[t]=n,this.validateProperty(t,this[t])}},{key:"populateContractUpdateConfig",value:function(e){var t=Ar(e);if(!(0,p.isEqualObject)(this.contract_update_config,t)){Object.assign(this,t),this.contract_update_config=t;var n=e.contract_update,r=e.error;n&&!r&&(this.contract_info.limit_order=Object.assign(this.contract_info.limit_order||{},n))}}},{key:"setContractUpdateConfig",value:function(e,t){this.has_contract_update_take_profit=!!e,this.has_contract_update_stop_loss=!!t,this.contract_update_take_profit=this.has_contract_update_take_profit?+e:null,this.contract_update_stop_loss=this.has_contract_update_stop_loss?+t:null}},{key:"updateLimitOrder",value:function(){var e=this,t=this.getLimitOrder();this.root_store.ws.contractUpdate(this.contract_info.contract_id,t).then((function(t){t.error?e.root_store.run_panel.showContractUpdateErrorDialog(t.error.message):e.populateContractUpdateConfig(t)}))}},{key:"setValidationErrorMessages",value:function(e,t){var n=this;this.validation_errors[e]&&!n.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!n.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"validateProperty",value:function(e,t){var n=this,r=this.validation_rules[e].trigger,o=Pr({},e,void 0!==t?t:this[e]),i=Pr({},e,this.validation_rules[e].rules||[]);r&&Object.hasOwnProperty.call(this,r)&&(o[r]=this[r],i[r]=this.validation_rules[r].rules||[]);var a=new p.Validator(o,i,this);a.isPassed(),Object.keys(o).forEach((function(e){n.setValidationErrorMessages(e,a.errors.get(e))}))}},{key:"registerReactions",value:function(){var e=this,t=this.core.client;return this.disposeSwitchAcountListener=(0,E.reaction)((function(){return t.loginid}),(function(){return e.clear()})),function(){"function"==typeof e.disposeSwitchAcountListener&&e.disposeSwitchAcountListener()}}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zr(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function Fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==Mr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Mr(o)?o:String(o)),r)}var o}var Ur=function(e,t,n){return t&&Fr(e.prototype,t),n&&Fr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=t}));function Vr(e){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vr(e)}function Gr(){Gr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Vr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Hr(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==Vr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Vr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Vr(o)?o:String(o)),r)}var o}var Wr=window.Blockly,Yr=function(e,t,n){return t&&Jr(e.prototype,t),n&&Jr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root_store=void 0,this.is_animation_info_modal_open=!1,this.is_dialog_open=!1,this.file_name=a.config.default_file_name,this.has_undo_stack=!1,this.has_redo_stack=!1,this.is_reset_button_clicked=!1,this.setResetButtonState=function(e){n.is_reset_button_clicked=e},this.onResetClick=function(){n.is_dialog_open=!0},this.closeResetDialog=function(){n.is_dialog_open=!1},this.onResetOkButtonClick=function(){(0,a.runGroupedEvents)(!1,(function(){n.resetDefaultStrategy()}),"reset"),n.is_dialog_open=!1,n.root_store.run_panel.is_running&&(n.is_reset_button_clicked=!0)},this.resetDefaultStrategy=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Hr(i,r,o,a,l,"next",e)}function l(e){Hr(i,r,o,a,l,"throw",e)}a(void 0)}))}}(Gr().mark((function e(){var t;return Gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Wr.derivWorkspace).current_strategy_id=Wr.utils.genUid(),e.next=4,(0,a.load)({block_string:t.cached_xml.main,file_name:a.config.default_file_name,workspace:t,drop_event:null,strategy_id:null,from:null,showIncompatibleStrategyDialog:null});case 4:t.strategy_to_load=t.cached_xml.main;case 5:case"end":return e.stop()}}),e)}))),this.onSortClick=function(){Wr.derivWorkspace.cleanUp()},this.onUndoClick=function(e){Wr.Events.setGroup("undo_clicked"),Wr.derivWorkspace.undo(e),Wr.svgResize(Wr.derivWorkspace),n.setHasRedoStack(),n.setHasUndoStack(),Wr.Events.setGroup(!1)},this.onZoomInOutClick=function(e){var t=Wr.derivWorkspace,n=t.getMetrics(),r=e?1:-1;t.zoom(n.viewWidth/2,n.viewHeight/2,r)},this.setHasUndoStack=function(){var e;n.has_undo_stack=null===(e=Wr.derivWorkspace)||void 0===e?void 0:e.hasUndoStack()},this.setHasRedoStack=function(){var e;n.has_redo_stack=null===(e=Wr.derivWorkspace)||void 0===e?void 0:e.hasRedoStack()},(0,E.makeObservable)(this,{is_animation_info_modal_open:E.observable,is_dialog_open:E.observable,file_name:E.observable,has_undo_stack:E.observable,has_redo_stack:E.observable,is_reset_button_clicked:E.observable,onResetClick:E.action.bound,closeResetDialog:E.action.bound,onResetOkButtonClick:E.action.bound,onUndoClick:E.action.bound,resetDefaultStrategy:E.action.bound,setHasUndoStack:E.action.bound,setHasRedoStack:E.action.bound}),this.root_store=t}));function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Kr(e){return function(e){if(Array.isArray(e))return Xr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zr=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.is_toolbox_open=!0,this.is_search_loading=!1,this.is_search_focus=!1,this.sub_category_index=[],this.toolbox_dom=null,this.toolbox_examples=null,(0,E.makeObservable)(this,{is_toolbox_open:E.observable,is_search_loading:E.observable,is_search_focus:E.observable,sub_category_index:E.observable,toolbox_dom:E.observable,toolbox_examples:E.observable,onMount:E.action.bound,onUnmount:E.action.bound,setWorkspaceOptions:E.action.bound,adjustWorkspace:E.action.bound,toggleDrawer:E.action.bound,onToolboxItemClick:E.action.bound,onToolboxItemExpand:E.action.bound,getCategoryContents:E.action.bound,getAllCategories:E.action.bound,hasSubCategory:E.action.bound,onSearch:E.action.bound,onSearchBlur:E.action.bound,onSearchClear:E.action.bound,onSearchKeyUp:E.action.bound,showSearch:E.action.bound}),this.root_store=t,this.core=n}var t,n;return t=e,(n=[{key:"onMount",value:function(e){var t=this;this.adjustWorkspace(),this.toolbox_dom=Blockly.Xml.textToDom(null==e?void 0:e.current),this.toolbox_examples=Kr(this.toolbox_dom.childNodes).find((function(e){return"examples"===e.tagName})),this.setWorkspaceOptions(),this.disposeToolboxToggleReaction=(0,E.reaction)((function(){return t.is_toolbox_open}),(function(e){e&&(t.adjustWorkspace(),t.core.gtm.pushDataLayer({event:"dbot_toolbox_visible",value:!0}))}))}},{key:"onUnmount",value:function(){"function"==typeof this.disposeToolboxToggleReaction&&this.disposeToolboxToggleReaction()}},{key:"setWorkspaceOptions",value:function(){var e,t,n,r,o,i=Blockly.derivWorkspace;i.options.readOnly?(e=null,t=!1,n=!1,r=!1,o=!1):(e=this.toolbox_dom,n=t=Boolean(e&&e.getElementsByTagName("category").length),r=t,o=t),i.options.collapse=n,i.options.comments=r,i.options.disable=o,i.options.hasCategories=t,i.options.languageTree=e}},{key:"adjustWorkspace",value:function(){var e,t,n=Blockly.derivWorkspace,r=(null===(e=document.getElementById("gtm-toolbox"))||void 0===e?void 0:e.getBoundingClientRect().width)||0,o=null===(t=n.svgBlockCanvas_)||void 0===t?void 0:t.getBoundingClientRect();if(Math.round(null==o?void 0:o.left)<=r){var i=this.core.ui.is_mobile?r-o.left+20:r-o.left+36;(0,a.scrollWorkspace)(n,i,!0,!1)}}},{key:"toggleDrawer",value:function(){this.is_toolbox_open=!this.is_toolbox_open}},{key:"onToolboxItemClick",value:function(e){var t,n=this.root_store.flyout,r=e.getAttribute("id"),o=this.getCategoryContents(e);n.setIsSearchFlyout(!1),(null===(t=n.selected_category)||void 0===t?void 0:t.getAttribute("id"))===r?n.setVisibility(!1):(n.setSelectedCategory(e),n.setContents(o))}},{key:"onToolboxItemExpand",value:function(e){if(this.sub_category_index.includes(e)){var t=this.sub_category_index.filter((function(t){return t!==e}));this.sub_category_index=t}else this.sub_category_index=[].concat(Kr(this.sub_category_index),[e])}},{key:"getCategoryContents",value:function(e){var t=Blockly.derivWorkspace,n=e.getAttribute("dynamic"),r=Array.from(e.childNodes);return"string"==typeof n&&(r=t.getToolboxCategoryCallback(n)(t)),r}},{key:"getAllCategories",value:function(){var e=this,t=[];return Array.from(this.toolbox_dom.childNodes).forEach((function(n){t.push(n),e.hasSubCategory(n.children)&&Array.from(n.children).forEach((function(e){t.push(e)}))})),t}},{key:"hasSubCategory",value:function(e){return!!Object.keys(e).filter((function(t){if("CATEGORY"===e[t].tagName.toUpperCase())return e[t]})).length}},{key:"onSearch",value:function(e){var t=e.search;this.is_search_focus=!0,this.showSearch(t)}},{key:"onSearchBlur",value:function(){this.is_search_focus=!1}},{key:"onSearchClear",value:function(e){e("search",""),this.showSearch("")}},{key:"onSearchKeyUp",value:function(e){var t=this;this.is_search_loading=!0,clearTimeout(this.typing_timer),this.typing_timer=setTimeout((0,E.action)((function(){e(),t.is_search_loading=!1})),1e3)}},{key:"showSearch",value:function(e){var t=this,n=Blockly.derivWorkspace,r=[],o=e.replace(/\s+/g," ").trim().toUpperCase(),i=o.split(" "),a=n.getVariablesOfType(""),l=Blockly.Procedures.allProcedures(n),c=this.root_store.flyout;c.setVisibility(!1);var s=[(0,M.localize)("THE"),(0,M.localize)("OF"),(0,M.localize)("YOU"),(0,M.localize)("IS"),(0,M.localize)("THIS"),(0,M.localize)("THEN"),(0,M.localize)("A"),(0,M.localize)("AN")];if(0!==o.length){if(o.length<=1||i.every((function(e){return s.includes(e)})))return c.setIsSearchFlyout(!0),void c.setContents(r,e);var u=this.getAllCategories().filter((function(e){return!t.hasSubCategory(e.children)})).map((function(e){var n=t.getCategoryContents(e);return Array.from(n).filter((function(e){return"BLOCK"===e.tagName.toUpperCase()}))})).flat(),d=function(e,t){e.some((function(e){return e===t}))||e.push(t)};["exact_block_name","match_words","block_term","block_definitions","block_meta"].forEach((function(e){return function(e){u.forEach((function(t){var n=t.getAttribute("type"),a=Blockly.Blocks[n],l=a.meta instanceof Function&&a.meta(),c=a.definition instanceof Function&&a.definition(),s=l.display_name,u=n.toUpperCase().split("_"),p=s.toUpperCase().split(" "),f=/^((message)|(tooltip)|(category))/;switch(e){case"exact_block_name":o!==s.toUpperCase()&&o!==n.toUpperCase()||d(r,t);break;case"match_words":(i.every((function(e){return p.some((function(t){return t.includes(e)}))}))||i.every((function(e){return u.some((function(t){return t.includes(e)}))})))&&d(r,t);break;case"block_term":(u.some((function(e){return i.some((function(t){return e.includes(t)}))}))||p.some((function(e){return i.some((function(t){return e.includes(t)}))})))&&d(r,t);break;case"block_definitions":Object.keys(c).forEach((function(e){var n=c[e];f.test(e)&&i.some((function(e){return n.includes(e)}))&&d(r,t),n instanceof Array&&n.forEach((function(e){var n=JSON.stringify(e).toUpperCase();"field_dropdown"===e.type&&o.length>2&&i.some((function(e){return n.includes(e)}))&&d(r,t)}))}));break;case"block_meta":var m=Object.keys(l).filter((function(e){return"display_name"!==e})).find((function(e){var t=l[e].toUpperCase().replace(/[^\w\s]/gi,"").split(" ");return i.some((function(e){return t.some((function(t){return t.includes(e)}))}))}));m&&m.length&&d(r,t)}}))}(e)}));var p=a.filter((function(e){return e.name.toUpperCase().includes(o)})),f=Blockly.DataCategory.search(p).filter((function(e){return-1===r.indexOf(e)}));f&&f.length&&r.unshift.apply(r,Kr(f));var m={0:[],1:[]},h=l[0],y=l[1];Object.keys(h).forEach((function(e){var t=h[e];t[0].toUpperCase().includes(o)&&m[0].unshift(t)})),Object.keys(y).forEach((function(e){var t=y[e];t[0].toUpperCase().includes(o)&&m[1].unshift(t)}));var v=Blockly.Procedures.populateDynamicProcedures(m).filter((function(e){return-1===r.indexOf(e)}));v.length&&r.unshift.apply(r,Kr(v)),c.setIsSearchFlyout(!0),c.setContents(r,e)}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==qr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===qr(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Qr=Object.freeze({CONTRACT:"contract",DIVIDER:"divider"});function $r(e){return $r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$r(e)}function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach((function(t){no(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function no(e,t,n){return(t=ro(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ro(e){var t=function(e,t){if("object"!==$r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==$r(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===$r(t)?t:String(t)}var oo=function(){function e(t,n){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TRANSACTION_CACHE="transaction_cache",this.elements=on(this.TRANSACTION_CACHE,null===(r=this.core)||void 0===r||null===(o=r.client)||void 0===o?void 0:o.loginid,[]),this.active_transaction_id=null,this.recovered_completed_transactions=[],this.recovered_transactions=[],this.is_called_proposal_open_contract=!1,this.is_transaction_details_modal_open=!1,(0,E.makeObservable)(this,{elements:E.observable,active_transaction_id:E.observable,recovered_completed_transactions:E.observable,recovered_transactions:E.observable,is_called_proposal_open_contract:E.observable,is_transaction_details_modal_open:E.observable,transactions:E.computed,onBotContractEvent:E.action.bound,pushTransaction:E.action.bound,onClickOutsideTransaction:E.action.bound,onMount:E.action.bound,onUnmount:E.action.bound,clear:E.action.bound,setActiveTransactionId:E.action.bound,registerReactions:E.action.bound,recoverPendingContracts:E.action.bound,updateResultsCompletedContract:E.action.bound,sortOutPositionsBeforeAction:E.action.bound,recoverPendingContractsById:E.action.bound,toggleTransactionDetailsModal:E.action.bound}),this.is_transaction_details_modal_open=!1,this.root_store=t,this.core=n,this.disposeReactionsFn=this.registerReactions()}var t,n;return t=e,n=[{key:"transactions",get:function(){var e,t,n,r;return null!==(e=null===(t=this.elements[null===(n=this.core)||void 0===n||null===(r=n.client)||void 0===r?void 0:r.loginid])||void 0===t?void 0:t.filter((function(e){return e.type===Qr.CONTRACT})))&&void 0!==e?e:[]}},{key:"toggleTransactionDetailsModal",value:function(e){this.is_transaction_details_modal_open=e}},{key:"onBotContractEvent",value:function(e){this.pushTransaction(e)}},{key:"pushTransaction",value:function(e){var t,n,r,o=(0,p.isEnded)(e),i=this.root_store.run_panel.run_id,a=null===(t=this.core)||void 0===t||null===(n=t.client)||void 0===n?void 0:n.loginid,l={barrier:e.barrier,buy_price:e.buy_price,contract_id:e.contract_id,contract_type:e.contract_type,currency:e.currency,date_start:(0,p.formatDate)(e.date_start,"YYYY-M-D HH:mm:ss [GMT]"),display_name:e.display_name,entry_tick:e.entry_tick_display_value,entry_tick_time:e.entry_tick_time&&(0,p.formatDate)(e.entry_tick_time,"YYYY-M-D HH:mm:ss [GMT]"),exit_tick:e.exit_tick_display_value,exit_tick_time:e.exit_tick_time&&(0,p.formatDate)(e.exit_tick_time,"YYYY-M-D HH:mm:ss [GMT]"),high_barrier:e.high_barrier,is_completed:o,low_barrier:e.low_barrier,payout:e.payout,profit:o&&e.profit,run_id:i,shortcode:e.shortcode,tick_count:e.tick_count,transaction_ids:e.transaction_ids,underlying:e.underlying};this.elements[a]||(this.elements=to(to({},this.elements),{},no({},a,[])));var c,s,u,d,f,m,h=null===(r=this.elements[a])||void 0===r?void 0:r.findIndex((function(t){return t.type===Qr.CONTRACT&&t.data.transaction_ids&&t.data.transaction_ids.buy===e.transaction_ids.buy}));-1===h?((null===(c=this.elements[a])||void 0===c?void 0:c.length)>0&&(null===(u=this.elements[a])||void 0===u?void 0:u[0].type)===Qr.CONTRACT&&l.run_id!==(null===(d=this.elements[a])||void 0===d?void 0:d[0].data.run_id)&&(null===(f=this.elements[a])||void 0===f||f.unshift({type:Qr.DIVIDER,data:l.run_id})),null===(s=this.elements[a])||void 0===s||s.unshift({type:Qr.CONTRACT,data:l})):null===(m=this.elements[a])||void 0===m||m.splice(h,1,{type:Qr.CONTRACT,data:l}),this.elements=to({},this.elements)}},{key:"setActiveTransactionId",value:function(e){e&&this.active_transaction_id===e?this.active_transaction_id=null:this.active_transaction_id=e}},{key:"onClickOutsideTransaction",value:function(e){(e.path||e.composedPath&&e.composedPath()).some((function(e){return e.classList&&e.classList.contains("transactions__item-wrapper")}))||this.setActiveTransactionId(null)}},{key:"onMount",value:function(){window.addEventListener("click",this.onClickOutsideTransaction),this.recoverPendingContracts()}},{key:"onUnmount",value:function(){window.removeEventListener("click",this.onClickOutsideTransaction)}},{key:"clear",value:function(){var e,t,n,r;this.elements[null===(e=this.core)||void 0===e||null===(t=e.client)||void 0===t?void 0:t.loginid]=[],this.recovered_completed_transactions=null===(n=this.recovered_completed_transactions)||void 0===n?void 0:n.slice(0,0),this.recovered_transactions=null===(r=this.recovered_transactions)||void 0===r?void 0:r.slice(0,0),this.is_transaction_details_modal_open=!1}},{key:"registerReactions",value:function(){var e=this,t=this.core.client,n=(0,E.reaction)((function(){return e.elements[null==t?void 0:t.loginid]}),(function(n){var r,o=an(e.TRANSACTION_CACHE,{});o[t.loginid]=null!==(r=null==n?void 0:n.slice(0,5e3))&&void 0!==r?r:[],ln(e.TRANSACTION_CACHE,o)})),r=(0,E.reaction)((function(){return e.transactions.length}),(function(){return e.recoverPendingContracts()}));return function(){n(),r()}}},{key:"recoverPendingContracts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.transactions.forEach((function(n){var r=n.data;r.is_completed||e.recovered_transactions.includes(r.contract_id)||e.recoverPendingContractsById(r.contract_id,t)}))}},{key:"updateResultsCompletedContract",value:function(e){var t=this.root_store,n=t.journal,r=t.summary_card.contract_info,o=e.currency,i=e.profit;e.contract_id!==(null==r?void 0:r.contract_id)&&(this.onBotContractEvent(e),this.recovered_transactions.includes(e.contract_id)||this.recovered_transactions.push(e.contract_id),!this.recovered_completed_transactions.includes(e.contract_id)&&(0,p.isEnded)(e)&&(this.recovered_completed_transactions.push(e.contract_id),n.onLogSuccess({log_type:i>0?a.log_types.PROFIT:a.log_types.LOST,extra:{currency:o,profit:i}})))}},{key:"sortOutPositionsBeforeAction",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==e||e.forEach((function(e){if(!n||n&&e.id===n){var r=e.contract_info;t.updateResultsCompletedContract(r)}}))}},{key:"recoverPendingContractsById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.core.portfolio.positions;if(t&&(this.is_called_proposal_open_contract=!0,t.contract_id===e&&this.updateResultsCompletedContract(t)),!this.is_called_proposal_open_contract){var r,o,i,a,l,c,s,u=null===(r=this.core)||void 0===r||null===(o=r.client)||void 0===o?void 0:o.loginid;if(null!==(i=this.elements[u])&&void 0!==i&&i.length||this.sortOutPositionsBeforeAction(n),null!==(a=this.elements[u])&&void 0!==a&&a.length&&(null===(l=this.elements[u])||void 0===l||null===(c=l[0])||void 0===c||null===(s=c.data)||void 0===s||!s.profit)){var d,p=null===(d=this.elements[u])||void 0===d?void 0:d[0].data.contract_id;this.sortOutPositionsBeforeAction(n,p)}}}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ro(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function io(e){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},io(e)}function ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==io(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==io(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===io(o)?o:String(o)),r)}var o}var lo=function(e,t,n){return t&&ao(e.prototype,t),n&&ao(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ws=void 0,this.dbot=void 0,this.app=void 0,this.summary_card=void 0,this.download=void 0,this.flyout=void 0,this.flyout_help=void 0,this.google_drive=void 0,this.journal=void 0,this.load_modal=void 0,this.run_panel=void 0,this.save_modal=void 0,this.summary=void 0,this.transactions=void 0,this.toolbar=void 0,this.toolbox=void 0,this.quick_strategy=void 0,this.route_prompt_dialog=void 0,this.self_exclusion=void 0,this.dashboard=void 0,this.chart_store=void 0,this.blockly_store=void 0,this.data_collection_store=void 0,this.ws=n,this.dbot=r,this.app=new Y(this,t),this.summary_card=new jr(this,t),this.download=new Re(this),this.flyout=new Jt(this),this.flyout_help=new Ut(this),this.google_drive=new Zt(this),this.journal=new dn(this,t),this.load_modal=new vn(this,t),this.run_panel=new yr(this,t),this.save_modal=new Sr(this),this.summary=new Ur(this),this.transactions=new oo(this,t),this.toolbar=new Yr(this),this.toolbox=new Zr(this,t),this.quick_strategy=new ar(this),this.route_prompt_dialog=new cr(this,t),this.self_exclusion=new xr(this,t),this.dashboard=new be(this,t),this.chart_store=new re(this),this.blockly_store=new Q(this),this.data_collection_store=new Ie(this,t)})),co=(0,o.createContext)(null),so=function(e){var t=e.children,n=e.ws,r=e.mock,l=D(),c=(0,o.useMemo)((function(){return r||new lo(l,n,a.DBot)}),[r,l,n]);return i().createElement(co.Provider,{value:c},t)},uo=function(){var e=(0,o.useContext)(co);if(!e)throw new Error("useDBotStore must be used within DBotStoreProvider");return e},po=(0,c.Pi)((function(){var e=D().ui,t=uo(),n=t.google_drive,r=t.load_modal,o=n.is_authorised,a=r.is_open_button_loading,c=r.onDriveConnect,s=r.onDriveOpen,u=e.is_mobile;return i().createElement("div",{className:"load-strategy__container","data-testid":"dt_google_drive"},i().createElement("div",{className:"load-strategy__google-drive"},i().createElement(l.Icon,{icon:"IcGoogleDrive",className:z()("load-strategy__google-drive-icon",{"load-strategy__google-drive-icon--disabled":!o}),size:u?96:128}),i().createElement("div",{className:"load-strategy__google-drive-connected-text"},o?i().createElement(M.Localize,{i18n_default_text:"You are connected to Google Drive"}):"Google Drive"),o?i().createElement(l.Button.Group,null,i().createElement(l.Button,{text:(0,M.localize)("Disconnect"),onClick:c,has_effect:!0,secondary:!0,large:!0}),i().createElement(l.Button,{text:(0,M.localize)("Open"),onClick:function(){s()},is_loading:a,has_effect:!0,primary:!0,large:!0})):i().createElement(i().Fragment,null,i().createElement("div",{className:"load-strategy__google-drive-terms"},i().createElement("div",{className:"load-strategy__google-drive-text"},i().createElement(M.Localize,{i18n_default_text:"To import your bot from your Google Drive, you'll need to sign in to your Google account."})),i().createElement("div",{className:"load-strategy__google-drive-text"},i().createElement(M.Localize,{i18n_default_text:"To know how Google Drive handles your data, please review Deriv’s <0>Privacy policy.</0>",components:[i().createElement(l.StaticUrl,{key:0,className:"link",href:"tnc/security-and-privacy.pdf",is_document:!0})]}))),i().createElement(l.Button,{text:(0,M.localize)("Sign in"),onClick:c,has_effect:!0,primary:!0,large:!0}))))}));const fo=po,mo=(0,c.Pi)((function(){var e=D().ui,t=uo(),n=t.load_modal,r=t.dashboard,o=n.is_open_button_loading,a=n.loadFileFromLocal,c=n.setLoadedLocalFile,s=n.toggleLoadModal,u=r.setOpenSettings,d=r.setPreviewOnPopup,p=e.is_mobile,f=p?l.Button.Group:i().Fragment;return i().createElement(f,null,p&&i().createElement(l.Button,{text:(0,M.localize)("Cancel"),onClick:function(){return c(null)},has_effect:!0,secondary:!0,large:!0}),i().createElement(l.Button,{text:(0,M.localize)("Open"),onClick:function(){a(),s(),d(!1),u("import")},is_loading:o,has_effect:!0,primary:!0,large:!0}))})),ho=(0,c.Pi)((function(e){var t=e.mockZoomInOut,n=uo().dashboard.onZoomInOutClick;return i().createElement("div",{className:"load-strategy__preview-workspace-controls"},i().createElement(l.Icon,{icon:"IcAddRounded",className:"load-strategy__preview-workspace-icon",onClick:function(){t?t(!0):n(!0)},data_testid:"zoom-in"}),i().createElement(l.Icon,{icon:"IcMinusRounded",className:"load-strategy__preview-workspace-icon",onClick:function(){t?t(!1):n(!1)},data_testid:"zoom-out"}))}));function yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const vo=(0,c.Pi)((function(){var e,t=D().ui,n=uo(),r=n.dashboard,o=n.load_modal,a=r.active_tab,c=r.active_tour,s=o.handleFileChange,u=o.loaded_local_file,d=o.setLoadedLocalFile,p=i().useRef(null),f=(2,function(e){if(Array.isArray(e))return e}(e=i().useState(!0))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return yo(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yo(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],h=f[1],y=t.is_mobile;return u&&m?i().createElement("div",{className:"load-strategy__container load-strategy__container--has-footer"},i().createElement("div",{className:z()("load-strategy__local-preview",{"load-strategy__local-preview--active":1===a&&c})},i().createElement("div",{className:"load-strategy__title"},i().createElement(M.Localize,{i18n_default_text:"Preview"})),i().createElement("div",{className:"load-strategy__preview-workspace"},i().createElement("div",{id:"load-strategy__blockly-container",style:{height:"100%"}},i().createElement("div",{className:"load-strategy__local-preview-close"},i().createElement(l.Icon,{icon:"IcCross",onClick:function(){return d(null)}})),i().createElement(ho,null)))),y&&i().createElement("div",{className:"load-strategy__local-footer"},i().createElement(mo,null))):i().createElement("div",{className:"load-strategy__container"},i().createElement("div",{className:"load-strategy__local-dropzone"},i().createElement("input",{type:"file",ref:p,accept:"application/xml, text/xml",style:{display:"none"},onChange:function(e){return h(s(e,!1))}}),i().createElement("div",{className:"load-strategy__local-dropzone-area",onDrop:function(e){s(e,!1)}},y?i().createElement(l.Icon,{icon:"IcLocal",className:"load-strategy__local-icon",size:y?96:128}):i().createElement(i().Fragment,null,i().createElement(l.Icon,{icon:"IcPc",className:"load-strategy__local-icon",size:y?96:128}),i().createElement("div",{className:"load-strategy__local-title"},i().createElement(M.Localize,{i18n_default_text:"Drag your XML file here"})),i().createElement("div",{className:"load-strategy__local-description"},i().createElement(M.Localize,{i18n_default_text:"or, if you prefer..."}))),i().createElement(l.Button,{text:m?(0,M.localize)("Select an XML file from your device"):(0,M.localize)("Please upload an XML file"),onClick:function(){var e;return null==p||null===(e=p.current)||void 0===e?void 0:e.click()},has_effect:!0,primary:!0,large:!0}))))})),_o=(0,c.Pi)((function(e){var t=e.workspace,n=uo().load_modal,r=n.getRecentFileIcon,o=n.getSaveType,c=n.previewRecentStrategy,s=n.selected_strategy_id;return i().createElement("div",{className:z()("load-strategy__recent-item load-dialog",{"load-strategy__recent-item--selected":s===t.id}),key:t.id,onClick:s===t.id?void 0:function(){return c(t.id)},"data-testid":"dt_recent_workspace_item"},i().createElement("div",{className:"load-strategy__recent-item-text load-dialog"},i().createElement("div",{className:"load-strategy__recent-item-title"},t.name),i().createElement("div",{className:"load-strategy__recent-item-time"},(0,a.timeSince)(t.timestamp))),i().createElement("div",{className:"load-strategy__recent-item-location load-dialog"},i().createElement(l.Icon,{icon:r(t.save_type),className:z()({"load-strategy__recent-icon--active":t.save_type===_n.R.GOOGLE_DRIVE})}),i().createElement("div",{className:"load-strategy__recent-item-saved"},o(t.save_type))))})),go=(0,c.Pi)((function(){var e=uo().load_modal,t=e.is_explanation_expand,n=e.recent_strategies,r=e.toggleExplanationExpand;return n.length?i().createElement("div",{className:"load-strategy__container load-strategy__container--has-footer"},i().createElement("div",{className:"load-strategy__recent"},i().createElement("div",{className:"load-strategy__recent-files"},i().createElement("div",{className:"load-strategy__title"},i().createElement(M.Localize,{i18n_default_text:"Recent"})),i().createElement("div",{className:"load-strategy__recent-files-list"},n.map((function(e){return i().createElement(_o,{key:e.id,workspace:e})})))),i().createElement("div",{className:"load-strategy__recent-preview"},i().createElement("div",{className:"load-strategy__title load-strategy__recent-preview-title"},i().createElement(M.Localize,{i18n_default_text:"Preview"})),i().createElement("div",{className:"load-strategy__preview-workspace"},i().createElement("div",{id:"load-strategy__blockly-container",style:{height:"100%"}},i().createElement(ho,null)))))):i().createElement("div",{className:"load-strategy__container"},i().createElement("div",{className:"load-strategy__recent-empty"},i().createElement(l.Icon,{icon:"IcEmptyFolder",className:"load-strategy__recent-empty-icon",size:128}),i().createElement("div",{className:"load-strategy__recent-empty-title"},i().createElement(M.Localize,{i18n_default_text:"You do not have any recent bots"})),i().createElement("div",{className:"load-strategy__recent-empty-description"},i().createElement(M.Localize,{i18n_default_text:"Create one or upload one from your local drive or Google Drive."})),i().createElement("div",{className:"load-strategy__recent-empty-expand",onClick:r},i().createElement(M.Localize,{i18n_default_text:"Why can't I see my recent bots?"})),i().createElement("div",{className:z()("load-strategy__recent-empty-explanation",{"load-strategy__recent-empty-explanation--show":t})},i().createElement("div",null,i().createElement(M.Localize,{i18n_default_text:"If you've recently used bots but don't see them in this list, it may be because you:"})),i().createElement("ol",{className:"load-strategy__recent-empty-explanation-list"},i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"1. Logged in from a different device"})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"2. Logged in from a different browser"})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"3. Cleared your browser cache"}))))))})),bo=(0,c.Pi)((function(){var e=uo(),t=e.load_modal,n=e.dashboard,r=t.is_open_button_loading,o=t.loadFileFromRecent,a=t.toggleLoadModal,c=n.setOpenSettings;return i().createElement(l.Button,{text:(0,M.localize)("Open"),onClick:function(){o(),a(),c("import")},is_loading:r,has_effect:!0,primary:!0,large:!0})})),ko=(0,c.Pi)((function(){var e=D().ui,t=uo(),n=t.load_modal,r=t.dashboard,o=n.active_index,a=n.is_load_modal_open,c=n.loaded_local_file,s=n.onEntered,u=n.recent_strategies,d=n.setActiveTabIndex,p=n.toggleLoadModal,f=n.tab_name,m=r.setPreviewOnPopup,h=e.is_mobile,y=(0,M.localize)("Load strategy");if(h)return i().createElement(l.MobileFullPageModal,{is_modal_open:a,className:"load-strategy__wrapper",header:(0,M.localize)("Load strategy"),onClickClose:function(){m(!1),p()},height_offset:"80px",page_overlay:!0},i().createElement(l.Tabs,{active_index:o,onTabItemClick:d,top:!0},i().createElement("div",{label:(0,M.localize)("Local")},i().createElement(vo,null)),i().createElement("div",{label:"Google Drive"},i().createElement(fo,null))));var v=c&&f===ue.TAB_LOCAL,_=u.length>0&&f===ue.TAB_RECENT;return i().createElement(l.Modal,{title:y,className:"load-strategy",width:"1000px",height:"80vh",is_open:a,toggleModal:p,onEntered:s,elements_to_ignore:[document.querySelector(".injectionDiv")]},i().createElement(l.Modal.Body,null,i().createElement(l.Tabs,{active_index:o,onTabItemClick:d,top:!0,header_fit_content:!0},i().createElement("div",{label:(0,M.localize)("Recent")},i().createElement(go,null)),i().createElement("div",{label:(0,M.localize)("Local")},i().createElement(vo,null)),i().createElement("div",{label:"Google Drive"},i().createElement(fo,null)))),_&&i().createElement(l.Modal.Footer,{has_separator:!0},i().createElement(bo,null)),v&&i().createElement(l.Modal.Footer,{has_separator:!0},i().createElement(mo,null)))}));var Eo=n(37661),wo=n(9699),So=n(45135),To=n.n(So);const Bo=(0,c.Pi)((function(e){var t=e.active_tab,n=e.onChange,r=e.description;return i().createElement("div",{className:"qs__body__content__head"},i().createElement("div",{className:"qs__body__content__head__tabs"},wn.map((function(e,o){var a=e.value===t;return i().createElement("span",{tabIndex:o,className:z()("qs__body__content__head__tabs__tab",{active:a,disabled:!r&&(null==e?void 0:e.disabled)}),key:e.value,onClick:function(){return n(e.value)},onKeyDown:function(t){"Enter"===t.key&&n(e.value)}},i().createElement(l.Text,{size:"xs",weight:a?"bold":"lighter"},e.label))}))))})),Oo=function(e){var t=e.data,n=e.font_size;return i().createElement("div",null,function(){var e,r;switch(t.type){case"subtitle":return null==t||null===(e=t.content)||void 0===e?void 0:e.map((function(e){return i().createElement("div",{className:"qs__long_description__title",key:e},i().createElement(l.Text,{size:n,weight:"bold",dangerouslySetInnerHTML:{__html:e}}))}));case"text":var o,a,c=z()("qs__long_description__content ".concat(null!==(o=null==t?void 0:t.className)&&void 0!==o?o:""));return null==t||null===(a=t.content)||void 0===a?void 0:a.map((function(e){return i().createElement("div",{className:c,key:e},i().createElement(l.Text,{size:n,dangerouslySetInnerHTML:{__html:e}}))}));case"subtitle_italic":return null==t||null===(r=t.content)||void 0===r?void 0:r.map((function(e){return i().createElement("div",{className:"qs__long_description__title italic",key:e},i().createElement(l.Text,{size:n,weight:"bold",dangerouslySetInnerHTML:{__html:e}}))}));case"text_italic":var s,u,d=z()("qs__long_description__content italic ".concat(null!==(s=null==t?void 0:t.className)&&void 0!==s?s:""));return null==t||null===(u=t.content)||void 0===u?void 0:u.map((function(e){return i().createElement("div",{className:d,key:e},i().createElement(l.Text,{size:n,dangerouslySetInnerHTML:{__html:e}}))}));case"media":return i().createElement("div",null,i().createElement("img",{className:"qs__long_description__image",src:t.src,alt:t.alt}));default:return null}}())},xo=(0,c.Pi)((function(e){var t,n=e.formfields,r=e.active_tab,o=e.tutorial_selected_strategy,a=D().ui,c=uo().quick_strategy.selected_strategy,s=a.is_mobile,u=qn[o||c],d=o?"s":"xs",p=i().useMemo((function(){return s?"xxs":d}),[s]);return i().createElement(i().Fragment,null,"TRADE_PARAMETERS"===r?i().createElement(i().Fragment,null,u.description&&i().createElement("div",{className:"qs__body__content__description"},i().createElement("div",null,i().createElement(l.Text,{size:p},u.description))),i().createElement("div",{className:"qs__body__content__form"},n)):i().createElement("div",{className:"qs__body__content__description"},i().createElement("div",null,null==u||null===(t=u.long_description)||void 0===t?void 0:t.map((function(e,t){return i().createElement(Oo,{key:t,data:e,font_size:p})})))))}));function Ao(e){return Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ao(e)}function Co(){Co=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Ao(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Io(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Lo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Io(i,r,o,a,l,"next",e)}function l(e){Io(i,r,o,a,l,"throw",e)}a(void 0)}))}}const No=function(){var e=D().client,t=e.currency,n=e.balance,r=e.is_logged_in,o=(0,Eo.useFormikContext)(),i=o.submitForm,a=o.setFieldValue,l=o.values,c=uo(),s=c.quick_strategy,u=c.run_panel,d=s.toggleStopBotDialog,p=s.setLossThresholdWarningData,f=s.loss_threshold_warning_data,m=function(){var e=Lo(Co().mark((function e(){var o,i,a,c,s,u,d;return Co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Number(null!==(o=null==l?void 0:l.loss)&&void 0!==o?o:0),s=Number(null!==(i=null==l?void 0:l.profit)&&void 0!==i?i:0),u=null===(a=localStorage)||void 0===a?void 0:a.getItem("qs-dont-show-loss-threshold-warning"),d=JSON.parse(null!=u?u:"false"),!f.already_shown&&(c>.5*Number(null!=n?n:0)||c>2*s)&&r&&!d?p({show:!0,loss_amount:c,currency:t,already_shown:!0}):h();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Lo(Co().mark((function e(){return Co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.is_running){e.next=7;break}return e.next=3,a("action","EDIT");case 3:i(),d(),e.next=11;break;case 7:return j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"run_strategy",form_source:"ce_bot_quick_strategy_form"}),e.next=10,a("action","RUN");case 10:i();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleSubmit:m,proceedFormSubmission:h}};function Ro(e){return Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ro(e)}function Do(){Do=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Ro(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Po(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jo=(0,c.Pi)((function(e){var t,n=e.children,r=(2,function(e){if(Array.isArray(e))return e}(t=i().useState("TRADE_PARAMETERS"))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return zo(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zo(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],c=(0,Eo.useFormikContext)(),s=c.submitForm,u=c.isValid,d=c.setFieldValue,p=c.validateForm,f=uo().quick_strategy,m=f.selected_strategy,h=f.setSelectedStrategy,y=f.setFormVisibility,v=qn[m],_=No().handleSubmit;i().useEffect((function(){p()}),[m,p]);var g=function(){var e,t=(e=Do().mark((function e(){return Do().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("action","EDIT");case 2:s();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Po(i,r,o,a,l,"next",e)}function l(e){Po(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return i().createElement("div",{className:"qs"},i().createElement("div",{className:"qs__head"},i().createElement("div",{className:"qs__head__title"},i().createElement(l.Text,{weight:"bold"},(0,M.localize)("Quick Strategy"))),i().createElement("div",{className:"qs__head__action"},i().createElement("span",{"data-testid":"qs-desktop-close-button",onClick:function(){return j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"close",form_source:"ce_bot_quick_strategy_form"}),void y(!1)}},i().createElement(To(),{icon:"IcCross"})))),i().createElement("div",{className:"qs__body"},i().createElement("div",{className:"qs__body__sidebar"},i().createElement("div",{className:"qs__body__sidebar__subtitle"},i().createElement(l.Text,{size:"xs"},(0,M.localize)("Choose a template below and set your trade parameters."))),i().createElement("div",{className:"qs__body__sidebar__items"},i().createElement("ul",null,Object.keys(qn).map((function(e){var t=qn[e],n=e===m;return i().createElement("li",{className:z()({active:n}),key:e,onClick:function(){return function(e){h(e),a("TRADE_PARAMETERS"),j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"choose_strategy",strategy_type:e})}(String(e))}},i().createElement(l.Text,{size:"xs",weight:n?"bold":"normal"},t.label))}))))),i().createElement("div",{className:"qs__body__content"},i().createElement(l.ThemedScrollbars,{className:z()("qs__form__container",{"qs__form__container--no-footer":"TRADE_PARAMETERS"!==o}),autohide:!1},i().createElement(Bo,{active_tab:o,onChange:function(e){a(e)},description:null==v?void 0:v.long_description}),i().createElement(xo,{formfields:n,active_tab:o})),"TRADE_PARAMETERS"===o&&i().createElement("div",{className:"qs__body__content__footer"},i().createElement(l.Button,{secondary:!0,disabled:!u,onClick:g},(0,M.localize)("Edit")),i().createElement(l.Button,{"data-testid":"qs-run-button",primary:!0,onClick:_,disabled:!u},(0,M.localize)("Run"))))))}));const Mo=i().memo(jo);function Fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Uo=(0,c.Pi)((function(e){var t,n=e.children,r=(2,function(e){if(Array.isArray(e))return e}(t=i().useState("TRADE_PARAMETERS"))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return Fo(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fo(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],c=(0,Eo.useFormikContext)(),s=c.isValid,u=c.validateForm,d=uo().quick_strategy,p=d.selected_strategy,f=d.setSelectedStrategy,m=No().handleSubmit,h=qn[p];i().useEffect((function(){u()}),[p,u]);var y=Object.keys(qn).map((function(e){return{value:e,text:qn[e].label,description:qn[e].description}}));return i().createElement("div",{className:"qs"},i().createElement("div",{className:"qs__body"},i().createElement("div",{className:"qs__body__content"},i().createElement(l.ThemedScrollbars,{className:z()("qs__form__container",{"qs__form__container--no-footer":"TRADE_PARAMETERS"!==o}),autohide:!1},i().createElement("div",{className:"qs__body__content__title"},i().createElement("div",{className:"qs__body__content__description"},i().createElement(l.Text,{size:"xxs"},(0,M.localize)("Choose a template below and set your trade parameters."))),i().createElement("div",{className:"qs__body__content__select"},i().createElement(l.SelectNative,{list_items:y,value:p,label:(0,M.localize)("Strategy"),should_show_empty_option:!1,onChange:function(e){!function(e){f(e),a("TRADE_PARAMETERS")}(e.target.value)}}))),i().createElement(Bo,{active_tab:o,onChange:function(e){a(e)},description:null==h?void 0:h.long_description}),i().createElement(xo,{formfields:n,active_tab:o})),"TRADE_PARAMETERS"===o&&i().createElement("div",{className:"qs__body__content__footer"},i().createElement(l.Button,{primary:!0,"data-testid":"qs-run-button",type:"submit",onClick:m,disabled:!s},(0,M.localize)("Run"))))))}));var Vo="loss-threshold-warning-dialog";const Go=(0,c.Pi)((function(){var e=uo().quick_strategy,t=e.loss_threshold_warning_data,n=e.setLossThresholdWarningData,r=e.initializeLossThresholdWarningData,o=No().proceedFormSubmission;return i().createElement(l.Dialog,{portal_element_id:"modal_root_absolute",title:(0,M.localize)("Are you sure you want to continue?"),is_visible:t.show,confirm_button_text:(0,M.localize)("Yes, continue"),onConfirm:function(){r(),o()},cancel_button_text:(0,M.localize)("Edit the amount"),onCancel:function(){n({show:!1,highlight_field:["loss"]})},is_mobile_full_width:!1,has_close_icon:!1,className:Vo},i().createElement("div",{className:"".concat(Vo,"__body-text")},i().createElement(M.Localize,{i18n_default_text:"Please confirm that your loss threshold amount is {{loss_amount}} {{currency}}.",values:{loss_amount:null==t?void 0:t.loss_amount,currency:null==t?void 0:t.currency}})),i().createElement(l.Checkbox,{defaultChecked:!1,label:(0,M.localize)("Do not show this message again."),onChange:function(){var e,t,n=null===(e=localStorage)||void 0===e?void 0:e.getItem("qs-dont-show-loss-threshold-warning"),r=JSON.parse(null!=n?n:"false");null===(t=localStorage)||void 0===t||t.setItem("qs-dont-show-loss-threshold-warning","".concat(!r))}}))}));function Ho(e){return Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(e)}var Jo=["value"];function Wo(){return Wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wo.apply(this,arguments)}function Yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(n),!0).forEach((function(t){Ko(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ko(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ho(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ho(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Zo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qo=function(e){var t=e.symbol;return i().createElement("div",{key:t.value,className:"qs__select__option"},i().createElement(l.Icon,{data_testid:"dt_symbol_icon",icon:"IcUnderlying".concat(t.value),size:32}),i().createElement(l.Text,{className:"qs__select__option__text",size:"xs",color:"prominent"},t.text))};const $o=function(){var e=uo().quick_strategy,t=D().ui,n=t.is_mobile,r=t.is_desktop,c=e.setValue,s=Xo(i().useState([]),2),u=s[0],d=s[1],p=Xo((0,o.useState)(!1),2),f=p[0],m=p[1],h=Xo((0,o.useState)({text:"",value:""}),2),y=h[0],v=h[1],_=Xo((0,o.useState)({text:"",value:""}),2),g=_[0],b=_[1],k=(0,Eo.useFormikContext)(),E=k.setFieldValue,w=k.values,S=(0,o.useMemo)((function(){return u.map((function(e){return qo({component:i().createElement(Qo,{key:e.text,symbol:e})},e)}))}),[u]);(0,o.useEffect)((function(){var e,t,n=a.ApiHelpers.instance.active_symbols.getSymbolsForBot();(d(n),null!=w&&w.symbol)&&(!!n.find((function(e){return e.value===w.symbol}))||(E("symbol",null==n||null===(e=n[0])||void 0===e?void 0:e.value),c("symbol",null==n||null===(t=n[0])||void 0===t?void 0:t.value)))}),[]),(0,o.useEffect)((function(){var e=S.find((function(e){return e.value===w.symbol}));e&&v({text:e.text,value:e.value})}),[S,w.symbol,v]);var T=function(){r&&!f&&(m(!0),v({text:"",value:""}))},B=function(e){v(qo(qo({},y),{},{text:e.target.value}))},O=function(e){if(e){var t=e.value;!function(e){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"choose_asset",asset_type:e,form_source:"ce_bot_quick_strategy_form"})}(e.text),E("symbol",t),c("symbol",t),m(!1)}},x=function(){if(r){var e=S.find((function(e){return e.value===w.symbol}));e&&e.text!==y.text&&(v({text:e.text,value:e.value}),b({text:e.text,value:e.value}),m(!1)),e||(v({text:g.text,value:g.value}),m(!1))}};return i().createElement("div",{className:"qs__form__field qs__form__field__input"},i().createElement(Eo.Field,{name:"symbol",key:"asset",id:"asset"},(function(e){var t=e.field,r=(t.value,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,Jo));return i().createElement(i().Fragment,null,i().createElement(l.Autocomplete,Wo({},r,{readOnly:n,inputMode:"none","data-testid":"qs_autocomplete_symbol",autoComplete:"off",className:"qs__autocomplete",value:y.text,list_items:S,onItemSelection:O,onChange:B,onFocus:T,onHideDropdownList:x,leading_icon:i().createElement(l.Icon,{icon:"IcUnderlying".concat(y.value),size:24})})))})))};var ei=n(80594),ti=n.n(ei);function ni(e){return ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ni(e)}function ri(){return ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ri.apply(this,arguments)}function oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ii(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==ni(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ni(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ni(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ai(){ai=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==ni(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function li(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function ci(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){li(i,r,o,a,l,"next",e)}function l(e){li(i,r,o,a,l,"throw",e)}a(void 0)}))}}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ui=function(e){var t=e.trade_type;return i().createElement("div",{key:t.value,className:"qs__select__option"},i().createElement(l.IconTradeTypes,{type:t.icon[0],className:"qs__select__option__icon"}),i().createElement(l.IconTradeTypes,{type:t.icon[1],className:"qs__select__option__icon"}),i().createElement(l.Text,{className:"qs__select__option__text",size:"xs",color:"prominent"},t.text))};const di=function(){var e,t=(2,function(e){if(Array.isArray(e))return e}(e=i().useState([]))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return si(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?si(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=t[0],r=t[1],o=(0,Eo.useFormikContext)(),c=o.setFieldValue,s=o.values,u=o.validateForm,d=uo().quick_strategy.setValue,p=null==s?void 0:s.tradetype;i().useEffect((function(){var e,t,r;JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("qs-fields"))||(null==c||c("tradetype",null==n||null===(t=n[0])||void 0===t?void 0:t.value),u(),d("tradetype",null==n||null===(r=n[0])||void 0===r?void 0:r.value))}),[]),i().useEffect((function(){if(null!=s&&s.symbol&&""!==p){var e=a.ApiHelpers.instance.contracts_for,t=function(){var t=ci(ai().mark((function t(){var n,o,i;return ai().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTradeTypesForQuickStrategy(null==s?void 0:s.symbol);case 2:if(o=t.sent,r(o),i=null==o?void 0:o.some((function(e){return e.value===p})),i||(null==o||null===(n=o[0])||void 0===n?void 0:n.value)===p){t.next=11;break}return t.next=8,null==c?void 0:c("tradetype",(null==o?void 0:o[0].value)||"");case 8:return t.next=10,u();case 10:d("tradetype",null==o?void 0:o[0].value);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();ti()(ci(ai().mark((function e(){return ai().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)}))),100)()}}),[null==s?void 0:s.symbol,p]);var f=i().useMemo((function(){return n.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){ii(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({component:i().createElement(ui,{key:e.text,trade_type:e})},e)}))}),[n]);return i().createElement("div",{className:"qs__form__field qs__form__field__input qs__form__field__group-icons"},i().createElement(Eo.Field,{name:"tradetype",key:"tradetype",id:"tradetype"},(function(e){var t,n,r=e.field,o=null==f?void 0:f.find((function(e){return e.value===r.value}));return i().createElement(l.Autocomplete,ri({},r,{readOnly:!0,inputMode:"none","data-testid":"qs_autocomplete_tradetype",autoComplete:"off",className:"qs__autocomplete",value:(null==o?void 0:o.text)||"",list_items:f,onItemSelection:function(e){null!=e&&e.value&&(function(e){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"choose_trade_type",trade_type:e,form_source:"ce_bot_quick_strategy_form"})}(e.text),null==c||c("tradetype",null==e?void 0:e.value),d("tradetype",null==e?void 0:e.value))},leading_icon:i().createElement(l.Text,null,i().createElement(l.IconTradeTypes,{type:(null==o||null===(t=o.icon)||void 0===t?void 0:t[0])||"CALL"}),i().createElement(l.IconTradeTypes,{type:(null==o||null===(n=o.icon)||void 0===n?void 0:n[1])||"PUT"}))}))})))};function pi(e){return pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pi(e)}function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fi.apply(this,arguments)}function mi(){mi=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==pi(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function hi(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vi=(0,c.Pi)((function(e){var t,n=e.name,r=D().ui.is_mobile,o=(2,function(e){if(Array.isArray(e))return e}(t=i().useState([]))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return yi(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yi(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=o[0],s=o[1],u=uo().quick_strategy.setValue,d=(0,Eo.useFormikContext)(),p=d.setFieldValue,f=d.validateForm,m=d.values,h=m.symbol,y=m.tradetype,v=null==m?void 0:m.type;i().useEffect((function(){if(y&&h&&""!==v){var e=function(){var e,t=(e=mi().mark((function e(){var t,r,o,i;return mi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.ApiHelpers.instance.contracts_for,e.next=3,t.getContractTypes(y);case 3:r=e.sent,s(r),(null==r?void 0:r.some((function(e){return e.value===v})))||(null==p||p(n,null==r||null===(o=r[0])||void 0===o?void 0:o.value),u(n,null==r||null===(i=r[0])||void 0===i?void 0:i.value),f());case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){hi(i,r,o,a,l,"next",e)}function l(e){hi(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}}),[h,y,v]);var _=function(e){null==p||p(n,e),u(n,e)},g="qs-contract-type-".concat(n);return i().createElement("div",{className:"qs__form__field qs__form__field__input no-top-spacing"},i().createElement(Eo.Field,{name:n,key:g,id:g},(function(e){var t=e.field,n=null==c?void 0:c.find((function(e){return e.value===t.value}));return r?i().createElement("ul",{className:"qs__form__field__list","data-testid":"dt-qs-contract-types"},c.map((function(e){var t=(null==n?void 0:n.value)===e.value;return i().createElement("li",{key:e.value,className:z()("qs__form__field__list__item",{"qs__form__field__list__item--active":t}),onClick:function(){!function(e){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"choose_trade_type_mode",trade_type_mode:e,form_source:"ce_bot_quick_strategy_form"})}(e.text),_(e.value)}},i().createElement(l.Text,{size:"xs",color:"prominent",weight:t?"bold ":"normal"},e.text))}))):i().createElement(l.Autocomplete,fi({},t,{readOnly:!0,inputMode:"none","data-testid":"qs_autocomplete_contract_type",autoComplete:"off",className:"qs__select contract-type",value:(null==n?void 0:n.text)||"",list_items:c,onItemSelection:function(e){null!=e&&e.value&&(_(null==e?void 0:e.value),function(e){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"choose_trade_type",trade_type:e,form_source:"ce_bot_quick_strategy_form"})}(null==e?void 0:e.text))}}))})))}));const _i=vi;function gi(e){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(e)}function bi(){return bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bi.apply(this,arguments)}function ki(){ki=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==gi(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Ei(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Si=function(e){var t,n=e.attached,r=(2,function(e){if(Array.isArray(e))return e}(t=i().useState([]))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return wi(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wi(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],c=r[1],s=uo().quick_strategy,u=s.setValue,d=s.setCurrentDurationMinMax,p=(0,Eo.useFormikContext)(),f=p.setFieldValue,m=p.validateForm,h=p.values,y=h.symbol,v=h.tradetype,_=null==h?void 0:h.durationtype;return i().useEffect((function(){if(v&&y){var e=function(){var e,t=(e=ki().mark((function e(){var t,n,r,o,i,l,s,p,h,g;return ki().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.ApiHelpers.instance.contracts_for,e.next=3,t.getDurations(y,v);case 3:n=e.sent,r=null==n?void 0:n.map((function(e){return{text:e.display,value:e.unit,min:e.min,max:e.max}})),c(r),o=null==r?void 0:r.some((function(e){return e.value===_})),o?(g=null==r?void 0:r.find((function(e){return e.value===_})),null==f||f("duration",null==g?void 0:g.min).then((function(){m()})),u("duration",null==g?void 0:g.min),d(null==g?void 0:g.min,null==g?void 0:g.max)):(null==f||f("durationtype",null==n||null===(i=n[0])||void 0===i?void 0:i.unit),null==f||f("duration",null==n||null===(l=n[0])||void 0===l?void 0:l.min).then((function(){m()})),u("durationtype",null==n||null===(s=n[0])||void 0===s?void 0:s.unit),d(null==n||null===(p=n[0])||void 0===p?void 0:p.min,null==n||null===(h=n[0])||void 0===h?void 0:h.max));case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ei(i,r,o,a,l,"next",e)}function l(e){Ei(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}}),[y,v]),i().createElement("div",{className:z()("qs__form__field qs__form__field__input",{"no-top-border-radius":n})},i().createElement(Eo.Field,{name:"durationtype",key:"durationtype",id:"durationtype"},(function(e){var t=e.field,n=null==o?void 0:o.find((function(e){return e.value===t.value}));return i().createElement(l.Autocomplete,bi({},t,{readOnly:!0,inputMode:"none","data-testid":"qs_autocomplete_durationtype",autoComplete:"off",className:"qs__select",value:(null==n?void 0:n.text)||"",list_items:o,onItemSelection:function(e){!function(e){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"choose_duration",duration_type:e,form_source:"ce_bot_quick_strategy_form"})}(null==e?void 0:e.text),null!=e&&e.value&&(d(null==e?void 0:e.min,null==e?void 0:e.max),null==f||f("durationtype",null==e?void 0:e.value),u("durationtype",null==e?void 0:e.value),null==f||f("duration",null==e?void 0:e.min).then((function(){m()})),u("duration",null==e?void 0:e.min))}}))})))};function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ti.apply(this,arguments)}function Bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Oi=(0,c.Pi)((function(e){var t,n=e.name,r=e.onChange,o=e.type,a=void 0===o?"text":o,c=e.attached,s=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,p=e.min,f=e.max,m=D().ui.is_mobile,h=uo().quick_strategy.loss_threshold_warning_data,y=(2,function(e){if(Array.isArray(e))return e}(t=i().useState(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return Bi(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bi(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],_=y[1],g=(0,Eo.useFormikContext)(),b=g.setFieldValue,k=g.setFieldTouched,E="number"===a,w=i().useCallback(ti()((function(e){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"change_parameter_value",parameter_value:e,plus_push_amount:e})}),J,{trailing:!0,leading:!1}),[]),S=i().useCallback(ti()((function(e){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"change_parameter_value",parameter_value:e,minus_push_amount:e})}),J,{trailing:!0,leading:!1}),[]),T=function(e,t){null==e||e.preventDefault(),r(n,t),k(n,!0,!0),b(n,t)};return i().createElement(Eo.Field,{name:n,key:n,id:n},(function(e){var t,o=e.field,c=e.meta.error,u=c;return i().createElement("div",{className:z()("qs__form__field qs__form__field__input",{"no-top-spacing":s,"no-border-top":s})},i().createElement("div",{"data-testid":"qs-input-container",onMouseEnter:function(){return _(!0)},onMouseLeave:function(){return _(!1)}},i().createElement(l.Popover,{alignment:"bottom",message:c,is_open:m?!!c:!!c&&v,zIndex:"9999",classNameBubble:"qs__warning-bubble",has_error:!0,should_disable_pointer_events:!0},i().createElement(l.Input,Ti({data_testId:"qs-input",className:z()("qs__input",{error:u},{highlight:null==h||null===(t=h.highlight_field)||void 0===t?void 0:t.includes(n)}),type:a,leading_icon:E?i().createElement("button",{disabled:!!p&&o.value<=p,"data-testid":"qs-input-decrease",onClick:function(e){var t=Number(o.value)-1;T(e,String(t%1?t.toFixed(2):t)),S(String(t%1?t.toFixed(2):t))}},"-"):void 0,trailing_icon:E?i().createElement("button",{disabled:!!f&&o.value>=f,"data-testid":"qs-input-increase",onClick:function(e){var t=Number(o.value)+1;T(e,String(t%1?t.toFixed(2):t)),w(String(t%1?t.toFixed(2):t))}},"+"):null},o,{disabled:d,onChange:function(e){return function(e){var t=e.target.value,o=E?Number(t):t;r(n,o)}(e)}})))))}))}));function xi(){return xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xi.apply(this,arguments)}const Ai=function(e){var t=e.name,n=e.label,r=e.description,o=e.attached,a=void 0!==o&&o,c=(0,Eo.useFormikContext)(),s=c.values,u=c.setFieldValue,d=c.validateForm,p=function(){u(t,!(null!=s&&s[t])).finally((function(){d()}))};return i().createElement(Eo.Field,{name:t},(function(e){var t=e.field;return i().createElement("div",{className:z()("qs__form__field qs__form__field__input",{"no-border-bottom-radius":a})},i().createElement("div",{className:"qs__checkbox"},i().createElement("div",{className:"qs__checkbox__container"},i().createElement(l.Checkbox,xi({},t,{label:n,onChange:p,"data-testid":"qs-checkbox"})),i().createElement("span",null,i().createElement(l.Popover,{classNameTargetIcon:"qs__checkbox__info",message:r,zIndex:"9999",alignment:"top",icon:"info"})))))}))},Ci=(0,c.Pi)((function(e){var t=e.label,n=e.description;return i().createElement("div",{className:"qs__form__field"},i().createElement("div",{className:"qs__input-label"},i().createElement(l.Text,{weight:"bold",className:"qs__input-label__wrapper",size:"xs"},t),i().createElement("span",null,i().createElement(l.Popover,{onClick:function(){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"info_popup_open",form_source:"ce_bot_quick_strategy_form"})},message:n,zIndex:"9999",alignment:"top",icon:"info"}))))}));function Ii(e){return Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ii(e)}function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Li.apply(this,arguments)}function Ni(){Ni=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Ii(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Ri(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}var Di=(0,c.Pi)((function(){var e,t=D().ui,n=uo().quick_strategy,r=n.selected_strategy,o=n.setValue,a=n.form_data,l=null===(e=qn[r])||void 0===e?void 0:e.fields,c=t.is_mobile,s=(0,Eo.useFormikContext)(),u=s.values,d=s.setFieldTouched,p=s.setFieldValue,f=n.current_duration_min_max,m=i().useCallback(ti()((function(e,t){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"change_parameter_value",parameter_value:t,parameter_type:e})}),J,{trailing:!0,leading:!1}),[]);i().useEffect((function(){return window.addEventListener("keydown",y),function(){window.removeEventListener("keydown",y)}}),[]);var h=function(){var e,t=(e=Ni().mark((function e(t,n){return Ni().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t,n),e.next=3,d(t,!0,!0);case 3:return e.next=5,p(t,n);case 5:m(t,n);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ri(i,r,o,a,l,"next",e)}function l(e){Ri(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),y=function(e){null!=e&&e.key&&"Enter"==e.key&&(e.preventDefault(),e.stopPropagation())},v=function(e){return e.every((function(e){var t,n=null==u||null===(t=u[e.key])||void 0===t?void 0:t.toString();return e.multiple?e.multiple.includes(n):u[e.key]===e.value}))};return i().createElement("div",null,l.map((function(e,t){return null!=e&&e.length?i().createElement("div",{className:"qs__body__content__form__group",key:t},e.map((function(e,t){var n,r,o="".concat(e.name||e.type," + ").concat(t);if(c&&null!==(n=e.hide)&&void 0!==n&&n.includes("mobile")||!c&&null!==(r=e.hide)&&void 0!==r&&r.includes("desktop"))return null;switch(e.type){case"number":if(!e.name)return null;var l,s=e.should_have,u=void 0===s?[]:s,d=e.hide_without_should_have,p=void 0!==d&&d,m=v(u),y=1;"duration"===e.name&&f&&(y=f.min,l=f.max);var _=e.should_have;return _&&"max_stake"===e.name&&(y=+(null==a?void 0:a.stake),isNaN(y)&&(y=1)),_&&"last_digit_prediction"===e.name&&((isNaN(+(null==a?void 0:a.last_digit_prediction))||1==+(null==a?void 0:a.last_digit_prediction))&&(y=0),+(null==a?void 0:a.last_digit_prediction)>0&&(y=+(null==a?void 0:a.last_digit_prediction)-1),l=9),null!=u&&u.length?m||!c&&!p?i().createElement(Oi,Li({},e,{key:o,name:e.name,disabled:!m,onChange:h,min:y,max:l})):null:i().createElement(Oi,Li({},e,{onChange:h,key:o,name:e.name,min:y,max:l}));case"label":if(!e.label)return null;var g=e.should_have,b=void 0===g?[]:g,k=e.hide_without_should_have,E=void 0!==k&&k;return!v(b)&&E?null:i().createElement(Ci,{key:o,label:e.label,description:e.description||""});case"checkbox":return i().createElement(Ai,Li({},e,{key:o,name:e.name,label:e.label}));case"symbol":return i().createElement($o,Li({},e,{key:o}));case"tradetype":return i().createElement(di,Li({},e,{key:o}));case"durationtype":return i().createElement(Si,Li({},e,{key:o}));case"contract_type":return i().createElement(_i,Li({},e,{key:o,name:e.name}));default:return null}}))):null})))}));const Pi=Di;function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT";return{DURATION:{MIN:(0,M.localize)("Minimum duration: {{ value }}",{value:t}),MAX:(0,M.localize)("Maximum duration: {{ value }}",{value:t})},LAST_DIGIT_PREDICTION:{MIN:(0,M.localize)("Enter a value from {{ value }} to 9.",{value:t}),MAX:(0,M.localize)("Enter a value from 0 to {{ value }}.",{value:t})},DEFAULT:{MIN:(0,M.localize)("The value must be equal or greater than {{ value }}",{value:t}),MAX:(0,M.localize)("The value must be equal or less than {{ value }}",{value:t})}}[n][e]},Fi=(0,c.Pi)((function(e){var t,n,r=e.children,l=uo().quick_strategy,c=l.selected_strategy,s=l.form_data,u=l.onSubmit,d=l.setValue,p=l.current_duration_min_max,f=l.initializeLossThresholdWarningData,m=null===(t=qn[c])||void 0===t?void 0:t.fields,h=(2,function(e){if(Array.isArray(e))return e}(n=(0,o.useState)(wo.Ry().shape({})))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(n)||function(e,t){if(e){if("string"==typeof e)return ji(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ji(e,2):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=h[0],v=h[1],_={symbol:a.config.QUICK_STRATEGY.DEFAULT.symbol,tradetype:"",durationtype:a.config.QUICK_STRATEGY.DEFAULT.durationtype,stake:"1",loss:"0",profit:"0",size:String(a.config.QUICK_STRATEGY.DEFAULT.size),duration:"1",unit:String(a.config.QUICK_STRATEGY.DEFAULT.unit),action:"RUN",max_stake:10,boolean_max_stake:!1,last_digit_prediction:1};return i().useEffect((function(){var e=JSON.parse(localStorage.getItem("qs-fields")||"{}");Object.keys(e).forEach((function(t){_[t]=e[t],d(t,e[t])})),f()}),[]),i().createElement(Eo.Formik,{initialValues:_,validationSchema:y,onSubmit:function(e){var t;u(e),null===(t=localStorage)||void 0===t||t.setItem("qs-fields",JSON.stringify(e))},validate:function(e){return t=e,n={},m.forEach((function(e){if(null==e||!e.length)return null;e.forEach((function(e){var r;if(null!=e&&null!==(r=e.validation)&&void 0!==r&&r.length&&null!=e&&e.name&&e.validation.includes("number")){var o,i=wo.Rx().typeError((0,M.localize)("Must be a number")),a=0,l=10,c=Mi("MIN",a),u=Mi("MAX",l),d="";"duration"===e.name&&p&&(a=p.min,l=p.max,c=Mi("MIN",a,"DURATION"),u=Mi("MAX",l,"DURATION"));var f=!e.should_have||(null===(o=e.should_have)||void 0===o?void 0:o.every((function(e){var n,r=null==t||null===(n=t[e.key])||void 0===n?void 0:n.toString();return e.multiple?e.multiple.includes(r):(null==t?void 0:t[e.key])===e.value})));f&&"max_stake"===e.name&&(a=+(null==s?void 0:s.stake),isNaN(a)&&(a=+_.stake),c=Mi("MIN",a)),f&&"last_digit_prediction"===e.name&&(a=0,u=Mi("MAX",l=9,"LAST_DIGIT_PREDICTION"),d="Enter a value from 0 to 9."),f&&e.validation.forEach((function(e){if("string"==typeof e)switch(e){case"required":i=i.required((0,M.localize)("Field cannot be empty"));break;case"min":i=i.min(a,c);break;case"max":i=i.max(l,u);break;case"ceil":i=i.round("ceil");break;case"floor":i=i.round("floor");break;case"integer":i=i.integer(d)}else"object"===zi(e)&&null!=e&&e.type&&(i=i[e.type](e.value,(0,M.localize)(e.getMessage(e.value))))})),n[e.name]=i}}))})),void v(wo.Ry().shape(n));var t,n},validateOnBlur:!0,validateOnChange:!0,validateOnMount:!0},r)}));const Ui=(0,c.Pi)((function(){var e=uo().quick_strategy,t=D().ui.is_mobile,n=e.is_open,r=e.setFormVisibility;return i().useEffect((function(){n&&j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"open",form_source:"ce_bot_quick_strategy_form"})}),[n]),i().createElement(Fi,null,i().createElement(Eo.Form,null,i().createElement(Go,null),t?i().createElement(l.MobileFullPageModal,{is_modal_open:n,className:"quick-strategy__wrapper",header:(0,M.localize)("Quick Strategy"),onClickClose:function(){j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"close",form_source:"ce_bot_quick_strategy_form"}),r(!1)},height_offset:"8rem"},i().createElement(Uo,null,i().createElement(Pi,null))):i().createElement(l.Modal,{className:"modal--strategy",is_open:n,width:"72rem"},i().createElement(Mo,null,i().createElement(Pi,null)))))})),Vi=function(e){var t=e.icon,n=e.text,r=e.google_drive_connected,o=e.onDriveConnect,a="Google Drive"===n;return i().createElement("div",{className:"save-type__container"},i().createElement("div",{className:"save-type__radio"},t&&i().cloneElement(t,{className:z()("save-type__icon",{"save-type__icon--active":a&&r,"save-type__icon--disabled":a&&!r},t.props.className)}),i().createElement(l.Text,{as:"p",align:"center",size:"xxs",color:a&&!r?"disabled":"prominent",line_height:"s",className:"save-type__radio-text"},(0,M.localize)(n))),a&&i().createElement(l.Text,{as:"p",align:"center",size:"xs",weight:"bold",styles:{color:"var(--brand-red-coral)"},className:"save-type__drive-status",onClick:o},(0,M.localize)(r?(0,M.localize)("Disconnect"):(0,M.localize)("Connect"))))};function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gi.apply(this,arguments)}var Hi=function(e){var t=e.bot_name,n=e.button_status,r=e.is_authorised,o=e.onConfirmSave,c=e.onDriveConnect,s=e.validateBotName,u=e.toggleSaveModal,d=e.is_mobile,p=e.is_onscreen_keyboard_active,f=e.setCurrentFocus;return i().createElement(Eo.Formik,{initialValues:{is_local:!0,save_as_collection:!1,bot_name:t===a.config.default_file_name?"":t},validate:s,onSubmit:o},(function(e){var t=e.values.is_local,o=e.setFieldValue,s=e.touched,m=e.errors,h=d?"calc(100%)":"500px";return i().createElement(l.ThemedScrollbars,{height:h,autohide:!0},i().createElement(Eo.Form,{className:z()({"form--active-keyboard":p})},i().createElement("div",{className:"modal__content"},i().createElement(l.Text,{size:"xs",line_height:"l"},(0,M.localize)("Enter your bot name, choose to save on your computer or Google Drive, and hit "),i().createElement("strong",null,(0,M.localize)("Save."))),i().createElement("div",{className:"modal__content-row"},i().createElement(Eo.Field,{name:"bot_name"},(function(e){var t=e.field;return i().createElement(l.Input,Gi({className:"save-type__input",type:"text",placeholder:(0,M.localize)("Untitled Strategy"),error:s[t.name]&&m[t.name],label:(0,M.localize)("Bot name"),onFocus:function(e){return f(e.currentTarget.name)},onBlur:function(){return f(null)}},t))}))),i().createElement("div",{className:"modal__content-row"},i().createElement(l.RadioGroup,{className:"radio-group__save-type",name:"is_local",selected:function(){return r&&!t?a.save_types.GOOGLE_DRIVE:a.save_types.LOCAL},onToggle:function(){return o("is_local",!t)}},i().createElement(l.RadioGroup.Item,{id:"local",label:i().createElement(Vi,{text:(0,M.localize)("Local"),icon:i().createElement(l.Icon,{icon:d?"IcLocal":"IcMyComputer",size:48})}),value:a.save_types.LOCAL}),i().createElement(l.RadioGroup.Item,{id:"drive",label:i().createElement(Vi,{text:"Google Drive",icon:i().createElement(l.Icon,{icon:"IcGoogleDrive",size:48}),google_drive_connected:r,onDriveConnect:c}),value:a.save_types.GOOGLE_DRIVE,disabled:!r,className:z()({"dc-radio-group__item-disabled":!r})})))),i().createElement("div",{className:z()("modal__footer",{"modal__footer--active-keyboard":p})},i().createElement(l.Button,{type:"button",className:"modal__footer--button",text:(0,M.localize)("Cancel"),onClick:u,secondary:!0}),i().createElement(l.Button,{className:"modal__footer--button",type:"submit",is_loading:1===n,is_submit_success:2===n,text:(0,M.localize)("Continue"),primary:!0}))))}))},Ji=(0,c.Pi)((function(){var e=uo(),t=e.save_modal,n=e.google_drive,r=e.dashboard,a=e.load_modal,c=D().ui,s=a.dashboard_strategies,u=t.button_status,d=t.bot_name,p=t.is_save_modal_open,f=t.onConfirmSave,m=t.onDriveConnect,h=t.toggleSaveModal,y=t.updateBotName,v=t.validateBotName,_=n.is_authorised,g=c.is_onscreen_keyboard_active,b=c.setCurrentFocus,k=c.is_mobile,E=r.active_tab;return(0,o.useEffect)((function(){var e,t;1===E&&y(null!==(e=null==s||null===(t=s[0])||void 0===t?void 0:t.name)&&void 0!==e?e:"")}),[E,s,y]),k?i().createElement(l.MobileFullPageModal,{is_modal_open:p,className:"save-modal__wrapper",header:(0,M.localize)("Save strategy"),onClickClose:h,height_offset:"80px",page_overlay:!0},i().createElement(Hi,{bot_name:d,button_status:u,is_authorised:_,onConfirmSave:f,onDriveConnect:m,validateBotName:v,toggleSaveModal:h,is_mobile:k,is_onscreen_keyboard_active:g,setCurrentFocus:b})):i().createElement(l.Modal,{title:(0,M.localize)("Save Strategy"),className:"modal--save",width:"32.8rem",height:"50rem",is_open:p,toggleModal:h},i().createElement(Hi,{bot_name:d,button_status:u,is_authorised:_,onConfirmSave:f,onDriveConnect:m,validateBotName:v,toggleSaveModal:h,setCurrentFocus:b}))}));const Wi=Ji;var Yi=n(85264),qi=n(20796);function Ki(e){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki(e)}var Xi=["steps","styles","handleCallback"];function Zi(){return Zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zi.apply(this,arguments)}function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach((function(t){ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ea(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ki(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ki(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ki(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ta={fontWeight:"700",fontSize:"1.4rem",height:"4rem",padding:"1rem 1.6rem"};const na=function(e){var t=e.steps,n=e.styles,r=e.handleCallback,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Xi);return i().createElement(qi.ZP,Zi({steps:t,continuous:!0,callback:r,locale:{back:(0,M.localize)("Previous"),next:(0,M.localize)("Next")}},o,{styles:$i({options:{arrowColor:"var(--general-main-2)",backgroundColor:"var(--general-main-2)",primaryColor:"var(--brand-red-coral)",textColor:"var(--text-general)",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",width:440},buttonBack:$i({border:"0.2rem solid var(--text-less-prominent)",marginRight:"1rem",borderRadius:"0.4rem",color:"var(--text-general)"},ta),buttonNext:$i({},ta),overlay:{height:"100%"}},n)}))},ra=(0,c.Pi)((function(){var e=D().ui,t=uo().dashboard,n=t.is_tour_dialog_visible,r=t.setTourDialogVisibility,o=e.is_mobile;return i().createElement("div",null,i().createElement(l.Dialog,{is_visible:n,confirm_button_text:(0,M.localize)("OK"),onConfirm:function(){r(!1)},is_mobile_full_width:!0,className:"dc-dialog tour-dialog",has_close_icon:!1},i().createElement("div",{className:"dc-dialog__content__header"},i().createElement(l.Text,{weight:"bold",color:"prominent",size:o?"xs":"s"},(0,M.localize)("Congratulations"))),i().createElement("div",{className:"dc-dialog__content__description"},i().createElement(l.Text,{size:o?"xxs":"xs",color:"prominent"},i().createElement(i().Fragment,null,i().createElement("div",{className:"dc-dialog__content__description__text","data-testid":"tour-success-message"},i().createElement(M.Localize,{key:0,i18n_default_text:"You have successfully created your bot using a simple strategy."})),i().createElement("div",{className:"dc-dialog__content__description__text"},i().createElement(M.Localize,{key:0,i18n_default_text:"Now, <0>run the bot</0> to test out the strategy.",components:[i().createElement("strong",{key:0})]})),i().createElement("div",{className:"dc-dialog__content__description__text"},i().createElement(M.Localize,{key:0,i18n_default_text:"Note: If you wish to learn more about the Bot Builder, you can proceed to the <0>Tutorials</0> tab.",components:[i().createElement("strong",{key:0})]})))))))}));var oa=n(64894);const ia=(0,c.Pi)((function(e){var t=e.content,n=e.media,r=e.label,o=e.step_index,a=e.has_localize_component,c=void 0!==a&&a,s=e.show_actions,u=void 0===s||s;return i().createElement(i().Fragment,null,i().createElement("div",{className:"onboard"},u&&i().createElement("div",{className:"onboard__header"},i().createElement(l.Text,{color:"less-prominent",line_height:"l"},o,"/6")),i().createElement("div",{className:"onboard__steps"},i().createElement("div",{className:"onboard__label"},i().createElement(l.Text,{as:"p",line_height:"l",weight:"bold"},r)),n&&i().createElement("video",{autoPlay:!0,loop:!0,controls:!0,preload:"auto",playsInline:!0,disablePictureInPicture:!0,controlsList:"nodownload",style:{width:"100%"},src:n}),i().createElement("div",{className:"onboard__content"},i().createElement(i().Fragment,null,t.map((function(e,t){return c?e:i().createElement("div",{className:"onboard__content__block",key:"onboard--".concat((0,oa.Fs)())},i().createElement(l.Text,{align:"left",as:"p",size:"xs",line_height:"l"},e))})))))))}));function aa(e){return aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aa(e)}function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){sa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==aa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==aa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===aa(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ua={showProgress:!1,spotlightClicks:!1,disableBeacon:!0,disableOverlay:!0,disableCloseOnEsc:!0},da=[ca(ca({target:"#id-bot-builder",content:i().createElement(ia,{label:(0,M.localize)("Build from scratch"),content:[(0,M.localize)("Create your bot using our drag-and-drop blocks or click Quick Strategy to choose from the ready-to-use bot templates."),(0,M.localize)("We also provide a guide on the Tutorial tab to show you how you can build and execute a simple strategy.")],media:(0,p.getUrlBase)("/public/videos/dbot-onboarding-tour-step-1.mp4"),step_index:1})},ua),{},{disableOverlay:!1}),ca(ca({target:"#id-charts",content:i().createElement(ia,{label:(0,M.localize)("Monitor the market"),content:[(0,M.localize)("View the market price of your favourite assets.")],media:(0,p.getUrlBase)("/public/videos/dbot-onboarding-tour-step-2.mp4"),step_index:2})},ua),{},{disableOverlay:!1}),ca(ca({target:"#id-tutorials",content:i().createElement(ia,{label:(0,M.localize)("Learn more with our tutorials"),content:[(0,M.localize)("Explore the video guides and FAQs to build your bot in the tutorials tab.")],media:(0,p.getUrlBase)("/public/videos/dbot-onboarding-tour-step-3.mp4"),step_index:3})},ua),{},{disableOverlay:!1}),ca(ca({target:"#tab__dashboard__table__tiles",content:i().createElement(ia,{label:(0,M.localize)("Use these shortcuts"),content:[(0,M.localize)("You can also import or build your bot using any of these shortcuts.")],step_index:4}),placement:"right"},ua),{},{disableOverlay:!1}),ca(ca({target:".dc-drawer__container",content:i().createElement(ia,{label:(0,M.localize)("Check your bot’s performance"),content:[(0,M.localize)("See how your bot is doing in real-time.")],media:(0,p.getUrlBase)("/public/videos/dbot-onboarding-tour-step-5.mp4"),step_index:5}),placement:"left"},ua),{},{disableOverlay:!1}),ca(ca({target:".animation__wrapper",content:i().createElement(ia,{label:(0,M.localize)("Run your bot"),content:[i().createElement(M.Localize,{key:"run your bot",i18n_default_text:"Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.",components:[i().createElement("strong",{key:0})]})],media:(0,p.getUrlBase)("/public/videos/dbot-onboarding-tour-step-6.mp4"),step_index:6})},ua),{},{disableOverlay:!1}),ca(ca({target:"#id-tutorials",content:i().createElement(ia,{label:(0,M.localize)("Want to retake the tour?"),content:[i().createElement(l.Text,{key:"".concat(0,"-id-tutorials"),as:"p"},i().createElement(M.Localize,{i18n_default_text:"Head to the Tutorials tab to do so."}))],step_index:7,show_actions:!1,has_localize_component:!0}),locale:{last:(0,M.localize)("Got it, thanks!")}},ua),{},{hideBackButton:!0,disableOverlay:!1})],pa=[ca({target:".animation__wrapper",content:i().createElement((function(e){var t=e.show_label,n=void 0!==t&&t;return i().createElement("div",{className:"joyride-content"},n&&i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"Step 1 :"})),i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"First, set the <0>Trade parameters</0> block.",components:[i().createElement("strong",{key:0})]})),i().createElement("div",{className:"joyride-content__left joyride-content__sub-title"},i().createElement(M.Localize,{i18n_default_text:"<0>1. Trade parameters:<0>",components:[i().createElement("strong",{key:0})]})),i().createElement("div",{className:"joyride-content__left"},i().createElement("ul",null,i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"First, set <0>Market</0> to Derived > Continuous Indices > Volatility 100 (1s) Index.",components:[i().createElement("strong",{key:0})]})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"Then, set <0>Trade type</0> to Up/Down > Rise/Fall.",components:[i().createElement("strong",{key:0})]})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"For <0>Contract type,</0> set it to Both.",components:[i().createElement("strong",{key:0})]})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"For <0>Default candle interval,</0> set it to 1 minute",components:[i().createElement("strong",{key:0})]})))))}),{show_label:!0}),placement:"right"},ua),ca({target:".animation__wrapper",content:i().createElement((function(){return i().createElement("div",{className:"joyride-content"},i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"For <0>Trade options</0>, set it as below:",components:[i().createElement("strong",{key:0})]})),i().createElement("div",{className:"joyride-content__left"},i().createElement("ul",null,i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"<0>Duration</0>: Ticks 1",components:[i().createElement("strong",{key:0})]})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"<0>Stake: USD</0> 10 (min: 0.35 - max: 50000)",components:[i().createElement("strong",{key:0})]})))))}),null),placement:"bottom"},ua),ca({target:".animation__wrapper",content:i().createElement((function(e){var t=e.show_label,n=void 0!==t&&t;return i().createElement("div",{className:"joyride-content"},n&&i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"Step 2 :"})),i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"Then, set the <0>Purchase conditions</0> block.",components:[i().createElement("strong",{key:0})]})),i().createElement("div",{className:"joyride-content__left joyride-content__sub-title"},i().createElement(M.Localize,{i18n_default_text:"<0>2. Purchase conditions</0>:",components:[i().createElement("strong",{key:0})]})),i().createElement("div",{className:"joyride-content__left"},i().createElement("ul",null,i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"<0>Purchase</0>: Rise",components:[i().createElement("strong",{key:0})]})))))}),{show_label:!0}),placement:"right"},ua),ca({target:".animation__wrapper",content:i().createElement((function(e){var t=e.show_label,n=void 0!==t&&t;return i().createElement("div",{className:"joyride-content"},n&&i().createElement("div",{className:"joyride-content__left joyride-content__left__step-three"},i().createElement(M.Localize,{i18n_default_text:"Step 3 :"})),i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"The third block is <0>optional</0>. You may use this block if you want to sell your contract before it expires. For now, leave the block as it is. ",components:[i().createElement("strong",{key:0})]})))}),{show_label:!0}),placement:"right"},ua),ca({target:".animation__wrapper",content:i().createElement((function(e){var t=e.show_label,n=void 0!==t&&t;return i().createElement("div",{className:"joyride-content"},n&&i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"Step 4 :"})),i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"Next, go to <0>Utility tab</0> under the Blocks menu. Tap the drop-down arrow and hit <0>Loops</0>.",components:[i().createElement("strong",{key:0})]})),i().createElement("div",{className:"joyride-content__left"},i().createElement("ul",null,i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"Look for the <0>Repeat While/Until</0>, and click the + icon to add the block to the workspace area.",components:[i().createElement("strong",{key:0})]})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"Choose <0>until</0> as the repeat option.",components:[i().createElement("strong",{key:0})]}))),i().createElement("div",{className:"joyride-content__left joyride-content__with-icon"},i().createElement("div",{className:"joyride-content__with-icon__left"},i().createElement(l.Icon,{icon:"IcCheckmarkCircle",className:"db-contract-card__result-icon",color:"green"})),i().createElement("div",{className:"joyride-content__with-icon__right"},i().createElement(M.Localize,{i18n_default_text:"Pro tip: You can also click and drag out the desired block",components:[i().createElement("strong",{key:0})]})))),i().createElement("div",null,i().createElement("video",{autoPlay:!0,loop:!0,controls:!0,playsInline:!0,preload:"auto",disablePictureInPicture:!0,controlsList:"nodownload"},i().createElement("source",{src:(0,p.getUrlBase)("/public/videos/bot-builder-tour-step-4.mp4"),type:"video/mp4"}))))}),{show_label:!0}),placement:"right"},ua),ca({target:".animation__wrapper",content:i().createElement((function(e){var t=e.show_label,n=void 0!==t&&t;return i().createElement("div",{className:"joyride-content"},n&&i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"Step 5 :"})),i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"Now, tap the <0>Analysis</0> drop-down arrow and hit <0>Contract</0>.",components:[i().createElement("strong",{key:0})]})),i().createElement("div",{className:"joyride-content__left"},i().createElement("ul",null,i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"Go to the <0>Last trade result</0> block and click + icon to add the <0>Result is Win</0> block to the workspace.",components:[i().createElement("strong",{key:0})]})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"Then, drag the <0>Result is win</0> into the empty slot next to <0>repeat until</0> block.",components:[i().createElement("strong",{key:0})]})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"Now, go to the <0>Restart trading conditions</0> block.",components:[i().createElement("strong",{key:0})]})),i().createElement("li",null,i().createElement(M.Localize,{i18n_default_text:"Drag the <0>Trade again</0> block and add it into the <0>do</0> part of the <0>Repeat until</0> block.",components:[i().createElement("strong",{key:0})]})))),i().createElement("div",null,i().createElement("video",{autoPlay:!0,loop:!0,controls:!0,playsInline:!0,preload:"auto",disablePictureInPicture:!0,controlsList:"nodownload"},i().createElement("source",{src:(0,p.getUrlBase)("/public/videos/bot-builder-tour-step-5.mp4"),type:"video/mp4"}))))}),{show_label:!0}),placement:"right"},ua),ca({target:".animation__wrapper",content:i().createElement((function(e){var t=e.show_label,n=void 0!==t&&t;return i().createElement("div",{className:"joyride-content"},n&&i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"Step 6 :"})),i().createElement("div",{className:"joyride-content__left"},i().createElement(M.Localize,{i18n_default_text:"Finally, drag and add the whole <0>Repeat</0> block to the <0>Restart trading conditions</0> block.",components:[i().createElement("strong",{key:0})]})))}),{show_label:!0}),locale:{last:(0,M.localize)("Next")}},ua)],fa=[{header:(0,M.localize)("Step 1"),content:[i().createElement(M.Localize,{key:"step-1",i18n_default_text:"First, click the Import icon on the tool bar."})],tour_step_key:1},{header:(0,M.localize)("Step 2"),content:[i().createElement(M.Localize,{key:"step-2",i18n_default_text:"Next, import your bot directly from your mobile device or from Google Drive."})],tour_step_key:2},{header:(0,M.localize)("Step 3"),content:[i().createElement(M.Localize,{key:"step-3",i18n_default_text:"Once imported, you will see a preview of the bot on the workspace. Click run to start trading with this bot."})],tour_step_key:3}],ma=[{header:(0,M.localize)("Get started on Deriv Bot"),content:[i().createElement(M.Localize,{key:"get-started-on-deriv-bot",i18n_default_text:"Hi! Hit <0>Start</0> for a quick tour.",components:[i().createElement("strong",{key:0})]})],tour_step_key:1},{header:(0,M.localize)("Import or choose your bot"),content:[i().createElement(M.Localize,{key:"import-or-choose-your-bot",i18n_default_text:"Import your bot or tap Quick Strategies to choose from the ready-to-use bot templates."})],media:(0,p.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-1.mp4"),tour_step_key:2},{header:(0,M.localize)("Monitor the market"),content:[i().createElement(M.Localize,{key:"monitor-the-market",i18n_default_text:"View the market price of your favourite assets."})],media:(0,p.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-2.mp4"),tour_step_key:3},{header:(0,M.localize)("Learn more with our tutorials"),content:[i().createElement(M.Localize,{key:"learn-more-with-our-tutorials",i18n_default_text:"Explore the video guides and FAQs to build your bot in the tutorials tab."})],media:(0,p.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-3.mp4"),tour_step_key:4},{header:(0,M.localize)("Use these shortcuts"),img:ie("dbot-mobile-onboarding-step-4.png"),content:[i().createElement(M.Localize,{key:"use-these-shortcuts",i18n_default_text:"You can also import or build your bot using any of these shortcuts."})],tour_step_key:5},{header:(0,M.localize)("Check your bot’s performance"),media:(0,p.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-5.mp4"),content:[i().createElement(M.Localize,{key:"check-your-bots-performance",i18n_default_text:"See how your bot is doing in real-time."})],tour_step_key:6},{header:(0,M.localize)("Run your bot"),media:(0,p.getUrlBase)("/public/videos/dbot-mobile-onboarding-step-6.mp4"),content:[i().createElement(M.Localize,{key:"run-your-bot",i18n_default_text:"Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.",components:[i().createElement("strong",{key:0})]})],tour_step_key:7},{header:(0,M.localize)("Want to retake the tour?"),img:ie("dbot-mobile-onboarding-step-7.png"),content:[i().createElement(M.Localize,{key:"want-to-retake-the-tour",i18n_default_text:"Head to the Tutorials tab to do so."})],tour_step_key:8}],ha=i().createElement(M.Localize,{key:"onboarding-tour-header",i18n_default_text:"Get started on Deriv Bot"});const ya=(0,c.Pi)((function(){var e=D().ui,t=uo().dashboard,n=t.active_tab,r=t.is_tour_dialog_visible,o=t.setTourDialogVisibility,a=t.setActiveTour,c=t.setShowMobileTourDialog,s=e.is_mobile,u=0===n?"onboard_tour_token":"bot_builder_token",d=n===G.DASHBOARD,p=function(e){return e?i().createElement(M.Localize,{key:"tour-dialog-info-mobile",i18n_default_text:"Here’s a quick guide on how to use Deriv Bot on the go."}):i().createElement(M.Localize,{key:"tour-dialog-info-desktop",i18n_default_text:"Learn how to build your bot from scratch using a simple strategy."})}(s),f=function(e){return e?i().createElement(M.Localize,{key:"tour-dialog-action-mobile",i18n_default_text:"You can import a bot from your mobile device or from Google drive, see a preview in the bot builder, and start trading by running the bot."}):i().createElement(M.Localize,{key:"tour-dialog-action-desktop",i18n_default_text:"Hit the <0>Start</0> button to begin and follow the tutorial."})}(s),m=s?"xs":"s",h=s?"xxs":"xs",y=0===n?ha:function(e){return e?i().createElement(M.Localize,{key:"tour_header-mobile",i18n_default_text:"Bot Builder guide"}):i().createElement(M.Localize,{key:"tour_header-desktop",i18n_default_text:"Let's build a Bot!"})}(s);return i().createElement("div",null,i().createElement(l.Dialog,{is_visible:r,cancel_button_text:(0,M.localize)("Skip"),onCancel:function(){return s&&c(!1),o(!1),a(""),void fe((new Date).getTime(),u)},confirm_button_text:(0,M.localize)("Start"),onConfirm:function(){a(me[n]),s&&c(!1),o(!1),fe((new Date).getTime(),u)},is_mobile_full_width:!0,className:"dc-dialog tour-dialog",has_close_icon:!1},i().createElement("div",{className:"dc-dialog__content__header"},i().createElement(l.Text,{weight:"bold",color:"prominent",size:m},y)),i().createElement("div",{className:"dc-dialog__content__description"},i().createElement(l.Text,{size:h,color:"prominent"},i().createElement(i().Fragment,null,d?i().createElement(M.Localize,{key:0,i18n_default_text:"Hi! Hit <0>Start</0> for a quick tour.",components:[i().createElement("strong",{key:0})]}):i().createElement(i().Fragment,null,i().createElement("div",{className:"dc-dialog__content__description__text"},p),i().createElement("div",{className:"dc-dialog__content__description__text"},f),i().createElement("div",{className:"dc-dialog__content__description__text"},i().createElement(M.Localize,{key:0,i18n_default_text:"Note: You can also find this tutorial in the <0>Tutorials</0> tab.",components:[i().createElement("strong",{key:0})]}))))))))}));function va(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ga=function(){var e=va((0,o.useState)(!1),2),t=e[0],n=e[1],r=va((0,o.useState)(!1),2),i=r[0],a=r[1];return{is_finished:t,handleJoyrideCallback:function(e){var t=e.action;"finished"===e.status?n(!0):"close"!==t&&"skip"!==t||a(!0)},setIsFinished:n,is_close_tour:i,setIsCloseTour:a}};const ba=(0,c.Pi)((function(){var e=ga(),t=e.is_close_tour,n=e.is_finished,r=e.handleJoyrideCallback,o=e.setIsCloseTour,a=uo().dashboard,l=a.active_tab,c=a.active_tour,s=a.setActiveTour,u=a.setTourDialogVisibility;return K("bot_builder_token")||1!==l||u(!0),i().useEffect((function(){n?(u(!0),s("")):t&&(s(""),o(!1))}),[t,n,s,o,u]),i().createElement(i().Fragment,null,n?i().createElement(ra,null):i().createElement(ya,null),c&&i().createElement(na,{handleCallback:r,steps:pa,styles:{options:{arrowColor:"transparent",backgroundColor:"var(--general-main-2)",primaryColor:"var(--brand-red-coral)",textColor:"var(--text-general)"}}}))}));var ka=["content_data","expanded","test_id"];function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ea.apply(this,arguments)}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Sa=function(e){var t,n=e.content_data,r=e.expanded,o=void 0!==r&&r,a=e.test_id,c=void 0===a?"dbot-acc-id":a,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ka),u=(2,function(e){if(Array.isArray(e))return e}(t=i().useState(o))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return wa(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wa(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],p=u[1];if(!n)return null;var f=n.content,m=n.header;return i().createElement("div",Ea({className:"dbot-accordion"},s),i().createElement("div",null,i().createElement("div",{className:"dbot-accordion__navbar","data-testid":c,onClick:function(){return p(!d)}},i().createElement("div",{className:"dbot-accordion__header"},i().createElement(l.Text,{as:"span",size:"xs",weight:"bold"},(0,M.localize)(m))),i().createElement("div",{className:"dbot-accordion__icon"},i().createElement(l.Icon,{icon:d?"IcChevronDownBold":"IcChevronUpBold"}))),i().createElement("div",{className:z()("dbot-accordion__content",{"dbot-accordion__content--open":d}),"data-testid":"accordion-content"},i().createElement(l.Text,{as:"span",line_height:"s",size:"xxs"},f))))};var Ta=["label","type"];function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ba.apply(this,arguments)}const Oa=function(e){var t=e.label,n=e.type,r=void 0===n?"default":n,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ta);return t?i().createElement("button",Ba({className:r},o),i().createElement(l.Text,{color:"prominent",align:"center",weight:"bold",as:"span",line_height:"s",size:"xs"},t)):null};function xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Aa=(0,c.Pi)((function(){var e,t=uo(),n=t.dashboard,r=t.load_modal,o=t.quick_strategy,a=r.toggleTourLoadModal,c=n.onTourEnd,s=n.setTourActiveStep,u=n.active_tour,d=n.show_mobile_tour_dialog,p=n.active_tab,f=n.setShowMobileTourDialog,m=n.setTourDialogVisibility,h=o.is_open,y=(2,function(e){if(Array.isArray(e))return e}(e=i().useState(1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return xa(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xa(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=y[0],_=y[1],g=fa.find((function(e){return e.tour_step_key===v})),b=3===v?"finish-bot-builder-tour":"next-bot-builder-tour";i().useEffect((function(){var e,t,n;s(v),!d&&(e=u,t=v,n=document.querySelector(".toolbar__group-btn svg:nth-child(2)"),e&&1===t?null==n||n.classList.add("dbot-tour-blink"):null==n||n.classList.remove("dbot-tour-blink")),a(2===v),K("bot_builder_token")||1!==p||(m(!h),f(!0))}),[v,d]);var k=3===v?(0,M.localize)("Finish"):(0,M.localize)("Next"),E="onboarding"===u;return i().createElement(i().Fragment,null,d&&i().createElement(ya,null),u&&!d&&i().createElement("div",{"data-testid":"botbuilder-tour-mobile",className:"dbot-slider dbot-slider__bot-builder-tour"},g&&i().createElement(Sa,{"data-testid":"bot-builder-acc",content_data:g,expanded:!0}),i().createElement("div",{className:"dbot-slider__status"},i().createElement("div",{className:"dbot-slider__progress-bar"},i().createElement(l.ProgressBarTracker,{step:v,steps_list:fa.map((function(e){return e.tour_step_key.toString()})),onStepChange:_})),i().createElement("div",{className:"dbot-slider__button-group"},1!==v&&i().createElement(Oa,{onClick:function(){_(v-1)},label:(0,M.localize)("Previous"),"data-testid":"prev-bot-builder-tour"}),i().createElement(Oa,{type:"danger",onClick:function(){_(v+1),c(v,E)},label:k,"data-testid":b})))))})),Ca=(0,Yi.observer)((function(e){var t=e.is_mobile;return i().createElement(i().Fragment,null,t?i().createElement(Aa,null):i().createElement(ba,null),";")}));var Ia=n(13980),La=n.n(Ia);const Na=(0,c.Pi)((function(e){var t=e.block_node,n=e.should_hide_display_name,r=uo().flyout.initBlockWorkspace,o=i().useRef();return i().useEffect((function(){r(o,t)}),[]),i().createElement("div",{ref:function(e){return o=e},className:z()({"flyout__block-workspace--center":n,"flyout__block-workspace--top":!n}),"data-testid":"flyout-block-workspace"})}));var Ra=function(e){var t=e.onInfoClick,n=e.block_node,r=e.is_active,o=e.should_hide_display_name,a=n.getAttribute("type"),c=Blockly.Blocks[a].meta(),s="variables_get"===a,u="variables_set"===a,d=c.display_name,p=c.description,f=function(){return i().createElement("div",{className:"flyout__item-buttons"},i().createElement(l.Button,{id:"db-flyout__add--".concat(a),className:"flyout__button-add flyout__button-add--hide",has_effect:!0,is_plus:!0,onClick:function(){return Blockly.derivWorkspace.addBlockNode(n)},type:"button"}))};return i().createElement(i().Fragment,null,u&&i().createElement("div",{className:"flyout__hr"}),i().createElement("div",{className:z()("flyout__item",{"flyout__item--active":r})},!o&&i().createElement(i().Fragment,null,i().createElement("div",{className:"flyout__item-header"},i().createElement(l.Text,{size:s?"xs":"xsm",line_height:s?void 0:"xl",weight:s?void 0:"bold"},d),!s&&i().createElement(f,null)),i().createElement("div",{className:"flyout__item-description"},p,t&&i().createElement("a",{id:d.replace(/\s/gi,"-"),className:"flyout__item-info",onClick:t},i().createElement(M.Localize,{i18n_default_text:"Learn more"})))),i().createElement("div",{className:"flyout__block-workspace__header"},i().createElement(Na,{block_node:n,should_hide_display_name:!0}),s&&i().createElement(f,null))))};Ra.propTypes={block_nodes:Ia.PropTypes.array,onInfoClick:Ia.PropTypes.func};const Da=Ra,Pa=function(e){var t=e.width,n=e.url,r={width:t};return i().createElement("div",{className:"flyout__item","data-testid":"dt_flyout_image"},i().createElement("img",{src:n,className:"flyout__image",style:r}))},za=function(e){var t=e.text;return i().createElement(l.Text,{as:"p",size:"xs",styles:{lineHeight:"1.3em"}},t)},ja=function(e){return i().createElement("div",{className:"flyout__item","data-testid":"dt_flyout_video_container"},i().createElement("iframe",{"data-testid":"dt_flyout_video",className:"flyout__video",src:e.url,frameBorder:"0",allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"100%"}))},Ma=(0,c.Pi)((function(){var e=uo(),t=e.flyout,r=e.flyout_help,o=r.block_node,a=r.block_type,c=r.examples,s=r.help_string,u=r.onBackClick,d=r.onSequenceClick,p=r.should_next_disable,f=r.should_previous_disable,m=r.title,h=t.is_search_flyout,y=s&&Ge(n.p)[a],v=0;return i().createElement(i().Fragment,null,i().createElement("div",{className:"flyout__help-header"},i().createElement("button",{className:"dc-btn flyout__button-back",onClick:u},i().createElement(l.Icon,{icon:"IcArrowLeft"})),i().createElement(l.Text,{weight:"bold",className:"flyout__help-title"},m),i().createElement("div",{className:"flyout__item-buttons"},i().createElement(l.Button,{className:"flyout__button-add",has_effect:!0,id:"db-flyout-help__add--".concat(a),onClick:function(){return Blockly.derivWorkspace.addBlockNode(o)},primary:!0,text:(0,M.localize)("Add"),type:"button"}))),i().createElement("div",{className:"flyout__help-content"},y&&y.map((function(e,t){var n=e.type,r=e.width,l=e.url,u=e.example_id,d=s.text,p=c.find((function(e){return e.id===u}));switch(n){case De:return v<d.length?i().createElement(za,{key:"".concat(a,"_").concat(t),text:d[v++]}):null;case"video":return i().createElement(ja,{key:"".concat(a,"_").concat(t),url:l});case Pe:return i().createElement(Pa,{key:"".concat(a,"_").concat(t),width:r,url:l});case ze:return i().createElement(Na,{key:"".concat(a,"_").concat(t),block_node:o});case je:return p?i().createElement(Na,{key:"".concat(a,"_").concat(t),block_node:p.childNodes[0]}):null;default:return null}}))),!h&&!(f&&p)&&i().createElement("div",{className:"flyout__help-footer"},i().createElement(l.Button,{className:"flyout__button-previous",secondary:!0,onClick:function(){return d(!1)},text:(0,M.localize)("Previous"),type:"button",is_disabled:f,renderText:function(e){return f&&i().createElement(l.Text,{size:"xs",weight:"bold",align:"center",color:"disabled"},e)}}),i().createElement(l.Button,{className:"flyout__button-next",secondary:!0,onClick:function(){return d(!0)},text:(0,M.localize)("Next"),type:"button",is_disabled:p,renderText:function(e){return p&&i().createElement(l.Text,{size:"xs",weight:"bold",align:"center",color:"disabled"},e)}})))}));var Fa=function(e){var t=e.search_term,n=e.total_result;return i().createElement("div",{className:"flyout__search-header"},i().createElement(l.Text,{weight:"bold",className:"flyout__search-header-text"},(0,M.localize)('Results for "{{ search_term }}"',{search_term:t,interpolation:{escapeValue:!1}})),i().createElement(l.Text,{weight:"bold",color:"profit-success",className:"flyout__search-header-text"},"".concat(n," ").concat(n>1?(0,M.localize)("results"):(0,M.localize)("result"))))},Ua=function(e){var t=i().useRef(),r=e.flyout_content,o=e.active_helper,a=e.setHelpContent,c=e.initFlyoutHelp,s=e.is_empty,u=e.is_search_flyout,d=e.selected_category,f=e.first_get_variable_block_index;return i().createElement("div",{ref:t,className:z()("flyout__content",{"flyout__normal-content":!u})},i().createElement(l.ThemedScrollbars,{className:"flyout__content-scrollbar"},"indicators"===(null==d?void 0:d.getAttribute("id"))&&i().createElement("div",{className:"flyout__content-disclaimer"},i().createElement("span",{className:"flyout__content-disclaimer-icon"},i().createElement(l.Icon,{icon:"IcBlackWarning",custom_color:"#000000",className:"flyout__content-disclaimer__warning-icon"})),i().createElement("span",{className:"flyout__content-disclaimer-text"},(0,M.localize)("Indicators on the chart tab are for indicative purposes only and may vary slightly from the ones on the {{platform_name_dbot}} workspace.",{platform_name_dbot:(0,p.getPlatformSettings)("dbot").name}))),s?i().createElement("div",{className:"flyout__search-empty"},i().createElement(l.Text,{as:"h2",weight:"bold",line_height:"xxs"},(0,M.localize)("No results found"))):r.map((function(e,t){switch(e.tagName.toUpperCase()){case Blockly.Xml.NODE_BLOCK:var r=e.getAttribute("type");return i().createElement(Da,{key:"".concat(e.getAttribute("type")).concat(Blockly.utils.genUid()),id:"flyout__item-workspace--".concat(t),block_node:e,should_hide_display_name:"variables_get"===r&&t!==f,onInfoClick:Ge(n.p)[r]&&(u?function(){return a(e)}:function(){return c(e,r)}),is_active:o===r});case Blockly.Xml.NODE_LABEL:return i().createElement("div",{key:"".concat(e.getAttribute("text")).concat(t),className:"flyout__item-label-bold"},e.getAttribute("text"));case Blockly.Xml.NODE_INPUT:return i().createElement(l.Input,{key:"".concat(e.getAttribute("name")).concat(t),className:"".concat(e.getAttribute("className")),type:"".concat(e.getAttribute("type")),name:"".concat(e.getAttribute("name")),placeholder:"".concat(e.getAttribute("placeholder")),autoComplete:"off"});case Blockly.Xml.NODE_BUTTON:var s=e.getAttribute("callbackKey"),d=e.getAttribute("id");return i().createElement("button",{id:d,key:"".concat(s).concat(t),className:z()("dc-btn","dc-btn-effect","dc-btn--primary","".concat(e.getAttribute("className"))),onClick:function(e){var t=Blockly.derivWorkspace,n=t.getButtonCallback(s)||function(){};e.targetWorkspace_=t,e.getTargetWorkspace=function(){return e.targetWorkspace_},n(e)}},e.getAttribute("text"));default:return null}}))))},Va=(0,c.Pi)((function(){var e=uo(),t=e.flyout,n=e.flyout_help,r=D().gtm,o=n.active_helper,a=n.initFlyoutHelp,l=n.setHelpContent,c=t.flyout_content,s=t.flyout_width,u=t.is_help_content,d=t.is_search_flyout,p=t.is_visible,f=t.onMount,m=t.onUnmount,h=t.search_term,y=t.selected_category,v=t.first_get_variable_block_index,_=r.pushDataLayer;i().useEffect((function(){return f(),function(){return m()}}),[f,m]),p&&d&&_({event:"dbot_search_results",value:!0});var g=Object.keys(c).length,b=0===g;return p&&i().createElement("div",{id:"gtm-search-results",className:z()("flyout",{flyout__search:d,flyout__help:u,flyout__normal:!u&&!d}),style:{width:"".concat(s,"px")}},d&&!u&&i().createElement(Fa,{search_term:h,total_result:g}),u?i().createElement(Ma,null):i().createElement(Ua,{is_empty:b,flyout_content:c,active_helper:o,setHelpContent:l,initFlyoutHelp:a,is_search_flyout:d,selected_category:y,first_get_variable_block_index:v}))}));const Ga=Va,Ha=function(e){var t=e.is_running,n=e.is_multiplier,r=e.is_contract_dialog_open,o=e.is_stop_bot_dialog_open,a=e.closeMultiplierContract,c=e.onOkButtonClick,s=e.toggleStopBotDialog,u=t&&n?(0,M.localize)("Keep my contract"):(0,M.localize)("Stop my bot"),d=t&&n?(0,M.localize)("Close my contract"):(0,M.localize)("Back"),p=t&&n?(0,M.localize)("Keep your current contract?"):(0,M.localize)("Stop your current bot?"),f=t&&n?a:s;return i().createElement(i().Fragment,null,i().createElement(l.Dialog,{portal_element_id:"modal_root",title:p,is_visible:t?o:r,confirm_button_text:u,onConfirm:c,cancel_button_text:d,onCancel:f,is_mobile_full_width:!1,className:"toolbar__dialog",has_close_icon:!0},t&&n?i().createElement(i().Fragment,null,i().createElement(l.Text,{as:"p",line_height:"s",size:"xs",styles:{paddingBottom:"2rem",paddingTop:"1rem"}},(0,M.localize)("Close your contract now or keep it running. If you decide to keep it running, you can check and close it later on the "),i().createElement(l.Text,{as:"span",line_height:"s",size:"xs"},i().createElement("strong",null,(0,M.localize)("Reports"))),(0,M.localize)(" page.")),i().createElement(l.Text,{as:"p",line_height:"s",size:"xs"},(0,M.localize)("The Quick Strategy you just created will be loaded to the workspace."))):i().createElement(i().Fragment,null,i().createElement(l.Text,{as:"p",line_height:"s",size:"xs",styles:{paddingBottom:"2rem",paddingTop:"1rem"}},(0,M.localize)("Stopping the current bot will load the Quick Strategy you just created to the workspace.")),i().createElement(l.Text,{as:"p",line_height:"s",size:"xs"},(0,M.localize)(" Any open contracts can be viewed on the "),i().createElement(l.Text,{as:"span",line_height:"s",size:"xs"},i().createElement("strong",null,(0,M.localize)("Reports"))),(0,M.localize)(" page.")))))};var Ja=(0,c.Pi)((function(){var e=uo(),t=e.run_panel,n=e.quick_strategy,r=e.summary_card,o=n.is_contract_dialog_open,a=n.is_stop_bot_dialog_open,l=n.toggleStopBotDialog,c=t.is_running,s=t.closeMultiplierContract,u=t.stopMyBot,d=t.is_dialog_open,p=r.is_multiplier;return i().createElement(Ha,{is_running:c,onOkButtonClick:u,is_contract_dialog_open:o,is_stop_bot_dialog_open:a,is_multiplier:p,closeMultiplierContract:s,is_dialog_open:d,toggleStopBotDialog:l})}));const Wa=Ja,Ya=function(e){var t=e.popover_message,n=e.button_id,r=e.button_classname,o=e.buttonOnClick,a=e.icon,c=e.button_text;return i().createElement(l.Popover,{alignment:"bottom",message:t,should_disable_pointer_events:!0},i().createElement(l.Button,{id:n,className:r,has_effect:!0,onClick:o,icon:a,green:!0},c))};var qa=Object.freeze({QUICK_STRATEGY:99999,TOOLBAR:100,TRANSACTION:10,SUMMARY_TOOLTIPS:5,RUN_PANEL:8});function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ka.apply(this,arguments)}const Xa=function(e){var t=e.popover_message,n=e.icon,r=e.icon_id,o=e.icon_color,a=e.action,c=e.data_testid,s=function(){return i().createElement(l.Icon,Ka({icon:n,id:r,className:"toolbar__icon",onClick:a},o&&{color:o},{data_testid:c}))};return i().createElement(i().Fragment,null,i().createElement(l.MobileWrapper,null,s()),i().createElement(l.DesktopWrapper,null,i().createElement(l.Popover,{alignment:"bottom",message:t,zIndex:String(qa.TOOLBAR),should_disable_pointer_events:!0},s())))},Za=(0,c.Pi)((function(e){var t=e.has_redo_stack,n=e.has_undo_stack,r=e.onResetClick,o=e.onSortClick,a=e.onUndoClick,c=e.onZoomInOutClick,s=e.toggleLoadModal,u=e.toggleSaveModal,d=uo().dashboard,p=d.setPreviewOnPopup,f=d.setChartModalVisibility;return i().createElement("div",{className:"toolbar__group toolbar__group-btn","data-testid":"dt_toolbar_group_btn"},i().createElement(Xa,{popover_message:(0,M.localize)("Reset"),icon:"IcReset",icon_id:"db-toolbar__reset-button",data_testid:"dt_toolbar_reset_button",action:r}),i().createElement(Xa,{popover_message:(0,M.localize)("Import"),icon:"IcFolderOpen",icon_id:"db-toolbar__import-button",data_testid:"dt_toolbar_import_button",action:function(){p(!0),s()}}),i().createElement(Xa,{popover_message:(0,M.localize)("Save"),icon:"IcSave",icon_id:"db-toolbar__save-button",data_testid:"dt_toolbar_save_button",action:u}),i().createElement(Xa,{popover_message:(0,M.localize)("Sort blocks"),icon:"IcSort",icon_id:"db-toolbar__sort-button",data_testid:"dt_toolbar_sort_button",action:o}),i().createElement(l.DesktopWrapper,null,i().createElement(Xa,{popover_message:(0,M.localize)("Charts"),icon:"IcChartsTabDbot",icon_id:"db-toolbar__charts-button",action:function(){return f()}})),i().createElement("div",{className:"vertical-divider"}),i().createElement(Xa,{popover_message:(0,M.localize)("Undo"),icon:"IcUndo",icon_id:"db-toolbar__undo-button",data_testid:"dt_toolbar_undo_button",icon_color:n?void 0:"disabled",action:function(){return a(!1)}}),i().createElement(Xa,{popover_message:(0,M.localize)("Redo"),icon:"IcRedo",icon_id:"db-toolbar__redo-button",data_testid:"dt_toolbar_redo_button",icon_color:t?void 0:"disabled",action:function(){return a(!0)}}),i().createElement("div",{className:"vertical-divider"}),i().createElement(Xa,{popover_message:(0,M.localize)("Zoom in"),icon:"IcZoomIn",icon_id:"db-toolbar__zoom-in-button",data_testid:"dt_toolbar_zoom_in_button",action:function(){return c(!0)}}),i().createElement(Xa,{popover_message:(0,M.localize)("Zoom out"),icon:"IcZoomOut",icon_id:"db-toolbar__zoom-out",data_testid:"dt_toolbar_zoom_out_button",action:function(){return c(!1)}}))}));var Qa=(0,c.Pi)((function(){var e=uo(),t=e.run_panel,n=e.save_modal,r=e.load_modal,o=e.toolbar,a=e.quick_strategy,c=D().ui.is_mobile,s=o.has_redo_stack,u=o.has_undo_stack,d=o.is_dialog_open,p=o.closeResetDialog,f=o.onResetOkButtonClick,m=o.onResetClick,h=o.onSortClick,y=o.onUndoClick,v=o.onZoomInOutClick,_=n.toggleSaveModal,g=r.toggleLoadModal,b=t.is_running,k=a.setFormVisibility,E=b?(0,M.localize)("Yes"):(0,M.localize)("OK"),w=b?(0,M.localize)("No"):(0,M.localize)("Cancel");return i().createElement(i().Fragment,null,i().createElement("div",{className:"toolbar dashboard__toolbar","data-testid":"dashboard__toolbar"},i().createElement("div",{className:"toolbar__section"},c&&i().createElement(Ya,{popover_message:(0,M.localize)("Click here to start building your Deriv Bot."),button_id:"db-toolbar__get-started-button",button_classname:"toolbar__btn toolbar__btn--icon toolbar__btn--start",buttonOnClick:function(){k(!0)},button_text:(0,M.localize)("Quick strategy")}),i().createElement(Za,{has_redo_stack:s,has_undo_stack:u,onResetClick:m,onSortClick:h,onUndoClick:y,onZoomInOutClick:v,toggleLoadModal:g,toggleSaveModal:_}))),i().createElement(l.Dialog,{portal_element_id:"modal_root",title:(0,M.localize)("Are you sure?"),is_visible:d,confirm_button_text:E,onConfirm:f,cancel_button_text:w,onCancel:p,is_mobile_full_width:!1,className:"toolbar__dialog",has_close_icon:!0},b?i().createElement(M.Localize,{i18n_default_text:"The workspace will be reset to the default strategy and any unsaved changes will be lost. <0>Note: This will not affect your running bot.</0>",components:[i().createElement("div",{key:0,className:"toolbar__dialog-text--second","data-testid":"toolbar__dialog-text--second"})]}):i().createElement(M.Localize,{i18n_default_text:"Any unsaved changes will be lost."})))}));const $a=Qa,el=(0,c.Pi)((function(e){var t=e.search,n=e.is_search_loading,r=e.onClick;return i().useEffect((function(){ti()((function(){t&&!n&&j.Analytics.trackEvent("ce_bot_builder_form",{search_string:t,action:"search"})}),2e3)()}),[n]),t?n?i().createElement("div",{className:"loader","data-testid":"loader"}):i().createElement(l.Icon,{icon:"IcCloseCircle",onClick:r,color:"secondary"}):i().createElement(l.Icon,{icon:"IcSearch"})}));function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tl.apply(this,arguments)}const nl=function(e){var t=e.is_search_loading,n=e.onSearch,r=e.onSearchBlur,o=e.onSearchClear,a=e.onSearchKeyUp;return i().createElement("div",{className:"db-toolbox__search"},i().createElement(Eo.Formik,{initialValues:{search:""},onSubmit:n},(function(e){var n=e.submitForm,c=e.values.search,s=e.setFieldValue;return i().createElement(Eo.Form,null,i().createElement(Eo.Field,{name:"search"},(function(e){var u=e.field;return i().createElement(l.Input,tl({},u,{className:"db-toolbox__search-field",type:"text",name:"search",placeholder:(0,M.localize)("Search"),onKeyUp:function(){return a(n)},onFocus:n,onBlur:r,leading_icon:i().createElement(el,{search:c,is_search_loading:t,onClick:function(){return o(s)}})}))})))})))};function rl(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ol.apply(this,arguments)}var il=function(e){var t=ol({},(rl(e),e));return i().createElement("block",t)},al=function(e){var t=ol({},(rl(e),e));return i().createElement("category",t)},ll=function(e){var t=ol({},(rl(e),e));return i().createElement("example",t)},cl=function(e){var t=ol({},(rl(e),e));return i().createElement("field",t)},sl=function(e){var t=ol({},(rl(e),e));return i().createElement("mutation",t)},ul=function(e){var t=ol({},(rl(e),e));return i().createElement("next",t)},dl=function(e){var t=ol({},(rl(e),e));return i().createElement("shadow",t)},pl=function(e){var t=ol({},(rl(e),e));return i().createElement("statement",t)},fl=function(e){var t=ol({},(rl(e),e));return i().createElement("value",t)},ml=n(48090).renderToStaticMarkup(i().createElement((function(e){var t=ol({},(rl(e),e));return i().createElement("xml",t)}),{xmlns:"http://www.w3.org/1999/xhtml",id:"toolbox"},i().createElement(al,{id:"trade_parameters",name:(0,M.localize)("Trade parameters")},i().createElement(il,{type:"trade_definition"},i().createElement(pl,{name:"TRADE_OPTIONS"},i().createElement(il,{type:"trade_definition_market",deletable:"false",movable:"false"},i().createElement(cl,{name:"MARKET_LIST"}),i().createElement(cl,{name:"SUBMARKET_LIST"}),i().createElement(cl,{name:"SYMBOL_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"trade_definition_tradetype",deletable:"false",movable:"false"},i().createElement(cl,{name:"TRADETYPECAT_LIST"}),i().createElement(cl,{name:"TRADETYPE_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"trade_definition_contracttype",deletable:"false",movable:"false"},i().createElement(cl,{name:"TYPE_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"trade_definition_candleinterval",deletable:"false",movable:"false"},i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"60"),i().createElement(ul,null,i().createElement(il,{type:"trade_definition_restartbuysell",deletable:"false",movable:"false"},i().createElement(cl,{name:"TIME_MACHINE_ENABLED"},"FALSE"),i().createElement(ul,null,i().createElement(il,{type:"trade_definition_restartonerror",deletable:"false",movable:"false"},i().createElement(cl,{name:"RESTARTONERROR"},"TRUE")))))))))))))),i().createElement(il,{type:"trade_definition_tradeoptions"},i().createElement(sl,{has_first_barrier:"false",has_second_barrier:"false",has_prediction:"false"}),i().createElement(cl,{name:"DURATIONTYPE_LIST"}),i().createElement(cl,{name:"CURRENCY_LIST"},"USD"),i().createElement(fl,{name:"DURATION"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))),i().createElement(fl,{name:"AMOUNT"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))),i().createElement(cl,{name:"AMOUNT_LIMITS"})),i().createElement(il,{type:"trade_definition_multiplier"},i().createElement(cl,{name:"MULTIPLIERTYPE_LIST"}),i().createElement(cl,{name:"CURRENCY_LIST"},"USD"),i().createElement(fl,{name:"AMOUNT"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))),i().createElement(cl,{name:"AMOUNT_LIMITS"})),i().createElement(il,{type:"multiplier_take_profit"},i().createElement(fl,{name:"AMOUNT"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"0")))),i().createElement(il,{type:"multiplier_stop_loss"},i().createElement(fl,{name:"AMOUNT"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"0"))))),i().createElement(al,{id:"purchase_conditions",name:(0,M.localize)("Purchase conditions")},i().createElement(il,{type:"before_purchase"}),i().createElement(il,{type:"purchase"})),i().createElement(al,{id:"sell_conditions",name:(0,M.localize)("Sell conditions (optional)")},i().createElement(il,{type:"during_purchase"}),i().createElement(il,{type:"sell_at_market"})),i().createElement(al,{id:"trade_results",name:(0,M.localize)("Restart trading conditions")},i().createElement(il,{type:"after_purchase"}),i().createElement(il,{type:"trade_again"})),i().createElement(al,{id:"analysis",name:(0,M.localize)("Analysis")},i().createElement(al,{id:"indicators",name:(0,M.localize)("Indicators")},i().createElement(il,{type:"sma_statement"},i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10")))))))),i().createElement(il,{type:"smaa_statement"},i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10")))))))),i().createElement(il,{type:"bb_statement"},i().createElement(cl,{name:"BBRESULT_LIST"},"0"),i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10"))),i().createElement(ul,null,i().createElement(il,{type:"std_dev_multiplier_up",deletable:"false",movable:"false"},i().createElement(fl,{name:"UPMULTIPLIER"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"5"))),i().createElement(ul,null,i().createElement(il,{type:"std_dev_multiplier_down"},i().createElement(fl,{name:"DOWNMULTIPLIER"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"5")))))))))))),i().createElement(il,{type:"bba_statement"},i().createElement(cl,{name:"BBRESULT_LIST"},"0"),i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10"))),i().createElement(ul,null,i().createElement(il,{type:"std_dev_multiplier_up",deletable:"false",movable:"false"},i().createElement(fl,{name:"UPMULTIPLIER"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"5"))),i().createElement(ul,null,i().createElement(il,{type:"std_dev_multiplier_down"},i().createElement(fl,{name:"DOWNMULTIPLIER"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"5")))))))))))),i().createElement(il,{type:"ema_statement"},i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10")))))))),i().createElement(il,{type:"emaa_statement"},i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10")))))))),i().createElement(il,{type:"rsi_statement"},i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10")))))))),i().createElement(il,{type:"rsia_statement"},i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10")))))))),i().createElement(il,{type:"macda_statement"},i().createElement(cl,{name:"MACDFIELDS_LIST"},"1"),i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"}),i().createElement(ul,null,i().createElement(il,{type:"fast_ema_period",deletable:"false",movable:"false"},i().createElement(fl,{name:"FAST_EMA_PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"12"))),i().createElement(ul,null,i().createElement(il,{type:"slow_ema_period",deletable:"false",movable:"false"},i().createElement(fl,{name:"SLOW_EMA_PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"26"))),i().createElement(ul,null,i().createElement(il,{type:"signal_ema_period",deletable:"false",movable:"false"},i().createElement(fl,{name:"SIGNAL_EMA_PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"9"))))))))))))),i().createElement(al,{name:(0,M.localize)("Tick and candle analysis"),id:"tick_analysis"},i().createElement(il,{type:"tick_analysis"}),i().createElement(il,{type:"tick"}),i().createElement(il,{type:"last_digit"}),i().createElement(il,{type:"ticks"}),i().createElement(il,{type:"lastDigitList"}),i().createElement(il,{type:"check_direction"}),i().createElement(il,{type:"is_candle_black"}),i().createElement(il,{type:"read_ohlc"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"open"),i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"default"),i().createElement(fl,{name:"CANDLEINDEX"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1")))),i().createElement(il,{type:"read_ohlc_obj"}),i().createElement(il,{type:"ohlc_values"}),i().createElement(il,{type:"ohlc_values_in_list"}),i().createElement(il,{type:"get_ohlc"},i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"default"),i().createElement(fl,{name:"CANDLEINDEX"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1")))),i().createElement(il,{type:"ohlc"})),i().createElement(al,{name:(0,M.localize)("Contract"),id:"contract_details"},i().createElement(il,{type:"contract_check_result"}),i().createElement(il,{type:"read_details"}),i().createElement(il,{type:"sell_price"}),i().createElement(il,{type:"check_sell"}),i().createElement(il,{type:"payout"}),i().createElement(il,{type:"ask_price"})),i().createElement(al,{name:(0,M.localize)("Stats"),id:"stats"},i().createElement(il,{type:"balance"}),i().createElement(il,{type:"total_profit"}),i().createElement(il,{type:"total_runs"}))),i().createElement(al,{id:"utility",name:(0,M.localize)("Utility")},i().createElement(al,{name:(0,M.localize)("Custom functions"),id:"custom_functions",dynamic:"PROCEDURE"}),i().createElement(al,{name:(0,M.localize)("Variables"),id:"variables",dynamic:"VARIABLE"}),i().createElement(al,{name:(0,M.localize)("Notifications"),id:"notifications"},i().createElement(il,{type:"text_print"},i().createElement(fl,{name:"TEXT"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")))),i().createElement(il,{type:"text_prompt_ext"},i().createElement(cl,{name:"TYPE"},"TEXT"),i().createElement(fl,{name:"TEXT"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")))),i().createElement(il,{type:"notify"},i().createElement(cl,{name:"NOTIFICATION_TYPE"},"success"),i().createElement(fl,{name:"MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")))),i().createElement(il,{type:"notify_telegram"},i().createElement(fl,{name:"TELEGRAM_ACCESS_TOKEN"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"}))),i().createElement(fl,{name:"TELEGRAM_CHAT_ID"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"}))),i().createElement(fl,{name:"TELEGRAM_MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc"))))),i().createElement(al,{name:(0,M.localize)("Time"),id:"time"},i().createElement(il,{type:"epoch"}),i().createElement(il,{type:"timeout"}),i().createElement(il,{type:"totimestamp"},i().createElement(fl,{name:"DATETIME"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"yyyy-mm-dd hh:mm:ss")))),i().createElement(il,{type:"todatetime"},i().createElement(fl,{name:"TIMESTAMP"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"0"))))),i().createElement(al,{name:(0,M.localize)("Math"),id:"math"},i().createElement(il,{type:"math_number"}),i().createElement(il,{type:"math_arithmetic"},i().createElement(cl,{name:"OP"},"ADD"),i().createElement(fl,{name:"A"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))),i().createElement(fl,{name:"B"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1")))),i().createElement(il,{type:"math_single"},i().createElement(cl,{name:"OP"},"ROOT"),i().createElement(fl,{name:"NUM"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"9")))),i().createElement(il,{type:"math_trig"},i().createElement(cl,{name:"OP"},"SIN"),i().createElement(fl,{name:"NUM"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"45")))),i().createElement(il,{type:"math_constant"}),i().createElement(il,{type:"math_number_property"},i().createElement(sl,{divisor_input:"false"}),i().createElement(cl,{name:"PROPERTY"},"EVEN"),i().createElement(fl,{name:"NUMBER_TO_CHECK"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"0")))),i().createElement(il,{type:"math_change"},i().createElement(cl,{name:"VAR",variabletype:""},"item"),i().createElement(fl,{name:"DELTA"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1")))),i().createElement(il,{type:"math_on_list"}),i().createElement(il,{type:"math_round"},i().createElement(cl,{name:"OP"},"ROUND"),i().createElement(fl,{name:"NUM"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"3.1")))),i().createElement(il,{type:"math_modulo"},i().createElement(fl,{name:"DIVIDEND"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"64"))),i().createElement(fl,{name:"DIVISOR"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10")))),i().createElement(il,{type:"math_constrain"},i().createElement(fl,{name:"Value"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"50"))),i().createElement(fl,{name:"LOW"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))),i().createElement(fl,{name:"HIGH"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"100")))),i().createElement(il,{type:"math_random_int"},i().createElement(fl,{name:"FROM"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))),i().createElement(fl,{name:"TO"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"100")))),i().createElement(il,{type:"math_random_float"})),i().createElement(al,{name:(0,M.localize)("Text"),id:"text"},i().createElement(il,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")),i().createElement(il,{type:"text_join"},i().createElement(cl,{name:"VARIABLE",variabletype:""},"text"),i().createElement(pl,{name:"STACK"},i().createElement(il,{type:"text_statement",movable:"false"},i().createElement(fl,{name:"TEXT"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")))))),i().createElement(il,{type:"text_append"},i().createElement(cl,{name:"VAR",variabletype:""},"text"),i().createElement(fl,{name:"TEXT"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")))),i().createElement(il,{type:"text_length"},i().createElement(fl,{name:"Value"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")))),i().createElement(il,{type:"text_isEmpty"},i().createElement(fl,{name:"Value"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"})))),i().createElement(il,{type:"text_indexOf"},i().createElement(cl,{name:"END"},"FIRST"),i().createElement(fl,{name:"Value"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"text"))),i().createElement(fl,{name:"FIND"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")))),i().createElement(il,{type:"text_charAt"},i().createElement(sl,{at:"true"}),i().createElement(cl,{name:"WHERE"},"FROM_START"),i().createElement(fl,{name:"Value"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"item"))),i().createElement(fl,{name:"AT"},i().createElement(dl,{type:"math_number_positive"},i().createElement(cl,{name:"NUM"},"1")))),i().createElement(il,{type:"text_getSubstring"},i().createElement(sl,{at1:"true",at2:"true"}),i().createElement(cl,{name:"WHERE1"},"FROM_START"),i().createElement(cl,{name:"WHERE2"},"FROM_START"),i().createElement(fl,{name:"STRING"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"text"))),i().createElement(fl,{name:"AT1"},i().createElement(dl,{type:"math_number_positive"},i().createElement(cl,{name:"NUM"},"0"))),i().createElement(fl,{name:"AT2"},i().createElement(dl,{type:"math_number_positive"},i().createElement(cl,{name:"NUM"},"2")))),i().createElement(il,{type:"text_changeCase"},i().createElement(cl,{name:"CASE"},"UPPERCASE"),i().createElement(fl,{name:"TEXT"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")))),i().createElement(il,{type:"text_trim"},i().createElement(cl,{name:"MODE"},"BOTH"),i().createElement(fl,{name:"TEXT"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc"))))),i().createElement(al,{name:(0,M.localize)("Logic"),id:"logic"},i().createElement(il,{type:"controls_if"}),i().createElement(il,{type:"logic_compare"}),i().createElement(il,{type:"logic_operation"}),i().createElement(il,{type:"logic_negate"}),i().createElement(il,{type:"logic_boolean"}),i().createElement(il,{type:"logic_null"}),i().createElement(il,{type:"logic_ternary"})),i().createElement(al,{name:(0,M.localize)("Lists"),id:"lists"},i().createElement(il,{type:"lists_create_with"},i().createElement(cl,{name:"VARIABLE",variabletype:""},"list"),i().createElement(pl,{name:"STACK"},i().createElement(il,{type:"lists_statement",movable:"false"},i().createElement(ul,null,i().createElement(il,{type:"lists_statement",movable:"false"}))))),i().createElement(il,{type:"lists_repeat"},i().createElement(fl,{name:"NUM"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"5")))),i().createElement(il,{type:"lists_length"}),i().createElement(il,{type:"lists_isEmpty"}),i().createElement(il,{type:"lists_indexOf"}),i().createElement(il,{type:"lists_getIndex"}),i().createElement(il,{type:"lists_setIndex"}),i().createElement(il,{type:"lists_getSublist"}),i().createElement(il,{type:"lists_split"},i().createElement(sl,{mode:"SPLIT"}),i().createElement(cl,{name:"MODE"},"SPLIT"),i().createElement(fl,{name:"DELIM"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},",")))),i().createElement(il,{type:"lists_sort"})),i().createElement(al,{name:(0,M.localize)("Loops"),id:"loops"},i().createElement(il,{type:"controls_repeat"}),i().createElement(il,{type:"controls_repeat_ext"}),i().createElement(il,{type:"controls_whileUntil"}),i().createElement(il,{type:"controls_for"}),i().createElement(il,{type:"controls_forEach"}),i().createElement(il,{type:"controls_flow_statements"})),i().createElement(al,{name:(0,M.localize)("Miscellaneous"),id:"misc"},i().createElement(il,{type:"loader"}),i().createElement(il,{type:"block_holder"}),i().createElement(il,{type:"console"},i().createElement(fl,{name:"MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")))))),i().createElement((function(e){var t=ol({},(rl(e),e));return i().createElement("examples",t)}),{id:"examples"},i().createElement(ll,{id:"sell_available"},i().createElement(il,{type:"during_purchase"},i().createElement(pl,{name:"DURING_PURCHASE_STACK"},i().createElement(il,{type:"controls_if"},i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"check_sell"})),i().createElement(pl,{name:"DO0"},i().createElement(il,{type:"sell_at_market"})))))),i().createElement(ll,{id:"trade_again"},i().createElement(il,{type:"after_purchase"},i().createElement(pl,{name:"AFTERPURCHASE_STACK"},i().createElement(il,{type:"controls_if"},i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"EQ"),i().createElement(fl,{name:"A"},i().createElement(il,{type:"total_profit"})),i().createElement(fl,{name:"B"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"target_profit"))))))))),i().createElement(ll,{id:"sma_block_example"},i().createElement(il,{type:"sma_statement"},i().createElement(cl,{name:"VARIABLE",variabletype:""},"sma"),i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"},i().createElement(il,{type:"ohlc_values"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"open"),i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"default"))),i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10"))))))))),i().createElement(ll,{id:"sma_array"},i().createElement(il,{type:"smaa_statement"},i().createElement(cl,{name:"VARIABLE",variabletype:""},"smaa"),i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10"))))))))),i().createElement(ll,{id:"sma_block_example_1"},i().createElement(il,{type:"sma_statement"},i().createElement(cl,{name:"VARIABLE",variabletype:""},"sma"),i().createElement(pl,{name:"STATEMENT"},i().createElement(il,{type:"input_list",deletable:"false",movable:"false"},i().createElement(fl,{name:"INPUT_LIST"},i().createElement(il,{type:"ticks"})),i().createElement(ul,null,i().createElement(il,{type:"period",deletable:"false",movable:"false"},i().createElement(fl,{name:"PERIOD"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10"))))))))),i().createElement(ll,{id:"in_candle_list_read"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"op"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"read_ohlc"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"open"),i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"default"),i().createElement(fl,{name:"CANDLEINDEX"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))))))),i().createElement(ll,{id:"read_candle_value"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"op"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"read_ohlc_obj"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"open"),i().createElement(fl,{name:"OHLCOBJ"},i().createElement(il,{type:"read_ohlc"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"open"),i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"default"),i().createElement(fl,{name:"CANDLEINDEX"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))))))))),i().createElement(ll,{id:"candle_list"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"candle_list"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"ohlc_values"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"open"),i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"default"))))),i().createElement(ll,{id:"candle_list_1"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"cl"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"ohlc_values_in_list"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"open"),i().createElement(fl,{name:"OHLCLIST"},i().createElement(il,{type:"ohlc"},i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"default"))))))),i().createElement(ll,{id:"get_candle"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"candle_open_price"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"read_ohlc_obj"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"epoch"),i().createElement(fl,{name:"OHLCOBJ"},i().createElement(il,{type:"get_ohlc"},i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"default"),i().createElement(fl,{name:"CANDLEINDEX"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"2"))))))))),i().createElement(ll,{id:"check_result"},i().createElement(il,{type:"after_purchase"},i().createElement(pl,{name:"AFTERPURCHASE_STACK"},i().createElement(il,{type:"controls_if"},i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"contract_check_result"},i().createElement(cl,{name:"CHECK_RESULT"},"win"))),i().createElement(pl,{name:"DO0"},i().createElement(il,{type:"trade_again"})))))),i().createElement(ll,{id:"sell_pl"},i().createElement(il,{type:"during_purchase"},i().createElement(pl,{name:"DURING_PURCHASE_STACK"},i().createElement(il,{type:"controls_if"},i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"check_sell"})),i().createElement(pl,{name:"DO0"},i().createElement(il,{type:"controls_if"},i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"EQ"),i().createElement(fl,{name:"A"},i().createElement(il,{type:"sell_price"})),i().createElement(fl,{name:"B"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"stake"))))),i().createElement(pl,{name:"DO0"},i().createElement(il,{type:"sell_at_market"})))))))),i().createElement(ll,{id:"if-return"},i().createElement(il,{type:"procedures_defreturn"},i().createElement(sl,null,i().createElement((function(e){var t=ol({},(rl(e),e));return i().createElement("arg",t)}),{name:"x"})),i().createElement(cl,{name:"NAME"},"do something"),i().createElement(pl,{name:"STACK"},i().createElement(il,{type:"procedures_ifreturn"},i().createElement(sl,{value:"1"}),i().createElement(fl,{name:"CONDITION"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"EQ"),i().createElement(fl,{name:"A"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"x"))),i().createElement(fl,{name:"B"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"x"))))),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"text"},i().createElement(cl,{name:"TEXT"},"x must be positive or zero"))))),i().createElement(fl,{name:"RETURN"},i().createElement(il,{type:"math_single"},i().createElement(cl,{name:"OP"},"ROOT"),i().createElement(fl,{name:"NUM"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"9")),i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"x"))))))),i().createElement(ll,{id:"notify_telegram"},i().createElement(il,{type:"notify_telegram"},i().createElement(fl,{name:"TELEGRAM_ACCESS_TOKEN"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"})),i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"access_token"))),i().createElement(fl,{name:"TELEGRAM_CHAT_ID"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"})),i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"chat_id"))),i().createElement(fl,{name:"TELEGRAM_MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"Enjoy!"))))),i().createElement(ll,{id:"epoch"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"candle"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"read_ohlc"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"open"),i().createElement(cl,{name:"CANDLEINTERVAL_LIST"},"default"),i().createElement(fl,{name:"CANDLEINDEX"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))))),i().createElement(ul,null,i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"Open Time"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"read_ohlc_obj"},i().createElement(cl,{name:"OHLCFIELD_LIST"},"epoch"),i().createElement(fl,{name:"OHLCOBJ"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"candle"))))),i().createElement(ul,null,i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"Open Time"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"math_arithmetic"},i().createElement(cl,{name:"OP"},"MINUS"),i().createElement(fl,{name:"A"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1")),i().createElement(il,{type:"epoch"})),i().createElement(fl,{name:"B"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1")),i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"Open Time"))))),i().createElement(ul,null,i().createElement(il,{type:"controls_if"},i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"GTE"),i().createElement(fl,{name:"A"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"Time Since Candle Opened"))),i().createElement(fl,{name:"B"},i().createElement(il,{type:"math_number"},i().createElement(cl,{name:"NUM"},"30"))))))))))))),i().createElement(ll,{id:"totimestamp"},i().createElement(il,{type:"before_purchase"},i().createElement(pl,{name:"BEFOREPURCHASE_STACK"},i().createElement(il,{type:"controls_if"},i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"EQ"),i().createElement(fl,{name:"A"},i().createElement(il,{type:"epoch"})),i().createElement(fl,{name:"B"},i().createElement(il,{type:"totimestamp"},i().createElement(fl,{name:"DATETIME"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"1957-08-31 00:00:00"))))))),i().createElement(pl,{name:"DO0"},i().createElement(il,{type:"purchase"},i().createElement(cl,{name:"PURCHASE_LIST"},"CALL"))))))),i().createElement(ll,{id:"todatetime"},i().createElement(il,{type:"notify"},i().createElement(cl,{name:"NOTIFICATION_TYPE"},"success"),i().createElement(cl,{name:"NOTIFICATION_SOUND"},"silent"),i().createElement(fl,{name:"MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")),i().createElement(il,{type:"todatetime"},i().createElement(fl,{name:"TIMESTAMP"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"0")),i().createElement(il,{type:"epoch"})))))),i().createElement(ll,{id:"constrain"},i().createElement(il,{type:"math_constrain"},i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"math_number"},i().createElement(cl,{name:"NUM"},"5"))),i().createElement(fl,{name:"LOW"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10"))),i().createElement(fl,{name:"HIGH"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"20"))))),i().createElement(ll,{id:"controls_if"},i().createElement(il,{type:"controls_if"},i().createElement(sl,{elseif:"1",else:"1"}),i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"EQ"),i().createElement(fl,{name:"A"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"var1"))),i().createElement(fl,{name:"B"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"var2"))))),i().createElement(fl,{name:"IF1"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"EQ"),i().createElement(fl,{name:"A"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"var3"))),i().createElement(fl,{name:"B"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"var4"))))))),i().createElement(ll,{id:"compare_logic"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"EQ"))),i().createElement(ll,{id:"compare_logic_1"},i().createElement(il,{type:"logic_operation"},i().createElement(cl,{name:"OP"},"AND"))),i().createElement(ll,{id:"repeat_while"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"x"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"math_number"},i().createElement(cl,{name:"NUM"},"0"))),i().createElement(ul,null,i().createElement(il,{type:"controls_whileUntil"},i().createElement(cl,{name:"MODE"},"WHILE"),i().createElement(fl,{name:"BOOL"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"LTE"),i().createElement(fl,{name:"A"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"x"))),i().createElement(fl,{name:"B"},i().createElement(il,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10"))))),i().createElement(pl,{name:"DO"},i().createElement(il,{type:"math_change"},i().createElement(cl,{name:"VAR",variabletype:""},"x"),i().createElement(fl,{name:"DELTA"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"1"))),i().createElement(ul,null,i().createElement(il,{type:"notify"},i().createElement(cl,{name:"NOTIFICATION_TYPE"},"success"),i().createElement(cl,{name:"NOTIFICATION_SOUND"},"silent"),i().createElement(fl,{name:"MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")),i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"x"))))))))))),i().createElement(ll,{id:"repeat_until"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"x"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"math_number"},i().createElement(cl,{name:"NUM"},"20"))),i().createElement(ul,null,i().createElement(il,{type:"controls_whileUntil"},i().createElement(cl,{name:"MODE"},"UNTIL"),i().createElement(fl,{name:"BOOL"},i().createElement(il,{type:"logic_compare"},i().createElement(cl,{name:"OP"},"EQ"),i().createElement(fl,{name:"A"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"x"))),i().createElement(fl,{name:"B"},i().createElement(il,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10"))))),i().createElement(pl,{name:"DO"},i().createElement(il,{type:"math_change"},i().createElement(cl,{name:"VAR",variabletype:""},"x"),i().createElement(fl,{name:"DELTA"},i().createElement(dl,{type:"math_number"},i().createElement(cl,{name:"NUM"},"-1"))),i().createElement(ul,null,i().createElement(il,{type:"notify"},i().createElement(cl,{name:"NOTIFICATION_TYPE"},"success"),i().createElement(cl,{name:"NOTIFICATION_SOUND"},"silent"),i().createElement(fl,{name:"MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")),i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"x"))))))))))),i().createElement(ll,{id:"controls_for"},i().createElement(il,{type:"controls_for"},i().createElement(cl,{name:"VAR",variabletype:""},"i"),i().createElement(fl,{name:"FROM"},i().createElement(il,{type:"math_number"},i().createElement(cl,{name:"NUM"},"0"))),i().createElement(fl,{name:"TO"},i().createElement(il,{type:"math_number"},i().createElement(cl,{name:"NUM"},"10"))),i().createElement(fl,{name:"BY"},i().createElement(il,{type:"math_number"},i().createElement(cl,{name:"NUM"},"2"))),i().createElement(pl,{name:"DO"},i().createElement(il,{type:"notify"},i().createElement(cl,{name:"NOTIFICATION_TYPE"},"success"),i().createElement(cl,{name:"NOTIFICATION_SOUND"},"silent"),i().createElement(fl,{name:"MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")),i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"i"))))))),i().createElement(ll,{id:"controls_forEach"},i().createElement(il,{type:"lists_create_with"},i().createElement(cl,{name:"VARIABLE"},"list"),i().createElement(pl,{name:"STACK"},i().createElement(il,{type:"lists_statement"},i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"item1"))),i().createElement(ul,null,i().createElement(il,{type:"lists_statement"},i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"item2"))),i().createElement(ul,null,i().createElement(il,{type:"lists_statement"},i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"item3"))))))))),i().createElement(ul,null,i().createElement(il,{type:"controls_forEach"},i().createElement(cl,{name:"VAR",variabletype:""},"i"),i().createElement(fl,{name:"LIST"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"list"))),i().createElement(pl,{name:"DO"},i().createElement(il,{type:"notify"},i().createElement(cl,{name:"NOTIFICATION_TYPE"},"success"),i().createElement(cl,{name:"NOTIFICATION_SOUND"},"silent"),i().createElement(fl,{name:"MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc")),i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"i"))))))))),i().createElement(ll,{id:"break_out"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"x"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"logic_boolean"},i().createElement(cl,{name:"BOOL"},"TRUE"))),i().createElement(ul,null,i().createElement(il,{type:"controls_repeat"},i().createElement(cl,{name:"TIMES"},"10"),i().createElement(pl,{name:"DO"},i().createElement(il,{type:"controls_if"},i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"logic_negate"},i().createElement(fl,{name:"BOOL"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"x"))))),i().createElement(pl,{name:"DO0"},i().createElement(il,{type:"controls_flow_statements"},i().createElement(cl,{name:"FLOW"},"BREAK"))),i().createElement(ul,null,i().createElement(il,{type:"notify"},i().createElement(cl,{name:"NOTIFICATION_TYPE"},"success"),i().createElement(cl,{name:"NOTIFICATION_SOUND"},"silent"),i().createElement(fl,{name:"MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc"))))))))))),i().createElement(ll,{id:"continue"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"x"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"logic_boolean"},i().createElement(cl,{name:"BOOL"},"FALSE"))),i().createElement(ul,null,i().createElement(il,{type:"controls_repeat"},i().createElement(cl,{name:"TIMES"},"10"),i().createElement(pl,{name:"DO"},i().createElement(il,{type:"controls_if"},i().createElement(fl,{name:"IF0"},i().createElement(il,{type:"logic_negate"},i().createElement(fl,{name:"BOOL"},i().createElement(il,{type:"variables_get"},i().createElement(cl,{name:"VAR",variabletype:""},"x"))))),i().createElement(pl,{name:"DO0"},i().createElement(il,{type:"variables_set"},i().createElement(cl,{name:"VAR",variabletype:""},"x"),i().createElement(fl,{name:"VALUE"},i().createElement(il,{type:"logic_boolean"},i().createElement(cl,{name:"BOOL"},"TRUE"))),i().createElement(ul,null,i().createElement(il,{type:"controls_flow_statements"},i().createElement(cl,{name:"FLOW"},"CONTINUE"))))),i().createElement(ul,null,i().createElement(il,{type:"notify"},i().createElement(cl,{name:"NOTIFICATION_TYPE"},"success"),i().createElement(cl,{name:"NOTIFICATION_SOUND"},"silent"),i().createElement(fl,{name:"MESSAGE"},i().createElement(dl,{type:"text"},i().createElement(cl,{name:"TEXT"},"abc"))))))))))))));function hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const yl=(0,c.Pi)((function(){var e,t=D().ui.is_mobile,n=uo(),r=n.toolbox,o=n.flyout,a=n.quick_strategy,c=r.hasSubCategory,s=r.is_search_loading,u=r.onMount,d=r.onSearch,p=r.onSearchBlur,f=r.onSearchClear,m=r.onSearchKeyUp,h=r.onToolboxItemClick,y=r.onToolboxItemExpand,v=r.onUnmount,_=r.sub_category_index,g=r.toolbox_dom,b=a.setFormVisibility,k=o.setVisibility,E=o.selected_category,w=i().useRef(ml),S=(2,function(e){if(Array.isArray(e))return e}(e=i().useState(!0))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return hl(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hl(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),T=S[0],B=S[1];return i().useEffect((function(){return u(w),function(){return v()}}),[]),t?null:i().createElement("div",{className:"dashboard__toolbox","data-testid":"dashboard__toolbox"},i().createElement(Ya,{popover_message:(0,M.localize)("Click here to start building your Deriv Bot."),button_id:"db-toolbar__get-started-button",button_classname:"toolbar__btn toolbar__btn--icon toolbar__btn--start",buttonOnClick:function(){b(!0),j.Analytics.trackEvent("ce_bot_quick_strategy_form",{action:"open",form_source:"bot_builder_form"})},button_text:(0,M.localize)("Quick strategy")}),i().createElement("div",{id:"gtm-toolbox",className:"db-toolbox__content"},i().createElement("div",{className:"db-toolbox__header"},i().createElement("div",{className:"db-toolbox__title","data-testid":"db-toolbox__title",onClick:function(){B(!T),k(!1)}},(0,M.localize)("Blocks menu"),i().createElement("span",{className:z()("db-toolbox__title__chevron",{"db-toolbox__title__chevron--active":T})},i().createElement(l.Icon,{icon:"IcChevronDownBold"})))),i().createElement("div",{className:z()("db-toolbox__content-wrapper",{active:T}),"data-testid":"db-toolbox__content-wrapper"},i().createElement(nl,{is_search_loading:s,onSearch:d,onSearchBlur:p,onSearchClear:f,onSearchKeyUp:m}),i().createElement("div",{className:"db-toolbox__category-menu"},g&&Array.from(g.childNodes).map((function(e,t){if("CATEGORY"===e.tagName.toUpperCase()){var n=c(e.children),r=_.includes(t);return i().createElement("div",{key:"db-toolbox__row--".concat(e.getAttribute("id")),className:z()("db-toolbox__row",{"db-toolbox__row--active":(null==E?void 0:E.getAttribute("id"))===(null==e?void 0:e.id)})},i().createElement("div",{className:"db-toolbox__item",onClick:function(){n?y(t):h(e)}},i().createElement("div",{className:"db-toolbox__category-text"},i().createElement("div",{className:"db-toolbox__label"},(0,M.localize)(e.getAttribute("name"))),n&&i().createElement("div",{className:z()("db-toolbox__category-arrow",{"db-toolbox__category-arrow--active":r})},i().createElement(l.Icon,{icon:"IcChevronDownBold"})))),n&&r&&Array.from(e.childNodes).map((function(e){return i().createElement("div",{key:"db-toolbox__sub-category-row--".concat(e.getAttribute("id")),className:z()("db-toolbox__sub-category-row",{"db-toolbox__sub-category-row--active":(null==E?void 0:E.getAttribute("id"))===(null==e?void 0:e.id)}),onClick:function(){h(e)}},i().createElement(l.Text,{size:"xxs"},(0,M.localize)(e.getAttribute("name"))))})))}return null}))))))})),vl=(0,c.Pi)((function(){var e,t=uo().blockly_store,n=t.onMount,r=t.onUnmount,o=t.is_loading;return i().useEffect((function(){return n(),function(){r()}}),[]),o?null:null!==(e=Blockly)&&void 0!==e&&e.derivWorkspace?i().createElement(i().Fragment,null,i().createElement(yl,null),i().createElement($a,null),i().createElement(Ga,null),i().createElement(Wa,null)):null}));function _l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gl=(0,c.Pi)((function(){var e,t=D().ui,n=uo(),r=n.dashboard,o=n.app,a=n.run_panel,l=n.toolbar,c=n.quick_strategy,s=r.active_tab,u=r.active_tour,d=r.is_preview_on_popup,p=c.is_open,f=a.is_running,m=i().useRef(!1),h=(2,function(e){if(Array.isArray(e))return e}(e=i().useState(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return _l(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_l(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=h[0],v=h[1],_=t.is_mobile;i().useEffect((function(){if(s===G.BOT_BUILDER)return j.Analytics.trackEvent("ce_bot_builder_form",{action:"open",form_source:"ce_bot_builder_form"}),function(){j.Analytics.trackEvent("ce_bot_builder_form",{action:"close",form_source:"ce_bot_builder_form"})}}),[s]);var g=o.onMount,b=o.onUnmount,k=i().useRef(null);i().useEffect((function(){return g(),function(){return b()}}),[g,b]);var E=function(e){var t=l.is_reset_button_clicked,n=l.setResetButtonState;"ui"===e.type||t?t&&(n(!1),w()):(v(!0),w())},w=function(){var e,t;m.current=!1,null===(e=window.Blockly)||void 0===e||null===(t=e.derivWorkspace)||void 0===t||t.removeChangeListener(E)};return i().useEffect((function(){var e,t=null===(e=window.Blockly)||void 0===e?void 0:e.derivWorkspace;return t&&f&&!m.current?(m.current=!0,t.addChangeListener(E)):(v(!1),w()),function(){t&&m.current&&w()}}),[f]),i().createElement(i().Fragment,null,i().createElement(U,{is_open:y,message:i().createElement(M.Localize,{i18n_default_text:"Changes you make will not affect your running bot."}),handleClose:function(){return v(!1)}}),i().createElement("div",{className:z()("bot-builder",{"bot-builder--active":1===s&&!d,"bot-builder--inactive":d,"bot-builder--tour-active":u})},d?null:i().createElement("div",{id:"scratch_div",ref:k,style:{width:"calc(100vw - 3.2rem)",height:"var(--bot-content-height)"}},i().createElement(vl,null))),1===s&&i().createElement(Ca,{is_mobile:_}),i().createElement(ko,null),i().createElement(Wi,null),p&&i().createElement(Ui,null))}));const bl=gl,kl=(0,c.Pi)((function(){var e=uo().dashboard.is_web_socket_intialised;return i().createElement(i().Fragment,null,i().createElement(l.Dialog,{is_visible:!e,is_mobile_full_width:!0,className:"dc-dialog bot-stopped-dialog",cancel_button_text:(0,M.localize)("Go to Reports"),confirm_button_text:(0,M.localize)("Back to Bot"),onCancel:function(){return location.replace("reports/positions")},onConfirm:function(){return location.reload()}},i().createElement("div",{className:"dc-dialog__content__header"},i().createElement(l.Text,{"data-testid":"data-title",weight:"bold",as:"p",align:"left",size:"s",color:"prominent"},(0,M.localize)("You're back online")),i().createElement("div",{"data-testid":"data-close-button",onClick:function(){location.reload()}},i().createElement(l.Icon,{icon:"IcCross"}))),i().createElement(l.Text,{as:"p",align:"left",size:"xs",color:"prominent"},(0,M.localize)("The bot has stopped, but your trade may still be running. You can check it on the Reports page."))))}));var El=n(55008),wl=n(59909);function Sl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Tl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bl="react-rnd-wrapper";const Ol=function(e){var t=e.bounds,n=void 0===t?"window":t,r=e.children,a=e.dragHandleClassName,c=e.enableResizing,s=void 0!==c&&c,u=e.header_title,d=e.height,p=void 0===d?"fit-content":d,f=e.is_visible,m=e.minWidth,h=e.onCloseDraggable,y=e.width,v=void 0===y?"fit-content":y,_=e.xaxis,g=void 0===_?0:_,b=e.yaxis,k=void 0===b?0:b,E=Sl((0,o.useState)(g),2),w=E[0],S=E[1],T=Sl((0,o.useState)(k),2),B=T[0],O=T[1],x=Sl((0,o.useState)(0),2),A=x[0],C=x[1],I=Sl((0,o.useState)(0),2),L=I[0],N=I[1];return f?i().createElement(El.s,{bounds:n,className:"react-rnd-wrapper","data-testid":"react-rnd-wrapper",default:{x:g,y:k,width:v,height:p},style:{left:g,top:k},dragHandleClassName:a,enableResizing:s,minHeight:p,minWidth:m,onDrag:function(e,t){t.node.style.left="".concat(t.lastX-w+A+t.deltaX,"px"),t.node.style.top="".concat(t.lastY-B+L+t.deltaY,"px")},onDragStart:function(e,t){var n;S(t.x),O(t.y),C(parseInt(t.node.style.left)),N(parseInt(t.node.style.top));var r=null==e||null===(n=e.target)||void 0===n?void 0:n.parentElement;"button"!==(null==r?void 0:r.role)&&"svg"!==(null==r?void 0:r.tagName)||h()}},i().createElement(wl.Z,{appear:!0,in:f,timeout:50,classNames:{appear:"dc-dialog__wrapper--enter",enter:"dc-dialog__wrapper--enter",enterDone:"dc-dialog__wrapper--enter-done",exit:"dc-dialog__wrapper--exit"},unmountOnExit:!0},i().createElement(i().Fragment,null,i().createElement("div",{className:"".concat(Bl,"-header")},i().createElement("div",{className:"".concat(Bl,"-header__title")},(0,M.localize)(u)),i().createElement("div",{role:"button",className:"".concat(Bl,"-header__close"),"data-testid":"react-rnd-close-modal",onClick:h},i().createElement(l.Icon,{icon:"IcCross"}))),r))):null};var xl=n(74782);function Al(e){return Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Al(e)}function Cl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Al(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Al(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Al(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ll="transaction-details-modal-desktop",Nl=function(e){var t,n=e.label,r=e.extra_classes,o=void 0===r?[]:r,a=e.loader,l=void 0!==a&&a;return i().createElement("div",{className:z().apply(void 0,["".concat(Ll,"__table-cell")].concat((t=o,function(e){if(Array.isArray(e))return Il(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Il(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())))},l?i().createElement(Pl,null):n)},Rl=function(e){var t=e.columns;return i().createElement("div",{className:z()("".concat(Ll,"__table-row"),"".concat(Ll,"__table-header"))},null==t?void 0:t.map((function(e){return i().createElement(Nl,{key:e.key,extra_classes:[e.extra_class?"".concat(Ll,"__table-cell").concat(e.extra_class):""],label:e.label,loader:!1})})))},Dl=function(e){var t=e.message,n=e.icon;return i().createElement("div",{className:"".concat(Ll,"__icon-wrapper")},i().createElement(l.Popover,{alignment:"left",message:t,zIndex:"9999"},n))},Pl=function(){return i().createElement(xl.ZP,{className:"transactions__loader-text","data-testid":"transaction_details_table_cell_loader",height:10,width:30,speed:3,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)"},i().createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"60",height:"12"}))};function zl(e){var t,n,r,o,c=e.result,s=e.result_columns,u=e.transactions,d=e.transaction_columns,f=e.account,m=e.balance;return i().createElement("div",{"data-testid":"transaction_details_tables"},i().createElement("div",{className:z()("".concat(Ll,"__table-container"),"".concat(Ll,"__table-container__top-table"))},i().createElement(Rl,{columns:d}),null==u?void 0:u.map((function(e){var t,n,r,o,c,s=e.data;return e.type===Qr.CONTRACT?i().createElement("div",{className:"".concat(Ll,"__table-row"),key:null==s||null===(t=s.transaction_ids)||void 0===t?void 0:t.buy},i().createElement(Nl,{label:(null==s?void 0:s.date_start)&&(0,p.convertDateFormat)(null==s?void 0:s.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]"),extra_classes:["".concat(Ll,"__table-cell--grow-big")]}),i().createElement(Nl,{label:null==s||null===(n=s.transaction_ids)||void 0===n?void 0:n.buy,extra_classes:["".concat(Ll,"__table-cell--grow-mid")]}),i().createElement(Nl,{label:i().createElement(Dl,{message:null==s?void 0:s.display_name,icon:i().createElement(l.Icon,{icon:"IcUnderlying".concat(null==s?void 0:s.underlying),size:24})})}),i().createElement(Nl,{label:i().createElement(Dl,{message:(0,a.getContractTypeName)(s),icon:i().createElement(l.IconTradeTypes,{type:null==s?void 0:s.contract_type,size:24})})}),i().createElement(Nl,{label:null==s?void 0:s.entry_tick,loader:!(null!=s&&s.entry_tick)}),i().createElement(Nl,{label:null==s?void 0:s.exit_tick,loader:!s.exit_tick}),i().createElement(Nl,{label:Math.abs(null!==(r=null==s?void 0:s.buy_price)&&void 0!==r?r:0).toFixed(2)}),i().createElement(Nl,{label:i().createElement("div",{className:z()((o={},Cl(o,"".concat(Ll,"__profit--win"),(null==s?void 0:s.profit)>0),Cl(o,"".concat(Ll,"__profit--loss"),(null==s?void 0:s.profit)<0),o))},Math.abs(null!==(c=null==s?void 0:s.profit)&&void 0!==c?c:0).toFixed(2)),loader:!s.is_completed})):i().createElement("div",{className:"".concat(Ll,"__table-row"),key:"transaction-row-divider-".concat(s)},i().createElement("div",{className:"".concat(Ll,"__divider")},i().createElement("div",{className:"transactions__divider-line"})))}))),i().createElement("div",{className:z()("".concat(Ll,"__table-container"))},i().createElement(Rl,{columns:s}),i().createElement("div",{className:"".concat(Ll,"__table-row")},i().createElement(Nl,{label:f}),i().createElement(Nl,{label:null==c?void 0:c.number_of_runs}),i().createElement(Nl,{label:Math.abs(null!==(t=null==c?void 0:c.total_stake)&&void 0!==t?t:0).toFixed(2)}),i().createElement(Nl,{label:Math.abs(null!==(n=null==c?void 0:c.total_payout)&&void 0!==n?n:0).toFixed(2)}),i().createElement(Nl,{label:null==c?void 0:c.won_contracts}),i().createElement(Nl,{label:null==c?void 0:c.lost_contracts,extra_classes:["".concat(Ll,"__loss")]}),i().createElement(Nl,{label:i().createElement("div",{className:z()((null==c?void 0:c.total_profit)&&(r={},Cl(r,"".concat(Ll,"__profit--win"),(null==c?void 0:c.total_profit)>0),Cl(r,"".concat(Ll,"__profit--loss"),(null==c?void 0:c.total_profit)<0),r)),"data-testid":"transaction_details_table_profit"},Math.abs(null!==(o=null==c?void 0:c.total_profit)&&void 0!==o?o:0).toFixed(2))}),i().createElement(Nl,{label:m}))))}function jl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ml=[{key:"timestamp",label:(0,M.localize)("Timestamp"),extra_class:"--grow-big"},{key:"reference",label:(0,M.localize)("Reference"),extra_class:"--grow-mid"},{key:"market",label:(0,M.localize)("Market")},{key:"contract_type",label:(0,M.localize)("Trade type")},{key:"entry_tick",label:(0,M.localize)("Entry spot")},{key:"exit_tick",label:(0,M.localize)("Exit spot")},{key:"buy_price",label:(0,M.localize)("Buy price")},{key:"profit",label:(0,M.localize)("Profit/Loss")}],Fl=[{key:"account",label:(0,M.localize)("Account")},{key:"no_of_runs",label:(0,M.localize)("No. of runs")},{key:"total_stake",label:(0,M.localize)("Total stake")},{key:"total_payout",label:(0,M.localize)("Total payout")},{key:"win",label:(0,M.localize)("Win")},{key:"loss",label:(0,M.localize)("Loss")},{key:"total_profit",label:(0,M.localize)("Total profit/loss")},{key:"balance",label:(0,M.localize)("Balance")}],Ul=(0,c.Pi)((function(){var e,t=D().client,n=t.loginid,r=t.balance,a=uo(),l=a.transactions,c=a.run_panel,s=l.toggleTransactionDetailsModal,u=l.is_transaction_details_modal_open,d=l.transactions,p=c.statistics,f=(2,function(e){if(Array.isArray(e))return e}(e=(0,o.useState)({width:0,height:0}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return jl(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jl(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=f[0],h=f[1],y=function(){h({width:window.innerWidth,height:window.innerHeight})};(0,o.useEffect)((function(){return window.addEventListener("resize",y),h({width:window.innerWidth,height:window.innerHeight}),function(){window.removeEventListener("resize",y)}}),[]);var v=1034,_=(m.width-v)/2,g=(m.height-800)/2,b=g>=0?g:0;return i().createElement(Ol,{bounds:".dashboard__main",dragHandleClassName:"react-rnd-wrapper-header",is_visible:u,minWidth:v,onCloseDraggable:function(){return s(!1)},width:v,xaxis:_,yaxis:b,header_title:"Transactions detailed summary"},i().createElement(zl,{transaction_columns:Ml,transactions:d,result_columns:Fl,result:p,account:null!=n?n:"",balance:null!=r?r:0}))}));const Vl=Ul,Gl=function(e){var t=e.wrapper_ref,n=e.checked_filters,r=e.filters,o=e.filterMessage,a=e.className,c=e.classNameLabel;return i().createElement("div",{ref:t,className:a},r.map((function(e){var t=Array.isArray(n)&&n.includes(e.id);return i().createElement(l.Checkbox,{key:e.id,classNameLabel:c,value:t,defaultChecked:t,label:e.label,onChange:function(){return o(!t,e.id)}})})))},Hl=function(e){var t=e.toggle_ref,n=e.checked_filters,r=e.filters,o=e.filterMessage,a=e.is_filter_dialog_visible,c=e.toggleFilterDialog,s=i().useRef(null);return(0,l.useOnClickOutside)(s,c,(function(e){var n;return a&&!(null!==(n=t.current)&&void 0!==n&&n.contains(e.target))})),i().createElement(Gl,{wrapper_ref:s,checked_filters:n,filters:r,filterMessage:o,className:"filter-dialog"})},Jl=function(e){var t=e.logType,n=e.className,r=e.extra;return i().createElement("div",{className:z()("journal__text",n)},function(){switch(t){case a.log_types.LOAD_BLOCK:return(0,M.localize)("Blocks are loaded successfully");case a.log_types.NOT_OFFERED:return(0,M.localize)("Resale of this contract is not offered.");case a.log_types.PURCHASE:var e=r.longcode,n=r.transaction_id;return i().createElement(M.Localize,{i18n_default_text:"<0>Bought</0>: {{longcode}} (ID: {{transaction_id}})",values:{longcode:e,transaction_id:n},components:[i().createElement(l.Text,{key:0,size:"xxs",styles:{color:"var(--status-info)"}})],options:{interpolation:{escapeValue:!1}}});case a.log_types.SELL:var o=r.sold_for;return i().createElement(M.Localize,{i18n_default_text:"<0>Sold for</0>: {{sold_for}}",values:{sold_for:o},components:[i().createElement(l.Text,{key:0,size:"xxs",styles:{color:"var(--status-warning)"}})]});case a.log_types.PROFIT:var c=r.currency,s=r.profit;return i().createElement(M.Localize,{i18n_default_text:"Profit amount: <0>{{profit}}</0>",values:{profit:"".concat((0,p.formatMoney)(c,s,!0)," ").concat((0,p.getCurrencyDisplayCode)(c))},components:[i().createElement(l.Text,{key:0,size:"xxs",styles:{color:"var(--status-success)"}})]});case a.log_types.LOST:var u=r.currency,d=r.profit;return i().createElement(M.Localize,{i18n_default_text:"Loss amount: <0>{{profit}}</0>",values:{profit:"".concat((0,p.formatMoney)(u,d,!0)," ").concat((0,p.getCurrencyDisplayCode)(u))},components:[i().createElement(l.Text,{key:0,size:"xxs",styles:{color:"var(--status-danger)"}})]});case a.log_types.WELCOME_BACK:var f=r.current_currency;return f?i().createElement(M.Localize,{i18n_default_text:"Welcome back! Your messages have been restored. You are using your {{current_currency}} account.",values:{current_currency:f}}):i().createElement(M.Localize,{i18n_default_text:"Welcome back! Your messages have been restored."});case a.log_types.WELCOME:var m=r.current_currency;if(m)return i().createElement(M.Localize,{i18n_default_text:"You are using your {{current_currency}} account.",values:{current_currency:m}});break;default:return null}}())},Wl=function(e){var t=e.row,n=e.is_new_row,r=e.measure,o=(0,p.useNewRowTransition)(n).in_prop,l=t.date,c=t.time,s=t.message,u=t.message_type,d=t.className,f=t.extra,m=function(e){var t=e.date,n=e.time;return i().createElement(i().Fragment,null,i().createElement("span",{className:"journal__text-date"},t)," | ",i().createElement("span",{className:"journal__text-time"},n))}({date:l,time:c});return i().createElement(wl.Z,{in:o,timeout:500,classNames:"list__animation","data-testid":"mock-css-transition"},i().createElement("div",{className:"journal__item"},i().createElement("div",{className:"journal__item-content"},function(e,t,n,r,o){switch(t){case a.message_types.SUCCESS:return i().createElement(Jl,{logType:e,extra:r,className:n});case a.message_types.NOTIFY:return"function"==typeof e?i().createElement("div",{className:z()("journal__text",n)},e(o)):i().createElement("div",{className:z()("journal__text",n)},e);case a.message_types.ERROR:return i().createElement("div",{className:"journal__text--error journal__text"},e);default:return null}}(s,u,d,f,r)),i().createElement("div",{className:"journal__text-datetime"},m)))},Yl=function(e){var t=e.is_mobile;return i().createElement(xl.ZP,{className:z()("journal__loader",{"journal__loader--mobile":t}),speed:3,width:350,height:92,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},i().createElement("rect",{x:"15",y:"15",rx:"5",ry:"5",width:"320",height:"40"}),i().createElement("rect",{x:"15",y:"60",rx:"5",ry:"5",width:"180",height:"7"}))};var ql=(0,c.Pi)((function(e){var t,n,r=e.tab,o=uo(),a=o.download,c=o.run_panel,s=o.transactions,u=c.is_clear_stat_disabled,d=c.is_running,p=a.onClickDownloadTransaction,f=a.onClickDownloadJournal,m=s.transactions,h=!1;return"transactions"===r?(t=p,h=!m.length||d,n=(0,M.localize)("Download your transaction history."),m.length||(n=(0,M.localize)("No transaction or activity yet."))):"journal"===r&&(t=f,n=(0,M.localize)("Download your journal."),(h=u)&&(n=(0,M.localize)("No transaction or activity yet."))),d&&(n=(0,M.localize)("Download is unavailable while your bot is running.")),i().createElement(l.Popover,{className:"run-panel__info",classNameBubble:"run-panel__info--bubble",alignment:"bottom",message:n,zIndex:"5"},i().createElement(l.Button,{id:"download-button",is_disabled:h,className:"download__button",icon:i().createElement(l.Icon,{icon:"IcDbotDownload",color:h?"disabled":void 0,className:"download__icon"}),text:(0,M.localize)("Download"),onClick:t,secondary:!0}))}));const Kl=ql,Xl=function(e){var t=e.checked_filters,n=e.filters,r=e.filterMessage,o=e.is_filter_dialog_visible,a=e.toggleFilterDialog,c=i().useRef(null);return i().createElement(i().Fragment,null,i().createElement("div",{className:"journal-tools__container"},i().createElement(Kl,{tab:"journal"}),i().createElement("div",{ref:c,className:"journal-tools__container-filter",onClick:a},i().createElement(l.Text,{size:"xs",className:"journal-tools__container-filter--label"},i().createElement(M.Localize,{i18n_default_text:"Filters"})),i().createElement(l.Icon,{icon:"IcFilter",size:16}))),i().createElement(wl.Z,{in:o,classNames:{enter:"filter-dialog--enter",enterDone:"filter-dialog--enter-done",exit:"filter-dialog--exit"},timeout:150,unmountOnExit:!0},i().createElement(Hl,{toggle_ref:c,checked_filters:t,filters:n,filterMessage:r,is_filter_dialog_visible:o,toggleFilterDialog:a})))};var Zl=(0,c.Pi)((function(){var e=D().ui,t=uo(),n=t.journal,r=t.run_panel,o=n.checked_filters,a=n.filterMessage,c=n.filters,s=n.filtered_messages,u=n.is_filter_dialog_visible,d=n.toggleFilterDialog,p=n.unfiltered_messages,f=r.is_stop_button_visible,m=r.contract_stage,h=Array.isArray(s)&&s.length,y=Array.isArray(p)&&p.length,v=e.is_mobile;return i().createElement("div",{className:z()("journal run-panel-tab__content--no-stat",{"run-panel-tab__content":!v})},i().createElement(Xl,{checked_filters:o,filters:c,filterMessage:a,is_filter_dialog_visible:u,toggleFilterDialog:d}),i().createElement("div",{className:"journal__item-list"},h?i().createElement(l.DataList,{className:"journal",data_source:s,rowRenderer:function(e){return i().createElement(Wl,e)},keyMapper:function(e){return e.unique_id}}):i().createElement(i().Fragment,null,m>=sr.STARTING&&Object.keys(o).length&&!y&&f?i().createElement(Yl,{is_mobile:v}):i().createElement("div",{className:"journal-empty"},i().createElement(l.Icon,{icon:"IcBox",className:"journal-empty__icon",size:64,color:"secondary"}),i().createElement(l.Text,{as:"h4",size:"xs",weight:"bold",align:"center",color:"less-prominent",line_height:"xxs",className:"journal-empty__header"},(0,M.localize)("There are no messages to display")),i().createElement("div",{className:"journal-empty__message"},i().createElement(l.Text,{size:"xxs",color:"less-prominent"},(0,M.localize)("Here are the possible reasons:")),i().createElement("ul",{className:"journal-empty__list"},i().createElement("li",null,i().createElement(l.Text,{size:"xxs",color:"less-prominent"},(0,M.localize)("The bot is not running"))),i().createElement("li",null,i().createElement(l.Text,{size:"xxs",color:"less-prominent"},(0,M.localize)("The stats are cleared"))),i().createElement("li",null,i().createElement(l.Text,{size:"xxs",color:"less-prominent"},(0,M.localize)("All messages are filtered out")))))))))}));const Ql=Zl;function $l(e){return $l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(e)}function ec(){return ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ec.apply(this,arguments)}function tc(){tc=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==$l(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function nc(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oc=function(e){var t,n=(2,function(e){if(Array.isArray(e))return e}(t=i().useState(""))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return rc(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rc(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=n[1],a=e.is_onscreen_keyboard_active,c=e.is_logged_in,s=e.initial_values,u=e.api_max_losses,d=e.onRunButtonClick,p=e.resetSelfExclusion,f=e.updateSelfExclusion,m=e.setRunLimit,h=e.is_mobile;i().useEffect((function(){c||p()}));var y=function(){var e,t=(e=tc().mark((function e(t){var n;return tc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form_max_losses===u){e.next=7;break}return e.next=3,f({max_losses:t.form_max_losses});case 3:if(null==(n=e.sent)||!n.error){e.next=7;break}return o((0,M.localize)(n.error.message)),e.abrupt("return");case 7:m(t.run_limit),d();case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){nc(i,r,o,a,l,"next",e)}function l(e){nc(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return i().createElement("div",{className:"db-self-exclusion"},i().createElement("div",{className:"db-self-exclusion__content"},i().createElement("div",{className:"db-self-exclusion__info"},(0,M.localize)("Enter limits to stop your bot from trading when any of these conditions are met.")),i().createElement(Eo.Formik,{initialValues:s,validate:function(e){var t={},n=/^\d+(\.\d+)?$/,r=/^\d+$/,i=(0,M.localize)("This field is required."),a=(0,M.localize)("Should be a valid number"),l=(0,M.localize)("Reached maximum number of digits"),c=(0,M.localize)("Reached maximum number of decimals"),s=(0,M.localize)("Please enter a number between 0 and {{api_max_losses}}.",{api_max_losses:u});return["run_limit","form_max_losses"].forEach((function(n){e[n]||(t[n]=i)})),["run_limit","form_max_losses"].forEach((function(r){e[r]&&(n.test(e[r])?+e[r]>9999999999999&&(t[r]=l):t[r]=a)})),["run_limit"].forEach((function(n){e[n]&&(r.test(e[n])||(t[n]=a))})),["form_max_losses"].forEach((function(n){var r=e[n].toString().split(".")[1];(r&&r.length||0)>2&&(t[n]=c)})),["form_max_losses"].forEach((function(n){0!==u&&u!==e[n]&&u<e[n]?t[n]=s:o("")})),t},onSubmit:y},(function(e){var t=e.values,n=e.touched,o=e.errors,c=e.isValid,s=e.handleChange;return i().createElement(Eo.Form,null,i().createElement("div",{className:"db-self-exclusion__form-group"},i().createElement(Eo.Field,{name:"form_max_losses"},(function(e){var a=e.field;return i().createElement(l.Input,ec({},a,{className:"db-self-exclusion__input",type:"text",label:(0,M.localize)("Daily loss limit"),value:t.form_max_losses,onChange:s,error:r||n[a.name]&&o[a.name],hint:(0,M.localize)("Limits your potential losses for the day across all Deriv platforms.")}))}))),i().createElement("div",{className:"db-self-exclusion__form-group"},i().createElement(Eo.Field,{name:"run_limit"},(function(e){var r=e.field;return i().createElement(l.Input,ec({},r,{className:"db-self-exclusion__input",type:"text",label:(0,M.localize)("Maximum consecutive trades"),value:t.run_limit,onChange:s,error:n[r.name]&&o.run_limit,hint:(0,M.localize)("Maximum number of trades your bot will execute for this run.")}))}))),i().createElement("div",{className:z()("db-self-exclusion__footer",{"db-self-exclusion__footer--relative":h&&a})},i().createElement("div",{className:"db-self-exclusion__footer-btn-group"},i().createElement(l.Button,{large:!0,text:(0,M.localize)("Cancel"),onClick:p,secondary:!0,type:"button"}),i().createElement(l.Button,{type:"submit",large:!0,text:(0,M.localize)("Apply and run"),is_disabled:!c||!t.run_limit||!t.form_max_losses||""!==r,primary:!0}))))}))))},ic=(0,c.Pi)((function(e){var t=e.onRunButtonClick,n=uo().self_exclusion,r=D(),o=r.ui,a=r.client,c=n.is_restricted,s=n.resetSelfExclusion,u=n.initial_values,d=n.api_max_losses,p=n.run_limit,f=n.setRunLimit,m=o.is_onscreen_keyboard_active,h=o.is_mobile,y={is_onscreen_keyboard_active:m,is_logged_in:a.is_logged_in,initial_values:u,api_max_losses:d,onRunButtonClick:t,resetSelfExclusion:s,updateSelfExclusion:a.updateSelfExclusion,setRunLimit:f,virtual_account_loginid:a.virtual_account_loginid,run_limit:p,is_mobile:h};return i().createElement(i().Fragment,null,h?i().createElement(l.FadeWrapper,{is_visible:c,className:"limits__wrapper",keyname:"limitis__wrapper"},i().createElement(l.PageOverlay,{header:(0,M.localize)("Limits"),onClickClose:s},i().createElement(l.MobileWrapper,null,i().createElement(l.Div100vhContainer,{className:"limits__wrapper--is-mobile"},i().createElement(oc,y))))):i().createElement(l.Modal,{is_open:c,has_close_icon:!0,width:"440px",height:"374px",toggleModal:s,className:"db-self-exclusion__modal",title:(0,M.localize)("Limits")},i().createElement(oc,y)))}));ic.propTypes={onRunButtonClick:La().func};const ac=ic,lc=function(e){var t=e.speed,n=void 0===t?3:t;return i().createElement(xl.ZP,{height:153,width:334,speed:n,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)","data-testid":"contract-card-loader"},i().createElement("rect",{x:"12",y:"15",rx:"0",ry:"0",width:"41",height:"25"}),i().createElement("rect",{x:"61",y:"24",rx:"0",ry:"0",width:"91",height:"8"}),i().createElement("rect",{x:"180",y:"15",rx:"0",ry:"0",width:"41",height:"25"}),i().createElement("rect",{x:"229",y:"24",rx:"0",ry:"0",width:"91",height:"8"}),i().createElement("rect",{x:"12",y:"48",rx:"0",ry:"0",width:"60",height:"8"}),i().createElement("rect",{x:"12",y:"64",rx:"0",ry:"0",width:"308",height:"8"}),i().createElement("rect",{x:"12",y:"80",rx:"0",ry:"0",width:"308",height:"1"}),i().createElement("rect",{x:"12",y:"89",rx:"0",ry:"0",width:"140",height:"8"}),i().createElement("rect",{x:"12",y:"105",rx:"0",ry:"0",width:"60",height:"8"}),i().createElement("rect",{x:"12",y:"121",rx:"0",ry:"0",width:"140",height:"8"}),i().createElement("rect",{x:"12",y:"137",rx:"0",ry:"0",width:"60",height:"8"}),i().createElement("rect",{x:"180",y:"89",rx:"0",ry:"0",width:"140",height:"8"}),i().createElement("rect",{x:"180",y:"105",rx:"0",ry:"0",width:"60",height:"8"}),i().createElement("rect",{x:"180",y:"121",rx:"0",ry:"0",width:"140",height:"8"}),i().createElement("rect",{x:"180",y:"137",rx:"0",ry:"0",width:"60",height:"8"}))};var cc=(0,c.Pi)((function(e){var t,n=e.contract_info,r=e.is_contract_loading,o=uo(),a=o.summary_card,c=o.run_panel,s=D(),u=s.ui,d=s.common,f=a.is_contract_completed,m=a.is_contract_inactive,h=a.is_multiplier,y=c.onClickSell,v=c.is_sell_requested,_=u.addToast,g=u.current_focus,b=u.removeToast,k=u.setCurrentFocus,E=d.server_time,w=u.is_mobile,S=i().createElement(l.ContractCard.Header,{contract_info:n,getCardLabels:p.getCardLabels,getContractTypeDisplay:Rr,has_progress_slider:!h,is_sold:f,server_time:E}),T=i().createElement(l.ContractCard.Body,{addToast:_,contract_info:n,currency:null!==(t=null==n?void 0:n.currency)&&void 0!==t?t:"",current_focus:g,error_message_alignment:"left",getCardLabels:p.getCardLabels,getContractById:function(){return a},is_mobile:w,is_multiplier:h,is_sold:f,removeToast:b,server_time:E,setCurrentFocus:k}),B=i().createElement(l.ContractCard.Footer,{contract_info:n,getCardLabels:p.getCardLabels,is_multiplier:h,is_sell_requested:v,onClickSell:y}),O=i().createElement(i().Fragment,null,S,T,B);return i().createElement("div",{className:z()("db-summary-card",{"db-summary-card--mobile":w,"db-summary-card--inactive":m&&!r&&!n,"db-summary-card--is-loading":r,"db-summary-card--completed":f,"db-summary-card--completed-mobile":f&&w})},r&&i().createElement(lc,{speed:2}),!r&&n&&i().createElement(l.ContractCard,{contract_info:n,getCardLabels:p.getCardLabels,is_multiplier:h,profit_loss:n.profit,should_show_result_overlay:!0},i().createElement("div",{className:z()("dc-contract-card",{"dc-contract-card--green":n.profit>0,"dc-contract-card--red":n.profit<0})},O)),!r&&!n&&i().createElement(l.Text,{as:"p",line_height:"s",size:"xs"},(0,M.localize)("When you’re ready to trade, hit "),i().createElement("strong",null,(0,M.localize)("Run")),(0,M.localize)(". You’ll be able to track your bot’s performance here.")))}));const sc=cc,uc=(0,c.Pi)((function(e){var t=e.is_drawer_open,n=D().ui,r=uo(),o=r.dashboard,a=r.summary_card,c=a.is_contract_loading,s=a.contract_info,u=o.active_tour,d=n.is_mobile;return i().createElement("div",{className:z()({"run-panel-tab__content":!d,"run-panel-tab__content--mobile":d&&t,"run-panel-tab__content--summary-tab":!d&&t||u}),"data-testid":"mock-summary"},i().createElement(l.ThemedScrollbars,{className:z()({summary:!c&&!s,"summary--loading":d&&c||d&&!c&&s})},i().createElement(sc,{is_contract_loading:c,contract_info:s})))})),dc=function(e){var t=e.profit,n=e.className,r=t>=0;return i().createElement("div",{className:z()("db-contract-card__result",n,{"db-contract-card__result--won":r,"db-contract-card__result--lost":!r})},i().createElement(l.Text,{weight:"bold",className:"db-contract-card__result-caption"},r?i().createElement(i().Fragment,null,(0,M.localize)("Won"),i().createElement(l.Icon,{icon:"IcCheckmarkCircle",className:"db-contract-card__result-icon",color:"green"})):i().createElement(i().Fragment,null,(0,M.localize)("Lost"),i().createElement(l.Icon,{icon:"IcCrossCircle",className:"db-contract-card__result-icon",color:"red"}))))},pc=(0,Yi.observer)((function(){var e=uo().run_panel.setShowBotStopMessage,t=(0,o.useRef)(6e3),n=setTimeout((function(){t.current&&e(!1)}),t.current);return i().createElement("div",{className:"bot-stop-notification",onMouseOver:function(e){clearTimeout(n)},onMouseLeave:function(t){setTimeout((function(){e(!1)}),4e3)},"data-testid":"bot-stop-notification"},i().createElement(l.Toast,null,i().createElement("div",null,i().createElement(M.Localize,{i18n_default_text:"You’ve just stopped the bot. Any open contracts can be viewed on the <0>Reports</0> page.",components:[i().createElement("a",{key:0,style:{color:"var(--general-main-1)"},rel:"noopener noreferrer",target:"_blank",href:"/reports"})]})),i().createElement(l.Icon,{icon:"IcCross",className:"notification-close",data_testid:"notification-close",onClick:function(){return e(!1)}})))}));function fc(){return fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fc.apply(this,arguments)}function mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hc=function(e){var t=e.className;return i().createElement("div",{className:z()("circular-wrapper",t)},i().createElement("span",{className:"static-circle"}),i().createElement("span",{className:"dynamic-circle"}))},yc=function(e){switch(e.contract_stage){case sr.NOT_RUNNING:default:return i().createElement(M.Localize,{i18n_default_text:"Bot is not running"});case sr.STARTING:return i().createElement(M.Localize,{i18n_default_text:"Bot is starting"});case sr.PURCHASE_SENT:return i().createElement(M.Localize,{i18n_default_text:"Buying contract"});case sr.PURCHASE_RECEIVED:return i().createElement(M.Localize,{i18n_default_text:"Contract bought"});case sr.IS_STOPPING:return i().createElement(M.Localize,{i18n_default_text:"Bot is stopping"});case sr.CONTRACT_CLOSED:return i().createElement(M.Localize,{i18n_default_text:"Contract closed"})}},vc=(0,c.Pi)((function(e){var t=e.className,n=uo(),r=n.run_panel,o=n.summary_card,a=D().client,c=o.is_contract_completed,s=o.profit,u=r.contract_stage,d=r.is_stop_button_visible,p=r.is_stop_button_disabled,f=r.onRunButtonClick,m=r.onStopBotClick,h=r.performSelfExclusionCheck,y=r.should_show_overlay,v=r.show_bot_stop_message,_=a.account_status,g=null==_?void 0:_.cashier_validation,b=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return mc(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mc(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i().useState(!1)),k=b[0],E=b[1],w=null==g?void 0:g.includes("WithdrawServiceUnavailableForPA");i().useEffect((function(){h()}),[]),i().useEffect((function(){k&&setTimeout((function(){E(!1)}),1e3)}),[k]);var S=["","",""],T=u-(u===sr.PURCHASE_SENT||u===sr.PURCHASE_RECEIVED?2:3);if(T>=0){T<S.length&&(S[T]="active"),c&&(T+=1);for(var B=0;B<T;B++)S[B]="completed"}return i().createElement("div",{className:z()("animation__wrapper",t)},i().createElement(l.Button,fc({is_disabled:(p||k)&&!w,className:"animation__button",id:d?"db-animation__stop-button":"db-animation__run-button",text:d?(0,M.localize)("Stop"):(0,M.localize)("Run"),icon:i().createElement(l.Icon,{icon:d?"IcBotStop":"IcPlay",color:"active"}),onClick:function(){E(!0),d?m():f()},has_effect:!0},d||!w?{primary:!0}:{green:!0})),v&&i().createElement(pc,null),i().createElement("div",{className:z()("animation__container",t,{"animation--running":u>0,"animation--completed":y&&c})},y&&c&&i().createElement(dc,{profit:s}),i().createElement("span",{className:"animation__text"},i().createElement(yc,{contract_stage:u})),i().createElement("div",{className:"animation__progress"},i().createElement("div",{className:"animation__progress-line"},i().createElement("div",{className:"animation__progress-bar animation__progress-".concat(u)})),S.map((function(e,t){return i().createElement(hc,{key:t,className:e})})))))}));vc.propTypes={className:La().string};const _c=vc;var gc=function(e){var t=e.icon,n=e.title,r=e.message,o=e.className;return i().createElement(i().Fragment,null,i().createElement(l.Popover,{className:z()(o,"transactions__icon"),alignment:"left",message:n,zIndex:qa.TRANSACTION},t),r)},bc=function(){return i().createElement(xl.ZP,{className:"transactions__loader-text",height:10,width:80,speed:3,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)"},i().createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"100",height:"12"}))},kc=function(){return i().createElement(xl.ZP,{className:"transactions__loader-icon",speed:3,width:24,height:24,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)"},i().createElement("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"24",height:"24"}))},Ec=function(e){var t=e.icon,n=e.title,r=e.children;return i().createElement("div",{className:"transactions__popover-item"},t&&i().createElement("div",{className:"transaction__popover-icon"},t),i().createElement("div",{className:"transactions__popover-details"},i().createElement("div",{className:"transactions__popover-title"},n),r))},wc=function(e){var t=e.contract;return i().createElement("div",{className:"transactions__popover-content"},t.transaction_ids&&i().createElement(Ec,{title:(0,M.localize)("Reference IDs")},t.transaction_ids.buy&&i().createElement("div",{className:"transactions__popover-value"},"".concat(t.transaction_ids.buy," ").concat((0,M.localize)("(Buy)"))),t.transaction_ids.sell&&i().createElement("div",{className:"transactions__popover-value"},"".concat(t.transaction_ids.sell," ").concat((0,M.localize)("(Sell)")))),t.tick_count&&i().createElement(Ec,{title:(0,M.localize)("Duration")},i().createElement("div",{className:"transactions__popover-value"},"".concat(t.tick_count," ").concat((0,M.localize)("ticks")))),t.barrier&&i().createElement(Ec,{title:(0,M.localize)("Barrier")},i().createElement("div",{className:"transactions__popover-value"},t.barrier))||t.high_barrier&&t.low_barrier&&i().createElement(Ec,{title:(0,M.localize)("Barriers")},i().createElement("div",{className:"transactions__popover-value"},"".concat(t.high_barrier," ").concat((0,M.localize)("(High)"))),i().createElement("div",{className:"transactions__popover-value"},"".concat(t.low_barrier," ").concat((0,M.localize)("(Low)")))),t.date_start&&i().createElement(Ec,{title:(0,M.localize)("Start time")},i().createElement("div",{className:"transactions__popover-value"},(0,p.convertDateFormat)(t.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]"))),t.entry_tick&&i().createElement(Ec,{title:(0,M.localize)("Entry spot")},i().createElement("div",{className:"transactions__popover-value"},t.entry_tick),t.entry_tick_time&&i().createElement("div",{className:"transactions__popover-value"},(0,p.convertDateFormat)(t.entry_tick_time,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]"))),t.exit_tick&&t.exit_tick_time&&i().createElement(Ec,{title:(0,M.localize)("Exit spot")},i().createElement("div",{className:"transactions__popover-value"},t.exit_tick),i().createElement("div",{className:"transactions__popover-value"},(0,p.convertDateFormat)(t.exit_tick_time,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")))||t.exit_tick&&i().createElement(Ec,{title:(0,M.localize)("Exit time")},i().createElement("div",{className:"transactions__popover-value"},t.exit_tick)))},Sc=(0,c.Pi)((function(e){var t=e.contract,n=uo().transactions,r=n.active_transaction_id,o=n.setActiveTransactionId;return i().createElement(l.Popover,{zIndex:qa.TRANSACTION,alignment:"left",className:"transactions__item-wrapper",is_open:t&&r===t.transaction_ids.buy,message:t&&i().createElement(wc,{contract:t})},i().createElement("div",{className:"transactions__item",onClick:t&&function(){return o(t.transaction_ids.buy)}},i().createElement("div",{className:"transactions__cell transactions__trade-type"},i().createElement("div",{className:"transactions__loader-container"},t?i().createElement(gc,{icon:i().createElement(l.Icon,{icon:"IcUnderlying".concat(t.underlying),size:16}),title:t.display_name}):i().createElement(kc,null)),i().createElement("div",{className:"transactions__loader-container"},t?i().createElement(gc,{icon:i().createElement(l.IconTradeTypes,{type:t.contract_type,size:16}),title:(0,a.getContractTypeName)(t)}):i().createElement(kc,null))),i().createElement("div",{className:"transactions__cell transactions__entry-spot"},i().createElement(gc,{icon:i().createElement(l.Icon,{icon:"IcContractEntrySpot"}),title:(0,M.localize)("Entry spot"),message:t&&t.entry_tick||i().createElement(bc,null)})),i().createElement("div",{className:"transactions__cell transactions__exit-spot"},i().createElement(gc,{icon:i().createElement(l.Icon,{icon:"IcContractExitSpot"}),title:(0,M.localize)("Exit spot"),message:t&&t.exit_tick||i().createElement(bc,null)})),i().createElement("div",{className:"transactions__cell transactions__stake"},t?i().createElement(l.Money,{amount:t.buy_price,currency:t.currency,show_currency:!0}):i().createElement(bc,null)),i().createElement("div",{className:"transactions__cell transactions__profit"},null!=t&&t.is_completed?i().createElement("div",{className:z()({"transactions__profit--win":t.profit>=0,"transactions__profit--loss":t.profit<0})},i().createElement(l.Money,{amount:Math.abs(t.profit),currency:t.currency,show_currency:!0})):i().createElement(bc,null))))}));Sc.propTypes={contract:La().object};const Tc=Sc;var Bc=function(e){var t=e.row,n=e.is_new_row,r=(0,p.useNewRowTransition)(n).in_prop;switch(t.type){case Qr.CONTRACT:var o=t.data;return i().createElement(wl.Z,{in:r,timeout:500,classNames:"list__animation"},i().createElement(Tc,{contract:o}));case Qr.DIVIDER:return i().createElement("div",{className:"transactions__divider"},i().createElement("div",{className:"transactions__divider-line"}));default:return null}},Oc=(0,c.Pi)((function(e){var t=e.is_drawer_open,n=D().ui,r=uo(),o=r.run_panel,a=r.transactions,c=o.contract_stage,s=a.transactions,u=a.onMount,d=a.onUnmount,p=a.toggleTransactionDetailsModal,f=n.is_mobile;return i().useEffect((function(){return u(),function(){return d()}}),[u,d]),i().createElement("div",{className:z()("transactions",{"run-panel-tab__content":!f,"run-panel-tab__content--mobile":f&&t})},i().createElement("div",{className:"download__container transaction-details__button-container"},i().createElement(Kl,{tab:"transactions"}),i().createElement(l.Button,{id:"download__container__view-detail-button",className:"download__container__view-detail-button",is_disabled:!(null!=s&&s.length),text:(0,M.localize)("View Detail"),onClick:function(){p(!0)},secondary:!0,icon:i().createElement(l.Icon,{icon:"IcDbotViewDetail",size:18})})),i().createElement("div",{className:"transactions__header"},i().createElement("span",{className:"transactions__header-column transactions__header-type"},(0,M.localize)("Type")),i().createElement("span",{className:"transactions__header-column transactions__header-spot"},(0,M.localize)("Entry/Exit spot")),i().createElement("span",{className:"transactions__header-column transactions__header-profit"},(0,M.localize)("Buy price and P/L"))),i().createElement("div",{className:z()({transactions__content:!f,"transactions__content--mobile":f})},i().createElement("div",{className:"transactions__scrollbar"},null!=s&&s.length?i().createElement(l.DataList,{className:"transactions",data_source:s,rowRenderer:function(e){return i().createElement(Bc,e)},keyMapper:function(e){switch(e.type){case Qr.CONTRACT:return e.data.transaction_ids.buy;case Qr.DIVIDER:return e.data;default:return null}},getRowSize:function(e){var t=e.index;switch((null==s?void 0:s[t]).type){case Qr.CONTRACT:return 50;case Qr.DIVIDER:return 21;default:return 0}}}):i().createElement(i().Fragment,null,c>=sr.STARTING?i().createElement(Tc,{contract:null}):i().createElement(l.ThemedScrollbars,null,i().createElement("div",{className:"transactions-empty-box"},i().createElement("div",{className:"transactions-empty"},i().createElement("div",{className:"transactions-empty__icon-box"},i().createElement(l.Icon,{icon:"IcBox",className:"transactions-empty__icon",size:64,color:"secondary"})),i().createElement(l.Text,{as:"h4",size:"xs",weight:"bold",align:"center",color:"less-prominent",line_height:"xxs",className:"transactions-empty__header"},(0,M.localize)("There are no transactions to display")),i().createElement("div",{className:"transactions-empty__message"},i().createElement(l.Text,{size:"xxs",color:"less-prominent"},(0,M.localize)("Here are the possible reasons:")),i().createElement("ul",{className:"transactions-empty__list"},i().createElement("li",null,(0,M.localize)("The bot is not running")),i().createElement("li",null,(0,M.localize)("The stats are cleared")))))))))))}));Oc.propTypes={is_drawer_open:Ia.PropTypes.bool};const xc=Oc;var Ac=["active_index","is_drawer_open","active_tour","setActiveTabIndex"],Cc=function(e){var t=e.content,n=e.contentClassName,r=e.title;return i().createElement("div",{className:"run-panel__tile"},i().createElement("div",{className:"run-panel__tile-title"},r),i().createElement("div",{className:z()("run-panel__tile-content",n)},t))},Ic=function(e){var t=e.currency,n=e.is_mobile,r=e.lost_contracts,o=e.number_of_runs,a=e.total_stake,c=e.total_payout,s=e.toggleStatisticsInfoModal,u=e.total_profit,d=e.won_contracts;return i().createElement("div",{className:z()("run-panel__stat",{"run-panel__stat--mobile":n})},i().createElement("div",{className:"run-panel__stat--info",onClick:s},i().createElement("div",{className:"run-panel__stat--info-item"},i().createElement(M.Localize,{i18n_default_text:"What's this?"}))),i().createElement("div",{className:"run-panel__stat--tiles"},i().createElement(Cc,{title:(0,M.localize)("Total stake"),alignment:"top",content:i().createElement(l.Money,{amount:a,currency:t,show_currency:!0})}),i().createElement(Cc,{title:(0,M.localize)("Total payout"),alignment:"top",content:i().createElement(l.Money,{amount:c,currency:t,show_currency:!0})}),i().createElement(Cc,{title:(0,M.localize)("No. of runs"),alignment:"top",content:o}),i().createElement(Cc,{title:(0,M.localize)("Contracts lost"),alignment:"bottom",content:r}),i().createElement(Cc,{title:(0,M.localize)("Contracts won"),alignment:"bottom",content:d}),i().createElement(Cc,{title:(0,M.localize)("Total profit/loss"),content:i().createElement(l.Money,{amount:u,currency:t,has_sign:!0,show_currency:!0}),alignment:"bottom",contentClassName:z()("run-panel__stat-amount",{"run-panel__stat-amount--positive":u>0,"run-panel__stat-amount--negative":u<0})})))},Lc=function(e){var t=e.is_clear_stat_disabled,n=e.is_mobile,r=e.is_drawer_open,o=e.onClearStatClick;return n&&r&&i().createElement(l.Button,{id:"db-run-panel__clear-button",className:"run-panel__clear-button",is_disabled:t,text:(0,M.localize)("Reset"),onClick:o,secondary:!0})},Nc=function(e){var t=e.active_index,n=e.is_drawer_open,r=e.active_tour,o=e.setActiveTabIndex,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Ac);return i().createElement(i().Fragment,null,i().createElement(l.Tabs,{active_index:t,onTabItemClick:o,top:!0},i().createElement("div",{id:"db-run-panel-tab__summary",label:(0,M.localize)("Summary")},i().createElement(uc,{is_drawer_open:n})),i().createElement("div",{id:"db-run-panel-tab__transactions",label:(0,M.localize)("Transactions")},i().createElement(xc,{is_drawer_open:n})),i().createElement("div",{id:"db-run-panel-tab__journal",label:(0,M.localize)("Journal")},i().createElement(Ql,null))),(n&&2!==t||r)&&i().createElement(Ic,a))},Rc=function(e){var t=e.is_clear_stat_disabled,n=e.onClearStatClick;return i().createElement("div",{className:"run-panel__footer"},i().createElement(l.Button,{id:"db-run-panel__clear-button",className:"run-panel__footer-button",is_disabled:t,text:(0,M.localize)("Reset"),onClick:n,has_effect:!0,secondary:!0}))},Dc=function(){return i().createElement("div",{className:"controls__section"},i().createElement("div",{className:"controls__buttons"},i().createElement(_c,{className:"controls__animation",should_show_overlay:!0,info_direction:"right"})))},Pc=function(e){var t=e.is_mobile,n=e.is_statistics_info_modal_open,r=e.toggleStatisticsInfoModal;return i().createElement(l.Modal,{className:z()("statistics__modal",{"statistics__modal--mobile":t}),title:(0,M.localize)("What's this?"),is_open:n,toggleModal:r,width:"440px"},i().createElement(l.Modal.Body,null,i().createElement("div",{className:z()("statistics__modal-body",{"statistics__modal-body--mobile":t})},i().createElement(l.ThemedScrollbars,{className:"statistics__modal-scrollbar"},i().createElement(l.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content no-margin"},(0,M.localize)("Total stake")),i().createElement(l.Text,{as:"p"},(0,M.localize)("Total stake since you last cleared your stats.")),i().createElement(l.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,M.localize)("Total payout")),i().createElement(l.Text,{as:"p"},(0,M.localize)("Total payout since you last cleared your stats.")),i().createElement(l.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,M.localize)("No. of runs")),i().createElement(l.Text,{as:"p"},(0,M.localize)("The number of times your bot has run since you last cleared your stats. Each run includes the execution of all the root blocks.")),i().createElement(l.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,M.localize)("Contracts lost")),i().createElement(l.Text,{as:"p"},(0,M.localize)("The number of contracts you have lost since you last cleared your stats.")),i().createElement(l.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,M.localize)("Contracts won")),i().createElement(l.Text,{as:"p"},(0,M.localize)("The number of contracts you have won since you last cleared your stats.")),i().createElement(l.Text,{as:"p",weight:"bold",className:"statistics__modal-body--content"},(0,M.localize)("Total profit/loss")),i().createElement(l.Text,{as:"p"},(0,M.localize)("Your total profit/loss since you last cleared your stats. It is the difference between your total payout and your total stake."))))))},zc=(0,c.Pi)((function(){var e=uo(),t=e.run_panel,n=e.dashboard,r=D(),o=r.client,a=r.ui.is_mobile,c=o.currency,s=t.active_index,u=t.is_drawer_open,d=t.is_statistics_info_modal_open,p=t.is_clear_stat_disabled,f=t.onClearStatClick,m=t.onMount,h=t.onRunButtonClick,y=t.onUnmount,v=t.setActiveTabIndex,_=t.toggleDrawer,g=t.toggleStatisticsInfoModal,b=t.statistics,k=n.active_tour,E=n.active_tab,w=b.total_payout,S=b.total_profit,T=b.total_stake,B=b.won_contracts,O=b.lost_contracts,x=b.number_of_runs,A=G.BOT_BUILDER,C=G.CHART;i().useEffect((function(){return m(),function(){return y()}}),[m,y]),i().useEffect((function(){a&&_(!1)}),[]);var I=i().createElement(Nc,{active_index:s,currency:c,is_drawer_open:u,is_mobile:a,lost_contracts:O,number_of_runs:x,setActiveTabIndex:v,toggleStatisticsInfoModal:g,total_payout:w,total_profit:S,total_stake:T,won_contracts:B,active_tour:k}),L=i().createElement(Rc,{is_clear_stat_disabled:p,onClearStatClick:f}),N=i().createElement(Lc,{is_clear_stat_disabled:p,is_mobile:a,is_drawer_open:u,onClearStatClick:f});return([A,C].includes(E)||k||a)&&"bot_builder"!==k?i().createElement(i().Fragment,null,i().createElement("div",{className:a&&u?"run-panel__container--mobile":"run-panel"},i().createElement(l.Drawer,{anchor:"right",className:z()("run-panel",{"run-panel__container":!a,"run-panel__container--tour-active":!a&&k}),contentClassName:"run-panel__content",header:N,footer:!a&&L,is_open:u,toggleDrawer:_,width:366,zIndex:qa.RUN_PANEL},I),a&&i().createElement(Dc,null)),i().createElement(ac,{onRunButtonClick:h}),i().createElement(Pc,{is_mobile:a,is_statistics_info_modal_open:d,toggleStatisticsInfoModal:g})):null}));const jc=zc;function Mc(e){return Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mc(e)}function Fc(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Mc(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Mc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Mc(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uc="transaction-details-modal-mobile",Vc=function(){return i().createElement(xl.ZP,{className:"transactions__loader-text","data-testid":"transaction_details_card_cell_loader",height:10,width:80,speed:3,foregroundColor:"var(--general-section-2)",backgroundColor:"var(--general-hover)"},i().createElement("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"100",height:"12"}))},Gc=function(e){var t,n=e.label,r=void 0===n?"":n,o=e.large_title,a=void 0!==o&&o,l=e.right_aligned,c=void 0!==l&&l,s=e.title,u=void 0===s?"":s,d=e.loader,p=void 0!==d&&d;return i().createElement("div",{className:z()("".concat(Uc,"__card__column"),Fc({},"".concat(Uc,"__right-align"),c))},u&&i().createElement("div",{className:z()((t={},Fc(t,"".concat(Uc,"__small-title"),!a),Fc(t,"".concat(Uc,"__large-title"),a),t))},(0,M.localize)(u)),i().createElement("div",{className:"".concat(Uc,"__label")},p?i().createElement(Vc,null):r))},Hc=function(e){var t=e.message,n=e.icon;return i().createElement("div",{className:z()("".concat(Uc,"__table-cell"),"".concat(Uc,"__table-cell__icon-wrapper"))},t&&i().createElement(l.Popover,{alignment:"right",message:t,zIndex:"7"},n))};function Jc(e){var t,n,r,o,c=e.transaction;return i().createElement("div",{className:"".concat(Uc,"__card")},i().createElement("div",{className:"".concat(Uc,"__card__row")},i().createElement(Gc,{label:i().createElement("div",{className:"".concat(Uc,"__icon-wrapper")},i().createElement(Hc,{message:null==c?void 0:c.display_name,icon:i().createElement(l.Icon,{icon:"IcUnderlying".concat(null==c?void 0:c.underlying),size:32})}),i().createElement(Hc,{message:(0,a.getContractTypeName)(c),icon:i().createElement(l.IconTradeTypes,{type:null==c?void 0:c.contract_type,size:24})}))})),i().createElement("div",{className:"".concat(Uc,"__card__row")},i().createElement(Gc,{title:"Ref. ID",label:null==c||null===(t=c.transaction_ids)||void 0===t?void 0:t.buy})),i().createElement("div",{className:"".concat(Uc,"__card__row")},i().createElement(Gc,{title:"Timestamp",label:(0,p.convertDateFormat)(null==c?void 0:c.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")}),i().createElement(Gc,{title:"Entry Spot",label:null==c?void 0:c.entry_tick,right_aligned:!0,loader:!c.entry_tick})),i().createElement("div",{className:"".concat(Uc,"__card__row")},i().createElement(Gc,{title:"Buy Price",label:Math.abs(null!==(n=null==c?void 0:c.buy_price)&&void 0!==n?n:0).toFixed(2)}),i().createElement(Gc,{title:"Exit Spot",label:null==c?void 0:c.exit_tick,right_aligned:!0,loader:!c.exit_tick})),i().createElement("div",{className:"".concat(Uc,"__card__row")},i().createElement(Gc,{title:"Profit / Loss",large_title:!0}),i().createElement(Gc,{label:i().createElement("div",{className:z()((r={},Fc(r,"".concat(Uc,"__card__profit--win"),(null==c?void 0:c.profit)>0),Fc(r,"".concat(Uc,"__card__profit--loss"),(null==c?void 0:c.profit)<0),r))},Math.abs(null!==(o=null==c?void 0:c.profit)&&void 0!==o?o:0).toFixed(2)),right_aligned:!0,loader:!c.is_completed})))}var Wc=(0,c.Pi)((function(){var e,t,n,r,o,a,c=D().client,s=uo(),u=s.transactions,d=s.run_panel,p=u.toggleTransactionDetailsModal,f=u.is_transaction_details_modal_open,m=u.transactions,h=d.statistics,y=d.toggleStatisticsInfoModal;return i().createElement(l.MobileFullPageModal,{is_modal_open:f,className:"transaction-details-modal-mobile",header:(0,M.localize)("Transactions detailed summary"),onClickClose:function(){p(!1)},height_offset:"80px"},i().createElement("div",{className:"transaction-details-modal-mobile__wrapper","data-testid":"transaction_details_cards"},null==m?void 0:m.map((function(e){var t,n=e.data;return e.type===Qr.CONTRACT?i().createElement(Jc,{transaction:n,key:null==n||null===(t=n.transaction_ids)||void 0===t?void 0:t.buy}):i().createElement("div",{className:"transaction-details-modal-mobile__divider",key:"transaction-row-divider-".concat(n)},i().createElement("div",{className:"transactions__divider-line"}))}))),i().createElement("div",{className:"transaction-details-modal-mobile__card__footer"},i().createElement(Ic,{currency:null==c?void 0:c.currency,is_mobile:!0,lost_contracts:null!==(e=null==h?void 0:h.lost_contracts)&&void 0!==e?e:0,number_of_runs:null!==(t=null==h?void 0:h.number_of_runs)&&void 0!==t?t:0,toggleStatisticsInfoModal:y,total_payout:null!==(n=null==h?void 0:h.total_payout)&&void 0!==n?n:0,total_profit:null!==(r=null==h?void 0:h.total_profit)&&void 0!==r?r:0,total_stake:null!==(o=null==h?void 0:h.total_stake)&&void 0!==o?o:0,won_contracts:null!==(a=null==h?void 0:h.won_contracts)&&void 0!==a?a:0})))}));const Yc=Wc,qc=(0,c.Pi)((function(){var e=D().ui.is_mobile;return i().createElement(o.Suspense,{fallback:i().createElement(l.Loading,null)},e?i().createElement(Yc,null):i().createElement(Vl,null))})),Kc=function(){return i().createElement(i().Fragment,null,i().createElement("audio",{id:"announcement","aria-label":"audio",src:"".concat(n.p,"media/announcement.mp3")}),i().createElement("audio",{id:"earned-money","aria-label":"audio",src:"".concat(n.p,"media/coins.mp3")}),i().createElement("audio",{id:"job-done","aria-label":"audio",src:"".concat(n.p,"media/job-done.mp3")}),i().createElement("audio",{id:"error","aria-label":"audio",src:"".concat(n.p,"media/out-of-bounds.mp3")}),i().createElement("audio",{id:"severe-error","aria-label":"audio",src:"".concat(n.p,"media/i-am-being-serious.mp3")}))};var Xc=G.BOT_BUILDER,Zc=G.CHART,Qc=(0,c.Pi)((function(){var e=D().ui,t=uo(),n=t.run_panel,r=t.dashboard,o=n.is_drawer_open,a=e.notification_messages_ui,l=r.active_tab,c=r.is_info_panel_visible;return i().createElement("div",{className:z()("notifications-container",{"notifications-container__dashboard":0===l&&c,"notifications-container--panel-open":[Xc,Zc].includes(l)&&o}),"data-testid":"dt_notifications_container"},i().createElement(a,null))}));const $c=Qc;var es,ts=function(e){return function(){return es||(es=(0,p.moduleLoader)((function(){return Promise.resolve().then(n.t.bind(n,20057,23))}))).then((function(e){(0,e.setSmartChartsPublicPath)((0,p.getUrlBase)("/js/smartcharts/"))})),es.then((function(t){return{default:t[e]}}))}},ns=i().lazy(ts("SmartChart")),rs=i().lazy(ts("ChartTitle")),os=(ts("ChartSize"),i().lazy(ts("ChartMode"))),is=i().lazy(ts("DrawTools")),as=i().lazy(ts("Share")),ls=i().lazy(ts("StudyLegend")),cs=i().lazy(ts("Views")),ss=i().lazy(ts("ToolbarWidget"));ts("FastMarker"),ts("RawMarker");const us=function(e){var t=e.updateChartType,n=e.updateGranularity,r=e.position;return i().createElement(ss,{position:r},i().createElement(os,{portalNodeId:"modal_root",onChartType:t,onGranularity:n}),(0,p.isDesktop)()&&i().createElement(i().Fragment,null,i().createElement(ls,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),i().createElement(cs,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),i().createElement(is,{portalNodeId:"modal_root"}),i().createElement(as,{portalNodeId:"modal_root"})))};var ds=(0,c.Pi)((function(e){var t=e.show_digits_stats,n=D(),r=n.common,o=n.ui,a=uo(),l=a.chart_store,c=a.run_panel,s=a.dashboard,u=l.chart_type,d=l.getMarketsOrder,p=l.granularity,f=l.onSymbolChange,m=l.setChartStatus,h=l.symbol,y=l.updateChartType,v=l.updateGranularity,_=l.wsForget,g=l.wsForgetStream,b=l.wsSendRequest,k=l.wsSubscribe,E=D().ui,w=E.is_mobile,S=E.is_desktop,T=c.is_drawer_open,B=s.is_chart_modal_visible,O=r.is_socket_opened,x={assetInformation:!1,countdown:!0,isHighestLowestMarkerEnabled:!1,language:r.current_language.toLowerCase(),position:o.is_chart_layout_default?"bottom":"left",theme:o.is_dark_mode_on?"dark":"light"};return i().createElement("div",{className:z()("dashboard__chart-wrapper",{"dashboard__chart-wrapper--expanded":T&&!w,"dashboard__chart-wrapper--modal":B&&!w})},i().createElement(ns,{id:"dbot",barriers:[],showLastDigitStats:t,chartControlsWidgets:null,enabledChartFooter:!1,chartStatusListener:function(e){return m(!e)},toolbarWidget:function(){return i().createElement(us,{updateChartType:y,updateGranularity:v,position:w?"bottom":null})},chartType:u,isMobile:w,enabledNavigationWidget:S,granularity:p,requestAPI:b,requestForget:_,requestForgetStream:g,requestSubscribe:k,settings:x,symbol:h,topWidgets:function(){return i().createElement(rs,{onChange:f})},isConnectionOpened:O,getMarketsOrder:d,isLive:!0,leftMargin:80}))}));const ps=ds;var fs=n(92410),ms=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:36;Blockly.Trashcan.prototype.MARGIN_BOTTOM_=2*e+t,Blockly.Trashcan.prototype.MARGIN_SIDE_=e,Blockly.Trashcan.prototype.click=function(){},window.dispatchEvent(new Event("resize"))},hs=n(99368);const ys=jc,vs=function(){return i().createElement("div",{className:"toolbar__section","data-testid":"dt_run_strategy"},i().createElement(_c,{className:"toolbar__animation",should_show_overlay:!0,info_direction:"left"}))};function _s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const gs=(0,c.Pi)((function(){var e,t=uo().dashboard,n=t.is_chart_modal_visible,r=t.setChartModalVisibility,a=(2,function(e){if(Array.isArray(e))return e}(e=i().useState({width:0,height:0}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return _s(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_s(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],c=a[1],s=function(){c({width:window.innerWidth,height:window.innerHeight})};(0,o.useEffect)((function(){return window.addEventListener("resize",s),c({width:window.innerWidth,height:window.innerHeight}),function(){window.removeEventListener("resize",s)}}),[]);var u=(l.width-426)/2,d=(l.height-481)/2,p=d>=0?d:0,f=u>=0?u:0;return i().createElement(Ol,{bounds:".dashboard__main",xaxis:f,yaxis:p,is_visible:n,header_title:(0,M.localize)("Chart"),onCloseDraggable:r,minWidth:426,width:426,dragHandleClassName:"react-rnd-wrapper-header"},i().createElement("div",{className:"chart-modal-dialog","data-testid":"chart-modal-dialog"},i().createElement(ps,{show_digits_stats:!1})))})),bs=(0,c.Pi)((function(){var e=D().ui.is_desktop;return i().createElement(o.Suspense,{fallback:i().createElement(l.Loading,null)},e&&i().createElement(gs,null))})),ks=(0,c.Pi)((function(){var e=uo().dashboard,t=e.active_tab,n=e.active_tour,r=e.setActiveTour,o=e.setTourDialogVisibility,a=ga(),l=a.is_close_tour,c=a.is_finished,s=a.handleJoyrideCallback,u=a.setIsCloseTour;return i().useEffect((function(){(l||c)&&(u(!1),r(""))}),[l,c,r,u]),K("onboard_tour_token")||0!==t||o(!0),i().createElement(i().Fragment,null,i().createElement(ya,null),n&&i().createElement(na,{handleCallback:s,steps:da,spotlightClicks:!0}))}));function Es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ws(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ws(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ss={content:[],header:"",img:"",tour_step_key:1};const Ts=(0,c.Pi)((function(){var e=uo().dashboard,t=e.onCloseTour,n=e.onTourEnd,r=e.setTourActiveStep,o=e.active_tour,a=e.active_tab,c=e.setActiveTour,s=Es(i().useState(1),2),u=s[0],d=s[1],p=Es(i().useState(Ss),2),f=p[0],m=p[1],h=f.content,y=f.header,v=f.img,_=f.media,g=f.tour_step_key,b=1===u?(0,M.localize)("Start"):(0,M.localize)("Next"),k=8===u?(0,M.localize)("Got it, thanks!"):b,E=8===g?"finish-onboard-tour":"next-onboard-tour",w="onboarding"===o;return i().useEffect((function(){ma.forEach((function(e){e.tour_step_key===u&&m(e),r(u)}))}),[u]),K("onboard_tour_token")||0!==a||c("onboarding"),o?i().createElement("div",{className:z()("dbot-slider",{"dbot-slider--active":1===u,"dbot-slider--tour-position":1!==u}),"data-testid":"onboarding-tour-mobile"},1!==g&&i().createElement("div",{className:"dbot-slider__navbar"},i().createElement(l.Text,{color:"less-prominent",weight:"less-prominent",line_height:"s",size:"xxs","data-testid":"dbot-onboard-slider__navbar"},"".concat(g-1,"/7")),i().createElement("span",{onClick:t},i().createElement(l.Icon,{icon:"IcCross",data_testid:"exit-onboard-tour",className:"db-contract-card__result-icon",color:"secondary"}))),y&&i().createElement(l.Text,{color:"prominent",weight:"bold",align:"center",className:"dbot-slider__title",as:"span",line_height:"s",size:"xs"},(0,M.localize)(y)),_&&i().createElement("div",{className:"dbot-slider__media"},i().createElement("video",{autoPlay:!0,loop:!0,controls:!0,preload:"auto",playsInline:!0,disablePictureInPicture:!0,controlsList:"nodownload",src:_})),v&&i().createElement("div",{className:"dbot-slider__image"},i().createElement("img",{src:v})),h&&i().createElement(i().Fragment,null,h.map((function(e){return i().createElement(l.Text,{key:e,align:"center",color:"prominent",className:"dbot-slider__content",as:"div",line_height:"s",size:"xxs"},e)}))),i().createElement("div",{className:"dbot-slider__status"},i().createElement("div",{className:"dbot-slider__progress-bar"},i().createElement(l.ProgressBarTracker,{step:u,steps_list:ma.map((function(e){return e.tour_step_key.toString()})),onStepChange:d})),i().createElement("div",{className:"dbot-slider__button-group"},1===u&&i().createElement(Oa,{onClick:function(){t()},label:(0,M.localize)("Skip"),"data-testid":"skip-onboard-tour"}),![1,2,8].includes(u)&&i().createElement(Oa,{onClick:function(){d(u-1)},label:(0,M.localize)("Previous"),"data-testid":"prev-onboard-tour"}),i().createElement(Oa,{type:"danger",onClick:function(){d(u+1),n(u,w)},label:k,"data-testid":E})))):null})),Bs=(0,Yi.observer)((function(e){var t=e.is_mobile;return i().createElement(i().Fragment,null,t?i().createElement(Ts,null):i().createElement(ks,null))})),Os=function(e){var t=e.id_ref;return i().createElement("div",{className:"load-strategy__preview-workspace-container",id:"load-strategy__blockly-container",ref:t},i().createElement(ho,null))};function xs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var As=(0,c.Pi)((function(){var e,t,n=D().ui.is_mobile,r=uo(),o=r.load_modal,a=r.save_modal,c=r.dashboard,s=(o.handleFileChange,o.loadFileFromRecent),u=o.dashboard_strategies,d=(a.onConfirmSave,c.setActiveTab),p=c.setPreviewOnDialog,f=c.has_mobile_preview_loaded,m=c.setActiveTabTutorial,h=(i().useRef(null),2,function(e){if(Array.isArray(e))return e}(t=i().useState(!0))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return xs(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xs(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=h[0],v=(h[1],i().useRef(null)),_=!(null==u||!u.length);i().useEffect((function(){var e,t,n;3===(null===(e=v.current)||void 0===e?void 0:e.children.length)&&(null==v||null===(t=v.current)||void 0===t||t.removeChild(null==v||null===(n=v.current)||void 0===n?void 0:n.children[1]))}),[null===(e=v.current)||void 0===e?void 0:e.children.length]);var g=function(){return i().createElement("button",{className:"load-strategy__button-group--open",onClick:function(){j.Analytics.trackEvent("ce_bot_dashboard_form",{action:"push_open_button",form_source:"ce_bot_dashboard_form"}),j.Analytics.trackEvent("ce_bot_builder_form",{action:"open",form_source:"bot_dashboard_form_open"}),p(!1),s(),d(G.BOT_BUILDER)}},(0,M.localize)("Open"))};return i().createElement("div",{className:"load-strategy__container load-strategy__container--has-footer"},y&&i().createElement("div",{className:z()("load-strategy__local-preview",{"load-strategy__local-preview--listed":_})},i().createElement("div",{className:"load-strategy__recent-preview"},i().createElement("div",{className:z()("load-strategy__title","load-strategy__recent-preview-title",{"load-strategy__title--listed":_&&n})},!n&&i().createElement(M.Localize,{i18n_default_text:"Preview"}),i().createElement("div",{className:"tab__dashboard__preview__retrigger"},i().createElement("button",{onClick:function(){j.Analytics.trackEvent("ce_bot_dashboard_form",{action:"push_user_guide",form_source:"ce_bot_dashboard_form"}),d(G.TUTORIAL),m(0)}},i().createElement(l.Icon,{className:"tab__dashboard__preview__retrigger__icon",icon:"IcDbotUserGuide"}),!n&&i().createElement(l.Text,{size:"xs",line_height:"s",className:"tab__dashboard__preview__retrigger__text"},(0,M.localize)("User Guide"))))),!n&&i().createElement(i().Fragment,null,i().createElement("div",{className:"load-strategy__preview-workspace"},i().createElement(Os,{id_ref:v,type:"local"})),i().createElement("div",{className:"load-strategy__button-group"},g())),i().createElement(l.MobileWrapper,null,i().createElement(l.Dialog,{is_visible:f,onCancel:function(){return p(!1)},is_mobile_full_width:!0,className:"dc-dialog__wrapper--preview",has_close_icon:!0,title:(0,M.localize)("Preview")},i().createElement(Os,{id_ref:v,type:"local"}),i().createElement("div",{className:"load-strategy__button-group"},g()))))))}));const Cs=As;function Is(e){return Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Is(e)}function Ls(){Ls=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Is(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Ns(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Rs(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ns(i,r,o,a,l,"next",e)}function l(e){Ns(i,r,o,a,l,"throw",e)}a(void 0)}))}}const Ds=(0,c.Pi)((function(){var e=uo(),t=e.load_modal,n=e.dashboard,r=t.is_delete_modal_open,o=t.onToggleDeleteDialog,c=t.selected_strategy_id,s=t.setDashboardStrategies,u=t.setSelectedStrategyId,d=t.loadStrategyToBuilder,p=t.previewed_strategy_id,f=t.setPreviewedStrategyId,m=t.refreshStrategiesTheme,h=t.resetBotBuilderStrategy,y=n.setOpenSettings,v=function(){var e=Rs(Ls().mark((function e(t,n){var r,o,i;return Ls().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.length){e.next=11;break}if(r=null==n?void 0:n.filter((function(e){return e.id===p})),c!==t){e.next=6;break}return u(null==n||null===(o=n[0])||void 0===o?void 0:o.id),e.next=6,d(null==n?void 0:n[0]);case 6:return r.length?(f(p),u(p)):f(null==n||null===(i=n[0])||void 0===i?void 0:i.id),e.next=9,m();case 9:e.next=12;break;case 11:h();case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Rs(Ls().mark((function e(t){var n,r;return Ls().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.getSavedWorkspaces)();case 2:return n=e.sent,r=n.filter((function(e){return e.id!==t})),s(r),_r().setItem("saved_workspaces",rn().compress(JSON.stringify(r))),e.next=8,v(t,r);case 8:o(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){j.Analytics.trackEvent("ce_bot_builder_form",{delete_popup_respond:e,form_source:"ce_bot_dashboard_form"})},b=function(e,t){"confirm"===e?(_(c),y("delete",!0),g("yes")):g("no"),o(t)};return i().createElement("div",null,i().createElement(l.Dialog,{title:(0,M.localize)("Delete bot"),is_visible:r,confirm_button_text:(0,M.localize)("Yes, delete"),onConfirm:function(){b("confirm",!1),y("delete",!0)},cancel_button_text:(0,M.localize)("No"),onCancel:function(){b("cancel",!1)},is_mobile_full_width:!1,className:"dc-dialog__delete-strategy--delete",has_close_icon:!0},i().createElement("div",null,i().createElement(l.Text,{color:"prominent",line_height:"s",size:"xs"},(0,M.localize)("Your bot will be permanently deleted when you hit "),i().createElement("strong",null,(0,M.localize)("Yes, delete.")))),i().createElement("div",null,i().createElement(l.Text,{color:"prominent",line_height:"xl",size:"xs"},(0,M.localize)("Are you sure you want to delete it?")))))}));function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zs="edit",js="save",Ms="delete",Fs="list",Us="init",Vs=[{type:zs,icon:"IcEdit"},{type:js,icon:"IcSave"},{type:Ms,icon:"IcDelete"}],Gs=[{type:Fs,icon:"IcPreview",label:(0,M.localize)("Preview")},{type:zs,icon:"IcEdit",label:(0,M.localize)("Edit")},{type:js,icon:"IcSave",label:(0,M.localize)("Save")},{type:Ms,icon:"IcDelete",label:(0,M.localize)("Delete")}];function Hs(e){return Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hs(e)}function Js(){Js=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Hs(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Ws(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Ys(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ws(i,r,o,a,l,"next",e)}function l(e){Ws(i,r,o,a,l,"throw",e)}a(void 0)}))}}var qs=(0,c.Pi)((function(e){var t=e.workspace,n=e.index,r=D().ui.is_mobile,o=uo(),c=o.dashboard,s=o.load_modal,u=o.save_modal,d=c.active_tab,f=c.setActiveTab,m=c.setPreviewOnDialog,h=u.toggleSaveModal,y=u.updateBotName,v=s.dashboard_strategies,_=void 0===v?[]:v,g=s.getRecentFileIcon,b=s.getSaveType,k=s.getSelectedStrategyID,E=s.loadFileFromRecent,w=s.onToggleDeleteDialog,S=s.previewRecentStrategy,T=s.previewed_strategy_id,B=s.selected_strategy_id,O=s.setSelectedStrategyId,x=s.setPreviewedStrategyId,A=i().useRef(null),C=i().useRef(null),I=i().useRef(!1),L=function(e){var t,n=(2,function(e){if(Array.isArray(e))return e}(t=i().useState(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return Ps(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ps(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=n[1],a=function(e){"ESCAPE"===e.key.toUpperCase()&&o(!1)},l=function(t){var n;null!=e&&null!==(n=e.current)&&void 0!==n&&n.contains(t.target)||o(!1)};return i().useEffect((function(){return document.addEventListener("keydown",a,!0),document.addEventListener("click",l,!0),function(){document.removeEventListener("keydown",a,!0),document.removeEventListener("click",l,!0)}}),[]),{is_dropdown_visible:r,setDropdownVisibility:o}}(C),N=L.setDropdownVisibility,R=L.is_dropdown_visible,P=(0,p.isDesktop)(),M=function(e){var t;j.Analytics.trackEvent("ce_bot_builder_form",{action:e,form_source:"ce_bot_dashboard_form",bot_last_modified_time:null==_||null===(t=_[0])||void 0===t?void 0:t.timestamp})};i().useEffect((function(){var e;return(null==_?void 0:_.length)&&0===n&&!I.current&&(e=setTimeout((function(){var e;I.current=!0,null==A||null===(e=A.current)||void 0===e||e.click()}),50)),function(){e&&clearTimeout(e)}}),[_,n]);var F=function(){if(x(t.id),r){var e;m(!0);var n=null===(e=document.getElementsByClassName("tab__dashboard"))||void 0===e?void 0:e[0];(o="#load-strategy__blockly-container",i=n,new Promise((function(e){if(document.querySelector(o))return e(document.querySelector(o));var t=new MutationObserver((function(){document.querySelector(o)&&(e(document.querySelector(o)),t.disconnect())}));t.observe(null!=i?i:document.body,{childList:!0,subtree:!0})}))).then((function(){S(t.id)}))}var o,i;j.Analytics.trackEvent("ce_bot_builder_form",{action:"open",form_source:"bot_dashboard_form-open"})},U=function(){var e=Ys(Js().mark((function e(){return Js().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:f(G.BOT_BUILDER),j.Analytics.trackEvent("ce_bot_builder_form",{action:"close",form_source:"bot_dashboard_form-edit"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Ys(Js().mark((function e(n){return Js().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(t.id),e.t0=n,e.next=e.t0===Us?4:e.t0===Fs?7:e.t0===zs?10:e.t0===js?14:e.t0===Ms?17:20;break;case 4:return x(null==t?void 0:t.id),0===d&&S(t.id),M("choose_your_bot"),e.abrupt("break",21);case 7:return F(),M("choose_your_bot"),e.abrupt("break",21);case 10:return e.next=12,U();case 12:return M("edit_your_bot"),e.abrupt("break",21);case 14:return j.Analytics.trackEvent("ce_bot_dashboard_form",{bot_name:null==t?void 0:t.name,form_source:"ce_bot_dashboard_form"}),y(null==t?void 0:t.name),h(),M("save_your_bot"),M("save_your_bot"),e.abrupt("break",21);case 17:return w(!0),M("delete_your_bot"),e.abrupt("break",21);case 20:return e.abrupt("break",21);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=B===t.id&&R,J=P?"xs":"xxs";return i().createElement("div",{className:z()("load-strategy__recent-item",{"load-strategy__recent-item--selected":T===t.id,"load-strategy__recent-item__loaded":_,"load-strategy__recent-item--minimized":!(null==_||!_.length||P)}),key:t.id,ref:A,onClick:function(e){e.stopPropagation(),R&&N(!1),k(t.id),V(Us)}},i().createElement("div",{className:"load-strategy__recent-item-text"},i().createElement("div",{className:"load-strategy__recent-item-title"},i().createElement(l.Text,{align:"left",as:"p",size:J,line_height:"l"},t.name))),i().createElement("div",{className:"load-strategy__recent-item-time"},i().createElement(l.Text,{align:"left",as:"p",size:J,line_height:"l"},(0,a.timeSince)(t.timestamp))),i().createElement("div",{className:"load-strategy__recent-item-location"},i().createElement(l.Icon,{icon:g(t.save_type),className:z()({"load-strategy__recent-icon--active":t.save_type===_n.R.GOOGLE_DRIVE})}),i().createElement("div",{className:"load-strategy__recent-item-saved"},i().createElement(l.Text,{align:"left",as:"p",size:J,line_height:"l"},b(t.save_type)))),i().createElement(l.DesktopWrapper,null,i().createElement("div",{className:"load-strategy__recent-item__button"},Vs.map((function(e){return i().createElement("div",{key:e.type,className:"load-strategy__recent-item__button",onClick:function(t){t.stopPropagation(),V(e.type)}},i().createElement(l.Icon,{icon:e.icon}))})))),i().createElement(l.MobileWrapper,null,i().createElement("div",{ref:C,onClick:function(e){e.stopPropagation(),N(!R),O(t.id)}},i().createElement(l.Icon,{icon:"IcMenuDots"})),i().createElement("div",{className:z()("load-strategy__recent-item__mobile",{"load-strategy__recent-item__mobile--active":H,"load-strategy__recent-item__mobile--min":_.length<=5})},Gs.map((function(e){return i().createElement("div",{key:e.type,className:"load-strategy__recent-item__group",onClick:function(t){t.stopPropagation(),V(e.type)}},i().createElement("div",null,i().createElement(l.Icon,{icon:e.icon})),i().createElement(l.Text,{color:"prominent",className:"load-strategy__recent-item__group__label",as:"p",size:"xxs"},e.label))})))))}));const Ks=qs;function Xs(e){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xs(e)}function Zs(){Zs=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function s(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),l=new T(o||[]);return r(a,"_invoke",{value:k(e,n,l)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var d={};function p(){}function f(){}function m(){}var h={};c(h,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(B([])));v&&v!==t&&n.call(v,i)&&(h=v);var _=m.prototype=p.prototype=Object.create(h);function g(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function o(r,i,a,l){var c=u(e[r],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==Xs(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===d)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function B(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=m,r(_,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:f,configurable:!0}),f.displayName=c(m,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},g(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(_),c(_,l,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=B,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Qs(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function $s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Qs(i,r,o,a,l,"next",e)}function l(e){Qs(i,r,o,a,l,"throw",e)}a(void 0)}))}}var eu=[(0,M.localize)("Bot name"),(0,M.localize)("Last modified"),(0,M.localize)("Status")];const tu=(0,c.Pi)((function(){var e=uo(),t=e.load_modal,n=e.dashboard,r=t.setDashboardStrategies,o=t.dashboard_strategies,c=n.setStrategySaveType,s=n.strategy_save_type,u=D().ui.is_mobile,d=i().useRef(!1),p=i().useRef(!1);return i().useEffect((function(){c("");var e=function(){var e=$s(Zs().mark((function e(){var t,n;return Zs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.getSavedWorkspaces)();case 2:t=e.sent,r(t),p.current||(n=(null==t?void 0:t.length)>0?"yes":"no",j.Analytics.trackEvent("ce_bot_dashboard_form",{action:n,form_source:"ce_bot_dashboard_form"}),p.current=!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[s]),i().useEffect((function(){if(!(null!=o&&o.length||d.current)){var e=function(){var e=$s(Zs().mark((function e(){var t,n;return Zs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.getSavedWorkspaces)();case 2:n=e.sent,j.Analytics.trackEvent("ce_bot_dashboard_form",{bot_last_modified_time:null==n||null===(t=n[0])||void 0===t?void 0:t.timestamp,form_source:"bot_header_form"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),d.current=!0}}),[]),null!=o&&o.length?i().createElement("div",{className:"load-strategy__container load-strategy__container--has-footer"},i().createElement("div",{className:"load-strategy__recent"},i().createElement("div",{className:"load-strategy__recent__files"},i().createElement("div",{className:"load-strategy__title"},i().createElement(l.Text,{size:u?"xs":"s",weight:"bold"},i().createElement(M.Localize,{i18n_default_text:"Your bots:"}))),i().createElement("div",{className:z()("load-strategy__recent-item load-strategy__recent-item__loaded",{"load-strategy__recent-item__loaded--first-child":!u})},eu.map((function(e){return i().createElement(l.Text,{size:"xs",weight:"bold",key:e},e)}))),i().createElement("div",{className:"load-strategy__recent__files__list"},o.map((function(e,t){return i().createElement(Ks,{key:e.id,workspace:e,index:t})}))),i().createElement(Ds,{setStrategies:r}),i().createElement(l.MobileWrapper,null,i().createElement(Wi,null))))):null}));function nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ru=(0,c.Pi)((function(e){var t,n=e.is_mobile,r=e.has_dashboard_strategies,o=uo(),a=o.dashboard,c=o.load_modal,s=o.quick_strategy,u=a.onCloseDialog,d=a.dialog_options,p=a.is_dialog_open,f=a.setActiveTab,m=a.setFileLoaded,h=a.setPreviewOnPopup,y=a.setOpenSettings,v=a.showVideoDialog,_=c.handleFileChange,g=c.loadFileFromLocal,b=s.setFormVisibility,k=function(e){j.Analytics.trackEvent("ce_bot_builder_form",{shortcut_name:e,form_source:"bot_dashboard_form-shortcut",action:"choose_shortcut"})},E=(2,function(e){if(Array.isArray(e))return e}(t=i().useState(!0))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return nu(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nu(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=E[0],S=E[1],T=i().useRef(null),B=[{type:"my-computer",icon:n?"IcLocal":"IcMyComputer",content:n?(0,M.localize)("Local"):(0,M.localize)("My computer"),method:function(){var e;null==T||null===(e=T.current)||void 0===e||e.click()}},{type:"google-drive",icon:"IcGoogleDriveDbot",content:(0,M.localize)("Google Drive"),method:function(){v({type:"google"})}},{type:"bot-builder",icon:"IcBotBuilder",content:(0,M.localize)("Bot Builder"),method:function(){f(G.BOT_BUILDER),k("bot-builder")}},{type:"quick-strategy",icon:"IcQuickStrategy",content:(0,M.localize)("Quick strategy"),method:function(){f(G.BOT_BUILDER),b(!0),k("quick-strategy"),j.Analytics.trackEvent("ce_bot_quick_strategy_form",{shortcut_name:"quick-strategy",form_source:"bot_dashboard"})}}];return i().useMemo((function(){return i().createElement("div",{className:z()("tab__dashboard__table",{"tab__dashboard__table--minimized":r&&n})},i().createElement("div",{className:z()("tab__dashboard__table__tiles",{"tab__dashboard__table__tiles--minimized":r&&n}),id:"tab__dashboard__table__tiles"},B.map((function(e){var t=e.icon,o=e.content,a=e.method,c=e.type;return i().createElement("div",{key:o,className:z()("tab__dashboard__table__block",{"tab__dashboard__table__block--minimized":r&&n})},i().createElement(l.Icon,{className:z()("tab__dashboard__table__images",{"tab__dashboard__table__images--minimized":r}),width:"8rem",height:"8rem",icon:t,id:t,onClick:function(){a(),function(e){j.Analytics.trackEvent("ce_bot_builder_form",{shortcut_name:e,action:"choose_shortcut",form_source:"ce_bot_dashboard_form"})}(c)}}),i().createElement(l.Text,{color:"prominent",size:n?"xxs":"xs"},o))})),i().createElement("input",{type:"file",ref:T,accept:"application/xml, text/xml",hidden:!0,onChange:function(e){S(_(e,!1)),g(),m(!0),y("import")}}),i().createElement(l.DesktopWrapper,null,i().createElement(l.Dialog,{title:d.title,is_visible:p,onCancel:u,is_mobile_full_width:!0,className:"dc-dialog__wrapper--google-drive",has_close_icon:!0},i().createElement(fo,null))),i().createElement(l.MobileWrapper,null,i().createElement(l.MobileFullPageModal,{is_modal_open:p,className:"load-strategy__wrapper",header:(0,M.localize)("Load strategy"),onClickClose:function(){h(!1),u()},height_offset:"80px",page_overlay:!0},i().createElement("div",{label:"Google Drive",className:"google-drive-label"},i().createElement(fo,null))))),i().createElement(tu,{is_file_supported:w}))}),[p,r])}));var ou=[{label:(0,M.localize)("Welcome to Deriv Bot!"),content:[(0,M.localize)("Ready to automate your trading strategy without writing any code? You’ve come to the right place."),(0,M.localize)("Check out these guides and FAQs to learn more about building your bot:")],link:!1},{label:(0,M.localize)("Guide"),content:[(0,M.localize)("Deriv Bot - your automated trading partner")],link:!0},{label:(0,M.localize)("FAQs"),content:[(0,M.localize)("What is Deriv Bot?"),(0,M.localize)("Where do I find the blocks I need?"),(0,M.localize)("How do I remove blocks from the workspace?")],link:!0}];const iu=(0,c.Pi)((function(){var e=D().ui.is_mobile,t=uo().dashboard,n=t.active_tour,r=t.is_info_panel_visible,o=t.setActiveTab,a=t.setActiveTabTutorial,c=t.setInfoPanelVisibility,s=function(){c(!1),localStorage.setItem("dbot_should_show_info",JSON.stringify(Date.now()))},u=function(){return i().createElement("div",{className:"db-info-panel"},i().createElement("div",{"data-testid":"close-icon",className:"db-info-panel__close-action",onClick:s},i().createElement(l.Icon,{width:"1rem",height:"1rem",icon:"IcCloseIconDbot"})),ou.map((function(t){var n=t.label,r=t.content,c=t.link;return i().createElement("div",{key:"".concat(n,"-").concat(r)},i().createElement(l.Text,{color:"prominent",line_height:"xxl",size:e?"s":"m",weight:"bold",as:"h1"},n),r.map((function(t){return i().createElement(l.Text,{key:"info-panel-tour".concat(t),className:z()("db-info-panel__card",{"db-info-panel__content":c}),color:"prominent",line_height:"xl",as:"p",onClick:function(){return function(e,t){return{tutorial_link:e?o(G.TUTORIAL):null,tutorial_label:a("Guide"===t?0:1)}}(c,n)},size:e?"xxs":"s"},t)})))})))};return i().createElement(i().Fragment,null,i().createElement(l.DesktopWrapper,null,!n&&i().createElement("div",{className:z()("tab__dashboard__info-panel",{"tab__dashboard__info-panel--active":r})},u())),i().createElement(l.MobileWrapper,null,i().createElement(l.Modal,{className:"statistics__modal statistics__modal--mobile",is_open:r,toggleModal:s,width:"440px"},i().createElement(l.Modal.Body,null,u()))))})),au=(0,Yi.observer)((function(e){var t=e.setActiveTab,n=e.setActiveTabTutorial;return i().createElement("div",{className:"tab__dashboard__home__retrigger"},i().createElement("button",{"data-testid":"btn-user-guide",onClick:function(){j.Analytics.trackEvent("ce_bot_dashboard_form",{action:"push_user_guide",form_source:"ce_bot_dashboard_form"}),j.Analytics.trackEvent("ce_bot_tutorial_form",{action:"push_user_guide",form_source:"bot_dashboard_form"}),t(G.TUTORIAL),n(0)}},i().createElement(l.Icon,{className:"tab__dashboard__home__retrigger__icon",icon:"IcDbotUserGuide"}),i().createElement(l.Text,{size:"xs",line_height:"s",className:"tab__dashboard__home__retrigger__text"},(0,M.localize)("User Guide"))))}));var lu=function(e){var t=e.is_mobile,n=e.has_dashboard_strategies;return i().createElement("div",{className:z()("tab__dashboard__header",{"tab__dashboard__header--not-listed":!n&&t})},i().createElement(l.Text,{color:"prominent",line_height:"xxl",size:t?"s":"m",weight:"bold"},(0,M.localize)("Load or build your bot")))},cu=function(e){var t=e.handleTabChange;return i().createElement(l.MobileWrapper,null,i().createElement("div",null,i().createElement(Cs,{handleTabChange:t})))},su=function(e){var t=e.is_mobile,n=e.has_dashboard_strategies;return i().createElement("div",{className:z()("tab__dashboard__description",{"tab__dashboard__description__loaded--listed":n&&!t,"tab__dashboard__description__loaded--not-listed":!n||!n&&t})},i().createElement(l.Text,{color:"prominent",line_height:"s",size:t?"xxs":"s"},(0,M.localize)("Import a bot from your computer or Google Drive, build it from scratch, or start with a quick strategy.")))};const uu=(0,c.Pi)((function(e){var t=e.handleTabChange,n=D().ui,r=uo(),o=r.load_modal,a=r.dashboard,c=o.dashboard_strategies,s=a.setActiveTab,u=a.setActiveTabTutorial,d=a.active_tab,p=a.active_tour,f=!(null==c||!c.length),m=n.is_mobile,h=i().useRef(!1);return i().useEffect((function(){if(!h.current)return h.current=!0,j.Analytics.trackEvent("ce_bot_dashboard_form",{action:"open",form_source:"ce_bot_dashboard_form"}),function(){j.Analytics.trackEvent("ce_bot_dashboard_form",{action:"close",form_source:"ce_bot_dashboard_form"})}}),[]),i().createElement(i().Fragment,null,i().createElement("div",{className:z()("tab__dashboard",{"tab__dashboard--tour-active":p})},i().createElement("div",{className:"tab__dashboard__content"},i().createElement("div",{className:z()("tab__dashboard__centered",{"tab__dashboard__centered--listed":!m&&f,"tab__dashboard__centered--not-listed":!f})},!f&&!m&&i().createElement(lu,{is_mobile:m,has_dashboard_strategies:f}),i().createElement(l.DesktopWrapper,null,!f&&i().createElement(au,{setActiveTab:s,setActiveTabTutorial:u})),i().createElement("div",null,i().createElement("div",{className:z()({"tab__dashboard__mobile-container":m,"tab__dashboard__mobile-container--minimized":m&&f})},m&&!f&&i().createElement(lu,{is_mobile:m,has_dashboard_strategies:f}),(!m||m&&f)&&i().createElement(su,{is_mobile:m,has_dashboard_strategies:f}),i().createElement(cu,{handleTabChange:t,has_dashboard_strategies:f})),m&&!f&&i().createElement(su,{is_mobile:m,has_dashboard_strategies:f})),i().createElement(ru,{has_dashboard_strategies:f,is_mobile:m})),f&&!m&&i().createElement("div",{className:"tab__dashboard__preview"},i().createElement(Cs,{handleTabChange:t})))),i().createElement(iu,null),0===d&&i().createElement(Bs,{is_mobile:m}))}));var du=n(47111),pu=n.n(du);const fu=(0,c.Pi)((function(){var e=uo().dashboard,t=e.show_toast,n=e.toast_message,r=e.setOpenSettings;i().useEffect((function(){setTimeout((function(){r(n,!1)}),3e3)}),[t]);var o=document.getElementById("popup_root");return o&&t?pu().createPortal(i().createElement("div",{className:"import-notification"},i().createElement("div",null,i().createElement(l.Toast,null,"delete"===n?(0,M.localize)("You’ve successfully deleted a bot."):(0,M.localize)("You’ve successfully imported a bot.")))),o):null})),mu=(0,c.Pi)((function(){var e=uo().dashboard.faq_search_value;return i().createElement("div",{className:"dc-tabs__content dc-tabs__content--no-result"},i().createElement(l.Icon,{icon:"IcDbotNoSearchResult",size:80}),i().createElement(l.Text,{className:"dc-tabs__content--no-result__title",as:"h1",weight:"bold",line_height:"xxs"},i().createElement(M.Localize,{i18n_default_text:"No results found"})),i().createElement(l.Text,{className:"dc-tabs__content--no-result__content",line_height:"xxs"},i().createElement(M.Localize,{i18n_default_text:'We couldn’t find anything matching "'.concat(e,'".')})),i().createElement(l.Text,{className:"dc-tabs__content--no-result__content",line_height:"xxs"},i().createElement(M.Localize,{i18n_default_text:"Try another term."})))}));var hu=(0,c.Pi)((function(e){var t,n=e.quick_strategy_content,r=e.tutorial_selected_strategy,o=e.setTutorialSelectedStrategy,a=D().ui.is_mobile,c=uo().quick_strategy.selected_strategy,s=qn[r||c],u=a?"xxs":"s";return i().createElement(i().Fragment,null,""===r?i().createElement("div",{className:"tutorials-quick-strategy__cards"},null==n?void 0:n.map((function(e,t){var n=e.qs_name,r=e.content,a=e.type;return i().createElement("div",{className:"tutorials-quick-strategy__placeholder",key:a,onClick:function(){return o(n)},tabIndex:t,onKeyDown:function(e){"Enter"===e.key&&o(n)}},i().createElement("div",null,i().createElement("div",{className:"tutorials-quick-strategy__placeholder__title"},i().createElement(l.Text,{align:"center",weight:"bold",color:"prominent",line_height:"s",size:u},a)),i().createElement("div",{className:"tutorials-quick-strategy__placeholder__content"},i().createElement("ul",null,r.map((function(e){return i().createElement("li",{key:e},i().createElement(l.Text,{align:"center",color:"prominent",line_height:"s",size:u,className:"tutorials-quick-strategy__placeholder__content__text"},e))}))))),i().createElement(l.Icon,{className:"tutorials-quick-strategy__placeholder__icon",icon:"IcChevronRightBold"}))}))):i().createElement(i().Fragment,null,i().createElement("div",{className:"tutorials-quick-strategy__breadcrumb"},i().createElement(l.Text,{className:"tutorials-quick-strategy__breadcrumb__clickable",color:"prominent",line_height:"s",size:u,as:"div",onClick:function(){o("")}},i().createElement(M.Localize,{i18n_default_text:"Quick strategy guides >"})),i().createElement(l.Text,{color:"less-prominent",line_height:"s",size:u,as:"div"},i().createElement(M.Localize,{i18n_default_text:"About ".concat(qn[r].label)}))),i().createElement("div",null,null==s||null===(t=s.long_description)||void 0===t?void 0:t.map((function(e,t){return i().createElement(Oo,{key:t,data:e,font_size:u})})))))}));const yu=hu;function vu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const _u=function(){var e,t=D().ui.is_mobile,n=(2,function(e){if(Array.isArray(e))return e}(e=i().useState(""))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return vu(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vu(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=n[1];return i().createElement("div",{className:"tutorials-quick-strategy"},""===r&&i().createElement(l.Text,{className:"tutorials-quick-strategy__title",weight:"bold",color:"prominent",line_height:"s",size:t?"xxs":"s",as:"div"},(0,M.localize)("Quick strategy guides")),i().createElement(yu,{tutorial_selected_strategy:r,setTutorialSelectedStrategy:o,quick_strategy_content:se}))};function gu(){return gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gu.apply(this,arguments)}var bu=function(e){var t=e.type,n=e.content,r=e.src,o=e.imageclass,a=e.is_mobile;return"image"===t?i().createElement("img",{src:r,className:o}):i().createElement(l.Text,{as:"p",size:a?"xs":"s",line_height:a?"xl":"xxl",className:"faq__description",weight:"normal",key:n,dangerouslySetInnerHTML:{__html:n}})};const ku=function(e){var t=e.faq_list,n=D().ui,r=uo().dashboard.active_tab_tutorials,o=n.is_mobile,a=i().useRef(null),c=i().useRef(null),s=function(){c.current=setTimeout((function(){var e,t=null===(e=a.current)||void 0===e?void 0:e.querySelector(".dc-accordion__item--open"),n=null==t?void 0:t.previousElementSibling;if(a.current&&t){var r=n?n.offsetTop-80:0;!function(e,t){e&&e.scrollTo({top:t,behavior:"smooth"})}(null==a?void 0:a.current,r)}null!=c&&c.current&&clearTimeout(c.current)}),5)},u=function(e){"Enter"===e.key&&s()};return i().useEffect((function(){return function(){c.current&&clearTimeout(c.current)}}),[]),i().useMemo((function(){return i().createElement("div",{"data-testid":"id-faq__wrapper"},i().createElement("div",{className:"faq__wrapper",ref:a},(null==t?void 0:t.length)>0&&i().createElement(i().Fragment,null,2===r&&i().createElement(l.Text,{as:"p",line_height:"xl",className:"faq__wrapper__header",weight:"bold"},i().createElement(M.Localize,{i18n_default_text:"FAQ"})),i().createElement("div",{"data-testid":"id-accordion-test",onClick:s,onKeyDown:u},i().createElement(l.Accordion,{className:"faq__wrapper__content",list:t.map((function(e){var t=e.title,n=e.description;return{header:i().createElement(l.Text,{as:"p",line_height:"xl",className:"faq__title",weight:"bold",key:t,size:o?"xs":"s"},t),content:null==n?void 0:n.map((function(e,t){return i().createElement(bu,gu({},e,{is_mobile:o,key:"faq-description-item-".concat(null==e?void 0:e.content,"-").concat(t)}))}))}})),icon_close:"",icon_open:""})))))}),[t])},Eu=function(e){var t=e.guide_tab_content,n=e.video_tab_content,r=e.is_dialog_open,o=D().ui.is_mobile,a=uo().dashboard,c=a.dialog_options,s=a.onCloseDialog,u=a.setActiveTab,d=a.setTourDialogVisibility,p=a.showVideoDialog,f=a.setActiveTour,m=a.setShowMobileTourDialog,h=function(e){var t;"OnBoard"===e?(delete(t=q()||{}).onboard_tour_token,localStorage.setItem("dbot_settings",JSON.stringify(t)),u(G.DASHBOARD),o&&f("onboarding"),d(!0)):(u(G.BOT_BUILDER),o&&f("bot_builder"),d(!0),o&&m(!0))},y=function(e){"Enter"===e.key&&h("OnBoard")},v=t.length>0||n.length>0;return i().useMemo((function(){return v&&i().createElement("div",{className:"tutorials-wrap"},t&&t.length>0&&i().createElement("div",{className:"tutorials-wrap__group"},i().createElement("div",{className:"tutorials-wrap__group__title"},i().createElement(l.Text,{align:"left",weight:"bold",color:"prominent",line_height:"s",size:o?"xxs":"s"},i().createElement(M.Localize,{i18n_default_text:"Step-by-step guides"}))),i().createElement("div",{className:"tutorials-wrap__group__guides"},null==t?void 0:t.map((function(e){var t=e.id,n=e.content,r=e.src,a=e.subtype;return i().createElement("div",{className:"tutorials-wrap__group__cards",key:t},i().createElement("div",{className:"tutorials-wrap--tour",onClick:function(){return h(a)},onKeyDown:y},i().createElement("div",{className:z()("tutorials-wrap__placeholder__tours",{"tutorials-wrap__placeholder--disabled":!r}),style:{backgroundImage:"url(".concat(r,")")}})),i().createElement(l.Text,{align:"center",color:"prominent",line_height:"s",size:o?"xxs":"s"},n))})))),n&&n.length>0&&i().createElement("div",{className:"tutorials-wrap__group"},i().createElement("div",{className:"tutorials-wrap__group__title"},i().createElement(l.Text,{align:"left",weight:"bold",color:"prominent",line_height:"s",size:o?"xxs":"s"},i().createElement(M.Localize,{i18n_default_text:"Videos on Deriv Bot"}))),i().createElement("div",{className:"tutorials-wrap__group__guides"},null==n?void 0:n.map((function(e){var t=e.content,n=e.src,r=e.url,a=e.id;return i().createElement("div",{className:"tutorials-wrap__group__cards",key:a},i().createElement("div",{className:z()("tutorials-wrap__placeholder",{"tutorials-wrap__placeholder--disabled":!r}),style:{backgroundImage:"url(".concat(n,")")}},i().createElement("div",{className:"tutorials-wrap__placeholder__button-group"},i().createElement(l.Icon,{className:"tutorials-wrap__placeholder__button-group--play",width:"4rem",height:"4rem",icon:"IcPlayOutline",onClick:function(){return p({type:"url",url:r})}}))),i().createElement("div",{className:"tutorials-wrap__placeholder__description"},i().createElement(l.Text,{align:"left",color:"prominent",line_height:"s",size:o?"xxs":"s"},t)))})))),i().createElement(l.Dialog,{title:c.title,is_visible:r,cancel_button_text:(0,M.localize)("Cancel"),onCancel:s,confirm_button_text:(0,M.localize)("OK"),onConfirm:s,is_mobile_full_width:!0,className:"dc-dialog",has_close_icon:!0,onClose:s},i().createElement("iframe",{width:"100%",height:"100%",src:c.url,frameBorder:"0",allowFullScreen:!0})))}),[t,n,r])},wu=(0,c.Pi)((function(e){var t=e.faq_value,n=e.setFaqSearchContent,r=e.prev_active_tutorials,o=uo().dashboard,a=i().useRef(null),l=o.setActiveTabTutorial,c=o.filterTuotrialTab,s=i().useCallback(ti()((function(e){c(e),l(3),j.Analytics.trackEvent("ce_bot_tutorial_form",{action:"search",search_string:e}),""===e&&l(r)}),J,{trailing:!0,leading:!1}),[]);return i().createElement(i().Fragment,null,i().createElement("input",{ref:a,"data-testid":"id-test-input-search",type:"text",placeholder:(0,M.localize)("Search"),className:"dc-tabs__wrapper__group__search-input",onChange:function(e){return function(e){n(e.target.value),s(e.target.value)}(e)},value:t}))})),Su=(0,c.Pi)((function(e){var t=e.tutorial_tabs,n=e.prev_active_tutorials,r=uo().dashboard,o=r.active_tab_tutorials,a=r.faq_search_value,c=r.setActiveTabTutorial,s=r.setFAQSearchValue,u=r.resetTutorialTabContent,d=null==a?void 0:a.toLowerCase();return i().useEffect((function(){""!==a&&c(3)}),[o]),i().createElement("div",{className:"dc-tabs__wrapper"},i().createElement("div",{className:"dc-tabs__wrapper__group"},i().createElement(l.Icon,{className:"search-icon",data_testid:"id-test-search",width:"1.6rem",height:"1.6rem",icon:"IcSearch"}),i().createElement(wu,{faq_value:a,setFaqSearchContent:s,prev_active_tutorials:n}),d&&i().createElement(l.Icon,{className:"close-icon",data_testid:"id-test-close",width:"1.6rem",height:"1.6rem",icon:"IcDbotClose",onClick:function(){s(""),u(),c(n)}})),i().createElement(l.Tabs,{className:z()("tutorials",{"tutorials-guide":0===n,"tutorials-faq":1===n,"tutorials-qs-guide":2===n,"tutorials-search":3===o}),active_index:o,onTabItemClick:c,top:!0},t.map((function(e){var t=e.label,n=e.content;return n&&i().createElement("div",{label:t,key:"".concat(n,"_").concat(t)},n)}))))}));function Tu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bu(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ou=(0,c.Pi)((function(e){var t=e.tutorial_tabs,n=e.prev_active_tutorials,r=uo().dashboard,o=r.active_tab_tutorials,a=r.faq_search_value,c=r.setActiveTabTutorial,s=r.setFAQSearchValue,u=r.resetTutorialTabContent,d=null==a?void 0:a.toLowerCase(),p=Tu(i().useState({label:"",content:""}),2),f=p[0],m=p[1],h=Tu(i().useState(!1),2),y=h[0],v=h[1];i().useEffect((function(){d&&v(!0),m(t[o]||{})}),[t]);var _=i().useCallback((function(e){var n=e.target;return c(t.findIndex((function(e){return e.label===n.value})))}),[o]);return i().useEffect((function(){var e=document.getElementById("dt_components_select-native_select-tag");e&&e.removeChild(null==e?void 0:e.options[3])}),[]),i().createElement("div",{className:"tutorials-mobile","data-testid":"test-tutorials-mobile"},i().createElement("div",{className:z()("tutorials-mobile__select",{"tutorials-mobile__select--show-search":y,"tutorials-mobile__select--hide-search":!y}),"data-testid":y?"id-search-visible":"id-search-hidden"},i().createElement(l.Icon,{onClick:function(){s(""),v(!y),u(),c(n),m(t[n]||{})},data_testid:"id-arrow-left-bold",className:"arrow-left-bold",icon:"IcArrowLeftBold"}),i().createElement(wu,{faq_value:a,setFaqSearchContent:s,prev_active_tutorials:n}),d&&i().createElement(l.Icon,{data_testid:"id-close-icon",className:"close-icon","data-testid":"id-test-search",width:"1.6rem",height:"1.6rem",icon:"IcDbotClose",onClick:function(){c(3),s(""),c(n),u()}}),i().createElement(l.SelectNative,{data_testid:"id-tutorials-select",className:"dc-tabs__wrapper__group__search-input--active",list_items:t.map((function(e,t){var n=e.label;return{id:t,value:n,text:n}})),value:f.label,label:"",should_show_empty_option:!1,onChange:_}),i().createElement(l.Icon,{onClick:function(){v(!y)},className:"search-icon",icon:"IcSearch"})),i().createElement("div",{className:z()({"tutorials-mobile__guide":0===o,"tutorials-mobile__faq":1===o,"tutorials-mobile__qs-guide":2===n,"tutorials-mobile__search":3===o})},f.content))}));function xu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Au=(0,c.Pi)((function(){var e,t=D().ui.is_mobile,n=uo().dashboard,r=(2,function(e){if(Array.isArray(e))return e}(e=i().useState(0))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return xu(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xu(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1],l=n.active_tab_tutorials,c=n.video_tab_content,s=n.guide_tab_content,u=n.faq_tab_content,d=n.is_dialog_open;i().useEffect((function(){return j.Analytics.trackEvent("ce_bot_tutorial_form",{action:"open",form_source:"bot_header_form"}),function(){j.Analytics.trackEvent("ce_bot_tutorial_form",{action:"close",form_source:"bot_header_form"})}}),[]),i().useEffect((function(){[0,1,2].includes(l)&&a(l)}),[l]);var p=s.length>0||c.length>0||u.length>0,f=[{label:(0,M.localize)("Guide"),content:i().createElement(Eu,{is_dialog_open:d,guide_tab_content:s,video_tab_content:c})},{label:(0,M.localize)("FAQ"),content:i().createElement(ku,{faq_list:u})},{label:(0,M.localize)("Quick strategy guides"),content:i().createElement(_u,{quick_strategy_content:se})},{label:(0,M.localize)("Search"),content:p?i().createElement(i().Fragment,null,i().createElement(Eu,{is_dialog_open:d,guide_tab_content:s,video_tab_content:c}),i().createElement(ku,{faq_list:u})):i().createElement(mu,null)}];return t?i().createElement(Ou,{tutorial_tabs:f,prev_active_tutorials:o}):i().createElement(Su,{tutorial_tabs:f,prev_active_tutorials:o})}));var Cu=(0,c.Pi)((function(){var e,t,n=uo(),r=n.dashboard,c=n.load_modal,s=n.run_panel,u=n.quick_strategy,d=n.summary_card,p=r.active_tab,f=r.active_tour,m=r.is_chart_modal_visible,h=r.setActiveTab,y=r.setWebSocketState,v=r.setActiveTour,_=r.setTourDialogVisibility,g=c.onEntered,b=c.dashboard_strategies,k=s.is_dialog_open,E=s.is_drawer_open,w=s.dialog_options,S=s.onCancelButtonClick,T=s.onCloseDialog,B=s.onOkButtonClick,O=u.is_open,x=w,A=x.cancel_button_text,C=x.ok_button_text,I=x.title,L=x.message,N=d.clear,R=G.DASHBOARD,P=G.BOT_BUILDER,F=i().useRef(!0),U=D().ui,V=U.url_hashed_values,J=U.is_mobile,W=["dashboard","bot_builder","chart","tutorial"],Y=(e=p,(t=null==V?void 0:V.split("#")[1])?Number(W.indexOf(String(t))):e),q=function(){var e=hs.D.getConnectionStatus();null===document.getElementById("db-animation__stop-button")||"Closed"!==e&&"Closing"!==e||(fs.Z.terminateBot(),N(),y(!1))};i().useEffect((function(){window.addEventListener("focus",q)}),[]),i().useEffect((function(){O&&_(!1),F.current?(h(Number(Y)),J&&K(Number(Y)),F.current=!1):window.location.hash=W[p]||W[0],me[p]!==f&&v("")}),[p]),i().useEffect((function(){p===P&&(j.Analytics.trackEvent("ce_bot_builder_form",{action:"open",form_source:"bot_header_form"}),E?ms(400,-748):ms(20),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),500))}),[p,E]),(0,o.useEffect)((function(){var e;return b.length>0&&(e=setTimeout((function(){(0,a.updateWorkspaceName)()}))),function(){e&&clearTimeout(e)}}),[b,p]);var K=i().useCallback((function(e){h(e);var t=H[e];if(t){var n=document.getElementById(t);null==n||n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}),[p]);return i().createElement(i().Fragment,null,i().createElement("div",{className:"dashboard__main"},i().createElement("div",{className:z()("dashboard__container",{"dashboard__container--active":f&&p===R&&J})},i().createElement(l.Tabs,{active_index:p,className:"dashboard__tabs",onTabItemChange:g,onTabItemClick:K,top:!0},i().createElement("div",{icon:"IcDashboardComponentTab",label:i().createElement(M.Localize,{i18n_default_text:"Dashboard"}),id:"id-dbot-dashboard"},i().createElement(uu,{handleTabChange:K})),i().createElement("div",{icon:"IcBotBuilderTabIcon",label:i().createElement(M.Localize,{i18n_default_text:"Bot Builder"}),id:"id-bot-builder"}),i().createElement("div",{icon:"IcChartsTabDbot",label:i().createElement(M.Localize,{i18n_default_text:"Charts"}),id:m?"id-charts--disabled":"id-charts"},i().createElement(ps,null)),i().createElement("div",{icon:"IcTutorialsTabs",label:i().createElement(M.Localize,{i18n_default_text:"Tutorials"}),id:"id-tutorials"},i().createElement("div",{className:"tutorials-wrapper"},i().createElement(Au,null)))))),i().createElement(l.DesktopWrapper,null,i().createElement("div",{className:"dashboard__run-strategy-wrapper"},i().createElement(vs,null),i().createElement(ys,null)),i().createElement(bs,null)),i().createElement(l.MobileWrapper,null,!O&&i().createElement(ys,null)),i().createElement(l.Dialog,{cancel_button_text:A||(0,M.localize)("Cancel"),className:"dc-dialog__wrapper--fixed",confirm_button_text:C||(0,M.localize)("OK"),has_close_icon:!0,is_mobile_full_width:!1,is_visible:k,onCancel:S,onClose:T,onConfirm:B||T,portal_element_id:"modal_root",title:I},L),i().createElement(fu,null))}));const Iu=Cu;function Lu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Nu=(0,c.Pi)((function(){var e,t=D().common.network_status,n=(2,function(e){if(Array.isArray(e))return e}(e=i().useState(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return Lu(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lu(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=n[1],a=t.message,c=t.status,s="popup_root";return document.getElementById(s)&&a?(r||"online"===c?r&&"online"===c&&setTimeout((function(){o(!1)}),1500):o(!0),pu().createPortal(i().createElement(l.MobileWrapper,null,i().createElement(l.Toast,{className:z()({"dc-toast--blinker":"blinker"===c}),is_open:r,timeout:0,type:"error"},a)),document.getElementById(s))):null})),Ru=(0,c.Pi)((function(){var e=uo().route_prompt_dialog,t=e.continueRoute,n=e.should_show,r=e.is_confirmed,o=e.last_location,a=e.onCancel,c=e.onConfirm;return i().useEffect(t,[r,o,t]),i().createElement(l.Dialog,{title:(0,M.localize)("Leaving already?"),confirm_button_text:(0,M.localize)("Yes, I'll come back later"),cancel_button_text:(0,M.localize)("No, I'll stay"),onConfirm:c,onCancel:a,is_visible:n,has_close_icon:!1},i().createElement(M.Localize,{i18n_default_text:"If you leave, your current contract will be completed, but your bot will stop running immediately."}))})),Du=(0,c.Pi)((function(){var e=uo().blockly_store.is_loading;return i().createElement(i().Fragment,null,e&&i().createElement("div",{className:"bot__loading","data-testid":"blockly-loader"},i().createElement(l.Loading,null)))}));function Pu(e){return Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pu(e)}function zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ju(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zu(Object(n),!0).forEach((function(t){Mu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mu(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Pu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Pu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Pu(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Uu=(0,c.Pi)((function(){var e,t=(2,function(e){if(Array.isArray(e))return e}(e=i().useState(!0))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,s=!1;try{for(i=(n=n.call(e)).next,0;!(c=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e)||function(e,t){if(e){if("string"==typeof e)return Fu(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fu(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=t[0],r=t[1],o=D(),c=o.common,s=o.client,u=o.ui.is_dark_mode_on,d=uo(),p=d.app,f=d.transactions,m=p.showDigitalOptionsMaltainvestError,h=ju(ju({},d),{},{core:ju({},o)}),y=f.recovered_transactions,v=f.recoverPendingContracts,_=i().useRef(!1),g=i().useRef(null),b=function(e){var t=e.data;if("proposal_open_contract"===(null==t?void 0:t.msg_type)&&(null==t||!t.error)){var n=t.proposal_open_contract;"open"===(null==n?void 0:n.status)||null!=y&&y.includes(null==n?void 0:n.contract_id)||v(n)}};i().useEffect((function(){var e,t;return null!==a.api_base&&void 0!==a.api_base&&a.api_base.api&&!_.current&&(_.current=!0,g.current=null===(e=a.api_base.api)||void 0===e||null===(t=e.onMessage())||void 0===t?void 0:t.subscribe(b)),function(){_.current&&g.current&&(_.current=!1,g.current.unsubscribe())}}),[null===a.api_base||void 0===a.api_base?void 0:a.api_base.api]),i().useEffect((function(){(0,a.setColors)(u)}),[u]),i().useEffect((function(){m(s,c)}),[s.is_options_blocked,s.account_settings.country_code,s.clients_country]);var k=function(){Gt.init(h),a.ServerTime.init(c),p.setDBotEngineStores(h),a.ApiHelpers.setInstance(p.api_helpers_store)},E=function(){k(),a.ApiHelpers.instance.active_symbols.retrieveActiveSymbols(!0).then((function(){r(!1)}))};return i().useEffect((function(){k(),r(!0),s.is_logged_in||E()}),[]),s.is_landing_company_loaded&&E(),i().useEffect((function(){var e=function(){r(!1)};return window.addEventListener("offline",e),function(){window.removeEventListener("offline",e)}}),[]),n?i().createElement(l.Loading,null):i().createElement(i().Fragment,null,i().createElement(Du,null),i().createElement("div",{className:"bot-dashboard bot"},i().createElement(Kc,null),i().createElement($c,null),i().createElement(Iu,null),i().createElement(Nu,null),i().createElement(bl,null),i().createElement(kl,null),i().createElement(Ru,null),i().createElement(qc,null)))})),Vu=function(e){var t=e.children,n=e.store,r=e.WS;return i().createElement(R,{store:n},i().createElement(so,{ws:r},t))},Gu=function(e){var t=e.passthrough,n=t.root_store,r=t.WS;return i().useEffect((function(){var e;e=window.innerHeight,document.body.style.setProperty("--vh","".concat(e,"px"))}),[]),i().createElement(Vu,{store:n,WS:r},i().createElement(Uu,null))}},96616:(e,t,n)=>{var r={"./af":95191,"./af.js":95191,"./ar":54358,"./ar-dz":71727,"./ar-dz.js":71727,"./ar-kw":98279,"./ar-kw.js":98279,"./ar-ly":87895,"./ar-ly.js":87895,"./ar-ma":11987,"./ar-ma.js":11987,"./ar-sa":52796,"./ar-sa.js":52796,"./ar-tn":12386,"./ar-tn.js":12386,"./ar.js":54358,"./az":57452,"./az.js":57452,"./be":79053,"./be.js":79053,"./bg":65428,"./bg.js":65428,"./bm":21569,"./bm.js":21569,"./bn":56212,"./bn-bd":24635,"./bn-bd.js":24635,"./bn.js":56212,"./bo":13667,"./bo.js":13667,"./br":192,"./br.js":192,"./bs":51802,"./bs.js":51802,"./ca":19118,"./ca.js":19118,"./cs":39990,"./cs.js":39990,"./cv":30557,"./cv.js":30557,"./cy":4227,"./cy.js":4227,"./da":95406,"./da.js":95406,"./de":87994,"./de-at":44139,"./de-at.js":44139,"./de-ch":86591,"./de-ch.js":86591,"./de.js":87994,"./dv":94649,"./dv.js":94649,"./el":14453,"./el.js":14453,"./en-au":48428,"./en-au.js":48428,"./en-ca":36972,"./en-ca.js":36972,"./en-gb":13224,"./en-gb.js":13224,"./en-ie":18843,"./en-ie.js":18843,"./en-il":32732,"./en-il.js":32732,"./en-in":76579,"./en-in.js":76579,"./en-nz":29851,"./en-nz.js":29851,"./en-sg":70442,"./en-sg.js":70442,"./eo":10654,"./eo.js":10654,"./es":63621,"./es-do":68791,"./es-do.js":68791,"./es-mx":67278,"./es-mx.js":67278,"./es-us":60717,"./es-us.js":60717,"./es.js":63621,"./et":72404,"./et.js":72404,"./eu":62944,"./eu.js":62944,"./fa":30496,"./fa.js":30496,"./fi":98137,"./fi.js":98137,"./fil":32872,"./fil.js":32872,"./fo":6545,"./fo.js":6545,"./fr":49090,"./fr-ca":13049,"./fr-ca.js":13049,"./fr-ch":12338,"./fr-ch.js":12338,"./fr.js":49090,"./fy":95088,"./fy.js":95088,"./ga":77812,"./ga.js":77812,"./gd":8374,"./gd.js":8374,"./gl":63649,"./gl.js":63649,"./gom-deva":52674,"./gom-deva.js":52674,"./gom-latn":44948,"./gom-latn.js":44948,"./gu":24033,"./gu.js":24033,"./he":10175,"./he.js":10175,"./hi":58055,"./hi.js":58055,"./hr":41678,"./hr.js":41678,"./hu":85111,"./hu.js":85111,"./hy-am":26530,"./hy-am.js":26530,"./id":19126,"./id.js":19126,"./is":11696,"./is.js":11696,"./it":98710,"./it-ch":38821,"./it-ch.js":38821,"./it.js":98710,"./ja":93974,"./ja.js":93974,"./jv":70648,"./jv.js":70648,"./ka":54731,"./ka.js":54731,"./kk":43501,"./kk.js":43501,"./km":84398,"./km.js":84398,"./kn":91825,"./kn.js":91825,"./ko":13729,"./ko.js":13729,"./ku":19670,"./ku.js":19670,"./ky":78797,"./ky.js":78797,"./lb":50627,"./lb.js":50627,"./lo":65859,"./lo.js":65859,"./lt":80355,"./lt.js":80355,"./lv":16594,"./lv.js":16594,"./me":45324,"./me.js":45324,"./mi":11689,"./mi.js":11689,"./mk":61308,"./mk.js":61308,"./ml":85241,"./ml.js":85241,"./mn":76320,"./mn.js":76320,"./mr":96771,"./mr.js":96771,"./ms":20503,"./ms-my":77748,"./ms-my.js":77748,"./ms.js":20503,"./mt":55534,"./mt.js":55534,"./my":62727,"./my.js":62727,"./nb":7550,"./nb.js":7550,"./ne":49899,"./ne.js":49899,"./nl":41228,"./nl-be":31225,"./nl-be.js":31225,"./nl.js":41228,"./nn":97130,"./nn.js":97130,"./oc-lnc":93130,"./oc-lnc.js":93130,"./pa-in":91282,"./pa-in.js":91282,"./pl":28190,"./pl.js":28190,"./pt":41549,"./pt-br":78135,"./pt-br.js":78135,"./pt.js":41549,"./ro":307,"./ro.js":307,"./ru":89272,"./ru.js":89272,"./sd":79248,"./sd.js":79248,"./se":74969,"./se.js":74969,"./si":65522,"./si.js":65522,"./sk":61581,"./sk.js":61581,"./sl":56428,"./sl.js":56428,"./sq":34611,"./sq.js":34611,"./sr":19821,"./sr-cyrl":20185,"./sr-cyrl.js":20185,"./sr.js":19821,"./ss":35029,"./ss.js":35029,"./sv":80939,"./sv.js":80939,"./sw":73107,"./sw.js":73107,"./ta":72304,"./ta.js":72304,"./te":72550,"./te.js":72550,"./tet":99717,"./tet.js":99717,"./tg":87669,"./tg.js":87669,"./th":94959,"./th.js":94959,"./tk":92661,"./tk.js":92661,"./tl-ph":52234,"./tl-ph.js":52234,"./tlh":94120,"./tlh.js":94120,"./tr":81111,"./tr.js":81111,"./tzl":53080,"./tzl.js":53080,"./tzm":88246,"./tzm-latn":25385,"./tzm-latn.js":25385,"./tzm.js":88246,"./ug-cn":48777,"./ug-cn.js":48777,"./uk":2014,"./uk.js":2014,"./ur":45953,"./ur.js":45953,"./uz":89716,"./uz-latn":87791,"./uz-latn.js":87791,"./uz.js":89716,"./vi":99816,"./vi.js":99816,"./x-pseudo":94450,"./x-pseudo.js":94450,"./yo":22556,"./yo.js":22556,"./zh-cn":7414,"./zh-cn.js":7414,"./zh-hk":50824,"./zh-hk.js":50824,"./zh-mo":88589,"./zh-mo.js":88589,"./zh-tw":63285,"./zh-tw.js":63285};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=96616},27328:(e,t,n)=>{var r={"./1_3_2_6.xml":[298,217],"./dalembert.xml":[29022,406],"./dalembert_max-stake.xml":[41960,917],"./martingale.xml":[41732,101],"./martingale_max-stake.xml":[62387,784],"./oscars_grind.xml":[86373,113],"./oscars_grind_max-stake.xml":[36065,688],"./reverse_dalembert.xml":[40010,172],"./reverse_martingale.xml":[91688,54]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((()=>n(o)))}o.keys=()=>Object.keys(r),o.id=27328,e.exports=o}}]);